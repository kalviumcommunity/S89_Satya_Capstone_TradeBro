import{j as e,F as w,a as v,b as E,c as C,d as R}from"./index-B4wu8Zo6.js";import{r as o}from"./vendor-BKU87Gzz.js";import{m as g,A as P}from"./ui-BifNPMKY.js";import"./router-BFjZ0YpI.js";const S=o.memo(({enabled:s=!1,position:h="bottom-right"})=>{const[m,x]=o.useState(!1),[t,u]=o.useState({fps:0,memory:0,renderTime:0,componentCount:0}),a=o.useRef(0),c=o.useRef(performance.now()),l=o.useRef(null);if(o.useEffect(()=>{if(!s)return;const r=()=>{a.current++;const n=performance.now();if(n>=c.current+1e3){const f=Math.round(a.current*1e3/(n-c.current));u(i=>({...i,fps:f,memory:performance.memory?Math.round(performance.memory.usedJSHeapSize/1048576):0,renderTime:n-c.current})),a.current=0,c.current=n}l.current=requestAnimationFrame(r)};return r(),()=>{l.current&&cancelAnimationFrame(l.current)}},[s]),o.useEffect(()=>{if(!s||!window.PerformanceObserver)return;const r=new PerformanceObserver(n=>{const i=n.getEntries().filter(d=>d.name.includes("render"));if(i.length>0){const d=i.reduce((p,F)=>p+F.duration,0)/i.length;u(p=>({...p,renderTime:Math.round(d*100)/100}))}});return r.observe({entryTypes:["measure"]}),()=>r.disconnect()},[s]),!s)return null;const y=()=>{const r={position:"fixed",zIndex:9999,padding:"12px",background:"rgba(0, 0, 0, 0.9)",color:"white",borderRadius:"8px",fontSize:"12px",fontFamily:"monospace",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)"};switch(h){case"top-left":return{...r,top:"20px",left:"20px"};case"top-right":return{...r,top:"20px",right:"20px"};case"bottom-left":return{...r,bottom:"20px",left:"20px"};case"bottom-right":default:return{...r,bottom:"20px",right:"20px"}}},b=r=>r>=55?"#10B981":r>=30?"#F59E0B":"#EF4444",j=r=>r<50?"#10B981":r<100?"#F59E0B":"#EF4444";return e.jsxs(e.Fragment,{children:[e.jsx(g.button,{onClick:()=>x(!m),style:{position:"fixed",bottom:"20px",right:"20px",width:"48px",height:"48px",borderRadius:"50%",background:"rgba(0, 0, 0, 0.8)",border:"1px solid rgba(255, 255, 255, 0.2)",color:"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9998,backdropFilter:"blur(10px)"},whileHover:{scale:1.1},whileTap:{scale:.9},children:e.jsx(w,{size:20})}),e.jsx(P,{children:m&&e.jsxs(g.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},style:y(),children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"12px"},children:[e.jsx(v,{size:16,style:{marginRight:"8px"}}),e.jsx("span",{style:{fontWeight:"bold"},children:"Performance Monitor"}),e.jsx("button",{onClick:()=>x(!1),style:{background:"none",border:"none",color:"white",cursor:"pointer",marginLeft:"auto",padding:"4px"},children:e.jsx(E,{size:14})})]}),e.jsxs("div",{style:{display:"grid",gap:"8px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{children:"FPS:"}),e.jsx("span",{style:{color:b(t.fps),fontWeight:"bold"},children:t.fps})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{children:"Memory:"}),e.jsxs("span",{style:{color:j(t.memory),fontWeight:"bold"},children:[t.memory," MB"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{children:"Render:"}),e.jsxs("span",{style:{color:t.renderTime>16?"#EF4444":"#10B981",fontWeight:"bold"},children:[t.renderTime.toFixed(2),"ms"]})]}),e.jsx("div",{style:{marginTop:"12px",padding:"8px",background:"rgba(255, 255, 255, 0.1)",borderRadius:"4px"},children:e.jsxs("div",{style:{fontSize:"11px",opacity:.8},children:[t.fps<30&&e.jsx("div",{style:{color:"#EF4444"},children:"⚠️ Low FPS detected"}),t.memory>100&&e.jsx("div",{style:{color:"#EF4444"},children:"⚠️ High memory usage"}),t.renderTime>16&&e.jsx("div",{style:{color:"#EF4444"},children:"⚠️ Slow renders"}),t.fps>=55&&t.memory<50&&t.renderTime<=16&&e.jsx("div",{style:{color:"#10B981"},children:"✅ Performance optimal"})]})}),e.jsxs("div",{style:{marginTop:"8px",display:"flex",gap:"8px"},children:[e.jsxs("button",{onClick:()=>{"caches"in window&&caches.keys().then(r=>{r.forEach(n=>caches.delete(n))}),window.gc&&window.gc()},style:{background:"rgba(59, 130, 246, 0.2)",border:"1px solid rgba(59, 130, 246, 0.3)",color:"#60A5FA",padding:"4px 8px",borderRadius:"4px",fontSize:"10px",cursor:"pointer"},children:[e.jsx(C,{size:10,style:{marginRight:"4px"}}),"Clear Cache"]}),e.jsxs("button",{onClick:()=>{console.log("Performance Metrics:",t),console.log("Performance Entries:",performance.getEntries())},style:{background:"rgba(16, 185, 129, 0.2)",border:"1px solid rgba(16, 185, 129, 0.3)",color:"#34D399",padding:"4px 8px",borderRadius:"4px",fontSize:"10px",cursor:"pointer"},children:[e.jsx(R,{size:10,style:{marginRight:"4px"}}),"Log Metrics"]})]})]})]})})]})});S.displayName="PerformanceMonitor";export{S as default};
