var Rk=Object.defineProperty;var Mk=(t,e,n)=>e in t?Rk(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var rh=(t,e,n)=>Mk(t,typeof e!="symbol"?e+"":e,n);function Ik(t,e){for(var n=0;n<e.length;n++){const s=e[n];if(typeof s!="string"&&!Array.isArray(s)){for(const r in s)if(r!=="default"&&!(r in t)){const i=Object.getOwnPropertyDescriptor(s,r);i&&Object.defineProperty(t,r,i.get?i:{enumerable:!0,get:()=>s[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))s(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();var Ak=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Yx(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var qx={exports:{}},Hc={},Gx={exports:{}},ve={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yo=Symbol.for("react.element"),Ok=Symbol.for("react.portal"),Dk=Symbol.for("react.fragment"),Fk=Symbol.for("react.strict_mode"),Bk=Symbol.for("react.profiler"),zk=Symbol.for("react.provider"),$k=Symbol.for("react.context"),Vk=Symbol.for("react.forward_ref"),Uk=Symbol.for("react.suspense"),Wk=Symbol.for("react.memo"),Hk=Symbol.for("react.lazy"),Bg=Symbol.iterator;function Yk(t){return t===null||typeof t!="object"?null:(t=Bg&&t[Bg]||t["@@iterator"],typeof t=="function"?t:null)}var Qx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Kx=Object.assign,Xx={};function $i(t,e,n){this.props=t,this.context=e,this.refs=Xx,this.updater=n||Qx}$i.prototype.isReactComponent={};$i.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};$i.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Jx(){}Jx.prototype=$i.prototype;function bp(t,e,n){this.props=t,this.context=e,this.refs=Xx,this.updater=n||Qx}var Np=bp.prototype=new Jx;Np.constructor=bp;Kx(Np,$i.prototype);Np.isPureReactComponent=!0;var zg=Array.isArray,Zx=Object.prototype.hasOwnProperty,jp={current:null},e1={key:!0,ref:!0,__self:!0,__source:!0};function t1(t,e,n){var s,r={},i=null,o=null;if(e!=null)for(s in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)Zx.call(e,s)&&!e1.hasOwnProperty(s)&&(r[s]=e[s]);var l=arguments.length-2;if(l===1)r.children=n;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];r.children=c}if(t&&t.defaultProps)for(s in l=t.defaultProps,l)r[s]===void 0&&(r[s]=l[s]);return{$$typeof:yo,type:t,key:i,ref:o,props:r,_owner:jp.current}}function qk(t,e){return{$$typeof:yo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Cp(t){return typeof t=="object"&&t!==null&&t.$$typeof===yo}function Gk(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var $g=/\/+/g;function ih(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Gk(""+t.key):e.toString(36)}function Sl(t,e,n,s,r){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case yo:case Ok:o=!0}}if(o)return o=t,r=r(o),t=s===""?"."+ih(o,0):s,zg(r)?(n="",t!=null&&(n=t.replace($g,"$&/")+"/"),Sl(r,e,n,"",function(u){return u})):r!=null&&(Cp(r)&&(r=qk(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace($g,"$&/")+"/")+t)),e.push(r)),1;if(o=0,s=s===""?".":s+":",zg(t))for(var l=0;l<t.length;l++){i=t[l];var c=s+ih(i,l);o+=Sl(i,e,n,c,r)}else if(c=Yk(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=s+ih(i,l++),o+=Sl(i,e,n,c,r);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function zo(t,e,n){if(t==null)return t;var s=[],r=0;return Sl(t,s,"","",function(i){return e.call(n,i,r++)}),s}function Qk(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var It={current:null},bl={transition:null},Kk={ReactCurrentDispatcher:It,ReactCurrentBatchConfig:bl,ReactCurrentOwner:jp};function n1(){throw Error("act(...) is not supported in production builds of React.")}ve.Children={map:zo,forEach:function(t,e,n){zo(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return zo(t,function(){e++}),e},toArray:function(t){return zo(t,function(e){return e})||[]},only:function(t){if(!Cp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ve.Component=$i;ve.Fragment=Dk;ve.Profiler=Bk;ve.PureComponent=bp;ve.StrictMode=Fk;ve.Suspense=Uk;ve.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Kk;ve.act=n1;ve.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var s=Kx({},t.props),r=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=jp.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)Zx.call(e,c)&&!e1.hasOwnProperty(c)&&(s[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];s.children=l}return{$$typeof:yo,type:t.type,key:r,ref:i,props:s,_owner:o}};ve.createContext=function(t){return t={$$typeof:$k,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:zk,_context:t},t.Consumer=t};ve.createElement=t1;ve.createFactory=function(t){var e=t1.bind(null,t);return e.type=t,e};ve.createRef=function(){return{current:null}};ve.forwardRef=function(t){return{$$typeof:Vk,render:t}};ve.isValidElement=Cp;ve.lazy=function(t){return{$$typeof:Hk,_payload:{_status:-1,_result:t},_init:Qk}};ve.memo=function(t,e){return{$$typeof:Wk,type:t,compare:e===void 0?null:e}};ve.startTransition=function(t){var e=bl.transition;bl.transition={};try{t()}finally{bl.transition=e}};ve.unstable_act=n1;ve.useCallback=function(t,e){return It.current.useCallback(t,e)};ve.useContext=function(t){return It.current.useContext(t)};ve.useDebugValue=function(){};ve.useDeferredValue=function(t){return It.current.useDeferredValue(t)};ve.useEffect=function(t,e){return It.current.useEffect(t,e)};ve.useId=function(){return It.current.useId()};ve.useImperativeHandle=function(t,e,n){return It.current.useImperativeHandle(t,e,n)};ve.useInsertionEffect=function(t,e){return It.current.useInsertionEffect(t,e)};ve.useLayoutEffect=function(t,e){return It.current.useLayoutEffect(t,e)};ve.useMemo=function(t,e){return It.current.useMemo(t,e)};ve.useReducer=function(t,e,n){return It.current.useReducer(t,e,n)};ve.useRef=function(t){return It.current.useRef(t)};ve.useState=function(t){return It.current.useState(t)};ve.useSyncExternalStore=function(t,e,n){return It.current.useSyncExternalStore(t,e,n)};ve.useTransition=function(){return It.current.useTransition()};ve.version="18.3.1";Gx.exports=ve;var b=Gx.exports;const ye=Yx(b),Xk=Ik({__proto__:null,default:ye},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Jk=b,Zk=Symbol.for("react.element"),e2=Symbol.for("react.fragment"),t2=Object.prototype.hasOwnProperty,n2=Jk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s2={key:!0,ref:!0,__self:!0,__source:!0};function s1(t,e,n){var s,r={},i=null,o=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(s in e)t2.call(e,s)&&!s2.hasOwnProperty(s)&&(r[s]=e[s]);if(t&&t.defaultProps)for(s in e=t.defaultProps,e)r[s]===void 0&&(r[s]=e[s]);return{$$typeof:Zk,type:t,key:i,ref:o,props:r,_owner:n2.current}}Hc.Fragment=e2;Hc.jsx=s1;Hc.jsxs=s1;qx.exports=Hc;var a=qx.exports,r1={exports:{}},an={},i1={exports:{}},a1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(V,J){var te=V.length;V.push(J);e:for(;0<te;){var ie=te-1>>>1,ce=V[ie];if(0<r(ce,J))V[ie]=J,V[te]=ce,te=ie;else break e}}function n(V){return V.length===0?null:V[0]}function s(V){if(V.length===0)return null;var J=V[0],te=V.pop();if(te!==J){V[0]=te;e:for(var ie=0,ce=V.length,_e=ce>>>1;ie<_e;){var ee=2*(ie+1)-1,U=V[ee],H=ee+1,ae=V[H];if(0>r(U,te))H<ce&&0>r(ae,U)?(V[ie]=ae,V[H]=te,ie=H):(V[ie]=U,V[ee]=te,ie=ee);else if(H<ce&&0>r(ae,te))V[ie]=ae,V[H]=te,ie=H;else break e}}return J}function r(V,J){var te=V.sortIndex-J.sortIndex;return te!==0?te:V.id-J.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],h=1,d=null,f=3,x=!1,p=!1,y=!1,w=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(V){for(var J=n(u);J!==null;){if(J.callback===null)s(u);else if(J.startTime<=V)s(u),J.sortIndex=J.expirationTime,e(c,J);else break;J=n(u)}}function N(V){if(y=!1,S(V),!p)if(n(c)!==null)p=!0,A(C);else{var J=n(u);J!==null&&Q(N,J.startTime-V)}}function C(V,J){p=!1,y&&(y=!1,m(P),P=-1),x=!0;var te=f;try{for(S(J),d=n(c);d!==null&&(!(d.expirationTime>J)||V&&!I());){var ie=d.callback;if(typeof ie=="function"){d.callback=null,f=d.priorityLevel;var ce=ie(d.expirationTime<=J);J=t.unstable_now(),typeof ce=="function"?d.callback=ce:d===n(c)&&s(c),S(J)}else s(c);d=n(c)}if(d!==null)var _e=!0;else{var ee=n(u);ee!==null&&Q(N,ee.startTime-J),_e=!1}return _e}finally{d=null,f=te,x=!1}}var E=!1,L=null,P=-1,R=5,_=-1;function I(){return!(t.unstable_now()-_<R)}function O(){if(L!==null){var V=t.unstable_now();_=V;var J=!0;try{J=L(!0,V)}finally{J?z():(E=!1,L=null)}}else E=!1}var z;if(typeof g=="function")z=function(){g(O)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,W=F.port2;F.port1.onmessage=O,z=function(){W.postMessage(null)}}else z=function(){w(O,0)};function A(V){L=V,E||(E=!0,z())}function Q(V,J){P=w(function(){V(t.unstable_now())},J)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(V){V.callback=null},t.unstable_continueExecution=function(){p||x||(p=!0,A(C))},t.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<V?Math.floor(1e3/V):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(V){switch(f){case 1:case 2:case 3:var J=3;break;default:J=f}var te=f;f=J;try{return V()}finally{f=te}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(V,J){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var te=f;f=V;try{return J()}finally{f=te}},t.unstable_scheduleCallback=function(V,J,te){var ie=t.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?ie+te:ie):te=ie,V){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=te+ce,V={id:h++,callback:J,priorityLevel:V,startTime:te,expirationTime:ce,sortIndex:-1},te>ie?(V.sortIndex=te,e(u,V),n(c)===null&&V===n(u)&&(y?(m(P),P=-1):y=!0,Q(N,te-ie))):(V.sortIndex=ce,e(c,V),p||x||(p=!0,A(C))),V},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(V){var J=f;return function(){var te=f;f=J;try{return V.apply(this,arguments)}finally{f=te}}}})(a1);i1.exports=a1;var r2=i1.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i2=b,en=r2;function Y(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o1=new Set,za={};function $r(t,e){Ci(t,e),Ci(t+"Capture",e)}function Ci(t,e){for(za[t]=e,t=0;t<e.length;t++)o1.add(e[t])}var rs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Bd=Object.prototype.hasOwnProperty,a2=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Vg={},Ug={};function o2(t){return Bd.call(Ug,t)?!0:Bd.call(Vg,t)?!1:a2.test(t)?Ug[t]=!0:(Vg[t]=!0,!1)}function l2(t,e,n,s){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function c2(t,e,n,s){if(e===null||typeof e>"u"||l2(t,e,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function At(t,e,n,s,r,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=s,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var yt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){yt[t]=new At(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];yt[e]=new At(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){yt[t]=new At(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){yt[t]=new At(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){yt[t]=new At(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){yt[t]=new At(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){yt[t]=new At(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){yt[t]=new At(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){yt[t]=new At(t,5,!1,t.toLowerCase(),null,!1,!1)});var kp=/[\-:]([a-z])/g;function Pp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(kp,Pp);yt[e]=new At(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(kp,Pp);yt[e]=new At(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(kp,Pp);yt[e]=new At(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){yt[t]=new At(t,1,!1,t.toLowerCase(),null,!1,!1)});yt.xlinkHref=new At("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){yt[t]=new At(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ep(t,e,n,s){var r=yt.hasOwnProperty(e)?yt[e]:null;(r!==null?r.type!==0:s||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(c2(e,n,r,s)&&(n=null),s||r===null?o2(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,s=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,s?t.setAttributeNS(s,e,n):t.setAttribute(e,n))))}var us=i2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,$o=Symbol.for("react.element"),Jr=Symbol.for("react.portal"),Zr=Symbol.for("react.fragment"),Tp=Symbol.for("react.strict_mode"),zd=Symbol.for("react.profiler"),l1=Symbol.for("react.provider"),c1=Symbol.for("react.context"),Lp=Symbol.for("react.forward_ref"),$d=Symbol.for("react.suspense"),Vd=Symbol.for("react.suspense_list"),_p=Symbol.for("react.memo"),vs=Symbol.for("react.lazy"),u1=Symbol.for("react.offscreen"),Wg=Symbol.iterator;function Ji(t){return t===null||typeof t!="object"?null:(t=Wg&&t[Wg]||t["@@iterator"],typeof t=="function"?t:null)}var Ye=Object.assign,ah;function ha(t){if(ah===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);ah=e&&e[1]||""}return`
`+ah+t}var oh=!1;function lh(t,e){if(!t||oh)return"";oh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var s=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){s=u}t.call(e.prototype)}else{try{throw Error()}catch(u){s=u}t()}}catch(u){if(u&&s&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),i=s.stack.split(`
`),o=r.length-1,l=i.length-1;1<=o&&0<=l&&r[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(r[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||r[o]!==i[l]){var c=`
`+r[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{oh=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ha(t):""}function u2(t){switch(t.tag){case 5:return ha(t.type);case 16:return ha("Lazy");case 13:return ha("Suspense");case 19:return ha("SuspenseList");case 0:case 2:case 15:return t=lh(t.type,!1),t;case 11:return t=lh(t.type.render,!1),t;case 1:return t=lh(t.type,!0),t;default:return""}}function Ud(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Zr:return"Fragment";case Jr:return"Portal";case zd:return"Profiler";case Tp:return"StrictMode";case $d:return"Suspense";case Vd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case c1:return(t.displayName||"Context")+".Consumer";case l1:return(t._context.displayName||"Context")+".Provider";case Lp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case _p:return e=t.displayName||null,e!==null?e:Ud(t.type)||"Memo";case vs:e=t._payload,t=t._init;try{return Ud(t(e))}catch{}}return null}function h2(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ud(e);case 8:return e===Tp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function zs(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function h1(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function d2(t){var e=h1(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),s=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){s=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Vo(t){t._valueTracker||(t._valueTracker=d2(t))}function d1(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),s="";return t&&(s=h1(t)?t.checked?"true":"false":t.value),t=s,t!==n?(e.setValue(t),!0):!1}function Yl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Wd(t,e){var n=e.checked;return Ye({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Hg(t,e){var n=e.defaultValue==null?"":e.defaultValue,s=e.checked!=null?e.checked:e.defaultChecked;n=zs(e.value!=null?e.value:n),t._wrapperState={initialChecked:s,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function f1(t,e){e=e.checked,e!=null&&Ep(t,"checked",e,!1)}function Hd(t,e){f1(t,e);var n=zs(e.value),s=e.type;if(n!=null)s==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(s==="submit"||s==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Yd(t,e.type,n):e.hasOwnProperty("defaultValue")&&Yd(t,e.type,zs(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Yg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var s=e.type;if(!(s!=="submit"&&s!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Yd(t,e,n){(e!=="number"||Yl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var da=Array.isArray;function gi(t,e,n,s){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&s&&(t[n].defaultSelected=!0)}else{for(n=""+zs(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,s&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function qd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Y(91));return Ye({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function qg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(Y(92));if(da(n)){if(1<n.length)throw Error(Y(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:zs(n)}}function p1(t,e){var n=zs(e.value),s=zs(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),s!=null&&(t.defaultValue=""+s)}function Gg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function m1(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Gd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?m1(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Uo,g1=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,s,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,s,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Uo=Uo||document.createElement("div"),Uo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Uo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function $a(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var wa={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},f2=["Webkit","ms","Moz","O"];Object.keys(wa).forEach(function(t){f2.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),wa[e]=wa[t]})});function y1(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||wa.hasOwnProperty(t)&&wa[t]?(""+e).trim():e+"px"}function v1(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var s=n.indexOf("--")===0,r=y1(n,e[n],s);n==="float"&&(n="cssFloat"),s?t.setProperty(n,r):t[n]=r}}var p2=Ye({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Qd(t,e){if(e){if(p2[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Y(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Y(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Y(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Y(62))}}function Kd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Xd=null;function Rp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Jd=null,yi=null,vi=null;function Qg(t){if(t=wo(t)){if(typeof Jd!="function")throw Error(Y(280));var e=t.stateNode;e&&(e=Kc(e),Jd(t.stateNode,t.type,e))}}function x1(t){yi?vi?vi.push(t):vi=[t]:yi=t}function w1(){if(yi){var t=yi,e=vi;if(vi=yi=null,Qg(t),e)for(t=0;t<e.length;t++)Qg(e[t])}}function S1(t,e){return t(e)}function b1(){}var ch=!1;function N1(t,e,n){if(ch)return t(e,n);ch=!0;try{return S1(t,e,n)}finally{ch=!1,(yi!==null||vi!==null)&&(b1(),w1())}}function Va(t,e){var n=t.stateNode;if(n===null)return null;var s=Kc(n);if(s===null)return null;n=s[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(t=t.type,s=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!s;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(Y(231,e,typeof n));return n}var Zd=!1;if(rs)try{var Zi={};Object.defineProperty(Zi,"passive",{get:function(){Zd=!0}}),window.addEventListener("test",Zi,Zi),window.removeEventListener("test",Zi,Zi)}catch{Zd=!1}function m2(t,e,n,s,r,i,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var Sa=!1,ql=null,Gl=!1,ef=null,g2={onError:function(t){Sa=!0,ql=t}};function y2(t,e,n,s,r,i,o,l,c){Sa=!1,ql=null,m2.apply(g2,arguments)}function v2(t,e,n,s,r,i,o,l,c){if(y2.apply(this,arguments),Sa){if(Sa){var u=ql;Sa=!1,ql=null}else throw Error(Y(198));Gl||(Gl=!0,ef=u)}}function Vr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function j1(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Kg(t){if(Vr(t)!==t)throw Error(Y(188))}function x2(t){var e=t.alternate;if(!e){if(e=Vr(t),e===null)throw Error(Y(188));return e!==t?null:t}for(var n=t,s=e;;){var r=n.return;if(r===null)break;var i=r.alternate;if(i===null){if(s=r.return,s!==null){n=s;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===n)return Kg(r),t;if(i===s)return Kg(r),e;i=i.sibling}throw Error(Y(188))}if(n.return!==s.return)n=r,s=i;else{for(var o=!1,l=r.child;l;){if(l===n){o=!0,n=r,s=i;break}if(l===s){o=!0,s=r,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,s=r;break}if(l===s){o=!0,s=i,n=r;break}l=l.sibling}if(!o)throw Error(Y(189))}}if(n.alternate!==s)throw Error(Y(190))}if(n.tag!==3)throw Error(Y(188));return n.stateNode.current===n?t:e}function C1(t){return t=x2(t),t!==null?k1(t):null}function k1(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=k1(t);if(e!==null)return e;t=t.sibling}return null}var P1=en.unstable_scheduleCallback,Xg=en.unstable_cancelCallback,w2=en.unstable_shouldYield,S2=en.unstable_requestPaint,Je=en.unstable_now,b2=en.unstable_getCurrentPriorityLevel,Mp=en.unstable_ImmediatePriority,E1=en.unstable_UserBlockingPriority,Ql=en.unstable_NormalPriority,N2=en.unstable_LowPriority,T1=en.unstable_IdlePriority,Yc=null,Dn=null;function j2(t){if(Dn&&typeof Dn.onCommitFiberRoot=="function")try{Dn.onCommitFiberRoot(Yc,t,void 0,(t.current.flags&128)===128)}catch{}}var kn=Math.clz32?Math.clz32:P2,C2=Math.log,k2=Math.LN2;function P2(t){return t>>>=0,t===0?32:31-(C2(t)/k2|0)|0}var Wo=64,Ho=4194304;function fa(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Kl(t,e){var n=t.pendingLanes;if(n===0)return 0;var s=0,r=t.suspendedLanes,i=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~r;l!==0?s=fa(l):(i&=o,i!==0&&(s=fa(i)))}else o=n&~r,o!==0?s=fa(o):i!==0&&(s=fa(i));if(s===0)return 0;if(e!==0&&e!==s&&!(e&r)&&(r=s&-s,i=e&-e,r>=i||r===16&&(i&4194240)!==0))return e;if(s&4&&(s|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=s;0<e;)n=31-kn(e),r=1<<n,s|=t[n],e&=~r;return s}function E2(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function T2(t,e){for(var n=t.suspendedLanes,s=t.pingedLanes,r=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-kn(i),l=1<<o,c=r[o];c===-1?(!(l&n)||l&s)&&(r[o]=E2(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function tf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function L1(){var t=Wo;return Wo<<=1,!(Wo&4194240)&&(Wo=64),t}function uh(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function vo(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-kn(e),t[e]=n}function L2(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var s=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-kn(n),i=1<<r;e[r]=0,s[r]=-1,t[r]=-1,n&=~i}}function Ip(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var s=31-kn(n),r=1<<s;r&e|t[s]&e&&(t[s]|=e),n&=~r}}var Ee=0;function _1(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var R1,Ap,M1,I1,A1,nf=!1,Yo=[],Ts=null,Ls=null,_s=null,Ua=new Map,Wa=new Map,Ss=[],_2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Jg(t,e){switch(t){case"focusin":case"focusout":Ts=null;break;case"dragenter":case"dragleave":Ls=null;break;case"mouseover":case"mouseout":_s=null;break;case"pointerover":case"pointerout":Ua.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Wa.delete(e.pointerId)}}function ea(t,e,n,s,r,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:s,nativeEvent:i,targetContainers:[r]},e!==null&&(e=wo(e),e!==null&&Ap(e)),t):(t.eventSystemFlags|=s,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function R2(t,e,n,s,r){switch(e){case"focusin":return Ts=ea(Ts,t,e,n,s,r),!0;case"dragenter":return Ls=ea(Ls,t,e,n,s,r),!0;case"mouseover":return _s=ea(_s,t,e,n,s,r),!0;case"pointerover":var i=r.pointerId;return Ua.set(i,ea(Ua.get(i)||null,t,e,n,s,r)),!0;case"gotpointercapture":return i=r.pointerId,Wa.set(i,ea(Wa.get(i)||null,t,e,n,s,r)),!0}return!1}function O1(t){var e=mr(t.target);if(e!==null){var n=Vr(e);if(n!==null){if(e=n.tag,e===13){if(e=j1(n),e!==null){t.blockedOn=e,A1(t.priority,function(){M1(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Nl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=sf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var s=new n.constructor(n.type,n);Xd=s,n.target.dispatchEvent(s),Xd=null}else return e=wo(n),e!==null&&Ap(e),t.blockedOn=n,!1;e.shift()}return!0}function Zg(t,e,n){Nl(t)&&n.delete(e)}function M2(){nf=!1,Ts!==null&&Nl(Ts)&&(Ts=null),Ls!==null&&Nl(Ls)&&(Ls=null),_s!==null&&Nl(_s)&&(_s=null),Ua.forEach(Zg),Wa.forEach(Zg)}function ta(t,e){t.blockedOn===e&&(t.blockedOn=null,nf||(nf=!0,en.unstable_scheduleCallback(en.unstable_NormalPriority,M2)))}function Ha(t){function e(r){return ta(r,t)}if(0<Yo.length){ta(Yo[0],t);for(var n=1;n<Yo.length;n++){var s=Yo[n];s.blockedOn===t&&(s.blockedOn=null)}}for(Ts!==null&&ta(Ts,t),Ls!==null&&ta(Ls,t),_s!==null&&ta(_s,t),Ua.forEach(e),Wa.forEach(e),n=0;n<Ss.length;n++)s=Ss[n],s.blockedOn===t&&(s.blockedOn=null);for(;0<Ss.length&&(n=Ss[0],n.blockedOn===null);)O1(n),n.blockedOn===null&&Ss.shift()}var xi=us.ReactCurrentBatchConfig,Xl=!0;function I2(t,e,n,s){var r=Ee,i=xi.transition;xi.transition=null;try{Ee=1,Op(t,e,n,s)}finally{Ee=r,xi.transition=i}}function A2(t,e,n,s){var r=Ee,i=xi.transition;xi.transition=null;try{Ee=4,Op(t,e,n,s)}finally{Ee=r,xi.transition=i}}function Op(t,e,n,s){if(Xl){var r=sf(t,e,n,s);if(r===null)wh(t,e,s,Jl,n),Jg(t,s);else if(R2(r,t,e,n,s))s.stopPropagation();else if(Jg(t,s),e&4&&-1<_2.indexOf(t)){for(;r!==null;){var i=wo(r);if(i!==null&&R1(i),i=sf(t,e,n,s),i===null&&wh(t,e,s,Jl,n),i===r)break;r=i}r!==null&&s.stopPropagation()}else wh(t,e,s,null,n)}}var Jl=null;function sf(t,e,n,s){if(Jl=null,t=Rp(s),t=mr(t),t!==null)if(e=Vr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=j1(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Jl=t,null}function D1(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(b2()){case Mp:return 1;case E1:return 4;case Ql:case N2:return 16;case T1:return 536870912;default:return 16}default:return 16}}var Ns=null,Dp=null,jl=null;function F1(){if(jl)return jl;var t,e=Dp,n=e.length,s,r="value"in Ns?Ns.value:Ns.textContent,i=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(s=1;s<=o&&e[n-s]===r[i-s];s++);return jl=r.slice(t,1<s?1-s:void 0)}function Cl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function qo(){return!0}function ey(){return!1}function on(t){function e(n,s,r,i,o){this._reactName=n,this._targetInst=r,this.type=s,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?qo:ey,this.isPropagationStopped=ey,this}return Ye(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=qo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=qo)},persist:function(){},isPersistent:qo}),e}var Vi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Fp=on(Vi),xo=Ye({},Vi,{view:0,detail:0}),O2=on(xo),hh,dh,na,qc=Ye({},xo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==na&&(na&&t.type==="mousemove"?(hh=t.screenX-na.screenX,dh=t.screenY-na.screenY):dh=hh=0,na=t),hh)},movementY:function(t){return"movementY"in t?t.movementY:dh}}),ty=on(qc),D2=Ye({},qc,{dataTransfer:0}),F2=on(D2),B2=Ye({},xo,{relatedTarget:0}),fh=on(B2),z2=Ye({},Vi,{animationName:0,elapsedTime:0,pseudoElement:0}),$2=on(z2),V2=Ye({},Vi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),U2=on(V2),W2=Ye({},Vi,{data:0}),ny=on(W2),H2={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Y2={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},q2={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function G2(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=q2[t])?!!e[t]:!1}function Bp(){return G2}var Q2=Ye({},xo,{key:function(t){if(t.key){var e=H2[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Cl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Y2[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bp,charCode:function(t){return t.type==="keypress"?Cl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Cl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),K2=on(Q2),X2=Ye({},qc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),sy=on(X2),J2=Ye({},xo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bp}),Z2=on(J2),eP=Ye({},Vi,{propertyName:0,elapsedTime:0,pseudoElement:0}),tP=on(eP),nP=Ye({},qc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),sP=on(nP),rP=[9,13,27,32],zp=rs&&"CompositionEvent"in window,ba=null;rs&&"documentMode"in document&&(ba=document.documentMode);var iP=rs&&"TextEvent"in window&&!ba,B1=rs&&(!zp||ba&&8<ba&&11>=ba),ry=" ",iy=!1;function z1(t,e){switch(t){case"keyup":return rP.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function $1(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ei=!1;function aP(t,e){switch(t){case"compositionend":return $1(e);case"keypress":return e.which!==32?null:(iy=!0,ry);case"textInput":return t=e.data,t===ry&&iy?null:t;default:return null}}function oP(t,e){if(ei)return t==="compositionend"||!zp&&z1(t,e)?(t=F1(),jl=Dp=Ns=null,ei=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return B1&&e.locale!=="ko"?null:e.data;default:return null}}var lP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ay(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!lP[t.type]:e==="textarea"}function V1(t,e,n,s){x1(s),e=Zl(e,"onChange"),0<e.length&&(n=new Fp("onChange","change",null,n,s),t.push({event:n,listeners:e}))}var Na=null,Ya=null;function cP(t){Z1(t,0)}function Gc(t){var e=si(t);if(d1(e))return t}function uP(t,e){if(t==="change")return e}var U1=!1;if(rs){var ph;if(rs){var mh="oninput"in document;if(!mh){var oy=document.createElement("div");oy.setAttribute("oninput","return;"),mh=typeof oy.oninput=="function"}ph=mh}else ph=!1;U1=ph&&(!document.documentMode||9<document.documentMode)}function ly(){Na&&(Na.detachEvent("onpropertychange",W1),Ya=Na=null)}function W1(t){if(t.propertyName==="value"&&Gc(Ya)){var e=[];V1(e,Ya,t,Rp(t)),N1(cP,e)}}function hP(t,e,n){t==="focusin"?(ly(),Na=e,Ya=n,Na.attachEvent("onpropertychange",W1)):t==="focusout"&&ly()}function dP(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Gc(Ya)}function fP(t,e){if(t==="click")return Gc(e)}function pP(t,e){if(t==="input"||t==="change")return Gc(e)}function mP(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var En=typeof Object.is=="function"?Object.is:mP;function qa(t,e){if(En(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),s=Object.keys(e);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var r=n[s];if(!Bd.call(e,r)||!En(t[r],e[r]))return!1}return!0}function cy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function uy(t,e){var n=cy(t);t=0;for(var s;n;){if(n.nodeType===3){if(s=t+n.textContent.length,t<=e&&s>=e)return{node:n,offset:e-t};t=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=cy(n)}}function H1(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?H1(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Y1(){for(var t=window,e=Yl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Yl(t.document)}return e}function $p(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function gP(t){var e=Y1(),n=t.focusedElem,s=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&H1(n.ownerDocument.documentElement,n)){if(s!==null&&$p(n)){if(e=s.start,t=s.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,i=Math.min(s.start,r);s=s.end===void 0?i:Math.min(s.end,r),!t.extend&&i>s&&(r=s,s=i,i=r),r=uy(n,i);var o=uy(n,s);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),i>s?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var yP=rs&&"documentMode"in document&&11>=document.documentMode,ti=null,rf=null,ja=null,af=!1;function hy(t,e,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;af||ti==null||ti!==Yl(s)||(s=ti,"selectionStart"in s&&$p(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),ja&&qa(ja,s)||(ja=s,s=Zl(rf,"onSelect"),0<s.length&&(e=new Fp("onSelect","select",null,e,n),t.push({event:e,listeners:s}),e.target=ti)))}function Go(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var ni={animationend:Go("Animation","AnimationEnd"),animationiteration:Go("Animation","AnimationIteration"),animationstart:Go("Animation","AnimationStart"),transitionend:Go("Transition","TransitionEnd")},gh={},q1={};rs&&(q1=document.createElement("div").style,"AnimationEvent"in window||(delete ni.animationend.animation,delete ni.animationiteration.animation,delete ni.animationstart.animation),"TransitionEvent"in window||delete ni.transitionend.transition);function Qc(t){if(gh[t])return gh[t];if(!ni[t])return t;var e=ni[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in q1)return gh[t]=e[n];return t}var G1=Qc("animationend"),Q1=Qc("animationiteration"),K1=Qc("animationstart"),X1=Qc("transitionend"),J1=new Map,dy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function qs(t,e){J1.set(t,e),$r(e,[t])}for(var yh=0;yh<dy.length;yh++){var vh=dy[yh],vP=vh.toLowerCase(),xP=vh[0].toUpperCase()+vh.slice(1);qs(vP,"on"+xP)}qs(G1,"onAnimationEnd");qs(Q1,"onAnimationIteration");qs(K1,"onAnimationStart");qs("dblclick","onDoubleClick");qs("focusin","onFocus");qs("focusout","onBlur");qs(X1,"onTransitionEnd");Ci("onMouseEnter",["mouseout","mouseover"]);Ci("onMouseLeave",["mouseout","mouseover"]);Ci("onPointerEnter",["pointerout","pointerover"]);Ci("onPointerLeave",["pointerout","pointerover"]);$r("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));$r("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));$r("onBeforeInput",["compositionend","keypress","textInput","paste"]);$r("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));$r("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));$r("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var pa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wP=new Set("cancel close invalid load scroll toggle".split(" ").concat(pa));function fy(t,e,n){var s=t.type||"unknown-event";t.currentTarget=n,v2(s,e,void 0,t),t.currentTarget=null}function Z1(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var s=t[n],r=s.event;s=s.listeners;e:{var i=void 0;if(e)for(var o=s.length-1;0<=o;o--){var l=s[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==i&&r.isPropagationStopped())break e;fy(r,l,u),i=c}else for(o=0;o<s.length;o++){if(l=s[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==i&&r.isPropagationStopped())break e;fy(r,l,u),i=c}}}if(Gl)throw t=ef,Gl=!1,ef=null,t}function De(t,e){var n=e[hf];n===void 0&&(n=e[hf]=new Set);var s=t+"__bubble";n.has(s)||(ew(e,t,2,!1),n.add(s))}function xh(t,e,n){var s=0;e&&(s|=4),ew(n,t,s,e)}var Qo="_reactListening"+Math.random().toString(36).slice(2);function Ga(t){if(!t[Qo]){t[Qo]=!0,o1.forEach(function(n){n!=="selectionchange"&&(wP.has(n)||xh(n,!1,t),xh(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Qo]||(e[Qo]=!0,xh("selectionchange",!1,e))}}function ew(t,e,n,s){switch(D1(e)){case 1:var r=I2;break;case 4:r=A2;break;default:r=Op}n=r.bind(null,e,n,t),r=void 0,!Zd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),s?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function wh(t,e,n,s,r){var i=s;if(!(e&1)&&!(e&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var l=s.stateNode.containerInfo;if(l===r||l.nodeType===8&&l.parentNode===r)break;if(o===4)for(o=s.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===r||c.nodeType===8&&c.parentNode===r))return;o=o.return}for(;l!==null;){if(o=mr(l),o===null)return;if(c=o.tag,c===5||c===6){s=i=o;continue e}l=l.parentNode}}s=s.return}N1(function(){var u=i,h=Rp(n),d=[];e:{var f=J1.get(t);if(f!==void 0){var x=Fp,p=t;switch(t){case"keypress":if(Cl(n)===0)break e;case"keydown":case"keyup":x=K2;break;case"focusin":p="focus",x=fh;break;case"focusout":p="blur",x=fh;break;case"beforeblur":case"afterblur":x=fh;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":x=ty;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":x=F2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":x=Z2;break;case G1:case Q1:case K1:x=$2;break;case X1:x=tP;break;case"scroll":x=O2;break;case"wheel":x=sP;break;case"copy":case"cut":case"paste":x=U2;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":x=sy}var y=(e&4)!==0,w=!y&&t==="scroll",m=y?f!==null?f+"Capture":null:f;y=[];for(var g=u,S;g!==null;){S=g;var N=S.stateNode;if(S.tag===5&&N!==null&&(S=N,m!==null&&(N=Va(g,m),N!=null&&y.push(Qa(g,N,S)))),w)break;g=g.return}0<y.length&&(f=new x(f,p,null,n,h),d.push({event:f,listeners:y}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",x=t==="mouseout"||t==="pointerout",f&&n!==Xd&&(p=n.relatedTarget||n.fromElement)&&(mr(p)||p[is]))break e;if((x||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,x?(p=n.relatedTarget||n.toElement,x=u,p=p?mr(p):null,p!==null&&(w=Vr(p),p!==w||p.tag!==5&&p.tag!==6)&&(p=null)):(x=null,p=u),x!==p)){if(y=ty,N="onMouseLeave",m="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(y=sy,N="onPointerLeave",m="onPointerEnter",g="pointer"),w=x==null?f:si(x),S=p==null?f:si(p),f=new y(N,g+"leave",x,n,h),f.target=w,f.relatedTarget=S,N=null,mr(h)===u&&(y=new y(m,g+"enter",p,n,h),y.target=S,y.relatedTarget=w,N=y),w=N,x&&p)t:{for(y=x,m=p,g=0,S=y;S;S=Kr(S))g++;for(S=0,N=m;N;N=Kr(N))S++;for(;0<g-S;)y=Kr(y),g--;for(;0<S-g;)m=Kr(m),S--;for(;g--;){if(y===m||m!==null&&y===m.alternate)break t;y=Kr(y),m=Kr(m)}y=null}else y=null;x!==null&&py(d,f,x,y,!1),p!==null&&w!==null&&py(d,w,p,y,!0)}}e:{if(f=u?si(u):window,x=f.nodeName&&f.nodeName.toLowerCase(),x==="select"||x==="input"&&f.type==="file")var C=uP;else if(ay(f))if(U1)C=pP;else{C=dP;var E=hP}else(x=f.nodeName)&&x.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(C=fP);if(C&&(C=C(t,u))){V1(d,C,n,h);break e}E&&E(t,f,u),t==="focusout"&&(E=f._wrapperState)&&E.controlled&&f.type==="number"&&Yd(f,"number",f.value)}switch(E=u?si(u):window,t){case"focusin":(ay(E)||E.contentEditable==="true")&&(ti=E,rf=u,ja=null);break;case"focusout":ja=rf=ti=null;break;case"mousedown":af=!0;break;case"contextmenu":case"mouseup":case"dragend":af=!1,hy(d,n,h);break;case"selectionchange":if(yP)break;case"keydown":case"keyup":hy(d,n,h)}var L;if(zp)e:{switch(t){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else ei?z1(t,n)&&(P="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(P="onCompositionStart");P&&(B1&&n.locale!=="ko"&&(ei||P!=="onCompositionStart"?P==="onCompositionEnd"&&ei&&(L=F1()):(Ns=h,Dp="value"in Ns?Ns.value:Ns.textContent,ei=!0)),E=Zl(u,P),0<E.length&&(P=new ny(P,t,null,n,h),d.push({event:P,listeners:E}),L?P.data=L:(L=$1(n),L!==null&&(P.data=L)))),(L=iP?aP(t,n):oP(t,n))&&(u=Zl(u,"onBeforeInput"),0<u.length&&(h=new ny("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:u}),h.data=L))}Z1(d,e)})}function Qa(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Zl(t,e){for(var n=e+"Capture",s=[];t!==null;){var r=t,i=r.stateNode;r.tag===5&&i!==null&&(r=i,i=Va(t,n),i!=null&&s.unshift(Qa(t,i,r)),i=Va(t,e),i!=null&&s.push(Qa(t,i,r))),t=t.return}return s}function Kr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function py(t,e,n,s,r){for(var i=e._reactName,o=[];n!==null&&n!==s;){var l=n,c=l.alternate,u=l.stateNode;if(c!==null&&c===s)break;l.tag===5&&u!==null&&(l=u,r?(c=Va(n,i),c!=null&&o.unshift(Qa(n,c,l))):r||(c=Va(n,i),c!=null&&o.push(Qa(n,c,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var SP=/\r\n?/g,bP=/\u0000|\uFFFD/g;function my(t){return(typeof t=="string"?t:""+t).replace(SP,`
`).replace(bP,"")}function Ko(t,e,n){if(e=my(e),my(t)!==e&&n)throw Error(Y(425))}function ec(){}var of=null,lf=null;function cf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var uf=typeof setTimeout=="function"?setTimeout:void 0,NP=typeof clearTimeout=="function"?clearTimeout:void 0,gy=typeof Promise=="function"?Promise:void 0,jP=typeof queueMicrotask=="function"?queueMicrotask:typeof gy<"u"?function(t){return gy.resolve(null).then(t).catch(CP)}:uf;function CP(t){setTimeout(function(){throw t})}function Sh(t,e){var n=e,s=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(s===0){t.removeChild(r),Ha(e);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=r}while(n);Ha(e)}function Rs(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function yy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ui=Math.random().toString(36).slice(2),On="__reactFiber$"+Ui,Ka="__reactProps$"+Ui,is="__reactContainer$"+Ui,hf="__reactEvents$"+Ui,kP="__reactListeners$"+Ui,PP="__reactHandles$"+Ui;function mr(t){var e=t[On];if(e)return e;for(var n=t.parentNode;n;){if(e=n[is]||n[On]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=yy(t);t!==null;){if(n=t[On])return n;t=yy(t)}return e}t=n,n=t.parentNode}return null}function wo(t){return t=t[On]||t[is],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function si(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Y(33))}function Kc(t){return t[Ka]||null}var df=[],ri=-1;function Gs(t){return{current:t}}function Fe(t){0>ri||(t.current=df[ri],df[ri]=null,ri--)}function Ae(t,e){ri++,df[ri]=t.current,t.current=e}var $s={},Ct=Gs($s),zt=Gs(!1),Pr=$s;function ki(t,e){var n=t.type.contextTypes;if(!n)return $s;var s=t.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===e)return s.__reactInternalMemoizedMaskedChildContext;var r={},i;for(i in n)r[i]=e[i];return s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function $t(t){return t=t.childContextTypes,t!=null}function tc(){Fe(zt),Fe(Ct)}function vy(t,e,n){if(Ct.current!==$s)throw Error(Y(168));Ae(Ct,e),Ae(zt,n)}function tw(t,e,n){var s=t.stateNode;if(e=e.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var r in s)if(!(r in e))throw Error(Y(108,h2(t)||"Unknown",r));return Ye({},n,s)}function nc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||$s,Pr=Ct.current,Ae(Ct,t),Ae(zt,zt.current),!0}function xy(t,e,n){var s=t.stateNode;if(!s)throw Error(Y(169));n?(t=tw(t,e,Pr),s.__reactInternalMemoizedMergedChildContext=t,Fe(zt),Fe(Ct),Ae(Ct,t)):Fe(zt),Ae(zt,n)}var Gn=null,Xc=!1,bh=!1;function nw(t){Gn===null?Gn=[t]:Gn.push(t)}function EP(t){Xc=!0,nw(t)}function Qs(){if(!bh&&Gn!==null){bh=!0;var t=0,e=Ee;try{var n=Gn;for(Ee=1;t<n.length;t++){var s=n[t];do s=s(!0);while(s!==null)}Gn=null,Xc=!1}catch(r){throw Gn!==null&&(Gn=Gn.slice(t+1)),P1(Mp,Qs),r}finally{Ee=e,bh=!1}}return null}var ii=[],ai=0,sc=null,rc=0,hn=[],dn=0,Er=null,Qn=1,Kn="";function or(t,e){ii[ai++]=rc,ii[ai++]=sc,sc=t,rc=e}function sw(t,e,n){hn[dn++]=Qn,hn[dn++]=Kn,hn[dn++]=Er,Er=t;var s=Qn;t=Kn;var r=32-kn(s)-1;s&=~(1<<r),n+=1;var i=32-kn(e)+r;if(30<i){var o=r-r%5;i=(s&(1<<o)-1).toString(32),s>>=o,r-=o,Qn=1<<32-kn(e)+r|n<<r|s,Kn=i+t}else Qn=1<<i|n<<r|s,Kn=t}function Vp(t){t.return!==null&&(or(t,1),sw(t,1,0))}function Up(t){for(;t===sc;)sc=ii[--ai],ii[ai]=null,rc=ii[--ai],ii[ai]=null;for(;t===Er;)Er=hn[--dn],hn[dn]=null,Kn=hn[--dn],hn[dn]=null,Qn=hn[--dn],hn[dn]=null}var Jt=null,Xt=null,Ve=!1,Nn=null;function rw(t,e){var n=fn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function wy(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Jt=t,Xt=Rs(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Jt=t,Xt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Er!==null?{id:Qn,overflow:Kn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=fn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Jt=t,Xt=null,!0):!1;default:return!1}}function ff(t){return(t.mode&1)!==0&&(t.flags&128)===0}function pf(t){if(Ve){var e=Xt;if(e){var n=e;if(!wy(t,e)){if(ff(t))throw Error(Y(418));e=Rs(n.nextSibling);var s=Jt;e&&wy(t,e)?rw(s,n):(t.flags=t.flags&-4097|2,Ve=!1,Jt=t)}}else{if(ff(t))throw Error(Y(418));t.flags=t.flags&-4097|2,Ve=!1,Jt=t}}}function Sy(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Jt=t}function Xo(t){if(t!==Jt)return!1;if(!Ve)return Sy(t),Ve=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!cf(t.type,t.memoizedProps)),e&&(e=Xt)){if(ff(t))throw iw(),Error(Y(418));for(;e;)rw(t,e),e=Rs(e.nextSibling)}if(Sy(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Y(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Xt=Rs(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Xt=null}}else Xt=Jt?Rs(t.stateNode.nextSibling):null;return!0}function iw(){for(var t=Xt;t;)t=Rs(t.nextSibling)}function Pi(){Xt=Jt=null,Ve=!1}function Wp(t){Nn===null?Nn=[t]:Nn.push(t)}var TP=us.ReactCurrentBatchConfig;function sa(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Y(309));var s=n.stateNode}if(!s)throw Error(Y(147,t));var r=s,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=r.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(Y(284));if(!n._owner)throw Error(Y(290,t))}return t}function Jo(t,e){throw t=Object.prototype.toString.call(e),Error(Y(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function by(t){var e=t._init;return e(t._payload)}function aw(t){function e(m,g){if(t){var S=m.deletions;S===null?(m.deletions=[g],m.flags|=16):S.push(g)}}function n(m,g){if(!t)return null;for(;g!==null;)e(m,g),g=g.sibling;return null}function s(m,g){for(m=new Map;g!==null;)g.key!==null?m.set(g.key,g):m.set(g.index,g),g=g.sibling;return m}function r(m,g){return m=Os(m,g),m.index=0,m.sibling=null,m}function i(m,g,S){return m.index=S,t?(S=m.alternate,S!==null?(S=S.index,S<g?(m.flags|=2,g):S):(m.flags|=2,g)):(m.flags|=1048576,g)}function o(m){return t&&m.alternate===null&&(m.flags|=2),m}function l(m,g,S,N){return g===null||g.tag!==6?(g=Th(S,m.mode,N),g.return=m,g):(g=r(g,S),g.return=m,g)}function c(m,g,S,N){var C=S.type;return C===Zr?h(m,g,S.props.children,N,S.key):g!==null&&(g.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===vs&&by(C)===g.type)?(N=r(g,S.props),N.ref=sa(m,g,S),N.return=m,N):(N=Rl(S.type,S.key,S.props,null,m.mode,N),N.ref=sa(m,g,S),N.return=m,N)}function u(m,g,S,N){return g===null||g.tag!==4||g.stateNode.containerInfo!==S.containerInfo||g.stateNode.implementation!==S.implementation?(g=Lh(S,m.mode,N),g.return=m,g):(g=r(g,S.children||[]),g.return=m,g)}function h(m,g,S,N,C){return g===null||g.tag!==7?(g=Nr(S,m.mode,N,C),g.return=m,g):(g=r(g,S),g.return=m,g)}function d(m,g,S){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Th(""+g,m.mode,S),g.return=m,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case $o:return S=Rl(g.type,g.key,g.props,null,m.mode,S),S.ref=sa(m,null,g),S.return=m,S;case Jr:return g=Lh(g,m.mode,S),g.return=m,g;case vs:var N=g._init;return d(m,N(g._payload),S)}if(da(g)||Ji(g))return g=Nr(g,m.mode,S,null),g.return=m,g;Jo(m,g)}return null}function f(m,g,S,N){var C=g!==null?g.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return C!==null?null:l(m,g,""+S,N);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case $o:return S.key===C?c(m,g,S,N):null;case Jr:return S.key===C?u(m,g,S,N):null;case vs:return C=S._init,f(m,g,C(S._payload),N)}if(da(S)||Ji(S))return C!==null?null:h(m,g,S,N,null);Jo(m,S)}return null}function x(m,g,S,N,C){if(typeof N=="string"&&N!==""||typeof N=="number")return m=m.get(S)||null,l(g,m,""+N,C);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case $o:return m=m.get(N.key===null?S:N.key)||null,c(g,m,N,C);case Jr:return m=m.get(N.key===null?S:N.key)||null,u(g,m,N,C);case vs:var E=N._init;return x(m,g,S,E(N._payload),C)}if(da(N)||Ji(N))return m=m.get(S)||null,h(g,m,N,C,null);Jo(g,N)}return null}function p(m,g,S,N){for(var C=null,E=null,L=g,P=g=0,R=null;L!==null&&P<S.length;P++){L.index>P?(R=L,L=null):R=L.sibling;var _=f(m,L,S[P],N);if(_===null){L===null&&(L=R);break}t&&L&&_.alternate===null&&e(m,L),g=i(_,g,P),E===null?C=_:E.sibling=_,E=_,L=R}if(P===S.length)return n(m,L),Ve&&or(m,P),C;if(L===null){for(;P<S.length;P++)L=d(m,S[P],N),L!==null&&(g=i(L,g,P),E===null?C=L:E.sibling=L,E=L);return Ve&&or(m,P),C}for(L=s(m,L);P<S.length;P++)R=x(L,m,P,S[P],N),R!==null&&(t&&R.alternate!==null&&L.delete(R.key===null?P:R.key),g=i(R,g,P),E===null?C=R:E.sibling=R,E=R);return t&&L.forEach(function(I){return e(m,I)}),Ve&&or(m,P),C}function y(m,g,S,N){var C=Ji(S);if(typeof C!="function")throw Error(Y(150));if(S=C.call(S),S==null)throw Error(Y(151));for(var E=C=null,L=g,P=g=0,R=null,_=S.next();L!==null&&!_.done;P++,_=S.next()){L.index>P?(R=L,L=null):R=L.sibling;var I=f(m,L,_.value,N);if(I===null){L===null&&(L=R);break}t&&L&&I.alternate===null&&e(m,L),g=i(I,g,P),E===null?C=I:E.sibling=I,E=I,L=R}if(_.done)return n(m,L),Ve&&or(m,P),C;if(L===null){for(;!_.done;P++,_=S.next())_=d(m,_.value,N),_!==null&&(g=i(_,g,P),E===null?C=_:E.sibling=_,E=_);return Ve&&or(m,P),C}for(L=s(m,L);!_.done;P++,_=S.next())_=x(L,m,P,_.value,N),_!==null&&(t&&_.alternate!==null&&L.delete(_.key===null?P:_.key),g=i(_,g,P),E===null?C=_:E.sibling=_,E=_);return t&&L.forEach(function(O){return e(m,O)}),Ve&&or(m,P),C}function w(m,g,S,N){if(typeof S=="object"&&S!==null&&S.type===Zr&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case $o:e:{for(var C=S.key,E=g;E!==null;){if(E.key===C){if(C=S.type,C===Zr){if(E.tag===7){n(m,E.sibling),g=r(E,S.props.children),g.return=m,m=g;break e}}else if(E.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===vs&&by(C)===E.type){n(m,E.sibling),g=r(E,S.props),g.ref=sa(m,E,S),g.return=m,m=g;break e}n(m,E);break}else e(m,E);E=E.sibling}S.type===Zr?(g=Nr(S.props.children,m.mode,N,S.key),g.return=m,m=g):(N=Rl(S.type,S.key,S.props,null,m.mode,N),N.ref=sa(m,g,S),N.return=m,m=N)}return o(m);case Jr:e:{for(E=S.key;g!==null;){if(g.key===E)if(g.tag===4&&g.stateNode.containerInfo===S.containerInfo&&g.stateNode.implementation===S.implementation){n(m,g.sibling),g=r(g,S.children||[]),g.return=m,m=g;break e}else{n(m,g);break}else e(m,g);g=g.sibling}g=Lh(S,m.mode,N),g.return=m,m=g}return o(m);case vs:return E=S._init,w(m,g,E(S._payload),N)}if(da(S))return p(m,g,S,N);if(Ji(S))return y(m,g,S,N);Jo(m,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,g!==null&&g.tag===6?(n(m,g.sibling),g=r(g,S),g.return=m,m=g):(n(m,g),g=Th(S,m.mode,N),g.return=m,m=g),o(m)):n(m,g)}return w}var Ei=aw(!0),ow=aw(!1),ic=Gs(null),ac=null,oi=null,Hp=null;function Yp(){Hp=oi=ac=null}function qp(t){var e=ic.current;Fe(ic),t._currentValue=e}function mf(t,e,n){for(;t!==null;){var s=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,s!==null&&(s.childLanes|=e)):s!==null&&(s.childLanes&e)!==e&&(s.childLanes|=e),t===n)break;t=t.return}}function wi(t,e){ac=t,Hp=oi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Dt=!0),t.firstContext=null)}function gn(t){var e=t._currentValue;if(Hp!==t)if(t={context:t,memoizedValue:e,next:null},oi===null){if(ac===null)throw Error(Y(308));oi=t,ac.dependencies={lanes:0,firstContext:t}}else oi=oi.next=t;return e}var gr=null;function Gp(t){gr===null?gr=[t]:gr.push(t)}function lw(t,e,n,s){var r=e.interleaved;return r===null?(n.next=n,Gp(e)):(n.next=r.next,r.next=n),e.interleaved=n,as(t,s)}function as(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var xs=!1;function Qp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function cw(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function es(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ms(t,e,n){var s=t.updateQueue;if(s===null)return null;if(s=s.shared,we&2){var r=s.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),s.pending=e,as(t,n)}return r=s.interleaved,r===null?(e.next=e,Gp(s)):(e.next=r.next,r.next=e),s.interleaved=e,as(t,n)}function kl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,Ip(t,n)}}function Ny(t,e){var n=t.updateQueue,s=t.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var r=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?r=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?r=i=e:i=i.next=e}else r=i=e;n={baseState:s.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:s.shared,effects:s.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function oc(t,e,n,s){var r=t.updateQueue;xs=!1;var i=r.firstBaseUpdate,o=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?i=u:o.next=u,o=c;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=c))}if(i!==null){var d=r.baseState;o=0,h=u=c=null,l=i;do{var f=l.lane,x=l.eventTime;if((s&f)===f){h!==null&&(h=h.next={eventTime:x,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var p=t,y=l;switch(f=e,x=n,y.tag){case 1:if(p=y.payload,typeof p=="function"){d=p.call(x,d,f);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=y.payload,f=typeof p=="function"?p.call(x,d,f):p,f==null)break e;d=Ye({},d,f);break e;case 2:xs=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,f=r.effects,f===null?r.effects=[l]:f.push(l))}else x={eventTime:x,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(u=h=x,c=d):h=h.next=x,o|=f;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;f=l,l=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(!0);if(h===null&&(c=d),r.baseState=c,r.firstBaseUpdate=u,r.lastBaseUpdate=h,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else i===null&&(r.shared.lanes=0);Lr|=o,t.lanes=o,t.memoizedState=d}}function jy(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var s=t[e],r=s.callback;if(r!==null){if(s.callback=null,s=n,typeof r!="function")throw Error(Y(191,r));r.call(s)}}}var So={},Fn=Gs(So),Xa=Gs(So),Ja=Gs(So);function yr(t){if(t===So)throw Error(Y(174));return t}function Kp(t,e){switch(Ae(Ja,e),Ae(Xa,t),Ae(Fn,So),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Gd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Gd(e,t)}Fe(Fn),Ae(Fn,e)}function Ti(){Fe(Fn),Fe(Xa),Fe(Ja)}function uw(t){yr(Ja.current);var e=yr(Fn.current),n=Gd(e,t.type);e!==n&&(Ae(Xa,t),Ae(Fn,n))}function Xp(t){Xa.current===t&&(Fe(Fn),Fe(Xa))}var Ue=Gs(0);function lc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Nh=[];function Jp(){for(var t=0;t<Nh.length;t++)Nh[t]._workInProgressVersionPrimary=null;Nh.length=0}var Pl=us.ReactCurrentDispatcher,jh=us.ReactCurrentBatchConfig,Tr=0,He=null,it=null,lt=null,cc=!1,Ca=!1,Za=0,LP=0;function vt(){throw Error(Y(321))}function Zp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!En(t[n],e[n]))return!1;return!0}function em(t,e,n,s,r,i){if(Tr=i,He=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Pl.current=t===null||t.memoizedState===null?IP:AP,t=n(s,r),Ca){i=0;do{if(Ca=!1,Za=0,25<=i)throw Error(Y(301));i+=1,lt=it=null,e.updateQueue=null,Pl.current=OP,t=n(s,r)}while(Ca)}if(Pl.current=uc,e=it!==null&&it.next!==null,Tr=0,lt=it=He=null,cc=!1,e)throw Error(Y(300));return t}function tm(){var t=Za!==0;return Za=0,t}function An(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return lt===null?He.memoizedState=lt=t:lt=lt.next=t,lt}function yn(){if(it===null){var t=He.alternate;t=t!==null?t.memoizedState:null}else t=it.next;var e=lt===null?He.memoizedState:lt.next;if(e!==null)lt=e,it=t;else{if(t===null)throw Error(Y(310));it=t,t={memoizedState:it.memoizedState,baseState:it.baseState,baseQueue:it.baseQueue,queue:it.queue,next:null},lt===null?He.memoizedState=lt=t:lt=lt.next=t}return lt}function eo(t,e){return typeof e=="function"?e(t):e}function Ch(t){var e=yn(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var s=it,r=s.baseQueue,i=n.pending;if(i!==null){if(r!==null){var o=r.next;r.next=i.next,i.next=o}s.baseQueue=r=i,n.pending=null}if(r!==null){i=r.next,s=s.baseState;var l=o=null,c=null,u=i;do{var h=u.lane;if((Tr&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),s=u.hasEagerState?u.eagerState:t(s,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=d,o=s):c=c.next=d,He.lanes|=h,Lr|=h}u=u.next}while(u!==null&&u!==i);c===null?o=s:c.next=l,En(s,e.memoizedState)||(Dt=!0),e.memoizedState=s,e.baseState=o,e.baseQueue=c,n.lastRenderedState=s}if(t=n.interleaved,t!==null){r=t;do i=r.lane,He.lanes|=i,Lr|=i,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function kh(t){var e=yn(),n=e.queue;if(n===null)throw Error(Y(311));n.lastRenderedReducer=t;var s=n.dispatch,r=n.pending,i=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do i=t(i,o.action),o=o.next;while(o!==r);En(i,e.memoizedState)||(Dt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,s]}function hw(){}function dw(t,e){var n=He,s=yn(),r=e(),i=!En(s.memoizedState,r);if(i&&(s.memoizedState=r,Dt=!0),s=s.queue,nm(mw.bind(null,n,s,t),[t]),s.getSnapshot!==e||i||lt!==null&&lt.memoizedState.tag&1){if(n.flags|=2048,to(9,pw.bind(null,n,s,r,e),void 0,null),ut===null)throw Error(Y(349));Tr&30||fw(n,e,r)}return r}function fw(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=He.updateQueue,e===null?(e={lastEffect:null,stores:null},He.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function pw(t,e,n,s){e.value=n,e.getSnapshot=s,gw(e)&&yw(t)}function mw(t,e,n){return n(function(){gw(e)&&yw(t)})}function gw(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!En(t,n)}catch{return!0}}function yw(t){var e=as(t,1);e!==null&&Pn(e,t,1,-1)}function Cy(t){var e=An();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:eo,lastRenderedState:t},e.queue=t,t=t.dispatch=MP.bind(null,He,t),[e.memoizedState,t]}function to(t,e,n,s){return t={tag:t,create:e,destroy:n,deps:s,next:null},e=He.updateQueue,e===null?(e={lastEffect:null,stores:null},He.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(s=n.next,n.next=t,t.next=s,e.lastEffect=t)),t}function vw(){return yn().memoizedState}function El(t,e,n,s){var r=An();He.flags|=t,r.memoizedState=to(1|e,n,void 0,s===void 0?null:s)}function Jc(t,e,n,s){var r=yn();s=s===void 0?null:s;var i=void 0;if(it!==null){var o=it.memoizedState;if(i=o.destroy,s!==null&&Zp(s,o.deps)){r.memoizedState=to(e,n,i,s);return}}He.flags|=t,r.memoizedState=to(1|e,n,i,s)}function ky(t,e){return El(8390656,8,t,e)}function nm(t,e){return Jc(2048,8,t,e)}function xw(t,e){return Jc(4,2,t,e)}function ww(t,e){return Jc(4,4,t,e)}function Sw(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function bw(t,e,n){return n=n!=null?n.concat([t]):null,Jc(4,4,Sw.bind(null,e,t),n)}function sm(){}function Nw(t,e){var n=yn();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&Zp(e,s[1])?s[0]:(n.memoizedState=[t,e],t)}function jw(t,e){var n=yn();e=e===void 0?null:e;var s=n.memoizedState;return s!==null&&e!==null&&Zp(e,s[1])?s[0]:(t=t(),n.memoizedState=[t,e],t)}function Cw(t,e,n){return Tr&21?(En(n,e)||(n=L1(),He.lanes|=n,Lr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Dt=!0),t.memoizedState=n)}function _P(t,e){var n=Ee;Ee=n!==0&&4>n?n:4,t(!0);var s=jh.transition;jh.transition={};try{t(!1),e()}finally{Ee=n,jh.transition=s}}function kw(){return yn().memoizedState}function RP(t,e,n){var s=As(t);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},Pw(t))Ew(e,n);else if(n=lw(t,e,n,s),n!==null){var r=Tt();Pn(n,t,s,r),Tw(n,e,s)}}function MP(t,e,n){var s=As(t),r={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(Pw(t))Ew(e,r);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,n);if(r.hasEagerState=!0,r.eagerState=l,En(l,o)){var c=e.interleaved;c===null?(r.next=r,Gp(e)):(r.next=c.next,c.next=r),e.interleaved=r;return}}catch{}finally{}n=lw(t,e,r,s),n!==null&&(r=Tt(),Pn(n,t,s,r),Tw(n,e,s))}}function Pw(t){var e=t.alternate;return t===He||e!==null&&e===He}function Ew(t,e){Ca=cc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Tw(t,e,n){if(n&4194240){var s=e.lanes;s&=t.pendingLanes,n|=s,e.lanes=n,Ip(t,n)}}var uc={readContext:gn,useCallback:vt,useContext:vt,useEffect:vt,useImperativeHandle:vt,useInsertionEffect:vt,useLayoutEffect:vt,useMemo:vt,useReducer:vt,useRef:vt,useState:vt,useDebugValue:vt,useDeferredValue:vt,useTransition:vt,useMutableSource:vt,useSyncExternalStore:vt,useId:vt,unstable_isNewReconciler:!1},IP={readContext:gn,useCallback:function(t,e){return An().memoizedState=[t,e===void 0?null:e],t},useContext:gn,useEffect:ky,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,El(4194308,4,Sw.bind(null,e,t),n)},useLayoutEffect:function(t,e){return El(4194308,4,t,e)},useInsertionEffect:function(t,e){return El(4,2,t,e)},useMemo:function(t,e){var n=An();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var s=An();return e=n!==void 0?n(e):e,s.memoizedState=s.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},s.queue=t,t=t.dispatch=RP.bind(null,He,t),[s.memoizedState,t]},useRef:function(t){var e=An();return t={current:t},e.memoizedState=t},useState:Cy,useDebugValue:sm,useDeferredValue:function(t){return An().memoizedState=t},useTransition:function(){var t=Cy(!1),e=t[0];return t=_P.bind(null,t[1]),An().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var s=He,r=An();if(Ve){if(n===void 0)throw Error(Y(407));n=n()}else{if(n=e(),ut===null)throw Error(Y(349));Tr&30||fw(s,e,n)}r.memoizedState=n;var i={value:n,getSnapshot:e};return r.queue=i,ky(mw.bind(null,s,i,t),[t]),s.flags|=2048,to(9,pw.bind(null,s,i,n,e),void 0,null),n},useId:function(){var t=An(),e=ut.identifierPrefix;if(Ve){var n=Kn,s=Qn;n=(s&~(1<<32-kn(s)-1)).toString(32)+n,e=":"+e+"R"+n,n=Za++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=LP++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},AP={readContext:gn,useCallback:Nw,useContext:gn,useEffect:nm,useImperativeHandle:bw,useInsertionEffect:xw,useLayoutEffect:ww,useMemo:jw,useReducer:Ch,useRef:vw,useState:function(){return Ch(eo)},useDebugValue:sm,useDeferredValue:function(t){var e=yn();return Cw(e,it.memoizedState,t)},useTransition:function(){var t=Ch(eo)[0],e=yn().memoizedState;return[t,e]},useMutableSource:hw,useSyncExternalStore:dw,useId:kw,unstable_isNewReconciler:!1},OP={readContext:gn,useCallback:Nw,useContext:gn,useEffect:nm,useImperativeHandle:bw,useInsertionEffect:xw,useLayoutEffect:ww,useMemo:jw,useReducer:kh,useRef:vw,useState:function(){return kh(eo)},useDebugValue:sm,useDeferredValue:function(t){var e=yn();return it===null?e.memoizedState=t:Cw(e,it.memoizedState,t)},useTransition:function(){var t=kh(eo)[0],e=yn().memoizedState;return[t,e]},useMutableSource:hw,useSyncExternalStore:dw,useId:kw,unstable_isNewReconciler:!1};function wn(t,e){if(t&&t.defaultProps){e=Ye({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function gf(t,e,n,s){e=t.memoizedState,n=n(s,e),n=n==null?e:Ye({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Zc={isMounted:function(t){return(t=t._reactInternals)?Vr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var s=Tt(),r=As(t),i=es(s,r);i.payload=e,n!=null&&(i.callback=n),e=Ms(t,i,r),e!==null&&(Pn(e,t,r,s),kl(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var s=Tt(),r=As(t),i=es(s,r);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=Ms(t,i,r),e!==null&&(Pn(e,t,r,s),kl(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Tt(),s=As(t),r=es(n,s);r.tag=2,e!=null&&(r.callback=e),e=Ms(t,r,s),e!==null&&(Pn(e,t,s,n),kl(e,t,s))}};function Py(t,e,n,s,r,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(s,i,o):e.prototype&&e.prototype.isPureReactComponent?!qa(n,s)||!qa(r,i):!0}function Lw(t,e,n){var s=!1,r=$s,i=e.contextType;return typeof i=="object"&&i!==null?i=gn(i):(r=$t(e)?Pr:Ct.current,s=e.contextTypes,i=(s=s!=null)?ki(t,r):$s),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Zc,t.stateNode=e,e._reactInternals=t,s&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=i),e}function Ey(t,e,n,s){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,s),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,s),e.state!==t&&Zc.enqueueReplaceState(e,e.state,null)}function yf(t,e,n,s){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},Qp(t);var i=e.contextType;typeof i=="object"&&i!==null?r.context=gn(i):(i=$t(e)?Pr:Ct.current,r.context=ki(t,i)),r.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(gf(t,e,i,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Zc.enqueueReplaceState(r,r.state,null),oc(t,n,r,s),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Li(t,e){try{var n="",s=e;do n+=u2(s),s=s.return;while(s);var r=n}catch(i){r=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:r,digest:null}}function Ph(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function vf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var DP=typeof WeakMap=="function"?WeakMap:Map;function _w(t,e,n){n=es(-1,n),n.tag=3,n.payload={element:null};var s=e.value;return n.callback=function(){dc||(dc=!0,Ef=s),vf(t,e)},n}function Rw(t,e,n){n=es(-1,n),n.tag=3;var s=t.type.getDerivedStateFromError;if(typeof s=="function"){var r=e.value;n.payload=function(){return s(r)},n.callback=function(){vf(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){vf(t,e),typeof s!="function"&&(Is===null?Is=new Set([this]):Is.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Ty(t,e,n){var s=t.pingCache;if(s===null){s=t.pingCache=new DP;var r=new Set;s.set(e,r)}else r=s.get(e),r===void 0&&(r=new Set,s.set(e,r));r.has(n)||(r.add(n),t=XP.bind(null,t,e,n),e.then(t,t))}function Ly(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function _y(t,e,n,s,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=es(-1,1),e.tag=2,Ms(n,e,1))),n.lanes|=1),t)}var FP=us.ReactCurrentOwner,Dt=!1;function Pt(t,e,n,s){e.child=t===null?ow(e,null,n,s):Ei(e,t.child,n,s)}function Ry(t,e,n,s,r){n=n.render;var i=e.ref;return wi(e,r),s=em(t,e,n,s,i,r),n=tm(),t!==null&&!Dt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,os(t,e,r)):(Ve&&n&&Vp(e),e.flags|=1,Pt(t,e,s,r),e.child)}function My(t,e,n,s,r){if(t===null){var i=n.type;return typeof i=="function"&&!hm(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Mw(t,e,i,s,r)):(t=Rl(n.type,null,s,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&r)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:qa,n(o,s)&&t.ref===e.ref)return os(t,e,r)}return e.flags|=1,t=Os(i,s),t.ref=e.ref,t.return=e,e.child=t}function Mw(t,e,n,s,r){if(t!==null){var i=t.memoizedProps;if(qa(i,s)&&t.ref===e.ref)if(Dt=!1,e.pendingProps=s=i,(t.lanes&r)!==0)t.flags&131072&&(Dt=!0);else return e.lanes=t.lanes,os(t,e,r)}return xf(t,e,n,s,r)}function Iw(t,e,n){var s=e.pendingProps,r=s.children,i=t!==null?t.memoizedState:null;if(s.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ae(ci,Kt),Kt|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ae(ci,Kt),Kt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=i!==null?i.baseLanes:n,Ae(ci,Kt),Kt|=s}else i!==null?(s=i.baseLanes|n,e.memoizedState=null):s=n,Ae(ci,Kt),Kt|=s;return Pt(t,e,r,n),e.child}function Aw(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function xf(t,e,n,s,r){var i=$t(n)?Pr:Ct.current;return i=ki(e,i),wi(e,r),n=em(t,e,n,s,i,r),s=tm(),t!==null&&!Dt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,os(t,e,r)):(Ve&&s&&Vp(e),e.flags|=1,Pt(t,e,n,r),e.child)}function Iy(t,e,n,s,r){if($t(n)){var i=!0;nc(e)}else i=!1;if(wi(e,r),e.stateNode===null)Tl(t,e),Lw(e,n,s),yf(e,n,s,r),s=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=gn(u):(u=$t(n)?Pr:Ct.current,u=ki(e,u));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==s||c!==u)&&Ey(e,o,s,u),xs=!1;var f=e.memoizedState;o.state=f,oc(e,s,o,r),c=e.memoizedState,l!==s||f!==c||zt.current||xs?(typeof h=="function"&&(gf(e,n,h,s),c=e.memoizedState),(l=xs||Py(e,n,l,s,f,c,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=s,e.memoizedState=c),o.props=s,o.state=c,o.context=u,s=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),s=!1)}else{o=e.stateNode,cw(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:wn(e.type,l),o.props=u,d=e.pendingProps,f=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=gn(c):(c=$t(n)?Pr:Ct.current,c=ki(e,c));var x=n.getDerivedStateFromProps;(h=typeof x=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==d||f!==c)&&Ey(e,o,s,c),xs=!1,f=e.memoizedState,o.state=f,oc(e,s,o,r);var p=e.memoizedState;l!==d||f!==p||zt.current||xs?(typeof x=="function"&&(gf(e,n,x,s),p=e.memoizedState),(u=xs||Py(e,n,u,s,f,p,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,p,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,p,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=s,e.memoizedState=p),o.props=s,o.state=p,o.context=c,s=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),s=!1)}return wf(t,e,n,s,i,r)}function wf(t,e,n,s,r,i){Aw(t,e);var o=(e.flags&128)!==0;if(!s&&!o)return r&&xy(e,n,!1),os(t,e,i);s=e.stateNode,FP.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:s.render();return e.flags|=1,t!==null&&o?(e.child=Ei(e,t.child,null,i),e.child=Ei(e,null,l,i)):Pt(t,e,l,i),e.memoizedState=s.state,r&&xy(e,n,!0),e.child}function Ow(t){var e=t.stateNode;e.pendingContext?vy(t,e.pendingContext,e.pendingContext!==e.context):e.context&&vy(t,e.context,!1),Kp(t,e.containerInfo)}function Ay(t,e,n,s,r){return Pi(),Wp(r),e.flags|=256,Pt(t,e,n,s),e.child}var Sf={dehydrated:null,treeContext:null,retryLane:0};function bf(t){return{baseLanes:t,cachePool:null,transitions:null}}function Dw(t,e,n){var s=e.pendingProps,r=Ue.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(r&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),Ae(Ue,r&1),t===null)return pf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=s.children,t=s.fallback,i?(s=e.mode,i=e.child,o={mode:"hidden",children:o},!(s&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=nu(o,s,0,null),t=Nr(t,s,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=bf(n),e.memoizedState=Sf,t):rm(e,o));if(r=t.memoizedState,r!==null&&(l=r.dehydrated,l!==null))return BP(t,e,o,s,l,r,n);if(i){i=s.fallback,o=e.mode,r=t.child,l=r.sibling;var c={mode:"hidden",children:s.children};return!(o&1)&&e.child!==r?(s=e.child,s.childLanes=0,s.pendingProps=c,e.deletions=null):(s=Os(r,c),s.subtreeFlags=r.subtreeFlags&14680064),l!==null?i=Os(l,i):(i=Nr(i,o,n,null),i.flags|=2),i.return=e,s.return=e,s.sibling=i,e.child=s,s=i,i=e.child,o=t.child.memoizedState,o=o===null?bf(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~n,e.memoizedState=Sf,s}return i=t.child,t=i.sibling,s=Os(i,{mode:"visible",children:s.children}),!(e.mode&1)&&(s.lanes=n),s.return=e,s.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=s,e.memoizedState=null,s}function rm(t,e){return e=nu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Zo(t,e,n,s){return s!==null&&Wp(s),Ei(e,t.child,null,n),t=rm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function BP(t,e,n,s,r,i,o){if(n)return e.flags&256?(e.flags&=-257,s=Ph(Error(Y(422))),Zo(t,e,o,s)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=s.fallback,r=e.mode,s=nu({mode:"visible",children:s.children},r,0,null),i=Nr(i,r,o,null),i.flags|=2,s.return=e,i.return=e,s.sibling=i,e.child=s,e.mode&1&&Ei(e,t.child,null,o),e.child.memoizedState=bf(o),e.memoizedState=Sf,i);if(!(e.mode&1))return Zo(t,e,o,null);if(r.data==="$!"){if(s=r.nextSibling&&r.nextSibling.dataset,s)var l=s.dgst;return s=l,i=Error(Y(419)),s=Ph(i,s,void 0),Zo(t,e,o,s)}if(l=(o&t.childLanes)!==0,Dt||l){if(s=ut,s!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(s.suspendedLanes|o)?0:r,r!==0&&r!==i.retryLane&&(i.retryLane=r,as(t,r),Pn(s,t,r,-1))}return um(),s=Ph(Error(Y(421))),Zo(t,e,o,s)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=JP.bind(null,t),r._reactRetry=e,null):(t=i.treeContext,Xt=Rs(r.nextSibling),Jt=e,Ve=!0,Nn=null,t!==null&&(hn[dn++]=Qn,hn[dn++]=Kn,hn[dn++]=Er,Qn=t.id,Kn=t.overflow,Er=e),e=rm(e,s.children),e.flags|=4096,e)}function Oy(t,e,n){t.lanes|=e;var s=t.alternate;s!==null&&(s.lanes|=e),mf(t.return,e,n)}function Eh(t,e,n,s,r){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:r}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=n,i.tailMode=r)}function Fw(t,e,n){var s=e.pendingProps,r=s.revealOrder,i=s.tail;if(Pt(t,e,s.children,n),s=Ue.current,s&2)s=s&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Oy(t,n,e);else if(t.tag===19)Oy(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}s&=1}if(Ae(Ue,s),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&lc(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Eh(e,!1,r,n,i);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&lc(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Eh(e,!0,n,null,i);break;case"together":Eh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Tl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function os(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Lr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Y(153));if(e.child!==null){for(t=e.child,n=Os(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Os(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function zP(t,e,n){switch(e.tag){case 3:Ow(e),Pi();break;case 5:uw(e);break;case 1:$t(e.type)&&nc(e);break;case 4:Kp(e,e.stateNode.containerInfo);break;case 10:var s=e.type._context,r=e.memoizedProps.value;Ae(ic,s._currentValue),s._currentValue=r;break;case 13:if(s=e.memoizedState,s!==null)return s.dehydrated!==null?(Ae(Ue,Ue.current&1),e.flags|=128,null):n&e.child.childLanes?Dw(t,e,n):(Ae(Ue,Ue.current&1),t=os(t,e,n),t!==null?t.sibling:null);Ae(Ue,Ue.current&1);break;case 19:if(s=(n&e.childLanes)!==0,t.flags&128){if(s)return Fw(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Ae(Ue,Ue.current),s)break;return null;case 22:case 23:return e.lanes=0,Iw(t,e,n)}return os(t,e,n)}var Bw,Nf,zw,$w;Bw=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Nf=function(){};zw=function(t,e,n,s){var r=t.memoizedProps;if(r!==s){t=e.stateNode,yr(Fn.current);var i=null;switch(n){case"input":r=Wd(t,r),s=Wd(t,s),i=[];break;case"select":r=Ye({},r,{value:void 0}),s=Ye({},s,{value:void 0}),i=[];break;case"textarea":r=qd(t,r),s=qd(t,s),i=[];break;default:typeof r.onClick!="function"&&typeof s.onClick=="function"&&(t.onclick=ec)}Qd(n,s);var o;n=null;for(u in r)if(!s.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var l=r[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(za.hasOwnProperty(u)?i||(i=[]):(i=i||[]).push(u,null));for(u in s){var c=s[u];if(l=r!=null?r[u]:void 0,s.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(u,n)),n=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(za.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&De("scroll",t),i||l===c||(i=[])):(i=i||[]).push(u,c))}n&&(i=i||[]).push("style",n);var u=i;(e.updateQueue=u)&&(e.flags|=4)}};$w=function(t,e,n,s){n!==s&&(e.flags|=4)};function ra(t,e){if(!Ve)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:s.sibling=null}}function xt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,s=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags&14680064,s|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,s|=r.subtreeFlags,s|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=s,t.childLanes=n,e}function $P(t,e,n){var s=e.pendingProps;switch(Up(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xt(e),null;case 1:return $t(e.type)&&tc(),xt(e),null;case 3:return s=e.stateNode,Ti(),Fe(zt),Fe(Ct),Jp(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(t===null||t.child===null)&&(Xo(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Nn!==null&&(_f(Nn),Nn=null))),Nf(t,e),xt(e),null;case 5:Xp(e);var r=yr(Ja.current);if(n=e.type,t!==null&&e.stateNode!=null)zw(t,e,n,s,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!s){if(e.stateNode===null)throw Error(Y(166));return xt(e),null}if(t=yr(Fn.current),Xo(e)){s=e.stateNode,n=e.type;var i=e.memoizedProps;switch(s[On]=e,s[Ka]=i,t=(e.mode&1)!==0,n){case"dialog":De("cancel",s),De("close",s);break;case"iframe":case"object":case"embed":De("load",s);break;case"video":case"audio":for(r=0;r<pa.length;r++)De(pa[r],s);break;case"source":De("error",s);break;case"img":case"image":case"link":De("error",s),De("load",s);break;case"details":De("toggle",s);break;case"input":Hg(s,i),De("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},De("invalid",s);break;case"textarea":qg(s,i),De("invalid",s)}Qd(n,i),r=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?s.textContent!==l&&(i.suppressHydrationWarning!==!0&&Ko(s.textContent,l,t),r=["children",l]):typeof l=="number"&&s.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Ko(s.textContent,l,t),r=["children",""+l]):za.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&De("scroll",s)}switch(n){case"input":Vo(s),Yg(s,i,!0);break;case"textarea":Vo(s),Gg(s);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(s.onclick=ec)}s=r,e.updateQueue=s,s!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=m1(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof s.is=="string"?t=o.createElement(n,{is:s.is}):(t=o.createElement(n),n==="select"&&(o=t,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):t=o.createElementNS(t,n),t[On]=e,t[Ka]=s,Bw(t,e,!1,!1),e.stateNode=t;e:{switch(o=Kd(n,s),n){case"dialog":De("cancel",t),De("close",t),r=s;break;case"iframe":case"object":case"embed":De("load",t),r=s;break;case"video":case"audio":for(r=0;r<pa.length;r++)De(pa[r],t);r=s;break;case"source":De("error",t),r=s;break;case"img":case"image":case"link":De("error",t),De("load",t),r=s;break;case"details":De("toggle",t),r=s;break;case"input":Hg(t,s),r=Wd(t,s),De("invalid",t);break;case"option":r=s;break;case"select":t._wrapperState={wasMultiple:!!s.multiple},r=Ye({},s,{value:void 0}),De("invalid",t);break;case"textarea":qg(t,s),r=qd(t,s),De("invalid",t);break;default:r=s}Qd(n,r),l=r;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?v1(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&g1(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&$a(t,c):typeof c=="number"&&$a(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(za.hasOwnProperty(i)?c!=null&&i==="onScroll"&&De("scroll",t):c!=null&&Ep(t,i,c,o))}switch(n){case"input":Vo(t),Yg(t,s,!1);break;case"textarea":Vo(t),Gg(t);break;case"option":s.value!=null&&t.setAttribute("value",""+zs(s.value));break;case"select":t.multiple=!!s.multiple,i=s.value,i!=null?gi(t,!!s.multiple,i,!1):s.defaultValue!=null&&gi(t,!!s.multiple,s.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=ec)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return xt(e),null;case 6:if(t&&e.stateNode!=null)$w(t,e,t.memoizedProps,s);else{if(typeof s!="string"&&e.stateNode===null)throw Error(Y(166));if(n=yr(Ja.current),yr(Fn.current),Xo(e)){if(s=e.stateNode,n=e.memoizedProps,s[On]=e,(i=s.nodeValue!==n)&&(t=Jt,t!==null))switch(t.tag){case 3:Ko(s.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ko(s.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[On]=e,e.stateNode=s}return xt(e),null;case 13:if(Fe(Ue),s=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ve&&Xt!==null&&e.mode&1&&!(e.flags&128))iw(),Pi(),e.flags|=98560,i=!1;else if(i=Xo(e),s!==null&&s.dehydrated!==null){if(t===null){if(!i)throw Error(Y(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Y(317));i[On]=e}else Pi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;xt(e),i=!1}else Nn!==null&&(_f(Nn),Nn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(s=s!==null,s!==(t!==null&&t.memoizedState!==null)&&s&&(e.child.flags|=8192,e.mode&1&&(t===null||Ue.current&1?at===0&&(at=3):um())),e.updateQueue!==null&&(e.flags|=4),xt(e),null);case 4:return Ti(),Nf(t,e),t===null&&Ga(e.stateNode.containerInfo),xt(e),null;case 10:return qp(e.type._context),xt(e),null;case 17:return $t(e.type)&&tc(),xt(e),null;case 19:if(Fe(Ue),i=e.memoizedState,i===null)return xt(e),null;if(s=(e.flags&128)!==0,o=i.rendering,o===null)if(s)ra(i,!1);else{if(at!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=lc(t),o!==null){for(e.flags|=128,ra(i,!1),s=o.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),e.subtreeFlags=0,s=n,n=e.child;n!==null;)i=n,t=s,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ae(Ue,Ue.current&1|2),e.child}t=t.sibling}i.tail!==null&&Je()>_i&&(e.flags|=128,s=!0,ra(i,!1),e.lanes=4194304)}else{if(!s)if(t=lc(o),t!==null){if(e.flags|=128,s=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ra(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Ve)return xt(e),null}else 2*Je()-i.renderingStartTime>_i&&n!==1073741824&&(e.flags|=128,s=!0,ra(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(n=i.last,n!==null?n.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Je(),e.sibling=null,n=Ue.current,Ae(Ue,s?n&1|2:n&1),e):(xt(e),null);case 22:case 23:return cm(),s=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==s&&(e.flags|=8192),s&&e.mode&1?Kt&1073741824&&(xt(e),e.subtreeFlags&6&&(e.flags|=8192)):xt(e),null;case 24:return null;case 25:return null}throw Error(Y(156,e.tag))}function VP(t,e){switch(Up(e),e.tag){case 1:return $t(e.type)&&tc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Ti(),Fe(zt),Fe(Ct),Jp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Xp(e),null;case 13:if(Fe(Ue),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Y(340));Pi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Fe(Ue),null;case 4:return Ti(),null;case 10:return qp(e.type._context),null;case 22:case 23:return cm(),null;case 24:return null;default:return null}}var el=!1,St=!1,UP=typeof WeakSet=="function"?WeakSet:Set,ne=null;function li(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){Ke(t,e,s)}else n.current=null}function jf(t,e,n){try{n()}catch(s){Ke(t,e,s)}}var Dy=!1;function WP(t,e){if(of=Xl,t=Y1(),$p(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var r=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,u=0,h=0,d=t,f=null;t:for(;;){for(var x;d!==n||r!==0&&d.nodeType!==3||(l=o+r),d!==i||s!==0&&d.nodeType!==3||(c=o+s),d.nodeType===3&&(o+=d.nodeValue.length),(x=d.firstChild)!==null;)f=d,d=x;for(;;){if(d===t)break t;if(f===n&&++u===r&&(l=o),f===i&&++h===s&&(c=o),(x=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=x}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(lf={focusedElem:t,selectionRange:n},Xl=!1,ne=e;ne!==null;)if(e=ne,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ne=t;else for(;ne!==null;){e=ne;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var y=p.memoizedProps,w=p.memoizedState,m=e.stateNode,g=m.getSnapshotBeforeUpdate(e.elementType===e.type?y:wn(e.type,y),w);m.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Y(163))}}catch(N){Ke(e,e.return,N)}if(t=e.sibling,t!==null){t.return=e.return,ne=t;break}ne=e.return}return p=Dy,Dy=!1,p}function ka(t,e,n){var s=e.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var r=s=s.next;do{if((r.tag&t)===t){var i=r.destroy;r.destroy=void 0,i!==void 0&&jf(e,n,i)}r=r.next}while(r!==s)}}function eu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var s=n.create;n.destroy=s()}n=n.next}while(n!==e)}}function Cf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Vw(t){var e=t.alternate;e!==null&&(t.alternate=null,Vw(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[On],delete e[Ka],delete e[hf],delete e[kP],delete e[PP])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Uw(t){return t.tag===5||t.tag===3||t.tag===4}function Fy(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Uw(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function kf(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ec));else if(s!==4&&(t=t.child,t!==null))for(kf(t,e,n),t=t.sibling;t!==null;)kf(t,e,n),t=t.sibling}function Pf(t,e,n){var s=t.tag;if(s===5||s===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(s!==4&&(t=t.child,t!==null))for(Pf(t,e,n),t=t.sibling;t!==null;)Pf(t,e,n),t=t.sibling}var ft=null,bn=!1;function ms(t,e,n){for(n=n.child;n!==null;)Ww(t,e,n),n=n.sibling}function Ww(t,e,n){if(Dn&&typeof Dn.onCommitFiberUnmount=="function")try{Dn.onCommitFiberUnmount(Yc,n)}catch{}switch(n.tag){case 5:St||li(n,e);case 6:var s=ft,r=bn;ft=null,ms(t,e,n),ft=s,bn=r,ft!==null&&(bn?(t=ft,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ft.removeChild(n.stateNode));break;case 18:ft!==null&&(bn?(t=ft,n=n.stateNode,t.nodeType===8?Sh(t.parentNode,n):t.nodeType===1&&Sh(t,n),Ha(t)):Sh(ft,n.stateNode));break;case 4:s=ft,r=bn,ft=n.stateNode.containerInfo,bn=!0,ms(t,e,n),ft=s,bn=r;break;case 0:case 11:case 14:case 15:if(!St&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){r=s=s.next;do{var i=r,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&jf(n,e,o),r=r.next}while(r!==s)}ms(t,e,n);break;case 1:if(!St&&(li(n,e),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(l){Ke(n,e,l)}ms(t,e,n);break;case 21:ms(t,e,n);break;case 22:n.mode&1?(St=(s=St)||n.memoizedState!==null,ms(t,e,n),St=s):ms(t,e,n);break;default:ms(t,e,n)}}function By(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new UP),e.forEach(function(s){var r=ZP.bind(null,t,s);n.has(s)||(n.add(s),s.then(r,r))})}}function vn(t,e){var n=e.deletions;if(n!==null)for(var s=0;s<n.length;s++){var r=n[s];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:ft=l.stateNode,bn=!1;break e;case 3:ft=l.stateNode.containerInfo,bn=!0;break e;case 4:ft=l.stateNode.containerInfo,bn=!0;break e}l=l.return}if(ft===null)throw Error(Y(160));Ww(i,o,r),ft=null,bn=!1;var c=r.alternate;c!==null&&(c.return=null),r.return=null}catch(u){Ke(r,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Hw(e,t),e=e.sibling}function Hw(t,e){var n=t.alternate,s=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(vn(e,t),Rn(t),s&4){try{ka(3,t,t.return),eu(3,t)}catch(y){Ke(t,t.return,y)}try{ka(5,t,t.return)}catch(y){Ke(t,t.return,y)}}break;case 1:vn(e,t),Rn(t),s&512&&n!==null&&li(n,n.return);break;case 5:if(vn(e,t),Rn(t),s&512&&n!==null&&li(n,n.return),t.flags&32){var r=t.stateNode;try{$a(r,"")}catch(y){Ke(t,t.return,y)}}if(s&4&&(r=t.stateNode,r!=null)){var i=t.memoizedProps,o=n!==null?n.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&f1(r,i),Kd(l,o);var u=Kd(l,i);for(o=0;o<c.length;o+=2){var h=c[o],d=c[o+1];h==="style"?v1(r,d):h==="dangerouslySetInnerHTML"?g1(r,d):h==="children"?$a(r,d):Ep(r,h,d,u)}switch(l){case"input":Hd(r,i);break;case"textarea":p1(r,i);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!i.multiple;var x=i.value;x!=null?gi(r,!!i.multiple,x,!1):f!==!!i.multiple&&(i.defaultValue!=null?gi(r,!!i.multiple,i.defaultValue,!0):gi(r,!!i.multiple,i.multiple?[]:"",!1))}r[Ka]=i}catch(y){Ke(t,t.return,y)}}break;case 6:if(vn(e,t),Rn(t),s&4){if(t.stateNode===null)throw Error(Y(162));r=t.stateNode,i=t.memoizedProps;try{r.nodeValue=i}catch(y){Ke(t,t.return,y)}}break;case 3:if(vn(e,t),Rn(t),s&4&&n!==null&&n.memoizedState.isDehydrated)try{Ha(e.containerInfo)}catch(y){Ke(t,t.return,y)}break;case 4:vn(e,t),Rn(t);break;case 13:vn(e,t),Rn(t),r=t.child,r.flags&8192&&(i=r.memoizedState!==null,r.stateNode.isHidden=i,!i||r.alternate!==null&&r.alternate.memoizedState!==null||(om=Je())),s&4&&By(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(St=(u=St)||h,vn(e,t),St=u):vn(e,t),Rn(t),s&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(ne=t,h=t.child;h!==null;){for(d=ne=h;ne!==null;){switch(f=ne,x=f.child,f.tag){case 0:case 11:case 14:case 15:ka(4,f,f.return);break;case 1:li(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){s=f,n=f.return;try{e=s,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(y){Ke(s,n,y)}}break;case 5:li(f,f.return);break;case 22:if(f.memoizedState!==null){$y(d);continue}}x!==null?(x.return=f,ne=x):$y(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{r=d.stateNode,u?(i=r.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=y1("display",o))}catch(y){Ke(t,t.return,y)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(y){Ke(t,t.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:vn(e,t),Rn(t),s&4&&By(t);break;case 21:break;default:vn(e,t),Rn(t)}}function Rn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Uw(n)){var s=n;break e}n=n.return}throw Error(Y(160))}switch(s.tag){case 5:var r=s.stateNode;s.flags&32&&($a(r,""),s.flags&=-33);var i=Fy(t);Pf(t,i,r);break;case 3:case 4:var o=s.stateNode.containerInfo,l=Fy(t);kf(t,l,o);break;default:throw Error(Y(161))}}catch(c){Ke(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function HP(t,e,n){ne=t,Yw(t)}function Yw(t,e,n){for(var s=(t.mode&1)!==0;ne!==null;){var r=ne,i=r.child;if(r.tag===22&&s){var o=r.memoizedState!==null||el;if(!o){var l=r.alternate,c=l!==null&&l.memoizedState!==null||St;l=el;var u=St;if(el=o,(St=c)&&!u)for(ne=r;ne!==null;)o=ne,c=o.child,o.tag===22&&o.memoizedState!==null?Vy(r):c!==null?(c.return=o,ne=c):Vy(r);for(;i!==null;)ne=i,Yw(i),i=i.sibling;ne=r,el=l,St=u}zy(t)}else r.subtreeFlags&8772&&i!==null?(i.return=r,ne=i):zy(t)}}function zy(t){for(;ne!==null;){var e=ne;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:St||eu(5,e);break;case 1:var s=e.stateNode;if(e.flags&4&&!St)if(n===null)s.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:wn(e.type,n.memoizedProps);s.componentDidUpdate(r,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&jy(e,i,s);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}jy(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&Ha(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Y(163))}St||e.flags&512&&Cf(e)}catch(f){Ke(e,e.return,f)}}if(e===t){ne=null;break}if(n=e.sibling,n!==null){n.return=e.return,ne=n;break}ne=e.return}}function $y(t){for(;ne!==null;){var e=ne;if(e===t){ne=null;break}var n=e.sibling;if(n!==null){n.return=e.return,ne=n;break}ne=e.return}}function Vy(t){for(;ne!==null;){var e=ne;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{eu(4,e)}catch(c){Ke(e,n,c)}break;case 1:var s=e.stateNode;if(typeof s.componentDidMount=="function"){var r=e.return;try{s.componentDidMount()}catch(c){Ke(e,r,c)}}var i=e.return;try{Cf(e)}catch(c){Ke(e,i,c)}break;case 5:var o=e.return;try{Cf(e)}catch(c){Ke(e,o,c)}}}catch(c){Ke(e,e.return,c)}if(e===t){ne=null;break}var l=e.sibling;if(l!==null){l.return=e.return,ne=l;break}ne=e.return}}var YP=Math.ceil,hc=us.ReactCurrentDispatcher,im=us.ReactCurrentOwner,mn=us.ReactCurrentBatchConfig,we=0,ut=null,rt=null,gt=0,Kt=0,ci=Gs(0),at=0,no=null,Lr=0,tu=0,am=0,Pa=null,Ot=null,om=0,_i=1/0,qn=null,dc=!1,Ef=null,Is=null,tl=!1,js=null,fc=0,Ea=0,Tf=null,Ll=-1,_l=0;function Tt(){return we&6?Je():Ll!==-1?Ll:Ll=Je()}function As(t){return t.mode&1?we&2&&gt!==0?gt&-gt:TP.transition!==null?(_l===0&&(_l=L1()),_l):(t=Ee,t!==0||(t=window.event,t=t===void 0?16:D1(t.type)),t):1}function Pn(t,e,n,s){if(50<Ea)throw Ea=0,Tf=null,Error(Y(185));vo(t,n,s),(!(we&2)||t!==ut)&&(t===ut&&(!(we&2)&&(tu|=n),at===4&&bs(t,gt)),Vt(t,s),n===1&&we===0&&!(e.mode&1)&&(_i=Je()+500,Xc&&Qs()))}function Vt(t,e){var n=t.callbackNode;T2(t,e);var s=Kl(t,t===ut?gt:0);if(s===0)n!==null&&Xg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=s&-s,t.callbackPriority!==e){if(n!=null&&Xg(n),e===1)t.tag===0?EP(Uy.bind(null,t)):nw(Uy.bind(null,t)),jP(function(){!(we&6)&&Qs()}),n=null;else{switch(_1(s)){case 1:n=Mp;break;case 4:n=E1;break;case 16:n=Ql;break;case 536870912:n=T1;break;default:n=Ql}n=eS(n,qw.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function qw(t,e){if(Ll=-1,_l=0,we&6)throw Error(Y(327));var n=t.callbackNode;if(Si()&&t.callbackNode!==n)return null;var s=Kl(t,t===ut?gt:0);if(s===0)return null;if(s&30||s&t.expiredLanes||e)e=pc(t,s);else{e=s;var r=we;we|=2;var i=Qw();(ut!==t||gt!==e)&&(qn=null,_i=Je()+500,br(t,e));do try{QP();break}catch(l){Gw(t,l)}while(!0);Yp(),hc.current=i,we=r,rt!==null?e=0:(ut=null,gt=0,e=at)}if(e!==0){if(e===2&&(r=tf(t),r!==0&&(s=r,e=Lf(t,r))),e===1)throw n=no,br(t,0),bs(t,s),Vt(t,Je()),n;if(e===6)bs(t,s);else{if(r=t.current.alternate,!(s&30)&&!qP(r)&&(e=pc(t,s),e===2&&(i=tf(t),i!==0&&(s=i,e=Lf(t,i))),e===1))throw n=no,br(t,0),bs(t,s),Vt(t,Je()),n;switch(t.finishedWork=r,t.finishedLanes=s,e){case 0:case 1:throw Error(Y(345));case 2:lr(t,Ot,qn);break;case 3:if(bs(t,s),(s&130023424)===s&&(e=om+500-Je(),10<e)){if(Kl(t,0)!==0)break;if(r=t.suspendedLanes,(r&s)!==s){Tt(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=uf(lr.bind(null,t,Ot,qn),e);break}lr(t,Ot,qn);break;case 4:if(bs(t,s),(s&4194240)===s)break;for(e=t.eventTimes,r=-1;0<s;){var o=31-kn(s);i=1<<o,o=e[o],o>r&&(r=o),s&=~i}if(s=r,s=Je()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*YP(s/1960))-s,10<s){t.timeoutHandle=uf(lr.bind(null,t,Ot,qn),s);break}lr(t,Ot,qn);break;case 5:lr(t,Ot,qn);break;default:throw Error(Y(329))}}}return Vt(t,Je()),t.callbackNode===n?qw.bind(null,t):null}function Lf(t,e){var n=Pa;return t.current.memoizedState.isDehydrated&&(br(t,e).flags|=256),t=pc(t,e),t!==2&&(e=Ot,Ot=n,e!==null&&_f(e)),t}function _f(t){Ot===null?Ot=t:Ot.push.apply(Ot,t)}function qP(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var r=n[s],i=r.getSnapshot;r=r.value;try{if(!En(i(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function bs(t,e){for(e&=~am,e&=~tu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-kn(e),s=1<<n;t[n]=-1,e&=~s}}function Uy(t){if(we&6)throw Error(Y(327));Si();var e=Kl(t,0);if(!(e&1))return Vt(t,Je()),null;var n=pc(t,e);if(t.tag!==0&&n===2){var s=tf(t);s!==0&&(e=s,n=Lf(t,s))}if(n===1)throw n=no,br(t,0),bs(t,e),Vt(t,Je()),n;if(n===6)throw Error(Y(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,lr(t,Ot,qn),Vt(t,Je()),null}function lm(t,e){var n=we;we|=1;try{return t(e)}finally{we=n,we===0&&(_i=Je()+500,Xc&&Qs())}}function _r(t){js!==null&&js.tag===0&&!(we&6)&&Si();var e=we;we|=1;var n=mn.transition,s=Ee;try{if(mn.transition=null,Ee=1,t)return t()}finally{Ee=s,mn.transition=n,we=e,!(we&6)&&Qs()}}function cm(){Kt=ci.current,Fe(ci)}function br(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,NP(n)),rt!==null)for(n=rt.return;n!==null;){var s=n;switch(Up(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&tc();break;case 3:Ti(),Fe(zt),Fe(Ct),Jp();break;case 5:Xp(s);break;case 4:Ti();break;case 13:Fe(Ue);break;case 19:Fe(Ue);break;case 10:qp(s.type._context);break;case 22:case 23:cm()}n=n.return}if(ut=t,rt=t=Os(t.current,null),gt=Kt=e,at=0,no=null,am=tu=Lr=0,Ot=Pa=null,gr!==null){for(e=0;e<gr.length;e++)if(n=gr[e],s=n.interleaved,s!==null){n.interleaved=null;var r=s.next,i=n.pending;if(i!==null){var o=i.next;i.next=r,s.next=o}n.pending=s}gr=null}return t}function Gw(t,e){do{var n=rt;try{if(Yp(),Pl.current=uc,cc){for(var s=He.memoizedState;s!==null;){var r=s.queue;r!==null&&(r.pending=null),s=s.next}cc=!1}if(Tr=0,lt=it=He=null,Ca=!1,Za=0,im.current=null,n===null||n.return===null){at=1,no=e,rt=null;break}e:{var i=t,o=n.return,l=n,c=e;if(e=gt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=l,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var x=Ly(o);if(x!==null){x.flags&=-257,_y(x,o,l,i,e),x.mode&1&&Ty(i,u,e),e=x,c=u;var p=e.updateQueue;if(p===null){var y=new Set;y.add(c),e.updateQueue=y}else p.add(c);break e}else{if(!(e&1)){Ty(i,u,e),um();break e}c=Error(Y(426))}}else if(Ve&&l.mode&1){var w=Ly(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),_y(w,o,l,i,e),Wp(Li(c,l));break e}}i=c=Li(c,l),at!==4&&(at=2),Pa===null?Pa=[i]:Pa.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var m=_w(i,c,e);Ny(i,m);break e;case 1:l=c;var g=i.type,S=i.stateNode;if(!(i.flags&128)&&(typeof g.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(Is===null||!Is.has(S)))){i.flags|=65536,e&=-e,i.lanes|=e;var N=Rw(i,l,e);Ny(i,N);break e}}i=i.return}while(i!==null)}Xw(n)}catch(C){e=C,rt===n&&n!==null&&(rt=n=n.return);continue}break}while(!0)}function Qw(){var t=hc.current;return hc.current=uc,t===null?uc:t}function um(){(at===0||at===3||at===2)&&(at=4),ut===null||!(Lr&268435455)&&!(tu&268435455)||bs(ut,gt)}function pc(t,e){var n=we;we|=2;var s=Qw();(ut!==t||gt!==e)&&(qn=null,br(t,e));do try{GP();break}catch(r){Gw(t,r)}while(!0);if(Yp(),we=n,hc.current=s,rt!==null)throw Error(Y(261));return ut=null,gt=0,at}function GP(){for(;rt!==null;)Kw(rt)}function QP(){for(;rt!==null&&!w2();)Kw(rt)}function Kw(t){var e=Zw(t.alternate,t,Kt);t.memoizedProps=t.pendingProps,e===null?Xw(t):rt=e,im.current=null}function Xw(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=VP(n,e),n!==null){n.flags&=32767,rt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{at=6,rt=null;return}}else if(n=$P(n,e,Kt),n!==null){rt=n;return}if(e=e.sibling,e!==null){rt=e;return}rt=e=t}while(e!==null);at===0&&(at=5)}function lr(t,e,n){var s=Ee,r=mn.transition;try{mn.transition=null,Ee=1,KP(t,e,n,s)}finally{mn.transition=r,Ee=s}return null}function KP(t,e,n,s){do Si();while(js!==null);if(we&6)throw Error(Y(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(Y(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(L2(t,i),t===ut&&(rt=ut=null,gt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||tl||(tl=!0,eS(Ql,function(){return Si(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=mn.transition,mn.transition=null;var o=Ee;Ee=1;var l=we;we|=4,im.current=null,WP(t,n),Hw(n,t),gP(lf),Xl=!!of,lf=of=null,t.current=n,HP(n),S2(),we=l,Ee=o,mn.transition=i}else t.current=n;if(tl&&(tl=!1,js=t,fc=r),i=t.pendingLanes,i===0&&(Is=null),j2(n.stateNode),Vt(t,Je()),e!==null)for(s=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],s(r.value,{componentStack:r.stack,digest:r.digest});if(dc)throw dc=!1,t=Ef,Ef=null,t;return fc&1&&t.tag!==0&&Si(),i=t.pendingLanes,i&1?t===Tf?Ea++:(Ea=0,Tf=t):Ea=0,Qs(),null}function Si(){if(js!==null){var t=_1(fc),e=mn.transition,n=Ee;try{if(mn.transition=null,Ee=16>t?16:t,js===null)var s=!1;else{if(t=js,js=null,fc=0,we&6)throw Error(Y(331));var r=we;for(we|=4,ne=t.current;ne!==null;){var i=ne,o=i.child;if(ne.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(ne=u;ne!==null;){var h=ne;switch(h.tag){case 0:case 11:case 15:ka(8,h,i)}var d=h.child;if(d!==null)d.return=h,ne=d;else for(;ne!==null;){h=ne;var f=h.sibling,x=h.return;if(Vw(h),h===u){ne=null;break}if(f!==null){f.return=x,ne=f;break}ne=x}}}var p=i.alternate;if(p!==null){var y=p.child;if(y!==null){p.child=null;do{var w=y.sibling;y.sibling=null,y=w}while(y!==null)}}ne=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,ne=o;else e:for(;ne!==null;){if(i=ne,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ka(9,i,i.return)}var m=i.sibling;if(m!==null){m.return=i.return,ne=m;break e}ne=i.return}}var g=t.current;for(ne=g;ne!==null;){o=ne;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,ne=S;else e:for(o=g;ne!==null;){if(l=ne,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:eu(9,l)}}catch(C){Ke(l,l.return,C)}if(l===o){ne=null;break e}var N=l.sibling;if(N!==null){N.return=l.return,ne=N;break e}ne=l.return}}if(we=r,Qs(),Dn&&typeof Dn.onPostCommitFiberRoot=="function")try{Dn.onPostCommitFiberRoot(Yc,t)}catch{}s=!0}return s}finally{Ee=n,mn.transition=e}}return!1}function Wy(t,e,n){e=Li(n,e),e=_w(t,e,1),t=Ms(t,e,1),e=Tt(),t!==null&&(vo(t,1,e),Vt(t,e))}function Ke(t,e,n){if(t.tag===3)Wy(t,t,n);else for(;e!==null;){if(e.tag===3){Wy(e,t,n);break}else if(e.tag===1){var s=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Is===null||!Is.has(s))){t=Li(n,t),t=Rw(e,t,1),e=Ms(e,t,1),t=Tt(),e!==null&&(vo(e,1,t),Vt(e,t));break}}e=e.return}}function XP(t,e,n){var s=t.pingCache;s!==null&&s.delete(e),e=Tt(),t.pingedLanes|=t.suspendedLanes&n,ut===t&&(gt&n)===n&&(at===4||at===3&&(gt&130023424)===gt&&500>Je()-om?br(t,0):am|=n),Vt(t,e)}function Jw(t,e){e===0&&(t.mode&1?(e=Ho,Ho<<=1,!(Ho&130023424)&&(Ho=4194304)):e=1);var n=Tt();t=as(t,e),t!==null&&(vo(t,e,n),Vt(t,n))}function JP(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Jw(t,n)}function ZP(t,e){var n=0;switch(t.tag){case 13:var s=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:s=t.stateNode;break;default:throw Error(Y(314))}s!==null&&s.delete(e),Jw(t,n)}var Zw;Zw=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||zt.current)Dt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Dt=!1,zP(t,e,n);Dt=!!(t.flags&131072)}else Dt=!1,Ve&&e.flags&1048576&&sw(e,rc,e.index);switch(e.lanes=0,e.tag){case 2:var s=e.type;Tl(t,e),t=e.pendingProps;var r=ki(e,Ct.current);wi(e,n),r=em(null,e,s,t,r,n);var i=tm();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,$t(s)?(i=!0,nc(e)):i=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Qp(e),r.updater=Zc,e.stateNode=r,r._reactInternals=e,yf(e,s,t,n),e=wf(null,e,s,!0,i,n)):(e.tag=0,Ve&&i&&Vp(e),Pt(null,e,r,n),e=e.child),e;case 16:s=e.elementType;e:{switch(Tl(t,e),t=e.pendingProps,r=s._init,s=r(s._payload),e.type=s,r=e.tag=tE(s),t=wn(s,t),r){case 0:e=xf(null,e,s,t,n);break e;case 1:e=Iy(null,e,s,t,n);break e;case 11:e=Ry(null,e,s,t,n);break e;case 14:e=My(null,e,s,wn(s.type,t),n);break e}throw Error(Y(306,s,""))}return e;case 0:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:wn(s,r),xf(t,e,s,r,n);case 1:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:wn(s,r),Iy(t,e,s,r,n);case 3:e:{if(Ow(e),t===null)throw Error(Y(387));s=e.pendingProps,i=e.memoizedState,r=i.element,cw(t,e),oc(e,s,null,n);var o=e.memoizedState;if(s=o.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){r=Li(Error(Y(423)),e),e=Ay(t,e,s,n,r);break e}else if(s!==r){r=Li(Error(Y(424)),e),e=Ay(t,e,s,n,r);break e}else for(Xt=Rs(e.stateNode.containerInfo.firstChild),Jt=e,Ve=!0,Nn=null,n=ow(e,null,s,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Pi(),s===r){e=os(t,e,n);break e}Pt(t,e,s,n)}e=e.child}return e;case 5:return uw(e),t===null&&pf(e),s=e.type,r=e.pendingProps,i=t!==null?t.memoizedProps:null,o=r.children,cf(s,r)?o=null:i!==null&&cf(s,i)&&(e.flags|=32),Aw(t,e),Pt(t,e,o,n),e.child;case 6:return t===null&&pf(e),null;case 13:return Dw(t,e,n);case 4:return Kp(e,e.stateNode.containerInfo),s=e.pendingProps,t===null?e.child=Ei(e,null,s,n):Pt(t,e,s,n),e.child;case 11:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:wn(s,r),Ry(t,e,s,r,n);case 7:return Pt(t,e,e.pendingProps,n),e.child;case 8:return Pt(t,e,e.pendingProps.children,n),e.child;case 12:return Pt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(s=e.type._context,r=e.pendingProps,i=e.memoizedProps,o=r.value,Ae(ic,s._currentValue),s._currentValue=o,i!==null)if(En(i.value,o)){if(i.children===r.children&&!zt.current){e=os(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===s){if(i.tag===1){c=es(-1,n&-n),c.tag=2;var u=i.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),mf(i.return,n,e),l.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(Y(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),mf(o,n,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Pt(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,s=e.pendingProps.children,wi(e,n),r=gn(r),s=s(r),e.flags|=1,Pt(t,e,s,n),e.child;case 14:return s=e.type,r=wn(s,e.pendingProps),r=wn(s.type,r),My(t,e,s,r,n);case 15:return Mw(t,e,e.type,e.pendingProps,n);case 17:return s=e.type,r=e.pendingProps,r=e.elementType===s?r:wn(s,r),Tl(t,e),e.tag=1,$t(s)?(t=!0,nc(e)):t=!1,wi(e,n),Lw(e,s,r),yf(e,s,r,n),wf(null,e,s,!0,t,n);case 19:return Fw(t,e,n);case 22:return Iw(t,e,n)}throw Error(Y(156,e.tag))};function eS(t,e){return P1(t,e)}function eE(t,e,n,s){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fn(t,e,n,s){return new eE(t,e,n,s)}function hm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function tE(t){if(typeof t=="function")return hm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Lp)return 11;if(t===_p)return 14}return 2}function Os(t,e){var n=t.alternate;return n===null?(n=fn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Rl(t,e,n,s,r,i){var o=2;if(s=t,typeof t=="function")hm(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Zr:return Nr(n.children,r,i,e);case Tp:o=8,r|=8;break;case zd:return t=fn(12,n,e,r|2),t.elementType=zd,t.lanes=i,t;case $d:return t=fn(13,n,e,r),t.elementType=$d,t.lanes=i,t;case Vd:return t=fn(19,n,e,r),t.elementType=Vd,t.lanes=i,t;case u1:return nu(n,r,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case l1:o=10;break e;case c1:o=9;break e;case Lp:o=11;break e;case _p:o=14;break e;case vs:o=16,s=null;break e}throw Error(Y(130,t==null?t:typeof t,""))}return e=fn(o,n,e,r),e.elementType=t,e.type=s,e.lanes=i,e}function Nr(t,e,n,s){return t=fn(7,t,s,e),t.lanes=n,t}function nu(t,e,n,s){return t=fn(22,t,s,e),t.elementType=u1,t.lanes=n,t.stateNode={isHidden:!1},t}function Th(t,e,n){return t=fn(6,t,null,e),t.lanes=n,t}function Lh(t,e,n){return e=fn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function nE(t,e,n,s,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=uh(0),this.expirationTimes=uh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=uh(0),this.identifierPrefix=s,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function dm(t,e,n,s,r,i,o,l,c){return t=new nE(t,e,n,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=fn(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Qp(i),t}function sE(t,e,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Jr,key:s==null?null:""+s,children:t,containerInfo:e,implementation:n}}function tS(t){if(!t)return $s;t=t._reactInternals;e:{if(Vr(t)!==t||t.tag!==1)throw Error(Y(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if($t(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Y(171))}if(t.tag===1){var n=t.type;if($t(n))return tw(t,n,e)}return e}function nS(t,e,n,s,r,i,o,l,c){return t=dm(n,s,!0,t,r,i,o,l,c),t.context=tS(null),n=t.current,s=Tt(),r=As(n),i=es(s,r),i.callback=e??null,Ms(n,i,r),t.current.lanes=r,vo(t,r,s),Vt(t,s),t}function su(t,e,n,s){var r=e.current,i=Tt(),o=As(r);return n=tS(n),e.context===null?e.context=n:e.pendingContext=n,e=es(i,o),e.payload={element:t},s=s===void 0?null:s,s!==null&&(e.callback=s),t=Ms(r,e,o),t!==null&&(Pn(t,r,o,i),kl(t,r,o)),o}function mc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Hy(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function fm(t,e){Hy(t,e),(t=t.alternate)&&Hy(t,e)}function rE(){return null}var sS=typeof reportError=="function"?reportError:function(t){console.error(t)};function pm(t){this._internalRoot=t}ru.prototype.render=pm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Y(409));su(t,e,null,null)};ru.prototype.unmount=pm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;_r(function(){su(null,t,null,null)}),e[is]=null}};function ru(t){this._internalRoot=t}ru.prototype.unstable_scheduleHydration=function(t){if(t){var e=I1();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ss.length&&e!==0&&e<Ss[n].priority;n++);Ss.splice(n,0,t),n===0&&O1(t)}};function mm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function iu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Yy(){}function iE(t,e,n,s,r){if(r){if(typeof s=="function"){var i=s;s=function(){var u=mc(o);i.call(u)}}var o=nS(e,s,t,0,null,!1,!1,"",Yy);return t._reactRootContainer=o,t[is]=o.current,Ga(t.nodeType===8?t.parentNode:t),_r(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof s=="function"){var l=s;s=function(){var u=mc(c);l.call(u)}}var c=dm(t,0,!1,null,null,!1,!1,"",Yy);return t._reactRootContainer=c,t[is]=c.current,Ga(t.nodeType===8?t.parentNode:t),_r(function(){su(e,c,n,s)}),c}function au(t,e,n,s,r){var i=n._reactRootContainer;if(i){var o=i;if(typeof r=="function"){var l=r;r=function(){var c=mc(o);l.call(c)}}su(e,o,t,r)}else o=iE(n,e,t,r,s);return mc(o)}R1=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=fa(e.pendingLanes);n!==0&&(Ip(e,n|1),Vt(e,Je()),!(we&6)&&(_i=Je()+500,Qs()))}break;case 13:_r(function(){var s=as(t,1);if(s!==null){var r=Tt();Pn(s,t,1,r)}}),fm(t,1)}};Ap=function(t){if(t.tag===13){var e=as(t,134217728);if(e!==null){var n=Tt();Pn(e,t,134217728,n)}fm(t,134217728)}};M1=function(t){if(t.tag===13){var e=As(t),n=as(t,e);if(n!==null){var s=Tt();Pn(n,t,e,s)}fm(t,e)}};I1=function(){return Ee};A1=function(t,e){var n=Ee;try{return Ee=t,e()}finally{Ee=n}};Jd=function(t,e,n){switch(e){case"input":if(Hd(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var s=n[e];if(s!==t&&s.form===t.form){var r=Kc(s);if(!r)throw Error(Y(90));d1(s),Hd(s,r)}}}break;case"textarea":p1(t,n);break;case"select":e=n.value,e!=null&&gi(t,!!n.multiple,e,!1)}};S1=lm;b1=_r;var aE={usingClientEntryPoint:!1,Events:[wo,si,Kc,x1,w1,lm]},ia={findFiberByHostInstance:mr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},oE={bundleType:ia.bundleType,version:ia.version,rendererPackageName:ia.rendererPackageName,rendererConfig:ia.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:us.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=C1(t),t===null?null:t.stateNode},findFiberByHostInstance:ia.findFiberByHostInstance||rE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nl.isDisabled&&nl.supportsFiber)try{Yc=nl.inject(oE),Dn=nl}catch{}}an.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=aE;an.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!mm(e))throw Error(Y(200));return sE(t,e,null,n)};an.createRoot=function(t,e){if(!mm(t))throw Error(Y(299));var n=!1,s="",r=sS;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(s=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=dm(t,1,!1,null,null,n,!1,s,r),t[is]=e.current,Ga(t.nodeType===8?t.parentNode:t),new pm(e)};an.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Y(188)):(t=Object.keys(t).join(","),Error(Y(268,t)));return t=C1(e),t=t===null?null:t.stateNode,t};an.flushSync=function(t){return _r(t)};an.hydrate=function(t,e,n){if(!iu(e))throw Error(Y(200));return au(null,t,e,!0,n)};an.hydrateRoot=function(t,e,n){if(!mm(t))throw Error(Y(405));var s=n!=null&&n.hydratedSources||null,r=!1,i="",o=sS;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=nS(e,null,t,1,n??null,r,!1,i,o),t[is]=e.current,Ga(t),s)for(t=0;t<s.length;t++)n=s[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new ru(e)};an.render=function(t,e,n){if(!iu(e))throw Error(Y(200));return au(null,t,e,!1,n)};an.unmountComponentAtNode=function(t){if(!iu(t))throw Error(Y(40));return t._reactRootContainer?(_r(function(){au(null,null,t,!1,function(){t._reactRootContainer=null,t[is]=null})}),!0):!1};an.unstable_batchedUpdates=lm;an.unstable_renderSubtreeIntoContainer=function(t,e,n,s){if(!iu(n))throw Error(Y(200));if(t==null||t._reactInternals===void 0)throw Error(Y(38));return au(t,e,n,!1,s)};an.version="18.3.1-next-f1338f8080-20240426";function rS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(rS)}catch(t){console.error(t)}}rS(),r1.exports=an;var lE=r1.exports,iS,qy=lE;iS=qy.createRoot,qy.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function so(){return so=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},so.apply(this,arguments)}var Cs;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Cs||(Cs={}));const Gy="popstate";function cE(t){t===void 0&&(t={});function e(s,r){let{pathname:i,search:o,hash:l}=s.location;return Rf("",{pathname:i,search:o,hash:l},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(s,r){return typeof r=="string"?r:gc(r)}return hE(e,n,null,t)}function et(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function aS(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function uE(){return Math.random().toString(36).substr(2,8)}function Qy(t,e){return{usr:t.state,key:t.key,idx:e}}function Rf(t,e,n,s){return n===void 0&&(n=null),so({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Wi(e):e,{state:n,key:e&&e.key||s||uE()})}function gc(t){let{pathname:e="/",search:n="",hash:s=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),s&&s!=="#"&&(e+=s.charAt(0)==="#"?s:"#"+s),e}function Wi(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let s=t.indexOf("?");s>=0&&(e.search=t.substr(s),t=t.substr(0,s)),t&&(e.pathname=t)}return e}function hE(t,e,n,s){s===void 0&&(s={});let{window:r=document.defaultView,v5Compat:i=!1}=s,o=r.history,l=Cs.Pop,c=null,u=h();u==null&&(u=0,o.replaceState(so({},o.state,{idx:u}),""));function h(){return(o.state||{idx:null}).idx}function d(){l=Cs.Pop;let w=h(),m=w==null?null:w-u;u=w,c&&c({action:l,location:y.location,delta:m})}function f(w,m){l=Cs.Push;let g=Rf(y.location,w,m);u=h()+1;let S=Qy(g,u),N=y.createHref(g);try{o.pushState(S,"",N)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;r.location.assign(N)}i&&c&&c({action:l,location:y.location,delta:1})}function x(w,m){l=Cs.Replace;let g=Rf(y.location,w,m);u=h();let S=Qy(g,u),N=y.createHref(g);o.replaceState(S,"",N),i&&c&&c({action:l,location:y.location,delta:0})}function p(w){let m=r.location.origin!=="null"?r.location.origin:r.location.href,g=typeof w=="string"?w:gc(w);return g=g.replace(/ $/,"%20"),et(m,"No window.location.(origin|href) available to create URL for href: "+g),new URL(g,m)}let y={get action(){return l},get location(){return t(r,o)},listen(w){if(c)throw new Error("A history only accepts one active listener");return r.addEventListener(Gy,d),c=w,()=>{r.removeEventListener(Gy,d),c=null}},createHref(w){return e(r,w)},createURL:p,encodeLocation(w){let m=p(w);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:f,replace:x,go(w){return o.go(w)}};return y}var Ky;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(Ky||(Ky={}));function dE(t,e,n){return n===void 0&&(n="/"),fE(t,e,n)}function fE(t,e,n,s){let r=typeof e=="string"?Wi(e):e,i=gm(r.pathname||"/",n);if(i==null)return null;let o=oS(t);pE(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=kE(i);l=NE(o[c],u)}return l}function oS(t,e,n,s){e===void 0&&(e=[]),n===void 0&&(n=[]),s===void 0&&(s="");let r=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(et(c.relativePath.startsWith(s),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(s.length));let u=Ds([s,c.relativePath]),h=n.concat(c);i.children&&i.children.length>0&&(et(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),oS(i.children,e,h,u)),!(i.path==null&&!i.index)&&e.push({path:u,score:SE(u,i.index),routesMeta:h})};return t.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))r(i,o);else for(let c of lS(i.path))r(i,o,c)}),e}function lS(t){let e=t.split("/");if(e.length===0)return[];let[n,...s]=e,r=n.endsWith("?"),i=n.replace(/\?$/,"");if(s.length===0)return r?[i,""]:[i];let o=lS(s.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),r&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function pE(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:bE(e.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}const mE=/^:[\w-]+$/,gE=3,yE=2,vE=1,xE=10,wE=-2,Xy=t=>t==="*";function SE(t,e){let n=t.split("/"),s=n.length;return n.some(Xy)&&(s+=wE),e&&(s+=yE),n.filter(r=>!Xy(r)).reduce((r,i)=>r+(mE.test(i)?gE:i===""?vE:xE),s)}function bE(t,e){return t.length===e.length&&t.slice(0,-1).every((s,r)=>s===e[r])?t[t.length-1]-e[e.length-1]:0}function NE(t,e,n){let{routesMeta:s}=t,r={},i="/",o=[];for(let l=0;l<s.length;++l){let c=s[l],u=l===s.length-1,h=i==="/"?e:e.slice(i.length)||"/",d=jE({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},h),f=c.route;if(!d)return null;Object.assign(r,d.params),o.push({params:r,pathname:Ds([i,d.pathname]),pathnameBase:LE(Ds([i,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(i=Ds([i,d.pathnameBase]))}return o}function jE(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,s]=CE(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let i=r[0],o=i.replace(/(.)\/+$/,"$1"),l=r.slice(1);return{params:s.reduce((u,h,d)=>{let{paramName:f,isOptional:x}=h;if(f==="*"){let y=l[d]||"";o=i.slice(0,i.length-y.length).replace(/(.)\/+$/,"$1")}const p=l[d];return x&&!p?u[f]=void 0:u[f]=(p||"").replace(/%2F/g,"/"),u},{}),pathname:i,pathnameBase:o,pattern:t}}function CE(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),aS(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let s=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(s.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(s.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),s]}function kE(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return aS(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function gm(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,s=t.charAt(n);return s&&s!=="/"?null:t.slice(n)||"/"}function PE(t,e){e===void 0&&(e="/");let{pathname:n,search:s="",hash:r=""}=typeof t=="string"?Wi(t):t;return{pathname:n?n.startsWith("/")?n:EE(n,e):e,search:_E(s),hash:RE(r)}}function EE(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function _h(t,e,n,s){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function TE(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function ym(t,e){let n=TE(t);return e?n.map((s,r)=>r===n.length-1?s.pathname:s.pathnameBase):n.map(s=>s.pathnameBase)}function vm(t,e,n,s){s===void 0&&(s=!1);let r;typeof t=="string"?r=Wi(t):(r=so({},t),et(!r.pathname||!r.pathname.includes("?"),_h("?","pathname","search",r)),et(!r.pathname||!r.pathname.includes("#"),_h("#","pathname","hash",r)),et(!r.search||!r.search.includes("#"),_h("#","search","hash",r)));let i=t===""||r.pathname==="",o=i?"/":r.pathname,l;if(o==null)l=n;else{let d=e.length-1;if(!s&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;r.pathname=f.join("/")}l=d>=0?e[d]:"/"}let c=PE(r,l),u=o&&o!=="/"&&o.endsWith("/"),h=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(u||h)&&(c.pathname+="/"),c}const Ds=t=>t.join("/").replace(/\/\/+/g,"/"),LE=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),_E=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,RE=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function ME(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const cS=["post","put","patch","delete"];new Set(cS);const IE=["get",...cS];new Set(IE);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ro(){return ro=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},ro.apply(this,arguments)}const xm=b.createContext(null),AE=b.createContext(null),Ks=b.createContext(null),ou=b.createContext(null),Xs=b.createContext({outlet:null,matches:[],isDataRoute:!1}),uS=b.createContext(null);function OE(t,e){let{relative:n}=e===void 0?{}:e;Hi()||et(!1);let{basename:s,navigator:r}=b.useContext(Ks),{hash:i,pathname:o,search:l}=dS(t,{relative:n}),c=o;return s!=="/"&&(c=o==="/"?s:Ds([s,o])),r.createHref({pathname:c,search:l,hash:i})}function Hi(){return b.useContext(ou)!=null}function Tn(){return Hi()||et(!1),b.useContext(ou).location}function hS(t){b.useContext(Ks).static||b.useLayoutEffect(t)}function hs(){let{isDataRoute:t}=b.useContext(Xs);return t?QE():DE()}function DE(){Hi()||et(!1);let t=b.useContext(xm),{basename:e,future:n,navigator:s}=b.useContext(Ks),{matches:r}=b.useContext(Xs),{pathname:i}=Tn(),o=JSON.stringify(ym(r,n.v7_relativeSplatPath)),l=b.useRef(!1);return hS(()=>{l.current=!0}),b.useCallback(function(u,h){if(h===void 0&&(h={}),!l.current)return;if(typeof u=="number"){s.go(u);return}let d=vm(u,JSON.parse(o),i,h.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Ds([e,d.pathname])),(h.replace?s.replace:s.push)(d,h.state,h)},[e,s,o,i,t])}function dS(t,e){let{relative:n}=e===void 0?{}:e,{future:s}=b.useContext(Ks),{matches:r}=b.useContext(Xs),{pathname:i}=Tn(),o=JSON.stringify(ym(r,s.v7_relativeSplatPath));return b.useMemo(()=>vm(t,JSON.parse(o),i,n==="path"),[t,o,i,n])}function FE(t,e){return BE(t,e)}function BE(t,e,n,s){Hi()||et(!1);let{navigator:r}=b.useContext(Ks),{matches:i}=b.useContext(Xs),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=Tn(),h;if(e){var d;let w=typeof e=="string"?Wi(e):e;c==="/"||(d=w.pathname)!=null&&d.startsWith(c)||et(!1),h=w}else h=u;let f=h.pathname||"/",x=f;if(c!=="/"){let w=c.replace(/^\//,"").split("/");x="/"+f.replace(/^\//,"").split("/").slice(w.length).join("/")}let p=dE(t,{pathname:x}),y=WE(p&&p.map(w=>Object.assign({},w,{params:Object.assign({},l,w.params),pathname:Ds([c,r.encodeLocation?r.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:Ds([c,r.encodeLocation?r.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),i,n,s);return e&&y?b.createElement(ou.Provider,{value:{location:ro({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Cs.Pop}},y):y}function zE(){let t=GE(),e=ME(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},e),n?b.createElement("pre",{style:r},n):null,null)}const $E=b.createElement(zE,null);class VE extends b.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?b.createElement(Xs.Provider,{value:this.props.routeContext},b.createElement(uS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function UE(t){let{routeContext:e,match:n,children:s}=t,r=b.useContext(xm);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),b.createElement(Xs.Provider,{value:e},s)}function WE(t,e,n,s){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),s===void 0&&(s=null),t==null){var i;if(!n)return null;if(n.errors)t=n.matches;else if((i=s)!=null&&i.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(r=n)==null?void 0:r.errors;if(l!=null){let h=o.findIndex(d=>d.route.id&&(l==null?void 0:l[d.route.id])!==void 0);h>=0||et(!1),o=o.slice(0,Math.min(o.length,h+1))}let c=!1,u=-1;if(n&&s&&s.v7_partialHydration)for(let h=0;h<o.length;h++){let d=o[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=h),d.route.id){let{loaderData:f,errors:x}=n,p=d.route.loader&&f[d.route.id]===void 0&&(!x||x[d.route.id]===void 0);if(d.route.lazy||p){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((h,d,f)=>{let x,p=!1,y=null,w=null;n&&(x=l&&d.route.id?l[d.route.id]:void 0,y=d.route.errorElement||$E,c&&(u<0&&f===0?(KE("route-fallback"),p=!0,w=null):u===f&&(p=!0,w=d.route.hydrateFallbackElement||null)));let m=e.concat(o.slice(0,f+1)),g=()=>{let S;return x?S=y:p?S=w:d.route.Component?S=b.createElement(d.route.Component,null):d.route.element?S=d.route.element:S=h,b.createElement(UE,{match:d,routeContext:{outlet:h,matches:m,isDataRoute:n!=null},children:S})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?b.createElement(VE,{location:n.location,revalidation:n.revalidation,component:y,error:x,children:g(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):g()},null)}var fS=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(fS||{}),pS=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(pS||{});function HE(t){let e=b.useContext(xm);return e||et(!1),e}function YE(t){let e=b.useContext(AE);return e||et(!1),e}function qE(t){let e=b.useContext(Xs);return e||et(!1),e}function mS(t){let e=qE(),n=e.matches[e.matches.length-1];return n.route.id||et(!1),n.route.id}function GE(){var t;let e=b.useContext(uS),n=YE(),s=mS();return e!==void 0?e:(t=n.errors)==null?void 0:t[s]}function QE(){let{router:t}=HE(fS.UseNavigateStable),e=mS(pS.UseNavigateStable),n=b.useRef(!1);return hS(()=>{n.current=!0}),b.useCallback(function(r,i){i===void 0&&(i={}),n.current&&(typeof r=="number"?t.navigate(r):t.navigate(r,ro({fromRouteId:e},i)))},[t,e])}const Jy={};function KE(t,e,n){Jy[t]||(Jy[t]=!0)}function XE(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Qt(t){let{to:e,replace:n,state:s,relative:r}=t;Hi()||et(!1);let{future:i,static:o}=b.useContext(Ks),{matches:l}=b.useContext(Xs),{pathname:c}=Tn(),u=hs(),h=vm(e,ym(l,i.v7_relativeSplatPath),c,r==="path"),d=JSON.stringify(h);return b.useEffect(()=>u(JSON.parse(d),{replace:n,state:s,relative:r}),[u,d,r,n,s]),null}function ze(t){et(!1)}function JE(t){let{basename:e="/",children:n=null,location:s,navigationType:r=Cs.Pop,navigator:i,static:o=!1,future:l}=t;Hi()&&et(!1);let c=e.replace(/^\/*/,"/"),u=b.useMemo(()=>({basename:c,navigator:i,static:o,future:ro({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof s=="string"&&(s=Wi(s));let{pathname:h="/",search:d="",hash:f="",state:x=null,key:p="default"}=s,y=b.useMemo(()=>{let w=gm(h,c);return w==null?null:{location:{pathname:w,search:d,hash:f,state:x,key:p},navigationType:r}},[c,h,d,f,x,p,r]);return y==null?null:b.createElement(Ks.Provider,{value:u},b.createElement(ou.Provider,{children:n,value:y}))}function ZE(t){let{children:e,location:n}=t;return FE(Mf(e),n)}new Promise(()=>{});function Mf(t,e){e===void 0&&(e=[]);let n=[];return b.Children.forEach(t,(s,r)=>{if(!b.isValidElement(s))return;let i=[...e,r];if(s.type===b.Fragment){n.push.apply(n,Mf(s.props.children,i));return}s.type!==ze&&et(!1),!s.props.index||!s.props.children||et(!1);let o={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(o.children=Mf(s.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function If(){return If=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},If.apply(this,arguments)}function eT(t,e){if(t==null)return{};var n={},s=Object.keys(t),r,i;for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function tT(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function nT(t,e){return t.button===0&&(!e||e==="_self")&&!tT(t)}const sT=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],rT="6";try{window.__reactRouterVersion=rT}catch{}const iT="startTransition",Zy=Xk[iT];function aT(t){let{basename:e,children:n,future:s,window:r}=t,i=b.useRef();i.current==null&&(i.current=cE({window:r,v5Compat:!0}));let o=i.current,[l,c]=b.useState({action:o.action,location:o.location}),{v7_startTransition:u}=s||{},h=b.useCallback(d=>{u&&Zy?Zy(()=>c(d)):c(d)},[c,u]);return b.useLayoutEffect(()=>o.listen(h),[o,h]),b.useEffect(()=>XE(s),[s]),b.createElement(JE,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:s})}const oT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",lT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ie=b.forwardRef(function(e,n){let{onClick:s,relative:r,reloadDocument:i,replace:o,state:l,target:c,to:u,preventScrollReset:h,viewTransition:d}=e,f=eT(e,sT),{basename:x}=b.useContext(Ks),p,y=!1;if(typeof u=="string"&&lT.test(u)&&(p=u,oT))try{let S=new URL(window.location.href),N=u.startsWith("//")?new URL(S.protocol+u):new URL(u),C=gm(N.pathname,x);N.origin===S.origin&&C!=null?u=C+N.search+N.hash:y=!0}catch{}let w=OE(u,{relative:r}),m=cT(u,{replace:o,state:l,target:c,preventScrollReset:h,relative:r,viewTransition:d});function g(S){s&&s(S),S.defaultPrevented||m(S)}return b.createElement("a",If({},f,{href:p||w,onClick:y||i?s:g,ref:n,target:c}))});var ev;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(ev||(ev={}));var tv;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(tv||(tv={}));function cT(t,e){let{target:n,replace:s,state:r,preventScrollReset:i,relative:o,viewTransition:l}=e===void 0?{}:e,c=hs(),u=Tn(),h=dS(t,{relative:o});return b.useCallback(d=>{if(nT(d,n)){d.preventDefault();let f=s!==void 0?s:gc(u)===gc(h);c(t,{replace:f,state:r,preventScrollReset:i,relative:o,viewTransition:l})}},[u,c,h,s,r,n,t,i,o,l])}var gS={exports:{}},yS={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bo=b;function uT(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var hT=typeof Object.is=="function"?Object.is:uT,dT=bo.useSyncExternalStore,fT=bo.useRef,pT=bo.useEffect,mT=bo.useMemo,gT=bo.useDebugValue;yS.useSyncExternalStoreWithSelector=function(t,e,n,s,r){var i=fT(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=mT(function(){function c(x){if(!u){if(u=!0,h=x,x=s(x),r!==void 0&&o.hasValue){var p=o.value;if(r(p,x))return d=p}return d=x}if(p=d,hT(h,x))return p;var y=s(x);return r!==void 0&&r(p,y)?(h=x,p):(h=x,d=y)}var u=!1,h,d,f=n===void 0?null:n;return[function(){return c(e())},f===null?void 0:function(){return c(f())}]},[e,n,s,r]);var l=dT(t,i[0],i[1]);return pT(function(){o.hasValue=!0,o.value=l},[l]),gT(l),l};gS.exports=yS;var yT=gS.exports;function vT(t){t()}function xT(){let t=null,e=null;return{clear(){t=null,e=null},notify(){vT(()=>{let n=t;for(;n;)n.callback(),n=n.next})},get(){const n=[];let s=t;for(;s;)n.push(s),s=s.next;return n},subscribe(n){let s=!0;const r=e={callback:n,next:null,prev:e};return r.prev?r.prev.next=r:t=r,function(){!s||t===null||(s=!1,r.next?r.next.prev=r.prev:e=r.prev,r.prev?r.prev.next=r.next:t=r.next)}}}}var nv={notify(){},get:()=>[]};function wT(t,e){let n,s=nv,r=0,i=!1;function o(y){h();const w=s.subscribe(y);let m=!1;return()=>{m||(m=!0,w(),d())}}function l(){s.notify()}function c(){p.onStateChange&&p.onStateChange()}function u(){return i}function h(){r++,n||(n=t.subscribe(c),s=xT())}function d(){r--,n&&r===0&&(n(),n=void 0,s.clear(),s=nv)}function f(){i||(i=!0,h())}function x(){i&&(i=!1,d())}const p={addNestedSub:o,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:u,trySubscribe:f,tryUnsubscribe:x,getListeners:()=>s};return p}var ST=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",bT=ST(),NT=()=>typeof navigator<"u"&&navigator.product==="ReactNative",jT=NT(),CT=()=>bT||jT?b.useLayoutEffect:b.useEffect,kT=CT(),Rh=Symbol.for("react-redux-context"),Mh=typeof globalThis<"u"?globalThis:{};function PT(){if(!b.createContext)return{};const t=Mh[Rh]??(Mh[Rh]=new Map);let e=t.get(b.createContext);return e||(e=b.createContext(null),t.set(b.createContext,e)),e}var yc=PT();function ET(t){const{children:e,context:n,serverState:s,store:r}=t,i=b.useMemo(()=>{const c=wT(r);return{store:r,subscription:c,getServerState:s?()=>s:void 0}},[r,s]),o=b.useMemo(()=>r.getState(),[r]);kT(()=>{const{subscription:c}=i;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),o!==r.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[i,o]);const l=n||yc;return b.createElement(l.Provider,{value:i},e)}var TT=ET;function vS(t=yc){return function(){return b.useContext(t)}}var LT=vS(),_T=(t,e)=>t===e;function RT(t=yc){const e=t===yc?LT:vS(t),n=(s,r={})=>{const{equalityFn:i=_T}=typeof r=="function"?{equalityFn:r}:r,o=e(),{store:l,subscription:c,getServerState:u}=o;b.useRef(!0);const h=b.useCallback({[s.name](f){return s(f)}}[s.name],[s]),d=yT.useSyncExternalStoreWithSelector(c.addNestedSub,l.getState,u||l.getState,h,i);return b.useDebugValue(d),d};return Object.assign(n,{withTypes:()=>n}),n}var xS=RT();function Ml(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ml=function(n){return typeof n}:Ml=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ml(t)}function MT(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function IT(t,e){for(var n=0;n<e.length;n++){var s=e[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(t,s.key,s)}}function AT(t,e,n){return e&&IT(t.prototype,e),t}function OT(t,e){return e&&(Ml(e)==="object"||typeof e=="function")?e:Il(t)}function Af(t){return Af=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},Af(t)}function Il(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function DT(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Of(t,e)}function Of(t,e){return Of=Object.setPrototypeOf||function(s,r){return s.__proto__=r,s},Of(t,e)}function Al(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var wS=function(t){DT(e,t);function e(){var n,s;MT(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return s=OT(this,(n=Af(e)).call.apply(n,[this].concat(i))),Al(Il(s),"state",{bootstrapped:!1}),Al(Il(s),"_unsubscribe",void 0),Al(Il(s),"handlePersistorState",function(){var l=s.props.persistor,c=l.getState(),u=c.bootstrapped;u&&(s.props.onBeforeLift?Promise.resolve(s.props.onBeforeLift()).finally(function(){return s.setState({bootstrapped:!0})}):s.setState({bootstrapped:!0}),s._unsubscribe&&s._unsubscribe())}),s}return AT(e,[{key:"componentDidMount",value:function(){this._unsubscribe=this.props.persistor.subscribe(this.handlePersistorState),this.handlePersistorState()}},{key:"componentWillUnmount",value:function(){this._unsubscribe&&this._unsubscribe()}},{key:"render",value:function(){return typeof this.props.children=="function"?this.props.children(this.state.bootstrapped):this.state.bootstrapped?this.props.children:this.props.loading}}]),e}(b.PureComponent);Al(wS,"defaultProps",{children:null,loading:null});const FT="modulepreload",BT=function(t){return"/"+t},sv={},zT=function(e,n,s){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=Promise.allSettled(n.map(c=>{if(c=BT(c),c in sv)return;sv[c]=!0;const u=c.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":FT,u||(d.as="script"),d.crossOrigin="",d.href=c,l&&d.setAttribute("nonce",l),document.head.appendChild(d),u)return new Promise((f,x)=>{d.addEventListener("load",f),d.addEventListener("error",()=>x(new Error(`Unable to preload CSS for ${c}`)))})}))}function i(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return r.then(o=>{for(const l of o||[])l.status==="rejected"&&i(l.reason);return e().catch(i)})},wm=b.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),lu=b.createContext({}),cu=b.createContext(null),uu=typeof document<"u",hu=uu?b.useLayoutEffect:b.useEffect,SS=b.createContext({strict:!1}),Sm=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),$T="framerAppearId",bS="data-"+Sm($T);function VT(t,e,n,s){const{visualElement:r}=b.useContext(lu),i=b.useContext(SS),o=b.useContext(cu),l=b.useContext(wm).reducedMotion,c=b.useRef();s=s||i.renderer,!c.current&&s&&(c.current=s(t,{visualState:e,parent:r,props:n,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:l}));const u=c.current;b.useInsertionEffect(()=>{u&&u.update(n,o)});const h=b.useRef(!!(n[bS]&&!window.HandoffComplete));return hu(()=>{u&&(u.render(),h.current&&u.animationState&&u.animationState.animateChanges())}),b.useEffect(()=>{u&&(u.updateFeatures(),!h.current&&u.animationState&&u.animationState.animateChanges(),h.current&&(h.current=!1,window.HandoffComplete=!0))}),u}function ui(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function UT(t,e,n){return b.useCallback(s=>{s&&t.mount&&t.mount(s),e&&(s?e.mount(s):e.unmount()),n&&(typeof n=="function"?n(s):ui(n)&&(n.current=s))},[e])}function io(t){return typeof t=="string"||Array.isArray(t)}function du(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const bm=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Nm=["initial",...bm];function fu(t){return du(t.animate)||Nm.some(e=>io(t[e]))}function NS(t){return!!(fu(t)||t.variants)}function WT(t,e){if(fu(t)){const{initial:n,animate:s}=t;return{initial:n===!1||io(n)?n:void 0,animate:io(s)?s:void 0}}return t.inherit!==!1?e:{}}function HT(t){const{initial:e,animate:n}=WT(t,b.useContext(lu));return b.useMemo(()=>({initial:e,animate:n}),[rv(e),rv(n)])}function rv(t){return Array.isArray(t)?t.join(" "):t}const iv={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},ao={};for(const t in iv)ao[t]={isEnabled:e=>iv[t].some(n=>!!e[n])};function YT(t){for(const e in t)ao[e]={...ao[e],...t[e]}}const jm=b.createContext({}),jS=b.createContext({}),qT=Symbol.for("motionComponentSymbol");function GT({preloadedFeatures:t,createVisualElement:e,useRender:n,useVisualState:s,Component:r}){t&&YT(t);function i(l,c){let u;const h={...b.useContext(wm),...l,layoutId:QT(l)},{isStatic:d}=h,f=HT(l),x=s(l,d);if(!d&&uu){f.visualElement=VT(r,x,h,e);const p=b.useContext(jS),y=b.useContext(SS).strict;f.visualElement&&(u=f.visualElement.loadFeatures(h,y,t,p))}return b.createElement(lu.Provider,{value:f},u&&f.visualElement?b.createElement(u,{visualElement:f.visualElement,...h}):null,n(r,l,UT(x,f.visualElement,c),x,d,f.visualElement))}const o=b.forwardRef(i);return o[qT]=r,o}function QT({layoutId:t}){const e=b.useContext(jm).id;return e&&t!==void 0?e+"-"+t:t}function KT(t){function e(s,r={}){return GT(t(s,r))}if(typeof Proxy>"u")return e;const n=new Map;return new Proxy(e,{get:(s,r)=>(n.has(r)||n.set(r,e(r)),n.get(r))})}const XT=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Cm(t){return typeof t!="string"||t.includes("-")?!1:!!(XT.indexOf(t)>-1||/[A-Z]/.test(t))}const vc={};function JT(t){Object.assign(vc,t)}const No=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ur=new Set(No);function CS(t,{layout:e,layoutId:n}){return Ur.has(t)||t.startsWith("origin")||(e||n!==void 0)&&(!!vc[t]||t==="opacity")}const Ht=t=>!!(t&&t.getVelocity),ZT={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},eL=No.length;function tL(t,{enableHardwareAcceleration:e=!0,allowTransformNone:n=!0},s,r){let i="";for(let o=0;o<eL;o++){const l=No[o];if(t[l]!==void 0){const c=ZT[l]||l;i+=`${c}(${t[l]}) `}}return e&&!t.z&&(i+="translateZ(0)"),i=i.trim(),r?i=r(t,s?"":i):n&&s&&(i="none"),i}const kS=t=>e=>typeof e=="string"&&e.startsWith(t),PS=kS("--"),Df=kS("var(--"),nL=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,sL=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Vs=(t,e,n)=>Math.min(Math.max(n,t),e),Wr={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Ta={...Wr,transform:t=>Vs(0,1,t)},sl={...Wr,default:1},La=t=>Math.round(t*1e5)/1e5,pu=/(-)?([\d]*\.?[\d])+/g,ES=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,rL=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function jo(t){return typeof t=="string"}const Co=t=>({test:e=>jo(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),ys=Co("deg"),Bn=Co("%"),le=Co("px"),iL=Co("vh"),aL=Co("vw"),av={...Bn,parse:t=>Bn.parse(t)/100,transform:t=>Bn.transform(t*100)},ov={...Wr,transform:Math.round},TS={borderWidth:le,borderTopWidth:le,borderRightWidth:le,borderBottomWidth:le,borderLeftWidth:le,borderRadius:le,radius:le,borderTopLeftRadius:le,borderTopRightRadius:le,borderBottomRightRadius:le,borderBottomLeftRadius:le,width:le,maxWidth:le,height:le,maxHeight:le,size:le,top:le,right:le,bottom:le,left:le,padding:le,paddingTop:le,paddingRight:le,paddingBottom:le,paddingLeft:le,margin:le,marginTop:le,marginRight:le,marginBottom:le,marginLeft:le,rotate:ys,rotateX:ys,rotateY:ys,rotateZ:ys,scale:sl,scaleX:sl,scaleY:sl,scaleZ:sl,skew:ys,skewX:ys,skewY:ys,distance:le,translateX:le,translateY:le,translateZ:le,x:le,y:le,z:le,perspective:le,transformPerspective:le,opacity:Ta,originX:av,originY:av,originZ:le,zIndex:ov,fillOpacity:Ta,strokeOpacity:Ta,numOctaves:ov};function km(t,e,n,s){const{style:r,vars:i,transform:o,transformOrigin:l}=t;let c=!1,u=!1,h=!0;for(const d in e){const f=e[d];if(PS(d)){i[d]=f;continue}const x=TS[d],p=sL(f,x);if(Ur.has(d)){if(c=!0,o[d]=p,!h)continue;f!==(x.default||0)&&(h=!1)}else d.startsWith("origin")?(u=!0,l[d]=p):r[d]=p}if(e.transform||(c||s?r.transform=tL(t.transform,n,h,s):r.transform&&(r.transform="none")),u){const{originX:d="50%",originY:f="50%",originZ:x=0}=l;r.transformOrigin=`${d} ${f} ${x}`}}const Pm=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function LS(t,e,n){for(const s in e)!Ht(e[s])&&!CS(s,n)&&(t[s]=e[s])}function oL({transformTemplate:t},e,n){return b.useMemo(()=>{const s=Pm();return km(s,e,{enableHardwareAcceleration:!n},t),Object.assign({},s.vars,s.style)},[e])}function lL(t,e,n){const s=t.style||{},r={};return LS(r,s,t),Object.assign(r,oL(t,e,n)),t.transformValues?t.transformValues(r):r}function cL(t,e,n){const s={},r=lL(t,e,n);return t.drag&&t.dragListener!==!1&&(s.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(s.tabIndex=0),s.style=r,s}const uL=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function xc(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||uL.has(t)}let _S=t=>!xc(t);function hL(t){t&&(_S=e=>e.startsWith("on")?!xc(e):t(e))}try{hL(require("@emotion/is-prop-valid").default)}catch{}function dL(t,e,n){const s={};for(const r in t)r==="values"&&typeof t.values=="object"||(_S(r)||n===!0&&xc(r)||!e&&!xc(r)||t.draggable&&r.startsWith("onDrag"))&&(s[r]=t[r]);return s}function lv(t,e,n){return typeof t=="string"?t:le.transform(e+n*t)}function fL(t,e,n){const s=lv(e,t.x,t.width),r=lv(n,t.y,t.height);return`${s} ${r}`}const pL={offset:"stroke-dashoffset",array:"stroke-dasharray"},mL={offset:"strokeDashoffset",array:"strokeDasharray"};function gL(t,e,n=1,s=0,r=!0){t.pathLength=1;const i=r?pL:mL;t[i.offset]=le.transform(-s);const o=le.transform(e),l=le.transform(n);t[i.array]=`${o} ${l}`}function Em(t,{attrX:e,attrY:n,attrScale:s,originX:r,originY:i,pathLength:o,pathSpacing:l=1,pathOffset:c=0,...u},h,d,f){if(km(t,u,h,f),d){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:x,style:p,dimensions:y}=t;x.transform&&(y&&(p.transform=x.transform),delete x.transform),y&&(r!==void 0||i!==void 0||p.transform)&&(p.transformOrigin=fL(y,r!==void 0?r:.5,i!==void 0?i:.5)),e!==void 0&&(x.x=e),n!==void 0&&(x.y=n),s!==void 0&&(x.scale=s),o!==void 0&&gL(x,o,l,c,!1)}const RS=()=>({...Pm(),attrs:{}}),Tm=t=>typeof t=="string"&&t.toLowerCase()==="svg";function yL(t,e,n,s){const r=b.useMemo(()=>{const i=RS();return Em(i,e,{enableHardwareAcceleration:!1},Tm(s),t.transformTemplate),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};LS(i,t.style,t),r.style={...i,...r.style}}return r}function vL(t=!1){return(n,s,r,{latestValues:i},o)=>{const c=(Cm(n)?yL:cL)(s,i,o,n),h={...dL(s,typeof n=="string",t),...c,ref:r},{children:d}=s,f=b.useMemo(()=>Ht(d)?d.get():d,[d]);return b.createElement(n,{...h,children:f})}}function MS(t,{style:e,vars:n},s,r){Object.assign(t.style,e,r&&r.getProjectionStyles(s));for(const i in n)t.style.setProperty(i,n[i])}const IS=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function AS(t,e,n,s){MS(t,e,void 0,s);for(const r in e.attrs)t.setAttribute(IS.has(r)?r:Sm(r),e.attrs[r])}function Lm(t,e){const{style:n}=t,s={};for(const r in n)(Ht(n[r])||e.style&&Ht(e.style[r])||CS(r,t))&&(s[r]=n[r]);return s}function OS(t,e){const n=Lm(t,e);for(const s in t)if(Ht(t[s])||Ht(e[s])){const r=No.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;n[r]=t[s]}return n}function _m(t,e,n,s={},r={}){return typeof e=="function"&&(e=e(n!==void 0?n:t.custom,s,r)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(n!==void 0?n:t.custom,s,r)),e}function mu(t){const e=b.useRef(null);return e.current===null&&(e.current=t()),e.current}const wc=t=>Array.isArray(t),xL=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),wL=t=>wc(t)?t[t.length-1]||0:t;function Ol(t){const e=Ht(t)?t.get():t;return xL(e)?e.toValue():e}function SL({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:n},s,r,i){const o={latestValues:bL(s,r,i,t),renderState:e()};return n&&(o.mount=l=>n(s,l,o)),o}const DS=t=>(e,n)=>{const s=b.useContext(lu),r=b.useContext(cu),i=()=>SL(t,e,s,r);return n?i():mu(i)};function bL(t,e,n,s){const r={},i=s(t,{});for(const f in i)r[f]=Ol(i[f]);let{initial:o,animate:l}=t;const c=fu(t),u=NS(t);e&&u&&!c&&t.inherit!==!1&&(o===void 0&&(o=e.initial),l===void 0&&(l=e.animate));let h=n?n.initial===!1:!1;h=h||o===!1;const d=h?l:o;return d&&typeof d!="boolean"&&!du(d)&&(Array.isArray(d)?d:[d]).forEach(x=>{const p=_m(t,x);if(!p)return;const{transitionEnd:y,transition:w,...m}=p;for(const g in m){let S=m[g];if(Array.isArray(S)){const N=h?S.length-1:0;S=S[N]}S!==null&&(r[g]=S)}for(const g in y)r[g]=y[g]}),r}const Ze=t=>t;class cv{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const n=this.order.indexOf(e);n!==-1&&(this.order.splice(n,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function NL(t){let e=new cv,n=new cv,s=0,r=!1,i=!1;const o=new WeakSet,l={schedule:(c,u=!1,h=!1)=>{const d=h&&r,f=d?e:n;return u&&o.add(c),f.add(c)&&d&&r&&(s=e.order.length),c},cancel:c=>{n.remove(c),o.delete(c)},process:c=>{if(r){i=!0;return}if(r=!0,[e,n]=[n,e],n.clear(),s=e.order.length,s)for(let u=0;u<s;u++){const h=e.order[u];h(c),o.has(h)&&(l.schedule(h),t())}r=!1,i&&(i=!1,l.process(c))}};return l}const rl=["prepare","read","update","preRender","render","postRender"],jL=40;function CL(t,e){let n=!1,s=!0;const r={delta:0,timestamp:0,isProcessing:!1},i=rl.reduce((d,f)=>(d[f]=NL(()=>n=!0),d),{}),o=d=>i[d].process(r),l=()=>{const d=performance.now();n=!1,r.delta=s?1e3/60:Math.max(Math.min(d-r.timestamp,jL),1),r.timestamp=d,r.isProcessing=!0,rl.forEach(o),r.isProcessing=!1,n&&e&&(s=!1,t(l))},c=()=>{n=!0,s=!0,r.isProcessing||t(l)};return{schedule:rl.reduce((d,f)=>{const x=i[f];return d[f]=(p,y=!1,w=!1)=>(n||c(),x.schedule(p,y,w)),d},{}),cancel:d=>rl.forEach(f=>i[f].cancel(d)),state:r,steps:i}}const{schedule:Me,cancel:zn,state:wt,steps:Ih}=CL(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ze,!0),kL={useVisualState:DS({scrapeMotionValuesFromProps:OS,createRenderState:RS,onMount:(t,e,{renderState:n,latestValues:s})=>{Me.read(()=>{try{n.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{n.dimensions={x:0,y:0,width:0,height:0}}}),Me.render(()=>{Em(n,s,{enableHardwareAcceleration:!1},Tm(e.tagName),t.transformTemplate),AS(e,n)})}})},PL={useVisualState:DS({scrapeMotionValuesFromProps:Lm,createRenderState:Pm})};function EL(t,{forwardMotionProps:e=!1},n,s){return{...Cm(t)?kL:PL,preloadedFeatures:n,useRender:vL(e),createVisualElement:s,Component:t}}function Xn(t,e,n,s={passive:!0}){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n)}const FS=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function gu(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const TL=t=>e=>FS(e)&&t(e,gu(e));function ts(t,e,n,s){return Xn(t,e,TL(n),s)}const LL=(t,e)=>n=>e(t(n)),Fs=(...t)=>t.reduce(LL);function BS(t){let e=null;return()=>{const n=()=>{e=null};return e===null?(e=t,n):!1}}const uv=BS("dragHorizontal"),hv=BS("dragVertical");function zS(t){let e=!1;if(t==="y")e=hv();else if(t==="x")e=uv();else{const n=uv(),s=hv();n&&s?e=()=>{n(),s()}:(n&&n(),s&&s())}return e}function $S(){const t=zS(!0);return t?(t(),!1):!0}class Js{constructor(e){this.isMounted=!1,this.node=e}update(){}}function dv(t,e){const n="pointer"+(e?"enter":"leave"),s="onHover"+(e?"Start":"End"),r=(i,o)=>{if(i.pointerType==="touch"||$S())return;const l=t.getProps();t.animationState&&l.whileHover&&t.animationState.setActive("whileHover",e),l[s]&&Me.update(()=>l[s](i,o))};return ts(t.current,n,r,{passive:!t.getProps()[s]})}class _L extends Js{mount(){this.unmount=Fs(dv(this.node,!0),dv(this.node,!1))}unmount(){}}class RL extends Js{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Fs(Xn(this.node.current,"focus",()=>this.onFocus()),Xn(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const VS=(t,e)=>e?t===e?!0:VS(t,e.parentElement):!1;function Ah(t,e){if(!e)return;const n=new PointerEvent("pointer"+t);e(n,gu(n))}class ML extends Js{constructor(){super(...arguments),this.removeStartListeners=Ze,this.removeEndListeners=Ze,this.removeAccessibleListeners=Ze,this.startPointerPress=(e,n)=>{if(this.isPressing)return;this.removeEndListeners();const s=this.node.getProps(),i=ts(window,"pointerup",(l,c)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:h,globalTapTarget:d}=this.node.getProps();Me.update(()=>{!d&&!VS(this.node.current,l.target)?h&&h(l,c):u&&u(l,c)})},{passive:!(s.onTap||s.onPointerUp)}),o=ts(window,"pointercancel",(l,c)=>this.cancelPress(l,c),{passive:!(s.onTapCancel||s.onPointerCancel)});this.removeEndListeners=Fs(i,o),this.startPress(e,n)},this.startAccessiblePress=()=>{const e=i=>{if(i.key!=="Enter"||this.isPressing)return;const o=l=>{l.key!=="Enter"||!this.checkPressEnd()||Ah("up",(c,u)=>{const{onTap:h}=this.node.getProps();h&&Me.update(()=>h(c,u))})};this.removeEndListeners(),this.removeEndListeners=Xn(this.node.current,"keyup",o),Ah("down",(l,c)=>{this.startPress(l,c)})},n=Xn(this.node.current,"keydown",e),s=()=>{this.isPressing&&Ah("cancel",(i,o)=>this.cancelPress(i,o))},r=Xn(this.node.current,"blur",s);this.removeAccessibleListeners=Fs(n,r)}}startPress(e,n){this.isPressing=!0;const{onTapStart:s,whileTap:r}=this.node.getProps();r&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),s&&Me.update(()=>s(e,n))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!$S()}cancelPress(e,n){if(!this.checkPressEnd())return;const{onTapCancel:s}=this.node.getProps();s&&Me.update(()=>s(e,n))}mount(){const e=this.node.getProps(),n=ts(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),s=Xn(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Fs(n,s)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Ff=new WeakMap,Oh=new WeakMap,IL=t=>{const e=Ff.get(t.target);e&&e(t)},AL=t=>{t.forEach(IL)};function OL({root:t,...e}){const n=t||document;Oh.has(n)||Oh.set(n,{});const s=Oh.get(n),r=JSON.stringify(e);return s[r]||(s[r]=new IntersectionObserver(AL,{root:t,...e})),s[r]}function DL(t,e,n){const s=OL(e);return Ff.set(t,n),s.observe(t),()=>{Ff.delete(t),s.unobserve(t)}}const FL={some:0,all:1};class BL extends Js{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:n,margin:s,amount:r="some",once:i}=e,o={root:n?n.current:void 0,rootMargin:s,threshold:typeof r=="number"?r:FL[r]},l=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,i&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:h,onViewportLeave:d}=this.node.getProps(),f=u?h:d;f&&f(c)};return DL(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:n}=this.node;["amount","margin","root"].some(zL(e,n))&&this.startObserver()}unmount(){}}function zL({viewport:t={}},{viewport:e={}}={}){return n=>t[n]!==e[n]}const $L={inView:{Feature:BL},tap:{Feature:ML},focus:{Feature:RL},hover:{Feature:_L}};function US(t,e){if(!Array.isArray(e))return!1;const n=e.length;if(n!==t.length)return!1;for(let s=0;s<n;s++)if(e[s]!==t[s])return!1;return!0}function VL(t){const e={};return t.values.forEach((n,s)=>e[s]=n.get()),e}function UL(t){const e={};return t.values.forEach((n,s)=>e[s]=n.getVelocity()),e}function yu(t,e,n){const s=t.getProps();return _m(s,e,n!==void 0?n:s.custom,VL(t),UL(t))}let Rm=Ze;const jr=t=>t*1e3,ns=t=>t/1e3,WL={current:!1},WS=t=>Array.isArray(t)&&typeof t[0]=="number";function HS(t){return!!(!t||typeof t=="string"&&YS[t]||WS(t)||Array.isArray(t)&&t.every(HS))}const ma=([t,e,n,s])=>`cubic-bezier(${t}, ${e}, ${n}, ${s})`,YS={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ma([0,.65,.55,1]),circOut:ma([.55,0,1,.45]),backIn:ma([.31,.01,.66,-.59]),backOut:ma([.33,1.53,.69,.99])};function qS(t){if(t)return WS(t)?ma(t):Array.isArray(t)?t.map(qS):YS[t]}function HL(t,e,n,{delay:s=0,duration:r,repeat:i=0,repeatType:o="loop",ease:l,times:c}={}){const u={[e]:n};c&&(u.offset=c);const h=qS(l);return Array.isArray(h)&&(u.easing=h),t.animate(u,{delay:s,duration:r,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"})}function YL(t,{repeat:e,repeatType:n="loop"}){const s=e&&n!=="loop"&&e%2===1?0:t.length-1;return t[s]}const GS=(t,e,n)=>(((1-3*n+3*e)*t+(3*n-6*e))*t+3*e)*t,qL=1e-7,GL=12;function QL(t,e,n,s,r){let i,o,l=0;do o=e+(n-e)/2,i=GS(o,s,r)-t,i>0?n=o:e=o;while(Math.abs(i)>qL&&++l<GL);return o}function ko(t,e,n,s){if(t===e&&n===s)return Ze;const r=i=>QL(i,0,1,t,n);return i=>i===0||i===1?i:GS(r(i),e,s)}const KL=ko(.42,0,1,1),XL=ko(0,0,.58,1),QS=ko(.42,0,.58,1),JL=t=>Array.isArray(t)&&typeof t[0]!="number",KS=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,XS=t=>e=>1-t(1-e),Mm=t=>1-Math.sin(Math.acos(t)),JS=XS(Mm),ZL=KS(Mm),ZS=ko(.33,1.53,.69,.99),Im=XS(ZS),e_=KS(Im),t_=t=>(t*=2)<1?.5*Im(t):.5*(2-Math.pow(2,-10*(t-1))),n_={linear:Ze,easeIn:KL,easeInOut:QS,easeOut:XL,circIn:Mm,circInOut:ZL,circOut:JS,backIn:Im,backInOut:e_,backOut:ZS,anticipate:t_},fv=t=>{if(Array.isArray(t)){Rm(t.length===4);const[e,n,s,r]=t;return ko(e,n,s,r)}else if(typeof t=="string")return n_[t];return t},Am=(t,e)=>n=>!!(jo(n)&&rL.test(n)&&n.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(n,e)),eb=(t,e,n)=>s=>{if(!jo(s))return s;const[r,i,o,l]=s.match(pu);return{[t]:parseFloat(r),[e]:parseFloat(i),[n]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},s_=t=>Vs(0,255,t),Dh={...Wr,transform:t=>Math.round(s_(t))},vr={test:Am("rgb","red"),parse:eb("red","green","blue"),transform:({red:t,green:e,blue:n,alpha:s=1})=>"rgba("+Dh.transform(t)+", "+Dh.transform(e)+", "+Dh.transform(n)+", "+La(Ta.transform(s))+")"};function r_(t){let e="",n="",s="",r="";return t.length>5?(e=t.substring(1,3),n=t.substring(3,5),s=t.substring(5,7),r=t.substring(7,9)):(e=t.substring(1,2),n=t.substring(2,3),s=t.substring(3,4),r=t.substring(4,5),e+=e,n+=n,s+=s,r+=r),{red:parseInt(e,16),green:parseInt(n,16),blue:parseInt(s,16),alpha:r?parseInt(r,16)/255:1}}const Bf={test:Am("#"),parse:r_,transform:vr.transform},hi={test:Am("hsl","hue"),parse:eb("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:n,alpha:s=1})=>"hsla("+Math.round(t)+", "+Bn.transform(La(e))+", "+Bn.transform(La(n))+", "+La(Ta.transform(s))+")"},kt={test:t=>vr.test(t)||Bf.test(t)||hi.test(t),parse:t=>vr.test(t)?vr.parse(t):hi.test(t)?hi.parse(t):Bf.parse(t),transform:t=>jo(t)?t:t.hasOwnProperty("red")?vr.transform(t):hi.transform(t)},We=(t,e,n)=>-n*t+n*e+t;function Fh(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+(e-t)*6*n:n<1/2?e:n<2/3?t+(e-t)*(2/3-n)*6:t}function i_({hue:t,saturation:e,lightness:n,alpha:s}){t/=360,e/=100,n/=100;let r=0,i=0,o=0;if(!e)r=i=o=n;else{const l=n<.5?n*(1+e):n+e-n*e,c=2*n-l;r=Fh(c,l,t+1/3),i=Fh(c,l,t),o=Fh(c,l,t-1/3)}return{red:Math.round(r*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:s}}const Bh=(t,e,n)=>{const s=t*t;return Math.sqrt(Math.max(0,n*(e*e-s)+s))},a_=[Bf,vr,hi],o_=t=>a_.find(e=>e.test(t));function pv(t){const e=o_(t);let n=e.parse(t);return e===hi&&(n=i_(n)),n}const tb=(t,e)=>{const n=pv(t),s=pv(e),r={...n};return i=>(r.red=Bh(n.red,s.red,i),r.green=Bh(n.green,s.green,i),r.blue=Bh(n.blue,s.blue,i),r.alpha=We(n.alpha,s.alpha,i),vr.transform(r))};function l_(t){var e,n;return isNaN(t)&&jo(t)&&(((e=t.match(pu))===null||e===void 0?void 0:e.length)||0)+(((n=t.match(ES))===null||n===void 0?void 0:n.length)||0)>0}const nb={regex:nL,countKey:"Vars",token:"${v}",parse:Ze},sb={regex:ES,countKey:"Colors",token:"${c}",parse:kt.parse},rb={regex:pu,countKey:"Numbers",token:"${n}",parse:Wr.parse};function zh(t,{regex:e,countKey:n,token:s,parse:r}){const i=t.tokenised.match(e);i&&(t["num"+n]=i.length,t.tokenised=t.tokenised.replace(e,s),t.values.push(...i.map(r)))}function Sc(t){const e=t.toString(),n={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return n.value.includes("var(--")&&zh(n,nb),zh(n,sb),zh(n,rb),n}function ib(t){return Sc(t).values}function ab(t){const{values:e,numColors:n,numVars:s,tokenised:r}=Sc(t),i=e.length;return o=>{let l=r;for(let c=0;c<i;c++)c<s?l=l.replace(nb.token,o[c]):c<s+n?l=l.replace(sb.token,kt.transform(o[c])):l=l.replace(rb.token,La(o[c]));return l}}const c_=t=>typeof t=="number"?0:t;function u_(t){const e=ib(t);return ab(t)(e.map(c_))}const Us={test:l_,parse:ib,createTransformer:ab,getAnimatableNone:u_},ob=(t,e)=>n=>`${n>0?e:t}`;function lb(t,e){return typeof t=="number"?n=>We(t,e,n):kt.test(t)?tb(t,e):t.startsWith("var(")?ob(t,e):ub(t,e)}const cb=(t,e)=>{const n=[...t],s=n.length,r=t.map((i,o)=>lb(i,e[o]));return i=>{for(let o=0;o<s;o++)n[o]=r[o](i);return n}},h_=(t,e)=>{const n={...t,...e},s={};for(const r in n)t[r]!==void 0&&e[r]!==void 0&&(s[r]=lb(t[r],e[r]));return r=>{for(const i in s)n[i]=s[i](r);return n}},ub=(t,e)=>{const n=Us.createTransformer(e),s=Sc(t),r=Sc(e);return s.numVars===r.numVars&&s.numColors===r.numColors&&s.numNumbers>=r.numNumbers?Fs(cb(s.values,r.values),n):ob(t,e)},oo=(t,e,n)=>{const s=e-t;return s===0?1:(n-t)/s},mv=(t,e)=>n=>We(t,e,n);function d_(t){return typeof t=="number"?mv:typeof t=="string"?kt.test(t)?tb:ub:Array.isArray(t)?cb:typeof t=="object"?h_:mv}function f_(t,e,n){const s=[],r=n||d_(t[0]),i=t.length-1;for(let o=0;o<i;o++){let l=r(t[o],t[o+1]);if(e){const c=Array.isArray(e)?e[o]||Ze:e;l=Fs(c,l)}s.push(l)}return s}function Om(t,e,{clamp:n=!0,ease:s,mixer:r}={}){const i=t.length;if(Rm(i===e.length),i===1)return()=>e[0];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=f_(e,s,r),l=o.length,c=u=>{let h=0;if(l>1)for(;h<t.length-2&&!(u<t[h+1]);h++);const d=oo(t[h],t[h+1],u);return o[h](d)};return n?u=>c(Vs(t[0],t[i-1],u)):c}function p_(t,e){const n=t[t.length-1];for(let s=1;s<=e;s++){const r=oo(0,e,s);t.push(We(n,1,r))}}function m_(t){const e=[0];return p_(e,t.length-1),e}function g_(t,e){return t.map(n=>n*e)}function y_(t,e){return t.map(()=>e||QS).splice(0,t.length-1)}function bc({duration:t=300,keyframes:e,times:n,ease:s="easeInOut"}){const r=JL(s)?s.map(fv):fv(s),i={done:!1,value:e[0]},o=g_(n&&n.length===e.length?n:m_(e),t),l=Om(o,e,{ease:Array.isArray(r)?r:y_(e,r)});return{calculatedDuration:t,next:c=>(i.value=l(c),i.done=c>=t,i)}}function hb(t,e){return e?t*(1e3/e):0}const v_=5;function db(t,e,n){const s=Math.max(e-v_,0);return hb(n-t(s),e-s)}const $h=.001,x_=.01,w_=10,S_=.05,b_=1;function N_({duration:t=800,bounce:e=.25,velocity:n=0,mass:s=1}){let r,i,o=1-e;o=Vs(S_,b_,o),t=Vs(x_,w_,ns(t)),o<1?(r=u=>{const h=u*o,d=h*t,f=h-n,x=zf(u,o),p=Math.exp(-d);return $h-f/x*p},i=u=>{const d=u*o*t,f=d*n+n,x=Math.pow(o,2)*Math.pow(u,2)*t,p=Math.exp(-d),y=zf(Math.pow(u,2),o);return(-r(u)+$h>0?-1:1)*((f-x)*p)/y}):(r=u=>{const h=Math.exp(-u*t),d=(u-n)*t+1;return-$h+h*d},i=u=>{const h=Math.exp(-u*t),d=(n-u)*(t*t);return h*d});const l=5/t,c=C_(r,i,l);if(t=jr(t),isNaN(c))return{stiffness:100,damping:10,duration:t};{const u=Math.pow(c,2)*s;return{stiffness:u,damping:o*2*Math.sqrt(s*u),duration:t}}}const j_=12;function C_(t,e,n){let s=n;for(let r=1;r<j_;r++)s=s-t(s)/e(s);return s}function zf(t,e){return t*Math.sqrt(1-e*e)}const k_=["duration","bounce"],P_=["stiffness","damping","mass"];function gv(t,e){return e.some(n=>t[n]!==void 0)}function E_(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!gv(t,P_)&&gv(t,k_)){const n=N_(t);e={...e,...n,mass:1},e.isResolvedFromDuration=!0}return e}function fb({keyframes:t,restDelta:e,restSpeed:n,...s}){const r=t[0],i=t[t.length-1],o={done:!1,value:r},{stiffness:l,damping:c,mass:u,duration:h,velocity:d,isResolvedFromDuration:f}=E_({...s,velocity:-ns(s.velocity||0)}),x=d||0,p=c/(2*Math.sqrt(l*u)),y=i-r,w=ns(Math.sqrt(l/u)),m=Math.abs(y)<5;n||(n=m?.01:2),e||(e=m?.005:.5);let g;if(p<1){const S=zf(w,p);g=N=>{const C=Math.exp(-p*w*N);return i-C*((x+p*w*y)/S*Math.sin(S*N)+y*Math.cos(S*N))}}else if(p===1)g=S=>i-Math.exp(-w*S)*(y+(x+w*y)*S);else{const S=w*Math.sqrt(p*p-1);g=N=>{const C=Math.exp(-p*w*N),E=Math.min(S*N,300);return i-C*((x+p*w*y)*Math.sinh(E)+S*y*Math.cosh(E))/S}}return{calculatedDuration:f&&h||null,next:S=>{const N=g(S);if(f)o.done=S>=h;else{let C=x;S!==0&&(p<1?C=db(g,S,N):C=0);const E=Math.abs(C)<=n,L=Math.abs(i-N)<=e;o.done=E&&L}return o.value=o.done?i:N,o}}}function yv({keyframes:t,velocity:e=0,power:n=.8,timeConstant:s=325,bounceDamping:r=10,bounceStiffness:i=500,modifyTarget:o,min:l,max:c,restDelta:u=.5,restSpeed:h}){const d=t[0],f={done:!1,value:d},x=P=>l!==void 0&&P<l||c!==void 0&&P>c,p=P=>l===void 0?c:c===void 0||Math.abs(l-P)<Math.abs(c-P)?l:c;let y=n*e;const w=d+y,m=o===void 0?w:o(w);m!==w&&(y=m-d);const g=P=>-y*Math.exp(-P/s),S=P=>m+g(P),N=P=>{const R=g(P),_=S(P);f.done=Math.abs(R)<=u,f.value=f.done?m:_};let C,E;const L=P=>{x(f.value)&&(C=P,E=fb({keyframes:[f.value,p(f.value)],velocity:db(S,P,f.value),damping:r,stiffness:i,restDelta:u,restSpeed:h}))};return L(0),{calculatedDuration:null,next:P=>{let R=!1;return!E&&C===void 0&&(R=!0,N(P),L(P)),C!==void 0&&P>C?E.next(P-C):(!R&&N(P),f)}}}const T_=t=>{const e=({timestamp:n})=>t(n);return{start:()=>Me.update(e,!0),stop:()=>zn(e),now:()=>wt.isProcessing?wt.timestamp:performance.now()}},vv=2e4;function xv(t){let e=0;const n=50;let s=t.next(e);for(;!s.done&&e<vv;)e+=n,s=t.next(e);return e>=vv?1/0:e}const L_={decay:yv,inertia:yv,tween:bc,keyframes:bc,spring:fb};function Nc({autoplay:t=!0,delay:e=0,driver:n=T_,keyframes:s,type:r="keyframes",repeat:i=0,repeatDelay:o=0,repeatType:l="loop",onPlay:c,onStop:u,onComplete:h,onUpdate:d,...f}){let x=1,p=!1,y,w;const m=()=>{w=new Promise(ie=>{y=ie})};m();let g;const S=L_[r]||bc;let N;S!==bc&&typeof s[0]!="number"&&(N=Om([0,100],s,{clamp:!1}),s=[0,100]);const C=S({...f,keyframes:s});let E;l==="mirror"&&(E=S({...f,keyframes:[...s].reverse(),velocity:-(f.velocity||0)}));let L="idle",P=null,R=null,_=null;C.calculatedDuration===null&&i&&(C.calculatedDuration=xv(C));const{calculatedDuration:I}=C;let O=1/0,z=1/0;I!==null&&(O=I+o,z=O*(i+1)-o);let F=0;const W=ie=>{if(R===null)return;x>0&&(R=Math.min(R,ie)),x<0&&(R=Math.min(ie-z/x,R)),P!==null?F=P:F=Math.round(ie-R)*x;const ce=F-e*(x>=0?1:-1),_e=x>=0?ce<0:ce>z;F=Math.max(ce,0),L==="finished"&&P===null&&(F=z);let ee=F,U=C;if(i){const xe=Math.min(F,z)/O;let me=Math.floor(xe),ke=xe%1;!ke&&xe>=1&&(ke=1),ke===1&&me--,me=Math.min(me,i+1),!!(me%2)&&(l==="reverse"?(ke=1-ke,o&&(ke-=o/O)):l==="mirror"&&(U=E)),ee=Vs(0,1,ke)*O}const H=_e?{done:!1,value:s[0]}:U.next(ee);N&&(H.value=N(H.value));let{done:ae}=H;!_e&&I!==null&&(ae=x>=0?F>=z:F<=0);const Ce=P===null&&(L==="finished"||L==="running"&&ae);return d&&d(H.value),Ce&&V(),H},A=()=>{g&&g.stop(),g=void 0},Q=()=>{L="idle",A(),y(),m(),R=_=null},V=()=>{L="finished",h&&h(),A(),y()},J=()=>{if(p)return;g||(g=n(W));const ie=g.now();c&&c(),P!==null?R=ie-P:(!R||L==="finished")&&(R=ie),L==="finished"&&m(),_=R,P=null,L="running",g.start()};t&&J();const te={then(ie,ce){return w.then(ie,ce)},get time(){return ns(F)},set time(ie){ie=jr(ie),F=ie,P!==null||!g||x===0?P=ie:R=g.now()-ie/x},get duration(){const ie=C.calculatedDuration===null?xv(C):C.calculatedDuration;return ns(ie)},get speed(){return x},set speed(ie){ie===x||!g||(x=ie,te.time=ns(F))},get state(){return L},play:J,pause:()=>{L="paused",P=F},stop:()=>{p=!0,L!=="idle"&&(L="idle",u&&u(),Q())},cancel:()=>{_!==null&&W(_),Q()},complete:()=>{L="finished"},sample:ie=>(R=0,W(ie))};return te}function __(t){let e;return()=>(e===void 0&&(e=t()),e)}const R_=__(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),M_=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),il=10,I_=2e4,A_=(t,e)=>e.type==="spring"||t==="backgroundColor"||!HS(e.ease);function O_(t,e,{onUpdate:n,onComplete:s,...r}){if(!(R_()&&M_.has(e)&&!r.repeatDelay&&r.repeatType!=="mirror"&&r.damping!==0&&r.type!=="inertia"))return!1;let o=!1,l,c,u=!1;const h=()=>{c=new Promise(S=>{l=S})};h();let{keyframes:d,duration:f=300,ease:x,times:p}=r;if(A_(e,r)){const S=Nc({...r,repeat:0,delay:0});let N={done:!1,value:d[0]};const C=[];let E=0;for(;!N.done&&E<I_;)N=S.sample(E),C.push(N.value),E+=il;p=void 0,d=C,f=E-il,x="linear"}const y=HL(t.owner.current,e,d,{...r,duration:f,ease:x,times:p}),w=()=>{u=!1,y.cancel()},m=()=>{u=!0,Me.update(w),l(),h()};return y.onfinish=()=>{u||(t.set(YL(d,r)),s&&s(),m())},{then(S,N){return c.then(S,N)},attachTimeline(S){return y.timeline=S,y.onfinish=null,Ze},get time(){return ns(y.currentTime||0)},set time(S){y.currentTime=jr(S)},get speed(){return y.playbackRate},set speed(S){y.playbackRate=S},get duration(){return ns(f)},play:()=>{o||(y.play(),zn(w))},pause:()=>y.pause(),stop:()=>{if(o=!0,y.playState==="idle")return;const{currentTime:S}=y;if(S){const N=Nc({...r,autoplay:!1});t.setWithVelocity(N.sample(S-il).value,N.sample(S).value,il)}m()},complete:()=>{u||y.finish()},cancel:m}}function D_({keyframes:t,delay:e,onUpdate:n,onComplete:s}){const r=()=>(n&&n(t[t.length-1]),s&&s(),{time:0,speed:1,duration:0,play:Ze,pause:Ze,stop:Ze,then:i=>(i(),Promise.resolve()),cancel:Ze,complete:Ze});return e?Nc({keyframes:[0,1],duration:0,delay:e,onComplete:r}):r()}const F_={type:"spring",stiffness:500,damping:25,restSpeed:10},B_=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),z_={type:"keyframes",duration:.8},$_={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},V_=(t,{keyframes:e})=>e.length>2?z_:Ur.has(t)?t.startsWith("scale")?B_(e[1]):F_:$_,$f=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Us.test(e)||e==="0")&&!e.startsWith("url(")),U_=new Set(["brightness","contrast","saturate","opacity"]);function W_(t){const[e,n]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[s]=n.match(pu)||[];if(!s)return t;const r=n.replace(s,"");let i=U_.has(e)?1:0;return s!==n&&(i*=100),e+"("+i+r+")"}const H_=/([a-z-]*)\(.*?\)/g,Vf={...Us,getAnimatableNone:t=>{const e=t.match(H_);return e?e.map(W_).join(" "):t}},Y_={...TS,color:kt,backgroundColor:kt,outlineColor:kt,fill:kt,stroke:kt,borderColor:kt,borderTopColor:kt,borderRightColor:kt,borderBottomColor:kt,borderLeftColor:kt,filter:Vf,WebkitFilter:Vf},Dm=t=>Y_[t];function pb(t,e){let n=Dm(t);return n!==Vf&&(n=Us),n.getAnimatableNone?n.getAnimatableNone(e):void 0}const mb=t=>/^0[^.\s]+$/.test(t);function q_(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||mb(t)}function G_(t,e,n,s){const r=$f(e,n);let i;Array.isArray(n)?i=[...n]:i=[null,n];const o=s.from!==void 0?s.from:t.get();let l;const c=[];for(let u=0;u<i.length;u++)i[u]===null&&(i[u]=u===0?o:i[u-1]),q_(i[u])&&c.push(u),typeof i[u]=="string"&&i[u]!=="none"&&i[u]!=="0"&&(l=i[u]);if(r&&c.length&&l)for(let u=0;u<c.length;u++){const h=c[u];i[h]=pb(e,l)}return i}function Q_({when:t,delay:e,delayChildren:n,staggerChildren:s,staggerDirection:r,repeat:i,repeatType:o,repeatDelay:l,from:c,elapsed:u,...h}){return!!Object.keys(h).length}function Fm(t,e){return t[e]||t.default||t}const K_={skipAnimations:!1},Bm=(t,e,n,s={})=>r=>{const i=Fm(s,t)||{},o=i.delay||s.delay||0;let{elapsed:l=0}=s;l=l-jr(o);const c=G_(e,t,n,i),u=c[0],h=c[c.length-1],d=$f(t,u),f=$f(t,h);let x={keyframes:c,velocity:e.getVelocity(),ease:"easeOut",...i,delay:-l,onUpdate:p=>{e.set(p),i.onUpdate&&i.onUpdate(p)},onComplete:()=>{r(),i.onComplete&&i.onComplete()}};if(Q_(i)||(x={...x,...V_(t,x)}),x.duration&&(x.duration=jr(x.duration)),x.repeatDelay&&(x.repeatDelay=jr(x.repeatDelay)),!d||!f||WL.current||i.type===!1||K_.skipAnimations)return D_(x);if(!s.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const p=O_(e,t,x);if(p)return p}return Nc(x)};function jc(t){return!!(Ht(t)&&t.add)}const gb=t=>/^\-?\d*\.?\d+$/.test(t);function zm(t,e){t.indexOf(e)===-1&&t.push(e)}function $m(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Vm{constructor(){this.subscriptions=[]}add(e){return zm(this.subscriptions,e),()=>$m(this.subscriptions,e)}notify(e,n,s){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,n,s);else for(let i=0;i<r;i++){const o=this.subscriptions[i];o&&o(e,n,s)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const X_=t=>!isNaN(parseFloat(t)),_a={current:void 0};class J_{constructor(e,n={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(s,r=!0)=>{this.prev=this.current,this.current=s;const{delta:i,timestamp:o}=wt;this.lastUpdated!==o&&(this.timeDelta=i,this.lastUpdated=o,Me.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Me.postRender(this.velocityCheck),this.velocityCheck=({timestamp:s})=>{s!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=X_(this.current),this.owner=n.owner}onChange(e){return this.on("change",e)}on(e,n){this.events[e]||(this.events[e]=new Vm);const s=this.events[e].add(n);return e==="change"?()=>{s(),Me.read(()=>{this.events.change.getSize()||this.stop()})}:s}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,n){this.passiveEffect=e,this.stopPassiveEffect=n}set(e,n=!0){!n||!this.passiveEffect?this.updateAndNotify(e,n):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,n,s){this.set(n),this.prev=e,this.timeDelta=s}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return _a.current&&_a.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?hb(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=e(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Rr(t,e){return new J_(t,e)}const yb=t=>e=>e.test(t),Z_={test:t=>t==="auto",parse:t=>t},vb=[Wr,le,Bn,ys,aL,iL,Z_],aa=t=>vb.find(yb(t)),eR=[...vb,kt,Us],tR=t=>eR.find(yb(t));function nR(t,e,n){t.hasValue(e)?t.getValue(e).set(n):t.addValue(e,Rr(n))}function sR(t,e){const n=yu(t,e);let{transitionEnd:s={},transition:r={},...i}=n?t.makeTargetAnimatable(n,!1):{};i={...i,...s};for(const o in i){const l=wL(i[o]);nR(t,o,l)}}function rR(t,e,n){var s,r;const i=Object.keys(e).filter(l=>!t.hasValue(l)),o=i.length;if(o)for(let l=0;l<o;l++){const c=i[l],u=e[c];let h=null;Array.isArray(u)&&(h=u[0]),h===null&&(h=(r=(s=n[c])!==null&&s!==void 0?s:t.readValue(c))!==null&&r!==void 0?r:e[c]),h!=null&&(typeof h=="string"&&(gb(h)||mb(h))?h=parseFloat(h):!tR(h)&&Us.test(u)&&(h=pb(c,u)),t.addValue(c,Rr(h,{owner:t})),n[c]===void 0&&(n[c]=h),h!==null&&t.setBaseTarget(c,h))}}function iR(t,e){return e?(e[t]||e.default||e).from:void 0}function aR(t,e,n){const s={};for(const r in t){const i=iR(r,e);if(i!==void 0)s[r]=i;else{const o=n.getValue(r);o&&(s[r]=o.get())}}return s}function oR({protectedKeys:t,needsAnimating:e},n){const s=t.hasOwnProperty(n)&&e[n]!==!0;return e[n]=!1,s}function lR(t,e){const n=t.get();if(Array.isArray(e)){for(let s=0;s<e.length;s++)if(e[s]!==n)return!0}else return n!==e}function xb(t,e,{delay:n=0,transitionOverride:s,type:r}={}){let{transition:i=t.getDefaultTransition(),transitionEnd:o,...l}=t.makeTargetAnimatable(e);const c=t.getValue("willChange");s&&(i=s);const u=[],h=r&&t.animationState&&t.animationState.getState()[r];for(const d in l){const f=t.getValue(d),x=l[d];if(!f||x===void 0||h&&oR(h,d))continue;const p={delay:n,elapsed:0,...Fm(i||{},d)};if(window.HandoffAppearAnimations){const m=t.getProps()[bS];if(m){const g=window.HandoffAppearAnimations(m,d,f,Me);g!==null&&(p.elapsed=g,p.isHandoff=!0)}}let y=!p.isHandoff&&!lR(f,x);if(p.type==="spring"&&(f.getVelocity()||p.velocity)&&(y=!1),f.animation&&(y=!1),y)continue;f.start(Bm(d,f,x,t.shouldReduceMotion&&Ur.has(d)?{type:!1}:p));const w=f.animation;jc(c)&&(c.add(d),w.then(()=>c.remove(d))),u.push(w)}return o&&Promise.all(u).then(()=>{o&&sR(t,o)}),u}function Uf(t,e,n={}){const s=yu(t,e,n.custom);let{transition:r=t.getDefaultTransition()||{}}=s||{};n.transitionOverride&&(r=n.transitionOverride);const i=s?()=>Promise.all(xb(t,s,n)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:h,staggerDirection:d}=r;return cR(t,e,u+c,h,d,n)}:()=>Promise.resolve(),{when:l}=r;if(l){const[c,u]=l==="beforeChildren"?[i,o]:[o,i];return c().then(()=>u())}else return Promise.all([i(),o(n.delay)])}function cR(t,e,n=0,s=0,r=1,i){const o=[],l=(t.variantChildren.size-1)*s,c=r===1?(u=0)=>u*s:(u=0)=>l-u*s;return Array.from(t.variantChildren).sort(uR).forEach((u,h)=>{u.notify("AnimationStart",e),o.push(Uf(u,e,{...i,delay:n+c(h)}).then(()=>u.notify("AnimationComplete",e)))}),Promise.all(o)}function uR(t,e){return t.sortNodePosition(e)}function hR(t,e,n={}){t.notify("AnimationStart",e);let s;if(Array.isArray(e)){const r=e.map(i=>Uf(t,i,n));s=Promise.all(r)}else if(typeof e=="string")s=Uf(t,e,n);else{const r=typeof e=="function"?yu(t,e,n.custom):e;s=Promise.all(xb(t,r,n))}return s.then(()=>t.notify("AnimationComplete",e))}const dR=[...bm].reverse(),fR=bm.length;function pR(t){return e=>Promise.all(e.map(({animation:n,options:s})=>hR(t,n,s)))}function mR(t){let e=pR(t);const n=yR();let s=!0;const r=(c,u)=>{const h=yu(t,u);if(h){const{transition:d,transitionEnd:f,...x}=h;c={...c,...x,...f}}return c};function i(c){e=c(t)}function o(c,u){const h=t.getProps(),d=t.getVariantContext(!0)||{},f=[],x=new Set;let p={},y=1/0;for(let m=0;m<fR;m++){const g=dR[m],S=n[g],N=h[g]!==void 0?h[g]:d[g],C=io(N),E=g===u?S.isActive:null;E===!1&&(y=m);let L=N===d[g]&&N!==h[g]&&C;if(L&&s&&t.manuallyAnimateOnMount&&(L=!1),S.protectedKeys={...p},!S.isActive&&E===null||!N&&!S.prevProp||du(N)||typeof N=="boolean")continue;let R=gR(S.prevProp,N)||g===u&&S.isActive&&!L&&C||m>y&&C,_=!1;const I=Array.isArray(N)?N:[N];let O=I.reduce(r,{});E===!1&&(O={});const{prevResolvedValues:z={}}=S,F={...z,...O},W=A=>{R=!0,x.has(A)&&(_=!0,x.delete(A)),S.needsAnimating[A]=!0};for(const A in F){const Q=O[A],V=z[A];if(p.hasOwnProperty(A))continue;let J=!1;wc(Q)&&wc(V)?J=!US(Q,V):J=Q!==V,J?Q!==void 0?W(A):x.add(A):Q!==void 0&&x.has(A)?W(A):S.protectedKeys[A]=!0}S.prevProp=N,S.prevResolvedValues=O,S.isActive&&(p={...p,...O}),s&&t.blockInitialAnimation&&(R=!1),R&&(!L||_)&&f.push(...I.map(A=>({animation:A,options:{type:g,...c}})))}if(x.size){const m={};x.forEach(g=>{const S=t.getBaseTarget(g);S!==void 0&&(m[g]=S)}),f.push({animation:m})}let w=!!f.length;return s&&(h.initial===!1||h.initial===h.animate)&&!t.manuallyAnimateOnMount&&(w=!1),s=!1,w?e(f):Promise.resolve()}function l(c,u,h){var d;if(n[c].isActive===u)return Promise.resolve();(d=t.variantChildren)===null||d===void 0||d.forEach(x=>{var p;return(p=x.animationState)===null||p===void 0?void 0:p.setActive(c,u)}),n[c].isActive=u;const f=o(h,c);for(const x in n)n[x].protectedKeys={};return f}return{animateChanges:o,setActive:l,setAnimateFunction:i,getState:()=>n}}function gR(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!US(e,t):!1}function rr(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function yR(){return{animate:rr(!0),whileInView:rr(),whileHover:rr(),whileTap:rr(),whileDrag:rr(),whileFocus:rr(),exit:rr()}}class vR extends Js{constructor(e){super(e),e.animationState||(e.animationState=mR(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),du(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:n}=this.node.prevProps||{};e!==n&&this.updateAnimationControlsSubscription()}unmount(){}}let xR=0;class wR extends Js{constructor(){super(...arguments),this.id=xR++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:n,custom:s}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===r)return;const i=this.node.animationState.setActive("exit",!e,{custom:s??this.node.getProps().custom});n&&!e&&i.then(()=>n(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const SR={animation:{Feature:vR},exit:{Feature:wR}},wv=(t,e)=>Math.abs(t-e);function bR(t,e){const n=wv(t.x,e.x),s=wv(t.y,e.y);return Math.sqrt(n**2+s**2)}class wb{constructor(e,n,{transformPagePoint:s,contextWindow:r,dragSnapToOrigin:i=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=Uh(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,x=bR(d.offset,{x:0,y:0})>=3;if(!f&&!x)return;const{point:p}=d,{timestamp:y}=wt;this.history.push({...p,timestamp:y});const{onStart:w,onMove:m}=this.handlers;f||(w&&w(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),m&&m(this.lastMoveEvent,d)},this.handlePointerMove=(d,f)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=Vh(f,this.transformPagePoint),Me.update(this.updatePoint,!0)},this.handlePointerUp=(d,f)=>{this.end();const{onEnd:x,onSessionEnd:p,resumeAnimation:y}=this.handlers;if(this.dragSnapToOrigin&&y&&y(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=Uh(d.type==="pointercancel"?this.lastMoveEventInfo:Vh(f,this.transformPagePoint),this.history);this.startEvent&&x&&x(d,w),p&&p(d,w)},!FS(e))return;this.dragSnapToOrigin=i,this.handlers=n,this.transformPagePoint=s,this.contextWindow=r||window;const o=gu(e),l=Vh(o,this.transformPagePoint),{point:c}=l,{timestamp:u}=wt;this.history=[{...c,timestamp:u}];const{onSessionStart:h}=n;h&&h(e,Uh(l,this.history)),this.removeListeners=Fs(ts(this.contextWindow,"pointermove",this.handlePointerMove),ts(this.contextWindow,"pointerup",this.handlePointerUp),ts(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),zn(this.updatePoint)}}function Vh(t,e){return e?{point:e(t.point)}:t}function Sv(t,e){return{x:t.x-e.x,y:t.y-e.y}}function Uh({point:t},e){return{point:t,delta:Sv(t,Sb(e)),offset:Sv(t,NR(e)),velocity:jR(e,.1)}}function NR(t){return t[0]}function Sb(t){return t[t.length-1]}function jR(t,e){if(t.length<2)return{x:0,y:0};let n=t.length-1,s=null;const r=Sb(t);for(;n>=0&&(s=t[n],!(r.timestamp-s.timestamp>jr(e)));)n--;if(!s)return{x:0,y:0};const i=ns(r.timestamp-s.timestamp);if(i===0)return{x:0,y:0};const o={x:(r.x-s.x)/i,y:(r.y-s.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function tn(t){return t.max-t.min}function Wf(t,e=0,n=.01){return Math.abs(t-e)<=n}function bv(t,e,n,s=.5){t.origin=s,t.originPoint=We(e.min,e.max,t.origin),t.scale=tn(n)/tn(e),(Wf(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=We(n.min,n.max,t.origin)-t.originPoint,(Wf(t.translate)||isNaN(t.translate))&&(t.translate=0)}function Ra(t,e,n,s){bv(t.x,e.x,n.x,s?s.originX:void 0),bv(t.y,e.y,n.y,s?s.originY:void 0)}function Nv(t,e,n){t.min=n.min+e.min,t.max=t.min+tn(e)}function CR(t,e,n){Nv(t.x,e.x,n.x),Nv(t.y,e.y,n.y)}function jv(t,e,n){t.min=e.min-n.min,t.max=t.min+tn(e)}function Ma(t,e,n){jv(t.x,e.x,n.x),jv(t.y,e.y,n.y)}function kR(t,{min:e,max:n},s){return e!==void 0&&t<e?t=s?We(e,t,s.min):Math.max(t,e):n!==void 0&&t>n&&(t=s?We(n,t,s.max):Math.min(t,n)),t}function Cv(t,e,n){return{min:e!==void 0?t.min+e:void 0,max:n!==void 0?t.max+n-(t.max-t.min):void 0}}function PR(t,{top:e,left:n,bottom:s,right:r}){return{x:Cv(t.x,n,r),y:Cv(t.y,e,s)}}function kv(t,e){let n=e.min-t.min,s=e.max-t.max;return e.max-e.min<t.max-t.min&&([n,s]=[s,n]),{min:n,max:s}}function ER(t,e){return{x:kv(t.x,e.x),y:kv(t.y,e.y)}}function TR(t,e){let n=.5;const s=tn(t),r=tn(e);return r>s?n=oo(e.min,e.max-s,t.min):s>r&&(n=oo(t.min,t.max-r,e.min)),Vs(0,1,n)}function LR(t,e){const n={};return e.min!==void 0&&(n.min=e.min-t.min),e.max!==void 0&&(n.max=e.max-t.min),n}const Hf=.35;function _R(t=Hf){return t===!1?t=0:t===!0&&(t=Hf),{x:Pv(t,"left","right"),y:Pv(t,"top","bottom")}}function Pv(t,e,n){return{min:Ev(t,e),max:Ev(t,n)}}function Ev(t,e){return typeof t=="number"?t:t[e]||0}const Tv=()=>({translate:0,scale:1,origin:0,originPoint:0}),di=()=>({x:Tv(),y:Tv()}),Lv=()=>({min:0,max:0}),st=()=>({x:Lv(),y:Lv()});function cn(t){return[t("x"),t("y")]}function bb({top:t,left:e,right:n,bottom:s}){return{x:{min:e,max:n},y:{min:t,max:s}}}function RR({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function MR(t,e){if(!e)return t;const n=e({x:t.left,y:t.top}),s=e({x:t.right,y:t.bottom});return{top:n.y,left:n.x,bottom:s.y,right:s.x}}function Wh(t){return t===void 0||t===1}function Yf({scale:t,scaleX:e,scaleY:n}){return!Wh(t)||!Wh(e)||!Wh(n)}function cr(t){return Yf(t)||Nb(t)||t.z||t.rotate||t.rotateX||t.rotateY}function Nb(t){return _v(t.x)||_v(t.y)}function _v(t){return t&&t!=="0%"}function Cc(t,e,n){const s=t-n,r=e*s;return n+r}function Rv(t,e,n,s,r){return r!==void 0&&(t=Cc(t,r,s)),Cc(t,n,s)+e}function qf(t,e=0,n=1,s,r){t.min=Rv(t.min,e,n,s,r),t.max=Rv(t.max,e,n,s,r)}function jb(t,{x:e,y:n}){qf(t.x,e.translate,e.scale,e.originPoint),qf(t.y,n.translate,n.scale,n.originPoint)}function IR(t,e,n,s=!1){const r=n.length;if(!r)return;e.x=e.y=1;let i,o;for(let l=0;l<r;l++){i=n[l],o=i.projectionDelta;const c=i.instance;c&&c.style&&c.style.display==="contents"||(s&&i.options.layoutScroll&&i.scroll&&i!==i.root&&fi(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,jb(t,o)),s&&cr(i.latestValues)&&fi(t,i.latestValues))}e.x=Mv(e.x),e.y=Mv(e.y)}function Mv(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function ws(t,e){t.min=t.min+e,t.max=t.max+e}function Iv(t,e,[n,s,r]){const i=e[r]!==void 0?e[r]:.5,o=We(t.min,t.max,i);qf(t,e[n],e[s],o,e.scale)}const AR=["x","scaleX","originX"],OR=["y","scaleY","originY"];function fi(t,e){Iv(t.x,e,AR),Iv(t.y,e,OR)}function Cb(t,e){return bb(MR(t.getBoundingClientRect(),e))}function DR(t,e,n){const s=Cb(t,n),{scroll:r}=e;return r&&(ws(s.x,r.offset.x),ws(s.y,r.offset.y)),s}const kb=({current:t})=>t?t.ownerDocument.defaultView:null,FR=new WeakMap;class BR{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=st(),this.visualElement=e}start(e,{snapToCursor:n=!1}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const r=h=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(gu(h,"page").point)},i=(h,d)=>{const{drag:f,dragPropagation:x,onDragStart:p}=this.getProps();if(f&&!x&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=zS(f),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),cn(w=>{let m=this.getAxisMotionValue(w).get()||0;if(Bn.test(m)){const{projection:g}=this.visualElement;if(g&&g.layout){const S=g.layout.layoutBox[w];S&&(m=tn(S)*(parseFloat(m)/100))}}this.originPoint[w]=m}),p&&Me.update(()=>p(h,d),!1,!0);const{animationState:y}=this.visualElement;y&&y.setActive("whileDrag",!0)},o=(h,d)=>{const{dragPropagation:f,dragDirectionLock:x,onDirectionLock:p,onDrag:y}=this.getProps();if(!f&&!this.openGlobalLock)return;const{offset:w}=d;if(x&&this.currentDirection===null){this.currentDirection=zR(w),this.currentDirection!==null&&p&&p(this.currentDirection);return}this.updateAxis("x",d.point,w),this.updateAxis("y",d.point,w),this.visualElement.render(),y&&y(h,d)},l=(h,d)=>this.stop(h,d),c=()=>cn(h=>{var d;return this.getAnimationState(h)==="paused"&&((d=this.getAxisMotionValue(h).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new wb(e,{onSessionStart:r,onStart:i,onMove:o,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:kb(this.visualElement)})}stop(e,n){const s=this.isDragging;if(this.cancel(),!s)return;const{velocity:r}=n;this.startAnimation(r);const{onDragEnd:i}=this.getProps();i&&Me.update(()=>i(e,n))}cancel(){this.isDragging=!1;const{projection:e,animationState:n}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:s}=this.getProps();!s&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(e,n,s){const{drag:r}=this.getProps();if(!s||!al(e,r,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+s[e];this.constraints&&this.constraints[e]&&(o=kR(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){var e;const{dragConstraints:n,dragElastic:s}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,i=this.constraints;n&&ui(n)?this.constraints||(this.constraints=this.resolveRefConstraints()):n&&r?this.constraints=PR(r.layoutBox,n):this.constraints=!1,this.elastic=_R(s),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&cn(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=LR(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:n}=this.getProps();if(!e||!ui(e))return!1;const s=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const i=DR(s,r.root,this.visualElement.getTransformPagePoint());let o=ER(r.layout.layoutBox,i);if(n){const l=n(RR(o));this.hasMutatedConstraints=!!l,l&&(o=bb(l))}return o}startAnimation(e){const{drag:n,dragMomentum:s,dragElastic:r,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},u=cn(h=>{if(!al(h,n,this.currentDirection))return;let d=c&&c[h]||{};o&&(d={min:0,max:0});const f=r?200:1e6,x=r?40:1e7,p={type:"inertia",velocity:s?e[h]:0,bounceStiffness:f,bounceDamping:x,timeConstant:750,restDelta:1,restSpeed:10,...i,...d};return this.startAxisValueAnimation(h,p)});return Promise.all(u).then(l)}startAxisValueAnimation(e,n){const s=this.getAxisMotionValue(e);return s.start(Bm(e,s,0,n))}stopAnimation(){cn(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){cn(e=>{var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.pause()})}getAnimationState(e){var n;return(n=this.getAxisMotionValue(e).animation)===null||n===void 0?void 0:n.state}getAxisMotionValue(e){const n="_drag"+e.toUpperCase(),s=this.visualElement.getProps(),r=s[n];return r||this.visualElement.getValue(e,(s.initial?s.initial[e]:void 0)||0)}snapToCursor(e){cn(n=>{const{drag:s}=this.getProps();if(!al(n,s,this.currentDirection))return;const{projection:r}=this.visualElement,i=this.getAxisMotionValue(n);if(r&&r.layout){const{min:o,max:l}=r.layout.layoutBox[n];i.set(e[n]-We(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:n}=this.getProps(),{projection:s}=this.visualElement;if(!ui(n)||!s||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};cn(o=>{const l=this.getAxisMotionValue(o);if(l){const c=l.get();r[o]=TR({min:c,max:c},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",s.root&&s.root.updateScroll(),s.updateLayout(),this.resolveConstraints(),cn(o=>{if(!al(o,e,null))return;const l=this.getAxisMotionValue(o),{min:c,max:u}=this.constraints[o];l.set(We(c,u,r[o]))})}addListeners(){if(!this.visualElement.current)return;FR.set(this.visualElement,this);const e=this.visualElement.current,n=ts(e,"pointerdown",c=>{const{drag:u,dragListener:h=!0}=this.getProps();u&&h&&this.start(c)}),s=()=>{const{dragConstraints:c}=this.getProps();ui(c)&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,i=r.addEventListener("measure",s);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),s();const o=Xn(window,"resize",()=>this.scalePositionWithinConstraints()),l=r.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(cn(h=>{const d=this.getAxisMotionValue(h);d&&(this.originPoint[h]+=c[h].translate,d.set(d.get()+c[h].translate))}),this.visualElement.render())});return()=>{o(),n(),i(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:s=!1,dragPropagation:r=!1,dragConstraints:i=!1,dragElastic:o=Hf,dragMomentum:l=!0}=e;return{...e,drag:n,dragDirectionLock:s,dragPropagation:r,dragConstraints:i,dragElastic:o,dragMomentum:l}}}function al(t,e,n){return(e===!0||e===t)&&(n===null||n===t)}function zR(t,e=10){let n=null;return Math.abs(t.y)>e?n="y":Math.abs(t.x)>e&&(n="x"),n}class $R extends Js{constructor(e){super(e),this.removeGroupControls=Ze,this.removeListeners=Ze,this.controls=new BR(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ze}unmount(){this.removeGroupControls(),this.removeListeners()}}const Av=t=>(e,n)=>{t&&Me.update(()=>t(e,n))};class VR extends Js{constructor(){super(...arguments),this.removePointerDownListener=Ze}onPointerDown(e){this.session=new wb(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:kb(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:n,onPan:s,onPanEnd:r}=this.node.getProps();return{onSessionStart:Av(e),onStart:Av(n),onMove:s,onEnd:(i,o)=>{delete this.session,r&&Me.update(()=>r(i,o))}}}mount(){this.removePointerDownListener=ts(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function UR(){const t=b.useContext(cu);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:n,register:s}=t,r=b.useId();return b.useEffect(()=>s(r),[]),!e&&n?[!1,()=>n&&n(r)]:[!0]}const Dl={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Ov(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const oa={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(le.test(t))t=parseFloat(t);else return t;const n=Ov(t,e.target.x),s=Ov(t,e.target.y);return`${n}% ${s}%`}},WR={correct:(t,{treeScale:e,projectionDelta:n})=>{const s=t,r=Us.parse(t);if(r.length>5)return s;const i=Us.createTransformer(t),o=typeof r[0]!="number"?1:0,l=n.x.scale*e.x,c=n.y.scale*e.y;r[0+o]/=l,r[1+o]/=c;const u=We(l,c,.5);return typeof r[2+o]=="number"&&(r[2+o]/=u),typeof r[3+o]=="number"&&(r[3+o]/=u),i(r)}};class HR extends ye.Component{componentDidMount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:s,layoutId:r}=this.props,{projection:i}=e;JT(YR),i&&(n.group&&n.group.add(i),s&&s.register&&r&&s.register(i),i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Dl.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:n,visualElement:s,drag:r,isPresent:i}=this.props,o=s.projection;return o&&(o.isPresent=i,r||e.layoutDependency!==n||n===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||Me.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:n,switchLayoutGroup:s}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(r),s&&s.deregister&&s.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Pb(t){const[e,n]=UR(),s=b.useContext(jm);return ye.createElement(HR,{...t,layoutGroup:s,switchLayoutGroup:b.useContext(jS),isPresent:e,safeToRemove:n})}const YR={borderRadius:{...oa,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:oa,borderTopRightRadius:oa,borderBottomLeftRadius:oa,borderBottomRightRadius:oa,boxShadow:WR},Eb=["TopLeft","TopRight","BottomLeft","BottomRight"],qR=Eb.length,Dv=t=>typeof t=="string"?parseFloat(t):t,Fv=t=>typeof t=="number"||le.test(t);function GR(t,e,n,s,r,i){r?(t.opacity=We(0,n.opacity!==void 0?n.opacity:1,QR(s)),t.opacityExit=We(e.opacity!==void 0?e.opacity:1,0,KR(s))):i&&(t.opacity=We(e.opacity!==void 0?e.opacity:1,n.opacity!==void 0?n.opacity:1,s));for(let o=0;o<qR;o++){const l=`border${Eb[o]}Radius`;let c=Bv(e,l),u=Bv(n,l);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||Fv(c)===Fv(u)?(t[l]=Math.max(We(Dv(c),Dv(u),s),0),(Bn.test(u)||Bn.test(c))&&(t[l]+="%")):t[l]=u}(e.rotate||n.rotate)&&(t.rotate=We(e.rotate||0,n.rotate||0,s))}function Bv(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const QR=Tb(0,.5,JS),KR=Tb(.5,.95,Ze);function Tb(t,e,n){return s=>s<t?0:s>e?1:n(oo(t,e,s))}function zv(t,e){t.min=e.min,t.max=e.max}function ln(t,e){zv(t.x,e.x),zv(t.y,e.y)}function $v(t,e,n,s,r){return t-=e,t=Cc(t,1/n,s),r!==void 0&&(t=Cc(t,1/r,s)),t}function XR(t,e=0,n=1,s=.5,r,i=t,o=t){if(Bn.test(e)&&(e=parseFloat(e),e=We(o.min,o.max,e/100)-o.min),typeof e!="number")return;let l=We(i.min,i.max,s);t===i&&(l-=e),t.min=$v(t.min,e,n,l,r),t.max=$v(t.max,e,n,l,r)}function Vv(t,e,[n,s,r],i,o){XR(t,e[n],e[s],e[r],e.scale,i,o)}const JR=["x","scaleX","originX"],ZR=["y","scaleY","originY"];function Uv(t,e,n,s){Vv(t.x,e,JR,n?n.x:void 0,s?s.x:void 0),Vv(t.y,e,ZR,n?n.y:void 0,s?s.y:void 0)}function Wv(t){return t.translate===0&&t.scale===1}function Lb(t){return Wv(t.x)&&Wv(t.y)}function eM(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function _b(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function Hv(t){return tn(t.x)/tn(t.y)}class tM{constructor(){this.members=[]}add(e){zm(this.members,e),e.scheduleRender()}remove(e){if($m(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(e){const n=this.members.findIndex(r=>e===r);if(n===0)return!1;let s;for(let r=n;r>=0;r--){const i=this.members[r];if(i.isPresent!==!1){s=i;break}}return s?(this.promote(s),!0):!1}promote(e,n){const s=this.lead;if(e!==s&&(this.prevLead=s,this.lead=e,e.show(),s)){s.instance&&s.scheduleRender(),e.scheduleRender(),e.resumeFrom=s,n&&(e.resumeFrom.preserveOpacity=!0),s.snapshot&&(e.snapshot=s.snapshot,e.snapshot.latestValues=s.animationValues||s.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&s.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:n,resumingFrom:s}=e;n.onExitComplete&&n.onExitComplete(),s&&s.options.onExitComplete&&s.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Yv(t,e,n){let s="";const r=t.x.translate/e.x,i=t.y.translate/e.y;if((r||i)&&(s=`translate3d(${r}px, ${i}px, 0) `),(e.x!==1||e.y!==1)&&(s+=`scale(${1/e.x}, ${1/e.y}) `),n){const{rotate:c,rotateX:u,rotateY:h}=n;c&&(s+=`rotate(${c}deg) `),u&&(s+=`rotateX(${u}deg) `),h&&(s+=`rotateY(${h}deg) `)}const o=t.x.scale*e.x,l=t.y.scale*e.y;return(o!==1||l!==1)&&(s+=`scale(${o}, ${l})`),s||"none"}const nM=(t,e)=>t.depth-e.depth;class sM{constructor(){this.children=[],this.isDirty=!1}add(e){zm(this.children,e),this.isDirty=!0}remove(e){$m(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(nM),this.isDirty=!1,this.children.forEach(e)}}function rM(t,e){const n=performance.now(),s=({timestamp:r})=>{const i=r-n;i>=e&&(zn(s),t(i-e))};return Me.read(s,!0),()=>zn(s)}function iM(t){window.MotionDebug&&window.MotionDebug.record(t)}function aM(t){return t instanceof SVGElement&&t.tagName!=="svg"}function oM(t,e,n){const s=Ht(t)?t:Rr(t);return s.start(Bm("",s,e,n)),s.animation}const qv=["","X","Y","Z"],lM={visibility:"hidden"},Gv=1e3;let cM=0;const ur={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function Rb({attachResizeListener:t,defaultParent:e,measureScroll:n,checkIsScrollRoot:s,resetTransform:r}){return class{constructor(o={},l=e==null?void 0:e()){this.id=cM++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,ur.totalNodes=ur.resolvedTargetDeltas=ur.recalculatedProjection=0,this.nodes.forEach(dM),this.nodes.forEach(yM),this.nodes.forEach(vM),this.nodes.forEach(fM),iM(ur)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new sM)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Vm),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=aM(o),this.instance=o;const{layoutId:c,layout:u,visualElement:h}=this.options;if(h&&!h.current&&h.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(u||c)&&(this.isLayoutDirty=!0),t){let d;const f=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=rM(f,250),Dl.hasAnimatedSinceResize&&(Dl.hasAnimatedSinceResize=!1,this.nodes.forEach(Kv))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&h&&(c||u)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f,hasRelativeTargetChanged:x,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const y=this.options.transition||h.getDefaultTransition()||NM,{onLayoutAnimationStart:w,onLayoutAnimationComplete:m}=h.getProps(),g=!this.targetLayout||!_b(this.targetLayout,p)||x,S=!f&&x;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||S||f&&(g||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,S);const N={...Fm(y,"layout"),onPlay:w,onComplete:m};(h.shouldReduceMotion||this.options.layoutRoot)&&(N.delay=0,N.type=!1),this.startAnimation(N)}else f||Kv(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,zn(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(xM),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const d=this.path[h];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Qv);return}this.isUpdating||this.nodes.forEach(mM),this.isUpdating=!1,this.nodes.forEach(gM),this.nodes.forEach(uM),this.nodes.forEach(hM),this.clearAllSnapshots();const l=performance.now();wt.delta=Vs(0,1e3/60,l-wt.timestamp),wt.timestamp=l,wt.isProcessing=!0,Ih.update.process(wt),Ih.preRender.process(wt),Ih.render.process(wt),wt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(pM),this.sharedNodes.forEach(wM)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Me.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Me.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=st(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:s(this.instance),offset:n(this.instance)})}resetTransform(){if(!r)return;const o=this.isLayoutDirty||this.shouldResetTransform,l=this.projectionDelta&&!Lb(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,h=u!==this.prevTransformTemplateValue;o&&(l||cr(this.latestValues)||h)&&(r(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),jM(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return st();const l=o.measureViewportBox(),{scroll:c}=this.root;return c&&(ws(l.x,c.offset.x),ws(l.y,c.offset.y)),l}removeElementScroll(o){const l=st();ln(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:h,options:d}=u;if(u!==this.root&&h&&d.layoutScroll){if(h.isRoot){ln(l,o);const{scroll:f}=this.root;f&&(ws(l.x,-f.offset.x),ws(l.y,-f.offset.y))}ws(l.x,h.offset.x),ws(l.y,h.offset.y)}}return l}applyTransform(o,l=!1){const c=st();ln(c,o);for(let u=0;u<this.path.length;u++){const h=this.path[u];!l&&h.options.layoutScroll&&h.scroll&&h!==h.root&&fi(c,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),cr(h.latestValues)&&fi(c,h.latestValues)}return cr(this.latestValues)&&fi(c,this.latestValues),c}removeTransform(o){const l=st();ln(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!cr(u.latestValues))continue;Yf(u.latestValues)&&u.updateSnapshot();const h=st(),d=u.measurePageBox();ln(h,d),Uv(l,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,h)}return cr(this.latestValues)&&Uv(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==wt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var l;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:d,layoutId:f}=this.options;if(!(!this.layout||!(d||f))){if(this.resolvedRelativeTargetAt=wt.timestamp,!this.targetDelta&&!this.relativeTarget){const x=this.getClosestProjectingParent();x&&x.layout&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=st(),this.relativeTargetOrigin=st(),Ma(this.relativeTargetOrigin,this.layout.layoutBox,x.layout.layoutBox),ln(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=st(),this.targetWithTransforms=st()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),CR(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ln(this.target,this.layout.layoutBox),jb(this.target,this.targetDelta)):ln(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const x=this.getClosestProjectingParent();x&&!!x.resumingFrom==!!this.resumingFrom&&!x.options.layoutScroll&&x.target&&this.animationProgress!==1?(this.relativeParent=x,this.forceRelativeParentToResolveTarget(),this.relativeTarget=st(),this.relativeTargetOrigin=st(),Ma(this.relativeTargetOrigin,this.target,x.target),ln(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}ur.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||Yf(this.parent.latestValues)||Nb(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const l=this.getLead(),c=!!this.resumingFrom||this!==l;let u=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===wt.timestamp&&(u=!1),u)return;const{layout:h,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||d))return;ln(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,x=this.treeScale.y;IR(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox);const{target:p}=l;if(!p){this.projectionTransform&&(this.projectionDelta=di(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=di(),this.projectionDeltaWithTransform=di());const y=this.projectionTransform;Ra(this.projectionDelta,this.layoutCorrected,p,this.latestValues),this.projectionTransform=Yv(this.projectionDelta,this.treeScale),(this.projectionTransform!==y||this.treeScale.x!==f||this.treeScale.y!==x)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p)),ur.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,l=!1){const c=this.snapshot,u=c?c.latestValues:{},h={...this.latestValues},d=di();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const f=st(),x=c?c.source:void 0,p=this.layout?this.layout.source:void 0,y=x!==p,w=this.getStack(),m=!w||w.members.length<=1,g=!!(y&&!m&&this.options.crossfade===!0&&!this.path.some(bM));this.animationProgress=0;let S;this.mixTargetDelta=N=>{const C=N/1e3;Xv(d.x,o.x,C),Xv(d.y,o.y,C),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Ma(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),SM(this.relativeTarget,this.relativeTargetOrigin,f,C),S&&eM(this.relativeTarget,S)&&(this.isProjectionDirty=!1),S||(S=st()),ln(S,this.relativeTarget)),y&&(this.animationValues=h,GR(h,u,this.latestValues,C,g,m)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=C},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(zn(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Me.update(()=>{Dl.hasAnimatedSinceResize=!0,this.currentAnimation=oM(0,Gv,{...o,onUpdate:l=>{this.mixTargetDelta(l),o.onUpdate&&o.onUpdate(l)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Gv),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:u,latestValues:h}=o;if(!(!l||!c||!u)){if(this!==o&&this.layout&&u&&Mb(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||st();const d=tn(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+d;const f=tn(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+f}ln(l,c),fi(l,h),Ra(this.projectionDeltaWithTransform,this.layoutCorrected,l,h)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new tM),this.sharedNodes.get(o).add(l);const u=l.options.initialPromotionConfig;l.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:l}=this.options;return l?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:l}=this.options;return l?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.rotate||c.rotateX||c.rotateY||c.rotateZ)&&(l=!0),!l)return;const u={};for(let h=0;h<qv.length;h++){const d="rotate"+qv[h];c[d]&&(u[d]=c[d],o.setStaticValue(d,0))}o.render();for(const h in u)o.setStaticValue(h,u[h]);o.scheduleRender()}getProjectionStyles(o){var l,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return lM;const u={visibility:""},h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=Ol(o==null?void 0:o.pointerEvents)||"",u.transform=h?h(this.latestValues,""):"none",u;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const y={};return this.options.layoutId&&(y.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,y.pointerEvents=Ol(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!cr(this.latestValues)&&(y.transform=h?h({},""):"none",this.hasProjected=!1),y}const f=d.animationValues||d.latestValues;this.applyTransformsToTarget(),u.transform=Yv(this.projectionDeltaWithTransform,this.treeScale,f),h&&(u.transform=h(f,u.transform));const{x,y:p}=this.projectionDelta;u.transformOrigin=`${x.origin*100}% ${p.origin*100}% 0`,d.animationValues?u.opacity=d===this?(c=(l=f.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:u.opacity=d===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const y in vc){if(f[y]===void 0)continue;const{correct:w,applyTo:m}=vc[y],g=u.transform==="none"?f[y]:w(f[y],d);if(m){const S=m.length;for(let N=0;N<S;N++)u[m[N]]=g}else u[y]=g}return this.options.layoutId&&(u.pointerEvents=d===this?Ol(o==null?void 0:o.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(Qv),this.root.sharedNodes.clear()}}}function uM(t){t.updateLayout()}function hM(t){var e;const n=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&n&&t.hasListeners("didUpdate")){const{layoutBox:s,measuredBox:r}=t.layout,{animationType:i}=t.options,o=n.source!==t.layout.source;i==="size"?cn(d=>{const f=o?n.measuredBox[d]:n.layoutBox[d],x=tn(f);f.min=s[d].min,f.max=f.min+x}):Mb(i,n.layoutBox,s)&&cn(d=>{const f=o?n.measuredBox[d]:n.layoutBox[d],x=tn(s[d]);f.max=f.min+x,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+x)});const l=di();Ra(l,s,n.layoutBox);const c=di();o?Ra(c,t.applyTransform(r,!0),n.measuredBox):Ra(c,s,n.layoutBox);const u=!Lb(l);let h=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:f,layout:x}=d;if(f&&x){const p=st();Ma(p,n.layoutBox,f.layoutBox);const y=st();Ma(y,s,x.layoutBox),_b(p,y)||(h=!0),d.options.layoutRoot&&(t.relativeTarget=y,t.relativeTargetOrigin=p,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:s,snapshot:n,delta:c,layoutDelta:l,hasLayoutChanged:u,hasRelativeTargetChanged:h})}else if(t.isLead()){const{onExitComplete:s}=t.options;s&&s()}t.options.transition=void 0}function dM(t){ur.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function fM(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function pM(t){t.clearSnapshot()}function Qv(t){t.clearMeasurements()}function mM(t){t.isLayoutDirty=!1}function gM(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function Kv(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function yM(t){t.resolveTargetDelta()}function vM(t){t.calcProjection()}function xM(t){t.resetRotation()}function wM(t){t.removeLeadSnapshot()}function Xv(t,e,n){t.translate=We(e.translate,0,n),t.scale=We(e.scale,1,n),t.origin=e.origin,t.originPoint=e.originPoint}function Jv(t,e,n,s){t.min=We(e.min,n.min,s),t.max=We(e.max,n.max,s)}function SM(t,e,n,s){Jv(t.x,e.x,n.x,s),Jv(t.y,e.y,n.y,s)}function bM(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const NM={duration:.45,ease:[.4,0,.1,1]},Zv=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),e0=Zv("applewebkit/")&&!Zv("chrome/")?Math.round:Ze;function t0(t){t.min=e0(t.min),t.max=e0(t.max)}function jM(t){t0(t.x),t0(t.y)}function Mb(t,e,n){return t==="position"||t==="preserve-aspect"&&!Wf(Hv(e),Hv(n),.2)}const CM=Rb({attachResizeListener:(t,e)=>Xn(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),Hh={current:void 0},Ib=Rb({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!Hh.current){const t=new CM({});t.mount(window),t.setOptions({layoutScroll:!0}),Hh.current=t}return Hh.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),kM={pan:{Feature:VR},drag:{Feature:$R,ProjectionNode:Ib,MeasureLayout:Pb}},PM=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function EM(t){const e=PM.exec(t);if(!e)return[,];const[,n,s]=e;return[n,s]}function Gf(t,e,n=1){const[s,r]=EM(t);if(!s)return;const i=window.getComputedStyle(e).getPropertyValue(s);if(i){const o=i.trim();return gb(o)?parseFloat(o):o}else return Df(r)?Gf(r,e,n+1):r}function TM(t,{...e},n){const s=t.current;if(!(s instanceof Element))return{target:e,transitionEnd:n};n&&(n={...n}),t.values.forEach(r=>{const i=r.get();if(!Df(i))return;const o=Gf(i,s);o&&r.set(o)});for(const r in e){const i=e[r];if(!Df(i))continue;const o=Gf(i,s);o&&(e[r]=o,n||(n={}),n[r]===void 0&&(n[r]=i))}return{target:e,transitionEnd:n}}const LM=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),Ab=t=>LM.has(t),_M=t=>Object.keys(t).some(Ab),n0=t=>t===Wr||t===le,s0=(t,e)=>parseFloat(t.split(", ")[e]),r0=(t,e)=>(n,{transform:s})=>{if(s==="none"||!s)return 0;const r=s.match(/^matrix3d\((.+)\)$/);if(r)return s0(r[1],e);{const i=s.match(/^matrix\((.+)\)$/);return i?s0(i[1],t):0}},RM=new Set(["x","y","z"]),MM=No.filter(t=>!RM.has(t));function IM(t){const e=[];return MM.forEach(n=>{const s=t.getValue(n);s!==void 0&&(e.push([n,s.get()]),s.set(n.startsWith("scale")?1:0))}),e.length&&t.render(),e}const Ri={width:({x:t},{paddingLeft:e="0",paddingRight:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),height:({y:t},{paddingTop:e="0",paddingBottom:n="0"})=>t.max-t.min-parseFloat(e)-parseFloat(n),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:r0(4,13),y:r0(5,14)};Ri.translateX=Ri.x;Ri.translateY=Ri.y;const AM=(t,e,n)=>{const s=e.measureViewportBox(),r=e.current,i=getComputedStyle(r),{display:o}=i,l={};o==="none"&&e.setStaticValue("display",t.display||"block"),n.forEach(u=>{l[u]=Ri[u](s,i)}),e.render();const c=e.measureViewportBox();return n.forEach(u=>{const h=e.getValue(u);h&&h.jump(l[u]),t[u]=Ri[u](c,i)}),t},OM=(t,e,n={},s={})=>{e={...e},s={...s};const r=Object.keys(e).filter(Ab);let i=[],o=!1;const l=[];if(r.forEach(c=>{const u=t.getValue(c);if(!t.hasValue(c))return;let h=n[c],d=aa(h);const f=e[c];let x;if(wc(f)){const p=f.length,y=f[0]===null?1:0;h=f[y],d=aa(h);for(let w=y;w<p&&f[w]!==null;w++)x?Rm(aa(f[w])===x):x=aa(f[w])}else x=aa(f);if(d!==x)if(n0(d)&&n0(x)){const p=u.get();typeof p=="string"&&u.set(parseFloat(p)),typeof f=="string"?e[c]=parseFloat(f):Array.isArray(f)&&x===le&&(e[c]=f.map(parseFloat))}else d!=null&&d.transform&&(x!=null&&x.transform)&&(h===0||f===0)?h===0?u.set(x.transform(h)):e[c]=d.transform(f):(o||(i=IM(t),o=!0),l.push(c),s[c]=s[c]!==void 0?s[c]:e[c],u.jump(f))}),l.length){const c=l.indexOf("height")>=0?window.pageYOffset:null,u=AM(e,t,l);return i.length&&i.forEach(([h,d])=>{t.getValue(h).set(d)}),t.render(),uu&&c!==null&&window.scrollTo({top:c}),{target:u,transitionEnd:s}}else return{target:e,transitionEnd:s}};function DM(t,e,n,s){return _M(e)?OM(t,e,n,s):{target:e,transitionEnd:s}}const FM=(t,e,n,s)=>{const r=TM(t,e,s);return e=r.target,s=r.transitionEnd,DM(t,e,n,s)},Qf={current:null},Ob={current:!1};function BM(){if(Ob.current=!0,!!uu)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Qf.current=t.matches;t.addListener(e),e()}else Qf.current=!1}function zM(t,e,n){const{willChange:s}=e;for(const r in e){const i=e[r],o=n[r];if(Ht(i))t.addValue(r,i),jc(s)&&s.add(r);else if(Ht(o))t.addValue(r,Rr(i,{owner:t})),jc(s)&&s.remove(r);else if(o!==i)if(t.hasValue(r)){const l=t.getValue(r);!l.hasAnimated&&l.set(i)}else{const l=t.getStaticValue(r);t.addValue(r,Rr(l!==void 0?l:i,{owner:t}))}}for(const r in n)e[r]===void 0&&t.removeValue(r);return e}const i0=new WeakMap,Db=Object.keys(ao),$M=Db.length,a0=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],VM=Nm.length;class UM{constructor({parent:e,props:n,presenceContext:s,reducedMotionConfig:r,visualState:i},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Me.render(this.render,!1,!0);const{latestValues:l,renderState:c}=i;this.latestValues=l,this.baseTarget={...l},this.initialValues=n.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=n,this.presenceContext=s,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=o,this.isControllingVariants=fu(n),this.isVariantNode=NS(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:u,...h}=this.scrapeMotionValuesFromProps(n,{});for(const d in h){const f=h[d];l[d]!==void 0&&Ht(f)&&(f.set(l[d],!1),jc(u)&&u.add(d))}}scrapeMotionValuesFromProps(e,n){return{}}mount(e){this.current=e,i0.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,s)=>this.bindToMotionValue(s,n)),Ob.current||BM(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Qf.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){i0.delete(this.current),this.projection&&this.projection.unmount(),zn(this.notifyUpdate),zn(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,n){const s=Ur.has(e),r=n.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Me.update(this.notifyUpdate,!1,!0),s&&this.projection&&(this.projection.isTransformDirty=!0)}),i=n.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{r(),i()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...n},s,r,i){let o,l;for(let c=0;c<$M;c++){const u=Db[c],{isEnabled:h,Feature:d,ProjectionNode:f,MeasureLayout:x}=ao[u];f&&(o=f),h(n)&&(!this.features[u]&&d&&(this.features[u]=new d(this)),x&&(l=x))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:c,layout:u,drag:h,dragConstraints:d,layoutScroll:f,layoutRoot:x}=n;this.projection.setOptions({layoutId:c,layout:u,alwaysMeasureLayout:!!h||d&&ui(d),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof u=="string"?u:"both",initialPromotionConfig:i,layoutScroll:f,layoutRoot:x})}return l}updateFeatures(){for(const e in this.features){const n=this.features[e];n.isMounted?n.update():(n.mount(),n.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):st()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,n){this.latestValues[e]=n}makeTargetAnimatable(e,n=!0){return this.makeTargetAnimatableFromInstance(e,this.props,n)}update(e,n){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let s=0;s<a0.length;s++){const r=a0[s];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const i=e["on"+r];i&&(this.propEventSubscriptions[r]=this.on(r,i))}this.prevMotionValues=zM(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const s=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(s.initial=this.props.initial),s}const n={};for(let s=0;s<VM;s++){const r=Nm[s],i=this.props[r];(io(i)||i===!1)&&(n[r]=i)}return n}addVariantChild(e){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(e),()=>n.variantChildren.delete(e)}addValue(e,n){n!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,n)),this.values.set(e,n),this.latestValues[e]=n.get()}removeValue(e){this.values.delete(e);const n=this.valueSubscriptions.get(e);n&&(n(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,n){if(this.props.values&&this.props.values[e])return this.props.values[e];let s=this.values.get(e);return s===void 0&&n!==void 0&&(s=Rr(n,{owner:this}),this.addValue(e,s)),s}readValue(e){var n;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(n=this.getBaseTargetFromProps(this.props,e))!==null&&n!==void 0?n:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,n){this.baseTarget[e]=n}getBaseTarget(e){var n;const{initial:s}=this.props,r=typeof s=="string"||typeof s=="object"?(n=_m(this.props,s))===null||n===void 0?void 0:n[e]:void 0;if(s&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,e);return i!==void 0&&!Ht(i)?i:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,n){return this.events[e]||(this.events[e]=new Vm),this.events[e].add(n)}notify(e,...n){this.events[e]&&this.events[e].notify(...n)}}class Fb extends UM{sortInstanceNodePosition(e,n){return e.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(e,n){return e.style?e.style[n]:void 0}removeValueFromRenderState(e,{vars:n,style:s}){delete n[e],delete s[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:n,...s},{transformValues:r},i){let o=aR(s,e||{},this);if(r&&(n&&(n=r(n)),s&&(s=r(s)),o&&(o=r(o))),i){rR(this,s,o);const l=FM(this,s,o,n);n=l.transitionEnd,s=l.target}return{transition:e,transitionEnd:n,...s}}}function WM(t){return window.getComputedStyle(t)}class HM extends Fb{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,n){if(Ur.has(n)){const s=Dm(n);return s&&s.default||0}else{const s=WM(e),r=(PS(n)?s.getPropertyValue(n):s[n])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:n}){return Cb(e,n)}build(e,n,s,r){km(e,n,s,r.transformTemplate)}scrapeMotionValuesFromProps(e,n){return Lm(e,n)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Ht(e)&&(this.childSubscription=e.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}renderInstance(e,n,s,r){MS(e,n,s,r)}}class YM extends Fb{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,n){return e[n]}readValueFromInstance(e,n){if(Ur.has(n)){const s=Dm(n);return s&&s.default||0}return n=IS.has(n)?n:Sm(n),e.getAttribute(n)}measureInstanceViewportBox(){return st()}scrapeMotionValuesFromProps(e,n){return OS(e,n)}build(e,n,s,r){Em(e,n,s,this.isSVGTag,r.transformTemplate)}renderInstance(e,n,s,r){AS(e,n,s,r)}mount(e){this.isSVGTag=Tm(e.tagName),super.mount(e)}}const qM=(t,e)=>Cm(t)?new YM(e,{enableHardwareAcceleration:!1}):new HM(e,{enableHardwareAcceleration:!0}),GM={layout:{ProjectionNode:Ib,MeasureLayout:Pb}},QM={...SR,...$L,...kM,...GM},$=KT((t,e)=>EL(t,e,QM,qM));function Bb(){const t=b.useRef(!1);return hu(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function KM(){const t=Bb(),[e,n]=b.useState(0),s=b.useCallback(()=>{t.current&&n(e+1)},[e]);return[b.useCallback(()=>Me.postRender(s),[s]),e]}class XM extends b.Component{getSnapshotBeforeUpdate(e){const n=this.props.childRef.current;if(n&&e.isPresent&&!this.props.isPresent){const s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function JM({children:t,isPresent:e}){const n=b.useId(),s=b.useRef(null),r=b.useRef({width:0,height:0,top:0,left:0});return b.useInsertionEffect(()=>{const{width:i,height:o,top:l,left:c}=r.current;if(e||!s.current||!i||!o)return;s.current.dataset.motionPopId=n;const u=document.createElement("style");return document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${n}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${o}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[e]),b.createElement(XM,{isPresent:e,childRef:s,sizeRef:r},b.cloneElement(t,{ref:s}))}const Yh=({children:t,initial:e,isPresent:n,onExitComplete:s,custom:r,presenceAffectsLayout:i,mode:o})=>{const l=mu(ZM),c=b.useId(),u=b.useMemo(()=>({id:c,initial:e,isPresent:n,custom:r,onExitComplete:h=>{l.set(h,!0);for(const d of l.values())if(!d)return;s&&s()},register:h=>(l.set(h,!1),()=>l.delete(h))}),i?void 0:[n]);return b.useMemo(()=>{l.forEach((h,d)=>l.set(d,!1))},[n]),b.useEffect(()=>{!n&&!l.size&&s&&s()},[n]),o==="popLayout"&&(t=b.createElement(JM,{isPresent:n},t)),b.createElement(cu.Provider,{value:u},t)};function ZM(){return new Map}function eI(t){return b.useEffect(()=>()=>t(),[])}const hr=t=>t.key||"";function tI(t,e){t.forEach(n=>{const s=hr(n);e.set(s,n)})}function nI(t){const e=[];return b.Children.forEach(t,n=>{b.isValidElement(n)&&e.push(n)}),e}const Mt=({children:t,custom:e,initial:n=!0,onExitComplete:s,exitBeforeEnter:r,presenceAffectsLayout:i=!0,mode:o="sync"})=>{const l=b.useContext(jm).forceRender||KM()[0],c=Bb(),u=nI(t);let h=u;const d=b.useRef(new Map).current,f=b.useRef(h),x=b.useRef(new Map).current,p=b.useRef(!0);if(hu(()=>{p.current=!1,tI(u,x),f.current=h}),eI(()=>{p.current=!0,x.clear(),d.clear()}),p.current)return b.createElement(b.Fragment,null,h.map(g=>b.createElement(Yh,{key:hr(g),isPresent:!0,initial:n?void 0:!1,presenceAffectsLayout:i,mode:o},g)));h=[...h];const y=f.current.map(hr),w=u.map(hr),m=y.length;for(let g=0;g<m;g++){const S=y[g];w.indexOf(S)===-1&&!d.has(S)&&d.set(S,void 0)}return o==="wait"&&d.size&&(h=[]),d.forEach((g,S)=>{if(w.indexOf(S)!==-1)return;const N=x.get(S);if(!N)return;const C=y.indexOf(S);let E=g;if(!E){const L=()=>{d.delete(S);const P=Array.from(x.keys()).filter(R=>!w.includes(R));if(P.forEach(R=>x.delete(R)),f.current=u.filter(R=>{const _=hr(R);return _===S||P.includes(_)}),!d.size){if(c.current===!1)return;l(),s&&s()}};E=b.createElement(Yh,{key:hr(N),isPresent:!1,onExitComplete:L,custom:e,presenceAffectsLayout:i,mode:o},N),d.set(S,E)}h.splice(C,0,E)}),h=h.map(g=>{const S=g.key;return d.has(S)?g:b.createElement(Yh,{key:hr(g),isPresent:!0,presenceAffectsLayout:i,mode:o},g)}),b.createElement(b.Fragment,null,d.size?h:h.map(g=>b.cloneElement(g)))};function zb(t){const e=mu(()=>Rr(t)),{isStatic:n}=b.useContext(wm);if(n){const[,s]=b.useState(t);b.useEffect(()=>e.on("change",s),[])}return e}const sI=t=>t&&typeof t=="object"&&t.mix,rI=t=>sI(t)?t.mix:void 0;function iI(...t){const e=!Array.isArray(t[0]),n=e?0:-1,s=t[0+n],r=t[1+n],i=t[2+n],o=t[3+n],l=Om(r,i,{mixer:rI(i[0]),...o});return e?l(s):l}function $b(t,e){const n=zb(e()),s=()=>n.set(e());return s(),hu(()=>{const r=()=>Me.update(s,!1,!0),i=t.map(o=>o.on("change",r));return()=>{i.forEach(o=>o()),zn(s)}}),n}function aI(t){_a.current=[],t();const e=$b(_a.current,t);return _a.current=void 0,e}function qh(t,e,n,s){if(typeof t=="function")return aI(t);const r=typeof e=="function"?e:iI(e,n,s);return Array.isArray(t)?o0(t,r):o0([t],([i])=>r(i))}function o0(t,e){const n=mu(()=>[]);return $b(t,()=>{n.length=0;const s=t.length;for(let r=0;r<s;r++)n[r]=t[r].get();return e(n)})}function Vb(t){var e,n,s="";if(typeof t=="string"||typeof t=="number")s+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(n=Vb(t[e]))&&(s&&(s+=" "),s+=n);else for(e in t)t[e]&&(s&&(s+=" "),s+=e);return s}function ks(){for(var t,e,n=0,s="";n<arguments.length;)(t=arguments[n++])&&(e=Vb(t))&&(s&&(s+=" "),s+=e);return s}const Ia=t=>typeof t=="number"&&!isNaN(t),Mr=t=>typeof t=="string",Ft=t=>typeof t=="function",Fl=t=>Mr(t)||Ft(t)?t:null,Gh=t=>b.isValidElement(t)||Mr(t)||Ft(t)||Ia(t);function oI(t,e,n){n===void 0&&(n=300);const{scrollHeight:s,style:r}=t;requestAnimationFrame(()=>{r.minHeight="initial",r.height=s+"px",r.transition=`all ${n}ms`,requestAnimationFrame(()=>{r.height="0",r.padding="0",r.margin="0",setTimeout(e,n)})})}function vu(t){let{enter:e,exit:n,appendPosition:s=!1,collapse:r=!0,collapseDuration:i=300}=t;return function(o){let{children:l,position:c,preventExitTransition:u,done:h,nodeRef:d,isIn:f}=o;const x=s?`${e}--${c}`:e,p=s?`${n}--${c}`:n,y=b.useRef(0);return b.useLayoutEffect(()=>{const w=d.current,m=x.split(" "),g=S=>{S.target===d.current&&(w.dispatchEvent(new Event("d")),w.removeEventListener("animationend",g),w.removeEventListener("animationcancel",g),y.current===0&&S.type!=="animationcancel"&&w.classList.remove(...m))};w.classList.add(...m),w.addEventListener("animationend",g),w.addEventListener("animationcancel",g)},[]),b.useEffect(()=>{const w=d.current,m=()=>{w.removeEventListener("animationend",m),r?oI(w,h,i):h()};f||(u?m():(y.current=1,w.className+=` ${p}`,w.addEventListener("animationend",m)))},[f]),ye.createElement(ye.Fragment,null,l)}}function l0(t,e){return t!=null?{content:t.content,containerId:t.props.containerId,id:t.props.toastId,theme:t.props.theme,type:t.props.type,data:t.props.data||{},isLoading:t.props.isLoading,icon:t.props.icon,status:e}:{}}const un={list:new Map,emitQueue:new Map,on(t,e){return this.list.has(t)||this.list.set(t,[]),this.list.get(t).push(e),this},off(t,e){if(e){const n=this.list.get(t).filter(s=>s!==e);return this.list.set(t,n),this}return this.list.delete(t),this},cancelEmit(t){const e=this.emitQueue.get(t);return e&&(e.forEach(clearTimeout),this.emitQueue.delete(t)),this},emit(t){this.list.has(t)&&this.list.get(t).forEach(e=>{const n=setTimeout(()=>{e(...[].slice.call(arguments,1))},0);this.emitQueue.has(t)||this.emitQueue.set(t,[]),this.emitQueue.get(t).push(n)})}},ol=t=>{let{theme:e,type:n,...s}=t;return ye.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:e==="colored"?"currentColor":`var(--toastify-icon-color-${n})`,...s})},Qh={info:function(t){return ye.createElement(ol,{...t},ye.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(t){return ye.createElement(ol,{...t},ye.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(t){return ye.createElement(ol,{...t},ye.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(t){return ye.createElement(ol,{...t},ye.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return ye.createElement("div",{className:"Toastify__spinner"})}};function lI(t){const[,e]=b.useReducer(x=>x+1,0),[n,s]=b.useState([]),r=b.useRef(null),i=b.useRef(new Map).current,o=x=>n.indexOf(x)!==-1,l=b.useRef({toastKey:1,displayedToast:0,count:0,queue:[],props:t,containerId:null,isToastActive:o,getToast:x=>i.get(x)}).current;function c(x){let{containerId:p}=x;const{limit:y}=l.props;!y||p&&l.containerId!==p||(l.count-=l.queue.length,l.queue=[])}function u(x){s(p=>x==null?[]:p.filter(y=>y!==x))}function h(){const{toastContent:x,toastProps:p,staleId:y}=l.queue.shift();f(x,p,y)}function d(x,p){let{delay:y,staleId:w,...m}=p;if(!Gh(x)||function(O){return!r.current||l.props.enableMultiContainer&&O.containerId!==l.props.containerId||i.has(O.toastId)&&O.updateId==null}(m))return;const{toastId:g,updateId:S,data:N}=m,{props:C}=l,E=()=>u(g),L=S==null;L&&l.count++;const P={...C,style:C.toastStyle,key:l.toastKey++,...Object.fromEntries(Object.entries(m).filter(O=>{let[z,F]=O;return F!=null})),toastId:g,updateId:S,data:N,closeToast:E,isIn:!1,className:Fl(m.className||C.toastClassName),bodyClassName:Fl(m.bodyClassName||C.bodyClassName),progressClassName:Fl(m.progressClassName||C.progressClassName),autoClose:!m.isLoading&&(R=m.autoClose,_=C.autoClose,R===!1||Ia(R)&&R>0?R:_),deleteToast(){const O=l0(i.get(g),"removed");i.delete(g),un.emit(4,O);const z=l.queue.length;if(l.count=g==null?l.count-l.displayedToast:l.count-1,l.count<0&&(l.count=0),z>0){const F=g==null?l.props.limit:1;if(z===1||F===1)l.displayedToast++,h();else{const W=F>z?z:F;l.displayedToast=W;for(let A=0;A<W;A++)h()}}else e()}};var R,_;P.iconOut=function(O){let{theme:z,type:F,isLoading:W,icon:A}=O,Q=null;const V={theme:z,type:F};return A===!1||(Ft(A)?Q=A(V):b.isValidElement(A)?Q=b.cloneElement(A,V):Mr(A)||Ia(A)?Q=A:W?Q=Qh.spinner():(J=>J in Qh)(F)&&(Q=Qh[F](V))),Q}(P),Ft(m.onOpen)&&(P.onOpen=m.onOpen),Ft(m.onClose)&&(P.onClose=m.onClose),P.closeButton=C.closeButton,m.closeButton===!1||Gh(m.closeButton)?P.closeButton=m.closeButton:m.closeButton===!0&&(P.closeButton=!Gh(C.closeButton)||C.closeButton);let I=x;b.isValidElement(x)&&!Mr(x.type)?I=b.cloneElement(x,{closeToast:E,toastProps:P,data:N}):Ft(x)&&(I=x({closeToast:E,toastProps:P,data:N})),C.limit&&C.limit>0&&l.count>C.limit&&L?l.queue.push({toastContent:I,toastProps:P,staleId:w}):Ia(y)?setTimeout(()=>{f(I,P,w)},y):f(I,P,w)}function f(x,p,y){const{toastId:w}=p;y&&i.delete(y);const m={content:x,props:p};i.set(w,m),s(g=>[...g,w].filter(S=>S!==y)),un.emit(4,l0(m,m.props.updateId==null?"added":"updated"))}return b.useEffect(()=>(l.containerId=t.containerId,un.cancelEmit(3).on(0,d).on(1,x=>r.current&&u(x)).on(5,c).emit(2,l),()=>{i.clear(),un.emit(3,l)}),[]),b.useEffect(()=>{l.props=t,l.isToastActive=o,l.displayedToast=n.length}),{getToastToRender:function(x){const p=new Map,y=Array.from(i.values());return t.newestOnTop&&y.reverse(),y.forEach(w=>{const{position:m}=w.props;p.has(m)||p.set(m,[]),p.get(m).push(w)}),Array.from(p,w=>x(w[0],w[1]))},containerRef:r,isToastActive:o}}function c0(t){return t.targetTouches&&t.targetTouches.length>=1?t.targetTouches[0].clientX:t.clientX}function u0(t){return t.targetTouches&&t.targetTouches.length>=1?t.targetTouches[0].clientY:t.clientY}function cI(t){const[e,n]=b.useState(!1),[s,r]=b.useState(!1),i=b.useRef(null),o=b.useRef({start:0,x:0,y:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,boundingRect:null,didMove:!1}).current,l=b.useRef(t),{autoClose:c,pauseOnHover:u,closeToast:h,onClick:d,closeOnClick:f}=t;function x(N){if(t.draggable){N.nativeEvent.type==="touchstart"&&N.nativeEvent.preventDefault(),o.didMove=!1,document.addEventListener("mousemove",m),document.addEventListener("mouseup",g),document.addEventListener("touchmove",m),document.addEventListener("touchend",g);const C=i.current;o.canCloseOnClick=!0,o.canDrag=!0,o.boundingRect=C.getBoundingClientRect(),C.style.transition="",o.x=c0(N.nativeEvent),o.y=u0(N.nativeEvent),t.draggableDirection==="x"?(o.start=o.x,o.removalDistance=C.offsetWidth*(t.draggablePercent/100)):(o.start=o.y,o.removalDistance=C.offsetHeight*(t.draggablePercent===80?1.5*t.draggablePercent:t.draggablePercent/100))}}function p(N){if(o.boundingRect){const{top:C,bottom:E,left:L,right:P}=o.boundingRect;N.nativeEvent.type!=="touchend"&&t.pauseOnHover&&o.x>=L&&o.x<=P&&o.y>=C&&o.y<=E?w():y()}}function y(){n(!0)}function w(){n(!1)}function m(N){const C=i.current;o.canDrag&&C&&(o.didMove=!0,e&&w(),o.x=c0(N),o.y=u0(N),o.delta=t.draggableDirection==="x"?o.x-o.start:o.y-o.start,o.start!==o.x&&(o.canCloseOnClick=!1),C.style.transform=`translate${t.draggableDirection}(${o.delta}px)`,C.style.opacity=""+(1-Math.abs(o.delta/o.removalDistance)))}function g(){document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",g),document.removeEventListener("touchmove",m),document.removeEventListener("touchend",g);const N=i.current;if(o.canDrag&&o.didMove&&N){if(o.canDrag=!1,Math.abs(o.delta)>o.removalDistance)return r(!0),void t.closeToast();N.style.transition="transform 0.2s, opacity 0.2s",N.style.transform=`translate${t.draggableDirection}(0)`,N.style.opacity="1"}}b.useEffect(()=>{l.current=t}),b.useEffect(()=>(i.current&&i.current.addEventListener("d",y,{once:!0}),Ft(t.onOpen)&&t.onOpen(b.isValidElement(t.children)&&t.children.props),()=>{const N=l.current;Ft(N.onClose)&&N.onClose(b.isValidElement(N.children)&&N.children.props)}),[]),b.useEffect(()=>(t.pauseOnFocusLoss&&(document.hasFocus()||w(),window.addEventListener("focus",y),window.addEventListener("blur",w)),()=>{t.pauseOnFocusLoss&&(window.removeEventListener("focus",y),window.removeEventListener("blur",w))}),[t.pauseOnFocusLoss]);const S={onMouseDown:x,onTouchStart:x,onMouseUp:p,onTouchEnd:p};return c&&u&&(S.onMouseEnter=w,S.onMouseLeave=y),f&&(S.onClick=N=>{d&&d(N),o.canCloseOnClick&&h()}),{playToast:y,pauseToast:w,isRunning:e,preventExitTransition:s,toastRef:i,eventHandlers:S}}function Ub(t){let{closeToast:e,theme:n,ariaLabel:s="close"}=t;return ye.createElement("button",{className:`Toastify__close-button Toastify__close-button--${n}`,type:"button",onClick:r=>{r.stopPropagation(),e(r)},"aria-label":s},ye.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},ye.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function uI(t){let{delay:e,isRunning:n,closeToast:s,type:r="default",hide:i,className:o,style:l,controlledProgress:c,progress:u,rtl:h,isIn:d,theme:f}=t;const x=i||c&&u===0,p={...l,animationDuration:`${e}ms`,animationPlayState:n?"running":"paused",opacity:x?0:1};c&&(p.transform=`scaleX(${u})`);const y=ks("Toastify__progress-bar",c?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${f}`,`Toastify__progress-bar--${r}`,{"Toastify__progress-bar--rtl":h}),w=Ft(o)?o({rtl:h,type:r,defaultClassName:y}):ks(y,o);return ye.createElement("div",{role:"progressbar","aria-hidden":x?"true":"false","aria-label":"notification timer",className:w,style:p,[c&&u>=1?"onTransitionEnd":"onAnimationEnd"]:c&&u<1?null:()=>{d&&s()}})}const hI=t=>{const{isRunning:e,preventExitTransition:n,toastRef:s,eventHandlers:r}=cI(t),{closeButton:i,children:o,autoClose:l,onClick:c,type:u,hideProgressBar:h,closeToast:d,transition:f,position:x,className:p,style:y,bodyClassName:w,bodyStyle:m,progressClassName:g,progressStyle:S,updateId:N,role:C,progress:E,rtl:L,toastId:P,deleteToast:R,isIn:_,isLoading:I,iconOut:O,closeOnClick:z,theme:F}=t,W=ks("Toastify__toast",`Toastify__toast-theme--${F}`,`Toastify__toast--${u}`,{"Toastify__toast--rtl":L},{"Toastify__toast--close-on-click":z}),A=Ft(p)?p({rtl:L,position:x,type:u,defaultClassName:W}):ks(W,p),Q=!!E||!l,V={closeToast:d,type:u,theme:F};let J=null;return i===!1||(J=Ft(i)?i(V):b.isValidElement(i)?b.cloneElement(i,V):Ub(V)),ye.createElement(f,{isIn:_,done:R,position:x,preventExitTransition:n,nodeRef:s},ye.createElement("div",{id:P,onClick:c,className:A,...r,style:y,ref:s},ye.createElement("div",{..._&&{role:C},className:Ft(w)?w({type:u}):ks("Toastify__toast-body",w),style:m},O!=null&&ye.createElement("div",{className:ks("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!I})},O),ye.createElement("div",null,o)),J,ye.createElement(uI,{...N&&!Q?{key:`pb-${N}`}:{},rtl:L,theme:F,delay:l,isRunning:e,isIn:_,closeToast:d,hide:h,type:u,style:S,className:g,controlledProgress:Q,progress:E||0})))},xu=function(t,e){return e===void 0&&(e=!1),{enter:`Toastify--animate Toastify__${t}-enter`,exit:`Toastify--animate Toastify__${t}-exit`,appendPosition:e}},dI=vu(xu("bounce",!0));vu(xu("slide",!0));vu(xu("zoom"));vu(xu("flip"));const kc=b.forwardRef((t,e)=>{const{getToastToRender:n,containerRef:s,isToastActive:r}=lI(t),{className:i,style:o,rtl:l,containerId:c}=t;function u(h){const d=ks("Toastify__toast-container",`Toastify__toast-container--${h}`,{"Toastify__toast-container--rtl":l});return Ft(i)?i({position:h,rtl:l,defaultClassName:d}):ks(d,Fl(i))}return b.useEffect(()=>{e&&(e.current=s.current)},[]),ye.createElement("div",{ref:s,className:"Toastify",id:c},n((h,d)=>{const f=d.length?{...o}:{...o,pointerEvents:"none"};return ye.createElement("div",{className:u(h),style:f,key:`container-${h}`},d.map((x,p)=>{let{content:y,props:w}=x;return ye.createElement(hI,{...w,isIn:r(w.toastId),style:{...w.style,"--nth":p+1,"--len":d.length},key:`toast-${w.key}`},y)}))}))});kc.displayName="ToastContainer",kc.defaultProps={position:"top-right",transition:dI,autoClose:5e3,closeButton:Ub,pauseOnHover:!0,pauseOnFocusLoss:!0,closeOnClick:!0,draggable:!0,draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};let Kh,dr=new Map,ga=[],fI=1;function Wb(){return""+fI++}function pI(t){return t&&(Mr(t.toastId)||Ia(t.toastId))?t.toastId:Wb()}function Aa(t,e){return dr.size>0?un.emit(0,t,e):ga.push({content:t,options:e}),e.toastId}function Pc(t,e){return{...e,type:e&&e.type||t,toastId:pI(e)}}function ll(t){return(e,n)=>Aa(e,Pc(t,n))}function se(t,e){return Aa(t,Pc("default",e))}se.loading=(t,e)=>Aa(t,Pc("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e})),se.promise=function(t,e,n){let s,{pending:r,error:i,success:o}=e;r&&(s=Mr(r)?se.loading(r,n):se.loading(r.render,{...n,...r}));const l={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},c=(h,d,f)=>{if(d==null)return void se.dismiss(s);const x={type:h,...l,...n,data:f},p=Mr(d)?{render:d}:d;return s?se.update(s,{...x,...p}):se(p.render,{...x,...p}),f},u=Ft(t)?t():t;return u.then(h=>c("success",o,h)).catch(h=>c("error",i,h)),u},se.success=ll("success"),se.info=ll("info"),se.error=ll("error"),se.warning=ll("warning"),se.warn=se.warning,se.dark=(t,e)=>Aa(t,Pc("default",{theme:"dark",...e})),se.dismiss=t=>{dr.size>0?un.emit(1,t):ga=ga.filter(e=>t!=null&&e.options.toastId!==t)},se.clearWaitingQueue=function(t){return t===void 0&&(t={}),un.emit(5,t)},se.isActive=t=>{let e=!1;return dr.forEach(n=>{n.isToastActive&&n.isToastActive(t)&&(e=!0)}),e},se.update=function(t,e){e===void 0&&(e={}),setTimeout(()=>{const n=function(s,r){let{containerId:i}=r;const o=dr.get(i||Kh);return o&&o.getToast(s)}(t,e);if(n){const{props:s,content:r}=n,i={delay:100,...s,...e,toastId:e.toastId||t,updateId:Wb()};i.toastId!==t&&(i.staleId=t);const o=i.render||r;delete i.render,Aa(o,i)}},0)},se.done=t=>{se.update(t,{progress:1})},se.onChange=t=>(un.on(4,t),()=>{un.off(4,t)}),se.POSITION={TOP_LEFT:"top-left",TOP_RIGHT:"top-right",TOP_CENTER:"top-center",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",BOTTOM_CENTER:"bottom-center"},se.TYPE={INFO:"info",SUCCESS:"success",WARNING:"warning",ERROR:"error",DEFAULT:"default"},un.on(2,t=>{Kh=t.containerId||t,dr.set(Kh,t),ga.forEach(e=>{un.emit(0,e.content,e.options)}),ga=[]}).on(3,t=>{dr.delete(t.containerId||t),dr.size===0&&un.off(0).off(1).off(5)});var Hb={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},h0=ye.createContext&&ye.createContext(Hb),Bs=function(){return Bs=Object.assign||function(t){for(var e,n=1,s=arguments.length;n<s;n++){e=arguments[n];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])}return t},Bs.apply(this,arguments)},mI=function(t,e){var n={};for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&e.indexOf(s)<0&&(n[s]=t[s]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,s=Object.getOwnPropertySymbols(t);r<s.length;r++)e.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(t,s[r])&&(n[s[r]]=t[s[r]]);return n};function Yb(t){return t&&t.map(function(e,n){return ye.createElement(e.tag,Bs({key:n},e.attr),Yb(e.child))})}function X(t){return function(e){return ye.createElement(gI,Bs({attr:Bs({},t.attr)},e),Yb(t.child))}}function gI(t){var e=function(n){var s=t.attr,r=t.size,i=t.title,o=mI(t,["attr","size","title"]),l=r||n.size||"1em",c;return n.className&&(c=n.className),t.className&&(c=(c?c+" ":"")+t.className),ye.createElement("svg",Bs({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,s,o,{className:c,style:Bs(Bs({color:t.color||n.color},n.style),t.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),i&&ye.createElement("title",null,i),t.children)};return h0!==void 0?ye.createElement(h0.Consumer,null,function(n){return e(n)}):e(Hb)}function $n(t){return X({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"22 12 18 12 15 21 9 3 6 12 2 12"}}]})(t)}function jn(t){return X({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"}},{tag:"line",attr:{x1:"12",y1:"8",x2:"12",y2:"12"}},{tag:"line",attr:{x1:"12",y1:"16",x2:"12.01",y2:"16"}}]})(t)}function Mi(t){return X({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}},{tag:"line",attr:{x1:"12",y1:"9",x2:"12",y2:"13"}},{tag:"line",attr:{x1:"12",y1:"17",x2:"12.01",y2:"17"}}]})(t)}function Ec(t){return X({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"7",y1:"7",x2:"17",y2:"17"}},{tag:"polyline",attr:{points:"17 7 17 17 7 17"}}]})(t)}function yI(t){return X({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"}},{tag:"polyline",attr:{points:"19 12 12 19 5 12"}}]})(t)}function Um(t){return X({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"12",x2:"5",y2:"12"}},{tag:"polyline",attr:{points:"12 19 5 12 12 5"}}]})(t)}function Po(t){return X({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"}},{tag:"polyline",attr:{points:"12 5 19 12 12 19"}}]})(t)}function Tc(t){return X({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"7",y1:"17",x2:"17",y2:"7"}},{tag:"polyline",attr:{points:"7 7 17 7 17 17"}}]})(t)}function vI(t){return X({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"19",x2:"12",y2:"5"}},{tag:"polyline",attr:{points:"5 12 12 5 19 12"}}]})(t)}function d0(t){return X({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"8",r:"7"}},{tag:"polyline",attr:{points:"8.21 13.89 7 23 12 20 17 23 15.79 13.88"}}]})(t)}function Lt(t){return X({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"20",x2:"18",y2:"10"}},{tag:"line",attr:{x1:"12",y1:"20",x2:"12",y2:"4"}},{tag:"line",attr:{x1:"6",y1:"20",x2:"6",y2:"14"}}]})(t)}function bi(t){return X({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"}},{tag:"path",attr:{d:"M13.73 21a2 2 0 0 1-3.46 0"}}]})(t)}function Lc(t){return X({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"}}]})(t)}function qb(t){return X({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}},{tag:"line",attr:{x1:"16",y1:"2",x2:"16",y2:"6"}},{tag:"line",attr:{x1:"8",y1:"2",x2:"8",y2:"6"}},{tag:"line",attr:{x1:"3",y1:"10",x2:"21",y2:"10"}}]})(t)}function xI(t){return X({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}},{tag:"circle",attr:{cx:"12",cy:"13",r:"4"}}]})(t)}function Ws(t){return X({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}},{tag:"polyline",attr:{points:"22 4 12 14.01 9 11.01"}}]})(t)}function f0(t){return X({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"20 6 9 17 4 12"}}]})(t)}function nn(t){return X({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"}},{tag:"polyline",attr:{points:"12 6 12 12 16 14"}}]})(t)}function wI(t){return X({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3H6a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3V6a3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3h12a3 3 0 0 0 3-3 3 3 0 0 0-3-3z"}}]})(t)}function SI(t){return X({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"9 10 4 15 9 20"}},{tag:"path",attr:{d:"M20 4v7a4 4 0 0 1-4 4H4"}}]})(t)}function p0(t){return X({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"4",y:"4",width:"16",height:"16",rx:"2",ry:"2"}},{tag:"rect",attr:{x:"9",y:"9",width:"6",height:"6"}},{tag:"line",attr:{x1:"9",y1:"1",x2:"9",y2:"4"}},{tag:"line",attr:{x1:"15",y1:"1",x2:"15",y2:"4"}},{tag:"line",attr:{x1:"9",y1:"20",x2:"9",y2:"23"}},{tag:"line",attr:{x1:"15",y1:"20",x2:"15",y2:"23"}},{tag:"line",attr:{x1:"20",y1:"9",x2:"23",y2:"9"}},{tag:"line",attr:{x1:"20",y1:"14",x2:"23",y2:"14"}},{tag:"line",attr:{x1:"1",y1:"9",x2:"4",y2:"9"}},{tag:"line",attr:{x1:"1",y1:"14",x2:"4",y2:"14"}}]})(t)}function bI(t){return X({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"ellipse",attr:{cx:"12",cy:"5",rx:"9",ry:"3"}},{tag:"path",attr:{d:"M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"}},{tag:"path",attr:{d:"M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"}}]})(t)}function Nt(t){return X({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"23"}},{tag:"path",attr:{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"}}]})(t)}function Wm(t){return X({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}},{tag:"polyline",attr:{points:"7 10 12 15 17 10"}},{tag:"line",attr:{x1:"12",y1:"15",x2:"12",y2:"3"}}]})(t)}function Gb(t){return X({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}},{tag:"path",attr:{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"}}]})(t)}function Hm(t){return X({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}},{tag:"polyline",attr:{points:"15 3 21 3 21 9"}},{tag:"line",attr:{x1:"10",y1:"14",x2:"21",y2:"3"}}]})(t)}function Kf(t){return X({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}},{tag:"line",attr:{x1:"1",y1:"1",x2:"23",y2:"23"}}]})(t)}function Ii(t){return X({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}},{tag:"circle",attr:{cx:"12",cy:"12",r:"3"}}]})(t)}function NI(t){return X({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}},{tag:"polyline",attr:{points:"14 2 14 8 20 8"}},{tag:"line",attr:{x1:"16",y1:"13",x2:"8",y2:"13"}},{tag:"line",attr:{x1:"16",y1:"17",x2:"8",y2:"17"}},{tag:"polyline",attr:{points:"10 9 9 9 8 9"}}]})(t)}function wu(t){return X({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"}}]})(t)}function Xf(t){return X({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"20 12 20 22 4 22 4 12"}},{tag:"rect",attr:{x:"2",y:"7",width:"20",height:"5"}},{tag:"line",attr:{x1:"12",y1:"22",x2:"12",y2:"7"}},{tag:"path",attr:{d:"M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z"}},{tag:"path",attr:{d:"M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z"}}]})(t)}function Su(t){return X({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"}},{tag:"line",attr:{x1:"2",y1:"12",x2:"22",y2:"12"}},{tag:"path",attr:{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"}}]})(t)}function jI(t){return X({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}},{tag:"polyline",attr:{points:"9 22 9 12 15 12 15 22"}}]})(t)}function Ym(t){return X({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"}},{tag:"line",attr:{x1:"12",y1:"16",x2:"12",y2:"12"}},{tag:"line",attr:{x1:"12",y1:"8",x2:"12.01",y2:"8"}}]})(t)}function CI(t){return X({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"}}]})(t)}function kI(t){return X({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"12 2 2 7 12 12 22 7 12 2"}},{tag:"polyline",attr:{points:"2 17 12 22 22 17"}},{tag:"polyline",attr:{points:"2 12 12 17 22 12"}}]})(t)}function PI(t){return X({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"2",x2:"12",y2:"6"}},{tag:"line",attr:{x1:"12",y1:"18",x2:"12",y2:"22"}},{tag:"line",attr:{x1:"4.93",y1:"4.93",x2:"7.76",y2:"7.76"}},{tag:"line",attr:{x1:"16.24",y1:"16.24",x2:"19.07",y2:"19.07"}},{tag:"line",attr:{x1:"2",y1:"12",x2:"6",y2:"12"}},{tag:"line",attr:{x1:"18",y1:"12",x2:"22",y2:"12"}},{tag:"line",attr:{x1:"4.93",y1:"19.07",x2:"7.76",y2:"16.24"}},{tag:"line",attr:{x1:"16.24",y1:"7.76",x2:"19.07",y2:"4.93"}}]})(t)}function lo(t){return X({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}},{tag:"path",attr:{d:"M7 11V7a5 5 0 0 1 10 0v4"}}]})(t)}function Qb(t){return X({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}},{tag:"polyline",attr:{points:"16 17 21 12 16 7"}},{tag:"line",attr:{x1:"21",y1:"12",x2:"9",y2:"12"}}]})(t)}function bu(t){return X({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}},{tag:"polyline",attr:{points:"22,6 12,13 2,6"}}]})(t)}function EI(t){return X({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}},{tag:"circle",attr:{cx:"12",cy:"10",r:"3"}}]})(t)}function TI(t){return X({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"15 3 21 3 21 9"}},{tag:"polyline",attr:{points:"9 21 3 21 3 15"}},{tag:"line",attr:{x1:"21",y1:"3",x2:"14",y2:"10"}},{tag:"line",attr:{x1:"3",y1:"21",x2:"10",y2:"14"}}]})(t)}function Kb(t){return X({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"3",y1:"12",x2:"21",y2:"12"}},{tag:"line",attr:{x1:"3",y1:"6",x2:"21",y2:"6"}},{tag:"line",attr:{x1:"3",y1:"18",x2:"21",y2:"18"}}]})(t)}function LI(t){return X({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"}}]})(t)}function Xb(t){return X({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"1",y1:"1",x2:"23",y2:"23"}},{tag:"path",attr:{d:"M9 9v3a3 3 0 0 0 5.12 2.12M15 9.34V4a3 3 0 0 0-5.94-.6"}},{tag:"path",attr:{d:"M17 16.95A7 7 0 0 1 5 12v-2m14 0v2a7 7 0 0 1-.11 1.23"}},{tag:"line",attr:{x1:"12",y1:"19",x2:"12",y2:"23"}},{tag:"line",attr:{x1:"8",y1:"23",x2:"16",y2:"23"}}]})(t)}function Nu(t){return X({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"}},{tag:"path",attr:{d:"M19 10v2a7 7 0 0 1-14 0v-2"}},{tag:"line",attr:{x1:"12",y1:"19",x2:"12",y2:"23"}},{tag:"line",attr:{x1:"8",y1:"23",x2:"16",y2:"23"}}]})(t)}function qm(t){return X({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"}}]})(t)}function VB(t){return X({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"2",y:"3",width:"20",height:"14",rx:"2",ry:"2"}},{tag:"line",attr:{x1:"8",y1:"21",x2:"16",y2:"21"}},{tag:"line",attr:{x1:"12",y1:"17",x2:"12",y2:"21"}}]})(t)}function _I(t){return X({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"}}]})(t)}function RI(t){return X({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"1"}},{tag:"circle",attr:{cx:"19",cy:"12",r:"1"}},{tag:"circle",attr:{cx:"5",cy:"12",r:"1"}}]})(t)}function Jb(t){return X({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"6",y:"4",width:"4",height:"16"}},{tag:"rect",attr:{x:"14",y:"4",width:"4",height:"16"}}]})(t)}function Zb(t){return X({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"5",x2:"5",y2:"19"}},{tag:"circle",attr:{cx:"6.5",cy:"6.5",r:"2.5"}},{tag:"circle",attr:{cx:"17.5",cy:"17.5",r:"2.5"}}]})(t)}function MI(t){return X({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"}}]})(t)}function Ps(t){return X({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21.21 15.89A10 10 0 1 1 8 2.83"}},{tag:"path",attr:{d:"M22 12A10 10 0 0 0 12 2v10z"}}]})(t)}function II(t){return X({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"5 3 19 12 5 21 5 3"}}]})(t)}function Ai(t){return X({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"}},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"}}]})(t)}function jt(t){return X({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 4 23 10 17 10"}},{tag:"polyline",attr:{points:"1 20 1 14 7 14"}},{tag:"path",attr:{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"}}]})(t)}function eN(t){return X({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}},{tag:"polyline",attr:{points:"17 21 17 13 7 13 7 21"}},{tag:"polyline",attr:{points:"7 3 7 8 15 8"}}]})(t)}function ju(t){return X({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"}},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"}}]})(t)}function AI(t){return X({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"22",y1:"2",x2:"11",y2:"13"}},{tag:"polygon",attr:{points:"22 2 15 22 11 13 2 9 22 2"}}]})(t)}function co(t){return X({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"3"}},{tag:"path",attr:{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"}}]})(t)}function OI(t){return X({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"18",cy:"5",r:"3"}},{tag:"circle",attr:{cx:"6",cy:"12",r:"3"}},{tag:"circle",attr:{cx:"18",cy:"19",r:"3"}},{tag:"line",attr:{x1:"8.59",y1:"13.51",x2:"15.42",y2:"17.49"}},{tag:"line",attr:{x1:"15.41",y1:"6.51",x2:"8.59",y2:"10.49"}}]})(t)}function Hs(t){return X({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"}}]})(t)}function Bt(t){return X({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"9",cy:"21",r:"1"}},{tag:"circle",attr:{cx:"20",cy:"21",r:"1"}},{tag:"path",attr:{d:"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"}}]})(t)}function DI(t){return X({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"5",y:"2",width:"14",height:"20",rx:"2",ry:"2"}},{tag:"line",attr:{x1:"12",y1:"18",x2:"12.01",y2:"18"}}]})(t)}function Oi(t){return X({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"}}]})(t)}function FI(t){return X({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"5"}},{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"3"}},{tag:"line",attr:{x1:"12",y1:"21",x2:"12",y2:"23"}},{tag:"line",attr:{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}},{tag:"line",attr:{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}},{tag:"line",attr:{x1:"1",y1:"12",x2:"3",y2:"12"}},{tag:"line",attr:{x1:"21",y1:"12",x2:"23",y2:"12"}},{tag:"line",attr:{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}},{tag:"line",attr:{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"}}]})(t)}function BI(t){return X({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"}},{tag:"line",attr:{x1:"7",y1:"7",x2:"7.01",y2:"7"}}]})(t)}function Jf(t){return X({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"}},{tag:"circle",attr:{cx:"12",cy:"12",r:"6"}},{tag:"circle",attr:{cx:"12",cy:"12",r:"2"}}]})(t)}function tN(t){return X({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"}},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"}},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"}}]})(t)}function _t(t){return X({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 18 13.5 8.5 8.5 13.5 1 6"}},{tag:"polyline",attr:{points:"17 18 23 18 23 12"}}]})(t)}function Xe(t){return X({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 6 13.5 15.5 8.5 10.5 1 18"}},{tag:"polyline",attr:{points:"17 6 23 6 23 12"}}]})(t)}function ls(t){return X({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"}}]})(t)}function zI(t){return X({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"}},{tag:"path",attr:{d:"M23 21v-2a4 4 0 0 0-3-3.87"}},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"}}]})(t)}function Zf(t){return X({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5"}},{tag:"path",attr:{d:"M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"}}]})(t)}function $I(t){return X({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5"}},{tag:"line",attr:{x1:"23",y1:"9",x2:"17",y2:"15"}},{tag:"line",attr:{x1:"17",y1:"9",x2:"23",y2:"15"}}]})(t)}function uo(t){return X({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"}},{tag:"line",attr:{x1:"15",y1:"9",x2:"9",y2:"15"}},{tag:"line",attr:{x1:"9",y1:"9",x2:"15",y2:"15"}}]})(t)}function ds(t){return X({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"}},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"}}]})(t)}function nN(t){return X({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"}}]})(t)}const sN=({onSuccess:t,onError:e,buttonText:n="Continue with Google",disabled:s=!1,className:r=""})=>{const i=b.useRef(null),o=b.useRef(!1);b.useEffect(()=>{const h=()=>{if(window.google&&window.google.accounts){d();return}const f=document.createElement("script");f.src="https://accounts.google.com/gsi/client",f.async=!0,f.defer=!0,f.onload=d,f.onerror=()=>{console.error("Failed to load Google Identity Services"),se.error("Failed to load Google Sign-In")},document.head.appendChild(f)},d=()=>{if(!(o.current||!window.google||!window.google.accounts))try{const f="858430300178-f76rk8do7lqcnggimqp60793naq1la9t.apps.googleusercontent.com";window.google.accounts.id.initialize({client_id:f,callback:l,auto_select:!1,cancel_on_tap_outside:!0}),i.current&&window.google.accounts.id.renderButton(i.current,{theme:"outline",size:"large",width:400,text:"continue_with",shape:"rectangular",logo_alignment:"left"}),o.current=!0}catch(f){console.error("Error initializing Google Sign-In:",f),f.message&&f.message.includes("origin")?(console.error("Google OAuth origin error. Please configure authorized origins in Google Cloud Console."),se.error("Google Sign-In not configured for this domain")):se.error("Failed to initialize Google Sign-In")}};return h(),()=>{o.current=!1}},[]);const l=async h=>{try{if(!h.credential)throw new Error("No credential received from Google");const d=await fetch("http://localhost:5001/api/auth/google/verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({credential:h.credential})}),f=await d.json();if(d.ok&&f.success)t(f.user,f.token),se.success(f.isNewUser?"Welcome to TradeBro!":"Welcome back!",{position:"top-right",autoClose:2e3});else throw new Error(f.message||"Google authentication failed")}catch(d){console.error("Google Sign-In error:",d),e(d.message||"Google authentication failed"),se.error("Google Sign-In failed. Please try again.",{position:"top-right",autoClose:3e3})}},c=async()=>{{await u();return}},u=async()=>{try{const h=document.querySelector(".google-signin-btn");if(h&&(h.disabled=!0,h.innerHTML=`
          <div style="
            width: 20px;
            height: 20px;
            border: 2px solid #f3f3f3;
            border-top: 2px solid #4285f4;
            border-radius: 50%;
            animation: googleSpinner 1s linear infinite;
          "></div>
          Signing in...
        `,!document.getElementById("google-spinner-style"))){const w=document.createElement("style");w.id="google-spinner-style",w.textContent=`
            @keyframes googleSpinner {
              0% { transform: rotate(0deg); }
              100% { transform: rotate(360deg); }
            }
          `,document.head.appendChild(w)}await new Promise(w=>setTimeout(w,1500));const d=[{id:"google_dev_001",email:"john.developer@gmail.com",fullName:"John Developer",firstName:"John",lastName:"Developer",profilePicture:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=150&h=150&fit=crop&crop=face",authProvider:"google",isEmailVerified:!0,createdAt:new Date().toISOString()},{id:"google_dev_002",email:"sarah.trader@gmail.com",fullName:"Sarah Trader",firstName:"Sarah",lastName:"Trader",profilePicture:"https://images.unsplash.com/photo-1494790108755-2616b9e0e4b0?w=150&h=150&fit=crop&crop=face",authProvider:"google",isEmailVerified:!0,createdAt:new Date().toISOString()}],f=d[Math.floor(Math.random()*d.length)],x="dev_jwt_token_"+Date.now()+"_"+Math.random().toString(36).substr(2,9),p=await fetch("http://localhost:5001/api/auth/google/verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({credential:x,userData:JSON.stringify(f)})}),y=await p.json();if(p.ok&&y.success)localStorage.setItem("token",y.token),localStorage.setItem("user",JSON.stringify(y.user)),t(y.user,y.token);else throw new Error(y.message||"Development authentication failed");se.success(`Welcome ${f.firstName}! (Development Mode)`,{position:"top-right",autoClose:3e3})}catch(h){console.error("Development fallback error:",h),e("Development Google Sign-In failed");const d=document.querySelector(".google-signin-btn");d&&(d.disabled=!1,d.innerHTML=`<svg width="20" height="20" viewBox="0 0 24 24"><path fill="#4285f4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/><path fill="#34a853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/><path fill="#fbbc05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/><path fill="#ea4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/></svg> ${n}`)}};return a.jsxs("div",{className:"google-signin-container",children:[a.jsxs("button",{type:"button",className:`google-signin-btn ${r}`,onClick:c,disabled:s,style:{width:"100%",height:"44px",backgroundColor:"rgba(255, 255, 255, 0.95)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"var(--radius-lg)",display:"flex",alignItems:"center",justifyContent:"center",gap:"12px",fontSize:"14px",fontWeight:"500",color:"#3c4043",cursor:s?"not-allowed":"pointer",opacity:s?.6:1,transition:"all 0.2s ease",fontFamily:"Roboto, arial, sans-serif",marginBottom:"var(--space-xl, 1.5rem)",padding:"0 16px",backdropFilter:"blur(10px)"},onMouseEnter:h=>{s||(h.target.style.backgroundColor="#f8f9fa",h.target.style.boxShadow="0 1px 3px rgba(0,0,0,0.1)")},onMouseLeave:h=>{s||(h.target.style.backgroundColor="white",h.target.style.boxShadow="none")},children:[a.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",children:[a.jsx("path",{fill:"#4285f4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),a.jsx("path",{fill:"#34a853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),a.jsx("path",{fill:"#fbbc05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),a.jsx("path",{fill:"#ea4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),n]}),a.jsx("div",{ref:i,style:{display:"none",position:"absolute",left:"-9999px"}})]})},VI=({onLogin:t})=>{var N,C;const e=hs(),n=Tn(),[s,r]=b.useState({email:"",password:""}),[i,o]=b.useState(!1),[l,c]=b.useState(!1),[u,h]=b.useState({}),[d,f]=b.useState(!1),x=((C=(N=n.state)==null?void 0:N.from)==null?void 0:C.pathname)||"/dashboard",p=localStorage.getItem("redirectAfterLogin")||x;b.useEffect(()=>{var E;(E=n.state)!=null&&E.from&&se.info("Please log in to access that page",{position:"top-right",autoClose:3e3})},[n.state]);const y=E=>{const{name:L,value:P}=E.target;r(R=>({...R,[L]:P})),u[L]&&h(R=>({...R,[L]:""}))},w=()=>{const E={};return s.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.email)||(E.email="Please enter a valid email address"):E.email="Email is required",s.password?s.password.length<6&&(E.password="Password must be at least 6 characters"):E.password="Password is required",h(E),Object.keys(E).length===0},m=async E=>{if(E.preventDefault(),!!w()){c(!0),h({});try{const L=await fetch("http://localhost:5001/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s.email,password:s.password})}),P=await L.json();L.ok&&P.success?(t(P.user,P.token),se.success("Welcome back! Login successful",{position:"top-right",autoClose:2e3}),setTimeout(()=>{e(p,{replace:!0}),localStorage.removeItem("redirectAfterLogin")},1e3)):(h({general:P.message||"Login failed. Please try again."}),se.error(P.message||"Invalid credentials. Please try again.",{position:"top-right",autoClose:3e3}))}catch(L){console.error("Login error:",L),h({general:"Network error. Please try again."}),se.error("Network error. Please check your connection.",{position:"top-right",autoClose:3e3})}finally{c(!1)}}},g=(E,L)=>{t(E,L),setTimeout(()=>{e(p,{replace:!0}),localStorage.removeItem("redirectAfterLogin")},1e3)},S=E=>{h({general:E||"Google login failed. Please try again."}),se.error("Google login failed. Please try again.",{position:"top-right",autoClose:3e3})};return a.jsx("div",{className:"auth-page",children:a.jsxs($.div,{className:"auth-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[a.jsxs("div",{className:"auth-header",children:[a.jsxs("div",{className:"auth-logo",children:[a.jsx("div",{className:"auth-logo-icon",children:""}),a.jsx("h1",{className:"auth-logo-text",children:"TradeBro"})]}),a.jsxs("div",{children:[a.jsx("h2",{className:"auth-title",children:"Welcome Back"}),a.jsx("p",{className:"auth-subtitle",children:"Sign in to your account to continue trading"})]})]}),a.jsxs("form",{onSubmit:m,className:"auth-form",children:[u.general&&a.jsxs("div",{className:"error-message",children:[a.jsx(jn,{size:16}),a.jsx("span",{children:u.general})]}),a.jsxs("div",{className:"form-group",children:[a.jsxs("label",{className:"form-label",children:[a.jsx(bu,{size:16}),"Email Address"]}),a.jsx("input",{type:"email",name:"email",value:s.email,onChange:y,className:`form-input ${u.email?"form-input-error":""}`,placeholder:"Enter your email",disabled:l,autoComplete:"email",required:!0}),u.email&&a.jsxs("div",{className:"form-error",children:[a.jsx(jn,{size:14}),a.jsx("span",{children:u.email})]})]}),a.jsxs("div",{className:"form-group",children:[a.jsxs("label",{className:"form-label",children:[a.jsx(lo,{size:16}),"Password"]}),a.jsxs("div",{className:"password-input",children:[a.jsx("input",{type:i?"text":"password",name:"password",value:s.password,onChange:y,className:`form-input ${u.password?"form-input-error":""}`,placeholder:"Enter your password",disabled:l,autoComplete:"current-password",required:!0}),a.jsx("button",{type:"button",className:"password-toggle",onClick:()=>o(!i),disabled:l,"aria-label":i?"Hide password":"Show password",children:i?a.jsx(Kf,{size:16}):a.jsx(Ii,{size:16})})]}),u.password&&a.jsxs("div",{className:"form-error",children:[a.jsx(jn,{size:14}),a.jsx("span",{children:u.password})]})]}),a.jsxs("div",{className:"form-options",children:[a.jsxs("label",{className:"checkbox-label",children:[a.jsx("input",{type:"checkbox",checked:d,onChange:E=>{console.log("Checkbox clicked:",E.target.checked),f(E.target.checked)},disabled:l,id:"remember-me"}),a.jsx("span",{children:"Remember me"})]}),a.jsx(Ie,{to:"/forgot-password",className:"forgot-link",children:"Forgot password?"})]}),a.jsx("button",{type:"submit",className:"auth-submit",disabled:l,children:l?a.jsx("div",{className:"loading-spinner"}):a.jsxs(a.Fragment,{children:["Sign In",a.jsx(Po,{size:16})]})})]}),a.jsx("div",{className:"auth-divider",children:a.jsx("span",{children:"or continue with"})}),a.jsx(sN,{onSuccess:g,onError:S,buttonText:"Sign in with Google",disabled:l,className:"google-button"}),a.jsx("div",{className:"auth-footer",children:a.jsxs("p",{children:["Don't have an account?"," ",a.jsx(Ie,{to:"/signup",children:"Sign up for free"})]})})]})})},UI=({onSignup:t})=>{const e=hs(),[n,s]=b.useState({name:"",email:"",password:"",confirmPassword:""}),[r,i]=b.useState(!1),[o,l]=b.useState(!1),[c,u]=b.useState(!1),[h,d]=b.useState({}),[f,x]=b.useState(!1),[p,y]=b.useState({length:!1,uppercase:!1,lowercase:!1,number:!1,special:!1}),w=localStorage.getItem("redirectAfterLogin")||"/dashboard",m=_=>{const I={length:_.length>=8,uppercase:/[A-Z]/.test(_),lowercase:/[a-z]/.test(_),number:/\d/.test(_),special:/[!@#$%^&*(),.?":{}|<>]/.test(_)};return y(I),I},g=_=>{const{name:I,value:O}=_.target;s(z=>({...z,[I]:O})),I==="password"&&m(O),h[I]&&d(z=>({...z,[I]:""}))},S=()=>{const _={};return n.name.trim()?n.name.trim().length<2&&(_.name="Name must be at least 2 characters"):_.name="Full name is required",n.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.email)||(_.email="Please enter a valid email address"):_.email="Email is required",n.password?n.password.length<8&&(_.password="Password must be at least 8 characters"):_.password="Password is required",n.confirmPassword?n.password!==n.confirmPassword&&(_.confirmPassword="Passwords do not match"):_.confirmPassword="Please confirm your password",f||(_.terms="You must accept the Terms of Service and Privacy Policy"),d(_),Object.keys(_).length===0},N=async _=>{if(_.preventDefault(),!!S()){u(!0),d({});try{const I=n.email.split("@")[0].replace(/[^a-zA-Z0-9]/g,""),O=Date.now().toString().slice(-4),z=I+O;console.log(" Sending signup data:",{username:z,email:n.email,fullName:n.name,passwordLength:n.password.length});const F=await fetch("http://localhost:5001/api/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:z,email:n.email,password:n.password,fullName:n.name})}),W=await F.json();if(F.ok&&W.success)t(W.user,W.token),se.success("Welcome to TradeBro! Account created successfully",{position:"top-right",autoClose:2e3}),setTimeout(()=>{e(w,{replace:!0}),localStorage.removeItem("redirectAfterLogin")},1e3);else if(console.log(" Signup failed:",W),W.errors&&typeof W.errors=="object"){d(W.errors);const A=Object.values(W.errors)[0];se.error(A||"Please fix the validation errors.",{position:"top-right",autoClose:4e3})}else d({general:W.message||"Signup failed. Please try again."}),se.error(W.message||"Signup failed. Please try again.",{position:"top-right",autoClose:3e3})}catch(I){console.error("Signup error:",I),d({general:"Network error. Please try again."}),se.error("Network error. Please check your connection.",{position:"top-right",autoClose:3e3})}finally{u(!1)}}},C=(_,I)=>{t(_,I),setTimeout(()=>{e(w,{replace:!0}),localStorage.removeItem("redirectAfterLogin")},1e3)},E=_=>{d({general:_||"Google signup failed. Please try again."}),se.error("Google signup failed. Please try again.",{position:"top-right",autoClose:3e3})},L=()=>Object.values(p).filter(Boolean).length,P=()=>{const _=L();return _<2?"Weak":_<4?"Medium":"Strong"},R=()=>{const _=L();return _<2?"#ef4444":_<4?"#f59e0b":"#10b981"};return a.jsx("div",{className:"auth-page",children:a.jsxs($.div,{className:"auth-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[a.jsxs("div",{className:"auth-header",children:[a.jsxs("div",{className:"auth-logo",children:[a.jsx("div",{className:"auth-logo-icon",children:""}),a.jsx("h1",{className:"auth-logo-text",children:"TradeBro"})]}),a.jsxs("div",{children:[a.jsx("h2",{className:"auth-title",children:"Create Account"}),a.jsx("p",{className:"auth-subtitle",children:"Join TradeBro and start your trading journey today"})]})]}),a.jsxs("form",{onSubmit:N,className:"auth-form",children:[h.general&&a.jsxs("div",{className:"error-message",children:[a.jsx(jn,{size:16}),a.jsx("span",{children:h.general})]}),a.jsxs("div",{className:"form-group",children:[a.jsxs("label",{className:"form-label",children:[a.jsx(ls,{size:16}),"Full Name"]}),a.jsx("input",{type:"text",name:"name",value:n.name,onChange:g,className:`form-input ${h.name?"form-input-error":""}`,placeholder:"Enter your full name",disabled:c,autoComplete:"name",required:!0}),h.name&&a.jsxs("div",{className:"form-error",children:[a.jsx(jn,{size:14}),a.jsx("span",{children:h.name})]})]}),a.jsxs("div",{className:"form-group",children:[a.jsxs("label",{className:"form-label",children:[a.jsx(bu,{size:16}),"Email Address"]}),a.jsx("input",{type:"email",name:"email",value:n.email,onChange:g,className:`form-input ${h.email?"form-input-error":""}`,placeholder:"Enter your email",disabled:c,autoComplete:"email",required:!0}),h.email&&a.jsxs("div",{className:"form-error",children:[a.jsx(jn,{size:14}),a.jsx("span",{children:h.email})]})]}),a.jsxs("div",{className:"form-group",children:[a.jsxs("label",{className:"form-label",children:[a.jsx(lo,{size:16}),"Password"]}),a.jsxs("div",{className:"password-input",children:[a.jsx("input",{type:r?"text":"password",name:"password",value:n.password,onChange:g,className:`form-input ${h.password?"form-input-error":""}`,placeholder:"Create a password",disabled:c,autoComplete:"new-password",required:!0}),a.jsx("button",{type:"button",className:"password-toggle",onClick:()=>i(!r),disabled:c,"aria-label":r?"Hide password":"Show password",children:r?a.jsx(Kf,{size:16}):a.jsx(Ii,{size:16})})]}),h.password&&a.jsxs("div",{className:"form-error",children:[a.jsx(jn,{size:14}),a.jsx("span",{children:h.password})]}),n.password&&a.jsxs("div",{className:"password-strength",children:[a.jsx("div",{className:"password-strength-bar",children:a.jsx("div",{className:"password-strength-fill",style:{width:`${L()/5*100}%`,backgroundColor:R()}})}),a.jsx("span",{className:"password-strength-text",style:{color:R()},children:P()})]})]}),a.jsxs("div",{className:"form-group",children:[a.jsxs("label",{className:"form-label",children:[a.jsx(lo,{size:16}),"Confirm Password"]}),a.jsxs("div",{className:"password-input",children:[a.jsx("input",{type:o?"text":"password",name:"confirmPassword",value:n.confirmPassword,onChange:g,className:`form-input ${h.confirmPassword?"form-input-error":""}`,placeholder:"Confirm your password",disabled:c,autoComplete:"new-password",required:!0}),a.jsx("button",{type:"button",className:"password-toggle",onClick:()=>l(!o),disabled:c,"aria-label":o?"Hide password":"Show password",children:o?a.jsx(Kf,{size:16}):a.jsx(Ii,{size:16})})]}),h.confirmPassword&&a.jsxs("div",{className:"form-error",children:[a.jsx(jn,{size:14}),a.jsx("span",{children:h.confirmPassword})]})]}),a.jsxs("div",{className:"form-group",children:[a.jsxs("label",{className:"checkbox-label",children:[a.jsx("input",{type:"checkbox",checked:f,onChange:_=>x(_.target.checked),disabled:c}),a.jsxs("span",{children:["I agree to the"," ",a.jsx(Ie,{to:"/terms",children:"Terms of Service"})," ","and"," ",a.jsx(Ie,{to:"/privacy",children:"Privacy Policy"})]})]}),h.terms&&a.jsxs("div",{className:"form-error",children:[a.jsx(jn,{size:14}),a.jsx("span",{children:h.terms})]})]}),a.jsx("button",{type:"submit",className:"auth-submit",disabled:c,children:c?a.jsx("div",{className:"loading-spinner"}):a.jsxs(a.Fragment,{children:["Create Account",a.jsx(Po,{size:16})]})})]}),a.jsx("div",{className:"auth-divider",children:a.jsx("span",{children:"or continue with"})}),a.jsx(sN,{onSuccess:C,onError:E,buttonText:"Sign up with Google",disabled:c,className:"google-button"}),a.jsx("div",{className:"auth-footer",children:a.jsxs("p",{children:["Already have an account?"," ",a.jsx(Ie,{to:"/login",children:"Sign in"})]})})]})})};var Gm={},ep={exports:{}};(function(t,e){(function(n,s){s(e)})(Ak,function(n){var s=function(){return s=Object.assign||function(i){for(var o,l=1,c=arguments.length;l<c;l++)for(var u in o=arguments[l])Object.prototype.hasOwnProperty.call(o,u)&&(i[u]=o[u]);return i},s.apply(this,arguments)},r=function(){function i(o,l,c){var u=this;this.endVal=l,this.options=c,this.version="2.9.0",this.defaults={startVal:0,decimalPlaces:0,duration:2,useEasing:!0,useGrouping:!0,useIndianSeparators:!1,smartEasingThreshold:999,smartEasingAmount:333,separator:",",decimal:".",prefix:"",suffix:"",enableScrollSpy:!1,scrollSpyDelay:200,scrollSpyOnce:!1},this.finalEndVal=null,this.useEasing=!0,this.countDown=!1,this.error="",this.startVal=0,this.paused=!0,this.once=!1,this.count=function(h){u.startTime||(u.startTime=h);var d=h-u.startTime;u.remaining=u.duration-d,u.useEasing?u.countDown?u.frameVal=u.startVal-u.easingFn(d,0,u.startVal-u.endVal,u.duration):u.frameVal=u.easingFn(d,u.startVal,u.endVal-u.startVal,u.duration):u.frameVal=u.startVal+(u.endVal-u.startVal)*(d/u.duration);var f=u.countDown?u.frameVal<u.endVal:u.frameVal>u.endVal;u.frameVal=f?u.endVal:u.frameVal,u.frameVal=Number(u.frameVal.toFixed(u.options.decimalPlaces)),u.printValue(u.frameVal),d<u.duration?u.rAF=requestAnimationFrame(u.count):u.finalEndVal!==null?u.update(u.finalEndVal):u.options.onCompleteCallback&&u.options.onCompleteCallback()},this.formatNumber=function(h){var d,f,x,p,y=h<0?"-":"";d=Math.abs(h).toFixed(u.options.decimalPlaces);var w=(d+="").split(".");if(f=w[0],x=w.length>1?u.options.decimal+w[1]:"",u.options.useGrouping){p="";for(var m=3,g=0,S=0,N=f.length;S<N;++S)u.options.useIndianSeparators&&S===4&&(m=2,g=1),S!==0&&g%m==0&&(p=u.options.separator+p),g++,p=f[N-S-1]+p;f=p}return u.options.numerals&&u.options.numerals.length&&(f=f.replace(/[0-9]/g,function(C){return u.options.numerals[+C]}),x=x.replace(/[0-9]/g,function(C){return u.options.numerals[+C]})),y+u.options.prefix+f+x+u.options.suffix},this.easeOutExpo=function(h,d,f,x){return f*(1-Math.pow(2,-10*h/x))*1024/1023+d},this.options=s(s({},this.defaults),c),this.formattingFn=this.options.formattingFn?this.options.formattingFn:this.formatNumber,this.easingFn=this.options.easingFn?this.options.easingFn:this.easeOutExpo,this.el=typeof o=="string"?document.getElementById(o):o,l=l??this.parse(this.el.innerHTML),this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.endVal=this.validateValue(l),this.options.decimalPlaces=Math.max(this.options.decimalPlaces),this.resetDuration(),this.options.separator=String(this.options.separator),this.useEasing=this.options.useEasing,this.options.separator===""&&(this.options.useGrouping=!1),this.el?this.printValue(this.startVal):this.error="[CountUp] target is null or undefined",typeof window<"u"&&this.options.enableScrollSpy&&(this.error?console.error(this.error,o):(window.onScrollFns=window.onScrollFns||[],window.onScrollFns.push(function(){return u.handleScroll(u)}),window.onscroll=function(){window.onScrollFns.forEach(function(h){return h()})},this.handleScroll(this)))}return i.prototype.handleScroll=function(o){if(o&&window&&!o.once){var l=window.innerHeight+window.scrollY,c=o.el.getBoundingClientRect(),u=c.top+window.pageYOffset,h=c.top+c.height+window.pageYOffset;h<l&&h>window.scrollY&&o.paused?(o.paused=!1,setTimeout(function(){return o.start()},o.options.scrollSpyDelay),o.options.scrollSpyOnce&&(o.once=!0)):(window.scrollY>h||u>l)&&!o.paused&&o.reset()}},i.prototype.determineDirectionAndSmartEasing=function(){var o=this.finalEndVal?this.finalEndVal:this.endVal;this.countDown=this.startVal>o;var l=o-this.startVal;if(Math.abs(l)>this.options.smartEasingThreshold&&this.options.useEasing){this.finalEndVal=o;var c=this.countDown?1:-1;this.endVal=o+c*this.options.smartEasingAmount,this.duration=this.duration/2}else this.endVal=o,this.finalEndVal=null;this.finalEndVal!==null?this.useEasing=!1:this.useEasing=this.options.useEasing},i.prototype.start=function(o){this.error||(this.options.onStartCallback&&this.options.onStartCallback(),o&&(this.options.onCompleteCallback=o),this.duration>0?(this.determineDirectionAndSmartEasing(),this.paused=!1,this.rAF=requestAnimationFrame(this.count)):this.printValue(this.endVal))},i.prototype.pauseResume=function(){this.paused?(this.startTime=null,this.duration=this.remaining,this.startVal=this.frameVal,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count)):cancelAnimationFrame(this.rAF),this.paused=!this.paused},i.prototype.reset=function(){cancelAnimationFrame(this.rAF),this.paused=!0,this.resetDuration(),this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.printValue(this.startVal)},i.prototype.update=function(o){cancelAnimationFrame(this.rAF),this.startTime=null,this.endVal=this.validateValue(o),this.endVal!==this.frameVal&&(this.startVal=this.frameVal,this.finalEndVal==null&&this.resetDuration(),this.finalEndVal=null,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count))},i.prototype.printValue=function(o){var l;if(this.el){var c=this.formattingFn(o);!((l=this.options.plugin)===null||l===void 0)&&l.render?this.options.plugin.render(this.el,c):this.el.tagName==="INPUT"?this.el.value=c:this.el.tagName==="text"||this.el.tagName==="tspan"?this.el.textContent=c:this.el.innerHTML=c}},i.prototype.ensureNumber=function(o){return typeof o=="number"&&!isNaN(o)},i.prototype.validateValue=function(o){var l=Number(o);return this.ensureNumber(l)?l:(this.error="[CountUp] invalid start or end value: ".concat(o),null)},i.prototype.resetDuration=function(){this.startTime=null,this.duration=1e3*Number(this.options.duration),this.remaining=this.duration},i.prototype.parse=function(o){var l=function(d){return d.replace(/([.,' ])/g,"\\$1")},c=l(this.options.separator),u=l(this.options.decimal),h=o.replace(new RegExp(c,"g"),"").replace(new RegExp(u,"g"),".");return parseFloat(h)},i}();n.CountUp=r})})(ep,ep.exports);var WI=ep.exports;Object.defineProperty(Gm,"__esModule",{value:!0});var ct=b,HI=WI;function YI(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var s,r,i,o,l=[],c=!0,u=!1;try{if(i=(n=n.call(t)).next,e!==0)for(;!(c=(s=i.call(n)).done)&&(l.push(s.value),l.length!==e);c=!0);}catch(h){u=!0,r=h}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw r}}return l}}function m0(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function _c(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?m0(Object(n),!0).forEach(function(s){QI(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m0(Object(n)).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function qI(t,e){if(typeof t!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var s=n.call(t,e);if(typeof s!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function GI(t){var e=qI(t,"string");return typeof e=="symbol"?e:String(e)}function QI(t,e,n){return e=GI(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function tp(){return tp=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},tp.apply(this,arguments)}function KI(t,e){if(t==null)return{};var n={},s=Object.keys(t),r,i;for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function rN(t,e){if(t==null)return{};var n=KI(t,e),s,r;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)s=i[r],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(n[s]=t[s])}return n}function XI(t,e){return JI(t)||YI(t,e)||ZI(t,e)||eA()}function JI(t){if(Array.isArray(t))return t}function ZI(t,e){if(t){if(typeof t=="string")return g0(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g0(t,e)}}function g0(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,s=new Array(e);n<e;n++)s[n]=t[n];return s}function eA(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var tA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?ct.useLayoutEffect:ct.useEffect;function Sn(t){var e=ct.useRef(t);return tA(function(){e.current=t}),ct.useCallback(function(){for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return e.current.apply(void 0,s)},[])}var nA=function(e,n){var s=n.decimal,r=n.decimals,i=n.duration,o=n.easingFn,l=n.end,c=n.formattingFn,u=n.numerals,h=n.prefix,d=n.separator,f=n.start,x=n.suffix,p=n.useEasing,y=n.useGrouping,w=n.useIndianSeparators,m=n.enableScrollSpy,g=n.scrollSpyDelay,S=n.scrollSpyOnce,N=n.plugin;return new HI.CountUp(e,l,{startVal:f,duration:i,decimal:s,decimalPlaces:r,easingFn:o,formattingFn:c,numerals:u,separator:d,prefix:h,suffix:x,plugin:N,useEasing:p,useIndianSeparators:w,useGrouping:y,enableScrollSpy:m,scrollSpyDelay:g,scrollSpyOnce:S})},sA=["ref","startOnMount","enableReinitialize","delay","onEnd","onStart","onPauseResume","onReset","onUpdate"],rA={decimal:".",separator:",",delay:null,prefix:"",suffix:"",duration:2,start:0,decimals:0,startOnMount:!0,enableReinitialize:!0,useEasing:!0,useGrouping:!0,useIndianSeparators:!1},iN=function(e){var n=Object.fromEntries(Object.entries(e).filter(function(R){var _=XI(R,2),I=_[1];return I!==void 0})),s=ct.useMemo(function(){return _c(_c({},rA),n)},[e]),r=s.ref,i=s.startOnMount,o=s.enableReinitialize,l=s.delay,c=s.onEnd,u=s.onStart,h=s.onPauseResume,d=s.onReset,f=s.onUpdate,x=rN(s,sA),p=ct.useRef(),y=ct.useRef(),w=ct.useRef(!1),m=Sn(function(){return nA(typeof r=="string"?r:r.current,x)}),g=Sn(function(R){var _=p.current;if(_&&!R)return _;var I=m();return p.current=I,I}),S=Sn(function(){var R=function(){return g(!0).start(function(){c==null||c({pauseResume:N,reset:C,start:L,update:E})})};l&&l>0?y.current=setTimeout(R,l*1e3):R(),u==null||u({pauseResume:N,reset:C,update:E})}),N=Sn(function(){g().pauseResume(),h==null||h({reset:C,start:L,update:E})}),C=Sn(function(){g().el&&(y.current&&clearTimeout(y.current),g().reset(),d==null||d({pauseResume:N,start:L,update:E}))}),E=Sn(function(R){g().update(R),f==null||f({pauseResume:N,reset:C,start:L})}),L=Sn(function(){C(),S()}),P=Sn(function(R){i&&(R&&C(),S())});return ct.useEffect(function(){w.current?o&&P(!0):(w.current=!0,P())},[o,w,P,l,e.start,e.suffix,e.prefix,e.duration,e.separator,e.decimals,e.decimal,e.formattingFn]),ct.useEffect(function(){return function(){C()}},[C]),{start:L,pauseResume:N,reset:C,update:E,getCountUp:g}},iA=["className","redraw","containerProps","children","style"],aA=function(e){var n=e.className,s=e.redraw,r=e.containerProps,i=e.children,o=e.style,l=rN(e,iA),c=ct.useRef(null),u=ct.useRef(!1),h=iN(_c(_c({},l),{},{ref:c,startOnMount:typeof i!="function"||e.delay===0,enableReinitialize:!1})),d=h.start,f=h.reset,x=h.update,p=h.pauseResume,y=h.getCountUp,w=Sn(function(){d()}),m=Sn(function(N){e.preserveValue||f(),x(N)}),g=Sn(function(){if(typeof e.children=="function"&&!(c.current instanceof Element)){console.error(`Couldn't find attached element to hook the CountUp instance into! Try to attach "containerRef" from the render prop to a an Element, eg. <span ref={containerRef} />.`);return}y()});ct.useEffect(function(){g()},[g]),ct.useEffect(function(){u.current&&m(e.end)},[e.end,m]);var S=s&&e;return ct.useEffect(function(){s&&u.current&&w()},[w,s,S]),ct.useEffect(function(){!s&&u.current&&w()},[w,s,e.start,e.suffix,e.prefix,e.duration,e.separator,e.decimals,e.decimal,e.className,e.formattingFn]),ct.useEffect(function(){u.current=!0},[]),typeof i=="function"?i({countUpRef:c,start:d,reset:f,update:x,pauseResume:p,getCountUp:y}):ct.createElement("span",tp({className:n,ref:c,style:o},r),typeof e.start<"u"?y().formattingFn(e.start):"")},Rc=Gm.default=aA;Gm.useCountUp=iN;const Ys=b.memo(({symbol:t,price:e,change:n,changePercent:s,priceChange:r=null,showSymbol:i=!0,showChange:o=!0,size:l="medium",className:c=""})=>{const[u,h]=b.useState(!1),[d,f]=b.useState(null);b.useEffect(()=>{if(r&&r.direction){f(r.direction),h(!0);const C=setTimeout(()=>{h(!1)},2e3);return()=>clearTimeout(C)}},[r]);const x=b.useCallback(C=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2,maximumFractionDigits:2}).format(C),[]),p=b.useCallback(C=>`${C>=0?"+":""}${C.toFixed(2)}%`,[]),{trendDirection:y,isPositive:w,formattedPrice:m,formattedChange:g}=b.useMemo(()=>{const C=n>0?"up":n<0?"down":"neutral",E=n>=0,L=typeof e=="number"?x(e):e,P=typeof n=="number"?p(n):n;return{trendDirection:C,isPositive:E,formattedPrice:L,formattedChange:P}},[e,n,x,p]),S={initial:{scale:1},animate:{scale:[1,1.05,1],transition:{duration:.6,ease:"easeInOut"}}},N={initial:{opacity:0},animate:{opacity:[0,.3,0],transition:{duration:1,ease:"easeInOut"}}};return a.jsxs("div",{className:`stock-price ${l} ${c}`,children:[i&&a.jsx("div",{className:"stock-symbol",children:t}),a.jsxs("div",{className:"price-container",children:[a.jsxs($.div,{className:`price-value ${u?"animating":""}`,variants:S,initial:"initial",animate:u?"animate":"initial",children:[x(e),a.jsx(Mt,{children:u&&a.jsx($.div,{className:`price-flash ${d}`,variants:N,initial:"initial",animate:"animate",exit:"initial"})})]}),o&&a.jsxs("div",{className:`price-change ${y}`,children:[a.jsxs("div",{className:"change-icon",children:[y==="up"&&a.jsx(Xe,{size:14}),y==="down"&&a.jsx(_t,{size:14}),y==="neutral"&&a.jsx(qm,{size:14})]}),a.jsxs("div",{className:"change-values",children:[a.jsxs("span",{className:"change-amount",children:[w?"+":"",x(Math.abs(n))]}),a.jsxs("span",{className:"change-percent",children:["(",p(s),")"]})]})]})]}),a.jsx(Mt,{children:u&&a.jsx($.div,{className:"pulse-indicator",initial:{scale:0,opacity:1},animate:{scale:2,opacity:0},exit:{scale:0,opacity:0},transition:{duration:1}})})]})});Ys.displayName="StockPrice";const oA=({marketStatus:t,lastUpdated:e,onRefresh:n,showCountdown:s=!0,className:r=""})=>{const[i,o]=b.useState(new Date),[l,c]=b.useState("");b.useEffect(()=>{const d=setInterval(()=>{o(new Date)},1e3);return()=>clearInterval(d)},[]),b.useEffect(()=>{if(!t||!s){c("");return}const d=()=>{const x=new Date,y=(t.isOpen?new Date(t.nextClose):new Date(t.nextOpen)).getTime()-x.getTime();if(y<=0){c("");return}const w=Math.floor(y/(1e3*60*60)),m=Math.floor(y%(1e3*60*60)/(1e3*60)),g=Math.floor(y%(1e3*60)/1e3);let S="";w>0?S=`${w}h ${m}m`:m>0?S=`${m}m ${g}s`:S=`${g}s`,c(S)};d();const f=setInterval(d,1e3);return()=>clearInterval(f)},[t==null?void 0:t.isOpen,t==null?void 0:t.nextClose,t==null?void 0:t.nextOpen,s]);const u=d=>new Date(d).toLocaleTimeString("en-IN",{timeZone:"Asia/Kolkata",hour:"2-digit",minute:"2-digit",hour12:!0}),h=()=>{if(!e)return"Never";const f=Date.now()-e,x=Math.floor(f/1e3);if(x<60)return`${x}s ago`;const p=Math.floor(x/60);return p<60?`${p}m ago`:`${Math.floor(p/60)}h ago`};return t?a.jsxs($.div,{className:`market-status ${t.isOpen?"open":"closed"} ${r}`,initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.3},children:[a.jsx("div",{className:"status-indicator",children:t.isOpen?a.jsx($.div,{className:"status-dot open",animate:{scale:[1,1.2,1]},transition:{duration:2,repeat:1/0},children:a.jsx($n,{})}):a.jsx("div",{className:"status-dot closed",children:a.jsx(Jb,{})})}),a.jsxs("div",{className:"status-content",children:[a.jsxs("div",{className:"status-main",children:[a.jsx("span",{className:"status-label",children:t.isOpen?"Market Open":"Market Closed"}),s&&l&&a.jsxs("span",{className:"countdown",children:[t.isOpen?"Closes in":"Opens in"," ",l]})]}),a.jsxs("div",{className:"status-details",children:[a.jsxs("div",{className:"market-hours",children:[a.jsx(nn,{size:12}),a.jsx("span",{children:t.isOpen?`Closes at ${u(t.nextClose)}`:`Opens at ${u(t.nextOpen)}`})]}),e&&a.jsxs("div",{className:"last-update",children:[a.jsxs("span",{children:["Updated ",h()]}),n&&a.jsx("button",{className:"refresh-btn",onClick:n,title:"Refresh data",children:a.jsx(jt,{size:12})})]})]})]}),a.jsxs("div",{className:"current-time",children:[a.jsx("span",{className:"time-label",children:"IST"}),a.jsx("span",{className:"time-value",children:i.toLocaleTimeString("en-IN",{timeZone:"Asia/Kolkata",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})})]})]}):a.jsxs("div",{className:`market-status loading ${r}`,children:[a.jsx("div",{className:"status-indicator",children:a.jsx(jt,{className:"spinning"})}),a.jsx("div",{className:"status-text",children:a.jsx("span",{children:"Loading market status..."})})]})};class lA{constructor(){this.portfolio=new Map,this.tradingHistory=[],this.virtualBalance=1e4,this.listeners=new Set,this.dailyRewards={lastLoginDate:null,lastClaimDate:null,totalRewards:0,loginStreak:0},this.loadPortfolioFromStorage(),this.checkDailyLogin()}loadPortfolioFromStorage(){try{const e=localStorage.getItem("tradebro_portfolio"),n=localStorage.getItem("tradebro_balance"),s=localStorage.getItem("tradebro_history"),r=localStorage.getItem("tradebro_daily_rewards");if(e){const i=JSON.parse(e);this.portfolio=new Map(Object.entries(i))}n?this.virtualBalance=parseFloat(n):this.virtualBalance=1e4,s&&(this.tradingHistory=JSON.parse(s)),r&&(this.dailyRewards=JSON.parse(r))}catch(e){console.error("Error loading portfolio from storage:",e),this.virtualBalance=1e4,this.dailyRewards={lastLoginDate:null,lastClaimDate:null,totalRewards:0,loginStreak:0}}}savePortfolioToStorage(){try{const e=Object.fromEntries(this.portfolio);localStorage.setItem("tradebro_portfolio",JSON.stringify(e)),localStorage.setItem("tradebro_balance",this.virtualBalance.toString()),localStorage.setItem("tradebro_history",JSON.stringify(this.tradingHistory)),localStorage.setItem("tradebro_daily_rewards",JSON.stringify(this.dailyRewards))}catch(e){console.error("Error saving portfolio to storage:",e)}}addListener(e){this.listeners.add(e)}removeListener(e){this.listeners.delete(e)}notifyListeners(){this.listeners.forEach(e=>{try{e(this.getPortfolioSummary())}catch(n){console.error("Error in portfolio listener:",n)}})}hasHoldings(e){const n=this.portfolio.get(e);return n&&n.quantity>0}getPosition(e){return this.portfolio.get(e)||{symbol:e,quantity:0,avgPrice:0,totalInvested:0,currentValue:0,pnl:0,pnlPercentage:0,lastUpdated:new Date}}calculateTradeMetrics(e,n,s,r){const i=this.getPosition(e),o=n*s,l=this.calculateBrokerage(o),c=this.calculateTaxes(o,r),u=o+l+c;let h={...i};if(r==="BUY"){const d=i.quantity+n,f=i.totalInvested+u;h={...i,quantity:d,avgPrice:f/d,totalInvested:f,lastUpdated:new Date}}else if(r==="SELL"){if(i.quantity<n)throw new Error(`Insufficient holdings. You have ${i.quantity} shares, trying to sell ${n}`);const d=i.quantity-n,f=o-l-c,x=n/i.quantity*i.totalInvested,p=f-x;h={...i,quantity:d,totalInvested:d>0?i.totalInvested-x:0,avgPrice:d>0?i.avgPrice:0,lastUpdated:new Date,realizedPnL:(i.realizedPnL||0)+p}}return{newPosition:h,tradeValue:o,brokerage:l,taxes:c,totalCost:r==="BUY"?u:o-l-c,realizedPnL:r==="SELL"?o-l-c-n/i.quantity*i.totalInvested:0}}calculateBrokerage(e){return Math.min(e*.001,20)}calculateTaxes(e,n){const s=n==="SELL"?e*25e-5:0,r=e*345e-7,i=(this.calculateBrokerage(e)+r)*.18,o=e*1e-6,l=n==="BUY"?e*3e-5:0;return s+r+i+o+l}async executeTrade(e,n,s,r,i="MARKET"){try{if(!e||!n||!s||!r)throw new Error("Missing required trade parameters");if(n<=0||s<=0)throw new Error("Quantity and price must be positive");const o=this.calculateTradeMetrics(e,n,s,r);if(r==="BUY"&&this.virtualBalance<o.totalCost)throw new Error(`Insufficient balance. Required: ${o.totalCost.toFixed(2)}, Available: ${this.virtualBalance.toFixed(2)}`);this.portfolio.set(e,o.newPosition),r==="BUY"?this.virtualBalance-=o.totalCost:this.virtualBalance+=o.totalCost;const l={id:Date.now().toString(),symbol:e,quantity:n,price:s,action:r,orderType:i,tradeValue:o.tradeValue,brokerage:o.brokerage,taxes:o.taxes,totalCost:o.totalCost,realizedPnL:o.realizedPnL,timestamp:new Date,status:"EXECUTED"};return this.tradingHistory.unshift(l),this.tradingHistory.length>1e3&&(this.tradingHistory=this.tradingHistory.slice(0,1e3)),this.savePortfolioToStorage(),this.notifyListeners(),console.log(` Trade executed: ${r} ${n} ${e} @ ${s}`),{success:!0,trade:l,newPosition:o.newPosition,newBalance:this.virtualBalance,message:`Successfully ${r.toLowerCase()}ed ${n} shares of ${e}`}}catch(o){return console.error(" Trade execution failed:",o),{success:!1,error:o.message}}}async buyStock(e,n,s,r="market"){return this.executeTrade(e,n,s,"BUY",r)}async sellStock(e,n,s,r="market"){return this.executeTrade(e,n,s,"SELL",r)}async getPortfolio(){return{success:!0,data:this.getPortfolioSummary()}}async getHoldings(){return{success:!0,data:this.getPortfolioSummary().positions}}async getVirtualMoneyAccount(){return{success:!0,data:{balance:this.virtualBalance,totalInvested:this.getPortfolioSummary().totalInvested,totalReturns:this.getPortfolioSummary().totalPnL}}}getPortfolioSummary(){const e=Array.from(this.portfolio.values()).filter(l=>l.quantity>0);let n=0,s=0,r=0,i=0;e.forEach(l=>{n+=l.totalInvested,s+=l.currentValue||l.totalInvested,r+=(l.currentValue||l.totalInvested)-l.totalInvested,i+=l.realizedPnL||0});const o=n>0?r/n*100:0;return{totalValue:this.virtualBalance+s,availableCash:this.virtualBalance,totalInvested:n,totalCurrentValue:s,totalPnL:r,totalPnLPercentage:o,totalRealizedPnL:i,positions:e,totalPositions:e.length,lastUpdated:new Date}}getTradingHistory(e=100){return this.tradingHistory.slice(0,e)}checkDailyLogin(){try{const e=new Date().toDateString(),n=this.dailyRewards.lastLoginDate;if(this.dailyRewards.lastClaimDate===e)return{awarded:!1,alreadyClaimed:!0,streak:this.dailyRewards.loginStreak,totalRewards:this.dailyRewards.totalRewards,message:"You've already claimed your daily reward today! Come back tomorrow."};if(n!==e){const i=this.virtualBalance;this.virtualBalance+=100;const o=new Date;o.setDate(o.getDate()-1);const l=n===o.toDateString();return this.dailyRewards={lastLoginDate:e,lastClaimDate:e,totalRewards:this.dailyRewards.totalRewards+100,loginStreak:l?this.dailyRewards.loginStreak+1:1},this.tradingHistory.unshift({id:`daily_${Date.now()}`,type:"BONUS",symbol:"DAILY_REWARD",quantity:1,price:100,total:100,timestamp:new Date,description:`Daily login bonus - Day ${this.dailyRewards.loginStreak}`,balanceBefore:i,balanceAfter:this.virtualBalance}),this.savePortfolioToStorage(),this.notifyListeners(),console.log(` Daily login bonus: 100 | Streak: ${this.dailyRewards.loginStreak} days | New Balance: ${this.virtualBalance}`),{awarded:!0,amount:100,streak:this.dailyRewards.loginStreak,totalRewards:this.dailyRewards.totalRewards,newBalance:this.virtualBalance,oldBalance:i}}return{awarded:!1,alreadyClaimed:!1,streak:this.dailyRewards.loginStreak,totalRewards:this.dailyRewards.totalRewards}}catch(e){return console.error("Error checking daily login:",e),{awarded:!1,error:e.message}}}getDailyRewardsInfo(){const e=new Date().toDateString(),n=this.dailyRewards.lastClaimDate,s=n!==e;return{...this.dailyRewards,nextRewardAvailable:s,canClaimToday:s,alreadyClaimedToday:n===e,timeUntilNextReward:this.getTimeUntilNextReward()}}getTimeUntilNextReward(){const e=this.dailyRewards.lastClaimDate;if(!e)return null;const n=new Date(e),s=new Date(n);s.setDate(s.getDate()+1),s.setHours(0,0,0,0);const r=new Date,i=s.getTime()-r.getTime();if(i<=0)return null;const o=Math.floor(i/(1e3*60*60)),l=Math.floor(i%(1e3*60*60)/(1e3*60));return{hours:o,minutes:l,totalMinutes:Math.floor(i/(1e3*60)),nextRewardTime:s.toISOString()}}async claimDailyReward(){try{const e=new Date().toDateString();if(this.dailyRewards.lastClaimDate===e)return{success:!1,alreadyClaimed:!0,message:"You've already claimed your daily reward today!",timeUntilNext:this.getTimeUntilNextReward()};const s=100,r=this.virtualBalance;this.virtualBalance+=s;const i=new Date;i.setDate(i.getDate()-1);const l=this.dailyRewards.lastLoginDate===i.toDateString();return this.dailyRewards={lastLoginDate:e,lastClaimDate:e,totalRewards:this.dailyRewards.totalRewards+s,loginStreak:l?this.dailyRewards.loginStreak+1:1},this.tradingHistory.unshift({id:`daily_${Date.now()}`,type:"BONUS",symbol:"DAILY_REWARD",quantity:1,price:s,total:s,timestamp:new Date,description:`Daily login bonus - Day ${this.dailyRewards.loginStreak}`,balanceBefore:r,balanceAfter:this.virtualBalance}),this.savePortfolioToStorage(),await this.syncPortfolioData(),setTimeout(()=>{this.notifyListeners(),window.dispatchEvent(new CustomEvent("balanceUpdated",{detail:{newBalance:this.virtualBalance,change:s,type:"DAILY_REWARD"}}))},100),{success:!0,awarded:!0,amount:s,streak:this.dailyRewards.loginStreak,totalRewards:this.dailyRewards.totalRewards,newBalance:this.virtualBalance,oldBalance:r}}catch(e){return console.error("Error claiming daily reward:",e),{success:!1,error:e.message}}}forceDailyReward(){this.dailyRewards.lastLoginDate=null,this.dailyRewards.lastClaimDate=null,this.savePortfolioToStorage();const e=this.checkDailyLogin();return setTimeout(()=>{this.notifyListeners()},100),e}async syncPortfolioData(){try{return this.savePortfolioToStorage(),await this.syncWithServer(),this.notifyListeners(),console.log(" Portfolio data synchronized across all components and server"),{success:!0,summary:this.getPortfolioSummary(),rewards:this.getDailyRewardsInfo()}}catch(e){return console.error("Error syncing portfolio data:",e),{success:!1,error:e.message}}}async syncWithServer(){try{const e=localStorage.getItem("token");if(!e)return;(await fetch("http://localhost:5001/api/virtual-money/sync-balance",{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({balance:this.virtualBalance,totalRewards:this.dailyRewards.totalRewards,loginStreak:this.dailyRewards.loginStreak,lastClaimDate:this.dailyRewards.lastClaimDate})})).ok&&console.log(" Successfully synced balance with server")}catch(e){console.warn(" Failed to sync with server:",e.message)}}clearAllData(){this.portfolio.clear(),this.tradingHistory=[],this.virtualBalance=1e4,this.dailyRewards={lastLoginDate:null,lastClaimDate:null,totalRewards:0,loginStreak:0},localStorage.removeItem("tradebro_portfolio"),localStorage.removeItem("tradebro_balance"),localStorage.removeItem("tradebro_history"),localStorage.removeItem("tradebro_daily_rewards"),this.notifyListeners()}}const Le=new lA,aN=b.createContext(),Vn=()=>{const t=b.useContext(aN);if(!t)throw new Error("usePortfolio must be used within a PortfolioProvider");return t},oN=({children:t,user:e})=>{const[n,s]=b.useState({totalValue:1e4,availableCash:1e4,totalInvested:0,totalGainLoss:0,totalGainLossPercentage:0,holdings:[],transactions:[],watchlist:[]}),[r,i]=b.useState(!1);b.useEffect(()=>{const w=S=>{s(N=>({...N,totalValue:S.totalValue,availableCash:S.availableCash,totalInvested:S.totalInvested,totalGainLoss:S.totalPnL,totalGainLossPercentage:S.totalPnLPercentage,holdings:S.positions.map(C=>({symbol:C.symbol,quantity:C.quantity,avgPrice:C.avgPrice,currentPrice:C.currentValue/C.quantity||C.avgPrice,totalValue:C.currentValue||C.totalInvested,gainLoss:(C.currentValue||C.totalInvested)-C.totalInvested,gainLossPercentage:C.totalInvested>0?((C.currentValue||C.totalInvested)-C.totalInvested)/C.totalInvested*100:0}))}))};Le.addListener(w);const m=Le.getPortfolioSummary();w(m);const g=S=>{console.log(" Balance update received in PortfolioContext:",S.detail);const N=Le.getPortfolioSummary();w(N)};return window.addEventListener("balanceUpdated",g),()=>{Le.removeListener(w),window.removeEventListener("balanceUpdated",g)}},[]),b.useEffect(()=>{const w=localStorage.getItem("token"),m=(e==null?void 0:e.id)||(e==null?void 0:e._id);if(e&&m&&w){const g=setTimeout(()=>{o()},100);return()=>clearTimeout(g)}else s({totalValue:1e4,availableCash:1e4,totalInvested:0,totalGainLoss:0,totalGainLossPercentage:0,holdings:[],transactions:[],watchlist:[]})},[e]);const o=async()=>{i(!0);try{const w=localStorage.getItem("token"),m=(e==null?void 0:e.id)||(e==null?void 0:e._id);if(!m||!w){console.warn("Missing user ID or token for portfolio initialization"),i(!1);return}const g=await fetch(`http://localhost:5001/api/portfolio/${m}`,{headers:{Authorization:`Bearer ${w}`,"Content-Type":"application/json"}});if(g.ok){const S=await g.json();s(S.data||S)}else if(g.status===401){console.warn("Authentication failed for portfolio access");return}else g.status===404?await l():console.warn("Portfolio fetch failed with status:",g.status)}catch(w){console.error("Error initializing portfolio:",w),s({totalValue:1e4,availableCash:1e4,totalInvested:0,totalGainLoss:0,totalGainLossPercentage:0,holdings:[],transactions:[],watchlist:[]})}finally{i(!1)}},l=async()=>{try{const w=localStorage.getItem("token"),m=await fetch("http://localhost:5001/api/portfolio/create",{method:"POST",headers:{Authorization:`Bearer ${w}`,"Content-Type":"application/json"},body:JSON.stringify({userId:(e==null?void 0:e.id)||(e==null?void 0:e._id),initialCash:1e4})});if(m.ok){const g=await m.json();s(g.data||g)}else if(m.status===401){console.warn("Authentication failed for portfolio creation");return}else console.warn("Portfolio creation failed with status:",m.status)}catch(w){console.error("Error creating default portfolio:",w)}},c=async(w,m,g,S=null)=>{try{i(!0);const N=await Le.buyStock(w,m,g);if(!N.success)throw new Error(N.error);try{await d(w),console.log(` Removed ${w} from watchlist after purchase`)}catch(C){console.warn(" Could not remove from watchlist:",C.message)}return console.log(" Buy order executed successfully:",N),N}catch(N){throw console.error(" Error buying stock:",N),N}finally{i(!1)}},u=async(w,m,g,S=null)=>{try{i(!0);const N=n.holdings.find(L=>L.symbol===w),C=N&&N.quantity<=m,E=await Le.sellStock(w,m,g);if(!E.success)throw new Error(E.error);if(C)try{const L=S||{symbol:w,name:(N==null?void 0:N.name)||w,price:g,sector:(N==null?void 0:N.sector)||"Unknown"};await h(w,L),console.log(` Added ${w} back to watchlist after complete sale`)}catch(L){console.warn(" Could not add to watchlist:",L.message)}return console.log(" Sell order executed successfully:",E),E}catch(N){throw console.error(" Error selling stock:",N),N}finally{i(!1)}},h=async(w,m=null)=>{try{const g=localStorage.getItem("token"),S={userId:(e==null?void 0:e.id)||(e==null?void 0:e._id),symbol:w};m&&(m.name&&(S.name=m.name),m.sector&&(S.sector=m.sector),m.price&&(S.currentPrice=m.price));const N=await fetch("http://localhost:5001/api/portfolio/watchlist/add",{method:"POST",headers:{Authorization:`Bearer ${g}`,"Content-Type":"application/json"},body:JSON.stringify(S)});if(N.ok){const C=await N.json();return s(E=>({...E,watchlist:C})),C}else if((await fetch("http://localhost:5001/api/watchlist/add",{method:"POST",headers:{Authorization:`Bearer ${g}`,"Content-Type":"application/json"},body:JSON.stringify({symbol:w,name:(m==null?void 0:m.name)||"",notes:"Added after selling position"})})).ok)return console.log(` Added ${w} to watchlist via fallback API`),!0}catch(g){throw console.error("Error adding to watchlist:",g),g}},d=async w=>{try{const m=localStorage.getItem("token"),g=await fetch("http://localhost:5001/api/portfolio/watchlist/remove",{method:"DELETE",headers:{Authorization:`Bearer ${m}`,"Content-Type":"application/json"},body:JSON.stringify({userId:(e==null?void 0:e.id)||(e==null?void 0:e._id),symbol:w})});if(g.ok){const S=await g.json();return s(N=>({...N,watchlist:S})),S}else return(await fetch(`http://localhost:5001/api/watchlist/remove/${w}`,{method:"DELETE",headers:{Authorization:`Bearer ${m}`,"Content-Type":"application/json"}})).ok?(console.log(` Removed ${w} from watchlist via fallback API`),!0):(console.log(` ${w} was not in watchlist`),!0)}catch(m){return console.warn("Could not remove from watchlist (may not exist):",m.message),!0}},f=async()=>{try{const w=localStorage.getItem("token"),m=(e==null?void 0:e.id)||(e==null?void 0:e._id),g=await fetch(`http://localhost:5001/api/portfolio/update-values/${m}`,{method:"POST",headers:{Authorization:`Bearer ${w}`,"Content-Type":"application/json"}});if(g.ok){const S=await g.json();return s(S),S}}catch(w){console.error("Error updating portfolio values:",w)}},x=()=>{const w=Le.getPortfolioSummary(),m=Le.getDailyRewardsInfo();s(g=>({...g,totalValue:w.totalValue,availableCash:w.availableCash,totalInvested:w.totalInvested,totalGainLoss:w.totalPnL,totalGainLossPercentage:w.totalPnLPercentage,dailyRewards:m,holdings:w.positions.map(S=>({symbol:S.symbol,quantity:S.quantity,avgPrice:S.avgPrice,currentPrice:S.currentValue/S.quantity||S.avgPrice,totalValue:S.currentValue||S.totalInvested,gainLoss:(S.currentValue||S.totalInvested)-S.totalInvested,gainLossPercentage:S.totalInvested>0?((S.currentValue||S.totalInvested)-S.totalInvested)/S.totalInvested*100:0}))})),console.log(" Portfolio refreshed:",{totalValue:w.totalValue,availableCash:w.availableCash,totalRewards:m.totalRewards})},y={portfolioData:n,loading:r,buyStock:c,sellStock:u,addToWatchlist:h,removeFromWatchlist:d,updatePortfolioValues:f,initializePortfolio:o,refreshPortfolio:x,handleDailyReward:w=>{console.log(" Daily reward received:",w),setTimeout(()=>{x()},100)}};return a.jsx(aN.Provider,{value:y,children:t})},cA=()=>{const[t,e]=b.useState(!1),[n,s]=b.useState(null),[r,i]=b.useState(null),{refreshPortfolio:o}=Vn();b.useEffect(()=>{(()=>{const h=Le.checkDailyLogin(),d=Le.getDailyRewardsInfo();i(d),h.awarded&&(s(h),e(!0),setTimeout(()=>{Le.syncPortfolioData(),o()},500))})()},[o]);const l=()=>{e(!1),Le.syncPortfolioData(),o()},c=u=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(u);return a.jsxs(a.Fragment,{children:[a.jsx(Mt,{children:t&&n&&a.jsx($.div,{className:"daily-reward-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:l,children:a.jsxs($.div,{className:"daily-reward-modal",initial:{scale:.8,opacity:0,y:50},animate:{scale:1,opacity:1,y:0},exit:{scale:.8,opacity:0,y:50},onClick:u=>u.stopPropagation(),children:[a.jsx("button",{className:"close-btn",onClick:l,children:a.jsx(ds,{})}),a.jsxs("div",{className:"reward-content",children:[a.jsx($.div,{className:"reward-icon",animate:{rotate:[0,-10,10,-10,0],scale:[1,1.1,1]},transition:{duration:.6,repeat:1/0,repeatDelay:2},children:a.jsx(Xf,{})}),a.jsx("h2",{children:"Daily Login Bonus!"}),a.jsx("div",{className:"reward-amount",children:c(n.amount)}),a.jsxs("div",{className:"reward-details",children:[a.jsxs("div",{className:"detail-item",children:[a.jsx(qb,{}),a.jsxs("span",{children:["Login Streak: ",n.streak," days"]})]}),a.jsxs("div",{className:"detail-item",children:[a.jsx(Xe,{}),a.jsxs("span",{children:["Total Rewards: ",c(n.totalRewards)]})]})]}),a.jsxs("div",{className:"reward-message",children:[a.jsx("p",{children:"Keep logging in daily to maintain your streak!"}),n.streak>=7&&a.jsxs("div",{className:"streak-bonus",children:[a.jsx(Oi,{}),a.jsx("span",{children:"Amazing! 7+ day streak!"})]})]}),a.jsx("button",{className:"claim-btn",onClick:l,children:"Awesome! "})]})]})})}),r&&a.jsxs("div",{className:"daily-rewards-widget",children:[a.jsxs("div",{className:"widget-header",children:[a.jsx(Xf,{}),a.jsx("span",{children:"Daily Rewards"})]}),a.jsxs("div",{className:"widget-content",children:[a.jsxs("div",{className:"streak-info",children:[a.jsx("span",{className:"streak-number",children:r.loginStreak}),a.jsx("span",{className:"streak-label",children:"Day Streak"})]}),a.jsxs("div",{className:"total-rewards",children:[a.jsx("span",{className:"total-label",children:"Total Earned"}),a.jsx("span",{className:"total-amount",children:c(r.totalRewards)})]}),r.nextRewardAvailable&&a.jsx("div",{className:"next-reward",children:a.jsx("span",{children:"Next reward available tomorrow!"})})]})]})]})},lN=b.memo(({user:t,theme:e})=>{var p;const[n,s]=b.useState(!1),{portfolioData:r,loading:i,updatePortfolioValues:o}=Vn(),l=[{title:"Total Value",value:r.totalValue,changePercent:r.totalGainLossPercentage,icon:Nt,color:"primary"},{title:"Available Cash",value:r.availableCash,changePercent:0,icon:Nt,color:"info"},{title:"Total Invested",value:r.totalInvested,changePercent:r.totalGainLossPercentage,icon:Lt,color:r.totalGainLoss>=0?"success":"danger"},{title:"Holdings",value:((p=r.holdings)==null?void 0:p.length)||0,changePercent:0,icon:Ps,color:"info"}],c=[{name:"NIFTY 50",value:19674.25,change:145.3,changePercent:.74},{name:"SENSEX",value:65953.48,change:501.92,changePercent:.77},{name:"NIFTY BANK",value:44821.15,change:287.65,changePercent:.65},{name:"NIFTY IT",value:29847.3,change:-89.45,changePercent:-.3}],u=[{symbol:"RELIANCE",name:"Reliance Industries",price:2465.3,change:2.71,changePercent:.11},{symbol:"TCS",name:"Tata Consultancy Services",price:3185.45,change:-14.85,changePercent:-.47},{symbol:"HDFCBANK",name:"HDFC Bank",price:1650.2,change:51.75,changePercent:3.13},{symbol:"INFY",name:"Infosys",price:1595.8,change:19.7,changePercent:1.25},{symbol:"ICICIBANK",name:"ICICI Bank",price:945.15,change:12.3,changePercent:1.32}],h=[{symbol:"WIPRO",type:"BUY",quantity:50,price:420,time:"2 hours ago",status:"completed"},{symbol:"BAJFINANCE",type:"SELL",quantity:25,price:6800,time:"5 hours ago",status:"completed"},{symbol:"MARUTI",type:"BUY",quantity:10,price:9200,time:"1 day ago",status:"completed"},{symbol:"ASIANPAINT",type:"SELL",quantity:15,price:3100,time:"2 days ago",status:"completed"}],d=async()=>{s(!0);try{await o(),await new Promise(y=>setTimeout(y,1e3))}catch(y){console.error("Error refreshing data:",y)}finally{s(!1)}},f=y=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(y),x=async()=>{try{const y=await Le.claimDailyReward();console.log(" Daily reward claim:",y),y.success?(console.log(` Claimed ${y.amount} daily reward!`),se.success(`Daily reward claimed! +${y.amount}`)):y.alreadyClaimed&&(console.log(" Daily reward already claimed today"),se.info("Daily reward already claimed today!")),setTimeout(()=>{refreshPortfolio(),d()},1e3)}catch(y){console.error("Error claiming daily reward:",y),se.error("Failed to claim daily reward")}};return a.jsxs("div",{className:"dashboard-page",children:[a.jsx(cA,{}),a.jsxs("div",{className:"dashboard-container",children:[a.jsx("div",{className:"page-header",children:a.jsxs("div",{className:"page-header-main",children:[a.jsxs("div",{className:"page-header-left",children:[a.jsxs("h1",{className:"page-title",children:[a.jsx(Lt,{className:"title-icon"}),a.jsx("span",{className:"title-text",children:"TradeBro Dashboard"})]}),a.jsx("p",{className:"page-subtitle",children:"Indian Stock Market Overview - NSE & BSE Trading Platform"})]}),a.jsxs("div",{className:"page-actions",children:[a.jsx(oA,{}),a.jsxs("button",{className:"btn-premium btn-secondary",onClick:d,disabled:n,children:[a.jsx(jt,{size:16,className:n?"animate-spin":""}),"Refresh"]}),a.jsx(uA,{onClaim:x,rewardsInfo:Le.getDailyRewardsInfo()})]})]})}),a.jsx($.div,{className:"market-indices",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},children:c.map((y,w)=>{const m=y.change>=0;return a.jsxs("div",{className:"index-card",children:[a.jsxs("div",{className:"index-header",children:[a.jsx("h3",{className:"index-name",children:y.name}),a.jsxs("div",{className:`index-change ${m?"positive":"negative"}`,children:[m?a.jsx(Tc,{size:14}):a.jsx(Ec,{size:14}),Math.abs(y.changePercent),"%"]})]}),a.jsx("div",{className:"index-value",children:a.jsx(Rc,{end:y.value,duration:2,separator:",",decimals:2})}),a.jsxs("div",{className:`index-change-value ${m?"positive":"negative"}`,children:[m?"+":"",y.change.toFixed(2)]})]},y.name)})}),a.jsx($.div,{className:"stats-grid",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:l.map((y,w)=>{const m=y.icon,g=y.changePercent>=0;return a.jsxs($.div,{className:`stat-card stat-${y.color}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:w*.1},children:[a.jsxs("div",{className:"stat-header",children:[a.jsx("div",{className:"stat-icon",children:a.jsx(m,{})}),a.jsxs("div",{className:`stat-change ${g?"positive":"negative"}`,children:[g?a.jsx(Tc,{size:14}):a.jsx(Ec,{size:14}),Math.abs(y.changePercent),"%"]})]}),a.jsxs("div",{className:"stat-content",children:[a.jsx("h3",{className:"stat-value",children:typeof y.value=="number"&&y.value>1e3?a.jsx(Rc,{end:y.value,duration:2,separator:",",prefix:y.title.includes("Value")||y.title.includes("Gain")?"":""}):y.value}),a.jsx("p",{className:"stat-title",children:y.title})]})]},y.title)})}),a.jsxs("div",{className:"dashboard-grid",children:[a.jsxs($.div,{className:"dashboard-card chart-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},children:[a.jsxs("div",{className:"card-header",children:[a.jsxs("h3",{className:"card-title",children:[a.jsx(Ps,{className:"card-icon"}),"Portfolio Performance"]}),a.jsx("div",{className:"card-actions",children:a.jsxs("button",{className:"btn-premium btn-ghost btn-sm",children:[a.jsx(Lt,{size:14}),"View Details"]})})]}),a.jsx("div",{className:"card-content",children:a.jsxs("div",{className:"chart-placeholder",children:[a.jsx($n,{size:48}),a.jsx("p",{children:"Portfolio chart will be displayed here"})]})})]}),a.jsxs($.div,{className:"dashboard-card watchlist-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},children:[a.jsxs("div",{className:"card-header",children:[a.jsxs("h3",{className:"card-title",children:[a.jsx(Ii,{className:"card-icon"}),"Watchlist"]}),a.jsx("div",{className:"card-actions",children:a.jsxs("button",{className:"btn-premium btn-ghost btn-sm",children:[a.jsx(Ai,{size:14}),"Add Stock"]})})]}),a.jsx("div",{className:"card-content",children:a.jsx("div",{className:"watchlist-items",children:u.slice(0,5).map((y,w)=>a.jsxs("div",{className:"watchlist-item",children:[a.jsxs("div",{className:"stock-info",children:[a.jsx("div",{className:"stock-symbol",children:y.symbol}),a.jsx("div",{className:"stock-name",children:y.name})]}),a.jsx(Ys,{price:y.price,change:y.change,changePercent:y.changePercent,size:"small"})]},y.symbol))})})]}),a.jsxs($.div,{className:"dashboard-card trades-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.5},children:[a.jsxs("div",{className:"card-header",children:[a.jsxs("h3",{className:"card-title",children:[a.jsx(Bt,{className:"card-icon"}),"Recent Trades"]}),a.jsx("div",{className:"card-actions",children:a.jsx("button",{className:"btn-premium btn-ghost btn-sm",children:"View All"})})]}),a.jsx("div",{className:"card-content",children:a.jsx("div",{className:"trades-list",children:h.map((y,w)=>a.jsxs("div",{className:"trade-item",children:[a.jsxs("div",{className:"trade-info",children:[a.jsx("div",{className:"trade-symbol",children:y.symbol}),a.jsxs("div",{className:"trade-details",children:[a.jsx("span",{className:`trade-type ${y.type.toLowerCase()}`,children:y.type}),a.jsxs("span",{className:"trade-quantity",children:[y.quantity," shares"]})]})]}),a.jsx("div",{className:"trade-price",children:f(y.price)}),a.jsxs("div",{className:"trade-status",children:[a.jsx(Ws,{size:14,className:"status-icon"}),a.jsx("span",{className:"trade-time",children:y.time})]})]},w))})})]})]})]})]})});lN.displayName="Dashboard";const uA=({onClaim:t,rewardsInfo:e})=>{const[n,s]=b.useState(!1),r=async()=>{if(!(e.alreadyClaimedToday||n)){s(!0);try{await t()}finally{s(!1)}}},i=o=>{if(!o)return"";const{hours:l,minutes:c}=o;return l>0?`${l}h ${c}m`:`${c}m`};return e.alreadyClaimedToday?a.jsxs("button",{className:"btn-premium btn-secondary",disabled:!0,title:`Next reward available in ${i(e.timeUntilNextReward)}`,children:[a.jsx(nn,{size:16}),"Claimed Today"]}):a.jsxs("button",{className:`btn-premium btn-primary ${n?"loading":""}`,onClick:r,disabled:n,children:[a.jsx(Xf,{size:16}),n?"Claiming...":"Claim Daily Reward"]})},cl=(t,e="manual")=>t?{symbol:t.symbol||t.ticker||t.stockSymbol,name:t.name||t.companyName||t.longName||t.symbol,price:t.price||t.currentPrice||t.close||t.regularMarketPrice||0,change:t.change||t.priceChange||t.regularMarketChange||0,changePercent:t.changePercent||t.percentChange||t.regularMarketChangePercent||0,volume:t.volume||t.regularMarketVolume||0,marketCap:t.marketCap||0,sector:t.sector||t.sectorName||"",industry:t.industry||"",source:e,timestamp:new Date().toISOString(),...t}:null,Qm=()=>{const[t,e]=b.useState({isOpen:!1,stockData:null,orderType:"buy",source:null}),n=hs(),s=b.useCallback((p,y="buy",w="manual")=>{console.log(" openOrderModal called",{stockData:p,orderType:y,source:w});const m=cl(p,w);console.log(" Normalized stock data",m),e({isOpen:!0,stockData:m,orderType:y,source:w}),console.log(" Order modal state updated")},[]),r=b.useCallback(()=>{e({isOpen:!1,stockData:null,orderType:"buy",source:null})},[]),i=b.useCallback(async(p,y=1)=>{try{console.log(" Quick buy:",{stockData:p,quantity:y});const w=cl(p);if(!w)throw new Error("Invalid stock data");const m=await Le.buyStock(w.symbol,y,w.price,"market");return m.success?(se.success(m.message),{success:!0,data:m.data}):(se.error(m.error),{success:!1,error:m.error})}catch(w){return console.error("Quick buy error:",w),se.error(w.message||"Failed to buy stock"),{success:!1,error:w.message}}},[]),o=b.useCallback(async(p,y=1)=>{try{console.log(" Quick sell:",{stockData:p,quantity:y});const w=cl(p);if(!w)throw new Error("Invalid stock data");const m=await Le.sellStock(w.symbol,y,w.price,"market");return m.success?(se.success(m.message),{success:!0,data:m.data}):(se.error(m.error),{success:!1,error:m.error})}catch(w){return console.error("Quick sell error:",w),se.error(w.message||"Failed to sell stock"),{success:!1,error:w.message}}},[]),l=b.useCallback((p,y="buy")=>{const w=p.symbol||p.stockSymbol;n(`/trading?symbol=${w}&type=${y}`)},[n]),c=b.useCallback(p=>{const y={symbol:p.symbol,name:p.name||p.symbol,price:p.price||p.close||p.c,change:p.change||p.d||0,changePercent:p.changePercent||p.dp||0,volume:p.volume||p.v||0,high:p.high||p.h||0,low:p.low||p.l||0,open:p.open||p.o||0,source:"chart"};s(y,"buy","chart")},[s]),u=b.useCallback((p,y="buy")=>{const w={symbol:p.symbol||p.stockSymbol,name:p.name||p.stockName||p.symbol,price:p.price||p.currentPrice||0,change:p.change||p.dayChange||0,changePercent:p.changePercent||p.dayChangePercent||0,volume:p.volume||0,high:p.high||p.dayHigh||0,low:p.low||p.dayLow||0,open:p.open||0,source:"watchlist"};s(w,y,"watchlist")},[s]),h=b.useCallback((p,y="sell")=>{const w={symbol:p.symbol||p.stockSymbol,name:p.name||p.stockName||p.symbol,price:p.currentPrice||p.price||0,change:p.dayChange||p.change||0,changePercent:p.dayChangePercent||p.changePercent||0,volume:p.volume||0,high:p.dayHigh||p.high||0,low:p.dayLow||p.low||0,open:p.open||0,averagePrice:p.averagePrice||p.averageBuyPrice||0,quantity:p.quantity||0,totalValue:p.totalValue||p.currentValue||0,totalGains:p.totalGains||p.gainLoss||0,gainsPercent:p.gainsPercent||p.gainLossPercentage||0,source:"portfolio"};s(w,y,"portfolio")},[s]),d=b.useCallback((p,y="buy")=>{const w={symbol:p.symbol||p.ticker,name:p.name||p.companyName||p.symbol,price:p.price||p.lastPrice||0,change:p.change||p.priceChange||0,changePercent:p.changePercent||p.percentChange||0,volume:p.volume||p.totalVolume||0,high:p.high||p.dayHigh||0,low:p.low||p.dayLow||0,open:p.open||p.openPrice||0,source:"market"};s(w,y,"market")},[s]),f=b.useCallback((p,y="buy")=>{if(p.length>0){const w=p[0],m={...cl(w,"bulk"),bulkList:p,source:"bulk"};s(m,y,"bulk")}},[s]),x=b.useCallback(p=>[{label:"Quick Buy",icon:"FiTrendingUp",action:()=>i(p),color:"green"},{label:"Quick Sell",icon:"FiTrendingDown",action:()=>o(p),color:"red",disabled:!hA(p.symbol)},{label:"View Chart",icon:"FiBarChart2",action:()=>n(`/charts?symbol=${p.symbol}`),color:"blue"},{label:"Add to Watchlist",icon:"FiBookmark",action:()=>dA(p),color:"purple"}],[i,o,n]);return{orderModalState:t,openOrderModal:s,closeOrderModal:r,navigateToTrading:l,handleChartStockClick:c,handleWatchlistStockClick:u,handlePortfolioStockClick:h,handleMarketDataClick:d,quickBuy:i,quickSell:o,handleBulkOrder:f,getContextMenuActions:x}},hA=t=>!0,dA=t=>{console.log("Adding to watchlist:",t.symbol)},cN=b.createContext(),fA=({children:t})=>{const[e,n]=b.useState(null),[s,r]=b.useState(!1),[i,o]=b.useState(!0);b.useEffect(()=>{const p=localStorage.getItem("token"),y=localStorage.getItem("user");if(p&&y)try{const w=JSON.parse(y);n(w),r(!0)}catch(w){console.error("Error parsing user data:",w),localStorage.removeItem("token"),localStorage.removeItem("user")}o(!1)},[]);const x={user:e,isAuthenticated:s,loading:i,login:(p,y)=>{localStorage.setItem("token",y),localStorage.setItem("user",JSON.stringify(p)),n(p),r(!0)},logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),n(null),r(!1)},updateProfile:p=>{const y={...e,...p};localStorage.setItem("user",JSON.stringify(y)),n(y)},getToken:()=>localStorage.getItem("token"),hasRole:p=>(e==null?void 0:e.role)===p,isAdmin:()=>(e==null?void 0:e.role)==="admin",userName:(e==null?void 0:e.name)||"Guest",userEmail:(e==null?void 0:e.email)||"",userAvatar:(e==null?void 0:e.avatar)||"/default-avatar.png"};return a.jsx(cN.Provider,{value:x,children:t})},Cu=()=>{const t=b.useContext(cN);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},uN=()=>{const[t,e]=b.useState(!1),[n,s]=b.useState(null),[r,i]=b.useState(!1),o=b.useCallback(d=>{s(d),e(!0)},[]),l=b.useCallback(()=>{r||(e(!1),setTimeout(()=>{s(null),i(!1)},300))},[r]),c=b.useCallback(async d=>{i(!0);try{let f;if(d.action==="BUY"?f=await Le.buyStock(d.symbol,d.quantity,d.price,d.orderType||"market"):d.action==="SELL"&&(f=await Le.sellStock(d.symbol,d.quantity,d.price,d.orderType||"market")),f.success)return se.success(`${d.action} order executed successfully! ${d.quantity} shares of ${d.symbol}`,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0}),setTimeout(()=>{l()},1500),f;throw new Error(f.message||"Order execution failed")}catch(f){return console.error("Order processing error:",f),se.error(f.message||`Failed to execute ${d.action.toLowerCase()} order`,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0}),i(!1),{success:!1,error:f.message}}},[l]),u=b.useCallback((d,f,x,p={})=>{o({action:"BUY",symbol:d,quantity:f,price:x,...p})},[o]),h=b.useCallback((d,f,x,p={})=>{o({action:"SELL",symbol:d,quantity:f,price:x,...p})},[o]);return{isModalOpen:t,orderData:n,loading:r,openConfirmation:o,closeConfirmation:l,processOrder:c,confirmBuy:u,confirmSell:h}},hN=({isOpen:t,onClose:e,onConfirm:n,orderData:s,loading:r=!1})=>{const[i,o]=b.useState(!1),[l,c]=b.useState(!1),u=b.useRef(null),h=zb(0),d=qh(h,[0,200],[0,1]),f=qh(d,[0,.3,.7,1],(s==null?void 0:s.action)==="BUY"?["rgba(229, 231, 235, 0.3)","rgba(251, 191, 36, 0.4)","rgba(16, 185, 129, 0.6)","rgba(16, 185, 129, 0.9)"]:["rgba(229, 231, 235, 0.3)","rgba(251, 191, 36, 0.4)","rgba(239, 68, 68, 0.6)","rgba(239, 68, 68, 0.9)"]),x=qh(d,[0,1],["0%","100%"]),[p,y]=b.useState(0),[w,m]=b.useState(0);b.useEffect(()=>d.onChange(L=>{const P=Math.round(L*100);y(P);const _=[25,50,75].find(I=>P>=I&&w<I);_&&l&&(m(_),navigator.vibrate&&navigator.vibrate(30))}),[d,w,l]),b.useEffect(()=>{t&&(o(!1),c(!1),m(0),y(0),h.set(0))},[t,h]);const g=b.useCallback(()=>{c(!0),m(0),navigator.vibrate&&navigator.vibrate(50)},[]),S=b.useCallback(()=>{const E=h.get();c(!1),E>=180?(o(!0),navigator.vibrate&&navigator.vibrate([100,50,100]),setTimeout(()=>{n(s)},300)):h.set(0)},[h,n,s]),N=E=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2,maximumFractionDigits:2}).format(E),C=s?s.quantity*s.price:0;return s?(console.log(" DragConfirmModal: Rendering with orderData:",s),a.jsx(Mt,{children:t&&a.jsxs(a.Fragment,{children:[a.jsx($.div,{className:"drag-confirm-backdrop",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e}),a.jsxs($.div,{className:`drag-confirm-modal ${i?"confirmed":""}`,initial:{opacity:0,scale:.9,y:-20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:-20},transition:{type:"spring",damping:25,stiffness:300},children:[a.jsxs("div",{className:"modal-header",children:[a.jsxs("div",{className:"header-content",children:[a.jsx("div",{className:`action-icon ${s.action.toLowerCase()}`,children:s.action==="BUY"?a.jsx(Xe,{}):a.jsx(_t,{})}),a.jsxs("div",{className:"header-text",children:[a.jsxs("h2",{className:"modal-title",children:["Confirm ",s.action," Order"]}),a.jsx("p",{className:"modal-subtitle",children:"Review your order details carefully"})]})]}),a.jsx("button",{className:"close-button",onClick:e,children:a.jsx(ds,{})})]}),a.jsxs("div",{className:"order-details",children:[a.jsxs("div",{className:"stock-info",children:[a.jsx("div",{className:"stock-symbol",children:s.symbol}),a.jsx("div",{className:"stock-name",children:s.name||s.symbol})]}),a.jsxs("div",{className:"order-summary",children:[a.jsxs("div",{className:"summary-row",children:[a.jsx("span",{className:"label",children:"Action:"}),a.jsx("span",{className:`value ${s.action.toLowerCase()}`,children:s.action})]}),a.jsxs("div",{className:"summary-row",children:[a.jsx("span",{className:"label",children:"Quantity:"}),a.jsxs("span",{className:"value",children:[s.quantity," shares"]})]}),a.jsxs("div",{className:"summary-row",children:[a.jsx("span",{className:"label",children:"Price per share:"}),a.jsx("span",{className:"value",children:N(s.price)})]}),a.jsxs("div",{className:"summary-row total",children:[a.jsx("span",{className:"label",children:"Total Value:"}),a.jsx("span",{className:"value",children:N(C)})]})]}),a.jsxs("div",{className:"risk-warning",children:[a.jsx(Hs,{className:"warning-icon"}),a.jsxs("div",{className:"warning-text",children:[a.jsx("strong",{children:"Important:"})," This action cannot be undone. Please review all details before confirming."]})]})]}),a.jsxs("div",{className:"drag-confirm-container",children:[a.jsx("div",{className:"drag-instruction",children:i?a.jsx("span",{className:"confirmed-text",children:" Order Confirmed!"}):a.jsxs("span",{children:["Drag to confirm ",s.action.toLowerCase()," order"]})}),a.jsxs("div",{className:"drag-track",ref:u,children:[a.jsx($.div,{className:"drag-track-fill",style:{backgroundColor:f,width:i?"100%":x}}),a.jsx($.div,{className:`drag-handle ${l?"dragging":""} ${i?"confirmed":""}`,drag:"x",dragConstraints:u,dragElastic:.1,dragMomentum:!1,style:{x:h},onDragStart:g,onDragEnd:S,whileDrag:{scale:1.1},animate:{x:i?200:0},transition:{type:"spring",damping:20,stiffness:300},children:i?a.jsx($.div,{initial:{scale:0},animate:{scale:1},className:"check-icon",children:""}):a.jsx(Po,{})}),a.jsx("div",{className:"drag-text",children:i?"Processing...":l&&p>5?`${p}%`:`Confirm ${s.action}`})]})]}),r&&a.jsxs("div",{className:"loading-overlay",children:[a.jsx("div",{className:"loading-spinner"}),a.jsx("p",{children:"Processing your order..."})]})]})]})})):(console.log(" DragConfirmModal: No orderData provided"),null)},Km=({stockData:t,variant:e="default",showBoth:n=!0,defaultAction:s="buy",source:r="general",className:i="",disabled:o=!1,enableDragConfirm:l=!0})=>{const{openOrderModal:c}=Qm(),{isAuthenticated:u}=Cu(),h=hs(),{isModalOpen:d,orderData:f,loading:x,closeConfirmation:p,processOrder:y,confirmBuy:w,confirmSell:m}=uN(),g=N=>{if(console.log(" Action button clicked!",{action:N,stockData:t,isAuthenticated:u,disabled:o,enableDragConfirm:l}),!u){console.log(" User not authenticated, redirecting to login"),h("/login");return}if(o||!t){console.log(" Button disabled or no stock data",{disabled:o,stockData:t});return}if(l){console.log(" Opening drag confirmation modal",{stockData:t,action:N,source:r});const C={symbol:t.symbol,name:t.name||t.symbol,price:t.price||t.currentPrice||0,quantity:1,orderType:"market",source:r};N==="buy"?w(C.symbol,C.quantity,C.price,{name:C.name,orderType:C.orderType,source:C.source}):m(C.symbol,C.quantity,C.price,{name:C.name,orderType:C.orderType,source:C.source})}else console.log(" Opening traditional order modal",{stockData:t,action:N,source:r}),c(t,N,r)},S=()=>{switch(e){case"icon-only":return a.jsxs("div",{className:`stock-actions icon-only ${i}`,children:[(n||s==="buy")&&a.jsx("button",{className:"stock-action-btn buy icon-only",onClick:()=>g("buy"),disabled:o,title:"Buy Stock","aria-label":`Buy ${(t==null?void 0:t.symbol)||"stock"}`,children:a.jsx(Xe,{})}),(n||s==="sell")&&a.jsx("button",{className:"stock-action-btn sell icon-only",onClick:()=>g("sell"),disabled:o,title:"Sell Stock","aria-label":`Sell ${(t==null?void 0:t.symbol)||"stock"}`,children:a.jsx(_t,{})})]});case"minimal":return a.jsxs("div",{className:`stock-actions minimal ${i}`,children:[(n||s==="buy")&&a.jsxs("button",{className:"stock-action-btn buy minimal",onClick:()=>g("buy"),disabled:o,children:[a.jsx(Xe,{}),a.jsx("span",{children:"Buy"})]}),(n||s==="sell")&&a.jsxs("button",{className:"stock-action-btn sell minimal",onClick:()=>g("sell"),disabled:o,children:[a.jsx(_t,{}),a.jsx("span",{children:"Sell"})]})]});case"compact":return a.jsx("div",{className:`stock-actions compact ${i}`,children:n?a.jsxs(a.Fragment,{children:[a.jsxs("button",{className:"stock-action-btn buy compact",onClick:()=>g("buy"),disabled:o,children:[a.jsx(Bt,{}),a.jsx("span",{children:"Buy"})]}),a.jsxs("button",{className:"stock-action-btn sell compact",onClick:()=>g("sell"),disabled:o,children:[a.jsx(Nt,{}),a.jsx("span",{children:"Sell"})]})]}):a.jsxs("button",{className:`stock-action-btn ${s} compact`,onClick:()=>g(s),disabled:o,children:[s==="buy"?a.jsx(Bt,{}):a.jsx(Nt,{}),a.jsx("span",{children:s==="buy"?"Buy":"Sell"})]})});default:return a.jsxs("div",{className:`stock-actions default ${i}`,children:[(n||s==="buy")&&a.jsxs("button",{className:"stock-action-btn buy default",onClick:()=>g("buy"),disabled:o,children:[a.jsx(Bt,{}),a.jsx("span",{children:"Buy Now"})]}),(n||s==="sell")&&a.jsxs("button",{className:"stock-action-btn sell default",onClick:()=>g("sell"),disabled:o,children:[a.jsx(Nt,{}),a.jsx("span",{children:"Sell Now"})]})]})}};return t?a.jsxs(a.Fragment,{children:[S(),l&&a.jsx(hN,{isOpen:d,onClose:p,onConfirm:y,orderData:f,loading:x})]}):null},pA=({stockData:t})=>a.jsx(Km,{stockData:t,variant:"compact",source:"watchlist",className:"watchlist-actions"}),mA=({stockData:t})=>a.jsx(Km,{stockData:t,variant:"minimal",source:"portfolio",className:"portfolio-actions"}),gA=({stockData:t})=>a.jsx(Km,{stockData:t,variant:"default",source:"charts",className:"chart-actions"}),yA=({user:t,theme:e})=>{var m;const[n,s]=b.useState(!1),[r,i]=b.useState("all"),[o,l]=b.useState("value"),{portfolioData:c,loading:u,updatePortfolioValues:h}=Vn(),d=[{title:"Total Value",value:c.totalValue,changePercent:c.totalGainLossPercentage,changeAmount:c.totalGainLoss,icon:Nt,color:"primary"},{title:"Available Cash",value:c.availableCash,changePercent:0,changeAmount:0,icon:Nt,color:"info"},{title:"Total Invested",value:c.totalInvested,changePercent:c.totalGainLossPercentage,changeAmount:c.totalGainLoss,icon:Lt,color:c.totalGainLoss>=0?"success":"danger"},{title:"Holdings",value:((m=c.holdings)==null?void 0:m.length)||0,changePercent:0,changeAmount:0,icon:Ps,color:"info"}],f=c.holdings||[],x=[{sector:"Banking",percentage:42.5,value:1209750,color:"#10B981"},{sector:"IT",percentage:28.3,value:805420,color:"#3B82F6"},{sector:"Energy",percentage:18.7,value:532650,color:"#F59E0B"},{sector:"Healthcare",percentage:6.2,value:176595,color:"#EF4444"},{sector:"Others",percentage:4.3,value:122435,color:"#8B5CF6"}],p=async()=>{s(!0),await new Promise(g=>setTimeout(g,1500)),s(!1)},y=g=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(g),w=g=>new Intl.NumberFormat("en-IN").format(g);return a.jsx("div",{className:"portfolio-page",children:a.jsxs("div",{className:"portfolio-container",children:[a.jsx($.div,{className:"portfolio-header",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6},children:a.jsxs("div",{className:"header-content",children:[a.jsxs("div",{className:"header-left",children:[a.jsxs("h1",{className:"page-title",children:[a.jsx(Ps,{className:"title-icon"}),"Portfolio"]}),a.jsx("p",{className:"page-subtitle",children:"Track your investments and portfolio performance"})]}),a.jsxs("div",{className:"header-actions",children:[a.jsxs("button",{className:"btn-premium btn-secondary",onClick:p,disabled:n,children:[a.jsx(jt,{size:16,className:n?"animate-spin":""}),"Refresh"]}),a.jsxs("button",{className:"btn-premium btn-ghost",children:[a.jsx(Wm,{size:16}),"Export"]}),a.jsxs("button",{className:"btn-premium btn-primary",children:[a.jsx(Ai,{size:16}),"Add Stock"]})]})]})}),a.jsx($.div,{className:"portfolio-stats",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},children:d.map((g,S)=>{const N=g.icon,C=g.changePercent>=0;return a.jsxs($.div,{className:`stat-card stat-${g.color}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:S*.1},children:[a.jsxs("div",{className:"stat-header",children:[a.jsx("div",{className:"stat-icon",children:a.jsx(N,{})}),a.jsxs("div",{className:`stat-change ${C?"positive":"negative"}`,children:[C?a.jsx(Tc,{size:14}):a.jsx(Ec,{size:14}),Math.abs(g.changePercent),"%"]})]}),a.jsxs("div",{className:"stat-content",children:[a.jsx("h3",{className:"stat-value",children:typeof g.value=="number"&&g.value>1e3?a.jsx(Rc,{end:g.value,duration:2,separator:",",prefix:g.title.includes("Value")||g.title.includes("P&L")?"":""}):g.value}),a.jsx("p",{className:"stat-title",children:g.title}),g.changeAmount!==0&&a.jsxs("p",{className:`stat-change-amount ${C?"positive":"negative"}`,children:[C?"+":"",y(g.changeAmount)]})]})]},g.title)})}),a.jsxs("div",{className:"portfolio-grid",children:[a.jsxs($.div,{className:"portfolio-card holdings-table",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},children:[a.jsxs("div",{className:"card-header",children:[a.jsxs("h3",{className:"card-title",children:[a.jsx(Lt,{className:"card-icon"}),"Holdings (",f.length,")"]}),a.jsxs("div",{className:"card-actions",children:[a.jsxs("select",{className:"filter-select",value:r,onChange:g=>i(g.target.value),children:[a.jsx("option",{value:"all",children:"All Sectors"}),a.jsx("option",{value:"banking",children:"Banking"}),a.jsx("option",{value:"it",children:"IT"}),a.jsx("option",{value:"energy",children:"Energy"})]}),a.jsxs("button",{className:"btn-premium btn-primary",children:[a.jsx(Ai,{size:14}),"Add Stock"]})]})]}),a.jsx("div",{className:"card-content",children:a.jsxs("div",{className:"holdings-table",children:[a.jsxs("div",{className:"table-header",children:[a.jsx("div",{className:"col-stock",children:"Stock"}),a.jsx("div",{className:"col-quantity",children:"Quantity"}),a.jsx("div",{className:"col-avg-price",children:"Avg Price"}),a.jsx("div",{className:"col-current-price",children:"Current Price"}),a.jsx("div",{className:"col-value",children:"Value"}),a.jsx("div",{className:"col-gains",children:"Total P&L"}),a.jsx("div",{className:"col-day-change",children:"Day Change"}),a.jsx("div",{className:"col-actions",children:"Actions"})]}),a.jsx("div",{className:"table-body",children:f.map((g,S)=>a.jsxs($.div,{className:"table-row",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:S*.05},children:[a.jsx("div",{className:"col-stock",children:a.jsxs("div",{className:"stock-info",children:[a.jsx("div",{className:"stock-symbol",children:g.symbol}),a.jsx("div",{className:"stock-name",children:g.name}),a.jsx("div",{className:"stock-sector",children:g.sector})]})}),a.jsx("div",{className:"col-quantity",children:w(g.quantity)}),a.jsx("div",{className:"col-avg-price",children:y(g.avgPrice)}),a.jsx("div",{className:"col-current-price",children:a.jsx(Ys,{price:g.currentPrice,change:g.dayChange,changePercent:g.dayChangePercent,size:"small"})}),a.jsx("div",{className:"col-value",children:y(g.value)}),a.jsxs("div",{className:"col-gains",children:[a.jsxs("div",{className:`gain-amount ${g.totalGain>=0?"positive":"negative"}`,children:[g.totalGain>=0?"+":"",y(g.totalGain)]}),a.jsxs("div",{className:`gain-percent ${g.totalGainPercent>=0?"positive":"negative"}`,children:["(",g.totalGainPercent>=0?"+":"",g.totalGainPercent.toFixed(2),"%)"]})]}),a.jsxs("div",{className:"col-day-change",children:[a.jsxs("div",{className:`day-change ${g.dayChange>=0?"positive":"negative"}`,children:[g.dayChange>=0?"+":"",g.dayChange.toFixed(2)]}),a.jsxs("div",{className:`day-change-percent ${g.dayChangePercent>=0?"positive":"negative"}`,children:["(",g.dayChangePercent>=0?"+":"",g.dayChangePercent.toFixed(2),"%)"]})]}),a.jsx("div",{className:"col-actions",children:a.jsx(mA,{stockData:{symbol:g.symbol,name:g.name,price:g.currentPrice,change:g.dayChange,changePercent:g.dayChangePercent,quantity:g.quantity,avgPrice:g.avgPrice,totalValue:g.value}})})]},g.symbol))})]})})]}),a.jsxs($.div,{className:"portfolio-card sector-allocation",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},children:[a.jsx("div",{className:"card-header",children:a.jsxs("h3",{className:"card-title",children:[a.jsx(Ps,{className:"card-icon"}),"Sector Allocation"]})}),a.jsxs("div",{className:"card-content",children:[a.jsx("div",{className:"sector-chart",children:a.jsxs("div",{className:"chart-placeholder",children:[a.jsx(Ps,{size:48}),a.jsx("p",{children:"Sector allocation chart"})]})}),a.jsx("div",{className:"sector-list",children:x.map((g,S)=>a.jsxs("div",{className:"sector-item",children:[a.jsx("div",{className:"sector-color",style:{backgroundColor:g.color}}),a.jsxs("div",{className:"sector-info",children:[a.jsx("div",{className:"sector-name",children:g.sector}),a.jsx("div",{className:"sector-value",children:y(g.value)})]}),a.jsxs("div",{className:"sector-percentage",children:[g.percentage,"%"]})]},g.sector))})]})]})]})]})})};function dN(t,e){return function(){return t.apply(e,arguments)}}const{toString:vA}=Object.prototype,{getPrototypeOf:Xm}=Object,{iterator:ku,toStringTag:fN}=Symbol,Pu=(t=>e=>{const n=vA.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Ln=t=>(t=t.toLowerCase(),e=>Pu(e)===t),Eu=t=>e=>typeof e===t,{isArray:Yi}=Array,ho=Eu("undefined");function xA(t){return t!==null&&!ho(t)&&t.constructor!==null&&!ho(t.constructor)&&Ut(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const pN=Ln("ArrayBuffer");function wA(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&pN(t.buffer),e}const SA=Eu("string"),Ut=Eu("function"),mN=Eu("number"),Tu=t=>t!==null&&typeof t=="object",bA=t=>t===!0||t===!1,Bl=t=>{if(Pu(t)!=="object")return!1;const e=Xm(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(fN in t)&&!(ku in t)},NA=Ln("Date"),jA=Ln("File"),CA=Ln("Blob"),kA=Ln("FileList"),PA=t=>Tu(t)&&Ut(t.pipe),EA=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Ut(t.append)&&((e=Pu(t))==="formdata"||e==="object"&&Ut(t.toString)&&t.toString()==="[object FormData]"))},TA=Ln("URLSearchParams"),[LA,_A,RA,MA]=["ReadableStream","Request","Response","Headers"].map(Ln),IA=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Eo(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let s,r;if(typeof t!="object"&&(t=[t]),Yi(t))for(s=0,r=t.length;s<r;s++)e.call(null,t[s],s,t);else{const i=n?Object.getOwnPropertyNames(t):Object.keys(t),o=i.length;let l;for(s=0;s<o;s++)l=i[s],e.call(null,t[l],l,t)}}function gN(t,e){e=e.toLowerCase();const n=Object.keys(t);let s=n.length,r;for(;s-- >0;)if(r=n[s],e===r.toLowerCase())return r;return null}const xr=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,yN=t=>!ho(t)&&t!==xr;function np(){const{caseless:t}=yN(this)&&this||{},e={},n=(s,r)=>{const i=t&&gN(e,r)||r;Bl(e[i])&&Bl(s)?e[i]=np(e[i],s):Bl(s)?e[i]=np({},s):Yi(s)?e[i]=s.slice():e[i]=s};for(let s=0,r=arguments.length;s<r;s++)arguments[s]&&Eo(arguments[s],n);return e}const AA=(t,e,n,{allOwnKeys:s}={})=>(Eo(e,(r,i)=>{n&&Ut(r)?t[i]=dN(r,n):t[i]=r},{allOwnKeys:s}),t),OA=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),DA=(t,e,n,s)=>{t.prototype=Object.create(e.prototype,s),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},FA=(t,e,n,s)=>{let r,i,o;const l={};if(e=e||{},t==null)return e;do{for(r=Object.getOwnPropertyNames(t),i=r.length;i-- >0;)o=r[i],(!s||s(o,t,e))&&!l[o]&&(e[o]=t[o],l[o]=!0);t=n!==!1&&Xm(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},BA=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const s=t.indexOf(e,n);return s!==-1&&s===n},zA=t=>{if(!t)return null;if(Yi(t))return t;let e=t.length;if(!mN(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},$A=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Xm(Uint8Array)),VA=(t,e)=>{const s=(t&&t[ku]).call(t);let r;for(;(r=s.next())&&!r.done;){const i=r.value;e.call(t,i[0],i[1])}},UA=(t,e)=>{let n;const s=[];for(;(n=t.exec(e))!==null;)s.push(n);return s},WA=Ln("HTMLFormElement"),HA=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,s,r){return s.toUpperCase()+r}),y0=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),YA=Ln("RegExp"),vN=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),s={};Eo(n,(r,i)=>{let o;(o=e(r,i,t))!==!1&&(s[i]=o||r)}),Object.defineProperties(t,s)},qA=t=>{vN(t,(e,n)=>{if(Ut(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const s=t[n];if(Ut(s)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},GA=(t,e)=>{const n={},s=r=>{r.forEach(i=>{n[i]=!0})};return Yi(t)?s(t):s(String(t).split(e)),n},QA=()=>{},KA=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function XA(t){return!!(t&&Ut(t.append)&&t[fN]==="FormData"&&t[ku])}const JA=t=>{const e=new Array(10),n=(s,r)=>{if(Tu(s)){if(e.indexOf(s)>=0)return;if(!("toJSON"in s)){e[r]=s;const i=Yi(s)?[]:{};return Eo(s,(o,l)=>{const c=n(o,r+1);!ho(c)&&(i[l]=c)}),e[r]=void 0,i}}return s};return n(t,0)},ZA=Ln("AsyncFunction"),eO=t=>t&&(Tu(t)||Ut(t))&&Ut(t.then)&&Ut(t.catch),xN=((t,e)=>t?setImmediate:e?((n,s)=>(xr.addEventListener("message",({source:r,data:i})=>{r===xr&&i===n&&s.length&&s.shift()()},!1),r=>{s.push(r),xr.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Ut(xr.postMessage)),tO=typeof queueMicrotask<"u"?queueMicrotask.bind(xr):typeof process<"u"&&process.nextTick||xN,nO=t=>t!=null&&Ut(t[ku]),D={isArray:Yi,isArrayBuffer:pN,isBuffer:xA,isFormData:EA,isArrayBufferView:wA,isString:SA,isNumber:mN,isBoolean:bA,isObject:Tu,isPlainObject:Bl,isReadableStream:LA,isRequest:_A,isResponse:RA,isHeaders:MA,isUndefined:ho,isDate:NA,isFile:jA,isBlob:CA,isRegExp:YA,isFunction:Ut,isStream:PA,isURLSearchParams:TA,isTypedArray:$A,isFileList:kA,forEach:Eo,merge:np,extend:AA,trim:IA,stripBOM:OA,inherits:DA,toFlatObject:FA,kindOf:Pu,kindOfTest:Ln,endsWith:BA,toArray:zA,forEachEntry:VA,matchAll:UA,isHTMLForm:WA,hasOwnProperty:y0,hasOwnProp:y0,reduceDescriptors:vN,freezeMethods:qA,toObjectSet:GA,toCamelCase:HA,noop:QA,toFiniteNumber:KA,findKey:gN,global:xr,isContextDefined:yN,isSpecCompliantForm:XA,toJSONObject:JA,isAsyncFn:ZA,isThenable:eO,setImmediate:xN,asap:tO,isIterable:nO};function fe(t,e,n,s,r){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),s&&(this.request=s),r&&(this.response=r,this.status=r.status?r.status:null)}D.inherits(fe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:D.toJSONObject(this.config),code:this.code,status:this.status}}});const wN=fe.prototype,SN={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{SN[t]={value:t}});Object.defineProperties(fe,SN);Object.defineProperty(wN,"isAxiosError",{value:!0});fe.from=(t,e,n,s,r,i)=>{const o=Object.create(wN);return D.toFlatObject(t,o,function(c){return c!==Error.prototype},l=>l!=="isAxiosError"),fe.call(o,t.message,e,n,s,r),o.cause=t,o.name=t.name,i&&Object.assign(o,i),o};const sO=null;function sp(t){return D.isPlainObject(t)||D.isArray(t)}function bN(t){return D.endsWith(t,"[]")?t.slice(0,-2):t}function v0(t,e,n){return t?t.concat(e).map(function(r,i){return r=bN(r),!n&&i?"["+r+"]":r}).join(n?".":""):e}function rO(t){return D.isArray(t)&&!t.some(sp)}const iO=D.toFlatObject(D,{},null,function(e){return/^is[A-Z]/.test(e)});function Lu(t,e,n){if(!D.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=D.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,w){return!D.isUndefined(w[y])});const s=n.metaTokens,r=n.visitor||h,i=n.dots,o=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&D.isSpecCompliantForm(e);if(!D.isFunction(r))throw new TypeError("visitor must be a function");function u(p){if(p===null)return"";if(D.isDate(p))return p.toISOString();if(D.isBoolean(p))return p.toString();if(!c&&D.isBlob(p))throw new fe("Blob is not supported. Use a Buffer instead.");return D.isArrayBuffer(p)||D.isTypedArray(p)?c&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function h(p,y,w){let m=p;if(p&&!w&&typeof p=="object"){if(D.endsWith(y,"{}"))y=s?y:y.slice(0,-2),p=JSON.stringify(p);else if(D.isArray(p)&&rO(p)||(D.isFileList(p)||D.endsWith(y,"[]"))&&(m=D.toArray(p)))return y=bN(y),m.forEach(function(S,N){!(D.isUndefined(S)||S===null)&&e.append(o===!0?v0([y],N,i):o===null?y:y+"[]",u(S))}),!1}return sp(p)?!0:(e.append(v0(w,y,i),u(p)),!1)}const d=[],f=Object.assign(iO,{defaultVisitor:h,convertValue:u,isVisitable:sp});function x(p,y){if(!D.isUndefined(p)){if(d.indexOf(p)!==-1)throw Error("Circular reference detected in "+y.join("."));d.push(p),D.forEach(p,function(m,g){(!(D.isUndefined(m)||m===null)&&r.call(e,m,D.isString(g)?g.trim():g,y,f))===!0&&x(m,y?y.concat(g):[g])}),d.pop()}}if(!D.isObject(t))throw new TypeError("data must be an object");return x(t),e}function x0(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(s){return e[s]})}function Jm(t,e){this._pairs=[],t&&Lu(t,this,e)}const NN=Jm.prototype;NN.append=function(e,n){this._pairs.push([e,n])};NN.toString=function(e){const n=e?function(s){return e.call(this,s,x0)}:x0;return this._pairs.map(function(r){return n(r[0])+"="+n(r[1])},"").join("&")};function aO(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function jN(t,e,n){if(!e)return t;const s=n&&n.encode||aO;D.isFunction(n)&&(n={serialize:n});const r=n&&n.serialize;let i;if(r?i=r(e,n):i=D.isURLSearchParams(e)?e.toString():new Jm(e,n).toString(s),i){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class w0{constructor(){this.handlers=[]}use(e,n,s){return this.handlers.push({fulfilled:e,rejected:n,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){D.forEach(this.handlers,function(s){s!==null&&e(s)})}}const CN={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},oO=typeof URLSearchParams<"u"?URLSearchParams:Jm,lO=typeof FormData<"u"?FormData:null,cO=typeof Blob<"u"?Blob:null,uO={isBrowser:!0,classes:{URLSearchParams:oO,FormData:lO,Blob:cO},protocols:["http","https","file","blob","url","data"]},Zm=typeof window<"u"&&typeof document<"u",rp=typeof navigator=="object"&&navigator||void 0,hO=Zm&&(!rp||["ReactNative","NativeScript","NS"].indexOf(rp.product)<0),dO=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",fO=Zm&&window.location.href||"http://localhost",pO=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Zm,hasStandardBrowserEnv:hO,hasStandardBrowserWebWorkerEnv:dO,navigator:rp,origin:fO},Symbol.toStringTag,{value:"Module"})),bt={...pO,...uO};function mO(t,e){return Lu(t,new bt.classes.URLSearchParams,Object.assign({visitor:function(n,s,r,i){return bt.isNode&&D.isBuffer(n)?(this.append(s,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},e))}function gO(t){return D.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function yO(t){const e={},n=Object.keys(t);let s;const r=n.length;let i;for(s=0;s<r;s++)i=n[s],e[i]=t[i];return e}function kN(t){function e(n,s,r,i){let o=n[i++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),c=i>=n.length;return o=!o&&D.isArray(r)?r.length:o,c?(D.hasOwnProp(r,o)?r[o]=[r[o],s]:r[o]=s,!l):((!r[o]||!D.isObject(r[o]))&&(r[o]=[]),e(n,s,r[o],i)&&D.isArray(r[o])&&(r[o]=yO(r[o])),!l)}if(D.isFormData(t)&&D.isFunction(t.entries)){const n={};return D.forEachEntry(t,(s,r)=>{e(gO(s),r,n,0)}),n}return null}function vO(t,e,n){if(D.isString(t))try{return(e||JSON.parse)(t),D.trim(t)}catch(s){if(s.name!=="SyntaxError")throw s}return(n||JSON.stringify)(t)}const To={transitional:CN,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const s=n.getContentType()||"",r=s.indexOf("application/json")>-1,i=D.isObject(e);if(i&&D.isHTMLForm(e)&&(e=new FormData(e)),D.isFormData(e))return r?JSON.stringify(kN(e)):e;if(D.isArrayBuffer(e)||D.isBuffer(e)||D.isStream(e)||D.isFile(e)||D.isBlob(e)||D.isReadableStream(e))return e;if(D.isArrayBufferView(e))return e.buffer;if(D.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let l;if(i){if(s.indexOf("application/x-www-form-urlencoded")>-1)return mO(e,this.formSerializer).toString();if((l=D.isFileList(e))||s.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return Lu(l?{"files[]":e}:e,c&&new c,this.formSerializer)}}return i||r?(n.setContentType("application/json",!1),vO(e)):e}],transformResponse:[function(e){const n=this.transitional||To.transitional,s=n&&n.forcedJSONParsing,r=this.responseType==="json";if(D.isResponse(e)||D.isReadableStream(e))return e;if(e&&D.isString(e)&&(s&&!this.responseType||r)){const o=!(n&&n.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(l){if(o)throw l.name==="SyntaxError"?fe.from(l,fe.ERR_BAD_RESPONSE,this,null,this.response):l}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:bt.classes.FormData,Blob:bt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};D.forEach(["delete","get","head","post","put","patch"],t=>{To.headers[t]={}});const xO=D.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),wO=t=>{const e={};let n,s,r;return t&&t.split(`
`).forEach(function(o){r=o.indexOf(":"),n=o.substring(0,r).trim().toLowerCase(),s=o.substring(r+1).trim(),!(!n||e[n]&&xO[n])&&(n==="set-cookie"?e[n]?e[n].push(s):e[n]=[s]:e[n]=e[n]?e[n]+", "+s:s)}),e},S0=Symbol("internals");function la(t){return t&&String(t).trim().toLowerCase()}function zl(t){return t===!1||t==null?t:D.isArray(t)?t.map(zl):String(t)}function SO(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=n.exec(t);)e[s[1]]=s[2];return e}const bO=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Xh(t,e,n,s,r){if(D.isFunction(s))return s.call(this,e,n);if(r&&(e=n),!!D.isString(e)){if(D.isString(s))return e.indexOf(s)!==-1;if(D.isRegExp(s))return s.test(e)}}function NO(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,s)=>n.toUpperCase()+s)}function jO(t,e){const n=D.toCamelCase(" "+e);["get","set","has"].forEach(s=>{Object.defineProperty(t,s+n,{value:function(r,i,o){return this[s].call(this,e,r,i,o)},configurable:!0})})}let Wt=class{constructor(e){e&&this.set(e)}set(e,n,s){const r=this;function i(l,c,u){const h=la(c);if(!h)throw new Error("header name must be a non-empty string");const d=D.findKey(r,h);(!d||r[d]===void 0||u===!0||u===void 0&&r[d]!==!1)&&(r[d||c]=zl(l))}const o=(l,c)=>D.forEach(l,(u,h)=>i(u,h,c));if(D.isPlainObject(e)||e instanceof this.constructor)o(e,n);else if(D.isString(e)&&(e=e.trim())&&!bO(e))o(wO(e),n);else if(D.isObject(e)&&D.isIterable(e)){let l={},c,u;for(const h of e){if(!D.isArray(h))throw TypeError("Object iterator must return a key-value pair");l[u=h[0]]=(c=l[u])?D.isArray(c)?[...c,h[1]]:[c,h[1]]:h[1]}o(l,n)}else e!=null&&i(n,e,s);return this}get(e,n){if(e=la(e),e){const s=D.findKey(this,e);if(s){const r=this[s];if(!n)return r;if(n===!0)return SO(r);if(D.isFunction(n))return n.call(this,r,s);if(D.isRegExp(n))return n.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=la(e),e){const s=D.findKey(this,e);return!!(s&&this[s]!==void 0&&(!n||Xh(this,this[s],s,n)))}return!1}delete(e,n){const s=this;let r=!1;function i(o){if(o=la(o),o){const l=D.findKey(s,o);l&&(!n||Xh(s,s[l],l,n))&&(delete s[l],r=!0)}}return D.isArray(e)?e.forEach(i):i(e),r}clear(e){const n=Object.keys(this);let s=n.length,r=!1;for(;s--;){const i=n[s];(!e||Xh(this,this[i],i,e,!0))&&(delete this[i],r=!0)}return r}normalize(e){const n=this,s={};return D.forEach(this,(r,i)=>{const o=D.findKey(s,i);if(o){n[o]=zl(r),delete n[i];return}const l=e?NO(i):String(i).trim();l!==i&&delete n[i],n[l]=zl(r),s[l]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return D.forEach(this,(s,r)=>{s!=null&&s!==!1&&(n[r]=e&&D.isArray(s)?s.join(", "):s)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const s=new this(e);return n.forEach(r=>s.set(r)),s}static accessor(e){const s=(this[S0]=this[S0]={accessors:{}}).accessors,r=this.prototype;function i(o){const l=la(o);s[l]||(jO(r,o),s[l]=!0)}return D.isArray(e)?e.forEach(i):i(e),this}};Wt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);D.reduceDescriptors(Wt.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(s){this[n]=s}}});D.freezeMethods(Wt);function Jh(t,e){const n=this||To,s=e||n,r=Wt.from(s.headers);let i=s.data;return D.forEach(t,function(l){i=l.call(n,i,r.normalize(),e?e.status:void 0)}),r.normalize(),i}function PN(t){return!!(t&&t.__CANCEL__)}function qi(t,e,n){fe.call(this,t??"canceled",fe.ERR_CANCELED,e,n),this.name="CanceledError"}D.inherits(qi,fe,{__CANCEL__:!0});function EN(t,e,n){const s=n.config.validateStatus;!n.status||!s||s(n.status)?t(n):e(new fe("Request failed with status code "+n.status,[fe.ERR_BAD_REQUEST,fe.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function CO(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function kO(t,e){t=t||10;const n=new Array(t),s=new Array(t);let r=0,i=0,o;return e=e!==void 0?e:1e3,function(c){const u=Date.now(),h=s[i];o||(o=u),n[r]=c,s[r]=u;let d=i,f=0;for(;d!==r;)f+=n[d++],d=d%t;if(r=(r+1)%t,r===i&&(i=(i+1)%t),u-o<e)return;const x=h&&u-h;return x?Math.round(f*1e3/x):void 0}}function PO(t,e){let n=0,s=1e3/e,r,i;const o=(u,h=Date.now())=>{n=h,r=null,i&&(clearTimeout(i),i=null),t.apply(null,u)};return[(...u)=>{const h=Date.now(),d=h-n;d>=s?o(u,h):(r=u,i||(i=setTimeout(()=>{i=null,o(r)},s-d)))},()=>r&&o(r)]}const Mc=(t,e,n=3)=>{let s=0;const r=kO(50,250);return PO(i=>{const o=i.loaded,l=i.lengthComputable?i.total:void 0,c=o-s,u=r(c),h=o<=l;s=o;const d={loaded:o,total:l,progress:l?o/l:void 0,bytes:c,rate:u||void 0,estimated:u&&l&&h?(l-o)/u:void 0,event:i,lengthComputable:l!=null,[e?"download":"upload"]:!0};t(d)},n)},b0=(t,e)=>{const n=t!=null;return[s=>e[0]({lengthComputable:n,total:t,loaded:s}),e[1]]},N0=t=>(...e)=>D.asap(()=>t(...e)),EO=bt.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,bt.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(bt.origin),bt.navigator&&/(msie|trident)/i.test(bt.navigator.userAgent)):()=>!0,TO=bt.hasStandardBrowserEnv?{write(t,e,n,s,r,i){const o=[t+"="+encodeURIComponent(e)];D.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),D.isString(s)&&o.push("path="+s),D.isString(r)&&o.push("domain="+r),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function LO(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function _O(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function TN(t,e,n){let s=!LO(e);return t&&(s||n==!1)?_O(t,e):e}const j0=t=>t instanceof Wt?{...t}:t;function Ir(t,e){e=e||{};const n={};function s(u,h,d,f){return D.isPlainObject(u)&&D.isPlainObject(h)?D.merge.call({caseless:f},u,h):D.isPlainObject(h)?D.merge({},h):D.isArray(h)?h.slice():h}function r(u,h,d,f){if(D.isUndefined(h)){if(!D.isUndefined(u))return s(void 0,u,d,f)}else return s(u,h,d,f)}function i(u,h){if(!D.isUndefined(h))return s(void 0,h)}function o(u,h){if(D.isUndefined(h)){if(!D.isUndefined(u))return s(void 0,u)}else return s(void 0,h)}function l(u,h,d){if(d in e)return s(u,h);if(d in t)return s(void 0,u)}const c={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(u,h,d)=>r(j0(u),j0(h),d,!0)};return D.forEach(Object.keys(Object.assign({},t,e)),function(h){const d=c[h]||r,f=d(t[h],e[h],h);D.isUndefined(f)&&d!==l||(n[h]=f)}),n}const LN=t=>{const e=Ir({},t);let{data:n,withXSRFToken:s,xsrfHeaderName:r,xsrfCookieName:i,headers:o,auth:l}=e;e.headers=o=Wt.from(o),e.url=jN(TN(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let c;if(D.isFormData(n)){if(bt.hasStandardBrowserEnv||bt.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((c=o.getContentType())!==!1){const[u,...h]=c?c.split(";").map(d=>d.trim()).filter(Boolean):[];o.setContentType([u||"multipart/form-data",...h].join("; "))}}if(bt.hasStandardBrowserEnv&&(s&&D.isFunction(s)&&(s=s(e)),s||s!==!1&&EO(e.url))){const u=r&&i&&TO.read(i);u&&o.set(r,u)}return e},RO=typeof XMLHttpRequest<"u",MO=RO&&function(t){return new Promise(function(n,s){const r=LN(t);let i=r.data;const o=Wt.from(r.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:u}=r,h,d,f,x,p;function y(){x&&x(),p&&p(),r.cancelToken&&r.cancelToken.unsubscribe(h),r.signal&&r.signal.removeEventListener("abort",h)}let w=new XMLHttpRequest;w.open(r.method.toUpperCase(),r.url,!0),w.timeout=r.timeout;function m(){if(!w)return;const S=Wt.from("getAllResponseHeaders"in w&&w.getAllResponseHeaders()),C={data:!l||l==="text"||l==="json"?w.responseText:w.response,status:w.status,statusText:w.statusText,headers:S,config:t,request:w};EN(function(L){n(L),y()},function(L){s(L),y()},C),w=null}"onloadend"in w?w.onloadend=m:w.onreadystatechange=function(){!w||w.readyState!==4||w.status===0&&!(w.responseURL&&w.responseURL.indexOf("file:")===0)||setTimeout(m)},w.onabort=function(){w&&(s(new fe("Request aborted",fe.ECONNABORTED,t,w)),w=null)},w.onerror=function(){s(new fe("Network Error",fe.ERR_NETWORK,t,w)),w=null},w.ontimeout=function(){let N=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const C=r.transitional||CN;r.timeoutErrorMessage&&(N=r.timeoutErrorMessage),s(new fe(N,C.clarifyTimeoutError?fe.ETIMEDOUT:fe.ECONNABORTED,t,w)),w=null},i===void 0&&o.setContentType(null),"setRequestHeader"in w&&D.forEach(o.toJSON(),function(N,C){w.setRequestHeader(C,N)}),D.isUndefined(r.withCredentials)||(w.withCredentials=!!r.withCredentials),l&&l!=="json"&&(w.responseType=r.responseType),u&&([f,p]=Mc(u,!0),w.addEventListener("progress",f)),c&&w.upload&&([d,x]=Mc(c),w.upload.addEventListener("progress",d),w.upload.addEventListener("loadend",x)),(r.cancelToken||r.signal)&&(h=S=>{w&&(s(!S||S.type?new qi(null,t,w):S),w.abort(),w=null)},r.cancelToken&&r.cancelToken.subscribe(h),r.signal&&(r.signal.aborted?h():r.signal.addEventListener("abort",h)));const g=CO(r.url);if(g&&bt.protocols.indexOf(g)===-1){s(new fe("Unsupported protocol "+g+":",fe.ERR_BAD_REQUEST,t));return}w.send(i||null)})},IO=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let s=new AbortController,r;const i=function(u){if(!r){r=!0,l();const h=u instanceof Error?u:this.reason;s.abort(h instanceof fe?h:new qi(h instanceof Error?h.message:h))}};let o=e&&setTimeout(()=>{o=null,i(new fe(`timeout ${e} of ms exceeded`,fe.ETIMEDOUT))},e);const l=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(u=>{u.unsubscribe?u.unsubscribe(i):u.removeEventListener("abort",i)}),t=null)};t.forEach(u=>u.addEventListener("abort",i));const{signal:c}=s;return c.unsubscribe=()=>D.asap(l),c}},AO=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let s=0,r;for(;s<n;)r=s+e,yield t.slice(s,r),s=r},OO=async function*(t,e){for await(const n of DO(t))yield*AO(n,e)},DO=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:s}=await e.read();if(n)break;yield s}}finally{await e.cancel()}},C0=(t,e,n,s)=>{const r=OO(t,e);let i=0,o,l=c=>{o||(o=!0,s&&s(c))};return new ReadableStream({async pull(c){try{const{done:u,value:h}=await r.next();if(u){l(),c.close();return}let d=h.byteLength;if(n){let f=i+=d;n(f)}c.enqueue(new Uint8Array(h))}catch(u){throw l(u),u}},cancel(c){return l(c),r.return()}},{highWaterMark:2})},_u=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",_N=_u&&typeof ReadableStream=="function",FO=_u&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),RN=(t,...e)=>{try{return!!t(...e)}catch{return!1}},BO=_N&&RN(()=>{let t=!1;const e=new Request(bt.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),k0=64*1024,ip=_N&&RN(()=>D.isReadableStream(new Response("").body)),Ic={stream:ip&&(t=>t.body)};_u&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Ic[e]&&(Ic[e]=D.isFunction(t[e])?n=>n[e]():(n,s)=>{throw new fe(`Response type '${e}' is not supported`,fe.ERR_NOT_SUPPORT,s)})})})(new Response);const zO=async t=>{if(t==null)return 0;if(D.isBlob(t))return t.size;if(D.isSpecCompliantForm(t))return(await new Request(bt.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(D.isArrayBufferView(t)||D.isArrayBuffer(t))return t.byteLength;if(D.isURLSearchParams(t)&&(t=t+""),D.isString(t))return(await FO(t)).byteLength},$O=async(t,e)=>{const n=D.toFiniteNumber(t.getContentLength());return n??zO(e)},VO=_u&&(async t=>{let{url:e,method:n,data:s,signal:r,cancelToken:i,timeout:o,onDownloadProgress:l,onUploadProgress:c,responseType:u,headers:h,withCredentials:d="same-origin",fetchOptions:f}=LN(t);u=u?(u+"").toLowerCase():"text";let x=IO([r,i&&i.toAbortSignal()],o),p;const y=x&&x.unsubscribe&&(()=>{x.unsubscribe()});let w;try{if(c&&BO&&n!=="get"&&n!=="head"&&(w=await $O(h,s))!==0){let C=new Request(e,{method:"POST",body:s,duplex:"half"}),E;if(D.isFormData(s)&&(E=C.headers.get("content-type"))&&h.setContentType(E),C.body){const[L,P]=b0(w,Mc(N0(c)));s=C0(C.body,k0,L,P)}}D.isString(d)||(d=d?"include":"omit");const m="credentials"in Request.prototype;p=new Request(e,{...f,signal:x,method:n.toUpperCase(),headers:h.normalize().toJSON(),body:s,duplex:"half",credentials:m?d:void 0});let g=await fetch(p,f);const S=ip&&(u==="stream"||u==="response");if(ip&&(l||S&&y)){const C={};["status","statusText","headers"].forEach(R=>{C[R]=g[R]});const E=D.toFiniteNumber(g.headers.get("content-length")),[L,P]=l&&b0(E,Mc(N0(l),!0))||[];g=new Response(C0(g.body,k0,L,()=>{P&&P(),y&&y()}),C)}u=u||"text";let N=await Ic[D.findKey(Ic,u)||"text"](g,t);return!S&&y&&y(),await new Promise((C,E)=>{EN(C,E,{data:N,headers:Wt.from(g.headers),status:g.status,statusText:g.statusText,config:t,request:p})})}catch(m){throw y&&y(),m&&m.name==="TypeError"&&/Load failed|fetch/i.test(m.message)?Object.assign(new fe("Network Error",fe.ERR_NETWORK,t,p),{cause:m.cause||m}):fe.from(m,m&&m.code,t,p)}}),ap={http:sO,xhr:MO,fetch:VO};D.forEach(ap,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const P0=t=>`- ${t}`,UO=t=>D.isFunction(t)||t===null||t===!1,MN={getAdapter:t=>{t=D.isArray(t)?t:[t];const{length:e}=t;let n,s;const r={};for(let i=0;i<e;i++){n=t[i];let o;if(s=n,!UO(n)&&(s=ap[(o=String(n)).toLowerCase()],s===void 0))throw new fe(`Unknown adapter '${o}'`);if(s)break;r[o||"#"+i]=s}if(!s){const i=Object.entries(r).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let o=e?i.length>1?`since :
`+i.map(P0).join(`
`):" "+P0(i[0]):"as no adapter specified";throw new fe("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return s},adapters:ap};function Zh(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new qi(null,t)}function E0(t){return Zh(t),t.headers=Wt.from(t.headers),t.data=Jh.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),MN.getAdapter(t.adapter||To.adapter)(t).then(function(s){return Zh(t),s.data=Jh.call(t,t.transformResponse,s),s.headers=Wt.from(s.headers),s},function(s){return PN(s)||(Zh(t),s&&s.response&&(s.response.data=Jh.call(t,t.transformResponse,s.response),s.response.headers=Wt.from(s.response.headers))),Promise.reject(s)})}const IN="1.10.0",Ru={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Ru[t]=function(s){return typeof s===t||"a"+(e<1?"n ":" ")+t}});const T0={};Ru.transitional=function(e,n,s){function r(i,o){return"[Axios v"+IN+"] Transitional option '"+i+"'"+o+(s?". "+s:"")}return(i,o,l)=>{if(e===!1)throw new fe(r(o," has been removed"+(n?" in "+n:"")),fe.ERR_DEPRECATED);return n&&!T0[o]&&(T0[o]=!0,console.warn(r(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(i,o,l):!0}};Ru.spelling=function(e){return(n,s)=>(console.warn(`${s} is likely a misspelling of ${e}`),!0)};function WO(t,e,n){if(typeof t!="object")throw new fe("options must be an object",fe.ERR_BAD_OPTION_VALUE);const s=Object.keys(t);let r=s.length;for(;r-- >0;){const i=s[r],o=e[i];if(o){const l=t[i],c=l===void 0||o(l,i,t);if(c!==!0)throw new fe("option "+i+" must be "+c,fe.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new fe("Unknown option "+i,fe.ERR_BAD_OPTION)}}const $l={assertOptions:WO,validators:Ru},Mn=$l.validators;let Cr=class{constructor(e){this.defaults=e||{},this.interceptors={request:new w0,response:new w0}}async request(e,n){try{return await this._request(e,n)}catch(s){if(s instanceof Error){let r={};Error.captureStackTrace?Error.captureStackTrace(r):r=new Error;const i=r.stack?r.stack.replace(/^.+\n/,""):"";try{s.stack?i&&!String(s.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+i):s.stack=i}catch{}}throw s}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Ir(this.defaults,n);const{transitional:s,paramsSerializer:r,headers:i}=n;s!==void 0&&$l.assertOptions(s,{silentJSONParsing:Mn.transitional(Mn.boolean),forcedJSONParsing:Mn.transitional(Mn.boolean),clarifyTimeoutError:Mn.transitional(Mn.boolean)},!1),r!=null&&(D.isFunction(r)?n.paramsSerializer={serialize:r}:$l.assertOptions(r,{encode:Mn.function,serialize:Mn.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),$l.assertOptions(n,{baseUrl:Mn.spelling("baseURL"),withXsrfToken:Mn.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=i&&D.merge(i.common,i[n.method]);i&&D.forEach(["delete","get","head","post","put","patch","common"],p=>{delete i[p]}),n.headers=Wt.concat(o,i);const l=[];let c=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(n)===!1||(c=c&&y.synchronous,l.unshift(y.fulfilled,y.rejected))});const u=[];this.interceptors.response.forEach(function(y){u.push(y.fulfilled,y.rejected)});let h,d=0,f;if(!c){const p=[E0.bind(this),void 0];for(p.unshift.apply(p,l),p.push.apply(p,u),f=p.length,h=Promise.resolve(n);d<f;)h=h.then(p[d++],p[d++]);return h}f=l.length;let x=n;for(d=0;d<f;){const p=l[d++],y=l[d++];try{x=p(x)}catch(w){y.call(this,w);break}}try{h=E0.call(this,x)}catch(p){return Promise.reject(p)}for(d=0,f=u.length;d<f;)h=h.then(u[d++],u[d++]);return h}getUri(e){e=Ir(this.defaults,e);const n=TN(e.baseURL,e.url,e.allowAbsoluteUrls);return jN(n,e.params,e.paramsSerializer)}};D.forEach(["delete","get","head","options"],function(e){Cr.prototype[e]=function(n,s){return this.request(Ir(s||{},{method:e,url:n,data:(s||{}).data}))}});D.forEach(["post","put","patch"],function(e){function n(s){return function(i,o,l){return this.request(Ir(l||{},{method:e,headers:s?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}Cr.prototype[e]=n(),Cr.prototype[e+"Form"]=n(!0)});let HO=class AN{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const s=this;this.promise.then(r=>{if(!s._listeners)return;let i=s._listeners.length;for(;i-- >0;)s._listeners[i](r);s._listeners=null}),this.promise.then=r=>{let i;const o=new Promise(l=>{s.subscribe(l),i=l}).then(r);return o.cancel=function(){s.unsubscribe(i)},o},e(function(i,o,l){s.reason||(s.reason=new qi(i,o,l),n(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=s=>{e.abort(s)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new AN(function(r){e=r}),cancel:e}}};function YO(t){return function(n){return t.apply(null,n)}}function qO(t){return D.isObject(t)&&t.isAxiosError===!0}const op={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(op).forEach(([t,e])=>{op[e]=t});function ON(t){const e=new Cr(t),n=dN(Cr.prototype.request,e);return D.extend(n,Cr.prototype,e,{allOwnKeys:!0}),D.extend(n,e,null,{allOwnKeys:!0}),n.create=function(r){return ON(Ir(t,r))},n}const je=ON(To);je.Axios=Cr;je.CanceledError=qi;je.CancelToken=HO;je.isCancel=PN;je.VERSION=IN;je.toFormData=Lu;je.AxiosError=fe;je.Cancel=je.CanceledError;je.all=function(e){return Promise.all(e)};je.spread=YO;je.isAxiosError=qO;je.mergeConfig=Ir;je.AxiosHeaders=Wt;je.formToJSON=t=>kN(D.isHTMLForm(t)?new FormData(t):t);je.getAdapter=MN.getAdapter;je.HttpStatusCode=op;je.default=je;const{Axios:HB,AxiosError:YB,CanceledError:qB,isCancel:GB,CancelToken:QB,VERSION:KB,all:XB,Cancel:JB,isAxiosError:ZB,spread:ez,toFormData:tz,AxiosHeaders:nz,HttpStatusCode:sz,formToJSON:rz,getAdapter:iz,mergeConfig:az}=je,GO=(t,e=100,n=30)=>{const s=[];let r=e;const i=new Date;for(let o=n;o>=0;o--){const l=new Date(i);l.setDate(l.getDate()-o);const c=(Math.random()-.5)*.1;r=Math.max(r*(1+c),1);const u=r,h=u*(1+Math.random()*.05),d=u*(1-Math.random()*.05),f=d+Math.random()*(h-d),x=Math.floor(Math.random()*1e6)+1e5;s.push({time:l.toISOString().split("T")[0],open:parseFloat(u.toFixed(2)),high:parseFloat(h.toFixed(2)),low:parseFloat(d.toFixed(2)),close:parseFloat(f.toFixed(2)),volume:x}),r=f}return s},L0={"RELIANCE.NS":{symbol:"RELIANCE.NS",name:"Reliance Industries Limited",price:2847.5,change:15.25,changesPercentage:.54,dayLow:2835.4,dayHigh:2865.8,yearHigh:3024.9,yearLow:2220.3,marketCap:1925e10,priceAvg50:2798.45,priceAvg200:2654.78,volume:8765432,avgVolume:12e6,exchange:"NSE",open:2840.2,previousClose:2832.25,timestamp:Math.floor(Date.now()/1e3)},"TCS.NS":{symbol:"TCS.NS",name:"Tata Consultancy Services",price:4125.8,change:-12.4,changesPercentage:-.3,dayLow:4118.25,dayHigh:4145.6,yearHigh:4592.25,yearLow:3311,marketCap:151e11,priceAvg50:4089.75,priceAvg200:3987.2,volume:1234567,avgVolume:25e5,exchange:"NSE",open:4138.2,previousClose:4138.2,timestamp:Math.floor(Date.now()/1e3)},"HDFCBANK.NS":{symbol:"HDFCBANK.NS",name:"HDFC Bank Limited",price:1687.9,change:8.75,changesPercentage:.52,dayLow:1678.3,dayHigh:1695.4,yearHigh:1794.5,yearLow:1363.55,marketCap:1285e10,priceAvg50:1654.45,priceAvg200:1598.78,volume:5678901,avgVolume:85e5,exchange:"NSE",open:1682.15,previousClose:1679.15,timestamp:Math.floor(Date.now()/1e3)},"INFY.NS":{symbol:"INFY.NS",name:"Infosys Limited",price:1842.35,change:22.15,changesPercentage:1.22,dayLow:1835.2,dayHigh:1856.8,yearHigh:1953.9,yearLow:1351.65,marketCap:765e10,priceAvg50:1798.75,priceAvg200:1687.2,volume:3456789,avgVolume:52e5,exchange:"NSE",open:1838.4,previousClose:1820.2,timestamp:Math.floor(Date.now()/1e3)},"HINDUNILVR.NS":{symbol:"HINDUNILVR.NS",name:"Hindustan Unilever Limited",price:2456.7,change:-5.3,changesPercentage:-.22,dayLow:2445.6,dayHigh:2468.9,yearHigh:2844.95,yearLow:2172,marketCap:575e10,priceAvg50:2489.75,priceAvg200:2398.2,volume:987654,avgVolume:18e5,exchange:"NSE",open:2462,previousClose:2462,timestamp:Math.floor(Date.now()/1e3)},"ICICIBANK.NS":{symbol:"ICICIBANK.NS",name:"ICICI Bank Limited",price:1287.45,change:18.9,changesPercentage:1.49,dayLow:1278.3,dayHigh:1295.8,yearHigh:1257.65,yearLow:912.35,marketCap:905e10,priceAvg50:1245.75,priceAvg200:1156.2,volume:7890123,avgVolume:125e5,exchange:"NSE",open:1280.55,previousClose:1268.55,timestamp:Math.floor(Date.now()/1e3)},INFY:{symbol:"INFY",name:"Infosys Limited",price:1456.3,change:8.75,changesPercentage:.6,dayLow:1445.2,dayHigh:1468.9,yearHigh:1953.9,yearLow:1330.2,marketCap:61e11,priceAvg50:1423.45,priceAvg200:1567.89,volume:3456789,avgVolume:42e5,exchange:"NSE",open:1447.55,previousClose:1447.55,timestamp:Math.floor(Date.now()/1e3)},HDFCBANK:{symbol:"HDFCBANK",name:"HDFC Bank Limited",price:1567.45,change:12.3,changesPercentage:.79,dayLow:1555.2,dayHigh:1578.9,yearHigh:1725,yearLow:1363.55,marketCap:119e11,priceAvg50:1534.67,priceAvg200:1598.23,volume:2345678,avgVolume:28e5,exchange:"NSE",open:1555.15,previousClose:1555.15,timestamp:Math.floor(Date.now()/1e3)},ICICIBANK:{symbol:"ICICIBANK",name:"ICICI Bank Limited",price:987.65,change:-5.45,changesPercentage:-.55,dayLow:982.3,dayHigh:995.8,yearHigh:1257.8,yearLow:875.35,marketCap:69e11,priceAvg50:1012.34,priceAvg200:1089.67,volume:4567890,avgVolume:52e5,exchange:"NSE",open:993.1,previousClose:993.1,timestamp:Math.floor(Date.now()/1e3)}},_0=[{symbol:"RELIANCE.NS",name:"Reliance Industries Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"TCS.NS",name:"Tata Consultancy Services",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"HDFCBANK.NS",name:"HDFC Bank Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"INFY.NS",name:"Infosys Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"HINDUNILVR.NS",name:"Hindustan Unilever Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"ICICIBANK.NS",name:"ICICI Bank Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"KOTAKBANK.NS",name:"Kotak Mahindra Bank Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"BHARTIARTL.NS",name:"Bharti Airtel Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"ITC.NS",name:"ITC Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"SBIN.NS",name:"State Bank of India",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"LT.NS",name:"Larsen & Toubro Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"ASIANPAINT.NS",name:"Asian Paints Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"MARUTI.NS",name:"Maruti Suzuki India Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"BAJFINANCE.NS",name:"Bajaj Finance Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"WIPRO.NS",name:"Wipro Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"HCLTECH.NS",name:"HCL Technologies Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"TECHM.NS",name:"Tech Mahindra Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"SUNPHARMA.NS",name:"Sun Pharmaceutical Industries Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"TITAN.NS",name:"Titan Company Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"NESTLEIND.NS",name:"Nestle India Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"ULTRACEMCO.NS",name:"UltraTech Cement Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"POWERGRID.NS",name:"Power Grid Corporation of India Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"NTPC.NS",name:"NTPC Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"ONGC.NS",name:"Oil and Natural Gas Corporation Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"COALINDIA.NS",name:"Coal India Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"ZOMATO.NS",name:"Zomato Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"PAYTM.NS",name:"One 97 Communications Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"NYKAA.NS",name:"FSN E-Commerce Ventures Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"POLICYBZR.NS",name:"PB Fintech Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"ZOMATO.NS",name:"Zomato Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"SWIGGY.NS",name:"Bundl Technologies Private Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"INFY.NS",name:"Infosys Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"AAPL",name:"Apple Inc.",exchange:"NASDAQ",currency:"USD",type:"stock"},{symbol:"GOOGL",name:"Alphabet Inc.",exchange:"NASDAQ",currency:"USD",type:"stock"},{symbol:"MSFT",name:"Microsoft Corporation",exchange:"NASDAQ",currency:"USD",type:"stock"},{symbol:"AMZN",name:"Amazon.com Inc.",exchange:"NASDAQ",currency:"USD",type:"stock"},{symbol:"TSLA",name:"Tesla Inc.",exchange:"NASDAQ",currency:"USD",type:"stock"},{symbol:"META",name:"Meta Platforms Inc.",exchange:"NASDAQ",currency:"USD",type:"stock"},{symbol:"NVDA",name:"NVIDIA Corporation",exchange:"NASDAQ",currency:"USD",type:"stock"},{symbol:"ADANIPORTS.NS",name:"Adani Ports and Special Economic Zone Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"AXISBANK.NS",name:"Axis Bank Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"BAJAJ-AUTO.NS",name:"Bajaj Auto Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"BRITANNIA.NS",name:"Britannia Industries Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"CIPLA.NS",name:"Cipla Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"DRREDDY.NS",name:"Dr. Reddys Laboratories Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"EICHERMOT.NS",name:"Eicher Motors Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"GRASIM.NS",name:"Grasim Industries Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"HEROMOTOCO.NS",name:"Hero MotoCorp Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"JSWSTEEL.NS",name:"JSW Steel Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"TSLA",name:"Tesla Inc.",exchange:"NASDAQ",currency:"USD",type:"stock"},{symbol:"META",name:"Meta Platforms Inc.",exchange:"NASDAQ",currency:"USD",type:"stock"},{symbol:"NVDA",name:"NVIDIA Corporation",exchange:"NASDAQ",currency:"USD",type:"stock"},{symbol:"NFLX",name:"Netflix Inc.",exchange:"NASDAQ",currency:"USD",type:"stock"},{symbol:"CRM",name:"Salesforce Inc.",exchange:"NYSE",currency:"USD",type:"stock"},{symbol:"ADBE",name:"Adobe Inc.",exchange:"NASDAQ",currency:"USD",type:"stock"}],QO=[{symbol:"AAPL",name:"Apple Inc.",change:2.15,changesPercentage:1.24,price:175.43},{symbol:"NVDA",name:"NVIDIA Corporation",change:15.42,changesPercentage:1.79,price:875.28},{symbol:"META",name:"Meta Platforms Inc.",change:8.75,changesPercentage:1.84,price:484.2},{symbol:"GOOGL",name:"Alphabet Inc.",change:3.42,changesPercentage:2.46,price:142.56},{symbol:"AMZN",name:"Amazon.com Inc.",change:1.87,changesPercentage:1.25,price:151.94}],KO=[{title:"Reliance Industries Reports Strong Q3 Results",text:"Reliance Industries Limited reported strong quarterly results with increased revenue from petrochemicals and retail segments.",url:"#",image:"https://via.placeholder.com/300x200",site:"Economic Times",publishedDate:new Date().toISOString(),symbol:"RELIANCE"},{title:"TCS Announces New Digital Transformation Services",text:"Tata Consultancy Services launches new suite of digital transformation services for enterprise clients.",url:"#",image:"https://via.placeholder.com/300x200",site:"Business Standard",publishedDate:new Date(Date.now()-36e5).toISOString(),symbol:"TCS"},{title:"Indian IT Sector Shows Resilience Amid Global Challenges",text:"The Indian IT sector continues to show strong performance despite global economic uncertainties.",url:"#",image:"https://via.placeholder.com/300x200",site:"Financial Express",publishedDate:new Date(Date.now()-72e5).toISOString(),symbol:"INFY"}],pi={searchStocks:async(t,e=10)=>{if(await new Promise(r=>setTimeout(r,300)),console.log(` Mock API searching for: "${t}"`),!t||t.trim()===""){console.log(" Empty search query, returning popular stocks");const r=_0.slice(0,e);return{success:!0,results:r,total:r.length}}const n=t.toLowerCase().trim(),s=_0.map(r=>{let i=0;const o=r.symbol.toLowerCase(),l=r.name.toLowerCase();return o===n?i+=100:o.startsWith(n)?i+=50:o.includes(n)&&(i+=25),l===n?i+=75:l.startsWith(n)?i+=40:l.split(" ").some(c=>c.startsWith(n))?i+=30:l.includes(n)&&(i+=20),(r.exchange==="NSE"||r.exchange==="BSE"||r.symbol.endsWith(".NS")||r.symbol.endsWith(".BO"))&&(i+=10),{stock:r,score:i}}).filter(r=>r.score>0).sort((r,i)=>i.score-r.score).map(r=>r.stock).slice(0,e);return console.log(` Mock search found ${s.length} results for "${t}"`),s.length>0&&console.log(" Sample results:",s.slice(0,3)),{success:!0,results:s,total:s.length}},getStockQuote:async t=>{await new Promise(n=>setTimeout(n,200));const e=L0[t.toUpperCase()];return e?{success:!0,data:e}:{success:!1,error:"Stock not found"}},getHistoricalData:async(t,e="1D")=>{var r;await new Promise(i=>setTimeout(i,500));const n=((r=L0[t.toUpperCase()])==null?void 0:r.price)||100;return{success:!0,data:GO(t,n,e==="1D"?1:e==="1M"?30:90),symbol:t,period:e}},getGainers:async(t=10)=>(await new Promise(e=>setTimeout(e,300)),{success:!0,data:QO.slice(0,t)}),getMarketNews:async(t=20)=>(await new Promise(e=>setTimeout(e,400)),{success:!0,data:KO.slice(0,t)})},XO="https://financialmodelingprep.com/api/v3",pn=["sYWvqZLnzWgIlTE2XBWWL0ZxDUK4O1MY","VCMjfaz3k5CjRqbLvtpMALKTks5YVLxx","1yQ5VCVAadsBiy58e5UTTGNFUbqu0sxR",void 0].filter(Boolean),eg=new Set,JO=()=>pn.some(t=>!eg.has(t)),ZO=t=>{eg.add(t),console.warn(` API key marked as failed: ${t.substring(0,8)}...`)};pn.length===0&&console.warn(" No FMP API keys found in environment variables. Using mock data for development.");let wr=0,ya=pn[wr];const ed=()=>{ya&&ZO(ya);for(let t=wr+1;t<pn.length;t++)if(!eg.has(pn[t]))return wr=t,ya=pn[wr],console.log(` Switching to API key ${wr+1}/${pn.length} due to API error`),Et.defaults.params.apikey=ya,!0;return console.log(" All API keys exhausted or failed, falling back to mock data"),!1},R0=()=>pn.length>0&&JO();pn.length>0?console.log(` FMP API initialized with ${pn.length} API key(s)`):console.warn(" No FMP API keys found. Using mock data for development.");const Et=je.create({baseURL:XO,timeout:1e4,params:{apikey:ya}});Et.interceptors.request.use(t=>{var e;return console.log(` FMP API Request: ${(e=t.method)==null?void 0:e.toUpperCase()} ${t.url}`),t},t=>(console.error(" FMP API Request Error:",t),Promise.reject(t)));Et.interceptors.response.use(t=>(console.log(` FMP API Response: ${t.config.url} - ${t.status}`),t),t=>{var e;return console.error(" FMP API Response Error:",(e=t.response)==null?void 0:e.status,t.message),Promise.reject(t)});const pr={searchStocks:async(t,e=10)=>{var n,s,r,i,o,l;if(!R0())return console.log(" No valid API keys, using mock data for search"),await pi.searchStocks(t,e);try{console.log(` FMP API Request: GET /search?query=${t}&limit=${e}`),console.log(` Using API Key ${wr+1}/${pn.length}`);const c=await Et.get("/search",{params:{query:t,limit:e}});if(console.log(` FMP Search response status: ${c.status}`),console.log(" FMP Search raw data:",c.data),console.log(` FMP Search results: ${c.data.length} stocks found`),!Array.isArray(c.data))throw console.error(" FMP API returned non-array data:",c.data),new Error("Invalid response format from FMP API");const u=c.data.map(d=>({symbol:d.symbol,name:d.name,exchange:d.exchangeShortName||"Unknown",currency:d.currency||"USD",type:d.type||"stock"}));u.length>0&&console.log(" Mapped results sample:",u.slice(0,3));const h={success:!0,results:u,total:c.data.length};return console.log(" Final search result object:",h),h}catch(c){const u=((n=c.response)==null?void 0:n.status)===429,h=((s=c.response)==null?void 0:s.status)===403,d=((r=c.response)==null?void 0:r.status)===401,f=u||h||d,x=u?"Rate limit exceeded":h?"API key forbidden/invalid":d?"API key unauthorized":c.message;if(console.warn(` FMP Stock search failed: ${x} (Status: ${(i=c.response)==null?void 0:i.status})`),f&&ed()){console.log(" Retrying with next API key...");try{const y=await Et.get("/search",{params:{query:t,limit:e}});return console.log(` Next API key success: ${y.data.length} results`),{success:!0,results:y.data.map(m=>({symbol:m.symbol,name:m.name,exchange:m.exchangeShortName||"Unknown",currency:m.currency||"USD",type:m.type||"stock"})),total:y.data.length}}catch(y){const w=((o=y.response)==null?void 0:o.status)===429;if(console.warn(` Next API key also failed: ${y.message}`),w&&ed()){console.log(" Trying final API key...");try{const m=await Et.get("/search",{params:{query:t,limit:e}});return console.log(` Final API key success: ${m.data.length} results`),{success:!0,results:m.data.map(S=>({symbol:S.symbol,name:S.name,exchange:S.exchangeShortName||"Unknown",currency:S.currency||"USD",type:S.type||"stock"})),total:m.data.length}}catch(m){console.warn(" All API keys failed:",m.message)}}}}u?console.log(" All API keys rate limited - using mock data"):console.log(" Error details:",((l=c.response)==null?void 0:l.data)||c),console.log(" Falling back to mock data for search");const p=await pi.searchStocks(t,e);return console.log(" Mock search result:",p),p}},getStockQuote:async t=>{var e,n,s,r;if(!R0())return console.log(" No valid API keys, using mock data for quote"),await pi.getStockQuote(t);try{console.log(` FMP API Request: GET /quote/${t}`),console.log(` Using API Key ${wr+1}/${pn.length}`);const o=(await Et.get(`/quote/${t}`)).data[0];if(!o)throw new Error("Stock not found");return console.log(` FMP Quote response for ${t}:`,o),{success:!0,data:{symbol:o.symbol,name:o.name,price:o.price,change:o.change,changesPercentage:o.changesPercentage,dayLow:o.dayLow,dayHigh:o.dayHigh,yearHigh:o.yearHigh,yearLow:o.yearLow,marketCap:o.marketCap,priceAvg50:o.priceAvg50,priceAvg200:o.priceAvg200,volume:o.volume,avgVolume:o.avgVolume,exchange:o.exchange,open:o.open,previousClose:o.previousClose,timestamp:o.timestamp}}}catch(i){const o=((e=i.response)==null?void 0:e.status)===429,l=((n=i.response)==null?void 0:n.status)===403,c=((s=i.response)==null?void 0:s.status)===401,u=o||l||c,h=o?"Rate limit exceeded":l?"API key forbidden/invalid":c?"API key unauthorized":i.message;if(console.warn(` FMP Stock quote failed: ${h} (Status: ${(r=i.response)==null?void 0:r.status})`),u&&ed()){console.log(" Retrying quote with next API key...");try{const f=(await Et.get(`/quote/${t}`)).data[0];if(!f)throw new Error("Stock not found");return console.log(` Retry successful for ${t}`),{success:!0,data:{symbol:f.symbol,name:f.name,price:f.price,change:f.change,changesPercentage:f.changesPercentage,dayLow:f.dayLow,dayHigh:f.dayHigh,yearHigh:f.yearHigh,yearLow:f.yearLow,marketCap:f.marketCap,priceAvg50:f.priceAvg50,priceAvg200:f.priceAvg200,volume:f.volume,avgVolume:f.avgVolume,exchange:f.exchange,open:f.open,previousClose:f.previousClose,timestamp:f.timestamp}}}catch(d){console.warn(` Retry also failed: ${d.message}`)}}return console.warn("FMP Stock quote failed, using mock data:",i.message),await pi.getStockQuote(t)}},getMultipleQuotes:async t=>{try{const e=Array.isArray(t)?t.join(","):t;return{success:!0,data:(await Et.get(`/quote/${e}`)).data.map(s=>({symbol:s.symbol,name:s.name,price:s.price,change:s.change,changesPercentage:s.changesPercentage,volume:s.volume,marketCap:s.marketCap}))}}catch(e){return console.error("FMP Multiple quotes error:",e),{success:!1,data:[],error:e.message}}},getStockProfile:async t=>{try{const n=(await Et.get(`/profile/${t}`)).data[0];if(!n)throw new Error("Company profile not found");return{success:!0,data:{symbol:n.symbol,companyName:n.companyName,currency:n.currency,exchange:n.exchangeShortName,industry:n.industry,sector:n.sector,country:n.country,marketCap:n.mktCap,price:n.price,beta:n.beta,volAvg:n.volAvg,lastDiv:n.lastDiv,range:n.range,changes:n.changes,description:n.description,ceo:n.ceo,website:n.website,image:n.image}}}catch(e){return console.error("FMP Stock profile error:",e),{success:!1,error:e.message}}}},e3={getHistoricalData:async(t,e="1D",n=null,s=null)=>{try{let r="",i={};switch(e){case"1D":r=`/historical-chart/1min/${t}`;break;case"5D":r=`/historical-chart/5min/${t}`;break;case"1M":r=`/historical-chart/1hour/${t}`;break;case"3M":case"6M":case"1Y":r=`/historical-price-full/${t}`,n&&(i.from=n),s&&(i.to=s);break;default:r=`/historical-price-full/${t}`}const o=await Et.get(r,{params:i});let l=[];return r.includes("historical-chart")?l=o.data.map(c=>({time:c.date,open:c.open,high:c.high,low:c.low,close:c.close,volume:c.volume})):l=(o.data.historical||[]).map(u=>({time:u.date,open:u.open,high:u.high,low:u.low,close:u.close,volume:u.volume})),{success:!0,data:l.reverse(),symbol:t,period:e}}catch(r){return console.warn("FMP Historical data failed, using mock data:",r.message),await pi.getHistoricalData(t,e)}},getIntradayData:async(t,e="1min")=>{try{return{success:!0,data:(await Et.get(`/historical-chart/${e}/${t}`)).data.map(r=>({time:r.date,open:r.open,high:r.high,low:r.low,close:r.close,volume:r.volume})).reverse(),symbol:t,interval:e}}catch(n){return console.error("FMP Intraday data error:",n),{success:!1,data:[],error:n.message}}}},DN={getGainers:async(t=10)=>{try{return{success:!0,data:(await Et.get("/gainers",{params:{limit:t}})).data.map(n=>({symbol:n.symbol,name:n.name,change:n.change,changesPercentage:n.changesPercentage,price:n.price}))}}catch(e){return console.warn("FMP Gainers failed, using mock data:",e.message),await pi.getGainers(t)}},getLosers:async(t=10)=>{try{return{success:!0,data:(await Et.get("/losers",{params:{limit:t}})).data.map(n=>({symbol:n.symbol,name:n.name,change:n.change,changesPercentage:n.changesPercentage,price:n.price}))}}catch(e){return console.error("FMP Losers error:",e),{success:!1,data:[],error:e.message}}},getMarketNews:async(t=20)=>{try{return{success:!0,data:(await Et.get("/stock_news",{params:{limit:t}})).data.map(n=>({title:n.title,text:n.text,url:n.url,image:n.image,site:n.site,publishedDate:n.publishedDate,symbol:n.symbol}))}}catch(e){return console.error("FMP Market news error:",e),{success:!1,data:[],error:e.message}}}},ir={stock:pr,chart:e3,market:DN},t3="http://localhost:5001/api",ue=je.create({baseURL:t3,timeout:3e4,headers:{"Content-Type":"application/json"}});ue.interceptors.request.use(t=>{const e=localStorage.getItem("token");return e&&(t.headers.Authorization=`Bearer ${e}`),t},t=>Promise.reject(t));ue.interceptors.response.use(t=>t,t=>{var e,n;return t.code==="ERR_NETWORK"||((e=t.response)==null||e.status),((n=t.response)==null?void 0:n.status)===401&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login"),Promise.reject(t)});const Lo={login:async t=>(await ue.post("/auth/login",t)).data,register:async t=>(await ue.post("/auth/register",t)).data,verifyToken:async()=>(await ue.get("/auth/verify")).data,googleAuth:async t=>(await ue.post("/auth/google",{tokenId:t})).data,logout:async()=>(await ue.post("/auth/logout")).data},_o={getQuote:async t=>(await ue.get(`/proxy/fmp/quote/${t}`)).data,getBatchQuotes:async t=>{const e=Array.isArray(t)?t.join(","):t;return(await ue.get(`/proxy/stock-batch?symbols=${e}`)).data},searchStocks:async(t,e=10)=>{try{return(await ue.get(`/search/stocks?q=${encodeURIComponent(t)}&limit=${e}`)).data}catch(n){return console.warn("Backend search failed, trying FMP API directly:",n),await pr.searchStocks(t,e)}},getStockSuggestions:async(t,e=5)=>{try{return(await ue.get(`/search/suggestions?q=${encodeURIComponent(t)}&limit=${e}`)).data}catch(n){console.warn("Backend suggestions failed, using FMP API:",n);const s=await pr.searchStocks(t,e);return{success:s.success,suggestions:s.results||[]}}},getTrendingStocks:async(t=10)=>{try{return(await ue.get(`/search/trending?limit=${t}`)).data}catch(e){console.warn("Backend trending failed, using FMP gainers:",e);const n=await DN.getGainers(t);return{success:n.success,results:n.data||[]}}},getStockQuote:async t=>await pr.getStockQuote(t),getMultipleQuotes:async t=>await pr.getMultipleQuotes(t),getStockProfile:async t=>await pr.getStockProfile(t),getMarketMovers:async()=>{try{const[t,e]=await Promise.all([ue.get("/proxy/top-gainers"),ue.get("/proxy/top-losers")]);return{gainers:t.data||[],losers:e.data||[],mostActive:[]}}catch(t){return console.error("Error fetching market movers:",t),{gainers:[],losers:[],mostActive:[]}}},getIndianIndices:async()=>(await ue.get("/proxy/market-indices")).data,getNSEGainers:async(t=10)=>(await ue.get(`/stocks/nse-gainers?limit=${t}`)).data,getNSELosers:async(t=10)=>(await ue.get(`/stocks/nse-losers?limit=${t}`)).data,getProfile:async t=>(await ue.get(`/stocks/profile/${t}`)).data,getHistoricalData:async(t,e="1y")=>(await ue.get(`/stocks/historical/${t}?period=${e}`)).data,getIntradayData:async(t,e="5min")=>(await ue.get(`/stocks/intraday/${t}?interval=${e}`)).data,getLivePortfolio:async()=>(await ue.get("/api/portfolio/live")).data,getMarketStatus:async()=>(await ue.get("/api/stocks/market-status")).data,getRealTimePrice:async t=>(await ue.get(`/stocks/realtime/${t}`)).data},FN={getSummary:async()=>(await ue.get("/portfolio/summary")).data,getHoldings:async()=>(await ue.get("/portfolio/holdings")).data,getPerformance:async(t="1m")=>(await ue.get(`/portfolio/performance?period=${t}`)).data,getAnalytics:async()=>(await ue.get("/portfolio/analytics")).data},Hr={placeOrder:async t=>(await ue.post("/orders/place",t)).data,getOrders:async({status:t="all",page:e=1,limit:n=20,stockSymbol:s=null,type:r=null,orderType:i=null,sort:o="-createdAt"}={})=>{let l=`/orders/all?page=${e}&limit=${n}&sort=${o}`;return t!=="all"&&(l+=`&status=${t}`),s&&(l+=`&stockSymbol=${s.toUpperCase()}`),r&&(l+=`&type=${r}`),i&&(l+=`&orderType=${i}`),(await ue.get(l)).data},searchOrders:async(t,e={})=>{const{status:n,type:s,orderType:r,limit:i=20}=e;let o=`/orders/all?stockSymbol=${t.toUpperCase()}&limit=${i}`;return n&&(o+=`&status=${n}`),s&&(o+=`&type=${s}`),r&&(o+=`&orderType=${r}`),(await ue.get(o)).data},cancelOrder:async t=>(await ue.delete(`/orders/${t}`)).data,getOrderHistory:async(t=50)=>(await ue.get(`/orders/history?limit=${t}`)).data,getRecentTrades:async(t=10)=>(await ue.get(`/trades/recent?limit=${t}`)).data},Gi={getWatchlists:async()=>(await ue.get("/watchlist")).data,createWatchlist:async(t,e="")=>(await ue.post("/watchlist",{name:t,description:e})).data,addStock:async(t,e)=>(await ue.post(`/watchlist/${t}/add`,{symbol:e})).data,removeStock:async(t,e)=>(await ue.delete(`/watchlist/${t}/remove/${e}`)).data,deleteWatchlist:async t=>(await ue.delete(`/watchlist/${t}`)).data,searchStocks:async(t,e=10)=>(await ue.get(`/watchlist/search?query=${encodeURIComponent(t)}&limit=${e}`)).data},tg={getMarketNews:async(t=20)=>(await ue.get(`/news/market?limit=${t}`)).data,getNews:async({category:t="all",limit:e=20,q:n=null}={})=>{let s=`/news?limit=${e}`;return n&&(s+=`&q=${encodeURIComponent(n)}`),(await ue.get(s)).data},searchNews:async(t,e=20)=>(await ue.get(`/news/search?q=${encodeURIComponent(t)}&limit=${e}`)).data,getStockNews:async(t,e=10)=>(await ue.get(`/news/stock/${t}?limit=${e}`)).data,getTrendingNews:async()=>(await ue.get("/news/trending")).data},Ac={STOCK_SEARCH:"tradebro_stock_search_history",NEWS_SEARCH:"tradebro_news_search_history",ORDER_SEARCH:"tradebro_order_search_history",GLOBAL_SEARCH:"tradebro_global_search_history"},n3=10,BN=t=>{try{const e=Ac[`${t.toUpperCase()}_SEARCH`]||Ac.GLOBAL_SEARCH,n=localStorage.getItem(e);return n?JSON.parse(n):[]}catch(e){return console.warn("Failed to get search history:",e),[]}},s3=(t,e,n={})=>{if(!(!e||e.trim().length<2))try{const s=Ac[`${t.toUpperCase()}_SEARCH`]||Ac.GLOBAL_SEARCH,r=BN(t),i={query:e.trim(),timestamp:Date.now(),type:t,...n},o=r.filter(c=>c.query.toLowerCase()!==e.toLowerCase()),l=[i,...o].slice(0,n3);localStorage.setItem(s,JSON.stringify(l))}catch(s){console.warn("Failed to add to search history:",s)}},M0=t=>BN(t).slice(0,5),Mu=(t,e={})=>{const[n,s]=b.useState(""),[r,i]=b.useState([]),[o,l]=b.useState([]),[c,u]=b.useState(!1),[h,d]=b.useState(null),[f,x]=b.useState(null),[p,y]=b.useState([]),[w,m]=b.useState(!1),{debounceMs:g=300,minQueryLength:S=2,limit:N=10,enableSuggestions:C=!0,enableHistory:E=!0,filters:L={},onResults:P=null,onError:R=null}=e;b.useEffect(()=>{E&&y(M0(t))},[t,E]);const _=b.useCallback(A=>{f&&clearTimeout(f);const Q=setTimeout(async()=>{A.length>=S?await I(A):(i([]),l([]),d(null))},g);x(Q)},[f,S,g]),I=b.useCallback(async A=>{if(!(!A||A.length<S)){u(!0),d(null);try{let Q=[],V=[];switch(t){case"stocks":console.log(` Searching stocks for: "${A}"`);const J=await pr.searchStocks(A,N);if(console.log(" Stock search response:",J),Q=J.success?J.results:[],console.log(` Found ${Q.length} search results`),Q.length>0){const _e=Q.filter(U=>U.exchange==="NSE"||U.exchange==="BSE"||U.symbol.endsWith(".NS")||U.symbol.endsWith(".BO")),ee=Q.filter(U=>!(U.exchange==="NSE"||U.exchange==="BSE"||U.symbol.endsWith(".NS")||U.symbol.endsWith(".BO")));Q=[..._e,...ee],console.log(` Indian stocks: ${_e.length}, Other stocks: ${ee.length}`)}C&&A.length>=1&&(V=Q.slice(0,5));break;case"news":const te=await tg.searchNews(A,N);Q=te.success?te.data:[];break;case"orders":const ie=await Hr.searchOrders(A,L);Q=ie.success?ie.data:[];break;case"watchlist":const ce=await Gi.searchStocks(A,N);Q=ce.success?ce.data:[];break;default:throw new Error(`Unsupported search type: ${t}`)}console.log(" Setting search results:",Q),console.log(" Setting search suggestions:",V),i(Q),l(V),E&&Q.length>0&&(s3(t,A,{resultsCount:Q.length,hasResults:!0}),y(M0(t))),P&&P(Q,A)}catch(Q){console.error(`Search error for ${t}:`,Q),d(Q.message||"Search failed"),i([]),l([]),R&&R(Q,A)}finally{u(!1)}}},[t,N,S,C,L,P,R]),O=b.useCallback(A=>{s(A),_(A)},[_]),z=b.useCallback(()=>{s(""),i([]),l([]),d(null),f&&clearTimeout(f)},[f]),F=b.useCallback((A=n)=>{I(A)},[I,n]);b.useEffect(()=>()=>{f&&clearTimeout(f)},[f]);const W=b.useCallback(A=>{s(A.query),m(!1),F(A.query)},[F]);return b.useMemo(()=>({query:n,results:r,suggestions:o,loading:c,error:h,recentSearches:p,showHistory:w,setQuery:O,clearSearch:z,triggerSearch:F,setShowHistory:m,handleHistoryClick:W,hasResults:r.length>0,hasSuggestions:o.length>0,hasRecentSearches:p.length>0,isEmpty:!c&&r.length===0&&n.length>=S,searchType:t,minQueryLength:S,enableHistory:E}),[n,r,o,c,h,p,w,O,z,F,W,t,S,E])},ng=(t={})=>Mu("stocks",{enableSuggestions:!0,limit:10,...t}),zN=(t={})=>Mu("news",{enableSuggestions:!1,limit:20,...t}),r3=(t={})=>Mu("orders",{enableSuggestions:!1,limit:20,minQueryLength:1,...t}),i3=(t={})=>Mu("watchlist",{enableSuggestions:!0,limit:10,...t}),Ro=({placeholder:t="Search...",value:e="",onChange:n,onSearch:s,onClear:r,suggestions:i=[],onSuggestionClick:o,recentSearches:l=[],onHistoryClick:c,showHistory:u=!1,loading:h=!1,disabled:d=!1,size:f="md",showSuggestions:x=!0,enableHistory:p=!0,renderSuggestion:y,renderHistoryItem:w,className:m="",autoFocus:g=!1,...S})=>{const[N,C]=b.useState(!1),[E,L]=b.useState(!1),[P,R]=b.useState(-1),_=b.useRef(null),I=b.useRef(null),O=()=>{C(!0),x&&i.length>0&&L(!0)},z=U=>{setTimeout(()=>{var H;(H=I.current)!=null&&H.contains(document.activeElement)||(C(!1),L(!1))},150)},F=U=>{const H=U.target.value;n==null||n(H),x&&H.length>0&&i.length>0?L(!0):L(!1)},W=()=>{var U;n==null||n(""),r==null||r(),L(!1),(U=_.current)==null||U.focus()},A=U=>{var H;o==null||o(U),L(!1),(H=_.current)==null||H.blur()},Q=()=>{const U=[];return _e&&U.push(...l.map(H=>({type:"history",data:H}))),ee&&U.push(...i.map(H=>({type:"suggestion",data:H}))),U},V=U=>{var ae;const H=Q();if(U.key==="ArrowDown")U.preventDefault(),H.length>0&&(R(Ce=>Ce<H.length-1?Ce+1:0),E||L(!0));else if(U.key==="ArrowUp")U.preventDefault(),H.length>0&&(R(Ce=>Ce>0?Ce-1:H.length-1),E||L(!0));else if(U.key==="Enter"){if(U.preventDefault(),P>=0&&H[P]){const Ce=H[P];Ce.type==="history"?c==null||c(Ce.data):A(Ce.data)}else s==null||s(e);L(!1),R(-1)}else U.key==="Escape"?(L(!1),R(-1),(ae=_.current)==null||ae.blur()):R(-1)};b.useEffect(()=>{g&&_.current&&_.current.focus()},[g]),b.useEffect(()=>{x&&N&&i.length>0&&e.length>0?L(!0):L(!1)},[i,x,N,e]);const J=(U,H)=>{const ae=U.symbol||U.title||U;return a.jsx("div",{className:"search-suggestion-item",children:a.jsxs("div",{className:"suggestion-content",children:[a.jsx("span",{className:"suggestion-text",children:ae}),U.name&&a.jsx("span",{className:"suggestion-subtitle",children:U.name})]})},H)},te=(U,H)=>a.jsx("div",{className:"search-history-item",children:a.jsxs("div",{className:"history-content",children:[a.jsx(nn,{className:"history-icon"}),a.jsx("span",{className:"history-text",children:U.query}),a.jsx("span",{className:"history-time",children:new Date(U.timestamp).toLocaleDateString()})]})},H),ie=y||J,ce=w||te,_e=p&&u&&l.length>0&&!e,ee=x&&i.length>0&&e;return a.jsxs("div",{className:`search-input-container ${m} size-${f}`,children:[a.jsxs("div",{className:`search-input-wrapper ${N?"focused":""} ${d?"disabled":""}`,children:[a.jsx(ju,{className:"search-icon"}),a.jsx("input",{ref:_,type:"text",className:"search-input",placeholder:t,value:e,onChange:F,onFocus:O,onBlur:z,onKeyDown:V,disabled:d,...S}),a.jsxs("div",{className:"search-actions",children:[h&&a.jsx(PI,{className:"search-loading animate-spin"}),e&&!h&&a.jsx("button",{type:"button",className:"search-clear",onClick:W,disabled:d,children:a.jsx(ds,{})})]})]}),a.jsx(Mt,{children:E&&(_e||ee)&&a.jsxs($.div,{ref:I,className:"search-suggestions-dropdown",initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.15},children:[_e&&a.jsxs("div",{className:"history-section",children:[a.jsx("div",{className:"section-header",children:a.jsx("span",{className:"section-title",children:"Recent Searches"})}),a.jsx("div",{className:"history-list",children:l.map((U,H)=>{const ae=P===H;return a.jsx($.div,{className:`history-item-wrapper ${ae?"selected":""}`,onClick:()=>c==null?void 0:c(U),whileHover:{backgroundColor:"var(--hover-bg)"},transition:{duration:.1},children:ce(U,H)},`history-${H}`)})})]}),ee&&a.jsxs("div",{className:"suggestions-section",children:[_e&&a.jsx("div",{className:"section-header",children:a.jsx("span",{className:"section-title",children:"Suggestions"})}),a.jsx("div",{className:"suggestions-list",children:i.map((U,H)=>{const ae=_e?l.length+H:H,Ce=P===ae;return a.jsx($.div,{className:`suggestion-item-wrapper ${Ce?"selected":""}`,onClick:()=>A(U),whileHover:{backgroundColor:"var(--hover-bg)"},transition:{duration:.1},children:ie(U,H)},`suggestion-${H}`)})})]})]})})]})},a3=(t,e,n,s,r)=>{const[i,o]=b.useState({}),[l,c]=b.useState(null),[u,h]=b.useState(!1),[d,f]=b.useState(!1),{portfolioData:x}=Vn(),{user:p}=xS(C=>C.auth),y=b.useCallback(async()=>{if(!t)return o({stock:"Please select a stock"}),f(!1),!1;h(!0);const C={};try{(!n||n<=0)&&(C.quantity="Quantity must be greater than 0"),r==="limit"&&(!s||parseFloat(s)<=0)&&(C.price="Please enter a valid limit price");const E=r==="market"?t.price:parseFloat(s)||0,L=n*E,P=S(L),R=e==="buy"?L+P:L-P;return e==="buy"?await w(C,L,R,t):await m(C,n,E,t),r==="limit"&&E>0&&g(C,E,t.price,e),o(C),f(Object.keys(C).length===0),Object.keys(C).length===0}catch(E){return console.error("Validation error:",E),o({general:"Validation failed. Please try again."}),f(!1),!1}finally{h(!1)}},[t,e,n,s,r,x]),w=async(C,E,L,P)=>{L>x.availableCash&&(C.funds=`Insufficient funds. Available: ${x.availableCash.toLocaleString("en-IN")}, Required: ${L.toLocaleString("en-IN")}`),E<500&&(C.minOrder="Minimum order value is 500"),E>1e5&&(C.maxOrder="Maximum order value is 1,00,000"),P.volume&&P.volume<n&&(C.availability="Requested quantity exceeds available volume")},m=async(C,E,L,P)=>{const R=x.holdings.find(W=>W.symbol===P.symbol);if(!R){C.shares="You do not own any shares of this stock";return}if(R.quantity<E){C.shares=`Insufficient shares. Available: ${R.quantity}, Requested: ${E}`;return}const _=E*L,I=R.averagePrice||R.averageBuyPrice,O=E*I,z=_-O,F=O>0?z/O*100:0;c({amount:z,percentage:F,isProfit:z>=0,sellValue:_,buyValue:O,avgBuyPrice:I}),_<100&&(C.minSell="Minimum sell value is 100")},g=(C,E,L,P)=>{const _=Math.abs(E-L)/L*100;_>20&&(C.priceRange=`Limit price is ${_.toFixed(1)}% away from market price. Consider adjusting.`),P==="buy"&&E>L*1.1&&(C.buyPriceHigh="Limit price is significantly higher than market price"),P==="sell"&&E<L*.9&&(C.sellPriceLow="Limit price is significantly lower than market price")},S=C=>{const E=C*3e-4,L=C*.001,P=C*345e-7,R=(E+P)*.18,_=C*1e-6,I=C*3e-5;return{brokerage:E,stt:L,exchangeCharges:P,gst:R,sebiCharges:_,stampDuty:I,total:E+L+P+R+_+I}},N=b.useCallback(()=>{if(!t||!n)return{grossAmount:0,fees:{total:0},netAmount:0,pricePerShare:0};const C=r==="market"?t.price:parseFloat(s)||0,E=n*C,L=S(E),P=e==="buy"?E+L.total:E-L.total;return{grossAmount:E,fees:L,netAmount:P,pricePerShare:C,quantity:n}},[t,n,s,r,e]);return b.useEffect(()=>{const C=setTimeout(()=>{y()},300);return()=>clearTimeout(C)},[y]),b.useEffect(()=>{t&&(o({}),c(null),f(!1))},[t==null?void 0:t.symbol]),{validationErrors:i,profitLossEstimate:l,isValidating:u,isValid:d,validateOrder:y,getOrderSummary:N,calculateTradingFees:S}},$e=(t,e="INR")=>new Intl.NumberFormat("en-IN",{style:"currency",currency:e,minimumFractionDigits:2,maximumFractionDigits:2}).format(t),Sr=(t,e=2)=>`${t>=0?"+":""}${t.toFixed(e)}%`,o3=(t,e=!0)=>{const[n,s]=b.useState(null),[r,i]=b.useState(!1),[o,l]=b.useState(null),[c,u]=b.useState(!1),h=b.useCallback(async S=>{if(!S||!e){s(null),u(!1),l(null);return}i(!0),l(null);try{if(!await d(S)){u(!1),l(`Invalid stock symbol: ${S}`),s(null);return}const C=await x(S);C?(s(C),u(!0),l(null)):(u(!1),l("Failed to fetch stock data"),s(null))}catch(N){console.error("Stock validation error:",N),l(N.message||"Failed to validate stock"),u(!1),s(null)}finally{i(!1)}},[e]),d=async S=>{try{const N=/^[A-Z0-9&-]{1,20}$/,C=/^[0-9]{6}$/;if(!N.test(S)&&!C.test(S))return!1;const E=await fetch(`http://localhost:5001/api/stocks/validate/${S}`,{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}});return E.ok?(await E.json()).isValid:f(S)}catch(N){return console.error("Symbol validation error:",N),f(S)}},f=S=>["RELIANCE","TCS","HDFCBANK","INFY","HINDUNILVR","ICICIBANK","KOTAKBANK","BHARTIARTL","ITC","SBIN","BAJFINANCE","ASIANPAINT","MARUTI","AXISBANK","LT","DMART","SUNPHARMA","TITAN","ULTRACEMCO","NESTLEIND","WIPRO","TECHM","POWERGRID","NTPC","ONGC","TATAMOTORS","BAJAJFINSV","HCLTECH","COALINDIA","DRREDDY","EICHERMOT","ADANIPORTS","JSWSTEEL","TATASTEEL","GRASIM","CIPLA","BRITANNIA","DIVISLAB","APOLLOHOSP","BPCL","HEROMOTOCO","SHREECEM","PIDILITIND","DABUR"].includes(S.toUpperCase()),x=async S=>{try{const N=await fetch(`http://localhost:5001/api/stocks/quote/${S}`,{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}});if(N.ok){const C=await N.json();return{symbol:C.symbol,name:C.name||C.symbol,price:C.price||C.c||0,change:C.change||C.d||0,changePercent:C.changePercent||C.dp||0,volume:C.volume||C.v||0,high:C.high||C.h||0,low:C.low||C.l||0,open:C.open||C.o||0,previousClose:C.previousClose||C.pc||0,marketCap:C.marketCap||0,pe:C.pe||0,lastUpdated:new Date().toISOString()}}return p(S)}catch(N){return console.error("Stock data fetch error:",N),p(S)}},p=S=>{const N=Math.random()*2e3+100,C=(Math.random()-.5)*100,E=C/N*100;return{symbol:S.toUpperCase(),name:`${S.toUpperCase()} Limited`,price:parseFloat(N.toFixed(2)),change:parseFloat(C.toFixed(2)),changePercent:parseFloat(E.toFixed(2)),volume:Math.floor(Math.random()*1e6),high:parseFloat((N+Math.abs(C)).toFixed(2)),low:parseFloat((N-Math.abs(C)).toFixed(2)),open:parseFloat((N-C).toFixed(2)),previousClose:parseFloat((N-C).toFixed(2)),marketCap:Math.floor(Math.random()*1e12),pe:parseFloat((Math.random()*50+5).toFixed(2)),lastUpdated:new Date().toISOString()}},y=b.useCallback(()=>{if(!n||!e)return;const S=setInterval(async()=>{try{const N=await x(n.symbol);N&&s(C=>({...C,...N,lastUpdated:new Date().toISOString()}))}catch(N){console.error("Price update error:",N)}},3e4);return()=>clearInterval(S)},[n,e]);b.useEffect(()=>{const S=setTimeout(()=>{t&&t.length>=2?h(t):(s(null),u(!1),l(null))},500);return()=>clearTimeout(S)},[t,h]),b.useEffect(()=>{if(n&&e)return y()},[n,e,y]);const w=b.useCallback(async()=>{n&&await h(n.symbol)},[n,h]),m=b.useCallback(()=>n?n.change>0?"positive":n.change<0?"negative":"neutral":"neutral",[n]),g=b.useCallback(()=>{const S=new Date,N=S.getDay(),C=S.getHours(),E=S.getMinutes(),L=C*100+E;return N===0||N===6?!1:L>=915&&L<=1530},[]);return{stockData:n,isLoading:r,error:o,isValidSymbol:c,refreshStockData:w,getPriceTrend:m,isMarketOpen:g(),validateAndFetchStock:h}},l3=(t,e=2)=>typeof t!="number"?"0.00":`${t.toLocaleString("en-IN",{minimumFractionDigits:e,maximumFractionDigits:e})}`,c3=({notification:t,onClose:e,onAction:n,theme:s="light"})=>{const r=o=>{const l={size:20};switch(o){case"success":return a.jsx(Ws,{...l,className:"toast-icon success"});case"error":return a.jsx(uo,{...l,className:"toast-icon error"});case"warning":return a.jsx(Mi,{...l,className:"toast-icon warning"});case"alert":return a.jsx(jn,{...l,className:"toast-icon alert"});case"info":default:return a.jsx(Ym,{...l,className:"toast-icon info"})}},i=()=>{t.link&&window.open(t.link,"_blank"),n&&n(t)};return a.jsxs($.div,{className:`notification-toast ${t.type} ${s}`,initial:{opacity:0,x:300,scale:.9},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:300,scale:.9},transition:{type:"spring",stiffness:300,damping:30},children:[a.jsx("div",{className:"toast-icon-container",children:r(t.type)}),a.jsxs("div",{className:"toast-content",children:[a.jsx("div",{className:"toast-title",children:t.title}),t.message&&a.jsx("div",{className:"toast-message",children:t.message}),t.link&&a.jsxs($.button,{className:"toast-action",onClick:i,whileHover:{scale:1.05},whileTap:{scale:.95},children:["View Details",a.jsx(Hm,{size:14})]})]}),a.jsx($.button,{className:"toast-close",onClick:e,whileHover:{scale:1.1},whileTap:{scale:.9},children:a.jsx(ds,{size:16})})]})},td=(t,e="light")=>{const s={toastId:`notification-${t.id}`,position:"top-right",autoClose:t.type==="error"?7e3:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,closeButton:!1},r=({closeToast:i})=>a.jsx(c3,{notification:t,onClose:i,theme:e});switch(t.type){case"success":return se.success(r,s);case"error":return se.error(r,s);case"warning":return se.warning(r,s);case"info":case"alert":default:return se.info(r,s)}},ul={success:(t,e,n,s,r="light")=>{const i={id:Date.now(),type:"success",title:`${t} Order Executed`,message:`${t==="buy"?"Bought":"Sold"} ${n} shares of ${e} at ${s.toLocaleString("en-IN")}`,link:"/orders"};return td(i,r)},pending:(t,e,n,s="light")=>{const r={id:Date.now(),type:"info",title:`${t} Order Pending`,message:`Placing ${t} order for ${n} shares of ${e}`,link:"/orders"};return td(r,s)},error:(t,e,n="light")=>{const s={id:Date.now(),type:"error",title:"Order Failed",message:e||t,link:"/orders"};return td(s,n)}},u3=t=>{se.dismiss(t)},h3=(t,e)=>{let n;return(...s)=>{clearTimeout(n),n=setTimeout(()=>t.apply(null,s),e)}},d3=(t,e)=>{let n;return(...s)=>{n||(t.apply(null,s),n=!0,setTimeout(()=>n=!1,e))}};class f3{constructor(){this.intervals=new Set,this.timeouts=new Set,this.listeners=new Set}addInterval(e){return this.intervals.add(e),e}addTimeout(e){return this.timeouts.add(e),e}addListener(e,n,s){const r={element:e,event:n,handler:s};return this.listeners.add(r),e.addEventListener(n,s),r}cleanup(){this.intervals.forEach(e=>clearInterval(e)),this.intervals.clear(),this.timeouts.forEach(e=>clearTimeout(e)),this.timeouts.clear(),this.listeners.forEach(({element:e,event:n,handler:s})=>{e.removeEventListener(n,s)}),this.listeners.clear()}}const $N=()=>{const t=b.useRef(new f3);return b.useEffect(()=>()=>{t.current.cleanup()},[]),t.current};class VN{constructor(e=100){this.maxSize=e,this.cache=new Map}get(e){if(this.cache.has(e)){const n=this.cache.get(e);return this.cache.delete(e),this.cache.set(e,n),n}return null}set(e,n){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){const s=this.cache.keys().next().value;this.cache.delete(s)}this.cache.set(e,n)}clear(){this.cache.clear()}size(){return this.cache.size}}const p3=(t=[],e=!0)=>{const[n,s]=b.useState({}),[r,i]=b.useState(!1),[o,l]=b.useState(null),[c,u]=b.useState(0),h=b.useRef(null),d=b.useRef(null),f=b.useRef(null),x=b.useRef([]),p=b.useRef(null);b.useRef(new VN(1e3)),$N();const y={wsUrl:"wss://ws.finnhub.io?token=YOUR_FINNHUB_TOKEN",fallbackInterval:e?3e4:6e4,debounceDelay:50,reconnectDelay:5e3,maxReconnectAttempts:5,batchSize:10,maxCacheAge:3e4},w=b.useCallback(()=>{if(x.current.length===0)return;const I=[...x.current];x.current=[];const O=I.reduce((z,F)=>(z[F.symbol]=F,z),{});s(z=>{const F={...z};let W=!1;return Object.values(O).forEach(A=>{const Q=F[A.symbol];(!Q||Q.price!==A.price)&&(F[A.symbol]={...A,previousPrice:(Q==null?void 0:Q.price)||A.price,priceDirection:Q?A.price>Q.price?"up":A.price<Q.price?"down":"same":"same",lastUpdated:new Date().toISOString()},W=!0)}),W&&(l(new Date().toISOString()),u(A=>A+1)),F})},[]),m=b.useCallback(I=>{x.current.push(I),p.current&&clearTimeout(p.current),p.current=setTimeout(()=>{w()},y.debounceDelay)},[w,y.debounceDelay]),g=b.useCallback(()=>{if(!(!e||t.length===0))try{h.current=new WebSocket(y.wsUrl),h.current.onopen=()=>{console.log("WebSocket connected"),i(!0),t.forEach(I=>{h.current.send(JSON.stringify({type:"subscribe",symbol:I.toUpperCase()}))})},h.current.onmessage=I=>{try{const O=JSON.parse(I.data);O.type==="trade"&&O.data.forEach(z=>{m({symbol:z.s,price:z.p,volume:z.v,timestamp:z.t,change:0,changePercent:0})})}catch(O){console.error("WebSocket message parsing error:",O)}},h.current.onclose=()=>{console.log("WebSocket disconnected"),i(!1),e&&(f.current=setTimeout(()=>{g()},y.reconnectDelay))},h.current.onerror=I=>{console.error("WebSocket error:",I),i(!1)}}catch(I){console.error("WebSocket connection error:",I),i(!1)}},[e,t,m,y.wsUrl,y.reconnectDelay]),S=b.useCallback(async()=>{if(!(!e||t.length===0))try{const I=t.map(async z=>{try{const F=await fetch(`http://localhost:5001/api/stocks/quote/${z}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}});if(F.ok){const W=await F.json();return{symbol:W.symbol,price:W.price||W.c,change:W.change||W.d,changePercent:W.changePercent||W.dp,volume:W.volume||W.v,high:W.high||W.h,low:W.low||W.l,timestamp:Date.now()}}}catch(F){console.error(`Error fetching ${z}:`,F)}return null});(await Promise.all(I)).filter(Boolean).forEach(m)}catch(I){console.error("Polling error:",I)}},[e,t,m]),N=b.useCallback(()=>{d.current&&clearInterval(d.current),d.current=setInterval(S,y.fallbackInterval),S()},[S,y.fallbackInterval]);b.useEffect(()=>{if(!e||t.length===0)return;g();const I=setTimeout(()=>{r||N()},2e3);return()=>{clearTimeout(I)}},[e,t,g,N,r]),b.useEffect(()=>()=>{h.current&&h.current.close(),d.current&&clearInterval(d.current),f.current&&clearTimeout(f.current),p.current&&clearTimeout(p.current)},[]);const C=b.useCallback(I=>n[I==null?void 0:I.toUpperCase()]||null,[n]),E=b.useCallback(I=>I.map(O=>({symbol:O,...C(O)})).filter(Boolean),[C]),L=b.useCallback(I=>{h.current&&h.current.readyState===WebSocket.OPEN&&h.current.send(JSON.stringify({type:"subscribe",symbol:I.toUpperCase()}))},[]),P=b.useCallback(I=>{h.current&&h.current.readyState===WebSocket.OPEN&&h.current.send(JSON.stringify({type:"unsubscribe",symbol:I.toUpperCase()}))},[]),R=b.useCallback(()=>{S()},[S]),_=b.useCallback((I,O,z)=>{const F=C(I);if(!F||!O||!z)return{pnl:0,pnlPercent:0,unrealized:!0};const W=O*F.price,A=O*z,Q=W-A,V=Q/A*100;return{pnl:Q,pnlPercent:V,currentValue:W,investedValue:A,unrealized:!0,lastUpdated:F.lastUpdated}},[C]);return{prices:n,isConnected:r,lastUpdate:o,updateCount:c,getPrice:C,getPrices:E,subscribe:L,unsubscribe:P,refresh:R,calculatePnL:_,connectionStatus:r?"connected":"disconnected"}},m3=(t,e)=>{const n=t>=0?"+":"";return{absolute:`${n}${Math.abs(t).toFixed(2)}`,percent:`${n}${e.toFixed(2)}%`,direction:t>0?"up":t<0?"down":"same"}},g3=({stockData:t,orderType:e,quantity:n,orderPrice:s,averagePrice:r=null,className:i=""})=>{const[o,l]=b.useState(!1),[c,u]=b.useState(0),{getPrice:h,isConnected:d,lastUpdate:f}=p3(t?[t.symbol]:[],!0),x=h(t==null?void 0:t.symbol),p=(x==null?void 0:x.price)||(t==null?void 0:t.price)||0,y=b.useMemo(()=>{if(!t||!n||!s)return null;const g=parseInt(n),S=parseFloat(s),N=parseFloat(p);if(e==="buy"){const C=g*S,E=g*N,L=E-C,P=C>0?L/C*100:0,R=N-S,_=S>0?R/S*100:0;return{type:"buy",orderValue:C,currentValue:E,unrealizedPnL:L,unrealizedPnLPercent:P,priceDiff:R,priceDiffPercent:_,breakEvenPrice:S,isProfit:L>=0,recommendation:R>0?"favorable":R<0?"unfavorable":"neutral"}}else{const C=parseFloat(r||S),E=g*S,L=g*C,P=E-L,R=L>0?P/L*100:0,_=g*N,I=_-E;return{type:"sell",investedValue:L,sellValue:E,marketValue:_,realizedPnL:P,realizedPnLPercent:R,opportunityCost:I,opportunityCostPercent:E>0?I/E*100:0,breakEvenPrice:C,isProfit:P>=0,recommendation:I<0?"good_timing":I>0?"consider_waiting":"neutral"}}},[t,e,n,s,p,r]);if(b.useEffect(()=>{l(!!y),y&&u(g=>g+1)},[y]),b.useEffect(()=>{x&&f&&u(g=>g+1)},[x,f]),!o||!y)return null;const w=g=>{switch(g){case"favorable":case"good_timing":return"#10B981";case"unfavorable":case"consider_waiting":return"#EF4444";default:return"#6B7280"}},m=(g,S)=>{if(S==="buy")switch(g){case"favorable":return"Good entry point - price below market";case"unfavorable":return"Consider waiting - price above market";default:return"Price aligned with market"}else switch(g){case"good_timing":return"Good timing - selling above market";case"consider_waiting":return"Consider waiting - market price higher";default:return"Price aligned with market"}};return a.jsxs($.div,{className:`live-pnl-calculator ${i}`,initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,ease:"easeOut"},children:[a.jsxs("div",{className:"pnl-header",children:[a.jsxs("div",{className:"pnl-title",children:[a.jsx($n,{className:"pnl-icon"}),a.jsx("span",{children:"Live P&L Calculator"})]}),a.jsxs("div",{className:"connection-status",children:[a.jsx("div",{className:`status-indicator ${d?"connected":"disconnected"}`}),a.jsx("span",{className:"status-text",children:d?"Live":"Delayed"})]})]}),a.jsxs("div",{className:"current-price-section",children:[a.jsx("div",{className:"price-label",children:"Current Market Price"}),a.jsxs("div",{className:"price-display",children:[a.jsx("span",{className:"price-value",children:$e(p)}),x&&a.jsxs($.div,{className:`price-change ${x.priceDirection}`,initial:{scale:1},animate:{scale:[1,1.1,1]},transition:{duration:.3},children:[x.priceDirection==="up"&&a.jsx(Xe,{size:14}),x.priceDirection==="down"&&a.jsx(_t,{size:14}),a.jsx("span",{children:m3(x.change,x.changePercent).percent})]})]})]}),a.jsx("div",{className:"pnl-calculations",children:y.type==="buy"?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"calc-row",children:[a.jsx("span",{className:"calc-label",children:"Investment Value:"}),a.jsx("span",{className:"calc-value",children:$e(y.orderValue)})]}),a.jsxs("div",{className:"calc-row",children:[a.jsx("span",{className:"calc-label",children:"Current Value:"}),a.jsx("span",{className:"calc-value",children:$e(y.currentValue)})]}),a.jsxs("div",{className:"calc-row highlight",children:[a.jsx("span",{className:"calc-label",children:"Unrealized P&L:"}),a.jsxs("span",{className:`calc-value ${y.isProfit?"profit":"loss"}`,children:[y.isProfit?a.jsx(Xe,{size:14}):a.jsx(_t,{size:14}),$e(Math.abs(y.unrealizedPnL)),a.jsxs("span",{className:"percent",children:["(",Sr(y.unrealizedPnLPercent),")"]})]})]}),a.jsxs("div",{className:"calc-row",children:[a.jsx("span",{className:"calc-label",children:"Price Difference:"}),a.jsxs("span",{className:`calc-value ${y.priceDiff>=0?"profit":"loss"}`,children:[$e(Math.abs(y.priceDiff)),a.jsxs("span",{className:"percent",children:["(",Sr(y.priceDiffPercent),")"]})]})]})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"calc-row",children:[a.jsx("span",{className:"calc-label",children:"Invested Value:"}),a.jsx("span",{className:"calc-value",children:$e(y.investedValue)})]}),a.jsxs("div",{className:"calc-row",children:[a.jsx("span",{className:"calc-label",children:"Sale Value:"}),a.jsx("span",{className:"calc-value",children:$e(y.sellValue)})]}),a.jsxs("div",{className:"calc-row highlight",children:[a.jsx("span",{className:"calc-label",children:"Realized P&L:"}),a.jsxs("span",{className:`calc-value ${y.isProfit?"profit":"loss"}`,children:[y.isProfit?a.jsx(Xe,{size:14}):a.jsx(_t,{size:14}),$e(Math.abs(y.realizedPnL)),a.jsxs("span",{className:"percent",children:["(",Sr(y.realizedPnLPercent),")"]})]})]}),a.jsxs("div",{className:"calc-row",children:[a.jsx("span",{className:"calc-label",children:"Opportunity Cost:"}),a.jsxs("span",{className:`calc-value ${y.opportunityCost<=0?"profit":"loss"}`,children:[$e(Math.abs(y.opportunityCost)),a.jsxs("span",{className:"percent",children:["(",Sr(y.opportunityCostPercent),")"]})]})]})]})}),a.jsx("div",{className:"pnl-recommendation",children:a.jsxs("div",{className:"recommendation-indicator",style:{color:w(y.recommendation)},children:[a.jsx(Nt,{size:16}),a.jsx("span",{children:m(y.recommendation,y.type)})]})}),a.jsxs("div",{className:"break-even-info",children:[a.jsx(Zb,{size:14}),a.jsxs("span",{children:["Break-even: ",$e(y.breakEvenPrice)]})]}),f&&a.jsxs("div",{className:"last-update",children:[a.jsx(nn,{size:12}),a.jsxs("span",{children:["Updated: ",new Date(f).toLocaleTimeString()]})]})]},c)},y3=({stockData:t,orderType:e,portfolioData:n,currentPrice:s,onQuantitySelect:r,selectedQuantity:i,className:o=""})=>{const l=b.useMemo(()=>{if(!t||!s)return[];const u=[];if(e==="buy"){const d=n.availableCash;[1,5,10,25,50,100,200,500].forEach(w=>{const m=w*s;m<=d&&m>=500&&u.push({type:"round",quantity:w,amount:m,label:`${w} shares`,description:"Round number",icon:Jf,priority:2})}),[1e3,2500,5e3,1e4,25e3,5e4].forEach(w=>{if(w<=d){const m=Math.floor(w/s);m>0&&u.push({type:"amount",quantity:m,amount:m*s,label:`${w.toLocaleString("en-IN")}`,description:`${m} shares`,icon:Nt,priority:3})}}),[10,25,50,75,100].forEach(w=>{const m=d*w/100,g=Math.floor(m/s);g>0&&m>=500&&u.push({type:"percentage",quantity:g,amount:g*s,label:`${w}%`,description:`${g} shares of available cash`,icon:Zb,priority:w===25||w===50?1:2})});const y=n.totalValue||0;y>0&&[2,5,10].forEach(m=>{const g=y*m/100,S=Math.floor(g/s);S>0&&g<=d&&u.push({type:"diversification",quantity:S,amount:S*s,label:`${m}% of portfolio`,description:`${S} shares for diversification`,icon:Ps,priority:1})})}else{const d=n.holdings.find(w=>w.symbol===t.symbol);if(!d||d.quantity===0)return[];const f=d.quantity,x=d.averagePrice||d.averageBuyPrice||0;if([25,50,75,100].forEach(w=>{const m=Math.floor(f*w/100);if(m>0){const g=m*s,S=m*x,N=g-S,C=S>0?N/S*100:0;u.push({type:"profit",quantity:m,amount:g,label:`${w}% of holding`,description:`${m} shares  ${N>=0?"Profit":"Loss"}: ${Math.abs(N).toLocaleString("en-IN")}`,icon:N>=0?Xe:Lt,priority:N>=0?1:3,profitLoss:N,profitPercent:C})}}),[1,5,10,25,50,100].forEach(w=>{if(w<=f){const m=w*s,g=w*x,S=m-g;u.push({type:"round",quantity:w,amount:m,label:`${w} shares`,description:`${S>=0?"Profit":"Loss"}: ${Math.abs(S).toLocaleString("en-IN")}`,icon:Jf,priority:2,profitLoss:S})}}),x>0&&s!==x){const w=Math.min(f,Math.floor(f/2));w>0&&u.push({type:"breakeven",quantity:w,amount:w*s,label:"Break-even",description:`${w} shares at current price`,icon:nN,priority:s>=x?1:3})}}return u.filter((d,f,x)=>f===x.findIndex(p=>p.quantity===d.quantity)).sort((d,f)=>d.priority!==f.priority?d.priority-f.priority:d.quantity-f.quantity).slice(0,8)},[t,e,n,s]);if(l.length===0)return null;l.reduce((u,h)=>{const d=h.type;return u[d]||(u[d]=[]),u[d].push(h),u},{});const c=u=>{switch(u.type){case"percentage":case"diversification":return"#8B5CF6";case"amount":return"#10B981";case"profit":return u.profitLoss>=0?"#10B981":"#EF4444";case"round":return"#3B82F6";case"breakeven":return"#F59E0B";default:return"#6B7280"}};return a.jsxs("div",{className:`smart-quantity-suggestions ${o}`,children:[a.jsxs("div",{className:"suggestions-header",children:[a.jsx(Oi,{className:"suggestions-icon"}),a.jsx("span",{className:"suggestions-title",children:"Smart Suggestions"})]}),a.jsx("div",{className:"suggestions-grid",children:l.map((u,h)=>{const d=u.icon,f=i===u.quantity,x=c(u);return a.jsxs($.button,{className:`suggestion-card ${f?"selected":""}`,onClick:()=>r(u.quantity),initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.2,delay:h*.05},whileHover:{scale:1.02},whileTap:{scale:.98},style:{"--suggestion-color":x},children:[a.jsxs("div",{className:"suggestion-header",children:[a.jsx(d,{className:"suggestion-icon",size:16}),a.jsx("span",{className:"suggestion-label",children:u.label})]}),a.jsxs("div",{className:"suggestion-details",children:[a.jsx("div",{className:"suggestion-description",children:u.description}),a.jsxs("div",{className:"suggestion-amount",children:["",u.amount.toLocaleString("en-IN")]})]}),u.profitLoss!==void 0&&a.jsxs("div",{className:`profit-indicator ${u.profitLoss>=0?"profit":"loss"}`,children:[u.profitLoss>=0?"+":"","",Math.abs(u.profitLoss).toLocaleString("en-IN"),u.profitPercent!==void 0&&a.jsxs("span",{className:"profit-percent",children:["(",u.profitPercent>=0?"+":"",u.profitPercent.toFixed(1),"%)"]})]}),u.priority===1&&a.jsxs("div",{className:"priority-badge",children:[a.jsx(Oi,{size:10}),"Recommended"]})]},`${u.type}-${u.quantity}`)})}),a.jsx("div",{className:"suggestions-footer",children:a.jsx("span",{className:"suggestions-note",children:"Suggestions based on your portfolio and market conditions"})})]})},UN=({isOpen:t,onClose:e,stockData:n=null,initialOrderType:s="buy",onOrderPlaced:r,onShowConfirmation:i})=>{var ce,_e;const[o,l]=b.useState(s),[c,u]=b.useState("market"),[h,d]=b.useState(1),[f,x]=b.useState(""),[p,y]=b.useState(!1),[w,m]=b.useState(!1),{portfolioData:g,buyStock:S,sellStock:N}=Vn(),{user:C}=xS(ee=>ee.auth),E=document.documentElement.getAttribute("data-theme")||"light",{validationErrors:L,profitLossEstimate:P,isValidating:R,isValid:_,getOrderSummary:I}=a3(n,o,h,f,c),{stockData:O,isLoading:z,refreshStockData:F,isMarketOpen:W}=o3(n==null?void 0:n.symbol,t),A=O||n;b.useEffect(()=>{var ee;t&&A&&(x(((ee=A.price)==null?void 0:ee.toString())||""),d(1))},[t,A]),b.useEffect(()=>{if(t&&(A!=null&&A.symbol)){const ee=setInterval(()=>{F()},3e4);return()=>clearInterval(ee)}},[t,A==null?void 0:A.symbol,F]);const Q=I(),V=ee=>{const U=Math.max(1,h+ee);d(U)},J=()=>{if(!A)return[];const ee=c==="market"?A.price:parseFloat(f)||A.price;if(o==="buy"){const U=g.availableCash,H=[];return[1e3,2500,5e3,1e4].forEach(xe=>{const me=Math.floor(xe/ee);me>0&&xe<=U&&H.push({value:me,label:`${me} shares`,amount:me*ee,disabled:!1})}),[25,50,75,100].forEach(xe=>{const me=U*xe/100,ke=Math.floor(me/ee);ke>0&&!H.find(oe=>oe.value===ke)&&H.push({value:ke,label:`${xe}% (${ke})`,amount:ke*ee,disabled:!1})}),H.sort((xe,me)=>xe.value-me.value).slice(0,6).map(xe=>({...xe,disabled:xe.amount>U}))}else{const U=g.holdings.find(me=>me.symbol===A.symbol);if(!U||U.quantity===0)return[];const H=U.quantity,ae=[];return[1,5,10,25,50,100].forEach(me=>{me<=H&&ae.push({value:me,label:`${me} shares`,amount:me*ee,disabled:!1})}),[25,50,75,100].forEach(me=>{const ke=Math.floor(H*me/100);ke>0&&!ae.find(oe=>oe.value===ke)&&ae.push({value:ke,label:`${me}% (${ke})`,amount:ke*ee,disabled:!1})}),ae.find(me=>me.value===H)||ae.push({value:H,label:`All (${H})`,amount:H*ee,disabled:!1}),ae.sort((me,ke)=>me.value-ke.value).slice(0,6)}},te=()=>{!_||p&&!document.getElementById("confirm-checkbox").checked||(i?i({orderData:{orderType:o,orderMethod:c,quantity:h,limitPrice:f},stockData:A,orderSummary:Q,profitLossEstimate:P,onConfirm:ie}):console.warn("OrderModal: onShowConfirmation prop not provided. Order confirmation disabled."))},ie=async()=>{m(!0);try{const ee=c==="market"?A.price:parseFloat(f);console.log(" Placing order:",{orderType:o,symbol:A.symbol,quantity:h,orderPrice:ee,orderMethod:c});const U=ul.pending(o,A.symbol,h,E);let H;if(o==="buy"?H=await S(A.symbol,h,ee,A):H=await N(A.symbol,h,ee,A),u3(U),H.success){if(console.log(" Order successful:",H),o==="buy")ul.buySuccess(A.symbol,h,ee,E);else{const ae=P?P.amount:0;ul.sellSuccess(A.symbol,h,ee,ae,E)}g!=null&&g.refreshPortfolio&&g.refreshPortfolio(),r==null||r(),e()}else throw console.error(" Order failed:",H),new Error(H.error||"Order failed")}catch(ee){console.error(" Order error:",ee),ul.error("Order failed",ee.message||"An unexpected error occurred",E)}finally{m(!1)}};return t?a.jsx(Mt,{children:a.jsx($.div,{className:"order-modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:ee=>ee.target===ee.currentTarget&&e(),children:a.jsxs($.div,{className:"order-modal",initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{duration:.3,ease:[.4,0,.2,1]},children:[a.jsxs("div",{className:"order-modal-header",children:[a.jsxs("h2",{className:"order-modal-title",children:[a.jsx(Bt,{}),o==="buy"?"Buy Order":"Sell Order"]}),a.jsx("button",{className:"order-modal-close",onClick:e,children:a.jsx(ds,{size:20})})]}),a.jsxs("div",{className:"order-modal-body",children:[A&&a.jsxs("div",{className:"order-stock-info",children:[a.jsxs("div",{className:"order-stock-details",children:[a.jsx("h3",{children:A.symbol}),a.jsx("p",{children:A.name||A.symbol}),!W&&a.jsxs("span",{className:"market-closed-indicator",children:[a.jsx(nn,{size:12}),"Market Closed"]})]}),a.jsxs("div",{className:"order-stock-price",children:[a.jsx(Ys,{price:A.price,change:A.change,changePercent:A.changePercent,size:"large"}),z&&a.jsxs("div",{className:"price-loading",children:[a.jsx("div",{className:"loading-spinner"}),"Updating..."]})]})]}),a.jsxs("div",{className:"order-form-section",children:[a.jsxs("h3",{className:"section-title",children:[a.jsx($n,{}),"Order Type"]}),a.jsxs("div",{className:"order-type-toggle",children:[a.jsxs("button",{className:`order-type-btn ${o==="buy"?"active buy":""}`,onClick:()=>l("buy"),children:[a.jsx(Xe,{}),"Buy"]}),a.jsxs("button",{className:`order-type-btn ${o==="sell"?"active sell":""}`,onClick:()=>l("sell"),children:[a.jsx(_t,{}),"Sell"]})]})]}),a.jsx("div",{className:"order-form-section",children:a.jsxs("div",{className:"order-method-select",children:[a.jsx("label",{htmlFor:"order-method",children:"Order Method"}),a.jsxs("select",{id:"order-method",value:c,onChange:ee=>u(ee.target.value),children:[a.jsx("option",{value:"market",children:"Market Order"}),a.jsx("option",{value:"limit",children:"Limit Order"})]})]})}),a.jsxs("div",{className:"order-form-section",children:[a.jsxs("div",{className:"order-inputs-grid",children:[a.jsxs("div",{className:"order-input-group full-width",children:[a.jsx("label",{children:"Quantity"}),a.jsx(y3,{stockData:A,orderType:o,portfolioData:g,currentPrice:c==="market"?(A==null?void 0:A.price)||0:parseFloat(f)||0,onQuantitySelect:d,selectedQuantity:h}),a.jsx("div",{className:"quantity-options",children:J().map(ee=>a.jsxs("button",{className:`quantity-option-btn ${h===ee.value?"active":""}`,onClick:()=>d(ee.value),disabled:ee.disabled,children:[a.jsx("span",{className:"option-value",children:ee.label}),a.jsxs("span",{className:"option-amount",children:["",(ee.value*(c==="market"?(A==null?void 0:A.price)||0:parseFloat(f)||0)).toLocaleString("en-IN")]})]},ee.value))}),a.jsxs("div",{className:"order-quantity-control",children:[a.jsx("button",{className:"qty-control-btn",onClick:()=>V(-1),disabled:h<=1,children:a.jsx(qm,{})}),a.jsx("input",{type:"number",className:"qty-control-input",value:h,onChange:ee=>d(Math.max(1,parseInt(ee.target.value)||1)),min:"1",placeholder:"Enter quantity"}),a.jsx("button",{className:"qty-control-btn",onClick:()=>V(1),children:a.jsx(Ai,{})})]}),a.jsxs("div",{className:"investment-amount-display",children:[a.jsx("span",{className:"investment-label",children:"Investment Amount:"}),a.jsxs("span",{className:"investment-value",children:["",(h*(c==="market"?(A==null?void 0:A.price)||0:parseFloat(f)||0)).toLocaleString("en-IN")]})]}),L.quantity&&a.jsx("span",{className:"error-text",children:L.quantity})]}),c==="limit"&&a.jsxs("div",{className:"order-input-group",children:[a.jsx("label",{children:"Limit Price ()"}),a.jsx("input",{type:"number",className:"order-price-input",value:f,onChange:ee=>x(ee.target.value),placeholder:"Enter limit price",step:"0.01"}),L.price&&a.jsx("span",{className:"error-text",children:L.price})]})]}),L.funds&&a.jsxs("div",{className:"error-message",children:[a.jsx(Mi,{}),L.funds]}),L.shares&&a.jsxs("div",{className:"error-message",children:[a.jsx(Mi,{}),L.shares]})]}),A&&h>0&&(c==="market"||f)&&a.jsx("div",{className:"order-form-section",children:a.jsx(g3,{stockData:A,orderType:o,quantity:h,orderPrice:c==="market"?A.price:parseFloat(f)||0,averagePrice:o==="sell"?(ce=g.holdings.find(ee=>ee.symbol===A.symbol))==null?void 0:ce.averagePrice:null})}),a.jsx("div",{className:"order-form-section",children:a.jsxs("div",{className:"order-summary-card",children:[a.jsxs("h3",{className:"order-summary-title",children:[a.jsx(Nt,{}),"Order Summary"]}),a.jsxs("div",{className:"summary-row",children:[a.jsx("span",{className:"summary-label",children:"Quantity:"}),a.jsxs("span",{className:"summary-value",children:[h," shares"]})]}),a.jsxs("div",{className:"summary-row",children:[a.jsx("span",{className:"summary-label",children:"Price per share:"}),a.jsx("span",{className:"summary-value",children:l3(Q.pricePerShare)})]}),a.jsxs("div",{className:"summary-row",children:[a.jsx("span",{className:"summary-label",children:"Gross amount:"}),a.jsx("span",{className:"summary-value",children:$e(Q.grossAmount)})]}),a.jsxs("div",{className:"summary-row",children:[a.jsx("span",{className:"summary-label",children:"Fees & charges:"}),a.jsx("span",{className:"summary-value",children:$e(Q.fees.total)})]}),a.jsxs("div",{className:"summary-row total",children:[a.jsx("span",{className:"summary-label",children:"Net amount:"}),a.jsx("span",{className:"summary-value",children:$e(Q.netAmount)})]}),P&&a.jsxs("div",{className:`profit-loss-indicator ${P.isProfit?"profit":"loss"}`,children:[P.isProfit?a.jsx(Xe,{}):a.jsx(_t,{}),"Estimated ",P.isProfit?"Profit":"Loss",":",$e(Math.abs(P.amount)),"(",Sr(P.percentage),")"]})]})}),a.jsxs("div",{className:"confirm-checkbox",children:[a.jsx("input",{type:"checkbox",id:"confirm-checkbox",checked:p,onChange:ee=>y(ee.target.checked)}),a.jsxs("label",{htmlFor:"confirm-checkbox",children:["I confirm that I want to place this ",o," order"]})]}),a.jsxs("div",{className:"order-modal-actions",children:[a.jsx("button",{className:"order-action-btn cancel",onClick:e,disabled:w,children:"Cancel"}),a.jsx("button",{className:`order-action-btn ${o==="buy"?"place-buy":"place-sell"}`,onClick:te,disabled:w||!_||R||p&&!((_e=document.getElementById("confirm-checkbox"))!=null&&_e.checked),children:w?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"loading-spinner"}),"Placing Order..."]}):`Place ${o==="buy"?"Buy":"Sell"} Order`})]})]})]})})}):null},v3=({isOpen:t,position:e,stockData:n,onClose:s,onQuickBuy:r,onQuickSell:i,onViewChart:o,onAddToWatchlist:l,onViewDetails:c,hasHolding:u=!1,isInWatchlist:h=!1})=>{var y,w,m;const d=b.useRef(null),[f,x]=b.useState(e);if(b.useEffect(()=>{if(t&&d.current&&e){const S=d.current.getBoundingClientRect(),N={width:window.innerWidth,height:window.innerHeight};let{x:C,y:E}=e;C+S.width>N.width&&(C=N.width-S.width-10),C<10&&(C=10),E+S.height>N.height&&(E=N.height-S.height-10),E<10&&(E=10),x({x:C,y:E})}},[t,e]),b.useEffect(()=>{const g=N=>{d.current&&!d.current.contains(N.target)&&s()},S=N=>{N.key==="Escape"&&s()};return t&&(document.addEventListener("mousedown",g),document.addEventListener("keydown",S)),()=>{document.removeEventListener("mousedown",g),document.removeEventListener("keydown",S)}},[t,s]),!t||!n)return null;const p=[{id:"quick-buy",label:"Quick Buy",icon:Xe,action:()=>{r(n),s()},color:"green",shortcut:"B"},{id:"quick-sell",label:"Quick Sell",icon:_t,action:()=>{i(n),s()},color:"red",disabled:!u,shortcut:"S"},{id:"enhanced-order",label:"Enhanced Order",icon:Bt,action:()=>{s()},color:"blue",shortcut:"E"},{id:"view-chart",label:"View Chart",icon:Lt,action:()=>{o(n),s()},color:"purple",shortcut:"C"},{id:"watchlist",label:h?"Remove from Watchlist":"Add to Watchlist",icon:Lc,action:()=>{l(n),s()},color:"orange",shortcut:"W"},{id:"view-details",label:"View Details",icon:Ym,action:()=>{c(n),s()},color:"gray",shortcut:"I"}];return a.jsx(Mt,{children:a.jsxs($.div,{ref:d,className:"stock-context-menu",style:{position:"fixed",left:f.x,top:f.y,zIndex:1e3},initial:{opacity:0,scale:.95,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-10},transition:{duration:.15,ease:"easeOut"},children:[a.jsxs("div",{className:"context-menu-header",children:[a.jsxs("div",{className:"stock-info",children:[a.jsx("span",{className:"stock-symbol",children:n.symbol}),a.jsxs("span",{className:"stock-price",children:["",((y=n.price)==null?void 0:y.toLocaleString("en-IN"))||"0.00"]})]}),a.jsxs("div",{className:`price-change ${n.change>=0?"positive":"negative"}`,children:[n.change>=0?"+":"",((w=n.change)==null?void 0:w.toFixed(2))||"0.00","(",((m=n.changePercent)==null?void 0:m.toFixed(2))||"0.00","%)"]})]}),a.jsx("div",{className:"context-menu-items",children:p.map((g,S)=>a.jsxs($.button,{className:`context-menu-item ${g.color} ${g.disabled?"disabled":""}`,onClick:g.action,disabled:g.disabled,initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{duration:.1,delay:S*.02},whileHover:{backgroundColor:"var(--hover-bg)"},whileTap:{scale:.98},children:[a.jsxs("div",{className:"menu-item-content",children:[a.jsx(g.icon,{className:"menu-item-icon",size:16}),a.jsx("span",{className:"menu-item-label",children:g.label})]}),a.jsx("span",{className:"menu-item-shortcut",children:g.shortcut})]},g.id))}),a.jsxs("div",{className:"context-menu-footer",children:[a.jsxs("div",{className:"market-status",children:[a.jsx($n,{size:12}),a.jsx("span",{children:"Market Open"})]}),a.jsxs("div",{className:"last-updated",children:["Updated: ",new Date().toLocaleTimeString()]})]})]})})},x3=()=>{const[t,e]=b.useState({isOpen:!1,position:{x:0,y:0},stockData:null}),n=(r,i)=>{r.preventDefault(),r.stopPropagation(),e({isOpen:!0,position:{x:r.clientX,y:r.clientY},stockData:i})},s=()=>{e({isOpen:!1,position:{x:0,y:0},stockData:null})};return b.useEffect(()=>{const r=i=>{if(!t.isOpen)return;const{key:o}=i;switch(t.stockData,o.toLowerCase()){case"b":i.preventDefault(),s();break;case"s":i.preventDefault(),s();break;case"c":i.preventDefault(),s();break;case"w":i.preventDefault(),s();break;case"e":i.preventDefault(),s();break;case"i":i.preventDefault(),s();break}};return document.addEventListener("keydown",r),()=>document.removeEventListener("keydown",r)},[t]),{contextMenu:t,openContextMenu:n,closeContextMenu:s}},w3=({user:t,theme:e})=>{var Ao;const[n,s]=b.useState(null),[r,i]=b.useState("market"),[o,l]=b.useState("buy"),[c,u]=b.useState(1),[h,d]=b.useState(""),[f,x]=b.useState(!1),[p,y]=b.useState(!1),[w,m]=b.useState(!1),[g,S]=b.useState(!1),[N,C]=b.useState(null),E=Tn(),{portfolioData:L,buyStock:P,sellStock:R}=Vn(),{orderModalState:_,closeOrderModal:I,quickBuy:O,quickSell:z,navigateToTrading:F}=Qm(),{contextMenu:W,openContextMenu:A,closeContextMenu:Q}=x3(),{isModalOpen:V,orderData:J,loading:te,closeConfirmation:ie,processOrder:ce,confirmBuy:_e,confirmSell:ee}=uN(),{query:U,setQuery:H,results:ae,suggestions:Ce,recentSearches:xe,showHistory:me,handleHistoryClick:ke,loading:oe,clearSearch:qt,hasResults:Gt}=ng({enableSuggestions:!0,enableHistory:!0,limit:20,debounceMs:300,onResults:(q,Ge)=>{q.length>0&&m(!0)}}),Yr=[{title:"Available Balance",value:L.availableCash,icon:Nt,color:"primary"},{title:"Total Holdings",value:((Ao=L.holdings)==null?void 0:Ao.length)||0,icon:Bt,color:"info"},{title:"Total Invested",value:L.totalInvested,icon:Lt,color:"warning"},{title:"Total P&L",value:L.totalGainLoss,changePercent:L.totalGainLossPercentage,icon:L.totalGainLoss>=0?Xe:_t,color:L.totalGainLoss>=0?"success":"danger"}],Z=[{symbol:"RELIANCE",name:"Reliance Industries",price:2465.3,change:2.71,changePercent:.11,volume:"2.5M"},{symbol:"TCS",name:"Tata Consultancy Services",price:3185.45,change:-14.85,changePercent:-.47,volume:"1.8M"},{symbol:"HDFCBANK",name:"HDFC Bank",price:1650.2,change:51.75,changePercent:3.13,volume:"3.2M"},{symbol:"INFY",name:"Infosys",price:1595.8,change:19.7,changePercent:1.25,volume:"2.1M"},{symbol:"ICICIBANK",name:"ICICI Bank",price:945.15,change:12.3,changePercent:1.32,volume:"4.1M"},{symbol:"WIPRO",name:"Wipro Ltd",price:420.85,change:-3.25,changePercent:-.77,volume:"1.5M"},{symbol:"BAJFINANCE",name:"Bajaj Finance",price:6845.3,change:125.4,changePercent:1.87,volume:"0.8M"},{symbol:"MARUTI",name:"Maruti Suzuki",price:9245.6,change:-85.2,changePercent:-.91,volume:"0.6M"}],ge=[{id:1,symbol:"WIPRO",type:"BUY",quantity:50,price:420,status:"completed",time:"10:30 AM",total:21e3},{id:2,symbol:"BAJFINANCE",type:"SELL",quantity:25,price:6800,status:"completed",time:"11:45 AM",total:17e4},{id:3,symbol:"MARUTI",type:"BUY",quantity:10,price:9200,status:"pending",time:"12:15 PM",total:92e3},{id:4,symbol:"ASIANPAINT",type:"SELL",quantity:15,price:3100,status:"cancelled",time:"01:30 PM",total:46500}];b.useEffect(()=>{const q=new URLSearchParams(E.search),Ge=q.get("search"),Qe=q.get("symbol");if(Ge&&H(Ge),Qe){const er=Z.find(Qi=>Qi.symbol===Qe)||ae.find(Qi=>Qi.symbol===Qe);er&&Se(er)}},[E.search,ae]);const Se=q=>{var Ge;s(q),d(((Ge=q.price)==null?void 0:Ge.toString())||"")},qe=(q,Ge="buy")=>{C({...q,initialOrderType:Ge}),S(!0)},pe=()=>{S(!1),C(null)},_n=q=>{const Ge={symbol:q.symbol,name:q.name,price:0,change:0,changePercent:0,volume:"N/A"};Se(Ge),qt()},ps=async()=>{if(!n||!c)return;const q=r==="market"?n.price:parseFloat(h),Ge=parseInt(c),Qe={symbol:n.symbol,name:n.name,price:q,quantity:Ge,orderType:r,source:"trading-page"};o==="buy"?_e(Qe.symbol,Qe.quantity,Qe.price,{name:Qe.name,orderType:Qe.orderType,source:Qe.source}):ee(Qe.symbol,Qe.quantity,Qe.price,{name:Qe.name,orderType:Qe.orderType,source:Qe.source}),u(1),d("")},qr=async()=>{x(!0),await new Promise(q=>setTimeout(q,1500)),x(!1)},Gr=q=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(q),Io=Gt&&w?ae.map(q=>({symbol:q.symbol,name:q.name,price:q.price||0,change:q.change||0,changePercent:q.changePercent||0,volume:q.volume||"N/A",exchange:q.exchange})):U&&!Gt?Z.filter(q=>q.symbol.toLowerCase().includes(U.toLowerCase())||q.name.toLowerCase().includes(U.toLowerCase())):Z;return a.jsx("div",{className:"trading-page",children:a.jsxs("div",{className:"trading-container",children:[a.jsx($.div,{className:"trading-header",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6},children:a.jsxs("div",{className:"header-content",children:[a.jsxs("div",{className:"header-left",children:[a.jsxs("h1",{className:"page-title",children:[a.jsx(Bt,{className:"title-icon"}),"Trading"]}),a.jsx("p",{className:"page-subtitle",children:"Buy and sell stocks with real-time market data"})]}),a.jsx("div",{className:"header-actions",children:a.jsxs("button",{className:"btn-premium btn-secondary",onClick:qr,disabled:f,children:[a.jsx(jt,{size:16,className:f?"animate-spin":""}),"Refresh"]})})]})}),a.jsx($.div,{className:"trading-stats",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},children:Yr.map((q,Ge)=>{const Qe=q.icon,er=q.changePercent>=0;return a.jsxs($.div,{className:`stat-card stat-${q.color}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:Ge*.1},children:[a.jsxs("div",{className:"stat-header",children:[a.jsx("div",{className:"stat-icon",children:a.jsx(Qe,{})}),q.changePercent!==void 0&&a.jsxs("div",{className:`stat-change ${er?"positive":"negative"}`,children:[er?a.jsx(Tc,{size:14}):a.jsx(Ec,{size:14}),Math.abs(q.changePercent),"%"]})]}),a.jsxs("div",{className:"stat-content",children:[a.jsx("h3",{className:"stat-value",children:typeof q.value=="number"&&q.value>1e3?a.jsx(Rc,{end:q.value,duration:2,separator:",",prefix:q.title.includes("Balance")||q.title.includes("P&L")?"":""}):q.value}),a.jsx("p",{className:"stat-title",children:q.title})]})]},q.title)})}),a.jsxs("div",{className:"trading-grid",children:[a.jsxs($.div,{className:"trading-card stocks-panel",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:[a.jsxs("div",{className:"card-header",children:[a.jsxs("h3",{className:"card-title",children:[a.jsx(Lt,{className:"card-icon"}),Gt&&w?"Search Results":"Popular Stocks"]}),a.jsx("div",{className:"search-container",children:a.jsx(Ro,{placeholder:"Search stocks...",value:U,onChange:H,onClear:()=>{qt(),m(!1)},suggestions:Ce,recentSearches:xe,onSuggestionClick:_n,onHistoryClick:ke,showHistory:me,loading:oe,size:"sm",showSuggestions:!0,enableHistory:!0,className:"trading-search-input",renderSuggestion:(q,Ge)=>a.jsx("div",{className:"trading-search-suggestion",children:a.jsxs("div",{className:"suggestion-content",children:[a.jsx("span",{className:"suggestion-symbol",children:q.symbol}),a.jsx("span",{className:"suggestion-name",children:q.name}),q.exchange&&a.jsx("span",{className:"suggestion-exchange",children:q.exchange})]})},Ge)})})]}),a.jsx("div",{className:"card-content",children:a.jsxs("div",{className:"stocks-list",children:[oe&&a.jsxs("div",{className:"loading-state",children:[a.jsx($n,{className:"loading-icon animate-spin"}),a.jsx("span",{children:"Searching stocks..."})]}),!oe&&Io.length===0&&U&&a.jsxs("div",{className:"empty-state",children:[a.jsx(ju,{className:"empty-icon"}),a.jsxs("span",{children:['No stocks found for "',U,'"']})]}),!oe&&Io.map((q,Ge)=>a.jsxs($.div,{className:`stock-item ${(n==null?void 0:n.symbol)===q.symbol?"selected":""}`,onClick:()=>Se(q),onDoubleClick:()=>qe(q,"buy"),onContextMenu:Qe=>A(Qe,q),initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:Ge*.05},children:[a.jsxs("div",{className:"stock-info",children:[a.jsx("div",{className:"stock-symbol",children:q.symbol}),a.jsx("div",{className:"stock-name",children:q.name}),a.jsxs("div",{className:"stock-volume",children:["Vol: ",q.volume]})]}),a.jsx("div",{className:"stock-price-info",children:a.jsx(Ys,{price:q.price,change:q.change,changePercent:q.changePercent,size:"small"})})]},q.symbol))]})})]}),a.jsxs($.div,{className:"trading-card order-panel",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},children:[a.jsx("div",{className:"card-header",children:a.jsxs("h3",{className:"card-title",children:[a.jsx(Bt,{className:"card-icon"}),"Place Order"]})}),a.jsx("div",{className:"card-content",children:n?a.jsxs("div",{className:"order-form",children:[a.jsxs("div",{className:"selected-stock",children:[a.jsxs("div",{className:"stock-details",children:[a.jsx("h4",{children:n.symbol}),a.jsx("p",{children:n.name})]}),a.jsx(Ys,{price:n.price,change:n.change,changePercent:n.changePercent,size:"medium"})]}),a.jsxs("div",{className:"order-controls",children:[a.jsxs("div",{className:"transaction-type",children:[a.jsxs("button",{className:`type-btn ${o==="buy"?"active buy":""}`,onClick:()=>l("buy"),children:[a.jsx(Xe,{size:16}),"BUY"]}),a.jsxs("button",{className:`type-btn ${o==="sell"?"active sell":""}`,onClick:()=>l("sell"),children:[a.jsx(_t,{size:16}),"SELL"]})]}),a.jsxs("div",{className:"order-type",children:[a.jsx("label",{children:"Order Type"}),a.jsxs("select",{value:r,onChange:q=>i(q.target.value),className:"order-select",children:[a.jsx("option",{value:"market",children:"Market Order"}),a.jsx("option",{value:"limit",children:"Limit Order"}),a.jsx("option",{value:"stop",children:"Stop Order"})]})]}),a.jsxs("div",{className:"quantity-control",children:[a.jsx("label",{children:"Quantity"}),a.jsxs("div",{className:"quantity-input",children:[a.jsx("button",{className:"qty-btn",onClick:()=>u(Math.max(1,c-1)),children:a.jsx(qm,{size:14})}),a.jsx("input",{type:"number",value:c,onChange:q=>u(Math.max(1,parseInt(q.target.value)||1)),className:"qty-input",min:"1"}),a.jsx("button",{className:"qty-btn",onClick:()=>u(c+1),children:a.jsx(Ai,{size:14})})]})]}),r!=="market"&&a.jsxs("div",{className:"price-control",children:[a.jsx("label",{children:"Price ()"}),a.jsx("input",{type:"number",value:h,onChange:q=>d(q.target.value),className:"price-input",placeholder:"Enter price",step:"0.01"})]}),a.jsxs("div",{className:"order-summary",children:[a.jsxs("div",{className:"summary-row",children:[a.jsx("span",{children:"Quantity:"}),a.jsxs("span",{children:[c," shares"]})]}),a.jsxs("div",{className:"summary-row",children:[a.jsx("span",{children:"Price:"}),a.jsx("span",{children:Gr(r==="market"?n.price:parseFloat(h)||0)})]}),a.jsxs("div",{className:"summary-row total",children:[a.jsx("span",{children:"Total:"}),a.jsx("span",{children:Gr((r==="market"?n.price:parseFloat(h)||0)*c)})]})]}),a.jsxs("div",{className:"order-actions-grid",children:[a.jsx("button",{className:`place-order-btn ${o}`,onClick:ps,disabled:!c||r!=="market"&&!h||p,children:p?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"loading-spinner sm"}),"Placing Order..."]}):o==="buy"?"Place Buy Order":"Place Sell Order"}),a.jsxs("button",{className:"enhanced-order-btn",onClick:()=>qe(n,o),disabled:!n,children:[a.jsx(Bt,{size:16}),"Enhanced Order"]})]})]})]}):a.jsxs("div",{className:"no-stock-selected",children:[a.jsx($n,{size:48}),a.jsx("p",{children:"Select a stock to place an order"})]})})]}),a.jsxs($.div,{className:"trading-card orders-panel",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},children:[a.jsx("div",{className:"card-header",children:a.jsxs("h3",{className:"card-title",children:[a.jsx(nn,{className:"card-icon"}),"Recent Orders"]})}),a.jsx("div",{className:"card-content",children:a.jsx("div",{className:"orders-list",children:ge.map((q,Ge)=>a.jsxs($.div,{className:"order-item",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:Ge*.05},children:[a.jsxs("div",{className:"order-info",children:[a.jsx("div",{className:"order-symbol",children:q.symbol}),a.jsxs("div",{className:"order-details",children:[a.jsx("span",{className:`order-type ${q.type.toLowerCase()}`,children:q.type}),a.jsxs("span",{className:"order-quantity",children:[q.quantity," shares"]}),a.jsx("span",{className:"order-time",children:q.time})]})]}),a.jsxs("div",{className:"order-price",children:[a.jsx("div",{className:"price-value",children:Gr(q.price)}),a.jsx("div",{className:"total-value",children:Gr(q.total)})]}),a.jsxs("div",{className:"order-status",children:[q.status==="completed"&&a.jsx(Ws,{className:"status-icon completed"}),q.status==="pending"&&a.jsx(nn,{className:"status-icon pending"}),q.status==="cancelled"&&a.jsx(uo,{className:"status-icon cancelled"}),a.jsx("span",{className:`status-text ${q.status}`,children:q.status})]})]},q.id))})})]})]}),a.jsx(UN,{isOpen:g||_.isOpen,onClose:()=>{S(!1),I()},stockData:N||_.stockData,initialOrderType:(N==null?void 0:N.initialOrderType)||_.orderType,onOrderPlaced:()=>{pe(),I()},onShowConfirmation:null}),a.jsx(v3,{isOpen:W.isOpen,position:W.position,stockData:W.stockData,onClose:Q,onQuickBuy:O,onQuickSell:z,onViewChart:q=>F(q,"buy"),onAddToWatchlist:q=>console.log("Add to watchlist:",q.symbol),onViewDetails:q=>console.log("View details:",q.symbol),hasHolding:W.stockData?L.holdings.some(q=>q.symbol===W.stockData.symbol):!1}),a.jsx(hN,{isOpen:V,onClose:ie,onConfirm:ce,orderData:J,loading:te})]})})};function Re(t){var e=t.width,n=t.height;if(e<0)throw new Error("Negative width is not allowed for Size");if(n<0)throw new Error("Negative height is not allowed for Size");return{width:e,height:n}}function kr(t,e){return t.width===e.width&&t.height===e.height}var S3=function(){function t(e){var n=this;this._resolutionListener=function(){return n._onResolutionChanged()},this._resolutionMediaQueryList=null,this._observers=[],this._window=e,this._installResolutionListener()}return t.prototype.dispose=function(){this._uninstallResolutionListener(),this._window=null},Object.defineProperty(t.prototype,"value",{get:function(){return this._window.devicePixelRatio},enumerable:!1,configurable:!0}),t.prototype.subscribe=function(e){var n=this,s={next:e};return this._observers.push(s),{unsubscribe:function(){n._observers=n._observers.filter(function(r){return r!==s})}}},t.prototype._installResolutionListener=function(){if(this._resolutionMediaQueryList!==null)throw new Error("Resolution listener is already installed");var e=this._window.devicePixelRatio;this._resolutionMediaQueryList=this._window.matchMedia("all and (resolution: ".concat(e,"dppx)")),this._resolutionMediaQueryList.addListener(this._resolutionListener)},t.prototype._uninstallResolutionListener=function(){this._resolutionMediaQueryList!==null&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},t.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},t.prototype._onResolutionChanged=function(){var e=this;this._observers.forEach(function(n){return n.next(e._window.devicePixelRatio)}),this._reinstallResolutionListener()},t}();function b3(t){return new S3(t)}var N3=function(){function t(e,n,s){var r;this._canvasElement=null,this._bitmapSizeChangedListeners=[],this._suggestedBitmapSize=null,this._suggestedBitmapSizeChangedListeners=[],this._devicePixelRatioObservable=null,this._canvasElementResizeObserver=null,this._canvasElement=e,this._canvasElementClientSize=Re({width:this._canvasElement.clientWidth,height:this._canvasElement.clientHeight}),this._transformBitmapSize=n??function(i){return i},this._allowResizeObserver=(r=s==null?void 0:s.allowResizeObserver)!==null&&r!==void 0?r:!0,this._chooseAndInitObserver()}return t.prototype.dispose=function(){var e,n;if(this._canvasElement===null)throw new Error("Object is disposed");(e=this._canvasElementResizeObserver)===null||e===void 0||e.disconnect(),this._canvasElementResizeObserver=null,(n=this._devicePixelRatioObservable)===null||n===void 0||n.dispose(),this._devicePixelRatioObservable=null,this._suggestedBitmapSizeChangedListeners.length=0,this._bitmapSizeChangedListeners.length=0,this._canvasElement=null},Object.defineProperty(t.prototype,"canvasElement",{get:function(){if(this._canvasElement===null)throw new Error("Object is disposed");return this._canvasElement},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canvasElementClientSize",{get:function(){return this._canvasElementClientSize},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bitmapSize",{get:function(){return Re({width:this.canvasElement.width,height:this.canvasElement.height})},enumerable:!1,configurable:!0}),t.prototype.resizeCanvasElement=function(e){this._canvasElementClientSize=Re(e),this.canvasElement.style.width="".concat(this._canvasElementClientSize.width,"px"),this.canvasElement.style.height="".concat(this._canvasElementClientSize.height,"px"),this._invalidateBitmapSize()},t.prototype.subscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners.push(e)},t.prototype.unsubscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners=this._bitmapSizeChangedListeners.filter(function(n){return n!==e})},Object.defineProperty(t.prototype,"suggestedBitmapSize",{get:function(){return this._suggestedBitmapSize},enumerable:!1,configurable:!0}),t.prototype.subscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners.push(e)},t.prototype.unsubscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners=this._suggestedBitmapSizeChangedListeners.filter(function(n){return n!==e})},t.prototype.applySuggestedBitmapSize=function(){if(this._suggestedBitmapSize!==null){var e=this._suggestedBitmapSize;this._suggestedBitmapSize=null,this._resizeBitmap(e),this._emitSuggestedBitmapSizeChanged(e,this._suggestedBitmapSize)}},t.prototype._resizeBitmap=function(e){var n=this.bitmapSize;kr(n,e)||(this.canvasElement.width=e.width,this.canvasElement.height=e.height,this._emitBitmapSizeChanged(n,e))},t.prototype._emitBitmapSizeChanged=function(e,n){var s=this;this._bitmapSizeChangedListeners.forEach(function(r){return r.call(s,e,n)})},t.prototype._suggestNewBitmapSize=function(e){var n=this._suggestedBitmapSize,s=Re(this._transformBitmapSize(e,this._canvasElementClientSize)),r=kr(this.bitmapSize,s)?null:s;n===null&&r===null||n!==null&&r!==null&&kr(n,r)||(this._suggestedBitmapSize=r,this._emitSuggestedBitmapSizeChanged(n,r))},t.prototype._emitSuggestedBitmapSizeChanged=function(e,n){var s=this;this._suggestedBitmapSizeChangedListeners.forEach(function(r){return r.call(s,e,n)})},t.prototype._chooseAndInitObserver=function(){var e=this;if(!this._allowResizeObserver){this._initDevicePixelRatioObservable();return}C3().then(function(n){return n?e._initResizeObserver():e._initDevicePixelRatioObservable()})},t.prototype._initDevicePixelRatioObservable=function(){var e=this;if(this._canvasElement!==null){var n=I0(this._canvasElement);if(n===null)throw new Error("No window is associated with the canvas");this._devicePixelRatioObservable=b3(n),this._devicePixelRatioObservable.subscribe(function(){return e._invalidateBitmapSize()}),this._invalidateBitmapSize()}},t.prototype._invalidateBitmapSize=function(){var e,n;if(this._canvasElement!==null){var s=I0(this._canvasElement);if(s!==null){var r=(n=(e=this._devicePixelRatioObservable)===null||e===void 0?void 0:e.value)!==null&&n!==void 0?n:s.devicePixelRatio,i=this._canvasElement.getClientRects(),o=i[0]!==void 0?k3(i[0],r):Re({width:this._canvasElementClientSize.width*r,height:this._canvasElementClientSize.height*r});this._suggestNewBitmapSize(o)}}},t.prototype._initResizeObserver=function(){var e=this;this._canvasElement!==null&&(this._canvasElementResizeObserver=new ResizeObserver(function(n){var s=n.find(function(o){return o.target===e._canvasElement});if(!(!s||!s.devicePixelContentBoxSize||!s.devicePixelContentBoxSize[0])){var r=s.devicePixelContentBoxSize[0],i=Re({width:r.inlineSize,height:r.blockSize});e._suggestNewBitmapSize(i)}}),this._canvasElementResizeObserver.observe(this._canvasElement,{box:"device-pixel-content-box"}))},t}();function j3(t,e){return new N3(t,e.transform,e.options)}function I0(t){return t.ownerDocument.defaultView}function C3(){return new Promise(function(t){var e=new ResizeObserver(function(n){t(n.every(function(s){return"devicePixelContentBoxSize"in s})),e.disconnect()});e.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1})}function k3(t,e){return Re({width:Math.round(t.left*e+t.width*e)-Math.round(t.left*e),height:Math.round(t.top*e+t.height*e)-Math.round(t.top*e)})}var P3=function(){function t(e,n,s){if(n.width===0||n.height===0)throw new TypeError("Rendering target could only be created on a media with positive width and height");if(this._mediaSize=n,s.width===0||s.height===0)throw new TypeError("Rendering target could only be created using a bitmap with positive integer width and height");this._bitmapSize=s,this._context=e}return t.prototype.useMediaCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),this._context.scale(this._horizontalPixelRatio,this._verticalPixelRatio),e({context:this._context,mediaSize:this._mediaSize})}finally{this._context.restore()}},t.prototype.useBitmapCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),e({context:this._context,mediaSize:this._mediaSize,bitmapSize:this._bitmapSize,horizontalPixelRatio:this._horizontalPixelRatio,verticalPixelRatio:this._verticalPixelRatio})}finally{this._context.restore()}},Object.defineProperty(t.prototype,"_horizontalPixelRatio",{get:function(){return this._bitmapSize.width/this._mediaSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_verticalPixelRatio",{get:function(){return this._bitmapSize.height/this._mediaSize.height},enumerable:!1,configurable:!0}),t}();function Ar(t,e){var n=t.canvasElementClientSize;if(n.width===0||n.height===0)return null;var s=t.bitmapSize;if(s.width===0||s.height===0)return null;var r=t.canvasElement.getContext("2d",e);return r===null?null:new P3(r,n,s)}/*!
 * @license
 * TradingView Lightweight Charts v5.0.8
 * Copyright (c) 2025 TradingView, Inc.
 * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0
 */const WN={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}};var A0,O0;function Or(t,e){const n={0:[],1:[t.lineWidth,t.lineWidth],2:[2*t.lineWidth,2*t.lineWidth],3:[6*t.lineWidth,6*t.lineWidth],4:[t.lineWidth,4*t.lineWidth]}[e];t.setLineDash(n)}function HN(t,e,n,s){t.beginPath();const r=t.lineWidth%2?.5:0;t.moveTo(n,e+r),t.lineTo(s,e+r),t.stroke()}function mt(t,e){if(!t)throw new Error("Assertion failed"+(e?": "+e:""))}function Yt(t){if(t===void 0)throw new Error("Value is undefined");return t}function G(t){if(t===null)throw new Error("Value is null");return t}function Es(t){return G(Yt(t))}(function(t){t[t.Simple=0]="Simple",t[t.WithSteps=1]="WithSteps",t[t.Curved=2]="Curved"})(A0||(A0={})),function(t){t[t.Solid=0]="Solid",t[t.Dotted=1]="Dotted",t[t.Dashed=2]="Dashed",t[t.LargeDashed=3]="LargeDashed",t[t.SparseDotted=4]="SparseDotted"}(O0||(O0={}));class tt{constructor(){this.t=[]}i(e,n,s){const r={h:e,l:n,o:s===!0};this.t.push(r)}_(e){const n=this.t.findIndex(s=>e===s.h);n>-1&&this.t.splice(n,1)}u(e){this.t=this.t.filter(n=>n.l!==e)}p(e,n,s){const r=[...this.t];this.t=this.t.filter(i=>!i.o),r.forEach(i=>i.h(e,n,s))}v(){return this.t.length>0}m(){this.t=[]}}function Zt(t,...e){for(const n of e)for(const s in n)n[s]!==void 0&&Object.prototype.hasOwnProperty.call(n,s)&&!["__proto__","constructor","prototype"].includes(s)&&(typeof n[s]!="object"||t[s]===void 0||Array.isArray(n[s])?t[s]=n[s]:Zt(t[s],n[s]));return t}function Di(t){return typeof t=="number"&&isFinite(t)}function fo(t){return typeof t=="number"&&t%1==0}function Mo(t){return typeof t=="string"}function hl(t){return typeof t=="boolean"}function Jn(t){const e=t;if(!e||typeof e!="object")return e;let n,s,r;for(s in n=Array.isArray(e)?[]:{},e)e.hasOwnProperty(s)&&(r=e[s],n[s]=r&&typeof r=="object"?Jn(r):r);return n}function E3(t){return t!==null}function po(t){return t===null?void 0:t}const YN="-apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif";function Oc(t,e,n){return e===void 0&&(e=YN),`${n=n!==void 0?`${n} `:""}${t}px ${e}`}class T3{constructor(e){this.M={S:1,C:5,P:NaN,k:"",T:"",R:"",D:"",V:0,I:0,B:0,A:0,L:0},this.O=e}N(){const e=this.M,n=this.F(),s=this.W();return e.P===n&&e.T===s||(e.P=n,e.T=s,e.k=Oc(n,s),e.A=2.5/12*n,e.V=e.A,e.I=n/12*e.C,e.B=n/12*e.C,e.L=0),e.R=this.H(),e.D=this.U(),this.M}H(){return this.O.N().layout.textColor}U(){return this.O.$()}F(){return this.O.N().layout.fontSize}W(){return this.O.N().layout.fontFamily}}function nd(t){return t<0?0:t>255?255:Math.round(t)||0}function D0(t){return .199*t[0]+.687*t[1]+.114*t[2]}class L3{constructor(e,n){this.q=new Map,this.Y=e,n&&(this.q=n)}j(e,n){if(e==="transparent")return e;const s=this.K(e),r=s[3];return`rgba(${s[0]}, ${s[1]}, ${s[2]}, ${n*r})`}X(e){const n=this.K(e);return{Z:`rgb(${n[0]}, ${n[1]}, ${n[2]})`,G:D0(n)>160?"black":"white"}}J(e){return D0(this.K(e))}tt(e,n,s){const[r,i,o,l]=this.K(e),[c,u,h,d]=this.K(n),f=[nd(r+s*(c-r)),nd(i+s*(u-i)),nd(o+s*(h-o)),(x=l+s*(d-l),x<=0||x>1?Math.min(Math.max(x,0),1):Math.round(1e4*x)/1e4)];var x;return`rgba(${f[0]}, ${f[1]}, ${f[2]}, ${f[3]})`}K(e){const n=this.q.get(e);if(n)return n;const s=function(o){const l=document.createElement("div");l.style.display="none",document.body.appendChild(l),l.style.color=o;const c=window.getComputedStyle(l).color;return document.body.removeChild(l),c}(e),r=s.match(/^rgba?\s*\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d+))?\)$/);if(!r){if(this.Y.length)for(const o of this.Y){const l=o(e);if(l)return this.q.set(e,l),l}throw new Error(`Failed to parse color: ${e}`)}const i=[parseInt(r[1],10),parseInt(r[2],10),parseInt(r[3],10),r[4]?parseFloat(r[4]):1];return this.q.set(e,i),i}}class qN{constructor(){this.it=[]}st(e){this.it=e}nt(e,n,s){this.it.forEach(r=>{r.nt(e,n,s)})}}class fs{nt(e,n,s){e.useBitmapCoordinateSpace(r=>this.et(r,n,s))}}class _3 extends fs{constructor(){super(...arguments),this.rt=null}ht(e){this.rt=e}et({context:e,horizontalPixelRatio:n,verticalPixelRatio:s}){if(this.rt===null||this.rt.lt===null)return;const r=this.rt.lt,i=this.rt,o=Math.max(1,Math.floor(n))%2/2,l=c=>{e.beginPath();for(let u=r.to-1;u>=r.from;--u){const h=i.ot[u],d=Math.round(h._t*n)+o,f=h.ut*s,x=c*s+o;e.moveTo(d,f),e.arc(d,f,x,0,2*Math.PI)}e.fill()};i.ct>0&&(e.fillStyle=i.dt,l(i.ft+i.ct)),e.fillStyle=i.vt,l(i.ft)}}function R3(){return{ot:[{_t:0,ut:0,wt:0,gt:0}],vt:"",dt:"",ft:0,ct:0,lt:null}}const M3={from:0,to:1};class I3{constructor(e,n,s){this.Mt=new qN,this.bt=[],this.St=[],this.xt=!0,this.O=e,this.Ct=n,this.Pt=s,this.Mt.st(this.bt)}kt(e){this.yt(),this.xt=!0}Tt(){return this.xt&&(this.Rt(),this.xt=!1),this.Mt}yt(){const e=this.Pt.Dt();e.length!==this.bt.length&&(this.St=e.map(R3),this.bt=this.St.map(n=>{const s=new _3;return s.ht(n),s}),this.Mt.st(this.bt))}Rt(){const e=this.Ct.N().mode===2||!this.Ct.Vt(),n=this.Pt.It(),s=this.Ct.Bt(),r=this.O.Et();this.yt(),n.forEach((i,o)=>{const l=this.St[o],c=i.At(s),u=i.zt();!e&&c!==null&&i.Vt()&&u!==null?(l.vt=c.Lt,l.ft=c.ft,l.ct=c.Ot,l.ot[0].gt=c.gt,l.ot[0].ut=i.Ft().Nt(c.gt,u.Wt),l.dt=c.Ht??this.O.Ut(l.ot[0].ut/i.Ft().$t()),l.ot[0].wt=s,l.ot[0]._t=r.qt(s),l.lt=M3):l.lt=null})}}class A3 extends fs{constructor(e){super(),this.Yt=e}et({context:e,bitmapSize:n,horizontalPixelRatio:s,verticalPixelRatio:r}){if(this.Yt===null)return;const i=this.Yt.jt.Vt,o=this.Yt.Kt.Vt;if(!i&&!o)return;const l=Math.round(this.Yt._t*s),c=Math.round(this.Yt.ut*r);e.lineCap="butt",i&&l>=0&&(e.lineWidth=Math.floor(this.Yt.jt.ct*s),e.strokeStyle=this.Yt.jt.R,e.fillStyle=this.Yt.jt.R,Or(e,this.Yt.jt.Xt),function(u,h,d,f){u.beginPath();const x=u.lineWidth%2?.5:0;u.moveTo(h+x,d),u.lineTo(h+x,f),u.stroke()}(e,l,0,n.height)),o&&c>=0&&(e.lineWidth=Math.floor(this.Yt.Kt.ct*r),e.strokeStyle=this.Yt.Kt.R,e.fillStyle=this.Yt.Kt.R,Or(e,this.Yt.Kt.Xt),HN(e,c,0,n.width))}}class O3{constructor(e,n){this.xt=!0,this.Zt={jt:{ct:1,Xt:0,R:"",Vt:!1},Kt:{ct:1,Xt:0,R:"",Vt:!1},_t:0,ut:0},this.Gt=new A3(this.Zt),this.Jt=e,this.Pt=n}kt(){this.xt=!0}Tt(e){return this.xt&&(this.Rt(),this.xt=!1),this.Gt}Rt(){const e=this.Jt.Vt(),n=this.Pt.Qt().N().crosshair,s=this.Zt;if(n.mode===2)return s.Kt.Vt=!1,void(s.jt.Vt=!1);s.Kt.Vt=e&&this.Jt.ti(this.Pt),s.jt.Vt=e&&this.Jt.ii(),s.Kt.ct=n.horzLine.width,s.Kt.Xt=n.horzLine.style,s.Kt.R=n.horzLine.color,s.jt.ct=n.vertLine.width,s.jt.Xt=n.vertLine.style,s.jt.R=n.vertLine.color,s._t=this.Jt.si(),s.ut=this.Jt.ni()}}function D3(t,e,n,s,r,i){t.fillRect(e+i,n,s-2*i,i),t.fillRect(e+i,n+r-i,s-2*i,i),t.fillRect(e,n,i,r),t.fillRect(e+s-i,n,i,r)}function Iu(t,e,n,s,r,i){t.save(),t.globalCompositeOperation="copy",t.fillStyle=i,t.fillRect(e,n,s,r),t.restore()}function F0(t,e,n,s,r,i){t.beginPath(),t.roundRect?t.roundRect(e,n,s,r,i):(t.lineTo(e+s-i[1],n),i[1]!==0&&t.arcTo(e+s,n,e+s,n+i[1],i[1]),t.lineTo(e+s,n+r-i[2]),i[2]!==0&&t.arcTo(e+s,n+r,e+s-i[2],n+r,i[2]),t.lineTo(e+i[3],n+r),i[3]!==0&&t.arcTo(e,n+r,e,n+r-i[3],i[3]),t.lineTo(e,n+i[0]),i[0]!==0&&t.arcTo(e,n,e+i[0],n,i[0]))}function B0(t,e,n,s,r,i,o=0,l=[0,0,0,0],c=""){if(t.save(),!o||!c||c===i)return F0(t,e,n,s,r,l),t.fillStyle=i,t.fill(),void t.restore();const u=o/2;var h;F0(t,e+u,n+u,s-o,r-o,(h=-u,l.map(d=>d===0?d:d+h))),i!=="transparent"&&(t.fillStyle=i,t.fill()),c!=="transparent"&&(t.lineWidth=o,t.strokeStyle=c,t.closePath(),t.stroke()),t.restore()}function GN(t,e,n,s,r,i,o){t.save(),t.globalCompositeOperation="copy";const l=t.createLinearGradient(0,0,0,r);l.addColorStop(0,i),l.addColorStop(1,o),t.fillStyle=l,t.fillRect(e,n,s,r),t.restore()}class z0{constructor(e,n){this.ht(e,n)}ht(e,n){this.Yt=e,this.ei=n}$t(e,n){return this.Yt.Vt?e.P+e.A+e.V:0}nt(e,n,s,r){if(!this.Yt.Vt||this.Yt.ri.length===0)return;const i=this.Yt.R,o=this.ei.Z,l=e.useBitmapCoordinateSpace(c=>{const u=c.context;u.font=n.k;const h=this.hi(c,n,s,r),d=h.ai;return h.li?B0(u,d.oi,d._i,d.ui,d.ci,o,d.di,[d.ft,0,0,d.ft],o):B0(u,d.fi,d._i,d.ui,d.ci,o,d.di,[0,d.ft,d.ft,0],o),this.Yt.pi&&(u.fillStyle=i,u.fillRect(d.fi,d.mi,d.wi-d.fi,d.gi)),this.Yt.Mi&&(u.fillStyle=n.D,u.fillRect(h.li?d.bi-d.di:0,d._i,d.di,d.Si-d._i)),h});e.useMediaCoordinateSpace(({context:c})=>{const u=l.xi;c.font=n.k,c.textAlign=l.li?"right":"left",c.textBaseline="middle",c.fillStyle=i,c.fillText(this.Yt.ri,u.Ci,(u._i+u.Si)/2+u.Pi)})}hi(e,n,s,r){const{context:i,bitmapSize:o,mediaSize:l,horizontalPixelRatio:c,verticalPixelRatio:u}=e,h=this.Yt.pi||!this.Yt.ki?n.C:0,d=this.Yt.yi?n.S:0,f=n.A+this.ei.Ti,x=n.V+this.ei.Ri,p=n.I,y=n.B,w=this.Yt.ri,m=n.P,g=s.Di(i,w),S=Math.ceil(s.Vi(i,w)),N=m+f+x,C=n.S+p+y+S+h,E=Math.max(1,Math.floor(u));let L=Math.round(N*u);L%2!=E%2&&(L+=1);const P=d>0?Math.max(1,Math.floor(d*c)):0,R=Math.round(C*c),_=Math.round(h*c),I=this.ei.Ii??this.ei.Bi,O=Math.round(I*u)-Math.floor(.5*u),z=Math.floor(O+E/2-L/2),F=z+L,W=r==="right",A=W?l.width-d:d,Q=W?o.width-P:P;let V,J,te;return W?(V=Q-R,J=Q-_,te=A-h-p-d):(V=Q+R,J=Q+_,te=A+h+p),{li:W,ai:{_i:z,mi:O,Si:F,ui:R,ci:L,ft:2*c,di:P,oi:V,fi:Q,wi:J,gi:E,bi:o.width},xi:{_i:z/u,Si:F/u,Ci:te,Pi:g}}}}class Au{constructor(e){this.Ei={Bi:0,Z:"#000",Ri:0,Ti:0},this.Ai={ri:"",Vt:!1,pi:!0,ki:!1,Ht:"",R:"#FFF",Mi:!1,yi:!1},this.zi={ri:"",Vt:!1,pi:!1,ki:!0,Ht:"",R:"#FFF",Mi:!0,yi:!0},this.xt=!0,this.Li=new(e||z0)(this.Ai,this.Ei),this.Oi=new(e||z0)(this.zi,this.Ei)}ri(){return this.Ni(),this.Ai.ri}Bi(){return this.Ni(),this.Ei.Bi}kt(){this.xt=!0}$t(e,n=!1){return Math.max(this.Li.$t(e,n),this.Oi.$t(e,n))}Fi(){return this.Ei.Ii||0}Wi(e){this.Ei.Ii=e}Hi(){return this.Ni(),this.Ai.Vt||this.zi.Vt}Ui(){return this.Ni(),this.Ai.Vt}Tt(e){return this.Ni(),this.Ai.pi=this.Ai.pi&&e.N().ticksVisible,this.zi.pi=this.zi.pi&&e.N().ticksVisible,this.Li.ht(this.Ai,this.Ei),this.Oi.ht(this.zi,this.Ei),this.Li}$i(){return this.Ni(),this.Li.ht(this.Ai,this.Ei),this.Oi.ht(this.zi,this.Ei),this.Oi}Ni(){this.xt&&(this.Ai.pi=!0,this.zi.pi=!1,this.qi(this.Ai,this.zi,this.Ei))}}class F3 extends Au{constructor(e,n,s){super(),this.Jt=e,this.Yi=n,this.ji=s}qi(e,n,s){if(e.Vt=!1,this.Jt.N().mode===2)return;const r=this.Jt.N().horzLine;if(!r.labelVisible)return;const i=this.Yi.zt();if(!this.Jt.Vt()||this.Yi.Ki()||i===null)return;const o=this.Yi.Xi().X(r.labelBackgroundColor);s.Z=o.Z,e.R=o.G;const l=2/12*this.Yi.P();s.Ti=l,s.Ri=l;const c=this.ji(this.Yi);s.Bi=c.Bi,e.ri=this.Yi.Zi(c.gt,i),e.Vt=!0}}const B3=/[1-9]/g;class QN{constructor(){this.Yt=null}ht(e){this.Yt=e}nt(e,n){if(this.Yt===null||this.Yt.Vt===!1||this.Yt.ri.length===0)return;const s=e.useMediaCoordinateSpace(({context:f})=>(f.font=n.k,Math.round(n.Gi.Vi(f,G(this.Yt).ri,B3))));if(s<=0)return;const r=n.Ji,i=s+2*r,o=i/2,l=this.Yt.Qi;let c=this.Yt.Bi,u=Math.floor(c-o)+.5;u<0?(c+=Math.abs(0-u),u=Math.floor(c-o)+.5):u+i>l&&(c-=Math.abs(l-(u+i)),u=Math.floor(c-o)+.5);const h=u+i,d=Math.ceil(0+n.S+n.C+n.A+n.P+n.V);e.useBitmapCoordinateSpace(({context:f,horizontalPixelRatio:x,verticalPixelRatio:p})=>{const y=G(this.Yt);f.fillStyle=y.Z;const w=Math.round(u*x),m=Math.round(0*p),g=Math.round(h*x),S=Math.round(d*p),N=Math.round(2*x);if(f.beginPath(),f.moveTo(w,m),f.lineTo(w,S-N),f.arcTo(w,S,w+N,S,N),f.lineTo(g-N,S),f.arcTo(g,S,g,S-N,N),f.lineTo(g,m),f.fill(),y.pi){const C=Math.round(y.Bi*x),E=m,L=Math.round((E+n.C)*p);f.fillStyle=y.R;const P=Math.max(1,Math.floor(x)),R=Math.floor(.5*x);f.fillRect(C-R,E,P,L-E)}}),e.useMediaCoordinateSpace(({context:f})=>{const x=G(this.Yt),p=0+n.S+n.C+n.A+n.P/2;f.font=n.k,f.textAlign="left",f.textBaseline="middle",f.fillStyle=x.R;const y=n.Gi.Di(f,"Apr0");f.translate(u+r,p+y),f.fillText(x.ri,0,0)})}}class z3{constructor(e,n,s){this.xt=!0,this.Gt=new QN,this.Zt={Vt:!1,Z:"#4c525e",R:"white",ri:"",Qi:0,Bi:NaN,pi:!0},this.Ct=e,this.ts=n,this.ji=s}kt(){this.xt=!0}Tt(){return this.xt&&(this.Rt(),this.xt=!1),this.Gt.ht(this.Zt),this.Gt}Rt(){const e=this.Zt;if(e.Vt=!1,this.Ct.N().mode===2)return;const n=this.Ct.N().vertLine;if(!n.labelVisible)return;const s=this.ts.Et();if(s.Ki())return;e.Qi=s.Qi();const r=this.ji();if(r===null)return;e.Bi=r.Bi;const i=s.ss(this.Ct.Bt());e.ri=s.ns(G(i)),e.Vt=!0;const o=this.ts.Xi().X(n.labelBackgroundColor);e.Z=o.Z,e.R=o.G,e.pi=s.N().ticksVisible}}class KN{constructor(){this.es=null,this.rs=0}hs(){return this.rs}ls(e){this.rs=e}Ft(){return this.es}_s(e){this.es=e}us(e){return[]}cs(){return[]}Vt(){return!0}}var $0;(function(t){t[t.Normal=0]="Normal",t[t.Magnet=1]="Magnet",t[t.Hidden=2]="Hidden",t[t.MagnetOHLC=3]="MagnetOHLC"})($0||($0={}));class $3 extends KN{constructor(e,n){super(),this.Pt=null,this.ds=NaN,this.fs=0,this.ps=!1,this.vs=new Map,this.ws=!1,this.gs=new WeakMap,this.Ms=new WeakMap,this.bs=NaN,this.Ss=NaN,this.xs=NaN,this.Cs=NaN,this.ts=e,this.Ps=n,this.ks=((r,i)=>o=>{const l=i(),c=r();if(o===G(this.Pt).ys())return{gt:c,Bi:l};{const u=G(o.zt());return{gt:o.Ts(l,u),Bi:l}}})(()=>this.ds,()=>this.Ss);const s=((r,i)=>()=>{const o=this.ts.Et().Rs(r()),l=i();return o&&Number.isFinite(l)?{wt:o,Bi:l}:null})(()=>this.fs,()=>this.si());this.Ds=new z3(this,e,s)}N(){return this.Ps}Vs(e,n){this.xs=e,this.Cs=n}Is(){this.xs=NaN,this.Cs=NaN}Bs(){return this.xs}Es(){return this.Cs}As(e,n,s){this.ws||(this.ws=!0),this.ps=!0,this.zs(e,n,s)}Bt(){return this.fs}si(){return this.bs}ni(){return this.Ss}Vt(){return this.ps}Ls(){this.ps=!1,this.Os(),this.ds=NaN,this.bs=NaN,this.Ss=NaN,this.Pt=null,this.Is(),this.Ns()}Fs(e){let n=this.gs.get(e);n||(n=new O3(this,e),this.gs.set(e,n));let s=this.Ms.get(e);return s||(s=new I3(this.ts,this,e),this.Ms.set(e,s)),[n,s]}ti(e){return e===this.Pt&&this.Ps.horzLine.visible}ii(){return this.Ps.vertLine.visible}Ws(e,n){this.ps&&this.Pt===e||this.vs.clear();const s=[];return this.Pt===e&&s.push(this.Hs(this.vs,n,this.ks)),s}cs(){return this.ps?[this.Ds]:[]}Us(){return this.Pt}Ns(){this.ts.$s().forEach(e=>{var n,s;(n=this.gs.get(e))==null||n.kt(),(s=this.Ms.get(e))==null||s.kt()}),this.vs.forEach(e=>e.kt()),this.Ds.kt()}qs(e){return e&&!e.ys().Ki()?e.ys():null}zs(e,n,s){this.Ys(e,n,s)&&this.Ns()}Ys(e,n,s){const r=this.bs,i=this.Ss,o=this.ds,l=this.fs,c=this.Pt,u=this.qs(s);this.fs=e,this.bs=isNaN(e)?NaN:this.ts.Et().qt(e),this.Pt=s;const h=u!==null?u.zt():null;return u!==null&&h!==null?(this.ds=n,this.Ss=u.Nt(n,h)):(this.ds=NaN,this.Ss=NaN),r!==this.bs||i!==this.Ss||l!==this.fs||o!==this.ds||c!==this.Pt}Os(){const e=this.ts.js().map(s=>s.Xs().Ks()).filter(E3),n=e.length===0?null:Math.max(...e);this.fs=n!==null?n:NaN}Hs(e,n,s){let r=e.get(n);return r===void 0&&(r=new F3(this,n,s),e.set(n,r)),r}}function Ou(t){return t==="left"||t==="right"}class pt{constructor(e){this.Zs=new Map,this.Gs=[],this.Js=e}Qs(e,n){const s=function(r,i){return r===void 0?i:{tn:Math.max(r.tn,i.tn),sn:r.sn||i.sn}}(this.Zs.get(e),n);this.Zs.set(e,s)}nn(){return this.Js}en(e){const n=this.Zs.get(e);return n===void 0?{tn:this.Js}:{tn:Math.max(this.Js,n.tn),sn:n.sn}}rn(){this.hn(),this.Gs=[{an:0}]}ln(e){this.hn(),this.Gs=[{an:1,Wt:e}]}_n(e){this.un(),this.Gs.push({an:5,Wt:e})}hn(){this.un(),this.Gs.push({an:6})}cn(){this.hn(),this.Gs=[{an:4}]}dn(e){this.hn(),this.Gs.push({an:2,Wt:e})}fn(e){this.hn(),this.Gs.push({an:3,Wt:e})}pn(){return this.Gs}vn(e){for(const n of e.Gs)this.mn(n);this.Js=Math.max(this.Js,e.Js),e.Zs.forEach((n,s)=>{this.Qs(s,n)})}static wn(){return new pt(2)}static gn(){return new pt(3)}mn(e){switch(e.an){case 0:this.rn();break;case 1:this.ln(e.Wt);break;case 2:this.dn(e.Wt);break;case 3:this.fn(e.Wt);break;case 4:this.cn();break;case 5:this._n(e.Wt);break;case 6:this.un()}}un(){const e=this.Gs.findIndex(n=>n.an===5);e!==-1&&this.Gs.splice(e,1)}}class XN{formatTickmarks(e){return e.map(n=>this.format(n))}}const V0=".";function Zn(t,e){if(!Di(t))return"n/a";if(!fo(e))throw new TypeError("invalid length");if(e<0||e>16)throw new TypeError("invalid length");return e===0?t.toString():("0000000000000000"+t.toString()).slice(-e)}class Du extends XN{constructor(e,n){if(super(),n||(n=1),Di(e)&&fo(e)||(e=100),e<0)throw new TypeError("invalid base");this.Yi=e,this.Mn=n,this.bn()}format(e){const n=e<0?"":"";return e=Math.abs(e),n+this.Sn(e)}bn(){if(this.xn=0,this.Yi>0&&this.Mn>0){let e=this.Yi;for(;e>1;)e/=10,this.xn++}}Sn(e){const n=this.Yi/this.Mn;let s=Math.floor(e),r="";const i=this.xn!==void 0?this.xn:NaN;if(n>1){let o=+(Math.round(e*n)-s*n).toFixed(this.xn);o>=n&&(o-=n,s+=1),r=V0+Zn(+o.toFixed(this.xn)*this.Mn,i)}else s=Math.round(s*n)/n,i>0&&(r=V0+Zn(0,i));return s.toFixed(0)+r}}class JN extends Du{constructor(e=100){super(e)}format(e){return`${super.format(e)}%`}}class V3 extends XN{constructor(e){super(),this.Cn=e}format(e){let n="";return e<0&&(n="-",e=-e),e<995?n+this.Pn(e):e<999995?n+this.Pn(e/1e3)+"K":e<999999995?(e=1e3*Math.round(e/1e3),n+this.Pn(e/1e6)+"M"):(e=1e6*Math.round(e/1e6),n+this.Pn(e/1e9)+"B")}Pn(e){let n;const s=Math.pow(10,this.Cn);return n=(e=Math.round(e*s)/s)>=1e-15&&e<1?e.toFixed(this.Cn).replace(/\.?0+$/,""):String(e),n.replace(/(\.[1-9]*)0+$/,(r,i)=>i)}}const U3=/[2-9]/g;class Dc{constructor(e=50){this.kn=0,this.yn=1,this.Tn=1,this.Rn={},this.Dn=new Map,this.Vn=e}In(){this.kn=0,this.Dn.clear(),this.yn=1,this.Tn=1,this.Rn={}}Vi(e,n,s){return this.Bn(e,n,s).width}Di(e,n,s){const r=this.Bn(e,n,s);return((r.actualBoundingBoxAscent||0)-(r.actualBoundingBoxDescent||0))/2}Bn(e,n,s){const r=s||U3,i=String(n).replace(r,"0");if(this.Dn.has(i))return Yt(this.Dn.get(i)).En;if(this.kn===this.Vn){const l=this.Rn[this.Tn];delete this.Rn[this.Tn],this.Dn.delete(l),this.Tn++,this.kn--}e.save(),e.textBaseline="middle";const o=e.measureText(i);return e.restore(),o.width===0&&n.length||(this.Dn.set(i,{En:o,An:this.yn}),this.Rn[this.yn]=i,this.kn++,this.yn++),o}}class W3{constructor(e){this.zn=null,this.M=null,this.Ln="right",this.On=e}Nn(e,n,s){this.zn=e,this.M=n,this.Ln=s}nt(e){this.M!==null&&this.zn!==null&&this.zn.nt(e,this.M,this.On,this.Ln)}}class ZN{constructor(e,n,s){this.Fn=e,this.On=new Dc(50),this.Wn=n,this.O=s,this.F=-1,this.Gt=new W3(this.On)}Tt(){const e=this.O.Hn(this.Wn);if(e===null)return null;const n=e.Un(this.Wn)?e.$n():this.Wn.Ft();if(n===null)return null;const s=e.qn(n);if(s==="overlay")return null;const r=this.O.Yn();return r.P!==this.F&&(this.F=r.P,this.On.In()),this.Gt.Nn(this.Fn.$i(),r,s),this.Gt}}class H3 extends fs{constructor(){super(...arguments),this.Yt=null}ht(e){this.Yt=e}jn(e,n){var o;if(!((o=this.Yt)!=null&&o.Vt))return null;const{ut:s,ct:r,Kn:i}=this.Yt;return n>=s-r-7&&n<=s+r+7?{Xn:this.Yt,Kn:i}:null}et({context:e,bitmapSize:n,horizontalPixelRatio:s,verticalPixelRatio:r}){if(this.Yt===null||this.Yt.Vt===!1)return;const i=Math.round(this.Yt.ut*r);i<0||i>n.height||(e.lineCap="butt",e.strokeStyle=this.Yt.R,e.lineWidth=Math.floor(this.Yt.ct*s),Or(e,this.Yt.Xt),HN(e,i,0,n.width))}}class sg{constructor(e){this.Zn={ut:0,R:"rgba(0, 0, 0, 0)",ct:1,Xt:0,Vt:!1},this.Gn=new H3,this.xt=!0,this.Jn=e,this.Qn=e.Qt(),this.Gn.ht(this.Zn)}kt(){this.xt=!0}Tt(){return this.Jn.Vt()?(this.xt&&(this.te(),this.xt=!1),this.Gn):null}}class Y3 extends sg{constructor(e){super(e)}te(){this.Zn.Vt=!1;const e=this.Jn.Ft(),n=e.ie().ie;if(n!==2&&n!==3)return;const s=this.Jn.N();if(!s.baseLineVisible||!this.Jn.Vt())return;const r=this.Jn.zt();r!==null&&(this.Zn.Vt=!0,this.Zn.ut=e.Nt(r.Wt,r.Wt),this.Zn.R=s.baseLineColor,this.Zn.ct=s.baseLineWidth,this.Zn.Xt=s.baseLineStyle)}}class q3 extends fs{constructor(){super(...arguments),this.Yt=null}ht(e){this.Yt=e}se(){return this.Yt}et({context:e,horizontalPixelRatio:n,verticalPixelRatio:s}){const r=this.Yt;if(r===null)return;const i=Math.max(1,Math.floor(n)),o=i%2/2,l=Math.round(r.ne.x*n)+o,c=r.ne.y*s;e.fillStyle=r.ee,e.beginPath();const u=Math.max(2,1.5*r.re)*n;e.arc(l,c,u,0,2*Math.PI,!1),e.fill(),e.fillStyle=r.he,e.beginPath(),e.arc(l,c,r.ft*n,0,2*Math.PI,!1),e.fill(),e.lineWidth=i,e.strokeStyle=r.ae,e.beginPath(),e.arc(l,c,r.ft*n+i/2,0,2*Math.PI,!1),e.stroke()}}const G3=[{le:0,oe:.25,_e:4,ue:10,ce:.25,de:0,fe:.4,pe:.8},{le:.25,oe:.525,_e:10,ue:14,ce:0,de:0,fe:.8,pe:0},{le:.525,oe:1,_e:14,ue:14,ce:0,de:0,fe:0,pe:0}];class Q3{constructor(e){this.Gt=new q3,this.xt=!0,this.ve=!0,this.me=performance.now(),this.we=this.me-1,this.ge=e}Me(){this.we=this.me-1,this.kt()}be(){if(this.kt(),this.ge.N().lastPriceAnimation===2){const e=performance.now(),n=this.we-e;if(n>0)return void(n<650&&(this.we+=2600));this.me=e,this.we=e+2600}}kt(){this.xt=!0}Se(){this.ve=!0}Vt(){return this.ge.N().lastPriceAnimation!==0}xe(){switch(this.ge.N().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.we}}Tt(){return this.xt?(this.Rt(),this.xt=!1,this.ve=!1):this.ve&&(this.Ce(),this.ve=!1),this.Gt}Rt(){this.Gt.ht(null);const e=this.ge.Qt().Et(),n=e.Pe(),s=this.ge.zt();if(n===null||s===null)return;const r=this.ge.ke(!0);if(r.ye||!n.Te(r.Re))return;const i={x:e.qt(r.Re),y:this.ge.Ft().Nt(r.gt,s.Wt)},o=r.R,l=this.ge.N().lineWidth,c=this.De(this.Ve(),o);this.Gt.ht({ee:o,re:l,he:c.he,ae:c.ae,ft:c.ft,ne:i})}Ce(){const e=this.Gt.se();if(e!==null){const n=this.De(this.Ve(),e.ee);e.he=n.he,e.ae=n.ae,e.ft=n.ft}}Ve(){return this.xe()?performance.now()-this.me:2599}Ie(e,n,s,r){const i=s+(r-s)*n;return this.ge.Qt().Xi().j(e,i)}De(e,n){const s=e%2600/2600;let r;for(const u of G3)if(s>=u.le&&s<=u.oe){r=u;break}mt(r!==void 0,"Last price animation internal logic error");const i=(s-r.le)/(r.oe-r.le);return{he:this.Ie(n,i,r.ce,r.de),ae:this.Ie(n,i,r.fe,r.pe),ft:(o=i,l=r._e,c=r.ue,l+(c-l)*o)};var o,l,c}}class K3 extends sg{constructor(e){super(e)}te(){const e=this.Zn;e.Vt=!1;const n=this.Jn.N();if(!n.priceLineVisible||!this.Jn.Vt())return;const s=this.Jn.ke(n.priceLineSource===0);s.ye||(e.Vt=!0,e.ut=s.Bi,e.R=this.Jn.Be(s.R),e.ct=n.priceLineWidth,e.Xt=n.priceLineStyle)}}class X3 extends Au{constructor(e){super(),this.Jt=e}qi(e,n,s){e.Vt=!1,n.Vt=!1;const r=this.Jt;if(!r.Vt())return;const i=r.N(),o=i.lastValueVisible,l=r.Ee()!=="",c=i.seriesLastValueMode===0,u=r.ke(!1);if(u.ye)return;o&&(e.ri=this.Ae(u,o,c),e.Vt=e.ri.length!==0),(l||c)&&(n.ri=this.ze(u,o,l,c),n.Vt=n.ri.length>0);const h=r.Be(u.R),d=this.Jt.Qt().Xi().X(h);s.Z=d.Z,s.Bi=u.Bi,n.Ht=r.Qt().Ut(u.Bi/r.Ft().$t()),e.Ht=h,e.R=d.G,n.R=d.G}ze(e,n,s,r){let i="";const o=this.Jt.Ee();return s&&o.length!==0&&(i+=`${o} `),n&&r&&(i+=this.Jt.Ft().Le()?e.Oe:e.Ne),i.trim()}Ae(e,n,s){return n?s?this.Jt.Ft().Le()?e.Ne:e.Oe:e.ri:""}}function U0(t,e,n,s){const r=Number.isFinite(e),i=Number.isFinite(n);return r&&i?t(e,n):r||i?r?e:n:s}class Rt{constructor(e,n){this.Fe=e,this.We=n}He(e){return e!==null&&this.Fe===e.Fe&&this.We===e.We}Ue(){return new Rt(this.Fe,this.We)}$e(){return this.Fe}qe(){return this.We}Ye(){return this.We-this.Fe}Ki(){return this.We===this.Fe||Number.isNaN(this.We)||Number.isNaN(this.Fe)}vn(e){return e===null?this:new Rt(U0(Math.min,this.$e(),e.$e(),-1/0),U0(Math.max,this.qe(),e.qe(),1/0))}je(e){if(!Di(e)||this.We-this.Fe===0)return;const n=.5*(this.We+this.Fe);let s=this.We-n,r=this.Fe-n;s*=e,r*=e,this.We=n+s,this.Fe=n+r}Ke(e){Di(e)&&(this.We+=e,this.Fe+=e)}Xe(){return{minValue:this.Fe,maxValue:this.We}}static Ze(e){return e===null?null:new Rt(e.minValue,e.maxValue)}}class Fc{constructor(e,n){this.Ge=e,this.Je=n||null}Qe(){return this.Ge}tr(){return this.Je}Xe(){return{priceRange:this.Ge===null?null:this.Ge.Xe(),margins:this.Je||void 0}}static Ze(e){return e===null?null:new Fc(Rt.Ze(e.priceRange),e.margins)}}class J3 extends sg{constructor(e,n){super(e),this.ir=n}te(){const e=this.Zn;e.Vt=!1;const n=this.ir.N();if(!this.Jn.Vt()||!n.lineVisible)return;const s=this.ir.sr();s!==null&&(e.Vt=!0,e.ut=s,e.R=n.color,e.ct=n.lineWidth,e.Xt=n.lineStyle,e.Kn=this.ir.N().id)}}class Z3 extends Au{constructor(e,n){super(),this.ge=e,this.ir=n}qi(e,n,s){e.Vt=!1,n.Vt=!1;const r=this.ir.N(),i=r.axisLabelVisible,o=r.title!=="",l=this.ge;if(!i||!l.Vt())return;const c=this.ir.sr();if(c===null)return;o&&(n.ri=r.title,n.Vt=!0),n.Ht=l.Qt().Ut(c/l.Ft().$t()),e.ri=this.nr(r.price),e.Vt=!0;const u=this.ge.Qt().Xi().X(r.axisLabelColor||r.color);s.Z=u.Z;const h=r.axisLabelTextColor||u.G;e.R=h,n.R=h,s.Bi=c}nr(e){const n=this.ge.zt();return n===null?"":this.ge.Ft().Zi(e,n.Wt)}}class eD{constructor(e,n){this.ge=e,this.Ps=n,this.er=new J3(e,this),this.Fn=new Z3(e,this),this.rr=new ZN(this.Fn,e,e.Qt())}hr(e){Zt(this.Ps,e),this.kt(),this.ge.Qt().ar()}N(){return this.Ps}lr(){return this.er}_r(){return this.rr}ur(){return this.Fn}kt(){this.er.kt(),this.Fn.kt()}sr(){const e=this.ge,n=e.Ft();if(e.Qt().Et().Ki()||n.Ki())return null;const s=e.zt();return s===null?null:n.Nt(this.Ps.price,s.Wt)}}class tD extends KN{constructor(e){super(),this.ts=e}Qt(){return this.ts}}const nD={Bar:(t,e,n,s)=>{const r=e.upColor,i=e.downColor,o=G(t(n,s)),l=Es(o.Wt[0])<=Es(o.Wt[3]);return{cr:o.R??(l?r:i)}},Candlestick:(t,e,n,s)=>{const r=e.upColor,i=e.downColor,o=e.borderUpColor,l=e.borderDownColor,c=e.wickUpColor,u=e.wickDownColor,h=G(t(n,s)),d=Es(h.Wt[0])<=Es(h.Wt[3]);return{cr:h.R??(d?r:i),dr:h.Ht??(d?o:l),pr:h.vr??(d?c:u)}},Custom:(t,e,n,s)=>({cr:G(t(n,s)).R??e.color}),Area:(t,e,n,s)=>{const r=G(t(n,s));return{cr:r.vt??e.lineColor,vt:r.vt??e.lineColor,mr:r.mr??e.topColor,wr:r.wr??e.bottomColor}},Baseline:(t,e,n,s)=>{const r=G(t(n,s));return{cr:r.Wt[3]>=e.baseValue.price?e.topLineColor:e.bottomLineColor,gr:r.gr??e.topLineColor,Mr:r.Mr??e.bottomLineColor,br:r.br??e.topFillColor1,Sr:r.Sr??e.topFillColor2,Cr:r.Cr??e.bottomFillColor1,Pr:r.Pr??e.bottomFillColor2}},Line:(t,e,n,s)=>{const r=G(t(n,s));return{cr:r.R??e.color,vt:r.R??e.color}},Histogram:(t,e,n,s)=>({cr:G(t(n,s)).R??e.color})};class sD{constructor(e){this.kr=(n,s)=>s!==void 0?s.Wt:this.ge.Xs().yr(n),this.ge=e,this.Tr=nD[e.Rr()]}Dr(e,n){return this.Tr(this.kr,this.ge.N(),e,n)}}function ej(t,e,n,s,r=0,i=e.length){let o=i-r;for(;0<o;){const l=o>>1,c=r+l;s(e[c],n)===t?(r=c+1,o-=l+1):o=l}return r}const Fi=ej.bind(null,!0),tj=ej.bind(null,!1);var W0;(function(t){t[t.NearestLeft=-1]="NearestLeft",t[t.None=0]="None",t[t.NearestRight=1]="NearestRight"})(W0||(W0={}));const gs=30;class rD{constructor(){this.Vr=[],this.Ir=new Map,this.Br=new Map,this.Er=[]}Ar(){return this.zr()>0?this.Vr[this.Vr.length-1]:null}Lr(){return this.zr()>0?this.Or(0):null}Ks(){return this.zr()>0?this.Or(this.Vr.length-1):null}zr(){return this.Vr.length}Ki(){return this.zr()===0}Te(e){return this.Nr(e,0)!==null}yr(e){return this.Fr(e)}Fr(e,n=0){const s=this.Nr(e,n);return s===null?null:{...this.Wr(s),Re:this.Or(s)}}Hr(){return this.Vr}Ur(e,n,s){if(this.Ki())return null;let r=null;for(const i of s)r=dl(r,this.$r(e,n,i));return r}ht(e){this.Br.clear(),this.Ir.clear(),this.Vr=e,this.Er=e.map(n=>n.Re)}qr(){return this.Er}Or(e){return this.Vr[e].Re}Wr(e){return this.Vr[e]}Nr(e,n){const s=this.Yr(e);if(s===null&&n!==0)switch(n){case-1:return this.jr(e);case 1:return this.Kr(e);default:throw new TypeError("Unknown search mode")}return s}jr(e){let n=this.Xr(e);return n>0&&(n-=1),n!==this.Vr.length&&this.Or(n)<e?n:null}Kr(e){const n=this.Zr(e);return n!==this.Vr.length&&e<this.Or(n)?n:null}Yr(e){const n=this.Xr(e);return n===this.Vr.length||e<this.Vr[n].Re?null:n}Xr(e){return Fi(this.Vr,e,(n,s)=>n.Re<s)}Zr(e){return tj(this.Vr,e,(n,s)=>n.Re>s)}Gr(e,n,s){let r=null;for(let i=e;i<n;i++){const o=this.Vr[i].Wt[s];Number.isNaN(o)||(r===null?r={Jr:o,Qr:o}:(o<r.Jr&&(r.Jr=o),o>r.Qr&&(r.Qr=o)))}return r}$r(e,n,s){if(this.Ki())return null;let r=null;const i=G(this.Lr()),o=G(this.Ks()),l=Math.max(e,i),c=Math.min(n,o),u=Math.ceil(l/gs)*gs,h=Math.max(u,Math.floor(c/gs)*gs);{const f=this.Xr(l),x=this.Zr(Math.min(c,u,n));r=dl(r,this.Gr(f,x,s))}let d=this.Ir.get(s);d===void 0&&(d=new Map,this.Ir.set(s,d));for(let f=Math.max(u+1,l);f<h;f+=gs){const x=Math.floor(f/gs);let p=d.get(x);if(p===void 0){const y=this.Xr(x*gs),w=this.Zr((x+1)*gs-1);p=this.Gr(y,w,s),d.set(x,p)}r=dl(r,p)}{const f=this.Xr(h),x=this.Zr(c);r=dl(r,this.Gr(f,x,s))}return r}}function dl(t,e){return t===null?e:e===null?t:{Jr:Math.min(t.Jr,e.Jr),Qr:Math.max(t.Qr,e.Qr)}}class iD{constructor(e){this.th=e}nt(e,n,s){this.th.draw(e)}ih(e,n,s){var r,i;(i=(r=this.th).drawBackground)==null||i.call(r,e)}}class aD{constructor(e){this.Dn=null,this.sh=e}Tt(){var s;const e=this.sh.renderer();if(e===null)return null;if(((s=this.Dn)==null?void 0:s.nh)===e)return this.Dn.eh;const n=new iD(e);return this.Dn={nh:e,eh:n},n}rh(){var e,n;return((n=(e=this.sh).zOrder)==null?void 0:n.call(e))??"normal"}}class nj{constructor(e){this.hh=null,this.ah=e}oh(){return this.ah}Ns(){var e,n;(n=(e=this.ah).updateAllViews)==null||n.call(e)}Fs(){var s,r,i;const e=((r=(s=this.ah).paneViews)==null?void 0:r.call(s))??[];if(((i=this.hh)==null?void 0:i.nh)===e)return this.hh.eh;const n=e.map(o=>new aD(o));return this.hh={nh:e,eh:n},n}jn(e,n){var s,r;return((r=(s=this.ah).hitTest)==null?void 0:r.call(s,e,n))??null}}let oD=class extends nj{us(){return[]}};class lD{constructor(e){this.th=e}nt(e,n,s){this.th.draw(e)}ih(e,n,s){var r,i;(i=(r=this.th).drawBackground)==null||i.call(r,e)}}class H0{constructor(e){this.Dn=null,this.sh=e}Tt(){var s;const e=this.sh.renderer();if(e===null)return null;if(((s=this.Dn)==null?void 0:s.nh)===e)return this.Dn.eh;const n=new lD(e);return this.Dn={nh:e,eh:n},n}rh(){var e,n;return((n=(e=this.sh).zOrder)==null?void 0:n.call(e))??"normal"}}function sj(t){var e,n,s;return{ri:t.text(),Bi:t.coordinate(),Ii:(e=t.fixedCoordinate)==null?void 0:e.call(t),R:t.textColor(),Z:t.backColor(),Vt:((n=t.visible)==null?void 0:n.call(t))??!0,pi:((s=t.tickVisible)==null?void 0:s.call(t))??!0}}class cD{constructor(e,n){this.Gt=new QN,this._h=e,this.uh=n}Tt(){return this.Gt.ht({Qi:this.uh.Qi(),...sj(this._h)}),this.Gt}}class uD extends Au{constructor(e,n){super(),this._h=e,this.Yi=n}qi(e,n,s){const r=sj(this._h);s.Z=r.Z,e.R=r.R;const i=2/12*this.Yi.P();s.Ti=i,s.Ri=i,s.Bi=r.Bi,s.Ii=r.Ii,e.ri=r.ri,e.Vt=r.Vt,e.pi=r.pi}}class hD extends nj{constructor(e,n){super(e),this.dh=null,this.fh=null,this.ph=null,this.mh=null,this.ge=n}cs(){var r,i,o;const e=((i=(r=this.ah).timeAxisViews)==null?void 0:i.call(r))??[];if(((o=this.dh)==null?void 0:o.nh)===e)return this.dh.eh;const n=this.ge.Qt().Et(),s=e.map(l=>new cD(l,n));return this.dh={nh:e,eh:s},s}Ws(){var r,i,o;const e=((i=(r=this.ah).priceAxisViews)==null?void 0:i.call(r))??[];if(((o=this.fh)==null?void 0:o.nh)===e)return this.fh.eh;const n=this.ge.Ft(),s=e.map(l=>new uD(l,n));return this.fh={nh:e,eh:s},s}wh(){var s,r,i;const e=((r=(s=this.ah).priceAxisPaneViews)==null?void 0:r.call(s))??[];if(((i=this.ph)==null?void 0:i.nh)===e)return this.ph.eh;const n=e.map(o=>new H0(o));return this.ph={nh:e,eh:n},n}gh(){var s,r,i;const e=((r=(s=this.ah).timeAxisPaneViews)==null?void 0:r.call(s))??[];if(((i=this.mh)==null?void 0:i.nh)===e)return this.mh.eh;const n=e.map(o=>new H0(o));return this.mh={nh:e,eh:n},n}Mh(e,n){var s,r;return((r=(s=this.ah).autoscaleInfo)==null?void 0:r.call(s,e,n))??null}}function sd(t,e,n,s){t.forEach(r=>{e(r).forEach(i=>{i.rh()===n&&s.push(i)})})}function rd(t){return t.Fs()}function dD(t){return t.wh()}function fD(t){return t.gh()}const pD=["Area","Line","Baseline"];class Fu extends tD{constructor(e,n,s,r,i){super(e),this.Yt=new rD,this.er=new K3(this),this.bh=[],this.Sh=new Y3(this),this.xh=null,this.Ch=null,this.Ph=null,this.kh=[],this.Ps=s,this.yh=n;const o=new X3(this);this.vs=[o],this.rr=new ZN(o,this,e),pD.includes(this.yh)&&(this.xh=new Q3(this)),this.Th(),this.sh=r(this,this.Qt(),i)}m(){this.Ph!==null&&clearTimeout(this.Ph)}Be(e){return this.Ps.priceLineColor||e}ke(e){const n={ye:!0},s=this.Ft();if(this.Qt().Et().Ki()||s.Ki()||this.Yt.Ki())return n;const r=this.Qt().Et().Pe(),i=this.zt();if(r===null||i===null)return n;let o,l;if(e){const d=this.Yt.Ar();if(d===null)return n;o=d,l=d.Re}else{const d=this.Yt.Fr(r.bi(),-1);if(d===null||(o=this.Yt.yr(d.Re),o===null))return n;l=d.Re}const c=o.Wt[3],u=this.Rh().Dr(l,{Wt:o}),h=s.Nt(c,i.Wt);return{ye:!1,gt:c,ri:s.Zi(c,i.Wt),Oe:s.Dh(c),Ne:s.Vh(c,i.Wt),R:u.cr,Bi:h,Re:l}}Rh(){return this.Ch!==null||(this.Ch=new sD(this)),this.Ch}N(){return this.Ps}hr(e){const n=e.priceScaleId;n!==void 0&&n!==this.Ps.priceScaleId&&this.Qt().Ih(this,n),Zt(this.Ps,e),e.priceFormat!==void 0&&(this.Th(),this.Qt().Bh()),this.Qt().Eh(this),this.Qt().Ah(),this.sh.kt("options")}ht(e,n){this.Yt.ht(e),this.sh.kt("data"),this.xh!==null&&(n&&n.zh?this.xh.be():e.length===0&&this.xh.Me());const s=this.Qt().Hn(this);this.Qt().Lh(s),this.Qt().Eh(this),this.Qt().Ah(),this.Qt().ar()}Oh(e){const n=new eD(this,e);return this.bh.push(n),this.Qt().Eh(this),n}Nh(e){const n=this.bh.indexOf(e);n!==-1&&this.bh.splice(n,1),this.Qt().Eh(this)}Fh(){return this.bh}Rr(){return this.yh}zt(){const e=this.Wh();return e===null?null:{Wt:e.Wt[3],Hh:e.wt}}Wh(){const e=this.Qt().Et().Pe();if(e===null)return null;const n=e.Uh();return this.Yt.Fr(n,1)}Xs(){return this.Yt}$h(e){const n=this.Yt.yr(e);return n===null?null:this.yh==="Bar"||this.yh==="Candlestick"||this.yh==="Custom"?{qh:n.Wt[0],Yh:n.Wt[1],jh:n.Wt[2],Kh:n.Wt[3]}:n.Wt[3]}Xh(e){const n=[];sd(this.kh,rd,"top",n);const s=this.xh;return s!==null&&s.Vt()&&(this.Ph===null&&s.xe()&&(this.Ph=setTimeout(()=>{this.Ph=null,this.Qt().Zh()},0)),s.Se(),n.unshift(s)),n}Fs(){const e=[];this.Gh()||e.push(this.Sh),e.push(this.sh,this.er);const n=this.bh.map(s=>s.lr());return e.push(...n),sd(this.kh,rd,"normal",e),e}Jh(){return this.Qh(rd,"bottom")}ta(e){return this.Qh(dD,e)}ia(e){return this.Qh(fD,e)}sa(e,n){return this.kh.map(s=>s.jn(e,n)).filter(s=>s!==null)}us(){return[this.rr,...this.bh.map(e=>e._r())]}Ws(e,n){if(n!==this.es&&!this.Gh())return[];const s=[...this.vs];for(const r of this.bh)s.push(r.ur());return this.kh.forEach(r=>{s.push(...r.Ws())}),s}cs(){const e=[];return this.kh.forEach(n=>{e.push(...n.cs())}),e}Mh(e,n){if(this.Ps.autoscaleInfoProvider!==void 0){const s=this.Ps.autoscaleInfoProvider(()=>{const r=this.na(e,n);return r===null?null:r.Xe()});return Fc.Ze(s)}return this.na(e,n)}ea(){return this.Ps.priceFormat.minMove}ra(){return this.ha}Ns(){var e;this.sh.kt();for(const n of this.vs)n.kt();for(const n of this.bh)n.kt();this.er.kt(),this.Sh.kt(),(e=this.xh)==null||e.kt(),this.kh.forEach(n=>n.Ns())}Ft(){return G(super.Ft())}At(e){if(!((this.yh==="Line"||this.yh==="Area"||this.yh==="Baseline")&&this.Ps.crosshairMarkerVisible))return null;const n=this.Yt.yr(e);return n===null?null:{gt:n.Wt[3],ft:this.aa(),Ht:this.la(),Ot:this.oa(),Lt:this._a(e)}}Ee(){return this.Ps.title}Vt(){return this.Ps.visible}ua(e){this.kh.push(new hD(e,this))}ca(e){this.kh=this.kh.filter(n=>n.oh()!==e)}da(){if(this.yh==="Custom")return e=>this.sh.fa(e)}pa(){if(this.yh==="Custom")return e=>this.sh.va(e)}ma(){return this.Yt.qr()}Gh(){return!Ou(this.Ft().wa())}na(e,n){if(!fo(e)||!fo(n)||this.Yt.Ki())return null;const s=this.yh==="Line"||this.yh==="Area"||this.yh==="Baseline"||this.yh==="Histogram"?[3]:[2,1],r=this.Yt.Ur(e,n,s);let i=r!==null?new Rt(r.Jr,r.Qr):null,o=null;if(this.Rr()==="Histogram"){const l=this.Ps.base,c=new Rt(l,l);i=i!==null?i.vn(c):c}return this.kh.forEach(l=>{const c=l.Mh(e,n);if(c!=null&&c.priceRange){const u=new Rt(c.priceRange.minValue,c.priceRange.maxValue);i=i!==null?i.vn(u):u}c!=null&&c.margins&&(o=c.margins)}),new Fc(i,o)}aa(){switch(this.yh){case"Line":case"Area":case"Baseline":return this.Ps.crosshairMarkerRadius}return 0}la(){switch(this.yh){case"Line":case"Area":case"Baseline":{const e=this.Ps.crosshairMarkerBorderColor;if(e.length!==0)return e}}return null}oa(){switch(this.yh){case"Line":case"Area":case"Baseline":return this.Ps.crosshairMarkerBorderWidth}return 0}_a(e){switch(this.yh){case"Line":case"Area":case"Baseline":{const n=this.Ps.crosshairMarkerBackgroundColor;if(n.length!==0)return n}}return this.Rh().Dr(e).cr}Th(){switch(this.Ps.priceFormat.type){case"custom":{const e=this.Ps.priceFormat.formatter;this.ha={format:e,formatTickmarks:this.Ps.priceFormat.tickmarksFormatter??(n=>n.map(e))};break}case"volume":this.ha=new V3(this.Ps.priceFormat.precision);break;case"percent":this.ha=new JN(this.Ps.priceFormat.precision);break;default:{const e=Math.pow(10,this.Ps.priceFormat.precision);this.ha=new Du(e,this.Ps.priceFormat.minMove*e)}}this.es!==null&&this.es.ga()}Qh(e,n){const s=[];return sd(this.kh,e,n,s),s}}const mD=[3],gD=[0,1,2,3];class yD{constructor(e){this.Ps=e}Ma(e,n,s){let r=e;if(this.Ps.mode===0)return r;const i=s.ys(),o=i.zt();if(o===null)return r;const l=i.Nt(e,o),c=s.ba().filter(h=>h instanceof Fu).reduce((h,d)=>{if(s.Un(d)||!d.Vt())return h;const f=d.Ft(),x=d.Xs();if(f.Ki()||!x.Te(n))return h;const p=x.yr(n);if(p===null)return h;const y=Es(d.zt()),w=this.Ps.mode===3?gD:mD;return h.concat(w.map(m=>f.Nt(p.Wt[m],y.Wt)))},[]);if(c.length===0)return r;c.sort((h,d)=>Math.abs(h-l)-Math.abs(d-l));const u=c[0];return r=i.Ts(u,o),r}}function Ni(t,e,n){return Math.min(Math.max(t,e),n)}function fl(t,e,n){return e-t<=n}class vD extends fs{constructor(){super(...arguments),this.Yt=null}ht(e){this.Yt=e}et({context:e,bitmapSize:n,horizontalPixelRatio:s,verticalPixelRatio:r}){if(this.Yt===null)return;const i=Math.max(1,Math.floor(s));e.lineWidth=i,function(o,l){o.save(),o.lineWidth%2&&o.translate(.5,.5),l(),o.restore()}(e,()=>{const o=G(this.Yt);if(o.Sa){e.strokeStyle=o.xa,Or(e,o.Ca),e.beginPath();for(const l of o.Pa){const c=Math.round(l.ka*s);e.moveTo(c,-i),e.lineTo(c,n.height+i)}e.stroke()}if(o.ya){e.strokeStyle=o.Ta,Or(e,o.Ra),e.beginPath();for(const l of o.Da){const c=Math.round(l.ka*r);e.moveTo(-i,c),e.lineTo(n.width+i,c)}e.stroke()}})}}class xD{constructor(e){this.Gt=new vD,this.xt=!0,this.Pt=e}kt(){this.xt=!0}Tt(){if(this.xt){const e=this.Pt.Qt().N().grid,n={ya:e.horzLines.visible,Sa:e.vertLines.visible,Ta:e.horzLines.color,xa:e.vertLines.color,Ra:e.horzLines.style,Ca:e.vertLines.style,Da:this.Pt.ys().Va(),Pa:(this.Pt.Qt().Et().Va()||[]).map(s=>({ka:s.coord}))};this.Gt.ht(n),this.xt=!1}return this.Gt}}class wD{constructor(e){this.sh=new xD(e)}lr(){return this.sh}}const id={Ia:4,Ba:1e-4};function mi(t,e){const n=100*(t-e)/e;return e<0?-n:n}function SD(t,e){const n=mi(t.$e(),e),s=mi(t.qe(),e);return new Rt(n,s)}function Oa(t,e){const n=100*(t-e)/e+100;return e<0?-n:n}function bD(t,e){const n=Oa(t.$e(),e),s=Oa(t.qe(),e);return new Rt(n,s)}function Bc(t,e){const n=Math.abs(t);if(n<1e-15)return 0;const s=Math.log10(n+e.Ba)+e.Ia;return t<0?-s:s}function Da(t,e){const n=Math.abs(t);if(n<1e-15)return 0;const s=Math.pow(10,n-e.Ia)-e.Ba;return t<0?-s:s}function ca(t,e){if(t===null)return null;const n=Bc(t.$e(),e),s=Bc(t.qe(),e);return new Rt(n,s)}function va(t,e){if(t===null)return null;const n=Da(t.$e(),e),s=Da(t.qe(),e);return new Rt(n,s)}function ad(t){if(t===null)return id;const e=Math.abs(t.qe()-t.$e());if(e>=1||e<1e-15)return id;const n=Math.ceil(Math.abs(Math.log10(e))),s=id.Ia+n;return{Ia:s,Ba:1/Math.pow(10,s)}}class od{constructor(e,n){if(this.Ea=e,this.Aa=n,function(s){if(s<0)return!1;for(let r=s;r>1;r/=10)if(r%10!=0)return!1;return!0}(this.Ea))this.za=[2,2.5,2];else{this.za=[];for(let s=this.Ea;s!==1;){if(s%2==0)this.za.push(2),s/=2;else{if(s%5!=0)throw new Error("unexpected base");this.za.push(2,2.5),s/=5}if(this.za.length>100)throw new Error("something wrong with base")}}}La(e,n,s){const r=this.Ea===0?0:1/this.Ea;let i=Math.pow(10,Math.max(0,Math.ceil(Math.log10(e-n)))),o=0,l=this.Aa[0];for(;;){const d=fl(i,r,1e-14)&&i>r+1e-14,f=fl(i,s*l,1e-14),x=fl(i,1,1e-14);if(!(d&&f&&x))break;i/=l,l=this.Aa[++o%this.Aa.length]}if(i<=r+1e-14&&(i=r),i=Math.max(1,i),this.za.length>0&&(c=i,u=1,h=1e-14,Math.abs(c-u)<h))for(o=0,l=this.za[0];fl(i,s*l,1e-14)&&i>r+1e-14;)i/=l,l=this.za[++o%this.za.length];var c,u,h;return i}}class Y0{constructor(e,n,s,r){this.Oa=[],this.Yi=e,this.Ea=n,this.Na=s,this.Fa=r}La(e,n){if(e<n)throw new Error("high < low");const s=this.Yi.$t(),r=(e-n)*this.Wa()/s,i=new od(this.Ea,[2,2.5,2]),o=new od(this.Ea,[2,2,2.5]),l=new od(this.Ea,[2.5,2,2]),c=[];return c.push(i.La(e,n,r),o.La(e,n,r),l.La(e,n,r)),function(u){if(u.length<1)throw Error("array is empty");let h=u[0];for(let d=1;d<u.length;++d)u[d]<h&&(h=u[d]);return h}(c)}Ha(){const e=this.Yi,n=e.zt();if(n===null)return void(this.Oa=[]);const s=e.$t(),r=this.Na(s-1,n),i=this.Na(0,n),o=this.Yi.N().entireTextOnly?this.Ua()/2:0,l=o,c=s-1-o,u=Math.max(r,i),h=Math.min(r,i);if(u===h)return void(this.Oa=[]);const d=this.La(u,h);if(this.$a(n,d,u,h,l,c),e.qa()&&this.Ya(d,h,u)){const p=this.Yi.ja();this.Ka(n,d,l,c,p,2*p)}const f=this.Oa.map(p=>p.Xa),x=this.Yi.Za(f);for(let p=0;p<this.Oa.length;p++)this.Oa[p].Ga=x[p]}Va(){return this.Oa}Ua(){return this.Yi.P()}Wa(){return Math.ceil(2.5*this.Ua())}$a(e,n,s,r,i,o){const l=this.Oa,c=this.Yi;let u=s%n;u+=u<0?n:0;const h=s>=r?1:-1;let d=null,f=0;for(let x=s-u;x>r;x-=n){const p=this.Fa(x,e,!0);d!==null&&Math.abs(p-d)<this.Wa()||p<i||p>o||(f<l.length?(l[f].ka=p,l[f].Ga=c.Ja(x),l[f].Xa=x):l.push({ka:p,Ga:c.Ja(x),Xa:x}),f++,d=p,c.Qa()&&(n=this.La(x*h,r)))}l.length=f}Ka(e,n,s,r,i,o){const l=this.Oa,c=this.tl(e,s,i,o),u=this.tl(e,r,-o,-i),h=this.Fa(0,e,!0)-this.Fa(n,e,!0);l.length>0&&l[0].ka-c.ka<h/2&&l.shift(),l.length>0&&u.ka-l[l.length-1].ka<h/2&&l.pop(),l.unshift(c),l.push(u)}tl(e,n,s,r){const i=(s+r)/2,o=this.Na(n+s,e),l=this.Na(n+r,e),c=Math.min(o,l),u=Math.max(o,l),h=Math.max(.1,this.La(u,c)),d=this.Na(n+i,e),f=d-d%h,x=this.Fa(f,e,!0);return{Ga:this.Yi.Ja(f),ka:x,Xa:f}}Ya(e,n,s){let r=Es(this.Yi.Qe());return this.Yi.Qa()&&(r=va(r,this.Yi.il())),r.$e()-n<e&&s-r.qe()<e}}function rj(t){return t.slice().sort((e,n)=>G(e.hs())-G(n.hs()))}var q0;(function(t){t[t.Normal=0]="Normal",t[t.Logarithmic=1]="Logarithmic",t[t.Percentage=2]="Percentage",t[t.IndexedTo100=3]="IndexedTo100"})(q0||(q0={}));const G0=new JN,Q0=new Du(100,1);class ND{constructor(e,n,s,r,i){this.sl=0,this.nl=null,this.Ge=null,this.el=null,this.rl={hl:!1,al:null},this.ll=!1,this.ol=0,this._l=0,this.ul=new tt,this.cl=new tt,this.dl=[],this.fl=null,this.pl=null,this.vl=null,this.ml=null,this.wl=null,this.ha=Q0,this.gl=ad(null),this.Ml=e,this.Ps=n,this.bl=s,this.Sl=r,this.xl=i,this.Cl=new Y0(this,100,this.Pl.bind(this),this.kl.bind(this))}wa(){return this.Ml}N(){return this.Ps}hr(e){if(Zt(this.Ps,e),this.ga(),e.mode!==void 0&&this.yl({ie:e.mode}),e.scaleMargins!==void 0){const n=Yt(e.scaleMargins.top),s=Yt(e.scaleMargins.bottom);if(n<0||n>1)throw new Error(`Invalid top margin - expect value between 0 and 1, given=${n}`);if(s<0||s>1)throw new Error(`Invalid bottom margin - expect value between 0 and 1, given=${s}`);if(n+s>1)throw new Error(`Invalid margins - sum of margins must be less than 1, given=${n+s}`);this.Tl(),this.vl=null}}Rl(){return this.Ps.autoScale}Dl(){return this.ll}Qa(){return this.Ps.mode===1}Le(){return this.Ps.mode===2}Vl(){return this.Ps.mode===3}il(){return this.gl}ie(){return{sn:this.Ps.autoScale,Il:this.Ps.invertScale,ie:this.Ps.mode}}yl(e){const n=this.ie();let s=null;e.sn!==void 0&&(this.Ps.autoScale=e.sn),e.ie!==void 0&&(this.Ps.mode=e.ie,e.ie!==2&&e.ie!==3||(this.Ps.autoScale=!0),this.rl.hl=!1),n.ie===1&&e.ie!==n.ie&&(function(i,o){if(i===null)return!1;const l=Da(i.$e(),o),c=Da(i.qe(),o);return isFinite(l)&&isFinite(c)}(this.Ge,this.gl)?(s=va(this.Ge,this.gl),s!==null&&this.Bl(s)):this.Ps.autoScale=!0),e.ie===1&&e.ie!==n.ie&&(s=ca(this.Ge,this.gl),s!==null&&this.Bl(s));const r=n.ie!==this.Ps.mode;r&&(n.ie===2||this.Le())&&this.ga(),r&&(n.ie===3||this.Vl())&&this.ga(),e.Il!==void 0&&n.Il!==e.Il&&(this.Ps.invertScale=e.Il,this.El()),this.cl.p(n,this.ie())}Al(){return this.cl}P(){return this.bl.fontSize}$t(){return this.sl}zl(e){this.sl!==e&&(this.sl=e,this.Tl(),this.vl=null)}Ll(){if(this.nl)return this.nl;const e=this.$t()-this.Ol()-this.Nl();return this.nl=e,e}Qe(){return this.Fl(),this.Ge}Bl(e,n){const s=this.Ge;(n||s===null&&e!==null||s!==null&&!s.He(e))&&(this.vl=null,this.Ge=e)}Wl(e){this.Bl(e),this.Hl(e!==null)}Ki(){return this.Fl(),this.sl===0||!this.Ge||this.Ge.Ki()}Ul(e){return this.Il()?e:this.$t()-1-e}Nt(e,n){return this.Le()?e=mi(e,n):this.Vl()&&(e=Oa(e,n)),this.kl(e,n)}$l(e,n,s){this.Fl();const r=this.Nl(),i=G(this.Qe()),o=i.$e(),l=i.qe(),c=this.Ll()-1,u=this.Il(),h=c/(l-o),d=s===void 0?0:s.from,f=s===void 0?e.length:s.to,x=this.ql();for(let p=d;p<f;p++){const y=e[p],w=y.gt;if(isNaN(w))continue;let m=w;x!==null&&(m=x(y.gt,n));const g=r+h*(m-o),S=u?g:this.sl-1-g;y.ut=S}}Yl(e,n,s){this.Fl();const r=this.Nl(),i=G(this.Qe()),o=i.$e(),l=i.qe(),c=this.Ll()-1,u=this.Il(),h=c/(l-o),d=s===void 0?0:s.from,f=s===void 0?e.length:s.to,x=this.ql();for(let p=d;p<f;p++){const y=e[p];let w=y.qh,m=y.Yh,g=y.jh,S=y.Kh;x!==null&&(w=x(y.qh,n),m=x(y.Yh,n),g=x(y.jh,n),S=x(y.Kh,n));let N=r+h*(w-o),C=u?N:this.sl-1-N;y.jl=C,N=r+h*(m-o),C=u?N:this.sl-1-N,y.Kl=C,N=r+h*(g-o),C=u?N:this.sl-1-N,y.Xl=C,N=r+h*(S-o),C=u?N:this.sl-1-N,y.Zl=C}}Ts(e,n){const s=this.Pl(e,n);return this.Gl(s,n)}Gl(e,n){let s=e;return this.Le()?s=function(r,i){return i<0&&(r=-r),r/100*i+i}(s,n):this.Vl()&&(s=function(r,i){return r-=100,i<0&&(r=-r),r/100*i+i}(s,n)),s}ba(){return this.dl}Dt(){return this.pl||(this.pl=rj(this.dl)),this.pl}Jl(e){this.dl.indexOf(e)===-1&&(this.dl.push(e),this.ga(),this.Ql())}io(e){const n=this.dl.indexOf(e);if(n===-1)throw new Error("source is not attached to scale");this.dl.splice(n,1),this.dl.length===0&&(this.yl({sn:!0}),this.Bl(null)),this.ga(),this.Ql()}zt(){let e=null;for(const n of this.dl){const s=n.zt();s!==null&&(e===null||s.Hh<e.Hh)&&(e=s)}return e===null?null:e.Wt}Il(){return this.Ps.invertScale}Va(){const e=this.zt()===null;if(this.vl!==null&&(e||this.vl.so===e))return this.vl.Va;this.Cl.Ha();const n=this.Cl.Va();return this.vl={Va:n,so:e},this.ul.p(),n}no(){return this.ul}eo(e){this.Le()||this.Vl()||this.ml===null&&this.el===null&&(this.Ki()||(this.ml=this.sl-e,this.el=G(this.Qe()).Ue()))}ro(e){if(this.Le()||this.Vl()||this.ml===null)return;this.yl({sn:!1}),(e=this.sl-e)<0&&(e=0);let n=(this.ml+.2*(this.sl-1))/(e+.2*(this.sl-1));const s=G(this.el).Ue();n=Math.max(n,.1),s.je(n),this.Bl(s)}ho(){this.Le()||this.Vl()||(this.ml=null,this.el=null)}ao(e){this.Rl()||this.wl===null&&this.el===null&&(this.Ki()||(this.wl=e,this.el=G(this.Qe()).Ue()))}lo(e){if(this.Rl()||this.wl===null)return;const n=G(this.Qe()).Ye()/(this.Ll()-1);let s=e-this.wl;this.Il()&&(s*=-1);const r=s*n,i=G(this.el).Ue();i.Ke(r),this.Bl(i,!0),this.vl=null}oo(){this.Rl()||this.wl!==null&&(this.wl=null,this.el=null)}ra(){return this.ha||this.ga(),this.ha}Zi(e,n){switch(this.Ps.mode){case 2:return this._o(mi(e,n));case 3:return this.ra().format(Oa(e,n));default:return this.nr(e)}}Ja(e){switch(this.Ps.mode){case 2:return this._o(e);case 3:return this.ra().format(e);default:return this.nr(e)}}Za(e){switch(this.Ps.mode){case 2:return this.uo(e);case 3:return this.ra().formatTickmarks(e);default:return this.co(e)}}Dh(e){return this.nr(e,G(this.fl).ra())}Vh(e,n){return e=mi(e,n),this._o(e,G0)}do(){return this.dl}fo(e){this.rl={al:e,hl:!1}}Ns(){this.dl.forEach(e=>e.Ns())}qa(){return this.Ps.ensureEdgeTickMarksVisible&&this.Rl()}ja(){return this.P()/2}ga(){this.vl=null;let e=1/0;this.fl=null;for(const s of this.dl)s.hs()<e&&(e=s.hs(),this.fl=s);let n=100;this.fl!==null&&(n=Math.round(1/this.fl.ea())),this.ha=Q0,this.Le()?(this.ha=G0,n=100):this.Vl()?(this.ha=new Du(100,1),n=100):this.fl!==null&&(this.ha=this.fl.ra()),this.Cl=new Y0(this,n,this.Pl.bind(this),this.kl.bind(this)),this.Cl.Ha()}Ql(){this.pl=null}Xi(){return this.xl}Hl(e){this.ll=e}Ol(){return this.Il()?this.Ps.scaleMargins.bottom*this.$t()+this._l:this.Ps.scaleMargins.top*this.$t()+this.ol}Nl(){return this.Il()?this.Ps.scaleMargins.top*this.$t()+this.ol:this.Ps.scaleMargins.bottom*this.$t()+this._l}Fl(){this.rl.hl||(this.rl.hl=!0,this.po())}Tl(){this.nl=null}kl(e,n){if(this.Fl(),this.Ki())return 0;e=this.Qa()&&e?Bc(e,this.gl):e;const s=G(this.Qe()),r=this.Nl()+(this.Ll()-1)*(e-s.$e())/s.Ye();return this.Ul(r)}Pl(e,n){if(this.Fl(),this.Ki())return 0;const s=this.Ul(e),r=G(this.Qe()),i=r.$e()+r.Ye()*((s-this.Nl())/(this.Ll()-1));return this.Qa()?Da(i,this.gl):i}El(){this.vl=null,this.Cl.Ha()}po(){if(this.Dl()&&!this.Rl())return;const e=this.rl.al;if(e===null)return;let n=null;const s=this.do();let r=0,i=0;for(const c of s){if(!c.Vt())continue;const u=c.zt();if(u===null)continue;const h=c.Mh(e.Uh(),e.bi());let d=h&&h.Qe();if(d!==null){switch(this.Ps.mode){case 1:d=ca(d,this.gl);break;case 2:d=SD(d,u.Wt);break;case 3:d=bD(d,u.Wt)}if(n=n===null?d:n.vn(G(d)),h!==null){const f=h.tr();f!==null&&(r=Math.max(r,f.above),i=Math.max(i,f.below))}}}if(this.qa()&&(r=Math.max(r,this.ja()),i=Math.max(i,this.ja())),r===this.ol&&i===this._l||(this.ol=r,this._l=i,this.vl=null,this.Tl()),n!==null){if(n.$e()===n.qe()){const c=this.fl,u=5*(c===null||this.Le()||this.Vl()?1:c.ea());this.Qa()&&(n=va(n,this.gl)),n=new Rt(n.$e()-u,n.qe()+u),this.Qa()&&(n=ca(n,this.gl))}if(this.Qa()){const c=va(n,this.gl),u=ad(c);if(o=u,l=this.gl,o.Ia!==l.Ia||o.Ba!==l.Ba){const h=this.el!==null?va(this.el,this.gl):null;this.gl=u,n=ca(c,u),h!==null&&(this.el=ca(h,u))}}this.Bl(n)}else this.Ge===null&&(this.Bl(new Rt(-.5,.5)),this.gl=ad(null));var o,l}ql(){return this.Le()?mi:this.Vl()?Oa:this.Qa()?e=>Bc(e,this.gl):null}vo(e,n,s){return n===void 0?(s===void 0&&(s=this.ra()),s.format(e)):n(e)}mo(e,n,s){return n===void 0?(s===void 0&&(s=this.ra()),s.formatTickmarks(e)):n(e)}nr(e,n){return this.vo(e,this.Sl.priceFormatter,n)}co(e,n){const s=this.Sl.priceFormatter;return this.mo(e,this.Sl.tickmarksPriceFormatter??(s?r=>r.map(s):void 0),n)}_o(e,n){return this.vo(e,this.Sl.percentageFormatter,n)}uo(e,n){const s=this.Sl.percentageFormatter;return this.mo(e,this.Sl.tickmarksPercentageFormatter??(s?r=>r.map(s):void 0),n)}}function K0(t){return t instanceof Fu}class X0{constructor(e,n){this.dl=[],this.wo=new Map,this.sl=0,this.Mo=0,this.bo=1,this.pl=null,this.So=!1,this.xo=new tt,this.kh=[],this.uh=e,this.ts=n,this.Co=new wD(this);const s=n.N();this.Po=this.ko("left",s.leftPriceScale),this.yo=this.ko("right",s.rightPriceScale),this.Po.Al().i(this.To.bind(this,this.Po),this),this.yo.Al().i(this.To.bind(this,this.yo),this),this.Ro(s)}Ro(e){if(e.leftPriceScale&&this.Po.hr(e.leftPriceScale),e.rightPriceScale&&this.yo.hr(e.rightPriceScale),e.localization&&(this.Po.ga(),this.yo.ga()),e.overlayPriceScales){const n=Array.from(this.wo.values());for(const s of n){const r=G(s[0].Ft());r.hr(e.overlayPriceScales),e.localization&&r.ga()}}}Do(e){switch(e){case"left":return this.Po;case"right":return this.yo}return this.wo.has(e)?Yt(this.wo.get(e))[0].Ft():null}m(){this.Qt().Vo().u(this),this.Po.Al().u(this),this.yo.Al().u(this),this.dl.forEach(e=>{e.m&&e.m()}),this.kh=this.kh.filter(e=>{const n=e.oh();return n.detached&&n.detached(),!1}),this.xo.p()}Io(){return this.bo}Bo(e){this.bo=e}Qt(){return this.ts}Qi(){return this.Mo}$t(){return this.sl}Eo(e){this.Mo=e,this.Ao()}zl(e){this.sl=e,this.Po.zl(e),this.yo.zl(e),this.dl.forEach(n=>{if(this.Un(n)){const s=n.Ft();s!==null&&s.zl(e)}}),this.Ao()}zo(e){this.So=e}Lo(){return this.So}Oo(){return this.dl.filter(K0)}ba(){return this.dl}Un(e){const n=e.Ft();return n===null||this.Po!==n&&this.yo!==n}Jl(e,n,s){this.No(e,n,s?e.hs():this.dl.length)}io(e,n){const s=this.dl.indexOf(e);mt(s!==-1,"removeDataSource: invalid data source"),this.dl.splice(s,1),n||this.dl.forEach((o,l)=>o.ls(l));const r=G(e.Ft()).wa();if(this.wo.has(r)){const o=Yt(this.wo.get(r)),l=o.indexOf(e);l!==-1&&(o.splice(l,1),o.length===0&&this.wo.delete(r))}const i=e.Ft();i&&i.ba().indexOf(e)>=0&&(i.io(e),this.Fo(i)),this.pl=null}qn(e){return e===this.Po?"left":e===this.yo?"right":"overlay"}Wo(){return this.Po}Ho(){return this.yo}Uo(e,n){e.eo(n)}$o(e,n){e.ro(n),this.Ao()}qo(e){e.ho()}Yo(e,n){e.ao(n)}jo(e,n){e.lo(n),this.Ao()}Ko(e){e.oo()}Ao(){this.dl.forEach(e=>{e.Ns()})}ys(){let e=null;return this.ts.N().rightPriceScale.visible&&this.yo.ba().length!==0?e=this.yo:this.ts.N().leftPriceScale.visible&&this.Po.ba().length!==0?e=this.Po:this.dl.length!==0&&(e=this.dl[0].Ft()),e===null&&(e=this.yo),e}$n(){let e=null;return this.ts.N().rightPriceScale.visible?e=this.yo:this.ts.N().leftPriceScale.visible&&(e=this.Po),e}Fo(e){e!==null&&e.Rl()&&this.Xo(e)}Zo(e){const n=this.uh.Pe();e.yl({sn:!0}),n!==null&&e.fo(n),this.Ao()}Go(){this.Xo(this.Po),this.Xo(this.yo)}Jo(){this.Fo(this.Po),this.Fo(this.yo),this.dl.forEach(e=>{this.Un(e)&&this.Fo(e.Ft())}),this.Ao(),this.ts.ar()}Dt(){return this.pl===null&&(this.pl=rj(this.dl)),this.pl}Qo(e,n){n=Ni(n,0,this.dl.length-1);const s=this.dl.indexOf(e);mt(s!==-1,"setSeriesOrder: invalid data source"),this.dl.splice(s,1),this.dl.splice(n,0,e),this.dl.forEach((r,i)=>r.ls(i)),this.pl=null;for(const r of[this.Po,this.yo])r.Ql(),r.ga();this.ts.ar()}It(){return this.Dt().filter(K0)}t_(){return this.xo}i_(){return this.Co}ua(e){this.kh.push(new oD(e))}ca(e){this.kh=this.kh.filter(n=>n.oh()!==e),e.detached&&e.detached(),this.ts.ar()}s_(){return this.kh}sa(e,n){return this.kh.map(s=>s.jn(e,n)).filter(s=>s!==null)}Xo(e){const n=e.do();if(n&&n.length>0&&!this.uh.Ki()){const s=this.uh.Pe();s!==null&&e.fo(s)}e.Ns()}No(e,n,s){let r=this.Do(n);if(r===null&&(r=this.ko(n,this.ts.N().overlayPriceScales)),this.dl.splice(s,0,e),!Ou(n)){const i=this.wo.get(n)||[];i.push(e),this.wo.set(n,i)}e.ls(s),r.Jl(e),e._s(r),this.Fo(r),this.pl=null}To(e,n,s){n.ie!==s.ie&&this.Xo(e)}ko(e,n){const s={visible:!0,autoScale:!0,...Jn(n)},r=new ND(e,s,this.ts.N().layout,this.ts.N().localization,this.ts.Xi());return r.zl(this.$t()),r}}function pl(t){return{n_:t.n_,e_:{Kn:t.r_.externalId},h_:t.r_.cursorStyle}}function jD(t,e,n,s){for(const r of t){const i=r.Tt(s);if(i!==null&&i.jn){const o=i.jn(e,n);if(o!==null)return{a_:r,e_:o}}}return null}function CD(t){return t.Fs!==void 0}function ij(t,e,n){const s=[t,...t.Dt()],r=function(i,o,l){var f;let c,u;for(const x of i){const p=((f=x.sa)==null?void 0:f.call(x,o,l))??[];for(const y of p)h=y.zOrder,d=c==null?void 0:c.zOrder,(!d||h==="top"&&d!=="top"||h==="normal"&&d==="bottom")&&(c=y,u=x)}var h,d;return c&&u?{r_:c,n_:u}:null}(s,e,n);if((r==null?void 0:r.r_.zOrder)==="top")return pl(r);for(const i of s){if(r&&r.n_===i&&r.r_.zOrder!=="bottom"&&!r.r_.isBackground)return pl(r);if(CD(i)){const o=jD(i.Fs(t),e,n,t);if(o!==null)return{n_:i,a_:o.a_,e_:o.e_}}if(r&&r.n_===i&&r.r_.zOrder!=="bottom"&&r.r_.isBackground)return pl(r)}return r!=null&&r.r_?pl(r):null}class kD{constructor(e,n,s=50){this.kn=0,this.yn=1,this.Tn=1,this.Dn=new Map,this.Rn=new Map,this.l_=e,this.o_=n,this.Vn=s}__(e){const n=e.time,s=this.o_.cacheKey(n),r=this.Dn.get(s);if(r!==void 0)return r.u_;if(this.kn===this.Vn){const o=this.Rn.get(this.Tn);this.Rn.delete(this.Tn),this.Dn.delete(Yt(o)),this.Tn++,this.kn--}const i=this.l_(e);return this.Dn.set(s,{u_:i,An:this.yn}),this.Rn.set(this.yn,s),this.kn++,this.yn++,i}}class Fa{constructor(e,n){mt(e<=n,"right should be >= left"),this.c_=e,this.d_=n}Uh(){return this.c_}bi(){return this.d_}f_(){return this.d_-this.c_+1}Te(e){return this.c_<=e&&e<=this.d_}He(e){return this.c_===e.Uh()&&this.d_===e.bi()}}function J0(t,e){return t===null||e===null?t===e:t.He(e)}class PD{constructor(){this.p_=new Map,this.Dn=null,this.v_=!1}m_(e){this.v_=e,this.Dn=null}w_(e,n){this.g_(n),this.Dn=null;for(let s=n;s<e.length;++s){const r=e[s];let i=this.p_.get(r.timeWeight);i===void 0&&(i=[],this.p_.set(r.timeWeight,i)),i.push({index:s,time:r.time,weight:r.timeWeight,originalTime:r.originalTime})}}M_(e,n,s,r,i){const o=Math.ceil(n/e);return this.Dn!==null&&this.Dn.b_===o&&i===this.Dn.S_&&s===this.Dn.x_||(this.Dn={S_:i,x_:s,Va:this.C_(o,s,r),b_:o}),this.Dn.Va}g_(e){if(e===0)return void this.p_.clear();const n=[];this.p_.forEach((s,r)=>{e<=s[0].index?n.push(r):s.splice(Fi(s,e,i=>i.index<e),1/0)});for(const s of n)this.p_.delete(s)}C_(e,n,s){let r=[];const i=o=>!n||s.has(o.index);for(const o of Array.from(this.p_.keys()).sort((l,c)=>c-l)){if(!this.p_.get(o))continue;const l=r;r=[];const c=l.length;let u=0;const h=Yt(this.p_.get(o)),d=h.length;let f=1/0,x=-1/0;for(let p=0;p<d;p++){const y=h[p],w=y.index;for(;u<c;){const m=l[u],g=m.index;if(!(g<w&&i(m))){f=g;break}u++,r.push(m),x=g,f=1/0}if(f-w>=e&&w-x>=e&&i(y))r.push(y),x=w;else if(this.v_)return l}for(;u<c;u++)i(l[u])&&r.push(l[u])}return r}}class ji{constructor(e){this.P_=e}k_(){return this.P_===null?null:new Fa(Math.floor(this.P_.Uh()),Math.ceil(this.P_.bi()))}y_(){return this.P_}static T_(){return new ji(null)}}function ED(t,e){return t.weight>e.weight?t:e}class TD{constructor(e,n,s,r){this.Mo=0,this.R_=null,this.D_=[],this.wl=null,this.ml=null,this.V_=new PD,this.I_=new Map,this.B_=ji.T_(),this.E_=!0,this.A_=new tt,this.z_=new tt,this.L_=new tt,this.O_=null,this.N_=null,this.F_=new Map,this.W_=-1,this.H_=[],this.Ps=n,this.Sl=s,this.U_=n.rightOffset,this.q_=n.barSpacing,this.ts=e,this.o_=r,this.Y_(),this.V_.m_(n.uniformDistribution),this.j_()}N(){return this.Ps}K_(e){Zt(this.Sl,e),this.X_(),this.Y_()}hr(e,n){Zt(this.Ps,e),this.Ps.fixLeftEdge&&this.Z_(),this.Ps.fixRightEdge&&this.G_(),e.barSpacing!==void 0&&this.ts.dn(e.barSpacing),e.rightOffset!==void 0&&this.ts.fn(e.rightOffset),e.minBarSpacing===void 0&&e.maxBarSpacing===void 0||this.ts.dn(e.barSpacing??this.q_),e.ignoreWhitespaceIndices!==void 0&&e.ignoreWhitespaceIndices!==this.Ps.ignoreWhitespaceIndices&&this.j_(),this.X_(),this.Y_(),this.L_.p()}Rs(e){var n;return((n=this.D_[e])==null?void 0:n.time)??null}ss(e){return this.D_[e]??null}J_(e,n){if(this.D_.length<1)return null;if(this.o_.key(e)>this.o_.key(this.D_[this.D_.length-1].time))return n?this.D_.length-1:null;const s=Fi(this.D_,this.o_.key(e),(r,i)=>this.o_.key(r.time)<i);return this.o_.key(e)<this.o_.key(this.D_[s].time)?n?s:null:s}Ki(){return this.Mo===0||this.D_.length===0||this.R_===null}Q_(){return this.D_.length>0}Pe(){return this.tu(),this.B_.k_()}iu(){return this.tu(),this.B_.y_()}su(){const e=this.Pe();if(e===null)return null;const n={from:e.Uh(),to:e.bi()};return this.nu(n)}nu(e){const n=Math.round(e.from),s=Math.round(e.to),r=G(this.eu()),i=G(this.ru());return{from:G(this.ss(Math.max(r,n))),to:G(this.ss(Math.min(i,s)))}}hu(e){return{from:G(this.J_(e.from,!0)),to:G(this.J_(e.to,!0))}}Qi(){return this.Mo}Eo(e){if(!isFinite(e)||e<=0||this.Mo===e)return;const n=this.iu(),s=this.Mo;if(this.Mo=e,this.E_=!0,this.Ps.lockVisibleTimeRangeOnResize&&s!==0){const r=this.q_*e/s;this.q_=r}if(this.Ps.fixLeftEdge&&n!==null&&n.Uh()<=0){const r=s-e;this.U_-=Math.round(r/this.q_)+1,this.E_=!0}this.au(),this.lu()}qt(e){if(this.Ki()||!fo(e))return 0;const n=this.ou()+this.U_-e;return this.Mo-(n+.5)*this.q_-1}_u(e,n){const s=this.ou(),r=n===void 0?0:n.from,i=n===void 0?e.length:n.to;for(let o=r;o<i;o++){const l=e[o].wt,c=s+this.U_-l,u=this.Mo-(c+.5)*this.q_-1;e[o]._t=u}}uu(e,n){const s=Math.ceil(this.cu(e));return n&&this.Ps.ignoreWhitespaceIndices&&!this.du(s)?this.fu(s):s}fn(e){this.E_=!0,this.U_=e,this.lu(),this.ts.pu(),this.ts.ar()}vu(){return this.q_}dn(e){this.mu(e),this.lu(),this.ts.pu(),this.ts.ar()}wu(){return this.U_}Va(){if(this.Ki())return null;if(this.N_!==null)return this.N_;const e=this.q_,n=5*(this.ts.N().layout.fontSize+4)/8*(this.Ps.tickMarkMaxCharacterLength||8),s=Math.round(n/e),r=G(this.Pe()),i=Math.max(r.Uh(),r.Uh()-s),o=Math.max(r.bi(),r.bi()-s),l=this.V_.M_(e,n,this.Ps.ignoreWhitespaceIndices,this.F_,this.W_),c=this.eu()+s,u=this.ru()-s,h=this.gu(),d=this.Ps.fixLeftEdge||h,f=this.Ps.fixRightEdge||h;let x=0;for(const p of l){if(!(i<=p.index&&p.index<=o))continue;let y;x<this.H_.length?(y=this.H_[x],y.coord=this.qt(p.index),y.label=this.Mu(p),y.weight=p.weight):(y={needAlignCoordinate:!1,coord:this.qt(p.index),label:this.Mu(p),weight:p.weight},this.H_.push(y)),this.q_>n/2&&!h?y.needAlignCoordinate=!1:y.needAlignCoordinate=d&&p.index<=c||f&&p.index>=u,x++}return this.H_.length=x,this.N_=this.H_,this.H_}bu(){this.E_=!0,this.dn(this.Ps.barSpacing),this.fn(this.Ps.rightOffset)}Su(e){this.E_=!0,this.R_=e,this.lu(),this.Z_()}xu(e,n){const s=this.cu(e),r=this.vu(),i=r+n*(r/10);this.dn(i),this.Ps.rightBarStaysOnScroll||this.fn(this.wu()+(s-this.cu(e)))}eo(e){this.wl&&this.oo(),this.ml===null&&this.O_===null&&(this.Ki()||(this.ml=e,this.Cu()))}ro(e){if(this.O_===null)return;const n=Ni(this.Mo-e,0,this.Mo),s=Ni(this.Mo-G(this.ml),0,this.Mo);n!==0&&s!==0&&this.dn(this.O_.vu*n/s)}ho(){this.ml!==null&&(this.ml=null,this.Pu())}ao(e){this.wl===null&&this.O_===null&&(this.Ki()||(this.wl=e,this.Cu()))}lo(e){if(this.wl===null)return;const n=(this.wl-e)/this.vu();this.U_=G(this.O_).wu+n,this.E_=!0,this.lu()}oo(){this.wl!==null&&(this.wl=null,this.Pu())}ku(){this.yu(this.Ps.rightOffset)}yu(e,n=400){if(!isFinite(e))throw new RangeError("offset is required and must be finite number");if(!isFinite(n)||n<=0)throw new RangeError("animationDuration (optional) must be finite positive number");const s=this.U_,r=performance.now();this.ts._n({Tu:i=>(i-r)/n>=1,Ru:i=>{const o=(i-r)/n;return o>=1?e:s+(e-s)*o}})}kt(e,n){this.E_=!0,this.D_=e,this.V_.w_(e,n),this.lu()}Du(){return this.A_}Vu(){return this.z_}Iu(){return this.L_}ou(){return this.R_||0}Bu(e){const n=e.f_();this.mu(this.Mo/n),this.U_=e.bi()-this.ou(),this.lu(),this.E_=!0,this.ts.pu(),this.ts.ar()}Eu(){const e=this.eu(),n=this.ru();e!==null&&n!==null&&this.Bu(new Fa(e,n+this.Ps.rightOffset))}Au(e){const n=new Fa(e.from,e.to);this.Bu(n)}ns(e){return this.Sl.timeFormatter!==void 0?this.Sl.timeFormatter(e.originalTime):this.o_.formatHorzItem(e.time)}j_(){if(!this.Ps.ignoreWhitespaceIndices)return;this.F_.clear();const e=this.ts.js();for(const n of e)for(const s of n.ma())this.F_.set(s,!0);this.W_++}gu(){const e=this.ts.N().handleScroll,n=this.ts.N().handleScale;return!(e.horzTouchDrag||e.mouseWheel||e.pressedMouseMove||e.vertTouchDrag||n.axisDoubleClickReset.time||n.axisPressedMouseMove.time||n.mouseWheel||n.pinch)}eu(){return this.D_.length===0?null:0}ru(){return this.D_.length===0?null:this.D_.length-1}zu(e){return(this.Mo-1-e)/this.q_}cu(e){const n=this.zu(e),s=this.ou()+this.U_-n;return Math.round(1e6*s)/1e6}mu(e){const n=this.q_;this.q_=e,this.au(),n!==this.q_&&(this.E_=!0,this.Lu())}tu(){if(!this.E_)return;if(this.E_=!1,this.Ki())return void this.Ou(ji.T_());const e=this.ou(),n=this.Mo/this.q_,s=this.U_+e,r=new Fa(s-n+1,s);this.Ou(new ji(r))}au(){const e=Ni(this.q_,this.Nu(),this.Fu());this.q_!==e&&(this.q_=e,this.E_=!0)}Fu(){return this.Ps.maxBarSpacing>0?this.Ps.maxBarSpacing:.5*this.Mo}Nu(){return this.Ps.fixLeftEdge&&this.Ps.fixRightEdge&&this.D_.length!==0?this.Mo/this.D_.length:this.Ps.minBarSpacing}lu(){const e=this.Wu();e!==null&&this.U_<e&&(this.U_=e,this.E_=!0);const n=this.Hu();this.U_>n&&(this.U_=n,this.E_=!0)}Wu(){const e=this.eu(),n=this.R_;return e===null||n===null?null:e-n-1+(this.Ps.fixLeftEdge?this.Mo/this.q_:Math.min(2,this.D_.length))}Hu(){return this.Ps.fixRightEdge?0:this.Mo/this.q_-Math.min(2,this.D_.length)}Cu(){this.O_={vu:this.vu(),wu:this.wu()}}Pu(){this.O_=null}Mu(e){let n=this.I_.get(e.weight);return n===void 0&&(n=new kD(s=>this.Uu(s),this.o_),this.I_.set(e.weight,n)),n.__(e)}Uu(e){return this.o_.formatTickmark(e,this.Sl)}Ou(e){const n=this.B_;this.B_=e,J0(n.k_(),this.B_.k_())||this.A_.p(),J0(n.y_(),this.B_.y_())||this.z_.p(),this.Lu()}Lu(){this.N_=null}X_(){this.Lu(),this.I_.clear()}Y_(){this.o_.updateFormatter(this.Sl)}Z_(){if(!this.Ps.fixLeftEdge)return;const e=this.eu();if(e===null)return;const n=this.Pe();if(n===null)return;const s=n.Uh()-e;if(s<0){const r=this.U_-s-1;this.fn(r)}this.au()}G_(){this.lu(),this.au()}du(e){return!this.Ps.ignoreWhitespaceIndices||this.F_.get(e)||!1}fu(e){const n=function*(r){const i=Math.round(r),o=i<r;let l=1;for(;;)o?(yield i+l,yield i-l):(yield i-l,yield i+l),l++}(e),s=this.ru();for(;s;){const r=n.next().value;if(this.F_.get(r))return r;if(r<0||r>s)break}return e}}var Z0,ex,tx,lp,nx;(function(t){t[t.OnTouchEnd=0]="OnTouchEnd",t[t.OnNextTap=1]="OnNextTap"})(Z0||(Z0={}));class LD{constructor(e,n,s){this.$u=[],this.qu=[],this.Mo=0,this.Yu=null,this.ju=new tt,this.Ku=new tt,this.Xu=null,this.Zu=e,this.Ps=n,this.o_=s,this.xl=new L3(this.Ps.layout.colorParsers),this.Gu=new T3(this),this.uh=new TD(this,n.timeScale,this.Ps.localization,s),this.Ct=new $3(this,n.crosshair),this.Ju=new yD(n.crosshair),n.addDefaultPane&&(this.Qu(0),this.$u[0].Bo(2)),this.tc=this.sc(0),this.nc=this.sc(1)}Bh(){this.ec(pt.gn())}ar(){this.ec(pt.wn())}Zh(){this.ec(new pt(1))}Eh(e){const n=this.rc(e);this.ec(n)}hc(){return this.Yu}ac(e){var s,r,i,o;if(((s=this.Yu)==null?void 0:s.n_)===(e==null?void 0:e.n_)&&((i=(r=this.Yu)==null?void 0:r.e_)==null?void 0:i.Kn)===((o=e==null?void 0:e.e_)==null?void 0:o.Kn))return;const n=this.Yu;this.Yu=e,n!==null&&this.Eh(n.n_),e!==null&&e.n_!==(n==null?void 0:n.n_)&&this.Eh(e.n_)}N(){return this.Ps}hr(e){Zt(this.Ps,e),this.$u.forEach(n=>n.Ro(e)),e.timeScale!==void 0&&this.uh.hr(e.timeScale),e.localization!==void 0&&this.uh.K_(e.localization),(e.leftPriceScale||e.rightPriceScale)&&this.ju.p(),this.tc=this.sc(0),this.nc=this.sc(1),this.Bh()}lc(e,n,s=0){const r=this.$u[s];if(r===void 0)return;if(e==="left")return Zt(this.Ps,{leftPriceScale:n}),r.Ro({leftPriceScale:n}),this.ju.p(),void this.Bh();if(e==="right")return Zt(this.Ps,{rightPriceScale:n}),r.Ro({rightPriceScale:n}),this.ju.p(),void this.Bh();const i=this.oc(e,s);i!==null&&(i.Ft.hr(n),this.ju.p())}oc(e,n){const s=this.$u[n];if(s===void 0)return null;const r=s.Do(e);return r!==null?{Us:s,Ft:r}:null}Et(){return this.uh}$s(){return this.$u}_c(){return this.Ct}uc(){return this.Ku}cc(e,n){e.zl(n),this.pu()}Eo(e){this.Mo=e,this.uh.Eo(this.Mo),this.$u.forEach(n=>n.Eo(e)),this.pu()}dc(e){this.$u.length!==1&&(mt(e>=0&&e<this.$u.length,"Invalid pane index"),this.$u.splice(e,1),this.Bh())}fc(e,n){if(this.$u.length<2)return;mt(e>=0&&e<this.$u.length,"Invalid pane index");const s=this.$u[e],r=this.$u.reduce((d,f)=>d+f.Io(),0),i=this.$u.reduce((d,f)=>d+f.$t(),0),o=i-30*(this.$u.length-1);n=Math.min(o,Math.max(30,n));const l=r/i,c=s.$t();s.Bo(n*l);let u=n-c,h=this.$u.length-1;for(const d of this.$u)if(d!==s){const f=Math.min(o,Math.max(30,d.$t()-u/h));u-=d.$t()-f,h-=1;const x=f*l;d.Bo(x)}this.Bh()}vc(e,n){mt(e>=0&&e<this.$u.length&&n>=0&&n<this.$u.length,"Invalid pane index");const s=this.$u[e],r=this.$u[n];this.$u[e]=r,this.$u[n]=s,this.Bh()}mc(e,n){if(mt(e>=0&&e<this.$u.length&&n>=0&&n<this.$u.length,"Invalid pane index"),e===n)return;const[s]=this.$u.splice(e,1);this.$u.splice(n,0,s),this.Bh()}Uo(e,n,s){e.Uo(n,s)}$o(e,n,s){e.$o(n,s),this.Ah(),this.ec(this.wc(e,2))}qo(e,n){e.qo(n),this.ec(this.wc(e,2))}Yo(e,n,s){n.Rl()||e.Yo(n,s)}jo(e,n,s){n.Rl()||(e.jo(n,s),this.Ah(),this.ec(this.wc(e,2)))}Ko(e,n){n.Rl()||(e.Ko(n),this.ec(this.wc(e,2)))}Zo(e,n){e.Zo(n),this.ec(this.wc(e,2))}gc(e){this.uh.eo(e)}Mc(e,n){const s=this.Et();if(s.Ki()||n===0)return;const r=s.Qi();e=Math.max(1,Math.min(e,r)),s.xu(e,n),this.pu()}bc(e){this.Sc(0),this.xc(e),this.Cc()}Pc(e){this.uh.ro(e),this.pu()}kc(){this.uh.ho(),this.ar()}Sc(e){this.uh.ao(e)}xc(e){this.uh.lo(e),this.pu()}Cc(){this.uh.oo(),this.ar()}js(){return this.qu}yc(e,n,s,r,i){this.Ct.Vs(e,n);let o=NaN,l=this.uh.uu(e,!0);const c=this.uh.Pe();c!==null&&(l=Math.min(Math.max(c.Uh(),l),c.bi()));const u=r.ys(),h=u.zt();if(h!==null&&(o=u.Ts(n,h)),o=this.Ju.Ma(o,l,r),this.Ct.As(l,o,r),this.Zh(),!i){const d=ij(r,e,n);this.ac(d&&{n_:d.n_,e_:d.e_,h_:d.h_||null}),this.Ku.p(this.Ct.Bt(),{x:e,y:n},s)}}Tc(e,n,s){const r=s.ys(),i=r.zt(),o=r.Nt(e,G(i)),l=this.uh.J_(n,!0),c=this.uh.qt(G(l));this.yc(c,o,null,s,!0)}Rc(e){this._c().Ls(),this.Zh(),e||this.Ku.p(null,null,null)}Ah(){const e=this.Ct.Us();if(e!==null){const n=this.Ct.Bs(),s=this.Ct.Es();this.yc(n,s,null,e)}this.Ct.Ns()}Dc(e,n,s){const r=this.uh.Rs(0);n!==void 0&&s!==void 0&&this.uh.kt(n,s);const i=this.uh.Rs(0),o=this.uh.ou(),l=this.uh.Pe();if(l!==null&&r!==null&&i!==null){const c=l.Te(o),u=this.o_.key(r)>this.o_.key(i),h=e!==null&&e>o&&!u,d=this.uh.N().allowShiftVisibleRangeOnWhitespaceReplacement,f=c&&(s!==void 0||d)&&this.uh.N().shiftVisibleRangeOnNewBar;if(h&&!f){const x=e-o;this.uh.fn(this.uh.wu()-x)}}this.uh.Su(e)}Lh(e){e!==null&&e.Jo()}Hn(e){if(function(s){return s instanceof X0}(e))return e;const n=this.$u.find(s=>s.Dt().includes(e));return n===void 0?null:n}pu(){this.$u.forEach(e=>e.Jo()),this.Ah()}m(){this.$u.forEach(e=>e.m()),this.$u.length=0,this.Ps.localization.priceFormatter=void 0,this.Ps.localization.percentageFormatter=void 0,this.Ps.localization.timeFormatter=void 0}Vc(){return this.Gu}Yn(){return this.Gu.N()}Vo(){return this.ju}Ic(e,n){const s=this.Qu(n);this.Bc(e,s),this.qu.push(e),this.qu.length===1?this.Bh():this.ar()}Ec(e){const n=this.Hn(e),s=this.qu.indexOf(e);mt(s!==-1,"Series not found");const r=G(n);this.qu.splice(s,1),r.io(e),e.m&&e.m(),this.uh.j_(),this.Ac(r)}Ih(e,n){const s=G(this.Hn(e));s.io(e,!0),s.Jl(e,n,!0)}Eu(){const e=pt.wn();e.rn(),this.ec(e)}zc(e){const n=pt.wn();n.ln(e),this.ec(n)}cn(){const e=pt.wn();e.cn(),this.ec(e)}dn(e){const n=pt.wn();n.dn(e),this.ec(n)}fn(e){const n=pt.wn();n.fn(e),this.ec(n)}_n(e){const n=pt.wn();n._n(e),this.ec(n)}hn(){const e=pt.wn();e.hn(),this.ec(e)}Lc(){return this.Ps.rightPriceScale.visible?"right":"left"}Oc(e,n){if(mt(n>=0,"Index should be greater or equal to 0"),n===this.Nc(e))return;const s=G(this.Hn(e));s.io(e);const r=this.Qu(n);this.Bc(e,r),s.ba().length===0&&this.Ac(s),this.Bh()}Fc(){return this.nc}$(){return this.tc}Ut(e){const n=this.nc,s=this.tc;if(n===s)return n;if(e=Math.max(0,Math.min(100,Math.round(100*e))),this.Xu===null||this.Xu.mr!==s||this.Xu.wr!==n)this.Xu={mr:s,wr:n,Wc:new Map};else{const i=this.Xu.Wc.get(e);if(i!==void 0)return i}const r=this.xl.tt(s,n,e/100);return this.Xu.Wc.set(e,r),r}Hc(e){return this.$u.indexOf(e)}Xi(){return this.xl}Uc(){return this.$c()}$c(e){const n=new X0(this.uh,this);this.$u.push(n);const s=e??this.$u.length-1,r=pt.gn();return r.Qs(s,{tn:0,sn:!0}),this.ec(r),n}Qu(e){return mt(e>=0,"Index should be greater or equal to 0"),(e=Math.min(this.$u.length,e))<this.$u.length?this.$u[e]:this.$c(e)}Nc(e){return this.$u.findIndex(n=>n.Oo().includes(e))}wc(e,n){const s=new pt(n);if(e!==null){const r=this.$u.indexOf(e);s.Qs(r,{tn:n})}return s}rc(e,n){return n===void 0&&(n=2),this.wc(this.Hn(e),n)}ec(e){this.Zu&&this.Zu(e),this.$u.forEach(n=>n.i_().lr().kt())}Bc(e,n){const s=e.N().priceScaleId,r=s!==void 0?s:this.Lc();n.Jl(e,r),Ou(r)||e.hr(e.N())}sc(e){const n=this.Ps.layout;return n.background.type==="gradient"?e===0?n.background.topColor:n.background.bottomColor:n.background.color}Ac(e){!e.Lo()&&e.ba().length===0&&this.$u.length>1&&this.$u.splice(this.Hc(e),1)}}function cp(t){return!Di(t)&&!Mo(t)}function aj(t){return Di(t)}(function(t){t[t.Disabled=0]="Disabled",t[t.Continuous=1]="Continuous",t[t.OnDataUpdate=2]="OnDataUpdate"})(ex||(ex={})),function(t){t[t.LastBar=0]="LastBar",t[t.LastVisible=1]="LastVisible"}(tx||(tx={})),function(t){t.Solid="solid",t.VerticalGradient="gradient"}(lp||(lp={})),function(t){t[t.Year=0]="Year",t[t.Month=1]="Month",t[t.DayOfMonth=2]="DayOfMonth",t[t.Time=3]="Time",t[t.TimeWithSeconds=4]="TimeWithSeconds"}(nx||(nx={}));const sx=t=>t.getUTCFullYear();function _D(t,e,n){return e.replace(/yyyy/g,(s=>Zn(sx(s),4))(t)).replace(/yy/g,(s=>Zn(sx(s)%100,2))(t)).replace(/MMMM/g,((s,r)=>new Date(s.getUTCFullYear(),s.getUTCMonth(),1).toLocaleString(r,{month:"long"}))(t,n)).replace(/MMM/g,((s,r)=>new Date(s.getUTCFullYear(),s.getUTCMonth(),1).toLocaleString(r,{month:"short"}))(t,n)).replace(/MM/g,(s=>Zn((r=>r.getUTCMonth()+1)(s),2))(t)).replace(/dd/g,(s=>Zn((r=>r.getUTCDate())(s),2))(t))}class oj{constructor(e="yyyy-MM-dd",n="default"){this.qc=e,this.Yc=n}__(e){return _D(e,this.qc,this.Yc)}}class RD{constructor(e){this.jc=e||"%h:%m:%s"}__(e){return this.jc.replace("%h",Zn(e.getUTCHours(),2)).replace("%m",Zn(e.getUTCMinutes(),2)).replace("%s",Zn(e.getUTCSeconds(),2))}}const MD={Kc:"yyyy-MM-dd",Xc:"%h:%m:%s",Zc:" ",Gc:"default"};class ID{constructor(e={}){const n={...MD,...e};this.Jc=new oj(n.Kc,n.Gc),this.Qc=new RD(n.Xc),this.td=n.Zc}__(e){return`${this.Jc.__(e)}${this.td}${this.Qc.__(e)}`}}function ml(t){return 60*t*60*1e3}function ld(t){return 60*t*1e3}const gl=[{sd:(rx=1,1e3*rx),nd:10},{sd:ld(1),nd:20},{sd:ld(5),nd:21},{sd:ld(30),nd:22},{sd:ml(1),nd:30},{sd:ml(3),nd:31},{sd:ml(6),nd:32},{sd:ml(12),nd:33}];var rx;function ix(t,e){if(t.getUTCFullYear()!==e.getUTCFullYear())return 70;if(t.getUTCMonth()!==e.getUTCMonth())return 60;if(t.getUTCDate()!==e.getUTCDate())return 50;for(let n=gl.length-1;n>=0;--n)if(Math.floor(e.getTime()/gl[n].sd)!==Math.floor(t.getTime()/gl[n].sd))return gl[n].nd;return 0}function cd(t){let e=t;if(Mo(t)&&(e=rg(t)),!cp(e))throw new Error("time must be of type BusinessDay");const n=new Date(Date.UTC(e.year,e.month-1,e.day,0,0,0,0));return{ed:Math.round(n.getTime()/1e3),rd:e}}function ax(t){if(!aj(t))throw new Error("time must be of type isUTCTimestamp");return{ed:t}}function rg(t){const e=new Date(t);if(isNaN(e.getTime()))throw new Error(`Invalid date string=${t}, expected format=yyyy-mm-dd`);return{day:e.getUTCDate(),month:e.getUTCMonth()+1,year:e.getUTCFullYear()}}function ox(t){Mo(t.time)&&(t.time=rg(t.time))}class lx{options(){return this.Ps}setOptions(e){this.Ps=e,this.updateFormatter(e.localization)}preprocessData(e){Array.isArray(e)?function(n){n.forEach(ox)}(e):ox(e)}createConverterToInternalObj(e){return G(function(n){return n.length===0?null:cp(n[0].time)||Mo(n[0].time)?cd:ax}(e))}key(e){return typeof e=="object"&&"ed"in e?e.ed:this.key(this.convertHorzItemToInternal(e))}cacheKey(e){const n=e;return n.rd===void 0?new Date(1e3*n.ed).getTime():new Date(Date.UTC(n.rd.year,n.rd.month-1,n.rd.day)).getTime()}convertHorzItemToInternal(e){return aj(n=e)?ax(n):cp(n)?cd(n):cd(rg(n));var n}updateFormatter(e){if(!this.Ps)return;const n=e.dateFormat;this.Ps.timeScale.timeVisible?this.hd=new ID({Kc:n,Xc:this.Ps.timeScale.secondsVisible?"%h:%m:%s":"%h:%m",Zc:"   ",Gc:e.locale}):this.hd=new oj(n,e.locale)}formatHorzItem(e){const n=e;return this.hd.__(new Date(1e3*n.ed))}formatTickmark(e,n){const s=function(i,o,l){switch(i){case 0:case 10:return o?l?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return o?3:2;case 50:return 2;case 60:return 1;case 70:return 0}}(e.weight,this.Ps.timeScale.timeVisible,this.Ps.timeScale.secondsVisible),r=this.Ps.timeScale;if(r.tickMarkFormatter!==void 0){const i=r.tickMarkFormatter(e.originalTime,s,n.locale);if(i!==null)return i}return function(i,o,l){const c={};switch(o){case 0:c.year="numeric";break;case 1:c.month="short";break;case 2:c.day="numeric";break;case 3:c.hour12=!1,c.hour="2-digit",c.minute="2-digit";break;case 4:c.hour12=!1,c.hour="2-digit",c.minute="2-digit",c.second="2-digit"}const u=i.rd===void 0?new Date(1e3*i.ed):new Date(Date.UTC(i.rd.year,i.rd.month-1,i.rd.day));return new Date(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate(),u.getUTCHours(),u.getUTCMinutes(),u.getUTCSeconds(),u.getUTCMilliseconds()).toLocaleString(l,c)}(e.time,s,n.locale)}maxTickMarkWeight(e){let n=e.reduce(ED,e[0]).weight;return n>30&&n<50&&(n=30),n}fillWeightsForPoints(e,n){(function(s,r=0){if(s.length===0)return;let i=r===0?null:s[r-1].time.ed,o=i!==null?new Date(1e3*i):null,l=0;for(let c=r;c<s.length;++c){const u=s[c],h=new Date(1e3*u.time.ed);o!==null&&(u.timeWeight=ix(h,o)),l+=u.time.ed-(i||u.time.ed),i=u.time.ed,o=h}if(r===0&&s.length>1){const c=Math.ceil(l/(s.length-1)),u=new Date(1e3*(s[0].time.ed-c));s[0].timeWeight=ix(new Date(1e3*s[0].time.ed),u)}})(e,n)}static ad(e){return Zt({localization:{dateFormat:"dd MMM 'yy"}},e??{})}}const Bi=typeof window<"u";function cx(){return!!Bi&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function ud(){return!!Bi&&/iPhone|iPad|iPod/.test(window.navigator.platform)}function up(t){return t+t%2}function AD(t){Bi&&window.chrome!==void 0&&t.addEventListener("mousedown",e=>{if(e.button===1)return e.preventDefault(),!1})}class Bu{constructor(e,n,s){this.ld=0,this.od=null,this._d={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY},this.ud=0,this.dd=null,this.fd={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY},this.pd=null,this.vd=!1,this.md=null,this.wd=null,this.gd=!1,this.Md=!1,this.bd=!1,this.Sd=null,this.xd=null,this.Cd=null,this.Pd=null,this.kd=null,this.yd=null,this.Td=null,this.Rd=0,this.Dd=!1,this.Vd=!1,this.Id=!1,this.Bd=0,this.Ed=null,this.Ad=!ud(),this.zd=r=>{this.Ld(r)},this.Od=r=>{if(this.Nd(r)){const i=this.Fd(r);if(++this.ud,this.dd&&this.ud>1){const{Wd:o}=this.Hd(In(r),this.fd);o<30&&!this.bd&&this.Ud(i,this.qd.$d),this.Yd()}}else{const i=this.Fd(r);if(++this.ld,this.od&&this.ld>1){const{Wd:o}=this.Hd(In(r),this._d);o<5&&!this.Md&&this.jd(i,this.qd.Kd),this.Xd()}}},this.Zd=e,this.qd=n,this.Ps=s,this.Gd()}m(){this.Sd!==null&&(this.Sd(),this.Sd=null),this.xd!==null&&(this.xd(),this.xd=null),this.Pd!==null&&(this.Pd(),this.Pd=null),this.kd!==null&&(this.kd(),this.kd=null),this.yd!==null&&(this.yd(),this.yd=null),this.Cd!==null&&(this.Cd(),this.Cd=null),this.Jd(),this.Xd()}Qd(e){this.Pd&&this.Pd();const n=this.tf.bind(this);if(this.Pd=()=>{this.Zd.removeEventListener("mousemove",n)},this.Zd.addEventListener("mousemove",n),this.Nd(e))return;const s=this.Fd(e);this.jd(s,this.qd.if),this.Ad=!0}Xd(){this.od!==null&&clearTimeout(this.od),this.ld=0,this.od=null,this._d={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY}}Yd(){this.dd!==null&&clearTimeout(this.dd),this.ud=0,this.dd=null,this.fd={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY}}tf(e){if(this.Id||this.wd!==null||this.Nd(e))return;const n=this.Fd(e);this.jd(n,this.qd.sf),this.Ad=!0}nf(e){const n=hd(e.changedTouches,G(this.Ed));if(n===null||(this.Bd=yl(e),this.Td!==null)||this.Vd)return;this.Dd=!0;const s=this.Hd(In(n),G(this.wd)),{ef:r,rf:i,Wd:o}=s;if(this.gd||!(o<5)){if(!this.gd){const l=.5*r,c=i>=l&&!this.Ps.hf(),u=l>i&&!this.Ps.af();c||u||(this.Vd=!0),this.gd=!0,this.bd=!0,this.Jd(),this.Yd()}if(!this.Vd){const l=this.Fd(e,n);this.Ud(l,this.qd.lf),Xr(e)}}}_f(e){if(e.button!==0)return;const n=this.Hd(In(e),G(this.md)),{Wd:s}=n;if(s>=5&&(this.Md=!0,this.Xd()),this.Md){const r=this.Fd(e);this.jd(r,this.qd.uf)}}Hd(e,n){const s=Math.abs(n._t-e._t),r=Math.abs(n.ut-e.ut);return{ef:s,rf:r,Wd:s+r}}cf(e){let n=hd(e.changedTouches,G(this.Ed));if(n===null&&e.touches.length===0&&(n=e.changedTouches[0]),n===null)return;this.Ed=null,this.Bd=yl(e),this.Jd(),this.wd=null,this.yd&&(this.yd(),this.yd=null);const s=this.Fd(e,n);if(this.Ud(s,this.qd.df),++this.ud,this.dd&&this.ud>1){const{Wd:r}=this.Hd(In(n),this.fd);r<30&&!this.bd&&this.Ud(s,this.qd.$d),this.Yd()}else this.bd||(this.Ud(s,this.qd.ff),this.qd.ff&&Xr(e));this.ud===0&&Xr(e),e.touches.length===0&&this.vd&&(this.vd=!1,Xr(e))}Ld(e){if(e.button!==0)return;const n=this.Fd(e);if(this.md=null,this.Id=!1,this.kd&&(this.kd(),this.kd=null),cx()&&this.Zd.ownerDocument.documentElement.removeEventListener("mouseleave",this.zd),!this.Nd(e))if(this.jd(n,this.qd.pf),++this.ld,this.od&&this.ld>1){const{Wd:s}=this.Hd(In(e),this._d);s<5&&!this.Md&&this.jd(n,this.qd.Kd),this.Xd()}else this.Md||this.jd(n,this.qd.vf)}Jd(){this.pd!==null&&(clearTimeout(this.pd),this.pd=null)}mf(e){if(this.Ed!==null)return;const n=e.changedTouches[0];this.Ed=n.identifier,this.Bd=yl(e);const s=this.Zd.ownerDocument.documentElement;this.bd=!1,this.gd=!1,this.Vd=!1,this.wd=In(n),this.yd&&(this.yd(),this.yd=null);{const i=this.nf.bind(this),o=this.cf.bind(this);this.yd=()=>{s.removeEventListener("touchmove",i),s.removeEventListener("touchend",o)},s.addEventListener("touchmove",i,{passive:!1}),s.addEventListener("touchend",o,{passive:!1}),this.Jd(),this.pd=setTimeout(this.wf.bind(this,e),240)}const r=this.Fd(e,n);this.Ud(r,this.qd.gf),this.dd||(this.ud=0,this.dd=setTimeout(this.Yd.bind(this),500),this.fd=In(n))}Mf(e){if(e.button!==0)return;const n=this.Zd.ownerDocument.documentElement;cx()&&n.addEventListener("mouseleave",this.zd),this.Md=!1,this.md=In(e),this.kd&&(this.kd(),this.kd=null);{const r=this._f.bind(this),i=this.Ld.bind(this);this.kd=()=>{n.removeEventListener("mousemove",r),n.removeEventListener("mouseup",i)},n.addEventListener("mousemove",r),n.addEventListener("mouseup",i)}if(this.Id=!0,this.Nd(e))return;const s=this.Fd(e);this.jd(s,this.qd.bf),this.od||(this.ld=0,this.od=setTimeout(this.Xd.bind(this),500),this._d=In(e))}Gd(){this.Zd.addEventListener("mouseenter",this.Qd.bind(this)),this.Zd.addEventListener("touchcancel",this.Jd.bind(this));{const e=this.Zd.ownerDocument,n=s=>{this.qd.Sf&&(s.composed&&this.Zd.contains(s.composedPath()[0])||s.target&&this.Zd.contains(s.target)||this.qd.Sf())};this.xd=()=>{e.removeEventListener("touchstart",n)},this.Sd=()=>{e.removeEventListener("mousedown",n)},e.addEventListener("mousedown",n),e.addEventListener("touchstart",n,{passive:!0})}ud()&&(this.Cd=()=>{this.Zd.removeEventListener("dblclick",this.Od)},this.Zd.addEventListener("dblclick",this.Od)),this.Zd.addEventListener("mouseleave",this.xf.bind(this)),this.Zd.addEventListener("touchstart",this.mf.bind(this),{passive:!0}),AD(this.Zd),this.Zd.addEventListener("mousedown",this.Mf.bind(this)),this.Cf(),this.Zd.addEventListener("touchmove",()=>{},{passive:!1})}Cf(){this.qd.Pf===void 0&&this.qd.kf===void 0&&this.qd.yf===void 0||(this.Zd.addEventListener("touchstart",e=>this.Tf(e.touches),{passive:!0}),this.Zd.addEventListener("touchmove",e=>{if(e.touches.length===2&&this.Td!==null&&this.qd.kf!==void 0){const n=ux(e.touches[0],e.touches[1])/this.Rd;this.qd.kf(this.Td,n),Xr(e)}},{passive:!1}),this.Zd.addEventListener("touchend",e=>{this.Tf(e.touches)}))}Tf(e){e.length===1&&(this.Dd=!1),e.length!==2||this.Dd||this.vd?this.Rf():this.Df(e)}Df(e){const n=this.Zd.getBoundingClientRect()||{left:0,top:0};this.Td={_t:(e[0].clientX-n.left+(e[1].clientX-n.left))/2,ut:(e[0].clientY-n.top+(e[1].clientY-n.top))/2},this.Rd=ux(e[0],e[1]),this.qd.Pf!==void 0&&this.qd.Pf(),this.Jd()}Rf(){this.Td!==null&&(this.Td=null,this.qd.yf!==void 0&&this.qd.yf())}xf(e){if(this.Pd&&this.Pd(),this.Nd(e)||!this.Ad)return;const n=this.Fd(e);this.jd(n,this.qd.Vf),this.Ad=!ud()}wf(e){const n=hd(e.touches,G(this.Ed));if(n===null)return;const s=this.Fd(e,n);this.Ud(s,this.qd.If),this.bd=!0,this.vd=!0}Nd(e){return e.sourceCapabilities&&e.sourceCapabilities.firesTouchEvents!==void 0?e.sourceCapabilities.firesTouchEvents:yl(e)<this.Bd+500}Ud(e,n){n&&n.call(this.qd,e)}jd(e,n){n&&n.call(this.qd,e)}Fd(e,n){const s=n||e,r=this.Zd.getBoundingClientRect()||{left:0,top:0};return{clientX:s.clientX,clientY:s.clientY,pageX:s.pageX,pageY:s.pageY,screenX:s.screenX,screenY:s.screenY,localX:s.clientX-r.left,localY:s.clientY-r.top,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey,Bf:!e.type.startsWith("mouse")&&e.type!=="contextmenu"&&e.type!=="click",Ef:e.type,Af:s.target,a_:e.view,zf:()=>{e.type!=="touchstart"&&Xr(e)}}}}function ux(t,e){const n=t.clientX-e.clientX,s=t.clientY-e.clientY;return Math.sqrt(n*n+s*s)}function Xr(t){t.cancelable&&t.preventDefault()}function In(t){return{_t:t.pageX,ut:t.pageY}}function yl(t){return t.timeStamp||performance.now()}function hd(t,e){for(let n=0;n<t.length;++n)if(t[n].identifier===e)return t[n];return null}class OD{constructor(e,n,s){this.Lf=null,this.Of=null,this.Nf=!0,this.Ff=null,this.Wf=e,this.Hf=e.Uf()[n],this.$f=e.Uf()[s],this.qf=document.createElement("tr"),this.qf.style.height="1px",this.Yf=document.createElement("td"),this.Yf.style.position="relative",this.Yf.style.padding="0",this.Yf.style.margin="0",this.Yf.setAttribute("colspan","3"),this.jf(),this.qf.appendChild(this.Yf),this.Nf=this.Wf.N().layout.panes.enableResize,this.Nf?this.Kf():(this.Lf=null,this.Of=null)}m(){this.Of!==null&&this.Of.m()}Xf(){return this.qf}Zf(){return Re({width:this.Hf.Zf().width,height:1})}Gf(){return Re({width:this.Hf.Gf().width,height:1*window.devicePixelRatio})}Jf(e,n,s){const r=this.Gf();e.fillStyle=this.Wf.N().layout.panes.separatorColor,e.fillRect(n,s,r.width,r.height)}kt(){this.jf(),this.Wf.N().layout.panes.enableResize!==this.Nf&&(this.Nf=this.Wf.N().layout.panes.enableResize,this.Nf?this.Kf():(this.Lf!==null&&(this.Yf.removeChild(this.Lf.Qf),this.Yf.removeChild(this.Lf.tp),this.Lf=null),this.Of!==null&&(this.Of.m(),this.Of=null)))}Kf(){const e=document.createElement("div"),n=e.style;n.position="fixed",n.display="none",n.zIndex="49",n.top="0",n.left="0",n.width="100%",n.height="100%",n.cursor="row-resize",this.Yf.appendChild(e);const s=document.createElement("div"),r=s.style;r.position="absolute",r.zIndex="50",r.top="-4px",r.height="9px",r.width="100%",r.backgroundColor="",r.cursor="row-resize",this.Yf.appendChild(s);const i={if:this.ip.bind(this),Vf:this.sp.bind(this),bf:this.np.bind(this),gf:this.np.bind(this),uf:this.ep.bind(this),lf:this.ep.bind(this),pf:this.rp.bind(this),df:this.rp.bind(this)};this.Of=new Bu(s,i,{hf:()=>!1,af:()=>!0}),this.Lf={tp:s,Qf:e}}jf(){this.Yf.style.background=this.Wf.N().layout.panes.separatorColor}ip(e){this.Lf!==null&&(this.Lf.tp.style.backgroundColor=this.Wf.N().layout.panes.separatorHoverColor)}sp(e){this.Lf!==null&&this.Ff===null&&(this.Lf.tp.style.backgroundColor="")}np(e){if(this.Lf===null)return;const n=this.Hf.hp().Io()+this.$f.hp().Io(),s=n/(this.Hf.Zf().height+this.$f.Zf().height),r=30*s;n<=2*r||(this.Ff={ap:e.pageY,lp:this.Hf.hp().Io(),op:n-r,_p:n,up:s,cp:r},this.Lf.Qf.style.display="block")}ep(e){const n=this.Ff;if(n===null)return;const s=(e.pageY-n.ap)*n.up,r=Ni(n.lp+s,n.cp,n.op);this.Hf.hp().Bo(r),this.$f.hp().Bo(n._p-r),this.Wf.Qt().Bh()}rp(e){this.Ff!==null&&this.Lf!==null&&(this.Ff=null,this.Lf.Qf.style.display="none")}}function dd(t,e){return t.dp-e.dp}function fd(t,e,n){const s=(t.dp-e.dp)/(t.wt-e.wt);return Math.sign(s)*Math.min(Math.abs(s),n)}class DD{constructor(e,n,s,r){this.fp=null,this.pp=null,this.vp=null,this.mp=null,this.wp=null,this.gp=0,this.Mp=0,this.bp=e,this.Sp=n,this.xp=s,this.Mn=r}Cp(e,n){if(this.fp!==null){if(this.fp.wt===n)return void(this.fp.dp=e);if(Math.abs(this.fp.dp-e)<this.Mn)return}this.mp=this.vp,this.vp=this.pp,this.pp=this.fp,this.fp={wt:n,dp:e}}le(e,n){if(this.fp===null||this.pp===null||n-this.fp.wt>50)return;let s=0;const r=fd(this.fp,this.pp,this.Sp),i=dd(this.fp,this.pp),o=[r],l=[i];if(s+=i,this.vp!==null){const u=fd(this.pp,this.vp,this.Sp);if(Math.sign(u)===Math.sign(r)){const h=dd(this.pp,this.vp);if(o.push(u),l.push(h),s+=h,this.mp!==null){const d=fd(this.vp,this.mp,this.Sp);if(Math.sign(d)===Math.sign(r)){const f=dd(this.vp,this.mp);o.push(d),l.push(f),s+=f}}}}let c=0;for(let u=0;u<o.length;++u)c+=l[u]/s*o[u];Math.abs(c)<this.bp||(this.wp={dp:e,wt:n},this.Mp=c,this.gp=function(u,h){const d=Math.log(h);return Math.log(1*d/-u)/d}(Math.abs(c),this.xp))}Ru(e){const n=G(this.wp),s=e-n.wt;return n.dp+this.Mp*(Math.pow(this.xp,s)-1)/Math.log(this.xp)}Tu(e){return this.wp===null||this.Pp(e)===this.gp}Pp(e){const n=e-G(this.wp).wt;return Math.min(n,this.gp)}}class FD{constructor(e,n){this.kp=void 0,this.yp=void 0,this.Tp=void 0,this.ps=!1,this.Rp=e,this.Dp=n,this.Vp()}kt(){this.Vp()}Ip(){this.kp&&this.Rp.removeChild(this.kp),this.yp&&this.Rp.removeChild(this.yp),this.kp=void 0,this.yp=void 0}Bp(){return this.ps!==this.Ep()||this.Tp!==this.Ap()}Ap(){return this.Dp.Qt().Xi().J(this.Dp.N().layout.textColor)>160?"dark":"light"}Ep(){return this.Dp.N().layout.attributionLogo}zp(){const e=new URL(location.href);return e.hostname?"&utm_source="+e.hostname+e.pathname:""}Vp(){this.Bp()&&(this.Ip(),this.ps=this.Ep(),this.ps&&(this.Tp=this.Ap(),this.yp=document.createElement("style"),this.yp.innerText="a#tv-attr-logo{--fill:#131722;--stroke:#fff;position:absolute;left:10px;bottom:10px;height:19px;width:35px;margin:0;padding:0;border:0;z-index:3;}a#tv-attr-logo[data-dark]{--fill:#D1D4DC;--stroke:#131722;}",this.kp=document.createElement("a"),this.kp.href=`https://www.tradingview.com/?utm_medium=lwc-link&utm_campaign=lwc-chart${this.zp()}`,this.kp.title="Charting by TradingView",this.kp.id="tv-attr-logo",this.kp.target="_blank",this.kp.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="35" height="19" fill="none"><g fill-rule="evenodd" clip-path="url(#a)" clip-rule="evenodd"><path fill="var(--stroke)" d="M2 0H0v10h6v9h21.4l.5-1.3 6-15 1-2.7H23.7l-.5 1.3-.2.6a5 5 0 0 0-7-.9V0H2Zm20 17h4l5.2-13 .8-2h-7l-1 2.5-.2.5-1.5 3.8-.3.7V17Zm-.8-10a3 3 0 0 0 .7-2.7A3 3 0 1 0 16.8 7h4.4ZM14 7V2H2v6h6v9h4V7h2Z"/><path fill="var(--fill)" d="M14 2H2v6h6v9h6V2Zm12 15h-7l6-15h7l-6 15Zm-7-9a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/></g><defs><clipPath id="a"><path fill="var(--stroke)" d="M0 0h35v19H0z"/></clipPath></defs></svg>',this.kp.toggleAttribute("data-dark",this.Tp==="dark"),this.Rp.appendChild(this.yp),this.Rp.appendChild(this.kp)))}}function Dr(t,e){const n=G(t.ownerDocument).createElement("canvas");t.appendChild(n);const s=j3(n,{options:{allowResizeObserver:!0},transform:(r,i)=>({width:Math.max(r.width,i.width),height:Math.max(r.height,i.height)})});return s.resizeCanvasElement(e),s}function Fr(t){var e;t.width=1,t.height=1,(e=t.getContext("2d"))==null||e.clearRect(0,0,1,1)}function hp(t,e,n,s){t.ih&&t.ih(e,n,s)}function Vl(t,e,n,s){t.nt(e,n,s)}function dp(t,e,n,s){const r=t(n,s);for(const i of r){const o=i.Tt(s);o!==null&&e(o)}}function pd(t,e){return n=>{var s,r;return function(i){return i.Ft!==void 0}(n)?(((s=n.Ft())==null?void 0:s.wa())??"")!==e?[]:((r=n.ta)==null?void 0:r.call(n,t))??[]:[]}}function hx(t,e,n,s){if(!t.length)return;let r=0;const i=t[0].$t(s,!0);let o=e===1?n/2-(t[0].Fi()-i/2):t[0].Fi()-i/2-n/2;o=Math.max(0,o);for(let l=1;l<t.length;l++){const c=t[l],u=t[l-1],h=u.$t(s,!1),d=c.Fi(),f=u.Fi();if(e===1?d>f-h:d<f+h){const x=f-h*e;c.Wi(x);const p=x-e*h/2;if((e===1?p<0:p>n)&&o>0){const y=e===1?-1-p:p-n,w=Math.min(y,o);for(let m=r;m<t.length;m++)t[m].Wi(t[m].Fi()+e*w);o-=w}}else r=l,o=e===1?f-h-d:d-(f+h)}}class dx{constructor(e,n,s,r){this.Yi=null,this.Lp=null,this.Op=!1,this.Np=new Dc(200),this.Fp=null,this.Wp=0,this.Hp=!1,this.Up=()=>{this.Hp||this.Pt.$p().Qt().ar()},this.qp=()=>{this.Hp||this.Pt.$p().Qt().ar()},this.Pt=e,this.Ps=n,this.bl=n.layout,this.Gu=s,this.Yp=r==="left",this.jp=pd("normal",r),this.Kp=pd("top",r),this.Xp=pd("bottom",r),this.Yf=document.createElement("div"),this.Yf.style.height="100%",this.Yf.style.overflow="hidden",this.Yf.style.width="25px",this.Yf.style.left="0",this.Yf.style.position="relative",this.Zp=Dr(this.Yf,Re({width:16,height:16})),this.Zp.subscribeSuggestedBitmapSizeChanged(this.Up);const i=this.Zp.canvasElement;i.style.position="absolute",i.style.zIndex="1",i.style.left="0",i.style.top="0",this.Gp=Dr(this.Yf,Re({width:16,height:16})),this.Gp.subscribeSuggestedBitmapSizeChanged(this.qp);const o=this.Gp.canvasElement;o.style.position="absolute",o.style.zIndex="2",o.style.left="0",o.style.top="0";const l={bf:this.np.bind(this),gf:this.np.bind(this),uf:this.ep.bind(this),lf:this.ep.bind(this),Sf:this.Jp.bind(this),pf:this.rp.bind(this),df:this.rp.bind(this),Kd:this.Qp.bind(this),$d:this.Qp.bind(this),if:this.tv.bind(this),Vf:this.sp.bind(this)};this.Of=new Bu(this.Gp.canvasElement,l,{hf:()=>!this.Ps.handleScroll.vertTouchDrag,af:()=>!0})}m(){this.Of.m(),this.Gp.unsubscribeSuggestedBitmapSizeChanged(this.qp),Fr(this.Gp.canvasElement),this.Gp.dispose(),this.Zp.unsubscribeSuggestedBitmapSizeChanged(this.Up),Fr(this.Zp.canvasElement),this.Zp.dispose(),this.Yi!==null&&this.Yi.no().u(this),this.Yi=null}Xf(){return this.Yf}P(){return this.bl.fontSize}iv(){const e=this.Gu.N();return this.Fp!==e.k&&(this.Np.In(),this.Fp=e.k),e}sv(){if(this.Yi===null)return 0;let e=0;const n=this.iv(),s=G(this.Zp.canvasElement.getContext("2d",{colorSpace:this.Pt.$p().N().layout.colorSpace}));s.save();const r=this.Yi.Va();s.font=this.nv(),r.length>0&&(e=Math.max(this.Np.Vi(s,r[0].Ga),this.Np.Vi(s,r[r.length-1].Ga)));const i=this.ev();for(let u=i.length;u--;){const h=this.Np.Vi(s,i[u].ri());h>e&&(e=h)}const o=this.Yi.zt();if(o!==null&&this.Lp!==null&&(l=this.Ps.crosshair).mode!==2&&l.horzLine.visible&&l.horzLine.labelVisible){const u=this.Yi.Ts(1,o),h=this.Yi.Ts(this.Lp.height-2,o);e=Math.max(e,this.Np.Vi(s,this.Yi.Zi(Math.floor(Math.min(u,h))+.11111111111111,o)),this.Np.Vi(s,this.Yi.Zi(Math.ceil(Math.max(u,h))-.11111111111111,o)))}var l;s.restore();const c=e||34;return up(Math.ceil(n.S+n.C+n.I+n.B+5+c))}rv(e){this.Lp!==null&&kr(this.Lp,e)||(this.Lp=e,this.Hp=!0,this.Zp.resizeCanvasElement(e),this.Gp.resizeCanvasElement(e),this.Hp=!1,this.Yf.style.width=`${e.width}px`,this.Yf.style.height=`${e.height}px`)}hv(){return G(this.Lp).width}_s(e){this.Yi!==e&&(this.Yi!==null&&this.Yi.no().u(this),this.Yi=e,e.no().i(this.ul.bind(this),this))}Ft(){return this.Yi}In(){const e=this.Pt.hp();this.Pt.$p().Qt().Zo(e,G(this.Ft()))}av(e){if(this.Lp===null)return;const n={colorSpace:this.Pt.$p().N().layout.colorSpace};if(e!==1){this.lv(),this.Zp.applySuggestedBitmapSize();const r=Ar(this.Zp,n);r!==null&&(r.useBitmapCoordinateSpace(i=>{this.ov(i),this._v(i)}),this.Pt.uv(r,this.Xp),this.cv(r),this.Pt.uv(r,this.jp),this.dv(r))}this.Gp.applySuggestedBitmapSize();const s=Ar(this.Gp,n);s!==null&&(s.useBitmapCoordinateSpace(({context:r,bitmapSize:i})=>{r.clearRect(0,0,i.width,i.height)}),this.fv(s),this.Pt.uv(s,this.Kp))}Gf(){return this.Zp.bitmapSize}Jf(e,n,s){const r=this.Gf();r.width>0&&r.height>0&&e.drawImage(this.Zp.canvasElement,n,s)}kt(){var e;(e=this.Yi)==null||e.Va()}np(e){if(this.Yi===null||this.Yi.Ki()||!this.Ps.handleScale.axisPressedMouseMove.price)return;const n=this.Pt.$p().Qt(),s=this.Pt.hp();this.Op=!0,n.Uo(s,this.Yi,e.localY)}ep(e){if(this.Yi===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const n=this.Pt.$p().Qt(),s=this.Pt.hp(),r=this.Yi;n.$o(s,r,e.localY)}Jp(){if(this.Yi===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const e=this.Pt.$p().Qt(),n=this.Pt.hp(),s=this.Yi;this.Op&&(this.Op=!1,e.qo(n,s))}rp(e){if(this.Yi===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const n=this.Pt.$p().Qt(),s=this.Pt.hp();this.Op=!1,n.qo(s,this.Yi)}Qp(e){this.Ps.handleScale.axisDoubleClickReset.price&&this.In()}tv(e){this.Yi!==null&&(!this.Pt.$p().Qt().N().handleScale.axisPressedMouseMove.price||this.Yi.Le()||this.Yi.Vl()||this.pv(1))}sp(e){this.pv(0)}ev(){const e=[],n=this.Yi===null?void 0:this.Yi;return(s=>{for(let r=0;r<s.length;++r){const i=s[r].Ws(this.Pt.hp(),n);for(let o=0;o<i.length;o++)e.push(i[o])}})(this.Pt.hp().Dt()),e}ov({context:e,bitmapSize:n}){const{width:s,height:r}=n,i=this.Pt.hp().Qt(),o=i.$(),l=i.Fc();o===l?Iu(e,0,0,s,r,o):GN(e,0,0,s,r,o,l)}_v({context:e,bitmapSize:n,horizontalPixelRatio:s}){if(this.Lp===null||this.Yi===null||!this.Yi.N().borderVisible)return;e.fillStyle=this.Yi.N().borderColor;const r=Math.max(1,Math.floor(this.iv().S*s));let i;i=this.Yp?n.width-r:0,e.fillRect(i,0,r,n.height)}cv(e){if(this.Lp===null||this.Yi===null)return;const n=this.Yi.Va(),s=this.Yi.N(),r=this.iv(),i=this.Yp?this.Lp.width-r.C:0;s.borderVisible&&s.ticksVisible&&e.useBitmapCoordinateSpace(({context:o,horizontalPixelRatio:l,verticalPixelRatio:c})=>{o.fillStyle=s.borderColor;const u=Math.max(1,Math.floor(c)),h=Math.floor(.5*c),d=Math.round(r.C*l);o.beginPath();for(const f of n)o.rect(Math.floor(i*l),Math.round(f.ka*c)-h,d,u);o.fill()}),e.useMediaCoordinateSpace(({context:o})=>{o.font=this.nv(),o.fillStyle=s.textColor??this.bl.textColor,o.textAlign=this.Yp?"right":"left",o.textBaseline="middle";const l=this.Yp?Math.round(i-r.I):Math.round(i+r.C+r.I),c=n.map(u=>this.Np.Di(o,u.Ga));for(let u=n.length;u--;){const h=n[u];o.fillText(h.Ga,l,h.ka+c[u])}})}lv(){if(this.Lp===null||this.Yi===null)return;let e=this.Lp.height/2;const n=[],s=this.Yi.Dt().slice(),r=this.Pt.hp(),i=this.iv();this.Yi===r.$n()&&this.Pt.hp().Dt().forEach(c=>{r.Un(c)&&s.push(c)});const o=this.Yi.ba()[0],l=this.Yi;s.forEach(c=>{const u=c.Ws(r,l);u.forEach(h=>{h.Wi(null),h.Hi()&&n.push(h)}),o===c&&u.length>0&&(e=u[0].Bi())}),n.forEach(c=>c.Wi(c.Bi())),this.Yi.N().alignLabels&&this.vv(n,i,e)}vv(e,n,s){if(this.Lp===null)return;const r=e.filter(o=>o.Bi()<=s),i=e.filter(o=>o.Bi()>s);r.sort((o,l)=>l.Bi()-o.Bi()),r.length&&i.length&&i.push(r[0]),i.sort((o,l)=>o.Bi()-l.Bi());for(const o of e){const l=Math.floor(o.$t(n)/2),c=o.Bi();c>-l&&c<l&&o.Wi(l),c>this.Lp.height-l&&c<this.Lp.height+l&&o.Wi(this.Lp.height-l)}hx(r,1,this.Lp.height,n),hx(i,-1,this.Lp.height,n)}dv(e){if(this.Lp===null)return;const n=this.ev(),s=this.iv(),r=this.Yp?"right":"left";n.forEach(i=>{i.Ui()&&i.Tt(G(this.Yi)).nt(e,s,this.Np,r)})}fv(e){if(this.Lp===null||this.Yi===null)return;const n=this.Pt.$p().Qt(),s=[],r=this.Pt.hp(),i=n._c().Ws(r,this.Yi);i.length&&s.push(i);const o=this.iv(),l=this.Yp?"right":"left";s.forEach(c=>{c.forEach(u=>{u.Tt(G(this.Yi)).nt(e,o,this.Np,l)})})}pv(e){this.Yf.style.cursor=e===1?"ns-resize":"default"}ul(){const e=this.sv();this.Wp<e&&this.Pt.$p().Qt().Bh(),this.Wp=e}nv(){return Oc(this.bl.fontSize,this.bl.fontFamily)}}function BD(t,e){var n;return((n=t.Jh)==null?void 0:n.call(t,e))??[]}function fx(t,e){var n;return((n=t.Fs)==null?void 0:n.call(t,e))??[]}function px(t,e){var n;return((n=t.us)==null?void 0:n.call(t,e))??[]}function zD(t,e){var n;return((n=t.Xh)==null?void 0:n.call(t,e))??[]}class ig{constructor(e,n){this.Lp=Re({width:0,height:0}),this.mv=null,this.wv=null,this.gv=null,this.Mv=null,this.bv=!1,this.Sv=new tt,this.xv=new tt,this.Cv=0,this.Pv=!1,this.kv=null,this.yv=!1,this.Tv=null,this.Rv=null,this.Hp=!1,this.Up=()=>{this.Hp||this.Dv===null||this.ts().ar()},this.qp=()=>{this.Hp||this.Dv===null||this.ts().ar()},this.Dp=e,this.Dv=n,this.Dv.t_().i(this.Vv.bind(this),this,!0),this.Iv=document.createElement("td"),this.Iv.style.padding="0",this.Iv.style.position="relative";const s=document.createElement("div");s.style.width="100%",s.style.height="100%",s.style.position="relative",s.style.overflow="hidden",this.Bv=document.createElement("td"),this.Bv.style.padding="0",this.Ev=document.createElement("td"),this.Ev.style.padding="0",this.Iv.appendChild(s),this.Zp=Dr(s,Re({width:16,height:16})),this.Zp.subscribeSuggestedBitmapSizeChanged(this.Up);const r=this.Zp.canvasElement;r.style.position="absolute",r.style.zIndex="1",r.style.left="0",r.style.top="0",this.Gp=Dr(s,Re({width:16,height:16})),this.Gp.subscribeSuggestedBitmapSizeChanged(this.qp);const i=this.Gp.canvasElement;i.style.position="absolute",i.style.zIndex="2",i.style.left="0",i.style.top="0",this.qf=document.createElement("tr"),this.qf.appendChild(this.Bv),this.qf.appendChild(this.Iv),this.qf.appendChild(this.Ev),this.Av(),this.Of=new Bu(this.Gp.canvasElement,this,{hf:()=>this.kv===null&&!this.Dp.N().handleScroll.vertTouchDrag,af:()=>this.kv===null&&!this.Dp.N().handleScroll.horzTouchDrag})}m(){this.mv!==null&&this.mv.m(),this.wv!==null&&this.wv.m(),this.gv=null,this.Gp.unsubscribeSuggestedBitmapSizeChanged(this.qp),Fr(this.Gp.canvasElement),this.Gp.dispose(),this.Zp.unsubscribeSuggestedBitmapSizeChanged(this.Up),Fr(this.Zp.canvasElement),this.Zp.dispose(),this.Dv!==null&&(this.Dv.t_().u(this),this.Dv.m()),this.Of.m()}hp(){return G(this.Dv)}zv(e){var n;this.Dv!==null&&this.Dv.t_().u(this),this.Dv=e,this.Dv!==null&&this.Dv.t_().i(ig.prototype.Vv.bind(this),this,!0),this.Av(),this.Dp.Uf().indexOf(this)===this.Dp.Uf().length-1?(this.gv=this.gv??new FD(this.Iv,this.Dp),this.gv.kt()):((n=this.gv)==null||n.Ip(),this.gv=null)}$p(){return this.Dp}Xf(){return this.qf}Av(){if(this.Dv!==null&&(this.Lv(),this.ts().js().length!==0)){if(this.mv!==null){const e=this.Dv.Wo();this.mv._s(G(e))}if(this.wv!==null){const e=this.Dv.Ho();this.wv._s(G(e))}}}Ov(){this.mv!==null&&this.mv.kt(),this.wv!==null&&this.wv.kt()}Io(){return this.Dv!==null?this.Dv.Io():0}Bo(e){this.Dv&&this.Dv.Bo(e)}if(e){if(!this.Dv)return;this.Nv();const n=e.localX,s=e.localY;this.Fv(n,s,e)}bf(e){this.Nv(),this.Wv(),this.Fv(e.localX,e.localY,e)}sf(e){if(!this.Dv)return;this.Nv();const n=e.localX,s=e.localY;this.Fv(n,s,e)}vf(e){this.Dv!==null&&(this.Nv(),this.Hv(e))}Kd(e){this.Dv!==null&&this.Uv(this.xv,e)}$d(e){this.Kd(e)}uf(e){this.Nv(),this.$v(e),this.Fv(e.localX,e.localY,e)}pf(e){this.Dv!==null&&(this.Nv(),this.Pv=!1,this.qv(e))}ff(e){this.Dv!==null&&this.Hv(e)}If(e){if(this.Pv=!0,this.kv===null){const n={x:e.localX,y:e.localY};this.Yv(n,n,e)}}Vf(e){this.Dv!==null&&(this.Nv(),this.Dv.Qt().ac(null),this.jv())}Kv(){return this.Sv}Xv(){return this.xv}Pf(){this.Cv=1,this.ts().hn()}kf(e,n){if(!this.Dp.N().handleScale.pinch)return;const s=5*(n-this.Cv);this.Cv=n,this.ts().Mc(e._t,s)}gf(e){this.Pv=!1,this.yv=this.kv!==null,this.Wv();const n=this.ts()._c();this.kv!==null&&n.Vt()&&(this.Tv={x:n.si(),y:n.ni()},this.kv={x:e.localX,y:e.localY})}lf(e){if(this.Dv===null)return;const n=e.localX,s=e.localY;if(this.kv===null)this.$v(e);else{this.yv=!1;const r=G(this.Tv),i=r.x+(n-this.kv.x),o=r.y+(s-this.kv.y);this.Fv(i,o,e)}}df(e){this.$p().N().trackingMode.exitMode===0&&(this.yv=!0),this.Zv(),this.qv(e)}jn(e,n){const s=this.Dv;return s===null?null:ij(s,e,n)}Gv(e,n){G(n==="left"?this.mv:this.wv).rv(Re({width:e,height:this.Lp.height}))}Zf(){return this.Lp}rv(e){kr(this.Lp,e)||(this.Lp=e,this.Hp=!0,this.Zp.resizeCanvasElement(e),this.Gp.resizeCanvasElement(e),this.Hp=!1,this.Iv.style.width=e.width+"px",this.Iv.style.height=e.height+"px")}Jv(){const e=G(this.Dv);e.Fo(e.Wo()),e.Fo(e.Ho());for(const n of e.ba())if(e.Un(n)){const s=n.Ft();s!==null&&e.Fo(s),n.Ns()}for(const n of e.s_())n.Ns()}Gf(){return this.Zp.bitmapSize}Jf(e,n,s){const r=this.Gf();r.width>0&&r.height>0&&e.drawImage(this.Zp.canvasElement,n,s)}av(e){if(e===0||this.Dv===null)return;e>1&&this.Jv(),this.mv!==null&&this.mv.av(e),this.wv!==null&&this.wv.av(e);const n={colorSpace:this.Dp.N().layout.colorSpace};if(e!==1){this.Zp.applySuggestedBitmapSize();const r=Ar(this.Zp,n);r!==null&&(r.useBitmapCoordinateSpace(i=>{this.ov(i)}),this.Dv&&(this.Qv(r,BD),this.tm(r),this.Qv(r,fx),this.Qv(r,px)))}this.Gp.applySuggestedBitmapSize();const s=Ar(this.Gp,n);s!==null&&(s.useBitmapCoordinateSpace(({context:r,bitmapSize:i})=>{r.clearRect(0,0,i.width,i.height)}),this.im(s),this.Qv(s,zD),this.Qv(s,px))}sm(){return this.mv}nm(){return this.wv}uv(e,n){this.Qv(e,n)}Vv(){this.Dv!==null&&this.Dv.t_().u(this),this.Dv=null}Hv(e){this.Uv(this.Sv,e)}Uv(e,n){const s=n.localX,r=n.localY;e.v()&&e.p(this.ts().Et().uu(s),{x:s,y:r},n)}ov({context:e,bitmapSize:n}){const{width:s,height:r}=n,i=this.ts(),o=i.$(),l=i.Fc();o===l?Iu(e,0,0,s,r,l):GN(e,0,0,s,r,o,l)}tm(e){const n=G(this.Dv),s=n.i_().lr().Tt(n);s!==null&&s.nt(e,!1)}im(e){this.rm(e,fx,Vl,this.ts()._c())}Qv(e,n){const s=G(this.Dv),r=s.Dt(),i=s.s_();for(const o of i)this.rm(e,n,hp,o);for(const o of r)this.rm(e,n,hp,o);for(const o of i)this.rm(e,n,Vl,o);for(const o of r)this.rm(e,n,Vl,o)}rm(e,n,s,r){const i=G(this.Dv),o=i.Qt().hc(),l=o!==null&&o.n_===r,c=o!==null&&l&&o.e_!==void 0?o.e_.Xn:void 0;dp(n,u=>s(u,e,l,c),r,i)}Lv(){if(this.Dv===null)return;const e=this.Dp,n=this.Dv.Wo().N().visible,s=this.Dv.Ho().N().visible;n||this.mv===null||(this.Bv.removeChild(this.mv.Xf()),this.mv.m(),this.mv=null),s||this.wv===null||(this.Ev.removeChild(this.wv.Xf()),this.wv.m(),this.wv=null);const r=e.Qt().Vc();n&&this.mv===null&&(this.mv=new dx(this,e.N(),r,"left"),this.Bv.appendChild(this.mv.Xf())),s&&this.wv===null&&(this.wv=new dx(this,e.N(),r,"right"),this.Ev.appendChild(this.wv.Xf()))}hm(e){return e.Bf&&this.Pv||this.kv!==null}am(e){return Math.max(0,Math.min(e,this.Lp.width-1))}lm(e){return Math.max(0,Math.min(e,this.Lp.height-1))}Fv(e,n,s){this.ts().yc(this.am(e),this.lm(n),s,G(this.Dv))}jv(){this.ts().Rc()}Zv(){this.yv&&(this.kv=null,this.jv())}Yv(e,n,s){this.kv=e,this.yv=!1,this.Fv(n.x,n.y,s);const r=this.ts()._c();this.Tv={x:r.si(),y:r.ni()}}ts(){return this.Dp.Qt()}qv(e){if(!this.bv)return;const n=this.ts(),s=this.hp();if(n.Ko(s,s.ys()),this.Mv=null,this.bv=!1,n.Cc(),this.Rv!==null){const r=performance.now(),i=n.Et();this.Rv.le(i.wu(),r),this.Rv.Tu(r)||n._n(this.Rv)}}Nv(){this.kv=null}Wv(){if(this.Dv){if(this.ts().hn(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)G(document.activeElement).blur();else{const e=document.getSelection();e!==null&&e.removeAllRanges()}!this.Dv.ys().Ki()&&this.ts().Et().Ki()}}$v(e){if(this.Dv===null)return;const n=this.ts(),s=n.Et();if(s.Ki())return;const r=this.Dp.N(),i=r.handleScroll,o=r.kineticScroll;if((!i.pressedMouseMove||e.Bf)&&(!i.horzTouchDrag&&!i.vertTouchDrag||!e.Bf))return;const l=this.Dv.ys(),c=performance.now();if(this.Mv!==null||this.hm(e)||(this.Mv={x:e.clientX,y:e.clientY,ed:c,om:e.localX,_m:e.localY}),this.Mv!==null&&!this.bv&&(this.Mv.x!==e.clientX||this.Mv.y!==e.clientY)){if(e.Bf&&o.touch||!e.Bf&&o.mouse){const u=s.vu();this.Rv=new DD(.2/u,7/u,.997,15/u),this.Rv.Cp(s.wu(),this.Mv.ed)}else this.Rv=null;l.Ki()||n.Yo(this.Dv,l,e.localY),n.Sc(e.localX),this.bv=!0}this.bv&&(l.Ki()||n.jo(this.Dv,l,e.localY),n.xc(e.localX),this.Rv!==null&&this.Rv.Cp(s.wu(),c))}}class mx{constructor(e,n,s,r,i){this.xt=!0,this.Lp=Re({width:0,height:0}),this.Up=()=>this.av(3),this.Yp=e==="left",this.Gu=s.Vc,this.Ps=n,this.um=r,this.dm=i,this.Yf=document.createElement("div"),this.Yf.style.width="25px",this.Yf.style.height="100%",this.Yf.style.overflow="hidden",this.Zp=Dr(this.Yf,Re({width:16,height:16})),this.Zp.subscribeSuggestedBitmapSizeChanged(this.Up)}m(){this.Zp.unsubscribeSuggestedBitmapSizeChanged(this.Up),Fr(this.Zp.canvasElement),this.Zp.dispose()}Xf(){return this.Yf}Zf(){return this.Lp}rv(e){kr(this.Lp,e)||(this.Lp=e,this.Zp.resizeCanvasElement(e),this.Yf.style.width=`${e.width}px`,this.Yf.style.height=`${e.height}px`,this.xt=!0)}av(e){if(e<3&&!this.xt||this.Lp.width===0||this.Lp.height===0)return;this.xt=!1,this.Zp.applySuggestedBitmapSize();const n=Ar(this.Zp,{colorSpace:this.Ps.layout.colorSpace});n!==null&&n.useBitmapCoordinateSpace(s=>{this.ov(s),this._v(s)})}Gf(){return this.Zp.bitmapSize}Jf(e,n,s){const r=this.Gf();r.width>0&&r.height>0&&e.drawImage(this.Zp.canvasElement,n,s)}_v({context:e,bitmapSize:n,horizontalPixelRatio:s,verticalPixelRatio:r}){if(!this.um())return;e.fillStyle=this.Ps.timeScale.borderColor;const i=Math.floor(this.Gu.N().S*s),o=Math.floor(this.Gu.N().S*r),l=this.Yp?n.width-i:0;e.fillRect(l,0,i,o)}ov({context:e,bitmapSize:n}){Iu(e,0,0,n.width,n.height,this.dm())}}function ag(t){return e=>{var n;return((n=e.ia)==null?void 0:n.call(e,t))??[]}}const $D=ag("normal"),VD=ag("top"),UD=ag("bottom");class WD{constructor(e,n){this.fm=null,this.pm=null,this.M=null,this.vm=!1,this.Lp=Re({width:0,height:0}),this.wm=new tt,this.Np=new Dc(5),this.Hp=!1,this.Up=()=>{this.Hp||this.Dp.Qt().ar()},this.qp=()=>{this.Hp||this.Dp.Qt().ar()},this.Dp=e,this.o_=n,this.Ps=e.N().layout,this.kp=document.createElement("tr"),this.gm=document.createElement("td"),this.gm.style.padding="0",this.Mm=document.createElement("td"),this.Mm.style.padding="0",this.Yf=document.createElement("td"),this.Yf.style.height="25px",this.Yf.style.padding="0",this.bm=document.createElement("div"),this.bm.style.width="100%",this.bm.style.height="100%",this.bm.style.position="relative",this.bm.style.overflow="hidden",this.Yf.appendChild(this.bm),this.Zp=Dr(this.bm,Re({width:16,height:16})),this.Zp.subscribeSuggestedBitmapSizeChanged(this.Up);const s=this.Zp.canvasElement;s.style.position="absolute",s.style.zIndex="1",s.style.left="0",s.style.top="0",this.Gp=Dr(this.bm,Re({width:16,height:16})),this.Gp.subscribeSuggestedBitmapSizeChanged(this.qp);const r=this.Gp.canvasElement;r.style.position="absolute",r.style.zIndex="2",r.style.left="0",r.style.top="0",this.kp.appendChild(this.gm),this.kp.appendChild(this.Yf),this.kp.appendChild(this.Mm),this.Sm(),this.Dp.Qt().Vo().i(this.Sm.bind(this),this),this.Of=new Bu(this.Gp.canvasElement,this,{hf:()=>!0,af:()=>!this.Dp.N().handleScroll.horzTouchDrag})}m(){this.Of.m(),this.fm!==null&&this.fm.m(),this.pm!==null&&this.pm.m(),this.Gp.unsubscribeSuggestedBitmapSizeChanged(this.qp),Fr(this.Gp.canvasElement),this.Gp.dispose(),this.Zp.unsubscribeSuggestedBitmapSizeChanged(this.Up),Fr(this.Zp.canvasElement),this.Zp.dispose()}Xf(){return this.kp}xm(){return this.fm}Cm(){return this.pm}bf(e){if(this.vm)return;this.vm=!0;const n=this.Dp.Qt();!n.Et().Ki()&&this.Dp.N().handleScale.axisPressedMouseMove.time&&n.gc(e.localX)}gf(e){this.bf(e)}Sf(){const e=this.Dp.Qt();!e.Et().Ki()&&this.vm&&(this.vm=!1,this.Dp.N().handleScale.axisPressedMouseMove.time&&e.kc())}uf(e){const n=this.Dp.Qt();!n.Et().Ki()&&this.Dp.N().handleScale.axisPressedMouseMove.time&&n.Pc(e.localX)}lf(e){this.uf(e)}pf(){this.vm=!1;const e=this.Dp.Qt();e.Et().Ki()&&!this.Dp.N().handleScale.axisPressedMouseMove.time||e.kc()}df(){this.pf()}Kd(){this.Dp.N().handleScale.axisDoubleClickReset.time&&this.Dp.Qt().cn()}$d(){this.Kd()}if(){this.Dp.Qt().N().handleScale.axisPressedMouseMove.time&&this.pv(1)}Vf(){this.pv(0)}Zf(){return this.Lp}Pm(){return this.wm}km(e,n,s){kr(this.Lp,e)||(this.Lp=e,this.Hp=!0,this.Zp.resizeCanvasElement(e),this.Gp.resizeCanvasElement(e),this.Hp=!1,this.Yf.style.width=`${e.width}px`,this.Yf.style.height=`${e.height}px`,this.wm.p(e)),this.fm!==null&&this.fm.rv(Re({width:n,height:e.height})),this.pm!==null&&this.pm.rv(Re({width:s,height:e.height}))}ym(){const e=this.Tm();return Math.ceil(e.S+e.C+e.P+e.A+e.V+e.Rm)}kt(){this.Dp.Qt().Et().Va()}Gf(){return this.Zp.bitmapSize}Jf(e,n,s){const r=this.Gf();r.width>0&&r.height>0&&e.drawImage(this.Zp.canvasElement,n,s)}av(e){if(e===0)return;const n={colorSpace:this.Ps.colorSpace};if(e!==1){this.Zp.applySuggestedBitmapSize();const r=Ar(this.Zp,n);r!==null&&(r.useBitmapCoordinateSpace(i=>{this.ov(i),this._v(i),this.Dm(r,UD)}),this.cv(r),this.Dm(r,$D)),this.fm!==null&&this.fm.av(e),this.pm!==null&&this.pm.av(e)}this.Gp.applySuggestedBitmapSize();const s=Ar(this.Gp,n);s!==null&&(s.useBitmapCoordinateSpace(({context:r,bitmapSize:i})=>{r.clearRect(0,0,i.width,i.height)}),this.Vm([...this.Dp.Qt().js(),this.Dp.Qt()._c()],s),this.Dm(s,VD))}Dm(e,n){const s=this.Dp.Qt().js();for(const r of s)dp(n,i=>hp(i,e,!1,void 0),r,void 0);for(const r of s)dp(n,i=>Vl(i,e,!1,void 0),r,void 0)}ov({context:e,bitmapSize:n}){Iu(e,0,0,n.width,n.height,this.Dp.Qt().Fc())}_v({context:e,bitmapSize:n,verticalPixelRatio:s}){if(this.Dp.N().timeScale.borderVisible){e.fillStyle=this.Im();const r=Math.max(1,Math.floor(this.Tm().S*s));e.fillRect(0,0,n.width,r)}}cv(e){const n=this.Dp.Qt().Et(),s=n.Va();if(!s||s.length===0)return;const r=this.o_.maxTickMarkWeight(s),i=this.Tm(),o=n.N();o.borderVisible&&o.ticksVisible&&e.useBitmapCoordinateSpace(({context:l,horizontalPixelRatio:c,verticalPixelRatio:u})=>{l.strokeStyle=this.Im(),l.fillStyle=this.Im();const h=Math.max(1,Math.floor(c)),d=Math.floor(.5*c);l.beginPath();const f=Math.round(i.C*u);for(let x=s.length;x--;){const p=Math.round(s[x].coord*c);l.rect(p-d,0,h,f)}l.fill()}),e.useMediaCoordinateSpace(({context:l})=>{const c=i.S+i.C+i.A+i.P/2;l.textAlign="center",l.textBaseline="middle",l.fillStyle=this.H(),l.font=this.nv();for(const u of s)if(u.weight<r){const h=u.needAlignCoordinate?this.Bm(l,u.coord,u.label):u.coord;l.fillText(u.label,h,c)}this.Dp.N().timeScale.allowBoldLabels&&(l.font=this.Em());for(const u of s)if(u.weight>=r){const h=u.needAlignCoordinate?this.Bm(l,u.coord,u.label):u.coord;l.fillText(u.label,h,c)}})}Bm(e,n,s){const r=this.Np.Vi(e,s),i=r/2,o=Math.floor(n-i)+.5;return o<0?n+=Math.abs(0-o):o+r>this.Lp.width&&(n-=Math.abs(this.Lp.width-(o+r))),n}Vm(e,n){const s=this.Tm();for(const r of e)for(const i of r.cs())i.Tt().nt(n,s)}Im(){return this.Dp.N().timeScale.borderColor}H(){return this.Ps.textColor}F(){return this.Ps.fontSize}nv(){return Oc(this.F(),this.Ps.fontFamily)}Em(){return Oc(this.F(),this.Ps.fontFamily,"bold")}Tm(){this.M===null&&(this.M={S:1,L:NaN,A:NaN,V:NaN,Ji:NaN,C:5,P:NaN,k:"",Gi:new Dc,Rm:0});const e=this.M,n=this.nv();if(e.k!==n){const s=this.F();e.P=s,e.k=n,e.A=3*s/12,e.V=3*s/12,e.Ji=9*s/12,e.L=0,e.Rm=4*s/12,e.Gi.In()}return this.M}pv(e){this.Yf.style.cursor=e===1?"ew-resize":"default"}Sm(){const e=this.Dp.Qt(),n=e.N();n.leftPriceScale.visible||this.fm===null||(this.gm.removeChild(this.fm.Xf()),this.fm.m(),this.fm=null),n.rightPriceScale.visible||this.pm===null||(this.Mm.removeChild(this.pm.Xf()),this.pm.m(),this.pm=null);const s={Vc:this.Dp.Qt().Vc()},r=()=>n.leftPriceScale.borderVisible&&e.Et().N().borderVisible,i=()=>e.Fc();n.leftPriceScale.visible&&this.fm===null&&(this.fm=new mx("left",n,s,r,i),this.gm.appendChild(this.fm.Xf())),n.rightPriceScale.visible&&this.pm===null&&(this.pm=new mx("right",n,s,r,i),this.Mm.appendChild(this.pm.Xf()))}}var Hx;const HD=!!Bi&&!!navigator.userAgentData&&navigator.userAgentData.brands.some(t=>t.brand.includes("Chromium"))&&!!Bi&&((Hx=navigator==null?void 0:navigator.userAgentData)!=null&&Hx.platform?navigator.userAgentData.platform==="Windows":navigator.userAgent.toLowerCase().indexOf("win")>=0);class YD{constructor(e,n,s){var r;this.Am=[],this.zm=[],this.Lm=0,this.sl=0,this.Mo=0,this.Om=0,this.Nm=0,this.Fm=null,this.Wm=!1,this.Sv=new tt,this.xv=new tt,this.Ku=new tt,this.Hm=null,this.Um=null,this.Rp=e,this.Ps=n,this.o_=s,this.kp=document.createElement("div"),this.kp.classList.add("tv-lightweight-charts"),this.kp.style.overflow="hidden",this.kp.style.direction="ltr",this.kp.style.width="100%",this.kp.style.height="100%",(r=this.kp).style.userSelect="none",r.style.webkitUserSelect="none",r.style.msUserSelect="none",r.style.MozUserSelect="none",r.style.webkitTapHighlightColor="transparent",this.$m=document.createElement("table"),this.$m.setAttribute("cellspacing","0"),this.kp.appendChild(this.$m),this.qm=this.Ym.bind(this),md(this.Ps)&&this.jm(!0),this.ts=new LD(this.Zu.bind(this),this.Ps,s),this.Qt().uc().i(this.Km.bind(this),this),this.Xm=new WD(this,this.o_),this.$m.appendChild(this.Xm.Xf());const i=n.autoSize&&this.Zm();let o=this.Ps.width,l=this.Ps.height;if(i||o===0||l===0){const c=e.getBoundingClientRect();o=o||c.width,l=l||c.height}this.Gm(o,l),this.Jm(),e.appendChild(this.kp),this.Qm(),this.ts.Et().Iu().i(this.ts.Bh.bind(this.ts),this),this.ts.Vo().i(this.ts.Bh.bind(this.ts),this)}Qt(){return this.ts}N(){return this.Ps}Uf(){return this.Am}tw(){return this.Xm}m(){this.jm(!1),this.Lm!==0&&window.cancelAnimationFrame(this.Lm),this.ts.uc().u(this),this.ts.Et().Iu().u(this),this.ts.Vo().u(this),this.ts.m();for(const e of this.Am)this.$m.removeChild(e.Xf()),e.Kv().u(this),e.Xv().u(this),e.m();this.Am=[];for(const e of this.zm)this.iw(e);this.zm=[],G(this.Xm).m(),this.kp.parentElement!==null&&this.kp.parentElement.removeChild(this.kp),this.Ku.m(),this.Sv.m(),this.xv.m(),this.sw()}Gm(e,n,s=!1){if(this.sl===n&&this.Mo===e)return;const r=function(l){const c=Math.floor(l.width),u=Math.floor(l.height);return Re({width:c-c%2,height:u-u%2})}(Re({width:e,height:n}));this.sl=r.height,this.Mo=r.width;const i=this.sl+"px",o=this.Mo+"px";G(this.kp).style.height=i,G(this.kp).style.width=o,this.$m.style.height=i,this.$m.style.width=o,s?this.nw(pt.gn(),performance.now()):this.ts.Bh()}av(e){e===void 0&&(e=pt.gn());for(let n=0;n<this.Am.length;n++)this.Am[n].av(e.en(n).tn);this.Ps.timeScale.visible&&this.Xm.av(e.nn())}hr(e){var r;const n=md(this.Ps);this.ts.hr(e);const s=md(this.Ps);s!==n&&this.jm(s),(r=e.layout)!=null&&r.panes&&this.ew(),this.Qm(),this.rw(e)}Kv(){return this.Sv}Xv(){return this.xv}uc(){return this.Ku}hw(){this.Fm!==null&&(this.nw(this.Fm,performance.now()),this.Fm=null);const e=this.aw(null),n=document.createElement("canvas");n.width=e.width,n.height=e.height;const s=G(n.getContext("2d"));return this.aw(s),n}lw(e){return e==="left"&&!this.ow()||e==="right"&&!this._w()||this.Am.length===0?0:G(e==="left"?this.Am[0].sm():this.Am[0].nm()).hv()}uw(){return this.Ps.autoSize&&this.Hm!==null}tp(){return this.kp}cw(e){this.Um=e,this.Um?this.tp().style.setProperty("cursor",e):this.tp().style.removeProperty("cursor")}dw(){return this.Um}fw(e){return Yt(this.Am[e]).Zf()}ew(){this.zm.forEach(e=>{e.kt()})}rw(e){(e.autoSize!==void 0||!this.Hm||e.width===void 0&&e.height===void 0)&&(e.autoSize&&!this.Hm&&this.Zm(),e.autoSize===!1&&this.Hm!==null&&this.sw(),e.autoSize||e.width===void 0&&e.height===void 0||this.Gm(e.width||this.Mo,e.height||this.sl))}aw(e){let n=0,s=0;const r=this.Am[0],i=(l,c)=>{let u=0;for(let h=0;h<this.Am.length;h++){const d=this.Am[h],f=G(l==="left"?d.sm():d.nm()),x=f.Gf();if(e!==null&&f.Jf(e,c,u),u+=x.height,h<this.Am.length-1){const p=this.zm[h],y=p.Gf();e!==null&&p.Jf(e,c,u),u+=y.height}}};this.ow()&&(i("left",0),n+=G(r.sm()).Gf().width);for(let l=0;l<this.Am.length;l++){const c=this.Am[l],u=c.Gf();if(e!==null&&c.Jf(e,n,s),s+=u.height,l<this.Am.length-1){const h=this.zm[l],d=h.Gf();e!==null&&h.Jf(e,n,s),s+=d.height}}n+=r.Gf().width,this._w()&&(i("right",n),n+=G(r.nm()).Gf().width);const o=(l,c,u)=>{G(l==="left"?this.Xm.xm():this.Xm.Cm()).Jf(G(e),c,u)};if(this.Ps.timeScale.visible){const l=this.Xm.Gf();if(e!==null){let c=0;this.ow()&&(o("left",c,s),c=G(r.sm()).Gf().width),this.Xm.Jf(e,c,s),c+=l.width,this._w()&&o("right",c,s)}s+=l.height}return Re({width:n,height:s})}pw(){let e=0,n=0,s=0;for(const w of this.Am)this.ow()&&(n=Math.max(n,G(w.sm()).sv(),this.Ps.leftPriceScale.minimumWidth)),this._w()&&(s=Math.max(s,G(w.nm()).sv(),this.Ps.rightPriceScale.minimumWidth)),e+=w.Io();n=up(n),s=up(s);const r=this.Mo,i=this.sl,o=Math.max(r-n-s,0),l=1*this.zm.length,c=this.Ps.timeScale.visible;let u=c?Math.max(this.Xm.ym(),this.Ps.timeScale.minimumHeight):0;var h;u=(h=u)+h%2;const d=l+u,f=i<d?0:i-d,x=f/e;let p=0;const y=window.devicePixelRatio||1;for(let w=0;w<this.Am.length;++w){const m=this.Am[w];m.zv(this.ts.$s()[w]);let g=0,S=0;S=w===this.Am.length-1?Math.ceil((f-p)*y)/y:Math.round(m.Io()*x*y)/y,g=Math.max(S,2),p+=g,m.rv(Re({width:o,height:g})),this.ow()&&m.Gv(n,"left"),this._w()&&m.Gv(s,"right"),m.hp()&&this.ts.cc(m.hp(),g)}this.Xm.km(Re({width:c?o:0,height:u}),c?n:0,c?s:0),this.ts.Eo(o),this.Om!==n&&(this.Om=n),this.Nm!==s&&(this.Nm=s)}jm(e){e?this.kp.addEventListener("wheel",this.qm,{passive:!1}):this.kp.removeEventListener("wheel",this.qm)}mw(e){switch(e.deltaMode){case e.DOM_DELTA_PAGE:return 120;case e.DOM_DELTA_LINE:return 32}return HD?1/window.devicePixelRatio:1}Ym(e){if(!(e.deltaX!==0&&this.Ps.handleScroll.mouseWheel||e.deltaY!==0&&this.Ps.handleScale.mouseWheel))return;const n=this.mw(e),s=n*e.deltaX/100,r=-n*e.deltaY/100;if(e.cancelable&&e.preventDefault(),r!==0&&this.Ps.handleScale.mouseWheel){const i=Math.sign(r)*Math.min(1,Math.abs(r)),o=e.clientX-this.kp.getBoundingClientRect().left;this.Qt().Mc(o,i)}s!==0&&this.Ps.handleScroll.mouseWheel&&this.Qt().bc(-80*s)}nw(e,n){var r;const s=e.nn();s===3&&this.ww(),s!==3&&s!==2||(this.gw(e),this.Mw(e,n),this.Xm.kt(),this.Am.forEach(i=>{i.Ov()}),((r=this.Fm)==null?void 0:r.nn())===3&&(this.Fm.vn(e),this.ww(),this.gw(this.Fm),this.Mw(this.Fm,n),e=this.Fm,this.Fm=null)),this.av(e)}Mw(e,n){for(const s of e.pn())this.mn(s,n)}gw(e){const n=this.ts.$s();for(let s=0;s<n.length;s++)e.en(s).sn&&n[s].Go()}mn(e,n){const s=this.ts.Et();switch(e.an){case 0:s.Eu();break;case 1:s.Au(e.Wt);break;case 2:s.dn(e.Wt);break;case 3:s.fn(e.Wt);break;case 4:s.bu();break;case 5:e.Wt.Tu(n)||s.fn(e.Wt.Ru(n))}}Zu(e){this.Fm!==null?this.Fm.vn(e):this.Fm=e,this.Wm||(this.Wm=!0,this.Lm=window.requestAnimationFrame(n=>{if(this.Wm=!1,this.Lm=0,this.Fm!==null){const s=this.Fm;this.Fm=null,this.nw(s,n);for(const r of s.pn())if(r.an===5&&!r.Wt.Tu(n)){this.Qt()._n(r.Wt);break}}}))}ww(){this.Jm()}iw(e){this.$m.removeChild(e.Xf()),e.m()}Jm(){const e=this.ts.$s(),n=e.length,s=this.Am.length;for(let r=n;r<s;r++){const i=Yt(this.Am.pop());this.$m.removeChild(i.Xf()),i.Kv().u(this),i.Xv().u(this),i.m();const o=this.zm.pop();o!==void 0&&this.iw(o)}for(let r=s;r<n;r++){const i=new ig(this,e[r]);if(i.Kv().i(this.bw.bind(this,i),this),i.Xv().i(this.Sw.bind(this,i),this),this.Am.push(i),r>0){const o=new OD(this,r-1,r);this.zm.push(o),this.$m.insertBefore(o.Xf(),this.Xm.Xf())}this.$m.insertBefore(i.Xf(),this.Xm.Xf())}for(let r=0;r<n;r++){const i=e[r],o=this.Am[r];o.hp()!==i?o.zv(i):o.Av()}this.Qm(),this.pw()}xw(e,n,s,r){var d;const i=new Map;e!==null&&this.ts.js().forEach(f=>{const x=f.Xs().Fr(e);x!==null&&i.set(f,x)});let o;if(e!==null){const f=(d=this.ts.Et().ss(e))==null?void 0:d.originalTime;f!==void 0&&(o=f)}const l=this.Qt().hc(),c=l!==null&&l.n_ instanceof Fu?l.n_:void 0,u=l!==null&&l.e_!==void 0?l.e_.Kn:void 0,h=this.Cw(r);return{Pw:o,Re:e??void 0,kw:n??void 0,yw:h!==-1?h:void 0,Tw:c,Rw:i,Dw:u,Vw:s??void 0}}Cw(e){let n=-1;if(e)n=this.Am.indexOf(e);else{const s=this.Qt()._c().Us();s!==null&&(n=this.Qt().$s().indexOf(s))}return n}bw(e,n,s,r){this.Sv.p(()=>this.xw(n,s,r,e))}Sw(e,n,s,r){this.xv.p(()=>this.xw(n,s,r,e))}Km(e,n,s){var r;this.cw(((r=this.Qt().hc())==null?void 0:r.h_)??null),this.Ku.p(()=>this.xw(e,n,s))}Qm(){const e=this.Ps.timeScale.visible?"":"none";this.Xm.Xf().style.display=e}ow(){return this.Am[0].hp().Wo().N().visible}_w(){return this.Am[0].hp().Ho().N().visible}Zm(){return"ResizeObserver"in window&&(this.Hm=new ResizeObserver(e=>{const n=e[e.length-1];n&&this.Gm(n.contentRect.width,n.contentRect.height)}),this.Hm.observe(this.Rp,{box:"border-box"}),!0)}sw(){this.Hm!==null&&this.Hm.disconnect(),this.Hm=null}}function md(t){return!!(t.handleScroll.mouseWheel||t.handleScale.mouseWheel)}function qD(t){return t.open===void 0&&t.value===void 0}function GD(t){return function(e){return e.open!==void 0}(t)||function(e){return e.value!==void 0}(t)}function gx(t,e,n,s){const r=n.value,i={Re:e,wt:t,Wt:[r,r,r,r],Pw:s};return n.color!==void 0&&(i.R=n.color),i}function QD(t,e,n,s){const r=n.value,i={Re:e,wt:t,Wt:[r,r,r,r],Pw:s};return n.lineColor!==void 0&&(i.vt=n.lineColor),n.topColor!==void 0&&(i.mr=n.topColor),n.bottomColor!==void 0&&(i.wr=n.bottomColor),i}function KD(t,e,n,s){const r=n.value,i={Re:e,wt:t,Wt:[r,r,r,r],Pw:s};return n.topLineColor!==void 0&&(i.gr=n.topLineColor),n.bottomLineColor!==void 0&&(i.Mr=n.bottomLineColor),n.topFillColor1!==void 0&&(i.br=n.topFillColor1),n.topFillColor2!==void 0&&(i.Sr=n.topFillColor2),n.bottomFillColor1!==void 0&&(i.Cr=n.bottomFillColor1),n.bottomFillColor2!==void 0&&(i.Pr=n.bottomFillColor2),i}function XD(t,e,n,s){const r={Re:e,wt:t,Wt:[n.open,n.high,n.low,n.close],Pw:s};return n.color!==void 0&&(r.R=n.color),r}function JD(t,e,n,s){const r={Re:e,wt:t,Wt:[n.open,n.high,n.low,n.close],Pw:s};return n.color!==void 0&&(r.R=n.color),n.borderColor!==void 0&&(r.Ht=n.borderColor),n.wickColor!==void 0&&(r.vr=n.wickColor),r}function ZD(t,e,n,s,r){const i=Yt(r)(n),o=Math.max(...i),l=Math.min(...i),c=i[i.length-1],u=[c,o,l,c],{time:h,color:d,...f}=n;return{Re:e,wt:t,Wt:u,Pw:s,se:f,R:d}}function ua(t){return t.Wt!==void 0}function yx(t,e){return e.customValues!==void 0&&(t.Iw=e.customValues),t}function ar(t){return(e,n,s,r,i,o)=>function(l,c){return c?c(l):qD(l)}(s,o)?yx({wt:e,Re:n,Pw:r},s):yx(t(e,n,s,r,i),s)}function vx(t){return{Candlestick:ar(JD),Bar:ar(XD),Area:ar(QD),Baseline:ar(KD),Histogram:ar(gx),Line:ar(gx),Custom:ar(ZD)}[t]}function xx(t){return{Re:0,Bw:new Map,Hh:t}}function wx(t,e){if(t!==void 0&&t.length!==0)return{Ew:e.key(t[0].wt),Aw:e.key(t[t.length-1].wt)}}function Sx(t){let e;return t.forEach(n=>{e===void 0&&(e=n.Pw)}),Yt(e)}class e5{constructor(e){this.zw=new Map,this.Lw=new Map,this.Ow=new Map,this.Nw=[],this.o_=e}m(){this.zw.clear(),this.Lw.clear(),this.Ow.clear(),this.Nw=[]}Fw(e,n){let s=this.zw.size!==0,r=!1;const i=this.Lw.get(e);if(i!==void 0)if(this.Lw.size===1)s=!1,r=!0,this.zw.clear();else for(const c of this.Nw)c.pointData.Bw.delete(e)&&(r=!0);let o=[];if(n.length!==0){const c=n.map(x=>x.time),u=this.o_.createConverterToInternalObj(n),h=vx(e.Rr()),d=e.da(),f=e.pa();o=n.map((x,p)=>{const y=u(x.time),w=this.o_.key(y);let m=this.zw.get(w);m===void 0&&(m=xx(y),this.zw.set(w,m),r=!0);const g=h(y,m.Re,x,c[p],d,f);return m.Bw.set(e,g),g})}s&&this.Ww(),this.Hw(e,o);let l=-1;if(r){const c=[];this.zw.forEach(u=>{c.push({timeWeight:0,time:u.Hh,pointData:u,originalTime:Sx(u.Bw)})}),c.sort((u,h)=>this.o_.key(u.time)-this.o_.key(h.time)),l=this.Uw(c)}return this.$w(e,l,function(c,u,h){const d=wx(c,h),f=wx(u,h);if(d!==void 0&&f!==void 0)return{qw:!1,zh:d.Aw>=f.Aw&&d.Ew>=f.Ew}}(this.Lw.get(e),i,this.o_))}Ec(e){return this.Fw(e,[])}Yw(e,n,s){const r=n;(function(w){w.Pw===void 0&&(w.Pw=w.time)})(r),this.o_.preprocessData(n);const i=this.o_.createConverterToInternalObj([n])(n.time),o=this.Ow.get(e);if(!s&&o!==void 0&&this.o_.key(i)<this.o_.key(o))throw new Error(`Cannot update oldest data, last time=${o}, new time=${i}`);let l=this.zw.get(this.o_.key(i));if(s&&l===void 0)throw new Error("Cannot update non-existing data point when historicalUpdate is true");const c=l===void 0;l===void 0&&(l=xx(i),this.zw.set(this.o_.key(i),l));const u=vx(e.Rr()),h=e.da(),d=e.pa(),f=u(i,l.Re,n,r.Pw,h,d);l.Bw.set(e,f),s?this.jw(e,f,l.Re):this.Kw(e,f);const x={zh:ua(f),qw:s};if(!c)return this.$w(e,-1,x);const p={timeWeight:0,time:l.Hh,pointData:l,originalTime:Sx(l.Bw)},y=Fi(this.Nw,this.o_.key(p.time),(w,m)=>this.o_.key(w.time)<m);this.Nw.splice(y,0,p);for(let w=y;w<this.Nw.length;++w)gd(this.Nw[w].pointData,w);return this.o_.fillWeightsForPoints(this.Nw,y),this.$w(e,y,x)}Kw(e,n){let s=this.Lw.get(e);s===void 0&&(s=[],this.Lw.set(e,s));const r=s.length!==0?s[s.length-1]:null;r===null||this.o_.key(n.wt)>this.o_.key(r.wt)?ua(n)&&s.push(n):ua(n)?s[s.length-1]=n:s.splice(-1,1),this.Ow.set(e,n.wt)}jw(e,n,s){const r=this.Lw.get(e);if(r===void 0)return;const i=Fi(r,s,(o,l)=>o.Re<l);ua(n)?r[i]=n:r.splice(i,1)}Hw(e,n){n.length!==0?(this.Lw.set(e,n.filter(ua)),this.Ow.set(e,n[n.length-1].wt)):(this.Lw.delete(e),this.Ow.delete(e))}Ww(){for(const e of this.Nw)e.pointData.Bw.size===0&&this.zw.delete(this.o_.key(e.time))}Uw(e){let n=-1;for(let s=0;s<this.Nw.length&&s<e.length;++s){const r=this.Nw[s],i=e[s];if(this.o_.key(r.time)!==this.o_.key(i.time)){n=s;break}i.timeWeight=r.timeWeight,gd(i.pointData,s)}if(n===-1&&this.Nw.length!==e.length&&(n=Math.min(this.Nw.length,e.length)),n===-1)return-1;for(let s=n;s<e.length;++s)gd(e[s].pointData,s);return this.o_.fillWeightsForPoints(e,n),this.Nw=e,n}Xw(){if(this.Lw.size===0)return null;let e=0;return this.Lw.forEach(n=>{n.length!==0&&(e=Math.max(e,n[n.length-1].Re))}),e}$w(e,n,s){const r={Oo:new Map,Et:{ou:this.Xw()}};if(n!==-1)this.Lw.forEach((i,o)=>{r.Oo.set(o,{se:i,Zw:o===e?s:void 0})}),this.Lw.has(e)||r.Oo.set(e,{se:[],Zw:s}),r.Et.Gw=this.Nw,r.Et.Jw=n;else{const i=this.Lw.get(e);r.Oo.set(e,{se:i||[],Zw:s})}return r}}function gd(t,e){t.Re=e,t.Bw.forEach(n=>{n.Re=e})}function t5(t,e){return t.wt<e}function n5(t,e){return e<t.wt}function s5(t,e,n){const s=e.Uh(),r=e.bi(),i=Fi(t,s,t5),o=tj(t,r,n5);if(!n)return{from:i,to:o};let l=i,c=o;return i>0&&i<t.length&&t[i].wt>=s&&(l=i-1),o>0&&o<t.length&&t[o-1].wt<=r&&(c=o+1),{from:l,to:c}}class og{constructor(e,n,s){this.Qw=!0,this.tg=!0,this.ig=!0,this.sg=[],this.ng=null,this.Jn=e,this.Qn=n,this.eg=s}kt(e){this.Qw=!0,e==="data"&&(this.tg=!0),e==="options"&&(this.ig=!0)}Tt(){return this.Jn.Vt()?(this.rg(),this.ng===null?null:this.hg):null}ag(){this.sg=this.sg.map(e=>({...e,...this.Jn.Rh().Dr(e.wt)}))}lg(){this.ng=null}rg(){this.tg&&(this.og(),this.tg=!1),this.ig&&(this.ag(),this.ig=!1),this.Qw&&(this._g(),this.Qw=!1)}_g(){const e=this.Jn.Ft(),n=this.Qn.Et();if(this.lg(),n.Ki()||e.Ki())return;const s=n.Pe();if(s===null||this.Jn.Xs().zr()===0)return;const r=this.Jn.zt();r!==null&&(this.ng=s5(this.sg,s,this.eg),this.ug(e,n,r.Wt),this.cg())}}class r5{constructor(e,n){this.dg=e,this.Yi=n}nt(e,n,s){this.dg.draw(e,this.Yi,n,s)}}class i5 extends og{constructor(e,n,s){super(e,n,!1),this.sh=s,this.hg=new r5(this.sh.renderer(),r=>{const i=e.zt();return i===null?null:e.Ft().Nt(r,i.Wt)})}fa(e){return this.sh.priceValueBuilder(e)}va(e){return this.sh.isWhitespace(e)}og(){const e=this.Jn.Rh();this.sg=this.Jn.Xs().Hr().map(n=>({wt:n.Re,_t:NaN,...e.Dr(n.Re),fg:n.se}))}ug(e,n){n._u(this.sg,po(this.ng))}cg(){this.sh.update({bars:this.sg.map(a5),barSpacing:this.Qn.Et().vu(),visibleRange:this.ng},this.Jn.N())}}function a5(t){return{x:t._t,time:t.wt,originalData:t.fg,barColor:t.cr}}const o5={color:"#2196f3"},l5=(t,e,n)=>{const s=Es(n);return new i5(t,e,s)};function lg(t){const e={value:t.Wt[3],time:t.Pw};return t.Iw!==void 0&&(e.customValues=t.Iw),e}function bx(t){const e=lg(t);return t.R!==void 0&&(e.color=t.R),e}function c5(t){const e=lg(t);return t.vt!==void 0&&(e.lineColor=t.vt),t.mr!==void 0&&(e.topColor=t.mr),t.wr!==void 0&&(e.bottomColor=t.wr),e}function u5(t){const e=lg(t);return t.gr!==void 0&&(e.topLineColor=t.gr),t.Mr!==void 0&&(e.bottomLineColor=t.Mr),t.br!==void 0&&(e.topFillColor1=t.br),t.Sr!==void 0&&(e.topFillColor2=t.Sr),t.Cr!==void 0&&(e.bottomFillColor1=t.Cr),t.Pr!==void 0&&(e.bottomFillColor2=t.Pr),e}function lj(t){const e={open:t.Wt[0],high:t.Wt[1],low:t.Wt[2],close:t.Wt[3],time:t.Pw};return t.Iw!==void 0&&(e.customValues=t.Iw),e}function h5(t){const e=lj(t);return t.R!==void 0&&(e.color=t.R),e}function d5(t){const e=lj(t),{R:n,Ht:s,vr:r}=t;return n!==void 0&&(e.color=n),s!==void 0&&(e.borderColor=s),r!==void 0&&(e.wickColor=r),e}function fp(t){return{Area:c5,Line:bx,Baseline:u5,Histogram:bx,Bar:h5,Candlestick:d5,Custom:f5}[t]}function f5(t){const e=t.Pw;return{...t.se,time:e}}const p5={vertLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},horzLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},mode:1},m5={vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},g5={background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:12,fontFamily:YN,panes:{enableResize:!0,separatorColor:"#E0E3EB",separatorHoverColor:"rgba(178, 181, 189, 0.2)"},attributionLogo:!0,colorSpace:"srgb",colorParsers:[]},yd={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,ticksVisible:!1,scaleMargins:{bottom:.1,top:.2},minimumWidth:0,ensureEdgeTickMarksVisible:!1},y5={rightOffset:0,barSpacing:6,minBarSpacing:.5,maxBarSpacing:0,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0,allowShiftVisibleRangeOnWhitespaceReplacement:!1,ticksVisible:!1,uniformDistribution:!1,minimumHeight:0,allowBoldLabels:!0,ignoreWhitespaceIndices:!1};function Nx(){return{addDefaultPane:!0,width:0,height:0,autoSize:!1,layout:g5,crosshair:p5,grid:m5,overlayPriceScales:{...yd},leftPriceScale:{...yd,visible:!1},rightPriceScale:{...yd,visible:!0},timeScale:y5,localization:{locale:Bi?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:{time:!0,price:!0},mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}}}class cj{constructor(e,n,s){this.Wf=e,this.pg=n,this.vg=s??0}applyOptions(e){this.Wf.Qt().lc(this.pg,e,this.vg)}options(){return this.Yi().N()}width(){return Ou(this.pg)?this.Wf.lw(this.pg):0}setVisibleRange(e){this.setAutoScale(!1),this.Yi().Wl(new Rt(e.from,e.to))}getVisibleRange(){const e=this.Yi().Qe();return e===null?null:{from:e.$e(),to:e.qe()}}setAutoScale(e){this.applyOptions({autoScale:e})}Yi(){return G(this.Wf.Qt().oc(this.pg,this.vg)).Ft}}class v5{constructor(e,n,s,r){this.Wf=e,this.Pt=s,this.mg=n,this.wg=r}getHeight(){return this.Pt.$t()}setHeight(e){const n=this.Wf.Qt(),s=n.Hc(this.Pt);n.fc(s,e)}getStretchFactor(){return this.Pt.Io()}setStretchFactor(e){this.Pt.Bo(e),this.Wf.Qt().Bh()}paneIndex(){return this.Wf.Qt().Hc(this.Pt)}moveTo(e){const n=this.paneIndex();n!==e&&(mt(e>=0&&e<this.Wf.Uf().length,"Invalid pane index"),this.Wf.Qt().mc(n,e))}getSeries(){return this.Pt.Oo().map(e=>this.mg(e))??[]}getHTMLElement(){const e=this.Wf.Uf();return e&&e.length!==0&&e[this.paneIndex()]?e[this.paneIndex()].Xf():null}attachPrimitive(e){this.Pt.ua(e),e.attached&&e.attached({chart:this.wg,requestUpdate:()=>this.Pt.Qt().Bh()})}detachPrimitive(e){this.Pt.ca(e)}priceScale(e){if(this.Pt.Do(e)===null)throw new Error(`Cannot find price scale with id: ${e}`);return new cj(this.Wf,e,this.paneIndex())}setPreserveEmptyPane(e){this.Pt.zo(e)}preserveEmptyPane(){return this.Pt.Lo()}addCustomSeries(e,n={},s=0){return this.wg.addCustomSeries(e,n,s)}addSeries(e,n={}){return this.wg.addSeries(e,n,this.paneIndex())}}const x5={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:"",axisLabelColor:"",axisLabelTextColor:""};class jx{constructor(e){this.ir=e}applyOptions(e){this.ir.hr(e)}options(){return this.ir.N()}gg(){return this.ir}}class w5{constructor(e,n,s,r,i,o){this.Mg=new tt,this.Jn=e,this.bg=n,this.Sg=s,this.o_=i,this.wg=r,this.xg=o}m(){this.Mg.m()}priceFormatter(){return this.Jn.ra()}priceToCoordinate(e){const n=this.Jn.zt();return n===null?null:this.Jn.Ft().Nt(e,n.Wt)}coordinateToPrice(e){const n=this.Jn.zt();return n===null?null:this.Jn.Ft().Ts(e,n.Wt)}barsInLogicalRange(e){if(e===null)return null;const n=new ji(new Fa(e.from,e.to)).k_(),s=this.Jn.Xs();if(s.Ki())return null;const r=s.Fr(n.Uh(),1),i=s.Fr(n.bi(),-1),o=G(s.Lr()),l=G(s.Ks());if(r!==null&&i!==null&&r.Re>i.Re)return{barsBefore:e.from-o,barsAfter:l-e.to};const c={barsBefore:r===null||r.Re===o?e.from-o:r.Re-o,barsAfter:i===null||i.Re===l?l-e.to:l-i.Re};return r!==null&&i!==null&&(c.from=r.Pw,c.to=i.Pw),c}setData(e){this.o_,this.Jn.Rr(),this.bg.Cg(this.Jn,e),this.Pg("full")}update(e,n=!1){this.Jn.Rr(),this.bg.kg(this.Jn,e,n),this.Pg("update")}dataByIndex(e,n){const s=this.Jn.Xs().Fr(e,n);return s===null?null:fp(this.seriesType())(s)}data(){const e=fp(this.seriesType());return this.Jn.Xs().Hr().map(n=>e(n))}subscribeDataChanged(e){this.Mg.i(e)}unsubscribeDataChanged(e){this.Mg._(e)}applyOptions(e){this.Jn.hr(e)}options(){return Jn(this.Jn.N())}priceScale(){return this.Sg.priceScale(this.Jn.Ft().wa(),this.getPane().paneIndex())}createPriceLine(e){const n=Zt(Jn(x5),e),s=this.Jn.Oh(n);return new jx(s)}removePriceLine(e){this.Jn.Nh(e.gg())}priceLines(){return this.Jn.Fh().map(e=>new jx(e))}seriesType(){return this.Jn.Rr()}attachPrimitive(e){this.Jn.ua(e),e.attached&&e.attached({chart:this.wg,series:this,requestUpdate:()=>this.Jn.Qt().Bh(),horzScaleBehavior:this.o_})}detachPrimitive(e){this.Jn.ca(e),e.detached&&e.detached(),this.Jn.Qt().Bh()}getPane(){const e=this.Jn,n=G(this.Jn.Qt().Hn(e));return this.xg(n)}moveToPane(e){this.Jn.Qt().Oc(this.Jn,e)}seriesOrder(){const e=this.Jn.Qt().Hn(this.Jn);return e===null?-1:e.Oo().indexOf(this.Jn)}setSeriesOrder(e){const n=this.Jn.Qt().Hn(this.Jn);n!==null&&n.Qo(this.Jn,e)}Pg(e){this.Mg.v()&&this.Mg.p(e)}}class S5{constructor(e,n,s){this.yg=new tt,this.z_=new tt,this.wm=new tt,this.ts=e,this.uh=e.Et(),this.Xm=n,this.uh.Du().i(this.Tg.bind(this)),this.uh.Vu().i(this.Rg.bind(this)),this.Xm.Pm().i(this.Dg.bind(this)),this.o_=s}m(){this.uh.Du().u(this),this.uh.Vu().u(this),this.Xm.Pm().u(this),this.yg.m(),this.z_.m(),this.wm.m()}scrollPosition(){return this.uh.wu()}scrollToPosition(e,n){n?this.uh.yu(e,1e3):this.ts.fn(e)}scrollToRealTime(){this.uh.ku()}getVisibleRange(){const e=this.uh.su();return e===null?null:{from:e.from.originalTime,to:e.to.originalTime}}setVisibleRange(e){const n={from:this.o_.convertHorzItemToInternal(e.from),to:this.o_.convertHorzItemToInternal(e.to)},s=this.uh.hu(n);this.ts.zc(s)}getVisibleLogicalRange(){const e=this.uh.iu();return e===null?null:{from:e.Uh(),to:e.bi()}}setVisibleLogicalRange(e){mt(e.from<=e.to,"The from index cannot be after the to index."),this.ts.zc(e)}resetTimeScale(){this.ts.cn()}fitContent(){this.ts.Eu()}logicalToCoordinate(e){const n=this.ts.Et();return n.Ki()?null:n.qt(e)}coordinateToLogical(e){return this.uh.Ki()?null:this.uh.uu(e)}timeToIndex(e,n){const s=this.o_.convertHorzItemToInternal(e);return this.uh.J_(s,n)}timeToCoordinate(e){const n=this.timeToIndex(e,!1);return n===null?null:this.uh.qt(n)}coordinateToTime(e){const n=this.ts.Et(),s=n.uu(e),r=n.ss(s);return r===null?null:r.originalTime}width(){return this.Xm.Zf().width}height(){return this.Xm.Zf().height}subscribeVisibleTimeRangeChange(e){this.yg.i(e)}unsubscribeVisibleTimeRangeChange(e){this.yg._(e)}subscribeVisibleLogicalRangeChange(e){this.z_.i(e)}unsubscribeVisibleLogicalRangeChange(e){this.z_._(e)}subscribeSizeChange(e){this.wm.i(e)}unsubscribeSizeChange(e){this.wm._(e)}applyOptions(e){this.uh.hr(e)}options(){return{...Jn(this.uh.N()),barSpacing:this.uh.vu()}}Tg(){this.yg.v()&&this.yg.p(this.getVisibleRange())}Rg(){this.z_.v()&&this.z_.p(this.getVisibleLogicalRange())}Dg(e){this.wm.p(e.width,e.height)}}function b5(t){if(t===void 0||t.type==="custom")return;const e=t;e.minMove!==void 0&&e.precision===void 0&&(e.precision=function(n){if(n>=1)return 0;let s=0;for(;s<8;s++){const r=Math.round(n);if(Math.abs(r-n)<1e-8)return s;n*=10}return s}(e.minMove))}function Cx(t){return function(e){if(hl(e.handleScale)){const s=e.handleScale;e.handleScale={axisDoubleClickReset:{time:s,price:s},axisPressedMouseMove:{time:s,price:s},mouseWheel:s,pinch:s}}else if(e.handleScale!==void 0){const{axisPressedMouseMove:s,axisDoubleClickReset:r}=e.handleScale;hl(s)&&(e.handleScale.axisPressedMouseMove={time:s,price:s}),hl(r)&&(e.handleScale.axisDoubleClickReset={time:r,price:r})}const n=e.handleScroll;hl(n)&&(e.handleScroll={horzTouchDrag:n,vertTouchDrag:n,mouseWheel:n,pressedMouseMove:n})}(t),t}class N5{constructor(e,n,s){this.Vg=new Map,this.Ig=new Map,this.Bg=new tt,this.Eg=new tt,this.Ag=new tt,this.$u=new WeakMap,this.zg=new e5(n);const r=s===void 0?Jn(Nx()):Zt(Jn(Nx()),Cx(s));this.Lg=n,this.Wf=new YD(e,r,n),this.Wf.Kv().i(o=>{this.Bg.v()&&this.Bg.p(this.Og(o()))},this),this.Wf.Xv().i(o=>{this.Eg.v()&&this.Eg.p(this.Og(o()))},this),this.Wf.uc().i(o=>{this.Ag.v()&&this.Ag.p(this.Og(o()))},this);const i=this.Wf.Qt();this.Ng=new S5(i,this.Wf.tw(),this.Lg)}remove(){this.Wf.Kv().u(this),this.Wf.Xv().u(this),this.Wf.uc().u(this),this.Ng.m(),this.Wf.m(),this.Vg.clear(),this.Ig.clear(),this.Bg.m(),this.Eg.m(),this.Ag.m(),this.zg.m()}resize(e,n,s){this.autoSizeActive()||this.Wf.Gm(e,n,s)}addCustomSeries(e,n={},s=0){const r=(i=>({type:"Custom",isBuiltIn:!1,defaultOptions:{...o5,...i.defaultOptions()},Fg:l5,Wg:i}))(Es(e));return this.Hg(r,n,s)}addSeries(e,n={},s=0){return this.Hg(e,n,s)}removeSeries(e){const n=Yt(this.Vg.get(e)),s=this.zg.Ec(n);this.Wf.Qt().Ec(n),this.Ug(s),this.Vg.delete(e),this.Ig.delete(n)}Cg(e,n){this.Ug(this.zg.Fw(e,n))}kg(e,n,s){this.Ug(this.zg.Yw(e,n,s))}subscribeClick(e){this.Bg.i(e)}unsubscribeClick(e){this.Bg._(e)}subscribeCrosshairMove(e){this.Ag.i(e)}unsubscribeCrosshairMove(e){this.Ag._(e)}subscribeDblClick(e){this.Eg.i(e)}unsubscribeDblClick(e){this.Eg._(e)}priceScale(e,n=0){return new cj(this.Wf,e,n)}timeScale(){return this.Ng}applyOptions(e){this.Wf.hr(Cx(e))}options(){return this.Wf.N()}takeScreenshot(){return this.Wf.hw()}addPane(e=!1){const n=this.Wf.Qt().Uc();return n.zo(e),this.$g(n)}removePane(e){this.Wf.Qt().dc(e)}swapPanes(e,n){this.Wf.Qt().vc(e,n)}autoSizeActive(){return this.Wf.uw()}chartElement(){return this.Wf.tp()}panes(){return this.Wf.Qt().$s().map(e=>this.$g(e))}paneSize(e=0){const n=this.Wf.fw(e);return{height:n.height,width:n.width}}setCrosshairPosition(e,n,s){const r=this.Vg.get(s);if(r===void 0)return;const i=this.Wf.Qt().Hn(r);i!==null&&this.Wf.Qt().Tc(e,n,i)}clearCrosshairPosition(){this.Wf.Qt().Rc(!0)}horzBehaviour(){return this.Lg}Hg(e,n={},s=0){mt(e.Fg!==void 0),b5(n.priceFormat),e.type==="Candlestick"&&function(c){c.borderColor!==void 0&&(c.borderUpColor=c.borderColor,c.borderDownColor=c.borderColor),c.wickColor!==void 0&&(c.wickUpColor=c.wickColor,c.wickDownColor=c.wickColor)}(n);const r=Zt(Jn(WN),Jn(e.defaultOptions),n),i=e.Fg,o=new Fu(this.Wf.Qt(),e.type,r,i,e.Wg);this.Wf.Qt().Ic(o,s);const l=new w5(o,this,this,this,this.Lg,c=>this.$g(c));return this.Vg.set(l,o),this.Ig.set(o,l),l}Ug(e){const n=this.Wf.Qt();n.Dc(e.Et.ou,e.Et.Gw,e.Et.Jw),e.Oo.forEach((s,r)=>r.ht(s.se,s.Zw)),n.Et().j_(),n.pu()}qg(e){return Yt(this.Ig.get(e))}Og(e){const n=new Map;e.Rw.forEach((r,i)=>{const o=i.Rr(),l=fp(o)(r);if(o!=="Custom")mt(GD(l));else{const c=i.pa();mt(!c||c(l)===!1)}n.set(this.qg(i),l)});const s=e.Tw!==void 0&&this.Ig.has(e.Tw)?this.qg(e.Tw):void 0;return{time:e.Pw,logical:e.Re,point:e.kw,paneIndex:e.yw,hoveredSeries:s,hoveredObjectId:e.Dw,seriesData:n,sourceEvent:e.Vw}}$g(e){let n=this.$u.get(e);return n||(n=new v5(this.Wf,s=>this.qg(s),e,this),this.$u.set(e,n)),n}}function j5(t){if(Mo(t)){const e=document.getElementById(t);return mt(e!==null,`Cannot find element in DOM with id=${t}`),e}return t}function C5(t,e,n){const s=j5(t),r=new N5(s,e,n);return e.setOptions(r.options()),r}function k5(t,e){return C5(t,new lx,lx.ad(e))}class cg extends og{constructor(e,n){super(e,n,!0)}ug(e,n,s){n._u(this.sg,po(this.ng)),e.$l(this.sg,s,po(this.ng))}Yg(e,n){return{wt:e,gt:n,_t:NaN,ut:NaN}}og(){const e=this.Jn.Rh();this.sg=this.Jn.Xs().Hr().map(n=>{const s=n.Wt[3];return this.jg(n.Re,s,e)})}}function uj(t,e,n,s,r,i,o){if(e.length===0||s.from>=e.length||s.to<=0)return;const{context:l,horizontalPixelRatio:c,verticalPixelRatio:u}=t,h=e[s.from];let d=i(t,h),f=h;if(s.to-s.from<2){const x=r/2;l.beginPath();const p={_t:h._t-x,ut:h.ut},y={_t:h._t+x,ut:h.ut};l.moveTo(p._t*c,p.ut*u),l.lineTo(y._t*c,y.ut*u),o(t,d,p,y)}else{const x=(y,w)=>{o(t,d,f,w),l.beginPath(),d=y,f=w};let p=f;l.beginPath(),l.moveTo(h._t*c,h.ut*u);for(let y=s.from+1;y<s.to;++y){p=e[y];const w=i(t,p);switch(n){case 0:l.lineTo(p._t*c,p.ut*u);break;case 1:l.lineTo(p._t*c,e[y-1].ut*u),w!==d&&(x(w,p),l.lineTo(p._t*c,e[y-1].ut*u)),l.lineTo(p._t*c,p.ut*u);break;case 2:{const[m,g]=P5(e,y-1,y);l.bezierCurveTo(m._t*c,m.ut*u,g._t*c,g.ut*u,p._t*c,p.ut*u);break}}n!==1&&w!==d&&(x(w,p),l.moveTo(p._t*c,p.ut*u))}(f!==p||f===p&&n===1)&&o(t,d,f,p)}}const kx=6;function vd(t,e){return{_t:t._t-e._t,ut:t.ut-e.ut}}function Px(t,e){return{_t:t._t/e,ut:t.ut/e}}function P5(t,e,n){const s=Math.max(0,e-1),r=Math.min(t.length-1,n+1);var i,o;return[(i=t[e],o=Px(vd(t[n],t[s]),kx),{_t:i._t+o._t,ut:i.ut+o.ut}),vd(t[n],Px(vd(t[r],t[e]),kx))]}function E5(t,e){const n=t.context;n.strokeStyle=e,n.stroke()}class T5 extends fs{constructor(){super(...arguments),this.rt=null}ht(e){this.rt=e}et(e){if(this.rt===null)return;const{ot:n,lt:s,Kg:r,Xg:i,ct:o,Xt:l,Zg:c}=this.rt;if(s===null)return;const u=e.context;u.lineCap="butt",u.lineWidth=o*e.verticalPixelRatio,Or(u,l),u.lineJoin="round";const h=this.Gg.bind(this);i!==void 0&&uj(e,n,i,s,r,h,E5),c&&function(d,f,x,p,y){if(p.to-p.from<=0)return;const{horizontalPixelRatio:w,verticalPixelRatio:m,context:g}=d;let S=null;const N=Math.max(1,Math.floor(w))%2/2,C=x*m+N;for(let E=p.to-1;E>=p.from;--E){const L=f[E];if(L){const P=y(d,L);P!==S&&(g.beginPath(),S!==null&&g.fill(),g.fillStyle=P,S=P);const R=Math.round(L._t*w)+N,_=L.ut*m;g.moveTo(R,_),g.arc(R,_,C,0,2*Math.PI)}}g.fill()}(e,n,c,s,h)}}class hj extends T5{Gg(e,n){return n.vt}}class L5 extends cg{constructor(){super(...arguments),this.hg=new hj}jg(e,n,s){return{...this.Yg(e,n),...s.Dr(e)}}cg(){const e=this.Jn.N(),n={ot:this.sg,Xt:e.lineStyle,Xg:e.lineVisible?e.lineType:void 0,ct:e.lineWidth,Zg:e.pointMarkersVisible?e.pointMarkersRadius||e.lineWidth/2+2:void 0,lt:this.ng,Kg:this.Qn.Et().vu()};this.hg.ht(n)}}const _5={type:"Line",isBuiltIn:!0,defaultOptions:{color:"#2196f3",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},Fg:(t,e)=>new L5(t,e)};function R5(t,e,n,s,r){const{context:i,horizontalPixelRatio:o,verticalPixelRatio:l}=e;i.lineTo(r._t*o,t*l),i.lineTo(s._t*o,t*l),i.closePath(),i.fillStyle=n,i.fill()}class M5 extends fs{constructor(){super(...arguments),this.rt=null}ht(e){this.rt=e}et(e){if(this.rt===null)return;const{ot:n,lt:s,Kg:r,ct:i,Xt:o,Xg:l}=this.rt,c=this.rt.eM??(this.rt.rM?0:e.mediaSize.height);if(s===null)return;const u=e.context;u.lineCap="butt",u.lineJoin="round",u.lineWidth=i,Or(u,o),u.lineWidth=1,uj(e,n,l,s,r,this.hM.bind(this),R5.bind(null,c))}}class I5{aM(e,n){const s=this.lM,{oM:r,_M:i,uM:o,cM:l,eM:c,dM:u,fM:h}=n;if(this.pM===void 0||s===void 0||s.oM!==r||s._M!==i||s.uM!==o||s.cM!==l||s.eM!==c||s.dM!==u||s.fM!==h){const{verticalPixelRatio:d}=e,f=c||u>0?d:1,x=u*f,p=h===e.bitmapSize.height?h:h*f,y=(c??0)*f,w=e.context.createLinearGradient(0,x,0,p);if(w.addColorStop(0,r),c!=null){const m=Ni((y-x)/(p-x),0,1);w.addColorStop(m,i),w.addColorStop(m,o)}w.addColorStop(1,l),this.pM=w,this.lM=n}return this.pM}}class A5 extends M5{constructor(){super(...arguments),this.vM=new I5}hM(e,n){var s;return this.vM.aM(e,{oM:n.mr,_M:"",uM:"",cM:n.wr,dM:((s=this.rt)==null?void 0:s.dM)??0,fM:e.bitmapSize.height})}}class O5 extends cg{constructor(e,n){super(e,n),this.hg=new qN,this.MM=new A5,this.bM=new hj,this.hg.st([this.MM,this.bM])}jg(e,n,s){return{...this.Yg(e,n),...s.Dr(e)}}cg(){const e=this.Jn.N();if(this.ng===null||this.sg.length===0)return;let n;if(e.relativeGradient){n=this.sg[this.ng.from].ut;for(let s=this.ng.from;s<this.ng.to;s++){const r=this.sg[s];r.ut<n&&(n=r.ut)}}this.MM.ht({Xg:e.lineType,ot:this.sg,Xt:e.lineStyle,ct:e.lineWidth,eM:null,dM:n,rM:e.invertFilledArea,lt:this.ng,Kg:this.Qn.Et().vu()}),this.bM.ht({Xg:e.lineVisible?e.lineType:void 0,ot:this.sg,Xt:e.lineStyle,ct:e.lineWidth,lt:this.ng,Kg:this.Qn.Et().vu(),Zg:e.pointMarkersVisible?e.pointMarkersRadius||e.lineWidth/2+2:void 0})}}const D5={type:"Area",isBuiltIn:!0,defaultOptions:{topColor:"rgba( 46, 220, 135, 0.4)",bottomColor:"rgba( 40, 221, 100, 0)",invertFilledArea:!1,relativeGradient:!1,lineColor:"#33D778",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},Fg:(t,e)=>new O5(t,e)};class F5 extends og{constructor(e,n){super(e,n,!1)}ug(e,n,s){n._u(this.sg,po(this.ng)),e.Yl(this.sg,s,po(this.ng))}yM(e,n,s){return{wt:e,qh:n.Wt[0],Yh:n.Wt[1],jh:n.Wt[2],Kh:n.Wt[3],_t:NaN,jl:NaN,Kl:NaN,Xl:NaN,Zl:NaN}}og(){const e=this.Jn.Rh();this.sg=this.Jn.Xs().Hr().map(n=>this.jg(n.Re,n,e))}}class B5 extends fs{constructor(){super(...arguments),this.Yt=null,this.SM=0}ht(e){this.Yt=e}et(e){if(this.Yt===null||this.Yt.Xs.length===0||this.Yt.lt===null)return;const{horizontalPixelRatio:n}=e;this.SM=function(i,o){if(i>=2.5&&i<=4)return Math.floor(3*o);const l=1-.2*Math.atan(Math.max(4,i)-4)/(.5*Math.PI),c=Math.floor(i*l*o),u=Math.floor(i*o),h=Math.min(c,u);return Math.max(Math.floor(o),h)}(this.Yt.vu,n),this.SM>=2&&Math.floor(n)%2!=this.SM%2&&this.SM--;const s=this.Yt.Xs;this.Yt.TM&&this.RM(e,s,this.Yt.lt),this.Yt.Mi&&this._v(e,s,this.Yt.lt);const r=this.DM(n);(!this.Yt.Mi||this.SM>2*r)&&this.VM(e,s,this.Yt.lt)}RM(e,n,s){if(this.Yt===null)return;const{context:r,horizontalPixelRatio:i,verticalPixelRatio:o}=e;let l="",c=Math.min(Math.floor(i),Math.floor(this.Yt.vu*i));c=Math.max(Math.floor(i),Math.min(c,this.SM));const u=Math.floor(.5*c);let h=null;for(let d=s.from;d<s.to;d++){const f=n[d];f.pr!==l&&(r.fillStyle=f.pr,l=f.pr);const x=Math.round(Math.min(f.jl,f.Zl)*o),p=Math.round(Math.max(f.jl,f.Zl)*o),y=Math.round(f.Kl*o),w=Math.round(f.Xl*o);let m=Math.round(i*f._t)-u;const g=m+c-1;h!==null&&(m=Math.max(h+1,m),m=Math.min(m,g));const S=g-m+1;r.fillRect(m,y,S,x-y),r.fillRect(m,p+1,S,w-p),h=g}}DM(e){let n=Math.floor(1*e);this.SM<=2*n&&(n=Math.floor(.5*(this.SM-1)));const s=Math.max(Math.floor(e),n);return this.SM<=2*s?Math.max(Math.floor(e),Math.floor(1*e)):s}_v(e,n,s){if(this.Yt===null)return;const{context:r,horizontalPixelRatio:i,verticalPixelRatio:o}=e;let l="";const c=this.DM(i);let u=null;for(let h=s.from;h<s.to;h++){const d=n[h];d.dr!==l&&(r.fillStyle=d.dr,l=d.dr);let f=Math.round(d._t*i)-Math.floor(.5*this.SM);const x=f+this.SM-1,p=Math.round(Math.min(d.jl,d.Zl)*o),y=Math.round(Math.max(d.jl,d.Zl)*o);if(u!==null&&(f=Math.max(u+1,f),f=Math.min(f,x)),this.Yt.vu*i>2*c)D3(r,f,p,x-f+1,y-p+1,c);else{const w=x-f+1;r.fillRect(f,p,w,y-p+1)}u=x}}VM(e,n,s){if(this.Yt===null)return;const{context:r,horizontalPixelRatio:i,verticalPixelRatio:o}=e;let l="";const c=this.DM(i);for(let u=s.from;u<s.to;u++){const h=n[u];let d=Math.round(Math.min(h.jl,h.Zl)*o),f=Math.round(Math.max(h.jl,h.Zl)*o),x=Math.round(h._t*i)-Math.floor(.5*this.SM),p=x+this.SM-1;if(h.cr!==l){const y=h.cr;r.fillStyle=y,l=y}this.Yt.Mi&&(x+=c,d+=c,p-=c,f-=c),d>f||r.fillRect(x,d,p-x+1,f-d+1)}}}class z5 extends F5{constructor(){super(...arguments),this.hg=new B5}jg(e,n,s){return{...this.yM(e,n,s),...s.Dr(e)}}cg(){const e=this.Jn.N();this.hg.ht({Xs:this.sg,vu:this.Qn.Et().vu(),TM:e.wickVisible,Mi:e.borderVisible,lt:this.ng})}}const $5={type:"Candlestick",isBuiltIn:!0,defaultOptions:{upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},Fg:(t,e)=>new z5(t,e)};class V5 extends fs{constructor(){super(...arguments),this.Yt=null,this.IM=[]}ht(e){this.Yt=e,this.IM=[]}et({context:e,horizontalPixelRatio:n,verticalPixelRatio:s}){if(this.Yt===null||this.Yt.ot.length===0||this.Yt.lt===null)return;this.IM.length||this.BM(n);const r=Math.max(1,Math.floor(s)),i=Math.round(this.Yt.EM*s)-Math.floor(r/2),o=i+r;for(let l=this.Yt.lt.from;l<this.Yt.lt.to;l++){const c=this.Yt.ot[l],u=this.IM[l-this.Yt.lt.from],h=Math.round(c.ut*s);let d,f;e.fillStyle=c.cr,h<=i?(d=h,f=o):(d=i,f=h-Math.floor(r/2)+r),e.fillRect(u.Uh,d,u.bi-u.Uh+1,f-d)}}BM(e){if(this.Yt===null||this.Yt.ot.length===0||this.Yt.lt===null)return void(this.IM=[]);const n=Math.ceil(this.Yt.vu*e)<=1?0:Math.max(1,Math.floor(e)),s=Math.round(this.Yt.vu*e)-n;this.IM=new Array(this.Yt.lt.to-this.Yt.lt.from);for(let i=this.Yt.lt.from;i<this.Yt.lt.to;i++){const o=this.Yt.ot[i],l=Math.round(o._t*e);let c,u;if(s%2){const h=(s-1)/2;c=l-h,u=l+h}else{const h=s/2;c=l-h,u=l+h-1}this.IM[i-this.Yt.lt.from]={Uh:c,bi:u,AM:l,ne:o._t*e,wt:o.wt}}for(let i=this.Yt.lt.from+1;i<this.Yt.lt.to;i++){const o=this.IM[i-this.Yt.lt.from],l=this.IM[i-this.Yt.lt.from-1];o.wt===l.wt+1&&o.Uh-l.bi!==n+1&&(l.AM>l.ne?l.bi=o.Uh-n-1:o.Uh=l.bi+n+1)}let r=Math.ceil(this.Yt.vu*e);for(let i=this.Yt.lt.from;i<this.Yt.lt.to;i++){const o=this.IM[i-this.Yt.lt.from];o.bi<o.Uh&&(o.bi=o.Uh);const l=o.bi-o.Uh+1;r=Math.min(l,r)}if(n>0&&r<4)for(let i=this.Yt.lt.from;i<this.Yt.lt.to;i++){const o=this.IM[i-this.Yt.lt.from];o.bi-o.Uh+1>r&&(o.AM>o.ne?o.bi-=1:o.Uh+=1)}}}class U5 extends cg{constructor(){super(...arguments),this.hg=new V5}jg(e,n,s){return{...this.Yg(e,n),...s.Dr(e)}}cg(){const e={ot:this.sg,vu:this.Qn.Et().vu(),lt:this.ng,EM:this.Jn.Ft().Nt(this.Jn.N().base,G(this.Jn.zt()).Wt)};this.hg.ht(e)}}const W5={type:"Histogram",isBuiltIn:!0,defaultOptions:{color:"#26a69a",base:0},Fg:(t,e)=>new U5(t,e)};({...WN});const vl="http://localhost:5001";class H5{constructor(){this.intervals=new Map,this.subscribers=new Map,this.lastUpdateTimes=new Map}startLiveUpdates(e,n,s=6e4){console.log(` Starting live updates for ${e} every ${s}ms`),this.stopLiveUpdates(e),this.subscribers.set(e,n),this.fetchLatestCandle(e);const r=this.getSmartInterval(e),i=setInterval(()=>{this.fetchLatestCandle(e)},r);return this.intervals.set(e,i),console.log(` Live updates for ${e} set to ${r/1e3}s intervals`),i}getSmartInterval(e){const s=new Date().getHours();if(e.endsWith(".NS")||e.endsWith(".BO")){const i=new Date().toLocaleString("en-US",{timeZone:"Asia/Kolkata"}),l=new Date(i).getHours();return l>=9&&l<=15?6e4:l>=8&&l<9||l>15&&l<=17?3e5:9e5}else return s>=9&&s<=16?6e4:s>=7&&s<9||s>16&&s<=20?3e5:9e5}stopLiveUpdates(e){const n=this.intervals.get(e);n&&(console.log(` Stopping live updates for ${e}`),clearInterval(n),this.intervals.delete(e),this.subscribers.delete(e),this.lastUpdateTimes.delete(e))}stopAllUpdates(){console.log(" Stopping all live updates"),this.intervals.forEach((e,n)=>{clearInterval(e)}),this.intervals.clear(),this.subscribers.clear(),this.lastUpdateTimes.clear()}async fetchLatestCandle(e){try{const n=await je.get(`${vl}/api/live-charts/latest/${e}`,{timeout:1e4});if(n.data.success&&n.data.latest){const s=n.data.latest,r=this.subscribers.get(e),i=this.lastUpdateTimes.get(e),o=s.time;!i||o>i?(console.log(` New candle for ${e}:`,{time:new Date(o*1e3).toLocaleTimeString(),close:s.close,volume:s.volume}),this.lastUpdateTimes.set(e,o),r&&r({type:"update",data:s,marketOpen:n.data.marketOpen,exchange:n.data.exchange,timestamp:n.data.timestamp})):r&&r({type:"price_update",data:s,marketOpen:n.data.marketOpen,exchange:n.data.exchange,timestamp:n.data.timestamp})}}catch(n){console.warn(` Failed to fetch latest candle for ${e}:`,n.message);const s=this.subscribers.get(e);s&&s({type:"error",error:n.message,symbol:e})}}async fetchInitialData(e,n=null){try{console.log(` Fetching initial chart data for ${e}`);const s=n?{from:n}:{},r=await je.get(`${vl}/api/live-charts/live/${e}`,{params:s,timeout:15e3});if(r.data.success)return console.log(` Initial data loaded for ${e}: ${r.data.count} candles`),{success:!0,data:r.data.data,latest:r.data.latest,marketOpen:r.data.marketOpen,exchange:r.data.exchange,count:r.data.count};throw new Error(r.data.message||"Failed to fetch initial data")}catch(s){return console.error(` Error fetching initial data for ${e}:`,s.message),{success:!1,error:s.message,data:[]}}}async checkMarketStatus(e="NSE"){try{return(await je.get(`${vl}/api/live-charts/market-status/${e}`,{timeout:5e3})).data}catch(n){return console.warn(` Failed to check market status for ${e}:`,n.message),{success:!1,marketOpen:!1,exchange:e.toUpperCase(),error:n.message}}}getActiveSymbols(){return Array.from(this.subscribers.keys())}isTracking(e){return this.subscribers.has(e)}getUpdateInterval(e){return this.intervals.get(e)}async fetchBatchCandles(e){try{console.log(` Batch fetching candles for ${e.length} symbols`);const n=await je.post(`${vl}/api/live-charts/batch`,{symbols:e},{timeout:15e3});if(n.data.success)return console.log(` Batch fetch successful: ${n.data.count} results`),{success:!0,results:n.data.results,timestamp:n.data.timestamp};throw new Error(n.data.message||"Batch fetch failed")}catch(n){return console.error(" Error in batch fetch:",n.message),{success:!1,error:n.message,results:[]}}}startBatchLiveUpdates(e,n,s=6e4){console.log(` Starting batch live updates for ${e.length} symbols every ${s}ms`),e.forEach(o=>this.stopLiveUpdates(o)),e.forEach(o=>this.subscribers.set(o,n)),this.fetchBatchCandles(e).then(o=>{o.success&&o.results.forEach(l=>{if(l.success){const c=this.subscribers.get(l.symbol);c&&c({type:"update",data:l.latest,marketOpen:l.marketOpen,exchange:l.exchange,timestamp:l.timestamp,symbol:l.symbol})}})});const r=setInterval(()=>{this.fetchBatchCandles(e).then(o=>{o.success&&o.results.forEach(l=>{if(l.success){const c=this.subscribers.get(l.symbol);c&&c({type:"update",data:l.latest,marketOpen:l.marketOpen,exchange:l.exchange,timestamp:l.timestamp,symbol:l.symbol})}})})},s),i=`batch_${e.join("_")}`;return this.intervals.set(i,r),r}}const xn=new H5;typeof window<"u"&&window.addEventListener("beforeunload",()=>{xn.stopAllUpdates()});const Y5=({data:t=[],symbol:e="RELIANCE.NS",timeframe:n="1D",chartType:s="candlestick",theme:r="dark",onRefresh:i,loading:o=!1,height:l=500,enableLiveUpdates:c=!0})=>{const u=b.useRef(),h=b.useRef(),d=b.useRef(),f=b.useRef(),x=b.useRef(),p=b.useRef(),[y,w]=b.useState(!1),[m,g]=b.useState(!0),[S,N]=b.useState({sma:!1,ema:!1,rsi:!1,macd:!1}),[C,E]=b.useState(c&&n==="1D"),[L,P]=b.useState(null),[R,_]=b.useState(!1),[I,O]=b.useState(null),[z,F]=b.useState(null),W=()=>({layout:{background:{type:lp.Solid,color:r==="dark"?"#0F172A":"#FFFFFF"},textColor:r==="dark"?"#F8FAFC":"#1E293B",fontSize:12,fontFamily:"Inter, -apple-system, BlinkMacSystemFont, sans-serif"},grid:{vertLines:{color:r==="dark"?"#1E293B":"#E2E8F0",style:1},horzLines:{color:r==="dark"?"#1E293B":"#E2E8F0",style:1}},crosshair:{mode:1,vertLine:{color:r==="dark"?"#64748B":"#475569",width:1,style:3},horzLine:{color:r==="dark"?"#64748B":"#475569",width:1,style:3}},priceScale:{borderColor:r==="dark"?"#334155":"#CBD5E1",textColor:r==="dark"?"#94A3B8":"#64748B"},timeScale:{borderColor:r==="dark"?"#334155":"#CBD5E1",textColor:r==="dark"?"#94A3B8":"#64748B",timeVisible:!0,secondsVisible:!1},watermark:{visible:!0,fontSize:48,horzAlign:"center",vertAlign:"center",color:r==="dark"?"rgba(248, 250, 252, 0.05)":"rgba(30, 41, 59, 0.05)",text:e},rightPriceScale:{scaleMargins:{top:.1,bottom:m?.4:.1}}}),A=()=>({upColor:"#10B981",downColor:"#EF4444",borderDownColor:"#EF4444",borderUpColor:"#10B981",wickDownColor:"#EF4444",wickUpColor:"#10B981"}),Q=()=>({color:"#3B82F6",lineWidth:2,lineStyle:0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4}),V=()=>({topColor:"rgba(59, 130, 246, 0.4)",bottomColor:"rgba(59, 130, 246, 0.0)",lineColor:"#3B82F6",lineWidth:2}),J=()=>({color:r==="dark"?"#475569":"#94A3B8",priceFormat:{type:"volume"},priceScaleId:"volume",scaleMargins:{top:.7,bottom:0}}),te=U=>{if(!h.current)return;const{type:H,data:ae,marketOpen:Ce,error:xe}=U;if(xe){console.warn("Live update error:",xe);return}_(Ce),P(new Date),H==="update"&&ae?(d.current&&s==="candlestick"?(d.current.update(ae),console.log(" Updated candlestick with new candle:",ae)):f.current&&s==="line"?f.current.update({time:ae.time,value:ae.close}):x.current&&s==="area"&&x.current.update({time:ae.time,value:ae.close}),m&&p.current&&ae.volume&&p.current.update({time:ae.time,value:ae.volume,color:ae.close>=ae.open?"#26a69a":"#ef5350"}),O(ae.close),F({direction:"update",timestamp:Date.now()}),setTimeout(()=>F(null),1e3)):H==="price_update"&&ae&&(d.current&&s==="candlestick"&&d.current.update(ae),O(ae.close))},ie=()=>{C?(xn.stopLiveUpdates(e),E(!1),console.log(" Live updates stopped")):(xn.startLiveUpdates(e,te,5e3),E(!0),console.log(" Live updates started"))};b.useEffect(()=>{if(!u.current)return;const U=k5(u.current,{...W(),width:u.current.clientWidth,height:y?window.innerHeight-100:l});h.current=U;try{s==="candlestick"?d.current=U.addSeries($5,A()):s==="line"?f.current=U.addSeries(_5,Q()):s==="area"&&(x.current=U.addSeries(D5,V()))}catch(ae){console.error("Error creating chart series:",ae),console.log("Available chart methods:",Object.getOwnPropertyNames(U))}m&&(p.current=U.addSeries(W5,J()),U.priceScale("volume").applyOptions({scaleMargins:{top:.7,bottom:0}}));const H=()=>{h.current&&u.current&&h.current.applyOptions({width:u.current.clientWidth,height:y?window.innerHeight-100:l})};return window.addEventListener("resize",H),()=>{window.removeEventListener("resize",H),h.current&&h.current.remove()}},[s,r,m,y,l]),b.useEffect(()=>{if(!(!t||t.length===0))try{const U=oe=>{if(!oe)return new Date().toISOString().split("T")[0];if(typeof oe=="number")return oe;if(typeof oe=="string"){const qt=new Date(oe);return isNaN(qt.getTime())?oe.split(" ")[0]||new Date().toISOString().split("T")[0]:qt.toISOString().split("T")[0]}return new Date().toISOString().split("T")[0]},H=t.map(oe=>({time:U(oe.time||oe.date),open:parseFloat(oe.open),high:parseFloat(oe.high),low:parseFloat(oe.low),close:parseFloat(oe.close),value:parseFloat(oe.close)})),ae=t.map(oe=>({time:U(oe.time||oe.date),value:parseInt(oe.volume||0),color:oe.close>=oe.open?"#10B981":"#EF4444"})),Ce=[],xe=new Set;H.sort((oe,qt)=>new Date(oe.time)-new Date(qt.time)).forEach(oe=>{xe.has(oe.time)||(xe.add(oe.time),Ce.push(oe))});const me=[],ke=new Set;ae.sort((oe,qt)=>new Date(oe.time)-new Date(qt.time)).forEach(oe=>{ke.has(oe.time)||(ke.add(oe.time),me.push(oe))}),s==="candlestick"&&d.current?d.current.setData(Ce):s==="line"&&f.current?f.current.setData(Ce):s==="area"&&x.current&&x.current.setData(Ce),m&&p.current&&me.length>0&&p.current.setData(me),h.current&&h.current.timeScale().fitContent()}catch(U){console.error("Error updating chart data:",U)}},[t,s,m]),b.useEffect(()=>{if(n!=="1D"){C&&(E(!1),xn.stopLiveUpdates(e));return}return C?(console.log(` Starting live updates for ${e}`),xn.startLiveUpdates(e,te),xn.checkMarketStatus(e.includes(".NS")?"NSE":"NASDAQ").then(U=>{_(U.marketOpen)})):xn.stopLiveUpdates(e),()=>{xn.stopLiveUpdates(e)}},[C,e,n]),b.useEffect(()=>(xn.stopLiveUpdates(e),n==="1D"&&c?(E(!0),xn.startLiveUpdates(e,te)):E(!1),()=>{xn.stopLiveUpdates(e)}),[e,n]);const ce=()=>{w(!y)},_e=()=>{g(!m)},ee=()=>{if(h.current){const U=u.current.querySelector("canvas");if(U){const H=document.createElement("a");H.download=`${e}_${n}_chart.png`,H.href=U.toDataURL(),H.click()}}};return a.jsxs($.div,{className:`tradingview-chart-container ${y?"fullscreen":""}`,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.5},children:[a.jsxs("div",{className:"chart-header",children:[a.jsxs("div",{className:"chart-title",children:[a.jsxs("h3",{children:[e," - ",n]}),a.jsx("span",{className:"chart-type",children:s.charAt(0).toUpperCase()+s.slice(1)}),C&&a.jsxs("div",{className:"live-indicators",children:[I&&a.jsxs("span",{className:`live-price ${z?`price-${z.direction}`:""}`,children:["",I.toFixed(2)]}),a.jsxs("span",{className:`market-status ${R?"open":"closed"}`,children:[a.jsx($n,{size:14,className:"status-icon"}),R?"Market Open":"Market Closed"]}),L&&a.jsxs("span",{className:"last-update",children:["Updated: ",L.toLocaleTimeString()]})]})]}),a.jsxs("div",{className:"chart-controls",children:[a.jsxs("button",{className:"chart-control-btn",onClick:_e,title:"Toggle Volume",children:["Volume: ",m?"ON":"OFF"]}),a.jsx("button",{className:"chart-control-btn",onClick:i,disabled:o,title:"Refresh Data",children:a.jsx(jt,{size:16,className:o?"animate-spin":""})}),n==="1D"&&c&&a.jsxs("button",{onClick:ie,className:`chart-control-btn ${C?"live-active":""}`,title:C?"Stop Live Updates":"Start Live Updates",children:[C?a.jsx(Jb,{size:16}):a.jsx(II,{size:16}),a.jsx("span",{className:"ml-1",children:C?"Live":"Start"})]}),a.jsx("button",{className:"chart-control-btn",onClick:ee,title:"Export Chart",children:a.jsx(Wm,{size:16})}),a.jsx("button",{className:"chart-control-btn",onClick:ce,title:"Toggle Fullscreen",children:a.jsx(TI,{size:16})})]})]}),a.jsxs("div",{ref:u,className:"chart-wrapper",style:{position:"relative",width:"100%",height:y?"calc(100vh - 100px)":`${l}px`},children:[o&&a.jsx("div",{className:"chart-loading-overlay",children:a.jsxs("div",{className:"loading-content",children:[a.jsx(jt,{size:32,className:"animate-spin"}),a.jsx("p",{children:"Loading chart data..."})]})}),t.length===0&&!o&&a.jsx("div",{className:"chart-empty-overlay",children:a.jsxs("div",{className:"empty-content",children:[a.jsx("p",{children:"No chart data available"}),a.jsxs("button",{onClick:i,className:"btn-primary",children:[a.jsx(jt,{size:16}),"Refresh"]})]})})]}),a.jsx("div",{className:"chart-footer",children:a.jsxs("div",{className:"chart-info",children:[a.jsxs("span",{children:["Data Points: ",t.length]}),a.jsx("span",{children:""}),a.jsxs("span",{children:["Last Updated: ",new Date().toLocaleTimeString()]})]})})]})},q5=(t,e)=>{const[n,s]=b.useState(t);return b.useEffect(()=>{const r=setTimeout(()=>{s(t)},e);return()=>{clearTimeout(r)}},[t,e]),n},G5=({onStockSelect:t,selectedStock:e,onQuickOrder:n,className:s=""})=>{const[r,i]=b.useState(""),[o,l]=b.useState([]),[c,u]=b.useState(!1),[h,d]=b.useState(!1),[f,x]=b.useState("all"),[p,y]=b.useState(!1),w=b.useRef(null),m=q5(r,300),[g,S]=b.useState([{symbol:"RELIANCE",name:"Reliance Industries Ltd",price:2847.65,change:23.45,changePercent:.83,volume:2847392,marketCap:1925e9,sector:"Energy",isWatchlisted:!1},{symbol:"TCS",name:"Tata Consultancy Services",price:3567.8,change:-12.4,changePercent:-.35,volume:1234567,marketCap:13e11,sector:"IT",isWatchlisted:!0},{symbol:"HDFCBANK",name:"HDFC Bank Limited",price:1687.9,change:15.6,changePercent:.93,volume:3456789,marketCap:93e10,sector:"Banking",isWatchlisted:!1},{symbol:"INFY",name:"Infosys Limited",price:1456.25,change:8.75,changePercent:.6,volume:2345678,marketCap:62e10,sector:"IT",isWatchlisted:!1},{symbol:"HINDUNILVR",name:"Hindustan Unilever Ltd",price:2789.45,change:-5.3,changePercent:-.19,volume:876543,marketCap:65e10,sector:"FMCG",isWatchlisted:!0},{symbol:"ICICIBANK",name:"ICICI Bank Limited",price:1098.7,change:12.85,changePercent:1.18,volume:4567890,marketCap:77e10,sector:"Banking",isWatchlisted:!1},{symbol:"KOTAKBANK",name:"Kotak Mahindra Bank",price:1876.2,change:-8.45,changePercent:-.45,volume:1987654,marketCap:37e10,sector:"Banking",isWatchlisted:!1},{symbol:"BHARTIARTL",name:"Bharti Airtel Limited",price:1234.55,change:18.9,changePercent:1.55,volume:3210987,marketCap:68e10,sector:"Telecom",isWatchlisted:!0},{symbol:"ITC",name:"ITC Limited",price:456.8,change:-2.15,changePercent:-.47,volume:5432109,marketCap:57e10,sector:"FMCG",isWatchlisted:!1}]),N=async P=>{if(!P.trim()){l([]);return}u(!0);try{const R=g.filter(I=>I.symbol.toLowerCase().includes(P.toLowerCase())||I.name.toLowerCase().includes(P.toLowerCase())),_=[{symbol:"SBIN",name:"State Bank of India",price:567.45,change:4.2,changePercent:.74,sector:"Banking"},{symbol:"WIPRO",name:"Wipro Limited",price:432.1,change:-1.85,changePercent:-.43,sector:"IT"}].filter(I=>I.symbol.toLowerCase().includes(P.toLowerCase())||I.name.toLowerCase().includes(P.toLowerCase()));l([...R,..._])}catch(R){console.error("Search error:",R),l([])}finally{u(!1)}},C=b.useMemo(()=>{let P=[...g];switch(f){case"gainers":P=P.filter(R=>R.change>0).sort((R,_)=>_.changePercent-R.changePercent);break;case"losers":P=P.filter(R=>R.change<0).sort((R,_)=>R.changePercent-_.changePercent);break;case"watchlist":P=P.filter(R=>R.isWatchlisted);break;case"volume":P=P.sort((R,_)=>_.volume-R.volume);break;default:P=P.sort((R,_)=>_.marketCap-R.marketCap)}return P},[g,f]);b.useEffect(()=>{m?N(m):l([])},[m]);const E=P=>{t==null||t(P),i(""),l([])},L=P=>P>0?"text-green-500":P<0?"text-red-500":"text-gray-500";return a.jsxs("div",{className:`stock-search-panel ${s}`,children:[a.jsxs("div",{className:"search-section",children:[a.jsx("h3",{className:"search-title",children:"Search Stocks"}),a.jsxs("div",{className:"search-input-container",children:[a.jsx(ju,{className:"search-icon",size:18}),a.jsx("input",{ref:w,type:"text",className:"search-input",placeholder:"Search stocks...",value:r,onChange:P=>i(P.target.value)}),r&&a.jsx("button",{className:"clear-search-btn",onClick:()=>{i(""),l([])},children:a.jsx(ds,{size:16})}),c&&a.jsx("div",{className:"search-loading",children:a.jsx("div",{className:"loading-spinner"})})]}),a.jsx(Mt,{children:o.length>0&&a.jsx($.div,{className:"search-results",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:o.map((P,R)=>{var _,I;return a.jsxs($.div,{className:"search-result-item",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.2,delay:R*.05},onClick:()=>E(P),children:[a.jsxs("div",{className:"stock-info",children:[a.jsx("div",{className:"stock-symbol",children:P.symbol}),a.jsx("div",{className:"stock-name",children:P.name}),P.sector&&a.jsx("div",{className:"stock-sector",children:P.sector})]}),a.jsxs("div",{className:"stock-price-info",children:[a.jsx("div",{className:"stock-price",children:$e(P.price)}),a.jsxs("div",{className:`stock-change ${L(P.change)}`,children:[P.change>=0?"+":"",(_=P.change)==null?void 0:_.toFixed(2),"(",(I=P.changePercent)==null?void 0:I.toFixed(2),"%)"]})]})]},P.symbol)})})})]}),a.jsxs("div",{className:"popular-stocks-section",children:[a.jsx("div",{className:"popular-stocks-header",children:a.jsx("h3",{className:"popular-stocks-title",children:"Popular Stocks"})}),a.jsx("div",{className:"popular-stocks-list",children:a.jsx(Mt,{children:C.map((P,R)=>{var _,I;return a.jsxs($.div,{className:`popular-stock-item ${(e==null?void 0:e.symbol)===P.symbol?"selected":""}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3,delay:R*.05},onClick:()=>E(P),whileHover:{scale:1.02},whileTap:{scale:.98},children:[a.jsxs("div",{className:"stock-main-info",children:[a.jsxs("div",{className:"stock-symbol-container",children:[a.jsx("span",{className:"stock-symbol",children:P.symbol}),P.isWatchlisted&&a.jsx(Oi,{className:"watchlist-star",size:12})]}),a.jsx("div",{className:"stock-name",children:P.name})]}),a.jsxs("div",{className:"stock-price-info",children:[a.jsx("div",{className:"stock-price",children:$e(P.price)}),a.jsxs("div",{className:`stock-change ${L(P.change)}`,children:[P.change>=0?"+":"",(_=P.change)==null?void 0:_.toFixed(2),"(",(I=P.changePercent)==null?void 0:I.toFixed(2),"%)"]})]})]},P.symbol)})})})]})]})},Q5=({user:t,theme:e})=>{const[n,s]=b.useState("RELIANCE"),[r,i]=b.useState("1D"),[o,l]=b.useState("candlestick"),[c,u]=b.useState(!1),[h,d]=b.useState([]),[f,x]=b.useState([]),[p,y]=b.useState(null),[w,m]=b.useState(!1),[g,S]=b.useState(null),[N,C]=b.useState(!0),[E,L]=b.useState(null),[P,R]=b.useState(null),[_,I]=b.useState(null),[O,z]=b.useState(null),{query:F,setQuery:W,results:A,loading:Q,recentSearches:V,clearSearch:J}=ng({limit:10,debounceMs:300});console.log(" Charts - Search Query:",F),console.log(" Charts - Search Results:",A),console.log(" Charts - Is Searching:",Q);const te=Z=>["RELIANCE","TCS","HDFCBANK","INFY","HINDUNILVR","ICICIBANK","BHARTIARTL","SBIN","LICI","ITC","KOTAKBANK","LT","HCLTECH","AXISBANK","ASIANPAINT","MARUTI","SUNPHARMA","TITAN","ULTRACEMCO","WIPRO","NESTLEIND","POWERGRID","NTPC","BAJFINANCE","M&M"].includes(Z.toUpperCase())&&!Z.includes(".")?`${Z}.NS`:Z,ce=[{symbol:"RELIANCE.NS",name:"Reliance Industries Ltd",price:2847.5,change:15.25,changePercent:.54},{symbol:"TCS.NS",name:"Tata Consultancy Services",price:4125.8,change:-12.4,changePercent:-.3},{symbol:"HDFCBANK.NS",name:"HDFC Bank Limited",price:1687.9,change:8.75,changePercent:.52},{symbol:"INFY.NS",name:"Infosys Limited",price:1842.35,change:22.15,changePercent:1.22},{symbol:"HINDUNILVR.NS",name:"Hindustan Unilever Ltd",price:2456.7,change:-5.3,changePercent:-.22},{symbol:"ICICIBANK.NS",name:"ICICI Bank Limited",price:1287.45,change:18.9,changePercent:1.49},{symbol:"KOTAKBANK.NS",name:"Kotak Mahindra Bank",price:1798.25,change:-7.85,changePercent:-.43},{symbol:"BHARTIARTL.NS",name:"Bharti Airtel Limited",price:1654.3,change:12.6,changePercent:.77},{symbol:"ITC.NS",name:"ITC Limited",price:487.85,change:3.25,changePercent:.67},{symbol:"SBIN.NS",name:"State Bank of India",price:825.4,change:-4.15,changePercent:-.5},{symbol:"LT.NS",name:"Larsen & Toubro Ltd",price:3687.2,change:28.45,changePercent:.78},{symbol:"ASIANPAINT.NS",name:"Asian Paints Limited",price:2398.75,change:-15.8,changePercent:-.65}].filter((Z,ge,Se)=>ge===Se.findIndex(qe=>qe.symbol===Z.symbol)),_e=["1D","5D","1M","3M","6M","1Y","5Y"],ee=[{id:"candlestick",name:"Candlestick",icon:Lt},{id:"line",name:"Line",icon:$n},{id:"area",name:"Area",icon:kI}],U=[{id:"sma",name:"SMA (20)",color:"#3B82F6"},{id:"ema",name:"EMA (12)",color:"#10B981"},{id:"rsi",name:"RSI (14)",color:"#F59E0B"},{id:"macd",name:"MACD",color:"#EF4444"},{id:"bollinger",name:"Bollinger Bands",color:"#8B5CF6"}],H=Z=>{if(!Z||Z.length===0)return[];const ge=Z.map(pe=>({time:pe.date||pe.time,open:parseFloat(pe.open),high:parseFloat(pe.high),low:parseFloat(pe.low),close:parseFloat(pe.close),volume:parseInt(pe.volume||0)})),Se=[],qe=new Set;return ge.sort((pe,_n)=>new Date(pe.time)-new Date(_n.time)).forEach(pe=>{qe.has(pe.time)||(qe.add(pe.time),Se.push(pe))}),Se},ae=async(Z,ge)=>{var Se,qe;m(!0),S(null);try{console.log(` Fetching chart data for ${Z} (${ge})`),console.log(" FMP API structure:",{hasChart:!!ir.chart,hasGetHistoricalData:!!((Se=ir.chart)!=null&&Se.getHistoricalData)});const pe=await ir.chart.getHistoricalData(Z,ge);if(console.log(" Historical response:",pe),pe&&pe.success&&pe.data&&pe.data.length>0){const ps=H(pe.data);x(ps),console.log(` Chart data loaded: ${ps.length} points`)}else console.warn(" No historical data available",{hasResponse:!!pe,success:pe==null?void 0:pe.success,dataLength:((qe=pe==null?void 0:pe.data)==null?void 0:qe.length)||0,response:pe}),x([]);const _n=await ir.stock.getStockQuote(Z);_n.success&&(y(_n.data),console.log(` Stock info loaded for ${Z}`))}catch(pe){console.error(" Error fetching chart data:",pe),S(pe.message),x([])}finally{m(!1)}},Ce=async Z=>{try{console.log(` Fetching live quote for ${Z}`);const ge=await ir.stock.getStockQuote(Z);if(ge.success&&ge.data){const Se=ge.data.price,qe=P;if(R(Se),y(ge.data),L(new Date),qe&&Se!==qe&&(I({direction:Se>qe?"up":"down",amount:Se-qe,timestamp:Date.now()}),r==="1D"&&f.length>0)){const pe={...f[f.length-1]},_n={...pe,close:Se,high:Math.max(pe.high,Se),low:Math.min(pe.low,Se),time:new Date().toISOString()};x(ps=>[...ps.slice(0,-1),_n])}return console.log(` Live price updated: ${Se}`),ge.data}}catch(ge){console.warn(" Failed to fetch live quote:",ge.message)}return null},xe=async()=>{u(!0),await ae(n,r),u(!1)},me=async Z=>{console.log(" Stock selected:",Z);const ge=te(Z);console.log(" Transformed symbol:",ge),s(Z),await ae(ge,r)},ke=async Z=>{i(Z),await ae(n,Z)},oe=Z=>{d(ge=>ge.includes(Z)?ge.filter(Se=>Se!==Z):[...ge,Z])};ce.filter(Z=>{var Se,qe;if(!F||F.trim()==="")return!0;const ge=F.toLowerCase();return((Se=Z.symbol)==null?void 0:Se.toLowerCase().includes(ge))||((qe=Z.name)==null?void 0:qe.toLowerCase().includes(ge))}).filter((Z,ge,Se)=>ge===Se.findIndex(qe=>qe.symbol===Z.symbol));const Gt=ce.find(Z=>Z.symbol===n)||ce[0],Yr=async()=>{console.log(" Testing FMP API functionality...");try{const Z=await ir.chart.getHistoricalData("AAPL","1D");console.log(" US Stock (AAPL) test result:",Z)}catch(Z){console.log(" US Stock test failed:",Z)}try{const Z=await ir.chart.getHistoricalData("RELIANCE.NS","1D");console.log(" Indian Stock (RELIANCE.NS) test result:",Z)}catch(Z){console.log(" Indian Stock test failed:",Z)}};return b.useEffect(()=>{Yr();const Z=te(n);if(ae(Z,r),N){const ge=setInterval(()=>{if(!c){const Se=te(n);Ce(Se)}},3e4);return z(ge),()=>{ge&&clearInterval(ge)}}},[]),b.useEffect(()=>{const Z=te(n);ae(Z,r),R(null),I(null)},[n,r]),b.useEffect(()=>{if(N&&!O){const Z=setInterval(()=>{if(!c){const ge=te(n);Ce(ge)}},3e4);z(Z)}else!N&&O&&(clearInterval(O),z(null));return()=>{O&&clearInterval(O)}},[N,n,c]),b.useEffect(()=>()=>{O&&clearInterval(O)},[]),a.jsx("div",{className:"charts-page",children:a.jsxs("div",{className:"charts-container",children:[a.jsxs($.div,{className:"charts-header",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:[a.jsxs("div",{className:"header-left",children:[a.jsxs("div",{className:"page-title",children:[a.jsx(Lt,{size:24}),a.jsx("h1",{children:"Professional Charts"})]}),a.jsxs("div",{className:"stock-info",children:[a.jsx("h2",{children:Gt.name}),a.jsxs("span",{className:"symbol",children:["(",Gt.symbol,")"]}),a.jsx(Ys,{price:Gt.price,change:Gt.change,changePercent:Gt.changePercent}),a.jsx(gA,{stockData:Gt})]})]}),a.jsx("div",{className:"header-actions",children:a.jsxs("button",{className:"btn-premium btn-secondary",onClick:xe,disabled:c,children:[a.jsx(jt,{size:16,className:c?"animate-spin":""}),"Refresh"]})})]}),a.jsxs("div",{className:"charts-content",children:[a.jsxs($.div,{className:"charts-sidebar",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.1},children:[a.jsx(G5,{onStockSelect:Z=>{console.log(" Selected stock from panel:",Z),me(Z.symbol||Z)},selectedStock:{symbol:n},className:"charts-stock-search"}),a.jsxs("div",{className:"sidebar-section",children:[a.jsx("h3",{children:"Timeframe"}),a.jsx("div",{className:"timeframe-buttons",children:_e.map(Z=>a.jsx("button",{className:`timeframe-btn ${r===Z?"active":""}`,onClick:()=>ke(Z),children:Z},Z))})]}),a.jsxs("div",{className:"sidebar-section",children:[a.jsx("h3",{children:"Chart Type"}),a.jsx("div",{className:"chart-type-buttons",children:ee.map(Z=>a.jsxs("button",{className:`chart-type-btn ${o===Z.id?"active":""}`,onClick:()=>l(Z.id),children:[a.jsx(Z.icon,{size:16}),Z.name]},Z.id))})]}),a.jsxs("div",{className:"sidebar-section",children:[a.jsx("h3",{children:"Technical Indicators"}),a.jsx("div",{className:"indicators-list",children:U.map(Z=>a.jsxs("div",{className:`indicator-item ${h.includes(Z.id)?"active":""}`,onClick:()=>oe(Z.id),children:[a.jsx("div",{className:"indicator-color",style:{backgroundColor:Z.color}}),a.jsx("span",{children:Z.name})]},Z.id))})]})]}),a.jsxs($.div,{className:"chart-main",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.6,delay:.2},children:[a.jsx(Y5,{data:f,symbol:n,timeframe:r,chartType:o,theme:e,onRefresh:xe,loading:w,height:600}),a.jsxs("div",{className:"chart-footer",children:[a.jsxs("div",{className:"footer-left",children:[a.jsxs("div",{className:"volume-info",children:[a.jsx(Zf,{size:16}),a.jsxs("span",{children:["Volume: ",p!=null&&p.volume?p.volume.toLocaleString():"N/A"]})]}),a.jsxs("div",{className:"market-cap-info",children:[a.jsx(Jf,{size:16}),a.jsxs("span",{children:["Market Cap: ",p!=null&&p.marketCap?""+(p.marketCap/1e7).toFixed(1)+" Cr":"N/A"]})]})]}),a.jsx("div",{className:"footer-right",children:a.jsxs("div",{className:"last-updated",children:[a.jsx(nn,{size:16}),a.jsxs("span",{children:["Last updated: ",p!=null&&p.timestamp?new Date(p.timestamp*1e3).toLocaleTimeString():"N/A"]})]})})]})]})]})]})})},K5=({user:t,theme:e})=>{const[n,s]=b.useState("all"),[r,i]=b.useState(!1),[o,l]=b.useState("symbol"),[c,u]=b.useState("asc"),[h,d]=b.useState(!1),{portfolioData:f,addToWatchlist:x,removeFromWatchlist:p}=Vn(),{query:y,setQuery:w,results:m,suggestions:g,recentSearches:S,showHistory:N,handleHistoryClick:C,loading:E,clearSearch:L,hasResults:P}=i3({enableSuggestions:!0,enableHistory:!0,limit:15,debounceMs:300}),R=[{id:"all",name:"All Stocks",count:15},{id:"favorites",name:"Favorites",count:5},{id:"banking",name:"Banking",count:4},{id:"it",name:"IT",count:3},{id:"energy",name:"Energy",count:2},{id:"pharma",name:"Pharma",count:1}],_=[{symbol:"RELIANCE",name:"Reliance Industries Ltd",price:2465.3,change:2.71,changePercent:.11,volume:"2.5M",marketCap:"16.7L Cr",sector:"energy",favorite:!0,high52w:2856.15,low52w:2220.3,pe:28.5,dividend:1.2},{symbol:"TCS",name:"Tata Consultancy Services",price:3185.45,change:-14.85,changePercent:-.47,volume:"1.8M",marketCap:"11.6L Cr",sector:"it",favorite:!0,high52w:4043.75,low52w:2880.1,pe:26.8,dividend:2.1},{symbol:"HDFCBANK",name:"HDFC Bank Ltd",price:1650.2,change:51.75,changePercent:3.13,volume:"3.2M",marketCap:"9.1L Cr",sector:"banking",favorite:!1,high52w:1725,low52w:1363.55,pe:18.2,dividend:1.8},{symbol:"INFY",name:"Infosys Ltd",price:1595.8,change:19.7,changePercent:1.25,volume:"2.1M",marketCap:"6.6L Cr",sector:"it",favorite:!0,high52w:1953.9,low52w:1311.2,pe:24.5,dividend:2.5},{symbol:"ICICIBANK",name:"ICICI Bank Ltd",price:945.15,change:12.3,changePercent:1.32,volume:"4.1M",marketCap:"6.6L Cr",sector:"banking",favorite:!1,high52w:1036.4,low52w:663.8,pe:15.8,dividend:1.5},{symbol:"WIPRO",name:"Wipro Ltd",price:420.85,change:-3.25,changePercent:-.77,volume:"1.5M",marketCap:"2.3L Cr",sector:"it",favorite:!1,high52w:577.05,low52w:361.25,pe:22.1,dividend:1.8},{symbol:"KOTAKBANK",name:"Kotak Mahindra Bank",price:1785.4,change:28.6,changePercent:1.63,volume:"1.2M",marketCap:"3.5L Cr",sector:"banking",favorite:!0,high52w:2065.15,low52w:1543.85,pe:16.5,dividend:1.2},{symbol:"SBIN",name:"State Bank of India",price:598.25,change:-8.45,changePercent:-1.39,volume:"5.8M",marketCap:"5.3L Cr",sector:"banking",favorite:!1,high52w:723.9,low52w:462.75,pe:12.3,dividend:2.8}],I=async()=>{i(!0),await new Promise(A=>setTimeout(A,1500)),i(!1)},O=A=>{console.log("Toggle favorite for:",A)},F=[..._.filter(A=>{const Q=A.symbol.toLowerCase().includes(y.toLowerCase())||A.name.toLowerCase().includes(y.toLowerCase()),V=n==="all"||n==="favorites"&&A.favorite||A.sector===n;return Q&&V})].sort((A,Q)=>{let V=A[o],J=Q[o];return typeof V=="string"&&(V=V.toLowerCase(),J=J.toLowerCase()),c==="asc"?V>J?1:-1:V<J?1:-1}),W=A=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(A);return a.jsx("div",{className:"watchlist-page",children:a.jsxs("div",{className:"watchlist-container",children:[a.jsx("div",{className:"page-header",children:a.jsxs("div",{className:"page-header-main",children:[a.jsxs("div",{className:"page-header-left",children:[a.jsxs("h1",{className:"page-title",children:[a.jsx(Ii,{className:"title-icon"}),a.jsx("span",{className:"title-text",children:"Watchlist"})]}),a.jsx("p",{className:"page-subtitle",children:"Track your favorite stocks and monitor market movements in real-time"})]}),a.jsxs("div",{className:"page-actions",children:[a.jsxs("button",{className:"btn-premium btn-secondary",onClick:I,disabled:r,children:[a.jsx(jt,{size:16,className:r?"animate-spin":""}),"Refresh"]}),a.jsxs("button",{className:"btn-premium btn-primary",children:[a.jsx(Ai,{size:16}),"Add Stock"]})]})]})}),a.jsxs($.div,{className:"watchlist-controls",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},children:[a.jsxs("div",{className:"controls-left",children:[a.jsx("div",{className:"search-container",children:a.jsx(Ro,{placeholder:"Search stocks to add to watchlist...",value:y,onChange:w,onClear:L,suggestions:g,recentSearches:S,onSuggestionClick:A=>{x(A.symbol),L()},onHistoryClick:C,showHistory:N,loading:E,size:"md",showSuggestions:!0,enableHistory:!0,className:"watchlist-search-input",renderSuggestion:(A,Q)=>a.jsx("div",{className:"watchlist-search-suggestion",children:a.jsxs("div",{className:"suggestion-content",children:[a.jsx("span",{className:"suggestion-symbol",children:A.symbol}),a.jsx("span",{className:"suggestion-name",children:A.name}),A.exchange&&a.jsx("span",{className:"suggestion-exchange",children:A.exchange}),A.inWatchlist&&a.jsx("span",{className:"suggestion-badge",children:"In Watchlist"})]})},Q)})}),a.jsx("div",{className:"category-filter",children:R.map(A=>a.jsxs("button",{className:`category-btn ${n===A.id?"active":""}`,onClick:()=>s(A.id),children:[A.name,a.jsx("span",{className:"category-count",children:A.count})]},A.id))})]}),a.jsx("div",{className:"controls-right",children:a.jsxs("div",{className:"sort-controls",children:[a.jsxs("select",{value:o,onChange:A=>l(A.target.value),className:"sort-select",children:[a.jsx("option",{value:"symbol",children:"Symbol"}),a.jsx("option",{value:"price",children:"Price"}),a.jsx("option",{value:"changePercent",children:"Change %"}),a.jsx("option",{value:"volume",children:"Volume"}),a.jsx("option",{value:"marketCap",children:"Market Cap"})]}),a.jsx("button",{className:"sort-order-btn",onClick:()=>u(c==="asc"?"desc":"asc"),children:c==="asc"?a.jsx(Xe,{size:16}):a.jsx(_t,{size:16})})]})})]}),a.jsxs($.div,{className:"watchlist-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:[a.jsxs("div",{className:"card-header",children:[a.jsxs("h3",{className:"card-title",children:[a.jsx(Lt,{className:"card-icon"}),"Stocks (",F.length,")"]}),a.jsx("div",{className:"card-actions",children:a.jsxs("button",{className:"btn-premium btn-ghost",children:[a.jsx(wu,{size:14}),"Filter"]})})]}),a.jsx("div",{className:"card-content",children:a.jsxs("div",{className:"watchlist-table",children:[a.jsxs("div",{className:"table-header",children:[a.jsx("div",{className:"col-stock",children:"Stock"}),a.jsx("div",{className:"col-price",children:"Price"}),a.jsx("div",{className:"col-change",children:"Change"}),a.jsx("div",{className:"col-volume",children:"Volume"}),a.jsx("div",{className:"col-market-cap",children:"Market Cap"}),a.jsx("div",{className:"col-pe",children:"P/E"}),a.jsx("div",{className:"col-52w",children:"52W Range"}),a.jsx("div",{className:"col-actions",children:"Actions"})]}),a.jsx("div",{className:"table-body",children:F.map((A,Q)=>a.jsxs($.div,{className:"table-row",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:Q*.05},children:[a.jsx("div",{className:"col-stock",children:a.jsxs("div",{className:"stock-info",children:[a.jsxs("div",{className:"stock-header",children:[a.jsx("div",{className:"stock-symbol",children:A.symbol}),A.favorite&&a.jsx(Oi,{className:"favorite-icon"})]}),a.jsx("div",{className:"stock-name",children:A.name}),a.jsx("div",{className:"stock-sector",children:A.sector.toUpperCase()})]})}),a.jsx("div",{className:"col-price",children:a.jsx("div",{className:"price-value",children:W(A.price)})}),a.jsx("div",{className:"col-change",children:a.jsx(Ys,{price:A.price,change:A.change,changePercent:A.changePercent,size:"small",showPrice:!1})}),a.jsx("div",{className:"col-volume",children:A.volume}),a.jsx("div",{className:"col-market-cap",children:A.marketCap}),a.jsx("div",{className:"col-pe",children:A.pe}),a.jsx("div",{className:"col-52w",children:a.jsxs("div",{className:"range-info",children:[a.jsxs("div",{className:"range-values",children:[a.jsx("span",{className:"range-low",children:W(A.low52w)}),a.jsx("span",{className:"range-separator",children:"-"}),a.jsx("span",{className:"range-high",children:W(A.high52w)})]}),a.jsx("div",{className:"range-bar",children:a.jsx("div",{className:"range-indicator",style:{left:`${(A.price-A.low52w)/(A.high52w-A.low52w)*100}%`}})})]})}),a.jsx("div",{className:"col-actions",children:a.jsxs("div",{className:"action-buttons",children:[a.jsx(pA,{stockData:{symbol:A.symbol,name:A.name,price:A.price,change:A.change,changePercent:A.changePercent,volume:A.volume,marketCap:A.marketCap,sector:A.sector}}),a.jsx("button",{className:`action-btn ${A.favorite?"favorite":""}`,onClick:()=>O(A.symbol),title:"Toggle Favorite",children:a.jsx(Oi,{size:14})}),a.jsx("button",{className:"action-btn",onClick:()=>p(A.symbol),title:"Remove from Watchlist",children:a.jsx(tN,{size:14})})]})})]},A.symbol))})]})})]})]})})},X5=({user:t,theme:e})=>{const[n,s]=b.useState("all"),[r,i]=b.useState("all"),[o,l]=b.useState(!1),{portfolioData:c}=Vn(),{query:u,setQuery:h,results:d,recentSearches:f,showHistory:x,handleHistoryClick:p,loading:y,clearSearch:w,hasResults:m}=r3({enableSuggestions:!1,enableHistory:!0,limit:50,debounceMs:300,filters:{status:n!=="all"?n:null,type:r!=="all"?r:null}}),g=c.transactions||[],S=[{id:"all",name:"All Orders",count:25},{id:"pending",name:"Pending",count:3},{id:"completed",name:"Completed",count:18},{id:"cancelled",name:"Cancelled",count:4}],N=[{id:"all",name:"All Types"},{id:"buy",name:"Buy Orders"},{id:"sell",name:"Sell Orders"}],C=async()=>{l(!0),await new Promise(I=>setTimeout(I,1500)),l(!1)},E=I=>{switch(I){case"completed":return a.jsx(Ws,{className:"status-icon completed"});case"pending":return a.jsx(nn,{className:"status-icon pending"});case"cancelled":return a.jsx(uo,{className:"status-icon cancelled"});default:return a.jsx(nn,{className:"status-icon"})}},L=I=>{switch(I){case"completed":return"#10B981";case"pending":return"#F59E0B";case"cancelled":return"#EF4444";default:return"#6B7280"}},P=I=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(I),R=I=>{const O=new Date(I);return{date:O.toLocaleDateString("en-IN"),time:O.toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"})}},_=g.filter(I=>{const O=I.symbol.toLowerCase().includes(u.toLowerCase())||I.name.toLowerCase().includes(u.toLowerCase())||I.id.toLowerCase().includes(u.toLowerCase()),z=n==="all"||I.status===n,F=r==="all"||I.type.toLowerCase()===r;return O&&z&&F});return a.jsx("div",{className:"orders-page",children:a.jsxs("div",{className:"orders-container",children:[a.jsx($.div,{className:"orders-header",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6},children:a.jsxs("div",{className:"header-content",children:[a.jsxs("div",{className:"header-left",children:[a.jsxs("h1",{className:"page-title",children:[a.jsx(Bt,{className:"title-icon"}),"Orders"]}),a.jsx("p",{className:"page-subtitle",children:"Track and manage your trading orders"})]}),a.jsxs("div",{className:"header-actions",children:[a.jsxs("button",{className:"btn-premium btn-secondary",onClick:C,disabled:o,children:[a.jsx(jt,{size:16,className:o?"animate-spin":""}),"Refresh"]}),a.jsxs("button",{className:"btn-premium btn-ghost",children:[a.jsx(Wm,{size:16}),"Export"]})]})]})}),a.jsxs($.div,{className:"orders-controls",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},children:[a.jsxs("div",{className:"controls-left",children:[a.jsx("div",{className:"search-container",children:a.jsx(Ro,{placeholder:"Search orders by stock symbol...",value:u,onChange:h,onClear:w,recentSearches:f,onHistoryClick:p,showHistory:x,loading:y,size:"md",showSuggestions:!1,enableHistory:!0,className:"orders-search-input"})}),a.jsxs("div",{className:"filter-group",children:[a.jsx("select",{value:n,onChange:I=>s(I.target.value),className:"filter-select",children:S.map(I=>a.jsxs("option",{value:I.id,children:[I.name," (",I.count,")"]},I.id))}),a.jsx("select",{value:r,onChange:I=>i(I.target.value),className:"filter-select",children:N.map(I=>a.jsx("option",{value:I.id,children:I.name},I.id))})]})]}),a.jsx("div",{className:"controls-right",children:a.jsxs("button",{className:"btn-premium btn-ghost",children:[a.jsx(wu,{size:16}),"More Filters"]})})]}),a.jsxs($.div,{className:"orders-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:[a.jsx("div",{className:"card-header",children:a.jsxs("h3",{className:"card-title",children:[a.jsx(Bt,{className:"card-icon"}),"Order History (",_.length,")"]})}),a.jsx("div",{className:"card-content",children:a.jsxs("div",{className:"orders-table",children:[a.jsxs("div",{className:"table-header",children:[a.jsx("div",{className:"col-order",children:"Order Details"}),a.jsx("div",{className:"col-type",children:"Type"}),a.jsx("div",{className:"col-quantity",children:"Quantity"}),a.jsx("div",{className:"col-price",children:"Price"}),a.jsx("div",{className:"col-total",children:"Total"}),a.jsx("div",{className:"col-status",children:"Status"}),a.jsx("div",{className:"col-time",children:"Time"}),a.jsx("div",{className:"col-actions",children:"Actions"})]}),a.jsx("div",{className:"table-body",children:_.map((I,O)=>{const z=R(I.timestamp);return a.jsxs($.div,{className:"table-row",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:O*.05},children:[a.jsx("div",{className:"col-order",children:a.jsxs("div",{className:"order-info",children:[a.jsxs("div",{className:"order-id",children:["#",I.id]}),a.jsx("div",{className:"stock-symbol",children:I.symbol}),a.jsx("div",{className:"stock-name",children:I.name})]})}),a.jsxs("div",{className:"col-type",children:[a.jsxs("div",{className:`order-type ${I.type.toLowerCase()}`,children:[I.type==="BUY"?a.jsx(Xe,{size:14}):a.jsx(_t,{size:14}),I.type]}),a.jsx("div",{className:"order-subtype",children:I.orderType})]}),a.jsx("div",{className:"col-quantity",children:I.quantity}),a.jsx("div",{className:"col-price",children:a.jsxs("div",{className:"price-info",children:[a.jsx("div",{className:"order-price",children:P(I.price)}),I.executedPrice&&I.executedPrice!==I.price&&a.jsxs("div",{className:"executed-price",children:["Exec: ",P(I.executedPrice)]})]})}),a.jsxs("div",{className:"col-total",children:[a.jsx("div",{className:"total-amount",children:P(I.total)}),I.fees>0&&a.jsxs("div",{className:"fees",children:["Fees: ",P(I.fees)]})]}),a.jsx("div",{className:"col-status",children:a.jsxs("div",{className:"status-container",children:[E(I.status),a.jsx("span",{className:`status-text ${I.status}`,style:{color:L(I.status)},children:I.status.charAt(0).toUpperCase()+I.status.slice(1)})]})}),a.jsx("div",{className:"col-time",children:a.jsxs("div",{className:"time-info",children:[a.jsx("div",{className:"order-date",children:z.date}),a.jsx("div",{className:"order-time",children:z.time})]})}),a.jsx("div",{className:"col-actions",children:a.jsxs("div",{className:"action-buttons",children:[I.status==="pending"&&a.jsx("button",{className:"action-btn",title:"Edit Order",children:a.jsx(Gb,{size:14})}),I.status==="pending"&&a.jsx("button",{className:"action-btn cancel",title:"Cancel Order",children:a.jsx(uo,{size:14})}),a.jsx("button",{className:"action-btn",title:"More Options",children:a.jsx(RI,{size:14})})]})})]},I.id)})})]})})]})]})})},J5=({user:t,theme:e})=>{const[n,s]=b.useState("all"),[r,i]=b.useState(!1),[o,l]=b.useState([]),{query:c,setQuery:u,results:h,recentSearches:d,showHistory:f,handleHistoryClick:x,loading:p,clearSearch:y,hasResults:w}=zN({enableSuggestions:!1,enableHistory:!0,limit:30,debounceMs:500}),m=[{id:"all",name:"All News",count:45},{id:"market",name:"Market",count:12},{id:"stocks",name:"Stocks",count:8},{id:"economy",name:"Economy",count:10},{id:"policy",name:"Policy",count:6},{id:"earnings",name:"Earnings",count:9}],g=[{id:1,title:"Sensex Surges 500 Points as Banking Stocks Rally on RBI Policy Optimism",summary:"Indian benchmark indices closed higher on Tuesday as banking and financial stocks led the rally following positive sentiment around the upcoming RBI monetary policy meeting.",content:"The BSE Sensex gained 501.92 points to close at 65,953.48, while the NSE Nifty 50 advanced 145.30 points to end at 19,674.25. Banking stocks were the top performers with HDFC Bank, ICICI Bank, and Kotak Mahindra Bank leading the gains.",category:"market",source:"Economic Times",author:"Rajesh Kumar",publishedAt:"2024-01-15T10:30:00Z",imageUrl:"https://images.unsplash.com/photo-1611974789855-9c2a0a7236a3?w=400",readTime:"3 min read",tags:["Sensex","Banking","RBI","Market Rally"],isBookmarked:!1},{id:2,title:"Reliance Industries Reports Strong Q3 Results, Beats Estimates",summary:"Reliance Industries Ltd reported better-than-expected quarterly results driven by strong performance in its retail and digital services segments.",content:"The oil-to-telecom conglomerate posted a net profit of 18,549 crore for the quarter ended December 2023, up 8.5% year-on-year. Revenue from operations increased to 2.35 lakh crore.",category:"earnings",source:"Business Standard",author:"Priya Sharma",publishedAt:"2024-01-15T09:15:00Z",imageUrl:"https://images.unsplash.com/photo-1560472354-b33ff0c44a43?w=400",readTime:"4 min read",tags:["Reliance","Earnings","Q3 Results"],isBookmarked:!0},{id:3,title:"IT Stocks Under Pressure as US Fed Signals Hawkish Stance",summary:"Indian IT stocks declined in early trade as the US Federal Reserve indicated a more aggressive approach to interest rate hikes.",content:"TCS, Infosys, and Wipro were among the top losers as investors worried about the impact of higher interest rates on IT spending by US clients. The Nifty IT index fell 2.3%.",category:"stocks",source:"Mint",author:"Amit Verma",publishedAt:"2024-01-15T08:45:00Z",imageUrl:"https://images.unsplash.com/photo-1551288049-bebda4e38f71?w=400",readTime:"2 min read",tags:["IT Stocks","Fed Policy","TCS","Infosys"],isBookmarked:!1},{id:4,title:"Government Announces New PLI Scheme for Electronics Manufacturing",summary:"The government unveiled a new Production Linked Incentive scheme worth 76,000 crore to boost electronics manufacturing in India.",content:"The scheme aims to attract global electronics manufacturers and create employment opportunities. Companies like Apple, Samsung, and Foxconn are expected to benefit from this initiative.",category:"policy",source:"Financial Express",author:"Neha Gupta",publishedAt:"2024-01-15T07:30:00Z",imageUrl:"https://images.unsplash.com/photo-1518709268805-4e9042af2176?w=400",readTime:"5 min read",tags:["PLI Scheme","Electronics","Manufacturing","Policy"],isBookmarked:!1},{id:5,title:"Crude Oil Prices Rise on Middle East Tensions, OMCs in Focus",summary:"Oil marketing companies gained as crude oil prices surged due to escalating tensions in the Middle East region.",content:"Brent crude futures rose 2.5% to $85.40 per barrel. Indian Oil Corporation, BPCL, and HPCL were among the top gainers in the energy sector.",category:"market",source:"Reuters",author:"Global Desk",publishedAt:"2024-01-15T06:00:00Z",imageUrl:"https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=400",readTime:"3 min read",tags:["Crude Oil","OMCs","Energy Sector"],isBookmarked:!1},{id:6,title:"FII Inflows Continue as India Remains Attractive Investment Destination",summary:"Foreign institutional investors pumped in 12,500 crore into Indian equities last week, showing continued confidence in the market.",content:"The sustained FII inflows reflect positive sentiment towards Indian markets amid global uncertainties. Experts believe India's growth prospects remain strong.",category:"economy",source:"Moneycontrol",author:"Investment Desk",publishedAt:"2024-01-14T16:20:00Z",imageUrl:"https://images.unsplash.com/photo-1559526324-4b87b5e36e44?w=400",readTime:"4 min read",tags:["FII","Investment","Market Flows"],isBookmarked:!0}],S=async()=>{i(!0),await new Promise(P=>setTimeout(P,1500)),i(!1)},N=P=>{l(R=>R.includes(P)?R.filter(_=>_!==P):[...R,P])},C=P=>{navigator.share?navigator.share({title:P.title,text:P.summary,url:window.location.href}):navigator.clipboard.writeText(window.location.href)},E=P=>{const R=new Date,_=new Date(P),I=Math.floor((R-_)/(1e3*60*60));return I<1?"Just now":I<24?`${I}h ago`:`${Math.floor(I/24)}d ago`},L=g.filter(P=>{const R=P.title.toLowerCase().includes(c.toLowerCase())||P.summary.toLowerCase().includes(c.toLowerCase())||P.tags.some(I=>I.toLowerCase().includes(c.toLowerCase())),_=n==="all"||P.category===n;return R&&_});return a.jsx("div",{className:"news-page",children:a.jsxs("div",{className:"news-container",children:[a.jsx("div",{className:"page-header",children:a.jsxs("div",{className:"page-header-main",children:[a.jsxs("div",{className:"page-header-left",children:[a.jsxs("h1",{className:"page-title",children:[a.jsx(Su,{className:"title-icon"}),a.jsx("span",{className:"title-text",children:"Market News"})]}),a.jsx("p",{className:"page-subtitle",children:"Stay updated with the latest market news and analysis from trusted sources"})]}),a.jsxs("div",{className:"page-actions",children:[a.jsxs("button",{className:"btn-premium btn-secondary",onClick:S,disabled:r,children:[a.jsx(jt,{size:16,className:r?"animate-spin":""}),"Refresh"]}),a.jsxs("button",{className:"btn-premium btn-primary",children:[a.jsx(Lc,{size:16}),"Bookmarks"]})]})]})}),a.jsxs($.div,{className:"news-controls",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},children:[a.jsxs("div",{className:"controls-left",children:[a.jsx("div",{className:"search-container",children:a.jsx(Ro,{placeholder:"Search news articles...",value:c,onChange:u,onClear:y,recentSearches:d,onHistoryClick:x,showHistory:f,loading:p,size:"md",showSuggestions:!1,enableHistory:!0,className:"news-search-input"})}),a.jsx("div",{className:"category-filter",children:m.map(P=>a.jsxs("button",{className:`category-btn ${n===P.id?"active":""}`,onClick:()=>s(P.id),children:[P.name,a.jsx("span",{className:"category-count",children:P.count})]},P.id))})]}),a.jsx("div",{className:"controls-right",children:a.jsxs("button",{className:"btn-premium btn-ghost",children:[a.jsx(wu,{size:16}),"Filter"]})})]}),a.jsx($.div,{className:"news-grid",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:L.map((P,R)=>a.jsxs($.article,{className:"news-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:R*.1},children:[a.jsxs("div",{className:"news-image",children:[a.jsx("img",{src:P.imageUrl,alt:P.title}),a.jsx("div",{className:"news-category",children:a.jsx("span",{className:`category-tag ${P.category}`,children:P.category.toUpperCase()})})]}),a.jsxs("div",{className:"news-content",children:[a.jsxs("div",{className:"news-meta",children:[a.jsxs("div",{className:"meta-left",children:[a.jsxs("span",{className:"news-source",children:[a.jsx(ls,{size:12}),P.source]}),a.jsxs("span",{className:"news-time",children:[a.jsx(nn,{size:12}),E(P.publishedAt)]})]}),a.jsx("div",{className:"meta-right",children:a.jsx("span",{className:"read-time",children:P.readTime})})]}),a.jsx("h3",{className:"news-title",children:P.title}),a.jsx("p",{className:"news-summary",children:P.summary}),a.jsx("div",{className:"news-tags",children:P.tags.slice(0,3).map(_=>a.jsxs("span",{className:"news-tag",children:[a.jsx(BI,{size:10}),_]},_))}),a.jsxs("div",{className:"news-actions",children:[a.jsx("div",{className:"actions-left",children:a.jsxs("button",{className:"news-author",children:["By ",P.author]})}),a.jsxs("div",{className:"actions-right",children:[a.jsx("button",{className:`action-btn ${o.includes(P.id)||P.isBookmarked?"bookmarked":""}`,onClick:()=>N(P.id),title:"Bookmark",children:a.jsx(Lc,{size:16})}),a.jsx("button",{className:"action-btn",onClick:()=>C(P),title:"Share",children:a.jsx(OI,{size:16})}),a.jsx("button",{className:"action-btn",title:"Read Full Article",children:a.jsx(Hm,{size:16})})]})]})]})]},P.id))}),a.jsx($.div,{className:"load-more-section",initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.4},children:a.jsx("button",{className:"btn-premium btn-secondary btn-lg",children:"Load More Articles"})})]})})};var dj={exports:{}};/*!
 * Pusher JavaScript Library v8.4.0
 * https://pusher.com/
 *
 * Copyright 2020, Pusher
 * Released under the MIT licence.
 */(function(t,e){(function(s,r){t.exports=r()})(window,function(){return function(n){var s={};function r(i){if(s[i])return s[i].exports;var o=s[i]={i,l:!1,exports:{}};return n[i].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=n,r.c=s,r.d=function(i,o,l){r.o(i,o)||Object.defineProperty(i,o,{enumerable:!0,get:l})},r.r=function(i){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},r.t=function(i,o){if(o&1&&(i=r(i)),o&8||o&4&&typeof i=="object"&&i&&i.__esModule)return i;var l=Object.create(null);if(r.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:i}),o&2&&typeof i!="string")for(var c in i)r.d(l,c,(function(u){return i[u]}).bind(null,c));return l},r.n=function(i){var o=i&&i.__esModule?function(){return i.default}:function(){return i};return r.d(o,"a",o),o},r.o=function(i,o){return Object.prototype.hasOwnProperty.call(i,o)},r.p="",r(r.s=2)}([function(n,s,r){var i=this&&this.__extends||function(){var y=function(w,m){return y=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,S){g.__proto__=S}||function(g,S){for(var N in S)S.hasOwnProperty(N)&&(g[N]=S[N])},y(w,m)};return function(w,m){y(w,m);function g(){this.constructor=w}w.prototype=m===null?Object.create(m):(g.prototype=m.prototype,new g)}}();Object.defineProperty(s,"__esModule",{value:!0});var o=256,l=function(){function y(w){w===void 0&&(w="="),this._paddingCharacter=w}return y.prototype.encodedLength=function(w){return this._paddingCharacter?(w+2)/3*4|0:(w*8+5)/6|0},y.prototype.encode=function(w){for(var m="",g=0;g<w.length-2;g+=3){var S=w[g]<<16|w[g+1]<<8|w[g+2];m+=this._encodeByte(S>>>3*6&63),m+=this._encodeByte(S>>>2*6&63),m+=this._encodeByte(S>>>1*6&63),m+=this._encodeByte(S>>>0*6&63)}var N=w.length-g;if(N>0){var S=w[g]<<16|(N===2?w[g+1]<<8:0);m+=this._encodeByte(S>>>3*6&63),m+=this._encodeByte(S>>>2*6&63),N===2?m+=this._encodeByte(S>>>1*6&63):m+=this._paddingCharacter||"",m+=this._paddingCharacter||""}return m},y.prototype.maxDecodedLength=function(w){return this._paddingCharacter?w/4*3|0:(w*6+7)/8|0},y.prototype.decodedLength=function(w){return this.maxDecodedLength(w.length-this._getPaddingLength(w))},y.prototype.decode=function(w){if(w.length===0)return new Uint8Array(0);for(var m=this._getPaddingLength(w),g=w.length-m,S=new Uint8Array(this.maxDecodedLength(g)),N=0,C=0,E=0,L=0,P=0,R=0,_=0;C<g-4;C+=4)L=this._decodeChar(w.charCodeAt(C+0)),P=this._decodeChar(w.charCodeAt(C+1)),R=this._decodeChar(w.charCodeAt(C+2)),_=this._decodeChar(w.charCodeAt(C+3)),S[N++]=L<<2|P>>>4,S[N++]=P<<4|R>>>2,S[N++]=R<<6|_,E|=L&o,E|=P&o,E|=R&o,E|=_&o;if(C<g-1&&(L=this._decodeChar(w.charCodeAt(C)),P=this._decodeChar(w.charCodeAt(C+1)),S[N++]=L<<2|P>>>4,E|=L&o,E|=P&o),C<g-2&&(R=this._decodeChar(w.charCodeAt(C+2)),S[N++]=P<<4|R>>>2,E|=R&o),C<g-3&&(_=this._decodeChar(w.charCodeAt(C+3)),S[N++]=R<<6|_,E|=_&o),E!==0)throw new Error("Base64Coder: incorrect characters for decoding");return S},y.prototype._encodeByte=function(w){var m=w;return m+=65,m+=25-w>>>8&6,m+=51-w>>>8&-75,m+=61-w>>>8&-15,m+=62-w>>>8&3,String.fromCharCode(m)},y.prototype._decodeChar=function(w){var m=o;return m+=(42-w&w-44)>>>8&-o+w-43+62,m+=(46-w&w-48)>>>8&-o+w-47+63,m+=(47-w&w-58)>>>8&-o+w-48+52,m+=(64-w&w-91)>>>8&-o+w-65+0,m+=(96-w&w-123)>>>8&-o+w-97+26,m},y.prototype._getPaddingLength=function(w){var m=0;if(this._paddingCharacter){for(var g=w.length-1;g>=0&&w[g]===this._paddingCharacter;g--)m++;if(w.length<4||m>2)throw new Error("Base64Coder: incorrect padding")}return m},y}();s.Coder=l;var c=new l;function u(y){return c.encode(y)}s.encode=u;function h(y){return c.decode(y)}s.decode=h;var d=function(y){i(w,y);function w(){return y!==null&&y.apply(this,arguments)||this}return w.prototype._encodeByte=function(m){var g=m;return g+=65,g+=25-m>>>8&6,g+=51-m>>>8&-75,g+=61-m>>>8&-13,g+=62-m>>>8&49,String.fromCharCode(g)},w.prototype._decodeChar=function(m){var g=o;return g+=(44-m&m-46)>>>8&-o+m-45+62,g+=(94-m&m-96)>>>8&-o+m-95+63,g+=(47-m&m-58)>>>8&-o+m-48+52,g+=(64-m&m-91)>>>8&-o+m-65+0,g+=(96-m&m-123)>>>8&-o+m-97+26,g},w}(l);s.URLSafeCoder=d;var f=new d;function x(y){return f.encode(y)}s.encodeURLSafe=x;function p(y){return f.decode(y)}s.decodeURLSafe=p,s.encodedLength=function(y){return c.encodedLength(y)},s.maxDecodedLength=function(y){return c.maxDecodedLength(y)},s.decodedLength=function(y){return c.decodedLength(y)}},function(n,s,r){Object.defineProperty(s,"__esModule",{value:!0});var i="utf8: invalid string",o="utf8: invalid source encoding";function l(h){for(var d=new Uint8Array(c(h)),f=0,x=0;x<h.length;x++){var p=h.charCodeAt(x);p<128?d[f++]=p:p<2048?(d[f++]=192|p>>6,d[f++]=128|p&63):p<55296?(d[f++]=224|p>>12,d[f++]=128|p>>6&63,d[f++]=128|p&63):(x++,p=(p&1023)<<10,p|=h.charCodeAt(x)&1023,p+=65536,d[f++]=240|p>>18,d[f++]=128|p>>12&63,d[f++]=128|p>>6&63,d[f++]=128|p&63)}return d}s.encode=l;function c(h){for(var d=0,f=0;f<h.length;f++){var x=h.charCodeAt(f);if(x<128)d+=1;else if(x<2048)d+=2;else if(x<55296)d+=3;else if(x<=57343){if(f>=h.length-1)throw new Error(i);f++,d+=4}else throw new Error(i)}return d}s.encodedLength=c;function u(h){for(var d=[],f=0;f<h.length;f++){var x=h[f];if(x&128){var p=void 0;if(x<224){if(f>=h.length)throw new Error(o);var y=h[++f];if((y&192)!==128)throw new Error(o);x=(x&31)<<6|y&63,p=128}else if(x<240){if(f>=h.length-1)throw new Error(o);var y=h[++f],w=h[++f];if((y&192)!==128||(w&192)!==128)throw new Error(o);x=(x&15)<<12|(y&63)<<6|w&63,p=2048}else if(x<248){if(f>=h.length-2)throw new Error(o);var y=h[++f],w=h[++f],m=h[++f];if((y&192)!==128||(w&192)!==128||(m&192)!==128)throw new Error(o);x=(x&15)<<18|(y&63)<<12|(w&63)<<6|m&63,p=65536}else throw new Error(o);if(x<p||x>=55296&&x<=57343)throw new Error(o);if(x>=65536){if(x>1114111)throw new Error(o);x-=65536,d.push(String.fromCharCode(55296|x>>10)),x=56320|x&1023}}d.push(String.fromCharCode(x))}return d.join("")}s.decode=u},function(n,s,r){n.exports=r(3).default},function(n,s,r){r.r(s);class i{constructor(v,j){this.lastId=0,this.prefix=v,this.name=j}create(v){this.lastId++;var j=this.lastId,T=this.prefix+j,M=this.name+"["+j+"]",B=!1,K=function(){B||(v.apply(null,arguments),B=!0)};return this[j]=K,{number:j,id:T,name:M,callback:K}}remove(v){delete this[v.number]}}var o=new i("_pusher_script_","Pusher.ScriptReceivers"),l={VERSION:"8.4.0",PROTOCOL:7,wsPort:80,wssPort:443,wsPath:"",httpHost:"sockjs.pusher.com",httpPort:80,httpsPort:443,httpPath:"/pusher",stats_host:"stats.pusher.com",authEndpoint:"/pusher/auth",authTransport:"ajax",activityTimeout:12e4,pongTimeout:3e4,unavailableTimeout:1e4,userAuthentication:{endpoint:"/pusher/user-auth",transport:"ajax"},channelAuthorization:{endpoint:"/pusher/auth",transport:"ajax"},cdn_http:"http://js.pusher.com",cdn_https:"https://js.pusher.com",dependency_suffix:""},c=l;class u{constructor(v){this.options=v,this.receivers=v.receivers||o,this.loading={}}load(v,j,T){var M=this;if(M.loading[v]&&M.loading[v].length>0)M.loading[v].push(T);else{M.loading[v]=[T];var B=de.createScriptRequest(M.getPath(v,j)),K=M.receivers.create(function(re){if(M.receivers.remove(K),M.loading[v]){var he=M.loading[v];delete M.loading[v];for(var be=function(nt){nt||B.cleanup()},Pe=0;Pe<he.length;Pe++)he[Pe](re,be)}});B.send(K)}}getRoot(v){var j,T=de.getDocument().location.protocol;return v&&v.useTLS||T==="https:"?j=this.options.cdn_https:j=this.options.cdn_http,j.replace(/\/*$/,"")+"/"+this.options.version}getPath(v,j){return this.getRoot(j)+"/"+v+this.options.suffix+".js"}}var h=new i("_pusher_dependencies","Pusher.DependenciesReceivers"),d=new u({cdn_http:c.cdn_http,cdn_https:c.cdn_https,version:c.VERSION,suffix:c.dependency_suffix,receivers:h});const f={baseUrl:"https://pusher.com",urls:{authenticationEndpoint:{path:"/docs/channels/server_api/authenticating_users"},authorizationEndpoint:{path:"/docs/channels/server_api/authorizing-users/"},javascriptQuickStart:{path:"/docs/javascript_quick_start"},triggeringClientEvents:{path:"/docs/client_api_guide/client_events#trigger-events"},encryptedChannelSupport:{fullUrl:"https://github.com/pusher/pusher-js/tree/cc491015371a4bde5743d1c87a0fbac0feb53195#encrypted-channel-support"}}};var p={buildLogSuffix:function(k){const v="See:",j=f.urls[k];if(!j)return"";let T;return j.fullUrl?T=j.fullUrl:j.path&&(T=f.baseUrl+j.path),T?`${v} ${T}`:""}},y;(function(k){k.UserAuthentication="user-authentication",k.ChannelAuthorization="channel-authorization"})(y||(y={}));class w extends Error{constructor(v){super(v),Object.setPrototypeOf(this,new.target.prototype)}}class m extends Error{constructor(v){super(v),Object.setPrototypeOf(this,new.target.prototype)}}class g extends Error{constructor(v){super(v),Object.setPrototypeOf(this,new.target.prototype)}}class S extends Error{constructor(v){super(v),Object.setPrototypeOf(this,new.target.prototype)}}class N extends Error{constructor(v){super(v),Object.setPrototypeOf(this,new.target.prototype)}}class C extends Error{constructor(v){super(v),Object.setPrototypeOf(this,new.target.prototype)}}class E extends Error{constructor(v){super(v),Object.setPrototypeOf(this,new.target.prototype)}}class L extends Error{constructor(v){super(v),Object.setPrototypeOf(this,new.target.prototype)}}class P extends Error{constructor(v,j){super(j),this.status=v,Object.setPrototypeOf(this,new.target.prototype)}}var _=function(k,v,j,T,M){const B=de.createXHR();B.open("POST",j.endpoint,!0),B.setRequestHeader("Content-Type","application/x-www-form-urlencoded");for(var K in j.headers)B.setRequestHeader(K,j.headers[K]);if(j.headersProvider!=null){let re=j.headersProvider();for(var K in re)B.setRequestHeader(K,re[K])}return B.onreadystatechange=function(){if(B.readyState===4)if(B.status===200){let re,he=!1;try{re=JSON.parse(B.responseText),he=!0}catch{M(new P(200,`JSON returned from ${T.toString()} endpoint was invalid, yet status code was 200. Data was: ${B.responseText}`),null)}he&&M(null,re)}else{let re="";switch(T){case y.UserAuthentication:re=p.buildLogSuffix("authenticationEndpoint");break;case y.ChannelAuthorization:re=`Clients must be authorized to join private or presence channels. ${p.buildLogSuffix("authorizationEndpoint")}`;break}M(new P(B.status,`Unable to retrieve auth string from ${T.toString()} endpoint - received status: ${B.status} from ${j.endpoint}. ${re}`),null)}},B.send(v),B};function I(k){return Q(W(k))}var O=String.fromCharCode,z="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",F=function(k){var v=k.charCodeAt(0);return v<128?k:v<2048?O(192|v>>>6)+O(128|v&63):O(224|v>>>12&15)+O(128|v>>>6&63)+O(128|v&63)},W=function(k){return k.replace(/[^\x00-\x7F]/g,F)},A=function(k){var v=[0,2,1][k.length%3],j=k.charCodeAt(0)<<16|(k.length>1?k.charCodeAt(1):0)<<8|(k.length>2?k.charCodeAt(2):0),T=[z.charAt(j>>>18),z.charAt(j>>>12&63),v>=2?"=":z.charAt(j>>>6&63),v>=1?"=":z.charAt(j&63)];return T.join("")},Q=window.btoa||function(k){return k.replace(/[\s\S]{1,3}/g,A)};class V{constructor(v,j,T,M){this.clear=j,this.timer=v(()=>{this.timer&&(this.timer=M(this.timer))},T)}isRunning(){return this.timer!==null}ensureAborted(){this.timer&&(this.clear(this.timer),this.timer=null)}}var J=V;function te(k){window.clearTimeout(k)}function ie(k){window.clearInterval(k)}class ce extends J{constructor(v,j){super(setTimeout,te,v,function(T){return j(),null})}}class _e extends J{constructor(v,j){super(setInterval,ie,v,function(T){return j(),T})}}var ee={now(){return Date.now?Date.now():new Date().valueOf()},defer(k){return new ce(0,k)},method(k,...v){var j=Array.prototype.slice.call(arguments,1);return function(T){return T[k].apply(T,j.concat(arguments))}}},U=ee;function H(k,...v){for(var j=0;j<v.length;j++){var T=v[j];for(var M in T)T[M]&&T[M].constructor&&T[M].constructor===Object?k[M]=H(k[M]||{},T[M]):k[M]=T[M]}return k}function ae(){for(var k=["Pusher"],v=0;v<arguments.length;v++)typeof arguments[v]=="string"?k.push(arguments[v]):k.push(qr(arguments[v]));return k.join(" : ")}function Ce(k,v){var j=Array.prototype.indexOf;if(k===null)return-1;if(j&&k.indexOf===j)return k.indexOf(v);for(var T=0,M=k.length;T<M;T++)if(k[T]===v)return T;return-1}function xe(k,v){for(var j in k)Object.prototype.hasOwnProperty.call(k,j)&&v(k[j],j,k)}function me(k){var v=[];return xe(k,function(j,T){v.push(T)}),v}function ke(k){var v=[];return xe(k,function(j){v.push(j)}),v}function oe(k,v,j){for(var T=0;T<k.length;T++)v.call(j||window,k[T],T,k)}function qt(k,v){for(var j=[],T=0;T<k.length;T++)j.push(v(k[T],T,k,j));return j}function Gt(k,v){var j={};return xe(k,function(T,M){j[M]=v(T)}),j}function Yr(k,v){v=v||function(M){return!!M};for(var j=[],T=0;T<k.length;T++)v(k[T],T,k,j)&&j.push(k[T]);return j}function Z(k,v){var j={};return xe(k,function(T,M){(v&&v(T,M,k,j)||T)&&(j[M]=T)}),j}function ge(k){var v=[];return xe(k,function(j,T){v.push([T,j])}),v}function Se(k,v){for(var j=0;j<k.length;j++)if(v(k[j],j,k))return!0;return!1}function qe(k,v){for(var j=0;j<k.length;j++)if(!v(k[j],j,k))return!1;return!0}function pe(k){return Gt(k,function(v){return typeof v=="object"&&(v=qr(v)),encodeURIComponent(I(v.toString()))})}function _n(k){var v=Z(k,function(T){return T!==void 0}),j=qt(ge(pe(v)),U.method("join","=")).join("&");return j}function ps(k){var v=[],j=[];return function T(M,B){var K,re,he;switch(typeof M){case"object":if(!M)return null;for(K=0;K<v.length;K+=1)if(v[K]===M)return{$ref:j[K]};if(v.push(M),j.push(B),Object.prototype.toString.apply(M)==="[object Array]")for(he=[],K=0;K<M.length;K+=1)he[K]=T(M[K],B+"["+K+"]");else{he={};for(re in M)Object.prototype.hasOwnProperty.call(M,re)&&(he[re]=T(M[re],B+"["+JSON.stringify(re)+"]"))}return he;case"number":case"string":case"boolean":return M}}(k,"$")}function qr(k){try{return JSON.stringify(k)}catch{return JSON.stringify(ps(k))}}class Gr{constructor(){this.globalLog=v=>{window.console&&window.console.log&&window.console.log(v)}}debug(...v){this.log(this.globalLog,v)}warn(...v){this.log(this.globalLogWarn,v)}error(...v){this.log(this.globalLogError,v)}globalLogWarn(v){window.console&&window.console.warn?window.console.warn(v):this.globalLog(v)}globalLogError(v){window.console&&window.console.error?window.console.error(v):this.globalLogWarn(v)}log(v,...j){var T=ae.apply(this,arguments);th.log?th.log(T):th.logToConsole&&v.bind(this)(T)}}var Be=new Gr,Io=function(k,v,j,T,M){(j.headers!==void 0||j.headersProvider!=null)&&Be.warn(`To send headers with the ${T.toString()} request, you must use AJAX, rather than JSONP.`);var B=k.nextAuthCallbackID.toString();k.nextAuthCallbackID++;var K=k.getDocument(),re=K.createElement("script");k.auth_callbacks[B]=function(Pe){M(null,Pe)};var he="Pusher.auth_callbacks['"+B+"']";re.src=j.endpoint+"?callback="+encodeURIComponent(he)+"&"+v;var be=K.getElementsByTagName("head")[0]||K.documentElement;be.insertBefore(re,be.firstChild)},Ao=Io;class q{constructor(v){this.src=v}send(v){var j=this,T="Error loading "+j.src;j.script=document.createElement("script"),j.script.id=v.id,j.script.src=j.src,j.script.type="text/javascript",j.script.charset="UTF-8",j.script.addEventListener?(j.script.onerror=function(){v.callback(T)},j.script.onload=function(){v.callback(null)}):j.script.onreadystatechange=function(){(j.script.readyState==="loaded"||j.script.readyState==="complete")&&v.callback(null)},j.script.async===void 0&&document.attachEvent&&/opera/i.test(navigator.userAgent)?(j.errorScript=document.createElement("script"),j.errorScript.id=v.id+"_error",j.errorScript.text=v.name+"('"+T+"');",j.script.async=j.errorScript.async=!1):j.script.async=!0;var M=document.getElementsByTagName("head")[0];M.insertBefore(j.script,M.firstChild),j.errorScript&&M.insertBefore(j.errorScript,j.script.nextSibling)}cleanup(){this.script&&(this.script.onload=this.script.onerror=null,this.script.onreadystatechange=null),this.script&&this.script.parentNode&&this.script.parentNode.removeChild(this.script),this.errorScript&&this.errorScript.parentNode&&this.errorScript.parentNode.removeChild(this.errorScript),this.script=null,this.errorScript=null}}class Ge{constructor(v,j){this.url=v,this.data=j}send(v){if(!this.request){var j=_n(this.data),T=this.url+"/"+v.number+"?"+j;this.request=de.createScriptRequest(T),this.request.send(v)}}cleanup(){this.request&&this.request.cleanup()}}var Qe=function(k,v){return function(j,T){var M="http"+(v?"s":"")+"://",B=M+(k.host||k.options.host)+k.options.path,K=de.createJSONPRequest(B,j),re=de.ScriptReceivers.create(function(he,be){o.remove(re),K.cleanup(),be&&be.host&&(k.host=be.host),T&&T(he,be)});K.send(re)}},er={name:"jsonp",getAgent:Qe},Qi=er;function Hu(k,v,j){var T=k+(v.useTLS?"s":""),M=v.useTLS?v.hostTLS:v.hostNonTLS;return T+"://"+M+j}function Yu(k,v){var j="/app/"+k,T="?protocol="+c.PROTOCOL+"&client=js&version="+c.VERSION+(v?"&"+v:"");return j+T}var Gj={getInitial:function(k,v){var j=(v.httpPath||"")+Yu(k,"flash=false");return Hu("ws",v,j)}},Qj={getInitial:function(k,v){var j=(v.httpPath||"/pusher")+Yu(k);return Hu("http",v,j)}},Kj={getInitial:function(k,v){return Hu("http",v,v.httpPath||"/pusher")},getPath:function(k,v){return Yu(k)}};class Xj{constructor(){this._callbacks={}}get(v){return this._callbacks[qu(v)]}add(v,j,T){var M=qu(v);this._callbacks[M]=this._callbacks[M]||[],this._callbacks[M].push({fn:j,context:T})}remove(v,j,T){if(!v&&!j&&!T){this._callbacks={};return}var M=v?[qu(v)]:me(this._callbacks);j||T?this.removeCallback(M,j,T):this.removeAllCallbacks(M)}removeCallback(v,j,T){oe(v,function(M){this._callbacks[M]=Yr(this._callbacks[M]||[],function(B){return j&&j!==B.fn||T&&T!==B.context}),this._callbacks[M].length===0&&delete this._callbacks[M]},this)}removeAllCallbacks(v){oe(v,function(j){delete this._callbacks[j]},this)}}function qu(k){return"_"+k}class Un{constructor(v){this.callbacks=new Xj,this.global_callbacks=[],this.failThrough=v}bind(v,j,T){return this.callbacks.add(v,j,T),this}bind_global(v){return this.global_callbacks.push(v),this}unbind(v,j,T){return this.callbacks.remove(v,j,T),this}unbind_global(v){return v?(this.global_callbacks=Yr(this.global_callbacks||[],j=>j!==v),this):(this.global_callbacks=[],this)}unbind_all(){return this.unbind(),this.unbind_global(),this}emit(v,j,T){for(var M=0;M<this.global_callbacks.length;M++)this.global_callbacks[M](v,j);var B=this.callbacks.get(v),K=[];if(T?K.push(j,T):j&&K.push(j),B&&B.length>0)for(var M=0;M<B.length;M++)B[M].fn.apply(B[M].context||window,K);else this.failThrough&&this.failThrough(v,j);return this}}class Jj extends Un{constructor(v,j,T,M,B){super(),this.initialize=de.transportConnectionInitializer,this.hooks=v,this.name=j,this.priority=T,this.key=M,this.options=B,this.state="new",this.timeline=B.timeline,this.activityTimeout=B.activityTimeout,this.id=this.timeline.generateUniqueID()}handlesActivityChecks(){return!!this.hooks.handlesActivityChecks}supportsPing(){return!!this.hooks.supportsPing}connect(){if(this.socket||this.state!=="initialized")return!1;var v=this.hooks.urls.getInitial(this.key,this.options);try{this.socket=this.hooks.getSocket(v,this.options)}catch(j){return U.defer(()=>{this.onError(j),this.changeState("closed")}),!1}return this.bindListeners(),Be.debug("Connecting",{transport:this.name,url:v}),this.changeState("connecting"),!0}close(){return this.socket?(this.socket.close(),!0):!1}send(v){return this.state==="open"?(U.defer(()=>{this.socket&&this.socket.send(v)}),!0):!1}ping(){this.state==="open"&&this.supportsPing()&&this.socket.ping()}onOpen(){this.hooks.beforeOpen&&this.hooks.beforeOpen(this.socket,this.hooks.urls.getPath(this.key,this.options)),this.changeState("open"),this.socket.onopen=void 0}onError(v){this.emit("error",{type:"WebSocketError",error:v}),this.timeline.error(this.buildTimelineMessage({error:v.toString()}))}onClose(v){v?this.changeState("closed",{code:v.code,reason:v.reason,wasClean:v.wasClean}):this.changeState("closed"),this.unbindListeners(),this.socket=void 0}onMessage(v){this.emit("message",v)}onActivity(){this.emit("activity")}bindListeners(){this.socket.onopen=()=>{this.onOpen()},this.socket.onerror=v=>{this.onError(v)},this.socket.onclose=v=>{this.onClose(v)},this.socket.onmessage=v=>{this.onMessage(v)},this.supportsPing()&&(this.socket.onactivity=()=>{this.onActivity()})}unbindListeners(){this.socket&&(this.socket.onopen=void 0,this.socket.onerror=void 0,this.socket.onclose=void 0,this.socket.onmessage=void 0,this.supportsPing()&&(this.socket.onactivity=void 0))}changeState(v,j){this.state=v,this.timeline.info(this.buildTimelineMessage({state:v,params:j})),this.emit(v,j)}buildTimelineMessage(v){return H({cid:this.id},v)}}class Qr{constructor(v){this.hooks=v}isSupported(v){return this.hooks.isSupported(v)}createConnection(v,j,T,M){return new Jj(this.hooks,v,j,T,M)}}var Zj=new Qr({urls:Gj,handlesActivityChecks:!1,supportsPing:!1,isInitialized:function(){return!!de.getWebSocketAPI()},isSupported:function(){return!!de.getWebSocketAPI()},getSocket:function(k){return de.createWebSocket(k)}}),xg={urls:Qj,handlesActivityChecks:!1,supportsPing:!0,isInitialized:function(){return!0}},wg=H({getSocket:function(k){return de.HTTPFactory.createStreamingSocket(k)}},xg),Sg=H({getSocket:function(k){return de.HTTPFactory.createPollingSocket(k)}},xg),bg={isSupported:function(){return de.isXHRSupported()}},eC=new Qr(H({},wg,bg)),tC=new Qr(H({},Sg,bg)),nC={ws:Zj,xhr_streaming:eC,xhr_polling:tC},Oo=nC,sC=new Qr({file:"sockjs",urls:Kj,handlesActivityChecks:!0,supportsPing:!1,isSupported:function(){return!0},isInitialized:function(){return window.SockJS!==void 0},getSocket:function(k,v){return new window.SockJS(k,null,{js_path:d.getPath("sockjs",{useTLS:v.useTLS}),ignore_null_origin:v.ignoreNullOrigin})},beforeOpen:function(k,v){k.send(JSON.stringify({path:v}))}}),Ng={isSupported:function(k){var v=de.isXDRSupported(k.useTLS);return v}},rC=new Qr(H({},wg,Ng)),iC=new Qr(H({},Sg,Ng));Oo.xdr_streaming=rC,Oo.xdr_polling=iC,Oo.sockjs=sC;var aC=Oo;class oC extends Un{constructor(){super();var v=this;window.addEventListener!==void 0&&(window.addEventListener("online",function(){v.emit("online")},!1),window.addEventListener("offline",function(){v.emit("offline")},!1))}isOnline(){return window.navigator.onLine===void 0?!0:window.navigator.onLine}}var lC=new oC;class cC{constructor(v,j,T){this.manager=v,this.transport=j,this.minPingDelay=T.minPingDelay,this.maxPingDelay=T.maxPingDelay,this.pingDelay=void 0}createConnection(v,j,T,M){M=H({},M,{activityTimeout:this.pingDelay});var B=this.transport.createConnection(v,j,T,M),K=null,re=function(){B.unbind("open",re),B.bind("closed",he),K=U.now()},he=be=>{if(B.unbind("closed",he),be.code===1002||be.code===1003)this.manager.reportDeath();else if(!be.wasClean&&K){var Pe=U.now()-K;Pe<2*this.maxPingDelay&&(this.manager.reportDeath(),this.pingDelay=Math.max(Pe/2,this.minPingDelay))}};return B.bind("open",re),B}isSupported(v){return this.manager.isAlive()&&this.transport.isSupported(v)}}const jg={decodeMessage:function(k){try{var v=JSON.parse(k.data),j=v.data;if(typeof j=="string")try{j=JSON.parse(v.data)}catch{}var T={event:v.event,channel:v.channel,data:j};return v.user_id&&(T.user_id=v.user_id),T}catch(M){throw{type:"MessageParseError",error:M,data:k.data}}},encodeMessage:function(k){return JSON.stringify(k)},processHandshake:function(k){var v=jg.decodeMessage(k);if(v.event==="pusher:connection_established"){if(!v.data.activity_timeout)throw"No activity timeout specified in handshake";return{action:"connected",id:v.data.socket_id,activityTimeout:v.data.activity_timeout*1e3}}else{if(v.event==="pusher:error")return{action:this.getCloseAction(v.data),error:this.getCloseError(v.data)};throw"Invalid handshake"}},getCloseAction:function(k){return k.code<4e3?k.code>=1002&&k.code<=1004?"backoff":null:k.code===4e3?"tls_only":k.code<4100?"refused":k.code<4200?"backoff":k.code<4300?"retry":"refused"},getCloseError:function(k){return k.code!==1e3&&k.code!==1001?{type:"PusherError",data:{code:k.code,message:k.reason||k.message}}:null}};var tr=jg;class uC extends Un{constructor(v,j){super(),this.id=v,this.transport=j,this.activityTimeout=j.activityTimeout,this.bindListeners()}handlesActivityChecks(){return this.transport.handlesActivityChecks()}send(v){return this.transport.send(v)}send_event(v,j,T){var M={event:v,data:j};return T&&(M.channel=T),Be.debug("Event sent",M),this.send(tr.encodeMessage(M))}ping(){this.transport.supportsPing()?this.transport.ping():this.send_event("pusher:ping",{})}close(){this.transport.close()}bindListeners(){var v={message:T=>{var M;try{M=tr.decodeMessage(T)}catch(B){this.emit("error",{type:"MessageParseError",error:B,data:T.data})}if(M!==void 0){switch(Be.debug("Event recd",M),M.event){case"pusher:error":this.emit("error",{type:"PusherError",data:M.data});break;case"pusher:ping":this.emit("ping");break;case"pusher:pong":this.emit("pong");break}this.emit("message",M)}},activity:()=>{this.emit("activity")},error:T=>{this.emit("error",T)},closed:T=>{j(),T&&T.code&&this.handleCloseEvent(T),this.transport=null,this.emit("closed")}},j=()=>{xe(v,(T,M)=>{this.transport.unbind(M,T)})};xe(v,(T,M)=>{this.transport.bind(M,T)})}handleCloseEvent(v){var j=tr.getCloseAction(v),T=tr.getCloseError(v);T&&this.emit("error",T),j&&this.emit(j,{action:j,error:T})}}class hC{constructor(v,j){this.transport=v,this.callback=j,this.bindListeners()}close(){this.unbindListeners(),this.transport.close()}bindListeners(){this.onMessage=v=>{this.unbindListeners();var j;try{j=tr.processHandshake(v)}catch(T){this.finish("error",{error:T}),this.transport.close();return}j.action==="connected"?this.finish("connected",{connection:new uC(j.id,this.transport),activityTimeout:j.activityTimeout}):(this.finish(j.action,{error:j.error}),this.transport.close())},this.onClosed=v=>{this.unbindListeners();var j=tr.getCloseAction(v)||"backoff",T=tr.getCloseError(v);this.finish(j,{error:T})},this.transport.bind("message",this.onMessage),this.transport.bind("closed",this.onClosed)}unbindListeners(){this.transport.unbind("message",this.onMessage),this.transport.unbind("closed",this.onClosed)}finish(v,j){this.callback(H({transport:this.transport,action:v},j))}}class dC{constructor(v,j){this.timeline=v,this.options=j||{}}send(v,j){this.timeline.isEmpty()||this.timeline.send(de.TimelineTransport.getAgent(this,v),j)}}class Gu extends Un{constructor(v,j){super(function(T,M){Be.debug("No callbacks on "+v+" for "+T)}),this.name=v,this.pusher=j,this.subscribed=!1,this.subscriptionPending=!1,this.subscriptionCancelled=!1}authorize(v,j){return j(null,{auth:""})}trigger(v,j){if(v.indexOf("client-")!==0)throw new w("Event '"+v+"' does not start with 'client-'");if(!this.subscribed){var T=p.buildLogSuffix("triggeringClientEvents");Be.warn(`Client event triggered before channel 'subscription_succeeded' event . ${T}`)}return this.pusher.send_event(v,j,this.name)}disconnect(){this.subscribed=!1,this.subscriptionPending=!1}handleEvent(v){var j=v.event,T=v.data;if(j==="pusher_internal:subscription_succeeded")this.handleSubscriptionSucceededEvent(v);else if(j==="pusher_internal:subscription_count")this.handleSubscriptionCountEvent(v);else if(j.indexOf("pusher_internal:")!==0){var M={};this.emit(j,T,M)}}handleSubscriptionSucceededEvent(v){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):this.emit("pusher:subscription_succeeded",v.data)}handleSubscriptionCountEvent(v){v.data.subscription_count&&(this.subscriptionCount=v.data.subscription_count),this.emit("pusher:subscription_count",v.data)}subscribe(){this.subscribed||(this.subscriptionPending=!0,this.subscriptionCancelled=!1,this.authorize(this.pusher.connection.socket_id,(v,j)=>{v?(this.subscriptionPending=!1,Be.error(v.toString()),this.emit("pusher:subscription_error",Object.assign({},{type:"AuthError",error:v.message},v instanceof P?{status:v.status}:{}))):this.pusher.send_event("pusher:subscribe",{auth:j.auth,channel_data:j.channel_data,channel:this.name})}))}unsubscribe(){this.subscribed=!1,this.pusher.send_event("pusher:unsubscribe",{channel:this.name})}cancelSubscription(){this.subscriptionCancelled=!0}reinstateSubscription(){this.subscriptionCancelled=!1}}class Qu extends Gu{authorize(v,j){return this.pusher.config.channelAuthorizer({channelName:this.name,socketId:v},j)}}class fC{constructor(){this.reset()}get(v){return Object.prototype.hasOwnProperty.call(this.members,v)?{id:v,info:this.members[v]}:null}each(v){xe(this.members,(j,T)=>{v(this.get(T))})}setMyID(v){this.myID=v}onSubscription(v){this.members=v.presence.hash,this.count=v.presence.count,this.me=this.get(this.myID)}addMember(v){return this.get(v.user_id)===null&&this.count++,this.members[v.user_id]=v.user_info,this.get(v.user_id)}removeMember(v){var j=this.get(v.user_id);return j&&(delete this.members[v.user_id],this.count--),j}reset(){this.members={},this.count=0,this.myID=null,this.me=null}}var pC=function(k,v,j,T){function M(B){return B instanceof j?B:new j(function(K){K(B)})}return new(j||(j=Promise))(function(B,K){function re(Pe){try{be(T.next(Pe))}catch(nt){K(nt)}}function he(Pe){try{be(T.throw(Pe))}catch(nt){K(nt)}}function be(Pe){Pe.done?B(Pe.value):M(Pe.value).then(re,he)}be((T=T.apply(k,v||[])).next())})};class mC extends Qu{constructor(v,j){super(v,j),this.members=new fC}authorize(v,j){super.authorize(v,(T,M)=>pC(this,void 0,void 0,function*(){if(!T)if(M=M,M.channel_data!=null){var B=JSON.parse(M.channel_data);this.members.setMyID(B.user_id)}else if(yield this.pusher.user.signinDonePromise,this.pusher.user.user_data!=null)this.members.setMyID(this.pusher.user.user_data.id);else{let K=p.buildLogSuffix("authorizationEndpoint");Be.error(`Invalid auth response for channel '${this.name}', expected 'channel_data' field. ${K}, or the user should be signed in.`),j("Invalid auth response");return}j(T,M)}))}handleEvent(v){var j=v.event;if(j.indexOf("pusher_internal:")===0)this.handleInternalEvent(v);else{var T=v.data,M={};v.user_id&&(M.user_id=v.user_id),this.emit(j,T,M)}}handleInternalEvent(v){var j=v.event,T=v.data;switch(j){case"pusher_internal:subscription_succeeded":this.handleSubscriptionSucceededEvent(v);break;case"pusher_internal:subscription_count":this.handleSubscriptionCountEvent(v);break;case"pusher_internal:member_added":var M=this.members.addMember(T);this.emit("pusher:member_added",M);break;case"pusher_internal:member_removed":var B=this.members.removeMember(T);B&&this.emit("pusher:member_removed",B);break}}handleSubscriptionSucceededEvent(v){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):(this.members.onSubscription(v.data),this.emit("pusher:subscription_succeeded",this.members))}disconnect(){this.members.reset(),super.disconnect()}}var gC=r(1),Ku=r(0);class yC extends Qu{constructor(v,j,T){super(v,j),this.key=null,this.nacl=T}authorize(v,j){super.authorize(v,(T,M)=>{if(T){j(T,M);return}let B=M.shared_secret;if(!B){j(new Error(`No shared_secret key in auth payload for encrypted channel: ${this.name}`),null);return}this.key=Object(Ku.decode)(B),delete M.shared_secret,j(null,M)})}trigger(v,j){throw new C("Client events are not currently supported for encrypted channels")}handleEvent(v){var j=v.event,T=v.data;if(j.indexOf("pusher_internal:")===0||j.indexOf("pusher:")===0){super.handleEvent(v);return}this.handleEncryptedEvent(j,T)}handleEncryptedEvent(v,j){if(!this.key){Be.debug("Received encrypted event before key has been retrieved from the authEndpoint");return}if(!j.ciphertext||!j.nonce){Be.error("Unexpected format for encrypted event, expected object with `ciphertext` and `nonce` fields, got: "+j);return}let T=Object(Ku.decode)(j.ciphertext);if(T.length<this.nacl.secretbox.overheadLength){Be.error(`Expected encrypted event ciphertext length to be ${this.nacl.secretbox.overheadLength}, got: ${T.length}`);return}let M=Object(Ku.decode)(j.nonce);if(M.length<this.nacl.secretbox.nonceLength){Be.error(`Expected encrypted event nonce length to be ${this.nacl.secretbox.nonceLength}, got: ${M.length}`);return}let B=this.nacl.secretbox.open(T,M,this.key);if(B===null){Be.debug("Failed to decrypt an event, probably because it was encrypted with a different key. Fetching a new key from the authEndpoint..."),this.authorize(this.pusher.connection.socket_id,(K,re)=>{if(K){Be.error(`Failed to make a request to the authEndpoint: ${re}. Unable to fetch new key, so dropping encrypted event`);return}if(B=this.nacl.secretbox.open(T,M,this.key),B===null){Be.error("Failed to decrypt event with new key. Dropping encrypted event");return}this.emit(v,this.getDataToEmit(B))});return}this.emit(v,this.getDataToEmit(B))}getDataToEmit(v){let j=Object(gC.decode)(v);try{return JSON.parse(j)}catch{return j}}}class vC extends Un{constructor(v,j){super(),this.state="initialized",this.connection=null,this.key=v,this.options=j,this.timeline=this.options.timeline,this.usingTLS=this.options.useTLS,this.errorCallbacks=this.buildErrorCallbacks(),this.connectionCallbacks=this.buildConnectionCallbacks(this.errorCallbacks),this.handshakeCallbacks=this.buildHandshakeCallbacks(this.errorCallbacks);var T=de.getNetwork();T.bind("online",()=>{this.timeline.info({netinfo:"online"}),(this.state==="connecting"||this.state==="unavailable")&&this.retryIn(0)}),T.bind("offline",()=>{this.timeline.info({netinfo:"offline"}),this.connection&&this.sendActivityCheck()}),this.updateStrategy()}connect(){if(!(this.connection||this.runner)){if(!this.strategy.isSupported()){this.updateState("failed");return}this.updateState("connecting"),this.startConnecting(),this.setUnavailableTimer()}}send(v){return this.connection?this.connection.send(v):!1}send_event(v,j,T){return this.connection?this.connection.send_event(v,j,T):!1}disconnect(){this.disconnectInternally(),this.updateState("disconnected")}isUsingTLS(){return this.usingTLS}startConnecting(){var v=(j,T)=>{j?this.runner=this.strategy.connect(0,v):T.action==="error"?(this.emit("error",{type:"HandshakeError",error:T.error}),this.timeline.error({handshakeError:T.error})):(this.abortConnecting(),this.handshakeCallbacks[T.action](T))};this.runner=this.strategy.connect(0,v)}abortConnecting(){this.runner&&(this.runner.abort(),this.runner=null)}disconnectInternally(){if(this.abortConnecting(),this.clearRetryTimer(),this.clearUnavailableTimer(),this.connection){var v=this.abandonConnection();v.close()}}updateStrategy(){this.strategy=this.options.getStrategy({key:this.key,timeline:this.timeline,useTLS:this.usingTLS})}retryIn(v){this.timeline.info({action:"retry",delay:v}),v>0&&this.emit("connecting_in",Math.round(v/1e3)),this.retryTimer=new ce(v||0,()=>{this.disconnectInternally(),this.connect()})}clearRetryTimer(){this.retryTimer&&(this.retryTimer.ensureAborted(),this.retryTimer=null)}setUnavailableTimer(){this.unavailableTimer=new ce(this.options.unavailableTimeout,()=>{this.updateState("unavailable")})}clearUnavailableTimer(){this.unavailableTimer&&this.unavailableTimer.ensureAborted()}sendActivityCheck(){this.stopActivityCheck(),this.connection.ping(),this.activityTimer=new ce(this.options.pongTimeout,()=>{this.timeline.error({pong_timed_out:this.options.pongTimeout}),this.retryIn(0)})}resetActivityCheck(){this.stopActivityCheck(),this.connection&&!this.connection.handlesActivityChecks()&&(this.activityTimer=new ce(this.activityTimeout,()=>{this.sendActivityCheck()}))}stopActivityCheck(){this.activityTimer&&this.activityTimer.ensureAborted()}buildConnectionCallbacks(v){return H({},v,{message:j=>{this.resetActivityCheck(),this.emit("message",j)},ping:()=>{this.send_event("pusher:pong",{})},activity:()=>{this.resetActivityCheck()},error:j=>{this.emit("error",j)},closed:()=>{this.abandonConnection(),this.shouldRetry()&&this.retryIn(1e3)}})}buildHandshakeCallbacks(v){return H({},v,{connected:j=>{this.activityTimeout=Math.min(this.options.activityTimeout,j.activityTimeout,j.connection.activityTimeout||1/0),this.clearUnavailableTimer(),this.setConnection(j.connection),this.socket_id=this.connection.id,this.updateState("connected",{socket_id:this.socket_id})}})}buildErrorCallbacks(){let v=j=>T=>{T.error&&this.emit("error",{type:"WebSocketError",error:T.error}),j(T)};return{tls_only:v(()=>{this.usingTLS=!0,this.updateStrategy(),this.retryIn(0)}),refused:v(()=>{this.disconnect()}),backoff:v(()=>{this.retryIn(1e3)}),retry:v(()=>{this.retryIn(0)})}}setConnection(v){this.connection=v;for(var j in this.connectionCallbacks)this.connection.bind(j,this.connectionCallbacks[j]);this.resetActivityCheck()}abandonConnection(){if(this.connection){this.stopActivityCheck();for(var v in this.connectionCallbacks)this.connection.unbind(v,this.connectionCallbacks[v]);var j=this.connection;return this.connection=null,j}}updateState(v,j){var T=this.state;if(this.state=v,T!==v){var M=v;M==="connected"&&(M+=" with new socket ID "+j.socket_id),Be.debug("State changed",T+" -> "+M),this.timeline.info({state:v,params:j}),this.emit("state_change",{previous:T,current:v}),this.emit(v,j)}}shouldRetry(){return this.state==="connecting"||this.state==="connected"}}class xC{constructor(){this.channels={}}add(v,j){return this.channels[v]||(this.channels[v]=wC(v,j)),this.channels[v]}all(){return ke(this.channels)}find(v){return this.channels[v]}remove(v){var j=this.channels[v];return delete this.channels[v],j}disconnect(){xe(this.channels,function(v){v.disconnect()})}}function wC(k,v){if(k.indexOf("private-encrypted-")===0){if(v.config.nacl)return Wn.createEncryptedChannel(k,v,v.config.nacl);let j="Tried to subscribe to a private-encrypted- channel but no nacl implementation available",T=p.buildLogSuffix("encryptedChannelSupport");throw new C(`${j}. ${T}`)}else{if(k.indexOf("private-")===0)return Wn.createPrivateChannel(k,v);if(k.indexOf("presence-")===0)return Wn.createPresenceChannel(k,v);if(k.indexOf("#")===0)throw new m('Cannot create a channel with name "'+k+'".');return Wn.createChannel(k,v)}}var SC={createChannels(){return new xC},createConnectionManager(k,v){return new vC(k,v)},createChannel(k,v){return new Gu(k,v)},createPrivateChannel(k,v){return new Qu(k,v)},createPresenceChannel(k,v){return new mC(k,v)},createEncryptedChannel(k,v,j){return new yC(k,v,j)},createTimelineSender(k,v){return new dC(k,v)},createHandshake(k,v){return new hC(k,v)},createAssistantToTheTransportManager(k,v,j){return new cC(k,v,j)}},Wn=SC;class Cg{constructor(v){this.options=v||{},this.livesLeft=this.options.lives||1/0}getAssistant(v){return Wn.createAssistantToTheTransportManager(this,v,{minPingDelay:this.options.minPingDelay,maxPingDelay:this.options.maxPingDelay})}isAlive(){return this.livesLeft>0}reportDeath(){this.livesLeft-=1}}class nr{constructor(v,j){this.strategies=v,this.loop=!!j.loop,this.failFast=!!j.failFast,this.timeout=j.timeout,this.timeoutLimit=j.timeoutLimit}isSupported(){return Se(this.strategies,U.method("isSupported"))}connect(v,j){var T=this.strategies,M=0,B=this.timeout,K=null,re=(he,be)=>{be?j(null,be):(M=M+1,this.loop&&(M=M%T.length),M<T.length?(B&&(B=B*2,this.timeoutLimit&&(B=Math.min(B,this.timeoutLimit))),K=this.tryStrategy(T[M],v,{timeout:B,failFast:this.failFast},re)):j(!0))};return K=this.tryStrategy(T[M],v,{timeout:B,failFast:this.failFast},re),{abort:function(){K.abort()},forceMinPriority:function(he){v=he,K&&K.forceMinPriority(he)}}}tryStrategy(v,j,T,M){var B=null,K=null;return T.timeout>0&&(B=new ce(T.timeout,function(){K.abort(),M(!0)})),K=v.connect(j,function(re,he){re&&B&&B.isRunning()&&!T.failFast||(B&&B.ensureAborted(),M(re,he))}),{abort:function(){B&&B.ensureAborted(),K.abort()},forceMinPriority:function(re){K.forceMinPriority(re)}}}}class Xu{constructor(v){this.strategies=v}isSupported(){return Se(this.strategies,U.method("isSupported"))}connect(v,j){return bC(this.strategies,v,function(T,M){return function(B,K){if(M[T].error=B,B){NC(M)&&j(!0);return}oe(M,function(re){re.forceMinPriority(K.transport.priority)}),j(null,K)}})}}function bC(k,v,j){var T=qt(k,function(M,B,K,re){return M.connect(v,j(B,re))});return{abort:function(){oe(T,jC)},forceMinPriority:function(M){oe(T,function(B){B.forceMinPriority(M)})}}}function NC(k){return qe(k,function(v){return!!v.error})}function jC(k){!k.error&&!k.aborted&&(k.abort(),k.aborted=!0)}class CC{constructor(v,j,T){this.strategy=v,this.transports=j,this.ttl=T.ttl||1800*1e3,this.usingTLS=T.useTLS,this.timeline=T.timeline}isSupported(){return this.strategy.isSupported()}connect(v,j){var T=this.usingTLS,M=kC(T),B=M&&M.cacheSkipCount?M.cacheSkipCount:0,K=[this.strategy];if(M&&M.timestamp+this.ttl>=U.now()){var re=this.transports[M.transport];re&&(["ws","wss"].includes(M.transport)||B>3?(this.timeline.info({cached:!0,transport:M.transport,latency:M.latency}),K.push(new nr([re],{timeout:M.latency*2+1e3,failFast:!0}))):B++)}var he=U.now(),be=K.pop().connect(v,function Pe(nt,Bo){nt?(kg(T),K.length>0?(he=U.now(),be=K.pop().connect(v,Pe)):j(nt)):(PC(T,Bo.transport.name,U.now()-he,B),j(null,Bo))});return{abort:function(){be.abort()},forceMinPriority:function(Pe){v=Pe,be&&be.forceMinPriority(Pe)}}}}function Ju(k){return"pusherTransport"+(k?"TLS":"NonTLS")}function kC(k){var v=de.getLocalStorage();if(v)try{var j=v[Ju(k)];if(j)return JSON.parse(j)}catch{kg(k)}return null}function PC(k,v,j,T){var M=de.getLocalStorage();if(M)try{M[Ju(k)]=qr({timestamp:U.now(),transport:v,latency:j,cacheSkipCount:T})}catch{}}function kg(k){var v=de.getLocalStorage();if(v)try{delete v[Ju(k)]}catch{}}class Do{constructor(v,{delay:j}){this.strategy=v,this.options={delay:j}}isSupported(){return this.strategy.isSupported()}connect(v,j){var T=this.strategy,M,B=new ce(this.options.delay,function(){M=T.connect(v,j)});return{abort:function(){B.ensureAborted(),M&&M.abort()},forceMinPriority:function(K){v=K,M&&M.forceMinPriority(K)}}}}class Ki{constructor(v,j,T){this.test=v,this.trueBranch=j,this.falseBranch=T}isSupported(){var v=this.test()?this.trueBranch:this.falseBranch;return v.isSupported()}connect(v,j){var T=this.test()?this.trueBranch:this.falseBranch;return T.connect(v,j)}}class EC{constructor(v){this.strategy=v}isSupported(){return this.strategy.isSupported()}connect(v,j){var T=this.strategy.connect(v,function(M,B){B&&T.abort(),j(M,B)});return T}}function Xi(k){return function(){return k.isSupported()}}var TC=function(k,v,j){var T={};function M(Dg,Ek,Tk,Lk,_k){var Fg=j(k,Dg,Ek,Tk,Lk,_k);return T[Dg]=Fg,Fg}var B=Object.assign({},v,{hostNonTLS:k.wsHost+":"+k.wsPort,hostTLS:k.wsHost+":"+k.wssPort,httpPath:k.wsPath}),K=Object.assign({},B,{useTLS:!0}),re=Object.assign({},v,{hostNonTLS:k.httpHost+":"+k.httpPort,hostTLS:k.httpHost+":"+k.httpsPort,httpPath:k.httpPath}),he={loop:!0,timeout:15e3,timeoutLimit:6e4},be=new Cg({minPingDelay:1e4,maxPingDelay:k.activityTimeout}),Pe=new Cg({lives:2,minPingDelay:1e4,maxPingDelay:k.activityTimeout}),nt=M("ws","ws",3,B,be),Bo=M("wss","ws",3,K,be),Nk=M("sockjs","sockjs",1,re),_g=M("xhr_streaming","xhr_streaming",1,re,Pe),jk=M("xdr_streaming","xdr_streaming",1,re,Pe),Rg=M("xhr_polling","xhr_polling",1,re),Ck=M("xdr_polling","xdr_polling",1,re),Mg=new nr([nt],he),kk=new nr([Bo],he),Pk=new nr([Nk],he),Ig=new nr([new Ki(Xi(_g),_g,jk)],he),Ag=new nr([new Ki(Xi(Rg),Rg,Ck)],he),Og=new nr([new Ki(Xi(Ig),new Xu([Ig,new Do(Ag,{delay:4e3})]),Ag)],he),nh=new Ki(Xi(Og),Og,Pk),sh;return v.useTLS?sh=new Xu([Mg,new Do(nh,{delay:2e3})]):sh=new Xu([Mg,new Do(kk,{delay:2e3}),new Do(nh,{delay:5e3})]),new CC(new EC(new Ki(Xi(nt),sh,nh)),T,{ttl:18e5,timeline:v.timeline,useTLS:v.useTLS})},LC=TC,_C=function(){var k=this;k.timeline.info(k.buildTimelineMessage({transport:k.name+(k.options.useTLS?"s":"")})),k.hooks.isInitialized()?k.changeState("initialized"):k.hooks.file?(k.changeState("initializing"),d.load(k.hooks.file,{useTLS:k.options.useTLS},function(v,j){k.hooks.isInitialized()?(k.changeState("initialized"),j(!0)):(v&&k.onError(v),k.onClose(),j(!1))})):k.onClose()},RC={getRequest:function(k){var v=new window.XDomainRequest;return v.ontimeout=function(){k.emit("error",new g),k.close()},v.onerror=function(j){k.emit("error",j),k.close()},v.onprogress=function(){v.responseText&&v.responseText.length>0&&k.onChunk(200,v.responseText)},v.onload=function(){v.responseText&&v.responseText.length>0&&k.onChunk(200,v.responseText),k.emit("finished",200),k.close()},v},abortRequest:function(k){k.ontimeout=k.onerror=k.onprogress=k.onload=null,k.abort()}},MC=RC;const IC=256*1024;class AC extends Un{constructor(v,j,T){super(),this.hooks=v,this.method=j,this.url=T}start(v){this.position=0,this.xhr=this.hooks.getRequest(this),this.unloader=()=>{this.close()},de.addUnloadListener(this.unloader),this.xhr.open(this.method,this.url,!0),this.xhr.setRequestHeader&&this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.send(v)}close(){this.unloader&&(de.removeUnloadListener(this.unloader),this.unloader=null),this.xhr&&(this.hooks.abortRequest(this.xhr),this.xhr=null)}onChunk(v,j){for(;;){var T=this.advanceBuffer(j);if(T)this.emit("chunk",{status:v,data:T});else break}this.isBufferTooLong(j)&&this.emit("buffer_too_long")}advanceBuffer(v){var j=v.slice(this.position),T=j.indexOf(`
`);return T!==-1?(this.position+=T+1,j.slice(0,T)):null}isBufferTooLong(v){return this.position===v.length&&v.length>IC}}var Zu;(function(k){k[k.CONNECTING=0]="CONNECTING",k[k.OPEN=1]="OPEN",k[k.CLOSED=3]="CLOSED"})(Zu||(Zu={}));var sr=Zu,OC=1;class DC{constructor(v,j){this.hooks=v,this.session=Eg(1e3)+"/"+$C(8),this.location=FC(j),this.readyState=sr.CONNECTING,this.openStream()}send(v){return this.sendRaw(JSON.stringify([v]))}ping(){this.hooks.sendHeartbeat(this)}close(v,j){this.onClose(v,j,!0)}sendRaw(v){if(this.readyState===sr.OPEN)try{return de.createSocketRequest("POST",Pg(BC(this.location,this.session))).start(v),!0}catch{return!1}else return!1}reconnect(){this.closeStream(),this.openStream()}onClose(v,j,T){this.closeStream(),this.readyState=sr.CLOSED,this.onclose&&this.onclose({code:v,reason:j,wasClean:T})}onChunk(v){if(v.status===200){this.readyState===sr.OPEN&&this.onActivity();var j,T=v.data.slice(0,1);switch(T){case"o":j=JSON.parse(v.data.slice(1)||"{}"),this.onOpen(j);break;case"a":j=JSON.parse(v.data.slice(1)||"[]");for(var M=0;M<j.length;M++)this.onEvent(j[M]);break;case"m":j=JSON.parse(v.data.slice(1)||"null"),this.onEvent(j);break;case"h":this.hooks.onHeartbeat(this);break;case"c":j=JSON.parse(v.data.slice(1)||"[]"),this.onClose(j[0],j[1],!0);break}}}onOpen(v){this.readyState===sr.CONNECTING?(v&&v.hostname&&(this.location.base=zC(this.location.base,v.hostname)),this.readyState=sr.OPEN,this.onopen&&this.onopen()):this.onClose(1006,"Server lost session",!0)}onEvent(v){this.readyState===sr.OPEN&&this.onmessage&&this.onmessage({data:v})}onActivity(){this.onactivity&&this.onactivity()}onError(v){this.onerror&&this.onerror(v)}openStream(){this.stream=de.createSocketRequest("POST",Pg(this.hooks.getReceiveURL(this.location,this.session))),this.stream.bind("chunk",v=>{this.onChunk(v)}),this.stream.bind("finished",v=>{this.hooks.onFinished(this,v)}),this.stream.bind("buffer_too_long",()=>{this.reconnect()});try{this.stream.start()}catch(v){U.defer(()=>{this.onError(v),this.onClose(1006,"Could not start streaming",!1)})}}closeStream(){this.stream&&(this.stream.unbind_all(),this.stream.close(),this.stream=null)}}function FC(k){var v=/([^\?]*)\/*(\??.*)/.exec(k);return{base:v[1],queryString:v[2]}}function BC(k,v){return k.base+"/"+v+"/xhr_send"}function Pg(k){var v=k.indexOf("?")===-1?"?":"&";return k+v+"t="+ +new Date+"&n="+OC++}function zC(k,v){var j=/(https?:\/\/)([^\/:]+)((\/|:)?.*)/.exec(k);return j[1]+v+j[3]}function Eg(k){return de.randomInt(k)}function $C(k){for(var v=[],j=0;j<k;j++)v.push(Eg(32).toString(32));return v.join("")}var VC=DC,UC={getReceiveURL:function(k,v){return k.base+"/"+v+"/xhr_streaming"+k.queryString},onHeartbeat:function(k){k.sendRaw("[]")},sendHeartbeat:function(k){k.sendRaw("[]")},onFinished:function(k,v){k.onClose(1006,"Connection interrupted ("+v+")",!1)}},WC=UC,HC={getReceiveURL:function(k,v){return k.base+"/"+v+"/xhr"+k.queryString},onHeartbeat:function(){},sendHeartbeat:function(k){k.sendRaw("[]")},onFinished:function(k,v){v===200?k.reconnect():k.onClose(1006,"Connection interrupted ("+v+")",!1)}},YC=HC,qC={getRequest:function(k){var v=de.getXHRAPI(),j=new v;return j.onreadystatechange=j.onprogress=function(){switch(j.readyState){case 3:j.responseText&&j.responseText.length>0&&k.onChunk(j.status,j.responseText);break;case 4:j.responseText&&j.responseText.length>0&&k.onChunk(j.status,j.responseText),k.emit("finished",j.status),k.close();break}},j},abortRequest:function(k){k.onreadystatechange=null,k.abort()}},GC=qC,QC={createStreamingSocket(k){return this.createSocket(WC,k)},createPollingSocket(k){return this.createSocket(YC,k)},createSocket(k,v){return new VC(k,v)},createXHR(k,v){return this.createRequest(GC,k,v)},createRequest(k,v,j){return new AC(k,v,j)}},Tg=QC;Tg.createXDR=function(k,v){return this.createRequest(MC,k,v)};var KC=Tg,XC={nextAuthCallbackID:1,auth_callbacks:{},ScriptReceivers:o,DependenciesReceivers:h,getDefaultStrategy:LC,Transports:aC,transportConnectionInitializer:_C,HTTPFactory:KC,TimelineTransport:Qi,getXHRAPI(){return window.XMLHttpRequest},getWebSocketAPI(){return window.WebSocket||window.MozWebSocket},setup(k){window.Pusher=k;var v=()=>{this.onDocumentBody(k.ready)};window.JSON?v():d.load("json2",{},v)},getDocument(){return document},getProtocol(){return this.getDocument().location.protocol},getAuthorizers(){return{ajax:_,jsonp:Ao}},onDocumentBody(k){document.body?k():setTimeout(()=>{this.onDocumentBody(k)},0)},createJSONPRequest(k,v){return new Ge(k,v)},createScriptRequest(k){return new q(k)},getLocalStorage(){try{return window.localStorage}catch{return}},createXHR(){return this.getXHRAPI()?this.createXMLHttpRequest():this.createMicrosoftXHR()},createXMLHttpRequest(){var k=this.getXHRAPI();return new k},createMicrosoftXHR(){return new ActiveXObject("Microsoft.XMLHTTP")},getNetwork(){return lC},createWebSocket(k){var v=this.getWebSocketAPI();return new v(k)},createSocketRequest(k,v){if(this.isXHRSupported())return this.HTTPFactory.createXHR(k,v);if(this.isXDRSupported(v.indexOf("https:")===0))return this.HTTPFactory.createXDR(k,v);throw"Cross-origin HTTP requests are not supported"},isXHRSupported(){var k=this.getXHRAPI();return!!k&&new k().withCredentials!==void 0},isXDRSupported(k){var v=k?"https:":"http:",j=this.getProtocol();return!!window.XDomainRequest&&j===v},addUnloadListener(k){window.addEventListener!==void 0?window.addEventListener("unload",k,!1):window.attachEvent!==void 0&&window.attachEvent("onunload",k)},removeUnloadListener(k){window.addEventListener!==void 0?window.removeEventListener("unload",k,!1):window.detachEvent!==void 0&&window.detachEvent("onunload",k)},randomInt(k){return Math.floor(function(){return(window.crypto||window.msCrypto).getRandomValues(new Uint32Array(1))[0]/Math.pow(2,32)}()*k)}},de=XC,eh;(function(k){k[k.ERROR=3]="ERROR",k[k.INFO=6]="INFO",k[k.DEBUG=7]="DEBUG"})(eh||(eh={}));var Fo=eh;class JC{constructor(v,j,T){this.key=v,this.session=j,this.events=[],this.options=T||{},this.sent=0,this.uniqueID=0}log(v,j){v<=this.options.level&&(this.events.push(H({},j,{timestamp:U.now()})),this.options.limit&&this.events.length>this.options.limit&&this.events.shift())}error(v){this.log(Fo.ERROR,v)}info(v){this.log(Fo.INFO,v)}debug(v){this.log(Fo.DEBUG,v)}isEmpty(){return this.events.length===0}send(v,j){var T=H({session:this.session,bundle:this.sent+1,key:this.key,lib:"js",version:this.options.version,cluster:this.options.cluster,features:this.options.features,timeline:this.events},this.options.params);return this.events=[],v(T,(M,B)=>{M||this.sent++,j&&j(M,B)}),!0}generateUniqueID(){return this.uniqueID++,this.uniqueID}}class ZC{constructor(v,j,T,M){this.name=v,this.priority=j,this.transport=T,this.options=M||{}}isSupported(){return this.transport.isSupported({useTLS:this.options.useTLS})}connect(v,j){if(this.isSupported()){if(this.priority<v)return Lg(new S,j)}else return Lg(new L,j);var T=!1,M=this.transport.createConnection(this.name,this.priority,this.options.key,this.options),B=null,K=function(){M.unbind("initialized",K),M.connect()},re=function(){B=Wn.createHandshake(M,function(nt){T=!0,Pe(),j(null,nt)})},he=function(nt){Pe(),j(nt)},be=function(){Pe();var nt;nt=qr(M),j(new N(nt))},Pe=function(){M.unbind("initialized",K),M.unbind("open",re),M.unbind("error",he),M.unbind("closed",be)};return M.bind("initialized",K),M.bind("open",re),M.bind("error",he),M.bind("closed",be),M.initialize(),{abort:()=>{T||(Pe(),B?B.close():M.close())},forceMinPriority:nt=>{T||this.priority<nt&&(B?B.close():M.close())}}}}function Lg(k,v){return U.defer(function(){v(k)}),{abort:function(){},forceMinPriority:function(){}}}const{Transports:ek}=de;var tk=function(k,v,j,T,M,B){var K=ek[j];if(!K)throw new E(j);var re=(!k.enabledTransports||Ce(k.enabledTransports,v)!==-1)&&(!k.disabledTransports||Ce(k.disabledTransports,v)===-1),he;return re?(M=Object.assign({ignoreNullOrigin:k.ignoreNullOrigin},M),he=new ZC(v,T,B?B.getAssistant(K):K,M)):he=nk,he},nk={isSupported:function(){return!1},connect:function(k,v){var j=U.defer(function(){v(new L)});return{abort:function(){j.ensureAborted()},forceMinPriority:function(){}}}};function sk(k){if(k==null)throw"You must pass an options object";if(k.cluster==null)throw"Options object must provide a cluster";"disableStats"in k&&Be.warn("The disableStats option is deprecated in favor of enableStats")}const rk=(k,v)=>{var j="socket_id="+encodeURIComponent(k.socketId);for(var T in v.params)j+="&"+encodeURIComponent(T)+"="+encodeURIComponent(v.params[T]);if(v.paramsProvider!=null){let M=v.paramsProvider();for(var T in M)j+="&"+encodeURIComponent(T)+"="+encodeURIComponent(M[T])}return j};var ik=k=>{if(typeof de.getAuthorizers()[k.transport]>"u")throw`'${k.transport}' is not a recognized auth transport`;return(v,j)=>{const T=rk(v,k);de.getAuthorizers()[k.transport](de,T,k,y.UserAuthentication,j)}};const ak=(k,v)=>{var j="socket_id="+encodeURIComponent(k.socketId);j+="&channel_name="+encodeURIComponent(k.channelName);for(var T in v.params)j+="&"+encodeURIComponent(T)+"="+encodeURIComponent(v.params[T]);if(v.paramsProvider!=null){let M=v.paramsProvider();for(var T in M)j+="&"+encodeURIComponent(T)+"="+encodeURIComponent(M[T])}return j};var ok=k=>{if(typeof de.getAuthorizers()[k.transport]>"u")throw`'${k.transport}' is not a recognized auth transport`;return(v,j)=>{const T=ak(v,k);de.getAuthorizers()[k.transport](de,T,k,y.ChannelAuthorization,j)}};const lk=(k,v,j)=>{const T={authTransport:v.transport,authEndpoint:v.endpoint,auth:{params:v.params,headers:v.headers}};return(M,B)=>{const K=k.channel(M.channelName);j(K,T).authorize(M.socketId,B)}};function ck(k,v){let j={activityTimeout:k.activityTimeout||c.activityTimeout,cluster:k.cluster,httpPath:k.httpPath||c.httpPath,httpPort:k.httpPort||c.httpPort,httpsPort:k.httpsPort||c.httpsPort,pongTimeout:k.pongTimeout||c.pongTimeout,statsHost:k.statsHost||c.stats_host,unavailableTimeout:k.unavailableTimeout||c.unavailableTimeout,wsPath:k.wsPath||c.wsPath,wsPort:k.wsPort||c.wsPort,wssPort:k.wssPort||c.wssPort,enableStats:pk(k),httpHost:uk(k),useTLS:fk(k),wsHost:hk(k),userAuthenticator:mk(k),channelAuthorizer:yk(k,v)};return"disabledTransports"in k&&(j.disabledTransports=k.disabledTransports),"enabledTransports"in k&&(j.enabledTransports=k.enabledTransports),"ignoreNullOrigin"in k&&(j.ignoreNullOrigin=k.ignoreNullOrigin),"timelineParams"in k&&(j.timelineParams=k.timelineParams),"nacl"in k&&(j.nacl=k.nacl),j}function uk(k){return k.httpHost?k.httpHost:k.cluster?`sockjs-${k.cluster}.pusher.com`:c.httpHost}function hk(k){return k.wsHost?k.wsHost:dk(k.cluster)}function dk(k){return`ws-${k}.pusher.com`}function fk(k){return de.getProtocol()==="https:"?!0:k.forceTLS!==!1}function pk(k){return"enableStats"in k?k.enableStats:"disableStats"in k?!k.disableStats:!1}function mk(k){const v=Object.assign(Object.assign({},c.userAuthentication),k.userAuthentication);return"customHandler"in v&&v.customHandler!=null?v.customHandler:ik(v)}function gk(k,v){let j;return"channelAuthorization"in k?j=Object.assign(Object.assign({},c.channelAuthorization),k.channelAuthorization):(j={transport:k.authTransport||c.authTransport,endpoint:k.authEndpoint||c.authEndpoint},"auth"in k&&("params"in k.auth&&(j.params=k.auth.params),"headers"in k.auth&&(j.headers=k.auth.headers)),"authorizer"in k&&(j.customHandler=lk(v,j,k.authorizer))),j}function yk(k,v){const j=gk(k,v);return"customHandler"in j&&j.customHandler!=null?j.customHandler:ok(j)}class vk extends Un{constructor(v){super(function(j,T){Be.debug(`No callbacks on watchlist events for ${j}`)}),this.pusher=v,this.bindWatchlistInternalEvent()}handleEvent(v){v.data.events.forEach(j=>{this.emit(j.name,j)})}bindWatchlistInternalEvent(){this.pusher.connection.bind("message",v=>{var j=v.event;j==="pusher_internal:watchlist_events"&&this.handleEvent(v)})}}function xk(){let k,v;return{promise:new Promise((T,M)=>{k=T,v=M}),resolve:k,reject:v}}var wk=xk;class Sk extends Un{constructor(v){super(function(j,T){Be.debug("No callbacks on user for "+j)}),this.signin_requested=!1,this.user_data=null,this.serverToUserChannel=null,this.signinDonePromise=null,this._signinDoneResolve=null,this._onAuthorize=(j,T)=>{if(j){Be.warn(`Error during signin: ${j}`),this._cleanup();return}this.pusher.send_event("pusher:signin",{auth:T.auth,user_data:T.user_data})},this.pusher=v,this.pusher.connection.bind("state_change",({previous:j,current:T})=>{j!=="connected"&&T==="connected"&&this._signin(),j==="connected"&&T!=="connected"&&(this._cleanup(),this._newSigninPromiseIfNeeded())}),this.watchlist=new vk(v),this.pusher.connection.bind("message",j=>{var T=j.event;T==="pusher:signin_success"&&this._onSigninSuccess(j.data),this.serverToUserChannel&&this.serverToUserChannel.name===j.channel&&this.serverToUserChannel.handleEvent(j)})}signin(){this.signin_requested||(this.signin_requested=!0,this._signin())}_signin(){this.signin_requested&&(this._newSigninPromiseIfNeeded(),this.pusher.connection.state==="connected"&&this.pusher.config.userAuthenticator({socketId:this.pusher.connection.socket_id},this._onAuthorize))}_onSigninSuccess(v){try{this.user_data=JSON.parse(v.user_data)}catch{Be.error(`Failed parsing user data after signin: ${v.user_data}`),this._cleanup();return}if(typeof this.user_data.id!="string"||this.user_data.id===""){Be.error(`user_data doesn't contain an id. user_data: ${this.user_data}`),this._cleanup();return}this._signinDoneResolve(),this._subscribeChannels()}_subscribeChannels(){const v=j=>{j.subscriptionPending&&j.subscriptionCancelled?j.reinstateSubscription():!j.subscriptionPending&&this.pusher.connection.state==="connected"&&j.subscribe()};this.serverToUserChannel=new Gu(`#server-to-user-${this.user_data.id}`,this.pusher),this.serverToUserChannel.bind_global((j,T)=>{j.indexOf("pusher_internal:")===0||j.indexOf("pusher:")===0||this.emit(j,T)}),v(this.serverToUserChannel)}_cleanup(){this.user_data=null,this.serverToUserChannel&&(this.serverToUserChannel.unbind_all(),this.serverToUserChannel.disconnect(),this.serverToUserChannel=null),this.signin_requested&&this._signinDoneResolve()}_newSigninPromiseIfNeeded(){if(!this.signin_requested||this.signinDonePromise&&!this.signinDonePromise.done)return;const{promise:v,resolve:j}=wk();v.done=!1;const T=()=>{v.done=!0};v.then(T).catch(T),this.signinDonePromise=v,this._signinDoneResolve=j}}class ht{static ready(){ht.isReady=!0;for(var v=0,j=ht.instances.length;v<j;v++)ht.instances[v].connect()}static getClientFeatures(){return me(Z({ws:de.Transports.ws},function(v){return v.isSupported({})}))}constructor(v,j){bk(v),sk(j),this.key=v,this.config=ck(j,this),this.channels=Wn.createChannels(),this.global_emitter=new Un,this.sessionID=de.randomInt(1e9),this.timeline=new JC(this.key,this.sessionID,{cluster:this.config.cluster,features:ht.getClientFeatures(),params:this.config.timelineParams||{},limit:50,level:Fo.INFO,version:c.VERSION}),this.config.enableStats&&(this.timelineSender=Wn.createTimelineSender(this.timeline,{host:this.config.statsHost,path:"/timeline/v2/"+de.TimelineTransport.name}));var T=M=>de.getDefaultStrategy(this.config,M,tk);this.connection=Wn.createConnectionManager(this.key,{getStrategy:T,timeline:this.timeline,activityTimeout:this.config.activityTimeout,pongTimeout:this.config.pongTimeout,unavailableTimeout:this.config.unavailableTimeout,useTLS:!!this.config.useTLS}),this.connection.bind("connected",()=>{this.subscribeAll(),this.timelineSender&&this.timelineSender.send(this.connection.isUsingTLS())}),this.connection.bind("message",M=>{var B=M.event,K=B.indexOf("pusher_internal:")===0;if(M.channel){var re=this.channel(M.channel);re&&re.handleEvent(M)}K||this.global_emitter.emit(M.event,M.data)}),this.connection.bind("connecting",()=>{this.channels.disconnect()}),this.connection.bind("disconnected",()=>{this.channels.disconnect()}),this.connection.bind("error",M=>{Be.warn(M)}),ht.instances.push(this),this.timeline.info({instances:ht.instances.length}),this.user=new Sk(this),ht.isReady&&this.connect()}channel(v){return this.channels.find(v)}allChannels(){return this.channels.all()}connect(){if(this.connection.connect(),this.timelineSender&&!this.timelineSenderTimer){var v=this.connection.isUsingTLS(),j=this.timelineSender;this.timelineSenderTimer=new _e(6e4,function(){j.send(v)})}}disconnect(){this.connection.disconnect(),this.timelineSenderTimer&&(this.timelineSenderTimer.ensureAborted(),this.timelineSenderTimer=null)}bind(v,j,T){return this.global_emitter.bind(v,j,T),this}unbind(v,j,T){return this.global_emitter.unbind(v,j,T),this}bind_global(v){return this.global_emitter.bind_global(v),this}unbind_global(v){return this.global_emitter.unbind_global(v),this}unbind_all(v){return this.global_emitter.unbind_all(),this}subscribeAll(){var v;for(v in this.channels.channels)this.channels.channels.hasOwnProperty(v)&&this.subscribe(v)}subscribe(v){var j=this.channels.add(v,this);return j.subscriptionPending&&j.subscriptionCancelled?j.reinstateSubscription():!j.subscriptionPending&&this.connection.state==="connected"&&j.subscribe(),j}unsubscribe(v){var j=this.channels.find(v);j&&j.subscriptionPending?j.cancelSubscription():(j=this.channels.remove(v),j&&j.subscribed&&j.unsubscribe())}send_event(v,j,T){return this.connection.send_event(v,j,T)}shouldUseTLS(){return this.config.useTLS}signin(){this.user.signin()}}ht.instances=[],ht.isReady=!1,ht.logToConsole=!1,ht.Runtime=de,ht.ScriptReceivers=de.ScriptReceivers,ht.DependenciesReceivers=de.DependenciesReceivers,ht.auth_callbacks=de.auth_callbacks;var th=s.default=ht;function bk(k){if(k==null)throw"You must pass your app key when you instantiate Pusher."}de.setup(ht)}])})})(dj);var Z5=dj.exports;const e4=Yx(Z5);class t4{constructor(){this.baseURL="http://localhost:5001/api",this.pusher=null,this.channel=null,this.listeners=new Set,this.isConnected=!1,this.reconnectAttempts=0,this.maxReconnectAttempts=5,this.reconnectDelay=1e3}async initializePusher(e){try{this.pusher&&this.disconnectPusher(),this.pusher=new e4(void 0,{cluster:"ap2",encrypted:!0,authEndpoint:`${this.baseURL}/pusher/auth`,auth:{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}}),this.channel=this.pusher.subscribe(`user-${e}`),this.setupEventListeners(),this.pusher.connection.bind("connected",()=>{console.log(" Pusher connected for notifications"),this.isConnected=!0,this.reconnectAttempts=0,this.notifyListeners("connection",{status:"connected"})}),this.pusher.connection.bind("disconnected",()=>{console.log(" Pusher disconnected"),this.isConnected=!1,this.notifyListeners("connection",{status:"disconnected"}),this.handleReconnection(e)}),this.pusher.connection.bind("error",n=>{console.error(" Pusher connection error:",n),this.notifyListeners("connection",{status:"error",error:n})})}catch(n){throw console.error("Failed to initialize Pusher:",n),n}}setupEventListeners(){this.channel&&(this.channel.bind("notification",e=>{console.log(" New notification received:",e),this.notifyListeners("notification",e)}),this.channel.bind("notification-update",e=>{console.log(" Notification updated:",e),this.notifyListeners("notification-update",e)}),this.channel.bind("notifications-read-all",e=>{console.log(" All notifications marked as read:",e),this.notifyListeners("notifications-read-all",e)}))}async handleReconnection(e){if(this.reconnectAttempts>=this.maxReconnectAttempts){console.error("Max reconnection attempts reached");return}this.reconnectAttempts++;const n=this.reconnectDelay*Math.pow(2,this.reconnectAttempts-1);console.log(`Attempting to reconnect in ${n}ms (attempt ${this.reconnectAttempts})`),setTimeout(()=>{this.initializePusher(e)},n)}disconnectPusher(){this.channel&&(this.channel.unbind_all(),this.pusher.unsubscribe(this.channel.name)),this.pusher&&this.pusher.disconnect(),this.pusher=null,this.channel=null,this.isConnected=!1}addEventListener(e){return this.listeners.add(e),()=>this.listeners.delete(e)}notifyListeners(e,n){this.listeners.forEach(s=>{try{s(e,n)}catch(r){console.error("Error in notification listener:",r)}})}getAuthHeaders(){return{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}}async getNotifications(e=1,n=10,s="-createdAt"){try{return(await je.get(`${this.baseURL}/notifications`,{params:{page:e,limit:n,sort:s},headers:this.getAuthHeaders()})).data}catch(r){throw console.error("Failed to fetch notifications:",r),this.handleError(r)}}async getUnreadCount(){try{return(await je.get(`${this.baseURL}/notifications/unread-count`,{headers:this.getAuthHeaders()})).data}catch(e){throw console.error("Failed to fetch unread count:",e),this.handleError(e)}}async markAsRead(e){try{return(await je.put(`${this.baseURL}/notifications/${e}/read`,{},{headers:this.getAuthHeaders()})).data}catch(n){throw console.error("Failed to mark notification as read:",n),this.handleError(n)}}async markAllAsRead(){try{return(await je.put(`${this.baseURL}/notifications/read-all`,{},{headers:this.getAuthHeaders()})).data}catch(e){throw console.error("Failed to mark all notifications as read:",e),this.handleError(e)}}async deleteNotification(e){try{return(await je.delete(`${this.baseURL}/notifications/${e}`,{headers:this.getAuthHeaders()})).data}catch(n){throw console.error("Failed to delete notification:",n),this.handleError(n)}}async createNotification(e){try{return(await je.post(`${this.baseURL}/notifications`,e,{headers:this.getAuthHeaders()})).data}catch(n){throw console.error("Failed to create notification:",n),this.handleError(n)}}handleError(e){var n;return e.response?{message:((n=e.response.data)==null?void 0:n.message)||"Server error occurred",status:e.response.status,data:e.response.data}:e.request?{message:"Network error - please check your connection",status:0,data:null}:{message:e.message||"An unexpected error occurred",status:-1,data:null}}getConnectionStatus(){var e,n;return{isConnected:this.isConnected,reconnectAttempts:this.reconnectAttempts,pusherState:((n=(e=this.pusher)==null?void 0:e.connection)==null?void 0:n.state)||"disconnected"}}}const Hn=new t4,n4={notifications:[],unreadCount:0,loading:!1,error:null,connectionStatus:"disconnected",filters:{type:"all",read:"all",dateRange:"all"},pagination:{page:1,limit:10,total:0,hasMore:!1}},Ne={SET_LOADING:"SET_LOADING",SET_ERROR:"SET_ERROR",SET_NOTIFICATIONS:"SET_NOTIFICATIONS",ADD_NOTIFICATION:"ADD_NOTIFICATION",UPDATE_NOTIFICATION:"UPDATE_NOTIFICATION",REMOVE_NOTIFICATION:"REMOVE_NOTIFICATION",SET_UNREAD_COUNT:"SET_UNREAD_COUNT",MARK_AS_READ:"MARK_AS_READ",MARK_ALL_AS_READ:"MARK_ALL_AS_READ",SET_CONNECTION_STATUS:"SET_CONNECTION_STATUS",SET_FILTERS:"SET_FILTERS",SET_PAGINATION:"SET_PAGINATION",CLEAR_ALL:"CLEAR_ALL"};function s4(t,e){switch(e.type){case Ne.SET_LOADING:return{...t,loading:e.payload};case Ne.SET_ERROR:return{...t,error:e.payload,loading:!1};case Ne.SET_NOTIFICATIONS:return{...t,notifications:e.payload.notifications||[],pagination:{...t.pagination,...e.payload.pagination},loading:!1,error:null};case Ne.ADD_NOTIFICATION:return{...t,notifications:[e.payload,...t.notifications],unreadCount:t.unreadCount+(e.payload.read?0:1)};case Ne.UPDATE_NOTIFICATION:return{...t,notifications:t.notifications.map(s=>s.id===e.payload.id?{...s,...e.payload}:s)};case Ne.REMOVE_NOTIFICATION:const n=t.notifications.find(s=>s.id===e.payload);return{...t,notifications:t.notifications.filter(s=>s.id!==e.payload),unreadCount:n&&!n.read?t.unreadCount-1:t.unreadCount};case Ne.SET_UNREAD_COUNT:return{...t,unreadCount:e.payload};case Ne.MARK_AS_READ:return{...t,notifications:t.notifications.map(s=>s.id===e.payload?{...s,read:!0,readAt:new Date().toISOString()}:s),unreadCount:Math.max(0,t.unreadCount-1)};case Ne.MARK_ALL_AS_READ:return{...t,notifications:t.notifications.map(s=>({...s,read:!0,readAt:new Date().toISOString()})),unreadCount:0};case Ne.SET_CONNECTION_STATUS:return{...t,connectionStatus:e.payload};case Ne.SET_FILTERS:return{...t,filters:{...t.filters,...e.payload},pagination:{...t.pagination,page:1}};case Ne.SET_PAGINATION:return{...t,pagination:{...t.pagination,...e.payload}};case Ne.CLEAR_ALL:return{...t,notifications:[],unreadCount:0};default:return t}}const fj=b.createContext(),r4=({children:t})=>{const[e,n]=b.useReducer(s4,n4),{user:s,isAuthenticated:r}=Cu();b.useEffect(()=>(r&&(s!=null&&s.id)?i():c(),()=>c()),[r,s==null?void 0:s.id]);const i=b.useCallback(async()=>{try{n({type:Ne.SET_LOADING,payload:!0}),await Hn.initializePusher(s.id);const m=Hn.addEventListener(o);return await u(),await h(),m}catch(m){console.error("Failed to initialize notifications:",m),n({type:Ne.SET_ERROR,payload:m.message})}},[s==null?void 0:s.id]),o=b.useCallback((m,g)=>{switch(m){case"notification":n({type:Ne.ADD_NOTIFICATION,payload:g}),l(g);break;case"notification-update":n({type:Ne.UPDATE_NOTIFICATION,payload:g});break;case"notifications-read-all":n({type:Ne.MARK_ALL_AS_READ});break;case"connection":n({type:Ne.SET_CONNECTION_STATUS,payload:g.status});break;default:console.log("Unknown notification event:",m,g)}},[]),l=b.useCallback(m=>{const g={position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0};switch(m.type){case"success":se.success(m.message,g);break;case"error":se.error(m.message,g);break;case"warning":se.warning(m.message,g);break;case"info":case"alert":default:se.info(m.message,g);break}},[]),c=b.useCallback(()=>{Hn.disconnectPusher(),n({type:Ne.CLEAR_ALL}),n({type:Ne.SET_CONNECTION_STATUS,payload:"disconnected"})},[]),u=b.useCallback(async(m=1)=>{try{n({type:Ne.SET_LOADING,payload:!0});const g=await Hn.getNotifications(m,e.pagination.limit,"-createdAt");g.success&&n({type:Ne.SET_NOTIFICATIONS,payload:{notifications:m===1?g.data:[...e.notifications,...g.data],pagination:{page:g.pagination.page,total:g.pagination.total,hasMore:g.pagination.hasMore}}})}catch(g){n({type:Ne.SET_ERROR,payload:g.message})}},[e.pagination.limit,e.notifications]),h=b.useCallback(async()=>{try{const m=await Hn.getUnreadCount();m.success&&n({type:Ne.SET_UNREAD_COUNT,payload:m.count})}catch(m){console.error("Failed to fetch unread count:",m)}},[]),d=b.useCallback(async m=>{try{await Hn.markAsRead(m),n({type:Ne.MARK_AS_READ,payload:m})}catch(g){console.error("Failed to mark notification as read:",g),n({type:Ne.SET_ERROR,payload:g.message})}},[]),f=b.useCallback(async()=>{try{await Hn.markAllAsRead(),n({type:Ne.MARK_ALL_AS_READ})}catch(m){console.error("Failed to mark all notifications as read:",m),n({type:Ne.SET_ERROR,payload:m.message})}},[]),x=b.useCallback(async m=>{try{await Hn.deleteNotification(m),n({type:Ne.REMOVE_NOTIFICATION,payload:m})}catch(g){console.error("Failed to delete notification:",g),n({type:Ne.SET_ERROR,payload:g.message})}},[]),p=b.useCallback(m=>{n({type:Ne.SET_FILTERS,payload:m})},[]),y=b.useCallback(()=>{e.pagination.hasMore&&!e.loading&&u(e.pagination.page+1)},[e.pagination.hasMore,e.loading,e.pagination.page,u]),w={...e,fetchNotifications:u,markAsRead:d,markAllAsRead:f,deleteNotification:x,setFilters:p,loadMore:y,connectionStatus:Hn.getConnectionStatus()};return a.jsx(fj.Provider,{value:w,children:t})},pj=()=>{const t=b.useContext(fj);if(!t)throw new Error("useNotifications must be used within a NotificationProvider");return t},i4=({notification:t,onClick:e,onDelete:n,onMarkAsRead:s,compact:r=!1,showActions:i=!0})=>{const[o,l]=b.useState(!1),c=x=>{const p={size:r?16:20};switch(x){case"success":return a.jsx(Ws,{...p,className:"icon-success"});case"error":return a.jsx(uo,{...p,className:"icon-error"});case"warning":return a.jsx(Mi,{...p,className:"icon-warning"});case"alert":return a.jsx(jn,{...p,className:"icon-alert"});case"info":default:return a.jsx(Ym,{...p,className:"icon-info"})}},u=x=>{const p=new Date(x),w=Math.floor((new Date-p)/(1e3*60));return w<1?"Just now":w<60?`${w}m ago`:w<1440?`${Math.floor(w/60)}h ago`:`${Math.floor(w/1440)}d ago`},h=()=>{e&&e(t)},d=x=>{x.stopPropagation(),n&&n(x)},f=x=>{x.stopPropagation(),s&&s(t.id)};return a.jsxs($.div,{className:`notification-item ${r?"compact":""} ${t.read?"read":"unread"} ${t.type}`,onClick:h,onHoverStart:()=>l(!0),onHoverEnd:()=>l(!1),whileHover:{backgroundColor:"var(--notification-hover-bg)"},layout:!0,children:[!t.read&&a.jsx("div",{className:"unread-indicator"}),a.jsxs("div",{className:"notification-content",children:[a.jsx("div",{className:"notification-icon",children:c(t.type)}),a.jsxs("div",{className:"notification-text",children:[a.jsx("div",{className:"notification-title",children:t.title}),t.message&&a.jsx("div",{className:"notification-message",children:t.message}),a.jsxs("div",{className:"notification-meta",children:[a.jsxs("span",{className:"notification-time",children:[a.jsx(nn,{size:12}),u(t.createdAt)]}),t.link&&a.jsxs("span",{className:"notification-link",children:[a.jsx(Hm,{size:12}),"View details"]})]})]}),i&&a.jsxs("div",{className:`notification-actions ${o?"visible":""}`,children:[!t.read&&s&&a.jsx($.button,{className:"action-btn mark-read",onClick:f,whileHover:{scale:1.1},whileTap:{scale:.9},title:"Mark as read",children:a.jsx(Ws,{size:14})}),n&&a.jsx($.button,{className:"action-btn delete",onClick:d,whileHover:{scale:1.1},whileTap:{scale:.9},title:"Delete notification",children:a.jsx(ds,{size:14})})]})]})]})},mj=b.createContext(),a4=({children:t})=>{const e=()=>{const c=localStorage.getItem("sidebarCollapsed");return c!==null?JSON.parse(c):window.innerWidth<=768},[n,s]=b.useState(e),[r,i]=b.useState(window.innerWidth<=768);b.useEffect(()=>{const c=()=>{const u=window.innerWidth<=768;i(u),u&&s(h=>h||(localStorage.setItem("sidebarCollapsed","true"),!0))};return c(),window.addEventListener("resize",c),()=>window.removeEventListener("resize",c)},[]);const l={isCollapsed:n,setIsCollapsed:s,isMobile:r,toggleSidebar:()=>{s(c=>{const u=!c;return localStorage.setItem("sidebarCollapsed",JSON.stringify(u)),u})},expandSidebar:()=>{s(()=>(localStorage.setItem("sidebarCollapsed","false"),!1))},collapseSidebar:()=>{s(()=>(localStorage.setItem("sidebarCollapsed","true"),!0))}};return a.jsx(mj.Provider,{value:l,children:t})},zu=()=>{const t=b.useContext(mj);if(t===void 0)throw new Error("useSidebar must be used within a SidebarProvider");return t},gj=b.createContext(),ug=()=>{const t=b.useContext(gj);if(t===void 0)throw new Error("useVoice must be used within a VoiceProvider");return t},o4=({children:t})=>{const e=hs(),[n,s]=b.useState(!1),[r,i]=b.useState(!1),[o,l]=b.useState(""),[c,u]=b.useState(null),[h,d]=b.useState(!1);b.useEffect(()=>{if("webkitSpeechRecognition"in window||"SpeechRecognition"in window){const S=window.SpeechRecognition||window.webkitSpeechRecognition,N=new S;N.continuous=!0,N.interimResults=!0,N.lang="en-US",u(N),d(!0)}else console.warn("Speech recognition not supported in this browser"),d(!1)},[]);const f=b.useCallback(S=>{const N=S.toLowerCase().trim();console.log("Processing voice command:",N),N.includes("dashboard")||N.includes("home")?(e("/dashboard"),x("Navigating to dashboard")):N.includes("charts")||N.includes("chart")?(e("/charts"),x("Opening charts")):N.includes("portfolio")?(e("/portfolio"),x("Opening portfolio")):N.includes("watchlist")||N.includes("watch list")?(e("/watchlist"),x("Opening watchlist")):N.includes("orders")||N.includes("order")?(e("/orders"),x("Opening orders")):N.includes("history")?(e("/history"),x("Opening history")):N.includes("news")?(e("/news"),x("Opening news")):N.includes("notifications")||N.includes("notification")?(e("/notifications"),x("Opening notifications")):N.includes("saytrix")||N.includes("chat")?(e("/saytrix"),x("Opening Saytrix AI assistant")):N.includes("profile")?(e("/profile"),x("Opening profile")):N.includes("settings")||N.includes("setting")?(e("/settings"),x("Opening settings")):N.includes("stop")||N.includes("exit")||N.includes("close")?(w(),x("Voice mode deactivated")):x("Command not recognized. Try saying dashboard, charts, portfolio, or other navigation commands.")},[e]),x=b.useCallback(S=>{if("speechSynthesis"in window){const N=new SpeechSynthesisUtterance(S);N.rate=.9,N.pitch=1,N.volume=.8,speechSynthesis.speak(N)}},[]),p=b.useCallback(()=>{!c||!h||(s(!0),c.onresult=S=>{let N="";for(let C=S.resultIndex;C<S.results.length;C++){const E=S.results[C][0].transcript;S.results[C].isFinal&&(N+=E)}N&&(l(N),N.toLowerCase().includes("saytrix")&&(console.log("Wake word detected:",N),y()))},c.onerror=S=>{console.error("Speech recognition error:",S.error),S.error==="not-allowed"&&alert("Microphone access denied. Please allow microphone access to use voice commands.")},c.onend=()=>{n&&!r&&setTimeout(()=>{n&&c.start()},100)},c.start())},[c,h,n,r]),y=b.useCallback(()=>{i(!0),x("Saytrix activated. What would you like to do?"),c&&(c.onresult=S=>{let N="";for(let C=S.resultIndex;C<S.results.length;C++){const E=S.results[C][0].transcript;S.results[C].isFinal&&(N+=E)}N&&(l(N),f(N),setTimeout(()=>{i(!1),p()},2e3))},c.start())},[c,f,x,p]),w=b.useCallback(()=>{s(!1),i(!1),c&&c.stop()},[c]),m=b.useCallback(()=>{if(!h){alert("Voice commands are not supported in this browser. Please use Chrome, Edge, or Safari.");return}r?w():y()},[h,r,y,w]);b.useEffect(()=>(h&&!n&&!r&&p(),()=>{c&&c.stop()}),[h,p]);const g={isListening:n,isVoiceModeActive:r,transcript:o,isSupported:h,triggerVoiceMode:m,stopListening:w,speak:x,activateVoiceMode:y};return a.jsx(gj.Provider,{value:g,children:t})},l4=({position:t="navbar",size:e="small",showLabel:n=!1,className:s=""})=>{const{isVoiceModeActive:r,isListening:i,isSupported:o,triggerVoiceMode:l}=ug(),c=()=>{l()};return o?a.jsxs("button",{className:`saytrix-trigger-btn ${t} ${e} ${s} ${r?"active":""} ${i?"listening":""}`,onClick:c,title:r?"Deactivate Saytrix AI":"Activate Saytrix AI","aria-label":r?"Deactivate Saytrix AI voice assistant":"Activate Saytrix AI voice assistant",children:[r?a.jsx(Xb,{}):a.jsx(Nu,{}),n&&a.jsx("span",{children:"Saytrix"}),i&&a.jsx("div",{className:"pulse-indicator"})]}):null},Oe="http://localhost:5001/api",c4={BASE:Oe,AUTH:{LOGIN:`${Oe}/api/auth/login`,REGISTER:`${Oe}/api/auth/register`,LOGOUT:`${Oe}/api/auth/logout`,REFRESH:`${Oe}/api/auth/refresh`,PROFILE:`${Oe}/api/auth/profile`},USER:{PROFILE:`${Oe}/api/user/profile`,UPDATE:`${Oe}/api/user/update`,UPLOAD_AVATAR:`${Oe}/api/user/upload-avatar`},STOCKS:{SEARCH:`${Oe}/api/stocks/search`,QUOTE:`${Oe}/api/stocks/quote`,CHART:`${Oe}/api/stocks/chart`,NEWS:`${Oe}/api/stocks/news`},PORTFOLIO:{GET:`${Oe}/api/portfolio`,BUY:`${Oe}/api/portfolio/buy`,SELL:`${Oe}/api/portfolio/sell`,HISTORY:`${Oe}/api/portfolio/history`},WATCHLIST:{GET:`${Oe}/api/watchlist`,ADD:`${Oe}/api/watchlist/add`,REMOVE:`${Oe}/api/watchlist/remove`},SAYTRIX:{CHAT:`${Oe}/api/saytrix/chat`,START:`${Oe}/api/saytrix/start`,CLEAR:`${Oe}/api/saytrix/clear`},UPLOADS:t=>`${Oe}/uploads/${t}`,PROFILE_IMAGES:t=>`${Oe}/uploads/profiles/${t}`},yj=()=>{const{isCollapsed:t,isMobile:e,toggleSidebar:n}=zu(),{unreadCount:s}=pj(),r=Tn(),i=hs(),{isAuthenticated:o,logout:l}=Cu(),[c,u]=b.useState(!1),[h,d]=b.useState(!1),[f,x]=b.useState({fullName:"User",email:"",profileImage:"https://randomuser.me/api/portraits/lego/1.jpg",role:"Member"});b.useEffect(()=>{(async()=>{if(await new Promise(g=>setTimeout(g,100)),!o){u(!0);return}const m={fullName:localStorage.getItem("userFullName")||localStorage.getItem("userName")||"User",email:localStorage.getItem("userEmail")||"",profileImage:localStorage.getItem("userProfileImage")?c4.UPLOADS(localStorage.getItem("userProfileImage")):"https://randomuser.me/api/portraits/lego/1.jpg",role:"Member"};x(m),u(!0)})()},[o]);const p=w=>{w.preventDefault(),w.stopPropagation(),d(!0),n(),setTimeout(()=>d(!1),300)},y=()=>{l(),i("/login")};return b.useEffect(()=>{(()=>{const m=document.documentElement;e?m.style.setProperty("--sidebar-current-width","0px"):m.style.setProperty("--sidebar-current-width",t?"80px":"280px")})()},[t,e]),a.jsxs("div",{className:`sidebar ${t?"collapsed":""} ${e?"mobile":""} ${c?"loaded":"loading"} ${h?"animating":""}`,role:"navigation","aria-label":"Main navigation",children:[a.jsxs("div",{className:"top-section",children:[a.jsx("button",{className:"toggle-btn",onClick:p,type:"button","aria-label":t?"Expand sidebar navigation":"Collapse sidebar navigation",title:t?"Expand sidebar":"Collapse sidebar","aria-expanded":!t,children:a.jsx(Kb,{})}),!t&&a.jsxs("div",{className:"logo-section",children:[a.jsx("h1",{className:"logo",role:"banner",children:" TradeBro"}),a.jsx(l4,{position:"navbar",size:"small",showLabel:!1,className:"sidebar-voice-btn"})]})]}),!t&&a.jsxs("div",{className:"user-profile",children:[a.jsx("div",{className:"user-avatar",children:a.jsx("div",{className:"avatar-symbol",children:""})}),a.jsxs("div",{className:"user-info",children:[a.jsx("h3",{className:"user-name",children:f.fullName}),a.jsx("p",{className:"user-role",children:f.role})]})]}),a.jsx("nav",{role:"navigation","aria-label":"Main menu",children:a.jsxs("ul",{className:"sidebar-links",children:[a.jsx("li",{children:a.jsxs(Ie,{to:"/dashboard",className:`sidebar-link ${r.pathname==="/dashboard"?"active":""}`,"aria-current":r.pathname==="/dashboard"?"page":void 0,title:"Dashboard",children:[a.jsx(Lt,{"aria-hidden":"true"}),!t&&a.jsx("span",{children:"Dashboard"})]})}),a.jsx("li",{children:a.jsxs(Ie,{to:"/charts",className:`sidebar-link ${r.pathname==="/charts"?"active":""}`,children:[a.jsx(Xe,{}),!t&&a.jsx("span",{children:"Charts"})]})}),a.jsx("li",{children:a.jsxs(Ie,{to:"/portfolio",className:`sidebar-link ${r.pathname==="/portfolio"?"active":""}`,children:[a.jsx(Ps,{}),!t&&a.jsx("span",{children:"Portfolio"})]})}),a.jsx("li",{children:a.jsxs(Ie,{to:"/watchlist",className:`sidebar-link ${r.pathname==="/watchlist"?"active":""}`,children:[a.jsx(Lc,{}),!t&&a.jsx("span",{children:"Watchlist"})]})}),a.jsx("li",{children:a.jsxs(Ie,{to:"/orders",className:`sidebar-link ${r.pathname==="/orders"?"active":""}`,children:[a.jsx(Bt,{}),!t&&a.jsx("span",{children:"Orders"})]})}),a.jsx("li",{children:a.jsxs(Ie,{to:"/history",className:`sidebar-link ${r.pathname==="/history"?"active":""}`,children:[a.jsx(nn,{}),!t&&a.jsx("span",{children:"History"})]})}),a.jsx("li",{children:a.jsxs(Ie,{to:"/news",className:`sidebar-link ${r.pathname==="/news"?"active":""}`,children:[a.jsx(NI,{}),!t&&a.jsx("span",{children:"News"})]})}),a.jsx("li",{children:a.jsx(Ie,{to:"/notifications",className:`sidebar-link ${r.pathname==="/notifications"?"active":""}`,children:a.jsxs("div",{className:"sidebar-link-content",children:[a.jsxs("div",{className:"sidebar-icon-wrapper",children:[a.jsx(bi,{}),s>0&&a.jsx("span",{className:"notification-badge",children:s>99?"99+":s})]}),!t&&a.jsx("span",{children:"Notifications"})]})})}),a.jsx("li",{children:a.jsxs(Ie,{to:"/saytrix",className:`sidebar-link ${r.pathname==="/saytrix"||r.pathname==="/chatbot"?"active":""} highlight`,children:[a.jsx(LI,{}),!t&&a.jsx("span",{children:"Saytrix AI"})]})})]})}),a.jsxs("div",{className:"sidebar-bottom",children:[a.jsxs("div",{className:"sidebar-actions",children:[a.jsxs(Ie,{to:"/profile",className:`sidebar-link ${r.pathname==="/profile"?"active":""}`,children:[a.jsx(ls,{}),!t&&a.jsx("span",{children:"Profile"})]}),a.jsxs(Ie,{to:"/settings",className:`sidebar-link ${r.pathname==="/settings"?"active":""}`,children:[a.jsx(co,{}),!t&&a.jsx("span",{children:"Settings"})]}),a.jsxs("button",{onClick:y,className:"sidebar-link logout-btn","aria-label":"Logout from TradeBro",title:"Logout from TradeBro",children:[a.jsx(Qb,{}),!t&&a.jsx("span",{children:"Logout"})]})]}),!t&&a.jsxs("div",{className:"sidebar-footer",children:[a.jsx("p",{className:"copyright",children:" 2024 TradeBro "}),a.jsx("p",{className:"version",children:"v1.0.0  "})]})]})]})},u4=({user:t,theme:e})=>{const[n,s]=b.useState(""),[r,i]=b.useState(new Set),[o,l]=b.useState(!1),[c,u]=b.useState(!1),{notifications:h,unreadCount:d,loading:f,error:x,filters:p,pagination:y,connectionStatus:w,fetchNotifications:m,markAsRead:g,markAllAsRead:S,deleteNotification:N,setFilters:C,loadMore:E}=pj();b.useEffect(()=>{m()},[m]);const L=h.filter(F=>{if(n){const W=n.toLowerCase();if(!F.title.toLowerCase().includes(W)&&!F.message.toLowerCase().includes(W))return!1}return!(p.type!=="all"&&F.type!==p.type||p.read==="read"&&!F.read||p.read==="unread"&&F.read)}),P=F=>{const W=new Set(r);W.has(F)?W.delete(F):W.add(F),i(W)},R=()=>{r.size===L.length?i(new Set):i(new Set(L.map(F=>F.id)))},_=async()=>{const F=Array.from(r).map(W=>g(W));await Promise.all(F),i(new Set)},I=async()=>{const F=Array.from(r).map(W=>N(W));await Promise.all(F),i(new Set)},O=(F,W)=>{C({[F]:W})},z=()=>{m()};return a.jsxs("div",{className:"notifications-page",children:[a.jsx(yj,{}),a.jsxs("div",{className:"notifications-content",children:[a.jsxs("div",{className:"notifications-header",children:[a.jsxs("div",{className:"header-left",children:[a.jsxs("div",{className:"page-title",children:[a.jsx(bi,{size:24}),a.jsx("h1",{children:"Notifications"}),d>0&&a.jsx("span",{className:"unread-badge",children:d})]}),a.jsxs("div",{className:"connection-status",children:[a.jsx("div",{className:`status-indicator ${w}`}),a.jsx("span",{className:"status-text",children:w==="connected"?"Live":"Offline"})]})]}),a.jsxs("div",{className:"header-actions",children:[a.jsx($.button,{className:"action-btn refresh",onClick:z,whileHover:{scale:1.05},whileTap:{scale:.95},disabled:f,children:a.jsx(jt,{className:f?"spinning":""})}),a.jsx($.button,{className:"action-btn filter",onClick:()=>l(!o),whileHover:{scale:1.05},whileTap:{scale:.95},children:a.jsx(wu,{})}),d>0&&a.jsxs($.button,{className:"action-btn mark-all",onClick:S,whileHover:{scale:1.05},whileTap:{scale:.95},children:[a.jsx(f0,{}),"Mark all read"]})]})]}),a.jsxs("div",{className:"notifications-controls",children:[a.jsxs("div",{className:"search-container",children:[a.jsx(ju,{className:"search-icon"}),a.jsx("input",{type:"text",placeholder:"Search notifications...",value:n,onChange:F=>s(F.target.value),className:"search-input"})]}),a.jsx(Mt,{children:o&&a.jsxs($.div,{className:"filters-container",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},children:[a.jsxs("div",{className:"filter-group",children:[a.jsx("label",{children:"Type:"}),a.jsxs("select",{value:p.type,onChange:F=>O("type",F.target.value),children:[a.jsx("option",{value:"all",children:"All Types"}),a.jsx("option",{value:"info",children:"Info"}),a.jsx("option",{value:"success",children:"Success"}),a.jsx("option",{value:"warning",children:"Warning"}),a.jsx("option",{value:"error",children:"Error"}),a.jsx("option",{value:"alert",children:"Alert"})]})]}),a.jsxs("div",{className:"filter-group",children:[a.jsx("label",{children:"Status:"}),a.jsxs("select",{value:p.read,onChange:F=>O("read",F.target.value),children:[a.jsx("option",{value:"all",children:"All"}),a.jsx("option",{value:"unread",children:"Unread"}),a.jsx("option",{value:"read",children:"Read"})]})]})]})})]}),a.jsx(Mt,{children:r.size>0&&a.jsxs($.div,{className:"bulk-actions",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:[a.jsxs("div",{className:"bulk-info",children:[a.jsx("input",{type:"checkbox",checked:r.size===L.length,onChange:R}),a.jsxs("span",{children:[r.size," selected"]})]}),a.jsxs("div",{className:"bulk-buttons",children:[a.jsxs("button",{onClick:_,children:[a.jsx(f0,{})," Mark as read"]}),a.jsxs("button",{onClick:I,className:"danger",children:[a.jsx(tN,{})," Delete"]})]})]})}),a.jsx("div",{className:"notifications-list",children:x?a.jsxs("div",{className:"error-state",children:[a.jsx("h3",{children:"Failed to load notifications"}),a.jsx("p",{children:x}),a.jsx("button",{onClick:z,children:"Try again"})]}):L.length>0?a.jsxs(a.Fragment,{children:[L.map((F,W)=>a.jsxs($.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:W*.05},className:"notification-wrapper",children:[c&&a.jsx("input",{type:"checkbox",checked:r.has(F.id),onChange:()=>P(F.id),className:"notification-checkbox"}),a.jsx(i4,{notification:F,onClick:()=>g(F.id),onDelete:()=>N(F.id),onMarkAsRead:g,compact:!1,showActions:!0})]},F.id)),y.hasMore&&a.jsx("div",{className:"load-more-container",children:a.jsx($.button,{className:"load-more-btn",onClick:E,disabled:f,whileHover:{scale:1.02},whileTap:{scale:.98},children:f?"Loading...":"Load More"})})]}):a.jsxs("div",{className:"empty-state",children:[a.jsx(bi,{size:48}),a.jsx("h3",{children:"No notifications found"}),a.jsx("p",{children:n||p.type!=="all"||p.read!=="all"?"Try adjusting your search or filters":"You're all caught up! New notifications will appear here."})]})})]})]})},h4=({user:t,theme:e})=>{const n=()=>{console.log("Toggle theme")},[s,r]=b.useState("profile"),[i,o]=b.useState(!1),[l,c]=b.useState(!1),u=[{id:"profile",name:"Profile",icon:ls},{id:"notifications",name:"Notifications",icon:bi},{id:"security",name:"Security",icon:Hs},{id:"preferences",name:"Preferences",icon:co}],[h,d]=b.useState({firstName:"John",lastName:"Doe",email:"john.doe@example.com",phone:"+91 98765 43210",bio:"Passionate trader and investor",location:"Mumbai, India"}),[f,x]=b.useState({emailNotifications:!0,pushNotifications:!0,smsNotifications:!1,priceAlerts:!0,newsAlerts:!0,portfolioUpdates:!0,marketOpen:!1,weeklyReports:!0}),[p,y]=b.useState({twoFactorAuth:!1,loginAlerts:!0,sessionTimeout:"30",allowedDevices:3}),[w,m]=b.useState({theme:e,language:"en",currency:"INR",timezone:"Asia/Kolkata",dateFormat:"DD/MM/YYYY",numberFormat:"Indian",defaultPage:"dashboard"}),g=async()=>{o(!0),await new Promise(O=>setTimeout(O,1500)),o(!1)},S=(O,z)=>{d(F=>({...F,[O]:z}))},N=O=>{x(z=>({...z,[O]:!z[O]}))},C=(O,z)=>{y(F=>({...F,[O]:z}))},E=(O,z)=>{m(F=>({...F,[O]:z})),O==="theme"&&z!==e&&n()},L=()=>a.jsxs("div",{className:"settings-section",children:[a.jsx("h3",{className:"section-title",children:"Profile Information"}),a.jsxs("div",{className:"form-grid",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{className:"form-label",children:"First Name"}),a.jsx("input",{type:"text",className:"form-input",value:h.firstName,onChange:O=>S("firstName",O.target.value)})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{className:"form-label",children:"Last Name"}),a.jsx("input",{type:"text",className:"form-input",value:h.lastName,onChange:O=>S("lastName",O.target.value)})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{className:"form-label",children:"Email Address"}),a.jsx("input",{type:"email",className:"form-input",value:h.email,onChange:O=>S("email",O.target.value)})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{className:"form-label",children:"Phone Number"}),a.jsx("input",{type:"tel",className:"form-input",value:h.phone,onChange:O=>S("phone",O.target.value)})]}),a.jsxs("div",{className:"form-group full-width",children:[a.jsx("label",{className:"form-label",children:"Bio"}),a.jsx("textarea",{className:"form-textarea",rows:"3",value:h.bio,onChange:O=>S("bio",O.target.value)})]}),a.jsxs("div",{className:"form-group full-width",children:[a.jsx("label",{className:"form-label",children:"Location"}),a.jsx("input",{type:"text",className:"form-input",value:h.location,onChange:O=>S("location",O.target.value)})]})]})]}),P=()=>a.jsxs("div",{className:"settings-section",children:[a.jsx("h3",{className:"section-title",children:"Notification Preferences"}),a.jsxs("div",{className:"notification-groups",children:[a.jsxs("div",{className:"notification-group",children:[a.jsx("h4",{className:"group-title",children:"Communication"}),a.jsxs("div",{className:"toggle-list",children:[a.jsxs("div",{className:"toggle-item",children:[a.jsxs("div",{className:"toggle-info",children:[a.jsx(bu,{className:"toggle-icon"}),a.jsxs("div",{children:[a.jsx("div",{className:"toggle-label",children:"Email Notifications"}),a.jsx("div",{className:"toggle-description",children:"Receive updates via email"})]})]}),a.jsx("div",{className:`toggle-switch ${f.emailNotifications?"on":"off"}`,onClick:()=>N("emailNotifications"),children:a.jsx("div",{className:"toggle-thumb"})})]}),a.jsxs("div",{className:"toggle-item",children:[a.jsxs("div",{className:"toggle-info",children:[a.jsx(bi,{className:"toggle-icon"}),a.jsxs("div",{children:[a.jsx("div",{className:"toggle-label",children:"Push Notifications"}),a.jsx("div",{className:"toggle-description",children:"Browser push notifications"})]})]}),a.jsx("div",{className:`toggle-switch ${f.pushNotifications?"on":"off"}`,onClick:()=>N("pushNotifications"),children:a.jsx("div",{className:"toggle-thumb"})})]}),a.jsxs("div",{className:"toggle-item",children:[a.jsxs("div",{className:"toggle-info",children:[a.jsx(DI,{className:"toggle-icon"}),a.jsxs("div",{children:[a.jsx("div",{className:"toggle-label",children:"SMS Notifications"}),a.jsx("div",{className:"toggle-description",children:"Text message alerts"})]})]}),a.jsx("div",{className:`toggle-switch ${f.smsNotifications?"on":"off"}`,onClick:()=>N("smsNotifications"),children:a.jsx("div",{className:"toggle-thumb"})})]})]})]}),a.jsxs("div",{className:"notification-group",children:[a.jsx("h4",{className:"group-title",children:"Market Alerts"}),a.jsxs("div",{className:"toggle-list",children:[a.jsxs("div",{className:"toggle-item",children:[a.jsxs("div",{className:"toggle-info",children:[a.jsx(Nt,{className:"toggle-icon"}),a.jsxs("div",{children:[a.jsx("div",{className:"toggle-label",children:"Price Alerts"}),a.jsx("div",{className:"toggle-description",children:"Stock price movement alerts"})]})]}),a.jsx("div",{className:`toggle-switch ${f.priceAlerts?"on":"off"}`,onClick:()=>N("priceAlerts"),children:a.jsx("div",{className:"toggle-thumb"})})]}),a.jsxs("div",{className:"toggle-item",children:[a.jsxs("div",{className:"toggle-info",children:[a.jsx(Su,{className:"toggle-icon"}),a.jsxs("div",{children:[a.jsx("div",{className:"toggle-label",children:"News Alerts"}),a.jsx("div",{className:"toggle-description",children:"Market news and updates"})]})]}),a.jsx("div",{className:`toggle-switch ${f.newsAlerts?"on":"off"}`,onClick:()=>N("newsAlerts"),children:a.jsx("div",{className:"toggle-thumb"})})]}),a.jsxs("div",{className:"toggle-item",children:[a.jsxs("div",{className:"toggle-info",children:[a.jsx(ls,{className:"toggle-icon"}),a.jsxs("div",{children:[a.jsx("div",{className:"toggle-label",children:"Portfolio Updates"}),a.jsx("div",{className:"toggle-description",children:"Portfolio performance updates"})]})]}),a.jsx("div",{className:`toggle-switch ${f.portfolioUpdates?"on":"off"}`,onClick:()=>N("portfolioUpdates"),children:a.jsx("div",{className:"toggle-thumb"})})]})]})]})]})]}),R=()=>a.jsxs("div",{className:"settings-section",children:[a.jsx("h3",{className:"section-title",children:"Security & Privacy"}),a.jsxs("div",{className:"security-groups",children:[a.jsxs("div",{className:"security-group",children:[a.jsx("h4",{className:"group-title",children:"Authentication"}),a.jsxs("div",{className:"security-item",children:[a.jsxs("div",{className:"security-info",children:[a.jsx(Hs,{className:"security-icon"}),a.jsxs("div",{children:[a.jsx("div",{className:"security-label",children:"Two-Factor Authentication"}),a.jsx("div",{className:"security-description",children:"Add an extra layer of security"})]})]}),a.jsx("div",{className:`toggle-switch ${p.twoFactorAuth?"on":"off"}`,onClick:()=>C("twoFactorAuth",!p.twoFactorAuth),children:a.jsx("div",{className:"toggle-thumb"})})]}),a.jsxs("div",{className:"security-item",children:[a.jsxs("div",{className:"security-info",children:[a.jsx(bi,{className:"security-icon"}),a.jsxs("div",{children:[a.jsx("div",{className:"security-label",children:"Login Alerts"}),a.jsx("div",{className:"security-description",children:"Get notified of new logins"})]})]}),a.jsx("div",{className:`toggle-switch ${p.loginAlerts?"on":"off"}`,onClick:()=>C("loginAlerts",!p.loginAlerts),children:a.jsx("div",{className:"toggle-thumb"})})]})]}),a.jsxs("div",{className:"security-group",children:[a.jsx("h4",{className:"group-title",children:"Session Management"}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{className:"form-label",children:"Session Timeout (minutes)"}),a.jsxs("select",{className:"form-select",value:p.sessionTimeout,onChange:O=>C("sessionTimeout",O.target.value),children:[a.jsx("option",{value:"15",children:"15 minutes"}),a.jsx("option",{value:"30",children:"30 minutes"}),a.jsx("option",{value:"60",children:"1 hour"}),a.jsx("option",{value:"120",children:"2 hours"}),a.jsx("option",{value:"0",children:"Never"})]})]})]}),a.jsxs("div",{className:"security-group",children:[a.jsx("h4",{className:"group-title",children:"Password"}),a.jsxs("div",{className:"password-section",children:[a.jsxs("button",{className:"btn-premium btn-secondary",children:[a.jsx(CI,{size:16}),"Change Password"]}),a.jsxs("button",{className:"btn-premium btn-ghost",children:[a.jsx(jt,{size:16}),"Reset All Sessions"]})]})]})]})]}),_=()=>a.jsxs("div",{className:"settings-section",children:[a.jsx("h3",{className:"section-title",children:"Application Preferences"}),a.jsxs("div",{className:"preferences-groups",children:[a.jsxs("div",{className:"preferences-group",children:[a.jsx("h4",{className:"group-title",children:"Appearance"}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{className:"form-label",children:"Theme"}),a.jsxs("div",{className:"theme-selector",children:[a.jsxs("button",{className:`theme-option ${w.theme==="light"?"active":""}`,onClick:()=>E("theme","light"),children:[a.jsx(FI,{size:16}),"Light"]}),a.jsxs("button",{className:`theme-option ${w.theme==="dark"?"active":""}`,onClick:()=>E("theme","dark"),children:[a.jsx(_I,{size:16}),"Dark"]})]})]})]}),a.jsxs("div",{className:"preferences-group",children:[a.jsx("h4",{className:"group-title",children:"Localization"}),a.jsxs("div",{className:"form-grid",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{className:"form-label",children:"Language"}),a.jsxs("select",{className:"form-select",value:w.language,onChange:O=>E("language",O.target.value),children:[a.jsx("option",{value:"en",children:"English"}),a.jsx("option",{value:"hi",children:"Hindi"}),a.jsx("option",{value:"mr",children:"Marathi"}),a.jsx("option",{value:"gu",children:"Gujarati"})]})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{className:"form-label",children:"Currency"}),a.jsxs("select",{className:"form-select",value:w.currency,onChange:O=>E("currency",O.target.value),children:[a.jsx("option",{value:"INR",children:"Indian Rupee ()"}),a.jsx("option",{value:"USD",children:"US Dollar ($)"}),a.jsx("option",{value:"EUR",children:"Euro ()"})]})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{className:"form-label",children:"Timezone"}),a.jsxs("select",{className:"form-select",value:w.timezone,onChange:O=>E("timezone",O.target.value),children:[a.jsx("option",{value:"Asia/Kolkata",children:"Asia/Kolkata (IST)"}),a.jsx("option",{value:"America/New_York",children:"America/New_York (EST)"}),a.jsx("option",{value:"Europe/London",children:"Europe/London (GMT)"})]})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{className:"form-label",children:"Date Format"}),a.jsxs("select",{className:"form-select",value:w.dateFormat,onChange:O=>E("dateFormat",O.target.value),children:[a.jsx("option",{value:"DD/MM/YYYY",children:"DD/MM/YYYY"}),a.jsx("option",{value:"MM/DD/YYYY",children:"MM/DD/YYYY"}),a.jsx("option",{value:"YYYY-MM-DD",children:"YYYY-MM-DD"})]})]})]})]}),a.jsxs("div",{className:"preferences-group",children:[a.jsx("h4",{className:"group-title",children:"Default Settings"}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{className:"form-label",children:"Default Page"}),a.jsxs("select",{className:"form-select",value:w.defaultPage,onChange:O=>E("defaultPage",O.target.value),children:[a.jsx("option",{value:"dashboard",children:"Dashboard"}),a.jsx("option",{value:"portfolio",children:"Portfolio"}),a.jsx("option",{value:"trading",children:"Trading"}),a.jsx("option",{value:"watchlist",children:"Watchlist"})]})]})]})]})]}),I=()=>{switch(s){case"profile":return L();case"notifications":return P();case"security":return R();case"preferences":return _();default:return L()}};return a.jsx("div",{className:"settings-page",children:a.jsxs("div",{className:"settings-container",children:[a.jsx($.div,{className:"settings-header",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6},children:a.jsxs("div",{className:"header-content",children:[a.jsxs("div",{className:"header-left",children:[a.jsxs("h1",{className:"page-title",children:[a.jsx(co,{className:"title-icon"}),"Settings"]}),a.jsx("p",{className:"page-subtitle",children:"Manage your account preferences and security settings"})]}),a.jsx("div",{className:"header-actions",children:a.jsxs("button",{className:"btn-premium btn-primary",onClick:g,disabled:i,children:[i?a.jsx(jt,{size:16,className:"animate-spin"}):a.jsx(eN,{size:16}),i?"Saving...":"Save Changes"]})})]})}),a.jsxs("div",{className:"settings-layout",children:[a.jsx($.div,{className:"settings-tabs",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.1},children:u.map(O=>{const z=O.icon;return a.jsxs("button",{className:`tab-button ${s===O.id?"active":""}`,onClick:()=>r(O.id),children:[a.jsx(z,{size:20}),O.name]},O.id)})}),a.jsx($.div,{className:"settings-content",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:I()},s)]})]})})},d4=({user:t,onUpdateProfile:e,theme:n,toggleTheme:s,onLogout:r})=>{var S,N;const[i,o]=b.useState(!1),[l,c]=b.useState(!1),{portfolioData:u}=Vn(),[h,d]=b.useState({firstName:"",lastName:"",email:"",phone:"",location:"",bio:"",joinDate:"",avatar:null});b.useEffect(()=>{if(t){const E=(t.fullName||t.name||"").split(" "),L=E[0]||"",P=E.slice(1).join(" ")||"";d({firstName:L,lastName:P,email:t.email||"",phone:t.phoneNumber||t.phone||"",location:t.location||"",bio:t.bio||"Welcome to TradeBro! Start your trading journey today.",joinDate:t.createdAt?new Date(t.createdAt).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],avatar:t.profilePicture||t.profileImage||t.avatar||null})}},[t]);const f=C=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(C),x=[{title:"Portfolio Value",value:f((u==null?void 0:u.totalValue)||0),change:u!=null&&u.totalGainLossPercentage?`${u.totalGainLossPercentage>=0?"+":""}${u.totalGainLossPercentage.toFixed(2)}%`:"0.00%",icon:Nt,color:((u==null?void 0:u.totalGainLoss)||0)>=0?"#10B981":"#EF4444"},{title:"Available Cash",value:f((u==null?void 0:u.availableCash)||0),change:"Available",icon:Nt,color:"#3B82F6"},{title:"Total Invested",value:f((u==null?void 0:u.totalInvested)||0),change:`${((S=u==null?void 0:u.holdings)==null?void 0:S.length)||0} holdings`,icon:Xe,color:"#F59E0B"},{title:"Total Transactions",value:((N=u==null?void 0:u.transactions)==null?void 0:N.length)||0,change:"Completed",icon:$n,color:"#8B5CF6"}],p=[{title:"First Trade",description:"Completed your first trade",earned:!0},{title:"Profit Maker",description:"Made profit for 7 consecutive days",earned:!0},{title:"Risk Manager",description:"Maintained stop-loss on 50 trades",earned:!0},{title:"Market Expert",description:"Achieved 80% success rate",earned:!1},{title:"Portfolio Builder",description:"Diversified across 10+ sectors",earned:!1},{title:"Long Term Investor",description:"Held positions for 6+ months",earned:!1}],y=async()=>{c(!0);try{const C={...t,fullName:`${h.firstName} ${h.lastName}`.trim(),firstName:h.firstName,lastName:h.lastName,email:h.email,phoneNumber:h.phone,phone:h.phone,location:h.location,bio:h.bio};e&&await e(C),await new Promise(E=>setTimeout(E,1e3)),o(!1),c(!1)}catch(C){console.error("Error saving profile:",C),c(!1)}},w=()=>{d({firstName:(t==null?void 0:t.firstName)||"John",lastName:(t==null?void 0:t.lastName)||"Doe",email:(t==null?void 0:t.email)||"john.doe@example.com",phone:(t==null?void 0:t.phone)||"+91 98765 43210",location:(t==null?void 0:t.location)||"Mumbai, India",bio:(t==null?void 0:t.bio)||"Passionate trader and investor with 5+ years of experience in Indian markets.",joinDate:(t==null?void 0:t.joinDate)||"2023-01-15",avatar:(t==null?void 0:t.avatar)||null}),o(!1)},m=(C,E)=>{d(L=>({...L,[C]:E}))},g=C=>new Date(C).toLocaleDateString("en-IN",{year:"numeric",month:"long",day:"numeric"});return a.jsx("div",{className:"profile-page",children:a.jsxs("div",{className:"profile-container",children:[a.jsx($.div,{className:"profile-header",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6},children:a.jsxs("div",{className:"header-content",children:[a.jsxs("div",{className:"header-left",children:[a.jsxs("h1",{className:"page-title",children:[a.jsx(ls,{className:"title-icon"}),"Profile"]}),a.jsx("p",{className:"page-subtitle",children:"Manage your account information and trading preferences"})]}),a.jsx("div",{className:"header-actions",children:i?a.jsxs("div",{className:"edit-actions",children:[a.jsx("button",{className:"btn-premium btn-secondary",onClick:w,children:"Cancel"}),a.jsxs("button",{className:"btn-premium btn-primary",onClick:y,disabled:l,children:[a.jsx(eN,{size:16}),l?"Saving...":"Save Changes"]})]}):a.jsxs("button",{className:"btn-premium btn-primary",onClick:()=>o(!0),children:[a.jsx(Gb,{size:16}),"Edit Profile"]})})]})}),a.jsxs("div",{className:"profile-layout",children:[a.jsxs($.div,{className:"profile-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},children:[a.jsx("div",{className:"card-header",children:a.jsx("h3",{className:"card-title",children:"Personal Information"})}),a.jsxs("div",{className:"card-content",children:[a.jsxs("div",{className:"profile-avatar-section",children:[a.jsxs("div",{className:"avatar-container",children:[a.jsxs("div",{className:"avatar",children:[h.avatar?a.jsx("img",{src:h.avatar,alt:`${h.firstName} ${h.lastName}`,onError:C=>{C.target.style.display="none",C.target.nextSibling.style.display="flex"}}):null,a.jsx("div",{className:"avatar-placeholder",style:{display:h.avatar?"none":"flex"},children:h.firstName?a.jsxs("span",{className:"avatar-initial",children:[h.firstName.charAt(0).toUpperCase(),h.lastName?h.lastName.charAt(0).toUpperCase():""]}):a.jsx(ls,{size:48})})]}),i&&a.jsx("button",{className:"avatar-edit-btn",children:a.jsx(xI,{size:16})})]}),a.jsxs("div",{className:"profile-basic-info",children:[a.jsxs("h2",{className:"profile-name",children:[h.firstName," ",h.lastName]}),a.jsx("p",{className:"profile-email",children:h.email}),a.jsx("div",{className:"profile-meta",children:a.jsxs("span",{className:"join-date",children:[a.jsx(qb,{size:14}),"Joined ",g(h.joinDate)]})})]})]}),a.jsx("div",{className:"profile-form",children:a.jsxs("div",{className:"form-grid",children:[a.jsxs("div",{className:"form-group",children:[a.jsx("label",{className:"form-label",children:"First Name"}),i?a.jsx("input",{type:"text",className:"form-input",value:h.firstName,onChange:C=>m("firstName",C.target.value)}):a.jsx("div",{className:"form-display",children:h.firstName})]}),a.jsxs("div",{className:"form-group",children:[a.jsx("label",{className:"form-label",children:"Last Name"}),i?a.jsx("input",{type:"text",className:"form-input",value:h.lastName,onChange:C=>m("lastName",C.target.value)}):a.jsx("div",{className:"form-display",children:h.lastName})]}),a.jsxs("div",{className:"form-group",children:[a.jsxs("label",{className:"form-label",children:[a.jsx(bu,{size:16}),"Email Address"]}),i?a.jsx("input",{type:"email",className:"form-input",value:h.email,onChange:C=>m("email",C.target.value)}):a.jsx("div",{className:"form-display",children:h.email})]}),a.jsxs("div",{className:"form-group",children:[a.jsxs("label",{className:"form-label",children:[a.jsx(MI,{size:16}),"Phone Number"]}),i?a.jsx("input",{type:"tel",className:"form-input",value:h.phone,onChange:C=>m("phone",C.target.value)}):a.jsx("div",{className:"form-display",children:h.phone})]}),a.jsxs("div",{className:"form-group full-width",children:[a.jsxs("label",{className:"form-label",children:[a.jsx(EI,{size:16}),"Location"]}),i?a.jsx("input",{type:"text",className:"form-input",value:h.location,onChange:C=>m("location",C.target.value)}):a.jsx("div",{className:"form-display",children:h.location})]}),a.jsxs("div",{className:"form-group full-width",children:[a.jsx("label",{className:"form-label",children:"Bio"}),i?a.jsx("textarea",{className:"form-textarea",rows:"3",value:h.bio,onChange:C=>m("bio",C.target.value)}):a.jsx("div",{className:"form-display",children:h.bio})]})]})})]})]}),a.jsxs($.div,{className:"stats-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:[a.jsx("div",{className:"card-header",children:a.jsxs("h3",{className:"card-title",children:[a.jsx(Xe,{className:"card-icon"}),"Trading Performance"]})}),a.jsx("div",{className:"card-content",children:a.jsx("div",{className:"stats-grid",children:x.map((C,E)=>{const L=C.icon;return a.jsxs("div",{className:"stat-item",children:[a.jsx("div",{className:"stat-icon",style:{color:C.color},children:a.jsx(L,{size:24})}),a.jsxs("div",{className:"stat-content",children:[a.jsx("div",{className:"stat-value",children:C.value}),a.jsx("div",{className:"stat-title",children:C.title}),a.jsx("div",{className:"stat-change",style:{color:C.color},children:C.change})]})]},C.title)})})})]}),a.jsxs($.div,{className:"achievements-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},children:[a.jsx("div",{className:"card-header",children:a.jsxs("h3",{className:"card-title",children:[a.jsx(d0,{className:"card-icon"}),"Achievements"]})}),a.jsx("div",{className:"card-content",children:a.jsx("div",{className:"achievements-grid",children:p.map((C,E)=>a.jsxs("div",{className:`achievement-item ${C.earned?"earned":"locked"}`,children:[a.jsx("div",{className:"achievement-icon",children:a.jsx(d0,{size:20})}),a.jsxs("div",{className:"achievement-content",children:[a.jsx("h4",{className:"achievement-title",children:C.title}),a.jsx("p",{className:"achievement-description",children:C.description})]}),C.earned&&a.jsx("div",{className:"achievement-badge",children:a.jsx(Hs,{size:16})})]},C.title))})})]}),a.jsxs($.div,{className:"actions-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},children:[a.jsx("div",{className:"card-header",children:a.jsx("h3",{className:"card-title",children:"Quick Actions"})}),a.jsx("div",{className:"card-content",children:a.jsxs("div",{className:"action-buttons",children:[a.jsxs("button",{className:"action-btn",children:[a.jsx(co,{size:20}),a.jsx("span",{children:"Settings"})]}),a.jsxs("button",{className:"action-btn",children:[a.jsx(Hs,{size:20}),a.jsx("span",{children:"Security"})]}),a.jsxs("button",{className:"action-btn logout",onClick:r,children:[a.jsx(Qb,{size:20}),a.jsx("span",{children:"Logout"})]})]})})]})]})]})})},f4=({user:t,theme:e})=>{const[n,s]=b.useState(!1),[r,i]=b.useState(!1),[o,l]=b.useState(!1),[c,u]=b.useState(!0),[h,d]=b.useState([{id:1,type:"assistant",content:"Hello! I'm Saytrix, your AI trading assistant. How can I help you today?",timestamp:new Date,suggestions:["/quote RELIANCE","/news market","/portfolio"]}]),[f,x]=b.useState(""),p=b.useRef(null),y=[{command:"/quote",description:"Get stock quotes",icon:Nt},{command:"/news",description:"Latest market news",icon:Su},{command:"/portfolio",description:"Portfolio analysis",icon:Lt},{command:"/compare",description:"Compare stocks",icon:Xe}],w=[{symbol:"RELIANCE",price:"2,465",change:"+0.11%"},{symbol:"TCS",price:"3,185",change:"-0.47%"},{symbol:"HDFCBANK",price:"1,650",change:"+3.13%"},{symbol:"INFY",price:"1,596",change:"+1.25%"}];b.useEffect(()=>{m()},[h]);const m=()=>{var _;(_=p.current)==null||_.scrollIntoView({behavior:"smooth"})},g=()=>{n?N():S()},S=()=>{s(!0),setTimeout(()=>{s(!1),x("What is the current price of Reliance?")},3e3)},N=()=>{s(!1)},C=async()=>{if(!f.trim())return;const _={id:Date.now(),type:"user",content:f,timestamp:new Date};d(I=>[...I,_]),x(""),i(!0),setTimeout(()=>{const I={id:Date.now()+1,type:"assistant",content:E(f),timestamp:new Date,suggestions:L(f)};d(O=>[...O,I]),i(!1),c&&(l(!0),setTimeout(()=>l(!1),2e3))},1500)},E=_=>{const I=_.toLowerCase();return I.includes("reliance")||I.includes("price")?"Reliance Industries (RELIANCE) is currently trading at 2,465.30, up by 2.71 (+0.11%) today. The stock has strong fundamentals with a market cap of 16.7L Cr. Would you like me to show you the technical analysis or recent news?":I.includes("portfolio")?"Your portfolio is performing well! Current value: 2,84,765 (+12.5% overall). Top performers: HDFCBANK (+3.13%), INFY (+1.25%). You have 8 holdings across 4 sectors. Would you like a detailed breakdown?":I.includes("news")||I.includes("market")?"Here are today's top market highlights: Sensex up 501 points, Banking stocks rally on RBI optimism, IT stocks under pressure due to Fed signals. Reliance reports strong Q3 results. Would you like detailed news on any specific sector?":"I understand you're asking about trading. I can help you with stock quotes, market analysis, portfolio insights, and trading strategies. Try asking me about specific stocks or use commands like /quote, /news, or /portfolio."},L=_=>{const I=_.toLowerCase();return I.includes("reliance")?["/chart RELIANCE","/news RELIANCE","/compare RELIANCE TCS"]:I.includes("portfolio")?["/rebalance","/risk analysis","/sector allocation"]:["/quote NIFTY","/top gainers","/market summary"]},P=_=>{x(_+" ")},R=_=>{x(_)};return a.jsx("div",{className:"saytrix-page",children:a.jsxs("div",{className:"saytrix-container",children:[a.jsx($.div,{className:"saytrix-header",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6},children:a.jsxs("div",{className:"header-content",children:[a.jsx("div",{className:"header-left",children:a.jsxs("div",{className:"saytrix-logo",children:[a.jsx("div",{className:"logo-icon",children:a.jsx(nN,{className:"zap-icon"})}),a.jsxs("div",{className:"logo-text",children:[a.jsx("h1",{className:"page-title",children:"Saytrix"}),a.jsx("p",{className:"page-subtitle",children:"AI Trading Assistant"})]})]})}),a.jsxs("div",{className:"header-actions",children:[a.jsxs("button",{className:`btn-premium btn-ghost ${c?"active":""}`,onClick:()=>u(!c),children:[c?a.jsx(Zf,{size:16}):a.jsx($I,{size:16}),"Audio"]}),a.jsxs("button",{className:"btn-premium btn-ghost",children:[a.jsx(co,{size:16}),"Settings"]})]})]})}),a.jsxs("div",{className:"chat-layout",children:[a.jsxs($.div,{className:"quick-commands",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.1},children:[a.jsx("h3",{className:"commands-title",children:"Quick Commands"}),a.jsx("div",{className:"commands-list",children:y.map((_,I)=>{const O=_.icon;return a.jsxs("button",{className:"command-btn",onClick:()=>P(_.command),children:[a.jsx(O,{size:16}),a.jsxs("div",{className:"command-info",children:[a.jsx("div",{className:"command-name",children:_.command}),a.jsx("div",{className:"command-desc",children:_.description})]})]},_.command)})}),a.jsxs("div",{className:"stock-suggestions",children:[a.jsx("h4",{className:"suggestions-title",children:"Trending Stocks"}),w.map(_=>a.jsxs("div",{className:"stock-suggestion",children:[a.jsxs("div",{className:"stock-info",children:[a.jsx("div",{className:"stock-symbol",children:_.symbol}),a.jsx("div",{className:"stock-price",children:_.price})]}),a.jsx("div",{className:`stock-change ${_.change.startsWith("+")?"positive":"negative"}`,children:_.change})]},_.symbol))]})]}),a.jsxs($.div,{className:"chat-main",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:[a.jsxs("div",{className:"messages-container",children:[a.jsx(Mt,{children:h.map(_=>a.jsxs($.div,{className:`message ${_.type}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:[a.jsx("div",{className:"message-avatar",children:_.type==="user"?a.jsx(ls,{size:20}):a.jsx(p0,{size:20})}),a.jsxs("div",{className:"message-content",children:[a.jsx("div",{className:"message-text",children:_.content}),_.suggestions&&a.jsx("div",{className:"message-suggestions",children:_.suggestions.map((I,O)=>a.jsx("button",{className:"suggestion-btn",onClick:()=>R(I),children:I},O))}),a.jsx("div",{className:"message-time",children:_.timestamp.toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"})})]})]},_.id))}),r&&a.jsxs($.div,{className:"message assistant processing",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[a.jsx("div",{className:"message-avatar",children:a.jsx(p0,{size:20})}),a.jsx("div",{className:"message-content",children:a.jsxs("div",{className:"typing-indicator",children:[a.jsx("span",{}),a.jsx("span",{}),a.jsx("span",{})]})})]}),a.jsx("div",{ref:p})]}),a.jsxs("div",{className:"input-area",children:[a.jsxs("div",{className:"input-container",children:[a.jsx("button",{className:`voice-btn ${n?"listening":""}`,onClick:g,children:n?a.jsx($.div,{animate:{scale:[1,1.2,1]},transition:{duration:1,repeat:1/0},children:a.jsx(Nu,{size:20})}):a.jsx(Xb,{size:20})}),a.jsx("input",{type:"text",className:"message-input",placeholder:"Ask me about stocks, portfolio, or market trends...",value:f,onChange:_=>x(_.target.value),onKeyPress:_=>_.key==="Enter"&&C()}),a.jsx("button",{className:"send-btn",onClick:C,disabled:!f.trim()||r,children:r?a.jsx(jt,{size:20,className:"animate-spin"}):a.jsx(AI,{size:20})})]}),n&&a.jsxs($.div,{className:"listening-indicator",initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:[a.jsxs("div",{className:"listening-animation",children:[a.jsx("div",{className:"wave"}),a.jsx("div",{className:"wave"}),a.jsx("div",{className:"wave"})]}),a.jsx("span",{children:"Listening... Speak now"})]}),o&&a.jsxs($.div,{className:"speaking-indicator",initial:{opacity:0,y:10},animate:{opacity:1,y:0},children:[a.jsx(Zf,{size:16}),a.jsx("span",{children:"Saytrix is speaking..."})]})]})]})]})]})})},p4=()=>a.jsx("div",{className:"legal-page",children:a.jsxs("div",{className:"legal-container",children:[a.jsxs($.div,{className:"legal-header",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[a.jsxs(Ie,{to:"/login",className:"back-link",children:[a.jsx(Um,{size:20}),"Back to Login"]}),a.jsxs("div",{className:"legal-title-section",children:[a.jsx("div",{className:"legal-icon",children:a.jsx(Hs,{size:32})}),a.jsx("h1",{className:"legal-title",children:"Terms of Service"}),a.jsx("p",{className:"legal-subtitle",children:"Please read these terms carefully before using TradeBro"}),a.jsxs("div",{className:"last-updated",children:["Last updated: ","December 15, 2024"]})]})]}),a.jsxs($.div,{className:"legal-content",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:[a.jsxs("div",{className:"legal-notice",children:[a.jsx(Mi,{size:20}),a.jsxs("div",{children:[a.jsx("strong",{children:"Important Notice:"})," TradeBro is a virtual trading platform for educational purposes only. No real money or actual securities are involved in any transactions."]})]}),a.jsxs("section",{className:"legal-section",children:[a.jsx("h2",{children:"1. Acceptance of Terms"}),a.jsx("p",{children:'By accessing and using TradeBro ("the Platform", "our Service"), you accept and agree to be bound by the terms and provision of this agreement. If you do not agree to abide by the above, please do not use this service.'}),a.jsx("p",{children:'These Terms of Service ("Terms") govern your use of our virtual stock trading platform operated by TradeBro ("us", "we", or "our").'})]}),a.jsxs("section",{className:"legal-section",children:[a.jsx("h2",{children:"2. Description of Service"}),a.jsx("p",{children:"TradeBro provides:"}),a.jsxs("ul",{children:[a.jsx("li",{children:"Virtual stock trading simulation using real market data"}),a.jsx("li",{children:"Educational tools and resources for learning about stock trading"}),a.jsx("li",{children:"Portfolio management and tracking features"}),a.jsx("li",{children:"AI-powered trading assistant (Saytrix)"}),a.jsx("li",{children:"Market news and analysis"}),a.jsx("li",{children:"Social features for connecting with other virtual traders"})]}),a.jsxs("div",{className:"highlight-box",children:[a.jsx(Ws,{size:16}),a.jsx("span",{children:"All trading on TradeBro is virtual and for educational purposes only."})]})]}),a.jsxs("section",{className:"legal-section",children:[a.jsx("h2",{children:"3. User Accounts and Registration"}),a.jsx("h3",{children:"3.1 Account Creation"}),a.jsx("p",{children:"To use certain features of our Service, you must register for an account. You may register using your email address or through third-party authentication providers like Google."}),a.jsx("h3",{children:"3.2 Account Security"}),a.jsx("p",{children:"You are responsible for:"}),a.jsxs("ul",{children:[a.jsx("li",{children:"Maintaining the confidentiality of your account credentials"}),a.jsx("li",{children:"All activities that occur under your account"}),a.jsx("li",{children:"Notifying us immediately of any unauthorized use"}),a.jsx("li",{children:"Ensuring your account information is accurate and up-to-date"})]}),a.jsx("h3",{children:"3.3 Account Termination"}),a.jsx("p",{children:"We reserve the right to terminate or suspend your account at any time for violations of these Terms or for any other reason at our sole discretion."})]}),a.jsxs("section",{className:"legal-section",children:[a.jsx("h2",{children:"4. Virtual Trading Rules"}),a.jsx("h3",{children:"4.1 Virtual Currency"}),a.jsx("p",{children:"All users start with virtual currency (10,000 by default) for trading purposes. This virtual currency has no real-world value and cannot be exchanged for real money."}),a.jsx("h3",{children:"4.2 Market Data"}),a.jsx("p",{children:"We use real market data from various sources including Financial Modeling Prep (FMP) API. While we strive for accuracy, we do not guarantee the completeness or accuracy of market data."}),a.jsx("h3",{children:"4.3 Trading Limitations"}),a.jsx("p",{children:"Virtual trading is subject to:"}),a.jsxs("ul",{children:[a.jsx("li",{children:"Market hours and trading sessions"}),a.jsx("li",{children:"Available virtual funds in your account"}),a.jsx("li",{children:"Platform maintenance and technical limitations"}),a.jsx("li",{children:"Fair usage policies to prevent system abuse"})]})]}),a.jsxs("section",{className:"legal-section",children:[a.jsx("h2",{children:"5. Prohibited Uses"}),a.jsx("p",{children:"You may not use our Service:"}),a.jsxs("ul",{children:[a.jsx("li",{children:"For any unlawful purpose or to solicit others to unlawful acts"}),a.jsx("li",{children:"To violate any international, federal, provincial, or state regulations, rules, laws, or local ordinances"}),a.jsx("li",{children:"To infringe upon or violate our intellectual property rights or the intellectual property rights of others"}),a.jsx("li",{children:"To harass, abuse, insult, harm, defame, slander, disparage, intimidate, or discriminate"}),a.jsx("li",{children:"To submit false or misleading information"}),a.jsx("li",{children:"To upload or transmit viruses or any other type of malicious code"}),a.jsx("li",{children:"To spam, phish, pharm, pretext, spider, crawl, or scrape"}),a.jsx("li",{children:"For any obscene or immoral purpose"}),a.jsx("li",{children:"To interfere with or circumvent the security features of the Service"})]})]}),a.jsxs("section",{className:"legal-section",children:[a.jsx("h2",{children:"6. Intellectual Property Rights"}),a.jsx("p",{children:"The Service and its original content, features, and functionality are and will remain the exclusive property of TradeBro and its licensors. The Service is protected by copyright, trademark, and other laws."}),a.jsx("p",{children:"Our trademarks and trade dress may not be used in connection with any product or service without our prior written consent."})]}),a.jsxs("section",{className:"legal-section",children:[a.jsx("h2",{children:"7. Privacy Policy"}),a.jsx("p",{children:"Your privacy is important to us. Please review our Privacy Policy, which also governs your use of the Service, to understand our practices."}),a.jsx(Ie,{to:"/privacy",className:"inline-link",children:"View Privacy Policy "})]}),a.jsxs("section",{className:"legal-section",children:[a.jsx("h2",{children:"8. Disclaimers and Limitations"}),a.jsx("h3",{children:"8.1 Educational Purpose"}),a.jsxs("div",{className:"warning-box",children:[a.jsx(Mi,{size:16}),a.jsxs("div",{children:[a.jsx("strong",{children:"Important:"})," TradeBro is for educational purposes only. Virtual trading results do not guarantee real trading success. Past performance does not indicate future results."]})]}),a.jsx("h3",{children:"8.2 No Financial Advice"}),a.jsx("p",{children:"The information provided on TradeBro is not intended as financial advice. We do not provide investment recommendations or advice. Always consult with qualified financial professionals before making real investment decisions."}),a.jsx("h3",{children:"8.3 Service Availability"}),a.jsx("p",{children:"We do not guarantee that the Service will be available at all times. We may experience hardware, software, or other problems or need to perform maintenance related to the Service."})]}),a.jsxs("section",{className:"legal-section",children:[a.jsx("h2",{children:"9. Limitation of Liability"}),a.jsx("p",{children:"In no event shall TradeBro, nor its directors, employees, partners, agents, suppliers, or affiliates, be liable for any indirect, incidental, special, consequential, or punitive damages, including without limitation, loss of profits, data, use, goodwill, or other intangible losses, resulting from your use of the Service."})]}),a.jsxs("section",{className:"legal-section",children:[a.jsx("h2",{children:"10. Changes to Terms"}),a.jsx("p",{children:"We reserve the right, at our sole discretion, to modify or replace these Terms at any time. If a revision is material, we will try to provide at least 30 days notice prior to any new terms taking effect."}),a.jsx("p",{children:"What constitutes a material change will be determined at our sole discretion. By continuing to access or use our Service after those revisions become effective, you agree to be bound by the revised terms."})]}),a.jsxs("section",{className:"legal-section",children:[a.jsx("h2",{children:"11. Contact Information"}),a.jsx("p",{children:"If you have any questions about these Terms of Service, please contact us:"}),a.jsxs("div",{className:"contact-info",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Email:"})," legal@tradebro.com"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Address:"})," TradeBro Legal Department",a.jsx("br",{}),"123 Trading Street",a.jsx("br",{}),"Financial District, Mumbai 400001",a.jsx("br",{}),"India"]})]})]}),a.jsxs("div",{className:"legal-footer",children:[a.jsx("p",{children:"By using TradeBro, you acknowledge that you have read, understood, and agree to be bound by these Terms of Service."}),a.jsxs("div",{className:"legal-actions",children:[a.jsx(Ie,{to:"/privacy",className:"btn btn-outline",children:"Privacy Policy"}),a.jsx(Ie,{to:"/login",className:"btn btn-primary",children:"Back to Login"})]})]})]})]})}),m4=()=>a.jsx("div",{className:"legal-page",children:a.jsxs("div",{className:"legal-container",children:[a.jsxs($.div,{className:"legal-header",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[a.jsxs(Ie,{to:"/login",className:"back-link",children:[a.jsx(Um,{size:20}),"Back to Login"]}),a.jsxs("div",{className:"legal-title-section",children:[a.jsx("div",{className:"legal-icon",children:a.jsx(lo,{size:32})}),a.jsx("h1",{className:"legal-title",children:"Privacy Policy"}),a.jsx("p",{className:"legal-subtitle",children:"How we collect, use, and protect your personal information"}),a.jsxs("div",{className:"last-updated",children:["Last updated: ","December 15, 2024"]})]})]}),a.jsxs($.div,{className:"legal-content",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:[a.jsxs("div",{className:"privacy-commitment",children:[a.jsx(Hs,{size:20}),a.jsxs("div",{children:[a.jsx("strong",{children:"Our Commitment:"})," We are committed to protecting your privacy and ensuring the security of your personal information. This Privacy Policy explains how we collect, use, and safeguard your data."]})]}),a.jsxs("section",{className:"legal-section",children:[a.jsxs("h2",{children:[a.jsx(bI,{size:20})," 1. Information We Collect"]}),a.jsx("h3",{children:"1.1 Personal Information"}),a.jsx("p",{children:"When you register for TradeBro, we may collect:"}),a.jsxs("ul",{children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Account Information:"})," Name, email address, username"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Profile Information:"})," Profile picture, bio, trading preferences"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Authentication Data:"})," Password (encrypted), OAuth tokens from third-party providers"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Contact Information:"})," Email address for communications"]})]}),a.jsx("h3",{children:"1.2 Trading and Usage Data"}),a.jsx("p",{children:"We collect information about your use of our platform:"}),a.jsxs("ul",{children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Virtual Trading Activity:"})," Buy/sell orders, portfolio performance, trading history"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Platform Usage:"})," Pages visited, features used, time spent on platform"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Device Information:"})," IP address, browser type, device type, operating system"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Preferences:"})," Theme settings, notification preferences, dashboard customizations"]})]}),a.jsx("h3",{children:"1.3 Automatically Collected Information"}),a.jsxs("ul",{children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Cookies and Tracking:"})," Session cookies, preference cookies, analytics cookies"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Log Data:"})," Server logs, error logs, access logs"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Analytics Data:"})," User behavior, feature usage, performance metrics"]})]})]}),a.jsxs("section",{className:"legal-section",children:[a.jsxs("h2",{children:[a.jsx(Ii,{size:20})," 2. How We Use Your Information"]}),a.jsx("h3",{children:"2.1 Service Provision"}),a.jsxs("ul",{children:[a.jsx("li",{children:"Create and manage your account"}),a.jsx("li",{children:"Process virtual trading transactions"}),a.jsx("li",{children:"Provide personalized trading experience"}),a.jsx("li",{children:"Display portfolio and performance data"}),a.jsx("li",{children:"Enable social features and leaderboards"})]}),a.jsx("h3",{children:"2.2 Communication"}),a.jsxs("ul",{children:[a.jsx("li",{children:"Send account-related notifications"}),a.jsx("li",{children:"Provide customer support"}),a.jsx("li",{children:"Send educational content and market updates"}),a.jsx("li",{children:"Notify about platform updates and new features"})]}),a.jsx("h3",{children:"2.3 Platform Improvement"}),a.jsxs("ul",{children:[a.jsx("li",{children:"Analyze usage patterns to improve our service"}),a.jsx("li",{children:"Develop new features and functionality"}),a.jsx("li",{children:"Ensure platform security and prevent fraud"}),a.jsx("li",{children:"Conduct research and analytics"})]}),a.jsx("h3",{children:"2.4 Legal and Safety"}),a.jsxs("ul",{children:[a.jsx("li",{children:"Comply with legal obligations"}),a.jsx("li",{children:"Protect against fraud and abuse"}),a.jsx("li",{children:"Enforce our Terms of Service"}),a.jsx("li",{children:"Respond to legal requests"})]})]}),a.jsxs("section",{className:"legal-section",children:[a.jsxs("h2",{children:[a.jsx(zI,{size:20})," 3. Information Sharing and Disclosure"]}),a.jsx("h3",{children:"3.1 We Do Not Sell Your Data"}),a.jsxs("div",{className:"highlight-box",children:[a.jsx(Hs,{size:16}),a.jsx("span",{children:"We do not sell, rent, or trade your personal information to third parties for marketing purposes."})]}),a.jsx("h3",{children:"3.2 Limited Sharing"}),a.jsx("p",{children:"We may share your information only in these circumstances:"}),a.jsxs("ul",{children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Service Providers:"})," Third-party services that help us operate our platform (hosting, analytics, email)"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Legal Requirements:"})," When required by law, court order, or government request"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Safety and Security:"})," To protect the rights, property, or safety of TradeBro, our users, or others"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Business Transfers:"})," In connection with a merger, acquisition, or sale of assets"]})]}),a.jsx("h3",{children:"3.3 Public Information"}),a.jsx("p",{children:"Some information may be publicly visible:"}),a.jsxs("ul",{children:[a.jsx("li",{children:"Username and profile picture (if you choose to make them public)"}),a.jsx("li",{children:"Leaderboard rankings (anonymized or with consent)"}),a.jsx("li",{children:"Public posts or comments in community features"})]})]}),a.jsxs("section",{className:"legal-section",children:[a.jsx("h2",{children:"4. Data Security"}),a.jsx("h3",{children:"4.1 Security Measures"}),a.jsx("p",{children:"We implement industry-standard security measures:"}),a.jsxs("ul",{children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Encryption:"})," Data encrypted in transit and at rest"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Access Controls:"})," Limited access to personal data on need-to-know basis"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Secure Infrastructure:"})," Secure servers and databases"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Regular Audits:"})," Security assessments and vulnerability testing"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Authentication:"})," Secure login with optional two-factor authentication"]})]}),a.jsx("h3",{children:"4.2 Data Retention"}),a.jsx("p",{children:"We retain your information:"}),a.jsxs("ul",{children:[a.jsx("li",{children:"As long as your account is active"}),a.jsx("li",{children:"As necessary to provide our services"}),a.jsx("li",{children:"To comply with legal obligations"}),a.jsx("li",{children:"To resolve disputes and enforce agreements"})]})]}),a.jsxs("section",{className:"legal-section",children:[a.jsx("h2",{children:"5. Your Privacy Rights"}),a.jsx("h3",{children:"5.1 Access and Control"}),a.jsx("p",{children:"You have the right to:"}),a.jsxs("ul",{children:[a.jsxs("li",{children:[a.jsx("strong",{children:"Access:"})," Request a copy of your personal data"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Update:"})," Correct or update your information"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Delete:"})," Request deletion of your account and data"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Export:"})," Download your trading data and history"]}),a.jsxs("li",{children:[a.jsx("strong",{children:"Opt-out:"})," Unsubscribe from marketing communications"]})]}),a.jsx("h3",{children:"5.2 Cookie Preferences"}),a.jsx("p",{children:"You can control cookies through:"}),a.jsxs("ul",{children:[a.jsx("li",{children:"Browser settings to block or delete cookies"}),a.jsx("li",{children:"Our cookie preference center"}),a.jsx("li",{children:"Opting out of analytics tracking"})]}),a.jsx("h3",{children:"5.3 Account Settings"}),a.jsx("p",{children:"Manage your privacy through your account settings:"}),a.jsxs("ul",{children:[a.jsx("li",{children:"Profile visibility settings"}),a.jsx("li",{children:"Notification preferences"}),a.jsx("li",{children:"Data sharing preferences"}),a.jsx("li",{children:"Communication settings"})]})]}),a.jsxs("section",{className:"legal-section",children:[a.jsx("h2",{children:"6. Third-Party Services"}),a.jsx("h3",{children:"6.1 OAuth Providers"}),a.jsx("p",{children:"When you sign in with Google or other OAuth providers:"}),a.jsxs("ul",{children:[a.jsx("li",{children:"We receive limited profile information (name, email, profile picture)"}),a.jsx("li",{children:"We do not access your other accounts or data"}),a.jsx("li",{children:"You can revoke access at any time through the provider's settings"})]}),a.jsx("h3",{children:"6.2 Market Data Providers"}),a.jsx("p",{children:"We use third-party APIs for market data:"}),a.jsxs("ul",{children:[a.jsx("li",{children:"Financial Modeling Prep (FMP) for stock prices and data"}),a.jsx("li",{children:"These providers may have their own privacy policies"}),a.jsx("li",{children:"We do not share your personal information with data providers"})]}),a.jsx("h3",{children:"6.3 Analytics Services"}),a.jsx("p",{children:"We may use analytics services to improve our platform:"}),a.jsxs("ul",{children:[a.jsx("li",{children:"Google Analytics (anonymized data)"}),a.jsx("li",{children:"Error tracking services"}),a.jsx("li",{children:"Performance monitoring tools"})]})]}),a.jsxs("section",{className:"legal-section",children:[a.jsx("h2",{children:"7. Children's Privacy"}),a.jsx("p",{children:"TradeBro is not intended for children under 13 years of age. We do not knowingly collect personal information from children under 13. If you are a parent or guardian and believe your child has provided us with personal information, please contact us."}),a.jsx("p",{children:"Users between 13-18 years old should have parental consent before using our service."})]}),a.jsxs("section",{className:"legal-section",children:[a.jsx("h2",{children:"8. International Data Transfers"}),a.jsx("p",{children:"Your information may be transferred to and processed in countries other than your own. We ensure appropriate safeguards are in place to protect your personal information in accordance with this Privacy Policy."})]}),a.jsxs("section",{className:"legal-section",children:[a.jsx("h2",{children:"9. Changes to Privacy Policy"}),a.jsx("p",{children:"We may update this Privacy Policy from time to time. We will notify you of any material changes by:"}),a.jsxs("ul",{children:[a.jsx("li",{children:"Posting the new Privacy Policy on this page"}),a.jsx("li",{children:"Sending an email notification"}),a.jsx("li",{children:"Providing notice through our platform"})]}),a.jsx("p",{children:"Your continued use of our service after any changes constitutes acceptance of the new Privacy Policy."})]}),a.jsxs("section",{className:"legal-section",children:[a.jsx("h2",{children:"10. Contact Us"}),a.jsx("p",{children:"If you have questions about this Privacy Policy or our privacy practices, please contact us:"}),a.jsxs("div",{className:"contact-info",children:[a.jsxs("p",{children:[a.jsx("strong",{children:"Privacy Officer:"})," privacy@tradebro.com"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Data Protection:"})," dpo@tradebro.com"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"General Support:"})," support@tradebro.com"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Address:"})," TradeBro Privacy Department",a.jsx("br",{}),"123 Trading Street",a.jsx("br",{}),"Financial District, Mumbai 400001",a.jsx("br",{}),"India"]})]})]}),a.jsxs("div",{className:"legal-footer",children:[a.jsx("p",{children:"We are committed to protecting your privacy and will continue to update our practices to ensure your data remains secure."}),a.jsxs("div",{className:"legal-actions",children:[a.jsx(Ie,{to:"/terms",className:"btn btn-outline",children:"Terms of Service"}),a.jsx(Ie,{to:"/login",className:"btn btn-primary",children:"Back to Login"})]})]})]})]})}),g4=()=>a.jsx("div",{className:"page",children:a.jsx("div",{className:"page-container",children:a.jsxs($.div,{className:"not-found-container",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},style:{textAlign:"center",padding:"var(--space-16) var(--space-4)",minHeight:"60vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[a.jsx("div",{style:{fontSize:"6rem",marginBottom:"var(--space-6)"},children:""}),a.jsx("h1",{style:{fontSize:"var(--font-size-4xl)",marginBottom:"var(--space-4)",color:"var(--text-primary)"},children:"404 - Page Not Found"}),a.jsx("p",{style:{fontSize:"var(--font-size-lg)",color:"var(--text-secondary)",marginBottom:"var(--space-8)",maxWidth:"500px"},children:"Oops! The page you're looking for doesn't exist. It might have been moved, deleted, or you entered the wrong URL."}),a.jsxs("div",{style:{display:"flex",gap:"var(--space-4)",flexWrap:"wrap",justifyContent:"center"},children:[a.jsxs(Ie,{to:"/",className:"btn btn-primary btn-lg",children:[a.jsx(jI,{size:20}),"Go Home"]}),a.jsxs("button",{onClick:()=>window.history.back(),className:"btn btn-secondary btn-lg",children:[a.jsx(Um,{size:20}),"Go Back"]})]})]})})}),ot=({children:t,isAuthenticated:e,loading:n,user:s})=>{const r=Tn();return n?a.jsxs("div",{className:"loading-container",children:[a.jsx("div",{className:"loading-spinner lg"}),a.jsx("p",{className:"loading-text",children:"Verifying authentication..."})]}):e?a.jsx(oN,{user:s,children:t}):(localStorage.setItem("redirectAfterLogin",r.pathname),a.jsx(Qt,{to:"/login",replace:!0,state:{from:r}}))},Ex=({children:t,isAuthenticated:e})=>{if(e){const n=localStorage.getItem("redirectAfterLogin");return n?(localStorage.removeItem("redirectAfterLogin"),a.jsx(Qt,{to:n,replace:!0})):a.jsx(Qt,{to:"/dashboard",replace:!0})}return t},y4=({isAuthenticated:t,user:e,loading:n,onLogin:s,onSignup:r,onLogout:i,onUpdateProfile:o,theme:l,toggleTheme:c})=>{const u=Tn(),h={initial:{opacity:0,y:20},in:{opacity:1,y:0},out:{opacity:0,y:-20}},d={type:"tween",ease:"anticipate",duration:.4};return a.jsx(Mt,{mode:"wait",children:a.jsx($.div,{initial:"initial",animate:"in",exit:"out",variants:h,transition:d,children:a.jsxs(ZE,{children:[a.jsx(ze,{path:"/",element:t?a.jsx(Qt,{to:"/dashboard",replace:!0}):a.jsx(Qt,{to:"/login",replace:!0})}),a.jsx(ze,{path:"/login",element:a.jsx(Ex,{isAuthenticated:t,children:a.jsx(VI,{onLogin:s})})}),a.jsx(ze,{path:"/signup",element:a.jsx(Ex,{isAuthenticated:t,children:a.jsx(UI,{onSignup:r})})}),a.jsx(ze,{path:"/terms",element:a.jsx(ot,{isAuthenticated:t,loading:n,user:e,children:a.jsx(p4,{})})}),a.jsx(ze,{path:"/privacy",element:a.jsx(ot,{isAuthenticated:t,loading:n,user:e,children:a.jsx(m4,{})})}),a.jsx(ze,{path:"/dashboard",element:a.jsx(ot,{isAuthenticated:t,loading:n,user:e,children:a.jsx(lN,{user:e,theme:l})})}),a.jsx(ze,{path:"/portfolio",element:a.jsx(ot,{isAuthenticated:t,loading:n,user:e,children:a.jsx(yA,{user:e,theme:l})})}),a.jsx(ze,{path:"/trading",element:a.jsx(ot,{isAuthenticated:t,loading:n,user:e,children:a.jsx(w3,{user:e,theme:l})})}),a.jsx(ze,{path:"/charts",element:a.jsx(ot,{isAuthenticated:t,loading:n,user:e,children:a.jsx(Q5,{user:e,theme:l})})}),a.jsx(ze,{path:"/watchlist",element:a.jsx(ot,{isAuthenticated:t,loading:n,user:e,children:a.jsx(K5,{user:e,theme:l})})}),a.jsx(ze,{path:"/orders",element:a.jsx(ot,{isAuthenticated:t,loading:n,user:e,children:a.jsx(X5,{user:e,theme:l})})}),a.jsx(ze,{path:"/news",element:a.jsx(ot,{isAuthenticated:t,loading:n,user:e,children:a.jsx(J5,{user:e,theme:l})})}),a.jsx(ze,{path:"/notifications",element:a.jsx(ot,{isAuthenticated:t,loading:n,user:e,children:a.jsx(u4,{user:e,theme:l})})}),a.jsx(ze,{path:"/saytrix",element:a.jsx(ot,{isAuthenticated:t,loading:n,user:e,children:a.jsx(f4,{user:e,theme:l})})}),a.jsx(ze,{path:"/settings",element:a.jsx(ot,{isAuthenticated:t,loading:n,user:e,children:a.jsx(h4,{user:e,theme:l,toggleTheme:c,onLogout:i})})}),a.jsx(ze,{path:"/profile",element:a.jsx(ot,{isAuthenticated:t,loading:n,user:e,children:a.jsx(d4,{user:e,onUpdateProfile:o,theme:l,toggleTheme:c})})}),a.jsx(ze,{path:"/home",element:t?a.jsx(Qt,{to:"/dashboard",replace:!0}):a.jsx(Qt,{to:"/",replace:!0})}),a.jsx(ze,{path:"/app",element:a.jsx(ot,{isAuthenticated:t,children:a.jsx(Qt,{to:"/dashboard",replace:!0})})}),a.jsx(ze,{path:"/trade",element:a.jsx(ot,{isAuthenticated:t,loading:n,user:e,children:a.jsx(Qt,{to:"/trading",replace:!0})})}),a.jsx(ze,{path:"/stocks",element:a.jsx(ot,{isAuthenticated:t,loading:n,user:e,children:a.jsx(Qt,{to:"/charts",replace:!0})})}),a.jsx(ze,{path:"/chat",element:a.jsx(ot,{isAuthenticated:t,loading:n,user:e,children:a.jsx(Qt,{to:"/saytrix",replace:!0})})}),a.jsx(ze,{path:"/ai",element:a.jsx(ot,{isAuthenticated:t,loading:n,user:e,children:a.jsx(Qt,{to:"/saytrix",replace:!0})})}),a.jsx(ze,{path:"*",element:t?a.jsx(g4,{}):a.jsx(Qt,{to:"/login",replace:!0})})]})},u.pathname)})},v4=()=>{const{isCollapsed:t,isMobile:e,toggleSidebar:n}=zu();return!e||!t?null:a.jsx("button",{className:"mobile-menu-btn",onClick:n,"aria-label":"Open navigation menu",type:"button",children:a.jsx(Kb,{})})},x4=()=>{const{isCollapsed:t,isMobile:e,toggleSidebar:n}=zu();return!e||t?null:a.jsx("div",{className:`sidebar-overlay ${t?"":"show"}`,onClick:n,"aria-hidden":"true"})},w4=({isAuthenticated:t,user:e})=>t?null:a.jsxs($.div,{className:"card card-glass",style:{position:"fixed",bottom:"var(--space-xl)",right:"var(--space-xl)",width:"320px",zIndex:"var(--z-fixed)",background:"var(--glass-bg-strong)",backdropFilter:"blur(20px)",border:"1px solid var(--glass-border-strong)",boxShadow:"var(--shadow-xl), var(--shadow-glow)"},initial:{opacity:0,y:100,scale:.8},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:100,scale:.8},transition:{duration:.5,type:"spring",stiffness:100},children:[a.jsx("div",{className:"card-header",children:a.jsxs("div",{className:"d-flex align-center gap-md",children:[a.jsx("div",{className:"d-flex align-center justify-center",style:{width:"40px",height:"40px",background:"var(--gradient-primary)",borderRadius:"var(--radius-lg)",color:"var(--text-inverse)"},children:a.jsx(lo,{size:20})}),a.jsxs("div",{children:[a.jsx("h3",{className:"card-title",style:{fontSize:"1rem",marginBottom:"var(--space-xs)"},children:"Sign In Required"}),a.jsx("p",{className:"card-subtitle",style:{fontSize:"0.75rem"},children:"Access premium features"})]})]})}),a.jsxs("div",{className:"card-body",children:[a.jsx("p",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"var(--space-lg)",lineHeight:"1.5"},children:"Sign in to access your portfolio, trading tools, and personalized insights."}),a.jsxs("div",{className:"d-flex gap-sm",children:[a.jsxs(Ie,{to:"/login",className:"btn btn-primary btn-sm flex-1",children:[a.jsx(ls,{size:14}),"Sign In"]}),a.jsxs(Ie,{to:"/signup",className:"btn btn-outline btn-sm flex-1",children:[a.jsx(Po,{size:14}),"Sign Up"]})]})]})]}),S4=({isOpen:t,onClose:e,onSearch:n})=>{const[s,r]=b.useState("stocks"),[i,o]=b.useState(""),l=b.useRef(null),c=ng({enableSuggestions:!0,enableHistory:!0,limit:8}),u=zN({enableSuggestions:!1,enableHistory:!0,limit:6}),d=(()=>{switch(s){case"stocks":return c;case"news":return u;default:return c}})(),f=m=>{r(m),o(""),d.clearSearch()},x=m=>{m.trim()&&n(m.trim(),s)},p=m=>{const g=m.query||m.symbol||m.title||m;x(g)};b.useEffect(()=>{const m=g=>{l.current&&!l.current.contains(g.target)&&e()};if(t)return document.addEventListener("mousedown",m),()=>document.removeEventListener("mousedown",m)},[t,e]),b.useEffect(()=>{t&&setTimeout(()=>{var g;const m=(g=l.current)==null?void 0:g.querySelector(".search-input");m==null||m.focus()},100)},[t]);const y=[{id:"stocks",label:"Stocks",icon:Xe,placeholder:"Search stocks, symbols...",shortcut:"S"},{id:"news",label:"News",icon:Su,placeholder:"Search news articles...",shortcut:"N"},{id:"orders",label:"Orders",icon:Bt,placeholder:"Search orders by symbol...",shortcut:"O"}],w=y.find(m=>m.id===s);return a.jsx(Mt,{children:t&&a.jsxs(a.Fragment,{children:[a.jsx($.div,{className:"global-search-backdrop",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},onClick:e}),a.jsxs($.div,{ref:l,className:"global-search-modal",initial:{opacity:0,scale:.95,y:-20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-20},transition:{duration:.2},children:[a.jsx("div",{className:"global-search-header",children:a.jsx("div",{className:"search-type-tabs",children:y.map(m=>{const g=m.icon;return a.jsxs("button",{className:`search-type-tab ${s===m.id?"active":""}`,onClick:()=>f(m.id),children:[a.jsx(g,{className:"tab-icon"}),a.jsx("span",{className:"tab-label",children:m.label}),a.jsx("kbd",{className:"tab-shortcut",children:m.shortcut})]},m.id)})})}),a.jsx("div",{className:"global-search-input-container",children:a.jsx(Ro,{placeholder:(w==null?void 0:w.placeholder)||"Search...",value:d.query,onChange:d.setQuery,onSearch:x,onClear:d.clearSearch,suggestions:d.suggestions,recentSearches:d.recentSearches,onSuggestionClick:p,onHistoryClick:p,showHistory:d.showHistory,loading:d.loading,size:"lg",showSuggestions:!0,enableHistory:!0,className:"global-search-input",autoFocus:!0})}),a.jsxs("div",{className:"global-search-footer",children:[a.jsxs("div",{className:"search-shortcuts",children:[a.jsxs("div",{className:"shortcut-item",children:[a.jsx("kbd",{children:a.jsx(vI,{})}),a.jsx("kbd",{children:a.jsx(yI,{})}),a.jsx("span",{children:"Navigate"})]}),a.jsxs("div",{className:"shortcut-item",children:[a.jsx("kbd",{children:a.jsx(SI,{})}),a.jsx("span",{children:"Select"})]}),a.jsxs("div",{className:"shortcut-item",children:[a.jsx("kbd",{children:"Esc"}),a.jsx("span",{children:"Close"})]})]}),a.jsxs("div",{className:"search-branding",children:[a.jsx("span",{children:"Global Search"}),a.jsxs("div",{className:"shortcut-badge",children:[a.jsx(wI,{className:"command-icon"}),a.jsx("span",{children:"K"})]})]})]})]})]})})},b4=()=>{const{isVoiceModeActive:t,isListening:e,transcript:n,stopListening:s}=ug();return t?a.jsx("div",{className:"voice-modal-overlay",children:a.jsxs("div",{className:"voice-modal",children:[a.jsxs("div",{className:"voice-modal-header",children:[a.jsx("h3",{children:" Saytrix Voice Commands"}),a.jsx("button",{className:"voice-modal-close",onClick:s,"aria-label":"Close voice commands",children:a.jsx(ds,{})})]}),a.jsxs("div",{className:"voice-modal-content",children:[a.jsxs("div",{className:"voice-status",children:[a.jsxs("div",{className:`voice-indicator ${e?"listening":""}`,children:[a.jsx(Nu,{}),a.jsx("div",{className:"pulse-ring"}),a.jsx("div",{className:"pulse-ring delay-1"}),a.jsx("div",{className:"pulse-ring delay-2"})]}),a.jsx("p",{className:"voice-status-text",children:e?"Listening for commands...":"Voice mode active"})]}),n&&a.jsx("div",{className:"voice-transcript",children:a.jsxs("p",{children:[a.jsx("strong",{children:"You said:"}),' "',n,'"']})}),a.jsxs("div",{className:"voice-commands-list",children:[a.jsx("h4",{children:"Available Commands:"}),a.jsxs("div",{className:"commands-grid",children:[a.jsxs("div",{className:"command-item",children:[a.jsx("span",{className:"command-text",children:'"Dashboard"'}),a.jsx("span",{className:"command-desc",children:"Go to dashboard"})]}),a.jsxs("div",{className:"command-item",children:[a.jsx("span",{className:"command-text",children:'"Charts"'}),a.jsx("span",{className:"command-desc",children:"Open charts"})]}),a.jsxs("div",{className:"command-item",children:[a.jsx("span",{className:"command-text",children:'"Portfolio"'}),a.jsx("span",{className:"command-desc",children:"View portfolio"})]}),a.jsxs("div",{className:"command-item",children:[a.jsx("span",{className:"command-text",children:'"Watchlist"'}),a.jsx("span",{className:"command-desc",children:"Open watchlist"})]}),a.jsxs("div",{className:"command-item",children:[a.jsx("span",{className:"command-text",children:'"Orders"'}),a.jsx("span",{className:"command-desc",children:"View orders"})]}),a.jsxs("div",{className:"command-item",children:[a.jsx("span",{className:"command-text",children:'"History"'}),a.jsx("span",{className:"command-desc",children:"Check history"})]}),a.jsxs("div",{className:"command-item",children:[a.jsx("span",{className:"command-text",children:'"News"'}),a.jsx("span",{className:"command-desc",children:"Read news"})]}),a.jsxs("div",{className:"command-item",children:[a.jsx("span",{className:"command-text",children:'"Notifications"'}),a.jsx("span",{className:"command-desc",children:"View notifications"})]}),a.jsxs("div",{className:"command-item",children:[a.jsx("span",{className:"command-text",children:'"Profile"'}),a.jsx("span",{className:"command-desc",children:"Open profile"})]}),a.jsxs("div",{className:"command-item",children:[a.jsx("span",{className:"command-text",children:'"Settings"'}),a.jsx("span",{className:"command-desc",children:"Open settings"})]}),a.jsxs("div",{className:"command-item",children:[a.jsx("span",{className:"command-text",children:'"Stop" / "Exit"'}),a.jsx("span",{className:"command-desc",children:"Close voice mode"})]})]})]}),a.jsx("div",{className:"voice-tips",children:a.jsxs("p",{children:[a.jsx("strong",{children:" Tip:"}),' Say "Saytrix" anytime to activate voice commands']})})]})]})}):null},N4=()=>{const{isListening:t,isVoiceModeActive:e,isSupported:n}=ug();return!n||e?null:a.jsxs("div",{className:`voice-status-indicator ${t?"listening":""}`,children:[a.jsx("div",{className:"voice-status-icon",children:a.jsx(Nu,{})}),a.jsx("div",{className:"voice-status-text",children:a.jsx("span",{children:'Say "Saytrix" to activate'})}),t&&a.jsxs("div",{className:"voice-pulse-rings",children:[a.jsx("div",{className:"pulse-ring"}),a.jsx("div",{className:"pulse-ring delay-1"}),a.jsx("div",{className:"pulse-ring delay-2"})]})]})},j4=({isOpen:t,onClose:e,onConfirm:n,orderData:s,stockData:r,orderSummary:i,profitLossEstimate:o,isProcessing:l=!1})=>{const[c,u]=b.useState("details"),[h,d]=b.useState(0),[f,x]=b.useState(!1),p=b.useRef(null),{portfolioData:y}=Vn(),w=ye.useMemo(()=>{if((s==null?void 0:s.orderType)==="sell"&&r&&(y!=null&&y.holdings)){const P=y.holdings.find(R=>R.symbol===r.symbol);if(P){const R=r.price||0,_=P.averagePrice||0,I=P.quantity||0,O=_*I,z=R*I,F=z-O,W=O>0?F/O*100:0;return{...P,currentPrice:R,buyPrice:_,totalInvested:O,currentValue:z,totalGainLoss:F,gainLossPercentage:W,isProfit:F>=0}}}return null},[s,r,y]);ye.useMemo(()=>{if(w){const R=w.currentPrice-w.buyPrice,_=[];for(let I=0;I<=20;I++){const O=I/20,z=w.buyPrice+R*O,F=z*w.quantity;_.push({time:Date.now()-(20-I)*24*60*60*1e3,price:z,value:F})}return _}return[]},[w]),b.useEffect(()=>{t&&(u("details"),d(0),x(!1))},[t]);const m=P=>{x(!0);const R=P.touches?P.touches[0].clientX:P.clientX,_=p.current;if(!_)return;const O=_.getBoundingClientRect().width-60,z=W=>{const A=W.touches?W.touches[0].clientX:W.clientX,V=Math.max(0,Math.min(O,A-R))/O*100;d(V)},F=()=>{h>80?(u("processing"),n()):d(0),x(!1),document.removeEventListener("mousemove",z),document.removeEventListener("mouseup",F),document.removeEventListener("touchmove",z),document.removeEventListener("touchend",F)};document.addEventListener("mousemove",z),document.addEventListener("mouseup",F),document.addEventListener("touchmove",z),document.addEventListener("touchend",F)};if(!t||!s||!r)return null;const{orderType:g,orderMethod:S,quantity:N,limitPrice:C}=s,E=S==="market"?r.price:parseFloat(C),L=g==="buy";return a.jsx(Mt,{mode:"wait",children:t&&a.jsx($.div,{className:"enhanced-confirmation-overlay app-level-modal",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:P=>P.target===P.currentTarget&&e(),"data-modal-level":"app",children:a.jsxs($.div,{className:"enhanced-confirmation-modal",initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{duration:.3,ease:[.4,0,.2,1]},children:[a.jsx($.button,{className:"enhanced-modal-close",onClick:e,whileHover:{scale:1.1},whileTap:{scale:.9},children:a.jsx(ds,{size:24})}),c==="details"&&a.jsxs($.div,{className:"modal-content",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:[a.jsxs("div",{className:"stock-header",children:[a.jsxs("div",{className:"stock-info",children:[a.jsx("h1",{className:"stock-symbol",children:r.symbol}),a.jsx("p",{className:"stock-name",children:r.name}),a.jsx("div",{className:"stock-exchange-badge",children:"NSE"})]}),a.jsxs("div",{className:"stock-price",children:[a.jsx("span",{className:"current-price",children:$e(E)}),a.jsxs("div",{className:`price-change ${r.change>=0?"positive":"negative"}`,children:[r.change>=0?a.jsx(Xe,{}):a.jsx(_t,{}),a.jsxs("span",{children:[$e(Math.abs(r.change))," (",Sr(Math.abs(r.changePercent)),")"]})]})]})]}),a.jsxs("div",{className:"order-details",children:[a.jsxs("h3",{className:"section-title",children:[a.jsx(Nt,{}),"Order Details"]}),a.jsxs("div",{className:"detail-grid",children:[a.jsxs("div",{className:"detail-item",children:[a.jsx("span",{className:"label",children:"Order Type:"}),a.jsx("span",{className:`value ${L?"buy":"sell"}`,children:L?"BUY":"SELL"})]}),a.jsxs("div",{className:"detail-item",children:[a.jsx("span",{className:"label",children:"Quantity:"}),a.jsxs("span",{className:"value",children:[N," shares"]})]}),a.jsxs("div",{className:"detail-item",children:[a.jsx("span",{className:"label",children:"Price:"}),a.jsx("span",{className:"value",children:$e(E)})]}),a.jsxs("div",{className:"detail-item",children:[a.jsx("span",{className:"label",children:"Total Amount:"}),a.jsx("span",{className:"value total",children:$e(E*N)})]})]})]}),!L&&w&&a.jsxs("div",{className:"profit-loss-analysis",children:[a.jsxs("h3",{className:"section-title",children:[a.jsx(Lt,{}),"Profit & Loss Analysis"]}),a.jsxs("div",{className:"pnl-summary",children:[a.jsxs("div",{className:"pnl-item",children:[a.jsx("span",{className:"label",children:"Buy Price:"}),a.jsx("span",{className:"value",children:$e(w.buyPrice)})]}),a.jsxs("div",{className:"pnl-item",children:[a.jsx("span",{className:"label",children:"Current Price:"}),a.jsx("span",{className:"value",children:$e(w.currentPrice)})]}),a.jsxs("div",{className:"pnl-item",children:[a.jsx("span",{className:"label",children:"Total Invested:"}),a.jsx("span",{className:"value",children:$e(w.totalInvested)})]}),a.jsxs("div",{className:"pnl-item total",children:[a.jsxs("span",{className:"label",children:["Total ",w.isProfit?"Profit":"Loss",":"]}),a.jsxs("span",{className:`value ${w.isProfit?"profit":"loss"}`,children:[w.isProfit?"+":"",$e(w.totalGainLoss),"(",w.isProfit?"+":"",Sr(w.gainLossPercentage),")"]})]})]})]}),a.jsx("div",{className:"slide-to-confirm",children:a.jsxs("div",{ref:p,className:"slide-container",children:[a.jsx("div",{className:"slide-track",style:{background:`linear-gradient(to right, ${L?"#10B981":"#EF4444"} ${h}%, #E5E7EB ${h}%)`},children:a.jsx($.div,{className:"slide-button",style:{left:`${h}%`},onMouseDown:m,onTouchStart:m,whileHover:{scale:1.05},whileTap:{scale:.95},children:a.jsx(Po,{})})}),a.jsxs("span",{className:"slide-text",children:["Slide to ",L?"Buy":"Sell"]})]})})]}),c==="processing"&&a.jsxs($.div,{className:"processing-content",initial:{opacity:0},animate:{opacity:1},children:[a.jsx("div",{className:"processing-animation",children:a.jsx($.div,{className:"spinner",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}})}),a.jsx("h2",{children:"Processing Order..."}),a.jsxs("p",{children:["Please wait while we execute your ",L?"buy":"sell"," order"]})]}),c==="success"&&a.jsxs($.div,{className:"success-content",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},children:[a.jsx($.div,{className:"success-icon",initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:300},children:a.jsx(Ws,{})}),a.jsx("h2",{children:"Order Confirmed!"}),a.jsxs("p",{children:["Your ",L?"buy":"sell"," order has been successfully placed"]}),a.jsx($.button,{className:"success-button",onClick:e,whileHover:{scale:1.05},whileTap:{scale:.95},children:"Done"})]})]})})})},C4=()=>{const[t,e]=b.useState(!1),n=hs(),s=b.useCallback(l=>{if((l.ctrlKey||l.metaKey)&&l.key==="k"){l.preventDefault(),l.stopPropagation();const u=document.activeElement,h=u&&(u.tagName==="INPUT"||u.tagName==="TEXTAREA"||u.contentEditable==="true"),d=u&&u.classList.contains("search-input");if(h&&!d)return;e(!0)}},[]),r=b.useCallback(l=>{l.key==="Escape"&&t&&e(!1)},[t]);b.useEffect(()=>(document.addEventListener("keydown",s),document.addEventListener("keydown",r),()=>{document.removeEventListener("keydown",s),document.removeEventListener("keydown",r)}),[s,r]);const i=b.useCallback((l,c="stocks")=>{if(l.trim()){switch(c){case"stocks":n(`/trading?search=${encodeURIComponent(l)}`);break;case"news":n(`/news?search=${encodeURIComponent(l)}`);break;case"orders":n(`/orders?search=${encodeURIComponent(l)}`);break;default:n(`/trading?search=${encodeURIComponent(l)}`)}e(!1)}},[n]),o=b.useCallback(()=>{e(!1)},[]);return{isGlobalSearchOpen:t,setIsGlobalSearchOpen:e,handleGlobalSearch:i,closeGlobalSearch:o}},k4=(t,e={})=>{const{enableProfiling:n=!1,cacheSize:s=100,debounceDelay:r=300,throttleDelay:i=1e3}=e,o=b.useRef(0),l=b.useRef(Date.now()),c=b.useRef(new VN(s)),u=$N();b.useEffect(()=>{o.current+=1;const p=Date.now(),y=p-l.current;l.current=p,n&&(console.log(` ${t} render #${o.current} (${y}ms since last)`),y<16&&console.warn(` ${t} rendering too frequently (${y}ms)`))});const h=b.useCallback((p,y=r)=>h3(p,y),[r]),d=b.useCallback((p,y=i)=>d3(p,y),[i]),f=b.useMemo(()=>({get:p=>c.current.get(p),set:(p,y)=>c.current.set(p,y),clear:()=>c.current.clear(),size:()=>c.current.size()}),[]),x=b.useCallback(()=>({renderCount:o.current,lastRenderTime:l.current,cacheSize:c.current.size(),componentName:t}),[t]);return{debounce:h,throttle:d,cache:f,getMetrics:x,cleanupManager:u}};class P4{constructor(){this.listeners=new Set,this.currentBalance=1e4,this.isInitialized=!1}async initialize(){if(!this.isInitialized)try{const e=Le.getPortfolioSummary();this.currentBalance=e.availableCash,Le.addListener(this.handleTradingServiceUpdate.bind(this)),window.addEventListener("balanceUpdated",this.handleBalanceUpdate.bind(this)),this.isInitialized=!0,console.log(" Balance sync manager initialized with balance:",this.currentBalance)}catch(e){console.error(" Failed to initialize balance sync manager:",e)}}handleTradingServiceUpdate(e){const n=e.availableCash;n!==this.currentBalance&&(this.currentBalance=n,this.notifyListeners())}handleBalanceUpdate(e){const{newBalance:n}=e.detail;n!==this.currentBalance&&(this.currentBalance=n,this.notifyListeners())}getCurrentBalance(){return this.currentBalance}getFormattedBalance(){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2,maximumFractionDigits:2}).format(this.currentBalance)}async updateBalance(e,n="manual"){const s=this.currentBalance;this.currentBalance=e,console.log(` Balance updated from ${n}: ${s}  ${e}`),Le.virtualBalance=e,Le.savePortfolioToStorage(),await this.syncWithServer(),this.notifyListeners(),window.dispatchEvent(new CustomEvent("balanceUpdated",{detail:{newBalance:e,oldBalance:s,change:e-s,source:n}}))}async syncWithServer(){try{const e=localStorage.getItem("token");if(!e)return;(await fetch("http://localhost:5001/api/virtual-money/sync-balance",{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({balance:this.currentBalance,totalRewards:Le.dailyRewards.totalRewards,loginStreak:Le.dailyRewards.loginStreak,lastClaimDate:Le.dailyRewards.lastClaimDate})})).ok?console.log(" Balance synced with server successfully"):console.warn(" Failed to sync balance with server")}catch(e){console.warn(" Server sync error:",e.message)}}addListener(e){return this.listeners.add(e),e({balance:this.currentBalance,formattedBalance:this.getFormattedBalance()}),()=>this.listeners.delete(e)}removeListener(e){this.listeners.delete(e)}notifyListeners(){const e={balance:this.currentBalance,formattedBalance:this.getFormattedBalance()};this.listeners.forEach(n=>{try{n(e)}catch(s){console.error("Error in balance listener:",s)}})}async forceRefresh(){try{const e=Le.getPortfolioSummary(),n=localStorage.getItem("token");if(n){const s=await fetch("http://localhost:5001/api/virtual-money/account",{headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"}});if(s.ok){const i=(await s.json()).data.balance;this.currentBalance=i,Le.virtualBalance=i,Le.savePortfolioToStorage()}}this.notifyListeners(),console.log(" Balance force refreshed:",this.currentBalance)}catch(e){console.error(" Error force refreshing balance:",e)}}cleanup(){this.listeners.clear(),window.removeEventListener("balanceUpdated",this.handleBalanceUpdate.bind(this)),this.isInitialized=!1}}const E4=new P4,T4=b.lazy(()=>zT(()=>import("./PerformanceMonitor-hysfamtG.js"),[]));function L4(){const[t,e]=b.useState(null),[n,s]=b.useState(!1),[r,i]=b.useState("light"),[o,l]=b.useState(!0);k4("App");const{isGlobalSearchOpen:c,handleGlobalSearch:u,closeGlobalSearch:h}=C4(),{isCollapsed:d}=zu(),{orderModalState:f,closeOrderModal:x}=Qm(),[p,y]=b.useState({isOpen:!1,orderData:null,stockData:null,orderSummary:null,profitLossEstimate:null,onConfirm:null,isProcessing:!1}),w=b.useCallback(R=>{y({isOpen:!0,...R,isProcessing:!1})},[]),m=b.useCallback(()=>{y(R=>R.isOpen?{...R,isOpen:!1,isProcessing:!1}:R)},[]),g=b.useRef(null),S=b.useCallback(async()=>{const R=g.current;if(R){y(_=>({..._,isProcessing:!0}));try{await R(),setTimeout(()=>{m()},2e3)}catch(_){console.error("Order confirmation failed:",_),y(I=>({...I,isProcessing:!1}))}}},[m]);b.useEffect(()=>{g.current=p.onConfirm},[p.onConfirm]),b.useEffect(()=>{(async()=>{try{const _=localStorage.getItem("token"),I=localStorage.getItem("user");if(_&&I){const O=await fetch("http://localhost:5001/api/auth/verify",{method:"GET",headers:{Authorization:`Bearer ${_}`,"Content-Type":"application/json"}});if(O.ok){const z=await O.json();e(z.user),s(!0),E4.initialize()}else localStorage.removeItem("token"),localStorage.removeItem("user"),s(!1),e(null)}l(!1)}catch(_){console.error("Auth check failed:",_),localStorage.removeItem("token"),localStorage.removeItem("user"),s(!1),e(null),l(!1)}})()},[]),b.useEffect(()=>{const R=localStorage.getItem("theme")||"light";i(R),document.documentElement.setAttribute("data-theme",R)},[]);const N=b.useCallback(()=>{const R=r==="light"?"dark":"light";i(R),localStorage.setItem("theme",R),document.documentElement.setAttribute("data-theme",R)},[r]),C=b.useCallback((R,_)=>{localStorage.setItem("token",_),localStorage.setItem("user",JSON.stringify(R)),e(R),s(!0),se.success("Welcome back!")},[]),E=b.useCallback(()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),e(null),s(!1),se.info("Logged out successfully")},[]),L=b.useCallback((R,_)=>{localStorage.setItem("token",_),localStorage.setItem("user",JSON.stringify(R)),e(R),s(!0),se.success("Account created successfully!")},[]),P=R=>{e(R),se.success("Profile updated successfully!")};return o?a.jsxs("div",{className:"loading-container",children:[a.jsx("div",{className:"loading-spinner lg"}),a.jsx("p",{className:"loading-text",children:"Loading TradeBro..."})]}):a.jsxs("div",{className:"app",children:[a.jsx(_4,{isAuthenticated:n,user:t,loading:o,theme:r,onLogin:C,onLogout:E,onSignup:L,onUpdateProfile:P,toggleTheme:N,isGlobalSearchOpen:c,handleGlobalSearch:u,closeGlobalSearch:h,isCollapsed:d,orderModalState:f,closeOrderModal:x,handleShowConfirmation:w,confirmationModalState:p,handleCloseConfirmation:m,handleConfirmOrder:S}),a.jsx(kc,{position:"top-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:r,toastStyle:{background:r==="dark"?"#1F2937":"#FFFFFF",color:r==="dark"?"#F9FAFB":"#111827"}}),a.jsx(b.Suspense,{fallback:null,children:a.jsx(T4,{enabled:!1})})]})}const _4=b.memo(function({isAuthenticated:e,user:n,loading:s,theme:r,onLogin:i,onLogout:o,onSignup:l,onUpdateProfile:c,toggleTheme:u,isGlobalSearchOpen:h,handleGlobalSearch:d,closeGlobalSearch:f,isCollapsed:x,orderModalState:p,closeOrderModal:y,handleShowConfirmation:w,confirmationModalState:m,handleCloseConfirmation:g,handleConfirmOrder:S}){const N=Tn(),C=e&&!["/login","/signup","/"].includes(N.pathname);return a.jsxs(a.Fragment,{children:[C&&a.jsx(yj,{}),C&&a.jsx(v4,{}),C&&a.jsx(x4,{}),a.jsx("main",{className:`main-content ${C?"with-sidebar":""} ${C&&x?"sidebar-collapsed":""}`,children:a.jsx(y4,{isAuthenticated:e,user:n,loading:s,onLogin:i,onSignup:l,onLogout:o,onUpdateProfile:c,theme:r,toggleTheme:u})}),a.jsx(w4,{isAuthenticated:e,user:n}),a.jsx(S4,{isOpen:h,onClose:f,onSearch:d}),a.jsx(kc,{position:"top-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:r==="dark"?"dark":"light",toastStyle:{background:r==="dark"?"var(--bg-secondary)":"var(--bg-elevated)",color:"var(--text-primary)",border:"1px solid var(--border-primary)",borderRadius:"var(--radius-lg)",boxShadow:"var(--shadow-lg)"}}),a.jsx(b4,{}),a.jsx(N4,{}),a.jsx(UN,{isOpen:p.isOpen,onClose:y,stockData:p.stockData,initialOrderType:p.orderType,onOrderPlaced:y,onShowConfirmation:w}),a.jsx(j4,{isOpen:m.isOpen,onClose:g,onConfirm:S,orderData:m.orderData,stockData:m.stockData,orderSummary:m.orderSummary,profitLossEstimate:m.profitLossEstimate,isProcessing:m.isProcessing})]})});function dt(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var R4=typeof Symbol=="function"&&Symbol.observable||"@@observable",Tx=R4,xd=()=>Math.random().toString(36).substring(7).split("").join("."),M4={INIT:`@@redux/INIT${xd()}`,REPLACE:`@@redux/REPLACE${xd()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${xd()}`},zc=M4;function hg(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function dg(t,e,n){if(typeof t!="function")throw new Error(dt(2));if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(dt(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(dt(1));return n(dg)(t,e)}let s=t,r=e,i=new Map,o=i,l=0,c=!1;function u(){o===i&&(o=new Map,i.forEach((w,m)=>{o.set(m,w)}))}function h(){if(c)throw new Error(dt(3));return r}function d(w){if(typeof w!="function")throw new Error(dt(4));if(c)throw new Error(dt(5));let m=!0;u();const g=l++;return o.set(g,w),function(){if(m){if(c)throw new Error(dt(6));m=!1,u(),o.delete(g),i=null}}}function f(w){if(!hg(w))throw new Error(dt(7));if(typeof w.type>"u")throw new Error(dt(8));if(typeof w.type!="string")throw new Error(dt(17));if(c)throw new Error(dt(9));try{c=!0,r=s(r,w)}finally{c=!1}return(i=o).forEach(g=>{g()}),w}function x(w){if(typeof w!="function")throw new Error(dt(10));s=w,f({type:zc.REPLACE})}function p(){const w=d;return{subscribe(m){if(typeof m!="object"||m===null)throw new Error(dt(11));function g(){const N=m;N.next&&N.next(h())}return g(),{unsubscribe:w(g)}},[Tx](){return this}}}return f({type:zc.INIT}),{dispatch:f,subscribe:d,getState:h,replaceReducer:x,[Tx]:p}}function I4(t){Object.keys(t).forEach(e=>{const n=t[e];if(typeof n(void 0,{type:zc.INIT})>"u")throw new Error(dt(12));if(typeof n(void 0,{type:zc.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(dt(13))})}function vj(t){const e=Object.keys(t),n={};for(let i=0;i<e.length;i++){const o=e[i];typeof t[o]=="function"&&(n[o]=t[o])}const s=Object.keys(n);let r;try{I4(n)}catch(i){r=i}return function(o={},l){if(r)throw r;let c=!1;const u={};for(let h=0;h<s.length;h++){const d=s[h],f=n[d],x=o[d],p=f(x,l);if(typeof p>"u")throw l&&l.type,new Error(dt(14));u[d]=p,c=c||p!==x}return c=c||s.length!==Object.keys(o).length,c?u:o}}function $c(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,n)=>(...s)=>e(n(...s)))}function A4(...t){return e=>(n,s)=>{const r=e(n,s);let i=()=>{throw new Error(dt(15))};const o={getState:r.getState,dispatch:(c,...u)=>i(c,...u)},l=t.map(c=>c(o));return i=$c(...l)(r.dispatch),{...r,dispatch:i}}}function O4(t){return hg(t)&&"type"in t&&typeof t.type=="string"}var xj=Symbol.for("immer-nothing"),Lx=Symbol.for("immer-draftable"),sn=Symbol.for("immer-state");function Cn(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var zi=Object.getPrototypeOf;function Br(t){return!!t&&!!t[sn]}function cs(t){var e;return t?wj(t)||Array.isArray(t)||!!t[Lx]||!!((e=t.constructor)!=null&&e[Lx])||Vu(t)||Uu(t):!1}var D4=Object.prototype.constructor.toString();function wj(t){if(!t||typeof t!="object")return!1;const e=zi(t);if(e===null)return!0;const n=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===D4}function Vc(t,e){$u(t)===0?Reflect.ownKeys(t).forEach(n=>{e(n,t[n],t)}):t.forEach((n,s)=>e(s,n,t))}function $u(t){const e=t[sn];return e?e.type_:Array.isArray(t)?1:Vu(t)?2:Uu(t)?3:0}function pp(t,e){return $u(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function Sj(t,e,n){const s=$u(t);s===2?t.set(e,n):s===3?t.add(n):t[e]=n}function F4(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function Vu(t){return t instanceof Map}function Uu(t){return t instanceof Set}function fr(t){return t.copy_||t.base_}function mp(t,e){if(Vu(t))return new Map(t);if(Uu(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const n=wj(t);if(e===!0||e==="class_only"&&!n){const s=Object.getOwnPropertyDescriptors(t);delete s[sn];let r=Reflect.ownKeys(s);for(let i=0;i<r.length;i++){const o=r[i],l=s[o];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(s[o]={configurable:!0,writable:!0,enumerable:l.enumerable,value:t[o]})}return Object.create(zi(t),s)}else{const s=zi(t);if(s!==null&&n)return{...t};const r=Object.create(s);return Object.assign(r,t)}}function fg(t,e=!1){return Wu(t)||Br(t)||!cs(t)||($u(t)>1&&(t.set=t.add=t.clear=t.delete=B4),Object.freeze(t),e&&Object.entries(t).forEach(([n,s])=>fg(s,!0))),t}function B4(){Cn(2)}function Wu(t){return Object.isFrozen(t)}var z4={};function zr(t){const e=z4[t];return e||Cn(0,t),e}var mo;function bj(){return mo}function $4(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function _x(t,e){e&&(zr("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function gp(t){yp(t),t.drafts_.forEach(V4),t.drafts_=null}function yp(t){t===mo&&(mo=t.parent_)}function Rx(t){return mo=$4(mo,t)}function V4(t){const e=t[sn];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function Mx(t,e){e.unfinalizedDrafts_=e.drafts_.length;const n=e.drafts_[0];return t!==void 0&&t!==n?(n[sn].modified_&&(gp(e),Cn(4)),cs(t)&&(t=Uc(e,t),e.parent_||Wc(e,t)),e.patches_&&zr("Patches").generateReplacementPatches_(n[sn].base_,t,e.patches_,e.inversePatches_)):t=Uc(e,n,[]),gp(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==xj?t:void 0}function Uc(t,e,n){if(Wu(e))return e;const s=e[sn];if(!s)return Vc(e,(r,i)=>Ix(t,s,e,r,i,n)),e;if(s.scope_!==t)return e;if(!s.modified_)return Wc(t,s.base_,!0),s.base_;if(!s.finalized_){s.finalized_=!0,s.scope_.unfinalizedDrafts_--;const r=s.copy_;let i=r,o=!1;s.type_===3&&(i=new Set(r),r.clear(),o=!0),Vc(i,(l,c)=>Ix(t,s,r,l,c,n,o)),Wc(t,r,!1),n&&t.patches_&&zr("Patches").generatePatches_(s,n,t.patches_,t.inversePatches_)}return s.copy_}function Ix(t,e,n,s,r,i,o){if(Br(r)){const l=i&&e&&e.type_!==3&&!pp(e.assigned_,s)?i.concat(s):void 0,c=Uc(t,r,l);if(Sj(n,s,c),Br(c))t.canAutoFreeze_=!1;else return}else o&&n.add(r);if(cs(r)&&!Wu(r)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;Uc(t,r),(!e||!e.scope_.parent_)&&typeof s!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,s)&&Wc(t,r)}}function Wc(t,e,n=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&fg(e,n)}function U4(t,e){const n=Array.isArray(t),s={type_:n?1:0,scope_:e?e.scope_:bj(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let r=s,i=pg;n&&(r=[s],i=go);const{revoke:o,proxy:l}=Proxy.revocable(r,i);return s.draft_=l,s.revoke_=o,l}var pg={get(t,e){if(e===sn)return t;const n=fr(t);if(!pp(n,e))return W4(t,n,e);const s=n[e];return t.finalized_||!cs(s)?s:s===wd(t.base_,e)?(Sd(t),t.copy_[e]=xp(s,t)):s},has(t,e){return e in fr(t)},ownKeys(t){return Reflect.ownKeys(fr(t))},set(t,e,n){const s=Nj(fr(t),e);if(s!=null&&s.set)return s.set.call(t.draft_,n),!0;if(!t.modified_){const r=wd(fr(t),e),i=r==null?void 0:r[sn];if(i&&i.base_===n)return t.copy_[e]=n,t.assigned_[e]=!1,!0;if(F4(n,r)&&(n!==void 0||pp(t.base_,e)))return!0;Sd(t),vp(t)}return t.copy_[e]===n&&(n!==void 0||e in t.copy_)||Number.isNaN(n)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=n,t.assigned_[e]=!0),!0},deleteProperty(t,e){return wd(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,Sd(t),vp(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const n=fr(t),s=Reflect.getOwnPropertyDescriptor(n,e);return s&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:s.enumerable,value:n[e]}},defineProperty(){Cn(11)},getPrototypeOf(t){return zi(t.base_)},setPrototypeOf(){Cn(12)}},go={};Vc(pg,(t,e)=>{go[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});go.deleteProperty=function(t,e){return go.set.call(this,t,e,void 0)};go.set=function(t,e,n){return pg.set.call(this,t[0],e,n,t[0])};function wd(t,e){const n=t[sn];return(n?fr(n):t)[e]}function W4(t,e,n){var r;const s=Nj(e,n);return s?"value"in s?s.value:(r=s.get)==null?void 0:r.call(t.draft_):void 0}function Nj(t,e){if(!(e in t))return;let n=zi(t);for(;n;){const s=Object.getOwnPropertyDescriptor(n,e);if(s)return s;n=zi(n)}}function vp(t){t.modified_||(t.modified_=!0,t.parent_&&vp(t.parent_))}function Sd(t){t.copy_||(t.copy_=mp(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var H4=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,n,s)=>{if(typeof e=="function"&&typeof n!="function"){const i=n;n=e;const o=this;return function(c=i,...u){return o.produce(c,h=>n.call(this,h,...u))}}typeof n!="function"&&Cn(6),s!==void 0&&typeof s!="function"&&Cn(7);let r;if(cs(e)){const i=Rx(this),o=xp(e,void 0);let l=!0;try{r=n(o),l=!1}finally{l?gp(i):yp(i)}return _x(i,s),Mx(r,i)}else if(!e||typeof e!="object"){if(r=n(e),r===void 0&&(r=e),r===xj&&(r=void 0),this.autoFreeze_&&fg(r,!0),s){const i=[],o=[];zr("Patches").generateReplacementPatches_(e,r,i,o),s(i,o)}return r}else Cn(1,e)},this.produceWithPatches=(e,n)=>{if(typeof e=="function")return(o,...l)=>this.produceWithPatches(o,c=>e(c,...l));let s,r;return[this.produce(e,n,(o,l)=>{s=o,r=l}),s,r]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){cs(t)||Cn(8),Br(t)&&(t=Y4(t));const e=Rx(this),n=xp(t,void 0);return n[sn].isManual_=!0,yp(e),n}finishDraft(t,e){const n=t&&t[sn];(!n||!n.isManual_)&&Cn(9);const{scope_:s}=n;return _x(s,e),Mx(void 0,s)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let n;for(n=e.length-1;n>=0;n--){const r=e[n];if(r.path.length===0&&r.op==="replace"){t=r.value;break}}n>-1&&(e=e.slice(n+1));const s=zr("Patches").applyPatches_;return Br(t)?s(t,e):this.produce(t,r=>s(r,e))}};function xp(t,e){const n=Vu(t)?zr("MapSet").proxyMap_(t,e):Uu(t)?zr("MapSet").proxySet_(t,e):U4(t,e);return(e?e.scope_:bj()).drafts_.push(n),n}function Y4(t){return Br(t)||Cn(10,t),jj(t)}function jj(t){if(!cs(t)||Wu(t))return t;const e=t[sn];let n;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,n=mp(t,e.scope_.immer_.useStrictShallowCopy_)}else n=mp(t,!0);return Vc(n,(s,r)=>{Sj(n,s,jj(r))}),e&&(e.finalized_=!1),n}var rn=new H4,Cj=rn.produce;rn.produceWithPatches.bind(rn);rn.setAutoFreeze.bind(rn);rn.setUseStrictShallowCopy.bind(rn);rn.applyPatches.bind(rn);rn.createDraft.bind(rn);rn.finishDraft.bind(rn);function kj(t){return({dispatch:n,getState:s})=>r=>i=>typeof i=="function"?i(n,s,t):r(i)}var q4=kj(),G4=kj,Q4=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?$c:$c.apply(null,arguments)},K4=t=>t&&typeof t.match=="function";function Ba(t,e){function n(...s){if(e){let r=e(...s);if(!r)throw new Error(ss(0));return{type:t,payload:r.payload,..."meta"in r&&{meta:r.meta},..."error"in r&&{error:r.error}}}return{type:t,payload:s[0]}}return n.toString=()=>`${t}`,n.type=t,n.match=s=>O4(s)&&s.type===t,n}var Pj=class xa extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,xa.prototype)}static get[Symbol.species](){return xa}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new xa(...e[0].concat(this)):new xa(...e.concat(this))}};function Ax(t){return cs(t)?Cj(t,()=>{}):t}function xl(t,e,n){return t.has(e)?t.get(e):t.set(e,n(e)).get(e)}function X4(t){return typeof t=="boolean"}var J4=()=>function(e){const{thunk:n=!0,immutableCheck:s=!0,serializableCheck:r=!0,actionCreatorCheck:i=!0}=e??{};let o=new Pj;return n&&(X4(n)?o.push(q4):o.push(G4(n.extraArgument))),o},Z4="RTK_autoBatch",Ox=t=>e=>{setTimeout(e,t)},eF=(t={type:"raf"})=>e=>(...n)=>{const s=e(...n);let r=!0,i=!1,o=!1;const l=new Set,c=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:Ox(10):t.type==="callback"?t.queueNotification:Ox(t.timeout),u=()=>{o=!1,i&&(i=!1,l.forEach(h=>h()))};return Object.assign({},s,{subscribe(h){const d=()=>r&&h(),f=s.subscribe(d);return l.add(h),()=>{f(),l.delete(h)}},dispatch(h){var d;try{return r=!((d=h==null?void 0:h.meta)!=null&&d[Z4]),i=!r,i&&(o||(o=!0,c(u))),s.dispatch(h)}finally{r=!0}}})},tF=t=>function(n){const{autoBatch:s=!0}=n??{};let r=new Pj(t);return s&&r.push(eF(typeof s=="object"?s:void 0)),r};function nF(t){const e=J4(),{reducer:n=void 0,middleware:s,devTools:r=!0,preloadedState:i=void 0,enhancers:o=void 0}=t||{};let l;if(typeof n=="function")l=n;else if(hg(n))l=vj(n);else throw new Error(ss(1));let c;typeof s=="function"?c=s(e):c=e();let u=$c;r&&(u=Q4({trace:!1,...typeof r=="object"&&r}));const h=A4(...c),d=tF(h);let f=typeof o=="function"?o(d):d();const x=u(...f);return dg(l,i,x)}function Ej(t){const e={},n=[];let s;const r={addCase(i,o){const l=typeof i=="string"?i:i.type;if(!l)throw new Error(ss(28));if(l in e)throw new Error(ss(29));return e[l]=o,r},addMatcher(i,o){return n.push({matcher:i,reducer:o}),r},addDefaultCase(i){return s=i,r}};return t(r),[e,n,s]}function sF(t){return typeof t=="function"}function rF(t,e){let[n,s,r]=Ej(e),i;if(sF(t))i=()=>Ax(t());else{const l=Ax(t);i=()=>l}function o(l=i(),c){let u=[n[c.type],...s.filter(({matcher:h})=>h(c)).map(({reducer:h})=>h)];return u.filter(h=>!!h).length===0&&(u=[r]),u.reduce((h,d)=>{if(d)if(Br(h)){const x=d(h,c);return x===void 0?h:x}else{if(cs(h))return Cj(h,f=>d(f,c));{const f=d(h,c);if(f===void 0){if(h===null)return h;throw Error("A case reducer on a non-draftable value must not return undefined")}return f}}return h},l)}return o.getInitialState=i,o}var iF=(t,e)=>K4(t)?t.match(e):t(e);function aF(...t){return e=>t.some(n=>iF(n,e))}var oF="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",lF=(t=21)=>{let e="",n=t;for(;n--;)e+=oF[Math.random()*64|0];return e},cF=["name","message","stack","code"],bd=class{constructor(t,e){rh(this,"_type");this.payload=t,this.meta=e}},Dx=class{constructor(t,e){rh(this,"_type");this.payload=t,this.meta=e}},uF=t=>{if(typeof t=="object"&&t!==null){const e={};for(const n of cF)typeof t[n]=="string"&&(e[n]=t[n]);return e}return{message:String(t)}},Fx="External signal was aborted",Te=(()=>{function t(e,n,s){const r=Ba(e+"/fulfilled",(c,u,h,d)=>({payload:c,meta:{...d||{},arg:h,requestId:u,requestStatus:"fulfilled"}})),i=Ba(e+"/pending",(c,u,h)=>({payload:void 0,meta:{...h||{},arg:u,requestId:c,requestStatus:"pending"}})),o=Ba(e+"/rejected",(c,u,h,d,f)=>({payload:d,error:(s&&s.serializeError||uF)(c||"Rejected"),meta:{...f||{},arg:h,requestId:u,rejectedWithValue:!!d,requestStatus:"rejected",aborted:(c==null?void 0:c.name)==="AbortError",condition:(c==null?void 0:c.name)==="ConditionError"}}));function l(c,{signal:u}={}){return(h,d,f)=>{const x=s!=null&&s.idGenerator?s.idGenerator(c):lF(),p=new AbortController;let y,w;function m(S){w=S,p.abort()}u&&(u.aborted?m(Fx):u.addEventListener("abort",()=>m(Fx),{once:!0}));const g=async function(){var C,E;let S;try{let L=(C=s==null?void 0:s.condition)==null?void 0:C.call(s,c,{getState:d,extra:f});if(dF(L)&&(L=await L),L===!1||p.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const P=new Promise((R,_)=>{y=()=>{_({name:"AbortError",message:w||"Aborted"})},p.signal.addEventListener("abort",y)});h(i(x,c,(E=s==null?void 0:s.getPendingMeta)==null?void 0:E.call(s,{requestId:x,arg:c},{getState:d,extra:f}))),S=await Promise.race([P,Promise.resolve(n(c,{dispatch:h,getState:d,extra:f,requestId:x,signal:p.signal,abort:m,rejectWithValue:(R,_)=>new bd(R,_),fulfillWithValue:(R,_)=>new Dx(R,_)})).then(R=>{if(R instanceof bd)throw R;return R instanceof Dx?r(R.payload,x,c,R.meta):r(R,x,c)})])}catch(L){S=L instanceof bd?o(null,x,c,L.payload,L.meta):o(L,x,c)}finally{y&&p.signal.removeEventListener("abort",y)}return s&&!s.dispatchConditionRejection&&o.match(S)&&S.meta.condition||h(S),S}();return Object.assign(g,{abort:m,requestId:x,arg:c,unwrap(){return g.then(hF)}})}}return Object.assign(l,{pending:i,rejected:o,fulfilled:r,settled:aF(o,r),typePrefix:e})}return t.withTypes=()=>t,t})();function hF(t){if(t.meta&&t.meta.rejectedWithValue)throw t.payload;if(t.error)throw t.error;return t.payload}function dF(t){return t!==null&&typeof t=="object"&&typeof t.then=="function"}var fF=Symbol.for("rtk-slice-createasyncthunk");function pF(t,e){return`${t}/${e}`}function mF({creators:t}={}){var n;const e=(n=t==null?void 0:t.asyncThunk)==null?void 0:n[fF];return function(r){const{name:i,reducerPath:o=i}=r;if(!i)throw new Error(ss(11));const l=(typeof r.reducers=="function"?r.reducers(yF()):r.reducers)||{},c=Object.keys(l),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},h={addCase(N,C){const E=typeof N=="string"?N:N.type;if(!E)throw new Error(ss(12));if(E in u.sliceCaseReducersByType)throw new Error(ss(13));return u.sliceCaseReducersByType[E]=C,h},addMatcher(N,C){return u.sliceMatchers.push({matcher:N,reducer:C}),h},exposeAction(N,C){return u.actionCreators[N]=C,h},exposeCaseReducer(N,C){return u.sliceCaseReducersByName[N]=C,h}};c.forEach(N=>{const C=l[N],E={reducerName:N,type:pF(i,N),createNotation:typeof r.reducers=="function"};xF(C)?SF(E,C,h,e):vF(E,C,h)});function d(){const[N={},C=[],E=void 0]=typeof r.extraReducers=="function"?Ej(r.extraReducers):[r.extraReducers],L={...N,...u.sliceCaseReducersByType};return rF(r.initialState,P=>{for(let R in L)P.addCase(R,L[R]);for(let R of u.sliceMatchers)P.addMatcher(R.matcher,R.reducer);for(let R of C)P.addMatcher(R.matcher,R.reducer);E&&P.addDefaultCase(E)})}const f=N=>N,x=new Map,p=new WeakMap;let y;function w(N,C){return y||(y=d()),y(N,C)}function m(){return y||(y=d()),y.getInitialState()}function g(N,C=!1){function E(P){let R=P[N];return typeof R>"u"&&C&&(R=xl(p,E,m)),R}function L(P=f){const R=xl(x,C,()=>new WeakMap);return xl(R,P,()=>{const _={};for(const[I,O]of Object.entries(r.selectors??{}))_[I]=gF(O,P,()=>xl(p,P,m),C);return _})}return{reducerPath:N,getSelectors:L,get selectors(){return L(E)},selectSlice:E}}const S={name:i,reducer:w,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:m,...g(o),injectInto(N,{reducerPath:C,...E}={}){const L=C??o;return N.inject({reducerPath:L,reducer:w},E),{...S,...g(L,!0)}}};return S}}function gF(t,e,n,s){function r(i,...o){let l=e(i);return typeof l>"u"&&s&&(l=n()),t(l,...o)}return r.unwrapped=t,r}var Zs=mF();function yF(){function t(e,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...n}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...n){return e(...n)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:n}},asyncThunk:t}}function vF({type:t,reducerName:e,createNotation:n},s,r){let i,o;if("reducer"in s){if(n&&!wF(s))throw new Error(ss(17));i=s.reducer,o=s.prepare}else i=s;r.addCase(t,i).exposeCaseReducer(e,i).exposeAction(e,o?Ba(t,o):Ba(t))}function xF(t){return t._reducerDefinitionType==="asyncThunk"}function wF(t){return t._reducerDefinitionType==="reducerWithPrepare"}function SF({type:t,reducerName:e},n,s,r){if(!r)throw new Error(ss(18));const{payloadCreator:i,fulfilled:o,pending:l,rejected:c,settled:u,options:h}=n,d=r(t,i,h);s.exposeAction(e,d),o&&s.addCase(d.fulfilled,o),l&&s.addCase(d.pending,l),c&&s.addCase(d.rejected,c),u&&s.addMatcher(d.settled,u),s.exposeCaseReducer(e,{fulfilled:o||wl,pending:l||wl,rejected:c||wl,settled:u||wl})}function wl(){}function ss(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var mg="persist:",Tj="persist/FLUSH",gg="persist/REHYDRATE",Lj="persist/PAUSE",_j="persist/PERSIST",Rj="persist/PURGE",Mj="persist/REGISTER",bF=-1;function Ul(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Ul=function(n){return typeof n}:Ul=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Ul(t)}function Bx(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function NF(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Bx(n,!0).forEach(function(s){jF(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Bx(n).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function jF(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function CF(t,e,n,s){s.debug;var r=NF({},n);return t&&Ul(t)==="object"&&Object.keys(t).forEach(function(i){i!=="_persist"&&e[i]===n[i]&&(r[i]=t[i])}),r}function kF(t){var e=t.blacklist||null,n=t.whitelist||null,s=t.transforms||[],r=t.throttle||0,i="".concat(t.keyPrefix!==void 0?t.keyPrefix:mg).concat(t.key),o=t.storage,l;t.serialize===!1?l=function(C){return C}:typeof t.serialize=="function"?l=t.serialize:l=PF;var c=t.writeFailHandler||null,u={},h={},d=[],f=null,x=null,p=function(C){Object.keys(C).forEach(function(E){m(E)&&u[E]!==C[E]&&d.indexOf(E)===-1&&d.push(E)}),Object.keys(u).forEach(function(E){C[E]===void 0&&m(E)&&d.indexOf(E)===-1&&u[E]!==void 0&&d.push(E)}),f===null&&(f=setInterval(y,r)),u=C};function y(){if(d.length===0){f&&clearInterval(f),f=null;return}var N=d.shift(),C=s.reduce(function(E,L){return L.in(E,N,u)},u[N]);if(C!==void 0)try{h[N]=l(C)}catch(E){console.error("redux-persist/createPersistoid: error serializing state",E)}else delete h[N];d.length===0&&w()}function w(){Object.keys(h).forEach(function(N){u[N]===void 0&&delete h[N]}),x=o.setItem(i,l(h)).catch(g)}function m(N){return!(n&&n.indexOf(N)===-1&&N!=="_persist"||e&&e.indexOf(N)!==-1)}function g(N){c&&c(N)}var S=function(){for(;d.length!==0;)y();return x||Promise.resolve()};return{update:p,flush:S}}function PF(t){return JSON.stringify(t)}function EF(t){var e=t.transforms||[],n="".concat(t.keyPrefix!==void 0?t.keyPrefix:mg).concat(t.key),s=t.storage;t.debug;var r;return t.deserialize===!1?r=function(o){return o}:typeof t.deserialize=="function"?r=t.deserialize:r=TF,s.getItem(n).then(function(i){if(i)try{var o={},l=r(i);return Object.keys(l).forEach(function(c){o[c]=e.reduceRight(function(u,h){return h.out(u,c,l)},r(l[c]))}),o}catch(c){throw c}else return})}function TF(t){return JSON.parse(t)}function LF(t){var e=t.storage,n="".concat(t.keyPrefix!==void 0?t.keyPrefix:mg).concat(t.key);return e.removeItem(n,_F)}function _F(t){}function zx(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function Yn(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?zx(n,!0).forEach(function(s){RF(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):zx(n).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function RF(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function MF(t,e){if(t==null)return{};var n=IF(t,e),s,r;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);for(r=0;r<i.length;r++)s=i[r],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(t,s)&&(n[s]=t[s])}return n}function IF(t,e){if(t==null)return{};var n={},s=Object.keys(t),r,i;for(i=0;i<s.length;i++)r=s[i],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}var AF=5e3;function OF(t,e){var n=t.version!==void 0?t.version:bF;t.debug;var s=t.stateReconciler===void 0?CF:t.stateReconciler,r=t.getStoredState||EF,i=t.timeout!==void 0?t.timeout:AF,o=null,l=!1,c=!0,u=function(d){return d._persist.rehydrated&&o&&!c&&o.update(d),d};return function(h,d){var f=h||{},x=f._persist,p=MF(f,["_persist"]),y=p;if(d.type===_j){var w=!1,m=function(P,R){w||(d.rehydrate(t.key,P,R),w=!0)};if(i&&setTimeout(function(){!w&&m(void 0,new Error('redux-persist: persist timed out for persist key "'.concat(t.key,'"')))},i),c=!1,o||(o=kF(t)),x)return Yn({},e(y,d),{_persist:x});if(typeof d.rehydrate!="function"||typeof d.register!="function")throw new Error("redux-persist: either rehydrate or register is not a function on the PERSIST action. This can happen if the action is being replayed. This is an unexplored use case, please open an issue and we will figure out a resolution.");return d.register(t.key),r(t).then(function(L){var P=t.migrate||function(R,_){return Promise.resolve(R)};P(L,n).then(function(R){m(R)},function(R){m(void 0,R)})},function(L){m(void 0,L)}),Yn({},e(y,d),{_persist:{version:n,rehydrated:!1}})}else{if(d.type===Rj)return l=!0,d.result(LF(t)),Yn({},e(y,d),{_persist:x});if(d.type===Tj)return d.result(o&&o.flush()),Yn({},e(y,d),{_persist:x});if(d.type===Lj)c=!0;else if(d.type===gg){if(l)return Yn({},y,{_persist:Yn({},x,{rehydrated:!0})});if(d.key===t.key){var g=e(y,d),S=d.payload,N=s!==!1&&S!==void 0?s(S,h,g,t):g,C=Yn({},N,{_persist:Yn({},x,{rehydrated:!0})});return u(C)}}}if(!x)return e(h,d);var E=e(y,d);return E===y?h:u(Yn({},E,{_persist:x}))}}function $x(t){return BF(t)||FF(t)||DF()}function DF(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function FF(t){if(Symbol.iterator in Object(t)||Object.prototype.toString.call(t)==="[object Arguments]")return Array.from(t)}function BF(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}function Vx(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,s)}return n}function wp(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Vx(n,!0).forEach(function(s){zF(t,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Vx(n).forEach(function(s){Object.defineProperty(t,s,Object.getOwnPropertyDescriptor(n,s))})}return t}function zF(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var Ij={registry:[],bootstrapped:!1},$F=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ij,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case Mj:return wp({},e,{registry:[].concat($x(e.registry),[n.key])});case gg:var s=e.registry.indexOf(n.key),r=$x(e.registry);return r.splice(s,1),wp({},e,{registry:r,bootstrapped:r.length===0});default:return e}};function VF(t,e,n){var s=dg($F,Ij,void 0),r=function(c){s.dispatch({type:Mj,key:c})},i=function(c,u,h){var d={type:gg,payload:u,err:h,key:c};t.dispatch(d),s.dispatch(d)},o=wp({},s,{purge:function(){var c=[];return t.dispatch({type:Rj,result:function(h){c.push(h)}}),Promise.all(c)},flush:function(){var c=[];return t.dispatch({type:Tj,result:function(h){c.push(h)}}),Promise.all(c)},pause:function(){t.dispatch({type:Lj})},persist:function(){t.dispatch({type:_j,register:r,rehydrate:i})}});return o.persist(),o}var yg={},vg={};vg.__esModule=!0;vg.default=HF;function Wl(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Wl=function(n){return typeof n}:Wl=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Wl(t)}function Nd(){}var UF={getItem:Nd,setItem:Nd,removeItem:Nd};function WF(t){if((typeof self>"u"?"undefined":Wl(self))!=="object"||!(t in self))return!1;try{var e=self[t],n="redux-persist ".concat(t," test");e.setItem(n,"test"),e.getItem(n),e.removeItem(n)}catch{return!1}return!0}function HF(t){var e="".concat(t,"Storage");return WF(e)?self[e]:UF}yg.__esModule=!0;yg.default=GF;var YF=qF(vg);function qF(t){return t&&t.__esModule?t:{default:t}}function GF(t){var e=(0,YF.default)(t);return{getItem:function(s){return new Promise(function(r,i){r(e.getItem(s))})},setItem:function(s,r){return new Promise(function(i,o){i(e.setItem(s,r))})},removeItem:function(s){return new Promise(function(r,i){r(e.removeItem(s))})}}}var Aj=void 0,QF=KF(yg);function KF(t){return t&&t.__esModule?t:{default:t}}var XF=(0,QF.default)("local");Aj=XF;const JF={user:null,token:localStorage.getItem("token"),isAuthenticated:!1,isLoading:!1,error:null,virtualMoney:0,registrationBonus:1e4},jd=Te("auth/loginUser",async(t,{rejectWithValue:e})=>{try{const n=await Lo.login(t);return n.success?(localStorage.setItem("token",n.data.token),localStorage.setItem("user",JSON.stringify(n.data.user)),n.data):e(n.message)}catch(n){return e(n.message||"Login failed")}}),Cd=Te("auth/registerUser",async(t,{rejectWithValue:e})=>{try{const n=await Lo.register(t);return n.success?(localStorage.setItem("token",n.data.token),localStorage.setItem("user",JSON.stringify(n.data.user)),{...n.data,virtualMoney:1e4}):e(n.message)}catch(n){return e(n.message||"Registration failed")}}),kd=Te("auth/googleAuth",async(t,{rejectWithValue:e})=>{try{const n=await Lo.googleAuth(t);return n.success?(localStorage.setItem("token",n.data.token),localStorage.setItem("user",JSON.stringify(n.data.user)),{...n.data,virtualMoney:n.data.isNewUser?1e4:n.data.virtualMoney||0}):e(n.message)}catch(n){return e(n.message||"Google authentication failed")}}),ZF=Te("auth/logoutUser",async(t,{rejectWithValue:e})=>{try{return await Lo.logout(),localStorage.removeItem("token"),localStorage.removeItem("user"),!0}catch{return localStorage.removeItem("token"),localStorage.removeItem("user"),!0}}),eB=Te("auth/refreshToken",async(t,{rejectWithValue:e})=>{try{const n=await Lo.refreshToken();return n.success?(localStorage.setItem("token",n.data.token),n.data):e(n.message)}catch(n){return e(n.message||"Token refresh failed")}}),Oj=Zs({name:"auth",initialState:JF,reducers:{clearError:t=>{t.error=null},setUser:(t,e)=>{t.user=e.payload,t.isAuthenticated=!!e.payload},updateVirtualMoney:(t,e)=>{t.virtualMoney=e.payload,t.user&&(t.user.virtualMoney=e.payload)},addVirtualMoney:(t,e)=>{t.virtualMoney+=e.payload,t.user&&(t.user.virtualMoney=t.virtualMoney)},subtractVirtualMoney:(t,e)=>{t.virtualMoney=Math.max(0,t.virtualMoney-e.payload),t.user&&(t.user.virtualMoney=t.virtualMoney)},initializeAuth:t=>{const e=localStorage.getItem("token"),n=localStorage.getItem("user");if(e&&n)try{const s=JSON.parse(n);t.token=e,t.user=s,t.isAuthenticated=!0,t.virtualMoney=s.virtualMoney||0}catch{localStorage.removeItem("token"),localStorage.removeItem("user")}}},extraReducers:t=>{t.addCase(jd.pending,e=>{e.isLoading=!0,e.error=null}).addCase(jd.fulfilled,(e,n)=>{e.isLoading=!1,e.user=n.payload.user,e.token=n.payload.token,e.isAuthenticated=!0,e.virtualMoney=n.payload.user.virtualMoney||0,e.error=null}).addCase(jd.rejected,(e,n)=>{e.isLoading=!1,e.error=n.payload,e.isAuthenticated=!1}).addCase(Cd.pending,e=>{e.isLoading=!0,e.error=null}).addCase(Cd.fulfilled,(e,n)=>{e.isLoading=!1,e.user=n.payload.user,e.token=n.payload.token,e.isAuthenticated=!0,e.virtualMoney=1e4,e.error=null}).addCase(Cd.rejected,(e,n)=>{e.isLoading=!1,e.error=n.payload,e.isAuthenticated=!1}).addCase(kd.pending,e=>{e.isLoading=!0,e.error=null}).addCase(kd.fulfilled,(e,n)=>{e.isLoading=!1,e.user=n.payload.user,e.token=n.payload.token,e.isAuthenticated=!0,e.virtualMoney=n.payload.virtualMoney||0,e.error=null}).addCase(kd.rejected,(e,n)=>{e.isLoading=!1,e.error=n.payload,e.isAuthenticated=!1}).addCase(ZF.fulfilled,e=>{e.user=null,e.token=null,e.isAuthenticated=!1,e.virtualMoney=0,e.error=null,e.isLoading=!1}).addCase(eB.fulfilled,(e,n)=>{e.token=n.payload.token,e.user=n.payload.user,e.virtualMoney=n.payload.user.virtualMoney||e.virtualMoney})}}),{clearError:oz,setUser:lz,updateVirtualMoney:cz,addVirtualMoney:tB,subtractVirtualMoney:nB,initializeAuth:uz}=Oj.actions,sB=Oj.reducer,rB={holdings:[],summary:{totalValue:0,totalInvested:0,totalGains:0,totalGainsPercent:0,dayChange:0,dayChangePercent:0,totalStocks:0},performance:{chartData:[],timeframe:"1D"},isLoading:!1,error:null,lastUpdated:null},Dj=[{id:"holding_1",symbol:"RELIANCE",name:"Reliance Industries Ltd",quantity:0,avgPrice:0,currentPrice:2520,totalValue:0,totalGains:0,gainsPercent:0,dayChange:25,dayChangePercent:1,sector:"Energy"},{id:"holding_2",symbol:"TCS",name:"Tata Consultancy Services",quantity:0,avgPrice:0,currentPrice:3350,totalValue:0,totalGains:0,gainsPercent:0,dayChange:-15,dayChangePercent:-.45,sector:"IT"},{id:"holding_3",symbol:"INFY",name:"Infosys Limited",quantity:0,avgPrice:0,currentPrice:1520,totalValue:0,totalGains:0,gainsPercent:0,dayChange:12,dayChangePercent:.79,sector:"IT"}],Pd=Te("portfolio/fetchSummary",async(t,{rejectWithValue:e,getState:n})=>{try{const s=await FN.getSummary();return s.success?s.data:e(s.message)}catch{const{portfolio:r}=n();return Hl(r.holdings)}}),Ed=Te("portfolio/fetchHoldings",async(t,{rejectWithValue:e})=>{try{const n=await FN.getHoldings();return n.success?n.data:e(n.message)}catch{return Dj}}),Sp=Te("portfolio/updateHolding",async({symbol:t,quantity:e,price:n,type:s},{rejectWithValue:r,getState:i})=>{try{const{portfolio:o}=i(),l=o.holdings.find(u=>u.symbol===t);let c;if(s==="BUY")if(l){const u=l.quantity+e,d=(l.avgPrice*l.quantity+n*e)/u;c={...l,quantity:u,avgPrice:d,totalValue:u*l.currentPrice,totalGains:(l.currentPrice-d)*u,gainsPercent:(l.currentPrice-d)/d*100}}else{const u=Dj.find(h=>h.symbol===t);if(!u)return r("Stock not found");c={...u,id:`holding_${Date.now()}`,quantity:e,avgPrice:n,totalValue:e*u.currentPrice,totalGains:(u.currentPrice-n)*e,gainsPercent:(u.currentPrice-n)/n*100}}else if(s==="SELL"){if(!l||l.quantity<e)return r("Insufficient shares to sell");const u=l.quantity-e;u===0?c=null:c={...l,quantity:u,totalValue:u*l.currentPrice,totalGains:(l.currentPrice-l.avgPrice)*u,gainsPercent:(l.currentPrice-l.avgPrice)/l.avgPrice*100}}return{symbol:t,updatedHolding:c,type:s,quantity:e,price:n}}catch(o){return r(o.message||"Failed to update holding")}}),Hl=t=>{const e=t.reduce((l,c)=>l+c.totalValue,0),n=t.reduce((l,c)=>l+c.avgPrice*c.quantity,0),s=e-n,r=n>0?s/n*100:0,i=t.reduce((l,c)=>l+c.dayChange*c.quantity,0),o=e>0?i/(e-i)*100:0;return{totalValue:e,totalInvested:n,totalGains:s,totalGainsPercent:r,dayChange:i,dayChangePercent:o,totalStocks:t.filter(l=>l.quantity>0).length}},Fj=Zs({name:"portfolio",initialState:rB,reducers:{clearError:t=>{t.error=null},updateCurrentPrices:(t,e)=>{const n=e.payload;t.holdings=t.holdings.map(s=>{const r=n.find(i=>i.symbol===s.symbol);if(r){const i=r.price,o=s.quantity*i,l=(i-s.avgPrice)*s.quantity,c=s.avgPrice>0?(i-s.avgPrice)/s.avgPrice*100:0;return{...s,currentPrice:i,totalValue:o,totalGains:l,gainsPercent:c,dayChange:r.dayChange||s.dayChange,dayChangePercent:r.dayChangePercent||s.dayChangePercent}}return s}),t.summary=Hl(t.holdings),t.lastUpdated=new Date().toISOString()},setTimeframe:(t,e)=>{t.performance.timeframe=e.payload}},extraReducers:t=>{t.addCase(Pd.pending,e=>{e.isLoading=!0,e.error=null}).addCase(Pd.fulfilled,(e,n)=>{e.isLoading=!1,e.summary=n.payload,e.lastUpdated=new Date().toISOString()}).addCase(Pd.rejected,(e,n)=>{e.isLoading=!1,e.error=n.payload}).addCase(Ed.pending,e=>{e.isLoading=!0,e.error=null}).addCase(Ed.fulfilled,(e,n)=>{e.isLoading=!1,e.holdings=n.payload,e.summary=Hl(n.payload),e.lastUpdated=new Date().toISOString()}).addCase(Ed.rejected,(e,n)=>{e.isLoading=!1,e.error=n.payload}).addCase(Sp.fulfilled,(e,n)=>{const{symbol:s,updatedHolding:r}=n.payload;if(r===null)e.holdings=e.holdings.filter(i=>i.symbol!==s);else{const i=e.holdings.findIndex(o=>o.symbol===s);i>=0?e.holdings[i]=r:e.holdings.push(r)}e.summary=Hl(e.holdings),e.lastUpdated=new Date().toISOString()}).addCase(Sp.rejected,(e,n)=>{e.error=n.payload})}}),{clearError:hz,updateCurrentPrices:dz,setTimeframe:fz}=Fj.actions,iB=Fj.reducer,aB={recentTrades:[],activeOrders:[],tradeHistory:[],isLoading:!1,error:null,tradingFees:{brokerage:.03,stt:.1,gst:18}},Bj=[{id:"trade_1",symbol:"WIPRO",name:"Wipro Limited",type:"BUY",quantity:50,price:420,totalAmount:21e3,timestamp:new Date("2024-01-15T10:30:00"),status:"completed"},{id:"trade_2",symbol:"BAJFINANCE",name:"Bajaj Finance Limited",type:"SELL",quantity:25,price:6800,totalAmount:17e4,timestamp:new Date("2024-01-15T09:15:00"),status:"completed"}],zj=(t,e)=>{const n=t*(e.brokerage/100),s=t*(e.stt/100),r=n*(e.gst/100),i=n+s+r;return{brokerage:Math.round(n*100)/100,stt:Math.round(s*100)/100,gst:Math.round(r*100)/100,totalFees:Math.round(i*100)/100}},Td=Te("trading/executeTrade",async(t,{dispatch:e,getState:n,rejectWithValue:s})=>{try{const{symbol:r,quantity:i,price:o,type:l}=t,c=n(),{auth:u,trading:h}=c,d=i*o,f=zj(d,h.tradingFees),x=l==="BUY"?d+f.totalFees:d-f.totalFees;if(l==="BUY"&&u.virtualMoney<x)return s("Insufficient virtual money balance");if(l==="SELL"){const y=c.portfolio.holdings.find(w=>w.symbol===r);if(!y||y.quantity<i)return s("Insufficient shares to sell")}const p={id:`trade_${Date.now()}`,symbol:r,name:t.name||r,type:l,quantity:i,price:o,grossAmount:d,fees:f,netAmount:x,timestamp:new Date().toISOString(),status:"completed"};return e(l==="BUY"?nB(x):tB(x)),e(Sp({symbol:r,quantity:i,price:o,type:l})),p}catch(r){return s(r.message||"Trade execution failed")}}),oB=Te("trading/fetchRecentTrades",async(t=10,{rejectWithValue:e})=>{try{const n=await Hr.getRecentTrades(t);return n.success?n.data:e(n.message)}catch{return Bj}}),lB=Te("trading/fetchTradeHistory",async({startDate:t,endDate:e,symbol:n},{rejectWithValue:s})=>{try{const r=await Hr.getTradeHistory({startDate:t,endDate:e,symbol:n});return r.success?r.data:s(r.message)}catch{return Bj}}),Ld=Te("trading/placeOrder",async(t,{getState:e,rejectWithValue:n})=>{try{const{symbol:s,quantity:r,price:i,type:o,orderType:l}=t,c=e(),{auth:u}=c;if(l==="LIMIT"){const d=r*i,f=zj(d,c.trading.tradingFees),x=o==="BUY"?d+f.totalFees:d-f.totalFees;if(o==="BUY"&&u.virtualMoney<x)return n("Insufficient virtual money balance")}return{id:`order_${Date.now()}`,symbol:s,name:t.name||s,type:o,orderType:l,quantity:r,price:l==="MARKET"?null:i,status:"pending",timestamp:new Date().toISOString(),expiryDate:t.expiryDate||null}}catch(s){return n(s.message||"Order placement failed")}}),cB=Te("trading/cancelOrder",async(t,{rejectWithValue:e})=>{try{const n=await Hr.cancelOrder(t);return n.success?t:e(n.message)}catch{return t}}),$j=Zs({name:"trading",initialState:aB,reducers:{clearError:t=>{t.error=null},updateTradingFees:(t,e)=>{t.tradingFees={...t.tradingFees,...e.payload}},addTradeToHistory:(t,e)=>{t.tradeHistory.unshift(e.payload),t.recentTrades.unshift(e.payload),t.recentTrades.length>50&&(t.recentTrades=t.recentTrades.slice(0,50))}},extraReducers:t=>{t.addCase(Td.pending,e=>{e.isLoading=!0,e.error=null}).addCase(Td.fulfilled,(e,n)=>{e.isLoading=!1,e.recentTrades.unshift(n.payload),e.tradeHistory.unshift(n.payload),e.recentTrades.length>50&&(e.recentTrades=e.recentTrades.slice(0,50))}).addCase(Td.rejected,(e,n)=>{e.isLoading=!1,e.error=n.payload}).addCase(oB.fulfilled,(e,n)=>{e.recentTrades=n.payload}).addCase(lB.fulfilled,(e,n)=>{e.tradeHistory=n.payload}).addCase(Ld.pending,e=>{e.isLoading=!0,e.error=null}).addCase(Ld.fulfilled,(e,n)=>{e.isLoading=!1,e.activeOrders.push(n.payload)}).addCase(Ld.rejected,(e,n)=>{e.isLoading=!1,e.error=n.payload}).addCase(cB.fulfilled,(e,n)=>{const s=n.payload;e.activeOrders=e.activeOrders.filter(r=>r.id!==s)})}}),{clearError:pz,updateTradingFees:mz,addTradeToHistory:gz}=$j.actions,uB=$j.reducer,hB={stocks:[],isLoading:!1,error:null,lastUpdated:null},dB=[{id:"watch_1",symbol:"RELIANCE",name:"Reliance Industries Ltd",price:2520,change:25,changePercent:1,volume:125e4,marketCap:1705e9,pe:24.5,sector:"Energy",isFavorite:!0,alertPrice:2600,hasAlert:!0,addedAt:new Date("2024-01-10T10:00:00").toISOString()},{id:"watch_2",symbol:"TCS",name:"Tata Consultancy Services",price:3350,change:-15,changePercent:-.45,volume:89e4,marketCap:122e10,pe:28.2,sector:"IT",isFavorite:!1,alertPrice:null,hasAlert:!1,addedAt:new Date("2024-01-12T14:30:00").toISOString()},{id:"watch_3",symbol:"INFY",name:"Infosys Limited",price:1520,change:12,changePercent:.79,volume:11e5,marketCap:645e9,pe:22.8,sector:"IT",isFavorite:!0,alertPrice:1600,hasAlert:!0,addedAt:new Date("2024-01-08T09:15:00").toISOString()}],_d=Te("watchlist/fetchWatchlist",async(t,{rejectWithValue:e})=>{try{const n=await Gi.getWatchlist();return n.success?n.data:e(n.message)}catch{return dB}}),Ux=Te("watchlist/addToWatchlist",async(t,{getState:e,rejectWithValue:n})=>{try{const{symbol:s,name:r,price:i,sector:o}=t;if(e().watchlist.stocks.find(h=>h.symbol===s))return n("Stock already in watchlist");const u={id:`watch_${Date.now()}`,symbol:s,name:r,price:i,change:0,changePercent:0,volume:0,marketCap:0,pe:0,sector:o||"Unknown",isFavorite:!1,alertPrice:null,hasAlert:!1,addedAt:new Date().toISOString()};try{const h=await Gi.addStock(u);if(h.success)return h.data}catch{console.warn("API failed, adding to local watchlist")}return u}catch(s){return n(s.message||"Failed to add to watchlist")}}),Wx=Te("watchlist/removeFromWatchlist",async(t,{rejectWithValue:e})=>{try{try{if((await Gi.removeStock(t)).success)return t}catch{console.warn("API failed, removing from local watchlist")}return t}catch(n){return e(n.message||"Failed to remove from watchlist")}}),fB=Te("watchlist/toggleFavorite",async(t,{getState:e,rejectWithValue:n})=>{try{const r=e().watchlist.stocks.find(o=>o.id===t);if(!r)return n("Stock not found in watchlist");const i={...r,isFavorite:!r.isFavorite};try{const o=await Gi.updateStock(t,i);if(o.success)return o.data}catch{console.warn("API failed, updating local watchlist")}return i}catch(s){return n(s.message||"Failed to toggle favorite")}}),pB=Te("watchlist/setPriceAlert",async({stockId:t,alertPrice:e},{getState:n,rejectWithValue:s})=>{try{const i=n().watchlist.stocks.find(l=>l.id===t);if(!i)return s("Stock not found in watchlist");const o={...i,alertPrice:e,hasAlert:e!==null};try{const l=await Gi.updateStock(t,o);if(l.success)return l.data}catch{console.warn("API failed, updating local watchlist")}return o}catch(r){return s(r.message||"Failed to set price alert")}}),mB=Te("watchlist/updatePrices",async(t,{rejectWithValue:e})=>{try{return t}catch(n){return e(n.message||"Failed to update prices")}}),Vj=Zs({name:"watchlist",initialState:hB,reducers:{clearError:t=>{t.error=null},updateStockPrices:(t,e)=>{const n=e.payload;t.stocks=t.stocks.map(s=>{const r=n.find(i=>i.symbol===s.symbol);return r?{...s,price:r.price,change:r.change,changePercent:r.changePercent,volume:r.volume||s.volume,dayHigh:r.dayHigh||s.dayHigh,dayLow:r.dayLow||s.dayLow,lastUpdated:Date.now()}:s}),t.lastUpdated=new Date().toISOString()},syncWithStocksData:(t,e)=>{const n=e.payload;t.stocks=t.stocks.map(s=>{const r=n[s.symbol];return r?{...s,...r,lastUpdated:Date.now()}:s}),t.lastUpdated=new Date().toISOString()},sortWatchlist:(t,e)=>{const{sortBy:n,sortOrder:s}=e.payload;t.stocks.sort((r,i)=>{let o,l;switch(n){case"symbol":o=r.symbol,l=i.symbol;break;case"price":o=r.price,l=i.price;break;case"change":o=r.changePercent,l=i.changePercent;break;case"volume":o=r.volume,l=i.volume;break;case"addedAt":o=new Date(r.addedAt),l=new Date(i.addedAt);break;default:return 0}return s==="desc"?l>o?1:-1:o>l?1:-1})}},extraReducers:t=>{t.addCase(_d.pending,e=>{e.isLoading=!0,e.error=null}).addCase(_d.fulfilled,(e,n)=>{e.isLoading=!1,e.stocks=n.payload,e.lastUpdated=new Date().toISOString()}).addCase(_d.rejected,(e,n)=>{e.isLoading=!1,e.error=n.payload}).addCase(Ux.fulfilled,(e,n)=>{e.stocks.push(n.payload)}).addCase(Ux.rejected,(e,n)=>{e.error=n.payload}).addCase(Wx.fulfilled,(e,n)=>{const s=n.payload;e.stocks=e.stocks.filter(r=>r.id!==s)}).addCase(Wx.rejected,(e,n)=>{e.error=n.payload}).addCase(fB.fulfilled,(e,n)=>{const s=n.payload,r=e.stocks.findIndex(i=>i.id===s.id);r>=0&&(e.stocks[r]=s)}).addCase(pB.fulfilled,(e,n)=>{const s=n.payload,r=e.stocks.findIndex(i=>i.id===s.id);r>=0&&(e.stocks[r]=s)}).addCase(mB.fulfilled,(e,n)=>{const s=n.payload;e.stocks=e.stocks.map(r=>{const i=s.find(o=>o.symbol===r.symbol);return i?{...r,price:i.price,change:i.change,changePercent:i.changePercent,volume:i.volume||r.volume}:r}),e.lastUpdated=new Date().toISOString()})}}),{clearError:yz,updateStockPrices:vz,syncWithStocksData:xz,sortWatchlist:wz}=Vj.actions,gB=Vj.reducer,yB={orders:[],orderHistory:[],isLoading:!1,error:null,filters:{status:"all",type:"all",symbol:""}},vB=[{id:"ORD001",symbol:"RELIANCE",name:"Reliance Industries Ltd",type:"BUY",quantity:50,price:2520,orderPrice:2500,status:"executed",timestamp:new Date("2024-01-15T10:30:00").toISOString(),executedAt:new Date("2024-01-15T10:31:00").toISOString(),totalAmount:126e3},{id:"ORD002",symbol:"TCS",name:"Tata Consultancy Services",type:"SELL",quantity:20,price:3350,orderPrice:3400,status:"pending",timestamp:new Date("2024-01-15T11:15:00").toISOString(),executedAt:null,totalAmount:67e3}],Rd=Te("orders/fetchOrders",async(t,{rejectWithValue:e})=>{try{const n=await Hr.getOrders();return n.success?n.data:e(n.message)}catch{return vB}}),xB=Te("orders/placeOrder",async(t,{rejectWithValue:e})=>{try{const n={id:`ORD${Date.now()}`,...t,status:"pending",timestamp:new Date().toISOString(),executedAt:null};try{const s=await Hr.placeOrder(n);if(s.success)return s.data}catch{console.warn("API failed, creating local order")}return n}catch(n){return e(n.message||"Failed to place order")}}),wB=Te("orders/cancelOrder",async(t,{rejectWithValue:e})=>{try{try{if((await Hr.cancelOrder(t)).success)return t}catch{console.warn("API failed, cancelling local order")}return t}catch(n){return e(n.message||"Failed to cancel order")}}),Uj=Zs({name:"orders",initialState:yB,reducers:{clearError:t=>{t.error=null},setFilters:(t,e)=>{t.filters={...t.filters,...e.payload}},updateOrderStatus:(t,e)=>{const{orderId:n,status:s,executedAt:r,executedPrice:i}=e.payload,o=t.orders.find(l=>l.id===n);o&&(o.status=s,r&&(o.executedAt=r),i&&(o.price=i))}},extraReducers:t=>{t.addCase(Rd.pending,e=>{e.isLoading=!0,e.error=null}).addCase(Rd.fulfilled,(e,n)=>{e.isLoading=!1,e.orders=n.payload}).addCase(Rd.rejected,(e,n)=>{e.isLoading=!1,e.error=n.payload}).addCase(xB.fulfilled,(e,n)=>{e.orders.unshift(n.payload)}).addCase(wB.fulfilled,(e,n)=>{const s=n.payload,r=e.orders.find(i=>i.id===s);r&&(r.status="cancelled")})}}),{clearError:Sz,setFilters:bz,updateOrderStatus:Nz}=Uj.actions,SB=Uj.reducer,bB={articles:[],categories:["all","market","earnings","sector","policy"],activeCategory:"all",isLoading:!1,error:null,lastUpdated:null},NB=[{id:"news001",title:"Reliance Industries Reports Strong Q3 Results, Beats Estimates",summary:"Reliance Industries posted a 12% increase in net profit for Q3, driven by strong performance in retail and digital services segments.",category:"earnings",source:"Economic Times",author:"Financial Reporter",publishedAt:new Date("2024-01-15T09:30:00").toISOString(),readTime:3,imageUrl:"/api/placeholder/400/200",tags:["RELIANCE","Earnings","Q3 Results"],sentiment:"positive",views:1250,likes:89,isBookmarked:!1,relatedStocks:["RELIANCE"]},{id:"news002",title:"IT Sector Outlook: TCS and Infosys Lead Digital Transformation Wave",summary:"Indian IT giants are capitalizing on global digital transformation trends, with strong order books and margin improvements.",category:"sector",source:"Business Standard",author:"Tech Analyst",publishedAt:new Date("2024-01-15T08:45:00").toISOString(),readTime:5,imageUrl:"/api/placeholder/400/200",tags:["TCS","INFY","IT Sector","Digital"],sentiment:"positive",views:980,likes:67,isBookmarked:!0,relatedStocks:["TCS","INFY","WIPRO"]}],Md=Te("news/fetchNews",async({category:t="all",limit:e=20},{rejectWithValue:n})=>{try{const s=await tg.getNews({category:t,limit:e});return s.success?s.data:n(s.message)}catch{return NB}}),jB=Te("news/toggleBookmark",async(t,{getState:e,rejectWithValue:n})=>{try{const r=e().news.articles.find(o=>o.id===t);if(!r)return n("Article not found");const i={...r,isBookmarked:!r.isBookmarked};try{await tg.toggleBookmark(t)}catch{console.warn("API failed, updating local bookmark")}return i}catch(s){return n(s.message||"Failed to toggle bookmark")}}),Wj=Zs({name:"news",initialState:bB,reducers:{clearError:t=>{t.error=null},setActiveCategory:(t,e)=>{t.activeCategory=e.payload},updateArticleViews:(t,e)=>{const n=e.payload,s=t.articles.find(r=>r.id===n);s&&(s.views+=1)}},extraReducers:t=>{t.addCase(Md.pending,e=>{e.isLoading=!0,e.error=null}).addCase(Md.fulfilled,(e,n)=>{e.isLoading=!1,e.articles=n.payload,e.lastUpdated=new Date().toISOString()}).addCase(Md.rejected,(e,n)=>{e.isLoading=!1,e.error=n.payload}).addCase(jB.fulfilled,(e,n)=>{const s=n.payload,r=e.articles.findIndex(i=>i.id===s.id);r>=0&&(e.articles[r]=s)})}}),{clearError:jz,setActiveCategory:Cz,updateArticleViews:kz}=Wj.actions,CB=Wj.reducer,kB={theme:localStorage.getItem("theme")||"light",notifications:[],modals:{buyStock:{isOpen:!1,data:null},sellStock:{isOpen:!1,data:null},addToWatchlist:{isOpen:!1,data:null},priceAlert:{isOpen:!1,data:null},tradeConfirmation:{isOpen:!1,data:null}},loading:{global:!1,portfolio:!1,trading:!1,watchlist:!1},toast:{isVisible:!1,message:"",type:"info",duration:3e3}},Hj=Zs({name:"ui",initialState:kB,reducers:{setTheme:(t,e)=>{t.theme=e.payload,localStorage.setItem("theme",e.payload),document.documentElement.setAttribute("data-theme",e.payload)},toggleTheme:t=>{const e=t.theme==="light"?"dark":"light";t.theme=e,localStorage.setItem("theme",e),document.documentElement.setAttribute("data-theme",e)},openModal:(t,e)=>{const{modalName:n,data:s}=e.payload;t.modals[n]&&(t.modals[n].isOpen=!0,t.modals[n].data=s||null)},closeModal:(t,e)=>{const n=e.payload;t.modals[n]&&(t.modals[n].isOpen=!1,t.modals[n].data=null)},closeAllModals:t=>{Object.keys(t.modals).forEach(e=>{t.modals[e].isOpen=!1,t.modals[e].data=null})},setLoading:(t,e)=>{const{key:n,value:s}=e.payload;t.loading.hasOwnProperty(n)&&(t.loading[n]=s)},setGlobalLoading:(t,e)=>{t.loading.global=e.payload},showToast:(t,e)=>{const{message:n,type:s="info",duration:r=3e3}=e.payload;t.toast={isVisible:!0,message:n,type:s,duration:r}},hideToast:t=>{t.toast.isVisible=!1},showSuccessToast:(t,e)=>{t.toast={isVisible:!0,message:e.payload,type:"success",duration:3e3}},showErrorToast:(t,e)=>{t.toast={isVisible:!0,message:e.payload,type:"error",duration:5e3}},showWarningToast:(t,e)=>{t.toast={isVisible:!0,message:e.payload,type:"warning",duration:4e3}},showInfoToast:(t,e)=>{t.toast={isVisible:!0,message:e.payload,type:"info",duration:3e3}}}}),{setTheme:Pz,toggleTheme:Ez,openModal:Tz,closeModal:Lz,closeAllModals:_z,setLoading:Rz,setGlobalLoading:Mz,showToast:Iz,hideToast:Az,showSuccessToast:Oz,showErrorToast:Dz,showWarningToast:Fz,showInfoToast:Bz}=Hj.actions,PB=Hj.reducer,Id=Te("stocks/fetchIndianStockQuote",async(t,{rejectWithValue:e})=>{var n,s;try{const r=await _o.getQuote(t);return{symbol:t,data:r}}catch(r){return e(((s=(n=r.response)==null?void 0:n.data)==null?void 0:s.message)||"Failed to fetch stock quote")}}),Ad=Te("stocks/fetchIndianMarketMovers",async(t,{rejectWithValue:e})=>{var n,s;try{return await _o.getMarketMovers()}catch(r){return e(((s=(n=r.response)==null?void 0:n.data)==null?void 0:s.message)||"Failed to fetch market movers")}}),Od=Te("stocks/fetchNiftyData",async(t,{rejectWithValue:e})=>{var n,s;try{return await _o.getQuote("^NSEI")}catch(r){return e(((s=(n=r.response)==null?void 0:n.data)==null?void 0:s.message)||"Failed to fetch Nifty data")}}),Dd=Te("stocks/fetchSensexData",async(t,{rejectWithValue:e})=>{var n,s;try{return await _o.getQuote("^BSESN")}catch(r){return e(((s=(n=r.response)==null?void 0:n.data)==null?void 0:s.message)||"Failed to fetch Sensex data")}}),Fd=Te("stocks/fetchBatchStockQuotes",async(t,{rejectWithValue:e})=>{var n,s;try{return await _o.getBatchQuotes(t)}catch(r){return e(((s=(n=r.response)==null?void 0:n.data)==null?void 0:s.message)||"Failed to fetch batch quotes")}}),EB={nifty:{data:null,loading:!1,error:null,lastUpdated:null},sensex:{data:null,loading:!1,error:null,lastUpdated:null},quotes:{},topGainers:[],topLosers:[],mostActive:[],realTimeUpdates:!0,updateInterval:3e4,lastGlobalUpdate:null,isLoading:!1,error:null,priceChanges:{},marketStatus:{isOpen:!1,nextOpen:null,nextClose:null,timezone:"Asia/Kolkata"}},Yj=Zs({name:"stocks",initialState:EB,reducers:{updateStockPrice:(t,e)=>{const{symbol:n,price:s,change:r,changePercent:i,volume:o,timestamp:l}=e.payload;t.quotes[n]&&t.quotes[n].price!==s&&(t.priceChanges[n]={oldPrice:t.quotes[n].price,newPrice:s,direction:s>t.quotes[n].price?"up":"down",timestamp:Date.now()}),t.quotes[n]={...t.quotes[n],price:s,change:r,changePercent:i,volume:o,lastUpdated:l||Date.now()}},updateBatchPrices:(t,e)=>{const n=e.payload,s=Date.now();n.forEach(r=>{const{symbol:i,price:o,change:l,changePercent:c,volume:u}=r;t.quotes[i]&&t.quotes[i].price!==o&&(t.priceChanges[i]={oldPrice:t.quotes[i].price,newPrice:o,direction:o>t.quotes[i].price?"up":"down",timestamp:s}),t.quotes[i]={...t.quotes[i],price:o,change:l,changePercent:c,volume:u,lastUpdated:s}}),t.lastGlobalUpdate=s},clearPriceChanges:t=>{t.priceChanges={}},toggleRealTimeUpdates:t=>{t.realTimeUpdates=!t.realTimeUpdates},setUpdateInterval:(t,e)=>{t.updateInterval=e.payload},updateMarketStatus:(t,e)=>{t.marketStatus={...t.marketStatus,...e.payload}},clearError:t=>{t.error=null,t.nifty.error=null,t.sensex.error=null}},extraReducers:t=>{t.addCase(Id.pending,e=>{e.isLoading=!0,e.error=null}).addCase(Id.fulfilled,(e,n)=>{e.isLoading=!1;const{symbol:s,data:r}=n.payload;e.quotes[s]={...r,lastUpdated:Date.now()}}).addCase(Id.rejected,(e,n)=>{e.isLoading=!1,e.error=n.payload}),t.addCase(Ad.pending,e=>{e.isLoading=!0}).addCase(Ad.fulfilled,(e,n)=>{e.isLoading=!1;const{gainers:s,losers:r,mostActive:i}=n.payload;e.topGainers=s||[],e.topLosers=r||[],e.mostActive=i||[],e.lastGlobalUpdate=Date.now()}).addCase(Ad.rejected,(e,n)=>{e.isLoading=!1,e.error=n.payload}),t.addCase(Od.pending,e=>{e.nifty.loading=!0,e.nifty.error=null}).addCase(Od.fulfilled,(e,n)=>{e.nifty.loading=!1,e.nifty.data=n.payload,e.nifty.lastUpdated=Date.now()}).addCase(Od.rejected,(e,n)=>{e.nifty.loading=!1,e.nifty.error=n.payload}),t.addCase(Dd.pending,e=>{e.sensex.loading=!0,e.sensex.error=null}).addCase(Dd.fulfilled,(e,n)=>{e.sensex.loading=!1,e.sensex.data=n.payload,e.sensex.lastUpdated=Date.now()}).addCase(Dd.rejected,(e,n)=>{e.sensex.loading=!1,e.sensex.error=n.payload}),t.addCase(Fd.pending,e=>{e.isLoading=!0}).addCase(Fd.fulfilled,(e,n)=>{e.isLoading=!1,n.payload.forEach(r=>{e.quotes[r.symbol]={...r,lastUpdated:Date.now()}}),e.lastGlobalUpdate=Date.now()}).addCase(Fd.rejected,(e,n)=>{e.isLoading=!1,e.error=n.payload})}}),{updateStockPrice:zz,updateBatchPrices:$z,clearPriceChanges:Vz,toggleRealTimeUpdates:Uz,setUpdateInterval:Wz,updateMarketStatus:Hz,clearError:Yz}=Yj.actions,TB=Yj.reducer,LB={key:"tradebro",storage:Aj,whitelist:["auth","portfolio","trading","watchlist","orders"],blacklist:["ui","news","stocks"]},_B=vj({auth:sB,portfolio:iB,trading:uB,watchlist:gB,orders:SB,news:CB,ui:PB,stocks:TB}),RB=OF(LB,_B),qj=nF({reducer:RB,middleware:t=>t({serializableCheck:{ignoredActions:["persist/PERSIST","persist/REHYDRATE"]}}),devTools:!1}),MB=VF(qj),IB=b.createContext(),AB=({children:t})=>{const{isAuthenticated:e,getToken:n}=Cu(),[s,r]=b.useState({balance:1e4,transactions:[],lastLoginReward:null,totalInvested:0,totalGains:0,portfolioValue:0}),[i,o]=b.useState(!1),[l,c]=b.useState(null),u=y=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2,maximumFractionDigits:2}).format(y),h=async()=>{if(e){o(!0),c(null);try{const y=n(),w=await fetch("http://localhost:5001/api/virtual-money/account",{headers:{Authorization:`Bearer ${y}`,"Content-Type":"application/json"}});if(w.ok){const m=await w.json();r(m.data)}else throw new Error("Failed to fetch virtual money data")}catch(y){c(y.message),console.error("Error fetching virtual money:",y)}finally{o(!1)}}},d=async(y,w,m)=>{if(!e)return{success:!1,message:"Not authenticated"};o(!0),c(null);try{const g=n(),S=await fetch("http://localhost:5001/api/virtual-money/buy",{method:"POST",headers:{Authorization:`Bearer ${g}`,"Content-Type":"application/json"},body:JSON.stringify({stockSymbol:y,quantity:w,price:m})}),N=await S.json();if(S.ok)return r(N.data),{success:!0,message:N.message};throw new Error(N.message||"Failed to buy stock")}catch(g){return c(g.message),{success:!1,message:g.message}}finally{o(!1)}},f=async(y,w,m)=>{if(!e)return{success:!1,message:"Not authenticated"};o(!0),c(null);try{const g=n(),S=await fetch("http://localhost:5001/api/virtual-money/sell",{method:"POST",headers:{Authorization:`Bearer ${g}`,"Content-Type":"application/json"},body:JSON.stringify({stockSymbol:y,quantity:w,price:m})}),N=await S.json();if(S.ok)return r(N.data),{success:!0,message:N.message};throw new Error(N.message||"Failed to sell stock")}catch(g){return c(g.message),{success:!1,message:g.message}}finally{o(!1)}},x=async()=>{if(!e)return{success:!1,message:"Not authenticated"};o(!0),c(null);try{const y=n(),w=await fetch("http://localhost:5001/api/virtual-money/login-reward",{method:"POST",headers:{Authorization:`Bearer ${y}`,"Content-Type":"application/json"}}),m=await w.json();if(w.ok)return r(m.data),{success:!0,message:m.message,reward:m.reward};throw new Error(m.message||"Failed to claim reward")}catch(y){return c(y.message),{success:!1,message:y.message}}finally{o(!1)}};b.useEffect(()=>{e&&h()},[e]),b.useEffect(()=>{const y=w=>{console.log(" Balance update received in VirtualMoneyContext:",w.detail),h()};return window.addEventListener("balanceUpdated",y),()=>{window.removeEventListener("balanceUpdated",y)}},[h]);const p={virtualMoney:s,loading:i,error:l,formatCurrency:u,fetchVirtualMoney:h,buyStock:d,sellStock:f,claimLoginReward:x,balance:s.balance,formattedBalance:u(s.balance),transactions:s.transactions||[],canClaimReward:s.lastLoginReward?new Date-new Date(s.lastLoginReward)>24*60*60*1e3:!0};return a.jsx(IB.Provider,{value:p,children:t})},OB=b.createContext(),DB=({children:t})=>{const[e,n]=b.useState(()=>localStorage.getItem("tradebro-theme")||"light");b.useEffect(()=>{const l=document.documentElement;l.classList.remove("light-theme","dark-theme"),l.classList.add(`${e}-theme`),localStorage.setItem("tradebro-theme",e),l.setAttribute("data-theme",e)},[e]);const o={theme:e,toggleTheme:()=>{n(l=>l==="light"?"dark":"light")},setLightTheme:()=>n("light"),setDarkTheme:()=>n("dark"),isLight:e==="light",isDark:e==="dark"};return a.jsx(OB.Provider,{value:o,children:t})};iS(document.getElementById("root")).render(a.jsx(b.StrictMode,{children:a.jsx(TT,{store:qj,children:a.jsx(wS,{loading:a.jsx("div",{children:"Loading..."}),persistor:MB,children:a.jsx(aT,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:a.jsx(DB,{children:a.jsx(fA,{children:a.jsx(r4,{children:a.jsx(oN,{children:a.jsx(a4,{children:a.jsx(o4,{children:a.jsx(AB,{children:a.jsx(L4,{})})})})})})})})})})})}));export{Mt as A,$n as F,VB as a,ds as b,jt as c,p0 as d,a as j,$ as m,b as r};
//# sourceMappingURL=index-e9ovGBQN.js.map
