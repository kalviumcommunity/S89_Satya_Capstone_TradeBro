import{j as e,F as r,a as t,b as n,c as s,d as o}from"./index-17bf7517.js";import{r as i}from"./vendor-83d6deea.js";import{m as c,A as a}from"./ui-d10ec992.js";import"./router-3d30db0f.js";import"./utils-ba5d26a9.js";import"./charts-073267b1.js";const l=i.memo(({enabled:l=!1,position:d="bottom-right"})=>{const[p,x]=i.useState(!1),[m,u]=i.useState({fps:0,memory:0,renderTime:0,componentCount:0}),f=i.useRef(0),h=i.useRef(performance.now()),g=i.useRef(null);if(i.useEffect(()=>{if(!l)return;const e=()=>{f.current++;const r=performance.now();if(r>=h.current+1e3){const e=Math.round(1e3*f.current/(r-h.current));u(t=>({...t,fps:e,memory:performance.memory?Math.round(performance.memory.usedJSHeapSize/1048576):0,renderTime:r-h.current})),f.current=0,h.current=r}g.current=requestAnimationFrame(e)};return e(),()=>{g.current&&cancelAnimationFrame(g.current)}},[l]),i.useEffect(()=>{if(!l||!window.PerformanceObserver)return;const e=new PerformanceObserver(e=>{const r=e.getEntries().filter(e=>e.name.includes("render"));if(r.length>0){const e=r.reduce((e,r)=>e+r.duration,0)/r.length;u(r=>({...r,renderTime:Math.round(100*e)/100}))}});return e.observe({entryTypes:["measure"]}),()=>e.disconnect()},[l]),!l)return null;return e.jsxs(e.Fragment,{children:[e.jsx(c.button,{onClick:()=>x(!p),style:{position:"fixed",bottom:"20px",right:"20px",width:"48px",height:"48px",borderRadius:"50%",background:"rgba(0, 0, 0, 0.8)",border:"1px solid rgba(255, 255, 255, 0.2)",color:"white",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9998,backdropFilter:"blur(10px)"},whileHover:{scale:1.1},whileTap:{scale:.9},children:e.jsx(r,{size:20})}),e.jsx(a,{children:p&&e.jsxs(c.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},style:(()=>{const e={position:"fixed",zIndex:9999,padding:"12px",background:"rgba(0, 0, 0, 0.9)",color:"white",borderRadius:"8px",fontSize:"12px",fontFamily:"monospace",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.1)"};switch(d){case"top-left":return{...e,top:"20px",left:"20px"};case"top-right":return{...e,top:"20px",right:"20px"};case"bottom-left":return{...e,bottom:"20px",left:"20px"};default:return{...e,bottom:"20px",right:"20px"}}})(),children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"12px"},children:[e.jsx(t,{size:16,style:{marginRight:"8px"}}),e.jsx("span",{style:{fontWeight:"bold"},children:"Performance Monitor"}),e.jsx("button",{onClick:()=>x(!1),style:{background:"none",border:"none",color:"white",cursor:"pointer",marginLeft:"auto",padding:"4px"},children:e.jsx(n,{size:14})})]}),e.jsxs("div",{style:{display:"grid",gap:"8px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{children:"FPS:"}),e.jsx("span",{style:{color:(b=m.fps,b>=55?"#10B981":b>=30?"#F59E0B":"#EF4444"),fontWeight:"bold"},children:m.fps})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{children:"Memory:"}),e.jsxs("span",{style:{color:(y=m.memory,y<50?"#10B981":y<100?"#F59E0B":"#EF4444"),fontWeight:"bold"},children:[m.memory," MB"]})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("span",{children:"Render:"}),e.jsxs("span",{style:{color:m.renderTime>16?"#EF4444":"#10B981",fontWeight:"bold"},children:[m.renderTime.toFixed(2),"ms"]})]}),e.jsx("div",{style:{marginTop:"12px",padding:"8px",background:"rgba(255, 255, 255, 0.1)",borderRadius:"4px"},children:e.jsxs("div",{style:{fontSize:"11px",opacity:.8},children:[m.fps<30&&e.jsx("div",{style:{color:"#EF4444"},children:"⚠️ Low FPS detected"}),m.memory>100&&e.jsx("div",{style:{color:"#EF4444"},children:"⚠️ High memory usage"}),m.renderTime>16&&e.jsx("div",{style:{color:"#EF4444"},children:"⚠️ Slow renders"}),m.fps>=55&&m.memory<50&&m.renderTime<=16&&e.jsx("div",{style:{color:"#10B981"},children:"✅ Performance optimal"})]})}),e.jsxs("div",{style:{marginTop:"8px",display:"flex",gap:"8px"},children:[e.jsxs("button",{onClick:()=>{"caches"in window&&caches.keys().then(e=>{e.forEach(e=>caches.delete(e))}),window.gc&&window.gc()},style:{background:"rgba(59, 130, 246, 0.2)",border:"1px solid rgba(59, 130, 246, 0.3)",color:"#60A5FA",padding:"4px 8px",borderRadius:"4px",fontSize:"10px",cursor:"pointer"},children:[e.jsx(s,{size:10,style:{marginRight:"4px"}}),"Clear Cache"]}),e.jsxs("button",{onClick:()=>{},style:{background:"rgba(16, 185, 129, 0.2)",border:"1px solid rgba(16, 185, 129, 0.3)",color:"#34D399",padding:"4px 8px",borderRadius:"4px",fontSize:"10px",cursor:"pointer"},children:[e.jsx(o,{size:10,style:{marginRight:"4px"}}),"Log Metrics"]})]})]})]})})]});var y,b});l.displayName="PerformanceMonitor";export{l as default};
