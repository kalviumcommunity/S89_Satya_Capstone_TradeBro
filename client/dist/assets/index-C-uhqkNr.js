const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./PerformanceMonitor-BdI5HPfm.js","./vendor-SlK7pBj5.js","./ui-B9qRDak7.js","./router-CAcH92NB.js"])))=>i.map(i=>d[i]);
var e,t=Object.defineProperty,n=(e,n,s)=>((e,n,s)=>n in e?t(e,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[n]=s)(e,"symbol"!=typeof n?n+"":n,s);import{r as s,b as i,a as r,g as a,c as o}from"./vendor-SlK7pBj5.js";import{u as l,a as c,L as u,b as h,R as d,c as m,N as p,B as f}from"./router-CAcH92NB.js";import{G as g,A as y,m as v,u as x,a as b}from"./ui-B9qRDak7.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var w={exports:{}},j={},k=s,N=Symbol.for("react.element"),S=Symbol.for("react.fragment"),C=Object.prototype.hasOwnProperty,P=k.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,E={key:!0,ref:!0,__self:!0,__source:!0};function T(e,t,n){var s,i={},r=null,a=null;for(s in void 0!==n&&(r=""+n),void 0!==t.key&&(r=""+t.key),void 0!==t.ref&&(a=t.ref),t)C.call(t,s)&&!E.hasOwnProperty(s)&&(i[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps)void 0===i[s]&&(i[s]=t[s]);return{$$typeof:N,type:e,key:r,ref:a,props:i,_owner:P.current}}j.Fragment=S,j.jsx=T,j.jsxs=T,w.exports=j;var L,M=w.exports,I=i;L=I.createRoot,I.hydrateRoot;var _={exports:{}},D={},A=s;var O="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},R=A.useSyncExternalStore,F=A.useRef,B=A.useEffect,z=A.useMemo,W=A.useDebugValue;D.useSyncExternalStoreWithSelector=function(e,t,n,s,i){var r=F(null);if(null===r.current){var a={hasValue:!1,value:null};r.current=a}else a=r.current;r=z(function(){function e(e){if(!l){if(l=!0,r=e,e=s(e),void 0!==i&&a.hasValue){var t=a.value;if(i(t,e))return o=t}return o=e}if(t=o,O(r,e))return t;var n=s(e);return void 0!==i&&i(t,n)?(r=e,t):(r=e,o=n)}var r,o,l=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]},[t,n,s,i]);var o=R(e,r[0],r[1]);return B(function(){a.hasValue=!0,a.value=o},[o]),W(o),o},_.exports=D;var U=_.exports;var V={notify(){},get:()=>[]};var $=(()=>!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement))(),H=(()=>"undefined"!=typeof navigator&&"ReactNative"===navigator.product)(),q=(()=>$||H?s.useLayoutEffect:s.useEffect)(),Y=Symbol.for("react-redux-context"),G="undefined"!=typeof globalThis?globalThis:{};function Q(){if(!s.createContext)return{};const e=G[Y]??(G[Y]=new Map);let t=e.get(s.createContext);return t||(t=s.createContext(null),e.set(s.createContext,t)),t}var J=Q();var X=function(e){const{children:t,context:n,serverState:i,store:r}=e,a=s.useMemo(()=>{const e=function(e){let t,n=V,s=0,i=!1;function r(){l.onStateChange&&l.onStateChange()}function a(){s++,t||(t=e.subscribe(r),n=function(){let e=null,t=null;return{clear(){e=null,t=null},notify(){(()=>{let t=e;for(;t;)t.callback(),t=t.next})()},get(){const t=[];let n=e;for(;n;)t.push(n),n=n.next;return t},subscribe(n){let s=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){s&&null!==e&&(s=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}())}function o(){s--,t&&0===s&&(t(),t=void 0,n.clear(),n=V)}const l={addNestedSub:function(e){a();const t=n.subscribe(e);let s=!1;return()=>{s||(s=!0,t(),o())}},notifyNestedSubs:function(){n.notify()},handleChangeWrapper:r,isSubscribed:function(){return i},trySubscribe:function(){i||(i=!0,a())},tryUnsubscribe:function(){i&&(i=!1,o())},getListeners:()=>n};return l}(r);return{store:r,subscription:e,getServerState:i?()=>i:void 0}},[r,i]),o=s.useMemo(()=>r.getState(),[r]);q(()=>{const{subscription:e}=a;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),o!==r.getState()&&e.notifyNestedSubs(),()=>{e.tryUnsubscribe(),e.onStateChange=void 0}},[a,o]);const l=n||J;return s.createElement(l.Provider,{value:a},t)};function K(e=J){return function(){return s.useContext(e)}}var Z=K(),ee=(e,t)=>e===t;function te(e=J){const t=e===J?Z:K(e),n=(e,n={})=>{const{equalityFn:i=ee}="function"==typeof n?{equalityFn:n}:n,r=t(),{store:a,subscription:o,getServerState:l}=r;s.useRef(!0);const c=s.useCallback({[e.name]:t=>e(t)}[e.name],[e]),u=U.useSyncExternalStoreWithSelector(o.addNestedSub,a.getState,l||a.getState,c,i);return s.useDebugValue(u),u};return Object.assign(n,{withTypes:()=>n}),n}var ne=te();function se(e){return(se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ie(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}(e.prototype,t),e}function re(e){return(re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ae(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oe(e,t){return(oe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function le(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ce=function(){function e(){var t,n,s,i;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return s=this,i=(t=re(e)).call.apply(t,[this].concat(a)),n=!i||"object"!==se(i)&&"function"!=typeof i?ae(s):i,le(ae(n),"state",{bootstrapped:!1}),le(ae(n),"_unsubscribe",void 0),le(ae(n),"handlePersistorState",function(){n.props.persistor.getState().bootstrapped&&(n.props.onBeforeLift?Promise.resolve(n.props.onBeforeLift()).finally(function(){return n.setState({bootstrapped:!0})}):n.setState({bootstrapped:!0}),n._unsubscribe&&n._unsubscribe())}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oe(e,t)}(e,s.PureComponent),ie(e,[{key:"componentDidMount",value:function(){this._unsubscribe=this.props.persistor.subscribe(this.handlePersistorState),this.handlePersistorState()}},{key:"componentWillUnmount",value:function(){this._unsubscribe&&this._unsubscribe()}},{key:"render",value:function(){return"function"==typeof this.props.children?this.props.children(this.state.bootstrapped):this.state.bootstrapped?this.props.children:this.props.loading}}]),e}();le(ce,"defaultProps",{children:null,loading:null});const ue={},he=function(e,t,n){let s=Promise.resolve();if(t&&t.length>0){const e=document.getElementsByTagName("link"),i=document.querySelector("meta[property=csp-nonce]"),r=(null==i?void 0:i.nonce)||(null==i?void 0:i.getAttribute("nonce"));s=Promise.allSettled(t.map(t=>{if(t=function(e,t){return new URL(e,t).href}(t,n),t in ue)return;ue[t]=!0;const s=t.endsWith(".css"),i=s?'[rel="stylesheet"]':"";if(!!n)for(let n=e.length-1;n>=0;n--){const i=e[n];if(i.href===t&&(!s||"stylesheet"===i.rel))return}else if(document.querySelector(`link[href="${t}"]${i}`))return;const a=document.createElement("link");return a.rel=s?"stylesheet":"modulepreload",s||(a.as="script"),a.crossOrigin="",a.href=t,r&&a.setAttribute("nonce",r),document.head.appendChild(a),s?new Promise((e,n)=>{a.addEventListener("load",e),a.addEventListener("error",()=>n(new Error(`Unable to preload CSS for ${t}`)))}):void 0}))}function i(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return s.then(t=>{for(const e of t||[])"rejected"===e.status&&i(e.reason);return e().catch(i)})};function de(e){var t,n,s="";if("string"==typeof e||"number"==typeof e)s+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=de(e[t]))&&(s&&(s+=" "),s+=n);else for(t in e)e[t]&&(s&&(s+=" "),s+=t);return s}function me(){for(var e,t,n=0,s="";n<arguments.length;)(e=arguments[n++])&&(t=de(e))&&(s&&(s+=" "),s+=t);return s}const pe=e=>"number"==typeof e&&!isNaN(e),fe=e=>"string"==typeof e,ge=e=>"function"==typeof e,ye=e=>fe(e)||ge(e)?e:null,ve=e=>s.isValidElement(e)||fe(e)||ge(e)||pe(e);function xe(e){let{enter:t,exit:n,appendPosition:i=!1,collapse:a=!0,collapseDuration:o=300}=e;return function(e){let{children:l,position:c,preventExitTransition:u,done:h,nodeRef:d,isIn:m}=e;const p=i?`${t}--${c}`:t,f=i?`${n}--${c}`:n,g=s.useRef(0);return s.useLayoutEffect(()=>{const e=d.current,t=p.split(" "),n=s=>{s.target===d.current&&(e.dispatchEvent(new Event("d")),e.removeEventListener("animationend",n),e.removeEventListener("animationcancel",n),0===g.current&&"animationcancel"!==s.type&&e.classList.remove(...t))};e.classList.add(...t),e.addEventListener("animationend",n),e.addEventListener("animationcancel",n)},[]),s.useEffect(()=>{const e=d.current,t=()=>{e.removeEventListener("animationend",t),a?function(e,t,n){void 0===n&&(n=300);const{scrollHeight:s,style:i}=e;requestAnimationFrame(()=>{i.minHeight="initial",i.height=s+"px",i.transition=`all ${n}ms`,requestAnimationFrame(()=>{i.height="0",i.padding="0",i.margin="0",setTimeout(t,n)})})}(e,h,o):h()};m||(u?t():(g.current=1,e.className+=` ${f}`,e.addEventListener("animationend",t)))},[m]),r.createElement(r.Fragment,null,l)}}function be(e,t){return null!=e?{content:e.content,containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,status:t}:{}}const we={list:new Map,emitQueue:new Map,on(e,t){return this.list.has(e)||this.list.set(e,[]),this.list.get(e).push(t),this},off(e,t){if(t){const n=this.list.get(e).filter(e=>e!==t);return this.list.set(e,n),this}return this.list.delete(e),this},cancelEmit(e){const t=this.emitQueue.get(e);return t&&(t.forEach(clearTimeout),this.emitQueue.delete(e)),this},emit(e){this.list.has(e)&&this.list.get(e).forEach(t=>{const n=setTimeout(()=>{t(...[].slice.call(arguments,1))},0);this.emitQueue.has(e)||this.emitQueue.set(e,[]),this.emitQueue.get(e).push(n)})}},je=e=>{let{theme:t,type:n,...s}=e;return r.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:"colored"===t?"currentColor":`var(--toastify-icon-color-${n})`,...s})},ke={info:function(e){return r.createElement(je,{...e},r.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(e){return r.createElement(je,{...e},r.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(e){return r.createElement(je,{...e},r.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(e){return r.createElement(je,{...e},r.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return r.createElement("div",{className:"Toastify__spinner"})}};function Ne(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientX:e.clientX}function Se(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientY:e.clientY}function Ce(e){let{closeToast:t,theme:n,ariaLabel:s="close"}=e;return r.createElement("button",{className:`Toastify__close-button Toastify__close-button--${n}`,type:"button",onClick:e=>{e.stopPropagation(),t(e)},"aria-label":s},r.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},r.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function Pe(e){let{delay:t,isRunning:n,closeToast:s,type:i="default",hide:a,className:o,style:l,controlledProgress:c,progress:u,rtl:h,isIn:d,theme:m}=e;const p=a||c&&0===u,f={...l,animationDuration:`${t}ms`,animationPlayState:n?"running":"paused",opacity:p?0:1};c&&(f.transform=`scaleX(${u})`);const g=me("Toastify__progress-bar",c?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${m}`,`Toastify__progress-bar--${i}`,{"Toastify__progress-bar--rtl":h}),y=ge(o)?o({rtl:h,type:i,defaultClassName:g}):me(g,o);return r.createElement("div",{role:"progressbar","aria-hidden":p?"true":"false","aria-label":"notification timer",className:y,style:f,[c&&u>=1?"onTransitionEnd":"onAnimationEnd"]:c&&u<1?null:()=>{d&&s()}})}const Ee=e=>{const{isRunning:t,preventExitTransition:n,toastRef:i,eventHandlers:a}=function(e){const[t,n]=s.useState(!1),[i,r]=s.useState(!1),a=s.useRef(null),o=s.useRef({start:0,x:0,y:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,boundingRect:null,didMove:!1}).current,l=s.useRef(e),{autoClose:c,pauseOnHover:u,closeToast:h,onClick:d,closeOnClick:m}=e;function p(t){if(e.draggable){"touchstart"===t.nativeEvent.type&&t.nativeEvent.preventDefault(),o.didMove=!1,document.addEventListener("mousemove",v),document.addEventListener("mouseup",x),document.addEventListener("touchmove",v),document.addEventListener("touchend",x);const n=a.current;o.canCloseOnClick=!0,o.canDrag=!0,o.boundingRect=n.getBoundingClientRect(),n.style.transition="",o.x=Ne(t.nativeEvent),o.y=Se(t.nativeEvent),"x"===e.draggableDirection?(o.start=o.x,o.removalDistance=n.offsetWidth*(e.draggablePercent/100)):(o.start=o.y,o.removalDistance=n.offsetHeight*(80===e.draggablePercent?1.5*e.draggablePercent:e.draggablePercent/100))}}function f(t){if(o.boundingRect){const{top:n,bottom:s,left:i,right:r}=o.boundingRect;"touchend"!==t.nativeEvent.type&&e.pauseOnHover&&o.x>=i&&o.x<=r&&o.y>=n&&o.y<=s?y():g()}}function g(){n(!0)}function y(){n(!1)}function v(n){const s=a.current;o.canDrag&&s&&(o.didMove=!0,t&&y(),o.x=Ne(n),o.y=Se(n),o.delta="x"===e.draggableDirection?o.x-o.start:o.y-o.start,o.start!==o.x&&(o.canCloseOnClick=!1),s.style.transform=`translate${e.draggableDirection}(${o.delta}px)`,s.style.opacity=""+(1-Math.abs(o.delta/o.removalDistance)))}function x(){document.removeEventListener("mousemove",v),document.removeEventListener("mouseup",x),document.removeEventListener("touchmove",v),document.removeEventListener("touchend",x);const t=a.current;if(o.canDrag&&o.didMove&&t){if(o.canDrag=!1,Math.abs(o.delta)>o.removalDistance)return r(!0),void e.closeToast();t.style.transition="transform 0.2s, opacity 0.2s",t.style.transform=`translate${e.draggableDirection}(0)`,t.style.opacity="1"}}s.useEffect(()=>{l.current=e}),s.useEffect(()=>(a.current&&a.current.addEventListener("d",g,{once:!0}),ge(e.onOpen)&&e.onOpen(s.isValidElement(e.children)&&e.children.props),()=>{const e=l.current;ge(e.onClose)&&e.onClose(s.isValidElement(e.children)&&e.children.props)}),[]),s.useEffect(()=>(e.pauseOnFocusLoss&&(document.hasFocus()||y(),window.addEventListener("focus",g),window.addEventListener("blur",y)),()=>{e.pauseOnFocusLoss&&(window.removeEventListener("focus",g),window.removeEventListener("blur",y))}),[e.pauseOnFocusLoss]);const b={onMouseDown:p,onTouchStart:p,onMouseUp:f,onTouchEnd:f};return c&&u&&(b.onMouseEnter=y,b.onMouseLeave=g),m&&(b.onClick=e=>{d&&d(e),o.canCloseOnClick&&h()}),{playToast:g,pauseToast:y,isRunning:t,preventExitTransition:i,toastRef:a,eventHandlers:b}}(e),{closeButton:o,children:l,autoClose:c,onClick:u,type:h,hideProgressBar:d,closeToast:m,transition:p,position:f,className:g,style:y,bodyClassName:v,bodyStyle:x,progressClassName:b,progressStyle:w,updateId:j,role:k,progress:N,rtl:S,toastId:C,deleteToast:P,isIn:E,isLoading:T,iconOut:L,closeOnClick:M,theme:I}=e,_=me("Toastify__toast",`Toastify__toast-theme--${I}`,`Toastify__toast--${h}`,{"Toastify__toast--rtl":S},{"Toastify__toast--close-on-click":M}),D=ge(g)?g({rtl:S,position:f,type:h,defaultClassName:_}):me(_,g),A=!!N||!c,O={closeToast:m,type:h,theme:I};let R=null;return!1===o||(R=ge(o)?o(O):s.isValidElement(o)?s.cloneElement(o,O):Ce(O)),r.createElement(p,{isIn:E,done:P,position:f,preventExitTransition:n,nodeRef:i},r.createElement("div",{id:C,onClick:u,className:D,...a,style:y,ref:i},r.createElement("div",{...E&&{role:k},className:ge(v)?v({type:h}):me("Toastify__toast-body",v),style:x},null!=L&&r.createElement("div",{className:me("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!T})},L),r.createElement("div",null,l)),R,r.createElement(Pe,{...j&&!A?{key:`pb-${j}`}:{},rtl:S,theme:I,delay:c,isRunning:t,isIn:E,closeToast:m,hide:d,type:h,style:w,className:b,controlledProgress:A,progress:N||0})))},Te=function(e,t){return void 0===t&&(t=!1),{enter:`Toastify--animate Toastify__${e}-enter`,exit:`Toastify--animate Toastify__${e}-exit`,appendPosition:t}},Le=xe(Te("bounce",!0));xe(Te("slide",!0)),xe(Te("zoom")),xe(Te("flip"));const Me=s.forwardRef((e,t)=>{const{getToastToRender:n,containerRef:i,isToastActive:a}=function(e){const[,t]=s.useReducer(e=>e+1,0),[n,i]=s.useState([]),r=s.useRef(null),a=s.useRef(new Map).current,o=e=>-1!==n.indexOf(e),l=s.useRef({toastKey:1,displayedToast:0,count:0,queue:[],props:e,containerId:null,isToastActive:o,getToast:e=>a.get(e)}).current;function c(e){let{containerId:t}=e;const{limit:n}=l.props;!n||t&&l.containerId!==t||(l.count-=l.queue.length,l.queue=[])}function u(e){i(t=>null==e?[]:t.filter(t=>t!==e))}function h(){const{toastContent:e,toastProps:t,staleId:n}=l.queue.shift();m(e,t,n)}function d(e,n){let{delay:i,staleId:o,...c}=n;if(!ve(e)||(d=c,!r.current||l.props.enableMultiContainer&&d.containerId!==l.props.containerId||a.has(d.toastId)&&null==d.updateId))return;var d;const{toastId:p,updateId:f,data:g}=c,{props:y}=l,v=()=>u(p),x=null==f;x&&l.count++;const b={...y,style:y.toastStyle,key:l.toastKey++,...Object.fromEntries(Object.entries(c).filter(e=>{let[t,n]=e;return null!=n})),toastId:p,updateId:f,data:g,closeToast:v,isIn:!1,className:ye(c.className||y.toastClassName),bodyClassName:ye(c.bodyClassName||y.bodyClassName),progressClassName:ye(c.progressClassName||y.progressClassName),autoClose:!c.isLoading&&(w=c.autoClose,j=y.autoClose,!1===w||pe(w)&&w>0?w:j),deleteToast(){const e=be(a.get(p),"removed");a.delete(p),we.emit(4,e);const n=l.queue.length;if(l.count=null==p?l.count-l.displayedToast:l.count-1,l.count<0&&(l.count=0),n>0){const e=null==p?l.props.limit:1;if(1===n||1===e)l.displayedToast++,h();else{const t=e>n?n:e;l.displayedToast=t;for(let e=0;e<t;e++)h()}}else t()}};var w,j;b.iconOut=function(e){let{theme:t,type:n,isLoading:i,icon:r}=e,a=null;const o={theme:t,type:n};return!1===r||(ge(r)?a=r(o):s.isValidElement(r)?a=s.cloneElement(r,o):fe(r)||pe(r)?a=r:i?a=ke.spinner():n in ke&&(a=ke[n](o))),a}(b),ge(c.onOpen)&&(b.onOpen=c.onOpen),ge(c.onClose)&&(b.onClose=c.onClose),b.closeButton=y.closeButton,!1===c.closeButton||ve(c.closeButton)?b.closeButton=c.closeButton:!0===c.closeButton&&(b.closeButton=!ve(y.closeButton)||y.closeButton);let k=e;s.isValidElement(e)&&!fe(e.type)?k=s.cloneElement(e,{closeToast:v,toastProps:b,data:g}):ge(e)&&(k=e({closeToast:v,toastProps:b,data:g})),y.limit&&y.limit>0&&l.count>y.limit&&x?l.queue.push({toastContent:k,toastProps:b,staleId:o}):pe(i)?setTimeout(()=>{m(k,b,o)},i):m(k,b,o)}function m(e,t,n){const{toastId:s}=t;n&&a.delete(n);const r={content:e,props:t};a.set(s,r),i(e=>[...e,s].filter(e=>e!==n)),we.emit(4,be(r,null==r.props.updateId?"added":"updated"))}return s.useEffect(()=>(l.containerId=e.containerId,we.cancelEmit(3).on(0,d).on(1,e=>r.current&&u(e)).on(5,c).emit(2,l),()=>{a.clear(),we.emit(3,l)}),[]),s.useEffect(()=>{l.props=e,l.isToastActive=o,l.displayedToast=n.length}),{getToastToRender:function(t){const n=new Map,s=Array.from(a.values());return e.newestOnTop&&s.reverse(),s.forEach(e=>{const{position:t}=e.props;n.has(t)||n.set(t,[]),n.get(t).push(e)}),Array.from(n,e=>t(e[0],e[1]))},containerRef:r,isToastActive:o}}(e),{className:o,style:l,rtl:c,containerId:u}=e;function h(e){const t=me("Toastify__toast-container",`Toastify__toast-container--${e}`,{"Toastify__toast-container--rtl":c});return ge(o)?o({position:e,rtl:c,defaultClassName:t}):me(t,ye(o))}return s.useEffect(()=>{t&&(t.current=i.current)},[]),r.createElement("div",{ref:i,className:"Toastify",id:u},n((e,t)=>{const n=t.length?{...l}:{...l,pointerEvents:"none"};return r.createElement("div",{className:h(e),style:n,key:`container-${e}`},t.map((e,n)=>{let{content:s,props:i}=e;return r.createElement(Ee,{...i,isIn:a(i.toastId),style:{...i.style,"--nth":n+1,"--len":t.length},key:`toast-${i.key}`},s)}))}))});Me.displayName="ToastContainer",Me.defaultProps={position:"top-right",transition:Le,autoClose:5e3,closeButton:Ce,pauseOnHover:!0,pauseOnFocusLoss:!0,closeOnClick:!0,draggable:!0,draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};let Ie,_e=new Map,De=[],Ae=1;function Oe(){return""+Ae++}function Re(e){return e&&(fe(e.toastId)||pe(e.toastId))?e.toastId:Oe()}function Fe(e,t){return _e.size>0?we.emit(0,e,t):De.push({content:e,options:t}),t.toastId}function Be(e,t){return{...t,type:t&&t.type||e,toastId:Re(t)}}function ze(e){return(t,n)=>Fe(t,Be(e,n))}function We(e,t){return Fe(e,Be("default",t))}function Ue(e){return g({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"22 12 18 12 15 21 9 3 6 12 2 12"}}]})(e)}function Ve(e){return g({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"}},{tag:"line",attr:{x1:"12",y1:"8",x2:"12",y2:"12"}},{tag:"line",attr:{x1:"12",y1:"16",x2:"12.01",y2:"16"}}]})(e)}function $e(e){return g({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}},{tag:"line",attr:{x1:"12",y1:"9",x2:"12",y2:"13"}},{tag:"line",attr:{x1:"12",y1:"17",x2:"12.01",y2:"17"}}]})(e)}function He(e){return g({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"7",y1:"7",x2:"17",y2:"17"}},{tag:"polyline",attr:{points:"17 7 17 17 7 17"}}]})(e)}function qe(e){return g({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"}},{tag:"polyline",attr:{points:"19 12 12 19 5 12"}}]})(e)}function Ye(e){return g({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"12",x2:"5",y2:"12"}},{tag:"polyline",attr:{points:"12 19 5 12 12 5"}}]})(e)}function Ge(e){return g({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"}},{tag:"polyline",attr:{points:"12 5 19 12 12 19"}}]})(e)}function Qe(e){return g({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"7",y1:"17",x2:"17",y2:"7"}},{tag:"polyline",attr:{points:"7 7 17 7 17 17"}}]})(e)}function Je(e){return g({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"19",x2:"12",y2:"5"}},{tag:"polyline",attr:{points:"5 12 12 5 19 12"}}]})(e)}function Xe(e){return g({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"8",r:"7"}},{tag:"polyline",attr:{points:"8.21 13.89 7 23 12 20 17 23 15.79 13.88"}}]})(e)}function Ke(e){return g({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"20",x2:"18",y2:"10"}},{tag:"line",attr:{x1:"12",y1:"20",x2:"12",y2:"4"}},{tag:"line",attr:{x1:"6",y1:"20",x2:"6",y2:"14"}}]})(e)}function Ze(e){return g({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"}},{tag:"path",attr:{d:"M13.73 21a2 2 0 0 1-3.46 0"}}]})(e)}function et(e){return g({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"}}]})(e)}function tt(e){return g({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"}},{tag:"path",attr:{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"}}]})(e)}function nt(e){return g({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}},{tag:"line",attr:{x1:"16",y1:"2",x2:"16",y2:"6"}},{tag:"line",attr:{x1:"8",y1:"2",x2:"8",y2:"6"}},{tag:"line",attr:{x1:"3",y1:"10",x2:"21",y2:"10"}}]})(e)}function st(e){return g({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}},{tag:"circle",attr:{cx:"12",cy:"13",r:"4"}}]})(e)}function it(e){return g({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}},{tag:"polyline",attr:{points:"22 4 12 14.01 9 11.01"}}]})(e)}function rt(e){return g({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"20 6 9 17 4 12"}}]})(e)}function at(e){return g({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"}},{tag:"polyline",attr:{points:"12 6 12 12 16 14"}}]})(e)}function ot(e){return g({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3H6a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3V6a3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3h12a3 3 0 0 0 3-3 3 3 0 0 0-3-3z"}}]})(e)}function lt(e){return g({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"9 10 4 15 9 20"}},{tag:"path",attr:{d:"M20 4v7a4 4 0 0 1-4 4H4"}}]})(e)}function ct(e){return g({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"4",y:"4",width:"16",height:"16",rx:"2",ry:"2"}},{tag:"rect",attr:{x:"9",y:"9",width:"6",height:"6"}},{tag:"line",attr:{x1:"9",y1:"1",x2:"9",y2:"4"}},{tag:"line",attr:{x1:"15",y1:"1",x2:"15",y2:"4"}},{tag:"line",attr:{x1:"9",y1:"20",x2:"9",y2:"23"}},{tag:"line",attr:{x1:"15",y1:"20",x2:"15",y2:"23"}},{tag:"line",attr:{x1:"20",y1:"9",x2:"23",y2:"9"}},{tag:"line",attr:{x1:"20",y1:"14",x2:"23",y2:"14"}},{tag:"line",attr:{x1:"1",y1:"9",x2:"4",y2:"9"}},{tag:"line",attr:{x1:"1",y1:"14",x2:"4",y2:"14"}}]})(e)}function ut(e){return g({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"ellipse",attr:{cx:"12",cy:"5",rx:"9",ry:"3"}},{tag:"path",attr:{d:"M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"}},{tag:"path",attr:{d:"M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"}}]})(e)}function ht(e){return g({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"23"}},{tag:"path",attr:{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"}}]})(e)}function dt(e){return g({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}},{tag:"polyline",attr:{points:"7 10 12 15 17 10"}},{tag:"line",attr:{x1:"12",y1:"15",x2:"12",y2:"3"}}]})(e)}function mt(e){return g({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 20h9"}},{tag:"path",attr:{d:"M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"}}]})(e)}function pt(e){return g({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}},{tag:"path",attr:{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"}}]})(e)}function ft(e){return g({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}},{tag:"polyline",attr:{points:"15 3 21 3 21 9"}},{tag:"line",attr:{x1:"10",y1:"14",x2:"21",y2:"3"}}]})(e)}function gt(e){return g({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}},{tag:"circle",attr:{cx:"12",cy:"12",r:"3"}}]})(e)}function yt(e){return g({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}},{tag:"polyline",attr:{points:"14 2 14 8 20 8"}},{tag:"line",attr:{x1:"16",y1:"13",x2:"8",y2:"13"}},{tag:"line",attr:{x1:"16",y1:"17",x2:"8",y2:"17"}},{tag:"polyline",attr:{points:"10 9 9 9 8 9"}}]})(e)}function vt(e){return g({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"}}]})(e)}function xt(e){return g({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"20 12 20 22 4 22 4 12"}},{tag:"rect",attr:{x:"2",y:"7",width:"20",height:"5"}},{tag:"line",attr:{x1:"12",y1:"22",x2:"12",y2:"7"}},{tag:"path",attr:{d:"M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z"}},{tag:"path",attr:{d:"M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z"}}]})(e)}function bt(e){return g({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"}},{tag:"line",attr:{x1:"2",y1:"12",x2:"22",y2:"12"}},{tag:"path",attr:{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"}}]})(e)}function wt(e){return g({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"7",height:"7"}},{tag:"rect",attr:{x:"14",y:"3",width:"7",height:"7"}},{tag:"rect",attr:{x:"14",y:"14",width:"7",height:"7"}},{tag:"rect",attr:{x:"3",y:"14",width:"7",height:"7"}}]})(e)}function jt(e){return g({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}},{tag:"polyline",attr:{points:"9 22 9 12 15 12 15 22"}}]})(e)}function kt(e){return g({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"}},{tag:"line",attr:{x1:"12",y1:"16",x2:"12",y2:"12"}},{tag:"line",attr:{x1:"12",y1:"8",x2:"12.01",y2:"8"}}]})(e)}function Nt(e){return g({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"}}]})(e)}function St(e){return g({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"12 2 2 7 12 12 22 7 12 2"}},{tag:"polyline",attr:{points:"2 17 12 22 22 17"}},{tag:"polyline",attr:{points:"2 12 12 17 22 12"}}]})(e)}function Ct(e){return g({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"8",y1:"6",x2:"21",y2:"6"}},{tag:"line",attr:{x1:"8",y1:"12",x2:"21",y2:"12"}},{tag:"line",attr:{x1:"8",y1:"18",x2:"21",y2:"18"}},{tag:"line",attr:{x1:"3",y1:"6",x2:"3.01",y2:"6"}},{tag:"line",attr:{x1:"3",y1:"12",x2:"3.01",y2:"12"}},{tag:"line",attr:{x1:"3",y1:"18",x2:"3.01",y2:"18"}}]})(e)}function Pt(e){return g({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"2",x2:"12",y2:"6"}},{tag:"line",attr:{x1:"12",y1:"18",x2:"12",y2:"22"}},{tag:"line",attr:{x1:"4.93",y1:"4.93",x2:"7.76",y2:"7.76"}},{tag:"line",attr:{x1:"16.24",y1:"16.24",x2:"19.07",y2:"19.07"}},{tag:"line",attr:{x1:"2",y1:"12",x2:"6",y2:"12"}},{tag:"line",attr:{x1:"18",y1:"12",x2:"22",y2:"12"}},{tag:"line",attr:{x1:"4.93",y1:"19.07",x2:"7.76",y2:"16.24"}},{tag:"line",attr:{x1:"16.24",y1:"7.76",x2:"19.07",y2:"4.93"}}]})(e)}function Et(e){return g({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}},{tag:"path",attr:{d:"M7 11V7a5 5 0 0 1 10 0v4"}}]})(e)}function Tt(e){return g({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"}},{tag:"polyline",attr:{points:"10 17 15 12 10 7"}},{tag:"line",attr:{x1:"15",y1:"12",x2:"3",y2:"12"}}]})(e)}function Lt(e){return g({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}},{tag:"polyline",attr:{points:"16 17 21 12 16 7"}},{tag:"line",attr:{x1:"21",y1:"12",x2:"9",y2:"12"}}]})(e)}function Mt(e){return g({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}},{tag:"polyline",attr:{points:"22,6 12,13 2,6"}}]})(e)}function It(e){return g({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}},{tag:"circle",attr:{cx:"12",cy:"10",r:"3"}}]})(e)}function _t(e){return g({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"3",y1:"12",x2:"21",y2:"12"}},{tag:"line",attr:{x1:"3",y1:"6",x2:"21",y2:"6"}},{tag:"line",attr:{x1:"3",y1:"18",x2:"21",y2:"18"}}]})(e)}function Dt(e){return g({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"}}]})(e)}function At(e){return g({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"1",y1:"1",x2:"23",y2:"23"}},{tag:"path",attr:{d:"M9 9v3a3 3 0 0 0 5.12 2.12M15 9.34V4a3 3 0 0 0-5.94-.6"}},{tag:"path",attr:{d:"M17 16.95A7 7 0 0 1 5 12v-2m14 0v2a7 7 0 0 1-.11 1.23"}},{tag:"line",attr:{x1:"12",y1:"19",x2:"12",y2:"23"}},{tag:"line",attr:{x1:"8",y1:"23",x2:"16",y2:"23"}}]})(e)}function Ot(e){return g({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"}},{tag:"path",attr:{d:"M19 10v2a7 7 0 0 1-14 0v-2"}},{tag:"line",attr:{x1:"12",y1:"19",x2:"12",y2:"23"}},{tag:"line",attr:{x1:"8",y1:"23",x2:"16",y2:"23"}}]})(e)}function Rt(e){return g({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"}}]})(e)}function Ft(e){return g({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"2",y:"3",width:"20",height:"14",rx:"2",ry:"2"}},{tag:"line",attr:{x1:"8",y1:"21",x2:"16",y2:"21"}},{tag:"line",attr:{x1:"12",y1:"17",x2:"12",y2:"21"}}]})(e)}function Bt(e){return g({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"}}]})(e)}function zt(e){return g({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"1"}},{tag:"circle",attr:{cx:"19",cy:"12",r:"1"}},{tag:"circle",attr:{cx:"5",cy:"12",r:"1"}}]})(e)}function Wt(e){return g({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"6",y:"4",width:"4",height:"16"}},{tag:"rect",attr:{x:"14",y:"4",width:"4",height:"16"}}]})(e)}function Ut(e){return g({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"5",x2:"5",y2:"19"}},{tag:"circle",attr:{cx:"6.5",cy:"6.5",r:"2.5"}},{tag:"circle",attr:{cx:"17.5",cy:"17.5",r:"2.5"}}]})(e)}function Vt(e){return g({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"}}]})(e)}function $t(e){return g({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21.21 15.89A10 10 0 1 1 8 2.83"}},{tag:"path",attr:{d:"M22 12A10 10 0 0 0 12 2v10z"}}]})(e)}function Ht(e){return g({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"5 3 19 12 5 21 5 3"}}]})(e)}function qt(e){return g({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"}},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"}}]})(e)}function Yt(e){return g({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 4 23 10 17 10"}},{tag:"polyline",attr:{points:"1 20 1 14 7 14"}},{tag:"path",attr:{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"}}]})(e)}function Gt(e){return g({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}},{tag:"polyline",attr:{points:"17 21 17 13 7 13 7 21"}},{tag:"polyline",attr:{points:"7 3 7 8 15 8"}}]})(e)}function Qt(e){return g({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"}},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"}}]})(e)}function Jt(e){return g({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"22",y1:"2",x2:"11",y2:"13"}},{tag:"polygon",attr:{points:"22 2 15 22 11 13 2 9 22 2"}}]})(e)}function Xt(e){return g({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"3"}},{tag:"path",attr:{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"}}]})(e)}function Kt(e){return g({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"18",cy:"5",r:"3"}},{tag:"circle",attr:{cx:"6",cy:"12",r:"3"}},{tag:"circle",attr:{cx:"18",cy:"19",r:"3"}},{tag:"line",attr:{x1:"8.59",y1:"13.51",x2:"15.42",y2:"17.49"}},{tag:"line",attr:{x1:"15.41",y1:"6.51",x2:"8.59",y2:"10.49"}}]})(e)}function Zt(e){return g({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"}}]})(e)}function en(e){return g({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"9",cy:"21",r:"1"}},{tag:"circle",attr:{cx:"20",cy:"21",r:"1"}},{tag:"path",attr:{d:"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"}}]})(e)}function tn(e){return g({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"5",y:"2",width:"14",height:"20",rx:"2",ry:"2"}},{tag:"line",attr:{x1:"12",y1:"18",x2:"12.01",y2:"18"}}]})(e)}function nn(e){return g({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"}}]})(e)}function sn(e){return g({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"5"}},{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"3"}},{tag:"line",attr:{x1:"12",y1:"21",x2:"12",y2:"23"}},{tag:"line",attr:{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}},{tag:"line",attr:{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}},{tag:"line",attr:{x1:"1",y1:"12",x2:"3",y2:"12"}},{tag:"line",attr:{x1:"21",y1:"12",x2:"23",y2:"12"}},{tag:"line",attr:{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}},{tag:"line",attr:{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"}}]})(e)}function rn(e){return g({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"}},{tag:"line",attr:{x1:"7",y1:"7",x2:"7.01",y2:"7"}}]})(e)}function an(e){return g({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"}},{tag:"circle",attr:{cx:"12",cy:"12",r:"6"}},{tag:"circle",attr:{cx:"12",cy:"12",r:"2"}}]})(e)}function on(e){return g({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"}},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"}},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"}}]})(e)}function ln(e){return g({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 18 13.5 8.5 8.5 13.5 1 6"}},{tag:"polyline",attr:{points:"17 18 23 18 23 12"}}]})(e)}function cn(e){return g({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 6 13.5 15.5 8.5 10.5 1 18"}},{tag:"polyline",attr:{points:"17 6 23 6 23 12"}}]})(e)}function un(e){return g({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"}}]})(e)}function hn(e){return g({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"}},{tag:"path",attr:{d:"M23 21v-2a4 4 0 0 0-3-3.87"}},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"}}]})(e)}function dn(e){return g({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5"}},{tag:"path",attr:{d:"M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"}}]})(e)}function mn(e){return g({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"}},{tag:"line",attr:{x1:"15",y1:"9",x2:"9",y2:"15"}},{tag:"line",attr:{x1:"9",y1:"9",x2:"15",y2:"15"}}]})(e)}function pn(e){return g({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"}},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"}}]})(e)}function fn(e){return g({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"}}]})(e)}We.loading=(e,t)=>Fe(e,Be("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t})),We.promise=function(e,t,n){let s,{pending:i,error:r,success:a}=t;i&&(s=fe(i)?We.loading(i,n):We.loading(i.render,{...n,...i}));const o={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},l=(e,t,i)=>{if(null==t)return void We.dismiss(s);const r={type:e,...o,...n,data:i},a=fe(t)?{render:t}:t;return s?We.update(s,{...r,...a}):We(a.render,{...r,...a}),i},c=ge(e)?e():e;return c.then(e=>l("success",a,e)).catch(e=>l("error",r,e)),c},We.success=ze("success"),We.info=ze("info"),We.error=ze("error"),We.warning=ze("warning"),We.warn=We.warning,We.dark=(e,t)=>Fe(e,Be("default",{theme:"dark",...t})),We.dismiss=e=>{_e.size>0?we.emit(1,e):De=De.filter(t=>null!=e&&t.options.toastId!==e)},We.clearWaitingQueue=function(e){return void 0===e&&(e={}),we.emit(5,e)},We.isActive=e=>{let t=!1;return _e.forEach(n=>{n.isToastActive&&n.isToastActive(e)&&(t=!0)}),t},We.update=function(e,t){void 0===t&&(t={}),setTimeout(()=>{const n=function(e,t){let{containerId:n}=t;const s=_e.get(n||Ie);return s&&s.getToast(e)}(e,t);if(n){const{props:s,content:i}=n,r={delay:100,...s,...t,toastId:t.toastId||e,updateId:Oe()};r.toastId!==e&&(r.staleId=e);const a=r.render||i;delete r.render,Fe(a,r)}},0)},We.done=e=>{We.update(e,{progress:1})},We.onChange=e=>(we.on(4,e),()=>{we.off(4,e)}),We.POSITION={TOP_LEFT:"top-left",TOP_RIGHT:"top-right",TOP_CENTER:"top-center",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",BOTTOM_CENTER:"bottom-center"},We.TYPE={INFO:"info",SUCCESS:"success",WARNING:"warning",ERROR:"error",DEFAULT:"default"},we.on(2,e=>{Ie=e.containerId||e,_e.set(Ie,e),De.forEach(e=>{we.emit(0,e.content,e.options)}),De=[]}).on(3,e=>{_e.delete(e.containerId||e),0===_e.size&&we.off(0).off(1).off(5)});const gn=s.createContext(),yn=()=>s.useContext(gn),vn=({children:e})=>{const[t,n]=s.useState(null),[i,r]=s.useState(!1),[a,o]=s.useState(!1),l=s.useCallback((e,t)=>{localStorage.setItem("token",t),localStorage.setItem("user",JSON.stringify(e)),n(e),r(!0)},[]),c=s.useCallback(()=>localStorage.getItem("token"),[]),u=s.useCallback(()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),n(null),r(!1)},[]);s.useEffect(()=>{const e=localStorage.getItem("token"),t=localStorage.getItem("user");if(e&&t)try{const e=JSON.parse(t);n(e),r(!0)}catch(s){u()}},[u]);const h={user:t,isAuthenticated:i,loading:a,login:l,logout:u,getToken:c};return M.jsx(gn.Provider,{value:h,children:e})};function xn(e,t){return function(){return e.apply(t,arguments)}}const{toString:bn}=Object.prototype,{getPrototypeOf:wn}=Object,{iterator:jn,toStringTag:kn}=Symbol,Nn=(e=>t=>{const n=bn.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Sn=e=>(e=e.toLowerCase(),t=>Nn(t)===e),Cn=e=>t=>typeof t===e,{isArray:Pn}=Array,En=Cn("undefined");const Tn=Sn("ArrayBuffer");const Ln=Cn("string"),Mn=Cn("function"),In=Cn("number"),_n=e=>null!==e&&"object"==typeof e,Dn=e=>{if("object"!==Nn(e))return!1;const t=wn(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||kn in e||jn in e)},An=Sn("Date"),On=Sn("File"),Rn=Sn("Blob"),Fn=Sn("FileList"),Bn=Sn("URLSearchParams"),[zn,Wn,Un,Vn]=["ReadableStream","Request","Response","Headers"].map(Sn);function $n(e,t,{allOwnKeys:n=!1}={}){if(null==e)return;let s,i;if("object"!=typeof e&&(e=[e]),Pn(e))for(s=0,i=e.length;s<i;s++)t.call(null,e[s],s,e);else{const i=n?Object.getOwnPropertyNames(e):Object.keys(e),r=i.length;let a;for(s=0;s<r;s++)a=i[s],t.call(null,e[a],a,e)}}function Hn(e,t){t=t.toLowerCase();const n=Object.keys(e);let s,i=n.length;for(;i-- >0;)if(s=n[i],t===s.toLowerCase())return s;return null}const qn="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,Yn=e=>!En(e)&&e!==qn;const Gn=(e=>t=>e&&t instanceof e)("undefined"!=typeof Uint8Array&&wn(Uint8Array)),Qn=Sn("HTMLFormElement"),Jn=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),Xn=Sn("RegExp"),Kn=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),s={};$n(n,(n,i)=>{let r;!1!==(r=t(n,i,e))&&(s[i]=r||n)}),Object.defineProperties(e,s)};const Zn=Sn("AsyncFunction"),es=(ts="function"==typeof setImmediate,ns=Mn(qn.postMessage),ts?setImmediate:ns?(ss=`axios@${Math.random()}`,is=[],qn.addEventListener("message",({source:e,data:t})=>{e===qn&&t===ss&&is.length&&is.shift()()},!1),e=>{is.push(e),qn.postMessage(ss,"*")}):e=>setTimeout(e));var ts,ns,ss,is;const rs="undefined"!=typeof queueMicrotask?queueMicrotask.bind(qn):"undefined"!=typeof process&&process.nextTick||es,as={isArray:Pn,isArrayBuffer:Tn,isBuffer:function(e){return null!==e&&!En(e)&&null!==e.constructor&&!En(e.constructor)&&Mn(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||Mn(e.append)&&("formdata"===(t=Nn(e))||"object"===t&&Mn(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&Tn(e.buffer),t},isString:Ln,isNumber:In,isBoolean:e=>!0===e||!1===e,isObject:_n,isPlainObject:Dn,isReadableStream:zn,isRequest:Wn,isResponse:Un,isHeaders:Vn,isUndefined:En,isDate:An,isFile:On,isBlob:Rn,isRegExp:Xn,isFunction:Mn,isStream:e=>_n(e)&&Mn(e.pipe),isURLSearchParams:Bn,isTypedArray:Gn,isFileList:Fn,forEach:$n,merge:function e(){const{caseless:t}=Yn(this)&&this||{},n={},s=(s,i)=>{const r=t&&Hn(n,i)||i;Dn(n[r])&&Dn(s)?n[r]=e(n[r],s):Dn(s)?n[r]=e({},s):Pn(s)?n[r]=s.slice():n[r]=s};for(let i=0,r=arguments.length;i<r;i++)arguments[i]&&$n(arguments[i],s);return n},extend:(e,t,n,{allOwnKeys:s}={})=>($n(t,(t,s)=>{n&&Mn(t)?e[s]=xn(t,n):e[s]=t},{allOwnKeys:s}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,s)=>{e.prototype=Object.create(t.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,s)=>{let i,r,a;const o={};if(t=t||{},null==e)return t;do{for(i=Object.getOwnPropertyNames(e),r=i.length;r-- >0;)a=i[r],s&&!s(a,e,t)||o[a]||(t[a]=e[a],o[a]=!0);e=!1!==n&&wn(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:Nn,kindOfTest:Sn,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const s=e.indexOf(t,n);return-1!==s&&s===n},toArray:e=>{if(!e)return null;if(Pn(e))return e;let t=e.length;if(!In(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[jn]).call(e);let s;for(;(s=n.next())&&!s.done;){const n=s.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const s=[];for(;null!==(n=e.exec(t));)s.push(n);return s},isHTMLForm:Qn,hasOwnProperty:Jn,hasOwnProp:Jn,reduceDescriptors:Kn,freezeMethods:e=>{Kn(e,(t,n)=>{if(Mn(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const s=e[n];Mn(s)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))})},toObjectSet:(e,t)=>{const n={},s=e=>{e.forEach(e=>{n[e]=!0})};return Pn(e)?s(e):s(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,n){return t.toUpperCase()+n}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:Hn,global:qn,isContextDefined:Yn,isSpecCompliantForm:function(e){return!!(e&&Mn(e.append)&&"FormData"===e[kn]&&e[jn])},toJSONObject:e=>{const t=new Array(10),n=(e,s)=>{if(_n(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[s]=e;const i=Pn(e)?[]:{};return $n(e,(e,t)=>{const r=n(e,s+1);!En(r)&&(i[t]=r)}),t[s]=void 0,i}}return e};return n(e,0)},isAsyncFn:Zn,isThenable:e=>e&&(_n(e)||Mn(e))&&Mn(e.then)&&Mn(e.catch),setImmediate:es,asap:rs,isIterable:e=>null!=e&&Mn(e[jn])};function os(e,t,n,s,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),s&&(this.request=s),i&&(this.response=i,this.status=i.status?i.status:null)}as.inherits(os,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:as.toJSONObject(this.config),code:this.code,status:this.status}}});const ls=os.prototype,cs={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{cs[e]={value:e}}),Object.defineProperties(os,cs),Object.defineProperty(ls,"isAxiosError",{value:!0}),os.from=(e,t,n,s,i,r)=>{const a=Object.create(ls);return as.toFlatObject(e,a,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e),os.call(a,e.message,t,n,s,i),a.cause=e,a.name=e.name,r&&Object.assign(a,r),a};function us(e){return as.isPlainObject(e)||as.isArray(e)}function hs(e){return as.endsWith(e,"[]")?e.slice(0,-2):e}function ds(e,t,n){return e?e.concat(t).map(function(e,t){return e=hs(e),!n&&t?"["+e+"]":e}).join(n?".":""):t}const ms=as.toFlatObject(as,{},null,function(e){return/^is[A-Z]/.test(e)});function ps(e,t,n){if(!as.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const s=(n=as.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!as.isUndefined(t[e])})).metaTokens,i=n.visitor||c,r=n.dots,a=n.indexes,o=(n.Blob||"undefined"!=typeof Blob&&Blob)&&as.isSpecCompliantForm(t);if(!as.isFunction(i))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(as.isDate(e))return e.toISOString();if(as.isBoolean(e))return e.toString();if(!o&&as.isBlob(e))throw new os("Blob is not supported. Use a Buffer instead.");return as.isArrayBuffer(e)||as.isTypedArray(e)?o&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,i){let o=e;if(e&&!i&&"object"==typeof e)if(as.endsWith(n,"{}"))n=s?n:n.slice(0,-2),e=JSON.stringify(e);else if(as.isArray(e)&&function(e){return as.isArray(e)&&!e.some(us)}(e)||(as.isFileList(e)||as.endsWith(n,"[]"))&&(o=as.toArray(e)))return n=hs(n),o.forEach(function(e,s){!as.isUndefined(e)&&null!==e&&t.append(!0===a?ds([n],s,r):null===a?n:n+"[]",l(e))}),!1;return!!us(e)||(t.append(ds(i,n,r),l(e)),!1)}const u=[],h=Object.assign(ms,{defaultVisitor:c,convertValue:l,isVisitable:us});if(!as.isObject(e))throw new TypeError("data must be an object");return function e(n,s){if(!as.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+s.join("."));u.push(n),as.forEach(n,function(n,r){!0===(!(as.isUndefined(n)||null===n)&&i.call(t,n,as.isString(r)?r.trim():r,s,h))&&e(n,s?s.concat(r):[r])}),u.pop()}}(e),t}function fs(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function gs(e,t){this._pairs=[],e&&ps(e,this,t)}const ys=gs.prototype;function vs(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function xs(e,t,n){if(!t)return e;const s=n&&n.encode||vs;as.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let r;if(r=i?i(t,n):as.isURLSearchParams(t)?t.toString():new gs(t,n).toString(s),r){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e}ys.append=function(e,t){this._pairs.push([e,t])},ys.toString=function(e){const t=e?function(t){return e.call(this,t,fs)}:fs;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};class bs{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){as.forEach(this.handlers,function(t){null!==t&&e(t)})}}const ws={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},js={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:gs,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},ks="undefined"!=typeof window&&"undefined"!=typeof document,Ns="object"==typeof navigator&&navigator||void 0,Ss=ks&&(!Ns||["ReactNative","NativeScript","NS"].indexOf(Ns.product)<0),Cs="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,Ps=ks&&window.location.href||"http://localhost",Es={...Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:ks,hasStandardBrowserEnv:Ss,hasStandardBrowserWebWorkerEnv:Cs,navigator:Ns,origin:Ps},Symbol.toStringTag,{value:"Module"})),...js};function Ts(e){function t(e,n,s,i){let r=e[i++];if("__proto__"===r)return!0;const a=Number.isFinite(+r),o=i>=e.length;if(r=!r&&as.isArray(s)?s.length:r,o)return as.hasOwnProp(s,r)?s[r]=[s[r],n]:s[r]=n,!a;s[r]&&as.isObject(s[r])||(s[r]=[]);return t(e,n,s[r],i)&&as.isArray(s[r])&&(s[r]=function(e){const t={},n=Object.keys(e);let s;const i=n.length;let r;for(s=0;s<i;s++)r=n[s],t[r]=e[r];return t}(s[r])),!a}if(as.isFormData(e)&&as.isFunction(e.entries)){const n={};return as.forEachEntry(e,(e,s)=>{t(function(e){return as.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}(e),s,n,0)}),n}return null}const Ls={transitional:ws,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",s=n.indexOf("application/json")>-1,i=as.isObject(e);i&&as.isHTMLForm(e)&&(e=new FormData(e));if(as.isFormData(e))return s?JSON.stringify(Ts(e)):e;if(as.isArrayBuffer(e)||as.isBuffer(e)||as.isStream(e)||as.isFile(e)||as.isBlob(e)||as.isReadableStream(e))return e;if(as.isArrayBufferView(e))return e.buffer;if(as.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let r;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return ps(e,new Es.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,s){return Es.isNode&&as.isBuffer(e)?(this.append(t,e.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((r=as.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return ps(r?{"files[]":e}:e,t&&new t,this.formSerializer)}}return i||s?(t.setContentType("application/json",!1),function(e,t,n){if(as.isString(e))try{return(t||JSON.parse)(e),as.trim(e)}catch(s){if("SyntaxError"!==s.name)throw s}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||Ls.transitional,n=t&&t.forcedJSONParsing,s="json"===this.responseType;if(as.isResponse(e)||as.isReadableStream(e))return e;if(e&&as.isString(e)&&(n&&!this.responseType||s)){const n=!(t&&t.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(i){if(n){if("SyntaxError"===i.name)throw os.from(i,os.ERR_BAD_RESPONSE,this,null,this.response);throw i}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Es.classes.FormData,Blob:Es.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};as.forEach(["delete","get","head","post","put","patch"],e=>{Ls.headers[e]={}});const Ms=as.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Is=Symbol("internals");function _s(e){return e&&String(e).trim().toLowerCase()}function Ds(e){return!1===e||null==e?e:as.isArray(e)?e.map(Ds):String(e)}function As(e,t,n,s,i){return as.isFunction(s)?s.call(this,t,n):(i&&(t=n),as.isString(t)?as.isString(s)?-1!==t.indexOf(s):as.isRegExp(s)?s.test(t):void 0:void 0)}let Os=class{constructor(e){e&&this.set(e)}set(e,t,n){const s=this;function i(e,t,n){const i=_s(t);if(!i)throw new Error("header name must be a non-empty string");const r=as.findKey(s,i);(!r||void 0===s[r]||!0===n||void 0===n&&!1!==s[r])&&(s[r||t]=Ds(e))}const r=(e,t)=>as.forEach(e,(e,n)=>i(e,n,t));if(as.isPlainObject(e)||e instanceof this.constructor)r(e,t);else if(as.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))r((e=>{const t={};let n,s,i;return e&&e.split("\n").forEach(function(e){i=e.indexOf(":"),n=e.substring(0,i).trim().toLowerCase(),s=e.substring(i+1).trim(),!n||t[n]&&Ms[n]||("set-cookie"===n?t[n]?t[n].push(s):t[n]=[s]:t[n]=t[n]?t[n]+", "+s:s)}),t})(e),t);else if(as.isObject(e)&&as.isIterable(e)){let n,s,i={};for(const t of e){if(!as.isArray(t))throw TypeError("Object iterator must return a key-value pair");i[s=t[0]]=(n=i[s])?as.isArray(n)?[...n,t[1]]:[n,t[1]]:t[1]}r(i,t)}else null!=e&&i(t,e,n);return this}get(e,t){if(e=_s(e)){const n=as.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=n.exec(e);)t[s[1]]=s[2];return t}(e);if(as.isFunction(t))return t.call(this,e,n);if(as.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=_s(e)){const n=as.findKey(this,e);return!(!n||void 0===this[n]||t&&!As(0,this[n],n,t))}return!1}delete(e,t){const n=this;let s=!1;function i(e){if(e=_s(e)){const i=as.findKey(n,e);!i||t&&!As(0,n[i],i,t)||(delete n[i],s=!0)}}return as.isArray(e)?e.forEach(i):i(e),s}clear(e){const t=Object.keys(this);let n=t.length,s=!1;for(;n--;){const i=t[n];e&&!As(0,this[i],i,e,!0)||(delete this[i],s=!0)}return s}normalize(e){const t=this,n={};return as.forEach(this,(s,i)=>{const r=as.findKey(n,i);if(r)return t[r]=Ds(s),void delete t[i];const a=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,n)=>t.toUpperCase()+n)}(i):String(i).trim();a!==i&&delete t[i],t[a]=Ds(s),n[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return as.forEach(this,(n,s)=>{null!=n&&!1!==n&&(t[s]=e&&as.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach(e=>n.set(e)),n}static accessor(e){const t=(this[Is]=this[Is]={accessors:{}}).accessors,n=this.prototype;function s(e){const s=_s(e);t[s]||(!function(e,t){const n=as.toCamelCase(" "+t);["get","set","has"].forEach(s=>{Object.defineProperty(e,s+n,{value:function(e,n,i){return this[s].call(this,t,e,n,i)},configurable:!0})})}(n,e),t[s]=!0)}return as.isArray(e)?e.forEach(s):s(e),this}};function Rs(e,t){const n=this||Ls,s=t||n,i=Os.from(s.headers);let r=s.data;return as.forEach(e,function(e){r=e.call(n,r,i.normalize(),t?t.status:void 0)}),i.normalize(),r}function Fs(e){return!(!e||!e.__CANCEL__)}function Bs(e,t,n){os.call(this,null==e?"canceled":e,os.ERR_CANCELED,t,n),this.name="CanceledError"}function zs(e,t,n){const s=n.config.validateStatus;n.status&&s&&!s(n.status)?t(new os("Request failed with status code "+n.status,[os.ERR_BAD_REQUEST,os.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}Os.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),as.reduceDescriptors(Os.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[n]=e}}}),as.freezeMethods(Os),as.inherits(Bs,os,{__CANCEL__:!0});const Ws=(e,t,n=3)=>{let s=0;const i=function(e,t){e=e||10;const n=new Array(e),s=new Array(e);let i,r=0,a=0;return t=void 0!==t?t:1e3,function(o){const l=Date.now(),c=s[a];i||(i=l),n[r]=o,s[r]=l;let u=a,h=0;for(;u!==r;)h+=n[u++],u%=e;if(r=(r+1)%e,r===a&&(a=(a+1)%e),l-i<t)return;const d=c&&l-c;return d?Math.round(1e3*h/d):void 0}}(50,250);return function(e,t){let n,s,i=0,r=1e3/t;const a=(t,r=Date.now())=>{i=r,n=null,s&&(clearTimeout(s),s=null),e.apply(null,t)};return[(...e)=>{const t=Date.now(),o=t-i;o>=r?a(e,t):(n=e,s||(s=setTimeout(()=>{s=null,a(n)},r-o)))},()=>n&&a(n)]}(n=>{const r=n.loaded,a=n.lengthComputable?n.total:void 0,o=r-s,l=i(o);s=r;e({loaded:r,total:a,progress:a?r/a:void 0,bytes:o,rate:l||void 0,estimated:l&&a&&r<=a?(a-r)/l:void 0,event:n,lengthComputable:null!=a,[t?"download":"upload"]:!0})},n)},Us=(e,t)=>{const n=null!=e;return[s=>t[0]({lengthComputable:n,total:e,loaded:s}),t[1]]},Vs=e=>(...t)=>as.asap(()=>e(...t)),$s=Es.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,Es.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(Es.origin),Es.navigator&&/(msie|trident)/i.test(Es.navigator.userAgent)):()=>!0,Hs=Es.hasStandardBrowserEnv?{write(e,t,n,s,i,r){const a=[e+"="+encodeURIComponent(t)];as.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),as.isString(s)&&a.push("path="+s),as.isString(i)&&a.push("domain="+i),!0===r&&a.push("secure"),document.cookie=a.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function qs(e,t,n){let s=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(s||0==n)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const Ys=e=>e instanceof Os?{...e}:e;function Gs(e,t){t=t||{};const n={};function s(e,t,n,s){return as.isPlainObject(e)&&as.isPlainObject(t)?as.merge.call({caseless:s},e,t):as.isPlainObject(t)?as.merge({},t):as.isArray(t)?t.slice():t}function i(e,t,n,i){return as.isUndefined(t)?as.isUndefined(e)?void 0:s(void 0,e,0,i):s(e,t,0,i)}function r(e,t){if(!as.isUndefined(t))return s(void 0,t)}function a(e,t){return as.isUndefined(t)?as.isUndefined(e)?void 0:s(void 0,e):s(void 0,t)}function o(n,i,r){return r in t?s(n,i):r in e?s(void 0,n):void 0}const l={url:r,method:r,data:r,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:o,headers:(e,t,n)=>i(Ys(e),Ys(t),0,!0)};return as.forEach(Object.keys(Object.assign({},e,t)),function(s){const r=l[s]||i,a=r(e[s],t[s],s);as.isUndefined(a)&&r!==o||(n[s]=a)}),n}const Qs=e=>{const t=Gs({},e);let n,{data:s,withXSRFToken:i,xsrfHeaderName:r,xsrfCookieName:a,headers:o,auth:l}=t;if(t.headers=o=Os.from(o),t.url=xs(qs(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),as.isFormData(s))if(Es.hasStandardBrowserEnv||Es.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(!1!==(n=o.getContentType())){const[e,...t]=n?n.split(";").map(e=>e.trim()).filter(Boolean):[];o.setContentType([e||"multipart/form-data",...t].join("; "))}if(Es.hasStandardBrowserEnv&&(i&&as.isFunction(i)&&(i=i(t)),i||!1!==i&&$s(t.url))){const e=r&&a&&Hs.read(a);e&&o.set(r,e)}return t},Js="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise(function(t,n){const s=Qs(e);let i=s.data;const r=Os.from(s.headers).normalize();let a,o,l,c,u,{responseType:h,onUploadProgress:d,onDownloadProgress:m}=s;function p(){c&&c(),u&&u(),s.cancelToken&&s.cancelToken.unsubscribe(a),s.signal&&s.signal.removeEventListener("abort",a)}let f=new XMLHttpRequest;function g(){if(!f)return;const s=Os.from("getAllResponseHeaders"in f&&f.getAllResponseHeaders());zs(function(e){t(e),p()},function(e){n(e),p()},{data:h&&"text"!==h&&"json"!==h?f.response:f.responseText,status:f.status,statusText:f.statusText,headers:s,config:e,request:f}),f=null}f.open(s.method.toUpperCase(),s.url,!0),f.timeout=s.timeout,"onloadend"in f?f.onloadend=g:f.onreadystatechange=function(){f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))&&setTimeout(g)},f.onabort=function(){f&&(n(new os("Request aborted",os.ECONNABORTED,e,f)),f=null)},f.onerror=function(){n(new os("Network Error",os.ERR_NETWORK,e,f)),f=null},f.ontimeout=function(){let t=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const i=s.transitional||ws;s.timeoutErrorMessage&&(t=s.timeoutErrorMessage),n(new os(t,i.clarifyTimeoutError?os.ETIMEDOUT:os.ECONNABORTED,e,f)),f=null},void 0===i&&r.setContentType(null),"setRequestHeader"in f&&as.forEach(r.toJSON(),function(e,t){f.setRequestHeader(t,e)}),as.isUndefined(s.withCredentials)||(f.withCredentials=!!s.withCredentials),h&&"json"!==h&&(f.responseType=s.responseType),m&&([l,u]=Ws(m,!0),f.addEventListener("progress",l)),d&&f.upload&&([o,c]=Ws(d),f.upload.addEventListener("progress",o),f.upload.addEventListener("loadend",c)),(s.cancelToken||s.signal)&&(a=t=>{f&&(n(!t||t.type?new Bs(null,e,f):t),f.abort(),f=null)},s.cancelToken&&s.cancelToken.subscribe(a),s.signal&&(s.signal.aborted?a():s.signal.addEventListener("abort",a)));const y=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(s.url);y&&-1===Es.protocols.indexOf(y)?n(new os("Unsupported protocol "+y+":",os.ERR_BAD_REQUEST,e)):f.send(i||null)})},Xs=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,s=new AbortController;const i=function(e){if(!n){n=!0,a();const t=e instanceof Error?e:this.reason;s.abort(t instanceof os?t:new Bs(t instanceof Error?t.message:t))}};let r=t&&setTimeout(()=>{r=null,i(new os(`timeout ${t} of ms exceeded`,os.ETIMEDOUT))},t);const a=()=>{e&&(r&&clearTimeout(r),r=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(i):e.removeEventListener("abort",i)}),e=null)};e.forEach(e=>e.addEventListener("abort",i));const{signal:o}=s;return o.unsubscribe=()=>as.asap(a),o}},Ks=function*(e,t){let n=e.byteLength;if(n<t)return void(yield e);let s,i=0;for(;i<n;)s=i+t,yield e.slice(i,s),i=s},Zs=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:n}=await t.read();if(e)break;yield n}}finally{await t.cancel()}},ei=(e,t,n,s)=>{const i=async function*(e,t){for await(const n of Zs(e))yield*Ks(n,t)}(e,t);let r,a=0,o=e=>{r||(r=!0,s&&s(e))};return new ReadableStream({async pull(e){try{const{done:t,value:s}=await i.next();if(t)return o(),void e.close();let r=s.byteLength;if(n){let e=a+=r;n(e)}e.enqueue(new Uint8Array(s))}catch(t){throw o(t),t}},cancel:e=>(o(e),i.return())},{highWaterMark:2})},ti="function"==typeof fetch&&"function"==typeof Request&&"function"==typeof Response,ni=ti&&"function"==typeof ReadableStream,si=ti&&("function"==typeof TextEncoder?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),ii=(e,...t)=>{try{return!!e(...t)}catch(n){return!1}},ri=ni&&ii(()=>{let e=!1;const t=new Request(Es.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),ai=ni&&ii(()=>as.isReadableStream(new Response("").body)),oi={stream:ai&&(e=>e.body)};var li;ti&&(li=new Response,["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!oi[e]&&(oi[e]=as.isFunction(li[e])?t=>t[e]():(t,n)=>{throw new os(`Response type '${e}' is not supported`,os.ERR_NOT_SUPPORT,n)})}));const ci=async(e,t)=>{const n=as.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(as.isBlob(e))return e.size;if(as.isSpecCompliantForm(e)){const t=new Request(Es.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return as.isArrayBufferView(e)||as.isArrayBuffer(e)?e.byteLength:(as.isURLSearchParams(e)&&(e+=""),as.isString(e)?(await si(e)).byteLength:void 0)})(t):n},ui={http:null,xhr:Js,fetch:ti&&(async e=>{let{url:t,method:n,data:s,signal:i,cancelToken:r,timeout:a,onDownloadProgress:o,onUploadProgress:l,responseType:c,headers:u,withCredentials:h="same-origin",fetchOptions:d}=Qs(e);c=c?(c+"").toLowerCase():"text";let m,p=Xs([i,r&&r.toAbortSignal()],a);const f=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let g;try{if(l&&ri&&"get"!==n&&"head"!==n&&0!==(g=await ci(u,s))){let e,n=new Request(t,{method:"POST",body:s,duplex:"half"});if(as.isFormData(s)&&(e=n.headers.get("content-type"))&&u.setContentType(e),n.body){const[e,t]=Us(g,Ws(Vs(l)));s=ei(n.body,65536,e,t)}}as.isString(h)||(h=h?"include":"omit");const i="credentials"in Request.prototype;m=new Request(t,{...d,signal:p,method:n.toUpperCase(),headers:u.normalize().toJSON(),body:s,duplex:"half",credentials:i?h:void 0});let r=await fetch(m,d);const a=ai&&("stream"===c||"response"===c);if(ai&&(o||a&&f)){const e={};["status","statusText","headers"].forEach(t=>{e[t]=r[t]});const t=as.toFiniteNumber(r.headers.get("content-length")),[n,s]=o&&Us(t,Ws(Vs(o),!0))||[];r=new Response(ei(r.body,65536,n,()=>{s&&s(),f&&f()}),e)}c=c||"text";let y=await oi[as.findKey(oi,c)||"text"](r,e);return!a&&f&&f(),await new Promise((t,n)=>{zs(t,n,{data:y,headers:Os.from(r.headers),status:r.status,statusText:r.statusText,config:e,request:m})})}catch(y){if(f&&f(),y&&"TypeError"===y.name&&/Load failed|fetch/i.test(y.message))throw Object.assign(new os("Network Error",os.ERR_NETWORK,e,m),{cause:y.cause||y});throw os.from(y,y&&y.code,e,m)}})};as.forEach(ui,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(n){}Object.defineProperty(e,"adapterName",{value:t})}});const hi=e=>`- ${e}`,di=e=>as.isFunction(e)||null===e||!1===e,mi=e=>{e=as.isArray(e)?e:[e];const{length:t}=e;let n,s;const i={};for(let r=0;r<t;r++){let t;if(n=e[r],s=n,!di(n)&&(s=ui[(t=String(n)).toLowerCase()],void 0===s))throw new os(`Unknown adapter '${t}'`);if(s)break;i[t||"#"+r]=s}if(!s){const e=Object.entries(i).map(([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build"));throw new os("There is no suitable adapter to dispatch the request "+(t?e.length>1?"since :\n"+e.map(hi).join("\n"):" "+hi(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return s};function pi(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Bs(null,e)}function fi(e){pi(e),e.headers=Os.from(e.headers),e.data=Rs.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return mi(e.adapter||Ls.adapter)(e).then(function(t){return pi(e),t.data=Rs.call(e,e.transformResponse,t),t.headers=Os.from(t.headers),t},function(t){return Fs(t)||(pi(e),t&&t.response&&(t.response.data=Rs.call(e,e.transformResponse,t.response),t.response.headers=Os.from(t.response.headers))),Promise.reject(t)})}const gi="1.10.0",yi={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{yi[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const vi={};yi.transitional=function(e,t,n){return(s,i,r)=>{if(!1===e)throw new os(function(e,t){return"[Axios v"+gi+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}(i," has been removed"+(t?" in "+t:"")),os.ERR_DEPRECATED);return t&&!vi[i]&&(vi[i]=!0),!e||e(s,i,r)}},yi.spelling=function(e){return(e,t)=>!0};const xi={assertOptions:function(e,t,n){if("object"!=typeof e)throw new os("options must be an object",os.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let i=s.length;for(;i-- >0;){const r=s[i],a=t[r];if(a){const t=e[r],n=void 0===t||a(t,r,e);if(!0!==n)throw new os("option "+r+" must be "+n,os.ERR_BAD_OPTION_VALUE);continue}if(!0!==n)throw new os("Unknown option "+r,os.ERR_BAD_OPTION)}},validators:yi},bi=xi.validators;let wi=class{constructor(e){this.defaults=e||{},this.interceptors={request:new bs,response:new bs}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{n.stack?t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+t):n.stack=t}catch(s){}}throw n}}_request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=Gs(this.defaults,t);const{transitional:n,paramsSerializer:s,headers:i}=t;void 0!==n&&xi.assertOptions(n,{silentJSONParsing:bi.transitional(bi.boolean),forcedJSONParsing:bi.transitional(bi.boolean),clarifyTimeoutError:bi.transitional(bi.boolean)},!1),null!=s&&(as.isFunction(s)?t.paramsSerializer={serialize:s}:xi.assertOptions(s,{encode:bi.function,serialize:bi.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),xi.assertOptions(t,{baseUrl:bi.spelling("baseURL"),withXsrfToken:bi.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let r=i&&as.merge(i.common,i[t.method]);i&&as.forEach(["delete","get","head","post","put","patch","common"],e=>{delete i[e]}),t.headers=Os.concat(r,i);const a=[];let o=!0;this.interceptors.request.forEach(function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(o=o&&e.synchronous,a.unshift(e.fulfilled,e.rejected))});const l=[];let c;this.interceptors.response.forEach(function(e){l.push(e.fulfilled,e.rejected)});let u,h=0;if(!o){const e=[fi.bind(this),void 0];for(e.unshift.apply(e,a),e.push.apply(e,l),u=e.length,c=Promise.resolve(t);h<u;)c=c.then(e[h++],e[h++]);return c}u=a.length;let d=t;for(h=0;h<u;){const e=a[h++],t=a[h++];try{d=e(d)}catch(m){t.call(this,m);break}}try{c=fi.call(this,d)}catch(m){return Promise.reject(m)}for(h=0,u=l.length;h<u;)c=c.then(l[h++],l[h++]);return c}getUri(e){return xs(qs((e=Gs(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}};as.forEach(["delete","get","head","options"],function(e){wi.prototype[e]=function(t,n){return this.request(Gs(n||{},{method:e,url:t,data:(n||{}).data}))}}),as.forEach(["post","put","patch"],function(e){function t(t){return function(n,s,i){return this.request(Gs(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:s}))}}wi.prototype[e]=t(),wi.prototype[e+"Form"]=t(!0)});const ji={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(ji).forEach(([e,t])=>{ji[t]=e});const ki=function e(t){const n=new wi(t),s=xn(wi.prototype.request,n);return as.extend(s,wi.prototype,n,{allOwnKeys:!0}),as.extend(s,n,null,{allOwnKeys:!0}),s.create=function(n){return e(Gs(t,n))},s}(Ls);ki.Axios=wi,ki.CanceledError=Bs,ki.CancelToken=class e{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(e){t=e});const n=this;this.promise.then(e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null}),this.promise.then=e=>{let t;const s=new Promise(e=>{n.subscribe(e),t=e}).then(e);return s.cancel=function(){n.unsubscribe(t)},s},e(function(e,s,i){n.reason||(n.reason=new Bs(e,s,i),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let t;return{token:new e(function(e){t=e}),cancel:t}}},ki.isCancel=Fs,ki.VERSION=gi,ki.toFormData=ps,ki.AxiosError=os,ki.Cancel=ki.CanceledError,ki.all=function(e){return Promise.all(e)},ki.spread=function(e){return function(t){return e.apply(null,t)}},ki.isAxiosError=function(e){return as.isObject(e)&&!0===e.isAxiosError},ki.mergeConfig=Gs,ki.AxiosHeaders=Os,ki.formToJSON=e=>Ts(as.isHTMLForm(e)?new FormData(e):e),ki.getAdapter=mi,ki.HttpStatusCode=ji,ki.default=ki;const{Axios:Ni,AxiosError:Si,CanceledError:Ci,isCancel:Pi,CancelToken:Ei,VERSION:Ti,all:Li,Cancel:Mi,isAxiosError:Ii,spread:_i,toFormData:Di,AxiosHeaders:Ai,HttpStatusCode:Oi,formToJSON:Ri,getAdapter:Fi,mergeConfig:Bi}=ki;var zi,Wi={exports:{}};
/*!
 * Pusher JavaScript Library v8.4.0
 * https://pusher.com/
 *
 * Copyright 2020, Pusher
 * Released under the MIT licence.
 */window,zi=function(){return function(e){var t={};function n(s){if(t[s])return t[s].exports;var i=t[s]={i:s,l:!1,exports:{}};return e[s].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(s,i,function(t){return e[t]}.bind(null,i));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t,n){var s=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function s(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=256,r=function(){function e(e){void 0===e&&(e="="),this._paddingCharacter=e}return e.prototype.encodedLength=function(e){return this._paddingCharacter?(e+2)/3*4|0:(8*e+5)/6|0},e.prototype.encode=function(e){for(var t="",n=0;n<e.length-2;n+=3){var s=e[n]<<16|e[n+1]<<8|e[n+2];t+=this._encodeByte(s>>>18&63),t+=this._encodeByte(s>>>12&63),t+=this._encodeByte(s>>>6&63),t+=this._encodeByte(s>>>0&63)}var i=e.length-n;return i>0&&(s=e[n]<<16|(2===i?e[n+1]<<8:0),t+=this._encodeByte(s>>>18&63),t+=this._encodeByte(s>>>12&63),t+=2===i?this._encodeByte(s>>>6&63):this._paddingCharacter||"",t+=this._paddingCharacter||""),t},e.prototype.maxDecodedLength=function(e){return this._paddingCharacter?e/4*3|0:(6*e+7)/8|0},e.prototype.decodedLength=function(e){return this.maxDecodedLength(e.length-this._getPaddingLength(e))},e.prototype.decode=function(e){if(0===e.length)return new Uint8Array(0);for(var t=this._getPaddingLength(e),n=e.length-t,s=new Uint8Array(this.maxDecodedLength(n)),r=0,a=0,o=0,l=0,c=0,u=0,h=0;a<n-4;a+=4)l=this._decodeChar(e.charCodeAt(a+0)),c=this._decodeChar(e.charCodeAt(a+1)),u=this._decodeChar(e.charCodeAt(a+2)),h=this._decodeChar(e.charCodeAt(a+3)),s[r++]=l<<2|c>>>4,s[r++]=c<<4|u>>>2,s[r++]=u<<6|h,o|=l&i,o|=c&i,o|=u&i,o|=h&i;if(a<n-1&&(l=this._decodeChar(e.charCodeAt(a)),c=this._decodeChar(e.charCodeAt(a+1)),s[r++]=l<<2|c>>>4,o|=l&i,o|=c&i),a<n-2&&(u=this._decodeChar(e.charCodeAt(a+2)),s[r++]=c<<4|u>>>2,o|=u&i),a<n-3&&(h=this._decodeChar(e.charCodeAt(a+3)),s[r++]=u<<6|h,o|=h&i),0!==o)throw new Error("Base64Coder: incorrect characters for decoding");return s},e.prototype._encodeByte=function(e){var t=e;return t+=65,t+=25-e>>>8&6,t+=51-e>>>8&-75,t+=61-e>>>8&-15,t+=62-e>>>8&3,String.fromCharCode(t)},e.prototype._decodeChar=function(e){var t=i;return t+=(42-e&e-44)>>>8&-256+e-43+62,t+=(46-e&e-48)>>>8&-256+e-47+63,t+=(47-e&e-58)>>>8&-256+e-48+52,t+=(64-e&e-91)>>>8&-256+e-65+0,t+=(96-e&e-123)>>>8&-256+e-97+26},e.prototype._getPaddingLength=function(e){var t=0;if(this._paddingCharacter){for(var n=e.length-1;n>=0&&e[n]===this._paddingCharacter;n--)t++;if(e.length<4||t>2)throw new Error("Base64Coder: incorrect padding")}return t},e}();t.Coder=r;var a=new r;t.encode=function(e){return a.encode(e)},t.decode=function(e){return a.decode(e)};var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype._encodeByte=function(e){var t=e;return t+=65,t+=25-e>>>8&6,t+=51-e>>>8&-75,t+=61-e>>>8&-13,t+=62-e>>>8&49,String.fromCharCode(t)},t.prototype._decodeChar=function(e){var t=i;return t+=(44-e&e-46)>>>8&-256+e-45+62,t+=(94-e&e-96)>>>8&-256+e-95+63,t+=(47-e&e-58)>>>8&-256+e-48+52,t+=(64-e&e-91)>>>8&-256+e-65+0,t+=(96-e&e-123)>>>8&-256+e-97+26},t}(r);t.URLSafeCoder=o;var l=new o;t.encodeURLSafe=function(e){return l.encode(e)},t.decodeURLSafe=function(e){return l.decode(e)},t.encodedLength=function(e){return a.encodedLength(e)},t.maxDecodedLength=function(e){return a.maxDecodedLength(e)},t.decodedLength=function(e){return a.decodedLength(e)}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var s="utf8: invalid string",i="utf8: invalid source encoding";function r(e){for(var t=0,n=0;n<e.length;n++){var i=e.charCodeAt(n);if(i<128)t+=1;else if(i<2048)t+=2;else if(i<55296)t+=3;else{if(!(i<=57343))throw new Error(s);if(n>=e.length-1)throw new Error(s);n++,t+=4}}return t}t.encode=function(e){for(var t=new Uint8Array(r(e)),n=0,s=0;s<e.length;s++){var i=e.charCodeAt(s);i<128?t[n++]=i:i<2048?(t[n++]=192|i>>6,t[n++]=128|63&i):i<55296?(t[n++]=224|i>>12,t[n++]=128|i>>6&63,t[n++]=128|63&i):(s++,i=(1023&i)<<10,i|=1023&e.charCodeAt(s),i+=65536,t[n++]=240|i>>18,t[n++]=128|i>>12&63,t[n++]=128|i>>6&63,t[n++]=128|63&i)}return t},t.encodedLength=r,t.decode=function(e){for(var t=[],n=0;n<e.length;n++){var s=e[n];if(128&s){var r=void 0;if(s<224){if(n>=e.length)throw new Error(i);if(128!=(192&(a=e[++n])))throw new Error(i);s=(31&s)<<6|63&a,r=128}else if(s<240){if(n>=e.length-1)throw new Error(i);var a=e[++n],o=e[++n];if(128!=(192&a)||128!=(192&o))throw new Error(i);s=(15&s)<<12|(63&a)<<6|63&o,r=2048}else{if(!(s<248))throw new Error(i);if(n>=e.length-2)throw new Error(i);a=e[++n],o=e[++n];var l=e[++n];if(128!=(192&a)||128!=(192&o)||128!=(192&l))throw new Error(i);s=(15&s)<<18|(63&a)<<12|(63&o)<<6|63&l,r=65536}if(s<r||s>=55296&&s<=57343)throw new Error(i);if(s>=65536){if(s>1114111)throw new Error(i);s-=65536,t.push(String.fromCharCode(55296|s>>10)),s=56320|1023&s}}t.push(String.fromCharCode(s))}return t.join("")}},function(e,t,n){e.exports=n(3).default},function(e,t,n){n.r(t);class s{constructor(e,t){this.lastId=0,this.prefix=e,this.name=t}create(e){this.lastId++;var t=this.lastId,n=this.prefix+t,s=this.name+"["+t+"]",i=!1,r=function(){i||(e.apply(null,arguments),i=!0)};return this[t]=r,{number:t,id:n,name:s,callback:r}}remove(e){delete this[e.number]}}var i=new s("_pusher_script_","Pusher.ScriptReceivers"),r={VERSION:"8.4.0",PROTOCOL:7,wsPort:80,wssPort:443,wsPath:"",httpHost:"sockjs.pusher.com",httpPort:80,httpsPort:443,httpPath:"/pusher",stats_host:"stats.pusher.com",authEndpoint:"/pusher/auth",authTransport:"ajax",activityTimeout:12e4,pongTimeout:3e4,unavailableTimeout:1e4,userAuthentication:{endpoint:"/pusher/user-auth",transport:"ajax"},channelAuthorization:{endpoint:"/pusher/auth",transport:"ajax"},cdn_http:"http://js.pusher.com",cdn_https:"https://js.pusher.com",dependency_suffix:""},a=new s("_pusher_dependencies","Pusher.DependenciesReceivers"),o=new class{constructor(e){this.options=e,this.receivers=e.receivers||i,this.loading={}}load(e,t,n){var s=this;if(s.loading[e]&&s.loading[e].length>0)s.loading[e].push(n);else{s.loading[e]=[n];var i=ht.createScriptRequest(s.getPath(e,t)),r=s.receivers.create(function(t){if(s.receivers.remove(r),s.loading[e]){var n=s.loading[e];delete s.loading[e];for(var a=function(e){e||i.cleanup()},o=0;o<n.length;o++)n[o](t,a)}});i.send(r)}}getRoot(e){var t=ht.getDocument().location.protocol;return(e&&e.useTLS||"https:"===t?this.options.cdn_https:this.options.cdn_http).replace(/\/*$/,"")+"/"+this.options.version}getPath(e,t){return this.getRoot(t)+"/"+e+this.options.suffix+".js"}}({cdn_http:r.cdn_http,cdn_https:r.cdn_https,version:r.VERSION,suffix:r.dependency_suffix,receivers:a});const l={baseUrl:"https://pusher.com",urls:{authenticationEndpoint:{path:"/docs/channels/server_api/authenticating_users"},authorizationEndpoint:{path:"/docs/channels/server_api/authorizing-users/"},javascriptQuickStart:{path:"/docs/javascript_quick_start"},triggeringClientEvents:{path:"/docs/client_api_guide/client_events#trigger-events"},encryptedChannelSupport:{fullUrl:"https://github.com/pusher/pusher-js/tree/cc491015371a4bde5743d1c87a0fbac0feb53195#encrypted-channel-support"}}};var c,u,h=function(e){const t=l.urls[e];if(!t)return"";let n;return t.fullUrl?n=t.fullUrl:t.path&&(n=l.baseUrl+t.path),n?`See: ${n}`:""};(u=c||(c={})).UserAuthentication="user-authentication",u.ChannelAuthorization="channel-authorization";class d extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}class m extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}class p extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}class f extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}class g extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}class y extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}class v extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}class x extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}class b extends Error{constructor(e,t){super(t),this.status=e,Object.setPrototypeOf(this,new.target.prototype)}}var w=function(e,t,n,s,i){const r=ht.createXHR();for(var a in r.open("POST",n.endpoint,!0),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.headers)r.setRequestHeader(a,n.headers[a]);if(null!=n.headersProvider){let e=n.headersProvider();for(var a in e)r.setRequestHeader(a,e[a])}return r.onreadystatechange=function(){if(4===r.readyState)if(200===r.status){let t,n=!1;try{t=JSON.parse(r.responseText),n=!0}catch(e){i(new b(200,`JSON returned from ${s.toString()} endpoint was invalid, yet status code was 200. Data was: ${r.responseText}`),null)}n&&i(null,t)}else{let e="";switch(s){case c.UserAuthentication:e=h("authenticationEndpoint");break;case c.ChannelAuthorization:e=`Clients must be authorized to join private or presence channels. ${h("authorizationEndpoint")}`}i(new b(r.status,`Unable to retrieve auth string from ${s.toString()} endpoint - received status: ${r.status} from ${n.endpoint}. ${e}`),null)}},r.send(t),r},j=String.fromCharCode,k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",N=function(e){var t=e.charCodeAt(0);return t<128?e:t<2048?j(192|t>>>6)+j(128|63&t):j(224|t>>>12&15)+j(128|t>>>6&63)+j(128|63&t)},S=function(e){return e.replace(/[^\x00-\x7F]/g,N)},C=function(e){var t=[0,2,1][e.length%3],n=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0);return[k.charAt(n>>>18),k.charAt(n>>>12&63),t>=2?"=":k.charAt(n>>>6&63),t>=1?"=":k.charAt(63&n)].join("")},P=window.btoa||function(e){return e.replace(/[\s\S]{1,3}/g,C)},E=class{constructor(e,t,n,s){this.clear=t,this.timer=e(()=>{this.timer&&(this.timer=s(this.timer))},n)}isRunning(){return null!==this.timer}ensureAborted(){this.timer&&(this.clear(this.timer),this.timer=null)}};function T(e){window.clearTimeout(e)}function L(e){window.clearInterval(e)}class M extends E{constructor(e,t){super(setTimeout,T,e,function(e){return t(),null})}}class I extends E{constructor(e,t){super(setInterval,L,e,function(e){return t(),e})}}var _={now:()=>Date.now?Date.now():(new Date).valueOf(),defer:e=>new M(0,e),method(e,...t){var n=Array.prototype.slice.call(arguments,1);return function(t){return t[e].apply(t,n.concat(arguments))}}},D=_;function A(e,...t){for(var n=0;n<t.length;n++){var s=t[n];for(var i in s)s[i]&&s[i].constructor&&s[i].constructor===Object?e[i]=A(e[i]||{},s[i]):e[i]=s[i]}return e}function O(){for(var e=["Pusher"],t=0;t<arguments.length;t++)"string"==typeof arguments[t]?e.push(arguments[t]):e.push(Y(arguments[t]));return e.join(" : ")}function R(e,t){var n=Array.prototype.indexOf;if(null===e)return-1;if(n&&e.indexOf===n)return e.indexOf(t);for(var s=0,i=e.length;s<i;s++)if(e[s]===t)return s;return-1}function F(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(e[n],n,e)}function B(e){var t=[];return F(e,function(e,n){t.push(n)}),t}function z(e,t,n){for(var s=0;s<e.length;s++)t.call(n||window,e[s],s,e)}function W(e,t){for(var n=[],s=0;s<e.length;s++)n.push(t(e[s],s,e,n));return n}function U(e,t){t=t||function(e){return!!e};for(var n=[],s=0;s<e.length;s++)t(e[s],s,e,n)&&n.push(e[s]);return n}function V(e,t){var n={};return F(e,function(s,i){(t&&t(s,i,e,n)||Boolean(s))&&(n[i]=s)}),n}function $(e,t){for(var n=0;n<e.length;n++)if(t(e[n],n,e))return!0;return!1}function H(e){return t=function(e){return"object"==typeof e&&(e=Y(e)),encodeURIComponent((t=e.toString(),P(S(t))));var t},n={},F(e,function(e,s){n[s]=t(e)}),n;var t,n}function q(e){var t,n,s=V(e,function(e){return void 0!==e});return W((t=H(s),n=[],F(t,function(e,t){n.push([t,e])}),n),D.method("join","=")).join("&")}function Y(e){try{return JSON.stringify(e)}catch(s){return JSON.stringify((t=[],n=[],function e(s,i){var r,a,o;switch(typeof s){case"object":if(!s)return null;for(r=0;r<t.length;r+=1)if(t[r]===s)return{$ref:n[r]};if(t.push(s),n.push(i),"[object Array]"===Object.prototype.toString.apply(s))for(o=[],r=0;r<s.length;r+=1)o[r]=e(s[r],i+"["+r+"]");else for(a in o={},s)Object.prototype.hasOwnProperty.call(s,a)&&(o[a]=e(s[a],i+"["+JSON.stringify(a)+"]"));return o;case"number":case"string":case"boolean":return s}}(e,"$")))}var t,n}var G=new class{constructor(){this.globalLog=e=>{window.console&&window.console.log&&window.console.log(e)}}debug(...e){this.log(this.globalLog,e)}warn(...e){this.log(this.globalLogWarn,e)}error(...e){this.log(this.globalLogError,e)}globalLogWarn(e){window.console&&window.console.warn?window.console.warn(e):this.globalLog(e)}globalLogError(e){window.console&&window.console.error?window.console.error(e):this.globalLogWarn(e)}log(e,...t){var n=O.apply(this,arguments);Mt.log?Mt.log(n):Mt.logToConsole&&e.bind(this)(n)}},Q=function(e,t,n,s,i){void 0===n.headers&&null==n.headersProvider||G.warn(`To send headers with the ${s.toString()} request, you must use AJAX, rather than JSONP.`);var r=e.nextAuthCallbackID.toString();e.nextAuthCallbackID++;var a=e.getDocument(),o=a.createElement("script");e.auth_callbacks[r]=function(e){i(null,e)};var l="Pusher.auth_callbacks['"+r+"']";o.src=n.endpoint+"?callback="+encodeURIComponent(l)+"&"+t;var c=a.getElementsByTagName("head")[0]||a.documentElement;c.insertBefore(o,c.firstChild)};class J{constructor(e){this.src=e}send(e){var t=this,n="Error loading "+t.src;t.script=document.createElement("script"),t.script.id=e.id,t.script.src=t.src,t.script.type="text/javascript",t.script.charset="UTF-8",t.script.addEventListener?(t.script.onerror=function(){e.callback(n)},t.script.onload=function(){e.callback(null)}):t.script.onreadystatechange=function(){"loaded"!==t.script.readyState&&"complete"!==t.script.readyState||e.callback(null)},void 0===t.script.async&&document.attachEvent&&/opera/i.test(navigator.userAgent)?(t.errorScript=document.createElement("script"),t.errorScript.id=e.id+"_error",t.errorScript.text=e.name+"('"+n+"');",t.script.async=t.errorScript.async=!1):t.script.async=!0;var s=document.getElementsByTagName("head")[0];s.insertBefore(t.script,s.firstChild),t.errorScript&&s.insertBefore(t.errorScript,t.script.nextSibling)}cleanup(){this.script&&(this.script.onload=this.script.onerror=null,this.script.onreadystatechange=null),this.script&&this.script.parentNode&&this.script.parentNode.removeChild(this.script),this.errorScript&&this.errorScript.parentNode&&this.errorScript.parentNode.removeChild(this.errorScript),this.script=null,this.errorScript=null}}class X{constructor(e,t){this.url=e,this.data=t}send(e){if(!this.request){var t=q(this.data),n=this.url+"/"+e.number+"?"+t;this.request=ht.createScriptRequest(n),this.request.send(e)}}cleanup(){this.request&&this.request.cleanup()}}var K={name:"jsonp",getAgent:function(e,t){return function(n,s){var r="http"+(t?"s":"")+"://"+(e.host||e.options.host)+e.options.path,a=ht.createJSONPRequest(r,n),o=ht.ScriptReceivers.create(function(t,n){i.remove(o),a.cleanup(),n&&n.host&&(e.host=n.host),s&&s(t,n)});a.send(o)}}};function Z(e,t,n){return e+(t.useTLS?"s":"")+"://"+(t.useTLS?t.hostTLS:t.hostNonTLS)+n}function ee(e,t){return"/app/"+e+"?protocol="+r.PROTOCOL+"&client=js&version="+r.VERSION+(t?"&"+t:"")}var te={getInitial:function(e,t){return Z("ws",t,(t.httpPath||"")+ee(e,"flash=false"))}},ne={getInitial:function(e,t){return Z("http",t,(t.httpPath||"/pusher")+ee(e))}},se={getInitial:function(e,t){return Z("http",t,t.httpPath||"/pusher")},getPath:function(e,t){return ee(e)}};class ie{constructor(){this._callbacks={}}get(e){return this._callbacks[re(e)]}add(e,t,n){var s=re(e);this._callbacks[s]=this._callbacks[s]||[],this._callbacks[s].push({fn:t,context:n})}remove(e,t,n){if(e||t||n){var s=e?[re(e)]:B(this._callbacks);t||n?this.removeCallback(s,t,n):this.removeAllCallbacks(s)}else this._callbacks={}}removeCallback(e,t,n){z(e,function(e){this._callbacks[e]=U(this._callbacks[e]||[],function(e){return t&&t!==e.fn||n&&n!==e.context}),0===this._callbacks[e].length&&delete this._callbacks[e]},this)}removeAllCallbacks(e){z(e,function(e){delete this._callbacks[e]},this)}}function re(e){return"_"+e}class ae{constructor(e){this.callbacks=new ie,this.global_callbacks=[],this.failThrough=e}bind(e,t,n){return this.callbacks.add(e,t,n),this}bind_global(e){return this.global_callbacks.push(e),this}unbind(e,t,n){return this.callbacks.remove(e,t,n),this}unbind_global(e){return e?(this.global_callbacks=U(this.global_callbacks||[],t=>t!==e),this):(this.global_callbacks=[],this)}unbind_all(){return this.unbind(),this.unbind_global(),this}emit(e,t,n){for(var s=0;s<this.global_callbacks.length;s++)this.global_callbacks[s](e,t);var i=this.callbacks.get(e),r=[];if(n?r.push(t,n):t&&r.push(t),i&&i.length>0)for(s=0;s<i.length;s++)i[s].fn.apply(i[s].context||window,r);else this.failThrough&&this.failThrough(e,t);return this}}class oe extends ae{constructor(e,t,n,s,i){super(),this.initialize=ht.transportConnectionInitializer,this.hooks=e,this.name=t,this.priority=n,this.key=s,this.options=i,this.state="new",this.timeline=i.timeline,this.activityTimeout=i.activityTimeout,this.id=this.timeline.generateUniqueID()}handlesActivityChecks(){return Boolean(this.hooks.handlesActivityChecks)}supportsPing(){return Boolean(this.hooks.supportsPing)}connect(){if(this.socket||"initialized"!==this.state)return!1;var e=this.hooks.urls.getInitial(this.key,this.options);try{this.socket=this.hooks.getSocket(e,this.options)}catch(t){return D.defer(()=>{this.onError(t),this.changeState("closed")}),!1}return this.bindListeners(),G.debug("Connecting",{transport:this.name,url:e}),this.changeState("connecting"),!0}close(){return!!this.socket&&(this.socket.close(),!0)}send(e){return"open"===this.state&&(D.defer(()=>{this.socket&&this.socket.send(e)}),!0)}ping(){"open"===this.state&&this.supportsPing()&&this.socket.ping()}onOpen(){this.hooks.beforeOpen&&this.hooks.beforeOpen(this.socket,this.hooks.urls.getPath(this.key,this.options)),this.changeState("open"),this.socket.onopen=void 0}onError(e){this.emit("error",{type:"WebSocketError",error:e}),this.timeline.error(this.buildTimelineMessage({error:e.toString()}))}onClose(e){e?this.changeState("closed",{code:e.code,reason:e.reason,wasClean:e.wasClean}):this.changeState("closed"),this.unbindListeners(),this.socket=void 0}onMessage(e){this.emit("message",e)}onActivity(){this.emit("activity")}bindListeners(){this.socket.onopen=()=>{this.onOpen()},this.socket.onerror=e=>{this.onError(e)},this.socket.onclose=e=>{this.onClose(e)},this.socket.onmessage=e=>{this.onMessage(e)},this.supportsPing()&&(this.socket.onactivity=()=>{this.onActivity()})}unbindListeners(){this.socket&&(this.socket.onopen=void 0,this.socket.onerror=void 0,this.socket.onclose=void 0,this.socket.onmessage=void 0,this.supportsPing()&&(this.socket.onactivity=void 0))}changeState(e,t){this.state=e,this.timeline.info(this.buildTimelineMessage({state:e,params:t})),this.emit(e,t)}buildTimelineMessage(e){return A({cid:this.id},e)}}class le{constructor(e){this.hooks=e}isSupported(e){return this.hooks.isSupported(e)}createConnection(e,t,n,s){return new oe(this.hooks,e,t,n,s)}}var ce=new le({urls:te,handlesActivityChecks:!1,supportsPing:!1,isInitialized:function(){return Boolean(ht.getWebSocketAPI())},isSupported:function(){return Boolean(ht.getWebSocketAPI())},getSocket:function(e){return ht.createWebSocket(e)}}),ue={urls:ne,handlesActivityChecks:!1,supportsPing:!0,isInitialized:function(){return!0}},he=A({getSocket:function(e){return ht.HTTPFactory.createStreamingSocket(e)}},ue),de=A({getSocket:function(e){return ht.HTTPFactory.createPollingSocket(e)}},ue),me={isSupported:function(){return ht.isXHRSupported()}},pe={ws:ce,xhr_streaming:new le(A({},he,me)),xhr_polling:new le(A({},de,me))},fe=new le({file:"sockjs",urls:se,handlesActivityChecks:!0,supportsPing:!1,isSupported:function(){return!0},isInitialized:function(){return void 0!==window.SockJS},getSocket:function(e,t){return new window.SockJS(e,null,{js_path:o.getPath("sockjs",{useTLS:t.useTLS}),ignore_null_origin:t.ignoreNullOrigin})},beforeOpen:function(e,t){e.send(JSON.stringify({path:t}))}}),ge={isSupported:function(e){return ht.isXDRSupported(e.useTLS)}},ye=new le(A({},he,ge)),ve=new le(A({},de,ge));pe.xdr_streaming=ye,pe.xdr_polling=ve,pe.sockjs=fe;var xe=pe,be=new class extends ae{constructor(){super();var e=this;void 0!==window.addEventListener&&(window.addEventListener("online",function(){e.emit("online")},!1),window.addEventListener("offline",function(){e.emit("offline")},!1))}isOnline(){return void 0===window.navigator.onLine||window.navigator.onLine}};class we{constructor(e,t,n){this.manager=e,this.transport=t,this.minPingDelay=n.minPingDelay,this.maxPingDelay=n.maxPingDelay,this.pingDelay=void 0}createConnection(e,t,n,s){s=A({},s,{activityTimeout:this.pingDelay});var i=this.transport.createConnection(e,t,n,s),r=null,a=function(){i.unbind("open",a),i.bind("closed",o),r=D.now()},o=e=>{if(i.unbind("closed",o),1002===e.code||1003===e.code)this.manager.reportDeath();else if(!e.wasClean&&r){var t=D.now()-r;t<2*this.maxPingDelay&&(this.manager.reportDeath(),this.pingDelay=Math.max(t/2,this.minPingDelay))}};return i.bind("open",a),i}isSupported(e){return this.manager.isAlive()&&this.transport.isSupported(e)}}const je={decodeMessage:function(e){try{var t=JSON.parse(e.data),n=t.data;if("string"==typeof n)try{n=JSON.parse(t.data)}catch(i){}var s={event:t.event,channel:t.channel,data:n};return t.user_id&&(s.user_id=t.user_id),s}catch(i){throw{type:"MessageParseError",error:i,data:e.data}}},encodeMessage:function(e){return JSON.stringify(e)},processHandshake:function(e){var t=je.decodeMessage(e);if("pusher:connection_established"===t.event){if(!t.data.activity_timeout)throw"No activity timeout specified in handshake";return{action:"connected",id:t.data.socket_id,activityTimeout:1e3*t.data.activity_timeout}}if("pusher:error"===t.event)return{action:this.getCloseAction(t.data),error:this.getCloseError(t.data)};throw"Invalid handshake"},getCloseAction:function(e){return e.code<4e3?e.code>=1002&&e.code<=1004?"backoff":null:4e3===e.code?"tls_only":e.code<4100?"refused":e.code<4200?"backoff":e.code<4300?"retry":"refused"},getCloseError:function(e){return 1e3!==e.code&&1001!==e.code?{type:"PusherError",data:{code:e.code,message:e.reason||e.message}}:null}};var ke=je;class Ne extends ae{constructor(e,t){super(),this.id=e,this.transport=t,this.activityTimeout=t.activityTimeout,this.bindListeners()}handlesActivityChecks(){return this.transport.handlesActivityChecks()}send(e){return this.transport.send(e)}send_event(e,t,n){var s={event:e,data:t};return n&&(s.channel=n),G.debug("Event sent",s),this.send(ke.encodeMessage(s))}ping(){this.transport.supportsPing()?this.transport.ping():this.send_event("pusher:ping",{})}close(){this.transport.close()}bindListeners(){var e={message:e=>{var t;try{t=ke.decodeMessage(e)}catch(n){this.emit("error",{type:"MessageParseError",error:n,data:e.data})}if(void 0!==t){switch(G.debug("Event recd",t),t.event){case"pusher:error":this.emit("error",{type:"PusherError",data:t.data});break;case"pusher:ping":this.emit("ping");break;case"pusher:pong":this.emit("pong")}this.emit("message",t)}},activity:()=>{this.emit("activity")},error:e=>{this.emit("error",e)},closed:e=>{t(),e&&e.code&&this.handleCloseEvent(e),this.transport=null,this.emit("closed")}},t=()=>{F(e,(e,t)=>{this.transport.unbind(t,e)})};F(e,(e,t)=>{this.transport.bind(t,e)})}handleCloseEvent(e){var t=ke.getCloseAction(e),n=ke.getCloseError(e);n&&this.emit("error",n),t&&this.emit(t,{action:t,error:n})}}class Se{constructor(e,t){this.transport=e,this.callback=t,this.bindListeners()}close(){this.unbindListeners(),this.transport.close()}bindListeners(){this.onMessage=e=>{var t;this.unbindListeners();try{t=ke.processHandshake(e)}catch(n){return this.finish("error",{error:n}),void this.transport.close()}"connected"===t.action?this.finish("connected",{connection:new Ne(t.id,this.transport),activityTimeout:t.activityTimeout}):(this.finish(t.action,{error:t.error}),this.transport.close())},this.onClosed=e=>{this.unbindListeners();var t=ke.getCloseAction(e)||"backoff",n=ke.getCloseError(e);this.finish(t,{error:n})},this.transport.bind("message",this.onMessage),this.transport.bind("closed",this.onClosed)}unbindListeners(){this.transport.unbind("message",this.onMessage),this.transport.unbind("closed",this.onClosed)}finish(e,t){this.callback(A({transport:this.transport,action:e},t))}}class Ce{constructor(e,t){this.timeline=e,this.options=t||{}}send(e,t){this.timeline.isEmpty()||this.timeline.send(ht.TimelineTransport.getAgent(this,e),t)}}class Pe extends ae{constructor(e,t){super(function(t,n){G.debug("No callbacks on "+e+" for "+t)}),this.name=e,this.pusher=t,this.subscribed=!1,this.subscriptionPending=!1,this.subscriptionCancelled=!1}authorize(e,t){return t(null,{auth:""})}trigger(e,t){if(0!==e.indexOf("client-"))throw new d("Event '"+e+"' does not start with 'client-'");if(!this.subscribed){var n=h("triggeringClientEvents");G.warn(`Client event triggered before channel 'subscription_succeeded' event . ${n}`)}return this.pusher.send_event(e,t,this.name)}disconnect(){this.subscribed=!1,this.subscriptionPending=!1}handleEvent(e){var t=e.event,n=e.data;"pusher_internal:subscription_succeeded"===t?this.handleSubscriptionSucceededEvent(e):"pusher_internal:subscription_count"===t?this.handleSubscriptionCountEvent(e):0!==t.indexOf("pusher_internal:")&&this.emit(t,n,{})}handleSubscriptionSucceededEvent(e){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):this.emit("pusher:subscription_succeeded",e.data)}handleSubscriptionCountEvent(e){e.data.subscription_count&&(this.subscriptionCount=e.data.subscription_count),this.emit("pusher:subscription_count",e.data)}subscribe(){this.subscribed||(this.subscriptionPending=!0,this.subscriptionCancelled=!1,this.authorize(this.pusher.connection.socket_id,(e,t)=>{e?(this.subscriptionPending=!1,G.error(e.toString()),this.emit("pusher:subscription_error",Object.assign({},{type:"AuthError",error:e.message},e instanceof b?{status:e.status}:{}))):this.pusher.send_event("pusher:subscribe",{auth:t.auth,channel_data:t.channel_data,channel:this.name})}))}unsubscribe(){this.subscribed=!1,this.pusher.send_event("pusher:unsubscribe",{channel:this.name})}cancelSubscription(){this.subscriptionCancelled=!0}reinstateSubscription(){this.subscriptionCancelled=!1}}class Ee extends Pe{authorize(e,t){return this.pusher.config.channelAuthorizer({channelName:this.name,socketId:e},t)}}class Te{constructor(){this.reset()}get(e){return Object.prototype.hasOwnProperty.call(this.members,e)?{id:e,info:this.members[e]}:null}each(e){F(this.members,(t,n)=>{e(this.get(n))})}setMyID(e){this.myID=e}onSubscription(e){this.members=e.presence.hash,this.count=e.presence.count,this.me=this.get(this.myID)}addMember(e){return null===this.get(e.user_id)&&this.count++,this.members[e.user_id]=e.user_info,this.get(e.user_id)}removeMember(e){var t=this.get(e.user_id);return t&&(delete this.members[e.user_id],this.count--),t}reset(){this.members={},this.count=0,this.myID=null,this.me=null}}var Le=function(e,t,n,s){return new(n||(n=Promise))(function(i,r){function a(e){try{l(s.next(e))}catch(t){r(t)}}function o(e){try{l(s.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(a,o)}l((s=s.apply(e,t||[])).next())})};class Me extends Ee{constructor(e,t){super(e,t),this.members=new Te}authorize(e,t){super.authorize(e,(e,n)=>Le(this,void 0,void 0,function*(){if(!e)if(null!=n.channel_data){var s=JSON.parse(n.channel_data);this.members.setMyID(s.user_id)}else{if(yield this.pusher.user.signinDonePromise,null==this.pusher.user.user_data){let e=h("authorizationEndpoint");return G.error(`Invalid auth response for channel '${this.name}', expected 'channel_data' field. ${e}, or the user should be signed in.`),void t("Invalid auth response")}this.members.setMyID(this.pusher.user.user_data.id)}t(e,n)}))}handleEvent(e){var t=e.event;if(0===t.indexOf("pusher_internal:"))this.handleInternalEvent(e);else{var n=e.data,s={};e.user_id&&(s.user_id=e.user_id),this.emit(t,n,s)}}handleInternalEvent(e){var t=e.event,n=e.data;switch(t){case"pusher_internal:subscription_succeeded":this.handleSubscriptionSucceededEvent(e);break;case"pusher_internal:subscription_count":this.handleSubscriptionCountEvent(e);break;case"pusher_internal:member_added":var s=this.members.addMember(n);this.emit("pusher:member_added",s);break;case"pusher_internal:member_removed":var i=this.members.removeMember(n);i&&this.emit("pusher:member_removed",i)}}handleSubscriptionSucceededEvent(e){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):(this.members.onSubscription(e.data),this.emit("pusher:subscription_succeeded",this.members))}disconnect(){this.members.reset(),super.disconnect()}}var Ie=n(1),_e=n(0);class De extends Ee{constructor(e,t,n){super(e,t),this.key=null,this.nacl=n}authorize(e,t){super.authorize(e,(e,n)=>{if(e)return void t(e,n);let s=n.shared_secret;s?(this.key=Object(_e.decode)(s),delete n.shared_secret,t(null,n)):t(new Error(`No shared_secret key in auth payload for encrypted channel: ${this.name}`),null)})}trigger(e,t){throw new y("Client events are not currently supported for encrypted channels")}handleEvent(e){var t=e.event,n=e.data;0!==t.indexOf("pusher_internal:")&&0!==t.indexOf("pusher:")?this.handleEncryptedEvent(t,n):super.handleEvent(e)}handleEncryptedEvent(e,t){if(!this.key)return void G.debug("Received encrypted event before key has been retrieved from the authEndpoint");if(!t.ciphertext||!t.nonce)return void G.error("Unexpected format for encrypted event, expected object with `ciphertext` and `nonce` fields, got: "+t);let n=Object(_e.decode)(t.ciphertext);if(n.length<this.nacl.secretbox.overheadLength)return void G.error(`Expected encrypted event ciphertext length to be ${this.nacl.secretbox.overheadLength}, got: ${n.length}`);let s=Object(_e.decode)(t.nonce);if(s.length<this.nacl.secretbox.nonceLength)return void G.error(`Expected encrypted event nonce length to be ${this.nacl.secretbox.nonceLength}, got: ${s.length}`);let i=this.nacl.secretbox.open(n,s,this.key);if(null===i)return G.debug("Failed to decrypt an event, probably because it was encrypted with a different key. Fetching a new key from the authEndpoint..."),void this.authorize(this.pusher.connection.socket_id,(t,r)=>{t?G.error(`Failed to make a request to the authEndpoint: ${r}. Unable to fetch new key, so dropping encrypted event`):(i=this.nacl.secretbox.open(n,s,this.key),null!==i?this.emit(e,this.getDataToEmit(i)):G.error("Failed to decrypt event with new key. Dropping encrypted event"))});this.emit(e,this.getDataToEmit(i))}getDataToEmit(e){let t=Object(Ie.decode)(e);try{return JSON.parse(t)}catch(n){return t}}}class Ae extends ae{constructor(e,t){super(),this.state="initialized",this.connection=null,this.key=e,this.options=t,this.timeline=this.options.timeline,this.usingTLS=this.options.useTLS,this.errorCallbacks=this.buildErrorCallbacks(),this.connectionCallbacks=this.buildConnectionCallbacks(this.errorCallbacks),this.handshakeCallbacks=this.buildHandshakeCallbacks(this.errorCallbacks);var n=ht.getNetwork();n.bind("online",()=>{this.timeline.info({netinfo:"online"}),"connecting"!==this.state&&"unavailable"!==this.state||this.retryIn(0)}),n.bind("offline",()=>{this.timeline.info({netinfo:"offline"}),this.connection&&this.sendActivityCheck()}),this.updateStrategy()}connect(){this.connection||this.runner||(this.strategy.isSupported()?(this.updateState("connecting"),this.startConnecting(),this.setUnavailableTimer()):this.updateState("failed"))}send(e){return!!this.connection&&this.connection.send(e)}send_event(e,t,n){return!!this.connection&&this.connection.send_event(e,t,n)}disconnect(){this.disconnectInternally(),this.updateState("disconnected")}isUsingTLS(){return this.usingTLS}startConnecting(){var e=(t,n)=>{t?this.runner=this.strategy.connect(0,e):"error"===n.action?(this.emit("error",{type:"HandshakeError",error:n.error}),this.timeline.error({handshakeError:n.error})):(this.abortConnecting(),this.handshakeCallbacks[n.action](n))};this.runner=this.strategy.connect(0,e)}abortConnecting(){this.runner&&(this.runner.abort(),this.runner=null)}disconnectInternally(){this.abortConnecting(),this.clearRetryTimer(),this.clearUnavailableTimer(),this.connection&&this.abandonConnection().close()}updateStrategy(){this.strategy=this.options.getStrategy({key:this.key,timeline:this.timeline,useTLS:this.usingTLS})}retryIn(e){this.timeline.info({action:"retry",delay:e}),e>0&&this.emit("connecting_in",Math.round(e/1e3)),this.retryTimer=new M(e||0,()=>{this.disconnectInternally(),this.connect()})}clearRetryTimer(){this.retryTimer&&(this.retryTimer.ensureAborted(),this.retryTimer=null)}setUnavailableTimer(){this.unavailableTimer=new M(this.options.unavailableTimeout,()=>{this.updateState("unavailable")})}clearUnavailableTimer(){this.unavailableTimer&&this.unavailableTimer.ensureAborted()}sendActivityCheck(){this.stopActivityCheck(),this.connection.ping(),this.activityTimer=new M(this.options.pongTimeout,()=>{this.timeline.error({pong_timed_out:this.options.pongTimeout}),this.retryIn(0)})}resetActivityCheck(){this.stopActivityCheck(),this.connection&&!this.connection.handlesActivityChecks()&&(this.activityTimer=new M(this.activityTimeout,()=>{this.sendActivityCheck()}))}stopActivityCheck(){this.activityTimer&&this.activityTimer.ensureAborted()}buildConnectionCallbacks(e){return A({},e,{message:e=>{this.resetActivityCheck(),this.emit("message",e)},ping:()=>{this.send_event("pusher:pong",{})},activity:()=>{this.resetActivityCheck()},error:e=>{this.emit("error",e)},closed:()=>{this.abandonConnection(),this.shouldRetry()&&this.retryIn(1e3)}})}buildHandshakeCallbacks(e){return A({},e,{connected:e=>{this.activityTimeout=Math.min(this.options.activityTimeout,e.activityTimeout,e.connection.activityTimeout||1/0),this.clearUnavailableTimer(),this.setConnection(e.connection),this.socket_id=this.connection.id,this.updateState("connected",{socket_id:this.socket_id})}})}buildErrorCallbacks(){let e=e=>t=>{t.error&&this.emit("error",{type:"WebSocketError",error:t.error}),e(t)};return{tls_only:e(()=>{this.usingTLS=!0,this.updateStrategy(),this.retryIn(0)}),refused:e(()=>{this.disconnect()}),backoff:e(()=>{this.retryIn(1e3)}),retry:e(()=>{this.retryIn(0)})}}setConnection(e){for(var t in this.connection=e,this.connectionCallbacks)this.connection.bind(t,this.connectionCallbacks[t]);this.resetActivityCheck()}abandonConnection(){if(this.connection){for(var e in this.stopActivityCheck(),this.connectionCallbacks)this.connection.unbind(e,this.connectionCallbacks[e]);var t=this.connection;return this.connection=null,t}}updateState(e,t){var n=this.state;if(this.state=e,n!==e){var s=e;"connected"===s&&(s+=" with new socket ID "+t.socket_id),G.debug("State changed",n+" -> "+s),this.timeline.info({state:e,params:t}),this.emit("state_change",{previous:n,current:e}),this.emit(e,t)}}shouldRetry(){return"connecting"===this.state||"connected"===this.state}}class Oe{constructor(){this.channels={}}add(e,t){return this.channels[e]||(this.channels[e]=function(e,t){if(0===e.indexOf("private-encrypted-")){if(t.config.nacl)return Re.createEncryptedChannel(e,t,t.config.nacl);let n="Tried to subscribe to a private-encrypted- channel but no nacl implementation available",s=h("encryptedChannelSupport");throw new y(`${n}. ${s}`)}if(0===e.indexOf("private-"))return Re.createPrivateChannel(e,t);if(0===e.indexOf("presence-"))return Re.createPresenceChannel(e,t);if(0===e.indexOf("#"))throw new m('Cannot create a channel with name "'+e+'".');return Re.createChannel(e,t)}(e,t)),this.channels[e]}all(){return e=this.channels,t=[],F(e,function(e){t.push(e)}),t;var e,t}find(e){return this.channels[e]}remove(e){var t=this.channels[e];return delete this.channels[e],t}disconnect(){F(this.channels,function(e){e.disconnect()})}}var Re={createChannels:()=>new Oe,createConnectionManager:(e,t)=>new Ae(e,t),createChannel:(e,t)=>new Pe(e,t),createPrivateChannel:(e,t)=>new Ee(e,t),createPresenceChannel:(e,t)=>new Me(e,t),createEncryptedChannel:(e,t,n)=>new De(e,t,n),createTimelineSender:(e,t)=>new Ce(e,t),createHandshake:(e,t)=>new Se(e,t),createAssistantToTheTransportManager:(e,t,n)=>new we(e,t,n)};class Fe{constructor(e){this.options=e||{},this.livesLeft=this.options.lives||1/0}getAssistant(e){return Re.createAssistantToTheTransportManager(this,e,{minPingDelay:this.options.minPingDelay,maxPingDelay:this.options.maxPingDelay})}isAlive(){return this.livesLeft>0}reportDeath(){this.livesLeft-=1}}class Be{constructor(e,t){this.strategies=e,this.loop=Boolean(t.loop),this.failFast=Boolean(t.failFast),this.timeout=t.timeout,this.timeoutLimit=t.timeoutLimit}isSupported(){return $(this.strategies,D.method("isSupported"))}connect(e,t){var n=this.strategies,s=0,i=this.timeout,r=null,a=(o,l)=>{l?t(null,l):(s+=1,this.loop&&(s%=n.length),s<n.length?(i&&(i*=2,this.timeoutLimit&&(i=Math.min(i,this.timeoutLimit))),r=this.tryStrategy(n[s],e,{timeout:i,failFast:this.failFast},a)):t(!0))};return r=this.tryStrategy(n[s],e,{timeout:i,failFast:this.failFast},a),{abort:function(){r.abort()},forceMinPriority:function(t){e=t,r&&r.forceMinPriority(t)}}}tryStrategy(e,t,n,s){var i=null,r=null;return n.timeout>0&&(i=new M(n.timeout,function(){r.abort(),s(!0)})),r=e.connect(t,function(e,t){e&&i&&i.isRunning()&&!n.failFast||(i&&i.ensureAborted(),s(e,t))}),{abort:function(){i&&i.ensureAborted(),r.abort()},forceMinPriority:function(e){r.forceMinPriority(e)}}}}class ze{constructor(e){this.strategies=e}isSupported(){return $(this.strategies,D.method("isSupported"))}connect(e,t){return function(e,t,n){var s=W(e,function(e,s,i,r){return e.connect(t,n(s,r))});return{abort:function(){z(s,We)},forceMinPriority:function(e){z(s,function(t){t.forceMinPriority(e)})}}}(this.strategies,e,function(e,n){return function(s,i){n[e].error=s,s?function(e){return function(e,t){for(var n=0;n<e.length;n++)if(!t(e[n],n,e))return!1;return!0}(e,function(e){return Boolean(e.error)})}(n)&&t(!0):(z(n,function(e){e.forceMinPriority(i.transport.priority)}),t(null,i))}})}}function We(e){e.error||e.aborted||(e.abort(),e.aborted=!0)}class Ue{constructor(e,t,n){this.strategy=e,this.transports=t,this.ttl=n.ttl||18e5,this.usingTLS=n.useTLS,this.timeline=n.timeline}isSupported(){return this.strategy.isSupported()}connect(e,t){var n=this.usingTLS,s=function(e){var t=ht.getLocalStorage();if(t)try{var n=t[Ve(e)];if(n)return JSON.parse(n)}catch(s){$e(e)}return null}(n),i=s&&s.cacheSkipCount?s.cacheSkipCount:0,r=[this.strategy];if(s&&s.timestamp+this.ttl>=D.now()){var a=this.transports[s.transport];a&&(["ws","wss"].includes(s.transport)||i>3?(this.timeline.info({cached:!0,transport:s.transport,latency:s.latency}),r.push(new Be([a],{timeout:2*s.latency+1e3,failFast:!0}))):i++)}var o=D.now(),l=r.pop().connect(e,function s(a,c){a?($e(n),r.length>0?(o=D.now(),l=r.pop().connect(e,s)):t(a)):(function(e,t,n,s){var i=ht.getLocalStorage();if(i)try{i[Ve(e)]=Y({timestamp:D.now(),transport:t,latency:n,cacheSkipCount:s})}catch(r){}}(n,c.transport.name,D.now()-o,i),t(null,c))});return{abort:function(){l.abort()},forceMinPriority:function(t){e=t,l&&l.forceMinPriority(t)}}}}function Ve(e){return"pusherTransport"+(e?"TLS":"NonTLS")}function $e(e){var t=ht.getLocalStorage();if(t)try{delete t[Ve(e)]}catch(n){}}class He{constructor(e,{delay:t}){this.strategy=e,this.options={delay:t}}isSupported(){return this.strategy.isSupported()}connect(e,t){var n,s=this.strategy,i=new M(this.options.delay,function(){n=s.connect(e,t)});return{abort:function(){i.ensureAborted(),n&&n.abort()},forceMinPriority:function(t){e=t,n&&n.forceMinPriority(t)}}}}class qe{constructor(e,t,n){this.test=e,this.trueBranch=t,this.falseBranch=n}isSupported(){return(this.test()?this.trueBranch:this.falseBranch).isSupported()}connect(e,t){return(this.test()?this.trueBranch:this.falseBranch).connect(e,t)}}class Ye{constructor(e){this.strategy=e}isSupported(){return this.strategy.isSupported()}connect(e,t){var n=this.strategy.connect(e,function(e,s){s&&n.abort(),t(e,s)});return n}}function Ge(e){return function(){return e.isSupported()}}var Qe,Je,Xe=function(e,t,n){var s={};function i(t,i,r,a,o){var l=n(e,t,i,r,a,o);return s[t]=l,l}var r,a=Object.assign({},t,{hostNonTLS:e.wsHost+":"+e.wsPort,hostTLS:e.wsHost+":"+e.wssPort,httpPath:e.wsPath}),o=Object.assign({},a,{useTLS:!0}),l=Object.assign({},t,{hostNonTLS:e.httpHost+":"+e.httpPort,hostTLS:e.httpHost+":"+e.httpsPort,httpPath:e.httpPath}),c={loop:!0,timeout:15e3,timeoutLimit:6e4},u=new Fe({minPingDelay:1e4,maxPingDelay:e.activityTimeout}),h=new Fe({lives:2,minPingDelay:1e4,maxPingDelay:e.activityTimeout}),d=i("ws","ws",3,a,u),m=i("wss","ws",3,o,u),p=i("sockjs","sockjs",1,l),f=i("xhr_streaming","xhr_streaming",1,l,h),g=i("xdr_streaming","xdr_streaming",1,l,h),y=i("xhr_polling","xhr_polling",1,l),v=i("xdr_polling","xdr_polling",1,l),x=new Be([d],c),b=new Be([m],c),w=new Be([p],c),j=new Be([new qe(Ge(f),f,g)],c),k=new Be([new qe(Ge(y),y,v)],c),N=new Be([new qe(Ge(j),new ze([j,new He(k,{delay:4e3})]),k)],c),S=new qe(Ge(N),N,w);return r=t.useTLS?new ze([x,new He(S,{delay:2e3})]):new ze([x,new He(b,{delay:2e3}),new He(S,{delay:5e3})]),new Ue(new Ye(new qe(Ge(d),r,S)),s,{ttl:18e5,timeline:t.timeline,useTLS:t.useTLS})},Ke={getRequest:function(e){var t=new window.XDomainRequest;return t.ontimeout=function(){e.emit("error",new p),e.close()},t.onerror=function(t){e.emit("error",t),e.close()},t.onprogress=function(){t.responseText&&t.responseText.length>0&&e.onChunk(200,t.responseText)},t.onload=function(){t.responseText&&t.responseText.length>0&&e.onChunk(200,t.responseText),e.emit("finished",200),e.close()},t},abortRequest:function(e){e.ontimeout=e.onerror=e.onprogress=e.onload=null,e.abort()}};class Ze extends ae{constructor(e,t,n){super(),this.hooks=e,this.method=t,this.url=n}start(e){this.position=0,this.xhr=this.hooks.getRequest(this),this.unloader=()=>{this.close()},ht.addUnloadListener(this.unloader),this.xhr.open(this.method,this.url,!0),this.xhr.setRequestHeader&&this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.send(e)}close(){this.unloader&&(ht.removeUnloadListener(this.unloader),this.unloader=null),this.xhr&&(this.hooks.abortRequest(this.xhr),this.xhr=null)}onChunk(e,t){for(;;){var n=this.advanceBuffer(t);if(!n)break;this.emit("chunk",{status:e,data:n})}this.isBufferTooLong(t)&&this.emit("buffer_too_long")}advanceBuffer(e){var t=e.slice(this.position),n=t.indexOf("\n");return-1!==n?(this.position+=n+1,t.slice(0,n)):null}isBufferTooLong(e){return this.position===e.length&&e.length>262144}}(Je=Qe||(Qe={}))[Je.CONNECTING=0]="CONNECTING",Je[Je.OPEN=1]="OPEN",Je[Je.CLOSED=3]="CLOSED";var et=Qe,tt=1;function nt(e){var t=-1===e.indexOf("?")?"?":"&";return e+t+"t="+ +new Date+"&n="+tt++}function st(e){return ht.randomInt(e)}var it,rt,at=class{constructor(e,t){this.hooks=e,this.session=st(1e3)+"/"+function(e){for(var t=[],n=0;n<e;n++)t.push(st(32).toString(32));return t.join("")}(8),this.location=function(e){var t=/([^\?]*)\/*(\??.*)/.exec(e);return{base:t[1],queryString:t[2]}}(t),this.readyState=et.CONNECTING,this.openStream()}send(e){return this.sendRaw(JSON.stringify([e]))}ping(){this.hooks.sendHeartbeat(this)}close(e,t){this.onClose(e,t,!0)}sendRaw(e){if(this.readyState!==et.OPEN)return!1;try{return ht.createSocketRequest("POST",nt((t=this.location,n=this.session,t.base+"/"+n+"/xhr_send"))).start(e),!0}catch(s){return!1}var t,n}reconnect(){this.closeStream(),this.openStream()}onClose(e,t,n){this.closeStream(),this.readyState=et.CLOSED,this.onclose&&this.onclose({code:e,reason:t,wasClean:n})}onChunk(e){var t;if(200===e.status)switch(this.readyState===et.OPEN&&this.onActivity(),e.data.slice(0,1)){case"o":t=JSON.parse(e.data.slice(1)||"{}"),this.onOpen(t);break;case"a":t=JSON.parse(e.data.slice(1)||"[]");for(var n=0;n<t.length;n++)this.onEvent(t[n]);break;case"m":t=JSON.parse(e.data.slice(1)||"null"),this.onEvent(t);break;case"h":this.hooks.onHeartbeat(this);break;case"c":t=JSON.parse(e.data.slice(1)||"[]"),this.onClose(t[0],t[1],!0)}}onOpen(e){var t,n,s;this.readyState===et.CONNECTING?(e&&e.hostname&&(this.location.base=(t=this.location.base,n=e.hostname,(s=/(https?:\/\/)([^\/:]+)((\/|:)?.*)/.exec(t))[1]+n+s[3])),this.readyState=et.OPEN,this.onopen&&this.onopen()):this.onClose(1006,"Server lost session",!0)}onEvent(e){this.readyState===et.OPEN&&this.onmessage&&this.onmessage({data:e})}onActivity(){this.onactivity&&this.onactivity()}onError(e){this.onerror&&this.onerror(e)}openStream(){this.stream=ht.createSocketRequest("POST",nt(this.hooks.getReceiveURL(this.location,this.session))),this.stream.bind("chunk",e=>{this.onChunk(e)}),this.stream.bind("finished",e=>{this.hooks.onFinished(this,e)}),this.stream.bind("buffer_too_long",()=>{this.reconnect()});try{this.stream.start()}catch(e){D.defer(()=>{this.onError(e),this.onClose(1006,"Could not start streaming",!1)})}}closeStream(){this.stream&&(this.stream.unbind_all(),this.stream.close(),this.stream=null)}},ot={getReceiveURL:function(e,t){return e.base+"/"+t+"/xhr_streaming"+e.queryString},onHeartbeat:function(e){e.sendRaw("[]")},sendHeartbeat:function(e){e.sendRaw("[]")},onFinished:function(e,t){e.onClose(1006,"Connection interrupted ("+t+")",!1)}},lt={getReceiveURL:function(e,t){return e.base+"/"+t+"/xhr"+e.queryString},onHeartbeat:function(){},sendHeartbeat:function(e){e.sendRaw("[]")},onFinished:function(e,t){200===t?e.reconnect():e.onClose(1006,"Connection interrupted ("+t+")",!1)}},ct={getRequest:function(e){var t=new(ht.getXHRAPI());return t.onreadystatechange=t.onprogress=function(){switch(t.readyState){case 3:t.responseText&&t.responseText.length>0&&e.onChunk(t.status,t.responseText);break;case 4:t.responseText&&t.responseText.length>0&&e.onChunk(t.status,t.responseText),e.emit("finished",t.status),e.close()}},t},abortRequest:function(e){e.onreadystatechange=null,e.abort()}},ut={createStreamingSocket(e){return this.createSocket(ot,e)},createPollingSocket(e){return this.createSocket(lt,e)},createSocket:(e,t)=>new at(e,t),createXHR(e,t){return this.createRequest(ct,e,t)},createRequest:(e,t,n)=>new Ze(e,t,n),createXDR:function(e,t){return this.createRequest(Ke,e,t)}},ht={nextAuthCallbackID:1,auth_callbacks:{},ScriptReceivers:i,DependenciesReceivers:a,getDefaultStrategy:Xe,Transports:xe,transportConnectionInitializer:function(){var e=this;e.timeline.info(e.buildTimelineMessage({transport:e.name+(e.options.useTLS?"s":"")})),e.hooks.isInitialized()?e.changeState("initialized"):e.hooks.file?(e.changeState("initializing"),o.load(e.hooks.file,{useTLS:e.options.useTLS},function(t,n){e.hooks.isInitialized()?(e.changeState("initialized"),n(!0)):(t&&e.onError(t),e.onClose(),n(!1))})):e.onClose()},HTTPFactory:ut,TimelineTransport:K,getXHRAPI:()=>window.XMLHttpRequest,getWebSocketAPI:()=>window.WebSocket||window.MozWebSocket,setup(e){window.Pusher=e;var t=()=>{this.onDocumentBody(e.ready)};window.JSON?t():o.load("json2",{},t)},getDocument:()=>document,getProtocol(){return this.getDocument().location.protocol},getAuthorizers:()=>({ajax:w,jsonp:Q}),onDocumentBody(e){document.body?e():setTimeout(()=>{this.onDocumentBody(e)},0)},createJSONPRequest:(e,t)=>new X(e,t),createScriptRequest:e=>new J(e),getLocalStorage(){try{return window.localStorage}catch(e){return}},createXHR(){return this.getXHRAPI()?this.createXMLHttpRequest():this.createMicrosoftXHR()},createXMLHttpRequest(){return new(this.getXHRAPI())},createMicrosoftXHR:()=>new ActiveXObject("Microsoft.XMLHTTP"),getNetwork:()=>be,createWebSocket(e){return new(this.getWebSocketAPI())(e)},createSocketRequest(e,t){if(this.isXHRSupported())return this.HTTPFactory.createXHR(e,t);if(this.isXDRSupported(0===t.indexOf("https:")))return this.HTTPFactory.createXDR(e,t);throw"Cross-origin HTTP requests are not supported"},isXHRSupported(){var e=this.getXHRAPI();return Boolean(e)&&void 0!==(new e).withCredentials},isXDRSupported(e){var t=e?"https:":"http:",n=this.getProtocol();return Boolean(window.XDomainRequest)&&n===t},addUnloadListener(e){void 0!==window.addEventListener?window.addEventListener("unload",e,!1):void 0!==window.attachEvent&&window.attachEvent("onunload",e)},removeUnloadListener(e){void 0!==window.addEventListener?window.removeEventListener("unload",e,!1):void 0!==window.detachEvent&&window.detachEvent("onunload",e)},randomInt:e=>Math.floor((window.crypto||window.msCrypto).getRandomValues(new Uint32Array(1))[0]/Math.pow(2,32)*e)};(rt=it||(it={}))[rt.ERROR=3]="ERROR",rt[rt.INFO=6]="INFO",rt[rt.DEBUG=7]="DEBUG";var dt=it;class mt{constructor(e,t,n){this.key=e,this.session=t,this.events=[],this.options=n||{},this.sent=0,this.uniqueID=0}log(e,t){e<=this.options.level&&(this.events.push(A({},t,{timestamp:D.now()})),this.options.limit&&this.events.length>this.options.limit&&this.events.shift())}error(e){this.log(dt.ERROR,e)}info(e){this.log(dt.INFO,e)}debug(e){this.log(dt.DEBUG,e)}isEmpty(){return 0===this.events.length}send(e,t){var n=A({session:this.session,bundle:this.sent+1,key:this.key,lib:"js",version:this.options.version,cluster:this.options.cluster,features:this.options.features,timeline:this.events},this.options.params);return this.events=[],e(n,(e,n)=>{e||this.sent++,t&&t(e,n)}),!0}generateUniqueID(){return this.uniqueID++,this.uniqueID}}class pt{constructor(e,t,n,s){this.name=e,this.priority=t,this.transport=n,this.options=s||{}}isSupported(){return this.transport.isSupported({useTLS:this.options.useTLS})}connect(e,t){if(!this.isSupported())return ft(new x,t);if(this.priority<e)return ft(new f,t);var n=!1,s=this.transport.createConnection(this.name,this.priority,this.options.key,this.options),i=null,r=function(){s.unbind("initialized",r),s.connect()},a=function(){i=Re.createHandshake(s,function(e){n=!0,c(),t(null,e)})},o=function(e){c(),t(e)},l=function(){var e;c(),e=Y(s),t(new g(e))},c=function(){s.unbind("initialized",r),s.unbind("open",a),s.unbind("error",o),s.unbind("closed",l)};return s.bind("initialized",r),s.bind("open",a),s.bind("error",o),s.bind("closed",l),s.initialize(),{abort:()=>{n||(c(),i?i.close():s.close())},forceMinPriority:e=>{n||this.priority<e&&(i?i.close():s.close())}}}}function ft(e,t){return D.defer(function(){t(e)}),{abort:function(){},forceMinPriority:function(){}}}const{Transports:gt}=ht;var yt=function(e,t,n,s,i,r){var a,o=gt[n];if(!o)throw new v(n);return e.enabledTransports&&-1===R(e.enabledTransports,t)||e.disabledTransports&&-1!==R(e.disabledTransports,t)?a=vt:(i=Object.assign({ignoreNullOrigin:e.ignoreNullOrigin},i),a=new pt(t,s,r?r.getAssistant(o):o,i)),a},vt={isSupported:function(){return!1},connect:function(e,t){var n=D.defer(function(){t(new x)});return{abort:function(){n.ensureAborted()},forceMinPriority:function(){}}}},xt=e=>{if(void 0===ht.getAuthorizers()[e.transport])throw`'${e.transport}' is not a recognized auth transport`;return(t,n)=>{const s=((e,t)=>{var n="socket_id="+encodeURIComponent(e.socketId);for(var s in t.params)n+="&"+encodeURIComponent(s)+"="+encodeURIComponent(t.params[s]);if(null!=t.paramsProvider){let e=t.paramsProvider();for(var s in e)n+="&"+encodeURIComponent(s)+"="+encodeURIComponent(e[s])}return n})(t,e);ht.getAuthorizers()[e.transport](ht,s,e,c.UserAuthentication,n)}},bt=e=>{if(void 0===ht.getAuthorizers()[e.transport])throw`'${e.transport}' is not a recognized auth transport`;return(t,n)=>{const s=((e,t)=>{var n="socket_id="+encodeURIComponent(e.socketId);for(var s in n+="&channel_name="+encodeURIComponent(e.channelName),t.params)n+="&"+encodeURIComponent(s)+"="+encodeURIComponent(t.params[s]);if(null!=t.paramsProvider){let e=t.paramsProvider();for(var s in e)n+="&"+encodeURIComponent(s)+"="+encodeURIComponent(e[s])}return n})(t,e);ht.getAuthorizers()[e.transport](ht,s,e,c.ChannelAuthorization,n)}};function wt(e){return e.httpHost?e.httpHost:e.cluster?`sockjs-${e.cluster}.pusher.com`:r.httpHost}function jt(e){return e.wsHost?e.wsHost:`ws-${e.cluster}.pusher.com`}function kt(e){return"https:"===ht.getProtocol()||!1!==e.forceTLS}function Nt(e){return"enableStats"in e?e.enableStats:"disableStats"in e&&!e.disableStats}function St(e){const t=Object.assign(Object.assign({},r.userAuthentication),e.userAuthentication);return"customHandler"in t&&null!=t.customHandler?t.customHandler:xt(t)}function Ct(e,t){const n=function(e,t){let n;return"channelAuthorization"in e?n=Object.assign(Object.assign({},r.channelAuthorization),e.channelAuthorization):(n={transport:e.authTransport||r.authTransport,endpoint:e.authEndpoint||r.authEndpoint},"auth"in e&&("params"in e.auth&&(n.params=e.auth.params),"headers"in e.auth&&(n.headers=e.auth.headers)),"authorizer"in e&&(n.customHandler=((e,t,n)=>{const s={authTransport:t.transport,authEndpoint:t.endpoint,auth:{params:t.params,headers:t.headers}};return(t,i)=>{const r=e.channel(t.channelName);n(r,s).authorize(t.socketId,i)}})(t,n,e.authorizer))),n}(e,t);return"customHandler"in n&&null!=n.customHandler?n.customHandler:bt(n)}class Pt extends ae{constructor(e){super(function(e,t){G.debug(`No callbacks on watchlist events for ${e}`)}),this.pusher=e,this.bindWatchlistInternalEvent()}handleEvent(e){e.data.events.forEach(e=>{this.emit(e.name,e)})}bindWatchlistInternalEvent(){this.pusher.connection.bind("message",e=>{"pusher_internal:watchlist_events"===e.event&&this.handleEvent(e)})}}var Et=function(){let e,t;const n=new Promise((n,s)=>{e=n,t=s});return{promise:n,resolve:e,reject:t}};class Tt extends ae{constructor(e){super(function(e,t){G.debug("No callbacks on user for "+e)}),this.signin_requested=!1,this.user_data=null,this.serverToUserChannel=null,this.signinDonePromise=null,this._signinDoneResolve=null,this._onAuthorize=(e,t)=>{if(e)return G.warn(`Error during signin: ${e}`),void this._cleanup();this.pusher.send_event("pusher:signin",{auth:t.auth,user_data:t.user_data})},this.pusher=e,this.pusher.connection.bind("state_change",({previous:e,current:t})=>{"connected"!==e&&"connected"===t&&this._signin(),"connected"===e&&"connected"!==t&&(this._cleanup(),this._newSigninPromiseIfNeeded())}),this.watchlist=new Pt(e),this.pusher.connection.bind("message",e=>{"pusher:signin_success"===e.event&&this._onSigninSuccess(e.data),this.serverToUserChannel&&this.serverToUserChannel.name===e.channel&&this.serverToUserChannel.handleEvent(e)})}signin(){this.signin_requested||(this.signin_requested=!0,this._signin())}_signin(){this.signin_requested&&(this._newSigninPromiseIfNeeded(),"connected"===this.pusher.connection.state&&this.pusher.config.userAuthenticator({socketId:this.pusher.connection.socket_id},this._onAuthorize))}_onSigninSuccess(e){try{this.user_data=JSON.parse(e.user_data)}catch(t){return G.error(`Failed parsing user data after signin: ${e.user_data}`),void this._cleanup()}if("string"!=typeof this.user_data.id||""===this.user_data.id)return G.error(`user_data doesn't contain an id. user_data: ${this.user_data}`),void this._cleanup();this._signinDoneResolve(),this._subscribeChannels()}_subscribeChannels(){this.serverToUserChannel=new Pe(`#server-to-user-${this.user_data.id}`,this.pusher),this.serverToUserChannel.bind_global((e,t)=>{0!==e.indexOf("pusher_internal:")&&0!==e.indexOf("pusher:")&&this.emit(e,t)}),(e=>{e.subscriptionPending&&e.subscriptionCancelled?e.reinstateSubscription():e.subscriptionPending||"connected"!==this.pusher.connection.state||e.subscribe()})(this.serverToUserChannel)}_cleanup(){this.user_data=null,this.serverToUserChannel&&(this.serverToUserChannel.unbind_all(),this.serverToUserChannel.disconnect(),this.serverToUserChannel=null),this.signin_requested&&this._signinDoneResolve()}_newSigninPromiseIfNeeded(){if(!this.signin_requested)return;if(this.signinDonePromise&&!this.signinDonePromise.done)return;const{promise:e,resolve:t}=Et();e.done=!1;const n=()=>{e.done=!0};e.then(n).catch(n),this.signinDonePromise=e,this._signinDoneResolve=t}}class Lt{static ready(){Lt.isReady=!0;for(var e=0,t=Lt.instances.length;e<t;e++)Lt.instances[e].connect()}static getClientFeatures(){return B(V({ws:ht.Transports.ws},function(e){return e.isSupported({})}))}constructor(e,t){!function(e){if(null==e)throw"You must pass your app key when you instantiate Pusher."}(e),function(e){if(null==e)throw"You must pass an options object";if(null==e.cluster)throw"Options object must provide a cluster";"disableStats"in e&&G.warn("The disableStats option is deprecated in favor of enableStats")}(t),this.key=e,this.config=function(e,t){let n={activityTimeout:e.activityTimeout||r.activityTimeout,cluster:e.cluster,httpPath:e.httpPath||r.httpPath,httpPort:e.httpPort||r.httpPort,httpsPort:e.httpsPort||r.httpsPort,pongTimeout:e.pongTimeout||r.pongTimeout,statsHost:e.statsHost||r.stats_host,unavailableTimeout:e.unavailableTimeout||r.unavailableTimeout,wsPath:e.wsPath||r.wsPath,wsPort:e.wsPort||r.wsPort,wssPort:e.wssPort||r.wssPort,enableStats:Nt(e),httpHost:wt(e),useTLS:kt(e),wsHost:jt(e),userAuthenticator:St(e),channelAuthorizer:Ct(e,t)};return"disabledTransports"in e&&(n.disabledTransports=e.disabledTransports),"enabledTransports"in e&&(n.enabledTransports=e.enabledTransports),"ignoreNullOrigin"in e&&(n.ignoreNullOrigin=e.ignoreNullOrigin),"timelineParams"in e&&(n.timelineParams=e.timelineParams),"nacl"in e&&(n.nacl=e.nacl),n}(t,this),this.channels=Re.createChannels(),this.global_emitter=new ae,this.sessionID=ht.randomInt(1e9),this.timeline=new mt(this.key,this.sessionID,{cluster:this.config.cluster,features:Lt.getClientFeatures(),params:this.config.timelineParams||{},limit:50,level:dt.INFO,version:r.VERSION}),this.config.enableStats&&(this.timelineSender=Re.createTimelineSender(this.timeline,{host:this.config.statsHost,path:"/timeline/v2/"+ht.TimelineTransport.name})),this.connection=Re.createConnectionManager(this.key,{getStrategy:e=>ht.getDefaultStrategy(this.config,e,yt),timeline:this.timeline,activityTimeout:this.config.activityTimeout,pongTimeout:this.config.pongTimeout,unavailableTimeout:this.config.unavailableTimeout,useTLS:Boolean(this.config.useTLS)}),this.connection.bind("connected",()=>{this.subscribeAll(),this.timelineSender&&this.timelineSender.send(this.connection.isUsingTLS())}),this.connection.bind("message",e=>{var t=0===e.event.indexOf("pusher_internal:");if(e.channel){var n=this.channel(e.channel);n&&n.handleEvent(e)}t||this.global_emitter.emit(e.event,e.data)}),this.connection.bind("connecting",()=>{this.channels.disconnect()}),this.connection.bind("disconnected",()=>{this.channels.disconnect()}),this.connection.bind("error",e=>{G.warn(e)}),Lt.instances.push(this),this.timeline.info({instances:Lt.instances.length}),this.user=new Tt(this),Lt.isReady&&this.connect()}channel(e){return this.channels.find(e)}allChannels(){return this.channels.all()}connect(){if(this.connection.connect(),this.timelineSender&&!this.timelineSenderTimer){var e=this.connection.isUsingTLS(),t=this.timelineSender;this.timelineSenderTimer=new I(6e4,function(){t.send(e)})}}disconnect(){this.connection.disconnect(),this.timelineSenderTimer&&(this.timelineSenderTimer.ensureAborted(),this.timelineSenderTimer=null)}bind(e,t,n){return this.global_emitter.bind(e,t,n),this}unbind(e,t,n){return this.global_emitter.unbind(e,t,n),this}bind_global(e){return this.global_emitter.bind_global(e),this}unbind_global(e){return this.global_emitter.unbind_global(e),this}unbind_all(e){return this.global_emitter.unbind_all(),this}subscribeAll(){var e;for(e in this.channels.channels)this.channels.channels.hasOwnProperty(e)&&this.subscribe(e)}subscribe(e){var t=this.channels.add(e,this);return t.subscriptionPending&&t.subscriptionCancelled?t.reinstateSubscription():t.subscriptionPending||"connected"!==this.connection.state||t.subscribe(),t}unsubscribe(e){var t=this.channels.find(e);t&&t.subscriptionPending?t.cancelSubscription():(t=this.channels.remove(e))&&t.subscribed&&t.unsubscribe()}send_event(e,t,n){return this.connection.send_event(e,t,n)}shouldUseTLS(){return this.config.useTLS}signin(){this.user.signin()}}Lt.instances=[],Lt.isReady=!1,Lt.logToConsole=!1,Lt.Runtime=ht,Lt.ScriptReceivers=ht.ScriptReceivers,Lt.DependenciesReceivers=ht.DependenciesReceivers,Lt.auth_callbacks=ht.auth_callbacks;var Mt=t.default=Lt;ht.setup(Lt)}])};const Ui=a(Wi.exports=zi());const Vi=new class{constructor(){this.baseURL="https://s89-satya-capstone-tradebro.onrender.com",this.pusher=null,this.channel=null,this.listeners=new Set,this.isConnected=!1,this.reconnectAttempts=0,this.maxReconnectAttempts=5,this.reconnectDelay=1e3}async initializePusher(e){try{const t="478146ed5eddba9a37cb";this.pusher&&this.disconnectPusher(),this.pusher=new Ui(t,{cluster:"ap2",encrypted:!0,authEndpoint:`${this.baseURL}/pusher/auth`,auth:{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}}),this.channel=this.pusher.subscribe(`private-user-${e}`),this.setupEventListeners(),this.pusher.connection.bind("connected",()=>{this.isConnected=!0,this.reconnectAttempts=0,this.notifyListeners("connection",{status:"connected"})}),this.pusher.connection.bind("disconnected",()=>{this.isConnected=!1,this.notifyListeners("connection",{status:"disconnected"}),this.handleReconnection(e)}),this.pusher.connection.bind("error",e=>{this.notifyListeners("connection",{status:"error",error:e})})}catch(t){}}setupEventListeners(){this.channel&&(this.channel.bind("notification",e=>{this.notifyListeners("notification",e)}),this.channel.bind("notification-update",e=>{this.notifyListeners("notification-update",e)}),this.channel.bind("notifications-read-all",e=>{this.notifyListeners("notifications-read-all",e)}))}async handleReconnection(e){if(this.reconnectAttempts>=this.maxReconnectAttempts)return;this.reconnectAttempts++;const t=this.reconnectDelay*Math.pow(2,this.reconnectAttempts-1);setTimeout(()=>{this.initializePusher(e)},t)}disconnectPusher(){this.channel&&(this.channel.unbind_all(),this.pusher.unsubscribe(this.channel.name)),this.pusher&&this.pusher.disconnect(),this.pusher=null,this.channel=null,this.isConnected=!1}addEventListener(e){return this.listeners.add(e),()=>this.listeners.delete(e)}notifyListeners(e,t){this.listeners.forEach(n=>{try{n(e,t)}catch(s){}})}getAuthHeaders(){return{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}}async getNotifications(e=1,t=10,n="-createdAt"){try{return(await ki.get(`${this.baseURL}/api/notifications`,{params:{page:e,limit:t,sort:n},headers:this.getAuthHeaders(),timeout:5e3})).data}catch(s){return this.getLocalNotifications(e,t)}}getLocalNotifications(e=1,t=10){try{const n=JSON.parse(localStorage.getItem("tradebro_notifications")||"[]"),s=this.getMockNotifications(1,50).notifications,i=[...n,...s].filter((e,t,n)=>t===n.findIndex(t=>t.id===e.id)).sort((e,t)=>new Date(t.createdAt)-new Date(e.createdAt)),r=(e-1)*t,a=r+t;return{success:!0,notifications:i.slice(r,a),pagination:{page:e,limit:t,total:i.length,hasMore:a<i.length}}}catch(n){return this.getMockNotifications(e,t)}}async getUnreadCount(){try{return(await ki.get(`${this.baseURL}/api/notifications/unread-count`,{headers:this.getAuthHeaders(),timeout:5e3})).data}catch(e){return{success:!0,count:3}}}async markAsRead(e){try{return(await ki.put(`${this.baseURL}/api/notifications/${e}/read`,{},{headers:this.getAuthHeaders()})).data}catch(t){return{success:!0,message:"Notification marked as read (fallback)"}}}async markAllAsRead(){try{return(await ki.put(`${this.baseURL}/api/notifications/read-all`,{},{headers:this.getAuthHeaders()})).data}catch(e){return{success:!0,message:"All notifications marked as read (fallback)"}}}async deleteNotification(e){try{return(await ki.delete(`${this.baseURL}/api/notifications/${e}`,{headers:this.getAuthHeaders()})).data}catch(t){return{success:!0,message:"Notification deleted (fallback)"}}}async createNotification(e){var t;try{return(await ki.post(`${this.baseURL}/api/notifications`,e,{headers:this.getAuthHeaders()})).data}catch(n){if(404===(null==(t=n.response)?void 0:t.status))return{success:!0,message:"Notification created (fallback)"};throw this.handleError(n)}}handleError(e){var t;return e.response?{message:(null==(t=e.response.data)?void 0:t.message)||"Server error occurred",status:e.response.status,data:e.response.data}:e.request?{message:"Network error - please check your connection",status:0,data:null}:{message:e.message||"An unexpected error occurred",status:-1,data:null}}getMockNotifications(e=1,t=10){const n=[{id:"1",title:"Trade Executed Successfully",message:"Your buy order for 100 shares of RELIANCE has been executed at ₹2,450.00",type:"success",read:!1,createdAt:new Date(Date.now()-3e5).toISOString(),data:{symbol:"RELIANCE",quantity:100,price:2450}},{id:"2",title:"Price Alert Triggered",message:"TCS has reached your target price of ₹3,500.00",type:"info",read:!1,createdAt:new Date(Date.now()-18e5).toISOString(),data:{symbol:"TCS",targetPrice:3500}},{id:"3",title:"Market Update",message:"NIFTY 50 is up 1.2% today. Your portfolio is performing well!",type:"info",read:!0,createdAt:new Date(Date.now()-72e5).toISOString(),data:{index:"NIFTY50",change:1.2}},{id:"4",title:"Dividend Received",message:"You received ₹150 dividend from HDFC Bank",type:"success",read:!0,createdAt:new Date(Date.now()-864e5).toISOString(),data:{symbol:"HDFCBANK",amount:150}},{id:"5",title:"Stop Loss Triggered",message:"Your stop loss order for INFY has been executed at ₹1,420.00",type:"warning",read:!1,createdAt:new Date(Date.now()-2592e5).toISOString(),data:{symbol:"INFY",price:1420,type:"stop_loss"}}],s=(e-1)*t,i=s+t;return{success:!0,notifications:n.slice(s,i),pagination:{page:e,limit:t,total:n.length,hasMore:i<n.length}}}startMockLiveNotifications(){this.mockInterval||(this.mockInterval=setInterval(()=>{const e=this.generateMockNotification();this.notifyListeners("notification",e)},3e4))}stopMockLiveNotifications(){this.mockInterval&&(clearInterval(this.mockInterval),this.mockInterval=null)}generateMockNotification(){const e=["success","info","warning","error"],t={success:[{title:"Trade Executed",message:"Your buy order for {symbol} has been executed successfully"},{title:"Dividend Received",message:"You received ₹{amount} dividend from {symbol}"},{title:"Profit Booked",message:"Successfully sold {symbol} with {profit}% profit"}],info:[{title:"Price Alert",message:"{symbol} has reached your target price of ₹{price}"},{title:"Market Update",message:"NIFTY 50 is {change}% today"},{title:"News Alert",message:"Important news update for {symbol}"}],warning:[{title:"Stop Loss Alert",message:"{symbol} is approaching your stop loss level"},{title:"High Volatility",message:"{symbol} showing high volatility today"},{title:"Market Closure",message:"Market will close in 30 minutes"}],error:[{title:"Order Failed",message:"Your order for {symbol} could not be executed"},{title:"Connection Issue",message:"Temporary connection issue detected"}]},n=["RELIANCE","TCS","INFY","HDFCBANK","ICICIBANK","WIPRO","ITC"],s=e[Math.floor(Math.random()*e.length)],i=t[s][Math.floor(Math.random()*t[s].length)];return{id:Date.now().toString(),title:i.title,message:i.message.replace("{symbol}",n[Math.floor(Math.random()*n.length)]).replace("{amount}",Math.floor(500*Math.random())+50).replace("{price}",Math.floor(1e3*Math.random())+1e3).replace("{profit}",(20*Math.random()+5).toFixed(1)).replace("{change}",(4*Math.random()-2).toFixed(1)),type:s,read:!1,createdAt:(new Date).toISOString(),data:{}}}getConnectionStatus(){var e,t;return{isConnected:this.isConnected,reconnectAttempts:this.reconnectAttempts,pusherState:(null==(t=null==(e=this.pusher)?void 0:e.connection)?void 0:t.state)||"disconnected"}}},$i={notifications:[],unreadCount:0,loading:!1,error:null,connectionStatus:"disconnected",filters:{type:"all",read:"all",dateRange:"all"},pagination:{page:1,limit:10,total:0,hasMore:!1}},Hi="SET_LOADING",qi="SET_ERROR",Yi="SET_NOTIFICATIONS",Gi="ADD_NOTIFICATION",Qi="UPDATE_NOTIFICATION",Ji="REMOVE_NOTIFICATION",Xi="SET_UNREAD_COUNT",Ki="MARK_AS_READ",Zi="MARK_ALL_AS_READ",er="SET_CONNECTION_STATUS",tr="SET_FILTERS",nr="SET_PAGINATION",sr="CLEAR_ALL";function ir(e,t){switch(t.type){case Hi:return{...e,loading:t.payload};case qi:return{...e,error:t.payload,loading:!1};case Yi:return{...e,notifications:t.payload.notifications||[],pagination:{...e.pagination,...t.payload.pagination},loading:!1,error:null};case Gi:return{...e,notifications:[t.payload,...e.notifications],unreadCount:e.unreadCount+(t.payload.read?0:1)};case Qi:return{...e,notifications:e.notifications.map(e=>(e._id||e.id)===(t.payload._id||t.payload.id)?{...e,...t.payload}:e)};case Ji:const n=e.notifications.find(e=>(e._id||e.id)===t.payload);return{...e,notifications:e.notifications.filter(e=>(e._id||e.id)!==t.payload),unreadCount:n&&!n.read?Math.max(0,e.unreadCount-1):e.unreadCount};case Xi:return{...e,unreadCount:t.payload};case Ki:return{...e,notifications:e.notifications.map(e=>(e._id||e.id)===t.payload?{...e,read:!0,readAt:(new Date).toISOString()}:e),unreadCount:Math.max(0,e.unreadCount-1)};case Zi:return{...e,notifications:e.notifications.map(e=>({...e,read:!0,readAt:(new Date).toISOString()})),unreadCount:0};case er:return{...e,connectionStatus:t.payload};case tr:return{...e,filters:{...e.filters,...t.payload},pagination:{...e.pagination,page:1}};case nr:return{...e,pagination:{...e.pagination,...t.payload}};case sr:return{...$i};default:return e}}const rr=s.createContext(),ar=({children:e})=>{const[t,n]=s.useReducer(ir,$i),{user:i,isAuthenticated:r}=yn(),a=s.useCallback((e,t)=>{switch(e){case"notification":n({type:Gi,payload:t}),o(t);break;case"notification-update":n({type:Qi,payload:t});break;case"notifications-read-all":n({type:Zi});break;case"connection":n({type:er,payload:t.status})}},[]),o=s.useCallback(e=>{const t={position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0};switch(e.type){case"success":We.success(e.message,t);break;case"error":We.error(e.message,t);break;case"warning":We.warning(e.message,t);break;default:We.info(e.message,t)}},[]),l=s.useCallback(async(e=1)=>{try{n({type:Hi,payload:!0});const s=await Vi.getNotifications(e,t.pagination.limit,"-createdAt");s.success&&n({type:Yi,payload:{notifications:1===e?s.notifications:[...t.notifications,...s.notifications],pagination:{page:s.pagination.page,total:s.pagination.total,hasMore:s.pagination.hasMore}}})}catch(s){n({type:qi,payload:s.message})}finally{n({type:Hi,payload:!1})}},[t.pagination.limit,t.notifications]),c=s.useCallback(async()=>{try{const e=await Vi.getUnreadCount();e.success&&n({type:Xi,payload:e.count})}catch(e){}},[]),u=s.useCallback(async e=>{try{await Vi.markAsRead(e),n({type:Ki,payload:e})}catch(t){}},[]),h=s.useCallback(async()=>{try{await Vi.markAllAsRead(),n({type:Zi})}catch(e){}},[]),d=s.useCallback(async e=>{try{await Vi.deleteNotification(e),n({type:Ji,payload:e})}catch(t){}},[]),m=s.useCallback(e=>{n({type:tr,payload:e})},[]),p=s.useCallback(()=>{t.pagination.hasMore&&!t.loading&&l(t.pagination.page+1)},[t.pagination.hasMore,t.loading,t.pagination.page,l]);s.useEffect(()=>{let e;return r&&(null==i?void 0:i.id)&&(n({type:Hi,payload:!0}),c(),l(),Vi.startMockLiveNotifications(),e=Vi.addEventListener(a),Vi.initializePusher(i.id)),()=>{Vi.stopMockLiveNotifications(),Vi.disconnectPusher(),e&&e()}},[r,null==i?void 0:i.id,l,c,a]);const f={...t,fetchNotifications:l,markAsRead:u,markAllAsRead:h,deleteNotification:d,setFilters:m,loadMore:p};return M.jsx(rr.Provider,{value:f,children:e})},or=()=>{const e=s.useContext(rr);if(!e)throw new Error("useNotifications must be used within a NotificationProvider");return e},lr=(e,t=100,n=30)=>{const s=[];let i=t;const r=new Date;for(let a=n;a>=0;a--){const e=new Date(r);e.setDate(e.getDate()-a);const t=.1*(Math.random()-.5);i=Math.max(i*(1+t),1);const n=i,o=n*(1+.05*Math.random()),l=n*(1-.05*Math.random()),c=l+Math.random()*(o-l),u=Math.floor(1e6*Math.random())+1e5;s.push({time:e.toISOString().split("T")[0],open:parseFloat(n.toFixed(2)),high:parseFloat(o.toFixed(2)),low:parseFloat(l.toFixed(2)),close:parseFloat(c.toFixed(2)),volume:u}),i=c}return s},cr={"RELIANCE.NS":{symbol:"RELIANCE.NS",name:"Reliance Industries Limited",price:2847.5,change:15.25,changesPercentage:.54,dayLow:2835.4,dayHigh:2865.8,yearHigh:3024.9,yearLow:2220.3,marketCap:1925e10,priceAvg50:2798.45,priceAvg200:2654.78,volume:8765432,avgVolume:12e6,exchange:"NSE",open:2840.2,previousClose:2832.25,timestamp:Math.floor(Date.now()/1e3)},"TCS.NS":{symbol:"TCS.NS",name:"Tata Consultancy Services",price:4125.8,change:-12.4,changesPercentage:-.3,dayLow:4118.25,dayHigh:4145.6,yearHigh:4592.25,yearLow:3311,marketCap:151e11,priceAvg50:4089.75,priceAvg200:3987.2,volume:1234567,avgVolume:25e5,exchange:"NSE",open:4138.2,previousClose:4138.2,timestamp:Math.floor(Date.now()/1e3)},"HDFCBANK.NS":{symbol:"HDFCBANK.NS",name:"HDFC Bank Limited",price:1687.9,change:8.75,changesPercentage:.52,dayLow:1678.3,dayHigh:1695.4,yearHigh:1794.5,yearLow:1363.55,marketCap:1285e10,priceAvg50:1654.45,priceAvg200:1598.78,volume:5678901,avgVolume:85e5,exchange:"NSE",open:1682.15,previousClose:1679.15,timestamp:Math.floor(Date.now()/1e3)},"INFY.NS":{symbol:"INFY.NS",name:"Infosys Limited",price:1842.35,change:22.15,changesPercentage:1.22,dayLow:1835.2,dayHigh:1856.8,yearHigh:1953.9,yearLow:1351.65,marketCap:765e10,priceAvg50:1798.75,priceAvg200:1687.2,volume:3456789,avgVolume:52e5,exchange:"NSE",open:1838.4,previousClose:1820.2,timestamp:Math.floor(Date.now()/1e3)},"HINDUNILVR.NS":{symbol:"HINDUNILVR.NS",name:"Hindustan Unilever Limited",price:2456.7,change:-5.3,changesPercentage:-.22,dayLow:2445.6,dayHigh:2468.9,yearHigh:2844.95,yearLow:2172,marketCap:575e10,priceAvg50:2489.75,priceAvg200:2398.2,volume:987654,avgVolume:18e5,exchange:"NSE",open:2462,previousClose:2462,timestamp:Math.floor(Date.now()/1e3)},"ICICIBANK.NS":{symbol:"ICICIBANK.NS",name:"ICICI Bank Limited",price:1287.45,change:18.9,changesPercentage:1.49,dayLow:1278.3,dayHigh:1295.8,yearHigh:1257.65,yearLow:912.35,marketCap:905e10,priceAvg50:1245.75,priceAvg200:1156.2,volume:7890123,avgVolume:125e5,exchange:"NSE",open:1280.55,previousClose:1268.55,timestamp:Math.floor(Date.now()/1e3)},INFY:{symbol:"INFY",name:"Infosys Limited",price:1456.3,change:8.75,changesPercentage:.6,dayLow:1445.2,dayHigh:1468.9,yearHigh:1953.9,yearLow:1330.2,marketCap:61e11,priceAvg50:1423.45,priceAvg200:1567.89,volume:3456789,avgVolume:42e5,exchange:"NSE",open:1447.55,previousClose:1447.55,timestamp:Math.floor(Date.now()/1e3)},HDFCBANK:{symbol:"HDFCBANK",name:"HDFC Bank Limited",price:1567.45,change:12.3,changesPercentage:.79,dayLow:1555.2,dayHigh:1578.9,yearHigh:1725,yearLow:1363.55,marketCap:119e11,priceAvg50:1534.67,priceAvg200:1598.23,volume:2345678,avgVolume:28e5,exchange:"NSE",open:1555.15,previousClose:1555.15,timestamp:Math.floor(Date.now()/1e3)},ICICIBANK:{symbol:"ICICIBANK",name:"ICICI Bank Limited",price:987.65,change:-5.45,changesPercentage:-.55,dayLow:982.3,dayHigh:995.8,yearHigh:1257.8,yearLow:875.35,marketCap:69e11,priceAvg50:1012.34,priceAvg200:1089.67,volume:4567890,avgVolume:52e5,exchange:"NSE",open:993.1,previousClose:993.1,timestamp:Math.floor(Date.now()/1e3)}},ur=[{symbol:"RELIANCE.NS",name:"Reliance Industries Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"TCS.NS",name:"Tata Consultancy Services",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"HDFCBANK.NS",name:"HDFC Bank Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"INFY.NS",name:"Infosys Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"HINDUNILVR.NS",name:"Hindustan Unilever Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"ICICIBANK.NS",name:"ICICI Bank Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"KOTAKBANK.NS",name:"Kotak Mahindra Bank Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"BHARTIARTL.NS",name:"Bharti Airtel Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"ITC.NS",name:"ITC Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"SBIN.NS",name:"State Bank of India",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"LT.NS",name:"Larsen & Toubro Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"ASIANPAINT.NS",name:"Asian Paints Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"MARUTI.NS",name:"Maruti Suzuki India Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"BAJFINANCE.NS",name:"Bajaj Finance Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"WIPRO.NS",name:"Wipro Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"HCLTECH.NS",name:"HCL Technologies Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"TECHM.NS",name:"Tech Mahindra Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"SUNPHARMA.NS",name:"Sun Pharmaceutical Industries Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"TITAN.NS",name:"Titan Company Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"NESTLEIND.NS",name:"Nestle India Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"ULTRACEMCO.NS",name:"UltraTech Cement Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"POWERGRID.NS",name:"Power Grid Corporation of India Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"NTPC.NS",name:"NTPC Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"ONGC.NS",name:"Oil and Natural Gas Corporation Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"COALINDIA.NS",name:"Coal India Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"ZOMATO.NS",name:"Zomato Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"PAYTM.NS",name:"One 97 Communications Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"NYKAA.NS",name:"FSN E-Commerce Ventures Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"POLICYBZR.NS",name:"PB Fintech Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"ZOMATO.NS",name:"Zomato Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"SWIGGY.NS",name:"Bundl Technologies Private Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"INFY.NS",name:"Infosys Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"AAPL",name:"Apple Inc.",exchange:"NASDAQ",currency:"USD",type:"stock"},{symbol:"GOOGL",name:"Alphabet Inc.",exchange:"NASDAQ",currency:"USD",type:"stock"},{symbol:"MSFT",name:"Microsoft Corporation",exchange:"NASDAQ",currency:"USD",type:"stock"},{symbol:"AMZN",name:"Amazon.com Inc.",exchange:"NASDAQ",currency:"USD",type:"stock"},{symbol:"TSLA",name:"Tesla Inc.",exchange:"NASDAQ",currency:"USD",type:"stock"},{symbol:"META",name:"Meta Platforms Inc.",exchange:"NASDAQ",currency:"USD",type:"stock"},{symbol:"NVDA",name:"NVIDIA Corporation",exchange:"NASDAQ",currency:"USD",type:"stock"},{symbol:"ADANIPORTS.NS",name:"Adani Ports and Special Economic Zone Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"AXISBANK.NS",name:"Axis Bank Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"BAJAJ-AUTO.NS",name:"Bajaj Auto Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"BRITANNIA.NS",name:"Britannia Industries Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"CIPLA.NS",name:"Cipla Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"DRREDDY.NS",name:"Dr. Reddys Laboratories Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"EICHERMOT.NS",name:"Eicher Motors Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"GRASIM.NS",name:"Grasim Industries Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"HEROMOTOCO.NS",name:"Hero MotoCorp Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"JSWSTEEL.NS",name:"JSW Steel Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"TSLA",name:"Tesla Inc.",exchange:"NASDAQ",currency:"USD",type:"stock"},{symbol:"META",name:"Meta Platforms Inc.",exchange:"NASDAQ",currency:"USD",type:"stock"},{symbol:"NVDA",name:"NVIDIA Corporation",exchange:"NASDAQ",currency:"USD",type:"stock"},{symbol:"NFLX",name:"Netflix Inc.",exchange:"NASDAQ",currency:"USD",type:"stock"},{symbol:"CRM",name:"Salesforce Inc.",exchange:"NYSE",currency:"USD",type:"stock"},{symbol:"ADBE",name:"Adobe Inc.",exchange:"NASDAQ",currency:"USD",type:"stock"}],hr=[{symbol:"AAPL",name:"Apple Inc.",change:2.15,changesPercentage:1.24,price:175.43},{symbol:"NVDA",name:"NVIDIA Corporation",change:15.42,changesPercentage:1.79,price:875.28},{symbol:"META",name:"Meta Platforms Inc.",change:8.75,changesPercentage:1.84,price:484.2},{symbol:"GOOGL",name:"Alphabet Inc.",change:3.42,changesPercentage:2.46,price:142.56},{symbol:"AMZN",name:"Amazon.com Inc.",change:1.87,changesPercentage:1.25,price:151.94}],dr=[{title:"Reliance Industries Reports Strong Q3 Results",text:"Reliance Industries Limited reported strong quarterly results with increased revenue from petrochemicals and retail segments.",url:"#",image:"https://via.placeholder.com/300x200",site:"Economic Times",publishedDate:(new Date).toISOString(),symbol:"RELIANCE"},{title:"TCS Announces New Digital Transformation Services",text:"Tata Consultancy Services launches new suite of digital transformation services for enterprise clients.",url:"#",image:"https://via.placeholder.com/300x200",site:"Business Standard",publishedDate:new Date(Date.now()-36e5).toISOString(),symbol:"TCS"},{title:"Indian IT Sector Shows Resilience Amid Global Challenges",text:"The Indian IT sector continues to show strong performance despite global economic uncertainties.",url:"#",image:"https://via.placeholder.com/300x200",site:"Financial Express",publishedDate:new Date(Date.now()-72e5).toISOString(),symbol:"INFY"}],mr={searchStocks:async(e,t=10)=>{if(await new Promise(e=>setTimeout(e,300)),!e||""===e.trim()){const e=ur.slice(0,t);return{success:!0,results:e,total:e.length}}const n=e.toLowerCase().trim(),s=ur.map(e=>{let t=0;const s=e.symbol.toLowerCase(),i=e.name.toLowerCase();return s===n?t+=100:s.startsWith(n)?t+=50:s.includes(n)&&(t+=25),i===n?t+=75:i.startsWith(n)?t+=40:i.split(" ").some(e=>e.startsWith(n))?t+=30:i.includes(n)&&(t+=20),("NSE"===e.exchange||"BSE"===e.exchange||e.symbol.endsWith(".NS")||e.symbol.endsWith(".BO"))&&(t+=10),{stock:e,score:t}}).filter(e=>e.score>0).sort((e,t)=>t.score-e.score).map(e=>e.stock).slice(0,t);return s.length,{success:!0,results:s,total:s.length}},getStockQuote:async e=>{await new Promise(e=>setTimeout(e,200));const t=cr[e.toUpperCase()];return t?{success:!0,data:t}:{success:!1,error:"Stock not found"}},getHistoricalData:async(e,t="1D")=>{var n;await new Promise(e=>setTimeout(e,500));const s=(null==(n=cr[e.toUpperCase()])?void 0:n.price)||100;return{success:!0,data:lr(0,s,"1D"===t?1:"1M"===t?30:90),symbol:e,period:t}},getGainers:async(e=10)=>(await new Promise(e=>setTimeout(e,300)),{success:!0,data:hr.slice(0,e)}),getMarketNews:async(e=20)=>(await new Promise(e=>setTimeout(e,400)),{success:!0,data:dr.slice(0,e)})},pr=["VCMjfaz3k5CjRqbLvtpMALKTks5YVLxx","sYWvqZLnzWgIlTE2XBWWL0ZxDUK4O1MY","ORvcjYythoW1cNX3sA7gvYD46sK8mxvx",void 0].filter(Boolean);let fr=0;const gr=new Set;let yr=pr[fr];pr.length;const vr=ki.create({baseURL:"https://financialmodelingprep.com/api/v3",timeout:1e4}),xr=async(e,t={})=>{var n;if(!pr.length||gr.size===pr.length)throw new Error("All API keys failed");for(let i=0;i<pr.length;i++)if(yr=pr[fr],gr.has(yr))fr=(fr+1)%pr.length,yr=pr[fr];else try{return(await vr.get(e,{params:{...t,apikey:yr}})).data}catch(s){const e=null==(n=s.response)?void 0:n.status;if((429===e||403===e||401===e)&&gr.add(yr),fr=(fr+1)%pr.length,gr.size===pr.length)break}throw new Error("All API keys failed or exhausted.")},br={searchStocks:async(e,t=10)=>{try{const n=await xr("/search",{query:e,limit:t});if(!Array.isArray(n))throw new Error("Invalid response format");return{success:!0,results:n,total:n.length}}catch(n){return await mr.searchStocks(e,t)}},getStockQuote:async e=>{try{return{success:!0,data:(await xr(`/quote/${e}`))[0]}}catch(t){return await mr.getStockQuote(e)}},getMultipleQuotes:async e=>{const t=Array.isArray(e)?e.join(","):e;try{return{success:!0,data:await xr(`/quote/${t}`)}}catch(n){return{success:!1,data:[]}}},getStockProfile:async e=>{try{const t=await xr(`/profile/${e}`);if(!t[0])throw new Error("Company profile not found");return{success:!0,data:t[0]}}catch(t){return await mr.getStockProfile(e)}}},wr=br,jr={getHistoricalData:async(e,t="1D")=>{try{return{success:!0,data:(await xr(`/historical-price-full/${e}`,{serietype:"line"})).historical,symbol:e}}catch(n){return await mr.getHistoricalData(e,t)}},getIntradayData:async(e,t="1min")=>{try{return{success:!0,data:(await xr(`/historical-chart/${t}/${e}`)).reverse(),symbol:e,interval:t}}catch(n){return{success:!1,data:[]}}}},kr=ki.create({baseURL:"https://s89-satya-capstone-tradebro.onrender.com/api",timeout:3e4,headers:{"Content-Type":"application/json"}});kr.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e)),kr.interceptors.response.use(e=>e,e=>{var t,n,s;return"ERR_NETWORK"===e.code||null==(t=e.response)||t.status,401===(null==(n=e.response)?void 0:n.status)&&(localStorage.removeItem("token"),localStorage.removeItem("user"),"/login"!==window.location.pathname&&"/signup"!==window.location.pathname&&(window.location.href="/login")),(null==(s=e.response)?void 0:s.status)>=500?Promise.resolve({data:{success:!1,message:"Service temporarily unavailable. Please try again later.",fallback:!0}}):Promise.reject(e)});const Nr={login:async e=>(await kr.post("/auth/login",e)).data,register:async e=>(await kr.post("/auth/register",e)).data,verifyToken:async()=>(await kr.get("/auth/verify")).data,googleAuth:async e=>(await kr.post("/auth/google",{tokenId:e})).data,logout:async()=>(await kr.post("/auth/logout")).data},Sr=async e=>(await kr.get(`/proxy/fmp/quote/${e}`)).data,Cr=async e=>{const t=Array.isArray(e)?e.join(","):e;return(await kr.get(`/proxy/stock-batch?symbols=${t}`)).data},Pr=async()=>{try{const[e,t]=await Promise.all([kr.get("/proxy/top-gainers"),kr.get("/proxy/top-losers")]);return{gainers:e.data||[],losers:t.data||[],mostActive:[]}}catch(e){return{gainers:[],losers:[],mostActive:[]}}},Er=async()=>{try{return(await kr.get("/portfolio/summary")).data}catch(e){return{success:!1,data:{totalValue:1e4,availableCash:1e4,totalInvested:0,totalGainLoss:0,totalGainLossPercentage:0,holdings:[],transactions:[],watchlist:[]}}}},Tr=async()=>{try{return(await kr.get("/portfolio/holdings")).data}catch(e){return{success:!0,data:[]}}},Lr={placeOrder:async e=>(await kr.post("/orders/place",e)).data,getOrders:async({status:e="all",page:t=1,limit:n=20,stockSymbol:s=null,type:i=null,orderType:r=null,sort:a="-createdAt"}={})=>{let o=`/orders/all?page=${t}&limit=${n}&sort=${a}`;"all"!==e&&(o+=`&status=${e}`),s&&(o+=`&stockSymbol=${s.toUpperCase()}`),i&&(o+=`&type=${i}`),r&&(o+=`&orderType=${r}`);return(await kr.get(o)).data},searchOrders:async(e,t={})=>{const{status:n,type:s,orderType:i,limit:r=20}=t;let a=`/orders/all?stockSymbol=${e.toUpperCase()}&limit=${r}`;n&&(a+=`&status=${n}`),s&&(a+=`&type=${s}`),i&&(a+=`&orderType=${i}`);return(await kr.get(a)).data},cancelOrder:async e=>(await kr.delete(`/orders/${e}`)).data,getOrderHistory:async(e=50)=>(await kr.get(`/orders/history?limit=${e}`)).data,getRecentTrades:async(e=10)=>(await kr.get(`/trades/recent?limit=${e}`)).data},Mr={getWatchlists:async()=>(await kr.get("/watchlist")).data,createWatchlist:async(e,t="")=>(await kr.post("/watchlist",{name:e,description:t})).data,addStock:async(e,t)=>(await kr.post(`/watchlist/${e}/add`,{symbol:t})).data,removeStock:async(e,t)=>(await kr.delete(`/watchlist/${e}/remove/${t}`)).data,deleteWatchlist:async e=>(await kr.delete(`/watchlist/${e}`)).data,searchStocks:async(e,t=10)=>(await kr.get(`/watchlist/search?query=${encodeURIComponent(e)}&limit=${t}`)).data},Ir=async(e,t=null)=>{try{return(await kr.post("/saytrix/chat",{message:e,sessionId:t})).data}catch(n){return{success:!1,message:"AI service temporarily unavailable.",error:n.message}}},_r={getMarketNews:async(e=20)=>(await kr.get(`/news/market?limit=${e}`)).data,getNews:async({category:e="all",limit:t=20,q:n=null}={})=>{let s=`/news?limit=${t}`;n&&(s+=`&q=${encodeURIComponent(n)}`);return(await kr.get(s)).data},searchNews:async(e,t=20)=>(await kr.get(`/news/search?q=${encodeURIComponent(e)}&limit=${t}`)).data,getStockNews:async(e,t=10)=>(await kr.get(`/news/stock/${e}?limit=${t}`)).data,getTrendingNews:async()=>(await kr.get("/news/trending")).data};class Dr{constructor(e){this.navigate=e}async processCommand(e){const t=this.localProcess(e);if(t.success)return t;try{const t=await Ir(e,"voice_session");if(t.success&&t.data.action)return this.executeAction(t.data.action,t.data.params)}catch(n){}return{success:!1,message:"Command not recognized"}}executeAction(e,t={}){switch(e){case"navigate":return this.navigate(t.path),{success:!0,message:`Navigating to ${t.path}`};case"search_stock":return this.navigate(`/stock/${t.symbol}`),{success:!0,message:`Showing ${t.symbol} details`};case"buy_stock":return this.navigate("/trading"),{success:!0,message:"Opening trading page"};case"show_portfolio":return this.navigate("/portfolio"),{success:!0,message:"Opening portfolio"};default:return{success:!1,message:"Command not understood"}}}localProcess(e){const t=e.toLowerCase().trim(),n={chart:"/charts",charge:"/charts",charts:"/charts",dashboard:"/dashboard",home:"/dashboard",portfolio:"/portfolio",trading:"/trading",trade:"/trading",orders:"/orders",order:"/orders",history:"/history",news:"/news",watchlist:"/watchlist",notifications:"/notifications",profile:"/profile",settings:"/settings",saytrix:"/saytrix"};for(const[s,i]of Object.entries(n))if(t===s||t.includes(s))return this.navigate(i),{success:!0,message:`Opening ${s}`};if(t.includes("price")||t.includes("stock")){const e=t.match(/(?:price of|stock|show me)\s+([a-z]+)/i);if(e){const t=e[1].toUpperCase();return this.navigate(`/stock/${t}`),{success:!0,message:`Showing ${t} price`}}}return{success:!1}}}const Ar=s.createContext(),Or=()=>{const e=s.useContext(Ar);if(void 0===e)throw new Error("useVoice must be used within a VoiceProvider");return e},Rr=({children:e})=>{const t=l(),n=c(),i=new Dr(t),[r,a]=s.useState(!1),[o,u]=s.useState(!1),[h,d]=s.useState(""),[m,p]=s.useState(null),[f,g]=s.useState(!1);s.useEffect(()=>{if("webkitSpeechRecognition"in window||"SpeechRecognition"in window){const e=new(window.SpeechRecognition||window.webkitSpeechRecognition);e.continuous=!0,e.interimResults=!0,e.lang="en-US",e.maxAlternatives=1,p(e),g(!0)}else g(!1)},[]);const y=s.useCallback(e=>{const n=e.toLowerCase().trim();if(n.includes("dashboard")||n.includes("home")?t("/dashboard"):n.includes("chart")||n.includes("charge")?t("/charts"):n.includes("portfolio")?t("/portfolio"):n.includes("watchlist")||n.includes("watch list")?t("/watchlist"):n.includes("orders")||n.includes("order")?t("/orders"):n.includes("history")?t("/history"):n.includes("news")?t("/news"):n.includes("notifications")||n.includes("notification")?t("/notifications"):n.includes("saytrix")||n.includes("chat")?t("/saytrix"):n.includes("profile")?t("/profile"):n.includes("settings")||n.includes("setting")?t("/settings"):(n.includes("trading")||n.includes("trade"))&&t("/trading"),n.includes("price of")||n.includes("show price")){const e=v(n);e&&t(`/stock/${e}`)}else(n.includes("top gainers")||n.includes("gainers")||n.includes("top losers")||n.includes("losers"))&&t("/dashboard");(n.includes("buy")&&(n.includes("stock")||n.includes("share"))||n.includes("sell")&&(n.includes("stock")||n.includes("share")))&&t("/trading")},[t]),v=s.useCallback(e=>{const t=[/price of ([a-zA-Z]+)/i,/show price ([a-zA-Z]+)/i,/([a-zA-Z]+) price/i];for(const n of t){const t=e.match(n);if(t)return t[1].toUpperCase()}return null},[]),x=s.useCallback(e=>{if("speechSynthesis"in window){const t=new SpeechSynthesisUtterance(e);t.rate=.9,t.pitch=1,t.volume=.8,speechSynthesis.speak(t)}},[]),b=s.useCallback(()=>{if(m&&f&&!r){a(!0),m.onresult=e=>{let t="";for(let n=e.resultIndex;n<e.results.length;n++){const s=e.results[n][0].transcript;e.results[n].isFinal,t+=s}d(t);["saytrix","citrix","citric","matrix","tricks","se tric","say tricks"].some(e=>t.toLowerCase().includes(e))&&(m.stop(),w())},m.onerror=e=>{"network"===e.error||e.error,a(!1),"aborted"!==e.error&&"not-allowed"!==e.error&&setTimeout(()=>{b()},2e3)},m.onend=()=>{a(!1),o||setTimeout(()=>{b()},500)};try{m.start()}catch(e){"InvalidStateError"!==e.name&&a(!1)}}},[m,f,r,o]),w=s.useCallback(()=>{if(u(!0),x("Yes?"),m){m.onresult=e=>{let t="";for(let n=e.resultIndex;n<e.results.length;n++){const s=e.results[n][0].transcript;e.results[n].isFinal&&(t+=s)}if(t){d(t);let n=t;if(e.results[0].length>1){n=e.results[0][0].transcript;for(let t=1;t<e.results[0].length;t++)e.results[0][t].confidence>e.results[0][0].confidence&&(n=e.results[0][t].transcript)}i.processCommand(n).then(e=>{e.success?x(e.message||"Done"):x("Could you repeat that?")}),u(!1),m.stop(),setTimeout(()=>{b()},500)}};try{m.start()}catch(e){}}},[m,y,x,b]),j=s.useCallback(()=>{if(a(!1),u(!1),m)try{m.stop()}catch(e){}},[m]),k=s.useCallback(()=>{f?o?j():w():alert("Voice commands are not supported in this browser. Please use Chrome, Edge, or Safari.")},[f,o,w,j]);s.useEffect(()=>{const e="/login"===n.pathname||"/signup"===n.pathname||"/"===n.pathname;return!f||r||o||e||b(),()=>{if(m)try{m.stop()}catch(e){}}},[f,b,n.pathname]);const N={isListening:r,isVoiceModeActive:o,transcript:h,isSupported:f,triggerVoiceMode:k,stopListening:j,speak:x,activateVoiceMode:w,startWakeWordDetection:b,processVoiceCommand:y};return M.jsx(Ar.Provider,{value:N,children:e})},Fr=({position:e="navbar",size:t="small",showLabel:n=!1,className:i=""})=>{const{isListening:r,isSupported:a,startListening:o,stopListening:l}=Or(),c=s.useCallback(()=>{r?l():o()},[r,o,l]);if(!a)return null;const u=r;return M.jsxs("button",{className:`saytrix-trigger-btn ${e} ${t} ${i} ${u?"active":""}`,onClick:c,title:u?"Deactivate Saytrix AI":"Activate Saytrix AI","aria-label":u?"Deactivate Saytrix AI voice assistant":"Activate Saytrix AI voice assistant",children:[M.jsx(y,{mode:"wait",children:M.jsx(v.span,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.2},children:r?M.jsx(At,{}):M.jsx(Ot,{})},r?"mic-on":"mic-off")}),n&&M.jsx("span",{children:"Saytrix"})]})},Br=s.createContext(),zr=()=>{const e=s.useContext(Br);if(!e)throw new Error("useLocalSidebar must be used within LocalSidebarProvider");return e},Wr=({children:e})=>{const[t,n]=s.useState(!1),[i,r]=s.useState(!1);s.useEffect(()=>{const e=()=>{const e=window.innerWidth<=768;r(e),e&&n(!0)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),s.useEffect(()=>{const e=document.querySelector(".main-content");return e&&(e.classList.add("with-sidebar"),t?(e.classList.add("sidebar-collapsed"),e.classList.remove("sidebar-expanded")):(e.classList.add("sidebar-expanded"),e.classList.remove("sidebar-collapsed"))),()=>{e&&e.classList.remove("with-sidebar","sidebar-collapsed","sidebar-expanded")}},[t]);const a={isCollapsed:t,isMobile:i,toggleSidebar:()=>{n(!t)},setIsCollapsed:n};return M.jsx(Br.Provider,{value:a,children:e})},Ur=()=>{const{isCollapsed:e,isMobile:t,toggleSidebar:n}=zr();return t&&e?M.jsx("button",{className:"mobile-menu-btn",onClick:n,"aria-label":"Open navigation menu",type:"button",children:M.jsx(_t,{})}):null},Vr=()=>{const{isCollapsed:e,isMobile:t,toggleSidebar:n}=zr();return!t||e?null:M.jsx("div",{className:"sidebar-overlay "+(e?"":"show"),onClick:n,"aria-hidden":"true"})},$r=()=>{const{isCollapsed:e,isMobile:t,toggleSidebar:n}=zr(),{unreadCount:i}=or(),r=c(),a=l(),{isAuthenticated:o,logout:h,user:d}=yn(),m=s.useRef(null),p=d||{fullName:"User",email:"",profileImage:"https://randomuser.me/api/portraits/lego/1.jpg",role:"Member"};return s.useEffect(()=>{(()=>{const n=document.documentElement;t?n.style.setProperty("--sidebar-current-width","0px"):n.style.setProperty("--sidebar-current-width",e?"80px":"280px")})()},[e,t]),s.useEffect(()=>{const n=()=>{const n=m.current;n&&(n.style.position="fixed",n.style.zIndex="2147483647",n.style.transform="none",n.style.webkitTransform="none",n.style.mozTransform="none",n.style.msTransform="none",n.style.oTransform="none",n.style.margin="0px",n.style.contain="none",n.style.isolation="auto",n.style.willChange="auto",n.style.backgroundAttachment="fixed",n.style.boxSizing="border-box",n.style.clip="auto",n.style.clipPath="none",n.style.mask="none",n.style.filter="none",n.style.mixBlendMode="normal",n.style.opacity="1",n.style.visibility="visible",n.style.backfaceVisibility="visible",n.style.webkitBackfaceVisibility="visible",n.style.perspective="none",n.style.webkitPerspective="none",t?(n.style.top="0px",n.style.left="0px",n.style.right="0px",n.style.width="100%",e?(n.style.bottom="auto",n.style.height="70px",n.style.maxHeight="70px",n.style.minHeight="70px",n.style.padding="12px 20px",n.style.display="flex",n.style.flexDirection="row",n.style.alignItems="center",n.style.justifyContent="space-between",n.style.overflow="hidden"):(n.style.bottom="0px",n.style.height="100vh",n.style.maxHeight="100vh",n.style.minHeight="100vh",n.style.padding="20px",n.style.display="flex",n.style.flexDirection="column",n.style.alignItems="stretch",n.style.justifyContent="flex-start",n.style.overflowY="auto")):(n.style.top="0px",n.style.left="0px",n.style.bottom="0px",n.style.right="auto",n.style.width=e?"80px":"280px",n.style.height="100vh",n.style.maxHeight="100vh",n.style.minHeight="100vh",n.style.padding=e?"24px 16px":"24px 20px",n.style.display="flex",n.style.flexDirection="column",n.style.overflowY="auto"))};n();const s=()=>{n()},i=()=>{n()},r=new MutationObserver(()=>{n()});return m.current&&r.observe(m.current,{attributes:!0,attributeFilter:["style","class"]}),window.addEventListener("scroll",s,{passive:!0}),window.addEventListener("resize",i,{passive:!0}),document.addEventListener("scroll",s,{passive:!0}),()=>{window.removeEventListener("scroll",s),window.removeEventListener("resize",i),document.removeEventListener("scroll",s),r.disconnect()}},[e,t]),M.jsxs("div",{ref:m,className:`sidebar ${e?"collapsed":""} ${t?"mobile":""}`,role:"navigation","aria-label":"Main navigation",children:[M.jsxs("div",{className:"top-section",children:[M.jsx("button",{className:"toggle-btn",onClick:e=>{e.preventDefault(),e.stopPropagation(),n()},type:"button","aria-label":e?"Expand sidebar navigation":"Collapse sidebar navigation",title:e?"Expand sidebar":"Collapse sidebar","aria-expanded":!e,children:M.jsx(_t,{})}),(!e||t)&&M.jsxs("div",{className:"logo-section",children:[M.jsx("h1",{className:"logo",role:"banner",children:"⚡ TradeBro"}),!e&&M.jsx(Fr,{position:"navbar",size:"small",showLabel:!1,className:"sidebar-voice-btn"})]})]}),!e&&M.jsxs("div",{className:"user-profile",children:[M.jsxs("div",{className:"user-avatar",children:[p.profileImage||p.picture?M.jsx("img",{src:p.profileImage||p.picture,alt:p.fullName||p.name,className:"avatar-image",onError:e=>{e.target.style.display="none",e.target.nextSibling.style.display="flex"}}):null,M.jsx("div",{className:"avatar-symbol",style:{display:p.profileImage||p.picture?"none":"flex"},children:"👤"})]}),M.jsxs("div",{className:"user-info",children:[M.jsx("h3",{className:"user-name",children:p.fullName||p.name||p.email}),M.jsx("p",{className:"user-role",children:p.role||"Member"})]})]}),M.jsx("nav",{role:"navigation","aria-label":"Main menu",children:M.jsxs("ul",{className:"sidebar-links",children:[M.jsx("li",{children:M.jsxs(u,{to:"/dashboard",className:"sidebar-link "+("/dashboard"===r.pathname?"active":""),"aria-current":"/dashboard"===r.pathname?"page":void 0,title:"Dashboard",children:[M.jsx(Ke,{"aria-hidden":"true"}),!e&&M.jsx("span",{children:"Dashboard"})]})}),M.jsx("li",{children:M.jsxs(u,{to:"/charts",className:"sidebar-link "+("/charts"===r.pathname?"active":""),children:[M.jsx(cn,{}),!e&&M.jsx("span",{children:"Charts"})]})}),M.jsx("li",{children:M.jsxs(u,{to:"/portfolio",className:"sidebar-link "+("/portfolio"===r.pathname?"active":""),children:[M.jsx($t,{}),!e&&M.jsx("span",{children:"Portfolio"})]})}),M.jsx("li",{children:M.jsxs(u,{to:"/watchlist",className:"sidebar-link "+("/watchlist"===r.pathname?"active":""),children:[M.jsx(et,{}),!e&&M.jsx("span",{children:"Watchlist"})]})}),M.jsx("li",{children:M.jsxs(u,{to:"/orders",className:"sidebar-link "+("/orders"===r.pathname?"active":""),children:[M.jsx(en,{}),!e&&M.jsx("span",{children:"Orders"})]})}),M.jsx("li",{children:M.jsxs(u,{to:"/history",className:"sidebar-link "+("/history"===r.pathname?"active":""),children:[M.jsx(at,{}),!e&&M.jsx("span",{children:"History"})]})}),M.jsx("li",{children:M.jsxs(u,{to:"/news",className:"sidebar-link "+("/news"===r.pathname?"active":""),children:[M.jsx(yt,{}),!e&&M.jsx("span",{children:"News"})]})}),M.jsx("li",{children:M.jsx(u,{to:"/notifications",className:"sidebar-link "+("/notifications"===r.pathname?"active":""),children:M.jsxs("div",{className:"sidebar-link-content",children:[M.jsxs("div",{className:"sidebar-icon-wrapper",children:[M.jsx(Ze,{}),i>0&&M.jsx("span",{className:"notification-badge",children:i>99?"99+":i})]}),!e&&M.jsx("span",{children:"Notifications"})]})})}),M.jsx("li",{children:M.jsxs(u,{to:"/saytrix",className:`sidebar-link ${"/saytrix"===r.pathname||"/chatbot"===r.pathname?"active":""} highlight`,children:[M.jsx(Dt,{}),!e&&M.jsx("span",{children:"Saytrix AI"})]})})]})}),M.jsxs("div",{className:"sidebar-bottom",children:[M.jsxs("div",{className:"sidebar-actions",children:[M.jsxs(u,{to:"/profile",className:"sidebar-link "+("/profile"===r.pathname?"active":""),children:[M.jsx(un,{}),!e&&M.jsx("span",{children:"Profile"})]}),M.jsxs(u,{to:"/settings",className:"sidebar-link "+("/settings"===r.pathname?"active":""),children:[M.jsx(Xt,{}),!e&&M.jsx("span",{children:"Settings"})]}),M.jsxs("button",{onClick:()=>{h(),a("/login")},className:"sidebar-link logout-btn","aria-label":"Logout from TradeBro",title:"Logout from TradeBro",children:[M.jsx(Lt,{}),!e&&M.jsx("span",{children:"Logout"})]})]}),!e&&M.jsxs("div",{className:"sidebar-footer",children:[M.jsx("p",{className:"copyright",children:"© 2024 TradeBro ⚡"}),M.jsx("p",{className:"version",children:"v1.0.0 • 🚀"})]})]})]})},Hr=()=>{const e=c(),{isAuthenticated:t}=yn();return t&&!["/login","/signup","/"].includes(e.pathname)?M.jsxs(Wr,{children:[M.jsx(Ur,{}),M.jsx(Vr,{}),M.jsx($r,{})]}):null},qr=({isAuthenticated:e})=>e?null:M.jsxs(v.div,{className:"card card-glass",style:{position:"fixed",bottom:"24px",right:"24px",width:"320px",zIndex:999,background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.2)",boxShadow:"0 8px 20px rgba(0, 0, 0, 0.2)",borderRadius:"12px"},initial:{opacity:0,y:100,scale:.8},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:100,scale:.8},transition:{duration:.5,type:"spring",stiffness:100},children:[M.jsx("div",{className:"card-header",style:{padding:"16px"},children:M.jsxs("div",{className:"d-flex align-center gap-md",children:[M.jsx("div",{style:{width:"40px",height:"40px",background:"linear-gradient(135deg, #4facfe, #00f2fe)",borderRadius:"8px",color:"#fff",display:"flex",alignItems:"center",justifyContent:"center"},children:M.jsx(Et,{size:20})}),M.jsxs("div",{children:[M.jsx("h3",{style:{fontSize:"1rem",marginBottom:"4px"},children:"Sign In Required"}),M.jsx("p",{style:{fontSize:"0.75rem",color:"#ccc"},children:"Access premium features"})]})]})}),M.jsxs("div",{className:"card-body",style:{padding:"16px"},children:[M.jsx("p",{style:{fontSize:"0.875rem",color:"#bbb",marginBottom:"16px",lineHeight:1.5},children:"Sign in to access your portfolio, trading tools, and personalized insights."}),M.jsxs("div",{className:"d-flex gap-sm",children:[M.jsxs(u,{to:"/login",className:"btn btn-primary btn-sm flex-1",children:[M.jsx(un,{size:14})," Sign In"]}),M.jsxs(u,{to:"/signup",className:"btn btn-outline btn-sm flex-1",children:[M.jsx(Ge,{size:14})," Sign Up"]})]})]})]}),Yr={STOCK_SEARCH:"tradebro_stock_search_history",NEWS_SEARCH:"tradebro_news_search_history",ORDER_SEARCH:"tradebro_order_search_history",GLOBAL_SEARCH:"tradebro_global_search_history"},Gr=e=>{try{const t=Yr[`${e.toUpperCase()}_SEARCH`]||Yr.GLOBAL_SEARCH,n=localStorage.getItem(t);return n?JSON.parse(n):[]}catch(t){return[]}},Qr=e=>Gr(e).slice(0,5),Jr=(e,t={})=>{const[n,i]=s.useState(""),[r,a]=s.useState([]),[o,l]=s.useState([]),[c,u]=s.useState(!1),[h,d]=s.useState(null),[m,p]=s.useState(null),[f,g]=s.useState([]),[y,v]=s.useState(!1),{debounceMs:x=300,minQueryLength:b=2,limit:w=10,enableSuggestions:j=!0,enableHistory:k=!0,filters:N={},onResults:S=null,onError:C=null}=t;s.useEffect(()=>{k&&g(Qr(e))},[e,k]);const P=s.useCallback(e=>{m&&clearTimeout(m);const t=setTimeout(async()=>{e.length>=b?await E(e):(a([]),l([]),d(null))},x);p(t)},[m,b,x]),E=s.useCallback(async t=>{if(t&&!(t.length<b)){u(!0),d(null);try{let n=[],s=[];switch(e){case"stocks":const i=await br.searchStocks(t,w);if(n=i.success?i.results:[],n.length>0){const e=n.filter(e=>"NSE"===e.exchange||"BSE"===e.exchange||e.symbol.endsWith(".NS")||e.symbol.endsWith(".BO")),t=n.filter(e=>!("NSE"===e.exchange||"BSE"===e.exchange||e.symbol.endsWith(".NS")||e.symbol.endsWith(".BO")));n=[...e,...t]}j&&t.length>=1&&(s=n.slice(0,5));break;case"news":const r=await _r.searchNews(t,w);n=r.success?r.data:[];break;case"orders":const a=await Lr.searchOrders(t,N);n=a.success?a.data:[];break;case"watchlist":const o=await Mr.searchStocks(t,w);n=o.success?o.data:[];break;default:throw new Error(`Unsupported search type: ${e}`)}a(n),l(s),k&&n.length>0&&(((e,t,n={})=>{if(t&&!(t.trim().length<2))try{const s=Yr[`${e.toUpperCase()}_SEARCH`]||Yr.GLOBAL_SEARCH,i=Gr(e),r=[{query:t.trim(),timestamp:Date.now(),type:e,...n},...i.filter(e=>e.query.toLowerCase()!==t.toLowerCase())].slice(0,10);localStorage.setItem(s,JSON.stringify(r))}catch(h){}})(e,t,{resultsCount:n.length,hasResults:!0}),g(Qr(e))),S&&S(n,t)}catch(n){d(n.message||"Search failed"),a([]),l([]),C&&C(n,t)}finally{u(!1)}}},[e,w,b,j,N,S,C]),T=s.useCallback(e=>{i(e),P(e)},[P]),L=s.useCallback(()=>{i(""),a([]),l([]),d(null),m&&clearTimeout(m)},[m]),M=s.useCallback((e=n)=>{E(e)},[E,n]);s.useEffect(()=>()=>{m&&clearTimeout(m)},[m]);const I=s.useCallback(e=>{i(e.query),v(!1),M(e.query)},[M]);return s.useMemo(()=>({query:n,results:r,suggestions:o,loading:c,error:h,recentSearches:f,showHistory:y,setQuery:T,clearSearch:L,triggerSearch:M,setShowHistory:v,handleHistoryClick:I,hasResults:r.length>0,hasSuggestions:o.length>0,hasRecentSearches:f.length>0,isEmpty:!c&&0===r.length&&n.length>=b,searchType:e,minQueryLength:b,enableHistory:k}),[n,r,o,c,h,f,y,T,L,M,I,e,b,k])},Xr=(e={})=>Jr("stocks",{enableSuggestions:!0,limit:10,...e}),Kr=(e={})=>Jr("news",{enableSuggestions:!1,limit:20,...e}),Zr=({placeholder:e="Search...",value:t="",onChange:n,onSearch:i,onClear:r,suggestions:a=[],onSuggestionClick:o,recentSearches:l=[],onHistoryClick:c,showHistory:u=!1,loading:h=!1,disabled:d=!1,size:m="md",showSuggestions:p=!0,enableHistory:f=!0,renderSuggestion:g,renderHistoryItem:x,className:b="",autoFocus:w=!1,...j})=>{const[k,N]=s.useState(!1),[S,C]=s.useState(!1),[P,E]=s.useState(-1),T=s.useRef(null),L=s.useRef(null),I=e=>{var t;null==o||o(e),C(!1),null==(t=T.current)||t.blur()};s.useEffect(()=>{w&&T.current&&T.current.focus()},[w]),s.useEffect(()=>{p&&k&&a.length>0&&t.length>0?C(!0):C(!1)},[a,p,k,t]);const _=g||((e,t)=>{const n=e.symbol||e.title||e;return M.jsx("div",{className:"search-suggestion-item",children:M.jsxs("div",{className:"suggestion-content",children:[M.jsx("span",{className:"suggestion-text",children:n}),e.name&&M.jsx("span",{className:"suggestion-subtitle",children:e.name})]})},t)}),D=x||((e,t)=>M.jsx("div",{className:"search-history-item",children:M.jsxs("div",{className:"history-content",children:[M.jsx(at,{className:"history-icon"}),M.jsx("span",{className:"history-text",children:e.query}),M.jsx("span",{className:"history-time",children:new Date(e.timestamp).toLocaleDateString()})]})},t)),A=f&&u&&l.length>0&&!t,O=p&&a.length>0&&t;return M.jsxs("div",{className:`search-input-container ${b} size-${m}`,children:[M.jsxs("div",{className:`search-input-wrapper ${k?"focused":""} ${d?"disabled":""}`,children:[M.jsx(Qt,{className:"search-icon"}),M.jsx("input",{ref:T,type:"text",className:"search-input",placeholder:e,value:t,onChange:e=>{const t=e.target.value;null==n||n(t),p&&t.length>0&&a.length>0?C(!0):C(!1)},onFocus:()=>{N(!0),p&&a.length>0&&C(!0)},onBlur:e=>{setTimeout(()=>{var e;(null==(e=L.current)?void 0:e.contains(document.activeElement))||(N(!1),C(!1))},150)},onKeyDown:e=>{var n;const s=(()=>{const e=[];return A&&e.push(...l.map(e=>({type:"history",data:e}))),O&&e.push(...a.map(e=>({type:"suggestion",data:e}))),e})();if("ArrowDown"===e.key)e.preventDefault(),s.length>0&&(E(e=>e<s.length-1?e+1:0),S||C(!0));else if("ArrowUp"===e.key)e.preventDefault(),s.length>0&&(E(e=>e>0?e-1:s.length-1),S||C(!0));else if("Enter"===e.key){if(e.preventDefault(),P>=0&&s[P]){const e=s[P];"history"===e.type?null==c||c(e.data):I(e.data)}else null==i||i(t);C(!1),E(-1)}else"Escape"===e.key?(C(!1),E(-1),null==(n=T.current)||n.blur()):E(-1)},disabled:d,...j}),M.jsxs("div",{className:"search-actions",children:[h&&M.jsx(Pt,{className:"search-loading animate-spin"}),t&&!h&&M.jsx("button",{type:"button",className:"search-clear",onClick:()=>{var e;null==n||n(""),null==r||r(),C(!1),null==(e=T.current)||e.focus()},disabled:d,children:M.jsx(pn,{})})]})]}),M.jsx(y,{children:S&&(A||O)&&M.jsxs(v.div,{ref:L,className:"search-suggestions-dropdown",initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.15},children:[A&&M.jsxs("div",{className:"history-section",children:[M.jsx("div",{className:"section-header",children:M.jsx("span",{className:"section-title",children:"Recent Searches"})}),M.jsx("div",{className:"history-list",children:l.map((e,t)=>{const n=P===t;return M.jsx(v.div,{className:"history-item-wrapper "+(n?"selected":""),onClick:()=>null==c?void 0:c(e),whileHover:{backgroundColor:"var(--hover-bg)"},transition:{duration:.1},children:D(e,t)},`history-${t}`)})})]}),O&&M.jsxs("div",{className:"suggestions-section",children:[A&&M.jsx("div",{className:"section-header",children:M.jsx("span",{className:"section-title",children:"Suggestions"})}),M.jsx("div",{className:"suggestions-list",children:a.map((e,t)=>{const n=A?l.length+t:t,s=P===n;return M.jsx(v.div,{className:"suggestion-item-wrapper "+(s?"selected":""),onClick:()=>I(e),whileHover:{backgroundColor:"var(--hover-bg)"},transition:{duration:.1},children:_(e,t)},`suggestion-${t}`)})})]})]})})]})},ea=({isOpen:e,onClose:t,onSearch:n})=>{const[i,r]=s.useState("stocks"),[a,o]=s.useState(""),l=s.useRef(null),c=Xr({enableSuggestions:!0,enableHistory:!0,limit:8}),u=Kr({enableSuggestions:!1,enableHistory:!0,limit:6}),h=(()=>{switch(i){case"stocks":default:return c;case"news":return u}})(),d=e=>{e.trim()&&n(e.trim(),i)},m=e=>{const t=e.query||e.symbol||e.title||e;d(t)};s.useEffect(()=>{const n=e=>{l.current&&!l.current.contains(e.target)&&t()};if(e)return document.addEventListener("mousedown",n),()=>document.removeEventListener("mousedown",n)},[e,t]),s.useEffect(()=>{e&&setTimeout(()=>{var e;const t=null==(e=l.current)?void 0:e.querySelector(".search-input");null==t||t.focus()},100)},[e]);const p=[{id:"stocks",label:"Stocks",icon:cn,placeholder:"Search stocks, symbols...",shortcut:"S"},{id:"news",label:"News",icon:bt,placeholder:"Search news articles...",shortcut:"N"},{id:"orders",label:"Orders",icon:en,placeholder:"Search orders by symbol...",shortcut:"O"}],f=p.find(e=>e.id===i);return M.jsx(y,{children:e&&M.jsxs(M.Fragment,{children:[M.jsx(v.div,{className:"global-search-backdrop",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},onClick:t}),M.jsxs(v.div,{ref:l,className:"global-search-modal",initial:{opacity:0,scale:.95,y:-20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-20},transition:{duration:.2},children:[M.jsx("div",{className:"global-search-header",children:M.jsx("div",{className:"search-type-tabs",children:p.map(e=>{const t=e.icon;return M.jsxs("button",{className:"search-type-tab "+(i===e.id?"active":""),onClick:()=>(e=>{r(e),o(""),h.clearSearch()})(e.id),children:[M.jsx(t,{className:"tab-icon"}),M.jsx("span",{className:"tab-label",children:e.label}),M.jsx("kbd",{className:"tab-shortcut",children:e.shortcut})]},e.id)})})}),M.jsx("div",{className:"global-search-input-container",children:M.jsx(Zr,{placeholder:(null==f?void 0:f.placeholder)||"Search...",value:h.query,onChange:h.setQuery,onSearch:d,onClear:h.clearSearch,suggestions:h.suggestions,recentSearches:h.recentSearches,onSuggestionClick:m,onHistoryClick:m,showHistory:h.showHistory,loading:h.loading,size:"lg",showSuggestions:!0,enableHistory:!0,className:"global-search-input",autoFocus:!0})}),M.jsxs("div",{className:"global-search-footer",children:[M.jsxs("div",{className:"search-shortcuts",children:[M.jsxs("div",{className:"shortcut-item",children:[M.jsx("kbd",{children:M.jsx(Je,{})}),M.jsx("kbd",{children:M.jsx(qe,{})}),M.jsx("span",{children:"Navigate"})]}),M.jsxs("div",{className:"shortcut-item",children:[M.jsx("kbd",{children:M.jsx(lt,{})}),M.jsx("span",{children:"Select"})]}),M.jsxs("div",{className:"shortcut-item",children:[M.jsx("kbd",{children:"Esc"}),M.jsx("span",{children:"Close"})]})]}),M.jsxs("div",{className:"search-branding",children:[M.jsx("span",{children:"Global Search"}),M.jsxs("div",{className:"shortcut-badge",children:[M.jsx(ot,{className:"command-icon"}),M.jsx("span",{children:"K"})]})]})]})]})]})})},ta=()=>{const{isVoiceModeActive:e,isListening:t,transcript:n,stopListening:s}=Or();return e?M.jsx("div",{className:"voice-modal-overlay",children:M.jsxs("div",{className:"voice-modal",children:[M.jsxs("div",{className:"voice-modal-header",children:[M.jsx("h3",{children:"🎤 Saytrix Voice Commands"}),M.jsx("button",{className:"voice-modal-close",onClick:s,"aria-label":"Close voice commands",children:M.jsx(pn,{})})]}),M.jsxs("div",{className:"voice-modal-content",children:[M.jsxs("div",{className:"voice-status",children:[M.jsxs("div",{className:"voice-indicator "+(t?"listening":""),children:[M.jsx(Ot,{}),M.jsx("div",{className:"pulse-ring"}),M.jsx("div",{className:"pulse-ring delay-1"}),M.jsx("div",{className:"pulse-ring delay-2"})]}),M.jsx("p",{className:"voice-status-text",children:t?"Listening for commands...":"Voice mode active"})]}),n&&M.jsx("div",{className:"voice-transcript",children:M.jsxs("p",{children:[M.jsx("strong",{children:"You said:"}),' "',n,'"']})}),M.jsxs("div",{className:"voice-commands-list",children:[M.jsx("h4",{children:"Available Commands:"}),M.jsxs("div",{className:"commands-grid",children:[M.jsxs("div",{className:"command-item",children:[M.jsx("span",{className:"command-text",children:'"Dashboard"'}),M.jsx("span",{className:"command-desc",children:"Go to dashboard"})]}),M.jsxs("div",{className:"command-item",children:[M.jsx("span",{className:"command-text",children:'"Charts"'}),M.jsx("span",{className:"command-desc",children:"Open charts"})]}),M.jsxs("div",{className:"command-item",children:[M.jsx("span",{className:"command-text",children:'"Portfolio"'}),M.jsx("span",{className:"command-desc",children:"View portfolio"})]}),M.jsxs("div",{className:"command-item",children:[M.jsx("span",{className:"command-text",children:'"Watchlist"'}),M.jsx("span",{className:"command-desc",children:"Open watchlist"})]}),M.jsxs("div",{className:"command-item",children:[M.jsx("span",{className:"command-text",children:'"Orders"'}),M.jsx("span",{className:"command-desc",children:"View orders"})]}),M.jsxs("div",{className:"command-item",children:[M.jsx("span",{className:"command-text",children:'"History"'}),M.jsx("span",{className:"command-desc",children:"Check history"})]}),M.jsxs("div",{className:"command-item",children:[M.jsx("span",{className:"command-text",children:'"News"'}),M.jsx("span",{className:"command-desc",children:"Read news"})]}),M.jsxs("div",{className:"command-item",children:[M.jsx("span",{className:"command-text",children:'"Notifications"'}),M.jsx("span",{className:"command-desc",children:"View notifications"})]}),M.jsxs("div",{className:"command-item",children:[M.jsx("span",{className:"command-text",children:'"Profile"'}),M.jsx("span",{className:"command-desc",children:"Open profile"})]}),M.jsxs("div",{className:"command-item",children:[M.jsx("span",{className:"command-text",children:'"Settings"'}),M.jsx("span",{className:"command-desc",children:"Open settings"})]}),M.jsxs("div",{className:"command-item",children:[M.jsx("span",{className:"command-text",children:'"Stop" / "Exit"'}),M.jsx("span",{className:"command-desc",children:"Close voice mode"})]})]})]}),M.jsx("div",{className:"voice-tips",children:M.jsxs("p",{children:[M.jsx("strong",{children:"💡 Tip:"}),' Say "Saytrix" anytime to activate voice commands']})})]})]})}):null},na=()=>{const{isListening:e,isVoiceModeActive:t,isSupported:n}=Or();return!n||t?null:M.jsxs("div",{className:"voice-status-indicator "+(e?"listening":""),children:[M.jsx("div",{className:"voice-status-icon",children:M.jsx(Ot,{})}),M.jsx("div",{className:"voice-status-text",children:M.jsx("span",{children:'Say "Saytrix" to activate'})}),e&&M.jsxs("div",{className:"voice-pulse-rings",children:[M.jsx("div",{className:"pulse-ring"}),M.jsx("div",{className:"pulse-ring delay-1"}),M.jsx("div",{className:"pulse-ring delay-2"})]})]})};const sa=new class{constructor(){this.portfolio=new Map,this.tradingHistory=[],this.virtualBalance=1e4,this.listeners=new Set,this.dailyRewards={lastLoginDate:null,lastClaimDate:null,totalRewards:0,loginStreak:0},this.loadPortfolioFromStorage(),this.checkDailyLogin()}async _createAndStoreNotification(e){try{const t={id:`trade_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,...e,read:!1,createdAt:(new Date).toISOString()},n=JSON.parse(localStorage.getItem("tradebro_notifications")||"[]");return n.unshift(t),n.length>50&&n.splice(50),localStorage.setItem("tradebro_notifications",JSON.stringify(n)),Vi.notifyListeners("notification",t),t}catch(t){return null}}async createTradeNotification(e,t,n,s){await this._createAndStoreNotification({title:"Trade Executed Successfully",message:`Your ${s.toLowerCase()} order for ${t} shares of ${e} has been executed at ₹${n.toFixed(2)}`,type:"success",data:{symbol:e,quantity:t,price:n,action:s}})}async createRewardNotification(e,t){await this._createAndStoreNotification({title:"Daily Reward Claimed!",message:`You've earned ₹${e} daily bonus! Login streak: ${t} days`,type:"success",data:{amount:e,streak:t,type:"DAILY_REWARD"}})}loadPortfolioFromStorage(){try{const e=localStorage.getItem("tradebro_portfolio"),t=localStorage.getItem("tradebro_balance"),n=localStorage.getItem("tradebro_history"),s=localStorage.getItem("tradebro_daily_rewards");if(e){const t=JSON.parse(e);this.portfolio=new Map(Object.entries(t))}this.virtualBalance=t?parseFloat(t):1e4,n&&(this.tradingHistory=JSON.parse(n)),s&&(this.dailyRewards=JSON.parse(s))}catch(e){this.virtualBalance=1e4,this.dailyRewards={lastLoginDate:null,lastClaimDate:null,totalRewards:0,loginStreak:0}}}savePortfolioToStorage(){try{const e=Object.fromEntries(this.portfolio);localStorage.setItem("tradebro_portfolio",JSON.stringify(e)),localStorage.setItem("tradebro_balance",this.virtualBalance.toString()),localStorage.setItem("tradebro_history",JSON.stringify(this.tradingHistory)),localStorage.setItem("tradebro_daily_rewards",JSON.stringify(this.dailyRewards))}catch(e){}}addListener(e){this.listeners.add(e)}removeListener(e){this.listeners.delete(e)}notifyListeners(){this.listeners.forEach(e=>{try{e(this.getPortfolioSummary())}catch(t){}})}hasHoldings(e){const t=this.portfolio.get(e);return t&&t.quantity>0}getPosition(e){return this.portfolio.get(e)||{symbol:e,quantity:0,avgPrice:0,totalInvested:0,currentValue:0,pnl:0,pnlPercentage:0,lastUpdated:new Date}}getPortfolioSummary(){const e=Array.from(this.portfolio.values()).filter(e=>e.quantity>0);let t=0,n=0,s=0,i=0;e.forEach(e=>{t+=e.totalInvested,n+=e.currentValue||e.totalInvested,s+=(e.currentValue||e.totalInvested)-e.totalInvested,i+=e.realizedPnL||0});const r=t>0?s/t*100:0;return{totalValue:this.virtualBalance+n,availableCash:this.virtualBalance,totalInvested:t,totalCurrentValue:n,totalPnL:s,totalPnLPercentage:r,totalRealizedPnL:i,positions:e,totalPositions:e.length,lastUpdated:new Date}}getTradingHistory(e=100){return this.tradingHistory.slice(0,e)}calculateBrokerage(e){return Math.min(.001*e,20)}calculateTaxes(e,t){const n=345e-7*e;return("SELL"===t?25e-5*e:0)+n+.18*(this.calculateBrokerage(e)+n)+1e-6*e+("BUY"===t?3e-5*e:0)}calculateTradeMetrics(e,t,n,s){const i=this.getPosition(e),r=t*n,a=this.calculateBrokerage(r),o=this.calculateTaxes(r,s),l=r+a+o;let c={...i};if("BUY"===s){const e=i.quantity+t,n=i.totalInvested+l;c={...i,quantity:e,avgPrice:n/e,totalInvested:n,lastUpdated:new Date}}else if("SELL"===s){if(i.quantity<t)throw new Error(`Insufficient holdings. You have ${i.quantity} shares, trying to sell ${t}`);const e=i.quantity-t,n=r-a-o,s=t/i.quantity*i.totalInvested,l=n-s;c={...i,quantity:e,totalInvested:e>0?i.totalInvested-s:0,avgPrice:e>0?i.avgPrice:0,lastUpdated:new Date,realizedPnL:(i.realizedPnL||0)+l}}return{newPosition:c,tradeValue:r,brokerage:a,taxes:o,totalCost:"BUY"===s?l:r-a-o,realizedPnL:"SELL"===s?r-a-o-t/i.quantity*i.totalInvested:0}}async executeTrade(e,t,n,s,i="MARKET"){try{if(!(e&&t&&n&&s))throw new Error("Missing required trade parameters");if(t<=0||n<=0)throw new Error("Quantity and price must be positive");const r=this.calculateTradeMetrics(e,t,n,s);if("BUY"===s&&this.virtualBalance<r.totalCost)throw new Error(`Insufficient balance. Required: ₹${r.totalCost.toFixed(2)}, Available: ₹${this.virtualBalance.toFixed(2)}`);this.portfolio.set(e,r.newPosition),"BUY"===s?this.virtualBalance-=r.totalCost:this.virtualBalance+=r.totalCost;const a={id:Date.now().toString(),symbol:e,quantity:t,price:n,action:s,orderType:i,tradeValue:r.tradeValue,brokerage:r.brokerage,taxes:r.taxes,totalCost:r.totalCost,realizedPnL:r.realizedPnL,timestamp:new Date,status:"EXECUTED"};return this.tradingHistory.unshift(a),this.tradingHistory.length>1e3&&(this.tradingHistory=this.tradingHistory.slice(0,1e3)),this.savePortfolioToStorage(),this.notifyListeners(),this.createTradeNotification(e,t,n,s),{success:!0,trade:a,newPosition:r.newPosition,newBalance:this.virtualBalance,message:`Successfully ${s.toLowerCase()}ed ${t} shares of ${e}`}}catch(r){return{success:!1,error:r.message}}}async buyStock(e,t,n,s="market"){return this.executeTrade(e,t,n,"BUY",s)}async sellStock(e,t,n,s="market"){return this.executeTrade(e,t,n,"SELL",s)}async getPortfolio(){return{success:!0,data:this.getPortfolioSummary()}}async getHoldings(){return{success:!0,data:this.getPortfolioSummary().positions}}async getVirtualMoneyAccount(){return{success:!0,data:{balance:this.virtualBalance,totalInvested:this.getPortfolioSummary().totalInvested,totalReturns:this.getPortfolioSummary().totalPnL}}}async checkDailyLogin(){try{const e=(new Date).toDateString(),t=this.dailyRewards.lastClaimDate;if(t===e)return{awarded:!1,alreadyClaimed:!0,streak:this.dailyRewards.loginStreak,message:"You've already claimed your daily reward today! Come back tomorrow."};if(!t||t!==e){const t=100,n=this.virtualBalance;this.virtualBalance+=t;const s=new Date;s.setDate(s.getDate()-1);const i=this.dailyRewards.lastLoginDate===s.toDateString();return this.dailyRewards={lastLoginDate:e,lastClaimDate:e,totalRewards:this.dailyRewards.totalRewards+t,loginStreak:i?this.dailyRewards.loginStreak+1:1},this.tradingHistory.unshift({id:`daily_${Date.now()}`,type:"BONUS",symbol:"DAILY_REWARD",quantity:1,price:t,total:t,timestamp:new Date,description:`Daily login bonus - Day ${this.dailyRewards.loginStreak}`,balanceBefore:n,balanceAfter:this.virtualBalance}),this.savePortfolioToStorage(),await this.syncWithServer(),this.notifyListeners(),this.createRewardNotification(t,this.dailyRewards.loginStreak),{awarded:!0,amount:t,streak:this.dailyRewards.loginStreak,totalRewards:this.dailyRewards.totalRewards,newBalance:this.virtualBalance,oldBalance:n}}return{awarded:!1,alreadyClaimed:!1,streak:this.dailyRewards.loginStreak,totalRewards:this.dailyRewards.totalRewards}}catch(e){return{awarded:!1,error:e.message}}}getDailyRewardsInfo(){const e=(new Date).toDateString(),t=this.dailyRewards.lastClaimDate,n=!t||t!==e;return{...this.dailyRewards,canClaimToday:n,alreadyClaimedToday:t===e,timeUntilNextReward:this.getTimeUntilNextReward()}}getTimeUntilNextReward(){const e=this.dailyRewards.lastClaimDate;if(!e)return null;const t=new Date(e),n=new Date(t);n.setDate(n.getDate()+1),n.setHours(0,0,0,0);const s=new Date,i=n.getTime()-s.getTime();if(i<=0)return null;return{hours:Math.floor(i/36e5),minutes:Math.floor(i%36e5/6e4),totalMinutes:Math.floor(i/6e4),nextRewardTime:n.toISOString()}}async claimDailyReward(){try{const e=(new Date).toDateString(),t=this.dailyRewards.lastClaimDate;if(t&&t===e)return{success:!1,alreadyClaimed:!0,message:"You've already claimed your daily reward today!",timeUntilNext:this.getTimeUntilNextReward()};const n=100,s=this.virtualBalance;this.virtualBalance+=n;const i=new Date;i.setDate(i.getDate()-1);const r=this.dailyRewards.lastLoginDate===i.toDateString();return this.dailyRewards={lastLoginDate:e,lastClaimDate:e,totalRewards:this.dailyRewards.totalRewards+n,loginStreak:r?this.dailyRewards.loginStreak+1:1},this.tradingHistory.unshift({id:`daily_${Date.now()}`,type:"BONUS",symbol:"DAILY_REWARD",quantity:1,price:n,total:n,timestamp:new Date,description:`Daily login bonus - Day ${this.dailyRewards.loginStreak}`,balanceBefore:s,balanceAfter:this.virtualBalance}),this.savePortfolioToStorage(),await this.syncPortfolioData(),this.createRewardNotification(n,this.dailyRewards.loginStreak),this.notifyListeners(),{success:!0,awarded:!0,amount:n,streak:this.dailyRewards.loginStreak,totalRewards:this.dailyRewards.totalRewards,newBalance:this.virtualBalance,oldBalance:s}}catch(e){return{success:!1,error:e.message}}}forceDailyReward(){this.dailyRewards.lastLoginDate=null,this.dailyRewards.lastClaimDate=null,this.savePortfolioToStorage();const e=this.checkDailyLogin();return setTimeout(()=>{this.notifyListeners()},100),e}async syncPortfolioData(){try{return this.savePortfolioToStorage(),await this.syncWithServer(),this.notifyListeners(),{success:!0,summary:this.getPortfolioSummary(),rewards:this.getDailyRewardsInfo()}}catch(e){return{success:!1,error:e.message}}}async syncWithServer(){try{if(!localStorage.getItem("token"))return;(await kr.post("/virtual-money/sync-balance",{balance:this.virtualBalance,totalRewards:this.dailyRewards.totalRewards,loginStreak:this.dailyRewards.loginStreak,lastClaimDate:this.dailyRewards.lastClaimDate})).status}catch(e){}}clearAllData(){this.portfolio.clear(),this.tradingHistory=[],this.virtualBalance=1e4,this.dailyRewards={lastLoginDate:null,lastClaimDate:null,totalRewards:0,loginStreak:0},localStorage.removeItem("tradebro_portfolio"),localStorage.removeItem("tradebro_balance"),localStorage.removeItem("tradebro_history"),localStorage.removeItem("tradebro_daily_rewards"),this.notifyListeners()}},ia=s.createContext(),ra=()=>{const e=s.useContext(ia);if(!e)throw new Error("usePortfolio must be used within a PortfolioProvider");return e},aa=({children:e,user:t})=>{const[n,i]=s.useState({totalValue:1e4,availableCash:1e4,totalInvested:0,totalGainLoss:0,totalGainLossPercentage:0,holdings:[],transactions:[],watchlist:[]}),[r,a]=s.useState(!1);s.useEffect(()=>{const e=e=>{i(t=>({...t,totalValue:e.totalValue,availableCash:e.availableCash,totalInvested:e.totalInvested,totalGainLoss:e.totalPnL,totalGainLossPercentage:e.totalPnLPercentage,holdings:e.positions.map(e=>({symbol:e.symbol,quantity:e.quantity,avgPrice:e.avgPrice,currentPrice:e.currentValue/e.quantity||e.avgPrice,totalValue:e.currentValue||e.totalInvested,gainLoss:(e.currentValue||e.totalInvested)-e.totalInvested,gainLossPercentage:e.totalInvested>0?((e.currentValue||e.totalInvested)-e.totalInvested)/e.totalInvested*100:0}))}))};sa.addListener(e);const t=sa.getPortfolioSummary();e(t);const n=setTimeout(()=>{const t=sa.getPortfolioSummary();e(t)},2e3),s=t=>{const n=sa.getPortfolioSummary();e(n)};return window.addEventListener("balanceUpdated",s),()=>{sa.removeListener(e),window.removeEventListener("balanceUpdated",s),clearTimeout(n)}},[]),s.useEffect(()=>{const e=localStorage.getItem("token"),n=(null==t?void 0:t.id)||(null==t?void 0:t._id);if(t&&n&&e){const e=setTimeout(()=>{o()},100);return()=>clearTimeout(e)}i({totalValue:1e4,availableCash:1e4,totalInvested:0,totalGainLoss:0,totalGainLossPercentage:0,holdings:[],transactions:[],watchlist:[]})},[t]);const o=async()=>{a(!0);try{const e=sa.getPortfolioSummary(),t=sa.getTradingHistory(100);i({totalValue:e.totalValue,availableCash:e.availableCash,totalInvested:e.totalInvested,totalGainLoss:e.totalPnL,totalGainLossPercentage:e.totalPnLPercentage,holdings:e.positions.map(e=>({symbol:e.symbol,quantity:e.quantity,avgPrice:e.avgPrice,currentPrice:e.currentValue/e.quantity||e.avgPrice,totalValue:e.currentValue||e.totalInvested,gainLoss:(e.currentValue||e.totalInvested)-e.totalInvested,gainLossPercentage:e.totalInvested>0?((e.currentValue||e.totalInvested)-e.totalInvested)/e.totalInvested*100:0})),transactions:t,watchlist:[]})}catch(e){}finally{a(!1)}},l=s.useCallback(async(e,t,n,s=null)=>{try{a(!0);const s=await sa.buyStock(e,t,n);if(!s.success)throw new Error(s.error);try{await h(e)}catch(i){}return s}catch(r){throw r}finally{a(!1)}},[n.holdings]),c=s.useCallback(async(e,t,s,i=null)=>{try{a(!0);const o=n.holdings.find(t=>t.symbol===e),l=o&&o.quantity<=t,c=await sa.sellStock(e,t,s);if(!c.success)throw new Error(c.error);if(l)try{const t=i||{symbol:e,name:(null==o?void 0:o.name)||e,price:s,sector:(null==o?void 0:o.sector)||"Unknown"};await u(e,t)}catch(r){}return c}catch(o){throw o}finally{a(!1)}},[n.holdings]),u=async(e,n=null)=>{try{const s=localStorage.getItem("token"),r={userId:(null==t?void 0:t.id)||(null==t?void 0:t._id),symbol:e};n&&(n.name&&(r.name=n.name),n.sector&&(r.sector=n.sector),n.price&&(r.currentPrice=n.price));const a=await fetch("https://s89-satya-capstone-tradebro.onrender.com/api/portfolio/watchlist/add",{method:"POST",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify(r)});if(a.ok){const e=await a.json();return i(t=>({...t,watchlist:e})),e}if((await fetch("https://s89-satya-capstone-tradebro.onrender.com/api/watchlist/add",{method:"POST",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify({symbol:e,name:(null==n?void 0:n.name)||"",notes:"Added after selling position"})})).ok)return!0}catch(s){throw s}},h=async e=>{try{const n=localStorage.getItem("token"),s=await fetch("https://s89-satya-capstone-tradebro.onrender.com/api/portfolio/watchlist/remove",{method:"DELETE",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:JSON.stringify({userId:(null==t?void 0:t.id)||(null==t?void 0:t._id),symbol:e})});if(s.ok){const e=await s.json();return i(t=>({...t,watchlist:e})),e}return(await fetch(`https://s89-satya-capstone-tradebro.onrender.com/api/watchlist/remove/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"}})).ok,!0}catch(n){return!0}},d=s.useCallback(async()=>{try{const e=localStorage.getItem("token"),n=(null==t?void 0:t.id)||(null==t?void 0:t._id),s=await fetch(`https://s89-satya-capstone-tradebro.onrender.com/api/portfolio/update-values/${n}`,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(s.ok){const e=await s.json();return i(e),e}}catch(e){}},[null==t?void 0:t.id]),m=s.useCallback(()=>{const e=sa.getPortfolioSummary(),t=sa.getDailyRewardsInfo();i(n=>({...n,totalValue:e.totalValue,availableCash:e.availableCash,totalInvested:e.totalInvested,totalGainLoss:e.totalPnL,totalGainLossPercentage:e.totalPnLPercentage,dailyRewards:t,holdings:e.positions.map(e=>({symbol:e.symbol,quantity:e.quantity,avgPrice:e.avgPrice,currentPrice:e.currentValue/e.quantity||e.avgPrice,totalValue:e.currentValue||e.totalInvested,gainLoss:(e.currentValue||e.totalInvested)-e.totalInvested,gainLossPercentage:e.totalInvested>0?((e.currentValue||e.totalInvested)-e.totalInvested)/e.totalInvested*100:0}))}))},[]),p=s.useCallback(e=>{setTimeout(()=>{m()},100)},[m]),f={portfolioData:n,loading:r,buyStock:l,sellStock:c,addToWatchlist:u,removeFromWatchlist:h,updatePortfolioValues:d,initializePortfolio:o,refreshPortfolio:m,handleDailyReward:p};return M.jsx(ia.Provider,{value:f,children:e})},oa=s.memo(({symbol:e,price:t,change:n,changePercent:i,priceChange:r=null,showSymbol:a=!0,showChange:o=!0,size:l="medium",className:c=""})=>{const[u,h]=s.useState(!1),[d,m]=s.useState(null);s.useEffect(()=>{if(r&&r.direction){m(r.direction),h(!0);const e=setTimeout(()=>{h(!1)},2e3);return()=>clearTimeout(e)}},[r]);const p=s.useCallback(e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2,maximumFractionDigits:2}).format(e),[]),f=s.useCallback(e=>{if("number"!=typeof e||isNaN(e))return"--";return`${e>=0?"+":""}${e.toFixed(2)}%`},[]),{trendDirection:g,isPositive:x,formattedPrice:b,formattedChange:w}=s.useMemo(()=>({trendDirection:n>0?"up":n<0?"down":"neutral",isPositive:n>=0,formattedPrice:"number"==typeof t?p(t):t,formattedChange:"number"==typeof n?f(n):n}),[t,n,p,f]);return M.jsxs("div",{className:`stock-price ${l} ${c}`,children:[a&&M.jsx("div",{className:"stock-symbol",children:e}),M.jsxs("div",{className:"price-container",children:[M.jsxs(v.div,{className:"price-value "+(u?"animating":""),variants:{initial:{scale:1},animate:{scale:[1,1.05,1],transition:{duration:.6,ease:"easeInOut"}}},initial:"initial",animate:u?"animate":"initial",children:[p(t),M.jsx(y,{children:u&&M.jsx(v.div,{className:`price-flash ${d}`,variants:{initial:{opacity:0},animate:{opacity:[0,.3,0],transition:{duration:1,ease:"easeInOut"}}},initial:"initial",animate:"animate",exit:"initial"})})]}),o&&M.jsxs("div",{className:`price-change ${g}`,children:[M.jsxs("div",{className:"change-icon",children:["up"===g&&M.jsx(cn,{size:14}),"down"===g&&M.jsx(ln,{size:14}),"neutral"===g&&M.jsx(Rt,{size:14})]}),M.jsxs("div",{className:"change-values",children:[M.jsxs("span",{className:"change-amount",children:[x?"+":"",p(Math.abs(n))]}),M.jsxs("span",{className:"change-percent",children:["(",f(i),")"]})]})]})]}),M.jsx(y,{children:u&&M.jsx(v.div,{className:"pulse-indicator",initial:{scale:0,opacity:1},animate:{scale:2,opacity:0},exit:{scale:0,opacity:0},transition:{duration:1}})})]})});oa.displayName="StockPrice";const la=(e,t="INR")=>new Intl.NumberFormat("en-IN",{style:"currency",currency:t,minimumFractionDigits:2,maximumFractionDigits:2}).format(e),ca=(e,t=2)=>`${e>=0?"+":""}${e.toFixed(t)}%`,ua=(e,t=2)=>"number"!=typeof e?"₹0.00":`₹${e.toLocaleString("en-IN",{minimumFractionDigits:t,maximumFractionDigits:t})}`,ha=({notification:e,onClose:t,theme:n="light"})=>M.jsxs(v.div,{className:`notification-toast ${e.type} ${n}`,initial:{opacity:0,x:300,scale:.9},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:300,scale:.9},transition:{type:"spring",stiffness:300,damping:30},children:[M.jsx("div",{className:"toast-icon-container",children:(e=>{const t={size:20};switch(e){case"success":return M.jsx(it,{...t,className:"toast-icon success"});case"error":return M.jsx(mn,{...t,className:"toast-icon error"});case"warning":return M.jsx($e,{...t,className:"toast-icon warning"});case"alert":return M.jsx(Ve,{...t,className:"toast-icon alert"});default:return M.jsx(kt,{...t,className:"toast-icon info"})}})(e.type)}),M.jsxs("div",{className:"toast-content",children:[M.jsx("div",{className:"toast-title",children:e.title}),e.message&&M.jsx("div",{className:"toast-message",children:e.message}),e.link&&M.jsxs(v.button,{className:"toast-action",onClick:()=>{e.link&&window.open(e.link,"_blank")},whileHover:{scale:1.05},whileTap:{scale:.95},children:["View Details",M.jsx(ft,{size:14})]})]}),M.jsx(v.button,{className:"toast-close",onClick:t,whileHover:{scale:1.1},whileTap:{scale:.9},"aria-label":"Dismiss notification",children:M.jsx(pn,{size:16})})]}),da=(e,t="light")=>{const n={toastId:`notification-${e.id}`,position:"top-right",autoClose:"error"===e.type?7e3:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,closeButton:!1,className:`toast-container-wrapper ${t}`},s=({closeToast:n})=>M.jsx(ha,{notification:e,onClose:n,theme:t});switch(e.type){case"success":return We.success(s,n);case"error":return We.error(s,n);case"warning":return We.warning(s,n);default:return We.info(s,n)}},ma={success:(e,t,n,s,i="light")=>{const r={id:Date.now(),type:"success",title:`${e} Order Executed`,message:`${"buy"===e?"Bought":"Sold"} ${n} shares of ${t} at ₹${s.toLocaleString("en-IN")}`,link:"/orders"};return da(r,i)},pending:(e,t,n,s="light")=>{const i={id:Date.now(),type:"info",title:`${e} Order Pending`,message:`Placing ${e} order for ${n} shares of ${t}`,link:"/orders"};return da(i,s)},error:(e,t,n="light")=>{const s={id:Date.now(),type:"error",title:"Order Failed",message:t||e,link:"/orders"};return da(s,n)}};class pa{constructor(){this.intervals=new Set,this.timeouts=new Set,this.listeners=new Set}addInterval(e){return this.intervals.add(e),e}addTimeout(e){return this.timeouts.add(e),e}addListener(e,t,n){const s={element:e,event:t,handler:n};return this.listeners.add(s),e.addEventListener(t,n),s}cleanup(){this.intervals.forEach(e=>clearInterval(e)),this.intervals.clear(),this.timeouts.forEach(e=>clearTimeout(e)),this.timeouts.clear(),this.listeners.forEach(({element:e,event:t,handler:n})=>{e.removeEventListener(t,n)}),this.listeners.clear()}}const fa=()=>{const e=s.useRef(new pa);return s.useEffect(()=>()=>{e.current.cleanup()},[]),e.current};class ga{constructor(e=100){this.maxSize=e,this.cache=new Map}get(e){if(this.cache.has(e)){const t=this.cache.get(e);return this.cache.delete(e),this.cache.set(e,t),t}return null}set(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){const e=this.cache.keys().next().value;this.cache.delete(e)}this.cache.set(e,t)}clear(){this.cache.clear()}size(){return this.cache.size}}const ya=(e,t)=>{const n=e>=0?"+":"";return{absolute:`${n}₹${Math.abs(e).toFixed(2)}`,percent:`${n}${t.toFixed(2)}%`,direction:e>0?"up":e<0?"down":"same"}},va=({stockData:e,orderType:t,quantity:n,orderPrice:i,averagePrice:r=null,className:a=""})=>{const[o,l]=s.useState(!1),[c,u]=s.useState(0),{getPrice:h,isConnected:d,lastUpdate:m}=((e=[],t=!0)=>{const[n,i]=s.useState({}),[r,a]=s.useState(!1),[o,l]=s.useState(null),[c,u]=s.useState(0),h=s.useRef(null),d=s.useRef(null),m=s.useRef(null),p=s.useRef([]),f=s.useRef(null);s.useRef(new ga(1e3)),fa();const g={wsUrl:"wss://ws.finnhub.io?token=YOUR_FINNHUB_TOKEN",fallbackInterval:t?3e4:6e4,debounceDelay:50,reconnectDelay:5e3,maxReconnectAttempts:5,batchSize:10,maxCacheAge:3e4},y=s.useCallback(()=>{if(0===p.current.length)return;const e=[...p.current];p.current=[];const t=e.reduce((e,t)=>(e[t.symbol]=t,e),{});i(e=>{const n={...e};let s=!1;return Object.values(t).forEach(e=>{const t=n[e.symbol];t&&t.price===e.price||(n[e.symbol]={...e,previousPrice:(null==t?void 0:t.price)||e.price,priceDirection:t?e.price>t.price?"up":e.price<t.price?"down":"same":"same",lastUpdated:(new Date).toISOString()},s=!0)}),s&&(l((new Date).toISOString()),u(e=>e+1)),n})},[]),v=s.useCallback(e=>{p.current.push(e),f.current&&clearTimeout(f.current),f.current=setTimeout(()=>{y()},g.debounceDelay)},[y,g.debounceDelay]),x=s.useCallback(()=>{if(t&&0!==e.length)try{h.current=new WebSocket(g.wsUrl),h.current.onopen=()=>{a(!0),e.forEach(e=>{h.current.send(JSON.stringify({type:"subscribe",symbol:e.toUpperCase()}))})},h.current.onmessage=e=>{try{const t=JSON.parse(e.data);"trade"===t.type&&t.data.forEach(e=>{v({symbol:e.s,price:e.p,volume:e.v,timestamp:e.t,change:0,changePercent:0})})}catch(t){}},h.current.onclose=()=>{a(!1),t&&(m.current=setTimeout(()=>{x()},g.reconnectDelay))},h.current.onerror=e=>{a(!1)}}catch(n){a(!1)}},[t,e,v,g.wsUrl,g.reconnectDelay]),b=s.useCallback(async()=>{if(t&&0!==e.length)try{const t=e.map(async e=>{try{const t=await fetch(`https://s89-satya-capstone-tradebro.onrender.com/api/stocks/quote/${e}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}});if(t.ok){const e=await t.json();return{symbol:e.symbol,price:e.price||e.c,change:e.change||e.d,changePercent:e.changePercent||e.dp,volume:e.volume||e.v,high:e.high||e.h,low:e.low||e.l,timestamp:Date.now()}}}catch(t){}return null});(await Promise.all(t)).filter(Boolean).forEach(v)}catch(n){}},[t,e,v]),w=s.useCallback(()=>{d.current&&clearInterval(d.current),d.current=setInterval(b,g.fallbackInterval),b()},[b,g.fallbackInterval]);s.useEffect(()=>{if(!t||0===e.length)return;x();const n=setTimeout(()=>{r||w()},2e3);return()=>{clearTimeout(n)}},[t,e,x,w,r]),s.useEffect(()=>()=>{h.current&&h.current.close(),d.current&&clearInterval(d.current),m.current&&clearTimeout(m.current),f.current&&clearTimeout(f.current)},[]);const j=s.useCallback(e=>n[null==e?void 0:e.toUpperCase()]||null,[n]),k=s.useCallback(e=>e.map(e=>({symbol:e,...j(e)})).filter(Boolean),[j]),N=s.useCallback(e=>{h.current&&h.current.readyState===WebSocket.OPEN&&h.current.send(JSON.stringify({type:"subscribe",symbol:e.toUpperCase()}))},[]),S=s.useCallback(e=>{h.current&&h.current.readyState===WebSocket.OPEN&&h.current.send(JSON.stringify({type:"unsubscribe",symbol:e.toUpperCase()}))},[]),C=s.useCallback(()=>{b()},[b]),P=s.useCallback((e,t,n)=>{const s=j(e);if(!s||!t||!n)return{pnl:0,pnlPercent:0,unrealized:!0};const i=t*s.price,r=t*n,a=i-r;return{pnl:a,pnlPercent:a/r*100,currentValue:i,investedValue:r,unrealized:!0,lastUpdated:s.lastUpdated}},[j]);return{prices:n,isConnected:r,lastUpdate:o,updateCount:c,getPrice:j,getPrices:k,subscribe:N,unsubscribe:S,refresh:C,calculatePnL:P,connectionStatus:r?"connected":"disconnected"}})(e?[e.symbol]:[],!0),p=h(null==e?void 0:e.symbol),f=(null==p?void 0:p.price)||(null==e?void 0:e.price)||0,g=s.useMemo(()=>{if(!e||!n||!i)return null;const s=parseInt(n),a=parseFloat(i),o=parseFloat(f);if("buy"===t){const e=s*a,t=s*o,n=t-e,i=o-a;return{type:"buy",orderValue:e,currentValue:t,unrealizedPnL:n,unrealizedPnLPercent:e>0?n/e*100:0,priceDiff:i,priceDiffPercent:a>0?i/a*100:0,breakEvenPrice:a,isProfit:n>=0,recommendation:i>0?"favorable":i<0?"unfavorable":"neutral"}}{const e=parseFloat(r||a),t=s*a,n=s*e,i=t-n,l=s*o,c=l-t;return{type:"sell",investedValue:n,sellValue:t,marketValue:l,realizedPnL:i,realizedPnLPercent:n>0?i/n*100:0,opportunityCost:c,opportunityCostPercent:t>0?c/t*100:0,breakEvenPrice:e,isProfit:i>=0,recommendation:c<0?"good_timing":c>0?"consider_waiting":"neutral"}}},[e,t,n,i,f,r]);if(s.useEffect(()=>{l(!!g),g&&u(e=>e+1)},[g]),s.useEffect(()=>{p&&m&&u(e=>e+1)},[p,m]),!o||!g)return null;return M.jsxs(v.div,{className:`live-pnl-calculator ${a}`,initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,ease:"easeOut"},children:[M.jsxs("div",{className:"pnl-header",children:[M.jsxs("div",{className:"pnl-title",children:[M.jsx(Ue,{className:"pnl-icon"}),M.jsx("span",{children:"Live P&L Calculator"})]}),M.jsxs("div",{className:"connection-status",children:[M.jsx("div",{className:"status-indicator "+(d?"connected":"disconnected")}),M.jsx("span",{className:"status-text",children:d?"Live":"Delayed"})]})]}),M.jsxs("div",{className:"current-price-section",children:[M.jsx("div",{className:"price-label",children:"Current Market Price"}),M.jsxs("div",{className:"price-display",children:[M.jsx("span",{className:"price-value",children:la(f)}),p&&M.jsxs(v.div,{className:`price-change ${p.priceDirection}`,initial:{scale:1},animate:{scale:[1,1.1,1]},transition:{duration:.3},children:["up"===p.priceDirection&&M.jsx(cn,{size:14}),"down"===p.priceDirection&&M.jsx(ln,{size:14}),M.jsx("span",{children:ya(p.change,p.changePercent).percent})]})]})]}),M.jsx("div",{className:"pnl-calculations",children:"buy"===g.type?M.jsxs(M.Fragment,{children:[M.jsxs("div",{className:"calc-row",children:[M.jsx("span",{className:"calc-label",children:"Investment Value:"}),M.jsx("span",{className:"calc-value",children:la(g.orderValue)})]}),M.jsxs("div",{className:"calc-row",children:[M.jsx("span",{className:"calc-label",children:"Current Value:"}),M.jsx("span",{className:"calc-value",children:la(g.currentValue)})]}),M.jsxs("div",{className:"calc-row highlight",children:[M.jsx("span",{className:"calc-label",children:"Unrealized P&L:"}),M.jsxs("span",{className:"calc-value "+(g.isProfit?"profit":"loss"),children:[g.isProfit?M.jsx(cn,{size:14}):M.jsx(ln,{size:14}),la(Math.abs(g.unrealizedPnL)),M.jsxs("span",{className:"percent",children:["(",ca(g.unrealizedPnLPercent),")"]})]})]}),M.jsxs("div",{className:"calc-row",children:[M.jsx("span",{className:"calc-label",children:"Price Difference:"}),M.jsxs("span",{className:"calc-value "+(g.priceDiff>=0?"profit":"loss"),children:[la(Math.abs(g.priceDiff)),M.jsxs("span",{className:"percent",children:["(",ca(g.priceDiffPercent),")"]})]})]})]}):M.jsxs(M.Fragment,{children:[M.jsxs("div",{className:"calc-row",children:[M.jsx("span",{className:"calc-label",children:"Invested Value:"}),M.jsx("span",{className:"calc-value",children:la(g.investedValue)})]}),M.jsxs("div",{className:"calc-row",children:[M.jsx("span",{className:"calc-label",children:"Sale Value:"}),M.jsx("span",{className:"calc-value",children:la(g.sellValue)})]}),M.jsxs("div",{className:"calc-row highlight",children:[M.jsx("span",{className:"calc-label",children:"Realized P&L:"}),M.jsxs("span",{className:"calc-value "+(g.isProfit?"profit":"loss"),children:[g.isProfit?M.jsx(cn,{size:14}):M.jsx(ln,{size:14}),la(Math.abs(g.realizedPnL)),M.jsxs("span",{className:"percent",children:["(",ca(g.realizedPnLPercent),")"]})]})]}),M.jsxs("div",{className:"calc-row",children:[M.jsx("span",{className:"calc-label",children:"Opportunity Cost:"}),M.jsxs("span",{className:"calc-value "+(g.opportunityCost<=0?"profit":"loss"),children:[la(Math.abs(g.opportunityCost)),M.jsxs("span",{className:"percent",children:["(",ca(g.opportunityCostPercent),")"]})]})]})]})}),M.jsx("div",{className:"pnl-recommendation",children:M.jsxs("div",{className:"recommendation-indicator",style:{color:(e=>{switch(e){case"favorable":case"good_timing":return"#10B981";case"unfavorable":case"consider_waiting":return"#EF4444";default:return"#6B7280"}})(g.recommendation)},children:[M.jsx(ht,{size:16}),M.jsx("span",{children:((e,t)=>{if("buy"===t)switch(e){case"favorable":return"Good entry point - price below market";case"unfavorable":return"Consider waiting - price above market";default:return"Price aligned with market"}else switch(e){case"good_timing":return"Good timing - selling above market";case"consider_waiting":return"Consider waiting - market price higher";default:return"Price aligned with market"}})(g.recommendation,g.type)})]})}),M.jsxs("div",{className:"break-even-info",children:[M.jsx(Ut,{size:14}),M.jsxs("span",{children:["Break-even: ",la(g.breakEvenPrice)]})]}),m&&M.jsxs("div",{className:"last-update",children:[M.jsx(at,{size:12}),M.jsxs("span",{children:["Updated: ",new Date(m).toLocaleTimeString()]})]})]},c)},xa=({stockData:e,orderType:t,portfolioData:n,currentPrice:i,onQuantitySelect:r,selectedQuantity:a,className:o=""})=>{const l=s.useMemo(()=>{if(!e||!i)return[];const s=[];if("buy"===t){const e=n.availableCash;[1,5,10,25,50,100,200,500].forEach(t=>{const n=t*i;n<=e&&n>=500&&s.push({type:"round",quantity:t,amount:n,label:`${t} shares`,description:"Round number",icon:an,priority:2})});[1e3,2500,5e3,1e4,25e3,5e4].forEach(t=>{if(t<=e){const e=Math.floor(t/i);e>0&&s.push({type:"amount",quantity:e,amount:e*i,label:`₹${t.toLocaleString("en-IN")}`,description:`${e} shares`,icon:ht,priority:3})}});[10,25,50,75,100].forEach(t=>{const n=e*t/100,r=Math.floor(n/i);r>0&&n>=500&&s.push({type:"percentage",quantity:r,amount:r*i,label:`${t}%`,description:`${r} shares of available cash`,icon:Ut,priority:25===t||50===t?1:2})});const t=n.totalValue||0;if(t>0){[2,5,10].forEach(n=>{const r=t*n/100,a=Math.floor(r/i);a>0&&r<=e&&s.push({type:"diversification",quantity:a,amount:a*i,label:`${n}% of portfolio`,description:`${a} shares for diversification`,icon:$t,priority:1})})}}else{const t=n.holdings.find(t=>t.symbol===e.symbol);if(!t||0===t.quantity)return[];const r=t.quantity,a=t.averagePrice||t.averageBuyPrice||0;[25,50,75,100].forEach(e=>{const t=Math.floor(r*e/100);if(t>0){const n=t*i,r=t*a,o=n-r,l=r>0?o/r*100:0;s.push({type:"profit",quantity:t,amount:n,label:`${e}% of holding`,description:`${t} shares • ${o>=0?"Profit":"Loss"}: ₹${Math.abs(o).toLocaleString("en-IN")}`,icon:o>=0?cn:Ke,priority:o>=0?1:3,profitLoss:o,profitPercent:l})}});if([1,5,10,25,50,100].forEach(e=>{if(e<=r){const t=e*i,n=t-e*a;s.push({type:"round",quantity:e,amount:t,label:`${e} shares`,description:`${n>=0?"Profit":"Loss"}: ₹${Math.abs(n).toLocaleString("en-IN")}`,icon:an,priority:2,profitLoss:n})}}),a>0&&i!==a){const e=Math.min(r,Math.floor(r/2));e>0&&s.push({type:"breakeven",quantity:e,amount:e*i,label:"Break-even",description:`${e} shares at current price`,icon:fn,priority:i>=a?1:3})}}return s.filter((e,t,n)=>t===n.findIndex(t=>t.quantity===e.quantity)).sort((e,t)=>e.priority!==t.priority?e.priority-t.priority:e.quantity-t.quantity).slice(0,8)},[e,t,n,i]);if(0===l.length)return null;l.reduce((e,t)=>{const n=t.type;return e[n]||(e[n]=[]),e[n].push(t),e},{});return M.jsxs("div",{className:`smart-quantity-suggestions ${o}`,children:[M.jsxs("div",{className:"suggestions-header",children:[M.jsx(nn,{className:"suggestions-icon"}),M.jsx("span",{className:"suggestions-title",children:"Smart Suggestions"})]}),M.jsx("div",{className:"suggestions-grid",children:l.map((e,t)=>{const n=e.icon,s=a===e.quantity,i=(e=>{switch(e.type){case"percentage":case"diversification":return"#8B5CF6";case"amount":return"#10B981";case"profit":return e.profitLoss>=0?"#10B981":"#EF4444";case"round":return"#3B82F6";case"breakeven":return"#F59E0B";default:return"#6B7280"}})(e);return M.jsxs(v.button,{className:"suggestion-card "+(s?"selected":""),onClick:()=>r(e.quantity),initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.2,delay:.05*t},whileHover:{scale:1.02},whileTap:{scale:.98},style:{"--suggestion-color":i},children:[M.jsxs("div",{className:"suggestion-header",children:[M.jsx(n,{className:"suggestion-icon",size:16}),M.jsx("span",{className:"suggestion-label",children:e.label})]}),M.jsxs("div",{className:"suggestion-details",children:[M.jsx("div",{className:"suggestion-description",children:e.description}),M.jsxs("div",{className:"suggestion-amount",children:["₹",e.amount.toLocaleString("en-IN")]})]}),void 0!==e.profitLoss&&M.jsxs("div",{className:"profit-indicator "+(e.profitLoss>=0?"profit":"loss"),children:[e.profitLoss>=0?"+":"","₹",Math.abs(e.profitLoss).toLocaleString("en-IN"),void 0!==e.profitPercent&&M.jsxs("span",{className:"profit-percent",children:["(",e.profitPercent>=0?"+":"",e.profitPercent.toFixed(1),"%)"]})]}),1===e.priority&&M.jsxs("div",{className:"priority-badge",children:[M.jsx(nn,{size:10}),"Recommended"]})]},`${e.type}-${e.quantity}`)})}),M.jsx("div",{className:"suggestions-footer",children:M.jsx("span",{className:"suggestions-note",children:"Suggestions based on your portfolio and market conditions"})})]})},ba=({isOpen:e,onClose:t,stockData:n=null,initialOrderType:i="buy",onOrderPlaced:r,onShowConfirmation:a})=>{var o,l;const[c,u]=s.useState(i),[h,d]=s.useState("market"),[m,p]=s.useState(1),[f,g]=s.useState(""),[x,b]=s.useState(!1),[w,j]=s.useState(!1),{portfolioData:k,buyStock:N,sellStock:S}=ra(),{user:C}=ne(e=>e.auth),P=document.documentElement.getAttribute("data-theme")||"light",{validationErrors:E,profitLossEstimate:T,isValidating:L,isValid:I,getOrderSummary:_}=((e,t,n,i,r)=>{const[a,o]=s.useState({}),[l,c]=s.useState(null),[u,h]=s.useState(!1),[d,m]=s.useState(!1),{portfolioData:p}=ra(),{user:f}=ne(e=>e.auth),g=s.useCallback(async()=>{if(!e)return o({stock:"Please select a stock"}),m(!1),!1;h(!0);const s={};try{(!n||n<=0)&&(s.quantity="Quantity must be greater than 0"),"limit"===r&&(!i||parseFloat(i)<=0)&&(s.price="Please enter a valid limit price");const a="market"===r?e.price:parseFloat(i)||0,l=n*a,c=b(l),u="buy"===t?l+c:l-c;return"buy"===t?await y(s,l,u,e):await v(s,n,a,e),"limit"===r&&a>0&&x(s,a,e.price,t),o(s),m(0===Object.keys(s).length),0===Object.keys(s).length}catch(a){return o({general:"Validation failed. Please try again."}),m(!1),!1}finally{h(!1)}},[e,t,n,i,r,p]),y=async(e,t,s,i)=>{s>p.availableCash&&(e.funds=`Insufficient funds. Available: ₹${p.availableCash.toLocaleString("en-IN")}, Required: ₹${s.toLocaleString("en-IN")}`),t<500&&(e.minOrder="Minimum order value is ₹500"),t>1e5&&(e.maxOrder="Maximum order value is ₹1,00,000"),i.volume&&i.volume<n&&(e.availability="Requested quantity exceeds available volume")},v=async(e,t,n,s)=>{const i=p.holdings.find(e=>e.symbol===s.symbol);if(!i)return void(e.shares="You do not own any shares of this stock");if(i.quantity<t)return void(e.shares=`Insufficient shares. Available: ${i.quantity}, Requested: ${t}`);const r=t*n,a=i.averagePrice||i.averageBuyPrice,o=t*a,l=r-o;c({amount:l,percentage:o>0?l/o*100:0,isProfit:l>=0,sellValue:r,buyValue:o,avgBuyPrice:a}),r<100&&(e.minSell="Minimum sell value is ₹100")},x=(e,t,n,s)=>{const i=Math.abs(t-n)/n*100;i>20&&(e.priceRange=`Limit price is ${i.toFixed(1)}% away from market price. Consider adjusting.`),"buy"===s&&t>1.1*n&&(e.buyPriceHigh="Limit price is significantly higher than market price"),"sell"===s&&t<.9*n&&(e.sellPriceLow="Limit price is significantly lower than market price")},b=e=>{const t=3e-4*e,n=.001*e,s=345e-7*e,i=.18*(t+s),r=1e-6*e,a=3e-5*e;return{brokerage:t,stt:n,exchangeCharges:s,gst:i,sebiCharges:r,stampDuty:a,total:t+n+s+i+r+a}},w=s.useCallback(()=>{if(!e||!n)return{grossAmount:0,fees:{total:0},netAmount:0,pricePerShare:0};const s="market"===r?e.price:parseFloat(i)||0,a=n*s,o=b(a);return{grossAmount:a,fees:o,netAmount:"buy"===t?a+o.total:a-o.total,pricePerShare:s,quantity:n}},[e,n,i,r,t]);return s.useEffect(()=>{const e=setTimeout(()=>{g()},300);return()=>clearTimeout(e)},[g]),s.useEffect(()=>{e&&(o({}),c(null),m(!1))},[null==e?void 0:e.symbol]),{validationErrors:a,profitLossEstimate:l,isValidating:u,isValid:d,validateOrder:g,getOrderSummary:w,calculateTradingFees:b}})(n,c,m,f,h),{stockData:D,isLoading:A,refreshStockData:O,isMarketOpen:R}=((e,t=!0)=>{const[n,i]=s.useState(null),[r,a]=s.useState(!1),[o,l]=s.useState(null),[c,u]=s.useState(!1),h=s.useCallback(async e=>{if(!e||!t)return i(null),u(!1),void l(null);a(!0),l(null);try{if(!(await d(e)))return u(!1),l(`Invalid stock symbol: ${e}`),void i(null);const t=await p(e);t?(i(t),u(!0),l(null)):(u(!1),l("Failed to fetch stock data"),i(null))}catch(n){l(n.message||"Failed to validate stock"),u(!1),i(null)}finally{a(!1)}},[t]),d=async e=>{try{const t=/^[0-9]{6}$/;if(!/^[A-Z0-9&-]{1,20}$/.test(e)&&!t.test(e))return!1;const n=await fetch(`https://s89-satya-capstone-tradebro.onrender.com/api/stocks/validate/${e}`,{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}});return n.ok?(await n.json()).isValid:m(e)}catch(t){return m(e)}},m=e=>["RELIANCE","TCS","HDFCBANK","INFY","HINDUNILVR","ICICIBANK","KOTAKBANK","BHARTIARTL","ITC","SBIN","BAJFINANCE","ASIANPAINT","MARUTI","AXISBANK","LT","DMART","SUNPHARMA","TITAN","ULTRACEMCO","NESTLEIND","WIPRO","TECHM","POWERGRID","NTPC","ONGC","TATAMOTORS","BAJAJFINSV","HCLTECH","COALINDIA","DRREDDY","EICHERMOT","ADANIPORTS","JSWSTEEL","TATASTEEL","GRASIM","CIPLA","BRITANNIA","DIVISLAB","APOLLOHOSP","BPCL","HEROMOTOCO","SHREECEM","PIDILITIND","DABUR"].includes(e.toUpperCase()),p=async e=>{try{const t=await fetch(`https://s89-satya-capstone-tradebro.onrender.com/api/stocks/quote/${e}`,{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}});if(t.ok){const e=await t.json();return{symbol:e.symbol,name:e.name||e.symbol,price:e.price||e.c||0,change:e.change||e.d||0,changePercent:e.changePercent||e.dp||0,volume:e.volume||e.v||0,high:e.high||e.h||0,low:e.low||e.l||0,open:e.open||e.o||0,previousClose:e.previousClose||e.pc||0,marketCap:e.marketCap||0,pe:e.pe||0,lastUpdated:(new Date).toISOString()}}return f(e)}catch(t){return f(e)}},f=e=>{const t=2e3*Math.random()+100,n=100*(Math.random()-.5),s=n/t*100;return{symbol:e.toUpperCase(),name:`${e.toUpperCase()} Limited`,price:parseFloat(t.toFixed(2)),change:parseFloat(n.toFixed(2)),changePercent:parseFloat(s.toFixed(2)),volume:Math.floor(1e6*Math.random()),high:parseFloat((t+Math.abs(n)).toFixed(2)),low:parseFloat((t-Math.abs(n)).toFixed(2)),open:parseFloat((t-n).toFixed(2)),previousClose:parseFloat((t-n).toFixed(2)),marketCap:Math.floor(1e12*Math.random()),pe:parseFloat((50*Math.random()+5).toFixed(2)),lastUpdated:(new Date).toISOString()}},g=s.useCallback(()=>{if(!n||!t)return;const e=setInterval(async()=>{try{const e=await p(n.symbol);e&&i(t=>({...t,...e,lastUpdated:(new Date).toISOString()}))}catch(e){}},3e4);return()=>clearInterval(e)},[n,t]);s.useEffect(()=>{const t=setTimeout(()=>{e&&e.length>=2?h(e):(i(null),u(!1),l(null))},500);return()=>clearTimeout(t)},[e,h]),s.useEffect(()=>{if(n&&t)return g()},[n,t,g]);const y=s.useCallback(async()=>{n&&await h(n.symbol)},[n,h]),v=s.useCallback(()=>n?n.change>0?"positive":n.change<0?"negative":"neutral":"neutral",[n]),x=s.useCallback(()=>{const e=new Date,t=e.getDay(),n=100*e.getHours()+e.getMinutes();return 0!==t&&6!==t&&n>=915&&n<=1530},[]);return{stockData:n,isLoading:r,error:o,isValidSymbol:c,refreshStockData:y,getPriceTrend:v,isMarketOpen:x(),validateAndFetchStock:h}})(null==n?void 0:n.symbol,e),F=D||n;s.useEffect(()=>{var t;e&&F&&(g((null==(t=F.price)?void 0:t.toString())||""),p(1))},[e,F]),s.useEffect(()=>{if(e&&(null==F?void 0:F.symbol)){const e=setInterval(()=>{O()},3e4);return()=>clearInterval(e)}},[e,null==F?void 0:F.symbol,O]);const B=_(),z=e=>{const t=Math.max(1,m+e);p(t)},W=async()=>{j(!0);try{const n="market"===h?F.price:parseFloat(f),s=ma.pending(c,F.symbol,m,P);let i;if(i="buy"===c?await N(F.symbol,m,n,F):await S(F.symbol,m,n,F),e=s,We.dismiss(e),!i.success)throw new Error(i.error||"Order failed");if("buy"===c)ma.buySuccess(F.symbol,m,n,P);else{const e=T?T.amount:0;ma.sellSuccess(F.symbol,m,n,e,P)}(null==k?void 0:k.refreshPortfolio)&&k.refreshPortfolio(),null==r||r(),t()}catch(n){ma.error("Order failed",n.message||"An unexpected error occurred",P)}finally{j(!1)}var e};return e?M.jsx(y,{children:M.jsx(v.div,{className:"order-modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e=>e.target===e.currentTarget&&t(),children:M.jsxs(v.div,{className:"order-modal",initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{duration:.3,ease:[.4,0,.2,1]},children:[M.jsxs("div",{className:"order-modal-header",children:[M.jsxs("h2",{className:"order-modal-title",children:[M.jsx(en,{}),"buy"===c?"Buy Order":"Sell Order"]}),M.jsx("button",{className:"order-modal-close",onClick:t,children:M.jsx(pn,{size:20})})]}),M.jsxs("div",{className:"order-modal-body",children:[F&&M.jsxs("div",{className:"order-stock-info",children:[M.jsxs("div",{className:"order-stock-details",children:[M.jsx("h3",{children:F.symbol}),M.jsx("p",{children:F.name||F.symbol}),!R&&M.jsxs("span",{className:"market-closed-indicator",children:[M.jsx(at,{size:12}),"Market Closed"]})]}),M.jsxs("div",{className:"order-stock-price",children:[M.jsx(oa,{price:F.price,change:F.change,changePercent:F.changePercent,size:"large"}),A&&M.jsxs("div",{className:"price-loading",children:[M.jsx("div",{className:"loading-spinner"}),"Updating..."]})]})]}),M.jsxs("div",{className:"order-form-section",children:[M.jsxs("h3",{className:"section-title",children:[M.jsx(Ue,{}),"Order Type"]}),M.jsxs("div",{className:"order-type-toggle",children:[M.jsxs("button",{className:"order-type-btn "+("buy"===c?"active buy":""),onClick:()=>u("buy"),children:[M.jsx(cn,{}),"Buy"]}),M.jsxs("button",{className:"order-type-btn "+("sell"===c?"active sell":""),onClick:()=>u("sell"),children:[M.jsx(ln,{}),"Sell"]})]})]}),M.jsx("div",{className:"order-form-section",children:M.jsxs("div",{className:"order-method-select",children:[M.jsx("label",{htmlFor:"order-method",children:"Order Method"}),M.jsxs("select",{id:"order-method",value:h,onChange:e=>d(e.target.value),children:[M.jsx("option",{value:"market",children:"Market Order"}),M.jsx("option",{value:"limit",children:"Limit Order"})]})]})}),M.jsxs("div",{className:"order-form-section",children:[M.jsxs("div",{className:"order-inputs-grid",children:[M.jsxs("div",{className:"order-input-group full-width",children:[M.jsx("label",{children:"Quantity"}),M.jsx(xa,{stockData:F,orderType:c,portfolioData:k,currentPrice:"market"===h?(null==F?void 0:F.price)||0:parseFloat(f)||0,onQuantitySelect:p,selectedQuantity:m}),M.jsx("div",{className:"quantity-options",children:(()=>{if(!F)return[];const e="market"===h?F.price:parseFloat(f)||F.price;if("buy"===c){const t=k.availableCash,n=[];[1e3,2500,5e3,1e4].forEach(s=>{const i=Math.floor(s/e);i>0&&s<=t&&n.push({value:i,label:`${i} shares`,amount:i*e,disabled:!1})});return[25,50,75,100].forEach(s=>{const i=t*s/100,r=Math.floor(i/e);r>0&&!n.find(e=>e.value===r)&&n.push({value:r,label:`${s}% (${r})`,amount:r*e,disabled:!1})}),n.sort((e,t)=>e.value-t.value).slice(0,6).map(e=>({...e,disabled:e.amount>t}))}{const t=k.holdings.find(e=>e.symbol===F.symbol);if(!t||0===t.quantity)return[];const n=t.quantity,s=[];[1,5,10,25,50,100].forEach(t=>{t<=n&&s.push({value:t,label:`${t} shares`,amount:t*e,disabled:!1})});return[25,50,75,100].forEach(t=>{const i=Math.floor(n*t/100);i>0&&!s.find(e=>e.value===i)&&s.push({value:i,label:`${t}% (${i})`,amount:i*e,disabled:!1})}),s.find(e=>e.value===n)||s.push({value:n,label:`All (${n})`,amount:n*e,disabled:!1}),s.sort((e,t)=>e.value-t.value).slice(0,6)}})().map(e=>M.jsxs("button",{className:"quantity-option-btn "+(m===e.value?"active":""),onClick:()=>p(e.value),disabled:e.disabled,children:[M.jsx("span",{className:"option-value",children:e.label}),M.jsxs("span",{className:"option-amount",children:["₹",(e.value*("market"===h?(null==F?void 0:F.price)||0:parseFloat(f)||0)).toLocaleString("en-IN")]})]},e.value))}),M.jsxs("div",{className:"order-quantity-control",children:[M.jsx("button",{className:"qty-control-btn",onClick:()=>z(-1),disabled:m<=1,children:M.jsx(Rt,{})}),M.jsx("input",{type:"number",className:"qty-control-input",value:m,onChange:e=>p(Math.max(1,parseInt(e.target.value)||1)),min:"1",placeholder:"Enter quantity"}),M.jsx("button",{className:"qty-control-btn",onClick:()=>z(1),children:M.jsx(qt,{})})]}),M.jsxs("div",{className:"investment-amount-display",children:[M.jsx("span",{className:"investment-label",children:"Investment Amount:"}),M.jsxs("span",{className:"investment-value",children:["₹",(m*("market"===h?(null==F?void 0:F.price)||0:parseFloat(f)||0)).toLocaleString("en-IN")]})]}),E.quantity&&M.jsx("span",{className:"error-text",children:E.quantity})]}),"limit"===h&&M.jsxs("div",{className:"order-input-group",children:[M.jsx("label",{children:"Limit Price (₹)"}),M.jsx("input",{type:"number",className:"order-price-input",value:f,onChange:e=>g(e.target.value),placeholder:"Enter limit price",step:"0.01"}),E.price&&M.jsx("span",{className:"error-text",children:E.price})]})]}),E.funds&&M.jsxs("div",{className:"error-message",children:[M.jsx($e,{}),E.funds]}),E.shares&&M.jsxs("div",{className:"error-message",children:[M.jsx($e,{}),E.shares]})]}),F&&m>0&&("market"===h||f)&&M.jsx("div",{className:"order-form-section",children:M.jsx(va,{stockData:F,orderType:c,quantity:m,orderPrice:"market"===h?F.price:parseFloat(f)||0,averagePrice:"sell"===c?null==(o=k.holdings.find(e=>e.symbol===F.symbol))?void 0:o.averagePrice:null})}),M.jsx("div",{className:"order-form-section",children:M.jsxs("div",{className:"order-summary-card",children:[M.jsxs("h3",{className:"order-summary-title",children:[M.jsx(ht,{}),"Order Summary"]}),M.jsxs("div",{className:"summary-row",children:[M.jsx("span",{className:"summary-label",children:"Quantity:"}),M.jsxs("span",{className:"summary-value",children:[m," shares"]})]}),M.jsxs("div",{className:"summary-row",children:[M.jsx("span",{className:"summary-label",children:"Price per share:"}),M.jsx("span",{className:"summary-value",children:ua(B.pricePerShare)})]}),M.jsxs("div",{className:"summary-row",children:[M.jsx("span",{className:"summary-label",children:"Gross amount:"}),M.jsx("span",{className:"summary-value",children:la(B.grossAmount)})]}),M.jsxs("div",{className:"summary-row",children:[M.jsx("span",{className:"summary-label",children:"Fees & charges:"}),M.jsx("span",{className:"summary-value",children:la(B.fees.total)})]}),M.jsxs("div",{className:"summary-row total",children:[M.jsx("span",{className:"summary-label",children:"Net amount:"}),M.jsx("span",{className:"summary-value",children:la(B.netAmount)})]}),T&&M.jsxs("div",{className:"profit-loss-indicator "+(T.isProfit?"profit":"loss"),children:[T.isProfit?M.jsx(cn,{}):M.jsx(ln,{}),"Estimated ",T.isProfit?"Profit":"Loss",":",la(Math.abs(T.amount)),"(",ca(T.percentage),")"]})]})}),M.jsxs("div",{className:"confirm-checkbox",children:[M.jsx("input",{type:"checkbox",id:"confirm-checkbox",checked:x,onChange:e=>b(e.target.checked)}),M.jsxs("label",{htmlFor:"confirm-checkbox",children:["I confirm that I want to place this ",c," order"]})]}),M.jsxs("div",{className:"order-modal-actions",children:[M.jsx("button",{className:"order-action-btn cancel",onClick:t,disabled:w,children:"Cancel"}),M.jsx("button",{className:"order-action-btn "+("buy"===c?"place-buy":"place-sell"),onClick:()=>{!I||x&&!document.getElementById("confirm-checkbox").checked||a&&a({orderData:{orderType:c,orderMethod:h,quantity:m,limitPrice:f},stockData:F,orderSummary:B,profitLossEstimate:T,onConfirm:W})},disabled:w||!I||L||x&&!(null==(l=document.getElementById("confirm-checkbox"))?void 0:l.checked),children:w?M.jsxs(M.Fragment,{children:[M.jsx("div",{className:"loading-spinner"}),"Placing Order..."]}):`Place ${"buy"===c?"Buy":"Sell"} Order`})]})]})]})})}):null},wa=({isOpen:e,onClose:t,onConfirm:n,orderData:i,stockData:a,orderSummary:o,profitLossEstimate:l,isProcessing:c=!1})=>{const[u,h]=s.useState("details"),[d,m]=s.useState(0),[p,f]=s.useState(!1),g=s.useRef(null),{portfolioData:x}=ra(),b=r.useMemo(()=>{if("sell"===(null==i?void 0:i.orderType)&&a&&(null==x?void 0:x.holdings)){const e=x.holdings.find(e=>e.symbol===a.symbol);if(e){const t=a.price||0,n=e.averagePrice||0,s=e.quantity||0,i=n*s,r=t*s,o=r-i,l=i>0?o/i*100:0;return{...e,currentPrice:t,buyPrice:n,totalInvested:i,currentValue:r,totalGainLoss:o,gainLossPercentage:l,isProfit:o>=0}}}return null},[i,a,x]);r.useMemo(()=>{if(b){const e=20,t=b.currentPrice-b.buyPrice,n=[];for(let s=0;s<=e;s++){const i=s/e,r=b.buyPrice+t*i,a=r*b.quantity;n.push({time:Date.now()-24*(e-s)*60*60*1e3,price:r,value:a})}return n}return[]},[b]),s.useEffect(()=>{e&&(h("details"),m(0),f(!1))},[e]);const w=e=>{f(!0);const t=e.touches?e.touches[0].clientX:e.clientX,s=g.current;if(!s)return;const i=s.getBoundingClientRect().width-60,r=e=>{const n=e.touches?e.touches[0].clientX:e.clientX,s=Math.max(0,Math.min(i,n-t));m(s/i*100)},a=()=>{d>80?(h("processing"),n()):m(0),f(!1),document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",a),document.removeEventListener("touchmove",r),document.removeEventListener("touchend",a)};document.addEventListener("mousemove",r),document.addEventListener("mouseup",a),document.addEventListener("touchmove",r),document.addEventListener("touchend",a)};if(!e||!i||!a)return null;const{orderType:j,orderMethod:k,quantity:N,limitPrice:S}=i,C="market"===k?a.price:parseFloat(S),P="buy"===j;return M.jsx(y,{mode:"wait",children:e&&M.jsx(v.div,{className:"enhanced-confirmation-overlay app-level-modal",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e=>e.target===e.currentTarget&&t(),"data-modal-level":"app",children:M.jsxs(v.div,{className:"enhanced-confirmation-modal",initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{duration:.3,ease:[.4,0,.2,1]},children:[M.jsx(v.button,{className:"enhanced-modal-close",onClick:t,whileHover:{scale:1.1},whileTap:{scale:.9},children:M.jsx(pn,{size:24})}),"details"===u&&M.jsxs(v.div,{className:"modal-content",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:[M.jsxs("div",{className:"stock-header",children:[M.jsxs("div",{className:"stock-info",children:[M.jsx("h1",{className:"stock-symbol",children:a.symbol}),M.jsx("p",{className:"stock-name",children:a.name}),M.jsx("div",{className:"stock-exchange-badge",children:"NSE"})]}),M.jsxs("div",{className:"stock-price",children:[M.jsx("span",{className:"current-price",children:la(C)}),M.jsxs("div",{className:"price-change "+(a.change>=0?"positive":"negative"),children:[a.change>=0?M.jsx(cn,{}):M.jsx(ln,{}),M.jsxs("span",{children:[la(Math.abs(a.change))," (",ca(Math.abs(a.changePercent)),")"]})]})]})]}),M.jsxs("div",{className:"order-details",children:[M.jsxs("h3",{className:"section-title",children:[M.jsx(ht,{}),"Order Details"]}),M.jsxs("div",{className:"detail-grid",children:[M.jsxs("div",{className:"detail-item",children:[M.jsx("span",{className:"label",children:"Order Type:"}),M.jsx("span",{className:"value "+(P?"buy":"sell"),children:P?"BUY":"SELL"})]}),M.jsxs("div",{className:"detail-item",children:[M.jsx("span",{className:"label",children:"Quantity:"}),M.jsxs("span",{className:"value",children:[N," shares"]})]}),M.jsxs("div",{className:"detail-item",children:[M.jsx("span",{className:"label",children:"Price:"}),M.jsx("span",{className:"value",children:la(C)})]}),M.jsxs("div",{className:"detail-item",children:[M.jsx("span",{className:"label",children:"Total Amount:"}),M.jsx("span",{className:"value total",children:la(C*N)})]})]})]}),!P&&b&&M.jsxs("div",{className:"profit-loss-analysis",children:[M.jsxs("h3",{className:"section-title",children:[M.jsx(Ke,{}),"Profit & Loss Analysis"]}),M.jsxs("div",{className:"pnl-summary",children:[M.jsxs("div",{className:"pnl-item",children:[M.jsx("span",{className:"label",children:"Buy Price:"}),M.jsx("span",{className:"value",children:la(b.buyPrice)})]}),M.jsxs("div",{className:"pnl-item",children:[M.jsx("span",{className:"label",children:"Current Price:"}),M.jsx("span",{className:"value",children:la(b.currentPrice)})]}),M.jsxs("div",{className:"pnl-item",children:[M.jsx("span",{className:"label",children:"Total Invested:"}),M.jsx("span",{className:"value",children:la(b.totalInvested)})]}),M.jsxs("div",{className:"pnl-item total",children:[M.jsxs("span",{className:"label",children:["Total ",b.isProfit?"Profit":"Loss",":"]}),M.jsxs("span",{className:"value "+(b.isProfit?"profit":"loss"),children:[b.isProfit?"+":"",la(b.totalGainLoss),"(",b.isProfit?"+":"",ca(b.gainLossPercentage),")"]})]})]})]}),M.jsx("div",{className:"slide-to-confirm",children:M.jsxs("div",{ref:g,className:"slide-container",children:[M.jsx("div",{className:"slide-track",style:{background:`linear-gradient(to right, ${P?"#10B981":"#EF4444"} ${d}%, #E5E7EB ${d}%)`},children:M.jsx(v.div,{className:"slide-button",style:{left:`${d}%`},onMouseDown:w,onTouchStart:w,whileHover:{scale:1.05},whileTap:{scale:.95},children:M.jsx(Ge,{})})}),M.jsxs("span",{className:"slide-text",children:["Slide to ",P?"Buy":"Sell"]})]})})]}),"processing"===u&&M.jsxs(v.div,{className:"processing-content",initial:{opacity:0},animate:{opacity:1},children:[M.jsx("div",{className:"processing-animation",children:M.jsx(v.div,{className:"spinner",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}})}),M.jsx("h2",{children:"Processing Order..."}),M.jsxs("p",{children:["Please wait while we execute your ",P?"buy":"sell"," order"]})]}),"success"===u&&M.jsxs(v.div,{className:"success-content",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},children:[M.jsx(v.div,{className:"success-icon",initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:300},children:M.jsx(it,{})}),M.jsx("h2",{children:"Order Confirmed!"}),M.jsxs("p",{children:["Your ",P?"buy":"sell"," order has been successfully placed"]}),M.jsx(v.button,{className:"success-button",onClick:t,whileHover:{scale:1.05},whileTap:{scale:.95},children:"Done"})]})]})})})},ja=(e,t="manual")=>e?{symbol:e.symbol||e.ticker||e.stockSymbol,name:e.name||e.companyName||e.longName||e.symbol,price:e.price||e.currentPrice||e.close||e.regularMarketPrice||0,change:e.change||e.priceChange||e.regularMarketChange||0,changePercent:e.changePercent||e.percentChange||e.regularMarketChangePercent||0,volume:e.volume||e.regularMarketVolume||0,marketCap:e.marketCap||0,sector:e.sector||e.sectorName||"",industry:e.industry||"",source:t,timestamp:(new Date).toISOString(),...e}:null,ka=()=>{const[e,t]=s.useState({isOpen:!1,stockData:null,orderType:"buy",source:null}),n=l(),i=s.useCallback((e,n="buy",s="manual")=>{const i=ja(e,s);t({isOpen:!0,stockData:i,orderType:n,source:s})},[]),r=s.useCallback(()=>{t({isOpen:!1,stockData:null,orderType:"buy",source:null})},[]),a=s.useCallback(async(e,t=1)=>{try{const n=ja(e);if(!n)throw new Error("Invalid stock data");const s=await sa.buyStock(n.symbol,t,n.price,"market");return s.success?(We.success(s.message),{success:!0,data:s.data}):(We.error(s.error),{success:!1,error:s.error})}catch(n){return We.error(n.message||"Failed to buy stock"),{success:!1,error:n.message}}},[]),o=s.useCallback(async(e,t=1)=>{try{const n=ja(e);if(!n)throw new Error("Invalid stock data");const s=await sa.sellStock(n.symbol,t,n.price,"market");return s.success?(We.success(s.message),{success:!0,data:s.data}):(We.error(s.error),{success:!1,error:s.error})}catch(n){return We.error(n.message||"Failed to sell stock"),{success:!1,error:n.message}}},[]),c=s.useCallback((e,t="buy")=>{const s=e.symbol||e.stockSymbol;n(`/trading?symbol=${s}&type=${t}`)},[n]),u=s.useCallback(e=>{const t={symbol:e.symbol,name:e.name||e.symbol,price:e.price||e.close||e.c,change:e.change||e.d||0,changePercent:e.changePercent||e.dp||0,volume:e.volume||e.v||0,high:e.high||e.h||0,low:e.low||e.l||0,open:e.open||e.o||0,source:"chart"};i(t,"buy","chart")},[i]),h=s.useCallback((e,t="buy")=>{const n={symbol:e.symbol||e.stockSymbol,name:e.name||e.stockName||e.symbol,price:e.price||e.currentPrice||0,change:e.change||e.dayChange||0,changePercent:e.changePercent||e.dayChangePercent||0,volume:e.volume||0,high:e.high||e.dayHigh||0,low:e.low||e.dayLow||0,open:e.open||0,source:"watchlist"};i(n,t,"watchlist")},[i]),d=s.useCallback((e,t="sell")=>{const n={symbol:e.symbol||e.stockSymbol,name:e.name||e.stockName||e.symbol,price:e.currentPrice||e.price||0,change:e.dayChange||e.change||0,changePercent:e.dayChangePercent||e.changePercent||0,volume:e.volume||0,high:e.dayHigh||e.high||0,low:e.dayLow||e.low||0,open:e.open||0,averagePrice:e.averagePrice||e.averageBuyPrice||0,quantity:e.quantity||0,totalValue:e.totalValue||e.currentValue||0,totalGains:e.totalGains||e.gainLoss||0,gainsPercent:e.gainsPercent||e.gainLossPercentage||0,source:"portfolio"};i(n,t,"portfolio")},[i]),m=s.useCallback((e,t="buy")=>{const n={symbol:e.symbol||e.ticker,name:e.name||e.companyName||e.symbol,price:e.price||e.lastPrice||0,change:e.change||e.priceChange||0,changePercent:e.changePercent||e.percentChange||0,volume:e.volume||e.totalVolume||0,high:e.high||e.dayHigh||0,low:e.low||e.dayLow||0,open:e.open||e.openPrice||0,source:"market"};i(n,t,"market")},[i]),p=s.useCallback((e,t="buy")=>{if(e.length>0){const n=e[0],s={...ja(n,"bulk"),bulkList:e,source:"bulk"};i(s,t,"bulk")}},[i]),f=s.useCallback(e=>[{label:"Quick Buy",icon:"FiTrendingUp",action:()=>a(e),color:"green"},{label:"Quick Sell",icon:"FiTrendingDown",action:()=>o(e),color:"red",disabled:!Na(e.symbol)},{label:"View Chart",icon:"FiBarChart2",action:()=>n(`/charts?symbol=${e.symbol}`),color:"blue"},{label:"Add to Watchlist",icon:"FiBookmark",action:()=>Sa(e),color:"purple"}],[a,o,n]);return{orderModalState:e,openOrderModal:i,closeOrderModal:r,navigateToTrading:c,handleChartStockClick:u,handleWatchlistStockClick:h,handlePortfolioStockClick:d,handleMarketDataClick:m,quickBuy:a,quickSell:o,handleBulkOrder:p,getContextMenuActions:f}},Na=e=>!0,Sa=e=>{},Ca=(e,t={})=>{const{enableProfiling:n=!1,cacheSize:i=100,debounceDelay:r=300,throttleDelay:a=1e3}=t,o=s.useRef(0),l=s.useRef(Date.now()),c=s.useRef(new ga(i)),u=fa();s.useEffect(()=>{o.current+=1;const e=Date.now();l.current;l.current=e});return{debounce:s.useCallback((e,t=r)=>((e,t)=>{let n;return(...s)=>{clearTimeout(n),n=setTimeout(()=>e.apply(null,s),t)}})(e,t),[r]),throttle:s.useCallback((e,t=a)=>((e,t)=>{let n;return(...s)=>{n||(e.apply(null,s),n=!0,setTimeout(()=>n=!1,t))}})(e,t),[a]),cache:s.useMemo(()=>({get:e=>c.current.get(e),set:(e,t)=>c.current.set(e,t),clear:()=>c.current.clear(),size:()=>c.current.size()}),[]),getMetrics:s.useCallback(()=>({renderCount:o.current,lastRenderTime:l.current,cacheSize:c.current.size(),componentName:e}),[e]),cleanupManager:u}};const Pa=new class{constructor(){this.listeners=new Set,this.currentBalance=1e4,this.isInitialized=!1}async initialize(){if(!this.isInitialized)try{const e=sa.getPortfolioSummary();this.currentBalance=e.availableCash,sa.addListener(this.handleTradingServiceUpdate.bind(this)),window.addEventListener("balanceUpdated",this.handleBalanceUpdate.bind(this)),this.isInitialized=!0}catch(e){}}handleTradingServiceUpdate(e){const t=e.availableCash;t!==this.currentBalance&&(this.currentBalance=t,this.notifyListeners())}handleBalanceUpdate(e){const{newBalance:t}=e.detail;t!==this.currentBalance&&(this.currentBalance=t,this.notifyListeners())}getCurrentBalance(){return this.currentBalance}getFormattedBalance(){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2,maximumFractionDigits:2}).format(this.currentBalance)}async updateBalance(e,t="manual"){const n=this.currentBalance;this.currentBalance=e,sa.virtualBalance=e,sa.savePortfolioToStorage(),sa.notifyListeners(),await this.syncWithServer(),this.notifyListeners(),window.dispatchEvent(new CustomEvent("balanceUpdated",{detail:{newBalance:e,oldBalance:n,change:e-n,source:t}}))}async syncWithServer(){try{const e=localStorage.getItem("token");if(!e)return;(await fetch("https://s89-satya-capstone-tradebro.onrender.com/api/virtual-money/sync-balance",{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({balance:this.currentBalance,totalRewards:sa.dailyRewards.totalRewards,loginStreak:sa.dailyRewards.loginStreak,lastClaimDate:sa.dailyRewards.lastClaimDate})})).ok}catch(e){}}addListener(e){return this.listeners.add(e),e({balance:this.currentBalance,formattedBalance:this.getFormattedBalance()}),()=>this.listeners.delete(e)}removeListener(e){this.listeners.delete(e)}notifyListeners(){const e={balance:this.currentBalance,formattedBalance:this.getFormattedBalance()};this.listeners.forEach(t=>{try{t(e)}catch(n){}})}async forceRefresh(){try{sa.getPortfolioSummary();const e=localStorage.getItem("token");if(e){const t=await fetch("https://s89-satya-capstone-tradebro.onrender.com/api/virtual-money/account",{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(t.ok){const e=(await t.json()).data.balance;this.currentBalance=e,sa.virtualBalance=e,sa.savePortfolioToStorage()}}this.notifyListeners()}catch(e){}}cleanup(){this.listeners.clear(),window.removeEventListener("balanceUpdated",this.handleBalanceUpdate.bind(this)),this.isInitialized=!1}},Ea=s.createContext(),Ta=()=>s.useContext(Ea),La=({children:e})=>{const[t,n]=s.useState(!1);s.useEffect(()=>{"true"===localStorage.getItem("hasVisitedLanding")&&n(!0)},[]);return M.jsx(Ea.Provider,{value:{hasVisitedLanding:t,markLandingVisited:()=>{localStorage.setItem("hasVisitedLanding","true"),n(!0)}},children:e})},Ma=({isAuthenticated:e=!1,user:t=null,theme:n="light",onToggleTheme:i=()=>{},onLogin:r=()=>{},onSignup:a=()=>{}})=>{const[o,l]=s.useState(!1),[h,d]=s.useState(!1),m=c();s.useEffect(()=>{const e=()=>{d(window.scrollY>20)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]),s.useEffect(()=>{l(!1)},[m.pathname]);const p=()=>{l(!o)},f=[{name:"Features",href:"#features",external:!1},{name:"How it Works",href:"#how-it-works",external:!1},{name:"AI Demo",href:"#ai-demo",external:!1}],g=e=>{if(e.startsWith("#")){const t=document.querySelector(e);t&&t.scrollIntoView({behavior:"smooth"})}};return M.jsxs(v.header,{className:`tradebro-header ${h?"scrolled":""} ${n}`,initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6},children:[M.jsxs("div",{className:"header-container",children:[M.jsx(v.div,{className:"header-logo",whileHover:{scale:1.02},transition:{type:"spring",stiffness:400,damping:17},children:M.jsx(u,{to:"/",className:"logo-link",children:M.jsxs("div",{className:"logo-text",children:[M.jsx("span",{className:"logo-main",children:"TradeBro"}),M.jsx("span",{className:"logo-tagline",children:"AI Trading Platform"})]})})}),M.jsx("nav",{className:"header-nav desktop-nav",children:f.map((e,t)=>M.jsx(v.button,{className:"nav-item",onClick:()=>g(e.href),whileHover:{scale:1.05},whileTap:{scale:.95},initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1*t},children:e.name},e.name))}),M.jsxs("div",{className:"header-actions",children:[M.jsx(v.button,{className:"theme-toggle",onClick:i,whileHover:{scale:1.1},whileTap:{scale:.9},"aria-label":"Toggle theme",children:M.jsx(y,{mode:"wait",children:"dark"===n?M.jsx(v.div,{initial:{rotate:-90,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:90,opacity:0},transition:{duration:.2},children:M.jsx(sn,{})},"sun"):M.jsx(v.div,{initial:{rotate:90,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:-90,opacity:0},transition:{duration:.2},children:M.jsx(Bt,{})},"moon")})}),e?M.jsx(v.div,{className:"user-profile",whileHover:{scale:1.05},transition:{type:"spring",stiffness:400,damping:17},children:M.jsxs(u,{to:"/dashboard",className:"profile-link",children:[M.jsx("div",{className:"profile-avatar",children:(null==t?void 0:t.profilePicture)?M.jsx("img",{src:t.profilePicture,alt:t.name}):M.jsx(un,{})}),M.jsx("span",{className:"profile-name",children:(null==t?void 0:t.name)||"User"})]})}):M.jsxs("div",{className:"auth-actions",children:[M.jsxs(v.button,{className:"btn-header btn-ghost",onClick:r,whileHover:{scale:1.05},whileTap:{scale:.95},children:[M.jsx(Tt,{size:16}),M.jsx("span",{className:"btn-text",children:"Login"})]}),M.jsxs(v.button,{className:"btn-header btn-primary",onClick:a,whileHover:{scale:1.05},whileTap:{scale:.95},children:[M.jsx(fn,{size:16}),M.jsx("span",{className:"btn-text",children:"Start Trading"}),M.jsx(Ge,{size:14})]})]}),M.jsx(v.button,{className:"mobile-menu-toggle",onClick:p,whileHover:{scale:1.1},whileTap:{scale:.9},"aria-label":"Toggle mobile menu",children:M.jsx(y,{mode:"wait",children:o?M.jsx(v.div,{initial:{rotate:-90,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:90,opacity:0},transition:{duration:.2},children:M.jsx(pn,{})},"close"):M.jsx(v.div,{initial:{rotate:90,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:-90,opacity:0},transition:{duration:.2},children:M.jsx(_t,{})},"menu")})})]})]}),M.jsx(y,{children:o&&M.jsx(v.div,{className:"mobile-nav-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},onClick:p,children:M.jsxs(v.nav,{className:"mobile-nav",initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",stiffness:300,damping:30},onClick:e=>e.stopPropagation(),children:[M.jsxs("div",{className:"mobile-nav-header",children:[M.jsxs("div",{className:"mobile-logo",children:[M.jsx(fn,{className:"mobile-logo-icon"}),M.jsx("span",{children:"TradeBro"})]}),M.jsx("button",{className:"mobile-close-btn",onClick:p,children:M.jsx(pn,{})})]}),M.jsxs("div",{className:"mobile-nav-content",children:[f.map((e,t)=>M.jsx(v.button,{className:"mobile-nav-item",onClick:()=>{g(e.href),p()},initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.3,delay:.1*t},children:e.name},e.name)),!e&&M.jsxs("div",{className:"mobile-auth-actions",children:[M.jsxs(v.button,{className:"mobile-btn btn-ghost",onClick:()=>{r(),p()},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.4},children:[M.jsx(Tt,{size:16}),"Login"]}),M.jsxs(v.button,{className:"mobile-btn btn-primary",onClick:()=>{a(),p()},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.5},children:[M.jsx(fn,{size:16}),"Start Trading",M.jsx(Ge,{size:14})]})]})]})]})})})]})},Ia=({className:e="",orbCount:t=3,colors:n=["#3B82F6","#10B981","#8B5CF6"],size:s="large"})=>{const i={small:"orb-small",medium:"orb-medium",large:"orb-large"};return M.jsx("div",{className:`orb-background ${e}`,children:Array.from({length:t}).map((e,t)=>M.jsx(v.div,{className:`orb ${i[s]}`,style:{background:`radial-gradient(circle, ${n[t%n.length]}40 0%, ${n[t%n.length]}20 50%, transparent 70%)`,left:20+30*t+"%",top:10+20*t+"%"},animate:{x:[0,100,-50,0],y:[0,-80,60,0],scale:[1,1.2,.8,1]},transition:{duration:20+5*t,repeat:1/0,ease:"easeInOut",delay:2*t}},t))})},_a=({className:e="",gridSize:t=50,lineColor:n="rgba(59, 130, 246, 0.1)",speed:s=20,animate:i=!0})=>M.jsx("div",{className:`grid-motion-container ${e}`,children:M.jsx(v.div,{className:"grid-motion-background",style:{backgroundImage:`\n            linear-gradient(${n} 1px, transparent 1px),\n            linear-gradient(90deg, ${n} 1px, transparent 1px)\n          `,backgroundSize:`${t}px ${t}px`},animate:i?{x:[0,t],y:[0,t]}:{},transition:{duration:s,repeat:1/0,ease:"linear"}})}),Da=()=>{const[e,t]=s.useState(0),[n,i]=s.useState(!1),r=[{value:1e4,label:"Start",color:"#3B82F6"},{value:12500,label:"1 Month",color:"#10B981"},{value:11800,label:"2 Months",color:"#F59E0B"},{value:15200,label:"3 Months",color:"#10B981"},{value:18750,label:"6 Months",color:"#10B981"},{value:22300,label:"1 Year",color:"#10B981"}];s.useEffect(()=>{const e=setInterval(()=>{n||t(e=>(e+1)%r.length)},2e3);return()=>clearInterval(e)},[n,r.length]);const a=s.useMemo(()=>{const e=20,t=r.map(e=>e.value),n=Math.min(...t),s=Math.max(...t)-n,i=e=>0===s?80:160-(e-n)/s*160;return{svgWidth:400,svgHeight:200,generatePath:()=>{let t=`M 20 ${i(r[0].value)+e}`;for(let n=1;n<r.length;n++){const s=n/(r.length-1)*360,a=i(r[n].value);t+=` L ${s+e} ${a+e}`}return t},points:r.map((t,n)=>({x:n/(r.length-1)*360+e,y:i(t.value)+e,color:t.color,label:t.label,value:t.value})),margin:e}},[r]);return M.jsxs("div",{className:"interactive-chart",onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),children:[M.jsxs("div",{className:"chart-header",children:[M.jsx("div",{className:"chart-title-section",children:M.jsx("h3",{children:"Portfolio Growth Simulation"})}),M.jsxs("div",{className:"chart-value-section",children:[M.jsxs("div",{className:"chart-value",children:[M.jsx("span",{className:"currency",children:"₹"}),M.jsx(v.span,{className:"amount",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},children:r[e].value.toLocaleString()},e)]}),M.jsx("span",{className:"chart-period",children:r[e].label})]})]}),"---",M.jsx("div",{className:"chart-container",children:M.jsxs("svg",{viewBox:`0 0 ${a.svgWidth} ${a.svgHeight}`,className:"chart-svg",children:[M.jsx("defs",{children:M.jsx("pattern",{id:"grid",width:"40",height:"20",patternUnits:"userSpaceOnUse",children:M.jsx("path",{d:"M 40 0 L 0 0 0 20",fill:"none",stroke:"rgba(59, 130, 246, 0.1)",strokeWidth:"1"})})}),M.jsx("rect",{width:"100%",height:"100%",fill:"url(#grid)"}),M.jsx(v.path,{d:a.generatePath(),fill:"none",stroke:"url(#chartGradient)",strokeWidth:"3",initial:{pathLength:0},animate:{pathLength:1},transition:{duration:2,ease:"easeInOut"}},"chart-line"),M.jsx("defs",{children:M.jsxs("linearGradient",{id:"chartGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[M.jsx("stop",{offset:"0%",stopColor:"#3B82F6"}),M.jsx("stop",{offset:"50%",stopColor:"#10B981"}),M.jsx("stop",{offset:"100%",stopColor:"#10B981"})]})}),a.points.map((n,s)=>M.jsx(v.circle,{cx:n.x,cy:n.y,r:e===s?8:5,fill:n.color,className:"chart-point",initial:{scale:0},animate:{scale:1},transition:{delay:.2*s,duration:.3},onClick:()=>t(s),style:{cursor:"pointer"}},s)),M.jsx(v.circle,{cx:a.points[e].x,cy:a.points[e].y,r:"12",fill:"none",stroke:a.points[e].color,strokeWidth:"2",initial:{scale:0},animate:{scale:1},transition:{duration:.3}},`active-circle-${e}`)]})}),"---",M.jsx("div",{className:"chart-legend",children:r.map((n,s)=>M.jsxs(v.button,{className:"legend-item "+(e===s?"active":""),onClick:()=>t(s),whileHover:{scale:1.05},whileTap:{scale:.95},children:[M.jsx("span",{className:"legend-dot",style:{backgroundColor:n.color}}),M.jsx("span",{className:"legend-label",children:n.label})]},s))})]})},Aa=({texts:e=["AI-Powered Trading","Smart Portfolio Management","Real-Time Market Data","Risk-Free Virtual Trading"],speed:t=100,deleteSpeed:n=50,pauseTime:i=2e3})=>{const[r,a]=s.useState(0),[o,l]=s.useState(""),[c,u]=s.useState(!1),[h,d]=s.useState(!1);return s.useEffect(()=>{const s=e[r];if(h){const e=setTimeout(()=>{d(!1),u(!0)},i);return()=>clearTimeout(e)}const m=setTimeout(()=>{c?o.length>0?l(o.slice(0,-1)):(u(!1),a(t=>(t+1)%e.length)):o.length<s.length?l(s.slice(0,o.length+1)):d(!0)},c?n:t);return()=>clearTimeout(m)},[o,r,c,h,e,t,n,i]),M.jsx("div",{className:"typewriter-container",children:M.jsxs("span",{className:"typewriter-text",children:[o,M.jsx(v.span,{className:"cursor",animate:{opacity:[1,0]},transition:{duration:.8,repeat:1/0,repeatType:"reverse"},children:"|"})]})})};function Oa(){}function Ra(){}const Fa=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Ba=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,za={};function Wa(e,t){return(za.jsx?Ba:Fa).test(e)}const Ua=/[ \t\n\f\r]/g;function Va(e){return""===e.replace(Ua,"")}class $a{constructor(e,t,n){this.normal=t,this.property=e,n&&(this.space=n)}}function Ha(e,t){const n={},s={};for(const i of e)Object.assign(n,i.property),Object.assign(s,i.normal);return new $a(n,s,t)}function qa(e){return e.toLowerCase()}$a.prototype.normal={},$a.prototype.property={},$a.prototype.space=void 0;class Ya{constructor(e,t){this.attribute=t,this.property=e}}Ya.prototype.attribute="",Ya.prototype.booleanish=!1,Ya.prototype.boolean=!1,Ya.prototype.commaOrSpaceSeparated=!1,Ya.prototype.commaSeparated=!1,Ya.prototype.defined=!1,Ya.prototype.mustUseProperty=!1,Ya.prototype.number=!1,Ya.prototype.overloadedBoolean=!1,Ya.prototype.property="",Ya.prototype.spaceSeparated=!1,Ya.prototype.space=void 0;let Ga=0;const Qa=no(),Ja=no(),Xa=no(),Ka=no(),Za=no(),eo=no(),to=no();function no(){return 2**++Ga}const so=Object.freeze(Object.defineProperty({__proto__:null,boolean:Qa,booleanish:Ja,commaOrSpaceSeparated:to,commaSeparated:eo,number:Ka,overloadedBoolean:Xa,spaceSeparated:Za},Symbol.toStringTag,{value:"Module"})),io=Object.keys(so);class ro extends Ya{constructor(e,t,n,s){let i=-1;if(super(e,t),ao(this,"space",s),"number"==typeof n)for(;++i<io.length;){const e=io[i];ao(this,io[i],(n&so[e])===so[e])}}}function ao(e,t,n){n&&(e[t]=n)}function oo(e){const t={},n={};for(const[s,i]of Object.entries(e.properties)){const r=new ro(s,e.transform(e.attributes||{},s),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(s)&&(r.mustUseProperty=!0),t[s]=r,n[qa(s)]=s,n[qa(r.attribute)]=s}return new $a(t,n,e.space)}ro.prototype.defined=!0;const lo=oo({properties:{ariaActiveDescendant:null,ariaAtomic:Ja,ariaAutoComplete:null,ariaBusy:Ja,ariaChecked:Ja,ariaColCount:Ka,ariaColIndex:Ka,ariaColSpan:Ka,ariaControls:Za,ariaCurrent:null,ariaDescribedBy:Za,ariaDetails:null,ariaDisabled:Ja,ariaDropEffect:Za,ariaErrorMessage:null,ariaExpanded:Ja,ariaFlowTo:Za,ariaGrabbed:Ja,ariaHasPopup:null,ariaHidden:Ja,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Za,ariaLevel:Ka,ariaLive:null,ariaModal:Ja,ariaMultiLine:Ja,ariaMultiSelectable:Ja,ariaOrientation:null,ariaOwns:Za,ariaPlaceholder:null,ariaPosInSet:Ka,ariaPressed:Ja,ariaReadOnly:Ja,ariaRelevant:null,ariaRequired:Ja,ariaRoleDescription:Za,ariaRowCount:Ka,ariaRowIndex:Ka,ariaRowSpan:Ka,ariaSelected:Ja,ariaSetSize:Ka,ariaSort:null,ariaValueMax:Ka,ariaValueMin:Ka,ariaValueNow:Ka,ariaValueText:null,role:null},transform:(e,t)=>"role"===t?t:"aria-"+t.slice(4).toLowerCase()});function co(e,t){return t in e?e[t]:t}function uo(e,t){return co(e,t.toLowerCase())}const ho=oo({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:eo,acceptCharset:Za,accessKey:Za,action:null,allow:null,allowFullScreen:Qa,allowPaymentRequest:Qa,allowUserMedia:Qa,alt:null,as:null,async:Qa,autoCapitalize:null,autoComplete:Za,autoFocus:Qa,autoPlay:Qa,blocking:Za,capture:null,charSet:null,checked:Qa,cite:null,className:Za,cols:Ka,colSpan:null,content:null,contentEditable:Ja,controls:Qa,controlsList:Za,coords:Ka|eo,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Qa,defer:Qa,dir:null,dirName:null,disabled:Qa,download:Xa,draggable:Ja,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Qa,formTarget:null,headers:Za,height:Ka,hidden:Xa,high:Ka,href:null,hrefLang:null,htmlFor:Za,httpEquiv:Za,id:null,imageSizes:null,imageSrcSet:null,inert:Qa,inputMode:null,integrity:null,is:null,isMap:Qa,itemId:null,itemProp:Za,itemRef:Za,itemScope:Qa,itemType:Za,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Qa,low:Ka,manifest:null,max:null,maxLength:Ka,media:null,method:null,min:null,minLength:Ka,multiple:Qa,muted:Qa,name:null,nonce:null,noModule:Qa,noValidate:Qa,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Qa,optimum:Ka,pattern:null,ping:Za,placeholder:null,playsInline:Qa,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Qa,referrerPolicy:null,rel:Za,required:Qa,reversed:Qa,rows:Ka,rowSpan:Ka,sandbox:Za,scope:null,scoped:Qa,seamless:Qa,selected:Qa,shadowRootClonable:Qa,shadowRootDelegatesFocus:Qa,shadowRootMode:null,shape:null,size:Ka,sizes:null,slot:null,span:Ka,spellCheck:Ja,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Ka,step:null,style:null,tabIndex:Ka,target:null,title:null,translate:null,type:null,typeMustMatch:Qa,useMap:null,value:Ja,width:Ka,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Za,axis:null,background:null,bgColor:null,border:Ka,borderColor:null,bottomMargin:Ka,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Qa,declare:Qa,event:null,face:null,frame:null,frameBorder:null,hSpace:Ka,leftMargin:Ka,link:null,longDesc:null,lowSrc:null,marginHeight:Ka,marginWidth:Ka,noResize:Qa,noHref:Qa,noShade:Qa,noWrap:Qa,object:null,profile:null,prompt:null,rev:null,rightMargin:Ka,rules:null,scheme:null,scrolling:Ja,standby:null,summary:null,text:null,topMargin:Ka,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Ka,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Qa,disableRemotePlayback:Qa,prefix:null,property:null,results:Ka,security:null,unselectable:null},space:"html",transform:uo}),mo=oo({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:to,accentHeight:Ka,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Ka,amplitude:Ka,arabicForm:null,ascent:Ka,attributeName:null,attributeType:null,azimuth:Ka,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Ka,by:null,calcMode:null,capHeight:Ka,className:Za,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Ka,diffuseConstant:Ka,direction:null,display:null,dur:null,divisor:Ka,dominantBaseline:null,download:Qa,dx:null,dy:null,edgeMode:null,editable:null,elevation:Ka,enableBackground:null,end:null,event:null,exponent:Ka,externalResourcesRequired:null,fill:null,fillOpacity:Ka,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:eo,g2:eo,glyphName:eo,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Ka,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Ka,horizOriginX:Ka,horizOriginY:Ka,id:null,ideographic:Ka,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Ka,k:Ka,k1:Ka,k2:Ka,k3:Ka,k4:Ka,kernelMatrix:to,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Ka,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Ka,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Ka,overlineThickness:Ka,paintOrder:null,panose1:null,path:null,pathLength:Ka,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Za,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Ka,pointsAtY:Ka,pointsAtZ:Ka,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:to,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:to,rev:to,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:to,requiredFeatures:to,requiredFonts:to,requiredFormats:to,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Ka,specularExponent:Ka,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Ka,strikethroughThickness:Ka,string:null,stroke:null,strokeDashArray:to,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Ka,strokeOpacity:Ka,strokeWidth:null,style:null,surfaceScale:Ka,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:to,tabIndex:Ka,tableValues:null,target:null,targetX:Ka,targetY:Ka,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:to,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Ka,underlineThickness:Ka,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Ka,values:null,vAlphabetic:Ka,vMathematical:Ka,vectorEffect:null,vHanging:Ka,vIdeographic:Ka,version:null,vertAdvY:Ka,vertOriginX:Ka,vertOriginY:Ka,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Ka,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:co}),po=oo({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform:(e,t)=>"xlink:"+t.slice(5).toLowerCase()}),fo=oo({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:uo}),go=oo({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform:(e,t)=>"xml:"+t.slice(3).toLowerCase()}),yo={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},vo=/[A-Z]/g,xo=/-[a-z]/g,bo=/^data[-\w.:]+$/i;function wo(e){return"-"+e.toLowerCase()}function jo(e){return e.charAt(1).toUpperCase()}const ko=Ha([lo,ho,po,fo,go],"html"),No=Ha([lo,mo,po,fo,go],"svg");var So={},Co=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,Po=/\n/g,Eo=/^\s*/,To=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,Lo=/^:\s*/,Mo=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,Io=/^[;\s]*/,_o=/^\s+|\s+$/g,Do="";function Ao(e){return e?e.replace(_o,Do):Do}var Oo=o&&o.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(So,"__esModule",{value:!0}),So.default=function(e,t){var n=null;if(!e||"string"!=typeof e)return n;var s=(0,Ro.default)(e),i="function"==typeof t;return s.forEach(function(e){if("declaration"===e.type){var s=e.property,r=e.value;i?t(s,r,e):r&&((n=n||{})[s]=r)}}),n};var Ro=Oo(function(e,t){if("string"!=typeof e)throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,s=1;function i(e){var t=e.match(Po);t&&(n+=t.length);var i=e.lastIndexOf("\n");s=~i?e.length-i:s+e.length}function r(){var e={line:n,column:s};return function(t){return t.position=new a(e),c(),t}}function a(e){this.start=e,this.end={line:n,column:s},this.source=t.source}function o(i){var r=new Error(t.source+":"+n+":"+s+": "+i);if(r.reason=i,r.filename=t.source,r.line=n,r.column=s,r.source=e,!t.silent)throw r}function l(t){var n=t.exec(e);if(n){var s=n[0];return i(s),e=e.slice(s.length),n}}function c(){l(Eo)}function u(e){var t;for(e=e||[];t=h();)!1!==t&&e.push(t);return e}function h(){var t=r();if("/"==e.charAt(0)&&"*"==e.charAt(1)){for(var n=2;Do!=e.charAt(n)&&("*"!=e.charAt(n)||"/"!=e.charAt(n+1));)++n;if(n+=2,Do===e.charAt(n-1))return o("End of comment missing");var a=e.slice(2,n-2);return s+=2,i(a),e=e.slice(n),s+=2,t({type:"comment",comment:a})}}function d(){var e=r(),t=l(To);if(t){if(h(),!l(Lo))return o("property missing ':'");var n=l(Mo),s=e({type:"declaration",property:Ao(t[0].replace(Co,Do)),value:n?Ao(n[0].replace(Co,Do)):Do});return l(Io),s}}return a.prototype.content=e,c(),function(){var e,t=[];for(u(t);e=d();)!1!==e&&(t.push(e),u(t));return t}()});var Fo={};Object.defineProperty(Fo,"__esModule",{value:!0}),Fo.camelCase=void 0;var Bo=/^--[a-zA-Z0-9_-]+$/,zo=/-([a-z])/g,Wo=/^[^-]+$/,Uo=/^-(webkit|moz|ms|o|khtml)-/,Vo=/^-(ms)-/,$o=function(e,t){return t.toUpperCase()},Ho=function(e,t){return"".concat(t,"-")};Fo.camelCase=function(e,t){return void 0===t&&(t={}),function(e){return!e||Wo.test(e)||Bo.test(e)}(e)?e:(e=e.toLowerCase(),(e=t.reactCompat?e.replace(Vo,Ho):e.replace(Uo,Ho)).replace(zo,$o))};var qo=(o&&o.__importDefault||function(e){return e&&e.__esModule?e:{default:e}})(So),Yo=Fo;function Go(e,t){var n={};return e&&"string"==typeof e?((0,qo.default)(e,function(e,s){e&&s&&(n[(0,Yo.camelCase)(e,t)]=s)}),n):n}Go.default=Go;const Qo=a(Go),Jo=Ko("end"),Xo=Ko("start");function Ko(e){return function(t){const n=t&&t.position&&t.position[e]||{};if("number"==typeof n.line&&n.line>0&&"number"==typeof n.column&&n.column>0)return{line:n.line,column:n.column,offset:"number"==typeof n.offset&&n.offset>-1?n.offset:void 0}}}function Zo(e){return e&&"object"==typeof e?"position"in e||"type"in e?tl(e.position):"start"in e||"end"in e?tl(e):"line"in e||"column"in e?el(e):"":""}function el(e){return nl(e&&e.line)+":"+nl(e&&e.column)}function tl(e){return el(e&&e.start)+"-"+el(e&&e.end)}function nl(e){return e&&"number"==typeof e?e:1}class sl extends Error{constructor(e,t,n){super(),"string"==typeof t&&(n=t,t=void 0);let s="",i={},r=!1;if(t&&(i="line"in t&&"column"in t||"start"in t&&"end"in t?{place:t}:"type"in t?{ancestors:[t],place:t.position}:{...t}),"string"==typeof e?s=e:!i.cause&&e&&(r=!0,s=e.message,i.cause=e),!i.ruleId&&!i.source&&"string"==typeof n){const e=n.indexOf(":");-1===e?i.ruleId=n:(i.source=n.slice(0,e),i.ruleId=n.slice(e+1))}if(!i.place&&i.ancestors&&i.ancestors){const e=i.ancestors[i.ancestors.length-1];e&&(i.place=e.position)}const a=i.place&&"start"in i.place?i.place.start:i.place;this.ancestors=i.ancestors||void 0,this.cause=i.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file="",this.message=s,this.line=a?a.line:void 0,this.name=Zo(i.place)||"1:1",this.place=i.place||void 0,this.reason=this.message,this.ruleId=i.ruleId||void 0,this.source=i.source||void 0,this.stack=r&&i.cause&&"string"==typeof i.cause.stack?i.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}sl.prototype.file="",sl.prototype.name="",sl.prototype.reason="",sl.prototype.message="",sl.prototype.stack="",sl.prototype.column=void 0,sl.prototype.line=void 0,sl.prototype.ancestors=void 0,sl.prototype.cause=void 0,sl.prototype.fatal=void 0,sl.prototype.place=void 0,sl.prototype.ruleId=void 0,sl.prototype.source=void 0;const il={}.hasOwnProperty,rl=new Map,al=/[A-Z]/g,ol=new Set(["table","tbody","thead","tfoot","tr"]),ll=new Set(["td","th"]),cl="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function ul(e,t){if(!t||void 0===t.Fragment)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let s;if(t.development){if("function"!=typeof t.jsxDEV)throw new TypeError("Expected `jsxDEV` in options when `development: true`");s=function(e,t){return n;function n(n,s,i,r){const a=Array.isArray(i.children),o=Xo(n);return t(s,i,r,a,{columnNumber:o?o.column-1:void 0,fileName:e,lineNumber:o?o.line:void 0},void 0)}}(n,t.jsxDEV)}else{if("function"!=typeof t.jsx)throw new TypeError("Expected `jsx` in production options");if("function"!=typeof t.jsxs)throw new TypeError("Expected `jsxs` in production options");s=function(e,t,n){return s;function s(e,s,i,r){const a=Array.isArray(i.children)?n:t;return r?a(s,i,r):a(s,i)}}(0,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:s,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:!1!==t.passKeys,passNode:t.passNode||!1,schema:"svg"===t.space?No:ko,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:!1!==t.tableCellAlignToStyle},r=hl(i,e,void 0);return r&&"string"!=typeof r?r:i.create(e,i.Fragment,{children:r||void 0},void 0)}function hl(e,t,n){return"element"===t.type?function(e,t,n){const s=e.schema;let i=s;"svg"===t.tagName.toLowerCase()&&"html"===s.space&&(i=No,e.schema=i);e.ancestors.push(t);const r=gl(e,t.tagName,!1),a=function(e,t){const n={};let s,i;for(i in t.properties)if("children"!==i&&il.call(t.properties,i)){const r=fl(e,i,t.properties[i]);if(r){const[i,a]=r;e.tableCellAlignToStyle&&"align"===i&&"string"==typeof a&&ll.has(t.tagName)?s=a:n[i]=a}}if(s){(n.style||(n.style={}))["css"===e.stylePropertyNameCase?"text-align":"textAlign"]=s}return n}(e,t);let o=pl(e,t);ol.has(t.tagName)&&(o=o.filter(function(e){return"string"!=typeof e||!("object"==typeof(t=e)?"text"===t.type&&Va(t.value):Va(t));var t}));return dl(e,a,r,t),ml(a,o),e.ancestors.pop(),e.schema=s,e.create(t,r,a,n)}(e,t,n):"mdxFlowExpression"===t.type||"mdxTextExpression"===t.type?function(e,t){if(t.data&&t.data.estree&&e.evaluater){const n=t.data.estree.body[0];return n.type,e.evaluater.evaluateExpression(n.expression)}yl(e,t.position)}(e,t):"mdxJsxFlowElement"===t.type||"mdxJsxTextElement"===t.type?function(e,t,n){const s=e.schema;let i=s;"svg"===t.name&&"html"===s.space&&(i=No,e.schema=i);e.ancestors.push(t);const r=null===t.name?e.Fragment:gl(e,t.name,!0),a=function(e,t){const n={};for(const s of t.attributes)if("mdxJsxExpressionAttribute"===s.type)if(s.data&&s.data.estree&&e.evaluater){const t=s.data.estree.body[0];Oa(t.type);const i=t.expression;Oa(i.type);const r=i.properties[0];Oa(r.type),Object.assign(n,e.evaluater.evaluateExpression(r.argument))}else yl(e,t.position);else{const i=s.name;let r;if(s.value&&"object"==typeof s.value)if(s.value.data&&s.value.data.estree&&e.evaluater){const t=s.value.data.estree.body[0];Oa(t.type),r=e.evaluater.evaluateExpression(t.expression)}else yl(e,t.position);else r=null===s.value||s.value;n[i]=r}return n}(e,t),o=pl(e,t);return dl(e,a,r,t),ml(a,o),e.ancestors.pop(),e.schema=s,e.create(t,r,a,n)}(e,t,n):"mdxjsEsm"===t.type?function(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);yl(e,t.position)}(e,t):"root"===t.type?function(e,t,n){const s={};return ml(s,pl(e,t)),e.create(t,e.Fragment,s,n)}(e,t,n):"text"===t.type?function(e,t){return t.value}(0,t):void 0}function dl(e,t,n,s){"string"!=typeof n&&n!==e.Fragment&&e.passNode&&(t.node=s)}function ml(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function pl(e,t){const n=[];let s=-1;const i=e.passKeys?new Map:rl;for(;++s<t.children.length;){const r=t.children[s];let a;if(e.passKeys){const e="element"===r.type?r.tagName:"mdxJsxFlowElement"===r.type||"mdxJsxTextElement"===r.type?r.name:void 0;if(e){const t=i.get(e)||0;a=e+"-"+t,i.set(e,t+1)}}const o=hl(e,r,a);void 0!==o&&n.push(o)}return n}function fl(e,t,n){const s=function(e,t){const n=qa(t);let s=t,i=Ya;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&"data"===n.slice(0,4)&&bo.test(t)){if("-"===t.charAt(4)){const e=t.slice(5).replace(xo,jo);s="data"+e.charAt(0).toUpperCase()+e.slice(1)}else{const e=t.slice(4);if(!xo.test(e)){let n=e.replace(vo,wo);"-"!==n.charAt(0)&&(n="-"+n),t="data"+n}}i=ro}return new i(s,t)}(e.schema,t);if(!(null==n||"number"==typeof n&&Number.isNaN(n))){if(Array.isArray(n)&&(n=s.commaSeparated?function(e){const t={};return(""===e[e.length-1]?[...e,""]:e).join((t.padRight?" ":"")+","+(!1===t.padLeft?"":" ")).trim()}(n):n.join(" ").trim()),"style"===s.property){let t="object"==typeof n?n:function(e,t){try{return Qo(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const t=n,s=new sl("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:t,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw s.file=e.filePath||void 0,s.url=cl+"#cannot-parse-style-attribute",s}}(e,String(n));return"css"===e.stylePropertyNameCase&&(t=function(e){const t={};let n;for(n in e)il.call(e,n)&&(t[vl(n)]=e[n]);return t}(t)),["style",t]}return["react"===e.elementAttributeNameCase&&s.space?yo[s.property]||s.property:s.attribute,n]}}function gl(e,t,n){let s;if(n)if(t.includes(".")){const e=t.split(".");let n,i=-1;for(;++i<e.length;){const t=Wa(e[i])?{type:"Identifier",name:e[i]}:{type:"Literal",value:e[i]};n=n?{type:"MemberExpression",object:n,property:t,computed:Boolean(i&&"Literal"===t.type),optional:!1}:t}s=n}else s=Wa(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};else s={type:"Literal",value:t};if("Literal"===s.type){const t=s.value;return il.call(e.components,t)?e.components[t]:t}if(e.evaluater)return e.evaluater.evaluateExpression(s);yl(e)}function yl(e,t){const n=new sl("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=cl+"#cannot-handle-mdx-estrees-without-createevaluater",n}function vl(e){let t=e.replace(al,xl);return"ms-"===t.slice(0,3)&&(t="-"+t),t}function xl(e){return"-"+e.toLowerCase()}const bl={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},wl={};function jl(e,t,n){if(function(e){return Boolean(e&&"object"==typeof e)}(e)){if("value"in e)return"html"!==e.type||n?e.value:"";if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return kl(e.children,t,n)}return Array.isArray(e)?kl(e,t,n):""}function kl(e,t,n){const s=[];let i=-1;for(;++i<e.length;)s[i]=jl(e[i],t,n);return s.join("")}const Nl=document.createElement("i");function Sl(e){const t="&"+e+";";Nl.innerHTML=t;const n=Nl.textContent;return(59!==n.charCodeAt(n.length-1)||"semi"===e)&&(n!==t&&n)}function Cl(e,t,n,s){const i=e.length;let r,a=0;if(t=t<0?-t>i?0:i+t:t>i?i:t,n=n>0?n:0,s.length<1e4)r=Array.from(s),r.unshift(t,n),e.splice(...r);else for(n&&e.splice(t,n);a<s.length;)r=s.slice(a,a+1e4),r.unshift(t,0),e.splice(...r),a+=1e4,t+=1e4}function Pl(e,t){return e.length>0?(Cl(e,e.length,0,t),e):t}const El={}.hasOwnProperty;function Tl(e,t){let n;for(n in t){const s=(El.call(e,n)?e[n]:void 0)||(e[n]={}),i=t[n];let r;if(i)for(r in i){El.call(s,r)||(s[r]=[]);const e=i[r];Ll(s[r],Array.isArray(e)?e:e?[e]:[])}}}function Ll(e,t){let n=-1;const s=[];for(;++n<t.length;)("after"===t[n].add?e:s).push(t[n]);Cl(e,0,0,s)}function Ml(e,t){const n=Number.parseInt(e,t);return n<9||11===n||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||!(65535&~n)||65534==(65535&n)||n>1114111?"�":String.fromCodePoint(n)}function Il(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const _l=Hl(/[A-Za-z]/),Dl=Hl(/[\dA-Za-z]/),Al=Hl(/[#-'*+\--9=?A-Z^-~]/);function Ol(e){return null!==e&&(e<32||127===e)}const Rl=Hl(/\d/),Fl=Hl(/[\dA-Fa-f]/),Bl=Hl(/[!-/:-@[-`{-~]/);function zl(e){return null!==e&&e<-2}function Wl(e){return null!==e&&(e<0||32===e)}function Ul(e){return-2===e||-1===e||32===e}const Vl=Hl(new RegExp("\\p{P}|\\p{S}","u")),$l=Hl(/\s/);function Hl(e){return function(t){return null!==t&&t>-1&&e.test(String.fromCharCode(t))}}function ql(e){const t=[];let n=-1,s=0,i=0;for(;++n<e.length;){const r=e.charCodeAt(n);let a="";if(37===r&&Dl(e.charCodeAt(n+1))&&Dl(e.charCodeAt(n+2)))i=2;else if(r<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(r))||(a=String.fromCharCode(r));else if(r>55295&&r<57344){const t=e.charCodeAt(n+1);r<56320&&t>56319&&t<57344?(a=String.fromCharCode(r,t),i=1):a="�"}else a=String.fromCharCode(r);a&&(t.push(e.slice(s,n),encodeURIComponent(a)),s=n+i+1,a=""),i&&(n+=i,i=0)}return t.join("")+e.slice(s)}function Yl(e,t,n,s){const i=s?s-1:Number.POSITIVE_INFINITY;let r=0;return function(s){if(Ul(s))return e.enter(n),a(s);return t(s)};function a(s){return Ul(s)&&r++<i?(e.consume(s),a):(e.exit(n),t(s))}}const Gl={tokenize:function(e){const t=e.attempt(this.parser.constructs.contentInitial,function(n){if(null===n)return void e.consume(n);return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),Yl(e,t,"linePrefix")},function(t){return e.enter("paragraph"),s(t)});let n;return t;function s(t){const s=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=s),n=s,i(t)}function i(t){return null===t?(e.exit("chunkText"),e.exit("paragraph"),void e.consume(t)):zl(t)?(e.consume(t),e.exit("chunkText"),s):(e.consume(t),i)}}};const Ql={tokenize:function(e){const t=this,n=[];let s,i,r,a=0;return o;function o(s){if(a<n.length){const i=n[a];return t.containerState=i[1],e.attempt(i[0].continuation,l,c)(s)}return c(s)}function l(e){if(a++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,s&&v();const n=t.events.length;let i,r=n;for(;r--;)if("exit"===t.events[r][0]&&"chunkFlow"===t.events[r][1].type){i=t.events[r][1].end;break}y(a);let o=n;for(;o<t.events.length;)t.events[o][1].end={...i},o++;return Cl(t.events,r+1,0,t.events.slice(n)),t.events.length=o,c(e)}return o(e)}function c(i){if(a===n.length){if(!s)return d(i);if(s.currentConstruct&&s.currentConstruct.concrete)return p(i);t.interrupt=Boolean(s.currentConstruct&&!s._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(Jl,u,h)(i)}function u(e){return s&&v(),y(a),d(e)}function h(e){return t.parser.lazy[t.now().line]=a!==n.length,r=t.now().offset,p(e)}function d(n){return t.containerState={},e.attempt(Jl,m,p)(n)}function m(e){return a++,n.push([t.currentConstruct,t.containerState]),d(e)}function p(n){return null===n?(s&&v(),y(0),void e.consume(n)):(s=s||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:s,contentType:"flow",previous:i}),f(n))}function f(n){return null===n?(g(e.exit("chunkFlow"),!0),y(0),void e.consume(n)):zl(n)?(e.consume(n),g(e.exit("chunkFlow")),a=0,t.interrupt=void 0,o):(e.consume(n),f)}function g(e,n){const o=t.sliceStream(e);if(n&&o.push(null),e.previous=i,i&&(i.next=e),i=e,s.defineSkip(e.start),s.write(o),t.parser.lazy[e.start.line]){let e=s.events.length;for(;e--;)if(s.events[e][1].start.offset<r&&(!s.events[e][1].end||s.events[e][1].end.offset>r))return;const n=t.events.length;let i,o,l=n;for(;l--;)if("exit"===t.events[l][0]&&"chunkFlow"===t.events[l][1].type){if(i){o=t.events[l][1].end;break}i=!0}for(y(a),e=n;e<t.events.length;)t.events[e][1].end={...o},e++;Cl(t.events,l+1,0,t.events.slice(n)),t.events.length=e}}function y(s){let i=n.length;for(;i-- >s;){const s=n[i];t.containerState=s[1],s[0].exit.call(t,e)}n.length=s}function v(){s.write([null]),i=void 0,s=void 0,t.containerState._closeFlow=void 0}}},Jl={tokenize:function(e,t,n){return Yl(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}};function Xl(e){return null===e||Wl(e)||$l(e)?1:Vl(e)?2:void 0}function Kl(e,t,n){const s=[];let i=-1;for(;++i<e.length;){const r=e[i].resolveAll;r&&!s.includes(r)&&(t=r(t,n),s.push(r))}return t}const Zl={name:"attention",resolveAll:function(e,t){let n,s,i,r,a,o,l,c,u=-1;for(;++u<e.length;)if("enter"===e[u][0]&&"attentionSequence"===e[u][1].type&&e[u][1]._close)for(n=u;n--;)if("exit"===e[n][0]&&"attentionSequence"===e[n][1].type&&e[n][1]._open&&t.sliceSerialize(e[n][1]).charCodeAt(0)===t.sliceSerialize(e[u][1]).charCodeAt(0)){if((e[n][1]._close||e[u][1]._open)&&(e[u][1].end.offset-e[u][1].start.offset)%3&&!((e[n][1].end.offset-e[n][1].start.offset+e[u][1].end.offset-e[u][1].start.offset)%3))continue;o=e[n][1].end.offset-e[n][1].start.offset>1&&e[u][1].end.offset-e[u][1].start.offset>1?2:1;const h={...e[n][1].end},d={...e[u][1].start};ec(h,-o),ec(d,o),r={type:o>1?"strongSequence":"emphasisSequence",start:h,end:{...e[n][1].end}},a={type:o>1?"strongSequence":"emphasisSequence",start:{...e[u][1].start},end:d},i={type:o>1?"strongText":"emphasisText",start:{...e[n][1].end},end:{...e[u][1].start}},s={type:o>1?"strong":"emphasis",start:{...r.start},end:{...a.end}},e[n][1].end={...r.start},e[u][1].start={...a.end},l=[],e[n][1].end.offset-e[n][1].start.offset&&(l=Pl(l,[["enter",e[n][1],t],["exit",e[n][1],t]])),l=Pl(l,[["enter",s,t],["enter",r,t],["exit",r,t],["enter",i,t]]),l=Pl(l,Kl(t.parser.constructs.insideSpan.null,e.slice(n+1,u),t)),l=Pl(l,[["exit",i,t],["enter",a,t],["exit",a,t],["exit",s,t]]),e[u][1].end.offset-e[u][1].start.offset?(c=2,l=Pl(l,[["enter",e[u][1],t],["exit",e[u][1],t]])):c=0,Cl(e,n-1,u-n+3,l),u=n+l.length-c-2;break}u=-1;for(;++u<e.length;)"attentionSequence"===e[u][1].type&&(e[u][1].type="data");return e},tokenize:function(e,t){const n=this.parser.constructs.attentionMarkers.null,s=this.previous,i=Xl(s);let r;return function(t){return r=t,e.enter("attentionSequence"),a(t)};function a(o){if(o===r)return e.consume(o),a;const l=e.exit("attentionSequence"),c=Xl(o),u=!c||2===c&&i||n.includes(o),h=!i||2===i&&c||n.includes(s);return l._open=Boolean(42===r?u:u&&(i||!h)),l._close=Boolean(42===r?h:h&&(c||!u)),t(o)}}};function ec(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const tc={name:"autolink",tokenize:function(e,t,n){let s=0;return function(t){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(t),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),i};function i(t){return _l(t)?(e.consume(t),r):64===t?n(t):l(t)}function r(e){return 43===e||45===e||46===e||Dl(e)?(s=1,a(e)):l(e)}function a(t){return 58===t?(e.consume(t),s=0,o):(43===t||45===t||46===t||Dl(t))&&s++<32?(e.consume(t),a):(s=0,l(t))}function o(s){return 62===s?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(s),e.exit("autolinkMarker"),e.exit("autolink"),t):null===s||32===s||60===s||Ol(s)?n(s):(e.consume(s),o)}function l(t){return 64===t?(e.consume(t),c):Al(t)?(e.consume(t),l):n(t)}function c(e){return Dl(e)?u(e):n(e)}function u(n){return 46===n?(e.consume(n),s=0,c):62===n?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(n),e.exit("autolinkMarker"),e.exit("autolink"),t):h(n)}function h(t){if((45===t||Dl(t))&&s++<63){const n=45===t?h:u;return e.consume(t),n}return n(t)}}};const nc={partial:!0,tokenize:function(e,t,n){return function(t){return Ul(t)?Yl(e,s,"linePrefix")(t):s(t)};function s(e){return null===e||zl(e)?t(e):n(e)}}};const sc={continuation:{tokenize:function(e,t,n){const s=this;return function(t){if(Ul(t))return Yl(e,i,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t);return i(t)};function i(s){return e.attempt(sc,t,n)(s)}}},exit:function(e){e.exit("blockQuote")},name:"blockQuote",tokenize:function(e,t,n){const s=this;return function(t){if(62===t){const n=s.containerState;return n.open||(e.enter("blockQuote",{_container:!0}),n.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(t),e.exit("blockQuoteMarker"),i}return n(t)};function i(n){return Ul(n)?(e.enter("blockQuotePrefixWhitespace"),e.consume(n),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(n))}}};const ic={name:"characterEscape",tokenize:function(e,t,n){return function(t){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(t),e.exit("escapeMarker"),s};function s(s){return Bl(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}};const rc={name:"characterReference",tokenize:function(e,t,n){const s=this;let i,r,a=0;return function(t){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(t),e.exit("characterReferenceMarker"),o};function o(t){return 35===t?(e.enter("characterReferenceMarkerNumeric"),e.consume(t),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),i=31,r=Dl,c(t))}function l(t){return 88===t||120===t?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(t),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),i=6,r=Fl,c):(e.enter("characterReferenceValue"),i=7,r=Rl,c(t))}function c(o){if(59===o&&a){const i=e.exit("characterReferenceValue");return r!==Dl||Sl(s.sliceSerialize(i))?(e.enter("characterReferenceMarker"),e.consume(o),e.exit("characterReferenceMarker"),e.exit("characterReference"),t):n(o)}return r(o)&&a++<i?(e.consume(o),c):n(o)}}};const ac={partial:!0,tokenize:function(e,t,n){const s=this;return function(t){if(null===t)return n(t);return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),i};function i(e){return s.parser.lazy[s.now().line]?n(e):t(e)}}},oc={concrete:!0,name:"codeFenced",tokenize:function(e,t,n){const s=this,i={partial:!0,tokenize:function(e,t,n){let i=0;return a;function a(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),l}function l(t){return e.enter("codeFencedFence"),Ul(t)?Yl(e,c,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):c(t)}function c(t){return t===r?(e.enter("codeFencedFenceSequence"),u(t)):n(t)}function u(t){return t===r?(i++,e.consume(t),u):i>=o?(e.exit("codeFencedFenceSequence"),Ul(t)?Yl(e,h,"whitespace")(t):h(t)):n(t)}function h(s){return null===s||zl(s)?(e.exit("codeFencedFence"),t(s)):n(s)}}};let r,a=0,o=0;return function(t){return function(t){const n=s.events[s.events.length-1];return a=n&&"linePrefix"===n[1].type?n[2].sliceSerialize(n[1],!0).length:0,r=t,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),l(t)}(t)};function l(t){return t===r?(o++,e.consume(t),l):o<3?n(t):(e.exit("codeFencedFenceSequence"),Ul(t)?Yl(e,c,"whitespace")(t):c(t))}function c(n){return null===n||zl(n)?(e.exit("codeFencedFence"),s.interrupt?t(n):e.check(ac,m,v)(n)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),u(n))}function u(t){return null===t||zl(t)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),c(t)):Ul(t)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Yl(e,h,"whitespace")(t)):96===t&&t===r?n(t):(e.consume(t),u)}function h(t){return null===t||zl(t)?c(t):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),d(t))}function d(t){return null===t||zl(t)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),c(t)):96===t&&t===r?n(t):(e.consume(t),d)}function m(t){return e.attempt(i,v,p)(t)}function p(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),f}function f(t){return a>0&&Ul(t)?Yl(e,g,"linePrefix",a+1)(t):g(t)}function g(t){return null===t||zl(t)?e.check(ac,m,v)(t):(e.enter("codeFlowValue"),y(t))}function y(t){return null===t||zl(t)?(e.exit("codeFlowValue"),g(t)):(e.consume(t),y)}function v(n){return e.exit("codeFenced"),t(n)}}};const lc={name:"codeIndented",tokenize:function(e,t,n){const s=this;return function(t){return e.enter("codeIndented"),Yl(e,i,"linePrefix",5)(t)};function i(e){const t=s.events[s.events.length-1];return t&&"linePrefix"===t[1].type&&t[2].sliceSerialize(t[1],!0).length>=4?r(e):n(e)}function r(t){return null===t?o(t):zl(t)?e.attempt(cc,r,o)(t):(e.enter("codeFlowValue"),a(t))}function a(t){return null===t||zl(t)?(e.exit("codeFlowValue"),r(t)):(e.consume(t),a)}function o(n){return e.exit("codeIndented"),t(n)}}},cc={partial:!0,tokenize:function(e,t,n){const s=this;return i;function i(t){return s.parser.lazy[s.now().line]?n(t):zl(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),i):Yl(e,r,"linePrefix",5)(t)}function r(e){const r=s.events[s.events.length-1];return r&&"linePrefix"===r[1].type&&r[2].sliceSerialize(r[1],!0).length>=4?t(e):zl(e)?i(e):n(e)}}};const uc={name:"codeText",previous:function(e){return 96!==e||"characterEscape"===this.events[this.events.length-1][1].type},resolve:function(e){let t,n,s=e.length-4,i=3;if(!("lineEnding"!==e[i][1].type&&"space"!==e[i][1].type||"lineEnding"!==e[s][1].type&&"space"!==e[s][1].type))for(t=i;++t<s;)if("codeTextData"===e[t][1].type){e[i][1].type="codeTextPadding",e[s][1].type="codeTextPadding",i+=2,s-=2;break}t=i-1,s++;for(;++t<=s;)void 0===n?t!==s&&"lineEnding"!==e[t][1].type&&(n=t):t!==s&&"lineEnding"!==e[t][1].type||(e[n][1].type="codeTextData",t!==n+2&&(e[n][1].end=e[t-1][1].end,e.splice(n+2,t-n-2),s-=t-n-2,t=n+2),n=void 0);return e},tokenize:function(e,t,n){let s,i,r=0;return function(t){return e.enter("codeText"),e.enter("codeTextSequence"),a(t)};function a(t){return 96===t?(e.consume(t),r++,a):(e.exit("codeTextSequence"),o(t))}function o(t){return null===t?n(t):32===t?(e.enter("space"),e.consume(t),e.exit("space"),o):96===t?(i=e.enter("codeTextSequence"),s=0,c(t)):zl(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),o):(e.enter("codeTextData"),l(t))}function l(t){return null===t||32===t||96===t||zl(t)?(e.exit("codeTextData"),o(t)):(e.consume(t),l)}function c(n){return 96===n?(e.consume(n),s++,c):s===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(n)):(i.type="codeTextData",l(n))}}};class hc{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,t){const n=null==t?Number.POSITIVE_INFINITY:t;return n<this.left.length?this.left.slice(e,n):e>this.left.length?this.right.slice(this.right.length-n+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-n+this.left.length).reverse())}splice(e,t,n){const s=t||0;this.setCursor(Math.trunc(e));const i=this.right.splice(this.right.length-s,Number.POSITIVE_INFINITY);return n&&dc(this.left,n),i.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),dc(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),dc(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&0===this.right.length||e<0&&0===this.left.length))if(e<this.left.length){const t=this.left.splice(e,Number.POSITIVE_INFINITY);dc(this.right,t.reverse())}else{const t=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);dc(this.left,t.reverse())}}}function dc(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function mc(e){const t={};let n,s,i,r,a,o,l,c=-1;const u=new hc(e);for(;++c<u.length;){for(;c in t;)c=t[c];if(n=u.get(c),c&&"chunkFlow"===n[1].type&&"listItemPrefix"===u.get(c-1)[1].type&&(o=n[1]._tokenizer.events,i=0,i<o.length&&"lineEndingBlank"===o[i][1].type&&(i+=2),i<o.length&&"content"===o[i][1].type))for(;++i<o.length&&"content"!==o[i][1].type;)"chunkText"===o[i][1].type&&(o[i][1]._isInFirstContentOfListItem=!0,i++);if("enter"===n[0])n[1].contentType&&(Object.assign(t,pc(u,c)),c=t[c],l=!0);else if(n[1]._container){for(i=c,s=void 0;i--;)if(r=u.get(i),"lineEnding"===r[1].type||"lineEndingBlank"===r[1].type)"enter"===r[0]&&(s&&(u.get(s)[1].type="lineEndingBlank"),r[1].type="lineEnding",s=i);else if("linePrefix"!==r[1].type&&"listItemIndent"!==r[1].type)break;s&&(n[1].end={...u.get(s)[1].start},a=u.slice(s,c),a.unshift(n),u.splice(s,c-s+1,a))}}return Cl(e,0,Number.POSITIVE_INFINITY,u.slice(0)),!l}function pc(e,t){const n=e.get(t)[1],s=e.get(t)[2];let i=t-1;const r=[];let a=n._tokenizer;a||(a=s.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(a._contentTypeTextTrailing=!0));const o=a.events,l=[],c={};let u,h,d=-1,m=n,p=0,f=0;const g=[f];for(;m;){for(;e.get(++i)[1]!==m;);r.push(i),m._tokenizer||(u=s.sliceStream(m),m.next||u.push(null),h&&a.defineSkip(m.start),m._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=!0),a.write(u),m._isInFirstContentOfListItem&&(a._gfmTasklistFirstContentOfListItem=void 0)),h=m,m=m.next}for(m=n;++d<o.length;)"exit"===o[d][0]&&"enter"===o[d-1][0]&&o[d][1].type===o[d-1][1].type&&o[d][1].start.line!==o[d][1].end.line&&(f=d+1,g.push(f),m._tokenizer=void 0,m.previous=void 0,m=m.next);for(a.events=[],m?(m._tokenizer=void 0,m.previous=void 0):g.pop(),d=g.length;d--;){const t=o.slice(g[d],g[d+1]),n=r.pop();l.push([n,n+t.length-1]),e.splice(n,2,t)}for(l.reverse(),d=-1;++d<l.length;)c[p+l[d][0]]=p+l[d][1],p+=l[d][1]-l[d][0]-1;return c}const fc={resolve:function(e){return mc(e),e},tokenize:function(e,t){let n;return function(t){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),s(t)};function s(t){return null===t?i(t):zl(t)?e.check(gc,r,i)(t):(e.consume(t),s)}function i(n){return e.exit("chunkContent"),e.exit("content"),t(n)}function r(t){return e.consume(t),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,s}}},gc={partial:!0,tokenize:function(e,t,n){const s=this;return function(t){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),Yl(e,i,"linePrefix")};function i(i){if(null===i||zl(i))return n(i);const r=s.events[s.events.length-1];return!s.parser.constructs.disable.null.includes("codeIndented")&&r&&"linePrefix"===r[1].type&&r[2].sliceSerialize(r[1],!0).length>=4?t(i):e.interrupt(s.parser.constructs.flow,n,t)(i)}}};function yc(e,t,n,s,i,r,a,o,l){const c=l||Number.POSITIVE_INFINITY;let u=0;return function(t){if(60===t)return e.enter(s),e.enter(i),e.enter(r),e.consume(t),e.exit(r),h;if(null===t||32===t||41===t||Ol(t))return n(t);return e.enter(s),e.enter(a),e.enter(o),e.enter("chunkString",{contentType:"string"}),p(t)};function h(n){return 62===n?(e.enter(r),e.consume(n),e.exit(r),e.exit(i),e.exit(s),t):(e.enter(o),e.enter("chunkString",{contentType:"string"}),d(n))}function d(t){return 62===t?(e.exit("chunkString"),e.exit(o),h(t)):null===t||60===t||zl(t)?n(t):(e.consume(t),92===t?m:d)}function m(t){return 60===t||62===t||92===t?(e.consume(t),d):d(t)}function p(i){return u||null!==i&&41!==i&&!Wl(i)?u<c&&40===i?(e.consume(i),u++,p):41===i?(e.consume(i),u--,p):null===i||32===i||40===i||Ol(i)?n(i):(e.consume(i),92===i?f:p):(e.exit("chunkString"),e.exit(o),e.exit(a),e.exit(s),t(i))}function f(t){return 40===t||41===t||92===t?(e.consume(t),p):p(t)}}function vc(e,t,n,s,i,r){const a=this;let o,l=0;return function(t){return e.enter(s),e.enter(i),e.consume(t),e.exit(i),e.enter(r),c};function c(h){return l>999||null===h||91===h||93===h&&!o||94===h&&!l&&"_hiddenFootnoteSupport"in a.parser.constructs?n(h):93===h?(e.exit(r),e.enter(i),e.consume(h),e.exit(i),e.exit(s),t):zl(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),u(h))}function u(t){return null===t||91===t||93===t||zl(t)||l++>999?(e.exit("chunkString"),c(t)):(e.consume(t),o||(o=!Ul(t)),92===t?h:u)}function h(t){return 91===t||92===t||93===t?(e.consume(t),l++,u):u(t)}}function xc(e,t,n,s,i,r){let a;return function(t){if(34===t||39===t||40===t)return e.enter(s),e.enter(i),e.consume(t),e.exit(i),a=40===t?41:t,o;return n(t)};function o(n){return n===a?(e.enter(i),e.consume(n),e.exit(i),e.exit(s),t):(e.enter(r),l(n))}function l(t){return t===a?(e.exit(r),o(a)):null===t?n(t):zl(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),Yl(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(t))}function c(t){return t===a||null===t||zl(t)?(e.exit("chunkString"),l(t)):(e.consume(t),92===t?u:c)}function u(t){return t===a||92===t?(e.consume(t),c):c(t)}}function bc(e,t){let n;return function s(i){if(zl(i))return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,s;if(Ul(i))return Yl(e,s,n?"linePrefix":"lineSuffix")(i);return t(i)}}const wc={name:"definition",tokenize:function(e,t,n){const s=this;let i;return function(t){return e.enter("definition"),function(t){return vc.call(s,e,r,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(t)}(t)};function r(t){return i=Il(s.sliceSerialize(s.events[s.events.length-1][1]).slice(1,-1)),58===t?(e.enter("definitionMarker"),e.consume(t),e.exit("definitionMarker"),a):n(t)}function a(t){return Wl(t)?bc(e,o)(t):o(t)}function o(t){return yc(e,l,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(t)}function l(t){return e.attempt(jc,c,c)(t)}function c(t){return Ul(t)?Yl(e,u,"whitespace")(t):u(t)}function u(r){return null===r||zl(r)?(e.exit("definition"),s.parser.defined.push(i),t(r)):n(r)}}},jc={partial:!0,tokenize:function(e,t,n){return function(t){return Wl(t)?bc(e,s)(t):n(t)};function s(t){return xc(e,i,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(t)}function i(t){return Ul(t)?Yl(e,r,"whitespace")(t):r(t)}function r(e){return null===e||zl(e)?t(e):n(e)}}};const kc={name:"hardBreakEscape",tokenize:function(e,t,n){return function(t){return e.enter("hardBreakEscape"),e.consume(t),s};function s(s){return zl(s)?(e.exit("hardBreakEscape"),t(s)):n(s)}}};const Nc={name:"headingAtx",resolve:function(e,t){let n,s,i=e.length-2,r=3;"whitespace"===e[r][1].type&&(r+=2);i-2>r&&"whitespace"===e[i][1].type&&(i-=2);"atxHeadingSequence"===e[i][1].type&&(r===i-1||i-4>r&&"whitespace"===e[i-2][1].type)&&(i-=r+1===i?2:4);i>r&&(n={type:"atxHeadingText",start:e[r][1].start,end:e[i][1].end},s={type:"chunkText",start:e[r][1].start,end:e[i][1].end,contentType:"text"},Cl(e,r,i-r+1,[["enter",n,t],["enter",s,t],["exit",s,t],["exit",n,t]]));return e},tokenize:function(e,t,n){let s=0;return function(t){return e.enter("atxHeading"),function(t){return e.enter("atxHeadingSequence"),i(t)}(t)};function i(t){return 35===t&&s++<6?(e.consume(t),i):null===t||Wl(t)?(e.exit("atxHeadingSequence"),r(t)):n(t)}function r(n){return 35===n?(e.enter("atxHeadingSequence"),a(n)):null===n||zl(n)?(e.exit("atxHeading"),t(n)):Ul(n)?Yl(e,r,"whitespace")(n):(e.enter("atxHeadingText"),o(n))}function a(t){return 35===t?(e.consume(t),a):(e.exit("atxHeadingSequence"),r(t))}function o(t){return null===t||35===t||Wl(t)?(e.exit("atxHeadingText"),r(t)):(e.consume(t),o)}}};const Sc=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Cc=["pre","script","style","textarea"],Pc={concrete:!0,name:"htmlFlow",resolveTo:function(e){let t=e.length;for(;t--&&("enter"!==e[t][0]||"htmlFlow"!==e[t][1].type););t>1&&"linePrefix"===e[t-2][1].type&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2));return e},tokenize:function(e,t,n){const s=this;let i,r,a,o,l;return function(t){return function(t){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(t),c}(t)};function c(o){return 33===o?(e.consume(o),u):47===o?(e.consume(o),r=!0,m):63===o?(e.consume(o),i=3,s.interrupt?t:D):_l(o)?(e.consume(o),a=String.fromCharCode(o),p):n(o)}function u(r){return 45===r?(e.consume(r),i=2,h):91===r?(e.consume(r),i=5,o=0,d):_l(r)?(e.consume(r),i=4,s.interrupt?t:D):n(r)}function h(i){return 45===i?(e.consume(i),s.interrupt?t:D):n(i)}function d(i){const r="CDATA[";return i===r.charCodeAt(o++)?(e.consume(i),6===o?s.interrupt?t:C:d):n(i)}function m(t){return _l(t)?(e.consume(t),a=String.fromCharCode(t),p):n(t)}function p(o){if(null===o||47===o||62===o||Wl(o)){const l=47===o,c=a.toLowerCase();return l||r||!Cc.includes(c)?Sc.includes(a.toLowerCase())?(i=6,l?(e.consume(o),f):s.interrupt?t(o):C(o)):(i=7,s.interrupt&&!s.parser.lazy[s.now().line]?n(o):r?g(o):y(o)):(i=1,s.interrupt?t(o):C(o))}return 45===o||Dl(o)?(e.consume(o),a+=String.fromCharCode(o),p):n(o)}function f(i){return 62===i?(e.consume(i),s.interrupt?t:C):n(i)}function g(t){return Ul(t)?(e.consume(t),g):N(t)}function y(t){return 47===t?(e.consume(t),N):58===t||95===t||_l(t)?(e.consume(t),v):Ul(t)?(e.consume(t),y):N(t)}function v(t){return 45===t||46===t||58===t||95===t||Dl(t)?(e.consume(t),v):x(t)}function x(t){return 61===t?(e.consume(t),b):Ul(t)?(e.consume(t),x):y(t)}function b(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),l=t,w):Ul(t)?(e.consume(t),b):j(t)}function w(t){return t===l?(e.consume(t),l=null,k):null===t||zl(t)?n(t):(e.consume(t),w)}function j(t){return null===t||34===t||39===t||47===t||60===t||61===t||62===t||96===t||Wl(t)?x(t):(e.consume(t),j)}function k(e){return 47===e||62===e||Ul(e)?y(e):n(e)}function N(t){return 62===t?(e.consume(t),S):n(t)}function S(t){return null===t||zl(t)?C(t):Ul(t)?(e.consume(t),S):n(t)}function C(t){return 45===t&&2===i?(e.consume(t),L):60===t&&1===i?(e.consume(t),M):62===t&&4===i?(e.consume(t),A):63===t&&3===i?(e.consume(t),D):93===t&&5===i?(e.consume(t),_):!zl(t)||6!==i&&7!==i?null===t||zl(t)?(e.exit("htmlFlowData"),P(t)):(e.consume(t),C):(e.exit("htmlFlowData"),e.check(Ec,O,P)(t))}function P(t){return e.check(Tc,E,O)(t)}function E(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),T}function T(t){return null===t||zl(t)?P(t):(e.enter("htmlFlowData"),C(t))}function L(t){return 45===t?(e.consume(t),D):C(t)}function M(t){return 47===t?(e.consume(t),a="",I):C(t)}function I(t){if(62===t){const n=a.toLowerCase();return Cc.includes(n)?(e.consume(t),A):C(t)}return _l(t)&&a.length<8?(e.consume(t),a+=String.fromCharCode(t),I):C(t)}function _(t){return 93===t?(e.consume(t),D):C(t)}function D(t){return 62===t?(e.consume(t),A):45===t&&2===i?(e.consume(t),D):C(t)}function A(t){return null===t||zl(t)?(e.exit("htmlFlowData"),O(t)):(e.consume(t),A)}function O(n){return e.exit("htmlFlow"),t(n)}}},Ec={partial:!0,tokenize:function(e,t,n){return function(s){return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),e.attempt(nc,t,n)}}},Tc={partial:!0,tokenize:function(e,t,n){const s=this;return function(t){if(zl(t))return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),i;return n(t)};function i(e){return s.parser.lazy[s.now().line]?n(e):t(e)}}};const Lc={name:"htmlText",tokenize:function(e,t,n){const s=this;let i,r,a;return function(t){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(t),o};function o(t){return 33===t?(e.consume(t),l):47===t?(e.consume(t),b):63===t?(e.consume(t),v):_l(t)?(e.consume(t),k):n(t)}function l(t){return 45===t?(e.consume(t),c):91===t?(e.consume(t),r=0,m):_l(t)?(e.consume(t),y):n(t)}function c(t){return 45===t?(e.consume(t),d):n(t)}function u(t){return null===t?n(t):45===t?(e.consume(t),h):zl(t)?(a=u,I(t)):(e.consume(t),u)}function h(t){return 45===t?(e.consume(t),d):u(t)}function d(e){return 62===e?M(e):45===e?h(e):u(e)}function m(t){const s="CDATA[";return t===s.charCodeAt(r++)?(e.consume(t),6===r?p:m):n(t)}function p(t){return null===t?n(t):93===t?(e.consume(t),f):zl(t)?(a=p,I(t)):(e.consume(t),p)}function f(t){return 93===t?(e.consume(t),g):p(t)}function g(t){return 62===t?M(t):93===t?(e.consume(t),g):p(t)}function y(t){return null===t||62===t?M(t):zl(t)?(a=y,I(t)):(e.consume(t),y)}function v(t){return null===t?n(t):63===t?(e.consume(t),x):zl(t)?(a=v,I(t)):(e.consume(t),v)}function x(e){return 62===e?M(e):v(e)}function b(t){return _l(t)?(e.consume(t),w):n(t)}function w(t){return 45===t||Dl(t)?(e.consume(t),w):j(t)}function j(t){return zl(t)?(a=j,I(t)):Ul(t)?(e.consume(t),j):M(t)}function k(t){return 45===t||Dl(t)?(e.consume(t),k):47===t||62===t||Wl(t)?N(t):n(t)}function N(t){return 47===t?(e.consume(t),M):58===t||95===t||_l(t)?(e.consume(t),S):zl(t)?(a=N,I(t)):Ul(t)?(e.consume(t),N):M(t)}function S(t){return 45===t||46===t||58===t||95===t||Dl(t)?(e.consume(t),S):C(t)}function C(t){return 61===t?(e.consume(t),P):zl(t)?(a=C,I(t)):Ul(t)?(e.consume(t),C):N(t)}function P(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),i=t,E):zl(t)?(a=P,I(t)):Ul(t)?(e.consume(t),P):(e.consume(t),T)}function E(t){return t===i?(e.consume(t),i=void 0,L):null===t?n(t):zl(t)?(a=E,I(t)):(e.consume(t),E)}function T(t){return null===t||34===t||39===t||60===t||61===t||96===t?n(t):47===t||62===t||Wl(t)?N(t):(e.consume(t),T)}function L(e){return 47===e||62===e||Wl(e)?N(e):n(e)}function M(s){return 62===s?(e.consume(s),e.exit("htmlTextData"),e.exit("htmlText"),t):n(s)}function I(t){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),_}function _(t){return Ul(t)?Yl(e,D,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):D(t)}function D(t){return e.enter("htmlTextData"),a(t)}}};const Mc={name:"labelEnd",resolveAll:function(e){let t=-1;const n=[];for(;++t<e.length;){const s=e[t][1];if(n.push(e[t]),"labelImage"===s.type||"labelLink"===s.type||"labelEnd"===s.type){const e="labelImage"===s.type?4:2;s.type="data",t+=e}}e.length!==n.length&&Cl(e,0,e.length,n);return e},resolveTo:function(e,t){let n,s,i,r,a=e.length,o=0;for(;a--;)if(n=e[a][1],s){if("link"===n.type||"labelLink"===n.type&&n._inactive)break;"enter"===e[a][0]&&"labelLink"===n.type&&(n._inactive=!0)}else if(i){if("enter"===e[a][0]&&("labelImage"===n.type||"labelLink"===n.type)&&!n._balanced&&(s=a,"labelLink"!==n.type)){o=2;break}}else"labelEnd"===n.type&&(i=a);const l={type:"labelLink"===e[s][1].type?"link":"image",start:{...e[s][1].start},end:{...e[e.length-1][1].end}},c={type:"label",start:{...e[s][1].start},end:{...e[i][1].end}},u={type:"labelText",start:{...e[s+o+2][1].end},end:{...e[i-2][1].start}};return r=[["enter",l,t],["enter",c,t]],r=Pl(r,e.slice(s+1,s+o+3)),r=Pl(r,[["enter",u,t]]),r=Pl(r,Kl(t.parser.constructs.insideSpan.null,e.slice(s+o+4,i-3),t)),r=Pl(r,[["exit",u,t],e[i-2],e[i-1],["exit",c,t]]),r=Pl(r,e.slice(i+1)),r=Pl(r,[["exit",l,t]]),Cl(e,s,e.length,r),e},tokenize:function(e,t,n){const s=this;let i,r,a=s.events.length;for(;a--;)if(("labelImage"===s.events[a][1].type||"labelLink"===s.events[a][1].type)&&!s.events[a][1]._balanced){i=s.events[a][1];break}return function(t){if(!i)return n(t);if(i._inactive)return u(t);return r=s.parser.defined.includes(Il(s.sliceSerialize({start:i.end,end:s.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelEnd"),o};function o(t){return 40===t?e.attempt(Ic,c,r?c:u)(t):91===t?e.attempt(_c,c,r?l:u)(t):r?c(t):u(t)}function l(t){return e.attempt(Dc,c,u)(t)}function c(e){return t(e)}function u(e){return i._balanced=!0,n(e)}}},Ic={tokenize:function(e,t,n){return function(t){return e.enter("resource"),e.enter("resourceMarker"),e.consume(t),e.exit("resourceMarker"),s};function s(t){return Wl(t)?bc(e,i)(t):i(t)}function i(t){return 41===t?c(t):yc(e,r,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(t)}function r(t){return Wl(t)?bc(e,o)(t):c(t)}function a(e){return n(e)}function o(t){return 34===t||39===t||40===t?xc(e,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(t):c(t)}function l(t){return Wl(t)?bc(e,c)(t):c(t)}function c(s){return 41===s?(e.enter("resourceMarker"),e.consume(s),e.exit("resourceMarker"),e.exit("resource"),t):n(s)}}},_c={tokenize:function(e,t,n){const s=this;return function(t){return vc.call(s,e,i,r,"reference","referenceMarker","referenceString")(t)};function i(e){return s.parser.defined.includes(Il(s.sliceSerialize(s.events[s.events.length-1][1]).slice(1,-1)))?t(e):n(e)}function r(e){return n(e)}}},Dc={tokenize:function(e,t,n){return function(t){return e.enter("reference"),e.enter("referenceMarker"),e.consume(t),e.exit("referenceMarker"),s};function s(s){return 93===s?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}};const Ac={name:"labelStartImage",resolveAll:Mc.resolveAll,tokenize:function(e,t,n){const s=this;return function(t){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(t),e.exit("labelImageMarker"),i};function i(t){return 91===t?(e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelImage"),r):n(t)}function r(e){return 94===e&&"_hiddenFootnoteSupport"in s.parser.constructs?n(e):t(e)}}};const Oc={name:"labelStartLink",resolveAll:Mc.resolveAll,tokenize:function(e,t,n){const s=this;return function(t){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelLink"),i};function i(e){return 94===e&&"_hiddenFootnoteSupport"in s.parser.constructs?n(e):t(e)}}};const Rc={name:"lineEnding",tokenize:function(e,t){return function(n){return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),Yl(e,t,"linePrefix")}}};const Fc={name:"thematicBreak",tokenize:function(e,t,n){let s,i=0;return function(t){return e.enter("thematicBreak"),function(e){return s=e,r(e)}(t)};function r(r){return r===s?(e.enter("thematicBreakSequence"),a(r)):i>=3&&(null===r||zl(r))?(e.exit("thematicBreak"),t(r)):n(r)}function a(t){return t===s?(e.consume(t),i++,a):(e.exit("thematicBreakSequence"),Ul(t)?Yl(e,r,"whitespace")(t):r(t))}}};const Bc={continuation:{tokenize:function(e,t,n){const s=this;return s.containerState._closeFlow=void 0,e.check(nc,function(n){return s.containerState.furtherBlankLines=s.containerState.furtherBlankLines||s.containerState.initialBlankLine,Yl(e,t,"listItemIndent",s.containerState.size+1)(n)},function(n){if(s.containerState.furtherBlankLines||!Ul(n))return s.containerState.furtherBlankLines=void 0,s.containerState.initialBlankLine=void 0,i(n);return s.containerState.furtherBlankLines=void 0,s.containerState.initialBlankLine=void 0,e.attempt(Wc,t,i)(n)});function i(i){return s.containerState._closeFlow=!0,s.interrupt=void 0,Yl(e,e.attempt(Bc,t,n),"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(i)}}},exit:function(e){e.exit(this.containerState.type)},name:"list",tokenize:function(e,t,n){const s=this,i=s.events[s.events.length-1];let r=i&&"linePrefix"===i[1].type?i[2].sliceSerialize(i[1],!0).length:0,a=0;return function(t){const i=s.containerState.type||(42===t||43===t||45===t?"listUnordered":"listOrdered");if("listUnordered"===i?!s.containerState.marker||t===s.containerState.marker:Rl(t)){if(s.containerState.type||(s.containerState.type=i,e.enter(i,{_container:!0})),"listUnordered"===i)return e.enter("listItemPrefix"),42===t||45===t?e.check(Fc,n,l)(t):l(t);if(!s.interrupt||49===t)return e.enter("listItemPrefix"),e.enter("listItemValue"),o(t)}return n(t)};function o(t){return Rl(t)&&++a<10?(e.consume(t),o):(!s.interrupt||a<2)&&(s.containerState.marker?t===s.containerState.marker:41===t||46===t)?(e.exit("listItemValue"),l(t)):n(t)}function l(t){return e.enter("listItemMarker"),e.consume(t),e.exit("listItemMarker"),s.containerState.marker=s.containerState.marker||t,e.check(nc,s.interrupt?n:c,e.attempt(zc,h,u))}function c(e){return s.containerState.initialBlankLine=!0,r++,h(e)}function u(t){return Ul(t)?(e.enter("listItemPrefixWhitespace"),e.consume(t),e.exit("listItemPrefixWhitespace"),h):n(t)}function h(n){return s.containerState.size=r+s.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(n)}}},zc={partial:!0,tokenize:function(e,t,n){const s=this;return Yl(e,function(e){const i=s.events[s.events.length-1];return!Ul(e)&&i&&"listItemPrefixWhitespace"===i[1].type?t(e):n(e)},"listItemPrefixWhitespace",s.parser.constructs.disable.null.includes("codeIndented")?void 0:5)}},Wc={partial:!0,tokenize:function(e,t,n){const s=this;return Yl(e,function(e){const i=s.events[s.events.length-1];return i&&"listItemIndent"===i[1].type&&i[2].sliceSerialize(i[1],!0).length===s.containerState.size?t(e):n(e)},"listItemIndent",s.containerState.size+1)}};const Uc={name:"setextUnderline",resolveTo:function(e,t){let n,s,i,r=e.length;for(;r--;)if("enter"===e[r][0]){if("content"===e[r][1].type){n=r;break}"paragraph"===e[r][1].type&&(s=r)}else"content"===e[r][1].type&&e.splice(r,1),i||"definition"!==e[r][1].type||(i=r);const a={type:"setextHeading",start:{...e[n][1].start},end:{...e[e.length-1][1].end}};e[s][1].type="setextHeadingText",i?(e.splice(s,0,["enter",a,t]),e.splice(i+1,0,["exit",e[n][1],t]),e[n][1].end={...e[i][1].end}):e[n][1]=a;return e.push(["exit",a,t]),e},tokenize:function(e,t,n){const s=this;let i;return function(t){let a,o=s.events.length;for(;o--;)if("lineEnding"!==s.events[o][1].type&&"linePrefix"!==s.events[o][1].type&&"content"!==s.events[o][1].type){a="paragraph"===s.events[o][1].type;break}if(!s.parser.lazy[s.now().line]&&(s.interrupt||a))return e.enter("setextHeadingLine"),i=t,function(t){return e.enter("setextHeadingLineSequence"),r(t)}(t);return n(t)};function r(t){return t===i?(e.consume(t),r):(e.exit("setextHeadingLineSequence"),Ul(t)?Yl(e,a,"lineSuffix")(t):a(t))}function a(s){return null===s||zl(s)?(e.exit("setextHeadingLine"),t(s)):n(s)}}};const Vc={tokenize:function(e){const t=this,n=e.attempt(nc,function(s){if(null===s)return void e.consume(s);return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n},e.attempt(this.parser.constructs.flowInitial,s,Yl(e,e.attempt(this.parser.constructs.flow,s,e.attempt(fc,s)),"linePrefix")));return n;function s(s){if(null!==s)return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n;e.consume(s)}}};const $c={resolveAll:Gc()},Hc=Yc("string"),qc=Yc("text");function Yc(e){return{resolveAll:Gc("text"===e?Qc:void 0),tokenize:function(t){const n=this,s=this.parser.constructs[e],i=t.attempt(s,r,a);return r;function r(e){return l(e)?i(e):a(e)}function a(e){if(null!==e)return t.enter("data"),t.consume(e),o;t.consume(e)}function o(e){return l(e)?(t.exit("data"),i(e)):(t.consume(e),o)}function l(e){if(null===e)return!0;const t=s[e];let i=-1;if(t)for(;++i<t.length;){const e=t[i];if(!e.previous||e.previous.call(n,n.previous))return!0}return!1}}}}function Gc(e){return function(t,n){let s,i=-1;for(;++i<=t.length;)void 0===s?t[i]&&"data"===t[i][1].type&&(s=i,i++):t[i]&&"data"===t[i][1].type||(i!==s+2&&(t[s][1].end=t[i-1][1].end,t.splice(s+2,i-s-2),i=s+2),s=void 0);return e?e(t,n):t}}function Qc(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||"lineEnding"===e[n][1].type)&&"data"===e[n-1][1].type){const s=e[n-1][1],i=t.sliceStream(s);let r,a=i.length,o=-1,l=0;for(;a--;){const e=i[a];if("string"==typeof e){for(o=e.length;32===e.charCodeAt(o-1);)l++,o--;if(o)break;o=-1}else if(-2===e)r=!0,l++;else if(-1!==e){a++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(l=0),l){const i={type:n===e.length||r||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:a?o:s.start._bufferIndex+o,_index:s.start._index+a,line:s.end.line,column:s.end.column-l,offset:s.end.offset-l},end:{...s.end}};s.end={...i.start},s.start.offset===s.end.offset?Object.assign(s,i):(e.splice(n,0,["enter",i,t],["exit",i,t]),n+=2)}n++}return e}const Jc={42:Bc,43:Bc,45:Bc,48:Bc,49:Bc,50:Bc,51:Bc,52:Bc,53:Bc,54:Bc,55:Bc,56:Bc,57:Bc,62:sc},Xc={91:wc},Kc={[-2]:lc,[-1]:lc,32:lc},Zc={35:Nc,42:Fc,45:[Uc,Fc],60:Pc,61:Uc,95:Fc,96:oc,126:oc},eu={38:rc,92:ic},tu={[-5]:Rc,[-4]:Rc,[-3]:Rc,33:Ac,38:rc,42:Zl,60:[tc,Lc],91:Oc,92:[kc,ic],93:Mc,95:Zl,96:uc},nu={null:[Zl,$c]},su=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:{null:[42,95]},contentInitial:Xc,disable:{null:[]},document:Jc,flow:Zc,flowInitial:Kc,insideSpan:nu,string:eu,text:tu},Symbol.toStringTag,{value:"Module"}));function iu(e,t,n){let s={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},r=[];let a=[],o=[];const l={attempt:g(function(e,t){y(e,t.from)}),check:g(f),consume:function(e){zl(e)?(s.line++,s.column=1,s.offset+=-3===e?2:1,v()):-1!==e&&(s.column++,s.offset++);s._bufferIndex<0?s._index++:(s._bufferIndex++,s._bufferIndex===a[s._index].length&&(s._bufferIndex=-1,s._index++));c.previous=e},enter:function(e,t){const n=t||{};return n.type=e,n.start=d(),c.events.push(["enter",n,c]),o.push(n),n},exit:function(e){const t=o.pop();return t.end=d(),c.events.push(["exit",t,c]),t},interrupt:g(f,{interrupt:!0})},c={code:null,containerState:{},defineSkip:function(e){i[e.line]=e.column,v()},events:[],now:d,parser:e,previous:null,sliceSerialize:function(e,t){return function(e,t){let n=-1;const s=[];let i;for(;++n<e.length;){const r=e[n];let a;if("string"==typeof r)a=r;else switch(r){case-5:a="\r";break;case-4:a="\n";break;case-3:a="\r\n";break;case-2:a=t?" ":"\t";break;case-1:if(!t&&i)continue;a=" ";break;default:a=String.fromCharCode(r)}i=-2===r,s.push(a)}return s.join("")}(h(e),t)},sliceStream:h,write:function(e){if(a=Pl(a,e),m(),null!==a[a.length-1])return[];return y(t,0),c.events=Kl(r,c.events,c),c.events}};let u=t.tokenize.call(c,l);return t.resolveAll&&r.push(t),c;function h(e){return function(e,t){const n=t.start._index,s=t.start._bufferIndex,i=t.end._index,r=t.end._bufferIndex;let a;if(n===i)a=[e[n].slice(s,r)];else{if(a=e.slice(n,i),s>-1){const e=a[0];"string"==typeof e?a[0]=e.slice(s):a.shift()}r>0&&a.push(e[i].slice(0,r))}return a}(a,e)}function d(){const{_bufferIndex:e,_index:t,line:n,column:i,offset:r}=s;return{_bufferIndex:e,_index:t,line:n,column:i,offset:r}}function m(){let e;for(;s._index<a.length;){const t=a[s._index];if("string"==typeof t)for(e=s._index,s._bufferIndex<0&&(s._bufferIndex=0);s._index===e&&s._bufferIndex<t.length;)p(t.charCodeAt(s._bufferIndex));else p(t)}}function p(e){u=u(e)}function f(e,t){t.restore()}function g(e,t){return function(n,i,r){let a,u,h,m;return Array.isArray(n)?p(n):"tokenize"in n?p([n]):function(e){return t;function t(t){const n=null!==t&&e[t],s=null!==t&&e.null;return p([...Array.isArray(n)?n:n?[n]:[],...Array.isArray(s)?s:s?[s]:[]])(t)}}(n);function p(e){return a=e,u=0,0===e.length?r:f(e[u])}function f(e){return function(n){m=function(){const e=d(),t=c.previous,n=c.currentConstruct,i=c.events.length,r=Array.from(o);return{from:i,restore:a};function a(){s=e,c.previous=t,c.currentConstruct=n,c.events.length=i,o=r,v()}}(),h=e,e.partial||(c.currentConstruct=e);if(e.name&&c.parser.constructs.disable.null.includes(e.name))return y();return e.tokenize.call(t?Object.assign(Object.create(c),t):c,l,g,y)(n)}}function g(t){return e(h,m),i}function y(e){return m.restore(),++u<a.length?f(a[u]):r}}}function y(e,t){e.resolveAll&&!r.includes(e)&&r.push(e),e.resolve&&Cl(c.events,t,c.events.length-t,e.resolve(c.events.slice(t),c)),e.resolveTo&&(c.events=e.resolveTo(c.events,c))}function v(){s.line in i&&s.column<2&&(s.column=i[s.line],s.offset+=i[s.line]-1)}}function ru(e){const t={constructs:function(e){const t={};let n=-1;for(;++n<e.length;)Tl(t,e[n]);return t}([su,...(e||{}).extensions||[]]),content:n(Gl),defined:[],document:n(Ql),flow:n(Vc),lazy:{},string:n(Hc),text:n(qc)};return t;function n(e){return function(n){return iu(t,e,n)}}}const au=/[\0\t\n\r]/g;const ou=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function lu(e,t,n){if(t)return t;if(35===n.charCodeAt(0)){const e=n.charCodeAt(1),t=120===e||88===e;return Ml(n.slice(t?2:1),t?16:10)}return Sl(n)||e}const cu={}.hasOwnProperty;function uu(e,t,n){return"string"!=typeof t&&(n=t,t=void 0),function(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:r(te),autolinkProtocol:S,autolinkEmail:S,atxHeading:r(X),blockQuote:r(q),characterEscape:S,characterReference:S,codeFenced:r(Y),codeFencedFenceInfo:a,codeFencedFenceMeta:a,codeIndented:r(Y,a),codeText:r(G,a),codeTextData:S,data:S,codeFlowValue:S,definition:r(Q),definitionDestinationString:a,definitionLabelString:a,definitionTitleString:a,emphasis:r(J),hardBreakEscape:r(K),hardBreakTrailing:r(K),htmlFlow:r(Z,a),htmlFlowData:S,htmlText:r(Z,a),htmlTextData:S,image:r(ee),label:a,link:r(te),listItem:r(se),listItemValue:d,listOrdered:r(ne,h),listUnordered:r(ne),paragraph:r(ie),reference:B,referenceString:a,resourceDestinationString:a,resourceTitleString:a,setextHeading:r(X),strong:r(re),thematicBreak:r(oe)},exit:{atxHeading:l(),atxHeadingSequence:w,autolink:l(),autolinkEmail:H,autolinkProtocol:$,blockQuote:l(),characterEscapeValue:C,characterReferenceMarkerHexadecimal:W,characterReferenceMarkerNumeric:W,characterReferenceValue:U,characterReference:V,codeFenced:l(g),codeFencedFence:f,codeFencedFenceInfo:m,codeFencedFenceMeta:p,codeFlowValue:C,codeIndented:l(y),codeText:l(M),codeTextData:C,data:C,definition:l(),definitionDestinationString:b,definitionLabelString:v,definitionTitleString:x,emphasis:l(),hardBreakEscape:l(E),hardBreakTrailing:l(E),htmlFlow:l(T),htmlFlowData:C,htmlText:l(L),htmlTextData:C,image:l(_),label:A,labelText:D,lineEnding:P,link:l(I),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:z,resourceDestinationString:O,resourceTitleString:R,resource:F,setextHeading:l(N),setextHeadingLineSequence:k,setextHeadingText:j,strong:l(),thematicBreak:l()}};du(t,(e||{}).mdastExtensions||[]);const n={};return s;function s(e){let s={type:"root",children:[]};const r={stack:[s],tokenStack:[],config:t,enter:o,exit:c,buffer:a,resume:u,data:n},l=[];let h=-1;for(;++h<e.length;)if("listOrdered"===e[h][1].type||"listUnordered"===e[h][1].type)if("enter"===e[h][0])l.push(h);else{h=i(e,l.pop(),h)}for(h=-1;++h<e.length;){const n=t[e[h][0]];cu.call(n,e[h][1].type)&&n[e[h][1].type].call(Object.assign({sliceSerialize:e[h][2].sliceSerialize},r),e[h][1])}if(r.tokenStack.length>0){const e=r.tokenStack[r.tokenStack.length-1];(e[1]||pu).call(r,void 0,e[0])}for(s.position={start:hu(e.length>0?e[0][1].start:{line:1,column:1,offset:0}),end:hu(e.length>0?e[e.length-2][1].end:{line:1,column:1,offset:0})},h=-1;++h<t.transforms.length;)s=t.transforms[h](s)||s;return s}function i(e,t,n){let s,i,r,a,o=t-1,l=-1,c=!1;for(;++o<=n;){const t=e[o];switch(t[1].type){case"listUnordered":case"listOrdered":case"blockQuote":"enter"===t[0]?l++:l--,a=void 0;break;case"lineEndingBlank":"enter"===t[0]&&(!s||a||l||r||(r=o),a=void 0);break;case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:a=void 0}if(!l&&"enter"===t[0]&&"listItemPrefix"===t[1].type||-1===l&&"exit"===t[0]&&("listUnordered"===t[1].type||"listOrdered"===t[1].type)){if(s){let a=o;for(i=void 0;a--;){const t=e[a];if("lineEnding"===t[1].type||"lineEndingBlank"===t[1].type){if("exit"===t[0])continue;i&&(e[i][1].type="lineEndingBlank",c=!0),t[1].type="lineEnding",i=a}else if("linePrefix"!==t[1].type&&"blockQuotePrefix"!==t[1].type&&"blockQuotePrefixWhitespace"!==t[1].type&&"blockQuoteMarker"!==t[1].type&&"listItemIndent"!==t[1].type)break}r&&(!i||r<i)&&(s._spread=!0),s.end=Object.assign({},i?e[i][1].start:t[1].end),e.splice(i||o,0,["exit",s,t[2]]),o++,n++}if("listItemPrefix"===t[1].type){const i={type:"listItem",_spread:!1,start:Object.assign({},t[1].start),end:void 0};s=i,e.splice(o,0,["enter",i,t[2]]),o++,n++,r=void 0,a=!0}}}return e[t][1]._spread=c,n}function r(e,t){return n;function n(n){o.call(this,e(n),n),t&&t.call(this,n)}}function a(){this.stack.push({type:"fragment",children:[]})}function o(e,t,n){this.stack[this.stack.length-1].children.push(e),this.stack.push(e),this.tokenStack.push([t,n||void 0]),e.position={start:hu(t.start),end:void 0}}function l(e){return t;function t(t){e&&e.call(this,t),c.call(this,t)}}function c(e,t){const n=this.stack.pop(),s=this.tokenStack.pop();if(!s)throw new Error("Cannot close `"+e.type+"` ("+Zo({start:e.start,end:e.end})+"): it’s not open");if(s[0].type!==e.type)if(t)t.call(this,e,s[0]);else{(s[1]||pu).call(this,e,s[0])}n.position.end=hu(e.end)}function u(){return function(e){return jl(e,"boolean"!=typeof wl.includeImageAlt||wl.includeImageAlt,"boolean"!=typeof wl.includeHtml||wl.includeHtml)}(this.stack.pop())}function h(){this.data.expectingFirstListItemValue=!0}function d(e){if(this.data.expectingFirstListItemValue){this.stack[this.stack.length-2].start=Number.parseInt(this.sliceSerialize(e),10),this.data.expectingFirstListItemValue=void 0}}function m(){const e=this.resume();this.stack[this.stack.length-1].lang=e}function p(){const e=this.resume();this.stack[this.stack.length-1].meta=e}function f(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function g(){const e=this.resume();this.stack[this.stack.length-1].value=e.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function y(){const e=this.resume();this.stack[this.stack.length-1].value=e.replace(/(\r?\n|\r)$/g,"")}function v(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=Il(this.sliceSerialize(e)).toLowerCase()}function x(){const e=this.resume();this.stack[this.stack.length-1].title=e}function b(){const e=this.resume();this.stack[this.stack.length-1].url=e}function w(e){const t=this.stack[this.stack.length-1];if(!t.depth){const n=this.sliceSerialize(e).length;t.depth=n}}function j(){this.data.setextHeadingSlurpLineEnding=!0}function k(e){this.stack[this.stack.length-1].depth=61===this.sliceSerialize(e).codePointAt(0)?1:2}function N(){this.data.setextHeadingSlurpLineEnding=void 0}function S(e){const t=this.stack[this.stack.length-1].children;let n=t[t.length-1];n&&"text"===n.type||(n=ae(),n.position={start:hu(e.start),end:void 0},t.push(n)),this.stack.push(n)}function C(e){const t=this.stack.pop();t.value+=this.sliceSerialize(e),t.position.end=hu(e.end)}function P(e){const n=this.stack[this.stack.length-1];if(this.data.atHardBreak){return n.children[n.children.length-1].position.end=hu(e.end),void(this.data.atHardBreak=void 0)}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(n.type)&&(S.call(this,e),C.call(this,e))}function E(){this.data.atHardBreak=!0}function T(){const e=this.resume();this.stack[this.stack.length-1].value=e}function L(){const e=this.resume();this.stack[this.stack.length-1].value=e}function M(){const e=this.resume();this.stack[this.stack.length-1].value=e}function I(){const e=this.stack[this.stack.length-1];if(this.data.inReference){const t=this.data.referenceType||"shortcut";e.type+="Reference",e.referenceType=t,delete e.url,delete e.title}else delete e.identifier,delete e.label;this.data.referenceType=void 0}function _(){const e=this.stack[this.stack.length-1];if(this.data.inReference){const t=this.data.referenceType||"shortcut";e.type+="Reference",e.referenceType=t,delete e.url,delete e.title}else delete e.identifier,delete e.label;this.data.referenceType=void 0}function D(e){const t=this.sliceSerialize(e),n=this.stack[this.stack.length-2];n.label=function(e){return e.replace(ou,lu)}(t),n.identifier=Il(t).toLowerCase()}function A(){const e=this.stack[this.stack.length-1],t=this.resume(),n=this.stack[this.stack.length-1];if(this.data.inReference=!0,"link"===n.type){const t=e.children;n.children=t}else n.alt=t}function O(){const e=this.resume();this.stack[this.stack.length-1].url=e}function R(){const e=this.resume();this.stack[this.stack.length-1].title=e}function F(){this.data.inReference=void 0}function B(){this.data.referenceType="collapsed"}function z(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=Il(this.sliceSerialize(e)).toLowerCase(),this.data.referenceType="full"}function W(e){this.data.characterReferenceType=e.type}function U(e){const t=this.sliceSerialize(e),n=this.data.characterReferenceType;let s;if(n)s=Ml(t,"characterReferenceMarkerNumeric"===n?10:16),this.data.characterReferenceType=void 0;else{s=Sl(t)}this.stack[this.stack.length-1].value+=s}function V(e){this.stack.pop().position.end=hu(e.end)}function $(e){C.call(this,e);this.stack[this.stack.length-1].url=this.sliceSerialize(e)}function H(e){C.call(this,e);this.stack[this.stack.length-1].url="mailto:"+this.sliceSerialize(e)}function q(){return{type:"blockquote",children:[]}}function Y(){return{type:"code",lang:null,meta:null,value:""}}function G(){return{type:"inlineCode",value:""}}function Q(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function J(){return{type:"emphasis",children:[]}}function X(){return{type:"heading",depth:0,children:[]}}function K(){return{type:"break"}}function Z(){return{type:"html",value:""}}function ee(){return{type:"image",title:null,url:"",alt:null}}function te(){return{type:"link",title:null,url:"",children:[]}}function ne(e){return{type:"list",ordered:"listOrdered"===e.type,start:null,spread:e._spread,children:[]}}function se(e){return{type:"listItem",spread:e._spread,checked:null,children:[]}}function ie(){return{type:"paragraph",children:[]}}function re(){return{type:"strong",children:[]}}function ae(){return{type:"text",value:""}}function oe(){return{type:"thematicBreak"}}}(n)(function(e){for(;!mc(e););return e}(ru(n).document().write(function(){let e,t=1,n="",s=!0;return function(i,r,a){const o=[];let l,c,u,h,d;for(i=n+("string"==typeof i?i.toString():new TextDecoder(r||void 0).decode(i)),u=0,n="",s&&(65279===i.charCodeAt(0)&&u++,s=void 0);u<i.length;){if(au.lastIndex=u,l=au.exec(i),h=l&&void 0!==l.index?l.index:i.length,d=i.charCodeAt(h),!l){n=i.slice(u);break}if(10===d&&u===h&&e)o.push(-3),e=void 0;else switch(e&&(o.push(-5),e=void 0),u<h&&(o.push(i.slice(u,h)),t+=h-u),d){case 0:o.push(65533),t++;break;case 9:for(c=4*Math.ceil(t/4),o.push(-2);t++<c;)o.push(-1);break;case 10:o.push(-4),t=1;break;default:e=!0,t=1}u=h+1}return a&&(e&&o.push(-5),n&&o.push(n),o.push(null)),o}}()(e,t,!0))))}function hu(e){return{line:e.line,column:e.column,offset:e.offset}}function du(e,t){let n=-1;for(;++n<t.length;){const s=t[n];Array.isArray(s)?du(e,s):mu(e,s)}}function mu(e,t){let n;for(n in t)if(cu.call(t,n))switch(n){case"canContainEols":{const s=t[n];s&&e[n].push(...s);break}case"transforms":{const s=t[n];s&&e[n].push(...s);break}case"enter":case"exit":{const s=t[n];s&&Object.assign(e[n],s);break}}}function pu(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+Zo({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+Zo({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+Zo({start:t.start,end:t.end})+") is still open")}function fu(e){const t=this;t.parser=function(n){return uu(n,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function gu(e,t){const n=t.referenceType;let s="]";if("collapsed"===n?s+="[]":"full"===n&&(s+="["+(t.label||t.identifier)+"]"),"imageReference"===t.type)return[{type:"text",value:"!["+t.alt+s}];const i=e.all(t),r=i[0];r&&"text"===r.type?r.value="["+r.value:i.unshift({type:"text",value:"["});const a=i[i.length-1];return a&&"text"===a.type?a.value+=s:i.push({type:"text",value:s}),i}function yu(e){const t=e.spread;return null==t?e.children.length>1:t}function vu(e){const t=String(e),n=/\r?\n|\r/g;let s=n.exec(t),i=0;const r=[];for(;s;)r.push(xu(t.slice(i,s.index),i>0,!0),s[0]),i=s.index+s[0].length,s=n.exec(t);return r.push(xu(t.slice(i),i>0,!1)),r.join("")}function xu(e,t,n){let s=0,i=e.length;if(t){let t=e.codePointAt(s);for(;9===t||32===t;)s++,t=e.codePointAt(s)}if(n){let t=e.codePointAt(i-1);for(;9===t||32===t;)i--,t=e.codePointAt(i-1)}return i>s?e.slice(s,i):""}const bu={blockquote:function(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)},break:function(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:"\n"}]},code:function(e,t){const n=t.value?t.value+"\n":"",s={};t.lang&&(s.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:s,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i},delete:function(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},emphasis:function(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},footnoteReference:function(e,t){const n="string"==typeof e.options.clobberPrefix?e.options.clobberPrefix:"user-content-",s=String(t.identifier).toUpperCase(),i=ql(s.toLowerCase()),r=e.footnoteOrder.indexOf(s);let a,o=e.footnoteCounts.get(s);void 0===o?(o=0,e.footnoteOrder.push(s),a=e.footnoteOrder.length):a=r+1,o+=1,e.footnoteCounts.set(s,o);const l={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(o>1?"-"+o:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(a)}]};e.patch(t,l);const c={type:"element",tagName:"sup",properties:{},children:[l]};return e.patch(t,c),e.applyData(t,c)},heading:function(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},html:function(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}},imageReference:function(e,t){const n=String(t.identifier).toUpperCase(),s=e.definitionById.get(n);if(!s)return gu(e,t);const i={src:ql(s.url||""),alt:t.alt};null!==s.title&&void 0!==s.title&&(i.title=s.title);const r={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,r),e.applyData(t,r)},image:function(e,t){const n={src:ql(t.url)};null!==t.alt&&void 0!==t.alt&&(n.alt=t.alt),null!==t.title&&void 0!==t.title&&(n.title=t.title);const s={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,s),e.applyData(t,s)},inlineCode:function(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const s={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,s),e.applyData(t,s)},linkReference:function(e,t){const n=String(t.identifier).toUpperCase(),s=e.definitionById.get(n);if(!s)return gu(e,t);const i={href:ql(s.url||"")};null!==s.title&&void 0!==s.title&&(i.title=s.title);const r={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)},link:function(e,t){const n={href:ql(t.url)};null!==t.title&&void 0!==t.title&&(n.title=t.title);const s={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)},listItem:function(e,t,n){const s=e.all(t),i=n?function(e){let t=!1;if("list"===e.type){t=e.spread||!1;const n=e.children;let s=-1;for(;!t&&++s<n.length;)t=yu(n[s])}return t}(n):yu(t),r={},a=[];if("boolean"==typeof t.checked){const e=s[0];let n;e&&"element"===e.type&&"p"===e.tagName?n=e:(n={type:"element",tagName:"p",properties:{},children:[]},s.unshift(n)),n.children.length>0&&n.children.unshift({type:"text",value:" "}),n.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),r.className=["task-list-item"]}let o=-1;for(;++o<s.length;){const e=s[o];(i||0!==o||"element"!==e.type||"p"!==e.tagName)&&a.push({type:"text",value:"\n"}),"element"!==e.type||"p"!==e.tagName||i?a.push(e):a.push(...e.children)}const l=s[s.length-1];l&&(i||"element"!==l.type||"p"!==l.tagName)&&a.push({type:"text",value:"\n"});const c={type:"element",tagName:"li",properties:r,children:a};return e.patch(t,c),e.applyData(t,c)},list:function(e,t){const n={},s=e.all(t);let i=-1;for("number"==typeof t.start&&1!==t.start&&(n.start=t.start);++i<s.length;){const e=s[i];if("element"===e.type&&"li"===e.tagName&&e.properties&&Array.isArray(e.properties.className)&&e.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const r={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(s,!0)};return e.patch(t,r),e.applyData(t,r)},paragraph:function(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},root:function(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)},strong:function(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},table:function(e,t){const n=e.all(t),s=n.shift(),i=[];if(s){const n={type:"element",tagName:"thead",properties:{},children:e.wrap([s],!0)};e.patch(t.children[0],n),i.push(n)}if(n.length>0){const s={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},r=Xo(t.children[1]),a=Jo(t.children[t.children.length-1]);r&&a&&(s.position={start:r,end:a}),i.push(s)}const r={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,r),e.applyData(t,r)},tableCell:function(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},tableRow:function(e,t,n){const s=n?n.children:void 0,i=0===(s?s.indexOf(t):1)?"th":"td",r=n&&"table"===n.type?n.align:void 0,a=r?r.length:t.children.length;let o=-1;const l=[];for(;++o<a;){const n=t.children[o],s={},a=r?r[o]:void 0;a&&(s.align=a);let c={type:"element",tagName:i,properties:s,children:[]};n&&(c.children=e.all(n),e.patch(n,c),c=e.applyData(n,c)),l.push(c)}const c={type:"element",tagName:"tr",properties:{},children:e.wrap(l,!0)};return e.patch(t,c),e.applyData(t,c)},text:function(e,t){const n={type:"text",value:vu(String(t.value))};return e.patch(t,n),e.applyData(t,n)},thematicBreak:function(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)},toml:wu,yaml:wu,definition:wu,footnoteDefinition:wu};function wu(){}const ju="object"==typeof self?self:globalThis,ku=e=>((e,t)=>{const n=(t,n)=>(e.set(n,t),t),s=i=>{if(e.has(i))return e.get(i);const[r,a]=t[i];switch(r){case 0:case-1:return n(a,i);case 1:{const e=n([],i);for(const t of a)e.push(s(t));return e}case 2:{const e=n({},i);for(const[t,n]of a)e[s(t)]=s(n);return e}case 3:return n(new Date(a),i);case 4:{const{source:e,flags:t}=a;return n(new RegExp(e,t),i)}case 5:{const e=n(new Map,i);for(const[t,n]of a)e.set(s(t),s(n));return e}case 6:{const e=n(new Set,i);for(const t of a)e.add(s(t));return e}case 7:{const{name:e,message:t}=a;return n(new ju[e](t),i)}case 8:return n(BigInt(a),i);case"BigInt":return n(Object(BigInt(a)),i);case"ArrayBuffer":return n(new Uint8Array(a).buffer,a);case"DataView":{const{buffer:e}=new Uint8Array(a);return n(new DataView(e),a)}}return n(new ju[r](a),i)};return s})(new Map,e)(0),Nu="",{toString:Su}={},{keys:Cu}=Object,Pu=e=>{const t=typeof e;if("object"!==t||!e)return[0,t];const n=Su.call(e).slice(8,-1);switch(n){case"Array":return[1,Nu];case"Object":return[2,Nu];case"Date":return[3,Nu];case"RegExp":return[4,Nu];case"Map":return[5,Nu];case"Set":return[6,Nu];case"DataView":return[1,n]}return n.includes("Array")?[1,n]:n.includes("Error")?[7,n]:[2,n]},Eu=([e,t])=>0===e&&("function"===t||"symbol"===t),Tu=(e,{json:t,lossy:n}={})=>{const s=[];return((e,t,n,s)=>{const i=(e,t)=>{const i=s.push(e)-1;return n.set(t,i),i},r=s=>{if(n.has(s))return n.get(s);let[a,o]=Pu(s);switch(a){case 0:{let t=s;switch(o){case"bigint":a=8,t=s.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+o);t=null;break;case"undefined":return i([-1],s)}return i([a,t],s)}case 1:{if(o){let e=s;return"DataView"===o?e=new Uint8Array(s.buffer):"ArrayBuffer"===o&&(e=new Uint8Array(s)),i([o,[...e]],s)}const e=[],t=i([a,e],s);for(const n of s)e.push(r(n));return t}case 2:{if(o)switch(o){case"BigInt":return i([o,s.toString()],s);case"Boolean":case"Number":case"String":return i([o,s.valueOf()],s)}if(t&&"toJSON"in s)return r(s.toJSON());const n=[],l=i([a,n],s);for(const t of Cu(s))!e&&Eu(Pu(s[t]))||n.push([r(t),r(s[t])]);return l}case 3:return i([a,s.toISOString()],s);case 4:{const{source:e,flags:t}=s;return i([a,{source:e,flags:t}],s)}case 5:{const t=[],n=i([a,t],s);for(const[i,a]of s)(e||!Eu(Pu(i))&&!Eu(Pu(a)))&&t.push([r(i),r(a)]);return n}case 6:{const t=[],n=i([a,t],s);for(const i of s)!e&&Eu(Pu(i))||t.push(r(i));return n}}const{message:l}=s;return i([a,{name:o,message:l}],s)};return r})(!(t||n),!!t,new Map,s)(e),s},Lu="function"==typeof structuredClone?(e,t)=>t&&("json"in t||"lossy"in t)?ku(Tu(e,t)):structuredClone(e):(e,t)=>ku(Tu(e,t));function Mu(e,t){const n=[{type:"text",value:"↩"}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function Iu(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}const _u=function(e){if(null==e)return Au;if("function"==typeof e)return Du(e);if("object"==typeof e)return Array.isArray(e)?function(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=_u(e[n]);return Du(s);function s(...e){let n=-1;for(;++n<t.length;)if(t[n].apply(this,e))return!0;return!1}}(e):function(e){const t=e;return Du(n);function n(n){const s=n;let i;for(i in e)if(s[i]!==t[i])return!1;return!0}}(e);if("string"==typeof e)return function(e){return Du(t);function t(t){return t&&t.type===e}}(e);throw new Error("Expected function, string, or object as test")};function Du(e){return function(t,n,s){return Boolean(function(e){return null!==e&&"object"==typeof e&&"type"in e}(t)&&e.call(this,t,"number"==typeof n?n:void 0,s||void 0))}}function Au(){return!0}const Ou=[],Ru=!0,Fu=!1;function Bu(e,t,n,s){let i;"function"==typeof t&&"function"!=typeof n?(s=n,n=t):i=t;const r=_u(i),a=s?-1:1;!function e(i,o,l){const c=i&&"object"==typeof i?i:{};if("string"==typeof c.type){const e="string"==typeof c.tagName?c.tagName:"string"==typeof c.name?c.name:void 0;Object.defineProperty(u,"name",{value:"node ("+i.type+(e?"<"+e+">":"")+")"})}return u;function u(){let c,u,h,d=Ou;if((!t||r(i,o,l[l.length-1]||void 0))&&(d=function(e){if(Array.isArray(e))return e;if("number"==typeof e)return[Ru,e];return null==e?Ou:[e]}(n(i,l)),d[0]===Fu))return d;if("children"in i&&i.children){const t=i;if(t.children&&"skip"!==d[0])for(u=(s?t.children.length:-1)+a,h=l.concat(t);u>-1&&u<t.children.length;){const n=t.children[u];if(c=e(n,u,h)(),c[0]===Fu)return c;u="number"==typeof c[1]?c[1]:u+a}}return d}}(e,void 0,[])()}function zu(e,t,n,s){let i,r,a;"function"==typeof t&&"function"!=typeof n?(r=void 0,a=t,i=n):(r=t,a=n,i=s),Bu(e,r,function(e,t){const n=t[t.length-1],s=n?n.children.indexOf(e):void 0;return a(e,s,n)},i)}const Wu={}.hasOwnProperty,Uu={};function Vu(e,t){e.position&&(t.position=function(e){const t=Xo(e),n=Jo(e);if(t&&n)return{start:t,end:n}}(e))}function $u(e,t){let n=t;if(e&&e.data){const t=e.data.hName,s=e.data.hChildren,i=e.data.hProperties;if("string"==typeof t)if("element"===n.type)n.tagName=t;else{n={type:"element",tagName:t,properties:{},children:"children"in n?n.children:[n]}}"element"===n.type&&i&&Object.assign(n.properties,Lu(i)),"children"in n&&n.children&&null!=s&&(n.children=s)}return n}function Hu(e,t){const n=t.data||{},s=!("value"in t)||Wu.call(n,"hProperties")||Wu.call(n,"hChildren")?{type:"element",tagName:"div",properties:{},children:e.all(t)}:{type:"text",value:t.value};return e.patch(t,s),e.applyData(t,s)}function qu(e,t){const n=[];let s=-1;for(t&&n.push({type:"text",value:"\n"});++s<e.length;)s&&n.push({type:"text",value:"\n"}),n.push(e[s]);return t&&e.length>0&&n.push({type:"text",value:"\n"}),n}function Yu(e){let t=0,n=e.charCodeAt(t);for(;9===n||32===n;)t++,n=e.charCodeAt(t);return e.slice(t)}function Gu(e,t){const n=function(e,t){const n=t||Uu,s=new Map,i=new Map,r=new Map,a={...bu,...n.handlers},o={all:function(e){const t=[];if("children"in e){const n=e.children;let s=-1;for(;++s<n.length;){const i=o.one(n[s],e);if(i){if(s&&"break"===n[s-1].type&&(Array.isArray(i)||"text"!==i.type||(i.value=Yu(i.value)),!Array.isArray(i)&&"element"===i.type)){const e=i.children[0];e&&"text"===e.type&&(e.value=Yu(e.value))}Array.isArray(i)?t.push(...i):t.push(i)}}}return t},applyData:$u,definitionById:s,footnoteById:i,footnoteCounts:r,footnoteOrder:[],handlers:a,one:function(e,t){const n=e.type,s=o.handlers[n];if(Wu.call(o.handlers,n)&&s)return s(o,e,t);if(o.options.passThrough&&o.options.passThrough.includes(n)){if("children"in e){const{children:t,...n}=e,s=Lu(n);return s.children=o.all(e),s}return Lu(e)}return(o.options.unknownHandler||Hu)(o,e,t)},options:n,patch:Vu,wrap:qu};return zu(e,function(e){if("definition"===e.type||"footnoteDefinition"===e.type){const t="definition"===e.type?s:i,n=String(e.identifier).toUpperCase();t.has(n)||t.set(n,e)}}),o}(e,t),s=n.one(e,void 0),i=function(e){const t="string"==typeof e.options.clobberPrefix?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||Mu,s=e.options.footnoteBackLabel||Iu,i=e.options.footnoteLabel||"Footnotes",r=e.options.footnoteLabelTagName||"h2",a=e.options.footnoteLabelProperties||{className:["sr-only"]},o=[];let l=-1;for(;++l<e.footnoteOrder.length;){const i=e.footnoteById.get(e.footnoteOrder[l]);if(!i)continue;const r=e.all(i),a=String(i.identifier).toUpperCase(),c=ql(a.toLowerCase());let u=0;const h=[],d=e.footnoteCounts.get(a);for(;void 0!==d&&++u<=d;){h.length>0&&h.push({type:"text",value:" "});let e="string"==typeof n?n:n(l,u);"string"==typeof e&&(e={type:"text",value:e}),h.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+c+(u>1?"-"+u:""),dataFootnoteBackref:"",ariaLabel:"string"==typeof s?s:s(l,u),className:["data-footnote-backref"]},children:Array.isArray(e)?e:[e]})}const m=r[r.length-1];if(m&&"element"===m.type&&"p"===m.tagName){const e=m.children[m.children.length-1];e&&"text"===e.type?e.value+=" ":m.children.push({type:"text",value:" "}),m.children.push(...h)}else r.push(...h);const p={type:"element",tagName:"li",properties:{id:t+"fn-"+c},children:e.wrap(r,!0)};e.patch(i,p),o.push(p)}if(0!==o.length)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:r,properties:{...Lu(a),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:"\n"},{type:"element",tagName:"ol",properties:{},children:e.wrap(o,!0)},{type:"text",value:"\n"}]}}(n),r=Array.isArray(s)?{type:"root",children:s}:s||{type:"root",children:[]};return i&&r.children.push({type:"text",value:"\n"},i),r}function Qu(e,t){return e&&"run"in e?async function(n,s){const i=Gu(n,{file:s,...t});await e.run(i,s)}:function(n,s){return Gu(n,{file:s,...e||t})}}function Ju(e){if(e)throw e}var Xu=Object.prototype.hasOwnProperty,Ku=Object.prototype.toString,Zu=Object.defineProperty,eh=Object.getOwnPropertyDescriptor,th=function(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===Ku.call(e)},nh=function(e){if(!e||"[object Object]"!==Ku.call(e))return!1;var t,n=Xu.call(e,"constructor"),s=e.constructor&&e.constructor.prototype&&Xu.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!n&&!s)return!1;for(t in e);return void 0===t||Xu.call(e,t)},sh=function(e,t){Zu&&"__proto__"===t.name?Zu(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},ih=function(e,t){if("__proto__"===t){if(!Xu.call(e,t))return;if(eh)return eh(e,t).value}return e[t]},rh=function e(){var t,n,s,i,r,a,o=arguments[0],l=1,c=arguments.length,u=!1;for("boolean"==typeof o&&(u=o,o=arguments[1]||{},l=2),(null==o||"object"!=typeof o&&"function"!=typeof o)&&(o={});l<c;++l)if(null!=(t=arguments[l]))for(n in t)s=ih(o,n),o!==(i=ih(t,n))&&(u&&i&&(nh(i)||(r=th(i)))?(r?(r=!1,a=s&&th(s)?s:[]):a=s&&nh(s)?s:{},sh(o,{name:n,newValue:e(u,a,i)})):void 0!==i&&sh(o,{name:n,newValue:i}));return o};const ah=a(rh);function oh(e){if("object"!=typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)}function lh(){const e=[],t={run:function(...t){let n=-1;const s=t.pop();if("function"!=typeof s)throw new TypeError("Expected function as last argument, not "+s);!function i(r,...a){const o=e[++n];let l=-1;if(r)s(r);else{for(;++l<t.length;)null!==a[l]&&void 0!==a[l]||(a[l]=t[l]);t=a,o?function(e,t){let n;return s;function s(...t){const s=e.length>t.length;let o;s&&t.push(i);try{o=e.apply(this,t)}catch(r){if(s&&n)throw r;return i(r)}s||(o&&o.then&&"function"==typeof o.then?o.then(a,i):o instanceof Error?i(o):a(o))}function i(e,...s){n||(n=!0,t(e,...s))}function a(e){i(null,e)}}(o,i)(...a):s(null,...a)}}(null,...t)},use:function(n){if("function"!=typeof n)throw new TypeError("Expected `middelware` to be a function, not "+n);return e.push(n),t}};return t}const ch={basename:function(e,t){if(void 0!==t&&"string"!=typeof t)throw new TypeError('"ext" argument must be a string');uh(e);let n,s=0,i=-1,r=e.length;if(void 0===t||0===t.length||t.length>e.length){for(;r--;)if(47===e.codePointAt(r)){if(n){s=r+1;break}}else i<0&&(n=!0,i=r+1);return i<0?"":e.slice(s,i)}if(t===e)return"";let a=-1,o=t.length-1;for(;r--;)if(47===e.codePointAt(r)){if(n){s=r+1;break}}else a<0&&(n=!0,a=r+1),o>-1&&(e.codePointAt(r)===t.codePointAt(o--)?o<0&&(i=r):(o=-1,i=a));s===i?i=a:i<0&&(i=e.length);return e.slice(s,i)},dirname:function(e){if(uh(e),0===e.length)return".";let t,n=-1,s=e.length;for(;--s;)if(47===e.codePointAt(s)){if(t){n=s;break}}else t||(t=!0);return n<0?47===e.codePointAt(0)?"/":".":1===n&&47===e.codePointAt(0)?"//":e.slice(0,n)},extname:function(e){uh(e);let t,n=e.length,s=-1,i=0,r=-1,a=0;for(;n--;){const o=e.codePointAt(n);if(47!==o)s<0&&(t=!0,s=n+1),46===o?r<0?r=n:1!==a&&(a=1):r>-1&&(a=-1);else if(t){i=n+1;break}}if(r<0||s<0||0===a||1===a&&r===s-1&&r===i+1)return"";return e.slice(r,s)},join:function(...e){let t,n=-1;for(;++n<e.length;)uh(e[n]),e[n]&&(t=void 0===t?e[n]:t+"/"+e[n]);return void 0===t?".":function(e){uh(e);const t=47===e.codePointAt(0);let n=function(e,t){let n,s,i="",r=0,a=-1,o=0,l=-1;for(;++l<=e.length;){if(l<e.length)n=e.codePointAt(l);else{if(47===n)break;n=47}if(47===n){if(a===l-1||1===o);else if(a!==l-1&&2===o){if(i.length<2||2!==r||46!==i.codePointAt(i.length-1)||46!==i.codePointAt(i.length-2))if(i.length>2){if(s=i.lastIndexOf("/"),s!==i.length-1){s<0?(i="",r=0):(i=i.slice(0,s),r=i.length-1-i.lastIndexOf("/")),a=l,o=0;continue}}else if(i.length>0){i="",r=0,a=l,o=0;continue}t&&(i=i.length>0?i+"/..":"..",r=2)}else i.length>0?i+="/"+e.slice(a+1,l):i=e.slice(a+1,l),r=l-a-1;a=l,o=0}else 46===n&&o>-1?o++:o=-1}return i}(e,!t);0!==n.length||t||(n=".");n.length>0&&47===e.codePointAt(e.length-1)&&(n+="/");return t?"/"+n:n}(t)},sep:"/"};function uh(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const hh={cwd:function(){return"/"}};function dh(e){return Boolean(null!==e&&"object"==typeof e&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&void 0===e.auth)}function mh(e){if("string"==typeof e)e=new URL(e);else if(!dh(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if("file:"!==e.protocol){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return function(e){if(""!==e.hostname){const e=new TypeError('File URL host must be "localhost" or empty on darwin');throw e.code="ERR_INVALID_FILE_URL_HOST",e}const t=e.pathname;let n=-1;for(;++n<t.length;)if(37===t.codePointAt(n)&&50===t.codePointAt(n+1)){const e=t.codePointAt(n+2);if(70===e||102===e){const e=new TypeError("File URL path must not include encoded / characters");throw e.code="ERR_INVALID_FILE_URL_PATH",e}}return decodeURIComponent(t)}(e)}const ph=["history","path","basename","stem","extname","dirname"];class fh{constructor(e){let t;t=e?dh(e)?{path:e}:"string"==typeof e||function(e){return Boolean(e&&"object"==typeof e&&"byteLength"in e&&"byteOffset"in e)}(e)?{value:e}:e:{},this.cwd="cwd"in t?"":hh.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let n,s=-1;for(;++s<ph.length;){const e=ph[s];e in t&&void 0!==t[e]&&null!==t[e]&&(this[e]="history"===e?[...t[e]]:t[e])}for(n in t)ph.includes(n)||(this[n]=t[n])}get basename(){return"string"==typeof this.path?ch.basename(this.path):void 0}set basename(e){yh(e,"basename"),gh(e,"basename"),this.path=ch.join(this.dirname||"",e)}get dirname(){return"string"==typeof this.path?ch.dirname(this.path):void 0}set dirname(e){vh(this.basename,"dirname"),this.path=ch.join(e||"",this.basename)}get extname(){return"string"==typeof this.path?ch.extname(this.path):void 0}set extname(e){if(gh(e,"extname"),vh(this.dirname,"extname"),e){if(46!==e.codePointAt(0))throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=ch.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){dh(e)&&(e=mh(e)),yh(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return"string"==typeof this.path?ch.basename(this.path,this.extname):void 0}set stem(e){yh(e,"stem"),gh(e,"stem"),this.path=ch.join(this.dirname||"",e+(this.extname||""))}fail(e,t,n){const s=this.message(e,t,n);throw s.fatal=!0,s}info(e,t,n){const s=this.message(e,t,n);return s.fatal=void 0,s}message(e,t,n){const s=new sl(e,t,n);return this.path&&(s.name=this.path+":"+s.name,s.file=this.path),s.fatal=!1,this.messages.push(s),s}toString(e){if(void 0===this.value)return"";if("string"==typeof this.value)return this.value;return new TextDecoder(e||void 0).decode(this.value)}}function gh(e,t){if(e&&e.includes(ch.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+ch.sep+"`")}function yh(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function vh(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}const xh=function(e){const t=this.constructor.prototype,n=t[e],s=function(){return n.apply(s,arguments)};return Object.setPrototypeOf(s,t),s},bh={}.hasOwnProperty;class wh extends xh{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=lh()}copy(){const e=new wh;let t=-1;for(;++t<this.attachers.length;){const n=this.attachers[t];e.use(...n)}return e.data(ah(!0,{},this.namespace)),e}data(e,t){return"string"==typeof e?2===arguments.length?(Sh("data",this.frozen),this.namespace[e]=t,this):bh.call(this.namespace,e)&&this.namespace[e]||void 0:e?(Sh("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[t,...n]=this.attachers[this.freezeIndex];if(!1===n[0])continue;!0===n[0]&&(n[0]=void 0);const s=t.call(e,...n);"function"==typeof s&&this.transformers.use(s)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const t=Eh(e),n=this.parser||this.Parser;return kh("parse",n),n(String(t),t)}process(e,t){const n=this;return this.freeze(),kh("process",this.parser||this.Parser),Nh("process",this.compiler||this.Compiler),t?s(void 0,t):new Promise(s);function s(s,i){const r=Eh(e),a=n.parse(r);function o(e,n){e||!n?i(e):s?s(n):t(void 0,n)}n.run(a,r,function(e,t,s){if(e||!t||!s)return o(e);const i=t,r=n.stringify(i,s);var a;"string"==typeof(a=r)||function(e){return Boolean(e&&"object"==typeof e&&"byteLength"in e&&"byteOffset"in e)}(a)?s.value=r:s.result=r,o(e,s)})}}processSync(e){let t,n=!1;return this.freeze(),kh("processSync",this.parser||this.Parser),Nh("processSync",this.compiler||this.Compiler),this.process(e,function(e,s){n=!0,Ju(e),t=s}),Ph("processSync","process",n),t}run(e,t,n){Ch(e),this.freeze();const s=this.transformers;return n||"function"!=typeof t||(n=t,t=void 0),n?i(void 0,n):new Promise(i);function i(i,r){const a=Eh(t);s.run(e,a,function(t,s,a){const o=s||e;t?r(t):i?i(o):n(void 0,o,a)})}}runSync(e,t){let n,s=!1;return this.run(e,t,function(e,t){Ju(e),n=t,s=!0}),Ph("runSync","run",s),n}stringify(e,t){this.freeze();const n=Eh(t),s=this.compiler||this.Compiler;return Nh("stringify",s),Ch(e),s(e,n)}use(e,...t){const n=this.attachers,s=this.namespace;if(Sh("use",this.frozen),null==e);else if("function"==typeof e)o(e,t);else{if("object"!=typeof e)throw new TypeError("Expected usable value, not `"+e+"`");Array.isArray(e)?a(e):r(e)}return this;function i(e){if("function"==typeof e)o(e,[]);else{if("object"!=typeof e)throw new TypeError("Expected usable value, not `"+e+"`");if(Array.isArray(e)){const[t,...n]=e;o(t,n)}else r(e)}}function r(e){if(!("plugins"in e)&&!("settings"in e))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(e.plugins),e.settings&&(s.settings=ah(!0,s.settings,e.settings))}function a(e){let t=-1;if(null==e);else{if(!Array.isArray(e))throw new TypeError("Expected a list of plugins, not `"+e+"`");for(;++t<e.length;){i(e[t])}}}function o(e,t){let s=-1,i=-1;for(;++s<n.length;)if(n[s][0]===e){i=s;break}if(-1===i)n.push([e,...t]);else if(t.length>0){let[s,...r]=t;const a=n[i][1];oh(a)&&oh(s)&&(s=ah(!0,a,s)),n[i]=[e,s,...r]}}}}const jh=(new wh).freeze();function kh(e,t){if("function"!=typeof t)throw new TypeError("Cannot `"+e+"` without `parser`")}function Nh(e,t){if("function"!=typeof t)throw new TypeError("Cannot `"+e+"` without `compiler`")}function Sh(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Ch(e){if(!oh(e)||"string"!=typeof e.type)throw new TypeError("Expected node, got `"+e+"`")}function Ph(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function Eh(e){return function(e){return Boolean(e&&"object"==typeof e&&"message"in e&&"messages"in e)}(e)?e:new fh(e)}const Th=[],Lh={allowDangerousHtml:!0},Mh=/^(https?|ircs?|mailto|xmpp)$/i,Ih=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function _h(e){const t=function(e){const t=e.rehypePlugins||Th,n=e.remarkPlugins||Th,s=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...Lh}:Lh,i=jh().use(fu).use(n).use(Qu,s).use(t);return i}(e),n=function(e){const t=e.children||"",n=new fh;"string"==typeof t&&(n.value=t);return n}(e);return function(e,t){const n=t.allowedElements,s=t.allowElement,i=t.components,r=t.disallowedElements,a=t.skipHtml,o=t.unwrapDisallowed,l=t.urlTransform||Dh;for(const u of Ih)Object.hasOwn(t,u.from)&&Ra((u.from,u.to&&u.to,u.id));return zu(e,c),ul(e,{Fragment:M.Fragment,components:i,ignoreInvalidStyle:!0,jsx:M.jsx,jsxs:M.jsxs,passKeys:!0,passNode:!0});function c(e,t,i){if("raw"===e.type&&i&&"number"==typeof t)return a?i.children.splice(t,1):i.children[t]={type:"text",value:e.value},t;if("element"===e.type){let t;for(t in bl)if(Object.hasOwn(bl,t)&&Object.hasOwn(e.properties,t)){const n=e.properties[t],s=bl[t];(null===s||s.includes(e.tagName))&&(e.properties[t]=l(String(n||""),t,e))}}if("element"===e.type){let a=n?!n.includes(e.tagName):!!r&&r.includes(e.tagName);if(!a&&s&&"number"==typeof t&&(a=!s(e,t,i)),a&&i&&"number"==typeof t)return o&&e.children?i.children.splice(t,1,...e.children):i.children.splice(t,1),t}}}(t.runSync(t.parse(n),n),e)}function Dh(e){const t=e.indexOf(":"),n=e.indexOf("?"),s=e.indexOf("#"),i=e.indexOf("/");return-1===t||-1!==i&&t>i||-1!==n&&t>n||-1!==s&&t>s||Mh.test(e.slice(0,t))?e:""}const Ah=({children:e,className:t="",variant:n="primary",animate:s=!0,size:i="base"})=>{const r={primary:["#047857","#064E3B","#065F46"],secondary:["#10B981","#059669","#047857"],accent:["#3B82F6","#2563EB","#1D4ED8"],rainbow:["#047857","#10B981","#3B82F6","#EF4444","#F59E0B"],saytrix:["#14F195","#10B981","#059669"]},a={sm:"text-sm",base:"text-base",lg:"text-lg",xl:"text-xl","2xl":"text-2xl","3xl":"text-3xl"},o={background:`linear-gradient(135deg, ${(r[n]||r.primary).join(", ")})`,backgroundSize:s?"200% 200%":"100% 100%",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"};return s?M.jsx(v.span,{className:`gradient-text ${a[i]} ${t}`,style:o,animate:{backgroundPosition:["0% 50%","100% 50%","0% 50%"]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},children:e}):M.jsx("span",{className:`gradient-text ${a[i]} ${t}`,style:o,children:e})},Oh=({title:e,subtitle:t,highlight:n,variant:s="primary",align:i="center",className:r="",animate:a=!0})=>{const o={left:"text-left",center:"text-center",right:"text-right"},l=()=>{if(n&&e.includes(n)){const t=e.split(n);return M.jsxs(M.Fragment,{children:[t[0],M.jsx(Ah,{variant:s,animate:a,children:n}),t[1]]})}return e};return a?M.jsxs(v.div,{className:`section-header-modern ${o[i]} ${r}`,initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.6},viewport:{once:!0},children:[M.jsx(v.h2,{className:"section-title-modern",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.1},viewport:{once:!0},children:l()}),t&&M.jsx(v.p,{className:"section-subtitle-modern",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.2},viewport:{once:!0},children:t})]}):M.jsxs("div",{className:`section-header-modern ${o[i]} ${r}`,children:[M.jsx("h2",{className:"section-title-modern",children:l()}),t&&M.jsx("p",{className:"section-subtitle-modern",children:t})]})},Rh=()=>{const[e,t]=s.useState([]),[n,i]=s.useState(0),[r,a]=s.useState(!1),[o,l]=s.useState(""),[c,u]=s.useState(""),h=s.useRef(null),d=[{type:"user",message:"Compare TCS and Infosys for me",timestamp:"2:34 PM"},{type:"ai",message:"Great question! Here's a detailed comparison:\n\n**TCS (Tata Consultancy Services)**\n• Current Price: ₹3,789.60 (+1.21%)\n• Market Cap: ₹13.8L Cr\n• P/E Ratio: 28.5\n• Dividend Yield: 1.8%\n\n**Infosys**\n• Current Price: ₹1,456.75 (-0.57%)\n• Market Cap: ₹6.2L Cr\n• P/E Ratio: 24.2\n• Dividend Yield: 2.1%\n\nMy Analysis: TCS has stronger fundamentals and market leadership, but Infosys offers better value at current levels. For long-term investment, I'd lean towards TCS.",timestamp:"2:34 PM"},{type:"user",message:"What about the technical analysis?",timestamp:"2:35 PM"},{type:"ai",message:"📈 **Technical Analysis:**\n\n**TCS:**\n• RSI: 65 (Slightly overbought)\n• Moving Average: Above 50-day MA\n• Support: ₹3,650 | Resistance: ₹3,850\n• Trend: Bullish momentum\n\n**Infosys:**\n• RSI: 45 (Neutral zone)\n• Moving Average: Near 50-day MA\n• Support: ₹1,400 | Resistance: ₹1,500\n• Trend: Consolidation phase\n\nRecommendation: TCS shows stronger momentum, while Infosys is in a good accumulation zone.",timestamp:"2:35 PM"}];s.useEffect(()=>{if(n>=d.length){const e=setTimeout(()=>{t([]),i(0)},5e3);return()=>clearTimeout(e)}const e=d[n];let s;if("user"===e.type)t(t=>[...t,e]),s=setTimeout(()=>{i(e=>e+1)},1e3);else{a(!0),u("");const n=e.message.split(" ");let r=0;const o=()=>{r<n.length?(u(e=>e+" "+n[r]),r++,s=setTimeout(o,40)):(a(!1),t(t=>[...t,e]),s=setTimeout(()=>{i(e=>e+1)},3e3))};o()}return()=>clearTimeout(s)},[n,d.length]),s.useEffect(()=>{var e;null==(e=h.current)||e.scrollIntoView({behavior:"smooth"})},[e,r,c]);const m=()=>{};return M.jsx("section",{className:"saytrix-chat-preview",children:M.jsxs("div",{className:"container",children:[M.jsx(Oh,{title:"Meet Saytrix AI Assistant",subtitle:"Your personal trading mentor powered by advanced AI",highlight:"Saytrix",variant:"saytrix"}),M.jsxs("div",{className:"chat-demo-container",children:[M.jsxs(v.div,{className:"chat-window",initial:{opacity:0,scale:.95},whileInView:{opacity:1,scale:1},transition:{duration:.6,delay:.2},viewport:{once:!0},children:[M.jsxs("div",{className:"chat-header",children:[M.jsx("div",{className:"chat-avatar",children:M.jsx(ct,{size:20})}),M.jsxs("div",{className:"chat-info",children:[M.jsx("h3",{children:"Saytrix AI"}),M.jsx("span",{className:"status",children:"Online • Ready to help"})]}),M.jsx("div",{className:"voice-indicator",children:M.jsx(Ot,{size:16})})]}),M.jsxs("div",{className:"chat-messages",children:[M.jsxs(y,{children:[e.map((e,t)=>M.jsxs(v.div,{className:`message ${e.type}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:[M.jsx("div",{className:"message-avatar",children:"user"===e.type?M.jsx(un,{size:16}):M.jsx(ct,{size:16})}),M.jsxs("div",{className:"message-content",children:[M.jsx("div",{className:"message-text",children:"ai"===e.type?M.jsx(_h,{children:e.message}):M.jsx("p",{children:e.message})}),M.jsx("span",{className:"message-time",children:e.timestamp})]})]},t)),r&&M.jsxs(v.div,{className:"message ai typing",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[M.jsx("div",{className:"message-avatar",children:M.jsx(ct,{size:16})}),M.jsx("div",{className:"message-content",children:M.jsx("div",{className:"message-text message-text--temp",children:M.jsx(_h,{children:c})})})]},"typing-message")]}),M.jsx("div",{ref:h})]}),M.jsxs("div",{className:"chat-input-container",children:[M.jsx("div",{className:"quick-actions",children:["Compare stocks","Market analysis","Portfolio review","Risk assessment"].map((e,t)=>M.jsx(v.button,{className:"quick-action-btn",onClick:()=>(e=>{l(e)})(e),whileHover:{scale:1.05},whileTap:{scale:.95},initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*t},children:e},e))}),M.jsxs("div",{className:"chat-input",children:[M.jsx("input",{type:"text",placeholder:"Ask Saytrix anything about stocks...",value:o,onChange:e=>l(e.target.value),onKeyDown:e=>"Enter"===e.key&&void 0}),M.jsx("button",{className:"send-btn",onClick:m,children:M.jsx(Jt,{size:16})})]})]})]}),M.jsxs(v.div,{className:"chat-features",initial:{opacity:0,x:50},whileInView:{opacity:1,x:0},transition:{duration:.6,delay:.4},viewport:{once:!0},children:[M.jsx("h3",{children:"What Saytrix Can Do:"}),M.jsxs("ul",{children:[M.jsx("li",{children:"📊 Real-time stock analysis"}),M.jsx("li",{children:"📈 Technical chart interpretation"}),M.jsx("li",{children:"💰 Portfolio optimization tips"}),M.jsx("li",{children:"🎯 Risk assessment guidance"}),M.jsx("li",{children:"📰 Market news summaries"}),M.jsx("li",{children:"🗣️ Voice command support"})]}),M.jsxs(v.button,{className:"try-saytrix-btn",whileHover:{scale:1.05},whileTap:{scale:.95},children:["Try Saytrix Now ",M.jsx(Ge,{size:16})]})]})]})]})})},Fh=()=>{const[e,t]=s.useState(null),n=[{icon:Dt,title:"AI Assistant – Saytrix",description:"Ask anything, get instant insights. Your personal finance mentor available 24/7 with voice commands.",color:"#3B82F6",badge:"AI Powered",details:["Voice-activated commands","Real-time market analysis","Personalized recommendations","Smart portfolio insights"]},{icon:Zt,title:"Virtual Stock Trading",description:"Learn risk-free with ₹1L demo money. Practice with real Indian stock prices and market conditions.",color:"#10B981",badge:"Risk Free",details:["₹1,00,000 virtual money","Real NSE & BSE prices","Zero financial risk","Practice trading strategies"]},{icon:cn,title:"Live Indian Stock Data",description:"Real-time NSE & BSE data powered by FMP API. 30-second refresh with professional-grade accuracy.",color:"#F59E0B",badge:"Real Time",details:["30-second data refresh","NSE & BSE coverage","Professional-grade accuracy","Live market indicators"]},{icon:tt,title:"Portfolio Tracker",description:"Realistic P&L tracking, detailed charts, and comprehensive transaction history with analytics.",color:"#8B5CF6",badge:"Professional",details:["Real-time P&L tracking","Advanced analytics","Transaction history","Performance metrics"]},{icon:fn,title:"Secure Login",description:"Google OAuth integration plus email OTP support. Your data is protected with enterprise security.",color:"#EF4444",badge:"Secure",details:["Google OAuth integration","Email OTP verification","Enterprise-grade security","Data encryption"]},{icon:an,title:"Dark & Light Mode",description:"Beautiful El-Classico theme with seamless dark/light mode switching for comfortable trading.",color:"#6366F1",badge:"Customizable",details:["El-Classico theme","Seamless mode switching","Eye-friendly design","Professional aesthetics"]}],i={hidden:{opacity:0,x:-20},visible:{opacity:1,x:0,transition:{duration:.5,ease:"easeOut"}}};return M.jsx("section",{className:"animated-features-section",children:M.jsxs("div",{className:"container",children:[M.jsx(Oh,{title:"Complete Trading Ecosystem",subtitle:"From beginner-friendly tools to advanced analytics, TradeBro provides everything you need to succeed",highlight:"Everything You Need",variant:"secondary"}),M.jsx(v.div,{className:"animated-features-list",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},initial:"hidden",whileInView:"visible",viewport:{once:!0,margin:"-100px"},children:n.map((n,s)=>{const r=n.icon,a=e===s;return M.jsxs(v.div,{className:"feature-list-item",variants:i,onMouseEnter:()=>t(s),onMouseLeave:()=>t(null),style:{"--feature-color":n.color},children:[M.jsxs("div",{className:"feature-item-content",children:[M.jsxs("div",{className:"feature-item-header",children:[M.jsx("div",{className:"feature-item-icon",style:{color:n.color},children:M.jsx(r,{size:24})}),M.jsxs("div",{className:"feature-item-info",children:[M.jsxs("div",{className:"feature-item-title-row",children:[M.jsx("h3",{className:"feature-item-title",children:n.title}),M.jsx("span",{className:"feature-item-badge",style:{backgroundColor:`${n.color}15`,color:n.color},children:n.badge})]}),M.jsx("p",{className:"feature-item-description",children:n.description})]}),M.jsx(v.div,{className:"feature-item-arrow",animate:{x:a?4:0},transition:{duration:.2},children:M.jsx(Ge,{size:16})})]}),M.jsx(y,{children:a&&M.jsx(v.div,{className:"feature-item-details",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3,ease:"easeInOut"},children:M.jsx("div",{className:"feature-details-grid",children:n.details.map((e,t)=>M.jsxs(v.div,{className:"feature-detail-item",initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.05*t},children:[M.jsx(rt,{size:14,style:{color:n.color}}),M.jsx("span",{children:e})]},t))})})})]}),M.jsx(v.div,{className:"feature-item-glow",style:{background:`${n.color}10`},animate:{opacity:a?1:0},transition:{duration:.3}})]},s)})})]})})},Bh=()=>{const e=l(),[t,n]=s.useState(0),i=[{step:"01",title:"Create Your Account",description:"Sign up in under 2 minutes and get ₹10,000 virtual money to start trading risk-free",icon:hn,details:["Quick email or Google signup","₹10,000 virtual trading money","Instant account activation","No documents required"],color:"#3B82F6"},{step:"02",title:"Learn with Saytrix AI",description:"Get personalized market insights, stock analysis, and trading recommendations from our AI assistant",icon:tt,details:["Voice-activated AI assistant","Real-time market analysis","Personalized recommendations","Interactive learning modules"],color:"#10B981"},{step:"03",title:"Trade & Grow",description:"Execute trades, track your portfolio performance, and build wealth with professional-grade tools",icon:cn,details:["Real NSE & BSE stock prices","Professional trading charts","Portfolio performance tracking","Risk-free practice environment"],color:"#F59E0B"},{step:"04",title:"Master the Markets",description:"Compete on leaderboards, earn rewards, and become a confident trader with our gamified learning system",icon:Xe,details:["Global leaderboards","Achievement system","Daily trading challenges","Community competitions"],color:"#8B5CF6"}];return M.jsx("section",{className:"tradebro-stepper-section",children:M.jsxs("div",{className:"container",children:[M.jsx(Oh,{title:"How TradeBro Works",subtitle:"Master trading with our step-by-step approach",highlight:"TradeBro",variant:"primary"}),M.jsxs("div",{className:"stepper-container",children:[M.jsx("div",{className:"stepper-navigation",children:i.map((e,s)=>{const i=e.icon,r=s===t,a=s<t;return M.jsxs(v.div,{className:`step-item ${r?"active":""} ${a?"completed":""}`,onClick:()=>(e=>{n(e)})(s),whileHover:{scale:1.02},whileTap:{scale:.98},style:{"--step-color":e.color},children:[M.jsxs("div",{className:"step-indicator",children:[M.jsx("div",{className:"step-number",children:a?M.jsx(rt,{size:16}):M.jsx("span",{children:e.step})}),M.jsx("div",{className:"step-icon",style:{color:e.color},children:M.jsx(i,{size:20})})]}),M.jsxs("div",{className:"step-content",children:[M.jsx("h3",{className:"step-title",children:e.title}),M.jsx("p",{className:"step-description",children:e.description})]})]},s)})}),M.jsx(y,{mode:"wait",children:M.jsxs(v.div,{className:"step-details",initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:[M.jsxs("div",{className:"step-details-header",children:[M.jsx("div",{className:"step-details-icon",style:{color:i[t].color},children:r.createElement(i[t].icon,{size:32})}),M.jsxs("div",{children:[M.jsx("h3",{className:"step-details-title",children:i[t].title}),M.jsx("p",{className:"step-details-description",children:i[t].description})]})]}),M.jsx("div",{className:"step-details-list",children:i[t].details.map((e,n)=>M.jsxs(v.div,{className:"detail-item",initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.1*n},children:[M.jsx(rt,{size:16,style:{color:i[t].color}}),M.jsx("span",{children:e})]},n))}),M.jsx(v.div,{className:"step-actions",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},children:t<i.length-1?M.jsxs("button",{className:"next-step-btn",onClick:()=>n(t+1),style:{backgroundColor:i[t].color},children:["Next Step",M.jsx(Ge,{size:16})]}):M.jsxs("button",{className:"get-started-btn",onClick:()=>e("/signup"),style:{backgroundColor:i[t].color},children:["Get Started Now",M.jsx(Ge,{size:16})]})})]},t)})]})]})})},zh=({theme:e="light",onToggleTheme:t=()=>{}})=>{const n=l(),{markLandingVisited:i}=Ta();s.useEffect(()=>{i()},[i]);return M.jsxs("div",{className:"landing-page",children:[M.jsx(Ma,{isAuthenticated:!1,theme:e,onToggleTheme:t,onLogin:()=>{n("/login")},onSignup:()=>{n("/signup")}}),M.jsxs("section",{className:"hero-section",children:[M.jsxs("div",{className:"hero-background",children:[M.jsx(_a,{gridSize:40,lineColor:"rgba(59, 130, 246, 0.1)",speed:20}),M.jsx(Ia,{orbCount:3,colors:["#3B82F6","#10B981","#8B5CF6"],size:"large"})]}),M.jsxs("div",{className:"hero-container-grid",children:[M.jsxs(v.div,{className:"hero-content",initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.8},children:[M.jsxs(v.h1,{className:"hero-title",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},children:["Master the Markets with",M.jsx("br",{}),M.jsx(Aa,{})]}),M.jsx(v.p,{className:"hero-subtitle",initial:{opacity:0},animate:{opacity:1},transition:{duration:.8,delay:.4},children:"Experience the future of stock trading with Saytrix AI assistant, real-time market data, professional-grade charts, and risk-free virtual trading. Join 75,000+ traders building wealth intelligently."}),M.jsx(v.div,{className:"hero-actions",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.6},children:M.jsx(v.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:M.jsxs(u,{to:"/signup",className:"btn-premium btn-primary btn-large",children:[M.jsx(fn,{}),"Start Trading Free",M.jsx(Ge,{})]})})})]}),M.jsx(v.div,{className:"hero-visual",initial:{opacity:0,x:50},animate:{opacity:1,x:0},transition:{duration:.8,delay:.2},children:M.jsxs("div",{className:"interactive-dashboard",children:[M.jsxs("div",{className:"dashboard-header",children:[M.jsxs("div",{className:"header-dots",children:[M.jsx(v.span,{initial:{scale:0},animate:{scale:1},transition:{delay:.8,duration:.3}}),M.jsx(v.span,{initial:{scale:0},animate:{scale:1},transition:{delay:.9,duration:.3}}),M.jsx(v.span,{initial:{scale:0},animate:{scale:1},transition:{delay:1,duration:.3}})]}),M.jsx(v.span,{className:"dashboard-title",initial:{opacity:0},animate:{opacity:1},transition:{delay:1.1,duration:.5},children:"TradeBro Dashboard"})]}),M.jsx("div",{className:"dashboard-content",children:M.jsx(Da,{})})]})})]})]}),M.jsx("section",{id:"features",children:M.jsx(Fh,{})}),M.jsx("section",{id:"ai-demo",children:M.jsx(Rh,{})}),M.jsx("section",{id:"how-it-works",children:M.jsx(Bh,{})})]})},Wh=({disabled:e=!1})=>e?M.jsx("button",{className:"google-button disabled",disabled:!0,type:"button",children:M.jsx("span",{children:"Loading..."})}):M.jsxs("button",{className:"google-button",onClick:()=>{window.location.href="https://s89-satya-capstone-tradebro.onrender.com/api/auth/google"},type:"button",children:[M.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",children:[M.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),M.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),M.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),M.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),Uh=({onVerify:e,onCancel:t,email:n})=>{const[i,r]=s.useState(""),[a,o]=s.useState(!1),[l,c]=s.useState("");return M.jsx("div",{className:"two-factor-modal",children:M.jsxs("div",{className:"two-factor-content",children:[M.jsxs("div",{className:"two-factor-header",children:[M.jsx(Zt,{size:32}),M.jsx("h2",{children:"Two-Factor Authentication"}),M.jsxs("p",{children:["Enter the 6-digit code sent to ",n]})]}),M.jsxs("form",{onSubmit:async t=>{if(t.preventDefault(),6===i.length){o(!0),c("");try{const t=await fetch("/api/auth/verify-2fa",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,code:i})}),s=await t.json();s.success?e(s.token,s.user):c(s.message||"Invalid code")}catch(s){c("Verification failed. Please try again.")}finally{o(!1)}}else c("Please enter a 6-digit code")},className:"two-factor-form",children:[M.jsx("div",{className:"code-input-group",children:M.jsx("input",{type:"text",value:i,onChange:e=>r(e.target.value.replace(/\D/g,"").slice(0,6)),placeholder:"000000",className:"code-input",maxLength:6,autoFocus:!0})}),l&&M.jsxs("div",{className:"error-message",children:[M.jsx(pn,{size:16}),l]}),M.jsxs("div",{className:"two-factor-actions",children:[M.jsx("button",{type:"button",onClick:t,className:"cancel-btn",disabled:a,children:"Cancel"}),M.jsx("button",{type:"submit",className:"verify-btn",disabled:a||6!==i.length,children:a?"Verifying...":M.jsxs(M.Fragment,{children:[M.jsx(rt,{size:16}),"Verify"]})})]})]})]})})},Vh=({onLogin:e})=>{var t,n;const i=l(),r=c(),[a,o]=s.useState({email:"",password:""}),[h,d]=s.useState(!1),[m,p]=s.useState({}),[f,g]=s.useState(!1),[y,x]=s.useState(!1),[b,w]=s.useState(""),j=(null==(n=null==(t=r.state)?void 0:t.from)?void 0:n.pathname)||"/dashboard",k=localStorage.getItem("redirectAfterLogin")||j;s.useEffect(()=>{var e;if("oauth_failed"===new URLSearchParams(window.location.search).get("error"))return We.error("Google authentication failed. Please try again."),void window.history.replaceState({},document.title,window.location.pathname);(null==(e=r.state)?void 0:e.from)&&We.info("Please log in to access that page",{position:"top-right",autoClose:3e3})},[r.search,i]);const N=e=>{const{name:t,value:n}=e.target;o(e=>({...e,[t]:n})),m[t]&&p(e=>({...e,[t]:""}))},S=(t,n)=>{e(n,t),We.success("Welcome back! Login successful",{position:"top-right",autoClose:2e3}),i(k,{replace:!0}),localStorage.removeItem("redirectAfterLogin")},C=()=>{x(!1),w("")};return y?M.jsx(Uh,{email:b,onVerify:S,onCancel:C}):M.jsx("div",{className:"auth-page",children:M.jsxs(v.div,{className:"auth-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[M.jsxs("div",{className:"auth-header",children:[M.jsxs("div",{className:"auth-logo",children:[M.jsx("div",{className:"auth-logo-icon",children:"📈"}),M.jsx("h1",{className:"auth-logo-text",children:"TradeBro"})]}),M.jsxs("div",{children:[M.jsx("h2",{className:"auth-title",children:"Welcome Back"}),M.jsx("p",{className:"auth-subtitle",children:"Sign in to your account to continue trading"})]})]}),M.jsxs("form",{onSubmit:async t=>{if(t.preventDefault(),(()=>{const e={};return a.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a.email)||(e.email="Please enter a valid email address"):e.email="Email is required",a.password?a.password.length<6&&(e.password="Password must be at least 6 characters"):e.password="Password is required",p(e),0===Object.keys(e).length})()){d(!0),p({});try{const t="https://s89-satya-capstone-tradebro.onrender.com",n=await fetch(`${t}/api/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:a.email,password:a.password})}),s=await n.json();n.ok&&s.success?s.requiresTwoFactor?(w(s.email),x(!0),We.info("Please enter the 2FA code sent to your email",{position:"top-right",autoClose:3e3})):(e(s.user,s.token),We.success("Welcome back! Login successful",{position:"top-right",autoClose:2e3}),i(k,{replace:!0}),localStorage.removeItem("redirectAfterLogin")):(p({general:s.message||"Login failed. Please try again."}),We.error(s.message||"Invalid credentials. Please try again.",{position:"top-right",autoClose:3e3}))}catch(n){p({general:"Network error. Please try again."}),We.error("Network error. Please check your connection.",{position:"top-right",autoClose:3e3})}finally{d(!1)}}},className:"auth-form",children:[m.general&&M.jsxs("div",{className:"error-message",children:[M.jsx(Ve,{size:16}),M.jsx("span",{children:m.general})]}),M.jsxs("div",{className:"form-group",children:[M.jsxs("label",{className:"form-label",children:[M.jsx(Mt,{size:16}),"Email Address"]}),M.jsx("input",{type:"email",name:"email",value:a.email,onChange:N,className:"form-input "+(m.email?"form-input-error":""),placeholder:"Enter your email",disabled:h,autoComplete:"email",required:!0}),m.email&&M.jsxs("div",{className:"form-error",children:[M.jsx(Ve,{size:14}),M.jsx("span",{children:m.email})]})]}),M.jsxs("div",{className:"form-group",children:[M.jsxs("label",{className:"form-label",children:[M.jsx(Et,{size:16}),"Password"]}),M.jsx("input",{type:"password",name:"password",value:a.password,onChange:N,className:"form-input "+(m.password?"form-input-error":""),placeholder:"Enter your password",disabled:h,autoComplete:"current-password",required:!0}),m.password&&M.jsxs("div",{className:"form-error",children:[M.jsx(Ve,{size:14}),M.jsx("span",{children:m.password})]})]}),M.jsxs("div",{className:"form-options",children:[M.jsxs("label",{className:"checkbox-label",children:[M.jsx("input",{type:"checkbox",checked:f,onChange:e=>{g(e.target.checked)},disabled:h,id:"remember-me"}),M.jsx("span",{children:"Remember me"})]}),M.jsx(u,{to:"/forgot-password",className:"forgot-link",children:"Forgot password?"})]}),M.jsx("button",{type:"submit",className:"auth-submit",disabled:h,children:h?M.jsx("div",{className:"loading-spinner"}):M.jsxs(M.Fragment,{children:["Sign In",M.jsx(Ge,{size:16})]})})]}),M.jsx("div",{className:"auth-divider",children:M.jsx("span",{children:"or continue with"})}),M.jsx(Wh,{disabled:h}),M.jsx("div",{className:"auth-footer",children:M.jsxs("p",{children:["Don't have an account?"," ",M.jsx(u,{to:"/signup",children:"Sign up for free"})]})})]})})},$h=({onSignup:e})=>{const t=l(),[n,i]=s.useState({name:"",email:"",password:"",confirmPassword:""}),[r,a]=s.useState(!1),[o,c]=s.useState({}),[h,d]=s.useState(!1),[m,p]=s.useState({length:!1,uppercase:!1,lowercase:!1,number:!1,special:!1}),f=localStorage.getItem("redirectAfterLogin")||"/dashboard",g=e=>{const{name:t,value:n}=e.target;i(e=>({...e,[t]:n})),"password"===t&&(e=>{const t={length:e.length>=8,uppercase:/[A-Z]/.test(e),lowercase:/[a-z]/.test(e),number:/\d/.test(e),special:/[!@#$%^&*(),.?":{}|<>]/.test(e)};p(t)})(n),o[t]&&c(e=>({...e,[t]:""}))},y=()=>Object.values(m).filter(Boolean).length,x=()=>{const e=y();return e<2?"#ef4444":e<4?"#f59e0b":"#10b981"};return M.jsx("div",{className:"auth-page",children:M.jsxs(v.div,{className:"auth-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[M.jsxs("div",{className:"auth-header",children:[M.jsxs("div",{className:"auth-logo",children:[M.jsx("div",{className:"auth-logo-icon",children:"📈"}),M.jsx("h1",{className:"auth-logo-text",children:"TradeBro"})]}),M.jsxs("div",{children:[M.jsx("h2",{className:"auth-title",children:"Create Account"}),M.jsx("p",{className:"auth-subtitle",children:"Join TradeBro and start your trading journey today"})]})]}),M.jsxs("form",{onSubmit:async s=>{if(s.preventDefault(),(()=>{const e={};return n.name.trim()?n.name.trim().length<2&&(e.name="Name must be at least 2 characters"):e.name="Full name is required",n.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.email)||(e.email="Please enter a valid email address"):e.email="Email is required",n.password?n.password.length<8&&(e.password="Password must be at least 8 characters"):e.password="Password is required",n.confirmPassword?n.password!==n.confirmPassword&&(e.confirmPassword="Passwords do not match"):e.confirmPassword="Please confirm your password",h||(e.terms="You must accept the Terms of Service and Privacy Policy"),c(e),0===Object.keys(e).length})()){a(!0),c({});try{const s=n.email.split("@")[0].replace(/[^a-zA-Z0-9]/g,""),i=s+Date.now().toString().slice(-4),r="https://s89-satya-capstone-tradebro.onrender.com",a=await fetch(`${r}/api/auth/signup`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:i,email:n.email,password:n.password,fullName:n.name})}),o=await a.json();if(a.ok&&o.success)e(o.user,o.token),We.success("Welcome to TradeBro! Account created successfully",{position:"top-right",autoClose:2e3}),setTimeout(()=>{t(f,{replace:!0}),localStorage.removeItem("redirectAfterLogin")},1e3);else if(o.errors&&"object"==typeof o.errors){c(o.errors);const e=Object.values(o.errors)[0];We.error(e||"Please fix the validation errors.",{position:"top-right",autoClose:4e3})}else c({general:o.message||"Signup failed. Please try again."}),We.error(o.message||"Signup failed. Please try again.",{position:"top-right",autoClose:3e3})}catch(i){c({general:"Network error. Please try again."}),We.error("Network error. Please check your connection.",{position:"top-right",autoClose:3e3})}finally{a(!1)}}},className:"auth-form",children:[o.general&&M.jsxs("div",{className:"error-message",children:[M.jsx(Ve,{size:16}),M.jsx("span",{children:o.general})]}),M.jsxs("div",{className:"form-group",children:[M.jsxs("label",{className:"form-label",children:[M.jsx(un,{size:16}),"Full Name"]}),M.jsx("input",{type:"text",name:"name",value:n.name,onChange:g,className:"form-input "+(o.name?"form-input-error":""),placeholder:"Enter your full name",disabled:r,autoComplete:"name",required:!0}),o.name&&M.jsxs("div",{className:"form-error",children:[M.jsx(Ve,{size:14}),M.jsx("span",{children:o.name})]})]}),M.jsxs("div",{className:"form-group",children:[M.jsxs("label",{className:"form-label",children:[M.jsx(Mt,{size:16}),"Email Address"]}),M.jsx("input",{type:"email",name:"email",value:n.email,onChange:g,className:"form-input "+(o.email?"form-input-error":""),placeholder:"Enter your email",disabled:r,autoComplete:"email",required:!0}),o.email&&M.jsxs("div",{className:"form-error",children:[M.jsx(Ve,{size:14}),M.jsx("span",{children:o.email})]})]}),M.jsxs("div",{className:"form-group",children:[M.jsxs("label",{className:"form-label",children:[M.jsx(Et,{size:16}),"Password"]}),M.jsx("input",{type:"password",name:"password",value:n.password,onChange:g,className:"form-input "+(o.password?"form-input-error":""),placeholder:"Create a password",disabled:r,autoComplete:"new-password",required:!0}),o.password&&M.jsxs("div",{className:"form-error",children:[M.jsx(Ve,{size:14}),M.jsx("span",{children:o.password})]}),n.password&&M.jsxs("div",{className:"password-strength",children:[M.jsx("div",{className:"password-strength-bar",children:M.jsx("div",{className:"password-strength-fill",style:{width:y()/5*100+"%",backgroundColor:x()}})}),M.jsx("span",{className:"password-strength-text",style:{color:x()},children:(()=>{const e=y();return e<2?"Weak":e<4?"Medium":"Strong"})()})]})]}),M.jsxs("div",{className:"form-group",children:[M.jsxs("label",{className:"form-label",children:[M.jsx(Et,{size:16}),"Confirm Password"]}),M.jsx("input",{type:"password",name:"confirmPassword",value:n.confirmPassword,onChange:g,className:"form-input "+(o.confirmPassword?"form-input-error":""),placeholder:"Confirm your password",disabled:r,autoComplete:"new-password",required:!0}),o.confirmPassword&&M.jsxs("div",{className:"form-error",children:[M.jsx(Ve,{size:14}),M.jsx("span",{children:o.confirmPassword})]})]}),M.jsxs("div",{className:"form-group",children:[M.jsxs("label",{className:"checkbox-label",children:[M.jsx("input",{type:"checkbox",checked:h,onChange:e=>d(e.target.checked),disabled:r}),M.jsxs("span",{children:["I agree to the"," ",M.jsx(u,{to:"/terms",children:"Terms of Service"})," ","and"," ",M.jsx(u,{to:"/privacy",children:"Privacy Policy"})]})]}),o.terms&&M.jsxs("div",{className:"form-error",children:[M.jsx(Ve,{size:14}),M.jsx("span",{children:o.terms})]})]}),M.jsx("button",{type:"submit",className:"auth-submit",disabled:r,children:r?M.jsx("div",{className:"loading-spinner"}):M.jsxs(M.Fragment,{children:["Create Account",M.jsx(Ge,{size:16})]})})]}),M.jsx("div",{className:"auth-divider",children:M.jsx("span",{children:"or continue with"})}),M.jsx(Wh,{disabled:r}),M.jsx("div",{className:"auth-footer",children:M.jsxs("p",{children:["Already have an account?"," ",M.jsx(u,{to:"/login",children:"Sign in"})]})})]})})};var Hh,qh,Yh,Gh={},Qh={exports:{}};Hh=Qh.exports,qh=function(){return qh=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},qh.apply(this,arguments)},Yh=function(){function e(e,t,n){var s=this;this.endVal=t,this.options=n,this.version="2.9.0",this.defaults={startVal:0,decimalPlaces:0,duration:2,useEasing:!0,useGrouping:!0,useIndianSeparators:!1,smartEasingThreshold:999,smartEasingAmount:333,separator:",",decimal:".",prefix:"",suffix:"",enableScrollSpy:!1,scrollSpyDelay:200,scrollSpyOnce:!1},this.finalEndVal=null,this.useEasing=!0,this.countDown=!1,this.error="",this.startVal=0,this.paused=!0,this.once=!1,this.count=function(e){s.startTime||(s.startTime=e);var t=e-s.startTime;s.remaining=s.duration-t,s.useEasing?s.countDown?s.frameVal=s.startVal-s.easingFn(t,0,s.startVal-s.endVal,s.duration):s.frameVal=s.easingFn(t,s.startVal,s.endVal-s.startVal,s.duration):s.frameVal=s.startVal+(s.endVal-s.startVal)*(t/s.duration);var n=s.countDown?s.frameVal<s.endVal:s.frameVal>s.endVal;s.frameVal=n?s.endVal:s.frameVal,s.frameVal=Number(s.frameVal.toFixed(s.options.decimalPlaces)),s.printValue(s.frameVal),t<s.duration?s.rAF=requestAnimationFrame(s.count):null!==s.finalEndVal?s.update(s.finalEndVal):s.options.onCompleteCallback&&s.options.onCompleteCallback()},this.formatNumber=function(e){var t,n,i,r,a=e<0?"-":"";t=Math.abs(e).toFixed(s.options.decimalPlaces);var o=(t+="").split(".");if(n=o[0],i=o.length>1?s.options.decimal+o[1]:"",s.options.useGrouping){r="";for(var l=3,c=0,u=0,h=n.length;u<h;++u)s.options.useIndianSeparators&&4===u&&(l=2,c=1),0!==u&&c%l==0&&(r=s.options.separator+r),c++,r=n[h-u-1]+r;n=r}return s.options.numerals&&s.options.numerals.length&&(n=n.replace(/[0-9]/g,function(e){return s.options.numerals[+e]}),i=i.replace(/[0-9]/g,function(e){return s.options.numerals[+e]})),a+s.options.prefix+n+i+s.options.suffix},this.easeOutExpo=function(e,t,n,s){return n*(1-Math.pow(2,-10*e/s))*1024/1023+t},this.options=qh(qh({},this.defaults),n),this.formattingFn=this.options.formattingFn?this.options.formattingFn:this.formatNumber,this.easingFn=this.options.easingFn?this.options.easingFn:this.easeOutExpo,this.el="string"==typeof e?document.getElementById(e):e,t=null==t?this.parse(this.el.innerHTML):t,this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.endVal=this.validateValue(t),this.options.decimalPlaces=Math.max(this.options.decimalPlaces),this.resetDuration(),this.options.separator=String(this.options.separator),this.useEasing=this.options.useEasing,""===this.options.separator&&(this.options.useGrouping=!1),this.el?this.printValue(this.startVal):this.error="[CountUp] target is null or undefined","undefined"!=typeof window&&this.options.enableScrollSpy&&(this.error||(window.onScrollFns=window.onScrollFns||[],window.onScrollFns.push(function(){return s.handleScroll(s)}),window.onscroll=function(){window.onScrollFns.forEach(function(e){return e()})},this.handleScroll(this)))}return e.prototype.handleScroll=function(e){if(e&&window&&!e.once){var t=window.innerHeight+window.scrollY,n=e.el.getBoundingClientRect(),s=n.top+window.pageYOffset,i=n.top+n.height+window.pageYOffset;i<t&&i>window.scrollY&&e.paused?(e.paused=!1,setTimeout(function(){return e.start()},e.options.scrollSpyDelay),e.options.scrollSpyOnce&&(e.once=!0)):(window.scrollY>i||s>t)&&!e.paused&&e.reset()}},e.prototype.determineDirectionAndSmartEasing=function(){var e=this.finalEndVal?this.finalEndVal:this.endVal;this.countDown=this.startVal>e;var t=e-this.startVal;if(Math.abs(t)>this.options.smartEasingThreshold&&this.options.useEasing){this.finalEndVal=e;var n=this.countDown?1:-1;this.endVal=e+n*this.options.smartEasingAmount,this.duration=this.duration/2}else this.endVal=e,this.finalEndVal=null;null!==this.finalEndVal?this.useEasing=!1:this.useEasing=this.options.useEasing},e.prototype.start=function(e){this.error||(this.options.onStartCallback&&this.options.onStartCallback(),e&&(this.options.onCompleteCallback=e),this.duration>0?(this.determineDirectionAndSmartEasing(),this.paused=!1,this.rAF=requestAnimationFrame(this.count)):this.printValue(this.endVal))},e.prototype.pauseResume=function(){this.paused?(this.startTime=null,this.duration=this.remaining,this.startVal=this.frameVal,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count)):cancelAnimationFrame(this.rAF),this.paused=!this.paused},e.prototype.reset=function(){cancelAnimationFrame(this.rAF),this.paused=!0,this.resetDuration(),this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.printValue(this.startVal)},e.prototype.update=function(e){cancelAnimationFrame(this.rAF),this.startTime=null,this.endVal=this.validateValue(e),this.endVal!==this.frameVal&&(this.startVal=this.frameVal,null==this.finalEndVal&&this.resetDuration(),this.finalEndVal=null,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count))},e.prototype.printValue=function(e){var t;if(this.el){var n=this.formattingFn(e);(null===(t=this.options.plugin)||void 0===t?void 0:t.render)?this.options.plugin.render(this.el,n):"INPUT"===this.el.tagName?this.el.value=n:"text"===this.el.tagName||"tspan"===this.el.tagName?this.el.textContent=n:this.el.innerHTML=n}},e.prototype.ensureNumber=function(e){return"number"==typeof e&&!isNaN(e)},e.prototype.validateValue=function(e){var t=Number(e);return this.ensureNumber(t)?t:(this.error="[CountUp] invalid start or end value: ".concat(e),null)},e.prototype.resetDuration=function(){this.startTime=null,this.duration=1e3*Number(this.options.duration),this.remaining=this.duration},e.prototype.parse=function(e){var t=function(e){return e.replace(/([.,'  ])/g,"\\$1")},n=t(this.options.separator),s=t(this.options.decimal),i=e.replace(new RegExp(n,"g"),"").replace(new RegExp(s,"g"),".");return parseFloat(i)},e}(),Hh.CountUp=Yh;var Jh=Qh.exports;Object.defineProperty(Gh,"__esModule",{value:!0});var Xh=s,Kh=Jh;function Zh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,s)}return n}function ed(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zh(Object(n),!0).forEach(function(t){nd(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zh(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function td(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,t);if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function nd(e,t,n){return(t=td(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sd(){return sd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},sd.apply(this,arguments)}function id(e,t){if(null==e)return{};var n,s,i=function(e,t){if(null==e)return{};var n,s,i={},r=Object.keys(e);for(s=0;s<r.length;s++)n=r[s],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(s=0;s<r.length;s++)n=r[s],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function rd(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var s,i,r,a,o=[],l=!0,c=!1;try{if(r=(n=n.call(e)).next,0===t);else for(;!(l=(s=r.call(n)).done)&&(o.push(s.value),o.length!==t);l=!0);}catch(u){c=!0,i=u}finally{try{if(!l&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(c)throw i}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ad(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ad(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ad(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}var od="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?Xh.useLayoutEffect:Xh.useEffect;function ld(e){var t=Xh.useRef(e);return od(function(){t.current=e}),Xh.useCallback(function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return t.current.apply(void 0,n)},[])}var cd=["ref","startOnMount","enableReinitialize","delay","onEnd","onStart","onPauseResume","onReset","onUpdate"],ud={decimal:".",separator:",",delay:null,prefix:"",suffix:"",duration:2,start:0,decimals:0,startOnMount:!0,enableReinitialize:!0,useEasing:!0,useGrouping:!0,useIndianSeparators:!1},hd=function(e){var t=Object.fromEntries(Object.entries(e).filter(function(e){return void 0!==rd(e,2)[1]})),n=Xh.useMemo(function(){return ed(ed({},ud),t)},[e]),s=n.ref,i=n.startOnMount,r=n.enableReinitialize,a=n.delay,o=n.onEnd,l=n.onStart,c=n.onPauseResume,u=n.onReset,h=n.onUpdate,d=id(n,cd),m=Xh.useRef(),p=Xh.useRef(),f=Xh.useRef(!1),g=ld(function(){return function(e,t){var n=t.decimal,s=t.decimals,i=t.duration,r=t.easingFn,a=t.end,o=t.formattingFn,l=t.numerals,c=t.prefix,u=t.separator,h=t.start,d=t.suffix,m=t.useEasing,p=t.useGrouping,f=t.useIndianSeparators,g=t.enableScrollSpy,y=t.scrollSpyDelay,v=t.scrollSpyOnce,x=t.plugin;return new Kh.CountUp(e,a,{startVal:h,duration:i,decimal:n,decimalPlaces:s,easingFn:r,formattingFn:o,numerals:l,separator:u,prefix:c,suffix:d,plugin:x,useEasing:m,useIndianSeparators:f,useGrouping:p,enableScrollSpy:g,scrollSpyDelay:y,scrollSpyOnce:v})}("string"==typeof s?s:s.current,d)}),y=ld(function(e){var t=m.current;if(t&&!e)return t;var n=g();return m.current=n,n}),v=ld(function(){var e=function(){return y(!0).start(function(){null==o||o({pauseResume:x,reset:b,start:j,update:w})})};a&&a>0?p.current=setTimeout(e,1e3*a):e(),null==l||l({pauseResume:x,reset:b,update:w})}),x=ld(function(){y().pauseResume(),null==c||c({reset:b,start:j,update:w})}),b=ld(function(){y().el&&(p.current&&clearTimeout(p.current),y().reset(),null==u||u({pauseResume:x,start:j,update:w}))}),w=ld(function(e){y().update(e),null==h||h({pauseResume:x,reset:b,start:j})}),j=ld(function(){b(),v()}),k=ld(function(e){i&&(e&&b(),v())});return Xh.useEffect(function(){f.current?r&&k(!0):(f.current=!0,k())},[r,f,k,a,e.start,e.suffix,e.prefix,e.duration,e.separator,e.decimals,e.decimal,e.formattingFn]),Xh.useEffect(function(){return function(){b()}},[b]),{start:j,pauseResume:x,reset:b,update:w,getCountUp:y}},dd=["className","redraw","containerProps","children","style"],md=Gh.default=function(e){var t=e.className,n=e.redraw,s=e.containerProps,i=e.children,r=e.style,a=id(e,dd),o=Xh.useRef(null),l=Xh.useRef(!1),c=hd(ed(ed({},a),{},{ref:o,startOnMount:"function"!=typeof i||0===e.delay,enableReinitialize:!1})),u=c.start,h=c.reset,d=c.update,m=c.pauseResume,p=c.getCountUp,f=ld(function(){u()}),g=ld(function(t){e.preserveValue||h(),d(t)}),y=ld(function(){("function"!=typeof e.children||o.current instanceof Element)&&p()});Xh.useEffect(function(){y()},[y]),Xh.useEffect(function(){l.current&&g(e.end)},[e.end,g]);var v=n&&e;return Xh.useEffect(function(){n&&l.current&&f()},[f,n,v]),Xh.useEffect(function(){!n&&l.current&&f()},[f,n,e.start,e.suffix,e.prefix,e.duration,e.separator,e.decimals,e.decimal,e.className,e.formattingFn]),Xh.useEffect(function(){l.current=!0},[]),"function"==typeof i?i({countUpRef:o,start:u,reset:h,update:d,pauseResume:m,getCountUp:p}):Xh.createElement("span",sd({className:t,ref:o,style:r},s),void 0!==e.start?p().formattingFn(e.start):"")};Gh.useCountUp=hd;const pd=s.createContext(),fd=({children:e})=>{const{isAuthenticated:t,getToken:n}=yn(),[i,r]=s.useState({balance:1e4,transactions:[],lastLoginReward:null,totalInvested:0,totalGains:0,portfolioValue:0}),[a,o]=s.useState(!1),[l,c]=s.useState(null),u=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2,maximumFractionDigits:2}).format(e),h=async()=>{if(t){o(!0),c(null);try{const e=n(),t=await fetch("https://s89-satya-capstone-tradebro.onrender.com/api/virtual-money/account",{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!t.ok)throw new Error("Failed to fetch virtual money data");{const e=await t.json();r(e.data)}}catch(e){c(e.message)}finally{o(!1)}}};s.useEffect(()=>{t&&h()},[t]),s.useEffect(()=>{const e=e=>{h()};return window.addEventListener("balanceUpdated",e),()=>{window.removeEventListener("balanceUpdated",e)}},[h]);const d={virtualMoney:i,loading:a,error:l,formatCurrency:u,fetchVirtualMoney:h,buyStock:async(e,s,i)=>{if(!t)return{success:!1,message:"Not authenticated"};o(!0),c(null);try{const t=n(),a=await fetch("https://s89-satya-capstone-tradebro.onrender.com/api/virtual-money/buy",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({stockSymbol:e,quantity:s,price:i})}),o=await a.json();if(a.ok)return r(o.data),{success:!0,message:o.message};throw new Error(o.message||"Failed to buy stock")}catch(a){return c(a.message),{success:!1,message:a.message}}finally{o(!1)}},sellStock:async(e,s,i)=>{if(!t)return{success:!1,message:"Not authenticated"};o(!0),c(null);try{const t=n(),a=await fetch("https://s89-satya-capstone-tradebro.onrender.com/api/virtual-money/sell",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({stockSymbol:e,quantity:s,price:i})}),o=await a.json();if(a.ok)return r(o.data),{success:!0,message:o.message};throw new Error(o.message||"Failed to sell stock")}catch(a){return c(a.message),{success:!1,message:a.message}}finally{o(!1)}},claimLoginReward:async()=>{if(!t)return{success:!1,message:"Not authenticated"};o(!0),c(null);try{const e=n(),t=await fetch("https://s89-satya-capstone-tradebro.onrender.com/api/virtual-money/login-reward",{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}}),s=await t.json();if(t.ok)return r(s.data),{success:!0,message:s.message,reward:s.reward};throw new Error(s.message||"Failed to claim reward")}catch(e){return c(e.message),{success:!1,message:e.message}}finally{o(!1)}},balance:i.balance,formattedBalance:u(i.balance),transactions:i.transactions||[],canClaimReward:!i.lastLoginReward||new Date-new Date(i.lastLoginReward)>864e5};return M.jsx(pd.Provider,{value:d,children:e})},gd=()=>{const[e,t]=s.useState(!1),[n,i]=s.useState(null),[r,a]=s.useState(null),{refreshPortfolio:o}=ra(),{claimLoginReward:l,fetchVirtualMoney:c}=(()=>{const e=s.useContext(pd);if(void 0===e)throw new Error("useVirtualMoney must be used within a VirtualMoneyProvider");return e})(),u=s.useRef(!1);s.useEffect(()=>{if(u.current)return;(async()=>{const e=await sa.checkDailyLogin(),n=sa.getDailyRewardsInfo();a(n),e.awarded&&(i(e),t(!0),l().then(()=>{setTimeout(()=>{sa.syncPortfolioData(),o(),c()},500)}).catch(e=>{setTimeout(()=>{sa.syncPortfolioData(),o()},500)})),u.current=!0})().catch(console.error)},[]);const h=()=>{t(!1),sa.syncPortfolioData(),o(),c()},d=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(e);return M.jsxs(M.Fragment,{children:[M.jsx(y,{children:e&&n&&M.jsx(v.div,{className:"daily-reward-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:h,children:M.jsxs(v.div,{className:"daily-reward-modal",initial:{scale:.8,opacity:0,y:50},animate:{scale:1,opacity:1,y:0},exit:{scale:.8,opacity:0,y:50},onClick:e=>e.stopPropagation(),children:[M.jsx("button",{className:"close-btn",onClick:h,children:M.jsx(pn,{})}),M.jsxs("div",{className:"reward-content",children:[M.jsx(v.div,{className:"reward-icon",animate:{rotate:[0,-10,10,-10,0],scale:[1,1.1,1]},transition:{duration:.6,repeat:1/0,repeatDelay:2},children:M.jsx(xt,{})}),M.jsx("h2",{children:"Daily Login Bonus!"}),M.jsx("div",{className:"reward-amount",children:d(n.amount)}),M.jsxs("div",{className:"reward-details",children:[M.jsxs("div",{className:"detail-item",children:[M.jsx(nt,{}),M.jsxs("span",{children:["Login Streak: ",n.streak," days"]})]}),M.jsxs("div",{className:"detail-item",children:[M.jsx(cn,{}),M.jsxs("span",{children:["Total Rewards: ",d(n.totalRewards)]})]})]}),M.jsxs("div",{className:"reward-message",children:[M.jsx("p",{children:"Keep logging in daily to maintain your streak!"}),n.streak>=7&&M.jsxs("div",{className:"streak-bonus",children:[M.jsx(nn,{}),M.jsx("span",{children:"Amazing! 7+ day streak!"})]})]}),M.jsx("button",{className:"claim-btn",onClick:h,children:"Awesome! 🎉"})]})]})})}),r&&M.jsxs("div",{className:"daily-rewards-widget",children:[M.jsxs("div",{className:"widget-header",children:[M.jsx(xt,{}),M.jsx("span",{children:"Daily Rewards"})]}),M.jsxs("div",{className:"widget-content",children:[M.jsxs("div",{className:"streak-info",children:[M.jsx("span",{className:"streak-number",children:r.loginStreak}),M.jsx("span",{className:"streak-label",children:"Day Streak"})]}),M.jsxs("div",{className:"total-rewards",children:[M.jsx("span",{className:"total-label",children:"Total Earned"}),M.jsx("span",{className:"total-amount",children:d(r.totalRewards)})]}),r.nextRewardAvailable&&M.jsx("div",{className:"next-reward",children:M.jsx("span",{children:"Next reward available tomorrow!"})})]})]})]})},yd=({notification:e,onClick:t,onDelete:n,onMarkAsRead:i,compact:r=!1,showActions:a=!0})=>{const o=s.useCallback(e=>{const t=new Date(e),n=new Date,s=Math.floor((n-t)/6e4);return s<1?"Just now":s<60?`${s}m ago`:s<1440?`${Math.floor(s/60)}h ago`:`${Math.floor(s/1440)}d ago`},[]),l=s.useCallback(()=>{t&&t(e)},[t,e]),c=s.useCallback(e=>{e.stopPropagation(),n&&n(e)},[n]),u=s.useCallback(t=>{t.stopPropagation(),i&&i(e.id)},[i,e.id]);return M.jsxs(v.div,{className:`notification-item ${r?"compact":""} ${e.read?"read":"unread"} ${e.type}`,onClick:l,whileHover:{backgroundColor:"var(--notification-hover-bg)"},layout:!0,children:[!e.read&&M.jsx("div",{className:"unread-indicator"}),M.jsxs("div",{className:"notification-content",children:[M.jsx("div",{className:"notification-icon",children:(e=>{const t={size:r?16:20};switch(e){case"success":return M.jsx(it,{...t,className:"icon-success"});case"error":return M.jsx(mn,{...t,className:"icon-error"});case"warning":return M.jsx($e,{...t,className:"icon-warning"});case"alert":return M.jsx(Ve,{...t,className:"icon-alert"});default:return M.jsx(kt,{...t,className:"icon-info"})}})(e.type)}),M.jsxs("div",{className:"notification-text",children:[M.jsx("div",{className:"notification-title",children:e.title}),e.message&&M.jsx("div",{className:"notification-message",children:e.message}),M.jsxs("div",{className:"notification-meta",children:[M.jsxs("span",{className:"notification-time",children:[M.jsx(at,{size:12}),o(e.createdAt)]}),e.link&&M.jsxs("span",{className:"notification-link",children:[M.jsx(ft,{size:12}),"View details"]})]})]}),a&&M.jsxs("div",{className:"notification-actions",children:[!e.read&&i&&M.jsx(v.button,{className:"action-btn mark-read",onClick:u,whileHover:{scale:1.1},whileTap:{scale:.9},title:"Mark as read","aria-label":"Mark as read",children:M.jsx(it,{size:14})}),n&&M.jsx(v.button,{className:"action-btn delete",onClick:c,whileHover:{scale:1.1},whileTap:{scale:.9},title:"Delete notification","aria-label":"Delete notification",children:M.jsx(pn,{size:14})})]})]})]})},vd=({notifications:e=[],unreadCount:t=0,loading:n=!1,onClose:i})=>{const{markAsRead:r,deleteNotification:a,markAllAsRead:o}=or(),l=e.slice(0,5),c=s.useCallback(async e=>{try{e.read||await r(e.id),e.link&&(window.location.href=e.link),i()}catch(t){}},[r,i]),h=s.useCallback(async(e,t)=>{t.stopPropagation();try{await a(e)}catch(n){}},[a]),d=s.useCallback(async()=>{try{await o()}catch(e){}},[o]);return M.jsxs("div",{className:"notification-dropdown",children:[M.jsxs("div",{className:"dropdown-header",children:[M.jsxs("div",{className:"header-content",children:[M.jsx("h3",{className:"dropdown-title",children:"Notifications"}),t>0&&M.jsxs("span",{className:"unread-count",children:[t," new"]})]}),M.jsxs("div",{className:"header-actions",children:[t>0&&M.jsx(v.button,{className:"mark-all-read-btn",onClick:d,whileHover:{scale:1.05},whileTap:{scale:.95},title:"Mark all as read","aria-label":"Mark all notifications as read",children:M.jsx(rt,{size:16})}),M.jsx(u,{to:"/settings",className:"settings-btn",title:"Notification settings",onClick:i,children:M.jsx(Xt,{size:16})})]})]}),M.jsx("div",{className:"dropdown-content",children:n?M.jsxs("div",{className:"dropdown-loading",children:[M.jsx("div",{className:"loading-spinner"}),M.jsx("span",{children:"Loading notifications..."})]}):l.length>0?M.jsxs(M.Fragment,{children:[M.jsx("div",{className:"notification-list",children:l.map((e,t)=>M.jsx(v.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.05*t},children:M.jsx(yd,{notification:e,onClick:()=>c(e),onDelete:t=>h(e._id||e.id,t),compact:!0})},e._id||e.id))}),M.jsx("div",{className:"dropdown-footer",children:M.jsxs(u,{to:"/notifications",className:"view-all-btn",onClick:i,children:["View all notifications",M.jsx(ft,{size:14})]})})]}):M.jsxs("div",{className:"empty-state",children:[M.jsx("div",{className:"empty-icon",children:M.jsx(it,{size:32})}),M.jsx("h4",{children:"All caught up!"}),M.jsx("p",{children:"You have no new notifications"})]})})]})},xd=({className:e="",position:t="bottom-right"})=>{const[n,i]=s.useState(!1),r=s.useRef(null),a=s.useRef(null),{unreadCount:o,notifications:l,loading:c,markAllAsRead:u,connectionStatus:h}=or();s.useEffect(()=>{const e=e=>{r.current&&!r.current.contains(e.target)&&a.current&&!a.current.contains(e.target)&&i(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const[d,m]=s.useState(!1);s.useEffect(()=>{if(o>0&&!d){m(!0);const e=setTimeout(()=>m(!1),1200);return()=>clearTimeout(e)}},[o,d]);const p=s.useCallback(()=>{i(e=>!e)},[]),f=s.useCallback(async()=>{try{await u()}catch(e){}},[u]);return M.jsxs("div",{className:`notification-bell-container ${e}`,ref:r,children:[M.jsxs(v.button,{className:`notification-bell ${d?"animate":""} ${n?"active":""}`,onClick:p,whileHover:{scale:1.05},whileTap:{scale:.95},"aria-label":"Notifications "+(o>0?`(${o} unread)`:""),children:[M.jsx(v.div,{className:"bell-icon",animate:d?{rotate:[0,-10,10,-10,10,0],transition:{duration:.6,ease:"easeInOut",repeat:1,repeatDelay:.6}}:{},children:M.jsx(Ze,{size:20})}),M.jsx(y,{children:o>0&&M.jsx(v.div,{className:"notification-badge",initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},transition:{type:"spring",stiffness:500,damping:30},children:o>99?"99+":o})}),M.jsx("div",{className:`connection-indicator ${(()=>{switch(h){case"connected":return"connected";case"connecting":return"connecting";case"disconnected":return"disconnected";default:return"unknown"}})()}`})]}),M.jsx(y,{children:n&&M.jsx(v.div,{ref:a,className:`notification-dropdown-wrapper ${t}`,initial:{opacity:0,scale:.95,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-10},transition:{duration:.2,ease:"easeOut"},children:M.jsx(vd,{notifications:l,unreadCount:o,loading:c,onMarkAllAsRead:f,onClose:()=>i(!1)})})})]})},bd=({icon:e,title:t,subtitle:n,actions:s=[],borderColor:i="primary",showNotifications:r=!0,className:a=""})=>M.jsx(v.div,{className:`page-header ${(e=>{switch(e){case"primary":default:return"border-primary";case"success":return"border-success";case"warning":return"border-warning";case"info":return"border-info";case"purple":return"border-purple";case"orange":return"border-orange"}})(i)} ${a}`,initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},children:M.jsxs("div",{className:"header-content",children:[M.jsx("div",{className:"header-left",children:M.jsxs("div",{className:"header-title-section",children:[e&&M.jsx("div",{className:"header-icon",children:M.jsx(e,{size:24})}),M.jsxs("div",{className:"header-text",children:[M.jsx("h1",{className:"header-title",children:t}),n&&M.jsx("p",{className:"header-subtitle",children:n})]})]})}),M.jsx("div",{className:"header-right",children:M.jsxs("div",{className:"header-actions",children:[s.map((e,t)=>M.jsxs(v.button,{className:`header-action-btn ${e.variant||"secondary"}`,onClick:e.onClick,disabled:e.disabled,whileHover:{scale:1.02},whileTap:{scale:.98},title:e.tooltip,children:[e.icon&&M.jsx(e.icon,{size:16}),M.jsx("span",{children:e.label})]},t)),r&&M.jsx("div",{className:"header-notifications",children:M.jsx(xd,{position:"bottom-right"})})]})})]})}),wd=(e,t=!1)=>{if(null==e||isNaN(e))return"₹0.00";const n=Number(e);if(t){if(n>=1e7)return`₹${(n/1e7).toFixed(2)}Cr`;if(n>=1e5)return`₹${(n/1e5).toFixed(2)}L`;if(n>=1e3)return`₹${(n/1e3).toFixed(2)}K`}return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2,maximumFractionDigits:2}).format(n)},jd=(e,t=!1)=>{if(null==e||isNaN(e))return"0";const n=Number(e);if(t){if(n>=1e7)return`${(n/1e7).toFixed(2)}Cr`;if(n>=1e5)return`${(n/1e5).toFixed(2)}L`;if(n>=1e3)return`${(n/1e3).toFixed(2)}K`}return new Intl.NumberFormat("en-IN",{minimumFractionDigits:0,maximumFractionDigits:2}).format(n)},kd=(e,t="short")=>{if(!e)return"";const n=new Date(e);if(isNaN(n.getTime()))return"";return new Intl.DateTimeFormat("en-IN",{short:{day:"2-digit",month:"2-digit",year:"numeric"},long:{day:"numeric",month:"long",year:"numeric"},time:{hour:"2-digit",minute:"2-digit",hour12:!0},datetime:{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}}[t]).format(n)},Nd=()=>{const{user:e}=yn(),[t,n]=s.useState([]),[i,r]=s.useState(!1),[a,o]=s.useState(null),l=s.useCallback(async()=>{if(null==e?void 0:e.id)try{r(!0),o(null);const t=`watchlists_${e.id}`,s=localStorage.getItem(t);if(s){const e=JSON.parse(s);n(e)}else{const e={_id:"default",name:"My Watchlist",stocks:[],isDefault:!0,createdAt:(new Date).toISOString()};n([e]),localStorage.setItem(t,JSON.stringify([e]))}}catch(t){o(t.message);const e={_id:"default",name:"My Watchlist",stocks:[],isDefault:!0,createdAt:(new Date).toISOString()};n([e])}finally{r(!1)}},[null==e?void 0:e.id]);s.useEffect(()=>{l()},[l]);const c=s.useCallback(e=>t.some(t=>t.stocks.some(t=>t.symbol===e||t.stockSymbol===e)),[t]),u=s.useCallback(e=>t.find(t=>t.stocks.some(t=>t.symbol===e||t.stockSymbol===e)),[t]),h=s.useCallback(async(s,i=null)=>{var a,o;if(!(null==e?void 0:e.id))return We.error("Please login to add stocks to watchlist"),{success:!1,message:"User not authenticated"};try{r(!0);const l=i||(null==(a=t.find(e=>e.isDefault))?void 0:a._id)||(null==(o=t[0])?void 0:o._id);if(!l){const i={_id:"default",name:"My Watchlist",stocks:[],isDefault:!0,createdAt:(new Date).toISOString()},r=[...t,i];n(r);const a=`watchlists_${e.id}`;return localStorage.setItem(a,JSON.stringify(r)),h(s,i._id)}const c=t.find(e=>e._id===l);if(null==c?void 0:c.stocks.some(e=>e.symbol===(s.symbol||s.stockSymbol)))return We.info(`${s.symbol||s.stockSymbol} is already in your watchlist`),{success:!1,message:"Stock already in watchlist"};const u={symbol:s.symbol||s.stockSymbol,name:s.name||s.companyName||`${s.symbol} Corporation`,price:s.price||s.currentPrice||0,change:s.change||s.priceChange||0,changePercent:s.changePercent||s.changePercentage||0,volume:s.volume||0,marketCap:s.marketCap||0,sector:s.sector||"Unknown",addedAt:(new Date).toISOString()},d=t.map(e=>e._id===l?{...e,stocks:[...e.stocks,u]}:e);n(d);const m=`watchlists_${e.id}`;return localStorage.setItem(m,JSON.stringify(d)),We.success(`${u.symbol} added to watchlist!`),{success:!0,data:d.find(e=>e._id===l)}}catch(l){return We.error(l.message||"Failed to add stock to watchlist"),{success:!1,message:l.message}}finally{r(!1)}},[null==e?void 0:e.id,t]),d=s.useCallback(async(s,i=null)=>{if(!(null==e?void 0:e.id))return We.error("Please login to manage watchlist"),{success:!1,message:"User not authenticated"};try{r(!0);const a=i?t.find(e=>e._id===i):u(s);if(!a)return We.error("Stock not found in any watchlist"),{success:!1,message:"Stock not found in watchlist"};const o=t.map(e=>e._id===a._id?{...e,stocks:e.stocks.filter(e=>e.symbol!==s&&e.stockSymbol!==s)}:e);n(o);const l=`watchlists_${e.id}`;return localStorage.setItem(l,JSON.stringify(o)),We.success(`${s} removed from watchlist!`),{success:!0}}catch(a){return We.error(a.message||"Failed to remove stock from watchlist"),{success:!1,message:a.message}}finally{r(!1)}},[null==e?void 0:e.id,t,u]),m=s.useCallback(async e=>{const t=e.symbol||e.stockSymbol;return c(t)?await d(t):await h(e)},[c,h,d]),p=s.useCallback(async(s,i="")=>{if(!(null==e?void 0:e.id))return We.error("Please login to create watchlist"),{success:!1,message:"User not authenticated"};try{r(!0);const a={_id:`watchlist_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,name:s,description:i,stocks:[],isDefault:0===t.length,createdAt:(new Date).toISOString()},o=[...t,a];n(o);const l=`watchlists_${e.id}`;return localStorage.setItem(l,JSON.stringify(o)),We.success(`Watchlist "${s}" created successfully!`),{success:!0,data:a}}catch(a){return We.error(a.message||"Failed to create watchlist"),{success:!1,message:a.message}}finally{r(!1)}},[null==e?void 0:e.id,t]),f=s.useCallback(async s=>{if(!(null==e?void 0:e.id))return We.error("Please login to delete watchlist"),{success:!1,message:"User not authenticated"};try{r(!0);const i=t.filter(e=>e._id!==s);n(i);const a=`watchlists_${e.id}`;return localStorage.setItem(a,JSON.stringify(i)),We.success("Watchlist deleted successfully!"),{success:!0}}catch(i){return We.error(i.message||"Failed to delete watchlist"),{success:!1,message:i.message}}finally{r(!1)}},[null==e?void 0:e.id,t]),g=s.useCallback(()=>t.reduce((e,t)=>e+t.stocks.length,0),[t]),y=s.useCallback(()=>t.find(e=>e.isDefault)||t[0]||null,[t]),v=s.useCallback(async()=>{await l()},[l]);return{watchlists:t,loading:i,error:a,isInWatchlist:c,getWatchlistWithStock:u,addToWatchlist:h,removeFromWatchlist:d,toggleWatchlist:m,createWatchlist:p,deleteWatchlist:f,refreshWatchlists:v,getTotalStockCount:g,getDefaultWatchlist:y}},Sd=({stockData:e,size:t="medium",variant:n="icon",showText:i=!1,className:r="",onSuccess:a,onError:o})=>{const{isInWatchlist:l,toggleWatchlist:c,addToWatchlist:u,removeFromWatchlist:h,watchlists:d,loading:m}=Nd(),[p,f]=s.useState(!1),[g,x]=s.useState(!1),[b,w]=s.useState(!1);if(!e)return null;const j=e.symbol||e.stockSymbol;if(!j)return null;const k=l(j),N=async t=>{if(null==t||t.stopPropagation(),!g&&!m){x(!0);try{const t={symbol:j,name:e.name||e.companyName||`${j} Corporation`,price:e.price||e.currentPrice||0,change:e.change||e.priceChange||0,changePercent:e.changePercent||e.changePercentage||0,volume:e.volume||0,marketCap:e.marketCap||0,sector:e.sector||"Unknown"},n=await c(t);n.success?(a&&a(n,k?"removed":"added"),navigator.vibrate&&navigator.vibrate(50),w(!0),setTimeout(()=>w(!1),600)):o&&o(n.message||"Failed to update watchlist")}catch(n){o&&o("Failed to update watchlist")}finally{x(!1)}}},S=async()=>{if(!g&&!m){x(!0),f(!1);try{const e=await h(j);e.success&&a?a(e,"removed"):!e.success&&o&&o(e.message)}catch(e){o&&o("Failed to remove from watchlist")}finally{x(!1)}}};return"simple"===n?M.jsxs("button",{className:`watchlist-btn watchlist-btn-${t} ${k?"active":""} ${g?"processing":""} ${b?"success":""} ${r}`,onClick:N,disabled:g||m,title:k?"Remove from watchlist":"Add to watchlist",children:[g?M.jsx(Pt,{className:"animate-spin"}):k?M.jsx(rt,{}):M.jsx(nn,{}),i&&M.jsx("span",{className:"btn-text",children:k?"In Watchlist":"Add to Watchlist"})]}):"dropdown"===n?M.jsxs("div",{className:`watchlist-dropdown-container ${r}`,children:[M.jsxs("button",{className:`watchlist-btn watchlist-btn-${t} ${k?"active":""}`,onClick:e=>{e.stopPropagation(),f(!p)},disabled:g||m,title:"Manage watchlist",children:[g?M.jsx(Pt,{className:"animate-spin"}):M.jsx(Ct,{}),i&&M.jsx("span",{className:"btn-text",children:"Watchlist"})]}),M.jsx(y,{children:p&&M.jsxs(v.div,{className:"watchlist-dropdown",initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.2},children:[M.jsxs("div",{className:"dropdown-header",children:[M.jsx("span",{children:"Add to Watchlist"}),M.jsx("button",{className:"close-btn",onClick:()=>f(!1),children:M.jsx(pn,{})})]}),M.jsxs("div",{className:"dropdown-content",children:[k&&M.jsxs("button",{className:"dropdown-item remove-item",onClick:S,disabled:g,children:[M.jsx(pn,{}),M.jsx("span",{children:"Remove from Watchlist"})]}),d.map(t=>{const n=t.stocks.some(e=>e.symbol===j||e.stockSymbol===j);return M.jsxs("button",{className:"dropdown-item "+(n?"has-stock":""),onClick:()=>(async t=>{if(!g&&!m){x(!0),f(!1);try{const n={symbol:j,name:e.name||e.companyName||`${j} Corporation`,price:e.price||e.currentPrice||0,change:e.change||e.priceChange||0,changePercent:e.changePercent||e.changePercentage||0,volume:e.volume||0,marketCap:e.marketCap||0,sector:e.sector||"Unknown"},s=await u(n,t);s.success?a&&a(s,"added"):o&&o(s.message||"Failed to add to watchlist")}catch(n){o&&o("Failed to add to watchlist")}finally{x(!1)}}})(t._id),disabled:g||n,children:[n?M.jsx(rt,{}):M.jsx(qt,{}),M.jsx("span",{children:t.name}),t.isDefault&&M.jsx("span",{className:"default-badge",children:"Default"})]},t._id)}),0===d.length&&M.jsx("div",{className:"dropdown-empty",children:M.jsx("span",{children:"No watchlists found"})})]})]})}),p&&M.jsx("div",{className:"watchlist-dropdown-backdrop",onClick:()=>f(!1)})]}):M.jsxs("button",{className:`watchlist-btn watchlist-btn-${t} ${k?"active":""} ${g?"processing":""} ${b?"success":""} ${r}`,onClick:N,disabled:g||m,title:k?"Remove from watchlist":"Add to watchlist",children:[M.jsx(v.div,{initial:{scale:.5,opacity:0,rotate:-180},animate:{scale:1,opacity:1,rotate:0,y:b?[-2,0]:0},transition:{duration:.4,type:"spring",stiffness:300,damping:20},children:g?M.jsx(v.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:M.jsx(Pt,{})}):M.jsx(v.div,{animate:{scale:b?[1,1.3,1]:1,rotate:k?[0,15,-15,0]:0},transition:{duration:.3},children:M.jsx(nn,{className:k?"filled":""})})},k?"filled":"empty"),i&&M.jsx("span",{className:"btn-text",children:k?"In Watchlist":"Add to Watchlist"})]})},Cd=({stockData:e,isOpen:t,onClose:n,showQuantityControls:i=!0,defaultQuantity:r=1,onSuccess:a,compact:o=!1})=>{var c;const u=l(),{portfolioData:h,buyStock:d,isLoading:m}=ra(),[p,f]=s.useState(r),[g,y]=s.useState(!1),[x,b]=s.useState(0),[w,j]=s.useState(!1);s.useEffect(()=>{t&&(f(r),b(0),j(!1))},[t,r]);const k=(null==e?void 0:e.price)||0,N=p*k,S=h.availableCash>=N,C=e=>{if(!S||w)return;e.preventDefault(),e.stopPropagation();const t=e.currentTarget.closest(".slide-to-buy");if(!t)return;const n=t.getBoundingClientRect(),s=n.width-52-8;let i=!0;const r=e=>{if(!i)return;e.preventDefault();const t=(e.touches?e.touches[0].clientX:e.clientX)-n.left-26,r=Math.min(Math.max(t/s*100,0),100);b(r)},a=async()=>{i=!1,x>80?(b(100),await P()):b(0),document.removeEventListener("mousemove",r,{passive:!1}),document.removeEventListener("mouseup",a),document.removeEventListener("touchmove",r,{passive:!1}),document.removeEventListener("touchend",a)};document.addEventListener("mousemove",r,{passive:!1}),document.addEventListener("mouseup",a),document.addEventListener("touchmove",r,{passive:!1}),document.addEventListener("touchend",a)},P=async()=>{if(e&&p&&!w){j(!0);try{const t=await d(e.symbol,p,e.price,e);if(t&&t.success)We.success(`Successfully bought ${p} shares of ${e.symbol}!`),b(100),a&&a(t),setTimeout(()=>{n(),b(0)},1500);else{const e=(null==t?void 0:t.error)||(null==t?void 0:t.message)||"Failed to buy stock";We.error(e),b(0)}}catch(t){We.error(t.message||"Failed to buy stock"),b(0)}finally{j(!1)}}};return t&&e?M.jsx(v.div,{className:"slide-to-buy-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:n,children:M.jsxs(v.div,{className:"slide-to-buy-modal "+(o?"compact":""),initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:e=>e.stopPropagation(),children:[M.jsxs("div",{className:"modal-header",children:[M.jsxs("div",{className:"stock-info",children:[M.jsx("h3",{children:e.symbol}),M.jsx("p",{children:e.name})]}),M.jsxs("div",{className:"header-actions",children:[M.jsx(Sd,{stockData:e,size:"medium",variant:"simple",showText:!1}),M.jsx("button",{onClick:n,className:"close-btn",children:M.jsx(pn,{})})]})]}),M.jsx("div",{className:"stock-price-section",children:M.jsxs("div",{className:"current-price",children:[M.jsx("span",{className:"price-value",children:wd(e.price)}),M.jsxs("div",{className:"price-change "+(e.change>=0?"positive":"negative"),children:[e.change>=0?"+":"",wd(e.change),"(",(null==(c=e.changePercent)?void 0:c.toFixed(2))||"0.00","%)"]})]})}),i&&M.jsxs("div",{className:"quantity-section",children:[M.jsx("label",{children:"Quantity"}),M.jsxs("div",{className:"quantity-controls",children:[M.jsx("button",{onClick:()=>f(Math.max(1,p-1)),className:"quantity-btn",disabled:w,children:M.jsx(Rt,{})}),M.jsx("input",{type:"number",value:p,onChange:e=>f(Math.max(1,parseInt(e.target.value)||1)),className:"quantity-input",min:"1",disabled:w}),M.jsx("button",{onClick:()=>f(p+1),className:"quantity-btn",disabled:w,children:M.jsx(qt,{})})]})]}),M.jsxs("div",{className:"order-summary",children:[M.jsxs("div",{className:"summary-row",children:[M.jsx("span",{children:"Price per share"}),M.jsx("span",{children:wd(k)})]}),M.jsxs("div",{className:"summary-row",children:[M.jsx("span",{children:"Quantity"}),M.jsxs("span",{children:[p," shares"]})]}),M.jsxs("div",{className:"summary-row total",children:[M.jsx("span",{children:"Total Cost"}),M.jsx("span",{children:wd(N)})]}),M.jsxs("div",{className:"summary-row",children:[M.jsx("span",{children:"Available Cash"}),M.jsx("span",{className:S?"positive":"negative",children:wd(h.availableCash)})]})]}),!S&&M.jsxs("div",{className:"insufficient-funds-warning",children:[M.jsx(Ve,{}),M.jsx("span",{children:"Insufficient funds to complete this purchase"})]}),M.jsxs("div",{className:"action-buttons",children:[M.jsxs("button",{onClick:async()=>{S&&!w&&await P()},disabled:!S||w,className:"quick-buy-btn "+(S?"":"disabled"),children:[M.jsx(en,{}),w?"Processing...":"Quick Buy"]}),M.jsx("div",{className:"slide-to-buy-container",children:M.jsxs("div",{className:`slide-to-buy ${S?"":"disabled"} ${w?"processing":""}`,children:[M.jsx("div",{className:"slide-track",style:{background:`linear-gradient(to right, #10B981 ${x}%, #E5E7EB ${x}%)`},children:M.jsx(v.div,{className:"slide-button",style:{left:`${Math.min(x,85)}%`},onMouseDown:S?C:void 0,onTouchStart:S?C:void 0,whileHover:S?{scale:1.05}:{},whileTap:S?{scale:.95}:{},animate:{left:`${Math.min(x,85)}%`},transition:{type:0===x?"spring":"tween",stiffness:300,damping:30,duration:0===x?.5:.1},children:w?M.jsx("div",{className:"loading-spinner small"}):x>80?M.jsx(it,{}):M.jsx(Ge,{})})}),M.jsx("span",{className:"slide-text",children:w?"Processing...":x>80?"Release to Buy!":"Slide to Buy"})]})})]}),M.jsx("div",{className:"additional-actions",children:M.jsx("button",{onClick:()=>{n(),u(`/stock/${e.symbol}`)},className:"view-details-btn",children:"View Full Details"})})]})}):null},Pd=()=>{const[e,t]=s.useState(!1),[n,i]=s.useState(null),[r,a]=s.useState(1),o=s.useCallback((e,n=1)=>{if(!e)return;const s={symbol:e.symbol||e.stockSymbol,name:e.name||e.companyName||`${e.symbol} Corporation`,price:e.price||e.currentPrice||0,change:e.change||e.priceChange||0,changePercent:e.changePercent||e.changePercentage||0,volume:e.volume||0,marketCap:e.marketCap||0,sector:e.sector||"Unknown",...e};i(s),a(n),t(!0)},[]),l=s.useCallback(()=>{t(!1),setTimeout(()=>{i(null),a(1)},300)},[]),c=s.useCallback(e=>{o(e,1)},[o]);return{isOpen:e,currentStock:n,defaultQuantity:r,openSlideToBuy:o,closeSlideToBuy:l,quickBuy:c}},Ed=s.memo(({user:e,theme:t,onLogin:n})=>{var i;l();const[r,a]=s.useState(!1),{portfolioData:o,loading:c,updatePortfolioValues:u,refreshPortfolio:h}=ra(),{isOpen:d,currentStock:m,defaultQuantity:p,closeSlideToBuy:f}=Pd();s.useEffect(()=>{const e=new URLSearchParams(window.location.search),t=e.get("token"),s=e.get("user");if(t&&s&&n)try{const e=JSON.parse(decodeURIComponent(s));n(e,t),We.success(`Welcome ${e.fullName}!`),window.history.replaceState({},document.title,window.location.pathname)}catch(i){We.error("Authentication failed. Please try again.")}},[n]),s.useEffect(()=>{1e4===o.availableCash&&1e4===o.totalValue&&setTimeout(()=>{h()},1e3)},[o.availableCash,o.totalValue,h]);const g=[{title:"Total Value",value:o.totalValue,changePercent:o.totalGainLossPercentage,icon:ht,color:"primary"},{title:"Available Cash",value:o.availableCash,changePercent:0,icon:ht,color:"info"},{title:"Total Invested",value:o.totalInvested,changePercent:o.totalGainLossPercentage,icon:cn,color:o.totalGainLoss>=0?"success":"danger"},{title:"Holdings",value:(null==(i=o.holdings)?void 0:i.length)||0,changePercent:0,icon:en,color:"success"}],y=async()=>{a(!0);try{sa.getPortfolioSummary();h(),await u(),await new Promise(e=>setTimeout(e,1e3))}catch(e){}finally{a(!1)}};return M.jsxs("div",{className:"dashboard-page",children:[M.jsx(bd,{icon:cn,title:"TradeBro Dashboard",subtitle:"Indian Stock Market Overview - NSE & BSE Trading Platform",borderColor:"primary",actions:[{label:"Refresh",icon:Yt,onClick:y,variant:"secondary",disabled:r},{label:"Claim Daily ₹100",icon:xt,onClick:async()=>{try{const e=await sa.claimDailyReward();e.success?We.success(`Daily reward claimed! +₹${e.amount}`):e.alreadyClaimed&&We.info("Daily reward already claimed today!"),setTimeout(()=>{h(),y()},1e3)}catch(e){We.error("Failed to claim daily reward")}},variant:"success",disabled:!1}]}),M.jsx(gd,{}),M.jsxs("div",{className:"dashboard-container",children:[M.jsx(v.div,{className:"market-indices",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},children:[{name:"NIFTY 50",value:19674.25,change:145.3,changePercent:.74},{name:"SENSEX",value:65953.48,change:501.92,changePercent:.77},{name:"NIFTY BANK",value:44821.15,change:287.65,changePercent:.65},{name:"NIFTY IT",value:29847.3,change:-89.45,changePercent:-.3}].map((e,t)=>{const n=e.change>=0;return M.jsxs(v.div,{className:"index-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.1*t},children:[M.jsxs("div",{className:"index-header",children:[M.jsx("h3",{className:"index-name",children:e.name}),M.jsxs("div",{className:"index-change "+(n?"positive":"negative"),children:[n?M.jsx(Qe,{size:12}):M.jsx(He,{size:12}),Math.abs(e.changePercent),"%"]})]}),M.jsx("div",{className:"index-value",children:M.jsx(md,{end:e.value,duration:2,separator:",",decimals:2})}),M.jsxs("div",{className:"index-change-value "+(n?"positive":"negative"),children:[n?"+":"",e.change.toFixed(2)]})]},e.name)})}),M.jsx(v.div,{className:"stats-grid",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},children:g.map((e,t)=>{const n=e.icon,s=e.changePercent>=0;return M.jsxs(v.div,{className:`stat-card stat-${e.color}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.1*(t+4)},children:[M.jsxs("div",{className:"stat-header",children:[M.jsx("div",{className:"stat-icon",children:M.jsx(n,{})}),0!==e.changePercent&&M.jsxs("div",{className:"stat-change "+(s?"positive":"negative"),children:[s?M.jsx(Qe,{size:12}):M.jsx(He,{size:12}),Math.abs(e.changePercent).toFixed(1),"%"]})]}),M.jsxs("div",{className:"stat-content",children:[M.jsx("h3",{className:"stat-value",children:"number"==typeof e.value&&e.value>1e3?M.jsx(md,{end:e.value,duration:2,separator:",",prefix:e.title.includes("Value")||e.title.includes("Cash")||e.title.includes("Invested")?"₹":""}):e.value}),M.jsx("p",{className:"stat-title",children:e.title})]})]},e.title)})})]}),M.jsx(Cd,{stockData:m,isOpen:d,onClose:f,defaultQuantity:p,onSuccess:()=>{u()}})]})});Ed.displayName="Dashboard";const Td=({isOpen:e,onClose:t,onConfirm:n,orderData:i,loading:r=!1})=>{const[a,o]=s.useState(!1),[l,c]=s.useState(!1),u=s.useRef(null),h=x(0),d=b(h,[0,200],[0,1]),m=b(d,[0,.3,.7,1],"BUY"===(null==i?void 0:i.action)?["rgba(229, 231, 235, 0.3)","rgba(251, 191, 36, 0.4)","rgba(16, 185, 129, 0.6)","rgba(16, 185, 129, 0.9)"]:["rgba(229, 231, 235, 0.3)","rgba(251, 191, 36, 0.4)","rgba(239, 68, 68, 0.6)","rgba(239, 68, 68, 0.9)"]),p=b(d,[0,1],["0%","100%"]),[f,g]=s.useState(0),[w,j]=s.useState(0);s.useEffect(()=>d.on("change",e=>{const t=Math.round(100*e);g(t);const n=[25,50,75].find(e=>t>=e&&w<e);n&&l&&(j(n),navigator.vibrate&&navigator.vibrate(30))}),[d,w,l]),s.useEffect(()=>{e&&(o(!1),c(!1),j(0),g(0),h.set(0))},[e,h]);const k=s.useCallback(()=>{c(!0),j(0),navigator.vibrate&&navigator.vibrate(50)},[]),N=s.useCallback(()=>{const e=h.get();c(!1),e>=180?(o(!0),navigator.vibrate&&navigator.vibrate([100,50,100]),setTimeout(()=>{n(i)},300)):h.set(0)},[h,n,i]),S=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2,maximumFractionDigits:2}).format(e),C=i?i.quantity*i.price:0;return i?M.jsx(y,{children:e&&M.jsxs(M.Fragment,{children:[M.jsx(v.div,{className:"drag-confirm-backdrop",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:t}),M.jsxs(v.div,{className:"drag-confirm-modal "+(a?"confirmed":""),initial:{opacity:0,scale:.9,y:-20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:-20},transition:{type:"spring",damping:25,stiffness:300},children:[M.jsxs("div",{className:"modal-header",children:[M.jsxs("div",{className:"header-content",children:[M.jsx("div",{className:`action-icon ${i.action.toLowerCase()}`,children:"BUY"===i.action?M.jsx(cn,{}):M.jsx(ln,{})}),M.jsxs("div",{className:"header-text",children:[M.jsxs("h2",{className:"modal-title",children:["Confirm ",i.action," Order"]}),M.jsx("p",{className:"modal-subtitle",children:"Review your order details carefully"})]})]}),M.jsx("button",{className:"close-button",onClick:t,children:M.jsx(pn,{})})]}),M.jsxs("div",{className:"order-details",children:[M.jsxs("div",{className:"stock-info",children:[M.jsx("div",{className:"stock-symbol",children:i.symbol}),M.jsx("div",{className:"stock-name",children:i.name||i.symbol})]}),M.jsxs("div",{className:"order-summary",children:[M.jsxs("div",{className:"summary-row",children:[M.jsx("span",{className:"label",children:"Action:"}),M.jsx("span",{className:`value ${i.action.toLowerCase()}`,children:i.action})]}),M.jsxs("div",{className:"summary-row",children:[M.jsx("span",{className:"label",children:"Quantity:"}),M.jsxs("span",{className:"value",children:[i.quantity," shares"]})]}),M.jsxs("div",{className:"summary-row",children:[M.jsx("span",{className:"label",children:"Price per share:"}),M.jsx("span",{className:"value",children:S(i.price)})]}),M.jsxs("div",{className:"summary-row total",children:[M.jsx("span",{className:"label",children:"Total Value:"}),M.jsx("span",{className:"value",children:S(C)})]})]}),M.jsxs("div",{className:"risk-warning",children:[M.jsx(Zt,{className:"warning-icon"}),M.jsxs("div",{className:"warning-text",children:[M.jsx("strong",{children:"Important:"})," This action cannot be undone. Please review all details before confirming."]})]})]}),M.jsxs("div",{className:"drag-confirm-container",children:[M.jsx("div",{className:"drag-instruction",children:a?M.jsx("span",{className:"confirmed-text",children:"✓ Order Confirmed!"}):M.jsxs("span",{children:["Drag to confirm ",i.action.toLowerCase()," order"]})}),M.jsxs("div",{className:"drag-track",ref:u,children:[M.jsx(v.div,{className:"drag-track-fill",style:{backgroundColor:m,width:a?"100%":p}}),M.jsx(v.div,{className:`drag-handle ${l?"dragging":""} ${a?"confirmed":""}`,drag:"x",dragConstraints:u,dragElastic:.1,dragMomentum:!1,style:{x:h},onDragStart:k,onDragEnd:N,whileDrag:{scale:1.1},animate:{x:a?200:0},transition:{type:"spring",damping:20,stiffness:300},children:a?M.jsx(v.div,{initial:{scale:0},animate:{scale:1},className:"check-icon",children:"✓"}):M.jsx(Ge,{})}),M.jsx("div",{className:"drag-text",children:a?"Processing...":l&&f>5?`${f}%`:`Confirm ${i.action}`})]})]}),r&&M.jsxs("div",{className:"loading-overlay",children:[M.jsx("div",{className:"loading-spinner"}),M.jsx("p",{children:"Processing your order..."})]})]})]})}):null},Ld=({user:e,theme:t})=>{var n;const i=l(),r=c(),[a,o]=s.useState(!1),[u,h]=s.useState(null),{isOpen:d,currentStock:m,defaultQuantity:p,openSlideToBuy:f,closeSlideToBuy:g}=Pd(),[y,x]=s.useState("all"),[b,w]=s.useState("value"),{portfolioData:j,loading:k,updatePortfolioValues:N,refreshPortfolio:S,sellStock:C}=ra();if(s.useEffect(()=>{var e,t;if((null==(e=r.state)?void 0:e.showPurchaseSuccess)&&(null==(t=r.state)?void 0:t.purchasedStock)){const e=r.state.purchasedStock;We.success(`🎉 Successfully purchased ${e.quantity} shares of ${e.symbol} for ${_(e.totalCost)}!`,{duration:5e3}),h(e.symbol),setTimeout(()=>{h(null)},5e3),i(r.pathname,{replace:!0})}},[r.state,i,r.pathname]),k||!j)return M.jsx("div",{className:"portfolio-page",children:M.jsx("div",{className:"portfolio-container",children:M.jsxs("div",{className:"loading-container",children:[M.jsx("div",{className:"loading-spinner"}),M.jsx("p",{children:"Loading portfolio..."})]})})});const P=[{title:"Total Value",value:j.totalValue||0,changePercent:j.totalGainLossPercentage||0,changeAmount:j.totalGainLoss||0,icon:ht,color:"primary"},{title:"Available Cash",value:j.availableCash||0,changePercent:0,changeAmount:0,icon:ht,color:"info"},{title:"Total Invested",value:j.totalInvested||0,changePercent:j.totalGainLossPercentage||0,changeAmount:j.totalGainLoss||0,icon:Ke,color:(j.totalGainLoss||0)>=0?"success":"danger"},{title:"Holdings",value:(null==(n=j.holdings)?void 0:n.length)||0,changePercent:0,changeAmount:0,icon:$t,color:"info"}],E=j.holdings||[],T=E.filter(e=>"gainers"===y?(e.totalGain||0)>0:"losers"!==y||(e.totalGain||0)<0),L=[...T].sort((e,t)=>(t.value||0)-(e.value||0)),I=async()=>{o(!0),await new Promise(e=>setTimeout(e,1500)),o(!1)},_=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(e);return M.jsxs("div",{className:"portfolio-page",children:[M.jsx(bd,{icon:$t,title:"Portfolio",subtitle:"Track your investments and portfolio performance",borderColor:"success",actions:[{label:"Refresh",icon:Yt,onClick:I,variant:"secondary",disabled:a}]}),M.jsxs("div",{className:"portfolio-container",children:[M.jsx(v.div,{className:"portfolio-stats",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},children:P.map((e,t)=>{const n=e.icon,s=e.changePercent>=0;return M.jsxs(v.div,{className:`stat-card stat-${e.color}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.1*t},children:[M.jsxs("div",{className:"stat-header",children:[M.jsx("div",{className:"stat-icon",children:M.jsx(n,{})}),M.jsxs("div",{className:"stat-change "+(s?"positive":"negative"),children:[s?M.jsx(Qe,{size:14}):M.jsx(He,{size:14}),Math.abs(e.changePercent),"%"]})]}),M.jsxs("div",{className:"stat-content",children:[M.jsx("h3",{className:"stat-value",children:"number"==typeof e.value&&e.value>1e3?M.jsx(md,{end:e.value,duration:2,separator:",",prefix:e.title.includes("Value")||e.title.includes("P&L")?"₹":""}):e.value}),M.jsx("p",{className:"stat-title",children:e.title}),0!==e.changeAmount&&M.jsxs("p",{className:"stat-change-amount "+(s?"positive":"negative"),children:[s?"+":"",_(e.changeAmount)]})]})]},e.title)})}),M.jsx("div",{className:"portfolio-grid",children:M.jsxs(v.div,{className:"portfolio-card holdings-table",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},children:[M.jsxs("div",{className:"card-header",children:[M.jsxs("div",{className:"header-left",children:[M.jsxs("h3",{className:"card-title",children:[M.jsx(Ke,{className:"card-icon"}),"My Holdings",M.jsxs("span",{className:"holdings-count",children:["(",T.length," of ",E.length," stocks)"]})]}),M.jsxs("div",{className:"holdings-summary",children:[M.jsxs("span",{className:"total-invested",children:["Total Invested: ",_(j.totalInvested||0)]}),M.jsxs("span",{className:"current-value",children:["Current Value: ",_(j.totalValue||0)]})]})]}),M.jsxs("div",{className:"card-actions",children:[M.jsx("div",{className:"filter-group",children:M.jsxs("select",{className:"filter-select",value:y,onChange:e=>x(e.target.value),children:[M.jsx("option",{value:"all",children:"All Holdings"}),M.jsx("option",{value:"gainers",children:"Gainers Only"}),M.jsx("option",{value:"losers",children:"Losers Only"})]})}),M.jsx("button",{className:"btn-refresh",onClick:I,disabled:a,title:"Refresh Holdings",children:M.jsx(Yt,{className:a?"spinning":""})})]})]}),M.jsx("div",{className:"card-content",children:M.jsxs("div",{className:"holdings-table",children:[M.jsxs("div",{className:"table-header",children:[M.jsx("div",{className:"col-stock",children:"Stock"}),M.jsx("div",{className:"col-quantity",children:"Quantity"}),M.jsx("div",{className:"col-avg-price",children:"Avg Price"}),M.jsx("div",{className:"col-current-price",children:"Current Price"}),M.jsx("div",{className:"col-value",children:"Value"}),M.jsx("div",{className:"col-gains",children:"Total P&L"}),M.jsx("div",{className:"col-day-change",children:"Day Change"}),M.jsx("div",{className:"col-actions",children:"Actions"})]}),M.jsx("div",{className:"table-body",children:L.length>0?L.map((e,t)=>{return M.jsxs(v.div,{className:"table-row clickable "+(u===e.symbol?"highlighted-purchase":""),initial:{opacity:0,y:10},animate:{opacity:1,y:0,scale:u===e.symbol?1.02:1},style:{backgroundColor:u===e.symbol?"var(--success-bg, rgba(16, 185, 129, 0.1))":"transparent"},transition:{duration:.3,delay:.05*t},onClick:()=>i(`/stock/${e.symbol}`),children:[M.jsx("div",{className:"col-stock",children:M.jsxs("div",{className:"stock-info",children:[M.jsx("div",{className:"stock-symbol",children:e.symbol}),M.jsx("div",{className:"stock-name",children:e.name}),M.jsx("div",{className:"stock-sector",children:e.sector})]})}),M.jsx("div",{className:"col-quantity",children:(n=e.quantity||0,new Intl.NumberFormat("en-IN").format(n))}),M.jsx("div",{className:"col-avg-price",children:_(e.avgPrice||0)}),M.jsx("div",{className:"col-current-price",children:M.jsx(oa,{price:e.currentPrice||0,change:e.dayChange||0,changePercent:e.dayChangePercent||0,size:"small"})}),M.jsx("div",{className:"col-value",children:_(e.value||0)}),M.jsxs("div",{className:"col-gains",children:[M.jsxs("div",{className:"gain-amount "+((e.totalGain||0)>=0?"positive":"negative"),children:[(e.totalGain||0)>=0?"+":"",_(e.totalGain||0)]}),M.jsxs("div",{className:"gain-percent "+((e.totalGainPercent||0)>=0?"positive":"negative"),children:["(",(e.totalGainPercent||0)>=0?"+":"",(e.totalGainPercent||0).toFixed(2),"%)"]})]}),M.jsxs("div",{className:"col-day-change",children:[M.jsxs("div",{className:"day-change "+((e.dayChange||0)>=0?"positive":"negative"),children:[(e.dayChange||0)>=0?"+":"",(e.dayChange||0).toFixed(2)]}),M.jsxs("div",{className:"day-change-percent "+((e.dayChangePercent||0)>=0?"positive":"negative"),children:["(",(e.dayChangePercent||0)>=0?"+":"",(e.dayChangePercent||0).toFixed(2),"%)"]})]}),M.jsx("div",{className:"col-actions",children:M.jsxs("div",{className:"action-buttons",children:[M.jsx(Sd,{stockData:{symbol:e.symbol,name:e.name,price:e.currentPrice,change:e.dayChange,changePercent:e.dayChangePercent},size:"small",variant:"simple",showText:!1}),M.jsx("button",{className:"buy-btn-small",onClick:t=>{t.stopPropagation(),f({symbol:e.symbol,name:e.name,price:e.currentPrice,change:e.dayChange,changePercent:e.dayChangePercent})},title:"Buy More",children:"Buy"}),M.jsx("button",{className:"sell-btn-small",onClick:t=>{t.stopPropagation(),(async e=>{const t=prompt(`How many shares of ${e.symbol} do you want to sell? (Available: ${e.quantity})`);if(!t||isNaN(t)||t<=0)return;const n=parseInt(t);if(n>e.quantity)We.error(`You only have ${e.quantity} shares available`);else try{const t=await C(e.symbol,n,e.currentPrice||e.avgPrice);t&&t.success?We.success(`Successfully sold ${n} shares of ${e.symbol}!`):We.error((null==t?void 0:t.error)||"Failed to sell stock")}catch(s){We.error(s.message||"Failed to sell stock")}})(e)},title:"Sell Stock",children:"Sell"})]})})]},e.symbol);var n}):M.jsxs("div",{className:"empty-holdings",children:[M.jsx("div",{className:"empty-icon",children:M.jsx(Ke,{size:48})}),M.jsx("h3",{className:"empty-title",children:"gainers"===y?"No Gainers Found":"losers"===y?"No Losers Found":"No Holdings Yet"}),M.jsx("p",{className:"empty-description",children:"gainers"===y?"None of your holdings are currently in profit.":"losers"===y?"None of your holdings are currently in loss.":"Start building your portfolio by adding your first stock."}),"all"!==y&&M.jsx("button",{className:"btn-secondary",onClick:()=>x("all"),children:"View All Holdings"})]})})]})})]})}),M.jsx(Cd,{stockData:m,isOpen:d,onClose:g,defaultQuantity:p,onSuccess:()=>{}})]})]})},Md=({isOpen:e,position:t,stockData:n,onClose:i,onQuickBuy:r,onQuickSell:a,onViewChart:o,onAddToWatchlist:l,onViewDetails:c,hasHolding:u=!1,isInWatchlist:h=!1})=>{var d,m,p;const f=s.useRef(null),[g,x]=s.useState(t);if(s.useEffect(()=>{if(e&&f.current&&t){const e=f.current.getBoundingClientRect(),n={width:window.innerWidth,height:window.innerHeight};let{x:s,y:i}=t;s+e.width>n.width&&(s=n.width-e.width-10),s<10&&(s=10),i+e.height>n.height&&(i=n.height-e.height-10),i<10&&(i=10),x({x:s,y:i})}},[e,t]),s.useEffect(()=>{const t=e=>{f.current&&!f.current.contains(e.target)&&i()},n=e=>{"Escape"===e.key&&i()};return e&&(document.addEventListener("mousedown",t),document.addEventListener("keydown",n)),()=>{document.removeEventListener("mousedown",t),document.removeEventListener("keydown",n)}},[e,i]),!e||!n)return null;const b=[{id:"quick-sell",label:"Quick Sell",icon:ln,action:()=>{a(n),i()},color:"red",disabled:!u,shortcut:"S"},{id:"enhanced-order",label:"Enhanced Order",icon:en,action:()=>{i()},color:"blue",shortcut:"E"},{id:"view-chart",label:"View Chart",icon:Ke,action:()=>{o(n),i()},color:"purple",shortcut:"C"},{id:"watchlist",label:h?"Remove from Watchlist":"Add to Watchlist",icon:et,action:()=>{l(n),i()},color:"orange",shortcut:"W"},{id:"view-details",label:"View Details",icon:kt,action:()=>{c(n),i()},color:"gray",shortcut:"I"}];return M.jsx(y,{children:M.jsxs(v.div,{ref:f,className:"stock-context-menu",style:{position:"fixed",left:g.x,top:g.y,zIndex:1e3},initial:{opacity:0,scale:.95,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-10},transition:{duration:.15,ease:"easeOut"},children:[M.jsxs("div",{className:"context-menu-header",children:[M.jsxs("div",{className:"stock-info",children:[M.jsx("span",{className:"stock-symbol",children:n.symbol}),M.jsxs("span",{className:"stock-price",children:["₹",(null==(d=n.price)?void 0:d.toLocaleString("en-IN"))||"0.00"]})]}),M.jsxs("div",{className:"price-change "+(n.change>=0?"positive":"negative"),children:[n.change>=0?"+":"",(null==(m=n.change)?void 0:m.toFixed(2))||"0.00","(",(null==(p=n.changePercent)?void 0:p.toFixed(2))||"0.00","%)"]})]}),M.jsx("div",{className:"context-menu-items",children:b.map((e,t)=>M.jsxs(v.button,{className:`context-menu-item ${e.color} ${e.disabled?"disabled":""}`,onClick:e.action,disabled:e.disabled,initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{duration:.1,delay:.02*t},whileHover:{backgroundColor:"var(--hover-bg)"},whileTap:{scale:.98},children:[M.jsxs("div",{className:"menu-item-content",children:[M.jsx(e.icon,{className:"menu-item-icon",size:16}),M.jsx("span",{className:"menu-item-label",children:e.label})]}),M.jsx("span",{className:"menu-item-shortcut",children:e.shortcut})]},e.id))}),M.jsxs("div",{className:"context-menu-footer",children:[M.jsxs("div",{className:"market-status",children:[M.jsx(Ue,{size:12}),M.jsx("span",{children:"Market Open"})]}),M.jsxs("div",{className:"last-updated",children:["Updated: ",(new Date).toLocaleTimeString()]})]})]})})},Id=({user:e,theme:t})=>{var n;const[i,r]=s.useState(null),[a,o]=s.useState("market"),[u,h]=s.useState("buy"),[d,m]=s.useState(1),[p,f]=s.useState(""),[g,y]=s.useState(!1),[x,b]=s.useState(!1),[w,j]=s.useState(!1),[k,N]=s.useState(!1),[S,C]=s.useState(null),P=c(),E=l(),{portfolioData:T,buyStock:L,sellStock:I}=ra(),{isOpen:_,currentStock:D,defaultQuantity:A,closeSlideToBuy:O}=Pd(),{orderModalState:R,closeOrderModal:F,quickBuy:B,quickSell:z,navigateToTrading:W}=ka(),{contextMenu:U,openContextMenu:V,closeContextMenu:$}=(()=>{const[e,t]=s.useState({isOpen:!1,position:{x:0,y:0},stockData:null}),n=()=>{t({isOpen:!1,position:{x:0,y:0},stockData:null})};return s.useEffect(()=>{const t=t=>{if(!e.isOpen)return;const{key:s}=t;switch(e.stockData,s.toLowerCase()){case"b":case"s":case"c":case"w":case"e":case"i":t.preventDefault(),n()}};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[e]),{contextMenu:e,openContextMenu:(e,n)=>{e.preventDefault(),e.stopPropagation(),t({isOpen:!0,position:{x:e.clientX,y:e.clientY},stockData:n})},closeContextMenu:n}})(),{isModalOpen:H,orderData:q,loading:Y,closeConfirmation:G,processOrder:Q,confirmBuy:J,confirmSell:X}=(()=>{const[e,t]=s.useState(!1),[n,i]=s.useState(null),[r,a]=s.useState(!1),o=s.useCallback(e=>{i(e),t(!0)},[]),l=s.useCallback(()=>{r||(t(!1),setTimeout(()=>{i(null),a(!1)},300))},[r]),c=s.useCallback(async e=>{a(!0);try{let t;if("BUY"===e.action?t=await sa.buyStock(e.symbol,e.quantity,e.price,e.orderType||"market"):"SELL"===e.action&&(t=await sa.sellStock(e.symbol,e.quantity,e.price,e.orderType||"market")),t.success)return We.success(`${e.action} order executed successfully! ${e.quantity} shares of ${e.symbol}`,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0}),setTimeout(()=>{l()},1500),t;throw new Error(t.message||"Order execution failed")}catch(t){return We.error(t.message||`Failed to execute ${e.action.toLowerCase()} order`,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0}),a(!1),{success:!1,error:t.message}}},[l]),u=s.useCallback((e,t,n,s={})=>{o({action:"BUY",symbol:e,quantity:t,price:n,...s})},[o]),h=s.useCallback((e,t,n,s={})=>{o({action:"SELL",symbol:e,quantity:t,price:n,...s})},[o]);return{isModalOpen:e,orderData:n,loading:r,openConfirmation:o,closeConfirmation:l,processOrder:c,confirmBuy:u,confirmSell:h}})(),{query:K,setQuery:Z,results:ee,suggestions:te,recentSearches:ne,showHistory:se,handleHistoryClick:ie,loading:re,clearSearch:ae,hasResults:oe}=Xr({enableSuggestions:!0,enableHistory:!0,limit:20,debounceMs:300,onResults:(e,t)=>{e.length>0&&j(!0)}}),le=[{title:"Available Balance",value:T.availableCash,icon:ht,color:"primary"},{title:"Total Holdings",value:(null==(n=T.holdings)?void 0:n.length)||0,icon:en,color:"info"},{title:"Total Invested",value:T.totalInvested,icon:Ke,color:"warning"},{title:"Total P&L",value:T.totalGainLoss,changePercent:T.totalGainLossPercentage,icon:T.totalGainLoss>=0?cn:ln,color:T.totalGainLoss>=0?"success":"danger"}],ce=[{symbol:"RELIANCE",name:"Reliance Industries",price:2465.3,change:2.71,changePercent:.11,volume:"2.5M"},{symbol:"TCS",name:"Tata Consultancy Services",price:3185.45,change:-14.85,changePercent:-.47,volume:"1.8M"},{symbol:"HDFCBANK",name:"HDFC Bank",price:1650.2,change:51.75,changePercent:3.13,volume:"3.2M"},{symbol:"INFY",name:"Infosys",price:1595.8,change:19.7,changePercent:1.25,volume:"2.1M"},{symbol:"ICICIBANK",name:"ICICI Bank",price:945.15,change:12.3,changePercent:1.32,volume:"4.1M"},{symbol:"WIPRO",name:"Wipro Ltd",price:420.85,change:-3.25,changePercent:-.77,volume:"1.5M"},{symbol:"BAJFINANCE",name:"Bajaj Finance",price:6845.3,change:125.4,changePercent:1.87,volume:"0.8M"},{symbol:"MARUTI",name:"Maruti Suzuki",price:9245.6,change:-85.2,changePercent:-.91,volume:"0.6M"}];s.useEffect(()=>{const e=new URLSearchParams(P.search),t=e.get("search"),n=e.get("symbol");if(t&&Z(t),n){const e=ce.find(e=>e.symbol===n)||ee.find(e=>e.symbol===n);e&&ue(e)}},[P.search,ee]);const ue=e=>{var t;r(e),f((null==(t=e.price)?void 0:t.toString())||"")},he=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),de=oe&&w?ee.map(e=>({symbol:e.symbol,name:e.name,price:e.price||0,change:e.change||0,changePercent:e.changePercent||0,volume:e.volume||"N/A",exchange:e.exchange})):K&&!oe?ce.filter(e=>e.symbol.toLowerCase().includes(K.toLowerCase())||e.name.toLowerCase().includes(K.toLowerCase())):ce;return M.jsx("div",{className:"trading-page",children:M.jsxs("div",{className:"trading-container",children:[M.jsx(v.div,{className:"trading-header",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6},children:M.jsxs("div",{className:"header-content",children:[M.jsxs("div",{className:"header-left",children:[M.jsxs("h1",{className:"page-title",children:[M.jsx(en,{className:"title-icon"}),"Trading"]}),M.jsx("p",{className:"page-subtitle",children:"Buy and sell stocks with real-time market data"})]}),M.jsx("div",{className:"header-actions",children:M.jsxs("button",{className:"btn-premium btn-secondary",onClick:async()=>{y(!0),await new Promise(e=>setTimeout(e,1500)),y(!1)},disabled:g,children:[M.jsx(Yt,{size:16,className:g?"animate-spin":""}),"Refresh"]})})]})}),M.jsx(v.div,{className:"trading-stats",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},children:le.map((e,t)=>{const n=e.icon,s=e.changePercent>=0;return M.jsxs(v.div,{className:`stat-card stat-${e.color}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.1*t},children:[M.jsxs("div",{className:"stat-header",children:[M.jsx("div",{className:"stat-icon",children:M.jsx(n,{})}),void 0!==e.changePercent&&M.jsxs("div",{className:"stat-change "+(s?"positive":"negative"),children:[s?M.jsx(Qe,{size:14}):M.jsx(He,{size:14}),Math.abs(e.changePercent),"%"]})]}),M.jsxs("div",{className:"stat-content",children:[M.jsx("h3",{className:"stat-value",children:"number"==typeof e.value&&e.value>1e3?M.jsx(md,{end:e.value,duration:2,separator:",",prefix:e.title.includes("Balance")||e.title.includes("P&L")?"₹":""}):e.value}),M.jsx("p",{className:"stat-title",children:e.title})]})]},e.title)})}),M.jsxs("div",{className:"trading-grid",children:[M.jsxs(v.div,{className:"trading-card stocks-panel",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:[M.jsxs("div",{className:"card-header",children:[M.jsxs("h3",{className:"card-title",children:[M.jsx(Ke,{className:"card-icon"}),oe&&w?"Search Results":"Popular Stocks"]}),M.jsx("div",{className:"search-container",children:M.jsx(Zr,{placeholder:"Search stocks...",value:K,onChange:Z,onClear:()=>{ae(),j(!1)},suggestions:te,recentSearches:ne,onSuggestionClick:e=>{const t={symbol:e.symbol,name:e.name,price:0,change:0,changePercent:0,volume:"N/A"};ue(t),ae()},onHistoryClick:ie,showHistory:se,loading:re,size:"sm",showSuggestions:!0,enableHistory:!0,className:"trading-search-input",renderSuggestion:(e,t)=>M.jsx("div",{className:"trading-search-suggestion",children:M.jsxs("div",{className:"suggestion-content",children:[M.jsx("span",{className:"suggestion-symbol",children:e.symbol}),M.jsx("span",{className:"suggestion-name",children:e.name}),e.exchange&&M.jsx("span",{className:"suggestion-exchange",children:e.exchange})]})},t)})})]}),M.jsx("div",{className:"card-content",children:M.jsxs("div",{className:"stocks-list",children:[re&&M.jsxs("div",{className:"loading-state",children:[M.jsx(Ue,{className:"loading-icon animate-spin"}),M.jsx("span",{children:"Searching stocks..."})]}),!re&&0===de.length&&K&&M.jsxs("div",{className:"empty-state",children:[M.jsx(Qt,{className:"empty-icon"}),M.jsxs("span",{children:['No stocks found for "',K,'"']})]}),!re&&de.map((e,t)=>M.jsxs(v.div,{className:"stock-item "+((null==i?void 0:i.symbol)===e.symbol?"selected":""),onClick:t=>{1===t.detail?ue(e):2===t.detail&&E(`/stock/${e.symbol}`)},onContextMenu:t=>V(t,e),initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:.05*t},children:[M.jsxs("div",{className:"stock-info",children:[M.jsx("div",{className:"stock-symbol",children:e.symbol}),M.jsx("div",{className:"stock-name",children:e.name}),M.jsxs("div",{className:"stock-volume",children:["Vol: ",e.volume]})]}),M.jsx("div",{className:"stock-price-info",children:M.jsx(oa,{price:e.price,change:e.change,changePercent:e.changePercent,size:"small"})}),M.jsx("div",{className:"stock-actions",children:M.jsx(Sd,{stockData:e,size:"small",variant:"simple",showText:!1})})]},e.symbol))]})})]}),M.jsxs(v.div,{className:"trading-card order-panel",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},children:[M.jsx("div",{className:"card-header",children:M.jsxs("h3",{className:"card-title",children:[M.jsx(en,{className:"card-icon"}),"Place Order"]})}),M.jsx("div",{className:"card-content",children:i?M.jsxs("div",{className:"order-form",children:[M.jsxs("div",{className:"selected-stock",children:[M.jsxs("div",{className:"stock-details",children:[M.jsx("h4",{children:i.symbol}),M.jsx("p",{children:i.name})]}),M.jsx(oa,{price:i.price,change:i.change,changePercent:i.changePercent,size:"medium"})]}),M.jsxs("div",{className:"order-controls",children:[M.jsxs("div",{className:"transaction-type",children:[M.jsxs("button",{className:"type-btn "+("buy"===u?"active buy":""),onClick:()=>h("buy"),children:[M.jsx(cn,{size:16}),"BUY"]}),M.jsxs("button",{className:"type-btn "+("sell"===u?"active sell":""),onClick:()=>h("sell"),children:[M.jsx(ln,{size:16}),"SELL"]})]}),M.jsxs("div",{className:"order-type",children:[M.jsx("label",{children:"Order Type"}),M.jsxs("select",{value:a,onChange:e=>o(e.target.value),className:"order-select",children:[M.jsx("option",{value:"market",children:"Market Order"}),M.jsx("option",{value:"limit",children:"Limit Order"}),M.jsx("option",{value:"stop",children:"Stop Order"})]})]}),M.jsxs("div",{className:"quantity-control",children:[M.jsx("label",{children:"Quantity"}),M.jsxs("div",{className:"quantity-input",children:[M.jsx("button",{className:"qty-btn",onClick:()=>m(Math.max(1,d-1)),children:M.jsx(Rt,{size:14})}),M.jsx("input",{type:"number",value:d,onChange:e=>m(Math.max(1,parseInt(e.target.value)||1)),className:"qty-input",min:"1"}),M.jsx("button",{className:"qty-btn",onClick:()=>m(d+1),children:M.jsx(qt,{size:14})})]})]}),"market"!==a&&M.jsxs("div",{className:"price-control",children:[M.jsx("label",{children:"Price (₹)"}),M.jsx("input",{type:"number",value:p,onChange:e=>f(e.target.value),className:"price-input",placeholder:"Enter price",step:"0.01"})]}),M.jsxs("div",{className:"order-summary",children:[M.jsxs("div",{className:"summary-row",children:[M.jsx("span",{children:"Quantity:"}),M.jsxs("span",{children:[d," shares"]})]}),M.jsxs("div",{className:"summary-row",children:[M.jsx("span",{children:"Price:"}),M.jsx("span",{children:he("market"===a?i.price:parseFloat(p)||0)})]}),M.jsxs("div",{className:"summary-row total",children:[M.jsx("span",{children:"Total:"}),M.jsx("span",{children:he(("market"===a?i.price:parseFloat(p)||0)*d)})]})]}),M.jsxs("div",{className:"order-actions-grid",children:[M.jsx("button",{className:`place-order-btn ${u}`,onClick:async()=>{if(!i||!d)return;const e="market"===a?i.price:parseFloat(p),t=parseInt(d),n={symbol:i.symbol,name:i.name,price:e,quantity:t,orderType:a,source:"trading-page"};"buy"===u?J(n.symbol,n.quantity,n.price,{name:n.name,orderType:n.orderType,source:n.source}):X(n.symbol,n.quantity,n.price,{name:n.name,orderType:n.orderType,source:n.source}),m(1),f("")},disabled:!d||"market"!==a&&!p||x,children:x?M.jsxs(M.Fragment,{children:[M.jsx("div",{className:"loading-spinner sm"}),"Placing Order..."]}):"buy"===u?"Place Buy Order":"Place Sell Order"}),M.jsxs("button",{className:"enhanced-order-btn",onClick:()=>((e,t="buy")=>{C({...e,initialOrderType:t}),N(!0)})(i,u),disabled:!i,children:[M.jsx(en,{size:16}),"Enhanced Order"]})]})]})]}):M.jsxs("div",{className:"no-stock-selected",children:[M.jsx(Ue,{size:48}),M.jsx("p",{children:"Select a stock to place an order"})]})})]}),M.jsxs(v.div,{className:"trading-card orders-panel",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},children:[M.jsx("div",{className:"card-header",children:M.jsxs("h3",{className:"card-title",children:[M.jsx(at,{className:"card-icon"}),"Recent Orders"]})}),M.jsx("div",{className:"card-content",children:M.jsx("div",{className:"orders-list",children:[{id:1,symbol:"WIPRO",type:"BUY",quantity:50,price:420,status:"completed",time:"10:30 AM",total:21e3},{id:2,symbol:"BAJFINANCE",type:"SELL",quantity:25,price:6800,status:"completed",time:"11:45 AM",total:17e4},{id:3,symbol:"MARUTI",type:"BUY",quantity:10,price:9200,status:"pending",time:"12:15 PM",total:92e3},{id:4,symbol:"ASIANPAINT",type:"SELL",quantity:15,price:3100,status:"cancelled",time:"01:30 PM",total:46500}].map((e,t)=>M.jsxs(v.div,{className:"order-item",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:.05*t},children:[M.jsxs("div",{className:"order-info",children:[M.jsx("div",{className:"order-symbol",children:e.symbol}),M.jsxs("div",{className:"order-details",children:[M.jsx("span",{className:`order-type ${e.type.toLowerCase()}`,children:e.type}),M.jsxs("span",{className:"order-quantity",children:[e.quantity," shares"]}),M.jsx("span",{className:"order-time",children:e.time})]})]}),M.jsxs("div",{className:"order-price",children:[M.jsx("div",{className:"price-value",children:he(e.price)}),M.jsx("div",{className:"total-value",children:he(e.total)})]}),M.jsxs("div",{className:"order-status",children:["completed"===e.status&&M.jsx(it,{className:"status-icon completed"}),"pending"===e.status&&M.jsx(at,{className:"status-icon pending"}),"cancelled"===e.status&&M.jsx(mn,{className:"status-icon cancelled"}),M.jsx("span",{className:`status-text ${e.status}`,children:e.status})]})]},e.id))})})]})]}),M.jsx(ba,{isOpen:k||R.isOpen,onClose:()=>{N(!1),F()},stockData:S||R.stockData,initialOrderType:(null==S?void 0:S.initialOrderType)||R.orderType,onOrderPlaced:()=>{N(!1),C(null),F()},onShowConfirmation:null}),M.jsx(Md,{isOpen:U.isOpen,position:U.position,stockData:U.stockData,onClose:$,onQuickBuy:B,onQuickSell:z,onViewChart:e=>W(e,"buy"),onAddToWatchlist:e=>{},onViewDetails:e=>{},hasHolding:!!U.stockData&&T.holdings.some(e=>e.symbol===U.stockData.symbol)}),M.jsx(Td,{isOpen:H,onClose:G,onConfirm:Q,orderData:q,loading:Y}),M.jsx(Cd,{stockData:D,isOpen:_,onClose:O,defaultQuantity:A,onSuccess:()=>{}})]})})},_d=s.createContext(),Dd=({children:e})=>{const[t,n]=s.useState(()=>{const e=localStorage.getItem("sidebarCollapsed");return null!==e?JSON.parse(e):window.innerWidth<=768}),[i,r]=s.useState(window.innerWidth<=768);s.useEffect(()=>{const e=()=>{const e=window.innerWidth<=768;r(e),e&&n(e=>e||(localStorage.setItem("sidebarCollapsed","true"),!0))};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const a={isCollapsed:t,setIsCollapsed:n,isMobile:i,toggleSidebar:()=>{n(e=>{const t=!e;return localStorage.setItem("sidebarCollapsed",JSON.stringify(t)),t})},expandSidebar:()=>{n(()=>(localStorage.setItem("sidebarCollapsed","false"),!1))},collapseSidebar:()=>{n(()=>(localStorage.setItem("sidebarCollapsed","true"),!0))}};return M.jsx(_d.Provider,{value:a,children:e})};function Ad(e){var t=e.width,n=e.height;if(t<0)throw new Error("Negative width is not allowed for Size");if(n<0)throw new Error("Negative height is not allowed for Size");return{width:t,height:n}}function Od(e,t){return e.width===t.width&&e.height===t.height}var Rd=function(){function e(e){var t=this;this._resolutionListener=function(){return t._onResolutionChanged()},this._resolutionMediaQueryList=null,this._observers=[],this._window=e,this._installResolutionListener()}return e.prototype.dispose=function(){this._uninstallResolutionListener(),this._window=null},Object.defineProperty(e.prototype,"value",{get:function(){return this._window.devicePixelRatio},enumerable:!1,configurable:!0}),e.prototype.subscribe=function(e){var t=this,n={next:e};return this._observers.push(n),{unsubscribe:function(){t._observers=t._observers.filter(function(e){return e!==n})}}},e.prototype._installResolutionListener=function(){if(null!==this._resolutionMediaQueryList)throw new Error("Resolution listener is already installed");var e=this._window.devicePixelRatio;this._resolutionMediaQueryList=this._window.matchMedia("all and (resolution: ".concat(e,"dppx)")),this._resolutionMediaQueryList.addListener(this._resolutionListener)},e.prototype._uninstallResolutionListener=function(){null!==this._resolutionMediaQueryList&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},e.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},e.prototype._onResolutionChanged=function(){var e=this;this._observers.forEach(function(t){return t.next(e._window.devicePixelRatio)}),this._reinstallResolutionListener()},e}();var Fd=function(){function e(e,t,n){var s;this._canvasElement=null,this._bitmapSizeChangedListeners=[],this._suggestedBitmapSize=null,this._suggestedBitmapSizeChangedListeners=[],this._devicePixelRatioObservable=null,this._canvasElementResizeObserver=null,this._canvasElement=e,this._canvasElementClientSize=Ad({width:this._canvasElement.clientWidth,height:this._canvasElement.clientHeight}),this._transformBitmapSize=null!=t?t:function(e){return e},this._allowResizeObserver=null===(s=null==n?void 0:n.allowResizeObserver)||void 0===s||s,this._chooseAndInitObserver()}return e.prototype.dispose=function(){var e,t;if(null===this._canvasElement)throw new Error("Object is disposed");null===(e=this._canvasElementResizeObserver)||void 0===e||e.disconnect(),this._canvasElementResizeObserver=null,null===(t=this._devicePixelRatioObservable)||void 0===t||t.dispose(),this._devicePixelRatioObservable=null,this._suggestedBitmapSizeChangedListeners.length=0,this._bitmapSizeChangedListeners.length=0,this._canvasElement=null},Object.defineProperty(e.prototype,"canvasElement",{get:function(){if(null===this._canvasElement)throw new Error("Object is disposed");return this._canvasElement},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"canvasElementClientSize",{get:function(){return this._canvasElementClientSize},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bitmapSize",{get:function(){return Ad({width:this.canvasElement.width,height:this.canvasElement.height})},enumerable:!1,configurable:!0}),e.prototype.resizeCanvasElement=function(e){this._canvasElementClientSize=Ad(e),this.canvasElement.style.width="".concat(this._canvasElementClientSize.width,"px"),this.canvasElement.style.height="".concat(this._canvasElementClientSize.height,"px"),this._invalidateBitmapSize()},e.prototype.subscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners.push(e)},e.prototype.unsubscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners=this._bitmapSizeChangedListeners.filter(function(t){return t!==e})},Object.defineProperty(e.prototype,"suggestedBitmapSize",{get:function(){return this._suggestedBitmapSize},enumerable:!1,configurable:!0}),e.prototype.subscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners.push(e)},e.prototype.unsubscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners=this._suggestedBitmapSizeChangedListeners.filter(function(t){return t!==e})},e.prototype.applySuggestedBitmapSize=function(){if(null!==this._suggestedBitmapSize){var e=this._suggestedBitmapSize;this._suggestedBitmapSize=null,this._resizeBitmap(e),this._emitSuggestedBitmapSizeChanged(e,this._suggestedBitmapSize)}},e.prototype._resizeBitmap=function(e){var t=this.bitmapSize;Od(t,e)||(this.canvasElement.width=e.width,this.canvasElement.height=e.height,this._emitBitmapSizeChanged(t,e))},e.prototype._emitBitmapSizeChanged=function(e,t){var n=this;this._bitmapSizeChangedListeners.forEach(function(s){return s.call(n,e,t)})},e.prototype._suggestNewBitmapSize=function(e){var t=this._suggestedBitmapSize,n=Ad(this._transformBitmapSize(e,this._canvasElementClientSize)),s=Od(this.bitmapSize,n)?null:n;null===t&&null===s||null!==t&&null!==s&&Od(t,s)||(this._suggestedBitmapSize=s,this._emitSuggestedBitmapSizeChanged(t,s))},e.prototype._emitSuggestedBitmapSizeChanged=function(e,t){var n=this;this._suggestedBitmapSizeChangedListeners.forEach(function(s){return s.call(n,e,t)})},e.prototype._chooseAndInitObserver=function(){var e=this;this._allowResizeObserver?new Promise(function(e){var t=new ResizeObserver(function(n){e(n.every(function(e){return"devicePixelContentBoxSize"in e})),t.disconnect()});t.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1}).then(function(t){return t?e._initResizeObserver():e._initDevicePixelRatioObservable()}):this._initDevicePixelRatioObservable()},e.prototype._initDevicePixelRatioObservable=function(){var e=this;if(null!==this._canvasElement){var t=Bd(this._canvasElement);if(null===t)throw new Error("No window is associated with the canvas");this._devicePixelRatioObservable=function(e){return new Rd(e)}(t),this._devicePixelRatioObservable.subscribe(function(){return e._invalidateBitmapSize()}),this._invalidateBitmapSize()}},e.prototype._invalidateBitmapSize=function(){var e,t;if(null!==this._canvasElement){var n=Bd(this._canvasElement);if(null!==n){var s=null!==(t=null===(e=this._devicePixelRatioObservable)||void 0===e?void 0:e.value)&&void 0!==t?t:n.devicePixelRatio,i=this._canvasElement.getClientRects(),r=void 0!==i[0]?function(e,t){return Ad({width:Math.round(e.left*t+e.width*t)-Math.round(e.left*t),height:Math.round(e.top*t+e.height*t)-Math.round(e.top*t)})}(i[0],s):Ad({width:this._canvasElementClientSize.width*s,height:this._canvasElementClientSize.height*s});this._suggestNewBitmapSize(r)}}},e.prototype._initResizeObserver=function(){var e=this;null!==this._canvasElement&&(this._canvasElementResizeObserver=new ResizeObserver(function(t){var n=t.find(function(t){return t.target===e._canvasElement});if(n&&n.devicePixelContentBoxSize&&n.devicePixelContentBoxSize[0]){var s=n.devicePixelContentBoxSize[0],i=Ad({width:s.inlineSize,height:s.blockSize});e._suggestNewBitmapSize(i)}}),this._canvasElementResizeObserver.observe(this._canvasElement,{box:"device-pixel-content-box"}))},e}();function Bd(e){return e.ownerDocument.defaultView}var zd=function(){function e(e,t,n){if(0===t.width||0===t.height)throw new TypeError("Rendering target could only be created on a media with positive width and height");if(this._mediaSize=t,0===n.width||0===n.height)throw new TypeError("Rendering target could only be created using a bitmap with positive integer width and height");this._bitmapSize=n,this._context=e}return e.prototype.useMediaCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),this._context.scale(this._horizontalPixelRatio,this._verticalPixelRatio),e({context:this._context,mediaSize:this._mediaSize})}finally{this._context.restore()}},e.prototype.useBitmapCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),e({context:this._context,mediaSize:this._mediaSize,bitmapSize:this._bitmapSize,horizontalPixelRatio:this._horizontalPixelRatio,verticalPixelRatio:this._verticalPixelRatio})}finally{this._context.restore()}},Object.defineProperty(e.prototype,"_horizontalPixelRatio",{get:function(){return this._bitmapSize.width/this._mediaSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_verticalPixelRatio",{get:function(){return this._bitmapSize.height/this._mediaSize.height},enumerable:!1,configurable:!0}),e}();function Wd(e,t){var n=e.canvasElementClientSize;if(0===n.width||0===n.height)return null;var s=e.bitmapSize;if(0===s.width||0===s.height)return null;var i=e.canvasElement.getContext("2d",t);return null===i?null:new zd(i,n,s)}
/*!
 * @license
 * TradingView Lightweight Charts™ v5.0.8
 * Copyright (c) 2025 TradingView, Inc.
 * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0
 */const Ud={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}};var Vd,$d;function Hd(e,t){const n={0:[],1:[e.lineWidth,e.lineWidth],2:[2*e.lineWidth,2*e.lineWidth],3:[6*e.lineWidth,6*e.lineWidth],4:[e.lineWidth,4*e.lineWidth]}[t];e.setLineDash(n)}function qd(e,t,n,s){e.beginPath();const i=e.lineWidth%2?.5:0;e.moveTo(n,t+i),e.lineTo(s,t+i),e.stroke()}function Yd(e,t){if(!e)throw new Error("Assertion failed"+(t?": "+t:""))}function Gd(e){if(void 0===e)throw new Error("Value is undefined");return e}function Qd(e){if(null===e)throw new Error("Value is null");return e}function Jd(e){return Qd(Gd(e))}!function(e){e[e.Simple=0]="Simple",e[e.WithSteps=1]="WithSteps",e[e.Curved=2]="Curved"}(Vd||(Vd={})),function(e){e[e.Solid=0]="Solid",e[e.Dotted=1]="Dotted",e[e.Dashed=2]="Dashed",e[e.LargeDashed=3]="LargeDashed",e[e.SparseDotted=4]="SparseDotted"}($d||($d={}));class Xd{constructor(){this.t=[]}i(e,t,n){const s={h:e,l:t,o:!0===n};this.t.push(s)}_(e){const t=this.t.findIndex(t=>e===t.h);t>-1&&this.t.splice(t,1)}u(e){this.t=this.t.filter(t=>t.l!==e)}p(e,t,n){const s=[...this.t];this.t=this.t.filter(e=>!e.o),s.forEach(s=>s.h(e,t,n))}v(){return this.t.length>0}m(){this.t=[]}}function Kd(e,...t){for(const n of t)for(const t in n)void 0!==n[t]&&Object.prototype.hasOwnProperty.call(n,t)&&!["__proto__","constructor","prototype"].includes(t)&&("object"!=typeof n[t]||void 0===e[t]||Array.isArray(n[t])?e[t]=n[t]:Kd(e[t],n[t]));return e}function Zd(e){return"number"==typeof e&&isFinite(e)}function em(e){return"number"==typeof e&&e%1==0}function tm(e){return"string"==typeof e}function nm(e){return"boolean"==typeof e}function sm(e){const t=e;if(!t||"object"!=typeof t)return t;let n,s,i;for(s in n=Array.isArray(t)?[]:{},t)t.hasOwnProperty(s)&&(i=t[s],n[s]=i&&"object"==typeof i?sm(i):i);return n}function im(e){return null!==e}function rm(e){return null===e?void 0:e}const am="-apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif";function om(e,t,n){return void 0===t&&(t=am),`${n=void 0!==n?`${n} `:""}${e}px ${t}`}class lm{constructor(e){this.M={S:1,C:5,P:NaN,k:"",T:"",R:"",D:"",V:0,I:0,B:0,A:0,L:0},this.O=e}N(){const e=this.M,t=this.F(),n=this.W();return e.P===t&&e.T===n||(e.P=t,e.T=n,e.k=om(t,n),e.A=2.5/12*t,e.V=e.A,e.I=t/12*e.C,e.B=t/12*e.C,e.L=0),e.R=this.H(),e.D=this.U(),this.M}H(){return this.O.N().layout.textColor}U(){return this.O.$()}F(){return this.O.N().layout.fontSize}W(){return this.O.N().layout.fontFamily}}function cm(e){return e<0?0:e>255?255:Math.round(e)||0}function um(e){return.199*e[0]+.687*e[1]+.114*e[2]}class hm{constructor(e,t){this.q=new Map,this.Y=e,t&&(this.q=t)}j(e,t){if("transparent"===e)return e;const n=this.K(e),s=n[3];return`rgba(${n[0]}, ${n[1]}, ${n[2]}, ${t*s})`}X(e){const t=this.K(e);return{Z:`rgb(${t[0]}, ${t[1]}, ${t[2]})`,G:um(t)>160?"black":"white"}}J(e){return um(this.K(e))}tt(e,t,n){const[s,i,r,a]=this.K(e),[o,l,c,u]=this.K(t),h=[cm(s+n*(o-s)),cm(i+n*(l-i)),cm(r+n*(c-r)),(d=a+n*(u-a),d<=0||d>1?Math.min(Math.max(d,0),1):Math.round(1e4*d)/1e4)];var d;return`rgba(${h[0]}, ${h[1]}, ${h[2]}, ${h[3]})`}K(e){const t=this.q.get(e);if(t)return t;const n=function(e){const t=document.createElement("div");t.style.display="none",document.body.appendChild(t),t.style.color=e;const n=window.getComputedStyle(t).color;return document.body.removeChild(t),n}(e).match(/^rgba?\s*\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d+))?\)$/);if(!n){if(this.Y.length)for(const t of this.Y){const n=t(e);if(n)return this.q.set(e,n),n}throw new Error(`Failed to parse color: ${e}`)}const s=[parseInt(n[1],10),parseInt(n[2],10),parseInt(n[3],10),n[4]?parseFloat(n[4]):1];return this.q.set(e,s),s}}class dm{constructor(){this.it=[]}st(e){this.it=e}nt(e,t,n){this.it.forEach(s=>{s.nt(e,t,n)})}}class mm{nt(e,t,n){e.useBitmapCoordinateSpace(e=>this.et(e,t,n))}}class pm extends mm{constructor(){super(...arguments),this.rt=null}ht(e){this.rt=e}et({context:e,horizontalPixelRatio:t,verticalPixelRatio:n}){if(null===this.rt||null===this.rt.lt)return;const s=this.rt.lt,i=this.rt,r=Math.max(1,Math.floor(t))%2/2,a=a=>{e.beginPath();for(let o=s.to-1;o>=s.from;--o){const s=i.ot[o],l=Math.round(s._t*t)+r,c=s.ut*n,u=a*n+r;e.moveTo(l,c),e.arc(l,c,u,0,2*Math.PI)}e.fill()};i.ct>0&&(e.fillStyle=i.dt,a(i.ft+i.ct)),e.fillStyle=i.vt,a(i.ft)}}function fm(){return{ot:[{_t:0,ut:0,wt:0,gt:0}],vt:"",dt:"",ft:0,ct:0,lt:null}}const gm={from:0,to:1};class ym{constructor(e,t,n){this.Mt=new dm,this.bt=[],this.St=[],this.xt=!0,this.O=e,this.Ct=t,this.Pt=n,this.Mt.st(this.bt)}kt(e){this.yt(),this.xt=!0}Tt(){return this.xt&&(this.Rt(),this.xt=!1),this.Mt}yt(){const e=this.Pt.Dt();e.length!==this.bt.length&&(this.St=e.map(fm),this.bt=this.St.map(e=>{const t=new pm;return t.ht(e),t}),this.Mt.st(this.bt))}Rt(){const e=2===this.Ct.N().mode||!this.Ct.Vt(),t=this.Pt.It(),n=this.Ct.Bt(),s=this.O.Et();this.yt(),t.forEach((t,i)=>{const r=this.St[i],a=t.At(n),o=t.zt();!e&&null!==a&&t.Vt()&&null!==o?(r.vt=a.Lt,r.ft=a.ft,r.ct=a.Ot,r.ot[0].gt=a.gt,r.ot[0].ut=t.Ft().Nt(a.gt,o.Wt),r.dt=a.Ht??this.O.Ut(r.ot[0].ut/t.Ft().$t()),r.ot[0].wt=n,r.ot[0]._t=s.qt(n),r.lt=gm):r.lt=null})}}class vm extends mm{constructor(e){super(),this.Yt=e}et({context:e,bitmapSize:t,horizontalPixelRatio:n,verticalPixelRatio:s}){if(null===this.Yt)return;const i=this.Yt.jt.Vt,r=this.Yt.Kt.Vt;if(!i&&!r)return;const a=Math.round(this.Yt._t*n),o=Math.round(this.Yt.ut*s);e.lineCap="butt",i&&a>=0&&(e.lineWidth=Math.floor(this.Yt.jt.ct*n),e.strokeStyle=this.Yt.jt.R,e.fillStyle=this.Yt.jt.R,Hd(e,this.Yt.jt.Xt),function(e,t,n,s){e.beginPath();const i=e.lineWidth%2?.5:0;e.moveTo(t+i,0),e.lineTo(t+i,s),e.stroke()}(e,a,0,t.height)),r&&o>=0&&(e.lineWidth=Math.floor(this.Yt.Kt.ct*s),e.strokeStyle=this.Yt.Kt.R,e.fillStyle=this.Yt.Kt.R,Hd(e,this.Yt.Kt.Xt),qd(e,o,0,t.width))}}class xm{constructor(e,t){this.xt=!0,this.Zt={jt:{ct:1,Xt:0,R:"",Vt:!1},Kt:{ct:1,Xt:0,R:"",Vt:!1},_t:0,ut:0},this.Gt=new vm(this.Zt),this.Jt=e,this.Pt=t}kt(){this.xt=!0}Tt(e){return this.xt&&(this.Rt(),this.xt=!1),this.Gt}Rt(){const e=this.Jt.Vt(),t=this.Pt.Qt().N().crosshair,n=this.Zt;if(2===t.mode)return n.Kt.Vt=!1,void(n.jt.Vt=!1);n.Kt.Vt=e&&this.Jt.ti(this.Pt),n.jt.Vt=e&&this.Jt.ii(),n.Kt.ct=t.horzLine.width,n.Kt.Xt=t.horzLine.style,n.Kt.R=t.horzLine.color,n.jt.ct=t.vertLine.width,n.jt.Xt=t.vertLine.style,n.jt.R=t.vertLine.color,n._t=this.Jt.si(),n.ut=this.Jt.ni()}}function bm(e,t,n,s,i,r){e.fillRect(t+r,n,s-2*r,r),e.fillRect(t+r,n+i-r,s-2*r,r),e.fillRect(t,n,r,i),e.fillRect(t+s-r,n,r,i)}function wm(e,t,n,s,i,r){e.save(),e.globalCompositeOperation="copy",e.fillStyle=r,e.fillRect(t,n,s,i),e.restore()}function jm(e,t,n,s,i,r){e.beginPath(),e.roundRect?e.roundRect(t,n,s,i,r):(e.lineTo(t+s-r[1],n),0!==r[1]&&e.arcTo(t+s,n,t+s,n+r[1],r[1]),e.lineTo(t+s,n+i-r[2]),0!==r[2]&&e.arcTo(t+s,n+i,t+s-r[2],n+i,r[2]),e.lineTo(t+r[3],n+i),0!==r[3]&&e.arcTo(t,n+i,t,n+i-r[3],r[3]),e.lineTo(t,n+r[0]),0!==r[0]&&e.arcTo(t,n,t+r[0],n,r[0]))}function km(e,t,n,s,i,r,a=0,o=[0,0,0,0],l=""){if(e.save(),!a||!l||l===r)return jm(e,t,n,s,i,o),e.fillStyle=r,e.fill(),void e.restore();const c=a/2;var u;jm(e,t+c,n+c,s-a,i-a,(u=-c,o.map(e=>0===e?e:e+u))),"transparent"!==r&&(e.fillStyle=r,e.fill()),"transparent"!==l&&(e.lineWidth=a,e.strokeStyle=l,e.closePath(),e.stroke()),e.restore()}function Nm(e,t,n,s,i,r,a){e.save(),e.globalCompositeOperation="copy";const o=e.createLinearGradient(0,0,0,i);o.addColorStop(0,r),o.addColorStop(1,a),e.fillStyle=o,e.fillRect(t,n,s,i),e.restore()}class Sm{constructor(e,t){this.ht(e,t)}ht(e,t){this.Yt=e,this.ei=t}$t(e,t){return this.Yt.Vt?e.P+e.A+e.V:0}nt(e,t,n,s){if(!this.Yt.Vt||0===this.Yt.ri.length)return;const i=this.Yt.R,r=this.ei.Z,a=e.useBitmapCoordinateSpace(e=>{const a=e.context;a.font=t.k;const o=this.hi(e,t,n,s),l=o.ai;return o.li?km(a,l.oi,l._i,l.ui,l.ci,r,l.di,[l.ft,0,0,l.ft],r):km(a,l.fi,l._i,l.ui,l.ci,r,l.di,[0,l.ft,l.ft,0],r),this.Yt.pi&&(a.fillStyle=i,a.fillRect(l.fi,l.mi,l.wi-l.fi,l.gi)),this.Yt.Mi&&(a.fillStyle=t.D,a.fillRect(o.li?l.bi-l.di:0,l._i,l.di,l.Si-l._i)),o});e.useMediaCoordinateSpace(({context:e})=>{const n=a.xi;e.font=t.k,e.textAlign=a.li?"right":"left",e.textBaseline="middle",e.fillStyle=i,e.fillText(this.Yt.ri,n.Ci,(n._i+n.Si)/2+n.Pi)})}hi(e,t,n,s){const{context:i,bitmapSize:r,mediaSize:a,horizontalPixelRatio:o,verticalPixelRatio:l}=e,c=this.Yt.pi||!this.Yt.ki?t.C:0,u=this.Yt.yi?t.S:0,h=t.A+this.ei.Ti,d=t.V+this.ei.Ri,m=t.I,p=t.B,f=this.Yt.ri,g=t.P,y=n.Di(i,f),v=Math.ceil(n.Vi(i,f)),x=g+h+d,b=t.S+m+p+v+c,w=Math.max(1,Math.floor(l));let j=Math.round(x*l);j%2!=w%2&&(j+=1);const k=u>0?Math.max(1,Math.floor(u*o)):0,N=Math.round(b*o),S=Math.round(c*o),C=this.ei.Ii??this.ei.Bi,P=Math.round(C*l)-Math.floor(.5*l),E=Math.floor(P+w/2-j/2),T=E+j,L="right"===s,M=L?a.width-u:u,I=L?r.width-k:k;let _,D,A;return L?(_=I-N,D=I-S,A=M-c-m-u):(_=I+N,D=I+S,A=M+c+m),{li:L,ai:{_i:E,mi:P,Si:T,ui:N,ci:j,ft:2*o,di:k,oi:_,fi:I,wi:D,gi:w,bi:r.width},xi:{_i:E/l,Si:T/l,Ci:A,Pi:y}}}}class Cm{constructor(e){this.Ei={Bi:0,Z:"#000",Ri:0,Ti:0},this.Ai={ri:"",Vt:!1,pi:!0,ki:!1,Ht:"",R:"#FFF",Mi:!1,yi:!1},this.zi={ri:"",Vt:!1,pi:!1,ki:!0,Ht:"",R:"#FFF",Mi:!0,yi:!0},this.xt=!0,this.Li=new(e||Sm)(this.Ai,this.Ei),this.Oi=new(e||Sm)(this.zi,this.Ei)}ri(){return this.Ni(),this.Ai.ri}Bi(){return this.Ni(),this.Ei.Bi}kt(){this.xt=!0}$t(e,t=!1){return Math.max(this.Li.$t(e,t),this.Oi.$t(e,t))}Fi(){return this.Ei.Ii||0}Wi(e){this.Ei.Ii=e}Hi(){return this.Ni(),this.Ai.Vt||this.zi.Vt}Ui(){return this.Ni(),this.Ai.Vt}Tt(e){return this.Ni(),this.Ai.pi=this.Ai.pi&&e.N().ticksVisible,this.zi.pi=this.zi.pi&&e.N().ticksVisible,this.Li.ht(this.Ai,this.Ei),this.Oi.ht(this.zi,this.Ei),this.Li}$i(){return this.Ni(),this.Li.ht(this.Ai,this.Ei),this.Oi.ht(this.zi,this.Ei),this.Oi}Ni(){this.xt&&(this.Ai.pi=!0,this.zi.pi=!1,this.qi(this.Ai,this.zi,this.Ei))}}class Pm extends Cm{constructor(e,t,n){super(),this.Jt=e,this.Yi=t,this.ji=n}qi(e,t,n){if(e.Vt=!1,2===this.Jt.N().mode)return;const s=this.Jt.N().horzLine;if(!s.labelVisible)return;const i=this.Yi.zt();if(!this.Jt.Vt()||this.Yi.Ki()||null===i)return;const r=this.Yi.Xi().X(s.labelBackgroundColor);n.Z=r.Z,e.R=r.G;const a=2/12*this.Yi.P();n.Ti=a,n.Ri=a;const o=this.ji(this.Yi);n.Bi=o.Bi,e.ri=this.Yi.Zi(o.gt,i),e.Vt=!0}}const Em=/[1-9]/g;class Tm{constructor(){this.Yt=null}ht(e){this.Yt=e}nt(e,t){if(null===this.Yt||!1===this.Yt.Vt||0===this.Yt.ri.length)return;const n=e.useMediaCoordinateSpace(({context:e})=>(e.font=t.k,Math.round(t.Gi.Vi(e,Qd(this.Yt).ri,Em))));if(n<=0)return;const s=t.Ji,i=n+2*s,r=i/2,a=this.Yt.Qi;let o=this.Yt.Bi,l=Math.floor(o-r)+.5;l<0?(o+=Math.abs(0-l),l=Math.floor(o-r)+.5):l+i>a&&(o-=Math.abs(a-(l+i)),l=Math.floor(o-r)+.5);const c=l+i,u=Math.ceil(0+t.S+t.C+t.A+t.P+t.V);e.useBitmapCoordinateSpace(({context:e,horizontalPixelRatio:n,verticalPixelRatio:s})=>{const i=Qd(this.Yt);e.fillStyle=i.Z;const r=Math.round(l*n),a=Math.round(0*s),o=Math.round(c*n),h=Math.round(u*s),d=Math.round(2*n);if(e.beginPath(),e.moveTo(r,a),e.lineTo(r,h-d),e.arcTo(r,h,r+d,h,d),e.lineTo(o-d,h),e.arcTo(o,h,o,h-d,d),e.lineTo(o,a),e.fill(),i.pi){const r=Math.round(i.Bi*n),o=a,l=Math.round((o+t.C)*s);e.fillStyle=i.R;const c=Math.max(1,Math.floor(n)),u=Math.floor(.5*n);e.fillRect(r-u,o,c,l-o)}}),e.useMediaCoordinateSpace(({context:e})=>{const n=Qd(this.Yt),i=0+t.S+t.C+t.A+t.P/2;e.font=t.k,e.textAlign="left",e.textBaseline="middle",e.fillStyle=n.R;const r=t.Gi.Di(e,"Apr0");e.translate(l+s,i+r),e.fillText(n.ri,0,0)})}}class Lm{constructor(e,t,n){this.xt=!0,this.Gt=new Tm,this.Zt={Vt:!1,Z:"#4c525e",R:"white",ri:"",Qi:0,Bi:NaN,pi:!0},this.Ct=e,this.ts=t,this.ji=n}kt(){this.xt=!0}Tt(){return this.xt&&(this.Rt(),this.xt=!1),this.Gt.ht(this.Zt),this.Gt}Rt(){const e=this.Zt;if(e.Vt=!1,2===this.Ct.N().mode)return;const t=this.Ct.N().vertLine;if(!t.labelVisible)return;const n=this.ts.Et();if(n.Ki())return;e.Qi=n.Qi();const s=this.ji();if(null===s)return;e.Bi=s.Bi;const i=n.ss(this.Ct.Bt());e.ri=n.ns(Qd(i)),e.Vt=!0;const r=this.ts.Xi().X(t.labelBackgroundColor);e.Z=r.Z,e.R=r.G,e.pi=n.N().ticksVisible}}class Mm{constructor(){this.es=null,this.rs=0}hs(){return this.rs}ls(e){this.rs=e}Ft(){return this.es}_s(e){this.es=e}us(e){return[]}cs(){return[]}Vt(){return!0}}var Im;!function(e){e[e.Normal=0]="Normal",e[e.Magnet=1]="Magnet",e[e.Hidden=2]="Hidden",e[e.MagnetOHLC=3]="MagnetOHLC"}(Im||(Im={}));class _m extends Mm{constructor(e,t){super(),this.Pt=null,this.ds=NaN,this.fs=0,this.ps=!1,this.vs=new Map,this.ws=!1,this.gs=new WeakMap,this.Ms=new WeakMap,this.bs=NaN,this.Ss=NaN,this.xs=NaN,this.Cs=NaN,this.ts=e,this.Ps=t,this.ks=((e,t)=>n=>{const s=t(),i=e();if(n===Qd(this.Pt).ys())return{gt:i,Bi:s};{const e=Qd(n.zt());return{gt:n.Ts(s,e),Bi:s}}})(()=>this.ds,()=>this.Ss);const n=((e,t)=>()=>{const n=this.ts.Et().Rs(e()),s=t();return n&&Number.isFinite(s)?{wt:n,Bi:s}:null})(()=>this.fs,()=>this.si());this.Ds=new Lm(this,e,n)}N(){return this.Ps}Vs(e,t){this.xs=e,this.Cs=t}Is(){this.xs=NaN,this.Cs=NaN}Bs(){return this.xs}Es(){return this.Cs}As(e,t,n){this.ws||(this.ws=!0),this.ps=!0,this.zs(e,t,n)}Bt(){return this.fs}si(){return this.bs}ni(){return this.Ss}Vt(){return this.ps}Ls(){this.ps=!1,this.Os(),this.ds=NaN,this.bs=NaN,this.Ss=NaN,this.Pt=null,this.Is(),this.Ns()}Fs(e){let t=this.gs.get(e);t||(t=new xm(this,e),this.gs.set(e,t));let n=this.Ms.get(e);return n||(n=new ym(this.ts,this,e),this.Ms.set(e,n)),[t,n]}ti(e){return e===this.Pt&&this.Ps.horzLine.visible}ii(){return this.Ps.vertLine.visible}Ws(e,t){this.ps&&this.Pt===e||this.vs.clear();const n=[];return this.Pt===e&&n.push(this.Hs(this.vs,t,this.ks)),n}cs(){return this.ps?[this.Ds]:[]}Us(){return this.Pt}Ns(){this.ts.$s().forEach(e=>{var t,n;null==(t=this.gs.get(e))||t.kt(),null==(n=this.Ms.get(e))||n.kt()}),this.vs.forEach(e=>e.kt()),this.Ds.kt()}qs(e){return e&&!e.ys().Ki()?e.ys():null}zs(e,t,n){this.Ys(e,t,n)&&this.Ns()}Ys(e,t,n){const s=this.bs,i=this.Ss,r=this.ds,a=this.fs,o=this.Pt,l=this.qs(n);this.fs=e,this.bs=isNaN(e)?NaN:this.ts.Et().qt(e),this.Pt=n;const c=null!==l?l.zt():null;return null!==l&&null!==c?(this.ds=t,this.Ss=l.Nt(t,c)):(this.ds=NaN,this.Ss=NaN),s!==this.bs||i!==this.Ss||a!==this.fs||r!==this.ds||o!==this.Pt}Os(){const e=this.ts.js().map(e=>e.Xs().Ks()).filter(im),t=0===e.length?null:Math.max(...e);this.fs=null!==t?t:NaN}Hs(e,t,n){let s=e.get(t);return void 0===s&&(s=new Pm(this,t,n),e.set(t,s)),s}}function Dm(e){return"left"===e||"right"===e}class Am{constructor(e){this.Zs=new Map,this.Gs=[],this.Js=e}Qs(e,t){const n=(s=this.Zs.get(e),i=t,void 0===s?i:{tn:Math.max(s.tn,i.tn),sn:s.sn||i.sn});var s,i;this.Zs.set(e,n)}nn(){return this.Js}en(e){const t=this.Zs.get(e);return void 0===t?{tn:this.Js}:{tn:Math.max(this.Js,t.tn),sn:t.sn}}rn(){this.hn(),this.Gs=[{an:0}]}ln(e){this.hn(),this.Gs=[{an:1,Wt:e}]}_n(e){this.un(),this.Gs.push({an:5,Wt:e})}hn(){this.un(),this.Gs.push({an:6})}cn(){this.hn(),this.Gs=[{an:4}]}dn(e){this.hn(),this.Gs.push({an:2,Wt:e})}fn(e){this.hn(),this.Gs.push({an:3,Wt:e})}pn(){return this.Gs}vn(e){for(const t of e.Gs)this.mn(t);this.Js=Math.max(this.Js,e.Js),e.Zs.forEach((e,t)=>{this.Qs(t,e)})}static wn(){return new Am(2)}static gn(){return new Am(3)}mn(e){switch(e.an){case 0:this.rn();break;case 1:this.ln(e.Wt);break;case 2:this.dn(e.Wt);break;case 3:this.fn(e.Wt);break;case 4:this.cn();break;case 5:this._n(e.Wt);break;case 6:this.un()}}un(){const e=this.Gs.findIndex(e=>5===e.an);-1!==e&&this.Gs.splice(e,1)}}class Om{formatTickmarks(e){return e.map(e=>this.format(e))}}function Rm(e,t){if(!Zd(e))return"n/a";if(!em(t))throw new TypeError("invalid length");if(t<0||t>16)throw new TypeError("invalid length");return 0===t?e.toString():("0000000000000000"+e.toString()).slice(-t)}class Fm extends Om{constructor(e,t){if(super(),t||(t=1),Zd(e)&&em(e)||(e=100),e<0)throw new TypeError("invalid base");this.Yi=e,this.Mn=t,this.bn()}format(e){const t=e<0?"−":"";return e=Math.abs(e),t+this.Sn(e)}bn(){if(this.xn=0,this.Yi>0&&this.Mn>0){let e=this.Yi;for(;e>1;)e/=10,this.xn++}}Sn(e){const t=this.Yi/this.Mn;let n=Math.floor(e),s="";const i=void 0!==this.xn?this.xn:NaN;if(t>1){let r=+(Math.round(e*t)-n*t).toFixed(this.xn);r>=t&&(r-=t,n+=1),s="."+Rm(+r.toFixed(this.xn)*this.Mn,i)}else n=Math.round(n*t)/t,i>0&&(s="."+Rm(0,i));return n.toFixed(0)+s}}class Bm extends Fm{constructor(e=100){super(e)}format(e){return`${super.format(e)}%`}}class zm extends Om{constructor(e){super(),this.Cn=e}format(e){let t="";return e<0&&(t="-",e=-e),e<995?t+this.Pn(e):e<999995?t+this.Pn(e/1e3)+"K":e<999999995?(e=1e3*Math.round(e/1e3),t+this.Pn(e/1e6)+"M"):(e=1e6*Math.round(e/1e6),t+this.Pn(e/1e9)+"B")}Pn(e){let t;const n=Math.pow(10,this.Cn);return t=(e=Math.round(e*n)/n)>=1e-15&&e<1?e.toFixed(this.Cn).replace(/\.?0+$/,""):String(e),t.replace(/(\.[1-9]*)0+$/,(e,t)=>t)}}const Wm=/[2-9]/g;class Um{constructor(e=50){this.kn=0,this.yn=1,this.Tn=1,this.Rn={},this.Dn=new Map,this.Vn=e}In(){this.kn=0,this.Dn.clear(),this.yn=1,this.Tn=1,this.Rn={}}Vi(e,t,n){return this.Bn(e,t,n).width}Di(e,t,n){const s=this.Bn(e,t,n);return((s.actualBoundingBoxAscent||0)-(s.actualBoundingBoxDescent||0))/2}Bn(e,t,n){const s=n||Wm,i=String(t).replace(s,"0");if(this.Dn.has(i))return Gd(this.Dn.get(i)).En;if(this.kn===this.Vn){const e=this.Rn[this.Tn];delete this.Rn[this.Tn],this.Dn.delete(e),this.Tn++,this.kn--}e.save(),e.textBaseline="middle";const r=e.measureText(i);return e.restore(),0===r.width&&t.length||(this.Dn.set(i,{En:r,An:this.yn}),this.Rn[this.yn]=i,this.kn++,this.yn++),r}}class Vm{constructor(e){this.zn=null,this.M=null,this.Ln="right",this.On=e}Nn(e,t,n){this.zn=e,this.M=t,this.Ln=n}nt(e){null!==this.M&&null!==this.zn&&this.zn.nt(e,this.M,this.On,this.Ln)}}class $m{constructor(e,t,n){this.Fn=e,this.On=new Um(50),this.Wn=t,this.O=n,this.F=-1,this.Gt=new Vm(this.On)}Tt(){const e=this.O.Hn(this.Wn);if(null===e)return null;const t=e.Un(this.Wn)?e.$n():this.Wn.Ft();if(null===t)return null;const n=e.qn(t);if("overlay"===n)return null;const s=this.O.Yn();return s.P!==this.F&&(this.F=s.P,this.On.In()),this.Gt.Nn(this.Fn.$i(),s,n),this.Gt}}class Hm extends mm{constructor(){super(...arguments),this.Yt=null}ht(e){this.Yt=e}jn(e,t){var n;if(!(null==(n=this.Yt)?void 0:n.Vt))return null;const{ut:s,ct:i,Kn:r}=this.Yt;return t>=s-i-7&&t<=s+i+7?{Xn:this.Yt,Kn:r}:null}et({context:e,bitmapSize:t,horizontalPixelRatio:n,verticalPixelRatio:s}){if(null===this.Yt)return;if(!1===this.Yt.Vt)return;const i=Math.round(this.Yt.ut*s);i<0||i>t.height||(e.lineCap="butt",e.strokeStyle=this.Yt.R,e.lineWidth=Math.floor(this.Yt.ct*n),Hd(e,this.Yt.Xt),qd(e,i,0,t.width))}}class qm{constructor(e){this.Zn={ut:0,R:"rgba(0, 0, 0, 0)",ct:1,Xt:0,Vt:!1},this.Gn=new Hm,this.xt=!0,this.Jn=e,this.Qn=e.Qt(),this.Gn.ht(this.Zn)}kt(){this.xt=!0}Tt(){return this.Jn.Vt()?(this.xt&&(this.te(),this.xt=!1),this.Gn):null}}class Ym extends qm{constructor(e){super(e)}te(){this.Zn.Vt=!1;const e=this.Jn.Ft(),t=e.ie().ie;if(2!==t&&3!==t)return;const n=this.Jn.N();if(!n.baseLineVisible||!this.Jn.Vt())return;const s=this.Jn.zt();null!==s&&(this.Zn.Vt=!0,this.Zn.ut=e.Nt(s.Wt,s.Wt),this.Zn.R=n.baseLineColor,this.Zn.ct=n.baseLineWidth,this.Zn.Xt=n.baseLineStyle)}}class Gm extends mm{constructor(){super(...arguments),this.Yt=null}ht(e){this.Yt=e}se(){return this.Yt}et({context:e,horizontalPixelRatio:t,verticalPixelRatio:n}){const s=this.Yt;if(null===s)return;const i=Math.max(1,Math.floor(t)),r=i%2/2,a=Math.round(s.ne.x*t)+r,o=s.ne.y*n;e.fillStyle=s.ee,e.beginPath();const l=Math.max(2,1.5*s.re)*t;e.arc(a,o,l,0,2*Math.PI,!1),e.fill(),e.fillStyle=s.he,e.beginPath(),e.arc(a,o,s.ft*t,0,2*Math.PI,!1),e.fill(),e.lineWidth=i,e.strokeStyle=s.ae,e.beginPath(),e.arc(a,o,s.ft*t+i/2,0,2*Math.PI,!1),e.stroke()}}const Qm=[{le:0,oe:.25,_e:4,ue:10,ce:.25,de:0,fe:.4,pe:.8},{le:.25,oe:.525,_e:10,ue:14,ce:0,de:0,fe:.8,pe:0},{le:.525,oe:1,_e:14,ue:14,ce:0,de:0,fe:0,pe:0}];class Jm{constructor(e){this.Gt=new Gm,this.xt=!0,this.ve=!0,this.me=performance.now(),this.we=this.me-1,this.ge=e}Me(){this.we=this.me-1,this.kt()}be(){if(this.kt(),2===this.ge.N().lastPriceAnimation){const e=performance.now(),t=this.we-e;if(t>0)return void(t<650&&(this.we+=2600));this.me=e,this.we=e+2600}}kt(){this.xt=!0}Se(){this.ve=!0}Vt(){return 0!==this.ge.N().lastPriceAnimation}xe(){switch(this.ge.N().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.we}}Tt(){return this.xt?(this.Rt(),this.xt=!1,this.ve=!1):this.ve&&(this.Ce(),this.ve=!1),this.Gt}Rt(){this.Gt.ht(null);const e=this.ge.Qt().Et(),t=e.Pe(),n=this.ge.zt();if(null===t||null===n)return;const s=this.ge.ke(!0);if(s.ye||!t.Te(s.Re))return;const i={x:e.qt(s.Re),y:this.ge.Ft().Nt(s.gt,n.Wt)},r=s.R,a=this.ge.N().lineWidth,o=this.De(this.Ve(),r);this.Gt.ht({ee:r,re:a,he:o.he,ae:o.ae,ft:o.ft,ne:i})}Ce(){const e=this.Gt.se();if(null!==e){const t=this.De(this.Ve(),e.ee);e.he=t.he,e.ae=t.ae,e.ft=t.ft}}Ve(){return this.xe()?performance.now()-this.me:2599}Ie(e,t,n,s){const i=n+(s-n)*t;return this.ge.Qt().Xi().j(e,i)}De(e,t){const n=e%2600/2600;let s;for(const l of Qm)if(n>=l.le&&n<=l.oe){s=l;break}Yd(void 0!==s,"Last price animation internal logic error");const i=(n-s.le)/(s.oe-s.le);return{he:this.Ie(t,i,s.ce,s.de),ae:this.Ie(t,i,s.fe,s.pe),ft:(r=i,a=s._e,o=s.ue,a+(o-a)*r)};var r,a,o}}class Xm extends qm{constructor(e){super(e)}te(){const e=this.Zn;e.Vt=!1;const t=this.Jn.N();if(!t.priceLineVisible||!this.Jn.Vt())return;const n=this.Jn.ke(0===t.priceLineSource);n.ye||(e.Vt=!0,e.ut=n.Bi,e.R=this.Jn.Be(n.R),e.ct=t.priceLineWidth,e.Xt=t.priceLineStyle)}}class Km extends Cm{constructor(e){super(),this.Jt=e}qi(e,t,n){e.Vt=!1,t.Vt=!1;const s=this.Jt;if(!s.Vt())return;const i=s.N(),r=i.lastValueVisible,a=""!==s.Ee(),o=0===i.seriesLastValueMode,l=s.ke(!1);if(l.ye)return;r&&(e.ri=this.Ae(l,r,o),e.Vt=0!==e.ri.length),(a||o)&&(t.ri=this.ze(l,r,a,o),t.Vt=t.ri.length>0);const c=s.Be(l.R),u=this.Jt.Qt().Xi().X(c);n.Z=u.Z,n.Bi=l.Bi,t.Ht=s.Qt().Ut(l.Bi/s.Ft().$t()),e.Ht=c,e.R=u.G,t.R=u.G}ze(e,t,n,s){let i="";const r=this.Jt.Ee();return n&&0!==r.length&&(i+=`${r} `),t&&s&&(i+=this.Jt.Ft().Le()?e.Oe:e.Ne),i.trim()}Ae(e,t,n){return t?n?this.Jt.Ft().Le()?e.Ne:e.Oe:e.ri:""}}function Zm(e,t,n,s){const i=Number.isFinite(t),r=Number.isFinite(n);return i&&r?e(t,n):i||r?i?t:n:s}class ep{constructor(e,t){this.Fe=e,this.We=t}He(e){return null!==e&&this.Fe===e.Fe&&this.We===e.We}Ue(){return new ep(this.Fe,this.We)}$e(){return this.Fe}qe(){return this.We}Ye(){return this.We-this.Fe}Ki(){return this.We===this.Fe||Number.isNaN(this.We)||Number.isNaN(this.Fe)}vn(e){return null===e?this:new ep(Zm(Math.min,this.$e(),e.$e(),-1/0),Zm(Math.max,this.qe(),e.qe(),1/0))}je(e){if(!Zd(e))return;if(0===this.We-this.Fe)return;const t=.5*(this.We+this.Fe);let n=this.We-t,s=this.Fe-t;n*=e,s*=e,this.We=t+n,this.Fe=t+s}Ke(e){Zd(e)&&(this.We+=e,this.Fe+=e)}Xe(){return{minValue:this.Fe,maxValue:this.We}}static Ze(e){return null===e?null:new ep(e.minValue,e.maxValue)}}class tp{constructor(e,t){this.Ge=e,this.Je=t||null}Qe(){return this.Ge}tr(){return this.Je}Xe(){return{priceRange:null===this.Ge?null:this.Ge.Xe(),margins:this.Je||void 0}}static Ze(e){return null===e?null:new tp(ep.Ze(e.priceRange),e.margins)}}class np extends qm{constructor(e,t){super(e),this.ir=t}te(){const e=this.Zn;e.Vt=!1;const t=this.ir.N();if(!this.Jn.Vt()||!t.lineVisible)return;const n=this.ir.sr();null!==n&&(e.Vt=!0,e.ut=n,e.R=t.color,e.ct=t.lineWidth,e.Xt=t.lineStyle,e.Kn=this.ir.N().id)}}class sp extends Cm{constructor(e,t){super(),this.ge=e,this.ir=t}qi(e,t,n){e.Vt=!1,t.Vt=!1;const s=this.ir.N(),i=s.axisLabelVisible,r=""!==s.title,a=this.ge;if(!i||!a.Vt())return;const o=this.ir.sr();if(null===o)return;r&&(t.ri=s.title,t.Vt=!0),t.Ht=a.Qt().Ut(o/a.Ft().$t()),e.ri=this.nr(s.price),e.Vt=!0;const l=this.ge.Qt().Xi().X(s.axisLabelColor||s.color);n.Z=l.Z;const c=s.axisLabelTextColor||l.G;e.R=c,t.R=c,n.Bi=o}nr(e){const t=this.ge.zt();return null===t?"":this.ge.Ft().Zi(e,t.Wt)}}class ip{constructor(e,t){this.ge=e,this.Ps=t,this.er=new np(e,this),this.Fn=new sp(e,this),this.rr=new $m(this.Fn,e,e.Qt())}hr(e){Kd(this.Ps,e),this.kt(),this.ge.Qt().ar()}N(){return this.Ps}lr(){return this.er}_r(){return this.rr}ur(){return this.Fn}kt(){this.er.kt(),this.Fn.kt()}sr(){const e=this.ge,t=e.Ft();if(e.Qt().Et().Ki()||t.Ki())return null;const n=e.zt();return null===n?null:t.Nt(this.Ps.price,n.Wt)}}class rp extends Mm{constructor(e){super(),this.ts=e}Qt(){return this.ts}}const ap={Bar:(e,t,n,s)=>{const i=t.upColor,r=t.downColor,a=Qd(e(n,s)),o=Jd(a.Wt[0])<=Jd(a.Wt[3]);return{cr:a.R??(o?i:r)}},Candlestick:(e,t,n,s)=>{const i=t.upColor,r=t.downColor,a=t.borderUpColor,o=t.borderDownColor,l=t.wickUpColor,c=t.wickDownColor,u=Qd(e(n,s)),h=Jd(u.Wt[0])<=Jd(u.Wt[3]);return{cr:u.R??(h?i:r),dr:u.Ht??(h?a:o),pr:u.vr??(h?l:c)}},Custom:(e,t,n,s)=>({cr:Qd(e(n,s)).R??t.color}),Area:(e,t,n,s)=>{const i=Qd(e(n,s));return{cr:i.vt??t.lineColor,vt:i.vt??t.lineColor,mr:i.mr??t.topColor,wr:i.wr??t.bottomColor}},Baseline:(e,t,n,s)=>{const i=Qd(e(n,s));return{cr:i.Wt[3]>=t.baseValue.price?t.topLineColor:t.bottomLineColor,gr:i.gr??t.topLineColor,Mr:i.Mr??t.bottomLineColor,br:i.br??t.topFillColor1,Sr:i.Sr??t.topFillColor2,Cr:i.Cr??t.bottomFillColor1,Pr:i.Pr??t.bottomFillColor2}},Line:(e,t,n,s)=>{const i=Qd(e(n,s));return{cr:i.R??t.color,vt:i.R??t.color}},Histogram:(e,t,n,s)=>({cr:Qd(e(n,s)).R??t.color})};class op{constructor(e){this.kr=(e,t)=>void 0!==t?t.Wt:this.ge.Xs().yr(e),this.ge=e,this.Tr=ap[e.Rr()]}Dr(e,t){return this.Tr(this.kr,this.ge.N(),e,t)}}function lp(e,t,n,s,i=0,r=t.length){let a=r-i;for(;0<a;){const r=a>>1,o=i+r;s(t[o],n)===e?(i=o+1,a-=r+1):a=r}return i}const cp=lp.bind(null,!0),up=lp.bind(null,!1);var hp;!function(e){e[e.NearestLeft=-1]="NearestLeft",e[e.None=0]="None",e[e.NearestRight=1]="NearestRight"}(hp||(hp={}));const dp=30;class mp{constructor(){this.Vr=[],this.Ir=new Map,this.Br=new Map,this.Er=[]}Ar(){return this.zr()>0?this.Vr[this.Vr.length-1]:null}Lr(){return this.zr()>0?this.Or(0):null}Ks(){return this.zr()>0?this.Or(this.Vr.length-1):null}zr(){return this.Vr.length}Ki(){return 0===this.zr()}Te(e){return null!==this.Nr(e,0)}yr(e){return this.Fr(e)}Fr(e,t=0){const n=this.Nr(e,t);return null===n?null:{...this.Wr(n),Re:this.Or(n)}}Hr(){return this.Vr}Ur(e,t,n){if(this.Ki())return null;let s=null;for(const i of n)s=pp(s,this.$r(e,t,i));return s}ht(e){this.Br.clear(),this.Ir.clear(),this.Vr=e,this.Er=e.map(e=>e.Re)}qr(){return this.Er}Or(e){return this.Vr[e].Re}Wr(e){return this.Vr[e]}Nr(e,t){const n=this.Yr(e);if(null===n&&0!==t)switch(t){case-1:return this.jr(e);case 1:return this.Kr(e);default:throw new TypeError("Unknown search mode")}return n}jr(e){let t=this.Xr(e);return t>0&&(t-=1),t!==this.Vr.length&&this.Or(t)<e?t:null}Kr(e){const t=this.Zr(e);return t!==this.Vr.length&&e<this.Or(t)?t:null}Yr(e){const t=this.Xr(e);return t===this.Vr.length||e<this.Vr[t].Re?null:t}Xr(e){return cp(this.Vr,e,(e,t)=>e.Re<t)}Zr(e){return up(this.Vr,e,(e,t)=>e.Re>t)}Gr(e,t,n){let s=null;for(let i=e;i<t;i++){const e=this.Vr[i].Wt[n];Number.isNaN(e)||(null===s?s={Jr:e,Qr:e}:(e<s.Jr&&(s.Jr=e),e>s.Qr&&(s.Qr=e)))}return s}$r(e,t,n){if(this.Ki())return null;let s=null;const i=Qd(this.Lr()),r=Qd(this.Ks()),a=Math.max(e,i),o=Math.min(t,r),l=Math.ceil(a/dp)*dp,c=Math.max(l,Math.floor(o/dp)*dp);{const e=this.Xr(a),i=this.Zr(Math.min(o,l,t));s=pp(s,this.Gr(e,i,n))}let u=this.Ir.get(n);void 0===u&&(u=new Map,this.Ir.set(n,u));for(let h=Math.max(l+1,a);h<c;h+=dp){const e=Math.floor(h/dp);let t=u.get(e);if(void 0===t){const s=this.Xr(e*dp),i=this.Zr((e+1)*dp-1);t=this.Gr(s,i,n),u.set(e,t)}s=pp(s,t)}{const e=this.Xr(c),t=this.Zr(o);s=pp(s,this.Gr(e,t,n))}return s}}function pp(e,t){return null===e?t:null===t?e:{Jr:Math.min(e.Jr,t.Jr),Qr:Math.max(e.Qr,t.Qr)}}class fp{constructor(e){this.th=e}nt(e,t,n){this.th.draw(e)}ih(e,t,n){var s,i;null==(i=(s=this.th).drawBackground)||i.call(s,e)}}class gp{constructor(e){this.Dn=null,this.sh=e}Tt(){var e;const t=this.sh.renderer();if(null===t)return null;if((null==(e=this.Dn)?void 0:e.nh)===t)return this.Dn.eh;const n=new fp(t);return this.Dn={nh:t,eh:n},n}rh(){var e,t;return(null==(t=(e=this.sh).zOrder)?void 0:t.call(e))??"normal"}}class yp{constructor(e){this.hh=null,this.ah=e}oh(){return this.ah}Ns(){var e,t;null==(t=(e=this.ah).updateAllViews)||t.call(e)}Fs(){var e,t,n;const s=(null==(t=(e=this.ah).paneViews)?void 0:t.call(e))??[];if((null==(n=this.hh)?void 0:n.nh)===s)return this.hh.eh;const i=s.map(e=>new gp(e));return this.hh={nh:s,eh:i},i}jn(e,t){var n,s;return(null==(s=(n=this.ah).hitTest)?void 0:s.call(n,e,t))??null}}let vp=class extends yp{us(){return[]}};class xp{constructor(e){this.th=e}nt(e,t,n){this.th.draw(e)}ih(e,t,n){var s,i;null==(i=(s=this.th).drawBackground)||i.call(s,e)}}class bp{constructor(e){this.Dn=null,this.sh=e}Tt(){var e;const t=this.sh.renderer();if(null===t)return null;if((null==(e=this.Dn)?void 0:e.nh)===t)return this.Dn.eh;const n=new xp(t);return this.Dn={nh:t,eh:n},n}rh(){var e,t;return(null==(t=(e=this.sh).zOrder)?void 0:t.call(e))??"normal"}}function wp(e){var t,n,s;return{ri:e.text(),Bi:e.coordinate(),Ii:null==(t=e.fixedCoordinate)?void 0:t.call(e),R:e.textColor(),Z:e.backColor(),Vt:(null==(n=e.visible)?void 0:n.call(e))??!0,pi:(null==(s=e.tickVisible)?void 0:s.call(e))??!0}}class jp{constructor(e,t){this.Gt=new Tm,this._h=e,this.uh=t}Tt(){return this.Gt.ht({Qi:this.uh.Qi(),...wp(this._h)}),this.Gt}}class kp extends Cm{constructor(e,t){super(),this._h=e,this.Yi=t}qi(e,t,n){const s=wp(this._h);n.Z=s.Z,e.R=s.R;const i=2/12*this.Yi.P();n.Ti=i,n.Ri=i,n.Bi=s.Bi,n.Ii=s.Ii,e.ri=s.ri,e.Vt=s.Vt,e.pi=s.pi}}class Np extends yp{constructor(e,t){super(e),this.dh=null,this.fh=null,this.ph=null,this.mh=null,this.ge=t}cs(){var e,t,n;const s=(null==(t=(e=this.ah).timeAxisViews)?void 0:t.call(e))??[];if((null==(n=this.dh)?void 0:n.nh)===s)return this.dh.eh;const i=this.ge.Qt().Et(),r=s.map(e=>new jp(e,i));return this.dh={nh:s,eh:r},r}Ws(){var e,t,n;const s=(null==(t=(e=this.ah).priceAxisViews)?void 0:t.call(e))??[];if((null==(n=this.fh)?void 0:n.nh)===s)return this.fh.eh;const i=this.ge.Ft(),r=s.map(e=>new kp(e,i));return this.fh={nh:s,eh:r},r}wh(){var e,t,n;const s=(null==(t=(e=this.ah).priceAxisPaneViews)?void 0:t.call(e))??[];if((null==(n=this.ph)?void 0:n.nh)===s)return this.ph.eh;const i=s.map(e=>new bp(e));return this.ph={nh:s,eh:i},i}gh(){var e,t,n;const s=(null==(t=(e=this.ah).timeAxisPaneViews)?void 0:t.call(e))??[];if((null==(n=this.mh)?void 0:n.nh)===s)return this.mh.eh;const i=s.map(e=>new bp(e));return this.mh={nh:s,eh:i},i}Mh(e,t){var n,s;return(null==(s=(n=this.ah).autoscaleInfo)?void 0:s.call(n,e,t))??null}}function Sp(e,t,n,s){e.forEach(e=>{t(e).forEach(e=>{e.rh()===n&&s.push(e)})})}function Cp(e){return e.Fs()}function Pp(e){return e.wh()}function Ep(e){return e.gh()}const Tp=["Area","Line","Baseline"];class Lp extends rp{constructor(e,t,n,s,i){super(e),this.Yt=new mp,this.er=new Xm(this),this.bh=[],this.Sh=new Ym(this),this.xh=null,this.Ch=null,this.Ph=null,this.kh=[],this.Ps=n,this.yh=t;const r=new Km(this);this.vs=[r],this.rr=new $m(r,this,e),Tp.includes(this.yh)&&(this.xh=new Jm(this)),this.Th(),this.sh=s(this,this.Qt(),i)}m(){null!==this.Ph&&clearTimeout(this.Ph)}Be(e){return this.Ps.priceLineColor||e}ke(e){const t={ye:!0},n=this.Ft();if(this.Qt().Et().Ki()||n.Ki()||this.Yt.Ki())return t;const s=this.Qt().Et().Pe(),i=this.zt();if(null===s||null===i)return t;let r,a;if(e){const e=this.Yt.Ar();if(null===e)return t;r=e,a=e.Re}else{const e=this.Yt.Fr(s.bi(),-1);if(null===e)return t;if(r=this.Yt.yr(e.Re),null===r)return t;a=e.Re}const o=r.Wt[3],l=this.Rh().Dr(a,{Wt:r}),c=n.Nt(o,i.Wt);return{ye:!1,gt:o,ri:n.Zi(o,i.Wt),Oe:n.Dh(o),Ne:n.Vh(o,i.Wt),R:l.cr,Bi:c,Re:a}}Rh(){return null!==this.Ch||(this.Ch=new op(this)),this.Ch}N(){return this.Ps}hr(e){const t=e.priceScaleId;void 0!==t&&t!==this.Ps.priceScaleId&&this.Qt().Ih(this,t),Kd(this.Ps,e),void 0!==e.priceFormat&&(this.Th(),this.Qt().Bh()),this.Qt().Eh(this),this.Qt().Ah(),this.sh.kt("options")}ht(e,t){this.Yt.ht(e),this.sh.kt("data"),null!==this.xh&&(t&&t.zh?this.xh.be():0===e.length&&this.xh.Me());const n=this.Qt().Hn(this);this.Qt().Lh(n),this.Qt().Eh(this),this.Qt().Ah(),this.Qt().ar()}Oh(e){const t=new ip(this,e);return this.bh.push(t),this.Qt().Eh(this),t}Nh(e){const t=this.bh.indexOf(e);-1!==t&&this.bh.splice(t,1),this.Qt().Eh(this)}Fh(){return this.bh}Rr(){return this.yh}zt(){const e=this.Wh();return null===e?null:{Wt:e.Wt[3],Hh:e.wt}}Wh(){const e=this.Qt().Et().Pe();if(null===e)return null;const t=e.Uh();return this.Yt.Fr(t,1)}Xs(){return this.Yt}$h(e){const t=this.Yt.yr(e);return null===t?null:"Bar"===this.yh||"Candlestick"===this.yh||"Custom"===this.yh?{qh:t.Wt[0],Yh:t.Wt[1],jh:t.Wt[2],Kh:t.Wt[3]}:t.Wt[3]}Xh(e){const t=[];Sp(this.kh,Cp,"top",t);const n=this.xh;return null!==n&&n.Vt()?(null===this.Ph&&n.xe()&&(this.Ph=setTimeout(()=>{this.Ph=null,this.Qt().Zh()},0)),n.Se(),t.unshift(n),t):t}Fs(){const e=[];this.Gh()||e.push(this.Sh),e.push(this.sh,this.er);const t=this.bh.map(e=>e.lr());return e.push(...t),Sp(this.kh,Cp,"normal",e),e}Jh(){return this.Qh(Cp,"bottom")}ta(e){return this.Qh(Pp,e)}ia(e){return this.Qh(Ep,e)}sa(e,t){return this.kh.map(n=>n.jn(e,t)).filter(e=>null!==e)}us(){return[this.rr,...this.bh.map(e=>e._r())]}Ws(e,t){if(t!==this.es&&!this.Gh())return[];const n=[...this.vs];for(const s of this.bh)n.push(s.ur());return this.kh.forEach(e=>{n.push(...e.Ws())}),n}cs(){const e=[];return this.kh.forEach(t=>{e.push(...t.cs())}),e}Mh(e,t){if(void 0!==this.Ps.autoscaleInfoProvider){const n=this.Ps.autoscaleInfoProvider(()=>{const n=this.na(e,t);return null===n?null:n.Xe()});return tp.Ze(n)}return this.na(e,t)}ea(){return this.Ps.priceFormat.minMove}ra(){return this.ha}Ns(){var e;this.sh.kt();for(const t of this.vs)t.kt();for(const t of this.bh)t.kt();this.er.kt(),this.Sh.kt(),null==(e=this.xh)||e.kt(),this.kh.forEach(e=>e.Ns())}Ft(){return Qd(super.Ft())}At(e){if("Line"!==this.yh&&"Area"!==this.yh&&"Baseline"!==this.yh||!this.Ps.crosshairMarkerVisible)return null;const t=this.Yt.yr(e);return null===t?null:{gt:t.Wt[3],ft:this.aa(),Ht:this.la(),Ot:this.oa(),Lt:this._a(e)}}Ee(){return this.Ps.title}Vt(){return this.Ps.visible}ua(e){this.kh.push(new Np(e,this))}ca(e){this.kh=this.kh.filter(t=>t.oh()!==e)}da(){if("Custom"===this.yh)return e=>this.sh.fa(e)}pa(){if("Custom"===this.yh)return e=>this.sh.va(e)}ma(){return this.Yt.qr()}Gh(){return!Dm(this.Ft().wa())}na(e,t){if(!em(e)||!em(t)||this.Yt.Ki())return null;const n="Line"===this.yh||"Area"===this.yh||"Baseline"===this.yh||"Histogram"===this.yh?[3]:[2,1],s=this.Yt.Ur(e,t,n);let i=null!==s?new ep(s.Jr,s.Qr):null,r=null;if("Histogram"===this.Rr()){const e=this.Ps.base,t=new ep(e,e);i=null!==i?i.vn(t):t}return this.kh.forEach(n=>{const s=n.Mh(e,t);if(null==s?void 0:s.priceRange){const e=new ep(s.priceRange.minValue,s.priceRange.maxValue);i=null!==i?i.vn(e):e}(null==s?void 0:s.margins)&&(r=s.margins)}),new tp(i,r)}aa(){switch(this.yh){case"Line":case"Area":case"Baseline":return this.Ps.crosshairMarkerRadius}return 0}la(){switch(this.yh){case"Line":case"Area":case"Baseline":{const e=this.Ps.crosshairMarkerBorderColor;if(0!==e.length)return e}}return null}oa(){switch(this.yh){case"Line":case"Area":case"Baseline":return this.Ps.crosshairMarkerBorderWidth}return 0}_a(e){switch(this.yh){case"Line":case"Area":case"Baseline":{const e=this.Ps.crosshairMarkerBackgroundColor;if(0!==e.length)return e}}return this.Rh().Dr(e).cr}Th(){switch(this.Ps.priceFormat.type){case"custom":{const e=this.Ps.priceFormat.formatter;this.ha={format:e,formatTickmarks:this.Ps.priceFormat.tickmarksFormatter??(t=>t.map(e))};break}case"volume":this.ha=new zm(this.Ps.priceFormat.precision);break;case"percent":this.ha=new Bm(this.Ps.priceFormat.precision);break;default:{const e=Math.pow(10,this.Ps.priceFormat.precision);this.ha=new Fm(e,this.Ps.priceFormat.minMove*e)}}null!==this.es&&this.es.ga()}Qh(e,t){const n=[];return Sp(this.kh,e,t,n),n}}const Mp=[3],Ip=[0,1,2,3];class _p{constructor(e){this.Ps=e}Ma(e,t,n){let s=e;if(0===this.Ps.mode)return s;const i=n.ys(),r=i.zt();if(null===r)return s;const a=i.Nt(e,r),o=n.ba().filter(e=>e instanceof Lp).reduce((e,s)=>{if(n.Un(s)||!s.Vt())return e;const i=s.Ft(),r=s.Xs();if(i.Ki()||!r.Te(t))return e;const a=r.yr(t);if(null===a)return e;const o=Jd(s.zt()),l=3===this.Ps.mode?Ip:Mp;return e.concat(l.map(e=>i.Nt(a.Wt[e],o.Wt)))},[]);if(0===o.length)return s;o.sort((e,t)=>Math.abs(e-a)-Math.abs(t-a));const l=o[0];return s=i.Ts(l,r),s}}function Dp(e,t,n){return Math.min(Math.max(e,t),n)}function Ap(e,t,n){return t-e<=n}class Op extends mm{constructor(){super(...arguments),this.Yt=null}ht(e){this.Yt=e}et({context:e,bitmapSize:t,horizontalPixelRatio:n,verticalPixelRatio:s}){if(null===this.Yt)return;const i=Math.max(1,Math.floor(n));var r,a;e.lineWidth=i,a=()=>{const r=Qd(this.Yt);if(r.Sa){e.strokeStyle=r.xa,Hd(e,r.Ca),e.beginPath();for(const s of r.Pa){const r=Math.round(s.ka*n);e.moveTo(r,-i),e.lineTo(r,t.height+i)}e.stroke()}if(r.ya){e.strokeStyle=r.Ta,Hd(e,r.Ra),e.beginPath();for(const n of r.Da){const r=Math.round(n.ka*s);e.moveTo(-i,r),e.lineTo(t.width+i,r)}e.stroke()}},(r=e).save(),r.lineWidth%2&&r.translate(.5,.5),a(),r.restore()}}class Rp{constructor(e){this.Gt=new Op,this.xt=!0,this.Pt=e}kt(){this.xt=!0}Tt(){if(this.xt){const e=this.Pt.Qt().N().grid,t={ya:e.horzLines.visible,Sa:e.vertLines.visible,Ta:e.horzLines.color,xa:e.vertLines.color,Ra:e.horzLines.style,Ca:e.vertLines.style,Da:this.Pt.ys().Va(),Pa:(this.Pt.Qt().Et().Va()||[]).map(e=>({ka:e.coord}))};this.Gt.ht(t),this.xt=!1}return this.Gt}}class Fp{constructor(e){this.sh=new Rp(e)}lr(){return this.sh}}const Bp={Ia:4,Ba:1e-4};function zp(e,t){const n=100*(e-t)/t;return t<0?-n:n}function Wp(e,t){const n=zp(e.$e(),t),s=zp(e.qe(),t);return new ep(n,s)}function Up(e,t){const n=100*(e-t)/t+100;return t<0?-n:n}function Vp(e,t){const n=Up(e.$e(),t),s=Up(e.qe(),t);return new ep(n,s)}function $p(e,t){const n=Math.abs(e);if(n<1e-15)return 0;const s=Math.log10(n+t.Ba)+t.Ia;return e<0?-s:s}function Hp(e,t){const n=Math.abs(e);if(n<1e-15)return 0;const s=Math.pow(10,n-t.Ia)-t.Ba;return e<0?-s:s}function qp(e,t){if(null===e)return null;const n=$p(e.$e(),t),s=$p(e.qe(),t);return new ep(n,s)}function Yp(e,t){if(null===e)return null;const n=Hp(e.$e(),t),s=Hp(e.qe(),t);return new ep(n,s)}function Gp(e){if(null===e)return Bp;const t=Math.abs(e.qe()-e.$e());if(t>=1||t<1e-15)return Bp;const n=Math.ceil(Math.abs(Math.log10(t))),s=Bp.Ia+n;return{Ia:s,Ba:1/Math.pow(10,s)}}class Qp{constructor(e,t){if(this.Ea=e,this.Aa=t,function(e){if(e<0)return!1;for(let t=e;t>1;t/=10)if(t%10!=0)return!1;return!0}(this.Ea))this.za=[2,2.5,2];else{this.za=[];for(let e=this.Ea;1!==e;){if(e%2==0)this.za.push(2),e/=2;else{if(e%5!=0)throw new Error("unexpected base");this.za.push(2,2.5),e/=5}if(this.za.length>100)throw new Error("something wrong with base")}}}La(e,t,n){const s=0===this.Ea?0:1/this.Ea;let i=Math.pow(10,Math.max(0,Math.ceil(Math.log10(e-t)))),r=0,a=this.Aa[0];for(;;){const e=Ap(i,s,1e-14)&&i>s+1e-14,t=Ap(i,n*a,1e-14),o=Ap(i,1,1e-14);if(!(e&&t&&o))break;i/=a,a=this.Aa[++r%this.Aa.length]}if(i<=s+1e-14&&(i=s),i=Math.max(1,i),this.za.length>0&&(o=i,Math.abs(o-1)<1e-14))for(r=0,a=this.za[0];Ap(i,n*a,1e-14)&&i>s+1e-14;)i/=a,a=this.za[++r%this.za.length];var o;return i}}class Jp{constructor(e,t,n,s){this.Oa=[],this.Yi=e,this.Ea=t,this.Na=n,this.Fa=s}La(e,t){if(e<t)throw new Error("high < low");const n=this.Yi.$t(),s=(e-t)*this.Wa()/n,i=new Qp(this.Ea,[2,2.5,2]),r=new Qp(this.Ea,[2,2,2.5]),a=new Qp(this.Ea,[2.5,2,2]),o=[];return o.push(i.La(e,t,s),r.La(e,t,s),a.La(e,t,s)),function(e){if(e.length<1)throw Error("array is empty");let t=e[0];for(let n=1;n<e.length;++n)e[n]<t&&(t=e[n]);return t}(o)}Ha(){const e=this.Yi,t=e.zt();if(null===t)return void(this.Oa=[]);const n=e.$t(),s=this.Na(n-1,t),i=this.Na(0,t),r=this.Yi.N().entireTextOnly?this.Ua()/2:0,a=r,o=n-1-r,l=Math.max(s,i),c=Math.min(s,i);if(l===c)return void(this.Oa=[]);const u=this.La(l,c);if(this.$a(t,u,l,c,a,o),e.qa()&&this.Ya(u,c,l)){const e=this.Yi.ja();this.Ka(t,u,a,o,e,2*e)}const h=this.Oa.map(e=>e.Xa),d=this.Yi.Za(h);for(let m=0;m<this.Oa.length;m++)this.Oa[m].Ga=d[m]}Va(){return this.Oa}Ua(){return this.Yi.P()}Wa(){return Math.ceil(2.5*this.Ua())}$a(e,t,n,s,i,r){const a=this.Oa,o=this.Yi;let l=n%t;l+=l<0?t:0;const c=n>=s?1:-1;let u=null,h=0;for(let d=n-l;d>s;d-=t){const n=this.Fa(d,e,!0);null!==u&&Math.abs(n-u)<this.Wa()||n<i||n>r||(h<a.length?(a[h].ka=n,a[h].Ga=o.Ja(d),a[h].Xa=d):a.push({ka:n,Ga:o.Ja(d),Xa:d}),h++,u=n,o.Qa()&&(t=this.La(d*c,s)))}a.length=h}Ka(e,t,n,s,i,r){const a=this.Oa,o=this.tl(e,n,i,r),l=this.tl(e,s,-r,-i),c=this.Fa(0,e,!0)-this.Fa(t,e,!0);a.length>0&&a[0].ka-o.ka<c/2&&a.shift(),a.length>0&&l.ka-a[a.length-1].ka<c/2&&a.pop(),a.unshift(o),a.push(l)}tl(e,t,n,s){const i=(n+s)/2,r=this.Na(t+n,e),a=this.Na(t+s,e),o=Math.min(r,a),l=Math.max(r,a),c=Math.max(.1,this.La(l,o)),u=this.Na(t+i,e),h=u-u%c,d=this.Fa(h,e,!0);return{Ga:this.Yi.Ja(h),ka:d,Xa:h}}Ya(e,t,n){let s=Jd(this.Yi.Qe());return this.Yi.Qa()&&(s=Yp(s,this.Yi.il())),s.$e()-t<e&&n-s.qe()<e}}function Xp(e){return e.slice().sort((e,t)=>Qd(e.hs())-Qd(t.hs()))}var Kp;!function(e){e[e.Normal=0]="Normal",e[e.Logarithmic=1]="Logarithmic",e[e.Percentage=2]="Percentage",e[e.IndexedTo100=3]="IndexedTo100"}(Kp||(Kp={}));const Zp=new Bm,ef=new Fm(100,1);class tf{constructor(e,t,n,s,i){this.sl=0,this.nl=null,this.Ge=null,this.el=null,this.rl={hl:!1,al:null},this.ll=!1,this.ol=0,this._l=0,this.ul=new Xd,this.cl=new Xd,this.dl=[],this.fl=null,this.pl=null,this.vl=null,this.ml=null,this.wl=null,this.ha=ef,this.gl=Gp(null),this.Ml=e,this.Ps=t,this.bl=n,this.Sl=s,this.xl=i,this.Cl=new Jp(this,100,this.Pl.bind(this),this.kl.bind(this))}wa(){return this.Ml}N(){return this.Ps}hr(e){if(Kd(this.Ps,e),this.ga(),void 0!==e.mode&&this.yl({ie:e.mode}),void 0!==e.scaleMargins){const t=Gd(e.scaleMargins.top),n=Gd(e.scaleMargins.bottom);if(t<0||t>1)throw new Error(`Invalid top margin - expect value between 0 and 1, given=${t}`);if(n<0||n>1)throw new Error(`Invalid bottom margin - expect value between 0 and 1, given=${n}`);if(t+n>1)throw new Error(`Invalid margins - sum of margins must be less than 1, given=${t+n}`);this.Tl(),this.vl=null}}Rl(){return this.Ps.autoScale}Dl(){return this.ll}Qa(){return 1===this.Ps.mode}Le(){return 2===this.Ps.mode}Vl(){return 3===this.Ps.mode}il(){return this.gl}ie(){return{sn:this.Ps.autoScale,Il:this.Ps.invertScale,ie:this.Ps.mode}}yl(e){const t=this.ie();let n=null;void 0!==e.sn&&(this.Ps.autoScale=e.sn),void 0!==e.ie&&(this.Ps.mode=e.ie,2!==e.ie&&3!==e.ie||(this.Ps.autoScale=!0),this.rl.hl=!1),1===t.ie&&e.ie!==t.ie&&(function(e,t){if(null===e)return!1;const n=Hp(e.$e(),t),s=Hp(e.qe(),t);return isFinite(n)&&isFinite(s)}(this.Ge,this.gl)?(n=Yp(this.Ge,this.gl),null!==n&&this.Bl(n)):this.Ps.autoScale=!0),1===e.ie&&e.ie!==t.ie&&(n=qp(this.Ge,this.gl),null!==n&&this.Bl(n));const s=t.ie!==this.Ps.mode;s&&(2===t.ie||this.Le())&&this.ga(),s&&(3===t.ie||this.Vl())&&this.ga(),void 0!==e.Il&&t.Il!==e.Il&&(this.Ps.invertScale=e.Il,this.El()),this.cl.p(t,this.ie())}Al(){return this.cl}P(){return this.bl.fontSize}$t(){return this.sl}zl(e){this.sl!==e&&(this.sl=e,this.Tl(),this.vl=null)}Ll(){if(this.nl)return this.nl;const e=this.$t()-this.Ol()-this.Nl();return this.nl=e,e}Qe(){return this.Fl(),this.Ge}Bl(e,t){const n=this.Ge;(t||null===n&&null!==e||null!==n&&!n.He(e))&&(this.vl=null,this.Ge=e)}Wl(e){this.Bl(e),this.Hl(null!==e)}Ki(){return this.Fl(),0===this.sl||!this.Ge||this.Ge.Ki()}Ul(e){return this.Il()?e:this.$t()-1-e}Nt(e,t){return this.Le()?e=zp(e,t):this.Vl()&&(e=Up(e,t)),this.kl(e,t)}$l(e,t,n){this.Fl();const s=this.Nl(),i=Qd(this.Qe()),r=i.$e(),a=i.qe(),o=this.Ll()-1,l=this.Il(),c=o/(a-r),u=void 0===n?0:n.from,h=void 0===n?e.length:n.to,d=this.ql();for(let m=u;m<h;m++){const n=e[m],i=n.gt;if(isNaN(i))continue;let a=i;null!==d&&(a=d(n.gt,t));const o=s+c*(a-r),u=l?o:this.sl-1-o;n.ut=u}}Yl(e,t,n){this.Fl();const s=this.Nl(),i=Qd(this.Qe()),r=i.$e(),a=i.qe(),o=this.Ll()-1,l=this.Il(),c=o/(a-r),u=void 0===n?0:n.from,h=void 0===n?e.length:n.to,d=this.ql();for(let m=u;m<h;m++){const n=e[m];let i=n.qh,a=n.Yh,o=n.jh,u=n.Kh;null!==d&&(i=d(n.qh,t),a=d(n.Yh,t),o=d(n.jh,t),u=d(n.Kh,t));let h=s+c*(i-r),p=l?h:this.sl-1-h;n.jl=p,h=s+c*(a-r),p=l?h:this.sl-1-h,n.Kl=p,h=s+c*(o-r),p=l?h:this.sl-1-h,n.Xl=p,h=s+c*(u-r),p=l?h:this.sl-1-h,n.Zl=p}}Ts(e,t){const n=this.Pl(e,t);return this.Gl(n,t)}Gl(e,t){let n=e;return this.Le()?(s=n,(i=t)<0&&(s=-s),n=s/100*i+i):this.Vl()&&(n=function(e,t){return e-=100,t<0&&(e=-e),e/100*t+t}(n,t)),n;var s,i}ba(){return this.dl}Dt(){return this.pl||(this.pl=Xp(this.dl)),this.pl}Jl(e){-1===this.dl.indexOf(e)&&(this.dl.push(e),this.ga(),this.Ql())}io(e){const t=this.dl.indexOf(e);if(-1===t)throw new Error("source is not attached to scale");this.dl.splice(t,1),0===this.dl.length&&(this.yl({sn:!0}),this.Bl(null)),this.ga(),this.Ql()}zt(){let e=null;for(const t of this.dl){const n=t.zt();null!==n&&(null===e||n.Hh<e.Hh)&&(e=n)}return null===e?null:e.Wt}Il(){return this.Ps.invertScale}Va(){const e=null===this.zt();if(null!==this.vl&&(e||this.vl.so===e))return this.vl.Va;this.Cl.Ha();const t=this.Cl.Va();return this.vl={Va:t,so:e},this.ul.p(),t}no(){return this.ul}eo(e){this.Le()||this.Vl()||null===this.ml&&null===this.el&&(this.Ki()||(this.ml=this.sl-e,this.el=Qd(this.Qe()).Ue()))}ro(e){if(this.Le()||this.Vl())return;if(null===this.ml)return;this.yl({sn:!1}),(e=this.sl-e)<0&&(e=0);let t=(this.ml+.2*(this.sl-1))/(e+.2*(this.sl-1));const n=Qd(this.el).Ue();t=Math.max(t,.1),n.je(t),this.Bl(n)}ho(){this.Le()||this.Vl()||(this.ml=null,this.el=null)}ao(e){this.Rl()||null===this.wl&&null===this.el&&(this.Ki()||(this.wl=e,this.el=Qd(this.Qe()).Ue()))}lo(e){if(this.Rl())return;if(null===this.wl)return;const t=Qd(this.Qe()).Ye()/(this.Ll()-1);let n=e-this.wl;this.Il()&&(n*=-1);const s=n*t,i=Qd(this.el).Ue();i.Ke(s),this.Bl(i,!0),this.vl=null}oo(){this.Rl()||null!==this.wl&&(this.wl=null,this.el=null)}ra(){return this.ha||this.ga(),this.ha}Zi(e,t){switch(this.Ps.mode){case 2:return this._o(zp(e,t));case 3:return this.ra().format(Up(e,t));default:return this.nr(e)}}Ja(e){switch(this.Ps.mode){case 2:return this._o(e);case 3:return this.ra().format(e);default:return this.nr(e)}}Za(e){switch(this.Ps.mode){case 2:return this.uo(e);case 3:return this.ra().formatTickmarks(e);default:return this.co(e)}}Dh(e){return this.nr(e,Qd(this.fl).ra())}Vh(e,t){return e=zp(e,t),this._o(e,Zp)}do(){return this.dl}fo(e){this.rl={al:e,hl:!1}}Ns(){this.dl.forEach(e=>e.Ns())}qa(){return this.Ps.ensureEdgeTickMarksVisible&&this.Rl()}ja(){return this.P()/2}ga(){this.vl=null;let e=1/0;this.fl=null;for(const n of this.dl)n.hs()<e&&(e=n.hs(),this.fl=n);let t=100;null!==this.fl&&(t=Math.round(1/this.fl.ea())),this.ha=ef,this.Le()?(this.ha=Zp,t=100):this.Vl()?(this.ha=new Fm(100,1),t=100):null!==this.fl&&(this.ha=this.fl.ra()),this.Cl=new Jp(this,t,this.Pl.bind(this),this.kl.bind(this)),this.Cl.Ha()}Ql(){this.pl=null}Xi(){return this.xl}Hl(e){this.ll=e}Ol(){return this.Il()?this.Ps.scaleMargins.bottom*this.$t()+this._l:this.Ps.scaleMargins.top*this.$t()+this.ol}Nl(){return this.Il()?this.Ps.scaleMargins.top*this.$t()+this.ol:this.Ps.scaleMargins.bottom*this.$t()+this._l}Fl(){this.rl.hl||(this.rl.hl=!0,this.po())}Tl(){this.nl=null}kl(e,t){if(this.Fl(),this.Ki())return 0;e=this.Qa()&&e?$p(e,this.gl):e;const n=Qd(this.Qe()),s=this.Nl()+(this.Ll()-1)*(e-n.$e())/n.Ye();return this.Ul(s)}Pl(e,t){if(this.Fl(),this.Ki())return 0;const n=this.Ul(e),s=Qd(this.Qe()),i=s.$e()+s.Ye()*((n-this.Nl())/(this.Ll()-1));return this.Qa()?Hp(i,this.gl):i}El(){this.vl=null,this.Cl.Ha()}po(){if(this.Dl()&&!this.Rl())return;const e=this.rl.al;if(null===e)return;let t=null;const n=this.do();let s=0,i=0;for(const o of n){if(!o.Vt())continue;const n=o.zt();if(null===n)continue;const r=o.Mh(e.Uh(),e.bi());let a=r&&r.Qe();if(null!==a){switch(this.Ps.mode){case 1:a=qp(a,this.gl);break;case 2:a=Wp(a,n.Wt);break;case 3:a=Vp(a,n.Wt)}if(t=null===t?a:t.vn(Qd(a)),null!==r){const e=r.tr();null!==e&&(s=Math.max(s,e.above),i=Math.max(i,e.below))}}}if(this.qa()&&(s=Math.max(s,this.ja()),i=Math.max(i,this.ja())),s===this.ol&&i===this._l||(this.ol=s,this._l=i,this.vl=null,this.Tl()),null!==t){if(t.$e()===t.qe()){const e=this.fl,n=5*(null===e||this.Le()||this.Vl()?1:e.ea());this.Qa()&&(t=Yp(t,this.gl)),t=new ep(t.$e()-n,t.qe()+n),this.Qa()&&(t=qp(t,this.gl))}if(this.Qa()){const e=Yp(t,this.gl),n=Gp(e);if(r=n,a=this.gl,r.Ia!==a.Ia||r.Ba!==a.Ba){const s=null!==this.el?Yp(this.el,this.gl):null;this.gl=n,t=qp(e,n),null!==s&&(this.el=qp(s,n))}}this.Bl(t)}else null===this.Ge&&(this.Bl(new ep(-.5,.5)),this.gl=Gp(null));var r,a}ql(){return this.Le()?zp:this.Vl()?Up:this.Qa()?e=>$p(e,this.gl):null}vo(e,t,n){return void 0===t?(void 0===n&&(n=this.ra()),n.format(e)):t(e)}mo(e,t,n){return void 0===t?(void 0===n&&(n=this.ra()),n.formatTickmarks(e)):t(e)}nr(e,t){return this.vo(e,this.Sl.priceFormatter,t)}co(e,t){const n=this.Sl.priceFormatter;return this.mo(e,this.Sl.tickmarksPriceFormatter??(n?e=>e.map(n):void 0),t)}_o(e,t){return this.vo(e,this.Sl.percentageFormatter,t)}uo(e,t){const n=this.Sl.percentageFormatter;return this.mo(e,this.Sl.tickmarksPercentageFormatter??(n?e=>e.map(n):void 0),t)}}function nf(e){return e instanceof Lp}class sf{constructor(e,t){this.dl=[],this.wo=new Map,this.sl=0,this.Mo=0,this.bo=1,this.pl=null,this.So=!1,this.xo=new Xd,this.kh=[],this.uh=e,this.ts=t,this.Co=new Fp(this);const n=t.N();this.Po=this.ko("left",n.leftPriceScale),this.yo=this.ko("right",n.rightPriceScale),this.Po.Al().i(this.To.bind(this,this.Po),this),this.yo.Al().i(this.To.bind(this,this.yo),this),this.Ro(n)}Ro(e){if(e.leftPriceScale&&this.Po.hr(e.leftPriceScale),e.rightPriceScale&&this.yo.hr(e.rightPriceScale),e.localization&&(this.Po.ga(),this.yo.ga()),e.overlayPriceScales){const t=Array.from(this.wo.values());for(const n of t){const t=Qd(n[0].Ft());t.hr(e.overlayPriceScales),e.localization&&t.ga()}}}Do(e){switch(e){case"left":return this.Po;case"right":return this.yo}return this.wo.has(e)?Gd(this.wo.get(e))[0].Ft():null}m(){this.Qt().Vo().u(this),this.Po.Al().u(this),this.yo.Al().u(this),this.dl.forEach(e=>{e.m&&e.m()}),this.kh=this.kh.filter(e=>{const t=e.oh();return t.detached&&t.detached(),!1}),this.xo.p()}Io(){return this.bo}Bo(e){this.bo=e}Qt(){return this.ts}Qi(){return this.Mo}$t(){return this.sl}Eo(e){this.Mo=e,this.Ao()}zl(e){this.sl=e,this.Po.zl(e),this.yo.zl(e),this.dl.forEach(t=>{if(this.Un(t)){const n=t.Ft();null!==n&&n.zl(e)}}),this.Ao()}zo(e){this.So=e}Lo(){return this.So}Oo(){return this.dl.filter(nf)}ba(){return this.dl}Un(e){const t=e.Ft();return null===t||this.Po!==t&&this.yo!==t}Jl(e,t,n){this.No(e,t,n?e.hs():this.dl.length)}io(e,t){const n=this.dl.indexOf(e);Yd(-1!==n,"removeDataSource: invalid data source"),this.dl.splice(n,1),t||this.dl.forEach((e,t)=>e.ls(t));const s=Qd(e.Ft()).wa();if(this.wo.has(s)){const t=Gd(this.wo.get(s)),n=t.indexOf(e);-1!==n&&(t.splice(n,1),0===t.length&&this.wo.delete(s))}const i=e.Ft();i&&i.ba().indexOf(e)>=0&&(i.io(e),this.Fo(i)),this.pl=null}qn(e){return e===this.Po?"left":e===this.yo?"right":"overlay"}Wo(){return this.Po}Ho(){return this.yo}Uo(e,t){e.eo(t)}$o(e,t){e.ro(t),this.Ao()}qo(e){e.ho()}Yo(e,t){e.ao(t)}jo(e,t){e.lo(t),this.Ao()}Ko(e){e.oo()}Ao(){this.dl.forEach(e=>{e.Ns()})}ys(){let e=null;return this.ts.N().rightPriceScale.visible&&0!==this.yo.ba().length?e=this.yo:this.ts.N().leftPriceScale.visible&&0!==this.Po.ba().length?e=this.Po:0!==this.dl.length&&(e=this.dl[0].Ft()),null===e&&(e=this.yo),e}$n(){let e=null;return this.ts.N().rightPriceScale.visible?e=this.yo:this.ts.N().leftPriceScale.visible&&(e=this.Po),e}Fo(e){null!==e&&e.Rl()&&this.Xo(e)}Zo(e){const t=this.uh.Pe();e.yl({sn:!0}),null!==t&&e.fo(t),this.Ao()}Go(){this.Xo(this.Po),this.Xo(this.yo)}Jo(){this.Fo(this.Po),this.Fo(this.yo),this.dl.forEach(e=>{this.Un(e)&&this.Fo(e.Ft())}),this.Ao(),this.ts.ar()}Dt(){return null===this.pl&&(this.pl=Xp(this.dl)),this.pl}Qo(e,t){t=Dp(t,0,this.dl.length-1);const n=this.dl.indexOf(e);Yd(-1!==n,"setSeriesOrder: invalid data source"),this.dl.splice(n,1),this.dl.splice(t,0,e),this.dl.forEach((e,t)=>e.ls(t)),this.pl=null;for(const s of[this.Po,this.yo])s.Ql(),s.ga();this.ts.ar()}It(){return this.Dt().filter(nf)}t_(){return this.xo}i_(){return this.Co}ua(e){this.kh.push(new vp(e))}ca(e){this.kh=this.kh.filter(t=>t.oh()!==e),e.detached&&e.detached(),this.ts.ar()}s_(){return this.kh}sa(e,t){return this.kh.map(n=>n.jn(e,t)).filter(e=>null!==e)}Xo(e){const t=e.do();if(t&&t.length>0&&!this.uh.Ki()){const t=this.uh.Pe();null!==t&&e.fo(t)}e.Ns()}No(e,t,n){let s=this.Do(t);if(null===s&&(s=this.ko(t,this.ts.N().overlayPriceScales)),this.dl.splice(n,0,e),!Dm(t)){const n=this.wo.get(t)||[];n.push(e),this.wo.set(t,n)}e.ls(n),s.Jl(e),e._s(s),this.Fo(s),this.pl=null}To(e,t,n){t.ie!==n.ie&&this.Xo(e)}ko(e,t){const n={visible:!0,autoScale:!0,...sm(t)},s=new tf(e,n,this.ts.N().layout,this.ts.N().localization,this.ts.Xi());return s.zl(this.$t()),s}}function rf(e){return{n_:e.n_,e_:{Kn:e.r_.externalId},h_:e.r_.cursorStyle}}function af(e,t,n,s){for(const i of e){const e=i.Tt(s);if(null!==e&&e.jn){const s=e.jn(t,n);if(null!==s)return{a_:i,e_:s}}}return null}function of(e){return void 0!==e.Fs}function lf(e,t,n){const s=[e,...e.Dt()],i=function(e,t,n){var s;let i,r;for(const l of e){const e=(null==(s=l.sa)?void 0:s.call(l,t,n))??[];for(const t of e)a=t.zOrder,(!(o=null==i?void 0:i.zOrder)||"top"===a&&"top"!==o||"normal"===a&&"bottom"===o)&&(i=t,r=l)}var a,o;return i&&r?{r_:i,n_:r}:null}(s,t,n);if("top"===(null==i?void 0:i.r_.zOrder))return rf(i);for(const r of s){if(i&&i.n_===r&&"bottom"!==i.r_.zOrder&&!i.r_.isBackground)return rf(i);if(of(r)){const s=af(r.Fs(e),t,n,e);if(null!==s)return{n_:r,a_:s.a_,e_:s.e_}}if(i&&i.n_===r&&"bottom"!==i.r_.zOrder&&i.r_.isBackground)return rf(i)}return(null==i?void 0:i.r_)?rf(i):null}class cf{constructor(e,t,n=50){this.kn=0,this.yn=1,this.Tn=1,this.Dn=new Map,this.Rn=new Map,this.l_=e,this.o_=t,this.Vn=n}__(e){const t=e.time,n=this.o_.cacheKey(t),s=this.Dn.get(n);if(void 0!==s)return s.u_;if(this.kn===this.Vn){const e=this.Rn.get(this.Tn);this.Rn.delete(this.Tn),this.Dn.delete(Gd(e)),this.Tn++,this.kn--}const i=this.l_(e);return this.Dn.set(n,{u_:i,An:this.yn}),this.Rn.set(this.yn,n),this.kn++,this.yn++,i}}class uf{constructor(e,t){Yd(e<=t,"right should be >= left"),this.c_=e,this.d_=t}Uh(){return this.c_}bi(){return this.d_}f_(){return this.d_-this.c_+1}Te(e){return this.c_<=e&&e<=this.d_}He(e){return this.c_===e.Uh()&&this.d_===e.bi()}}function hf(e,t){return null===e||null===t?e===t:e.He(t)}class df{constructor(){this.p_=new Map,this.Dn=null,this.v_=!1}m_(e){this.v_=e,this.Dn=null}w_(e,t){this.g_(t),this.Dn=null;for(let n=t;n<e.length;++n){const t=e[n];let s=this.p_.get(t.timeWeight);void 0===s&&(s=[],this.p_.set(t.timeWeight,s)),s.push({index:n,time:t.time,weight:t.timeWeight,originalTime:t.originalTime})}}M_(e,t,n,s,i){const r=Math.ceil(t/e);return null!==this.Dn&&this.Dn.b_===r&&i===this.Dn.S_&&n===this.Dn.x_||(this.Dn={S_:i,x_:n,Va:this.C_(r,n,s),b_:r}),this.Dn.Va}g_(e){if(0===e)return void this.p_.clear();const t=[];this.p_.forEach((n,s)=>{e<=n[0].index?t.push(s):n.splice(cp(n,e,t=>t.index<e),1/0)});for(const n of t)this.p_.delete(n)}C_(e,t,n){let s=[];const i=e=>!t||n.has(e.index);for(const r of Array.from(this.p_.keys()).sort((e,t)=>t-e)){if(!this.p_.get(r))continue;const t=s;s=[];const n=t.length;let a=0;const o=Gd(this.p_.get(r)),l=o.length;let c=1/0,u=-1/0;for(let r=0;r<l;r++){const l=o[r],h=l.index;for(;a<n;){const e=t[a],n=e.index;if(!(n<h&&i(e))){c=n;break}a++,s.push(e),u=n,c=1/0}if(c-h>=e&&h-u>=e&&i(l))s.push(l),u=h;else if(this.v_)return t}for(;a<n;a++)i(t[a])&&s.push(t[a])}return s}}class mf{constructor(e){this.P_=e}k_(){return null===this.P_?null:new uf(Math.floor(this.P_.Uh()),Math.ceil(this.P_.bi()))}y_(){return this.P_}static T_(){return new mf(null)}}function pf(e,t){return e.weight>t.weight?e:t}class ff{constructor(e,t,n,s){this.Mo=0,this.R_=null,this.D_=[],this.wl=null,this.ml=null,this.V_=new df,this.I_=new Map,this.B_=mf.T_(),this.E_=!0,this.A_=new Xd,this.z_=new Xd,this.L_=new Xd,this.O_=null,this.N_=null,this.F_=new Map,this.W_=-1,this.H_=[],this.Ps=t,this.Sl=n,this.U_=t.rightOffset,this.q_=t.barSpacing,this.ts=e,this.o_=s,this.Y_(),this.V_.m_(t.uniformDistribution),this.j_()}N(){return this.Ps}K_(e){Kd(this.Sl,e),this.X_(),this.Y_()}hr(e,t){Kd(this.Ps,e),this.Ps.fixLeftEdge&&this.Z_(),this.Ps.fixRightEdge&&this.G_(),void 0!==e.barSpacing&&this.ts.dn(e.barSpacing),void 0!==e.rightOffset&&this.ts.fn(e.rightOffset),void 0===e.minBarSpacing&&void 0===e.maxBarSpacing||this.ts.dn(e.barSpacing??this.q_),void 0!==e.ignoreWhitespaceIndices&&e.ignoreWhitespaceIndices!==this.Ps.ignoreWhitespaceIndices&&this.j_(),this.X_(),this.Y_(),this.L_.p()}Rs(e){var t;return(null==(t=this.D_[e])?void 0:t.time)??null}ss(e){return this.D_[e]??null}J_(e,t){if(this.D_.length<1)return null;if(this.o_.key(e)>this.o_.key(this.D_[this.D_.length-1].time))return t?this.D_.length-1:null;const n=cp(this.D_,this.o_.key(e),(e,t)=>this.o_.key(e.time)<t);return this.o_.key(e)<this.o_.key(this.D_[n].time)?t?n:null:n}Ki(){return 0===this.Mo||0===this.D_.length||null===this.R_}Q_(){return this.D_.length>0}Pe(){return this.tu(),this.B_.k_()}iu(){return this.tu(),this.B_.y_()}su(){const e=this.Pe();if(null===e)return null;const t={from:e.Uh(),to:e.bi()};return this.nu(t)}nu(e){const t=Math.round(e.from),n=Math.round(e.to),s=Qd(this.eu()),i=Qd(this.ru());return{from:Qd(this.ss(Math.max(s,t))),to:Qd(this.ss(Math.min(i,n)))}}hu(e){return{from:Qd(this.J_(e.from,!0)),to:Qd(this.J_(e.to,!0))}}Qi(){return this.Mo}Eo(e){if(!isFinite(e)||e<=0)return;if(this.Mo===e)return;const t=this.iu(),n=this.Mo;if(this.Mo=e,this.E_=!0,this.Ps.lockVisibleTimeRangeOnResize&&0!==n){const t=this.q_*e/n;this.q_=t}if(this.Ps.fixLeftEdge&&null!==t&&t.Uh()<=0){const t=n-e;this.U_-=Math.round(t/this.q_)+1,this.E_=!0}this.au(),this.lu()}qt(e){if(this.Ki()||!em(e))return 0;const t=this.ou()+this.U_-e;return this.Mo-(t+.5)*this.q_-1}_u(e,t){const n=this.ou(),s=void 0===t?0:t.from,i=void 0===t?e.length:t.to;for(let r=s;r<i;r++){const t=e[r].wt,s=n+this.U_-t,i=this.Mo-(s+.5)*this.q_-1;e[r]._t=i}}uu(e,t){const n=Math.ceil(this.cu(e));return t&&this.Ps.ignoreWhitespaceIndices&&!this.du(n)?this.fu(n):n}fn(e){this.E_=!0,this.U_=e,this.lu(),this.ts.pu(),this.ts.ar()}vu(){return this.q_}dn(e){this.mu(e),this.lu(),this.ts.pu(),this.ts.ar()}wu(){return this.U_}Va(){if(this.Ki())return null;if(null!==this.N_)return this.N_;const e=this.q_,t=5*(this.ts.N().layout.fontSize+4)/8*(this.Ps.tickMarkMaxCharacterLength||8),n=Math.round(t/e),s=Qd(this.Pe()),i=Math.max(s.Uh(),s.Uh()-n),r=Math.max(s.bi(),s.bi()-n),a=this.V_.M_(e,t,this.Ps.ignoreWhitespaceIndices,this.F_,this.W_),o=this.eu()+n,l=this.ru()-n,c=this.gu(),u=this.Ps.fixLeftEdge||c,h=this.Ps.fixRightEdge||c;let d=0;for(const m of a){if(!(i<=m.index&&m.index<=r))continue;let e;d<this.H_.length?(e=this.H_[d],e.coord=this.qt(m.index),e.label=this.Mu(m),e.weight=m.weight):(e={needAlignCoordinate:!1,coord:this.qt(m.index),label:this.Mu(m),weight:m.weight},this.H_.push(e)),this.q_>t/2&&!c?e.needAlignCoordinate=!1:e.needAlignCoordinate=u&&m.index<=o||h&&m.index>=l,d++}return this.H_.length=d,this.N_=this.H_,this.H_}bu(){this.E_=!0,this.dn(this.Ps.barSpacing),this.fn(this.Ps.rightOffset)}Su(e){this.E_=!0,this.R_=e,this.lu(),this.Z_()}xu(e,t){const n=this.cu(e),s=this.vu(),i=s+t*(s/10);this.dn(i),this.Ps.rightBarStaysOnScroll||this.fn(this.wu()+(n-this.cu(e)))}eo(e){this.wl&&this.oo(),null===this.ml&&null===this.O_&&(this.Ki()||(this.ml=e,this.Cu()))}ro(e){if(null===this.O_)return;const t=Dp(this.Mo-e,0,this.Mo),n=Dp(this.Mo-Qd(this.ml),0,this.Mo);0!==t&&0!==n&&this.dn(this.O_.vu*t/n)}ho(){null!==this.ml&&(this.ml=null,this.Pu())}ao(e){null===this.wl&&null===this.O_&&(this.Ki()||(this.wl=e,this.Cu()))}lo(e){if(null===this.wl)return;const t=(this.wl-e)/this.vu();this.U_=Qd(this.O_).wu+t,this.E_=!0,this.lu()}oo(){null!==this.wl&&(this.wl=null,this.Pu())}ku(){this.yu(this.Ps.rightOffset)}yu(e,t=400){if(!isFinite(e))throw new RangeError("offset is required and must be finite number");if(!isFinite(t)||t<=0)throw new RangeError("animationDuration (optional) must be finite positive number");const n=this.U_,s=performance.now();this.ts._n({Tu:e=>(e-s)/t>=1,Ru:i=>{const r=(i-s)/t;return r>=1?e:n+(e-n)*r}})}kt(e,t){this.E_=!0,this.D_=e,this.V_.w_(e,t),this.lu()}Du(){return this.A_}Vu(){return this.z_}Iu(){return this.L_}ou(){return this.R_||0}Bu(e){const t=e.f_();this.mu(this.Mo/t),this.U_=e.bi()-this.ou(),this.lu(),this.E_=!0,this.ts.pu(),this.ts.ar()}Eu(){const e=this.eu(),t=this.ru();null!==e&&null!==t&&this.Bu(new uf(e,t+this.Ps.rightOffset))}Au(e){const t=new uf(e.from,e.to);this.Bu(t)}ns(e){return void 0!==this.Sl.timeFormatter?this.Sl.timeFormatter(e.originalTime):this.o_.formatHorzItem(e.time)}j_(){if(!this.Ps.ignoreWhitespaceIndices)return;this.F_.clear();const e=this.ts.js();for(const t of e)for(const e of t.ma())this.F_.set(e,!0);this.W_++}gu(){const e=this.ts.N().handleScroll,t=this.ts.N().handleScale;return!(e.horzTouchDrag||e.mouseWheel||e.pressedMouseMove||e.vertTouchDrag||t.axisDoubleClickReset.time||t.axisPressedMouseMove.time||t.mouseWheel||t.pinch)}eu(){return 0===this.D_.length?null:0}ru(){return 0===this.D_.length?null:this.D_.length-1}zu(e){return(this.Mo-1-e)/this.q_}cu(e){const t=this.zu(e),n=this.ou()+this.U_-t;return Math.round(1e6*n)/1e6}mu(e){const t=this.q_;this.q_=e,this.au(),t!==this.q_&&(this.E_=!0,this.Lu())}tu(){if(!this.E_)return;if(this.E_=!1,this.Ki())return void this.Ou(mf.T_());const e=this.ou(),t=this.Mo/this.q_,n=this.U_+e,s=new uf(n-t+1,n);this.Ou(new mf(s))}au(){const e=Dp(this.q_,this.Nu(),this.Fu());this.q_!==e&&(this.q_=e,this.E_=!0)}Fu(){return this.Ps.maxBarSpacing>0?this.Ps.maxBarSpacing:.5*this.Mo}Nu(){return this.Ps.fixLeftEdge&&this.Ps.fixRightEdge&&0!==this.D_.length?this.Mo/this.D_.length:this.Ps.minBarSpacing}lu(){const e=this.Wu();null!==e&&this.U_<e&&(this.U_=e,this.E_=!0);const t=this.Hu();this.U_>t&&(this.U_=t,this.E_=!0)}Wu(){const e=this.eu(),t=this.R_;return null===e||null===t?null:e-t-1+(this.Ps.fixLeftEdge?this.Mo/this.q_:Math.min(2,this.D_.length))}Hu(){return this.Ps.fixRightEdge?0:this.Mo/this.q_-Math.min(2,this.D_.length)}Cu(){this.O_={vu:this.vu(),wu:this.wu()}}Pu(){this.O_=null}Mu(e){let t=this.I_.get(e.weight);return void 0===t&&(t=new cf(e=>this.Uu(e),this.o_),this.I_.set(e.weight,t)),t.__(e)}Uu(e){return this.o_.formatTickmark(e,this.Sl)}Ou(e){const t=this.B_;this.B_=e,hf(t.k_(),this.B_.k_())||this.A_.p(),hf(t.y_(),this.B_.y_())||this.z_.p(),this.Lu()}Lu(){this.N_=null}X_(){this.Lu(),this.I_.clear()}Y_(){this.o_.updateFormatter(this.Sl)}Z_(){if(!this.Ps.fixLeftEdge)return;const e=this.eu();if(null===e)return;const t=this.Pe();if(null===t)return;const n=t.Uh()-e;if(n<0){const e=this.U_-n-1;this.fn(e)}this.au()}G_(){this.lu(),this.au()}du(e){return!this.Ps.ignoreWhitespaceIndices||this.F_.get(e)||!1}fu(e){const t=function*(e){const t=Math.round(e),n=t<e;let s=1;for(;;)n?(yield t+s,yield t-s):(yield t-s,yield t+s),s++}(e),n=this.ru();for(;n;){const e=t.next().value;if(this.F_.get(e))return e;if(e<0||e>n)break}return e}}var gf,yf,vf,xf,bf;!function(e){e[e.OnTouchEnd=0]="OnTouchEnd",e[e.OnNextTap=1]="OnNextTap"}(gf||(gf={}));class wf{constructor(e,t,n){this.$u=[],this.qu=[],this.Mo=0,this.Yu=null,this.ju=new Xd,this.Ku=new Xd,this.Xu=null,this.Zu=e,this.Ps=t,this.o_=n,this.xl=new hm(this.Ps.layout.colorParsers),this.Gu=new lm(this),this.uh=new ff(this,t.timeScale,this.Ps.localization,n),this.Ct=new _m(this,t.crosshair),this.Ju=new _p(t.crosshair),t.addDefaultPane&&(this.Qu(0),this.$u[0].Bo(2)),this.tc=this.sc(0),this.nc=this.sc(1)}Bh(){this.ec(Am.gn())}ar(){this.ec(Am.wn())}Zh(){this.ec(new Am(1))}Eh(e){const t=this.rc(e);this.ec(t)}hc(){return this.Yu}ac(e){var t,n,s,i;if((null==(t=this.Yu)?void 0:t.n_)===(null==e?void 0:e.n_)&&(null==(s=null==(n=this.Yu)?void 0:n.e_)?void 0:s.Kn)===(null==(i=null==e?void 0:e.e_)?void 0:i.Kn))return;const r=this.Yu;this.Yu=e,null!==r&&this.Eh(r.n_),null!==e&&e.n_!==(null==r?void 0:r.n_)&&this.Eh(e.n_)}N(){return this.Ps}hr(e){Kd(this.Ps,e),this.$u.forEach(t=>t.Ro(e)),void 0!==e.timeScale&&this.uh.hr(e.timeScale),void 0!==e.localization&&this.uh.K_(e.localization),(e.leftPriceScale||e.rightPriceScale)&&this.ju.p(),this.tc=this.sc(0),this.nc=this.sc(1),this.Bh()}lc(e,t,n=0){const s=this.$u[n];if(void 0===s)return;if("left"===e)return Kd(this.Ps,{leftPriceScale:t}),s.Ro({leftPriceScale:t}),this.ju.p(),void this.Bh();if("right"===e)return Kd(this.Ps,{rightPriceScale:t}),s.Ro({rightPriceScale:t}),this.ju.p(),void this.Bh();const i=this.oc(e,n);null!==i&&(i.Ft.hr(t),this.ju.p())}oc(e,t){const n=this.$u[t];if(void 0===n)return null;const s=n.Do(e);return null!==s?{Us:n,Ft:s}:null}Et(){return this.uh}$s(){return this.$u}_c(){return this.Ct}uc(){return this.Ku}cc(e,t){e.zl(t),this.pu()}Eo(e){this.Mo=e,this.uh.Eo(this.Mo),this.$u.forEach(t=>t.Eo(e)),this.pu()}dc(e){1!==this.$u.length&&(Yd(e>=0&&e<this.$u.length,"Invalid pane index"),this.$u.splice(e,1),this.Bh())}fc(e,t){if(this.$u.length<2)return;Yd(e>=0&&e<this.$u.length,"Invalid pane index");const n=this.$u[e],s=this.$u.reduce((e,t)=>e+t.Io(),0),i=this.$u.reduce((e,t)=>e+t.$t(),0),r=i-30*(this.$u.length-1);t=Math.min(r,Math.max(30,t));const a=s/i,o=n.$t();n.Bo(t*a);let l=t-o,c=this.$u.length-1;for(const u of this.$u)if(u!==n){const e=Math.min(r,Math.max(30,u.$t()-l/c));l-=u.$t()-e,c-=1;const t=e*a;u.Bo(t)}this.Bh()}vc(e,t){Yd(e>=0&&e<this.$u.length&&t>=0&&t<this.$u.length,"Invalid pane index");const n=this.$u[e],s=this.$u[t];this.$u[e]=s,this.$u[t]=n,this.Bh()}mc(e,t){if(Yd(e>=0&&e<this.$u.length&&t>=0&&t<this.$u.length,"Invalid pane index"),e===t)return;const[n]=this.$u.splice(e,1);this.$u.splice(t,0,n),this.Bh()}Uo(e,t,n){e.Uo(t,n)}$o(e,t,n){e.$o(t,n),this.Ah(),this.ec(this.wc(e,2))}qo(e,t){e.qo(t),this.ec(this.wc(e,2))}Yo(e,t,n){t.Rl()||e.Yo(t,n)}jo(e,t,n){t.Rl()||(e.jo(t,n),this.Ah(),this.ec(this.wc(e,2)))}Ko(e,t){t.Rl()||(e.Ko(t),this.ec(this.wc(e,2)))}Zo(e,t){e.Zo(t),this.ec(this.wc(e,2))}gc(e){this.uh.eo(e)}Mc(e,t){const n=this.Et();if(n.Ki()||0===t)return;const s=n.Qi();e=Math.max(1,Math.min(e,s)),n.xu(e,t),this.pu()}bc(e){this.Sc(0),this.xc(e),this.Cc()}Pc(e){this.uh.ro(e),this.pu()}kc(){this.uh.ho(),this.ar()}Sc(e){this.uh.ao(e)}xc(e){this.uh.lo(e),this.pu()}Cc(){this.uh.oo(),this.ar()}js(){return this.qu}yc(e,t,n,s,i){this.Ct.Vs(e,t);let r=NaN,a=this.uh.uu(e,!0);const o=this.uh.Pe();null!==o&&(a=Math.min(Math.max(o.Uh(),a),o.bi()));const l=s.ys(),c=l.zt();if(null!==c&&(r=l.Ts(t,c)),r=this.Ju.Ma(r,a,s),this.Ct.As(a,r,s),this.Zh(),!i){const i=lf(s,e,t);this.ac(i&&{n_:i.n_,e_:i.e_,h_:i.h_||null}),this.Ku.p(this.Ct.Bt(),{x:e,y:t},n)}}Tc(e,t,n){const s=n.ys(),i=s.zt(),r=s.Nt(e,Qd(i)),a=this.uh.J_(t,!0),o=this.uh.qt(Qd(a));this.yc(o,r,null,n,!0)}Rc(e){this._c().Ls(),this.Zh(),e||this.Ku.p(null,null,null)}Ah(){const e=this.Ct.Us();if(null!==e){const t=this.Ct.Bs(),n=this.Ct.Es();this.yc(t,n,null,e)}this.Ct.Ns()}Dc(e,t,n){const s=this.uh.Rs(0);void 0!==t&&void 0!==n&&this.uh.kt(t,n);const i=this.uh.Rs(0),r=this.uh.ou(),a=this.uh.Pe();if(null!==a&&null!==s&&null!==i){const t=a.Te(r),o=this.o_.key(s)>this.o_.key(i),l=null!==e&&e>r&&!o,c=this.uh.N().allowShiftVisibleRangeOnWhitespaceReplacement,u=t&&(!(void 0===n)||c)&&this.uh.N().shiftVisibleRangeOnNewBar;if(l&&!u){const t=e-r;this.uh.fn(this.uh.wu()-t)}}this.uh.Su(e)}Lh(e){null!==e&&e.Jo()}Hn(e){if(e instanceof sf)return e;const t=this.$u.find(t=>t.Dt().includes(e));return void 0===t?null:t}pu(){this.$u.forEach(e=>e.Jo()),this.Ah()}m(){this.$u.forEach(e=>e.m()),this.$u.length=0,this.Ps.localization.priceFormatter=void 0,this.Ps.localization.percentageFormatter=void 0,this.Ps.localization.timeFormatter=void 0}Vc(){return this.Gu}Yn(){return this.Gu.N()}Vo(){return this.ju}Ic(e,t){const n=this.Qu(t);this.Bc(e,n),this.qu.push(e),1===this.qu.length?this.Bh():this.ar()}Ec(e){const t=this.Hn(e),n=this.qu.indexOf(e);Yd(-1!==n,"Series not found");const s=Qd(t);this.qu.splice(n,1),s.io(e),e.m&&e.m(),this.uh.j_(),this.Ac(s)}Ih(e,t){const n=Qd(this.Hn(e));n.io(e,!0),n.Jl(e,t,!0)}Eu(){const e=Am.wn();e.rn(),this.ec(e)}zc(e){const t=Am.wn();t.ln(e),this.ec(t)}cn(){const e=Am.wn();e.cn(),this.ec(e)}dn(e){const t=Am.wn();t.dn(e),this.ec(t)}fn(e){const t=Am.wn();t.fn(e),this.ec(t)}_n(e){const t=Am.wn();t._n(e),this.ec(t)}hn(){const e=Am.wn();e.hn(),this.ec(e)}Lc(){return this.Ps.rightPriceScale.visible?"right":"left"}Oc(e,t){if(Yd(t>=0,"Index should be greater or equal to 0"),t===this.Nc(e))return;const n=Qd(this.Hn(e));n.io(e);const s=this.Qu(t);this.Bc(e,s),0===n.ba().length&&this.Ac(n),this.Bh()}Fc(){return this.nc}$(){return this.tc}Ut(e){const t=this.nc,n=this.tc;if(t===n)return t;if(e=Math.max(0,Math.min(100,Math.round(100*e))),null===this.Xu||this.Xu.mr!==n||this.Xu.wr!==t)this.Xu={mr:n,wr:t,Wc:new Map};else{const t=this.Xu.Wc.get(e);if(void 0!==t)return t}const s=this.xl.tt(n,t,e/100);return this.Xu.Wc.set(e,s),s}Hc(e){return this.$u.indexOf(e)}Xi(){return this.xl}Uc(){return this.$c()}$c(e){const t=new sf(this.uh,this);this.$u.push(t);const n=e??this.$u.length-1,s=Am.gn();return s.Qs(n,{tn:0,sn:!0}),this.ec(s),t}Qu(e){return Yd(e>=0,"Index should be greater or equal to 0"),(e=Math.min(this.$u.length,e))<this.$u.length?this.$u[e]:this.$c(e)}Nc(e){return this.$u.findIndex(t=>t.Oo().includes(e))}wc(e,t){const n=new Am(t);if(null!==e){const s=this.$u.indexOf(e);n.Qs(s,{tn:t})}return n}rc(e,t){return void 0===t&&(t=2),this.wc(this.Hn(e),t)}ec(e){this.Zu&&this.Zu(e),this.$u.forEach(e=>e.i_().lr().kt())}Bc(e,t){const n=e.N().priceScaleId,s=void 0!==n?n:this.Lc();t.Jl(e,s),Dm(s)||e.hr(e.N())}sc(e){const t=this.Ps.layout;return"gradient"===t.background.type?0===e?t.background.topColor:t.background.bottomColor:t.background.color}Ac(e){!e.Lo()&&0===e.ba().length&&this.$u.length>1&&this.$u.splice(this.Hc(e),1)}}function jf(e){return!Zd(e)&&!tm(e)}function kf(e){return Zd(e)}!function(e){e[e.Disabled=0]="Disabled",e[e.Continuous=1]="Continuous",e[e.OnDataUpdate=2]="OnDataUpdate"}(yf||(yf={})),function(e){e[e.LastBar=0]="LastBar",e[e.LastVisible=1]="LastVisible"}(vf||(vf={})),function(e){e.Solid="solid",e.VerticalGradient="gradient"}(xf||(xf={})),function(e){e[e.Year=0]="Year",e[e.Month=1]="Month",e[e.DayOfMonth=2]="DayOfMonth",e[e.Time=3]="Time",e[e.TimeWithSeconds=4]="TimeWithSeconds"}(bf||(bf={}));const Nf=e=>e.getUTCFullYear();class Sf{constructor(e="yyyy-MM-dd",t="default"){this.qc=e,this.Yc=t}__(e){return function(e,t,n){return t.replace(/yyyy/g,(s=e,Rm(Nf(s),4))).replace(/yy/g,(e=>Rm(Nf(e)%100,2))(e)).replace(/MMMM/g,((e,t)=>new Date(e.getUTCFullYear(),e.getUTCMonth(),1).toLocaleString(t,{month:"long"}))(e,n)).replace(/MMM/g,((e,t)=>new Date(e.getUTCFullYear(),e.getUTCMonth(),1).toLocaleString(t,{month:"short"}))(e,n)).replace(/MM/g,(e=>Rm(e.getUTCMonth()+1,2))(e)).replace(/dd/g,(e=>Rm(e.getUTCDate(),2))(e));var s}(e,this.qc,this.Yc)}}class Cf{constructor(e){this.jc=e||"%h:%m:%s"}__(e){return this.jc.replace("%h",Rm(e.getUTCHours(),2)).replace("%m",Rm(e.getUTCMinutes(),2)).replace("%s",Rm(e.getUTCSeconds(),2))}}const Pf={Kc:"yyyy-MM-dd",Xc:"%h:%m:%s",Zc:" ",Gc:"default"};class Ef{constructor(e={}){const t={...Pf,...e};this.Jc=new Sf(t.Kc,t.Gc),this.Qc=new Cf(t.Xc),this.td=t.Zc}__(e){return`${this.Jc.__(e)}${this.td}${this.Qc.__(e)}`}}function Tf(e){return 60*e*60*1e3}function Lf(e){return 60*e*1e3}const Mf=[{sd:1e3,nd:10},{sd:Lf(1),nd:20},{sd:Lf(5),nd:21},{sd:Lf(30),nd:22},{sd:Tf(1),nd:30},{sd:Tf(3),nd:31},{sd:Tf(6),nd:32},{sd:Tf(12),nd:33}];function If(e,t){if(e.getUTCFullYear()!==t.getUTCFullYear())return 70;if(e.getUTCMonth()!==t.getUTCMonth())return 60;if(e.getUTCDate()!==t.getUTCDate())return 50;for(let n=Mf.length-1;n>=0;--n)if(Math.floor(t.getTime()/Mf[n].sd)!==Math.floor(e.getTime()/Mf[n].sd))return Mf[n].nd;return 0}function _f(e){let t=e;if(tm(e)&&(t=Af(e)),!jf(t))throw new Error("time must be of type BusinessDay");const n=new Date(Date.UTC(t.year,t.month-1,t.day,0,0,0,0));return{ed:Math.round(n.getTime()/1e3),rd:t}}function Df(e){if(!kf(e))throw new Error("time must be of type isUTCTimestamp");return{ed:e}}function Af(e){const t=new Date(e);if(isNaN(t.getTime()))throw new Error(`Invalid date string=${e}, expected format=yyyy-mm-dd`);return{day:t.getUTCDate(),month:t.getUTCMonth()+1,year:t.getUTCFullYear()}}function Of(e){tm(e.time)&&(e.time=Af(e.time))}class Rf{options(){return this.Ps}setOptions(e){this.Ps=e,this.updateFormatter(e.localization)}preprocessData(e){Array.isArray(e)?e.forEach(Of):Of(e)}createConverterToInternalObj(e){return Qd(0===(t=e).length?null:jf(t[0].time)||tm(t[0].time)?_f:Df);var t}key(e){return"object"==typeof e&&"ed"in e?e.ed:this.key(this.convertHorzItemToInternal(e))}cacheKey(e){const t=e;return void 0===t.rd?new Date(1e3*t.ed).getTime():new Date(Date.UTC(t.rd.year,t.rd.month-1,t.rd.day)).getTime()}convertHorzItemToInternal(e){return kf(t=e)?Df(t):jf(t)?_f(t):_f(Af(t));var t}updateFormatter(e){if(!this.Ps)return;const t=e.dateFormat;this.Ps.timeScale.timeVisible?this.hd=new Ef({Kc:t,Xc:this.Ps.timeScale.secondsVisible?"%h:%m:%s":"%h:%m",Zc:"   ",Gc:e.locale}):this.hd=new Sf(t,e.locale)}formatHorzItem(e){const t=e;return this.hd.__(new Date(1e3*t.ed))}formatTickmark(e,t){const n=function(e,t,n){switch(e){case 0:case 10:return t?n?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return t?3:2;case 50:return 2;case 60:return 1;case 70:return 0}}(e.weight,this.Ps.timeScale.timeVisible,this.Ps.timeScale.secondsVisible),s=this.Ps.timeScale;if(void 0!==s.tickMarkFormatter){const i=s.tickMarkFormatter(e.originalTime,n,t.locale);if(null!==i)return i}return function(e,t,n){const s={};switch(t){case 0:s.year="numeric";break;case 1:s.month="short";break;case 2:s.day="numeric";break;case 3:s.hour12=!1,s.hour="2-digit",s.minute="2-digit";break;case 4:s.hour12=!1,s.hour="2-digit",s.minute="2-digit",s.second="2-digit"}const i=void 0===e.rd?new Date(1e3*e.ed):new Date(Date.UTC(e.rd.year,e.rd.month-1,e.rd.day));return new Date(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate(),i.getUTCHours(),i.getUTCMinutes(),i.getUTCSeconds(),i.getUTCMilliseconds()).toLocaleString(n,s)}(e.time,n,t.locale)}maxTickMarkWeight(e){let t=e.reduce(pf,e[0]).weight;return t>30&&t<50&&(t=30),t}fillWeightsForPoints(e,t){!function(e,t=0){if(0===e.length)return;let n=0===t?null:e[t-1].time.ed,s=null!==n?new Date(1e3*n):null,i=0;for(let r=t;r<e.length;++r){const t=e[r],a=new Date(1e3*t.time.ed);null!==s&&(t.timeWeight=If(a,s)),i+=t.time.ed-(n||t.time.ed),n=t.time.ed,s=a}if(0===t&&e.length>1){const t=Math.ceil(i/(e.length-1)),n=new Date(1e3*(e[0].time.ed-t));e[0].timeWeight=If(new Date(1e3*e[0].time.ed),n)}}(e,t)}static ad(e){return Kd({localization:{dateFormat:"dd MMM 'yy"}},e??{})}}const Ff="undefined"!=typeof window;function Bf(){return!!Ff&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function zf(){return!!Ff&&/iPhone|iPad|iPod/.test(window.navigator.platform)}function Wf(e){return e+e%2}class Uf{constructor(e,t,n){this.ld=0,this.od=null,this._d={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY},this.ud=0,this.dd=null,this.fd={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY},this.pd=null,this.vd=!1,this.md=null,this.wd=null,this.gd=!1,this.Md=!1,this.bd=!1,this.Sd=null,this.xd=null,this.Cd=null,this.Pd=null,this.kd=null,this.yd=null,this.Td=null,this.Rd=0,this.Dd=!1,this.Vd=!1,this.Id=!1,this.Bd=0,this.Ed=null,this.Ad=!zf(),this.zd=e=>{this.Ld(e)},this.Od=e=>{if(this.Nd(e)){const t=this.Fd(e);if(++this.ud,this.dd&&this.ud>1){const{Wd:n}=this.Hd(Hf(e),this.fd);n<30&&!this.bd&&this.Ud(t,this.qd.$d),this.Yd()}}else{const t=this.Fd(e);if(++this.ld,this.od&&this.ld>1){const{Wd:n}=this.Hd(Hf(e),this._d);n<5&&!this.Md&&this.jd(t,this.qd.Kd),this.Xd()}}},this.Zd=e,this.qd=t,this.Ps=n,this.Gd()}m(){null!==this.Sd&&(this.Sd(),this.Sd=null),null!==this.xd&&(this.xd(),this.xd=null),null!==this.Pd&&(this.Pd(),this.Pd=null),null!==this.kd&&(this.kd(),this.kd=null),null!==this.yd&&(this.yd(),this.yd=null),null!==this.Cd&&(this.Cd(),this.Cd=null),this.Jd(),this.Xd()}Qd(e){this.Pd&&this.Pd();const t=this.tf.bind(this);if(this.Pd=()=>{this.Zd.removeEventListener("mousemove",t)},this.Zd.addEventListener("mousemove",t),this.Nd(e))return;const n=this.Fd(e);this.jd(n,this.qd.if),this.Ad=!0}Xd(){null!==this.od&&clearTimeout(this.od),this.ld=0,this.od=null,this._d={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY}}Yd(){null!==this.dd&&clearTimeout(this.dd),this.ud=0,this.dd=null,this.fd={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY}}tf(e){if(this.Id||null!==this.wd)return;if(this.Nd(e))return;const t=this.Fd(e);this.jd(t,this.qd.sf),this.Ad=!0}nf(e){const t=Yf(e.changedTouches,Qd(this.Ed));if(null===t)return;if(this.Bd=qf(e),null!==this.Td)return;if(this.Vd)return;this.Dd=!0;const n=this.Hd(Hf(t),Qd(this.wd)),{ef:s,rf:i,Wd:r}=n;if(this.gd||!(r<5)){if(!this.gd){const e=.5*s,t=i>=e&&!this.Ps.hf(),n=e>i&&!this.Ps.af();t||n||(this.Vd=!0),this.gd=!0,this.bd=!0,this.Jd(),this.Yd()}if(!this.Vd){const n=this.Fd(e,t);this.Ud(n,this.qd.lf),$f(e)}}}_f(e){if(0!==e.button)return;const t=this.Hd(Hf(e),Qd(this.md)),{Wd:n}=t;if(n>=5&&(this.Md=!0,this.Xd()),this.Md){const t=this.Fd(e);this.jd(t,this.qd.uf)}}Hd(e,t){const n=Math.abs(t._t-e._t),s=Math.abs(t.ut-e.ut);return{ef:n,rf:s,Wd:n+s}}cf(e){let t=Yf(e.changedTouches,Qd(this.Ed));if(null===t&&0===e.touches.length&&(t=e.changedTouches[0]),null===t)return;this.Ed=null,this.Bd=qf(e),this.Jd(),this.wd=null,this.yd&&(this.yd(),this.yd=null);const n=this.Fd(e,t);if(this.Ud(n,this.qd.df),++this.ud,this.dd&&this.ud>1){const{Wd:e}=this.Hd(Hf(t),this.fd);e<30&&!this.bd&&this.Ud(n,this.qd.$d),this.Yd()}else this.bd||(this.Ud(n,this.qd.ff),this.qd.ff&&$f(e));0===this.ud&&$f(e),0===e.touches.length&&this.vd&&(this.vd=!1,$f(e))}Ld(e){if(0!==e.button)return;const t=this.Fd(e);if(this.md=null,this.Id=!1,this.kd&&(this.kd(),this.kd=null),Bf()&&this.Zd.ownerDocument.documentElement.removeEventListener("mouseleave",this.zd),!this.Nd(e))if(this.jd(t,this.qd.pf),++this.ld,this.od&&this.ld>1){const{Wd:n}=this.Hd(Hf(e),this._d);n<5&&!this.Md&&this.jd(t,this.qd.Kd),this.Xd()}else this.Md||this.jd(t,this.qd.vf)}Jd(){null!==this.pd&&(clearTimeout(this.pd),this.pd=null)}mf(e){if(null!==this.Ed)return;const t=e.changedTouches[0];this.Ed=t.identifier,this.Bd=qf(e);const n=this.Zd.ownerDocument.documentElement;this.bd=!1,this.gd=!1,this.Vd=!1,this.wd=Hf(t),this.yd&&(this.yd(),this.yd=null);{const t=this.nf.bind(this),s=this.cf.bind(this);this.yd=()=>{n.removeEventListener("touchmove",t),n.removeEventListener("touchend",s)},n.addEventListener("touchmove",t,{passive:!1}),n.addEventListener("touchend",s,{passive:!1}),this.Jd(),this.pd=setTimeout(this.wf.bind(this,e),240)}const s=this.Fd(e,t);this.Ud(s,this.qd.gf),this.dd||(this.ud=0,this.dd=setTimeout(this.Yd.bind(this),500),this.fd=Hf(t))}Mf(e){if(0!==e.button)return;const t=this.Zd.ownerDocument.documentElement;Bf()&&t.addEventListener("mouseleave",this.zd),this.Md=!1,this.md=Hf(e),this.kd&&(this.kd(),this.kd=null);{const e=this._f.bind(this),n=this.Ld.bind(this);this.kd=()=>{t.removeEventListener("mousemove",e),t.removeEventListener("mouseup",n)},t.addEventListener("mousemove",e),t.addEventListener("mouseup",n)}if(this.Id=!0,this.Nd(e))return;const n=this.Fd(e);this.jd(n,this.qd.bf),this.od||(this.ld=0,this.od=setTimeout(this.Xd.bind(this),500),this._d=Hf(e))}Gd(){this.Zd.addEventListener("mouseenter",this.Qd.bind(this)),this.Zd.addEventListener("touchcancel",this.Jd.bind(this));{const e=this.Zd.ownerDocument,t=e=>{this.qd.Sf&&(e.composed&&this.Zd.contains(e.composedPath()[0])||e.target&&this.Zd.contains(e.target)||this.qd.Sf())};this.xd=()=>{e.removeEventListener("touchstart",t)},this.Sd=()=>{e.removeEventListener("mousedown",t)},e.addEventListener("mousedown",t),e.addEventListener("touchstart",t,{passive:!0})}zf()&&(this.Cd=()=>{this.Zd.removeEventListener("dblclick",this.Od)},this.Zd.addEventListener("dblclick",this.Od)),this.Zd.addEventListener("mouseleave",this.xf.bind(this)),this.Zd.addEventListener("touchstart",this.mf.bind(this),{passive:!0}),function(e){Ff&&void 0!==window.chrome&&e.addEventListener("mousedown",e=>{if(1===e.button)return e.preventDefault(),!1})}(this.Zd),this.Zd.addEventListener("mousedown",this.Mf.bind(this)),this.Cf(),this.Zd.addEventListener("touchmove",()=>{},{passive:!1})}Cf(){void 0===this.qd.Pf&&void 0===this.qd.kf&&void 0===this.qd.yf||(this.Zd.addEventListener("touchstart",e=>this.Tf(e.touches),{passive:!0}),this.Zd.addEventListener("touchmove",e=>{if(2===e.touches.length&&null!==this.Td&&void 0!==this.qd.kf){const t=Vf(e.touches[0],e.touches[1])/this.Rd;this.qd.kf(this.Td,t),$f(e)}},{passive:!1}),this.Zd.addEventListener("touchend",e=>{this.Tf(e.touches)}))}Tf(e){1===e.length&&(this.Dd=!1),2!==e.length||this.Dd||this.vd?this.Rf():this.Df(e)}Df(e){const t=this.Zd.getBoundingClientRect()||{left:0,top:0};this.Td={_t:(e[0].clientX-t.left+(e[1].clientX-t.left))/2,ut:(e[0].clientY-t.top+(e[1].clientY-t.top))/2},this.Rd=Vf(e[0],e[1]),void 0!==this.qd.Pf&&this.qd.Pf(),this.Jd()}Rf(){null!==this.Td&&(this.Td=null,void 0!==this.qd.yf&&this.qd.yf())}xf(e){if(this.Pd&&this.Pd(),this.Nd(e))return;if(!this.Ad)return;const t=this.Fd(e);this.jd(t,this.qd.Vf),this.Ad=!zf()}wf(e){const t=Yf(e.touches,Qd(this.Ed));if(null===t)return;const n=this.Fd(e,t);this.Ud(n,this.qd.If),this.bd=!0,this.vd=!0}Nd(e){return e.sourceCapabilities&&void 0!==e.sourceCapabilities.firesTouchEvents?e.sourceCapabilities.firesTouchEvents:qf(e)<this.Bd+500}Ud(e,t){t&&t.call(this.qd,e)}jd(e,t){t&&t.call(this.qd,e)}Fd(e,t){const n=t||e,s=this.Zd.getBoundingClientRect()||{left:0,top:0};return{clientX:n.clientX,clientY:n.clientY,pageX:n.pageX,pageY:n.pageY,screenX:n.screenX,screenY:n.screenY,localX:n.clientX-s.left,localY:n.clientY-s.top,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey,Bf:!e.type.startsWith("mouse")&&"contextmenu"!==e.type&&"click"!==e.type,Ef:e.type,Af:n.target,a_:e.view,zf:()=>{"touchstart"!==e.type&&$f(e)}}}}function Vf(e,t){const n=e.clientX-t.clientX,s=e.clientY-t.clientY;return Math.sqrt(n*n+s*s)}function $f(e){e.cancelable&&e.preventDefault()}function Hf(e){return{_t:e.pageX,ut:e.pageY}}function qf(e){return e.timeStamp||performance.now()}function Yf(e,t){for(let n=0;n<e.length;++n)if(e[n].identifier===t)return e[n];return null}class Gf{constructor(e,t,n){this.Lf=null,this.Of=null,this.Nf=!0,this.Ff=null,this.Wf=e,this.Hf=e.Uf()[t],this.$f=e.Uf()[n],this.qf=document.createElement("tr"),this.qf.style.height="1px",this.Yf=document.createElement("td"),this.Yf.style.position="relative",this.Yf.style.padding="0",this.Yf.style.margin="0",this.Yf.setAttribute("colspan","3"),this.jf(),this.qf.appendChild(this.Yf),this.Nf=this.Wf.N().layout.panes.enableResize,this.Nf?this.Kf():(this.Lf=null,this.Of=null)}m(){null!==this.Of&&this.Of.m()}Xf(){return this.qf}Zf(){return Ad({width:this.Hf.Zf().width,height:1})}Gf(){return Ad({width:this.Hf.Gf().width,height:1*window.devicePixelRatio})}Jf(e,t,n){const s=this.Gf();e.fillStyle=this.Wf.N().layout.panes.separatorColor,e.fillRect(t,n,s.width,s.height)}kt(){this.jf(),this.Wf.N().layout.panes.enableResize!==this.Nf&&(this.Nf=this.Wf.N().layout.panes.enableResize,this.Nf?this.Kf():(null!==this.Lf&&(this.Yf.removeChild(this.Lf.Qf),this.Yf.removeChild(this.Lf.tp),this.Lf=null),null!==this.Of&&(this.Of.m(),this.Of=null)))}Kf(){const e=document.createElement("div"),t=e.style;t.position="fixed",t.display="none",t.zIndex="49",t.top="0",t.left="0",t.width="100%",t.height="100%",t.cursor="row-resize",this.Yf.appendChild(e);const n=document.createElement("div"),s=n.style;s.position="absolute",s.zIndex="50",s.top="-4px",s.height="9px",s.width="100%",s.backgroundColor="",s.cursor="row-resize",this.Yf.appendChild(n);const i={if:this.ip.bind(this),Vf:this.sp.bind(this),bf:this.np.bind(this),gf:this.np.bind(this),uf:this.ep.bind(this),lf:this.ep.bind(this),pf:this.rp.bind(this),df:this.rp.bind(this)};this.Of=new Uf(n,i,{hf:()=>!1,af:()=>!0}),this.Lf={tp:n,Qf:e}}jf(){this.Yf.style.background=this.Wf.N().layout.panes.separatorColor}ip(e){null!==this.Lf&&(this.Lf.tp.style.backgroundColor=this.Wf.N().layout.panes.separatorHoverColor)}sp(e){null!==this.Lf&&null===this.Ff&&(this.Lf.tp.style.backgroundColor="")}np(e){if(null===this.Lf)return;const t=this.Hf.hp().Io()+this.$f.hp().Io(),n=t/(this.Hf.Zf().height+this.$f.Zf().height),s=30*n;t<=2*s||(this.Ff={ap:e.pageY,lp:this.Hf.hp().Io(),op:t-s,_p:t,up:n,cp:s},this.Lf.Qf.style.display="block")}ep(e){const t=this.Ff;if(null===t)return;const n=(e.pageY-t.ap)*t.up,s=Dp(t.lp+n,t.cp,t.op);this.Hf.hp().Bo(s),this.$f.hp().Bo(t._p-s),this.Wf.Qt().Bh()}rp(e){null!==this.Ff&&null!==this.Lf&&(this.Ff=null,this.Lf.Qf.style.display="none")}}function Qf(e,t){return e.dp-t.dp}function Jf(e,t,n){const s=(e.dp-t.dp)/(e.wt-t.wt);return Math.sign(s)*Math.min(Math.abs(s),n)}class Xf{constructor(e,t,n,s){this.fp=null,this.pp=null,this.vp=null,this.mp=null,this.wp=null,this.gp=0,this.Mp=0,this.bp=e,this.Sp=t,this.xp=n,this.Mn=s}Cp(e,t){if(null!==this.fp){if(this.fp.wt===t)return void(this.fp.dp=e);if(Math.abs(this.fp.dp-e)<this.Mn)return}this.mp=this.vp,this.vp=this.pp,this.pp=this.fp,this.fp={wt:t,dp:e}}le(e,t){if(null===this.fp||null===this.pp)return;if(t-this.fp.wt>50)return;let n=0;const s=Jf(this.fp,this.pp,this.Sp),i=Qf(this.fp,this.pp),r=[s],a=[i];if(n+=i,null!==this.vp){const e=Jf(this.pp,this.vp,this.Sp);if(Math.sign(e)===Math.sign(s)){const t=Qf(this.pp,this.vp);if(r.push(e),a.push(t),n+=t,null!==this.mp){const e=Jf(this.vp,this.mp,this.Sp);if(Math.sign(e)===Math.sign(s)){const t=Qf(this.vp,this.mp);r.push(e),a.push(t),n+=t}}}}let o=0;for(let l=0;l<r.length;++l)o+=a[l]/n*r[l];Math.abs(o)<this.bp||(this.wp={dp:e,wt:t},this.Mp=o,this.gp=function(e,t){const n=Math.log(t);return Math.log(1*n/-e)/n}(Math.abs(o),this.xp))}Ru(e){const t=Qd(this.wp),n=e-t.wt;return t.dp+this.Mp*(Math.pow(this.xp,n)-1)/Math.log(this.xp)}Tu(e){return null===this.wp||this.Pp(e)===this.gp}Pp(e){const t=e-Qd(this.wp).wt;return Math.min(t,this.gp)}}class Kf{constructor(e,t){this.kp=void 0,this.yp=void 0,this.Tp=void 0,this.ps=!1,this.Rp=e,this.Dp=t,this.Vp()}kt(){this.Vp()}Ip(){this.kp&&this.Rp.removeChild(this.kp),this.yp&&this.Rp.removeChild(this.yp),this.kp=void 0,this.yp=void 0}Bp(){return this.ps!==this.Ep()||this.Tp!==this.Ap()}Ap(){return this.Dp.Qt().Xi().J(this.Dp.N().layout.textColor)>160?"dark":"light"}Ep(){return this.Dp.N().layout.attributionLogo}zp(){const e=new URL(location.href);return e.hostname?"&utm_source="+e.hostname+e.pathname:""}Vp(){this.Bp()&&(this.Ip(),this.ps=this.Ep(),this.ps&&(this.Tp=this.Ap(),this.yp=document.createElement("style"),this.yp.innerText="a#tv-attr-logo{--fill:#131722;--stroke:#fff;position:absolute;left:10px;bottom:10px;height:19px;width:35px;margin:0;padding:0;border:0;z-index:3;}a#tv-attr-logo[data-dark]{--fill:#D1D4DC;--stroke:#131722;}",this.kp=document.createElement("a"),this.kp.href=`https://www.tradingview.com/?utm_medium=lwc-link&utm_campaign=lwc-chart${this.zp()}`,this.kp.title="Charting by TradingView",this.kp.id="tv-attr-logo",this.kp.target="_blank",this.kp.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="35" height="19" fill="none"><g fill-rule="evenodd" clip-path="url(#a)" clip-rule="evenodd"><path fill="var(--stroke)" d="M2 0H0v10h6v9h21.4l.5-1.3 6-15 1-2.7H23.7l-.5 1.3-.2.6a5 5 0 0 0-7-.9V0H2Zm20 17h4l5.2-13 .8-2h-7l-1 2.5-.2.5-1.5 3.8-.3.7V17Zm-.8-10a3 3 0 0 0 .7-2.7A3 3 0 1 0 16.8 7h4.4ZM14 7V2H2v6h6v9h4V7h2Z"/><path fill="var(--fill)" d="M14 2H2v6h6v9h6V2Zm12 15h-7l6-15h7l-6 15Zm-7-9a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/></g><defs><clipPath id="a"><path fill="var(--stroke)" d="M0 0h35v19H0z"/></clipPath></defs></svg>',this.kp.toggleAttribute("data-dark","dark"===this.Tp),this.Rp.appendChild(this.yp),this.Rp.appendChild(this.kp)))}}function Zf(e,t){const n=Qd(e.ownerDocument).createElement("canvas");e.appendChild(n);const s=(i={options:{allowResizeObserver:!0},transform:(e,t)=>({width:Math.max(e.width,t.width),height:Math.max(e.height,t.height)})},new Fd(n,i.transform,i.options));var i;return s.resizeCanvasElement(t),s}function eg(e){var t;e.width=1,e.height=1,null==(t=e.getContext("2d"))||t.clearRect(0,0,1,1)}function tg(e,t,n,s){e.ih&&e.ih(t,n,s)}function ng(e,t,n,s){e.nt(t,n,s)}function sg(e,t,n,s){const i=e(n,s);for(const r of i){const e=r.Tt(s);null!==e&&t(e)}}function ig(e,t){return n=>{var s,i;return void 0===n.Ft||((null==(s=n.Ft())?void 0:s.wa())??"")!==t?[]:(null==(i=n.ta)?void 0:i.call(n,e))??[]}}function rg(e,t,n,s){if(!e.length)return;let i=0;const r=e[0].$t(s,!0);let a=1===t?n/2-(e[0].Fi()-r/2):e[0].Fi()-r/2-n/2;a=Math.max(0,a);for(let o=1;o<e.length;o++){const r=e[o],l=e[o-1],c=l.$t(s,!1),u=r.Fi(),h=l.Fi();if(1===t?u>h-c:u<h+c){const s=h-c*t;r.Wi(s);const o=s-t*c/2;if((1===t?o<0:o>n)&&a>0){const s=1===t?-1-o:o-n,r=Math.min(s,a);for(let n=i;n<e.length;n++)e[n].Wi(e[n].Fi()+t*r);a-=r}}else i=o,a=1===t?h-c-u:u-(h+c)}}class ag{constructor(e,t,n,s){this.Yi=null,this.Lp=null,this.Op=!1,this.Np=new Um(200),this.Fp=null,this.Wp=0,this.Hp=!1,this.Up=()=>{this.Hp||this.Pt.$p().Qt().ar()},this.qp=()=>{this.Hp||this.Pt.$p().Qt().ar()},this.Pt=e,this.Ps=t,this.bl=t.layout,this.Gu=n,this.Yp="left"===s,this.jp=ig("normal",s),this.Kp=ig("top",s),this.Xp=ig("bottom",s),this.Yf=document.createElement("div"),this.Yf.style.height="100%",this.Yf.style.overflow="hidden",this.Yf.style.width="25px",this.Yf.style.left="0",this.Yf.style.position="relative",this.Zp=Zf(this.Yf,Ad({width:16,height:16})),this.Zp.subscribeSuggestedBitmapSizeChanged(this.Up);const i=this.Zp.canvasElement;i.style.position="absolute",i.style.zIndex="1",i.style.left="0",i.style.top="0",this.Gp=Zf(this.Yf,Ad({width:16,height:16})),this.Gp.subscribeSuggestedBitmapSizeChanged(this.qp);const r=this.Gp.canvasElement;r.style.position="absolute",r.style.zIndex="2",r.style.left="0",r.style.top="0";const a={bf:this.np.bind(this),gf:this.np.bind(this),uf:this.ep.bind(this),lf:this.ep.bind(this),Sf:this.Jp.bind(this),pf:this.rp.bind(this),df:this.rp.bind(this),Kd:this.Qp.bind(this),$d:this.Qp.bind(this),if:this.tv.bind(this),Vf:this.sp.bind(this)};this.Of=new Uf(this.Gp.canvasElement,a,{hf:()=>!this.Ps.handleScroll.vertTouchDrag,af:()=>!0})}m(){this.Of.m(),this.Gp.unsubscribeSuggestedBitmapSizeChanged(this.qp),eg(this.Gp.canvasElement),this.Gp.dispose(),this.Zp.unsubscribeSuggestedBitmapSizeChanged(this.Up),eg(this.Zp.canvasElement),this.Zp.dispose(),null!==this.Yi&&this.Yi.no().u(this),this.Yi=null}Xf(){return this.Yf}P(){return this.bl.fontSize}iv(){const e=this.Gu.N();return this.Fp!==e.k&&(this.Np.In(),this.Fp=e.k),e}sv(){if(null===this.Yi)return 0;let e=0;const t=this.iv(),n=Qd(this.Zp.canvasElement.getContext("2d",{colorSpace:this.Pt.$p().N().layout.colorSpace}));n.save();const s=this.Yi.Va();n.font=this.nv(),s.length>0&&(e=Math.max(this.Np.Vi(n,s[0].Ga),this.Np.Vi(n,s[s.length-1].Ga)));const i=this.ev();for(let l=i.length;l--;){const t=this.Np.Vi(n,i[l].ri());t>e&&(e=t)}const r=this.Yi.zt();if(null!==r&&null!==this.Lp&&2!==(a=this.Ps.crosshair).mode&&a.horzLine.visible&&a.horzLine.labelVisible){const t=this.Yi.Ts(1,r),s=this.Yi.Ts(this.Lp.height-2,r);e=Math.max(e,this.Np.Vi(n,this.Yi.Zi(Math.floor(Math.min(t,s))+.11111111111111,r)),this.Np.Vi(n,this.Yi.Zi(Math.ceil(Math.max(t,s))-.11111111111111,r)))}var a;n.restore();const o=e||34;return Wf(Math.ceil(t.S+t.C+t.I+t.B+5+o))}rv(e){null!==this.Lp&&Od(this.Lp,e)||(this.Lp=e,this.Hp=!0,this.Zp.resizeCanvasElement(e),this.Gp.resizeCanvasElement(e),this.Hp=!1,this.Yf.style.width=`${e.width}px`,this.Yf.style.height=`${e.height}px`)}hv(){return Qd(this.Lp).width}_s(e){this.Yi!==e&&(null!==this.Yi&&this.Yi.no().u(this),this.Yi=e,e.no().i(this.ul.bind(this),this))}Ft(){return this.Yi}In(){const e=this.Pt.hp();this.Pt.$p().Qt().Zo(e,Qd(this.Ft()))}av(e){if(null===this.Lp)return;const t={colorSpace:this.Pt.$p().N().layout.colorSpace};if(1!==e){this.lv(),this.Zp.applySuggestedBitmapSize();const e=Wd(this.Zp,t);null!==e&&(e.useBitmapCoordinateSpace(e=>{this.ov(e),this._v(e)}),this.Pt.uv(e,this.Xp),this.cv(e),this.Pt.uv(e,this.jp),this.dv(e))}this.Gp.applySuggestedBitmapSize();const n=Wd(this.Gp,t);null!==n&&(n.useBitmapCoordinateSpace(({context:e,bitmapSize:t})=>{e.clearRect(0,0,t.width,t.height)}),this.fv(n),this.Pt.uv(n,this.Kp))}Gf(){return this.Zp.bitmapSize}Jf(e,t,n){const s=this.Gf();s.width>0&&s.height>0&&e.drawImage(this.Zp.canvasElement,t,n)}kt(){var e;null==(e=this.Yi)||e.Va()}np(e){if(null===this.Yi||this.Yi.Ki()||!this.Ps.handleScale.axisPressedMouseMove.price)return;const t=this.Pt.$p().Qt(),n=this.Pt.hp();this.Op=!0,t.Uo(n,this.Yi,e.localY)}ep(e){if(null===this.Yi||!this.Ps.handleScale.axisPressedMouseMove.price)return;const t=this.Pt.$p().Qt(),n=this.Pt.hp(),s=this.Yi;t.$o(n,s,e.localY)}Jp(){if(null===this.Yi||!this.Ps.handleScale.axisPressedMouseMove.price)return;const e=this.Pt.$p().Qt(),t=this.Pt.hp(),n=this.Yi;this.Op&&(this.Op=!1,e.qo(t,n))}rp(e){if(null===this.Yi||!this.Ps.handleScale.axisPressedMouseMove.price)return;const t=this.Pt.$p().Qt(),n=this.Pt.hp();this.Op=!1,t.qo(n,this.Yi)}Qp(e){this.Ps.handleScale.axisDoubleClickReset.price&&this.In()}tv(e){null!==this.Yi&&(!this.Pt.$p().Qt().N().handleScale.axisPressedMouseMove.price||this.Yi.Le()||this.Yi.Vl()||this.pv(1))}sp(e){this.pv(0)}ev(){const e=[],t=null===this.Yi?void 0:this.Yi;return(n=>{for(let s=0;s<n.length;++s){const i=n[s].Ws(this.Pt.hp(),t);for(let t=0;t<i.length;t++)e.push(i[t])}})(this.Pt.hp().Dt()),e}ov({context:e,bitmapSize:t}){const{width:n,height:s}=t,i=this.Pt.hp().Qt(),r=i.$(),a=i.Fc();r===a?wm(e,0,0,n,s,r):Nm(e,0,0,n,s,r,a)}_v({context:e,bitmapSize:t,horizontalPixelRatio:n}){if(null===this.Lp||null===this.Yi||!this.Yi.N().borderVisible)return;e.fillStyle=this.Yi.N().borderColor;const s=Math.max(1,Math.floor(this.iv().S*n));let i;i=this.Yp?t.width-s:0,e.fillRect(i,0,s,t.height)}cv(e){if(null===this.Lp||null===this.Yi)return;const t=this.Yi.Va(),n=this.Yi.N(),s=this.iv(),i=this.Yp?this.Lp.width-s.C:0;n.borderVisible&&n.ticksVisible&&e.useBitmapCoordinateSpace(({context:e,horizontalPixelRatio:r,verticalPixelRatio:a})=>{e.fillStyle=n.borderColor;const o=Math.max(1,Math.floor(a)),l=Math.floor(.5*a),c=Math.round(s.C*r);e.beginPath();for(const n of t)e.rect(Math.floor(i*r),Math.round(n.ka*a)-l,c,o);e.fill()}),e.useMediaCoordinateSpace(({context:e})=>{e.font=this.nv(),e.fillStyle=n.textColor??this.bl.textColor,e.textAlign=this.Yp?"right":"left",e.textBaseline="middle";const r=this.Yp?Math.round(i-s.I):Math.round(i+s.C+s.I),a=t.map(t=>this.Np.Di(e,t.Ga));for(let n=t.length;n--;){const s=t[n];e.fillText(s.Ga,r,s.ka+a[n])}})}lv(){if(null===this.Lp||null===this.Yi)return;let e=this.Lp.height/2;const t=[],n=this.Yi.Dt().slice(),s=this.Pt.hp(),i=this.iv();this.Yi===s.$n()&&this.Pt.hp().Dt().forEach(e=>{s.Un(e)&&n.push(e)});const r=this.Yi.ba()[0],a=this.Yi;n.forEach(n=>{const i=n.Ws(s,a);i.forEach(e=>{e.Wi(null),e.Hi()&&t.push(e)}),r===n&&i.length>0&&(e=i[0].Bi())}),t.forEach(e=>e.Wi(e.Bi())),this.Yi.N().alignLabels&&this.vv(t,i,e)}vv(e,t,n){if(null===this.Lp)return;const s=e.filter(e=>e.Bi()<=n),i=e.filter(e=>e.Bi()>n);s.sort((e,t)=>t.Bi()-e.Bi()),s.length&&i.length&&i.push(s[0]),i.sort((e,t)=>e.Bi()-t.Bi());for(const r of e){const e=Math.floor(r.$t(t)/2),n=r.Bi();n>-e&&n<e&&r.Wi(e),n>this.Lp.height-e&&n<this.Lp.height+e&&r.Wi(this.Lp.height-e)}rg(s,1,this.Lp.height,t),rg(i,-1,this.Lp.height,t)}dv(e){if(null===this.Lp)return;const t=this.ev(),n=this.iv(),s=this.Yp?"right":"left";t.forEach(t=>{t.Ui()&&t.Tt(Qd(this.Yi)).nt(e,n,this.Np,s)})}fv(e){if(null===this.Lp||null===this.Yi)return;const t=this.Pt.$p().Qt(),n=[],s=this.Pt.hp(),i=t._c().Ws(s,this.Yi);i.length&&n.push(i);const r=this.iv(),a=this.Yp?"right":"left";n.forEach(t=>{t.forEach(t=>{t.Tt(Qd(this.Yi)).nt(e,r,this.Np,a)})})}pv(e){this.Yf.style.cursor=1===e?"ns-resize":"default"}ul(){const e=this.sv();this.Wp<e&&this.Pt.$p().Qt().Bh(),this.Wp=e}nv(){return om(this.bl.fontSize,this.bl.fontFamily)}}function og(e,t){var n;return(null==(n=e.Jh)?void 0:n.call(e,t))??[]}function lg(e,t){var n;return(null==(n=e.Fs)?void 0:n.call(e,t))??[]}function cg(e,t){var n;return(null==(n=e.us)?void 0:n.call(e,t))??[]}function ug(e,t){var n;return(null==(n=e.Xh)?void 0:n.call(e,t))??[]}class hg{constructor(e,t){this.Lp=Ad({width:0,height:0}),this.mv=null,this.wv=null,this.gv=null,this.Mv=null,this.bv=!1,this.Sv=new Xd,this.xv=new Xd,this.Cv=0,this.Pv=!1,this.kv=null,this.yv=!1,this.Tv=null,this.Rv=null,this.Hp=!1,this.Up=()=>{this.Hp||null===this.Dv||this.ts().ar()},this.qp=()=>{this.Hp||null===this.Dv||this.ts().ar()},this.Dp=e,this.Dv=t,this.Dv.t_().i(this.Vv.bind(this),this,!0),this.Iv=document.createElement("td"),this.Iv.style.padding="0",this.Iv.style.position="relative";const n=document.createElement("div");n.style.width="100%",n.style.height="100%",n.style.position="relative",n.style.overflow="hidden",this.Bv=document.createElement("td"),this.Bv.style.padding="0",this.Ev=document.createElement("td"),this.Ev.style.padding="0",this.Iv.appendChild(n),this.Zp=Zf(n,Ad({width:16,height:16})),this.Zp.subscribeSuggestedBitmapSizeChanged(this.Up);const s=this.Zp.canvasElement;s.style.position="absolute",s.style.zIndex="1",s.style.left="0",s.style.top="0",this.Gp=Zf(n,Ad({width:16,height:16})),this.Gp.subscribeSuggestedBitmapSizeChanged(this.qp);const i=this.Gp.canvasElement;i.style.position="absolute",i.style.zIndex="2",i.style.left="0",i.style.top="0",this.qf=document.createElement("tr"),this.qf.appendChild(this.Bv),this.qf.appendChild(this.Iv),this.qf.appendChild(this.Ev),this.Av(),this.Of=new Uf(this.Gp.canvasElement,this,{hf:()=>null===this.kv&&!this.Dp.N().handleScroll.vertTouchDrag,af:()=>null===this.kv&&!this.Dp.N().handleScroll.horzTouchDrag})}m(){null!==this.mv&&this.mv.m(),null!==this.wv&&this.wv.m(),this.gv=null,this.Gp.unsubscribeSuggestedBitmapSizeChanged(this.qp),eg(this.Gp.canvasElement),this.Gp.dispose(),this.Zp.unsubscribeSuggestedBitmapSizeChanged(this.Up),eg(this.Zp.canvasElement),this.Zp.dispose(),null!==this.Dv&&(this.Dv.t_().u(this),this.Dv.m()),this.Of.m()}hp(){return Qd(this.Dv)}zv(e){var t;null!==this.Dv&&this.Dv.t_().u(this),this.Dv=e,null!==this.Dv&&this.Dv.t_().i(hg.prototype.Vv.bind(this),this,!0),this.Av(),this.Dp.Uf().indexOf(this)===this.Dp.Uf().length-1?(this.gv=this.gv??new Kf(this.Iv,this.Dp),this.gv.kt()):(null==(t=this.gv)||t.Ip(),this.gv=null)}$p(){return this.Dp}Xf(){return this.qf}Av(){if(null!==this.Dv&&(this.Lv(),0!==this.ts().js().length)){if(null!==this.mv){const e=this.Dv.Wo();this.mv._s(Qd(e))}if(null!==this.wv){const e=this.Dv.Ho();this.wv._s(Qd(e))}}}Ov(){null!==this.mv&&this.mv.kt(),null!==this.wv&&this.wv.kt()}Io(){return null!==this.Dv?this.Dv.Io():0}Bo(e){this.Dv&&this.Dv.Bo(e)}if(e){if(!this.Dv)return;this.Nv();const t=e.localX,n=e.localY;this.Fv(t,n,e)}bf(e){this.Nv(),this.Wv(),this.Fv(e.localX,e.localY,e)}sf(e){if(!this.Dv)return;this.Nv();const t=e.localX,n=e.localY;this.Fv(t,n,e)}vf(e){null!==this.Dv&&(this.Nv(),this.Hv(e))}Kd(e){null!==this.Dv&&this.Uv(this.xv,e)}$d(e){this.Kd(e)}uf(e){this.Nv(),this.$v(e),this.Fv(e.localX,e.localY,e)}pf(e){null!==this.Dv&&(this.Nv(),this.Pv=!1,this.qv(e))}ff(e){null!==this.Dv&&this.Hv(e)}If(e){if(this.Pv=!0,null===this.kv){const t={x:e.localX,y:e.localY};this.Yv(t,t,e)}}Vf(e){null!==this.Dv&&(this.Nv(),this.Dv.Qt().ac(null),this.jv())}Kv(){return this.Sv}Xv(){return this.xv}Pf(){this.Cv=1,this.ts().hn()}kf(e,t){if(!this.Dp.N().handleScale.pinch)return;const n=5*(t-this.Cv);this.Cv=t,this.ts().Mc(e._t,n)}gf(e){this.Pv=!1,this.yv=null!==this.kv,this.Wv();const t=this.ts()._c();null!==this.kv&&t.Vt()&&(this.Tv={x:t.si(),y:t.ni()},this.kv={x:e.localX,y:e.localY})}lf(e){if(null===this.Dv)return;const t=e.localX,n=e.localY;if(null===this.kv)this.$v(e);else{this.yv=!1;const s=Qd(this.Tv),i=s.x+(t-this.kv.x),r=s.y+(n-this.kv.y);this.Fv(i,r,e)}}df(e){0===this.$p().N().trackingMode.exitMode&&(this.yv=!0),this.Zv(),this.qv(e)}jn(e,t){const n=this.Dv;return null===n?null:lf(n,e,t)}Gv(e,t){Qd("left"===t?this.mv:this.wv).rv(Ad({width:e,height:this.Lp.height}))}Zf(){return this.Lp}rv(e){Od(this.Lp,e)||(this.Lp=e,this.Hp=!0,this.Zp.resizeCanvasElement(e),this.Gp.resizeCanvasElement(e),this.Hp=!1,this.Iv.style.width=e.width+"px",this.Iv.style.height=e.height+"px")}Jv(){const e=Qd(this.Dv);e.Fo(e.Wo()),e.Fo(e.Ho());for(const t of e.ba())if(e.Un(t)){const n=t.Ft();null!==n&&e.Fo(n),t.Ns()}for(const t of e.s_())t.Ns()}Gf(){return this.Zp.bitmapSize}Jf(e,t,n){const s=this.Gf();s.width>0&&s.height>0&&e.drawImage(this.Zp.canvasElement,t,n)}av(e){if(0===e)return;if(null===this.Dv)return;e>1&&this.Jv(),null!==this.mv&&this.mv.av(e),null!==this.wv&&this.wv.av(e);const t={colorSpace:this.Dp.N().layout.colorSpace};if(1!==e){this.Zp.applySuggestedBitmapSize();const e=Wd(this.Zp,t);null!==e&&(e.useBitmapCoordinateSpace(e=>{this.ov(e)}),this.Dv&&(this.Qv(e,og),this.tm(e),this.Qv(e,lg),this.Qv(e,cg)))}this.Gp.applySuggestedBitmapSize();const n=Wd(this.Gp,t);null!==n&&(n.useBitmapCoordinateSpace(({context:e,bitmapSize:t})=>{e.clearRect(0,0,t.width,t.height)}),this.im(n),this.Qv(n,ug),this.Qv(n,cg))}sm(){return this.mv}nm(){return this.wv}uv(e,t){this.Qv(e,t)}Vv(){null!==this.Dv&&this.Dv.t_().u(this),this.Dv=null}Hv(e){this.Uv(this.Sv,e)}Uv(e,t){const n=t.localX,s=t.localY;e.v()&&e.p(this.ts().Et().uu(n),{x:n,y:s},t)}ov({context:e,bitmapSize:t}){const{width:n,height:s}=t,i=this.ts(),r=i.$(),a=i.Fc();r===a?wm(e,0,0,n,s,a):Nm(e,0,0,n,s,r,a)}tm(e){const t=Qd(this.Dv),n=t.i_().lr().Tt(t);null!==n&&n.nt(e,!1)}im(e){this.rm(e,lg,ng,this.ts()._c())}Qv(e,t){const n=Qd(this.Dv),s=n.Dt(),i=n.s_();for(const r of i)this.rm(e,t,tg,r);for(const r of s)this.rm(e,t,tg,r);for(const r of i)this.rm(e,t,ng,r);for(const r of s)this.rm(e,t,ng,r)}rm(e,t,n,s){const i=Qd(this.Dv),r=i.Qt().hc(),a=null!==r&&r.n_===s,o=null!==r&&a&&void 0!==r.e_?r.e_.Xn:void 0;sg(t,t=>n(t,e,a,o),s,i)}Lv(){if(null===this.Dv)return;const e=this.Dp,t=this.Dv.Wo().N().visible,n=this.Dv.Ho().N().visible;t||null===this.mv||(this.Bv.removeChild(this.mv.Xf()),this.mv.m(),this.mv=null),n||null===this.wv||(this.Ev.removeChild(this.wv.Xf()),this.wv.m(),this.wv=null);const s=e.Qt().Vc();t&&null===this.mv&&(this.mv=new ag(this,e.N(),s,"left"),this.Bv.appendChild(this.mv.Xf())),n&&null===this.wv&&(this.wv=new ag(this,e.N(),s,"right"),this.Ev.appendChild(this.wv.Xf()))}hm(e){return e.Bf&&this.Pv||null!==this.kv}am(e){return Math.max(0,Math.min(e,this.Lp.width-1))}lm(e){return Math.max(0,Math.min(e,this.Lp.height-1))}Fv(e,t,n){this.ts().yc(this.am(e),this.lm(t),n,Qd(this.Dv))}jv(){this.ts().Rc()}Zv(){this.yv&&(this.kv=null,this.jv())}Yv(e,t,n){this.kv=e,this.yv=!1,this.Fv(t.x,t.y,n);const s=this.ts()._c();this.Tv={x:s.si(),y:s.ni()}}ts(){return this.Dp.Qt()}qv(e){if(!this.bv)return;const t=this.ts(),n=this.hp();if(t.Ko(n,n.ys()),this.Mv=null,this.bv=!1,t.Cc(),null!==this.Rv){const e=performance.now(),n=t.Et();this.Rv.le(n.wu(),e),this.Rv.Tu(e)||t._n(this.Rv)}}Nv(){this.kv=null}Wv(){if(this.Dv){if(this.ts().hn(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)Qd(document.activeElement).blur();else{const e=document.getSelection();null!==e&&e.removeAllRanges()}!this.Dv.ys().Ki()&&this.ts().Et().Ki()}}$v(e){if(null===this.Dv)return;const t=this.ts(),n=t.Et();if(n.Ki())return;const s=this.Dp.N(),i=s.handleScroll,r=s.kineticScroll;if((!i.pressedMouseMove||e.Bf)&&(!i.horzTouchDrag&&!i.vertTouchDrag||!e.Bf))return;const a=this.Dv.ys(),o=performance.now();if(null!==this.Mv||this.hm(e)||(this.Mv={x:e.clientX,y:e.clientY,ed:o,om:e.localX,_m:e.localY}),null!==this.Mv&&!this.bv&&(this.Mv.x!==e.clientX||this.Mv.y!==e.clientY)){if(e.Bf&&r.touch||!e.Bf&&r.mouse){const e=n.vu();this.Rv=new Xf(.2/e,7/e,.997,15/e),this.Rv.Cp(n.wu(),this.Mv.ed)}else this.Rv=null;a.Ki()||t.Yo(this.Dv,a,e.localY),t.Sc(e.localX),this.bv=!0}this.bv&&(a.Ki()||t.jo(this.Dv,a,e.localY),t.xc(e.localX),null!==this.Rv&&this.Rv.Cp(n.wu(),o))}}class dg{constructor(e,t,n,s,i){this.xt=!0,this.Lp=Ad({width:0,height:0}),this.Up=()=>this.av(3),this.Yp="left"===e,this.Gu=n.Vc,this.Ps=t,this.um=s,this.dm=i,this.Yf=document.createElement("div"),this.Yf.style.width="25px",this.Yf.style.height="100%",this.Yf.style.overflow="hidden",this.Zp=Zf(this.Yf,Ad({width:16,height:16})),this.Zp.subscribeSuggestedBitmapSizeChanged(this.Up)}m(){this.Zp.unsubscribeSuggestedBitmapSizeChanged(this.Up),eg(this.Zp.canvasElement),this.Zp.dispose()}Xf(){return this.Yf}Zf(){return this.Lp}rv(e){Od(this.Lp,e)||(this.Lp=e,this.Zp.resizeCanvasElement(e),this.Yf.style.width=`${e.width}px`,this.Yf.style.height=`${e.height}px`,this.xt=!0)}av(e){if(e<3&&!this.xt)return;if(0===this.Lp.width||0===this.Lp.height)return;this.xt=!1,this.Zp.applySuggestedBitmapSize();const t=Wd(this.Zp,{colorSpace:this.Ps.layout.colorSpace});null!==t&&t.useBitmapCoordinateSpace(e=>{this.ov(e),this._v(e)})}Gf(){return this.Zp.bitmapSize}Jf(e,t,n){const s=this.Gf();s.width>0&&s.height>0&&e.drawImage(this.Zp.canvasElement,t,n)}_v({context:e,bitmapSize:t,horizontalPixelRatio:n,verticalPixelRatio:s}){if(!this.um())return;e.fillStyle=this.Ps.timeScale.borderColor;const i=Math.floor(this.Gu.N().S*n),r=Math.floor(this.Gu.N().S*s),a=this.Yp?t.width-i:0;e.fillRect(a,0,i,r)}ov({context:e,bitmapSize:t}){wm(e,0,0,t.width,t.height,this.dm())}}function mg(e){return t=>{var n;return(null==(n=t.ia)?void 0:n.call(t,e))??[]}}const pg=mg("normal"),fg=mg("top"),gg=mg("bottom");class yg{constructor(e,t){this.fm=null,this.pm=null,this.M=null,this.vm=!1,this.Lp=Ad({width:0,height:0}),this.wm=new Xd,this.Np=new Um(5),this.Hp=!1,this.Up=()=>{this.Hp||this.Dp.Qt().ar()},this.qp=()=>{this.Hp||this.Dp.Qt().ar()},this.Dp=e,this.o_=t,this.Ps=e.N().layout,this.kp=document.createElement("tr"),this.gm=document.createElement("td"),this.gm.style.padding="0",this.Mm=document.createElement("td"),this.Mm.style.padding="0",this.Yf=document.createElement("td"),this.Yf.style.height="25px",this.Yf.style.padding="0",this.bm=document.createElement("div"),this.bm.style.width="100%",this.bm.style.height="100%",this.bm.style.position="relative",this.bm.style.overflow="hidden",this.Yf.appendChild(this.bm),this.Zp=Zf(this.bm,Ad({width:16,height:16})),this.Zp.subscribeSuggestedBitmapSizeChanged(this.Up);const n=this.Zp.canvasElement;n.style.position="absolute",n.style.zIndex="1",n.style.left="0",n.style.top="0",this.Gp=Zf(this.bm,Ad({width:16,height:16})),this.Gp.subscribeSuggestedBitmapSizeChanged(this.qp);const s=this.Gp.canvasElement;s.style.position="absolute",s.style.zIndex="2",s.style.left="0",s.style.top="0",this.kp.appendChild(this.gm),this.kp.appendChild(this.Yf),this.kp.appendChild(this.Mm),this.Sm(),this.Dp.Qt().Vo().i(this.Sm.bind(this),this),this.Of=new Uf(this.Gp.canvasElement,this,{hf:()=>!0,af:()=>!this.Dp.N().handleScroll.horzTouchDrag})}m(){this.Of.m(),null!==this.fm&&this.fm.m(),null!==this.pm&&this.pm.m(),this.Gp.unsubscribeSuggestedBitmapSizeChanged(this.qp),eg(this.Gp.canvasElement),this.Gp.dispose(),this.Zp.unsubscribeSuggestedBitmapSizeChanged(this.Up),eg(this.Zp.canvasElement),this.Zp.dispose()}Xf(){return this.kp}xm(){return this.fm}Cm(){return this.pm}bf(e){if(this.vm)return;this.vm=!0;const t=this.Dp.Qt();!t.Et().Ki()&&this.Dp.N().handleScale.axisPressedMouseMove.time&&t.gc(e.localX)}gf(e){this.bf(e)}Sf(){const e=this.Dp.Qt();!e.Et().Ki()&&this.vm&&(this.vm=!1,this.Dp.N().handleScale.axisPressedMouseMove.time&&e.kc())}uf(e){const t=this.Dp.Qt();!t.Et().Ki()&&this.Dp.N().handleScale.axisPressedMouseMove.time&&t.Pc(e.localX)}lf(e){this.uf(e)}pf(){this.vm=!1;const e=this.Dp.Qt();e.Et().Ki()&&!this.Dp.N().handleScale.axisPressedMouseMove.time||e.kc()}df(){this.pf()}Kd(){this.Dp.N().handleScale.axisDoubleClickReset.time&&this.Dp.Qt().cn()}$d(){this.Kd()}if(){this.Dp.Qt().N().handleScale.axisPressedMouseMove.time&&this.pv(1)}Vf(){this.pv(0)}Zf(){return this.Lp}Pm(){return this.wm}km(e,t,n){Od(this.Lp,e)||(this.Lp=e,this.Hp=!0,this.Zp.resizeCanvasElement(e),this.Gp.resizeCanvasElement(e),this.Hp=!1,this.Yf.style.width=`${e.width}px`,this.Yf.style.height=`${e.height}px`,this.wm.p(e)),null!==this.fm&&this.fm.rv(Ad({width:t,height:e.height})),null!==this.pm&&this.pm.rv(Ad({width:n,height:e.height}))}ym(){const e=this.Tm();return Math.ceil(e.S+e.C+e.P+e.A+e.V+e.Rm)}kt(){this.Dp.Qt().Et().Va()}Gf(){return this.Zp.bitmapSize}Jf(e,t,n){const s=this.Gf();s.width>0&&s.height>0&&e.drawImage(this.Zp.canvasElement,t,n)}av(e){if(0===e)return;const t={colorSpace:this.Ps.colorSpace};if(1!==e){this.Zp.applySuggestedBitmapSize();const n=Wd(this.Zp,t);null!==n&&(n.useBitmapCoordinateSpace(e=>{this.ov(e),this._v(e),this.Dm(n,gg)}),this.cv(n),this.Dm(n,pg)),null!==this.fm&&this.fm.av(e),null!==this.pm&&this.pm.av(e)}this.Gp.applySuggestedBitmapSize();const n=Wd(this.Gp,t);null!==n&&(n.useBitmapCoordinateSpace(({context:e,bitmapSize:t})=>{e.clearRect(0,0,t.width,t.height)}),this.Vm([...this.Dp.Qt().js(),this.Dp.Qt()._c()],n),this.Dm(n,fg))}Dm(e,t){const n=this.Dp.Qt().js();for(const s of n)sg(t,t=>tg(t,e,!1,void 0),s,void 0);for(const s of n)sg(t,t=>ng(t,e,!1,void 0),s,void 0)}ov({context:e,bitmapSize:t}){wm(e,0,0,t.width,t.height,this.Dp.Qt().Fc())}_v({context:e,bitmapSize:t,verticalPixelRatio:n}){if(this.Dp.N().timeScale.borderVisible){e.fillStyle=this.Im();const s=Math.max(1,Math.floor(this.Tm().S*n));e.fillRect(0,0,t.width,s)}}cv(e){const t=this.Dp.Qt().Et(),n=t.Va();if(!n||0===n.length)return;const s=this.o_.maxTickMarkWeight(n),i=this.Tm(),r=t.N();r.borderVisible&&r.ticksVisible&&e.useBitmapCoordinateSpace(({context:e,horizontalPixelRatio:t,verticalPixelRatio:s})=>{e.strokeStyle=this.Im(),e.fillStyle=this.Im();const r=Math.max(1,Math.floor(t)),a=Math.floor(.5*t);e.beginPath();const o=Math.round(i.C*s);for(let i=n.length;i--;){const s=Math.round(n[i].coord*t);e.rect(s-a,0,r,o)}e.fill()}),e.useMediaCoordinateSpace(({context:e})=>{const t=i.S+i.C+i.A+i.P/2;e.textAlign="center",e.textBaseline="middle",e.fillStyle=this.H(),e.font=this.nv();for(const i of n)if(i.weight<s){const n=i.needAlignCoordinate?this.Bm(e,i.coord,i.label):i.coord;e.fillText(i.label,n,t)}this.Dp.N().timeScale.allowBoldLabels&&(e.font=this.Em());for(const i of n)if(i.weight>=s){const n=i.needAlignCoordinate?this.Bm(e,i.coord,i.label):i.coord;e.fillText(i.label,n,t)}})}Bm(e,t,n){const s=this.Np.Vi(e,n),i=s/2,r=Math.floor(t-i)+.5;return r<0?t+=Math.abs(0-r):r+s>this.Lp.width&&(t-=Math.abs(this.Lp.width-(r+s))),t}Vm(e,t){const n=this.Tm();for(const s of e)for(const e of s.cs())e.Tt().nt(t,n)}Im(){return this.Dp.N().timeScale.borderColor}H(){return this.Ps.textColor}F(){return this.Ps.fontSize}nv(){return om(this.F(),this.Ps.fontFamily)}Em(){return om(this.F(),this.Ps.fontFamily,"bold")}Tm(){null===this.M&&(this.M={S:1,L:NaN,A:NaN,V:NaN,Ji:NaN,C:5,P:NaN,k:"",Gi:new Um,Rm:0});const e=this.M,t=this.nv();if(e.k!==t){const n=this.F();e.P=n,e.k=t,e.A=3*n/12,e.V=3*n/12,e.Ji=9*n/12,e.L=0,e.Rm=4*n/12,e.Gi.In()}return this.M}pv(e){this.Yf.style.cursor=1===e?"ew-resize":"default"}Sm(){const e=this.Dp.Qt(),t=e.N();t.leftPriceScale.visible||null===this.fm||(this.gm.removeChild(this.fm.Xf()),this.fm.m(),this.fm=null),t.rightPriceScale.visible||null===this.pm||(this.Mm.removeChild(this.pm.Xf()),this.pm.m(),this.pm=null);const n={Vc:this.Dp.Qt().Vc()},s=()=>t.leftPriceScale.borderVisible&&e.Et().N().borderVisible,i=()=>e.Fc();t.leftPriceScale.visible&&null===this.fm&&(this.fm=new dg("left",t,n,s,i),this.gm.appendChild(this.fm.Xf())),t.rightPriceScale.visible&&null===this.pm&&(this.pm=new dg("right",t,n,s,i),this.Mm.appendChild(this.pm.Xf()))}}const vg=!!Ff&&!!navigator.userAgentData&&navigator.userAgentData.brands.some(e=>e.brand.includes("Chromium"))&&!!Ff&&((null==(e=null==navigator?void 0:navigator.userAgentData)?void 0:e.platform)?"Windows"===navigator.userAgentData.platform:navigator.userAgent.toLowerCase().indexOf("win")>=0);class xg{constructor(e,t,n){var s;this.Am=[],this.zm=[],this.Lm=0,this.sl=0,this.Mo=0,this.Om=0,this.Nm=0,this.Fm=null,this.Wm=!1,this.Sv=new Xd,this.xv=new Xd,this.Ku=new Xd,this.Hm=null,this.Um=null,this.Rp=e,this.Ps=t,this.o_=n,this.kp=document.createElement("div"),this.kp.classList.add("tv-lightweight-charts"),this.kp.style.overflow="hidden",this.kp.style.direction="ltr",this.kp.style.width="100%",this.kp.style.height="100%",(s=this.kp).style.userSelect="none",s.style.webkitUserSelect="none",s.style.msUserSelect="none",s.style.MozUserSelect="none",s.style.webkitTapHighlightColor="transparent",this.$m=document.createElement("table"),this.$m.setAttribute("cellspacing","0"),this.kp.appendChild(this.$m),this.qm=this.Ym.bind(this),bg(this.Ps)&&this.jm(!0),this.ts=new wf(this.Zu.bind(this),this.Ps,n),this.Qt().uc().i(this.Km.bind(this),this),this.Xm=new yg(this,this.o_),this.$m.appendChild(this.Xm.Xf());const i=t.autoSize&&this.Zm();let r=this.Ps.width,a=this.Ps.height;if(i||0===r||0===a){const t=e.getBoundingClientRect();r=r||t.width,a=a||t.height}this.Gm(r,a),this.Jm(),e.appendChild(this.kp),this.Qm(),this.ts.Et().Iu().i(this.ts.Bh.bind(this.ts),this),this.ts.Vo().i(this.ts.Bh.bind(this.ts),this)}Qt(){return this.ts}N(){return this.Ps}Uf(){return this.Am}tw(){return this.Xm}m(){this.jm(!1),0!==this.Lm&&window.cancelAnimationFrame(this.Lm),this.ts.uc().u(this),this.ts.Et().Iu().u(this),this.ts.Vo().u(this),this.ts.m();for(const e of this.Am)this.$m.removeChild(e.Xf()),e.Kv().u(this),e.Xv().u(this),e.m();this.Am=[];for(const e of this.zm)this.iw(e);this.zm=[],Qd(this.Xm).m(),null!==this.kp.parentElement&&this.kp.parentElement.removeChild(this.kp),this.Ku.m(),this.Sv.m(),this.xv.m(),this.sw()}Gm(e,t,n=!1){if(this.sl===t&&this.Mo===e)return;const s=function(e){const t=Math.floor(e.width),n=Math.floor(e.height);return Ad({width:t-t%2,height:n-n%2})}(Ad({width:e,height:t}));this.sl=s.height,this.Mo=s.width;const i=this.sl+"px",r=this.Mo+"px";Qd(this.kp).style.height=i,Qd(this.kp).style.width=r,this.$m.style.height=i,this.$m.style.width=r,n?this.nw(Am.gn(),performance.now()):this.ts.Bh()}av(e){void 0===e&&(e=Am.gn());for(let t=0;t<this.Am.length;t++)this.Am[t].av(e.en(t).tn);this.Ps.timeScale.visible&&this.Xm.av(e.nn())}hr(e){var t;const n=bg(this.Ps);this.ts.hr(e);const s=bg(this.Ps);s!==n&&this.jm(s),(null==(t=e.layout)?void 0:t.panes)&&this.ew(),this.Qm(),this.rw(e)}Kv(){return this.Sv}Xv(){return this.xv}uc(){return this.Ku}hw(){null!==this.Fm&&(this.nw(this.Fm,performance.now()),this.Fm=null);const e=this.aw(null),t=document.createElement("canvas");t.width=e.width,t.height=e.height;const n=Qd(t.getContext("2d"));return this.aw(n),t}lw(e){return("left"!==e||this.ow())&&("right"!==e||this._w())?0===this.Am.length?0:Qd("left"===e?this.Am[0].sm():this.Am[0].nm()).hv():0}uw(){return this.Ps.autoSize&&null!==this.Hm}tp(){return this.kp}cw(e){this.Um=e,this.Um?this.tp().style.setProperty("cursor",e):this.tp().style.removeProperty("cursor")}dw(){return this.Um}fw(e){return Gd(this.Am[e]).Zf()}ew(){this.zm.forEach(e=>{e.kt()})}rw(e){(void 0!==e.autoSize||!this.Hm||void 0===e.width&&void 0===e.height)&&(e.autoSize&&!this.Hm&&this.Zm(),!1===e.autoSize&&null!==this.Hm&&this.sw(),e.autoSize||void 0===e.width&&void 0===e.height||this.Gm(e.width||this.Mo,e.height||this.sl))}aw(e){let t=0,n=0;const s=this.Am[0],i=(t,n)=>{let s=0;for(let i=0;i<this.Am.length;i++){const r=this.Am[i],a=Qd("left"===t?r.sm():r.nm()),o=a.Gf();if(null!==e&&a.Jf(e,n,s),s+=o.height,i<this.Am.length-1){const t=this.zm[i],r=t.Gf();null!==e&&t.Jf(e,n,s),s+=r.height}}};this.ow()&&(i("left",0),t+=Qd(s.sm()).Gf().width);for(let a=0;a<this.Am.length;a++){const s=this.Am[a],i=s.Gf();if(null!==e&&s.Jf(e,t,n),n+=i.height,a<this.Am.length-1){const s=this.zm[a],i=s.Gf();null!==e&&s.Jf(e,t,n),n+=i.height}}t+=s.Gf().width,this._w()&&(i("right",t),t+=Qd(s.nm()).Gf().width);const r=(t,n,s)=>{Qd("left"===t?this.Xm.xm():this.Xm.Cm()).Jf(Qd(e),n,s)};if(this.Ps.timeScale.visible){const t=this.Xm.Gf();if(null!==e){let i=0;this.ow()&&(r("left",i,n),i=Qd(s.sm()).Gf().width),this.Xm.Jf(e,i,n),i+=t.width,this._w()&&r("right",i,n)}n+=t.height}return Ad({width:t,height:n})}pw(){let e=0,t=0,n=0;for(const f of this.Am)this.ow()&&(t=Math.max(t,Qd(f.sm()).sv(),this.Ps.leftPriceScale.minimumWidth)),this._w()&&(n=Math.max(n,Qd(f.nm()).sv(),this.Ps.rightPriceScale.minimumWidth)),e+=f.Io();t=Wf(t),n=Wf(n);const s=this.Mo,i=this.sl,r=Math.max(s-t-n,0),a=1*this.zm.length,o=this.Ps.timeScale.visible;let l=o?Math.max(this.Xm.ym(),this.Ps.timeScale.minimumHeight):0;var c;l=(c=l)+c%2;const u=a+l,h=i<u?0:i-u,d=h/e;let m=0;const p=window.devicePixelRatio||1;for(let f=0;f<this.Am.length;++f){const e=this.Am[f];e.zv(this.ts.$s()[f]);let s=0,i=0;i=f===this.Am.length-1?Math.ceil((h-m)*p)/p:Math.round(e.Io()*d*p)/p,s=Math.max(i,2),m+=s,e.rv(Ad({width:r,height:s})),this.ow()&&e.Gv(t,"left"),this._w()&&e.Gv(n,"right"),e.hp()&&this.ts.cc(e.hp(),s)}this.Xm.km(Ad({width:o?r:0,height:l}),o?t:0,o?n:0),this.ts.Eo(r),this.Om!==t&&(this.Om=t),this.Nm!==n&&(this.Nm=n)}jm(e){e?this.kp.addEventListener("wheel",this.qm,{passive:!1}):this.kp.removeEventListener("wheel",this.qm)}mw(e){switch(e.deltaMode){case e.DOM_DELTA_PAGE:return 120;case e.DOM_DELTA_LINE:return 32}return vg?1/window.devicePixelRatio:1}Ym(e){if(!(0!==e.deltaX&&this.Ps.handleScroll.mouseWheel||0!==e.deltaY&&this.Ps.handleScale.mouseWheel))return;const t=this.mw(e),n=t*e.deltaX/100,s=-t*e.deltaY/100;if(e.cancelable&&e.preventDefault(),0!==s&&this.Ps.handleScale.mouseWheel){const t=Math.sign(s)*Math.min(1,Math.abs(s)),n=e.clientX-this.kp.getBoundingClientRect().left;this.Qt().Mc(n,t)}0!==n&&this.Ps.handleScroll.mouseWheel&&this.Qt().bc(-80*n)}nw(e,t){var n;const s=e.nn();3===s&&this.ww(),3!==s&&2!==s||(this.gw(e),this.Mw(e,t),this.Xm.kt(),this.Am.forEach(e=>{e.Ov()}),3===(null==(n=this.Fm)?void 0:n.nn())&&(this.Fm.vn(e),this.ww(),this.gw(this.Fm),this.Mw(this.Fm,t),e=this.Fm,this.Fm=null)),this.av(e)}Mw(e,t){for(const n of e.pn())this.mn(n,t)}gw(e){const t=this.ts.$s();for(let n=0;n<t.length;n++)e.en(n).sn&&t[n].Go()}mn(e,t){const n=this.ts.Et();switch(e.an){case 0:n.Eu();break;case 1:n.Au(e.Wt);break;case 2:n.dn(e.Wt);break;case 3:n.fn(e.Wt);break;case 4:n.bu();break;case 5:e.Wt.Tu(t)||n.fn(e.Wt.Ru(t))}}Zu(e){null!==this.Fm?this.Fm.vn(e):this.Fm=e,this.Wm||(this.Wm=!0,this.Lm=window.requestAnimationFrame(e=>{if(this.Wm=!1,this.Lm=0,null!==this.Fm){const t=this.Fm;this.Fm=null,this.nw(t,e);for(const n of t.pn())if(5===n.an&&!n.Wt.Tu(e)){this.Qt()._n(n.Wt);break}}}))}ww(){this.Jm()}iw(e){this.$m.removeChild(e.Xf()),e.m()}Jm(){const e=this.ts.$s(),t=e.length,n=this.Am.length;for(let s=t;s<n;s++){const e=Gd(this.Am.pop());this.$m.removeChild(e.Xf()),e.Kv().u(this),e.Xv().u(this),e.m();const t=this.zm.pop();void 0!==t&&this.iw(t)}for(let s=n;s<t;s++){const t=new hg(this,e[s]);if(t.Kv().i(this.bw.bind(this,t),this),t.Xv().i(this.Sw.bind(this,t),this),this.Am.push(t),s>0){const e=new Gf(this,s-1,s);this.zm.push(e),this.$m.insertBefore(e.Xf(),this.Xm.Xf())}this.$m.insertBefore(t.Xf(),this.Xm.Xf())}for(let s=0;s<t;s++){const t=e[s],n=this.Am[s];n.hp()!==t?n.zv(t):n.Av()}this.Qm(),this.pw()}xw(e,t,n,s){var i;const r=new Map;let a;if(null!==e&&this.ts.js().forEach(t=>{const n=t.Xs().Fr(e);null!==n&&r.set(t,n)}),null!==e){const t=null==(i=this.ts.Et().ss(e))?void 0:i.originalTime;void 0!==t&&(a=t)}const o=this.Qt().hc(),l=null!==o&&o.n_ instanceof Lp?o.n_:void 0,c=null!==o&&void 0!==o.e_?o.e_.Kn:void 0,u=this.Cw(s);return{Pw:a,Re:e??void 0,kw:t??void 0,yw:-1!==u?u:void 0,Tw:l,Rw:r,Dw:c,Vw:n??void 0}}Cw(e){let t=-1;if(e)t=this.Am.indexOf(e);else{const e=this.Qt()._c().Us();null!==e&&(t=this.Qt().$s().indexOf(e))}return t}bw(e,t,n,s){this.Sv.p(()=>this.xw(t,n,s,e))}Sw(e,t,n,s){this.xv.p(()=>this.xw(t,n,s,e))}Km(e,t,n){var s;this.cw((null==(s=this.Qt().hc())?void 0:s.h_)??null),this.Ku.p(()=>this.xw(e,t,n))}Qm(){const e=this.Ps.timeScale.visible?"":"none";this.Xm.Xf().style.display=e}ow(){return this.Am[0].hp().Wo().N().visible}_w(){return this.Am[0].hp().Ho().N().visible}Zm(){return"ResizeObserver"in window&&(this.Hm=new ResizeObserver(e=>{const t=e[e.length-1];t&&this.Gm(t.contentRect.width,t.contentRect.height)}),this.Hm.observe(this.Rp,{box:"border-box"}),!0)}sw(){null!==this.Hm&&this.Hm.disconnect(),this.Hm=null}}function bg(e){return Boolean(e.handleScroll.mouseWheel||e.handleScale.mouseWheel)}function wg(e,t,n,s){const i=n.value,r={Re:t,wt:e,Wt:[i,i,i,i],Pw:s};return void 0!==n.color&&(r.R=n.color),r}function jg(e,t,n,s){const i=n.value,r={Re:t,wt:e,Wt:[i,i,i,i],Pw:s};return void 0!==n.lineColor&&(r.vt=n.lineColor),void 0!==n.topColor&&(r.mr=n.topColor),void 0!==n.bottomColor&&(r.wr=n.bottomColor),r}function kg(e,t,n,s){const i=n.value,r={Re:t,wt:e,Wt:[i,i,i,i],Pw:s};return void 0!==n.topLineColor&&(r.gr=n.topLineColor),void 0!==n.bottomLineColor&&(r.Mr=n.bottomLineColor),void 0!==n.topFillColor1&&(r.br=n.topFillColor1),void 0!==n.topFillColor2&&(r.Sr=n.topFillColor2),void 0!==n.bottomFillColor1&&(r.Cr=n.bottomFillColor1),void 0!==n.bottomFillColor2&&(r.Pr=n.bottomFillColor2),r}function Ng(e,t,n,s){const i={Re:t,wt:e,Wt:[n.open,n.high,n.low,n.close],Pw:s};return void 0!==n.color&&(i.R=n.color),i}function Sg(e,t,n,s){const i={Re:t,wt:e,Wt:[n.open,n.high,n.low,n.close],Pw:s};return void 0!==n.color&&(i.R=n.color),void 0!==n.borderColor&&(i.Ht=n.borderColor),void 0!==n.wickColor&&(i.vr=n.wickColor),i}function Cg(e,t,n,s,i){const r=Gd(i)(n),a=Math.max(...r),o=Math.min(...r),l=r[r.length-1],c=[l,a,o,l],{time:u,color:h,...d}=n;return{Re:t,wt:e,Wt:c,Pw:s,se:d,R:h}}function Pg(e){return void 0!==e.Wt}function Eg(e,t){return void 0!==t.customValues&&(e.Iw=t.customValues),e}function Tg(e){return(t,n,s,i,r,a)=>{return o=s,((l=a)?l(o):function(e){return void 0===e.open&&void 0===e.value}(o))?Eg({wt:t,Re:n,Pw:i},s):Eg(e(t,n,s,i,r),s);var o,l}}function Lg(e){return{Candlestick:Tg(Sg),Bar:Tg(Ng),Area:Tg(jg),Baseline:Tg(kg),Histogram:Tg(wg),Line:Tg(wg),Custom:Tg(Cg)}[e]}function Mg(e){return{Re:0,Bw:new Map,Hh:e}}function Ig(e,t){if(void 0!==e&&0!==e.length)return{Ew:t.key(e[0].wt),Aw:t.key(e[e.length-1].wt)}}function _g(e){let t;return e.forEach(e=>{void 0===t&&(t=e.Pw)}),Gd(t)}class Dg{constructor(e){this.zw=new Map,this.Lw=new Map,this.Ow=new Map,this.Nw=[],this.o_=e}m(){this.zw.clear(),this.Lw.clear(),this.Ow.clear(),this.Nw=[]}Fw(e,t){let n=0!==this.zw.size,s=!1;const i=this.Lw.get(e);if(void 0!==i)if(1===this.Lw.size)n=!1,s=!0,this.zw.clear();else for(const o of this.Nw)o.pointData.Bw.delete(e)&&(s=!0);let r=[];if(0!==t.length){const n=t.map(e=>e.time),i=this.o_.createConverterToInternalObj(t),a=Lg(e.Rr()),o=e.da(),l=e.pa();r=t.map((t,r)=>{const c=i(t.time),u=this.o_.key(c);let h=this.zw.get(u);void 0===h&&(h=Mg(c),this.zw.set(u,h),s=!0);const d=a(c,h.Re,t,n[r],o,l);return h.Bw.set(e,d),d})}n&&this.Ww(),this.Hw(e,r);let a=-1;if(s){const e=[];this.zw.forEach(t=>{e.push({timeWeight:0,time:t.Hh,pointData:t,originalTime:_g(t.Bw)})}),e.sort((e,t)=>this.o_.key(e.time)-this.o_.key(t.time)),a=this.Uw(e)}return this.$w(e,a,function(e,t,n){const s=Ig(e,n),i=Ig(t,n);if(void 0!==s&&void 0!==i)return{qw:!1,zh:s.Aw>=i.Aw&&s.Ew>=i.Ew}}(this.Lw.get(e),i,this.o_))}Ec(e){return this.Fw(e,[])}Yw(e,t,n){const s=t;var i;void 0===(i=s).Pw&&(i.Pw=i.time),this.o_.preprocessData(t);const r=this.o_.createConverterToInternalObj([t])(t.time),a=this.Ow.get(e);if(!n&&void 0!==a&&this.o_.key(r)<this.o_.key(a))throw new Error(`Cannot update oldest data, last time=${a}, new time=${r}`);let o=this.zw.get(this.o_.key(r));if(n&&void 0===o)throw new Error("Cannot update non-existing data point when historicalUpdate is true");const l=void 0===o;void 0===o&&(o=Mg(r),this.zw.set(this.o_.key(r),o));const c=Lg(e.Rr()),u=e.da(),h=e.pa(),d=c(r,o.Re,t,s.Pw,u,h);o.Bw.set(e,d),n?this.jw(e,d,o.Re):this.Kw(e,d);const m={zh:Pg(d),qw:n};if(!l)return this.$w(e,-1,m);const p={timeWeight:0,time:o.Hh,pointData:o,originalTime:_g(o.Bw)},f=cp(this.Nw,this.o_.key(p.time),(e,t)=>this.o_.key(e.time)<t);this.Nw.splice(f,0,p);for(let g=f;g<this.Nw.length;++g)Ag(this.Nw[g].pointData,g);return this.o_.fillWeightsForPoints(this.Nw,f),this.$w(e,f,m)}Kw(e,t){let n=this.Lw.get(e);void 0===n&&(n=[],this.Lw.set(e,n));const s=0!==n.length?n[n.length-1]:null;null===s||this.o_.key(t.wt)>this.o_.key(s.wt)?Pg(t)&&n.push(t):Pg(t)?n[n.length-1]=t:n.splice(-1,1),this.Ow.set(e,t.wt)}jw(e,t,n){const s=this.Lw.get(e);if(void 0===s)return;const i=cp(s,n,(e,t)=>e.Re<t);Pg(t)?s[i]=t:s.splice(i,1)}Hw(e,t){0!==t.length?(this.Lw.set(e,t.filter(Pg)),this.Ow.set(e,t[t.length-1].wt)):(this.Lw.delete(e),this.Ow.delete(e))}Ww(){for(const e of this.Nw)0===e.pointData.Bw.size&&this.zw.delete(this.o_.key(e.time))}Uw(e){let t=-1;for(let n=0;n<this.Nw.length&&n<e.length;++n){const s=this.Nw[n],i=e[n];if(this.o_.key(s.time)!==this.o_.key(i.time)){t=n;break}i.timeWeight=s.timeWeight,Ag(i.pointData,n)}if(-1===t&&this.Nw.length!==e.length&&(t=Math.min(this.Nw.length,e.length)),-1===t)return-1;for(let n=t;n<e.length;++n)Ag(e[n].pointData,n);return this.o_.fillWeightsForPoints(e,t),this.Nw=e,t}Xw(){if(0===this.Lw.size)return null;let e=0;return this.Lw.forEach(t=>{0!==t.length&&(e=Math.max(e,t[t.length-1].Re))}),e}$w(e,t,n){const s={Oo:new Map,Et:{ou:this.Xw()}};if(-1!==t)this.Lw.forEach((t,i)=>{s.Oo.set(i,{se:t,Zw:i===e?n:void 0})}),this.Lw.has(e)||s.Oo.set(e,{se:[],Zw:n}),s.Et.Gw=this.Nw,s.Et.Jw=t;else{const t=this.Lw.get(e);s.Oo.set(e,{se:t||[],Zw:n})}return s}}function Ag(e,t){e.Re=t,e.Bw.forEach(e=>{e.Re=t})}function Og(e,t){return e.wt<t}function Rg(e,t){return t<e.wt}class Fg{constructor(e,t,n){this.Qw=!0,this.tg=!0,this.ig=!0,this.sg=[],this.ng=null,this.Jn=e,this.Qn=t,this.eg=n}kt(e){this.Qw=!0,"data"===e&&(this.tg=!0),"options"===e&&(this.ig=!0)}Tt(){return this.Jn.Vt()?(this.rg(),null===this.ng?null:this.hg):null}ag(){this.sg=this.sg.map(e=>({...e,...this.Jn.Rh().Dr(e.wt)}))}lg(){this.ng=null}rg(){this.tg&&(this.og(),this.tg=!1),this.ig&&(this.ag(),this.ig=!1),this.Qw&&(this._g(),this.Qw=!1)}_g(){const e=this.Jn.Ft(),t=this.Qn.Et();if(this.lg(),t.Ki()||e.Ki())return;const n=t.Pe();if(null===n)return;if(0===this.Jn.Xs().zr())return;const s=this.Jn.zt();null!==s&&(this.ng=function(e,t,n){const s=t.Uh(),i=t.bi(),r=cp(e,s,Og),a=up(e,i,Rg);if(!n)return{from:r,to:a};let o=r,l=a;return r>0&&r<e.length&&e[r].wt>=s&&(o=r-1),a>0&&a<e.length&&e[a-1].wt<=i&&(l=a+1),{from:o,to:l}}(this.sg,n,this.eg),this.ug(e,t,s.Wt),this.cg())}}class Bg{constructor(e,t){this.dg=e,this.Yi=t}nt(e,t,n){this.dg.draw(e,this.Yi,t,n)}}class zg extends Fg{constructor(e,t,n){super(e,t,!1),this.sh=n,this.hg=new Bg(this.sh.renderer(),t=>{const n=e.zt();return null===n?null:e.Ft().Nt(t,n.Wt)})}fa(e){return this.sh.priceValueBuilder(e)}va(e){return this.sh.isWhitespace(e)}og(){const e=this.Jn.Rh();this.sg=this.Jn.Xs().Hr().map(t=>({wt:t.Re,_t:NaN,...e.Dr(t.Re),fg:t.se}))}ug(e,t){t._u(this.sg,rm(this.ng))}cg(){this.sh.update({bars:this.sg.map(Wg),barSpacing:this.Qn.Et().vu(),visibleRange:this.ng},this.Jn.N())}}function Wg(e){return{x:e._t,time:e.wt,originalData:e.fg,barColor:e.cr}}const Ug={color:"#2196f3"},Vg=(e,t,n)=>{const s=Jd(n);return new zg(e,t,s)};function $g(e){const t={value:e.Wt[3],time:e.Pw};return void 0!==e.Iw&&(t.customValues=e.Iw),t}function Hg(e){const t=$g(e);return void 0!==e.R&&(t.color=e.R),t}function qg(e){const t=$g(e);return void 0!==e.vt&&(t.lineColor=e.vt),void 0!==e.mr&&(t.topColor=e.mr),void 0!==e.wr&&(t.bottomColor=e.wr),t}function Yg(e){const t=$g(e);return void 0!==e.gr&&(t.topLineColor=e.gr),void 0!==e.Mr&&(t.bottomLineColor=e.Mr),void 0!==e.br&&(t.topFillColor1=e.br),void 0!==e.Sr&&(t.topFillColor2=e.Sr),void 0!==e.Cr&&(t.bottomFillColor1=e.Cr),void 0!==e.Pr&&(t.bottomFillColor2=e.Pr),t}function Gg(e){const t={open:e.Wt[0],high:e.Wt[1],low:e.Wt[2],close:e.Wt[3],time:e.Pw};return void 0!==e.Iw&&(t.customValues=e.Iw),t}function Qg(e){const t=Gg(e);return void 0!==e.R&&(t.color=e.R),t}function Jg(e){const t=Gg(e),{R:n,Ht:s,vr:i}=e;return void 0!==n&&(t.color=n),void 0!==s&&(t.borderColor=s),void 0!==i&&(t.wickColor=i),t}function Xg(e){return{Area:qg,Line:Hg,Baseline:Yg,Histogram:Hg,Bar:Qg,Candlestick:Jg,Custom:Kg}[e]}function Kg(e){const t=e.Pw;return{...e.se,time:t}}const Zg={vertLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},horzLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},mode:1},ey={vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},ty={background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:12,fontFamily:am,panes:{enableResize:!0,separatorColor:"#E0E3EB",separatorHoverColor:"rgba(178, 181, 189, 0.2)"},attributionLogo:!0,colorSpace:"srgb",colorParsers:[]},ny={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,ticksVisible:!1,scaleMargins:{bottom:.1,top:.2},minimumWidth:0,ensureEdgeTickMarksVisible:!1},sy={rightOffset:0,barSpacing:6,minBarSpacing:.5,maxBarSpacing:0,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0,allowShiftVisibleRangeOnWhitespaceReplacement:!1,ticksVisible:!1,uniformDistribution:!1,minimumHeight:0,allowBoldLabels:!0,ignoreWhitespaceIndices:!1};function iy(){return{addDefaultPane:!0,width:0,height:0,autoSize:!1,layout:ty,crosshair:Zg,grid:ey,overlayPriceScales:{...ny},leftPriceScale:{...ny,visible:!1},rightPriceScale:{...ny,visible:!0},timeScale:sy,localization:{locale:Ff?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:{time:!0,price:!0},mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}}}class ry{constructor(e,t,n){this.Wf=e,this.pg=t,this.vg=n??0}applyOptions(e){this.Wf.Qt().lc(this.pg,e,this.vg)}options(){return this.Yi().N()}width(){return Dm(this.pg)?this.Wf.lw(this.pg):0}setVisibleRange(e){this.setAutoScale(!1),this.Yi().Wl(new ep(e.from,e.to))}getVisibleRange(){const e=this.Yi().Qe();return null===e?null:{from:e.$e(),to:e.qe()}}setAutoScale(e){this.applyOptions({autoScale:e})}Yi(){return Qd(this.Wf.Qt().oc(this.pg,this.vg)).Ft}}class ay{constructor(e,t,n,s){this.Wf=e,this.Pt=n,this.mg=t,this.wg=s}getHeight(){return this.Pt.$t()}setHeight(e){const t=this.Wf.Qt(),n=t.Hc(this.Pt);t.fc(n,e)}getStretchFactor(){return this.Pt.Io()}setStretchFactor(e){this.Pt.Bo(e),this.Wf.Qt().Bh()}paneIndex(){return this.Wf.Qt().Hc(this.Pt)}moveTo(e){const t=this.paneIndex();t!==e&&(Yd(e>=0&&e<this.Wf.Uf().length,"Invalid pane index"),this.Wf.Qt().mc(t,e))}getSeries(){return this.Pt.Oo().map(e=>this.mg(e))??[]}getHTMLElement(){const e=this.Wf.Uf();return e&&0!==e.length&&e[this.paneIndex()]?e[this.paneIndex()].Xf():null}attachPrimitive(e){this.Pt.ua(e),e.attached&&e.attached({chart:this.wg,requestUpdate:()=>this.Pt.Qt().Bh()})}detachPrimitive(e){this.Pt.ca(e)}priceScale(e){if(null===this.Pt.Do(e))throw new Error(`Cannot find price scale with id: ${e}`);return new ry(this.Wf,e,this.paneIndex())}setPreserveEmptyPane(e){this.Pt.zo(e)}preserveEmptyPane(){return this.Pt.Lo()}addCustomSeries(e,t={},n=0){return this.wg.addCustomSeries(e,t,n)}addSeries(e,t={}){return this.wg.addSeries(e,t,this.paneIndex())}}const oy={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:"",axisLabelColor:"",axisLabelTextColor:""};class ly{constructor(e){this.ir=e}applyOptions(e){this.ir.hr(e)}options(){return this.ir.N()}gg(){return this.ir}}class cy{constructor(e,t,n,s,i,r){this.Mg=new Xd,this.Jn=e,this.bg=t,this.Sg=n,this.o_=i,this.wg=s,this.xg=r}m(){this.Mg.m()}priceFormatter(){return this.Jn.ra()}priceToCoordinate(e){const t=this.Jn.zt();return null===t?null:this.Jn.Ft().Nt(e,t.Wt)}coordinateToPrice(e){const t=this.Jn.zt();return null===t?null:this.Jn.Ft().Ts(e,t.Wt)}barsInLogicalRange(e){if(null===e)return null;const t=new mf(new uf(e.from,e.to)).k_(),n=this.Jn.Xs();if(n.Ki())return null;const s=n.Fr(t.Uh(),1),i=n.Fr(t.bi(),-1),r=Qd(n.Lr()),a=Qd(n.Ks());if(null!==s&&null!==i&&s.Re>i.Re)return{barsBefore:e.from-r,barsAfter:a-e.to};const o={barsBefore:null===s||s.Re===r?e.from-r:s.Re-r,barsAfter:null===i||i.Re===a?a-e.to:a-i.Re};return null!==s&&null!==i&&(o.from=s.Pw,o.to=i.Pw),o}setData(e){this.o_,this.Jn.Rr(),this.bg.Cg(this.Jn,e),this.Pg("full")}update(e,t=!1){this.Jn.Rr(),this.bg.kg(this.Jn,e,t),this.Pg("update")}dataByIndex(e,t){const n=this.Jn.Xs().Fr(e,t);return null===n?null:Xg(this.seriesType())(n)}data(){const e=Xg(this.seriesType());return this.Jn.Xs().Hr().map(t=>e(t))}subscribeDataChanged(e){this.Mg.i(e)}unsubscribeDataChanged(e){this.Mg._(e)}applyOptions(e){this.Jn.hr(e)}options(){return sm(this.Jn.N())}priceScale(){return this.Sg.priceScale(this.Jn.Ft().wa(),this.getPane().paneIndex())}createPriceLine(e){const t=Kd(sm(oy),e),n=this.Jn.Oh(t);return new ly(n)}removePriceLine(e){this.Jn.Nh(e.gg())}priceLines(){return this.Jn.Fh().map(e=>new ly(e))}seriesType(){return this.Jn.Rr()}attachPrimitive(e){this.Jn.ua(e),e.attached&&e.attached({chart:this.wg,series:this,requestUpdate:()=>this.Jn.Qt().Bh(),horzScaleBehavior:this.o_})}detachPrimitive(e){this.Jn.ca(e),e.detached&&e.detached(),this.Jn.Qt().Bh()}getPane(){const e=this.Jn,t=Qd(this.Jn.Qt().Hn(e));return this.xg(t)}moveToPane(e){this.Jn.Qt().Oc(this.Jn,e)}seriesOrder(){const e=this.Jn.Qt().Hn(this.Jn);return null===e?-1:e.Oo().indexOf(this.Jn)}setSeriesOrder(e){const t=this.Jn.Qt().Hn(this.Jn);null!==t&&t.Qo(this.Jn,e)}Pg(e){this.Mg.v()&&this.Mg.p(e)}}class uy{constructor(e,t,n){this.yg=new Xd,this.z_=new Xd,this.wm=new Xd,this.ts=e,this.uh=e.Et(),this.Xm=t,this.uh.Du().i(this.Tg.bind(this)),this.uh.Vu().i(this.Rg.bind(this)),this.Xm.Pm().i(this.Dg.bind(this)),this.o_=n}m(){this.uh.Du().u(this),this.uh.Vu().u(this),this.Xm.Pm().u(this),this.yg.m(),this.z_.m(),this.wm.m()}scrollPosition(){return this.uh.wu()}scrollToPosition(e,t){t?this.uh.yu(e,1e3):this.ts.fn(e)}scrollToRealTime(){this.uh.ku()}getVisibleRange(){const e=this.uh.su();return null===e?null:{from:e.from.originalTime,to:e.to.originalTime}}setVisibleRange(e){const t={from:this.o_.convertHorzItemToInternal(e.from),to:this.o_.convertHorzItemToInternal(e.to)},n=this.uh.hu(t);this.ts.zc(n)}getVisibleLogicalRange(){const e=this.uh.iu();return null===e?null:{from:e.Uh(),to:e.bi()}}setVisibleLogicalRange(e){Yd(e.from<=e.to,"The from index cannot be after the to index."),this.ts.zc(e)}resetTimeScale(){this.ts.cn()}fitContent(){this.ts.Eu()}logicalToCoordinate(e){const t=this.ts.Et();return t.Ki()?null:t.qt(e)}coordinateToLogical(e){return this.uh.Ki()?null:this.uh.uu(e)}timeToIndex(e,t){const n=this.o_.convertHorzItemToInternal(e);return this.uh.J_(n,t)}timeToCoordinate(e){const t=this.timeToIndex(e,!1);return null===t?null:this.uh.qt(t)}coordinateToTime(e){const t=this.ts.Et(),n=t.uu(e),s=t.ss(n);return null===s?null:s.originalTime}width(){return this.Xm.Zf().width}height(){return this.Xm.Zf().height}subscribeVisibleTimeRangeChange(e){this.yg.i(e)}unsubscribeVisibleTimeRangeChange(e){this.yg._(e)}subscribeVisibleLogicalRangeChange(e){this.z_.i(e)}unsubscribeVisibleLogicalRangeChange(e){this.z_._(e)}subscribeSizeChange(e){this.wm.i(e)}unsubscribeSizeChange(e){this.wm._(e)}applyOptions(e){this.uh.hr(e)}options(){return{...sm(this.uh.N()),barSpacing:this.uh.vu()}}Tg(){this.yg.v()&&this.yg.p(this.getVisibleRange())}Rg(){this.z_.v()&&this.z_.p(this.getVisibleLogicalRange())}Dg(e){this.wm.p(e.width,e.height)}}function hy(e){return function(e){if(nm(e.handleScale)){const t=e.handleScale;e.handleScale={axisDoubleClickReset:{time:t,price:t},axisPressedMouseMove:{time:t,price:t},mouseWheel:t,pinch:t}}else if(void 0!==e.handleScale){const{axisPressedMouseMove:t,axisDoubleClickReset:n}=e.handleScale;nm(t)&&(e.handleScale.axisPressedMouseMove={time:t,price:t}),nm(n)&&(e.handleScale.axisDoubleClickReset={time:n,price:n})}const t=e.handleScroll;nm(t)&&(e.handleScroll={horzTouchDrag:t,vertTouchDrag:t,mouseWheel:t,pressedMouseMove:t})}(e),e}class dy{constructor(e,t,n){this.Vg=new Map,this.Ig=new Map,this.Bg=new Xd,this.Eg=new Xd,this.Ag=new Xd,this.$u=new WeakMap,this.zg=new Dg(t);const s=void 0===n?sm(iy()):Kd(sm(iy()),hy(n));this.Lg=t,this.Wf=new xg(e,s,t),this.Wf.Kv().i(e=>{this.Bg.v()&&this.Bg.p(this.Og(e()))},this),this.Wf.Xv().i(e=>{this.Eg.v()&&this.Eg.p(this.Og(e()))},this),this.Wf.uc().i(e=>{this.Ag.v()&&this.Ag.p(this.Og(e()))},this);const i=this.Wf.Qt();this.Ng=new uy(i,this.Wf.tw(),this.Lg)}remove(){this.Wf.Kv().u(this),this.Wf.Xv().u(this),this.Wf.uc().u(this),this.Ng.m(),this.Wf.m(),this.Vg.clear(),this.Ig.clear(),this.Bg.m(),this.Eg.m(),this.Ag.m(),this.zg.m()}resize(e,t,n){this.autoSizeActive()||this.Wf.Gm(e,t,n)}addCustomSeries(e,t={},n=0){const s=(i=Jd(e),{type:"Custom",isBuiltIn:!1,defaultOptions:{...Ug,...i.defaultOptions()},Fg:Vg,Wg:i});var i;return this.Hg(s,t,n)}addSeries(e,t={},n=0){return this.Hg(e,t,n)}removeSeries(e){const t=Gd(this.Vg.get(e)),n=this.zg.Ec(t);this.Wf.Qt().Ec(t),this.Ug(n),this.Vg.delete(e),this.Ig.delete(t)}Cg(e,t){this.Ug(this.zg.Fw(e,t))}kg(e,t,n){this.Ug(this.zg.Yw(e,t,n))}subscribeClick(e){this.Bg.i(e)}unsubscribeClick(e){this.Bg._(e)}subscribeCrosshairMove(e){this.Ag.i(e)}unsubscribeCrosshairMove(e){this.Ag._(e)}subscribeDblClick(e){this.Eg.i(e)}unsubscribeDblClick(e){this.Eg._(e)}priceScale(e,t=0){return new ry(this.Wf,e,t)}timeScale(){return this.Ng}applyOptions(e){this.Wf.hr(hy(e))}options(){return this.Wf.N()}takeScreenshot(){return this.Wf.hw()}addPane(e=!1){const t=this.Wf.Qt().Uc();return t.zo(e),this.$g(t)}removePane(e){this.Wf.Qt().dc(e)}swapPanes(e,t){this.Wf.Qt().vc(e,t)}autoSizeActive(){return this.Wf.uw()}chartElement(){return this.Wf.tp()}panes(){return this.Wf.Qt().$s().map(e=>this.$g(e))}paneSize(e=0){const t=this.Wf.fw(e);return{height:t.height,width:t.width}}setCrosshairPosition(e,t,n){const s=this.Vg.get(n);if(void 0===s)return;const i=this.Wf.Qt().Hn(s);null!==i&&this.Wf.Qt().Tc(e,t,i)}clearCrosshairPosition(){this.Wf.Qt().Rc(!0)}horzBehaviour(){return this.Lg}Hg(e,t={},n=0){var s;Yd(void 0!==e.Fg),function(e){if(void 0===e||"custom"===e.type)return;const t=e;void 0!==t.minMove&&void 0===t.precision&&(t.precision=function(e){if(e>=1)return 0;let t=0;for(;t<8;t++){const n=Math.round(e);if(Math.abs(n-e)<1e-8)return t;e*=10}return t}(t.minMove))}(t.priceFormat),"Candlestick"===e.type&&(void 0!==(s=t).borderColor&&(s.borderUpColor=s.borderColor,s.borderDownColor=s.borderColor),void 0!==s.wickColor&&(s.wickUpColor=s.wickColor,s.wickDownColor=s.wickColor));const i=Kd(sm(Ud),sm(e.defaultOptions),t),r=e.Fg,a=new Lp(this.Wf.Qt(),e.type,i,r,e.Wg);this.Wf.Qt().Ic(a,n);const o=new cy(a,this,this,this,this.Lg,e=>this.$g(e));return this.Vg.set(o,a),this.Ig.set(a,o),o}Ug(e){const t=this.Wf.Qt();t.Dc(e.Et.ou,e.Et.Gw,e.Et.Jw),e.Oo.forEach((e,t)=>t.ht(e.se,e.Zw)),t.Et().j_(),t.pu()}qg(e){return Gd(this.Ig.get(e))}Og(e){const t=new Map;e.Rw.forEach((e,n)=>{const s=n.Rr(),i=Xg(s)(e);if("Custom"!==s)Yd(function(e){return void 0!==e.open||function(e){return void 0!==e.value}(e)}(i));else{const e=n.pa();Yd(!e||!1===e(i))}t.set(this.qg(n),i)});const n=void 0!==e.Tw&&this.Ig.has(e.Tw)?this.qg(e.Tw):void 0;return{time:e.Pw,logical:e.Re,point:e.kw,paneIndex:e.yw,hoveredSeries:n,hoveredObjectId:e.Dw,seriesData:t,sourceEvent:e.Vw}}$g(e){let t=this.$u.get(e);return t||(t=new ay(this.Wf,e=>this.qg(e),e,this),this.$u.set(e,t)),t}}function my(e,t,n){const s=function(e){if(tm(e)){const t=document.getElementById(e);return Yd(null!==t,`Cannot find element in DOM with id=${e}`),t}return e}(e),i=new dy(s,t,n);return t.setOptions(i.options()),i}class py extends Fg{constructor(e,t){super(e,t,!0)}ug(e,t,n){t._u(this.sg,rm(this.ng)),e.$l(this.sg,n,rm(this.ng))}Yg(e,t){return{wt:e,gt:t,_t:NaN,ut:NaN}}og(){const e=this.Jn.Rh();this.sg=this.Jn.Xs().Hr().map(t=>{const n=t.Wt[3];return this.jg(t.Re,n,e)})}}function fy(e,t,n,s,i,r,a){if(0===t.length||s.from>=t.length||s.to<=0)return;const{context:o,horizontalPixelRatio:l,verticalPixelRatio:c}=e,u=t[s.from];let h=r(e,u),d=u;if(s.to-s.from<2){const t=i/2;o.beginPath();const n={_t:u._t-t,ut:u.ut},s={_t:u._t+t,ut:u.ut};o.moveTo(n._t*l,n.ut*c),o.lineTo(s._t*l,s.ut*c),a(e,h,n,s)}else{const i=(t,n)=>{a(e,h,d,n),o.beginPath(),h=t,d=n};let m=d;o.beginPath(),o.moveTo(u._t*l,u.ut*c);for(let a=s.from+1;a<s.to;++a){m=t[a];const s=r(e,m);switch(n){case 0:o.lineTo(m._t*l,m.ut*c);break;case 1:o.lineTo(m._t*l,t[a-1].ut*c),s!==h&&(i(s,m),o.lineTo(m._t*l,t[a-1].ut*c)),o.lineTo(m._t*l,m.ut*c);break;case 2:{const[e,n]=xy(t,a-1,a);o.bezierCurveTo(e._t*l,e.ut*c,n._t*l,n.ut*c,m._t*l,m.ut*c);break}}1!==n&&s!==h&&(i(s,m),o.moveTo(m._t*l,m.ut*c))}(d!==m||d===m&&1===n)&&a(e,h,d,m)}}const gy=6;function yy(e,t){return{_t:e._t-t._t,ut:e.ut-t.ut}}function vy(e,t){return{_t:e._t/t,ut:e.ut/t}}function xy(e,t,n){const s=Math.max(0,t-1),i=Math.min(e.length-1,n+1);var r,a;return[(r=e[t],a=vy(yy(e[n],e[s]),gy),{_t:r._t+a._t,ut:r.ut+a.ut}),yy(e[n],vy(yy(e[i],e[t]),gy))]}function by(e,t){const n=e.context;n.strokeStyle=t,n.stroke()}class wy extends mm{constructor(){super(...arguments),this.rt=null}ht(e){this.rt=e}et(e){if(null===this.rt)return;const{ot:t,lt:n,Kg:s,Xg:i,ct:r,Xt:a,Zg:o}=this.rt;if(null===n)return;const l=e.context;l.lineCap="butt",l.lineWidth=r*e.verticalPixelRatio,Hd(l,a),l.lineJoin="round";const c=this.Gg.bind(this);void 0!==i&&fy(e,t,i,n,s,c,by),o&&function(e,t,n,s,i){if(s.to-s.from<=0)return;const{horizontalPixelRatio:r,verticalPixelRatio:a,context:o}=e;let l=null;const c=Math.max(1,Math.floor(r))%2/2,u=n*a+c;for(let h=s.to-1;h>=s.from;--h){const n=t[h];if(n){const t=i(e,n);t!==l&&(o.beginPath(),null!==l&&o.fill(),o.fillStyle=t,l=t);const s=Math.round(n._t*r)+c,h=n.ut*a;o.moveTo(s,h),o.arc(s,h,u,0,2*Math.PI)}}o.fill()}(e,t,o,n,c)}}class jy extends wy{Gg(e,t){return t.vt}}class ky extends py{constructor(){super(...arguments),this.hg=new jy}jg(e,t,n){return{...this.Yg(e,t),...n.Dr(e)}}cg(){const e=this.Jn.N(),t={ot:this.sg,Xt:e.lineStyle,Xg:e.lineVisible?e.lineType:void 0,ct:e.lineWidth,Zg:e.pointMarkersVisible?e.pointMarkersRadius||e.lineWidth/2+2:void 0,lt:this.ng,Kg:this.Qn.Et().vu()};this.hg.ht(t)}}const Ny={type:"Line",isBuiltIn:!0,defaultOptions:{color:"#2196f3",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},Fg:(e,t)=>new ky(e,t)};function Sy(e,t,n,s,i){const{context:r,horizontalPixelRatio:a,verticalPixelRatio:o}=t;r.lineTo(i._t*a,e*o),r.lineTo(s._t*a,e*o),r.closePath(),r.fillStyle=n,r.fill()}class Cy extends mm{constructor(){super(...arguments),this.rt=null}ht(e){this.rt=e}et(e){if(null===this.rt)return;const{ot:t,lt:n,Kg:s,ct:i,Xt:r,Xg:a}=this.rt,o=this.rt.eM??(this.rt.rM?0:e.mediaSize.height);if(null===n)return;const l=e.context;l.lineCap="butt",l.lineJoin="round",l.lineWidth=i,Hd(l,r),l.lineWidth=1,fy(e,t,a,n,s,this.hM.bind(this),Sy.bind(null,o))}}class Py{aM(e,t){const n=this.lM,{oM:s,_M:i,uM:r,cM:a,eM:o,dM:l,fM:c}=t;if(void 0===this.pM||void 0===n||n.oM!==s||n._M!==i||n.uM!==r||n.cM!==a||n.eM!==o||n.dM!==l||n.fM!==c){const{verticalPixelRatio:n}=e,u=o||l>0?n:1,h=l*u,d=c===e.bitmapSize.height?c:c*u,m=(o??0)*u,p=e.context.createLinearGradient(0,h,0,d);if(p.addColorStop(0,s),null!=o){const e=Dp((m-h)/(d-h),0,1);p.addColorStop(e,i),p.addColorStop(e,r)}p.addColorStop(1,a),this.pM=p,this.lM=t}return this.pM}}class Ey extends Cy{constructor(){super(...arguments),this.vM=new Py}hM(e,t){var n;return this.vM.aM(e,{oM:t.mr,_M:"",uM:"",cM:t.wr,dM:(null==(n=this.rt)?void 0:n.dM)??0,fM:e.bitmapSize.height})}}class Ty extends py{constructor(e,t){super(e,t),this.hg=new dm,this.MM=new Ey,this.bM=new jy,this.hg.st([this.MM,this.bM])}jg(e,t,n){return{...this.Yg(e,t),...n.Dr(e)}}cg(){const e=this.Jn.N();if(null===this.ng||0===this.sg.length)return;let t;if(e.relativeGradient){t=this.sg[this.ng.from].ut;for(let e=this.ng.from;e<this.ng.to;e++){const n=this.sg[e];n.ut<t&&(t=n.ut)}}this.MM.ht({Xg:e.lineType,ot:this.sg,Xt:e.lineStyle,ct:e.lineWidth,eM:null,dM:t,rM:e.invertFilledArea,lt:this.ng,Kg:this.Qn.Et().vu()}),this.bM.ht({Xg:e.lineVisible?e.lineType:void 0,ot:this.sg,Xt:e.lineStyle,ct:e.lineWidth,lt:this.ng,Kg:this.Qn.Et().vu(),Zg:e.pointMarkersVisible?e.pointMarkersRadius||e.lineWidth/2+2:void 0})}}const Ly={type:"Area",isBuiltIn:!0,defaultOptions:{topColor:"rgba( 46, 220, 135, 0.4)",bottomColor:"rgba( 40, 221, 100, 0)",invertFilledArea:!1,relativeGradient:!1,lineColor:"#33D778",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},Fg:(e,t)=>new Ty(e,t)};class My extends Fg{constructor(e,t){super(e,t,!1)}ug(e,t,n){t._u(this.sg,rm(this.ng)),e.Yl(this.sg,n,rm(this.ng))}yM(e,t,n){return{wt:e,qh:t.Wt[0],Yh:t.Wt[1],jh:t.Wt[2],Kh:t.Wt[3],_t:NaN,jl:NaN,Kl:NaN,Xl:NaN,Zl:NaN}}og(){const e=this.Jn.Rh();this.sg=this.Jn.Xs().Hr().map(t=>this.jg(t.Re,t,e))}}class Iy extends mm{constructor(){super(...arguments),this.Yt=null,this.SM=0}ht(e){this.Yt=e}et(e){if(null===this.Yt||0===this.Yt.Xs.length||null===this.Yt.lt)return;const{horizontalPixelRatio:t}=e;this.SM=function(e,t){if(e>=2.5&&e<=4)return Math.floor(3*t);const n=1-.2*Math.atan(Math.max(4,e)-4)/(.5*Math.PI),s=Math.floor(e*n*t),i=Math.floor(e*t),r=Math.min(s,i);return Math.max(Math.floor(t),r)}(this.Yt.vu,t),this.SM>=2&&Math.floor(t)%2!=this.SM%2&&this.SM--;const n=this.Yt.Xs;this.Yt.TM&&this.RM(e,n,this.Yt.lt),this.Yt.Mi&&this._v(e,n,this.Yt.lt);const s=this.DM(t);(!this.Yt.Mi||this.SM>2*s)&&this.VM(e,n,this.Yt.lt)}RM(e,t,n){if(null===this.Yt)return;const{context:s,horizontalPixelRatio:i,verticalPixelRatio:r}=e;let a="",o=Math.min(Math.floor(i),Math.floor(this.Yt.vu*i));o=Math.max(Math.floor(i),Math.min(o,this.SM));const l=Math.floor(.5*o);let c=null;for(let u=n.from;u<n.to;u++){const e=t[u];e.pr!==a&&(s.fillStyle=e.pr,a=e.pr);const n=Math.round(Math.min(e.jl,e.Zl)*r),h=Math.round(Math.max(e.jl,e.Zl)*r),d=Math.round(e.Kl*r),m=Math.round(e.Xl*r);let p=Math.round(i*e._t)-l;const f=p+o-1;null!==c&&(p=Math.max(c+1,p),p=Math.min(p,f));const g=f-p+1;s.fillRect(p,d,g,n-d),s.fillRect(p,h+1,g,m-h),c=f}}DM(e){let t=Math.floor(1*e);this.SM<=2*t&&(t=Math.floor(.5*(this.SM-1)));const n=Math.max(Math.floor(e),t);return this.SM<=2*n?Math.max(Math.floor(e),Math.floor(1*e)):n}_v(e,t,n){if(null===this.Yt)return;const{context:s,horizontalPixelRatio:i,verticalPixelRatio:r}=e;let a="";const o=this.DM(i);let l=null;for(let c=n.from;c<n.to;c++){const e=t[c];e.dr!==a&&(s.fillStyle=e.dr,a=e.dr);let n=Math.round(e._t*i)-Math.floor(.5*this.SM);const u=n+this.SM-1,h=Math.round(Math.min(e.jl,e.Zl)*r),d=Math.round(Math.max(e.jl,e.Zl)*r);if(null!==l&&(n=Math.max(l+1,n),n=Math.min(n,u)),this.Yt.vu*i>2*o)bm(s,n,h,u-n+1,d-h+1,o);else{const e=u-n+1;s.fillRect(n,h,e,d-h+1)}l=u}}VM(e,t,n){if(null===this.Yt)return;const{context:s,horizontalPixelRatio:i,verticalPixelRatio:r}=e;let a="";const o=this.DM(i);for(let l=n.from;l<n.to;l++){const e=t[l];let n=Math.round(Math.min(e.jl,e.Zl)*r),c=Math.round(Math.max(e.jl,e.Zl)*r),u=Math.round(e._t*i)-Math.floor(.5*this.SM),h=u+this.SM-1;if(e.cr!==a){const t=e.cr;s.fillStyle=t,a=t}this.Yt.Mi&&(u+=o,n+=o,h-=o,c-=o),n>c||s.fillRect(u,n,h-u+1,c-n+1)}}}class _y extends My{constructor(){super(...arguments),this.hg=new Iy}jg(e,t,n){return{...this.yM(e,t,n),...n.Dr(e)}}cg(){const e=this.Jn.N();this.hg.ht({Xs:this.sg,vu:this.Qn.Et().vu(),TM:e.wickVisible,Mi:e.borderVisible,lt:this.ng})}}const Dy={type:"Candlestick",isBuiltIn:!0,defaultOptions:{upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},Fg:(e,t)=>new _y(e,t)};class Ay extends mm{constructor(){super(...arguments),this.Yt=null,this.IM=[]}ht(e){this.Yt=e,this.IM=[]}et({context:e,horizontalPixelRatio:t,verticalPixelRatio:n}){if(null===this.Yt||0===this.Yt.ot.length||null===this.Yt.lt)return;this.IM.length||this.BM(t);const s=Math.max(1,Math.floor(n)),i=Math.round(this.Yt.EM*n)-Math.floor(s/2),r=i+s;for(let a=this.Yt.lt.from;a<this.Yt.lt.to;a++){const t=this.Yt.ot[a],o=this.IM[a-this.Yt.lt.from],l=Math.round(t.ut*n);let c,u;e.fillStyle=t.cr,l<=i?(c=l,u=r):(c=i,u=l-Math.floor(s/2)+s),e.fillRect(o.Uh,c,o.bi-o.Uh+1,u-c)}}BM(e){if(null===this.Yt||0===this.Yt.ot.length||null===this.Yt.lt)return void(this.IM=[]);const t=Math.ceil(this.Yt.vu*e)<=1?0:Math.max(1,Math.floor(e)),n=Math.round(this.Yt.vu*e)-t;this.IM=new Array(this.Yt.lt.to-this.Yt.lt.from);for(let i=this.Yt.lt.from;i<this.Yt.lt.to;i++){const t=this.Yt.ot[i],s=Math.round(t._t*e);let r,a;if(n%2){const e=(n-1)/2;r=s-e,a=s+e}else{const e=n/2;r=s-e,a=s+e-1}this.IM[i-this.Yt.lt.from]={Uh:r,bi:a,AM:s,ne:t._t*e,wt:t.wt}}for(let i=this.Yt.lt.from+1;i<this.Yt.lt.to;i++){const e=this.IM[i-this.Yt.lt.from],n=this.IM[i-this.Yt.lt.from-1];e.wt===n.wt+1&&e.Uh-n.bi!==t+1&&(n.AM>n.ne?n.bi=e.Uh-t-1:e.Uh=n.bi+t+1)}let s=Math.ceil(this.Yt.vu*e);for(let i=this.Yt.lt.from;i<this.Yt.lt.to;i++){const e=this.IM[i-this.Yt.lt.from];e.bi<e.Uh&&(e.bi=e.Uh);const t=e.bi-e.Uh+1;s=Math.min(t,s)}if(t>0&&s<4)for(let i=this.Yt.lt.from;i<this.Yt.lt.to;i++){const e=this.IM[i-this.Yt.lt.from];e.bi-e.Uh+1>s&&(e.AM>e.ne?e.bi-=1:e.Uh+=1)}}}class Oy extends py{constructor(){super(...arguments),this.hg=new Ay}jg(e,t,n){return{...this.Yg(e,t),...n.Dr(e)}}cg(){const e={ot:this.sg,vu:this.Qn.Et().vu(),lt:this.ng,EM:this.Jn.Ft().Nt(this.Jn.N().base,Qd(this.Jn.zt()).Wt)};this.hg.ht(e)}}const Ry={type:"Histogram",isBuiltIn:!0,defaultOptions:{color:"#26a69a",base:0},Fg:(e,t)=>new Oy(e,t)},Fy={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function By(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const zy={date:By({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:By({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:By({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},Wy={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function Uy(e){return(t,n)=>{let s;if("formatting"===((null==n?void 0:n.context)?String(n.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,i=(null==n?void 0:n.width)?String(n.width):t;s=e.formattingValues[i]||e.formattingValues[t]}else{const t=e.defaultWidth,i=(null==n?void 0:n.width)?String(n.width):e.defaultWidth;s=e.values[i]||e.values[t]}return s[e.argumentCallback?e.argumentCallback(t):t]}}function Vy(e){return(t,n={})=>{const s=n.width,i=s&&e.matchPatterns[s]||e.matchPatterns[e.defaultMatchWidth],r=t.match(i);if(!r)return null;const a=r[0],o=s&&e.parsePatterns[s]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(o)?function(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n;return}(o,e=>e.test(a)):function(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n;return}(o,e=>e.test(a));let c;c=e.valueCallback?e.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;return{value:c,rest:t.slice(a.length)}}}var $y;const Hy={code:"en-US",formatDistance:(e,t,n)=>{let s;const i=Fy[e];return s="string"==typeof i?i:1===t?i.one:i.other.replace("{{count}}",t.toString()),(null==n?void 0:n.addSuffix)?n.comparison&&n.comparison>0?"in "+s:s+" ago":s},formatLong:zy,formatRelative:(e,t,n,s)=>Wy[e],localize:{ordinalNumber:(e,t)=>{const n=Number(e),s=n%100;if(s>20||s<10)switch(s%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:Uy({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:Uy({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:Uy({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:Uy({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:Uy({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:($y={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)},(e,t={})=>{const n=e.match($y.matchPattern);if(!n)return null;const s=n[0],i=e.match($y.parsePattern);if(!i)return null;let r=$y.valueCallback?$y.valueCallback(i[0]):i[0];return r=t.valueCallback?t.valueCallback(r):r,{value:r,rest:e.slice(s.length)}}),era:Vy({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:Vy({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:Vy({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:Vy({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:Vy({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};let qy={};function Yy(){return qy}const Gy=6048e5,Qy=Symbol.for("constructDateFrom");function Jy(e,t){return"function"==typeof e?e(t):e&&"object"==typeof e&&Qy in e?e[Qy](t):e instanceof Date?new e.constructor(t):new Date(t)}function Xy(e,t){return Jy(t||e,e)}function Ky(e){const t=Xy(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function Zy(e,t){const n=Xy(e,null==t?void 0:t.in);return n.setHours(0,0,0,0),n}function ev(e,t,n){const[s,i]=function(e,...t){const n=Jy.bind(null,t.find(e=>"object"==typeof e));return t.map(n)}(null==n||n.in,e,t),r=Zy(s),a=Zy(i),o=+r-Ky(r),l=+a-Ky(a);return Math.round((o-l)/864e5)}function tv(e,t){const n=Xy(e,null==t?void 0:t.in),s=ev(n,function(e,t){const n=Xy(e,null==t?void 0:t.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}(n));return s+1}function nv(e,t){var n,s,i,r;const a=Yy(),o=(null==t?void 0:t.weekStartsOn)??(null==(s=null==(n=null==t?void 0:t.locale)?void 0:n.options)?void 0:s.weekStartsOn)??a.weekStartsOn??(null==(r=null==(i=a.locale)?void 0:i.options)?void 0:r.weekStartsOn)??0,l=Xy(e,null==t?void 0:t.in),c=l.getDay(),u=(c<o?7:0)+c-o;return l.setDate(l.getDate()-u),l.setHours(0,0,0,0),l}function sv(e,t){return nv(e,{...t,weekStartsOn:1})}function iv(e,t){const n=Xy(e,null==t?void 0:t.in),s=n.getFullYear(),i=Jy(n,0);i.setFullYear(s+1,0,4),i.setHours(0,0,0,0);const r=sv(i),a=Jy(n,0);a.setFullYear(s,0,4),a.setHours(0,0,0,0);const o=sv(a);return n.getTime()>=r.getTime()?s+1:n.getTime()>=o.getTime()?s:s-1}function rv(e,t){const n=Xy(e,null==t?void 0:t.in),s=+sv(n)-+function(e,t){const n=iv(e,t),s=Jy(e,0);return s.setFullYear(n,0,4),s.setHours(0,0,0,0),sv(s)}(n);return Math.round(s/Gy)+1}function av(e,t){var n,s,i,r;const a=Xy(e,null==t?void 0:t.in),o=a.getFullYear(),l=Yy(),c=(null==t?void 0:t.firstWeekContainsDate)??(null==(s=null==(n=null==t?void 0:t.locale)?void 0:n.options)?void 0:s.firstWeekContainsDate)??l.firstWeekContainsDate??(null==(r=null==(i=l.locale)?void 0:i.options)?void 0:r.firstWeekContainsDate)??1,u=Jy((null==t?void 0:t.in)||e,0);u.setFullYear(o+1,0,c),u.setHours(0,0,0,0);const h=nv(u,t),d=Jy((null==t?void 0:t.in)||e,0);d.setFullYear(o,0,c),d.setHours(0,0,0,0);const m=nv(d,t);return+a>=+h?o+1:+a>=+m?o:o-1}function ov(e,t){const n=Xy(e,null==t?void 0:t.in),s=+nv(n,t)-+function(e,t){var n,s,i,r;const a=Yy(),o=(null==t?void 0:t.firstWeekContainsDate)??(null==(s=null==(n=null==t?void 0:t.locale)?void 0:n.options)?void 0:s.firstWeekContainsDate)??a.firstWeekContainsDate??(null==(r=null==(i=a.locale)?void 0:i.options)?void 0:r.firstWeekContainsDate)??1,l=av(e,t),c=Jy((null==t?void 0:t.in)||e,0);return c.setFullYear(l,0,o),c.setHours(0,0,0,0),nv(c,t)}(n,t);return Math.round(s/Gy)+1}function lv(e,t){return(e<0?"-":"")+Math.abs(e).toString().padStart(t,"0")}const cv={y(e,t){const n=e.getFullYear(),s=n>0?n:1-n;return lv("yy"===t?s%100:s,t.length)},M(e,t){const n=e.getMonth();return"M"===t?String(n+1):lv(n+1,2)},d:(e,t)=>lv(e.getDate(),t.length),a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:(e,t)=>lv(e.getHours()%12||12,t.length),H:(e,t)=>lv(e.getHours(),t.length),m:(e,t)=>lv(e.getMinutes(),t.length),s:(e,t)=>lv(e.getSeconds(),t.length),S(e,t){const n=t.length,s=e.getMilliseconds();return lv(Math.trunc(s*Math.pow(10,n-3)),t.length)}},uv="midnight",hv="noon",dv="morning",mv="afternoon",pv="evening",fv="night",gv={G:function(e,t,n){const s=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(s,{width:"abbreviated"});case"GGGGG":return n.era(s,{width:"narrow"});default:return n.era(s,{width:"wide"})}},y:function(e,t,n){if("yo"===t){const t=e.getFullYear(),s=t>0?t:1-t;return n.ordinalNumber(s,{unit:"year"})}return cv.y(e,t)},Y:function(e,t,n,s){const i=av(e,s),r=i>0?i:1-i;if("YY"===t){return lv(r%100,2)}return"Yo"===t?n.ordinalNumber(r,{unit:"year"}):lv(r,t.length)},R:function(e,t){return lv(iv(e),t.length)},u:function(e,t){return lv(e.getFullYear(),t.length)},Q:function(e,t,n){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(s);case"QQ":return lv(s,2);case"Qo":return n.ordinalNumber(s,{unit:"quarter"});case"QQQ":return n.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(s,{width:"narrow",context:"formatting"});default:return n.quarter(s,{width:"wide",context:"formatting"})}},q:function(e,t,n){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(s);case"qq":return lv(s,2);case"qo":return n.ordinalNumber(s,{unit:"quarter"});case"qqq":return n.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(s,{width:"narrow",context:"standalone"});default:return n.quarter(s,{width:"wide",context:"standalone"})}},M:function(e,t,n){const s=e.getMonth();switch(t){case"M":case"MM":return cv.M(e,t);case"Mo":return n.ordinalNumber(s+1,{unit:"month"});case"MMM":return n.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(s,{width:"narrow",context:"formatting"});default:return n.month(s,{width:"wide",context:"formatting"})}},L:function(e,t,n){const s=e.getMonth();switch(t){case"L":return String(s+1);case"LL":return lv(s+1,2);case"Lo":return n.ordinalNumber(s+1,{unit:"month"});case"LLL":return n.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(s,{width:"narrow",context:"standalone"});default:return n.month(s,{width:"wide",context:"standalone"})}},w:function(e,t,n,s){const i=ov(e,s);return"wo"===t?n.ordinalNumber(i,{unit:"week"}):lv(i,t.length)},I:function(e,t,n){const s=rv(e);return"Io"===t?n.ordinalNumber(s,{unit:"week"}):lv(s,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getDate(),{unit:"date"}):cv.d(e,t)},D:function(e,t,n){const s=tv(e);return"Do"===t?n.ordinalNumber(s,{unit:"dayOfYear"}):lv(s,t.length)},E:function(e,t,n){const s=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(s,{width:"short",context:"formatting"});default:return n.day(s,{width:"wide",context:"formatting"})}},e:function(e,t,n,s){const i=e.getDay(),r=(i-s.weekStartsOn+8)%7||7;switch(t){case"e":return String(r);case"ee":return lv(r,2);case"eo":return n.ordinalNumber(r,{unit:"day"});case"eee":return n.day(i,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(i,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(i,{width:"short",context:"formatting"});default:return n.day(i,{width:"wide",context:"formatting"})}},c:function(e,t,n,s){const i=e.getDay(),r=(i-s.weekStartsOn+8)%7||7;switch(t){case"c":return String(r);case"cc":return lv(r,t.length);case"co":return n.ordinalNumber(r,{unit:"day"});case"ccc":return n.day(i,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(i,{width:"narrow",context:"standalone"});case"cccccc":return n.day(i,{width:"short",context:"standalone"});default:return n.day(i,{width:"wide",context:"standalone"})}},i:function(e,t,n){const s=e.getDay(),i=0===s?7:s;switch(t){case"i":return String(i);case"ii":return lv(i,t.length);case"io":return n.ordinalNumber(i,{unit:"day"});case"iii":return n.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(s,{width:"short",context:"formatting"});default:return n.day(s,{width:"wide",context:"formatting"})}},a:function(e,t,n){const s=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,t,n){const s=e.getHours();let i;switch(i=12===s?hv:0===s?uv:s/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(i,{width:"narrow",context:"formatting"});default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},B:function(e,t,n){const s=e.getHours();let i;switch(i=s>=17?pv:s>=12?mv:s>=4?dv:fv,t){case"B":case"BB":case"BBB":return n.dayPeriod(i,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(i,{width:"narrow",context:"formatting"});default:return n.dayPeriod(i,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),n.ordinalNumber(t,{unit:"hour"})}return cv.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getHours(),{unit:"hour"}):cv.H(e,t)},K:function(e,t,n){const s=e.getHours()%12;return"Ko"===t?n.ordinalNumber(s,{unit:"hour"}):lv(s,t.length)},k:function(e,t,n){let s=e.getHours();return 0===s&&(s=24),"ko"===t?n.ordinalNumber(s,{unit:"hour"}):lv(s,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):cv.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getSeconds(),{unit:"second"}):cv.s(e,t)},S:function(e,t){return cv.S(e,t)},X:function(e,t,n){const s=e.getTimezoneOffset();if(0===s)return"Z";switch(t){case"X":return vv(s);case"XXXX":case"XX":return xv(s);default:return xv(s,":")}},x:function(e,t,n){const s=e.getTimezoneOffset();switch(t){case"x":return vv(s);case"xxxx":case"xx":return xv(s);default:return xv(s,":")}},O:function(e,t,n){const s=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+yv(s,":");default:return"GMT"+xv(s,":")}},z:function(e,t,n){const s=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+yv(s,":");default:return"GMT"+xv(s,":")}},t:function(e,t,n){return lv(Math.trunc(+e/1e3),t.length)},T:function(e,t,n){return lv(+e,t.length)}};function yv(e,t=""){const n=e>0?"-":"+",s=Math.abs(e),i=Math.trunc(s/60),r=s%60;return 0===r?n+String(i):n+String(i)+t+lv(r,2)}function vv(e,t){if(e%60==0){return(e>0?"-":"+")+lv(Math.abs(e)/60,2)}return xv(e,t)}function xv(e,t=""){const n=e>0?"-":"+",s=Math.abs(e);return n+lv(Math.trunc(s/60),2)+t+lv(s%60,2)}const bv=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},wv=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},jv={p:wv,P:(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],s=n[1],i=n[2];if(!i)return bv(e,t);let r;switch(s){case"P":r=t.dateTime({width:"short"});break;case"PP":r=t.dateTime({width:"medium"});break;case"PPP":r=t.dateTime({width:"long"});break;default:r=t.dateTime({width:"full"})}return r.replace("{{date}}",bv(s,t)).replace("{{time}}",wv(i,t))}},kv=/^D+$/,Nv=/^Y+$/,Sv=["D","DD","YY","YYYY"];function Cv(e){return!(!((t=e)instanceof Date||"object"==typeof t&&"[object Date]"===Object.prototype.toString.call(t))&&"number"!=typeof e||isNaN(+Xy(e)));var t}const Pv=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Ev=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Tv=/^'([^]*?)'?$/,Lv=/''/g,Mv=/[a-zA-Z]/;function Iv(e,t,n){var s,i,r,a,o,l,c,u;const h=Yy(),d=(null==n?void 0:n.locale)??h.locale??Hy,m=(null==n?void 0:n.firstWeekContainsDate)??(null==(i=null==(s=null==n?void 0:n.locale)?void 0:s.options)?void 0:i.firstWeekContainsDate)??h.firstWeekContainsDate??(null==(a=null==(r=h.locale)?void 0:r.options)?void 0:a.firstWeekContainsDate)??1,p=(null==n?void 0:n.weekStartsOn)??(null==(l=null==(o=null==n?void 0:n.locale)?void 0:o.options)?void 0:l.weekStartsOn)??h.weekStartsOn??(null==(u=null==(c=h.locale)?void 0:c.options)?void 0:u.weekStartsOn)??0,f=Xy(e,null==n?void 0:n.in);if(!Cv(f))throw new RangeError("Invalid time value");let g=t.match(Ev).map(e=>{const t=e[0];if("p"===t||"P"===t){return(0,jv[t])(e,d.formatLong)}return e}).join("").match(Pv).map(e=>{if("''"===e)return{isToken:!1,value:"'"};const t=e[0];if("'"===t)return{isToken:!1,value:_v(e)};if(gv[t])return{isToken:!0,value:e};if(t.match(Mv))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}});d.localize.preprocessor&&(g=d.localize.preprocessor(f,g));const y={firstWeekContainsDate:m,weekStartsOn:p,locale:d};return g.map(s=>{if(!s.isToken)return s.value;const i=s.value;(!(null==n?void 0:n.useAdditionalWeekYearTokens)&&function(e){return Nv.test(e)}(i)||!(null==n?void 0:n.useAdditionalDayOfYearTokens)&&function(e){return kv.test(e)}(i))&&function(e,t,n){const s=function(e,t,n){const s="Y"===e[0]?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${s} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}(e,t,n);if(Sv.includes(e))throw new RangeError(s)}(i,t,String(e));return(0,gv[i[0]])(f,i,d.localize,y)}).join("")}function _v(e){const t=e.match(Tv);return t?t[1].replace(Lv,"'"):e}function Dv(e,t,n){const s=Object.assign({},Yy()),i=function(e,t,n){return new Intl.DateTimeFormat(n?[n.code,"en-US"]:void 0,{timeZone:t,timeZoneName:e})}(e,n.timeZone,n.locale??s.locale);return"formatToParts"in i?function(e,t){const n=e.formatToParts(t);for(let s=n.length-1;s>=0;--s)if("timeZoneName"===n[s].type)return n[s].value;return}(i,t):function(e,t){const n=e.format(t).replace(/\u200E/g,""),s=/ [\w-+ ]+$/.exec(n);return s?s[0].substr(1):""}(i,t)}function Av(e,t){const n=function(e){Rv[e]||(Rv[e]=Bv?new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}));return Rv[e]}(t);return"formatToParts"in n?function(e,t){try{const n=e.formatToParts(t),s=[];for(let e=0;e<n.length;e++){const t=Ov[n[e].type];void 0!==t&&(s[t]=parseInt(n[e].value,10))}return s}catch(n){if(n instanceof RangeError)return[NaN];throw n}}(n,e):function(e,t){const n=e.format(t),s=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(n);return[parseInt(s[3],10),parseInt(s[1],10),parseInt(s[2],10),parseInt(s[4],10),parseInt(s[5],10),parseInt(s[6],10)]}(n,e)}const Ov={year:0,month:1,day:2,hour:3,minute:4,second:5};const Rv={},Fv=new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:"America/New_York",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),Bv="06/25/2014, 00:00:00"===Fv||"‎06‎/‎25‎/‎2014‎ ‎00‎:‎00‎:‎00"===Fv;function zv(e,t,n,s,i,r,a){const o=new Date(0);return o.setUTCFullYear(e,t,n),o.setUTCHours(s,i,r,a),o}const Wv=36e5,Uv={timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-])(\d{2}):?(\d{2})$/};function Vv(e,t,n){if(!e)return 0;let s,i,r=Uv.timezoneZ.exec(e);if(r)return 0;if(r=Uv.timezoneHH.exec(e),r)return s=parseInt(r[1],10),Hv(s)?-s*Wv:NaN;if(r=Uv.timezoneHHMM.exec(e),r){s=parseInt(r[2],10);const e=parseInt(r[3],10);return Hv(s,e)?(i=Math.abs(s)*Wv+6e4*e,"+"===r[1]?-i:i):NaN}if(function(e){if(qv[e])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:e}),qv[e]=!0,!0}catch(t){return!1}}(e)){t=new Date(t||Date.now());const s=n?t:function(e){return zv(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}(t),i=$v(s,e),r=n?i:function(e,t,n){const s=e.getTime();let i=s-t;const r=$v(new Date(i),n);if(t===r)return t;i-=r-t;const a=$v(new Date(i),n);if(r===a)return r;return Math.max(r,a)}(t,i,e);return-r}return NaN}function $v(e,t){const n=Av(e,t),s=zv(n[0],n[1]-1,n[2],n[3]%24,n[4],n[5],0).getTime();let i=e.getTime();const r=i%1e3;return i-=r>=0?r:1e3+r,s-i}function Hv(e,t){return-23<=e&&e<=23&&(null==t||0<=t&&t<=59)}const qv={};const Yv={X:function(e,t,n){const s=Gv(n.timeZone,e);if(0===s)return"Z";switch(t){case"X":return Xv(s);case"XXXX":case"XX":return Jv(s);default:return Jv(s,":")}},x:function(e,t,n){const s=Gv(n.timeZone,e);switch(t){case"x":return Xv(s);case"xxxx":case"xx":return Jv(s);default:return Jv(s,":")}},O:function(e,t,n){const s=Gv(n.timeZone,e);switch(t){case"O":case"OO":case"OOO":return"GMT"+function(e,t=""){const n=e>0?"-":"+",s=Math.abs(e),i=Math.floor(s/60),r=s%60;if(0===r)return n+String(i);return n+String(i)+t+Qv(r,2)}(s,":");default:return"GMT"+Jv(s,":")}},z:function(e,t,n){switch(t){case"z":case"zz":case"zzz":return Dv("short",e,n);default:return Dv("long",e,n)}}};function Gv(e,t){const n=e?Vv(e,t,!0)/6e4:(null==t?void 0:t.getTimezoneOffset())??0;if(Number.isNaN(n))throw new RangeError("Invalid time zone specified: "+e);return n}function Qv(e,t){const n=e<0?"-":"";let s=Math.abs(e).toString();for(;s.length<t;)s="0"+s;return n+s}function Jv(e,t=""){const n=e>0?"-":"+",s=Math.abs(e);return n+Qv(Math.floor(s/60),2)+t+Qv(Math.floor(s%60),2)}function Xv(e,t){if(e%60==0){return(e>0?"-":"+")+Qv(Math.abs(e)/60,2)}return Jv(e,t)}function Kv(e){const t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+e-+t}const Zv=36e5,ex=6e4,tx={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/};function nx(e,t={}){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(null===e)return new Date(NaN);const n=null==t.additionalDigits?2:Number(t.additionalDigits);if(2!==n&&1!==n&&0!==n)throw new RangeError("additionalDigits must be 0, 1 or 2");if(e instanceof Date||"object"==typeof e&&"[object Date]"===Object.prototype.toString.call(e))return new Date(e.getTime());if("number"==typeof e||"[object Number]"===Object.prototype.toString.call(e))return new Date(e);if("[object String]"!==Object.prototype.toString.call(e))return new Date(NaN);const s=function(e){const t={};let n,s=tx.dateTimePattern.exec(e);s?(t.date=s[1],n=s[3]):(s=tx.datePattern.exec(e),s?(t.date=s[1],n=s[2]):(t.date=null,n=e));if(n){const e=tx.timeZone.exec(n);e?(t.time=n.replace(e[1],""),t.timeZone=e[1].trim()):t.time=n}return t}(e),{year:i,restDateString:r}=function(e,t){if(e){const n=tx.YYY[t],s=tx.YYYYY[t];let i=tx.YYYY.exec(e)||s.exec(e);if(i){const t=i[1];return{year:parseInt(t,10),restDateString:e.slice(t.length)}}if(i=tx.YY.exec(e)||n.exec(e),i){const t=i[1];return{year:100*parseInt(t,10),restDateString:e.slice(t.length)}}}return{year:null}}(s.date,n),a=function(e,t){if(null===t)return null;let n,s,i;if(!e||!e.length)return n=new Date(0),n.setUTCFullYear(t),n;let r=tx.MM.exec(e);if(r)return n=new Date(0),s=parseInt(r[1],10)-1,ox(t,s)?(n.setUTCFullYear(t,s),n):new Date(NaN);if(r=tx.DDD.exec(e),r){n=new Date(0);const e=parseInt(r[1],10);return function(e,t){if(t<1)return!1;const n=ax(e);if(n&&t>366)return!1;if(!n&&t>365)return!1;return!0}(t,e)?(n.setUTCFullYear(t,0,e),n):new Date(NaN)}if(r=tx.MMDD.exec(e),r){n=new Date(0),s=parseInt(r[1],10)-1;const e=parseInt(r[2],10);return ox(t,s,e)?(n.setUTCFullYear(t,s,e),n):new Date(NaN)}if(r=tx.Www.exec(e),r)return i=parseInt(r[1],10)-1,lx(i)?sx(t,i):new Date(NaN);if(r=tx.WwwD.exec(e),r){i=parseInt(r[1],10)-1;const e=parseInt(r[2],10)-1;return lx(i,e)?sx(t,i,e):new Date(NaN)}return null}(r,i);if(null===a||isNaN(a.getTime()))return new Date(NaN);if(a){const e=a.getTime();let n,i=0;if(s.time&&(i=function(e){let t,n,s=tx.HH.exec(e);if(s)return t=parseFloat(s[1].replace(",",".")),cx(t)?t%24*Zv:NaN;if(s=tx.HHMM.exec(e),s)return t=parseInt(s[1],10),n=parseFloat(s[2].replace(",",".")),cx(t,n)?t%24*Zv+n*ex:NaN;if(s=tx.HHMMSS.exec(e),s){t=parseInt(s[1],10),n=parseInt(s[2],10);const e=parseFloat(s[3].replace(",","."));return cx(t,n,e)?t%24*Zv+n*ex+1e3*e:NaN}return null}(s.time),null===i||isNaN(i)))return new Date(NaN);if(s.timeZone||t.timeZone){if(n=Vv(s.timeZone||t.timeZone,new Date(e+i)),isNaN(n))return new Date(NaN)}else n=Kv(new Date(e+i)),n=Kv(new Date(e+i+n));return new Date(e+i+n)}return new Date(NaN)}function sx(e,t,n){t=t||0,n=n||0;const s=new Date(0);s.setUTCFullYear(e,0,4);const i=7*t+n+1-(s.getUTCDay()||7);return s.setUTCDate(s.getUTCDate()+i),s}const ix=[31,28,31,30,31,30,31,31,30,31,30,31],rx=[31,29,31,30,31,30,31,31,30,31,30,31];function ax(e){return e%400==0||e%4==0&&e%100!=0}function ox(e,t,n){if(t<0||t>11)return!1;if(null!=n){if(n<1)return!1;const s=ax(e);if(s&&n>rx[t])return!1;if(!s&&n>ix[t])return!1}return!0}function lx(e,t){return!(e<0||e>52)&&(null==t||!(t<0||t>6))}function cx(e,t,n){return!(e<0||e>=25)&&((null==t||!(t<0||t>=60))&&(null==n||!(n<0||n>=60)))}const ux=/([xXOz]+)|''|'(''|[^'])+('|$)/g;function hx(e,t,n,s){return function(e,t,n={}){const s=(t=String(t)).match(ux);if(s){const i=nx(n.originalDate||e,n);t=s.reduce(function(e,t){if("'"===t[0])return e;const s=e.indexOf(t),r="'"===e[s-1],a=e.replace(t,"'"+Yv[t[0]](i,t,n)+"'");return r?a.substring(0,s-1)+a.substring(s+1):a},t)}return Iv(e,t,n)}(function(e,t,n){const s=Vv(t,e=nx(e,n),!0),i=new Date(e.getTime()-s),r=new Date(0);return r.setFullYear(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate()),r.setHours(i.getUTCHours(),i.getUTCMinutes(),i.getUTCSeconds(),i.getUTCMilliseconds()),r}(e,t,{timeZone:(s={...s,timeZone:t,originalDate:e}).timeZone}),n,s)}const dx="https://s89-satya-capstone-tradebro.onrender.com";const mx=new class{constructor(){this.intervals=new Map,this.subscribers=new Map,this.lastUpdateTimes=new Map}startLiveUpdates(e,t){this.stopLiveUpdates(e),this.subscribers.set(e,t),this.fetchLatestCandle(e);const n=this.getSmartInterval(e),s=setInterval(()=>{this.fetchLatestCandle(e)},n);return this.intervals.set(e,s),e}getSmartInterval(e){const t=new Date;let n,s,i=!1;if(e.endsWith(".NS")||e.endsWith(".BO")){const e=hx(t,"Asia/Kolkata","HH:mm");n=parseInt(e.split(":")[0],10),s=parseInt(e.split(":")[1],10),(9===n&&s>=15||n>9&&n<15||15===n&&s<=30)&&(i=!0)}else{const e=hx(t,"America/New_York","HH:mm");n=parseInt(e.split(":")[0],10),s=parseInt(e.split(":")[1],10),(9===n&&s>=30||n>9&&n<16)&&(i=!0)}return i?15e3:n>=8&&n<9||n>16&&n<=18?6e4:3e5}stopLiveUpdates(e){const t=this.intervals.get(e);t&&(clearInterval(t),this.intervals.delete(e),this.subscribers.delete(e),this.lastUpdateTimes.delete(e))}stopAllUpdates(){this.intervals.forEach(e=>{clearInterval(e)}),this.intervals.clear(),this.subscribers.clear(),this.lastUpdateTimes.clear()}async fetchLatestCandle(e){try{const t=await ki.get(`${dx}/api/live-charts/latest/${e}`,{timeout:1e4});if(t.data.success&&t.data.latest){const n=t.data.latest,s=this.subscribers.get(e),i=this.lastUpdateTimes.get(e),r=n.time;!i||r>i?(this.lastUpdateTimes.set(e,r),s&&s({type:"update",data:n,marketOpen:t.data.marketOpen,exchange:t.data.exchange,timestamp:t.data.timestamp,symbol:e})):s&&s({type:"price_update",data:n,marketOpen:t.data.marketOpen,exchange:t.data.exchange,timestamp:t.data.timestamp,symbol:e})}else if(!t.data.success)throw new Error(t.data.message||`API error for ${e}`)}catch(t){const n=this.subscribers.get(e);n&&n({type:"error",error:t.message,symbol:e})}}async fetchInitialData(e,t){try{const n=await ki.get(`${dx}/api/live-charts/historical/${e}`,{params:{period:t},timeout:15e3});if(n.data.success)return{success:!0,data:n.data.data,latest:n.data.latest,marketOpen:n.data.marketOpen,exchange:n.data.exchange,count:n.data.data.length};throw new Error(n.data.message||"Failed to fetch initial historical data")}catch(n){return{success:!1,error:n.message,data:[]}}}async checkMarketStatus(e="NSE"){try{return(await ki.get(`${dx}/api/live-charts/market-status/${e}`,{timeout:5e3})).data}catch(t){return{success:!1,marketOpen:!1,exchange:e.toUpperCase(),error:t.message}}}getActiveSymbols(){return Array.from(this.subscribers.keys())}isTracking(e){return this.subscribers.has(e)}getUpdateIntervalId(e){return this.intervals.get(e)}startBatchLiveUpdates(e,t,n=6e4){const s=`batch_${e.sort().join("_")}`;this.stopLiveUpdates(s),this.subscribers.set(s,t),this.fetchBatchCandles(e).then(n=>{n.success?t({type:"batch_update",data:n.results,timestamp:n.timestamp,marketOpen:n.marketOpen,exchange:n.exchange,symbols:e}):t({type:"error",error:n.error,symbols:e})});const i=setInterval(()=>{this.fetchBatchCandles(e).then(n=>{n.success?t({type:"batch_update",data:n.results,timestamp:n.timestamp,marketOpen:n.marketOpen,exchange:n.exchange,symbols:e}):t({type:"error",error:n.error,symbols:e})})},n);return this.intervals.set(s,i),s}async fetchBatchCandles(e){try{if(0===e.length)return{success:!0,results:[],count:0};const t=await ki.post(`${dx}/api/live-charts/batch`,{symbols:e},{timeout:15e3});if(t.data.success)return{success:!0,results:t.data.results,timestamp:t.data.timestamp,marketOpen:t.data.marketOpen,exchange:t.data.exchange};throw new Error(t.data.message||"Batch fetch failed")}catch(t){return{success:!1,error:t.message,results:[]}}}};"undefined"!=typeof window&&window.addEventListener("beforeunload",()=>{mx.stopAllUpdates()});const px=({data:e=[],symbol:t="RELIANCE.NS",timeframe:n="1D",chartType:i="candlestick",theme:r="dark",onRefresh:a,loading:o=!1,height:l=500,enableLiveUpdates:c=!0})=>{const u=s.useRef(),h=s.useRef(),d=s.useRef(),m=s.useRef(),p=s.useRef(),f=s.useRef(),[g,y]=s.useState(!1),[x,b]=s.useState(!0),[w,j]=s.useState({sma:!1,ema:!1,rsi:!1,macd:!1}),[k,N]=s.useState(c&&"1D"===n),[S,C]=s.useState(null),[P,E]=s.useState(!1),[T,L]=s.useState(null),[I,_]=s.useState(null),D=e=>{if(!h.current)return;const{type:t,data:n,marketOpen:s,error:r}=e;r||(E(s),C(new Date),"update"===t&&n?(d.current&&"candlestick"===i?d.current.update(n):m.current&&"line"===i?m.current.update({time:n.time,value:n.close}):p.current&&"area"===i&&p.current.update({time:n.time,value:n.close}),x&&f.current&&n.volume&&f.current.update({time:n.time,value:n.volume,color:n.close>=n.open?"#26a69a":"#ef5350"}),L(n.close),_({direction:"update",timestamp:Date.now()}),setTimeout(()=>_(null),1e3)):"price_update"===t&&n&&(d.current&&"candlestick"===i&&d.current.update(n),L(n.close)))};s.useEffect(()=>{if(!u.current)return;const e=function(e,t){return my(e,new Rf,Rf.ad(t))}(u.current,{layout:{background:{type:xf.Solid,color:"dark"===r?"#0F172A":"#FFFFFF"},textColor:"dark"===r?"#F8FAFC":"#1E293B",fontSize:12,fontFamily:"Inter, -apple-system, BlinkMacSystemFont, sans-serif"},grid:{vertLines:{color:"dark"===r?"#1E293B":"#E2E8F0",style:1},horzLines:{color:"dark"===r?"#1E293B":"#E2E8F0",style:1}},crosshair:{mode:1,vertLine:{color:"dark"===r?"#64748B":"#475569",width:1,style:3},horzLine:{color:"dark"===r?"#64748B":"#475569",width:1,style:3}},priceScale:{borderColor:"dark"===r?"#334155":"#CBD5E1",textColor:"dark"===r?"#94A3B8":"#64748B"},timeScale:{borderColor:"dark"===r?"#334155":"#CBD5E1",textColor:"dark"===r?"#94A3B8":"#64748B",timeVisible:!0,secondsVisible:!1},watermark:{visible:!0,fontSize:48,horzAlign:"center",vertAlign:"center",color:"dark"===r?"rgba(248, 250, 252, 0.05)":"rgba(30, 41, 59, 0.05)",text:t},rightPriceScale:{scaleMargins:{top:.1,bottom:x?.4:.1}},width:u.current.clientWidth,height:g?window.innerHeight-100:l});h.current=e;try{"candlestick"===i?d.current=e.addSeries(Dy,{upColor:"#10B981",downColor:"#EF4444",borderDownColor:"#EF4444",borderUpColor:"#10B981",wickDownColor:"#EF4444",wickUpColor:"#10B981"}):"line"===i?m.current=e.addSeries(Ny,{color:"#3B82F6",lineWidth:2,lineStyle:0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4}):"area"===i&&(p.current=e.addSeries(Ly,{topColor:"rgba(59, 130, 246, 0.4)",bottomColor:"rgba(59, 130, 246, 0.0)",lineColor:"#3B82F6",lineWidth:2}))}catch(s){}x&&(f.current=e.addSeries(Ry,{color:"dark"===r?"#475569":"#94A3B8",priceFormat:{type:"volume"},priceScaleId:"volume",scaleMargins:{top:.7,bottom:0}}),e.priceScale("volume").applyOptions({scaleMargins:{top:.7,bottom:0}}));const n=()=>{h.current&&u.current&&h.current.applyOptions({width:u.current.clientWidth,height:g?window.innerHeight-100:l})};return window.addEventListener("resize",n),()=>{window.removeEventListener("resize",n),h.current&&h.current.remove()}},[i,r,x,g,l]),s.useEffect(()=>{if(!u.current)return;const e=new ResizeObserver(e=>{for(let t of e)if(h.current){const{width:e}=t.contentRect;h.current.applyOptions({width:e,height:g?window.innerHeight-100:l}),h.current.timeScale().fitContent()}});return e.observe(u.current),()=>{e.disconnect()}},[g,l]),s.useEffect(()=>{if(e&&0!==e.length)try{const t=e=>{if(!e)return(new Date).toISOString().split("T")[0];if("number"==typeof e)return e;if("string"==typeof e){const t=new Date(e);if(isNaN(t.getTime())){return e.split(" ")[0]||(new Date).toISOString().split("T")[0]}return t.toISOString().split("T")[0]}return(new Date).toISOString().split("T")[0]},n=e.map(e=>({time:t(e.time||e.date),open:parseFloat(e.open),high:parseFloat(e.high),low:parseFloat(e.low),close:parseFloat(e.close),value:parseFloat(e.close)})),s=e.map(e=>({time:t(e.time||e.date),value:parseInt(e.volume||0),color:e.close>=e.open?"#10B981":"#EF4444"})),r=[],a=new Set;n.sort((e,t)=>new Date(e.time)-new Date(t.time)).forEach(e=>{a.has(e.time)||(a.add(e.time),r.push(e))});const o=[],l=new Set;s.sort((e,t)=>new Date(e.time)-new Date(t.time)).forEach(e=>{l.has(e.time)||(l.add(e.time),o.push(e))}),"candlestick"===i&&d.current?d.current.setData(r):"line"===i&&m.current?m.current.setData(r):"area"===i&&p.current&&p.current.setData(r),x&&f.current&&o.length>0&&f.current.setData(o),h.current&&h.current.timeScale().fitContent()}catch(t){}},[e,i,x]),s.useEffect(()=>{if("1D"===n)return k?(mx.startLiveUpdates(t,D),mx.checkMarketStatus(t.includes(".NS")?"NSE":"NASDAQ").then(e=>{E(e.marketOpen)})):mx.stopLiveUpdates(t),()=>{mx.stopLiveUpdates(t)};k&&(N(!1),mx.stopLiveUpdates(t))},[k,t,n]),s.useEffect(()=>(mx.stopLiveUpdates(t),"1D"===n&&c?(N(!0),mx.startLiveUpdates(t,D)):N(!1),()=>{mx.stopLiveUpdates(t)}),[t,n]),s.useEffect(()=>{const e=e=>{"Escape"===e.key&&g&&A(),"f"!==e.key&&"F"!==e.key||(e.ctrlKey||e.metaKey)&&(e.preventDefault(),A())};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e),g&&(document.body.style.overflow="",document.body.classList.remove("chart-fullscreen-active"))}},[g]);const A=()=>{const e=!g;y(e),e?(document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.width="100%",document.body.style.height="100%",document.body.style.top="0",document.body.style.left="0",document.body.classList.add("chart-fullscreen-active"),document.documentElement.style.overflow="hidden"):(document.body.style.overflow="",document.body.style.position="",document.body.style.width="",document.body.style.height="",document.body.style.top="",document.body.style.left="",document.body.classList.remove("chart-fullscreen-active"),document.documentElement.style.overflow=""),setTimeout(()=>{if(h.current&&u.current){const t=e?window.innerWidth:u.current.clientWidth,n=e?window.innerHeight-u.current.offsetTop-60:l;h.current.applyOptions({width:t,height:n}),h.current.timeScale().fitContent()}},150)};return M.jsxs(v.div,{className:"tradingview-chart-container "+(g?"fullscreen":""),initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.5},children:[M.jsxs("div",{className:"chart-header",children:[M.jsxs("div",{className:"chart-title",children:[M.jsxs("h3",{children:[t," - ",n]}),M.jsx("span",{className:"chart-type",children:i.charAt(0).toUpperCase()+i.slice(1)}),k&&M.jsxs("div",{className:"live-indicators",children:[T&&M.jsxs("span",{className:"live-price "+(I?`price-${I.direction}`:""),children:["₹",T.toFixed(2)]}),M.jsxs("span",{className:"market-status "+(P?"open":"closed"),children:[M.jsx(Ue,{size:14,className:"status-icon"}),P?"Market Open":"Market Closed"]}),S&&M.jsxs("span",{className:"last-update",children:["Updated: ",S.toLocaleTimeString()]})]})]}),M.jsxs("div",{className:"chart-controls",children:[M.jsx("button",{className:"chart-control-btn "+(x?"active":""),onClick:()=>{b(!x)},title:"Toggle Volume Display",children:"📊"}),M.jsx("button",{className:"chart-control-btn",onClick:a,disabled:o,title:"Refresh Chart Data",children:"🔄"}),"1D"===n&&c&&M.jsx("button",{onClick:()=>{k?(mx.stopLiveUpdates(t),N(!1)):(mx.startLiveUpdates(t,D,5e3),N(!0))},className:"chart-control-btn "+(k?"live-active":""),title:k?"Stop Live Updates":"Start Live Updates",children:k?"⏸️":"▶️"}),M.jsx("button",{className:"chart-control-btn",onClick:()=>{if(h.current){const e=u.current.querySelector("canvas");if(e){const s=document.createElement("a");s.download=`${t}_${n}_chart.png`,s.href=e.toDataURL(),s.click()}}},title:"Download Chart as PNG",children:"💾"}),M.jsx("button",{className:"chart-control-btn "+(g?"fullscreen-active":""),onClick:A,title:g?"Exit Fullscreen (Esc)":"Enter Fullscreen (F)",children:g?"🔲":"⛶"})]})]}),M.jsxs("div",{ref:u,className:"chart-wrapper",style:{position:"relative",width:"100%",height:g?"100%":`${l}px`,flex:g?"1":"none"},children:[o&&M.jsx("div",{className:"chart-loading-overlay",children:M.jsxs("div",{className:"loading-content",children:[M.jsx(Yt,{size:32,className:"animate-spin"}),M.jsx("p",{children:"Loading chart data..."})]})}),0===e.length&&!o&&M.jsx("div",{className:"chart-empty-overlay",children:M.jsxs("div",{className:"empty-content",children:[M.jsx("p",{children:"No chart data available"}),M.jsxs("button",{onClick:a,className:"btn-primary",children:[M.jsx(Yt,{size:16}),"Refresh"]})]})})]}),M.jsx("div",{className:"chart-footer",children:M.jsxs("div",{className:"chart-info",children:[M.jsxs("span",{children:["Data Points: ",e.length]}),M.jsx("span",{children:"•"}),M.jsxs("span",{children:["Last Updated: ",(new Date).toLocaleTimeString()]})]})})]})},fx=({onStockSelect:e,selectedStock:t,className:n="",popularStocks:i,onUpdatePopularStocks:r})=>{const[a,o]=s.useState(""),[l,c]=s.useState([]),[u,h]=s.useState(!1),[d,m]=s.useState(!1),[p,f]=s.useState("all"),[g,x]=s.useState(!1),b=s.useRef(null),w=((e,t)=>{const[n,i]=s.useState(e);return s.useEffect(()=>{const n=setTimeout(()=>{i(e)},t);return()=>{clearTimeout(n)}},[e,t]),n})(a,300),[j,k]=s.useState(i||[{symbol:"RELIANCE",name:"Reliance Industries Ltd",price:2847.65,change:23.45,changePercent:.83,volume:2847392,marketCap:1925e9,sector:"Energy",isWatchlisted:!1},{symbol:"TCS",name:"Tata Consultancy Services",price:3567.8,change:-12.4,changePercent:-.35,volume:1234567,marketCap:13e11,sector:"IT",isWatchlisted:!0},{symbol:"HDFCBANK",name:"HDFC Bank Limited",price:1687.9,change:15.6,changePercent:.93,volume:3456789,marketCap:93e10,sector:"Banking",isWatchlisted:!1},{symbol:"INFY",name:"Infosys Limited",price:1456.25,change:8.75,changePercent:.6,volume:2345678,marketCap:62e10,sector:"IT",isWatchlisted:!1},{symbol:"HINDUNILVR",name:"Hindustan Unilever Ltd",price:2789.45,change:-5.3,changePercent:-.19,volume:876543,marketCap:65e10,sector:"FMCG",isWatchlisted:!0},{symbol:"ICICIBANK",name:"ICICI Bank Limited",price:1098.7,change:12.85,changePercent:1.18,volume:4567890,marketCap:77e10,sector:"Banking",isWatchlisted:!1},{symbol:"KOTAKBANK",name:"Kotak Mahindra Bank",price:1876.2,change:-8.45,changePercent:-.45,volume:1987654,marketCap:37e10,sector:"Banking",isWatchlisted:!1},{symbol:"BHARTIARTL",name:"Bharti Airtel Limited",price:1234.55,change:18.9,changePercent:1.55,volume:3210987,marketCap:68e10,sector:"Telecom",isWatchlisted:!0},{symbol:"ITC",name:"ITC Limited",price:456.8,change:-2.15,changePercent:-.47,volume:5432109,marketCap:57e10,sector:"FMCG",isWatchlisted:!1}]),N=s.useMemo(()=>{let e=[...j];switch(p){case"gainers":e=e.filter(e=>e.change>0).sort((e,t)=>t.changePercent-e.changePercent);break;case"losers":e=e.filter(e=>e.change<0).sort((e,t)=>e.changePercent-t.changePercent);break;case"watchlist":e=e.filter(e=>e.isWatchlisted);break;case"volume":e=e.sort((e,t)=>t.volume-e.volume);break;default:e=e.sort((e,t)=>t.marketCap-e.marketCap)}return e},[j,p]);s.useEffect(()=>{w&&w.trim().length>=2?(async e=>{if(e.trim()){h(!0);try{const t=await br.searchStocks(e,10);if(t.success&&t.results){const e=t.results.sort((e,t)=>{const n="NSE"===e.exchange||"BSE"===e.exchange||e.symbol.endsWith(".NS")||e.symbol.endsWith(".BO"),s="NSE"===t.exchange||"BSE"===t.exchange||t.symbol.endsWith(".NS")||t.symbol.endsWith(".BO");return n&&!s?-1:!n&&s?1:0}).slice(0,8).map(e=>({symbol:e.symbol,name:e.name,exchange:e.exchange,currency:e.currency,type:e.type,price:"NSE"===e.exchange||"BSE"===e.exchange?2e3*Math.random()+100:500*Math.random()+50,change:40*(Math.random()-.5),changePercent:8*(Math.random()-.5),sector:"Unknown"}));c(e)}else c([])}catch(t){const n=j.filter(t=>t.symbol.toLowerCase().includes(e.toLowerCase())||t.name.toLowerCase().includes(e.toLowerCase()));c(n)}finally{h(!1)}}else c([])})(w):c([])},[w]);const S=t=>{null==e||e(t),o(""),c([])};return M.jsxs("div",{className:`stock-search-panel ${n}`,children:[M.jsxs("div",{className:"stock-search",children:[M.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:M.jsx("h3",{className:"search-title",children:"Search Stocks"})}),M.jsxs("div",{className:"search-input-container",children:[M.jsx(Qt,{className:"search-icon",size:18}),M.jsx("input",{ref:b,type:"text",placeholder:"Search stocks...",value:a,onChange:e=>o(e.target.value)}),a&&M.jsx("button",{className:"clear-search-btn",onClick:()=>{o(""),c([])},children:M.jsx(pn,{size:16})}),u&&M.jsx("div",{className:"search-loading",children:M.jsx("div",{className:"loading-spinner"})})]}),M.jsxs(y,{children:[l.length>0&&M.jsxs(v.div,{className:"search-results",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:[M.jsx("div",{className:"results-header",children:"Search Results"}),l.map((e,t)=>{var n,s;return M.jsxs(v.div,{className:"search-result-item",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.2,delay:.05*t},onClick:()=>S(e),children:[M.jsxs("div",{className:"search-result-left",children:[M.jsx("div",{className:"symbol",children:e.symbol}),M.jsx("div",{className:"name",children:e.name})]}),M.jsxs("div",{className:"search-result-right",children:[M.jsx("div",{className:"search-result-price",children:la(e.price)}),M.jsxs("div",{className:"search-result-change "+(e.change>=0?"positive":"negative"),children:[e.change>=0?"+":"",null==(n=e.change)?void 0:n.toFixed(2),"(",null==(s=e.changePercent)?void 0:s.toFixed(2),"%)"]})]}),M.jsx("div",{className:"search-result-actions",onClick:t=>{t.stopPropagation();const n={...e,isWatchlisted:!e.isWatchlisted};c(t=>t.map(t=>t.symbol===e.symbol?n:t))},children:e.isWatchlisted?"⭐":"☆"}),e.exchange&&M.jsx("div",{className:"exchange",children:e.exchange})]},e.symbol)})]}),w&&w.trim().length>=2&&0===l.length&&!u&&M.jsx(v.div,{className:"search-results",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:M.jsxs("div",{className:"no-results",children:[M.jsx(Qt,{size:24}),M.jsxs("p",{children:['No stocks found for "',w,'"']}),M.jsx("small",{children:"Try searching with different keywords or stock symbols"})]})})]})]}),M.jsxs("div",{className:"popular-stocks-section",children:[M.jsx("div",{className:"popular-stocks-header",children:M.jsx("h3",{className:"popular-stocks-title",children:"Popular Stocks"})}),M.jsx("div",{className:"popular-stocks-list",children:M.jsx(y,{children:N.map((e,n)=>{var s,i;return M.jsxs(v.div,{className:"popular-stock-item "+((null==t?void 0:t.symbol)===e.symbol?"selected":""),initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3,delay:.05*n},onClick:()=>S(e),whileHover:{scale:1.02},whileTap:{scale:.98},children:[M.jsxs("div",{className:"popular-stock-info",children:[M.jsx("div",{className:"popular-stock-symbol",children:e.symbol}),M.jsx("div",{className:"popular-stock-name",children:e.name})]}),M.jsxs("div",{className:"popular-stock-price",children:[M.jsx("div",{className:"popular-stock-value",children:la(e.price)}),M.jsxs("div",{className:"popular-stock-change "+(e.change>=0?"positive":"negative"),children:[e.change>=0?"+":"",null==(s=e.change)?void 0:s.toFixed(2),"(",null==(i=e.changePercent)?void 0:i.toFixed(2),"%)"]})]}),M.jsx("div",{className:"popular-stock-actions",onClick:t=>{t.stopPropagation();const n=j.map(t=>t.symbol===e.symbol?{...t,isWatchlisted:!t.isWatchlisted}:t);k(n),null==r||r(n)},children:e.isWatchlisted?"⭐":"☆"})]},e.symbol)})})})]})]})},gx=({user:e,theme:t})=>{const{isCollapsed:n}=(()=>{const e=s.useContext(_d);if(void 0===e)throw new Error("useSidebar must be used within a SidebarProvider");return e})(),[i,r]=s.useState("RELIANCE"),[a,o]=s.useState("1D"),[l,c]=s.useState("candlestick"),[u,h]=s.useState(!1),[d,m]=s.useState([]),[p,f]=s.useState([]),[g,y]=s.useState(null),[x,b]=s.useState(!1),[w,j]=s.useState(null),[k,N]=s.useState(!1),[S,C]=s.useState(null),[P,E]=s.useState(null),{query:T,setQuery:L,results:I,loading:_,recentSearches:D,clearSearch:A}=Xr({limit:10,debounceMs:300}),O=[{id:"candlestick",name:"Candlestick",icon:Ke},{id:"line",name:"Line",icon:Ue},{id:"area",name:"Area",icon:St}],[R,F]=s.useState([{symbol:"RELIANCE",name:"Reliance Industries Ltd",price:2847.5,change:15.25,changePercent:.54,isWatchlisted:!1},{symbol:"TCS",name:"Tata Consultancy Services",price:4125.8,change:-12.4,changePercent:-.3,isWatchlisted:!0},{symbol:"HDFCBANK",name:"HDFC Bank Limited",price:1687.9,change:8.75,changePercent:.52,isWatchlisted:!1},{symbol:"INFY",name:"Infosys Limited",price:1842.35,change:22.15,changePercent:1.22,isWatchlisted:!1},{symbol:"HINDUNILVR",name:"Hindustan Unilever Ltd",price:2456.7,change:-5.3,changePercent:-.22,isWatchlisted:!0},{symbol:"ICICIBANK",name:"ICICI Bank Limited",price:1287.45,change:18.9,changePercent:1.49,isWatchlisted:!1}]),B=e=>e.replace(/\.(NS|BO)$/,""),z=(e,t)=>{const n="1D"===t?100:"5D"===t?500:1e3,s=[];let i=1e3;const r=new Date;for(let a=n;a>=0;a--){const e=new Date(r.getTime()-a*("1D"===t?3e5:864e5)),n=.02,o=i,l=i+(Math.random()-.5)*n*i,c=Math.max(o,l)+.01*Math.random()*i,u=Math.min(o,l)-.01*Math.random()*i;s.push({time:e.toISOString().split("T")[0],open:parseFloat(o.toFixed(2)),high:parseFloat(c.toFixed(2)),low:parseFloat(u.toFixed(2)),close:parseFloat(l.toFixed(2)),volume:Math.floor(1e6*Math.random())+1e5}),i=l}return s},W=async(e,t)=>{b(!0),j(null);try{const s=B(e),i=await jr.getHistoricalData(s,t);if(i&&i.success&&i.data&&i.data.length>0){const e=(e=>{if(!e||0===e.length)return[];const t=e.map(e=>({time:e.date||e.time,open:parseFloat(e.open),high:parseFloat(e.high),low:parseFloat(e.low),close:parseFloat(e.close),volume:parseInt(e.volume||0)})),n=[],s=new Set;return t.sort((e,t)=>new Date(e.time)-new Date(t.time)).forEach(e=>{s.has(e.time)||(s.add(e.time),n.push(e))}),n})(i.data);f(e)}else{const e=z(0,t);f(e)}try{const e=await wr.getStockQuote(s);e.success&&y(e.data)}catch(n){const t=R.find(t=>t.symbol===e)||R[0];y({symbol:t.symbol,name:t.name,price:t.price,change:t.change,changesPercentage:t.changePercent})}}catch(s){const n=z(0,t);f(n);const i=R.find(t=>t.symbol===e)||R[0];y({symbol:i.symbol,name:i.name,price:i.price,change:i.change,changesPercentage:i.changePercent})}finally{b(!1)}},U=async()=>{h(!0),await W(i,a),h(!1)},V=s.useCallback(e=>{F(e)},[]),$=R.find(e=>e.symbol===i)||{symbol:i,name:`${i} Co.`,price:(null==g?void 0:g.price)||0,change:(null==g?void 0:g.change)||0,changePercent:(null==g?void 0:g.changesPercentage)||0,isWatchlisted:!1},H=s.useCallback(e=>null==e?"₹ N/A":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2,maximumFractionDigits:2}).format(e),[]);return s.useEffect(()=>{W(i,a)},[i,a]),s.useEffect(()=>()=>{P&&clearInterval(P)},[P]),M.jsx("div",{className:"charts-page "+(n?"sidebar-collapsed":"sidebar-expanded"),children:M.jsxs("div",{className:"charts-container",children:[M.jsxs(v.div,{className:"charts-header",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:[M.jsxs("div",{className:"header-left",children:[M.jsxs("div",{className:"page-title",children:[M.jsx(Ke,{size:24}),M.jsx("h1",{children:"Charts"})]}),M.jsxs("div",{className:"stock-info",children:[M.jsx("h2",{children:$.name}),M.jsxs("span",{className:"symbol",children:["(",$.symbol,")"]}),M.jsx(oa,{price:(null==g?void 0:g.price)||$.price,change:(null==g?void 0:g.change)||$.change,changePercent:(null==g?void 0:g.changesPercentage)||$.changePercent}),M.jsx("div",{className:"stock-actions-row",children:M.jsx(Sd,{symbol:$.symbol,isWatchlisted:$.isWatchlisted,onToggleWatchlist:()=>{const e={...$,isWatchlisted:!$.isWatchlisted};F(R.map(t=>t.symbol===$.symbol?e:t)),We.info(e.isWatchlisted?`${e.name} added to watchlist!`:`${e.name} removed from watchlist!`)}})})]})]}),M.jsxs("div",{className:"header-actions",children:[M.jsxs("button",{className:"btn-premium btn-secondary",onClick:U,disabled:u||x,children:[M.jsx(Yt,{size:16,className:u?"animate-spin":""}),"Refresh"]}),M.jsxs("button",{className:"btn-premium "+(k?"btn-danger":"btn-success"),onClick:()=>{const e=!k;if(N(e),e){const e=setInterval(()=>{if(!u){(async e=>{try{const t=await wr.getStockQuote(e);if(t.success&&t.data)return y(t.data),C(new Date),t.data}catch(t){}})(B(i))}},3e4);E(e),We.success("Live updates enabled")}else P&&(clearInterval(P),E(null)),We.info("Live updates paused")},children:[k?M.jsx(Wt,{size:16}):M.jsx(Ht,{size:16}),k?"Pause Live":"Go Live"]})]})]}),M.jsxs("div",{className:"charts-content",children:[M.jsxs(v.div,{className:"charts-sidebar",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.1},children:[M.jsx(fx,{onStockSelect:async e=>{const t=e.replace(/\.(NS|BO)$/,"");r(t),await W(t,a)},selectedStock:{symbol:i},className:"charts-stock-search",popularStocks:R,onUpdatePopularStocks:V}),M.jsxs("div",{className:"sidebar-section",children:[M.jsx("h3",{children:"Timeframe"}),M.jsx("div",{className:"timeframe-buttons",children:["1D","5D","1M","3M","6M","1Y","5Y"].map(e=>M.jsx("button",{className:"timeframe-btn "+(a===e?"active":""),onClick:()=>(async e=>{o(e),await W(i,e)})(e),disabled:x,children:e},e))})]}),M.jsxs("div",{className:"sidebar-section",children:[M.jsx("h3",{children:"Chart Type"}),M.jsx("div",{className:"chart-type-buttons",children:O.map(e=>M.jsxs("button",{className:"chart-type-btn "+(l===e.id?"active":""),onClick:()=>c(e.id),disabled:x,children:[M.jsx(e.icon,{size:16}),e.name]},e.id))})]}),M.jsxs("div",{className:"sidebar-section",children:[M.jsx("h3",{children:"Technical Indicators"}),M.jsx("div",{className:"indicators-list",children:[{id:"sma",name:"SMA (20)",color:"#3B82F6"},{id:"ema",name:"EMA (12)",color:"#10B981"},{id:"rsi",name:"RSI (14)",color:"#F59E0B"},{id:"macd",name:"MACD",color:"#EF4444"},{id:"bollinger",name:"Bollinger Bands",color:"#8B5CF6"}].map(e=>M.jsxs("div",{className:"indicator-item "+(d.includes(e.id)?"active":""),onClick:()=>{return t=e.id,void m(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);var t},children:[M.jsx("div",{className:"indicator-color",style:{backgroundColor:e.color}}),M.jsx("span",{children:e.name})]},e.id))})]})]}),M.jsxs(v.div,{className:"chart-main",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.6,delay:.2},children:[x&&M.jsx("div",{className:"chart-loading-overlay",children:"Loading Chart Data..."}),w&&M.jsxs("div",{className:"chart-error-message",children:["Error: ",w]}),M.jsx(px,{data:p,symbol:i,timeframe:a,chartType:l,theme:t,onRefresh:U,loading:x,height:600,indicators:d}),M.jsxs("div",{className:"chart-footer",children:[M.jsxs("div",{className:"footer-left",children:[M.jsxs("div",{className:"volume-info",children:[M.jsx(dn,{size:16}),M.jsxs("span",{children:["Volume: ",(null==g?void 0:g.volume)?g.volume.toLocaleString():"N/A"]})]}),M.jsxs("div",{className:"market-cap-info",children:[M.jsx(an,{size:16}),M.jsxs("span",{children:["Market Cap: ",(null==g?void 0:g.marketCap)?H(g.marketCap):"N/A"]})]})]}),M.jsx("div",{className:"footer-right",children:M.jsxs("div",{className:"last-updated",children:[M.jsx(at,{size:16}),M.jsxs("span",{children:["Last updated: ",S?S.toLocaleTimeString():"N/A"]})]})})]})]})]})]})})},yx=({user:e,theme:t})=>{const n=l(),{portfolioData:i}=ra(),{watchlists:r,loading:a,addToWatchlist:o,createWatchlist:c,refreshWatchlists:u}=Nd(),[h,d]=s.useState("all"),[m,p]=s.useState("list"),[f,g]=s.useState("symbol"),[x,b]=s.useState("asc"),[w,j]=s.useState(""),[k,N]=s.useState(!1),[S,C]=s.useState(!1),[P,E]=s.useState(""),[T,L]=s.useState(""),[I,_]=s.useState(!1),{isOpen:D,currentStock:A,defaultQuantity:O,closeSlideToBuy:R}=Pd(),F=s.useMemo(()=>{if("all"===h){return{name:"All Watchlists",stocks:r.reduce((e,t)=>[...e,...t.stocks||[]],[])}}return r.find(e=>e._id===h)||{name:"Unknown",stocks:[]}},[r,h]),B=s.useMemo(()=>{let e=F.stocks||[];return w&&(e=e.filter(e=>e.symbol.toLowerCase().includes(w.toLowerCase())||e.name.toLowerCase().includes(w.toLowerCase()))),e.sort((e,t)=>{let n=e[f],s=t[f];return"string"==typeof n&&(n=n.toLowerCase(),s=s.toLowerCase()),"asc"===x?n>s?1:-1:n<s?1:-1})},[F.stocks,w,f,x]),z=s.useMemo(()=>{const e=F.stocks||[];return{gainers:e.filter(e=>(e.change||0)>0).length,losers:e.filter(e=>(e.change||0)<0).length,neutral:e.filter(e=>0===(e.change||0)).length}},[F.stocks]),W=()=>r.reduce((e,t)=>{var n;return e+((null==(n=t.stocks)?void 0:n.length)||0)},0),U=async()=>{N(!0);try{await u(),We.success("Watchlists refreshed successfully")}catch(e){We.error("Failed to refresh watchlists")}finally{N(!1)}};return s.useEffect(()=>{r.length>0&&"all"===h&&d(r[0]._id)},[r]),a?M.jsx("div",{className:"watchlist-page",children:M.jsxs("div",{className:"loading-container",children:[M.jsx("div",{className:"loading-spinner"}),M.jsx("p",{children:"Loading watchlists..."})]})}):M.jsxs("div",{className:"watchlist-page",children:[M.jsxs("div",{className:"watchlist-container",children:[M.jsxs(v.div,{className:"watchlist-header",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:[M.jsxs("div",{className:"watchlist-header-top",children:[M.jsxs("div",{className:"header-left",children:[M.jsx("div",{className:"header-icon",children:M.jsx(gt,{})}),M.jsxs("div",{className:"header-text",children:[M.jsx("h1",{children:"My Watchlists"}),M.jsx("p",{children:"Track and manage your favorite stocks"})]})]}),M.jsxs("div",{className:"header-actions",children:[M.jsxs("button",{className:"action-btn "+(k?"loading":""),onClick:U,disabled:k,children:[M.jsx(Yt,{className:k?"spinning":""}),k?"Refreshing...":"Refresh"]}),M.jsxs("button",{className:"action-btn primary",onClick:()=>C(!0),children:[M.jsx(qt,{}),"New Watchlist"]})]})]}),M.jsxs("div",{className:"stats-overview",children:[M.jsxs("div",{className:"stat-card",children:[M.jsx("div",{className:"stat-icon",children:M.jsx(Ke,{})}),M.jsxs("div",{className:"stat-content",children:[M.jsx("div",{className:"stat-value",children:W()}),M.jsx("div",{className:"stat-label",children:"Total Stocks"})]})]}),M.jsxs("div",{className:"stat-card",children:[M.jsx("div",{className:"stat-icon positive",children:M.jsx(cn,{})}),M.jsxs("div",{className:"stat-content",children:[M.jsx("div",{className:"stat-value",children:z.gainers}),M.jsx("div",{className:"stat-label",children:"Gainers"})]})]}),M.jsxs("div",{className:"stat-card",children:[M.jsx("div",{className:"stat-icon negative",children:M.jsx(ln,{})}),M.jsxs("div",{className:"stat-content",children:[M.jsx("div",{className:"stat-value",children:z.losers}),M.jsx("div",{className:"stat-label",children:"Losers"})]})]}),M.jsxs("div",{className:"stat-card",children:[M.jsx("div",{className:"stat-icon",children:M.jsx(nn,{})}),M.jsxs("div",{className:"stat-content",children:[M.jsx("div",{className:"stat-value",children:r.length}),M.jsx("div",{className:"stat-label",children:"Watchlists"})]})]})]})]}),M.jsxs("div",{className:"watchlist-content",children:[M.jsxs(v.div,{className:"watchlist-sidebar",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.1},children:[M.jsx(fx,{onStockSelect:e=>{(async e=>{if("all"!==h)try{await o(h,e),We.success(`Added ${e} to watchlist`)}catch(t){We.error("Failed to add stock to watchlist")}else We.warning("Please select a specific watchlist to add stocks")})(e.symbol||e)},selectedStock:null,className:"watchlist-stock-search"}),M.jsxs("div",{className:"sidebar-section",children:[M.jsx("h3",{children:"My Watchlists"}),M.jsxs("div",{className:"watchlist-list",children:[M.jsxs("button",{className:"watchlist-tab "+("all"===h?"active":""),onClick:()=>d("all"),children:[M.jsx(Ue,{}),"All Watchlists",M.jsx("span",{className:"tab-count",children:W()})]}),r.map(e=>{var t;return M.jsxs("button",{className:"watchlist-tab "+(h===e._id?"active":""),onClick:()=>d(e._id),children:[M.jsx(et,{}),e.name,M.jsx("span",{className:"tab-count",children:(null==(t=e.stocks)?void 0:t.length)||0})]},e._id)})]})]}),M.jsxs("div",{className:"sidebar-section",children:[M.jsx("h3",{children:"Quick Actions"}),M.jsxs("div",{className:"quick-actions",children:[M.jsxs("button",{className:"action-btn",onClick:()=>C(!0),children:[M.jsx(qt,{}),"New Watchlist"]}),M.jsxs("button",{className:"action-btn",onClick:U,disabled:k,children:[M.jsx(Yt,{className:k?"spinning":""}),"Refresh Data"]})]})]})]}),M.jsxs(v.div,{className:"watchlist-main",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.6,delay:.2},children:[M.jsxs("div",{className:"watchlist-tabs",children:[M.jsxs("button",{className:"watchlist-tab "+("all"===h?"active":""),onClick:()=>d("all"),children:[M.jsx(Ue,{}),"All Watchlists",M.jsx("span",{className:"tab-count",children:W()})]}),r.map(e=>{var t;return M.jsxs("button",{className:"watchlist-tab "+(h===e._id?"active":""),onClick:()=>d(e._id),children:[M.jsx(et,{}),e.name,M.jsx("span",{className:"tab-count",children:(null==(t=e.stocks)?void 0:t.length)||0})]},e._id)})]}),M.jsxs("div",{className:"main-header",children:[M.jsxs("div",{className:"main-title",children:[M.jsxs("h2",{children:[M.jsx(gt,{}),F.name]}),M.jsxs("div",{className:"main-controls",children:[M.jsxs("div",{className:"view-toggle","data-active":m,children:[M.jsxs("button",{className:"list"===m?"active":"",onClick:()=>p("list"),children:[M.jsx(Ct,{}),"List"]}),M.jsxs("button",{className:"grid"===m?"active":"",onClick:()=>p("grid"),children:[M.jsx(wt,{}),"Grid"]})]}),M.jsx("div",{className:"sort-dropdown",children:M.jsxs("button",{className:"sort-btn",children:[M.jsx(vt,{}),"Sort by ",f,M.jsx(qe,{})]})})]})]}),M.jsx("div",{className:"search-section",children:M.jsx(Zr,{value:w,onChange:j,placeholder:"Search stocks in watchlist...",className:"watchlist-search"})})]}),M.jsx("div",{className:"stocks-section",children:0===B.length?M.jsxs("div",{className:"empty-state",children:[M.jsx("div",{className:"empty-icon",children:M.jsx(et,{})}),M.jsx("h3",{children:"No stocks found"}),M.jsx("p",{children:w?`No stocks found matching "${w}" in your watchlist`:0===F.stocks.length?"Start building your watchlist by adding stocks you want to track":"Use the search above to add new stocks to your watchlist"}),!w&&0===F.stocks.length&&M.jsxs("button",{className:"action-btn primary",onClick:()=>C(!0),children:[M.jsx(qt,{}),"Add Your First Stock"]})]}):M.jsx("div",{className:"stock-list",children:B.map((e,t)=>M.jsxs(v.div,{className:"stock-item",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:.03*t},onClick:()=>n(`/stock/${e.symbol}`),children:[M.jsxs("div",{className:"stock-info",children:[M.jsx("div",{className:"stock-symbol",children:e.symbol}),M.jsx("div",{className:"stock-name",children:e.name})]}),M.jsx("div",{className:"stock-price",children:M.jsx(oa,{symbol:e.symbol,showChange:!0,size:"medium"})}),M.jsx("div",{className:"stock-actions",children:M.jsx(Sd,{stockData:e,size:"small",variant:"simple",showText:!1,onSuccess:(t,n)=>{"removed"===n?(We.success(`Removed ${e.symbol} from watchlist`),u()):"added"===n&&(We.success(`Added ${e.symbol} to watchlist`),u())},onError:e=>{We.error(e||"Failed to update watchlist")}})})]},e.symbol))})})]})]})]}),M.jsx(y,{children:S&&M.jsx(v.div,{className:"modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>C(!1),children:M.jsxs(v.div,{className:"modal-content",initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},onClick:e=>e.stopPropagation(),children:[M.jsxs("div",{className:"modal-header",children:[M.jsx("h3",{children:"Create New Watchlist"}),M.jsx("button",{className:"close-btn",onClick:()=>C(!1),children:M.jsx(pn,{})})]}),M.jsx("div",{className:"modal-body",children:M.jsxs("div",{className:"form-group",children:[M.jsx("label",{htmlFor:"watchlist-name",children:"Watchlist Name"}),M.jsx("input",{id:"watchlist-name",type:"text",value:P,onChange:e=>E(e.target.value),placeholder:"Enter watchlist name...",className:"form-input",autoFocus:!0})]})}),M.jsxs("div",{className:"modal-footer",children:[M.jsx("button",{className:"action-btn",onClick:()=>C(!1),children:"Cancel"}),M.jsx("button",{className:"action-btn primary",onClick:async()=>{if(P.trim()){_(!0);try{await c({name:P.trim(),description:T.trim()}),E(""),L(""),C(!1),We.success("Watchlist created successfully")}catch(e){We.error("Failed to create watchlist")}finally{_(!1)}}},disabled:!P.trim()||I,children:I?M.jsxs(M.Fragment,{children:[M.jsx(Yt,{className:"spinning"}),"Creating..."]}):M.jsxs(M.Fragment,{children:[M.jsx(qt,{}),"Create Watchlist"]})})]})]})})}),M.jsx(Cd,{stockData:A,isOpen:D,onClose:R,defaultQuantity:O,onSuccess:()=>{}})]})},vx=({user:e,theme:t})=>{const[n,i]=s.useState("all"),[r,a]=s.useState("all"),[o,l]=s.useState(!1),{portfolioData:c}=ra(),{query:u,setQuery:h,results:d,recentSearches:m,showHistory:p,handleHistoryClick:f,loading:g,clearSearch:y,hasResults:x}=((e={})=>Jr("orders",{enableSuggestions:!1,limit:20,minQueryLength:1,...e}))({enableSuggestions:!1,enableHistory:!0,limit:50,debounceMs:300,filters:{status:"all"!==n?n:null,type:"all"!==r?r:null}}),b=c.transactions||[],w=e=>{switch(e){case"completed":return M.jsx(it,{className:"status-icon completed"});case"pending":return M.jsx(at,{className:"status-icon pending"});case"cancelled":return M.jsx(mn,{className:"status-icon cancelled"});default:return M.jsx(at,{className:"status-icon"})}},j=e=>{switch(e){case"completed":return"#10B981";case"pending":return"#F59E0B";case"cancelled":return"#EF4444";default:return"#6B7280"}},k=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),N=b.filter(e=>{const t=e.symbol.toLowerCase().includes(u.toLowerCase())||e.name.toLowerCase().includes(u.toLowerCase())||e.id.toLowerCase().includes(u.toLowerCase()),s="all"===n||e.status===n,i="all"===r||e.type.toLowerCase()===r;return t&&s&&i});return M.jsxs("div",{className:"orders-page",children:[M.jsx(bd,{icon:en,title:"Orders",subtitle:"Track and manage your trading orders",borderColor:"warning",actions:[{label:"Refresh",icon:Yt,onClick:async()=>{l(!0),await new Promise(e=>setTimeout(e,1500)),l(!1)},variant:"secondary",disabled:o},{label:"Export",icon:dt,onClick:()=>{},variant:"outline"}]}),M.jsxs("div",{className:"orders-container",children:[M.jsxs(v.div,{className:"orders-controls",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},children:[M.jsxs("div",{className:"controls-left",children:[M.jsx("div",{className:"search-container",children:M.jsx(Zr,{placeholder:"Search orders by stock symbol...",value:u,onChange:h,onClear:y,recentSearches:m,onHistoryClick:f,showHistory:p,loading:g,size:"md",showSuggestions:!1,enableHistory:!0,className:"orders-search-input"})}),M.jsxs("div",{className:"filter-group",children:[M.jsx("select",{value:n,onChange:e=>i(e.target.value),className:"filter-select",children:[{id:"all",name:"All Orders",count:25},{id:"pending",name:"Pending",count:3},{id:"completed",name:"Completed",count:18},{id:"cancelled",name:"Cancelled",count:4}].map(e=>M.jsxs("option",{value:e.id,children:[e.name," (",e.count,")"]},e.id))}),M.jsx("select",{value:r,onChange:e=>a(e.target.value),className:"filter-select",children:[{id:"all",name:"All Types"},{id:"buy",name:"Buy Orders"},{id:"sell",name:"Sell Orders"}].map(e=>M.jsx("option",{value:e.id,children:e.name},e.id))})]})]}),M.jsx("div",{className:"controls-right",children:M.jsxs("button",{className:"btn-premium btn-ghost",children:[M.jsx(vt,{size:16}),"More Filters"]})})]}),M.jsxs(v.div,{className:"orders-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:[M.jsx("div",{className:"card-header",children:M.jsxs("h3",{className:"card-title",children:[M.jsx(en,{className:"card-icon"}),"Order History (",N.length,")"]})}),M.jsx("div",{className:"card-content",children:M.jsxs("div",{className:"orders-table",children:[M.jsxs("div",{className:"table-header",children:[M.jsx("div",{className:"col-order",children:"Order Details"}),M.jsx("div",{className:"col-type",children:"Type"}),M.jsx("div",{className:"col-quantity",children:"Quantity"}),M.jsx("div",{className:"col-price",children:"Price"}),M.jsx("div",{className:"col-total",children:"Total"}),M.jsx("div",{className:"col-status",children:"Status"}),M.jsx("div",{className:"col-time",children:"Time"}),M.jsx("div",{className:"col-actions",children:"Actions"})]}),M.jsx("div",{className:"table-body",children:N.map((e,t)=>{const n=(e=>{const t=new Date(e);return{date:t.toLocaleDateString("en-IN"),time:t.toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"})}})(e.timestamp);return M.jsxs(v.div,{className:"table-row",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:.05*t},children:[M.jsx("div",{className:"col-order",children:M.jsxs("div",{className:"order-info",children:[M.jsxs("div",{className:"order-id",children:["#",e.id]}),M.jsx("div",{className:"stock-symbol",children:e.symbol}),M.jsx("div",{className:"stock-name",children:e.name})]})}),M.jsxs("div",{className:"col-type",children:[M.jsxs("div",{className:`order-type ${e.type.toLowerCase()}`,children:["BUY"===e.type?M.jsx(cn,{size:14}):M.jsx(ln,{size:14}),e.type]}),M.jsx("div",{className:"order-subtype",children:e.orderType})]}),M.jsx("div",{className:"col-quantity",children:e.quantity}),M.jsx("div",{className:"col-price",children:M.jsxs("div",{className:"price-info",children:[M.jsx("div",{className:"order-price",children:k(e.price)}),e.executedPrice&&e.executedPrice!==e.price&&M.jsxs("div",{className:"executed-price",children:["Exec: ",k(e.executedPrice)]})]})}),M.jsxs("div",{className:"col-total",children:[M.jsx("div",{className:"total-amount",children:k(e.total)}),e.fees>0&&M.jsxs("div",{className:"fees",children:["Fees: ",k(e.fees)]})]}),M.jsx("div",{className:"col-status",children:M.jsxs("div",{className:"status-container",children:[w(e.status),M.jsx("span",{className:`status-text ${e.status}`,style:{color:j(e.status)},children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})]})}),M.jsx("div",{className:"col-time",children:M.jsxs("div",{className:"time-info",children:[M.jsx("div",{className:"order-date",children:n.date}),M.jsx("div",{className:"order-time",children:n.time})]})}),M.jsx("div",{className:"col-actions",children:M.jsxs("div",{className:"action-buttons",children:["pending"===e.status&&M.jsx("button",{className:"action-btn",title:"Edit Order",children:M.jsx(pt,{size:14})}),"pending"===e.status&&M.jsx("button",{className:"action-btn cancel",title:"Cancel Order",children:M.jsx(mn,{size:14})}),M.jsx("button",{className:"action-btn",title:"More Options",children:M.jsx(zt,{size:14})})]})})]},e.id)})})]})})]})]})]})},xx=({user:e,theme:t})=>{var n;const i=l(),{portfolioData:r,getTransactionHistory:a}=ra(),[o,c]=s.useState([]),[u,h]=s.useState(!0),[d,m]=s.useState(""),[p,f]=s.useState("all"),[g,x]=s.useState("all"),[b,w]=s.useState("all"),[j,k]=s.useState("date"),[N,S]=s.useState("desc"),[C,P]=s.useState(null),[E,T]=s.useState(!1),[L,I]=s.useState(!1),_=[{id:"txn_001",type:"buy",symbol:"RELIANCE",name:"Reliance Industries Ltd",quantity:10,price:2847.65,totalAmount:28476.5,fees:14.24,netAmount:28490.74,status:"completed",timestamp:new Date("2024-01-15T10:30:00"),orderId:"ORD_001",exchange:"NSE",sector:"Energy"},{id:"txn_002",type:"sell",symbol:"TCS",name:"Tata Consultancy Services",quantity:5,price:3892.4,totalAmount:19462,fees:9.73,netAmount:19452.27,status:"completed",timestamp:new Date("2024-01-14T14:45:00"),orderId:"ORD_002",exchange:"NSE",sector:"IT",gainLoss:1847.3,gainLossPercent:10.5},{id:"txn_003",type:"buy",symbol:"HDFC",name:"HDFC Bank Ltd",quantity:15,price:1734.85,totalAmount:26022.75,fees:13.01,netAmount:26035.76,status:"pending",timestamp:new Date("2024-01-13T09:15:00"),orderId:"ORD_003",exchange:"NSE",sector:"Banking"},{id:"txn_004",type:"buy",symbol:"INFY",name:"Infosys Ltd",quantity:8,price:1456.2,totalAmount:11649.6,fees:5.82,netAmount:11655.42,status:"completed",timestamp:new Date("2024-01-12T11:20:00"),orderId:"ORD_004",exchange:"NSE",sector:"IT"},{id:"txn_005",type:"sell",symbol:"WIPRO",name:"Wipro Ltd",quantity:20,price:432.85,totalAmount:8657,fees:4.33,netAmount:8652.67,status:"failed",timestamp:new Date("2024-01-11T16:30:00"),orderId:"ORD_005",exchange:"NSE",sector:"IT",gainLoss:-245.8,gainLossPercent:-2.8,failureReason:"Insufficient shares"}];s.useEffect(()=>{(async()=>{h(!0);try{const e=sa.getTransactionHistory(),t=(null==r?void 0:r.transactions)||[],n=[...e,...t],s=n.map((e,t)=>{var n;return{id:e.id||`txn_${Date.now()}_${t}`,type:(null==(n=e.type)?void 0:n.toLowerCase())||"buy",symbol:e.symbol||"UNKNOWN",name:e.companyName||e.name||`${e.symbol} Corp`,quantity:e.quantity||0,price:e.price||0,totalAmount:e.total||e.totalAmount||e.quantity*e.price,fees:e.fees||5e-4*(e.total||e.totalAmount||e.quantity*e.price),netAmount:e.netAmount||e.total||e.totalAmount||e.quantity*e.price,status:e.status||"completed",timestamp:new Date(e.timestamp||e.createdAt||Date.now()),orderId:e.orderId||`ORD_${Date.now()}_${t}`,exchange:e.exchange||"NSE",sector:e.sector||"Unknown",gainLoss:e.gainLoss,gainLossPercent:e.gainLossPercent}}).filter((e,t,n)=>t===n.findIndex(t=>t.id===e.id));s.sort((e,t)=>new Date(t.timestamp)-new Date(e.timestamp)),0===s.length?c(_.slice(0,2)):c(s),h(!1)}catch(e){We.error("Failed to load transaction history"),h(!1)}})()},[null==r?void 0:r.transactions]);const D=s.useMemo(()=>{let e=[...o];if(d&&(e=e.filter(e=>e.symbol.toLowerCase().includes(d.toLowerCase())||e.name.toLowerCase().includes(d.toLowerCase())||e.orderId.toLowerCase().includes(d.toLowerCase()))),"all"!==p&&(e=e.filter(e=>e.type===p)),"all"!==g&&(e=e.filter(e=>e.status===g)),"all"!==b){const t=new Date,n=new Date;switch(b){case"today":n.setHours(0,0,0,0);break;case"week":n.setDate(t.getDate()-7);break;case"month":n.setMonth(t.getMonth()-1);break;case"year":n.setFullYear(t.getFullYear()-1)}e=e.filter(e=>e.timestamp>=n)}return e.sort((e,t)=>{let n,s;switch(j){case"date":default:n=e.timestamp,s=t.timestamp;break;case"symbol":n=e.symbol,s=t.symbol;break;case"amount":n=e.totalAmount,s=t.totalAmount;break;case"quantity":n=e.quantity,s=t.quantity;break;case"status":n=e.status,s=t.status}return n instanceof Date&&s instanceof Date?"asc"===N?n-s:s-n:"string"==typeof n?"asc"===N?n.localeCompare(s):s.localeCompare(n):"asc"===N?n-s:s-n}),e},[o,d,p,g,b,j,N]),A=s.useMemo(()=>{const e=D.length,t=D.filter(e=>"completed"===e.status),n=t.filter(e=>"buy"===e.type),s=t.filter(e=>"sell"===e.type),i=n.reduce((e,t)=>e+t.totalAmount,0),r=s.reduce((e,t)=>e+t.totalAmount,0),a=t.reduce((e,t)=>e+(t.fees||0),0),o=s.reduce((e,t)=>e+(t.gainLoss||0),0);return{totalTransactions:e,completedTransactions:t.length,buyTransactions:n.length,sellTransactions:s.length,totalBuyAmount:i,totalSellAmount:r,totalFees:a,totalGainLoss:o,successRate:e>0?t.length/e*100:0}},[D]),O=e=>{j===e?S("asc"===N?"desc":"asc"):(k(e),S("desc"))},R=e=>{switch(e){case"completed":return M.jsx(it,{className:"status-icon completed"});case"pending":return M.jsx(Ve,{className:"status-icon pending"});case"failed":return M.jsx(mn,{className:"status-icon failed"});default:return M.jsx(at,{className:"status-icon"})}},F=e=>"buy"===e?M.jsx(cn,{className:"type-icon buy"}):M.jsx(ln,{className:"type-icon sell"});return u?M.jsx("div",{className:"history-page",children:M.jsx("div",{className:"history-container",children:M.jsxs("div",{className:"loading-container",children:[M.jsx("div",{className:"loading-spinner"}),M.jsx("p",{children:"Loading transaction history..."})]})})}):M.jsxs("div",{className:"history-page",children:[M.jsxs("div",{className:"history-header",children:[M.jsxs("div",{className:"header-content",children:[M.jsxs("div",{className:"header-left",children:[M.jsx("div",{className:"header-icon",children:M.jsx(at,{})}),M.jsxs("div",{className:"header-text",children:[M.jsx("h1",{children:"Transaction History"}),M.jsx("p",{children:"Track all your trading activities and portfolio changes"})]})]}),M.jsx("div",{className:"header-actions",children:M.jsxs("button",{className:"action-btn "+(E?"active":""),onClick:()=>T(!E),children:[M.jsx(vt,{}),"Filters"]})})]}),M.jsxs("div",{className:"stats-overview",children:[M.jsxs("div",{className:"stat-card",children:[M.jsx("div",{className:"stat-icon",children:M.jsx(Ue,{})}),M.jsxs("div",{className:"stat-content",children:[M.jsx("div",{className:"stat-value",children:A.totalTransactions}),M.jsx("div",{className:"stat-label",children:"Total Transactions"})]})]}),M.jsxs("div",{className:"stat-card",children:[M.jsx("div",{className:"stat-icon positive",children:M.jsx(cn,{})}),M.jsxs("div",{className:"stat-content",children:[M.jsx("div",{className:"stat-value",children:wd(A.totalBuyAmount)}),M.jsx("div",{className:"stat-label",children:"Total Invested"})]})]}),M.jsxs("div",{className:"stat-card",children:[M.jsx("div",{className:"stat-icon negative",children:M.jsx(ln,{})}),M.jsxs("div",{className:"stat-content",children:[M.jsx("div",{className:"stat-value",children:wd(A.totalSellAmount)}),M.jsx("div",{className:"stat-label",children:"Total Sold"})]})]}),M.jsxs("div",{className:"stat-card",children:[M.jsx("div",{className:"stat-icon",children:M.jsx(an,{})}),M.jsxs("div",{className:"stat-content",children:[M.jsxs("div",{className:"stat-value",children:[A.successRate.toFixed(1),"%"]}),M.jsx("div",{className:"stat-label",children:"Success Rate"})]})]})]})]}),M.jsxs("div",{className:"history-container",children:[M.jsx(y,{children:E&&M.jsx(v.div,{className:"filters-panel",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:M.jsxs("div",{className:"filters-content",children:[M.jsxs("div",{className:"filter-group",children:[M.jsx("label",{children:"Search"}),M.jsxs("div",{className:"search-wrapper",children:[M.jsx(Qt,{className:"search-icon"}),M.jsx("input",{type:"text",placeholder:"Search by symbol, name, or order ID...",value:d,onChange:e=>m(e.target.value),className:"search-input"}),d&&M.jsx("button",{className:"clear-search",onClick:()=>m(""),children:M.jsx(pn,{})})]})]}),M.jsxs("div",{className:"filter-group",children:[M.jsx("label",{children:"Transaction Type"}),M.jsxs("select",{value:p,onChange:e=>f(e.target.value),className:"filter-select",children:[M.jsx("option",{value:"all",children:"All Types"}),M.jsx("option",{value:"buy",children:"Buy Orders"}),M.jsx("option",{value:"sell",children:"Sell Orders"})]})]}),M.jsxs("div",{className:"filter-group",children:[M.jsx("label",{children:"Status"}),M.jsxs("select",{value:g,onChange:e=>x(e.target.value),className:"filter-select",children:[M.jsx("option",{value:"all",children:"All Status"}),M.jsx("option",{value:"completed",children:"Completed"}),M.jsx("option",{value:"pending",children:"Pending"}),M.jsx("option",{value:"failed",children:"Failed"})]})]}),M.jsxs("div",{className:"filter-group",children:[M.jsx("label",{children:"Date Range"}),M.jsxs("select",{value:b,onChange:e=>w(e.target.value),className:"filter-select",children:[M.jsx("option",{value:"all",children:"All Time"}),M.jsx("option",{value:"today",children:"Today"}),M.jsx("option",{value:"week",children:"Last 7 Days"}),M.jsx("option",{value:"month",children:"Last Month"}),M.jsx("option",{value:"year",children:"Last Year"})]})]}),M.jsx("div",{className:"filter-actions",children:M.jsx("button",{className:"clear-filters-btn",onClick:()=>{m(""),f("all"),x("all"),w("all")},children:"Clear All"})})]})})}),M.jsx("div",{className:"transactions-section",children:0===D.length?M.jsxs("div",{className:"empty-state",children:[M.jsx("div",{className:"empty-icon",children:M.jsx(at,{})}),M.jsx("h3",{children:"No transactions found"}),M.jsx("p",{children:d||"all"!==p||"all"!==g||"all"!==b?"No transactions match your current filters":"Start trading to see your transaction history here"}),(d||"all"!==p||"all"!==g||"all"!==b)&&M.jsx("button",{className:"clear-filters-btn",onClick:()=>{m(""),f("all"),x("all"),w("all")},children:"Clear Filters"})]}):M.jsxs("div",{className:"transactions-table",children:[M.jsx("div",{className:"table-header",children:M.jsxs("div",{className:"table-row header",children:[M.jsxs("div",{className:"col-date sortable",onClick:()=>O("date"),children:["Date & Time","date"===j&&("asc"===N?M.jsx(Je,{}):M.jsx(qe,{}))]}),M.jsxs("div",{className:"col-stock sortable",onClick:()=>O("symbol"),children:["Stock","symbol"===j&&("asc"===N?M.jsx(Je,{}):M.jsx(qe,{}))]}),M.jsx("div",{className:"col-type",children:"Type"}),M.jsxs("div",{className:"col-quantity sortable",onClick:()=>O("quantity"),children:["Quantity","quantity"===j&&("asc"===N?M.jsx(Je,{}):M.jsx(qe,{}))]}),M.jsx("div",{className:"col-price",children:"Price"}),M.jsxs("div",{className:"col-amount sortable",onClick:()=>O("amount"),children:["Total Amount","amount"===j&&("asc"===N?M.jsx(Je,{}):M.jsx(qe,{}))]}),M.jsx("div",{className:"col-gain-loss",children:"Gain/Loss"}),M.jsxs("div",{className:"col-status sortable",onClick:()=>O("status"),children:["Status","status"===j&&("asc"===N?M.jsx(Je,{}):M.jsx(qe,{}))]}),M.jsx("div",{className:"col-actions",children:"Actions"})]})}),M.jsx("div",{className:"table-body",children:D.map((e,t)=>{var n;return M.jsxs(v.div,{className:"table-row clickable",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.05*t},onClick:()=>P(e),children:[M.jsx("div",{className:"col-date",children:M.jsxs("div",{className:"date-info",children:[M.jsx("span",{className:"date",children:kd(e.timestamp,"MMM DD, YYYY")}),M.jsx("span",{className:"time",children:kd(e.timestamp,"HH:mm")})]})}),M.jsx("div",{className:"col-stock",children:M.jsxs("div",{className:"stock-info",children:[M.jsx("span",{className:"symbol",children:e.symbol}),M.jsx("span",{className:"name",children:e.name}),M.jsx("span",{className:"exchange",children:e.exchange})]})}),M.jsx("div",{className:"col-type",children:M.jsxs("div",{className:`type-badge ${e.type}`,children:[F(e.type),M.jsx("span",{children:e.type.toUpperCase()})]})}),M.jsx("div",{className:"col-quantity",children:M.jsx("span",{className:"quantity",children:jd(e.quantity)})}),M.jsx("div",{className:"col-price",children:M.jsx("span",{className:"price",children:wd(e.price)})}),M.jsx("div",{className:"col-amount",children:M.jsxs("div",{className:"amount-info",children:[M.jsx("span",{className:"total",children:wd(e.totalAmount)}),M.jsxs("span",{className:"fees",children:["Fees: ",wd(e.fees||0)]})]})}),M.jsx("div",{className:"col-gain-loss",children:void 0!==e.gainLoss?M.jsxs("div",{className:"gain-loss "+(e.gainLoss>=0?"positive":"negative"),children:[M.jsxs("span",{className:"amount",children:[e.gainLoss>=0?"+":"",wd(e.gainLoss)]}),M.jsxs("span",{className:"percent",children:["(",e.gainLoss>=0?"+":"",null==(n=e.gainLossPercent)?void 0:n.toFixed(2),"%)"]})]}):M.jsx("span",{className:"no-data",children:"-"})}),M.jsx("div",{className:"col-status",children:M.jsxs("div",{className:`status-badge ${e.status}`,children:[R(e.status),M.jsx("span",{children:e.status})]})}),M.jsx("div",{className:"col-actions",children:M.jsx("button",{className:"action-btn-small",onClick:t=>{t.stopPropagation(),P(e)},title:"View Details",children:M.jsx(gt,{})})})]},e.id)})})]})})]}),M.jsx(y,{children:C&&M.jsx(v.div,{className:"modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>P(null),children:M.jsxs(v.div,{className:"modal-content transaction-detail-modal",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:e=>e.stopPropagation(),children:[M.jsxs("div",{className:"modal-header",children:[M.jsx("h3",{children:"Transaction Details"}),M.jsx("button",{className:"modal-close",onClick:()=>P(null),children:M.jsx(pn,{})})]}),M.jsx("div",{className:"modal-body",children:M.jsxs("div",{className:"transaction-details",children:[M.jsxs("div",{className:"detail-section",children:[M.jsx("h4",{children:"Basic Information"}),M.jsxs("div",{className:"detail-grid",children:[M.jsxs("div",{className:"detail-item",children:[M.jsx("label",{children:"Transaction ID"}),M.jsx("span",{children:C.id})]}),M.jsxs("div",{className:"detail-item",children:[M.jsx("label",{children:"Order ID"}),M.jsx("span",{children:C.orderId})]}),M.jsxs("div",{className:"detail-item",children:[M.jsx("label",{children:"Date & Time"}),M.jsx("span",{children:kd(C.timestamp,"MMM DD, YYYY HH:mm:ss")})]}),M.jsxs("div",{className:"detail-item",children:[M.jsx("label",{children:"Status"}),M.jsxs("div",{className:`status-badge ${C.status}`,children:[R(C.status),M.jsx("span",{children:C.status})]})]})]})]}),M.jsxs("div",{className:"detail-section",children:[M.jsx("h4",{children:"Stock Information"}),M.jsxs("div",{className:"detail-grid",children:[M.jsxs("div",{className:"detail-item",children:[M.jsx("label",{children:"Symbol"}),M.jsx("span",{children:C.symbol})]}),M.jsxs("div",{className:"detail-item",children:[M.jsx("label",{children:"Company Name"}),M.jsx("span",{children:C.name})]}),M.jsxs("div",{className:"detail-item",children:[M.jsx("label",{children:"Exchange"}),M.jsx("span",{children:C.exchange})]}),M.jsxs("div",{className:"detail-item",children:[M.jsx("label",{children:"Sector"}),M.jsx("span",{children:C.sector})]})]})]}),M.jsxs("div",{className:"detail-section",children:[M.jsx("h4",{children:"Transaction Details"}),M.jsxs("div",{className:"detail-grid",children:[M.jsxs("div",{className:"detail-item",children:[M.jsx("label",{children:"Type"}),M.jsxs("div",{className:`type-badge ${C.type}`,children:[F(C.type),M.jsx("span",{children:C.type.toUpperCase()})]})]}),M.jsxs("div",{className:"detail-item",children:[M.jsx("label",{children:"Quantity"}),M.jsxs("span",{children:[jd(C.quantity)," shares"]})]}),M.jsxs("div",{className:"detail-item",children:[M.jsx("label",{children:"Price per Share"}),M.jsx("span",{children:wd(C.price)})]}),M.jsxs("div",{className:"detail-item",children:[M.jsx("label",{children:"Total Amount"}),M.jsx("span",{children:wd(C.totalAmount)})]}),M.jsxs("div",{className:"detail-item",children:[M.jsx("label",{children:"Fees & Charges"}),M.jsx("span",{children:wd(C.fees||0)})]}),M.jsxs("div",{className:"detail-item",children:[M.jsx("label",{children:"Net Amount"}),M.jsx("span",{className:"net-amount",children:wd(C.netAmount)})]})]})]}),void 0!==C.gainLoss&&M.jsxs("div",{className:"detail-section",children:[M.jsx("h4",{children:"Performance"}),M.jsxs("div",{className:"detail-grid",children:[M.jsxs("div",{className:"detail-item",children:[M.jsx("label",{children:"Gain/Loss Amount"}),M.jsxs("span",{className:"gain-loss "+(C.gainLoss>=0?"positive":"negative"),children:[C.gainLoss>=0?"+":"",wd(C.gainLoss)]})]}),M.jsxs("div",{className:"detail-item",children:[M.jsx("label",{children:"Gain/Loss Percentage"}),M.jsxs("span",{className:"gain-loss "+(C.gainLoss>=0?"positive":"negative"),children:[C.gainLoss>=0?"+":"",null==(n=C.gainLossPercent)?void 0:n.toFixed(2),"%"]})]})]})]}),"failed"===C.status&&C.failureReason&&M.jsxs("div",{className:"detail-section",children:[M.jsx("h4",{children:"Failure Information"}),M.jsxs("div",{className:"failure-reason",children:[M.jsx(mn,{className:"failure-icon"}),M.jsx("span",{children:C.failureReason})]})]})]})}),M.jsxs("div",{className:"modal-footer",children:[M.jsx("button",{className:"btn secondary",onClick:()=>P(null),children:"Close"}),M.jsx("button",{className:"btn primary",onClick:()=>i(`/stock/${C.symbol}`),children:"View Stock"})]})]})})})]})},bx=({user:e,theme:t})=>{const[n,i]=s.useState("all"),[r,a]=s.useState(!1),[o,l]=s.useState([]),{query:c,setQuery:u,results:h,recentSearches:d,showHistory:m,handleHistoryClick:p,loading:f,clearSearch:g,hasResults:y}=Kr({enableSuggestions:!1,enableHistory:!0,limit:30,debounceMs:500}),x=e=>{const t=new Date,n=new Date(e),s=Math.floor((t-n)/36e5);return s<1?"Just now":s<24?`${s}h ago`:`${Math.floor(s/24)}d ago`},b=[{id:1,title:"Sensex Surges 500 Points as Banking Stocks Rally on RBI Policy Optimism",summary:"Indian benchmark indices closed higher on Tuesday as banking and financial stocks led the rally following positive sentiment around the upcoming RBI monetary policy meeting.",content:"The BSE Sensex gained 501.92 points to close at 65,953.48, while the NSE Nifty 50 advanced 145.30 points to end at 19,674.25. Banking stocks were the top performers with HDFC Bank, ICICI Bank, and Kotak Mahindra Bank leading the gains.",category:"market",source:"Economic Times",author:"Rajesh Kumar",publishedAt:"2024-01-15T10:30:00Z",imageUrl:"https://images.unsplash.com/photo-1611974789855-9c2a0a7236a3?w=400",readTime:"3 min read",tags:["Sensex","Banking","RBI","Market Rally"],isBookmarked:!1},{id:2,title:"Reliance Industries Reports Strong Q3 Results, Beats Estimates",summary:"Reliance Industries Ltd reported better-than-expected quarterly results driven by strong performance in its retail and digital services segments.",content:"The oil-to-telecom conglomerate posted a net profit of ₹18,549 crore for the quarter ended December 2023, up 8.5% year-on-year. Revenue from operations increased to ₹2.35 lakh crore.",category:"earnings",source:"Business Standard",author:"Priya Sharma",publishedAt:"2024-01-15T09:15:00Z",imageUrl:"https://images.unsplash.com/photo-1560472354-b33ff0c44a43?w=400",readTime:"4 min read",tags:["Reliance","Earnings","Q3 Results"],isBookmarked:!0},{id:3,title:"IT Stocks Under Pressure as US Fed Signals Hawkish Stance",summary:"Indian IT stocks declined in early trade as the US Federal Reserve indicated a more aggressive approach to interest rate hikes.",content:"TCS, Infosys, and Wipro were among the top losers as investors worried about the impact of higher interest rates on IT spending by US clients. The Nifty IT index fell 2.3%.",category:"stocks",source:"Mint",author:"Amit Verma",publishedAt:"2024-01-15T08:45:00Z",imageUrl:"https://images.unsplash.com/photo-1551288049-bebda4e38f71?w=400",readTime:"2 min read",tags:["IT Stocks","Fed Policy","TCS","Infosys"],isBookmarked:!1},{id:4,title:"Government Announces New PLI Scheme for Electronics Manufacturing",summary:"The government unveiled a new Production Linked Incentive scheme worth ₹76,000 crore to boost electronics manufacturing in India.",content:"The scheme aims to attract global electronics manufacturers and create employment opportunities. Companies like Apple, Samsung, and Foxconn are expected to benefit from this initiative.",category:"policy",source:"Financial Express",author:"Neha Gupta",publishedAt:"2024-01-15T07:30:00Z",imageUrl:"https://images.unsplash.com/photo-1518709268805-4e9042af2176?w=400",readTime:"5 min read",tags:["PLI Scheme","Electronics","Manufacturing","Policy"],isBookmarked:!1},{id:5,title:"Crude Oil Prices Rise on Middle East Tensions, OMCs in Focus",summary:"Oil marketing companies gained as crude oil prices surged due to escalating tensions in the Middle East region.",content:"Brent crude futures rose 2.5% to $85.40 per barrel. Indian Oil Corporation, BPCL, and HPCL were among the top gainers in the energy sector.",category:"market",source:"Reuters",author:"Global Desk",publishedAt:"2024-01-15T06:00:00Z",imageUrl:"https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=400",readTime:"3 min read",tags:["Crude Oil","OMCs","Energy Sector"],isBookmarked:!1},{id:6,title:"FII Inflows Continue as India Remains Attractive Investment Destination",summary:"Foreign institutional investors pumped in ₹12,500 crore into Indian equities last week, showing continued confidence in the market.",content:"The sustained FII inflows reflect positive sentiment towards Indian markets amid global uncertainties. Experts believe India's growth prospects remain strong.",category:"economy",source:"Moneycontrol",author:"Investment Desk",publishedAt:"2024-01-14T16:20:00Z",imageUrl:"https://images.unsplash.com/photo-1559526324-4b87b5e36e44?w=400",readTime:"4 min read",tags:["FII","Investment","Market Flows"],isBookmarked:!0}].filter(e=>{const t=e.title.toLowerCase().includes(c.toLowerCase())||e.summary.toLowerCase().includes(c.toLowerCase())||e.tags.some(e=>e.toLowerCase().includes(c.toLowerCase())),s="all"===n||e.category===n;return t&&s});return M.jsxs("div",{className:"news-page",children:[M.jsx(bd,{icon:bt,title:"Market News",subtitle:"Stay updated with the latest market news and analysis from trusted sources",borderColor:"info",actions:[{label:"Refresh",icon:Yt,onClick:async()=>{a(!0),await new Promise(e=>setTimeout(e,1500)),a(!1)},variant:"secondary",disabled:r},{label:"Bookmarks",icon:et,onClick:()=>{},variant:"primary"}]}),M.jsxs("div",{className:"news-container",children:[M.jsxs(v.div,{className:"news-controls",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},children:[M.jsxs("div",{className:"controls-left",children:[M.jsx("div",{className:"search-container",children:M.jsx(Zr,{placeholder:"Search news articles...",value:c,onChange:u,onClear:g,recentSearches:d,onHistoryClick:p,showHistory:m,loading:f,size:"md",showSuggestions:!1,enableHistory:!0,className:"news-search-input"})}),M.jsx("div",{className:"category-filter",children:[{id:"all",name:"All News",count:45},{id:"market",name:"Market",count:12},{id:"stocks",name:"Stocks",count:8},{id:"economy",name:"Economy",count:10},{id:"policy",name:"Policy",count:6},{id:"earnings",name:"Earnings",count:9}].map(e=>M.jsxs("button",{className:"category-btn "+(n===e.id?"active":""),onClick:()=>i(e.id),children:[e.name,M.jsx("span",{className:"category-count",children:e.count})]},e.id))})]}),M.jsx("div",{className:"controls-right",children:M.jsxs("button",{className:"btn-premium btn-ghost",children:[M.jsx(vt,{size:16}),"Filter"]})})]}),M.jsx(v.div,{className:"news-grid",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:b.map((e,t)=>M.jsxs(v.article,{className:"news-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.1*t},children:[M.jsxs("div",{className:"news-image",children:[M.jsx("img",{src:e.imageUrl,alt:e.title}),M.jsx("div",{className:"news-category",children:M.jsx("span",{className:`category-tag ${e.category}`,children:e.category.toUpperCase()})})]}),M.jsxs("div",{className:"news-content",children:[M.jsxs("div",{className:"news-meta",children:[M.jsxs("div",{className:"meta-left",children:[M.jsxs("span",{className:"news-source",children:[M.jsx(un,{size:12}),e.source]}),M.jsxs("span",{className:"news-time",children:[M.jsx(at,{size:12}),x(e.publishedAt)]})]}),M.jsx("div",{className:"meta-right",children:M.jsx("span",{className:"read-time",children:e.readTime})})]}),M.jsx("h3",{className:"news-title",children:e.title}),M.jsx("p",{className:"news-summary",children:e.summary}),M.jsx("div",{className:"news-tags",children:e.tags.slice(0,3).map(e=>M.jsxs("span",{className:"news-tag",children:[M.jsx(rn,{size:10}),e]},e))}),M.jsxs("div",{className:"news-actions",children:[M.jsx("div",{className:"actions-left",children:M.jsxs("button",{className:"news-author",children:["By ",e.author]})}),M.jsxs("div",{className:"actions-right",children:[M.jsx("button",{className:"action-btn "+(o.includes(e.id)||e.isBookmarked?"bookmarked":""),onClick:()=>{return t=e.id,void l(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);var t},title:"Bookmark",children:M.jsx(et,{size:16})}),M.jsx("button",{className:"action-btn",onClick:()=>(e=>{navigator.share?navigator.share({title:e.title,text:e.summary,url:window.location.href}):navigator.clipboard.writeText(window.location.href)})(e),title:"Share",children:M.jsx(Kt,{size:16})}),M.jsx("button",{className:"action-btn",title:"Read Full Article",children:M.jsx(ft,{size:16})})]})]})]})]},e.id))}),M.jsx(v.div,{className:"load-more-section",initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.4},children:M.jsx("button",{className:"btn-premium btn-secondary btn-lg",children:"Load More Articles"})})]})]})},wx=({user:e,theme:t})=>{const[n,i]=s.useState(""),[r,a]=s.useState(new Set),[o,l]=s.useState(!1),[c,u]=s.useState(!1),{notifications:h,unreadCount:d,loading:m,error:p,filters:f,pagination:g,connectionStatus:x,fetchNotifications:b,markAsRead:w,markAllAsRead:j,deleteNotification:k,setFilters:N,loadMore:S}=or();s.useEffect(()=>{b()},[b]);const C=s.useCallback(()=>{b()},[b]),P=s.useCallback((e,t)=>{N({[e]:t})},[N]),E=h.filter(e=>{if(n){const t=n.toLowerCase();if(!e.title.toLowerCase().includes(t)&&!e.message.toLowerCase().includes(t))return!1}return("all"===f.type||e.type===f.type)&&(!("read"===f.read&&!e.read)&&("unread"!==f.read||!e.read))}),T=s.useCallback(e=>{const t=new Set(r);t.has(e)?t.delete(e):t.add(e),a(t)},[r]),L=s.useCallback(()=>{r.size===E.length?a(new Set):a(new Set(E.map(e=>e.id||e._id)))},[r,E]),I=s.useCallback(async()=>{const e=Array.from(r).map(e=>w(e));await Promise.all(e),a(new Set),u(!1)},[r,w]),_=s.useCallback(async()=>{const e=Array.from(r).map(e=>k(e));await Promise.all(e),a(new Set),u(!1)},[r,k]),D=s.useCallback(()=>{u(e=>!e),c&&a(new Set)},[c]);return M.jsxs("div",{className:"notifications-page",children:[M.jsx(bd,{icon:Ze,title:"Notifications",subtitle:`${d} unread • ${"connected"===x?"LIVE":"OFFLINE"}`,borderColor:"primary",showNotifications:!1,actions:[{label:c?"Cancel":"Select",icon:c?pn:mt,onClick:D,variant:c?"outline-danger":"outline"},{label:"Refresh",icon:Yt,onClick:C,variant:"secondary",disabled:m},{label:"Settings",icon:Xt,onClick:()=>{},variant:"outline"}]}),M.jsxs("div",{className:"notifications-content",children:[M.jsx(y,{children:d>0&&!c&&M.jsx(v.div,{className:"notifications-actions",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},children:M.jsxs(v.button,{className:"action-btn mark-all",onClick:j,whileHover:{scale:1.05},whileTap:{scale:.95},children:[M.jsx(rt,{}),"Mark all read"]})})}),M.jsxs("div",{className:"notifications-controls",children:[M.jsxs("div",{className:"search-container",children:[M.jsx(Qt,{className:"search-icon"}),M.jsx("input",{type:"text",placeholder:"Search notifications...",value:n,onChange:e=>i(e.target.value),className:"search-input"})]}),M.jsxs("button",{className:"filter-toggle",onClick:()=>l(e=>!e),children:[M.jsx(rt,{}),M.jsx("span",{children:"Filters"})]})]}),M.jsx(y,{children:o&&M.jsxs(v.div,{className:"filters-container",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},children:[M.jsxs("div",{className:"filter-group",children:[M.jsx("label",{children:"Type:"}),M.jsxs("select",{value:f.type,onChange:e=>P("type",e.target.value),children:[M.jsx("option",{value:"all",children:"All Types"}),M.jsx("option",{value:"info",children:"Info"}),M.jsx("option",{value:"success",children:"Success"}),M.jsx("option",{value:"warning",children:"Warning"}),M.jsx("option",{value:"error",children:"Error"}),M.jsx("option",{value:"alert",children:"Alert"})]})]}),M.jsxs("div",{className:"filter-group",children:[M.jsx("label",{children:"Status:"}),M.jsxs("select",{value:f.read,onChange:e=>P("read",e.target.value),children:[M.jsx("option",{value:"all",children:"All"}),M.jsx("option",{value:"unread",children:"Unread"}),M.jsx("option",{value:"read",children:"Read"})]})]})]})}),M.jsx(y,{children:r.size>0&&M.jsxs(v.div,{className:"bulk-actions",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:[M.jsxs("div",{className:"bulk-info",children:[M.jsx("input",{type:"checkbox",checked:r.size===E.length,onChange:L}),M.jsxs("span",{children:[r.size," selected"]})]}),M.jsxs("div",{className:"bulk-buttons",children:[M.jsxs("button",{onClick:I,children:[M.jsx(rt,{})," Mark as read"]}),M.jsxs("button",{onClick:_,className:"danger",children:[M.jsx(on,{})," Delete"]})]})]})}),M.jsx("div",{className:"notifications-list",children:p?M.jsxs("div",{className:"error-state",children:[M.jsx(Ze,{size:48}),M.jsx("h3",{children:"Failed to load notifications"}),M.jsx("p",{children:p}),M.jsx("button",{onClick:C,children:"Try again"})]}):E.length>0?M.jsxs(M.Fragment,{children:[E.map((e,t)=>M.jsxs(v.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*t},className:"notification-wrapper",children:[M.jsx(y,{mode:"wait",children:c&&M.jsx(v.input,{type:"checkbox",checked:r.has(e.id||e._id),onChange:()=>T(e.id||e._id),className:"notification-checkbox",initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0}},"checkbox")}),M.jsx(yd,{notification:e,onClick:()=>w(e.id||e._id),onDelete:()=>k(e.id||e._id),onMarkAsRead:()=>w(e.id||e._id),compact:!1,showActions:!c})]},e.id||e._id)),g.hasMore&&M.jsx("div",{className:"load-more-container",children:M.jsx(v.button,{className:"load-more-btn",onClick:S,disabled:m,whileHover:{scale:1.02},whileTap:{scale:.98},children:m?"Loading...":"Load More"})})]}):M.jsxs("div",{className:"empty-state",children:[M.jsx(Ze,{size:48}),M.jsx("h3",{children:"No notifications found"}),M.jsx("p",{children:n||"all"!==f.type||"all"!==f.read?"Try adjusting your search or filters":"You're all caught up! New notifications will appear here."})]})})]})]})},jx=({user:e,theme:t})=>{var n,i;const[r,a]=s.useState("profile"),[o,l]=s.useState(!1),[c,u]=s.useState(!1),h=[{id:"profile",name:"Profile",icon:un},{id:"notifications",name:"Notifications",icon:Ze},{id:"security",name:"Security",icon:Zt},{id:"preferences",name:"Preferences",icon:Xt}],[d,m]=s.useState({firstName:(null==e?void 0:e.firstName)||(null==(n=null==e?void 0:e.fullName)?void 0:n.split(" ")[0])||"",lastName:(null==e?void 0:e.lastName)||(null==(i=null==e?void 0:e.fullName)?void 0:i.split(" ").slice(1).join(" "))||"",email:(null==e?void 0:e.email)||"",phone:(null==e?void 0:e.phoneNumber)||(null==e?void 0:e.phone)||"",bio:(null==e?void 0:e.bio)||"Welcome to TradeBro! Start your trading journey today.",location:(null==e?void 0:e.location)||(null==e?void 0:e.address)||""}),[p,f]=s.useState({emailNotifications:!0,pushNotifications:!0,smsNotifications:!1,priceAlerts:!0,newsAlerts:!0,portfolioUpdates:!0,marketOpen:!1,weeklyReports:!0}),[g,y]=s.useState({twoFactorAuth:(null==e?void 0:e.twoFactorEnabled)||!1,loginAlerts:!1!==(null==e?void 0:e.loginAlerts),sessionTimeout:"30",allowedDevices:3}),[x,b]=s.useState(!1),[w,j]=s.useState(""),[k,N]=s.useState(""),[S,C]=s.useState(!1),[P,E]=s.useState({theme:t,language:"en",currency:"INR",timezone:"Asia/Kolkata",dateFormat:"DD/MM/YYYY",numberFormat:"Indian",defaultPage:"dashboard"}),T=(e,t)=>{m(n=>({...n,[e]:t}))},L=e=>{f(t=>({...t,[e]:!t[e]}))},I=async(e,t)=>{"twoFactorAuth"===e?t?await _():await A():y(n=>({...n,[e]:t}))},_=async()=>{try{C(!0);const e="https://s89-satya-capstone-tradebro.onrender.com",t=await fetch(`${e}/api/auth/2fa/enable`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}}),n=await t.json();n.success&&(j(n.qrCodeUrl),b(!0))}catch(e){}finally{C(!1)}},D=async()=>{try{const e="https://s89-satya-capstone-tradebro.onrender.com",t=await fetch(`${e}/api/auth/2fa/verify`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"},body:JSON.stringify({code:k})});(await t.json()).success?(y(e=>({...e,twoFactorAuth:!0})),b(!1),N(""),alert("Two-factor authentication enabled successfully!")):alert("Invalid verification code. Please try again.")}catch(e){alert("Error verifying code. Please try again.")}},A=async()=>{try{const e="https://s89-satya-capstone-tradebro.onrender.com",t=await fetch(`${e}/api/auth/2fa/disable`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}});(await t.json()).success&&(y(e=>({...e,twoFactorAuth:!1})),alert("Two-factor authentication disabled successfully!"))}catch(e){}},O=(e,t)=>{E(n=>({...n,[e]:t}))},R=()=>M.jsxs("div",{className:"settings-section",children:[M.jsx("h3",{className:"section-title",children:"Profile Information"}),M.jsxs("div",{className:"form-grid",children:[M.jsxs("div",{className:"form-group",children:[M.jsx("label",{className:"form-label",children:"First Name"}),M.jsx("input",{type:"text",className:"form-input",value:d.firstName,onChange:e=>T("firstName",e.target.value)})]}),M.jsxs("div",{className:"form-group",children:[M.jsx("label",{className:"form-label",children:"Last Name"}),M.jsx("input",{type:"text",className:"form-input",value:d.lastName,onChange:e=>T("lastName",e.target.value)})]}),M.jsxs("div",{className:"form-group",children:[M.jsx("label",{className:"form-label",children:"Email Address"}),M.jsx("input",{type:"email",className:"form-input",value:d.email,onChange:e=>T("email",e.target.value)})]}),M.jsxs("div",{className:"form-group",children:[M.jsx("label",{className:"form-label",children:"Phone Number"}),M.jsx("input",{type:"tel",className:"form-input",value:d.phone,onChange:e=>T("phone",e.target.value)})]}),M.jsxs("div",{className:"form-group full-width",children:[M.jsx("label",{className:"form-label",children:"Bio"}),M.jsx("textarea",{className:"form-textarea",rows:"3",value:d.bio,onChange:e=>T("bio",e.target.value)})]}),M.jsxs("div",{className:"form-group full-width",children:[M.jsx("label",{className:"form-label",children:"Location"}),M.jsx("input",{type:"text",className:"form-input",value:d.location,onChange:e=>T("location",e.target.value)})]})]})]});return M.jsxs("div",{className:"settings-page",children:[M.jsx(bd,{icon:Xt,title:"Settings",subtitle:"Manage your account preferences and security settings",borderColor:"success",actions:[{label:o?"Saving...":"Save Changes",icon:o?Yt:Gt,onClick:async()=>{l(!0),await new Promise(e=>setTimeout(e,1500)),l(!1)},variant:"primary",disabled:o}]}),M.jsx("div",{className:"settings-container",children:M.jsxs("div",{className:"settings-layout",children:[M.jsx(v.div,{className:"settings-tabs",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.1},children:h.map(e=>{const t=e.icon;return M.jsxs("button",{className:"tab-button "+(r===e.id?"active":""),onClick:()=>a(e.id),children:[M.jsx(t,{size:20}),e.name]},e.id)})}),M.jsx(v.div,{className:"settings-content",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:(()=>{switch(r){case"profile":default:return R();case"notifications":return M.jsxs("div",{className:"settings-section",children:[M.jsx("h3",{className:"section-title",children:"Notification Preferences"}),M.jsxs("div",{className:"notification-groups",children:[M.jsxs("div",{className:"notification-group",children:[M.jsx("h4",{className:"group-title",children:"Communication"}),M.jsxs("div",{className:"toggle-list",children:[M.jsxs("div",{className:"toggle-item",children:[M.jsxs("div",{className:"toggle-info",children:[M.jsx(Mt,{className:"toggle-icon"}),M.jsxs("div",{children:[M.jsx("div",{className:"toggle-label",children:"Email Notifications"}),M.jsx("div",{className:"toggle-description",children:"Receive updates via email"})]})]}),M.jsx("div",{className:"toggle-switch "+(p.emailNotifications?"on":"off"),onClick:()=>L("emailNotifications"),children:M.jsx("div",{className:"toggle-thumb"})})]}),M.jsxs("div",{className:"toggle-item",children:[M.jsxs("div",{className:"toggle-info",children:[M.jsx(Ze,{className:"toggle-icon"}),M.jsxs("div",{children:[M.jsx("div",{className:"toggle-label",children:"Push Notifications"}),M.jsx("div",{className:"toggle-description",children:"Browser push notifications"})]})]}),M.jsx("div",{className:"toggle-switch "+(p.pushNotifications?"on":"off"),onClick:()=>L("pushNotifications"),children:M.jsx("div",{className:"toggle-thumb"})})]}),M.jsxs("div",{className:"toggle-item",children:[M.jsxs("div",{className:"toggle-info",children:[M.jsx(tn,{className:"toggle-icon"}),M.jsxs("div",{children:[M.jsx("div",{className:"toggle-label",children:"SMS Notifications"}),M.jsx("div",{className:"toggle-description",children:"Text message alerts"})]})]}),M.jsx("div",{className:"toggle-switch "+(p.smsNotifications?"on":"off"),onClick:()=>L("smsNotifications"),children:M.jsx("div",{className:"toggle-thumb"})})]})]})]}),M.jsxs("div",{className:"notification-group",children:[M.jsx("h4",{className:"group-title",children:"Market Alerts"}),M.jsxs("div",{className:"toggle-list",children:[M.jsxs("div",{className:"toggle-item",children:[M.jsxs("div",{className:"toggle-info",children:[M.jsx(ht,{className:"toggle-icon"}),M.jsxs("div",{children:[M.jsx("div",{className:"toggle-label",children:"Price Alerts"}),M.jsx("div",{className:"toggle-description",children:"Stock price movement alerts"})]})]}),M.jsx("div",{className:"toggle-switch "+(p.priceAlerts?"on":"off"),onClick:()=>L("priceAlerts"),children:M.jsx("div",{className:"toggle-thumb"})})]}),M.jsxs("div",{className:"toggle-item",children:[M.jsxs("div",{className:"toggle-info",children:[M.jsx(bt,{className:"toggle-icon"}),M.jsxs("div",{children:[M.jsx("div",{className:"toggle-label",children:"News Alerts"}),M.jsx("div",{className:"toggle-description",children:"Market news and updates"})]})]}),M.jsx("div",{className:"toggle-switch "+(p.newsAlerts?"on":"off"),onClick:()=>L("newsAlerts"),children:M.jsx("div",{className:"toggle-thumb"})})]}),M.jsxs("div",{className:"toggle-item",children:[M.jsxs("div",{className:"toggle-info",children:[M.jsx(un,{className:"toggle-icon"}),M.jsxs("div",{children:[M.jsx("div",{className:"toggle-label",children:"Portfolio Updates"}),M.jsx("div",{className:"toggle-description",children:"Portfolio performance updates"})]})]}),M.jsx("div",{className:"toggle-switch "+(p.portfolioUpdates?"on":"off"),onClick:()=>L("portfolioUpdates"),children:M.jsx("div",{className:"toggle-thumb"})})]})]})]})]})]});case"security":return M.jsxs("div",{className:"settings-section",children:[M.jsx("h3",{className:"section-title",children:"Security & Privacy"}),M.jsxs("div",{className:"security-groups",children:[M.jsxs("div",{className:"security-group",children:[M.jsx("h4",{className:"group-title",children:"Authentication"}),M.jsxs("div",{className:"security-item",children:[M.jsxs("div",{className:"security-info",children:[M.jsx(Zt,{className:"security-icon"}),M.jsxs("div",{children:[M.jsx("div",{className:"security-label",children:"Two-Factor Authentication"}),M.jsx("div",{className:"security-description",children:"Add an extra layer of security"})]})]}),M.jsx("div",{className:`toggle-switch ${g.twoFactorAuth?"on":"off"} ${S?"disabled":""}`,onClick:()=>!S&&I("twoFactorAuth",!g.twoFactorAuth),children:M.jsx("div",{className:"toggle-thumb"})})]}),x&&M.jsx("div",{className:"modal-overlay",onClick:()=>b(!1),children:M.jsxs("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[M.jsxs("div",{className:"modal-header",children:[M.jsx("h3",{children:"Setup Two-Factor Authentication"}),M.jsx("button",{className:"modal-close",onClick:()=>b(!1),children:M.jsx(pn,{size:20})})]}),M.jsx("div",{className:"modal-body",children:M.jsxs("div",{className:"qr-section",children:[M.jsx("p",{children:"1. Install Google Authenticator or similar app"}),M.jsx("p",{children:"2. Scan this QR code:"}),w&&M.jsx("div",{className:"qr-code",children:M.jsx("img",{src:w,alt:"QR Code"})}),M.jsx("p",{children:"3. Enter the 6-digit code from your app:"}),M.jsx("input",{type:"text",className:"verification-input",placeholder:"000000",value:k,onChange:e=>N(e.target.value),maxLength:"6"})]})}),M.jsxs("div",{className:"modal-footer",children:[M.jsx("button",{className:"btn-premium btn-secondary",onClick:()=>b(!1),children:"Cancel"}),M.jsx("button",{className:"btn-premium btn-primary",onClick:D,disabled:6!==k.length,children:"Verify & Enable"})]})]})}),M.jsxs("div",{className:"security-item",children:[M.jsxs("div",{className:"security-info",children:[M.jsx(Ze,{className:"security-icon"}),M.jsxs("div",{children:[M.jsx("div",{className:"security-label",children:"Login Alerts"}),M.jsx("div",{className:"security-description",children:"Get notified of new logins"})]})]}),M.jsx("div",{className:"toggle-switch "+(g.loginAlerts?"on":"off"),onClick:()=>I("loginAlerts",!g.loginAlerts),children:M.jsx("div",{className:"toggle-thumb"})})]})]}),M.jsxs("div",{className:"security-group",children:[M.jsx("h4",{className:"group-title",children:"Session Management"}),M.jsxs("div",{className:"form-group",children:[M.jsx("label",{className:"form-label",children:"Session Timeout (minutes)"}),M.jsxs("select",{className:"form-select",value:g.sessionTimeout,onChange:e=>I("sessionTimeout",e.target.value),children:[M.jsx("option",{value:"15",children:"15 minutes"}),M.jsx("option",{value:"30",children:"30 minutes"}),M.jsx("option",{value:"60",children:"1 hour"}),M.jsx("option",{value:"120",children:"2 hours"}),M.jsx("option",{value:"0",children:"Never"})]})]})]}),M.jsxs("div",{className:"security-group",children:[M.jsx("h4",{className:"group-title",children:"Password"}),M.jsxs("div",{className:"password-section",children:[M.jsxs("button",{className:"btn-premium btn-secondary",children:[M.jsx(Nt,{size:16}),"Change Password"]}),M.jsxs("button",{className:"btn-premium btn-ghost",children:[M.jsx(Yt,{size:16}),"Reset All Sessions"]})]})]})]})]});case"preferences":return M.jsxs("div",{className:"settings-section",children:[M.jsx("h3",{className:"section-title",children:"Application Preferences"}),M.jsxs("div",{className:"preferences-groups",children:[M.jsxs("div",{className:"preferences-group",children:[M.jsx("h4",{className:"group-title",children:"Appearance"}),M.jsxs("div",{className:"form-group",children:[M.jsx("label",{className:"form-label",children:"Theme"}),M.jsxs("div",{className:"theme-selector",children:[M.jsxs("button",{className:"theme-option "+("light"===P.theme?"active":""),onClick:()=>O("theme","light"),children:[M.jsx(sn,{size:16}),"Light"]}),M.jsxs("button",{className:"theme-option "+("dark"===P.theme?"active":""),onClick:()=>O("theme","dark"),children:[M.jsx(Bt,{size:16}),"Dark"]})]})]})]}),M.jsxs("div",{className:"preferences-group",children:[M.jsx("h4",{className:"group-title",children:"Localization"}),M.jsxs("div",{className:"form-grid",children:[M.jsxs("div",{className:"form-group",children:[M.jsx("label",{className:"form-label",children:"Language"}),M.jsxs("select",{className:"form-select",value:P.language,onChange:e=>O("language",e.target.value),children:[M.jsx("option",{value:"en",children:"English"}),M.jsx("option",{value:"hi",children:"Hindi"}),M.jsx("option",{value:"mr",children:"Marathi"}),M.jsx("option",{value:"gu",children:"Gujarati"})]})]}),M.jsxs("div",{className:"form-group",children:[M.jsx("label",{className:"form-label",children:"Currency"}),M.jsxs("select",{className:"form-select",value:P.currency,onChange:e=>O("currency",e.target.value),children:[M.jsx("option",{value:"INR",children:"Indian Rupee (₹)"}),M.jsx("option",{value:"USD",children:"US Dollar ($)"}),M.jsx("option",{value:"EUR",children:"Euro (€)"})]})]}),M.jsxs("div",{className:"form-group",children:[M.jsx("label",{className:"form-label",children:"Timezone"}),M.jsxs("select",{className:"form-select",value:P.timezone,onChange:e=>O("timezone",e.target.value),children:[M.jsx("option",{value:"Asia/Kolkata",children:"Asia/Kolkata (IST)"}),M.jsx("option",{value:"America/New_York",children:"America/New_York (EST)"}),M.jsx("option",{value:"Europe/London",children:"Europe/London (GMT)"})]})]}),M.jsxs("div",{className:"form-group",children:[M.jsx("label",{className:"form-label",children:"Date Format"}),M.jsxs("select",{className:"form-select",value:P.dateFormat,onChange:e=>O("dateFormat",e.target.value),children:[M.jsx("option",{value:"DD/MM/YYYY",children:"DD/MM/YYYY"}),M.jsx("option",{value:"MM/DD/YYYY",children:"MM/DD/YYYY"}),M.jsx("option",{value:"YYYY-MM-DD",children:"YYYY-MM-DD"})]})]})]})]}),M.jsxs("div",{className:"preferences-group",children:[M.jsx("h4",{className:"group-title",children:"Default Settings"}),M.jsxs("div",{className:"form-group",children:[M.jsx("label",{className:"form-label",children:"Default Page"}),M.jsxs("select",{className:"form-select",value:P.defaultPage,onChange:e=>O("defaultPage",e.target.value),children:[M.jsx("option",{value:"dashboard",children:"Dashboard"}),M.jsx("option",{value:"portfolio",children:"Portfolio"}),M.jsx("option",{value:"trading",children:"Trading"}),M.jsx("option",{value:"watchlist",children:"Watchlist"})]})]})]})]})]})}})()},r)]})})]})},kx=()=>{var e,t,n,i,r;const[a,o]=s.useState(!1),[l,c]=s.useState(!1),{portfolioData:u}=ra(),{user:h,updateProfile:d,logout:m}=yn(),[p,f]=s.useState({firstName:"",lastName:"",email:"",phone:"",location:"",bio:"",joinDate:"",avatar:null});s.useEffect(()=>{if(h){const e=(h.fullName||h.name||"").split(" "),t=e[0]||h.firstName||"",n=e.slice(1).join(" ")||h.lastName||"";f({firstName:t,lastName:n,email:h.email||"",phone:h.phoneNumber||h.phone||"",location:h.location||h.address||"",bio:h.bio||"Welcome to TradeBro! Start your trading journey today.",joinDate:h.createdAt?new Date(h.createdAt).toISOString().split("T")[0]:(new Date).toISOString().split("T")[0],avatar:h.profilePicture||h.profileImage||h.avatar||null})}},[h]);const g=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e||0),y=[{title:"Portfolio Value",value:g((null==u?void 0:u.totalValue)||1e4),change:(null==u?void 0:u.totalGainLossPercentage)?`${u.totalGainLossPercentage>=0?"+":""}${u.totalGainLossPercentage.toFixed(2)}%`:"0.00%",icon:ht,color:((null==u?void 0:u.totalGainLoss)||0)>=0?"#10B981":"#EF4444"},{title:"Available Cash",value:g((null==u?void 0:u.availableCash)||1e4),change:"Available",icon:ht,color:"#3B82F6"},{title:"Total Invested",value:g((null==u?void 0:u.totalInvested)||0),change:`${(null==(e=null==u?void 0:u.holdings)?void 0:e.length)||0} holdings`,icon:cn,color:"#F59E0B"},{title:"Total Transactions",value:(null==(t=null==u?void 0:u.transactions)?void 0:t.length)||0,change:"Completed",icon:Ue,color:"#8B5CF6"}],x=[{title:"First Trade",description:"Completed your first trade",earned:((null==(n=null==u?void 0:u.transactions)?void 0:n.length)||0)>0},{title:"Portfolio Builder",description:"Built a diversified portfolio",earned:((null==(i=null==u?void 0:u.holdings)?void 0:i.length)||0)>=3},{title:"Profit Maker",description:"Made positive returns",earned:((null==u?void 0:u.totalGainLoss)||0)>0},{title:"Active Trader",description:"Completed 10+ transactions",earned:((null==(r=null==u?void 0:u.transactions)?void 0:r.length)||0)>=10},{title:"Market Expert",description:"Achieved 80% success rate",earned:!1},{title:"Long Term Investor",description:"Held positions for 6+ months",earned:!1}],b=(e,t)=>{f(n=>({...n,[e]:t}))};return M.jsxs("div",{className:"profile-page",children:[M.jsx(bd,{icon:un,title:"Profile",subtitle:"Manage your account information and trading preferences",borderColor:"purple",actions:a?[{label:"Cancel",icon:un,onClick:()=>{if(h){const e=(h.fullName||h.name||"").split(" "),t=e[0]||"",n=e.slice(1).join(" ")||"";f({firstName:t,lastName:n,email:h.email||"",phone:h.phoneNumber||h.phone||"",location:h.location||"",bio:h.bio||"Welcome to TradeBro! Start your trading journey today.",joinDate:h.createdAt?new Date(h.createdAt).toISOString().split("T")[0]:(new Date).toISOString().split("T")[0],avatar:h.profileImage||h.avatar||null})}o(!1)},variant:"secondary"},{label:l?"Saving...":"Save Changes",icon:Gt,onClick:async()=>{c(!0);try{const e={...h,fullName:`${p.firstName} ${p.lastName}`.trim(),firstName:p.firstName,lastName:p.lastName,email:p.email,phoneNumber:p.phone,phone:p.phone,location:p.location,bio:p.bio};d(e),await new Promise(e=>setTimeout(e,1e3)),o(!1),c(!1)}catch(e){c(!1)}},variant:"primary",disabled:l}]:[{label:"Edit Profile",icon:pt,onClick:()=>o(!0),variant:"primary"}]}),M.jsx("div",{className:"profile-container",children:M.jsxs("div",{className:"profile-layout",children:[M.jsxs(v.div,{className:"profile-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},children:[M.jsx("div",{className:"card-header",children:M.jsx("h3",{className:"card-title",children:"Personal Information"})}),M.jsxs("div",{className:"card-content",children:[M.jsxs("div",{className:"profile-avatar-section",children:[M.jsxs("div",{className:"avatar-container",children:[M.jsxs("div",{className:"avatar",children:[p.avatar?M.jsx("img",{src:p.avatar,alt:`${p.firstName} ${p.lastName}`,onError:e=>{e.target.style.display="none",e.target.nextSibling.style.display="flex"}}):null,M.jsx("div",{className:"avatar-placeholder",style:{display:p.avatar?"none":"flex"},children:p.firstName?M.jsxs("span",{className:"avatar-initial",children:[p.firstName.charAt(0).toUpperCase(),p.lastName?p.lastName.charAt(0).toUpperCase():""]}):M.jsx(un,{size:48})})]}),a&&M.jsx("button",{className:"avatar-edit-btn",children:M.jsx(st,{size:16})})]}),M.jsxs("div",{className:"profile-basic-info",children:[M.jsxs("h2",{className:"profile-name",children:[p.firstName," ",p.lastName]}),M.jsx("p",{className:"profile-email",children:p.email}),M.jsx("div",{className:"profile-meta",children:M.jsxs("span",{className:"join-date",children:[M.jsx(nt,{size:14}),"Joined ",(w=p.joinDate,new Date(w).toLocaleDateString("en-IN",{year:"numeric",month:"long",day:"numeric"}))]})})]})]}),M.jsx("div",{className:"profile-form",children:M.jsxs("div",{className:"form-grid",children:[M.jsxs("div",{className:"form-group",children:[M.jsx("label",{className:"form-label",children:"First Name"}),a?M.jsx("input",{type:"text",className:"form-input",value:p.firstName,onChange:e=>b("firstName",e.target.value)}):M.jsx("div",{className:"form-display",children:p.firstName})]}),M.jsxs("div",{className:"form-group",children:[M.jsx("label",{className:"form-label",children:"Last Name"}),a?M.jsx("input",{type:"text",className:"form-input",value:p.lastName,onChange:e=>b("lastName",e.target.value)}):M.jsx("div",{className:"form-display",children:p.lastName})]}),M.jsxs("div",{className:"form-group",children:[M.jsxs("label",{className:"form-label",children:[M.jsx(Mt,{size:16}),"Email Address"]}),a?M.jsx("input",{type:"email",className:"form-input",value:p.email,onChange:e=>b("email",e.target.value)}):M.jsx("div",{className:"form-display",children:p.email})]}),M.jsxs("div",{className:"form-group",children:[M.jsxs("label",{className:"form-label",children:[M.jsx(Vt,{size:16}),"Phone Number"]}),a?M.jsx("input",{type:"tel",className:"form-input",value:p.phone,onChange:e=>b("phone",e.target.value)}):M.jsx("div",{className:"form-display",children:p.phone})]}),M.jsxs("div",{className:"form-group full-width",children:[M.jsxs("label",{className:"form-label",children:[M.jsx(It,{size:16}),"Location"]}),a?M.jsx("input",{type:"text",className:"form-input",value:p.location,onChange:e=>b("location",e.target.value)}):M.jsx("div",{className:"form-display",children:p.location})]}),M.jsxs("div",{className:"form-group full-width",children:[M.jsx("label",{className:"form-label",children:"Bio"}),a?M.jsx("textarea",{className:"form-textarea",rows:"3",value:p.bio,onChange:e=>b("bio",e.target.value)}):M.jsx("div",{className:"form-display",children:p.bio})]})]})})]})]}),M.jsxs(v.div,{className:"stats-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:[M.jsx("div",{className:"card-header",children:M.jsxs("h3",{className:"card-title",children:[M.jsx(cn,{className:"card-icon"}),"Trading Performance"]})}),M.jsx("div",{className:"card-content",children:M.jsx("div",{className:"stats-grid",children:y.map((e,t)=>{const n=e.icon;return M.jsxs("div",{className:"stat-item",children:[M.jsx("div",{className:"stat-icon",style:{color:e.color},children:M.jsx(n,{size:24})}),M.jsxs("div",{className:"stat-content",children:[M.jsx("div",{className:"stat-value",children:e.value}),M.jsx("div",{className:"stat-title",children:e.title}),M.jsx("div",{className:"stat-change",style:{color:e.color},children:e.change})]})]},e.title)})})})]}),M.jsxs(v.div,{className:"achievements-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},children:[M.jsx("div",{className:"card-header",children:M.jsxs("h3",{className:"card-title",children:[M.jsx(Xe,{className:"card-icon"}),"Achievements"]})}),M.jsx("div",{className:"card-content",children:M.jsx("div",{className:"achievements-grid",children:x.map((e,t)=>M.jsxs("div",{className:"achievement-item "+(e.earned?"earned":"locked"),children:[M.jsx("div",{className:"achievement-icon",children:M.jsx(Xe,{size:20})}),M.jsxs("div",{className:"achievement-content",children:[M.jsx("h4",{className:"achievement-title",children:e.title}),M.jsx("p",{className:"achievement-description",children:e.description})]}),e.earned&&M.jsx("div",{className:"achievement-badge",children:M.jsx(Zt,{size:16})})]},e.title))})})]}),M.jsxs(v.div,{className:"actions-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},children:[M.jsx("div",{className:"card-header",children:M.jsx("h3",{className:"card-title",children:"Quick Actions"})}),M.jsx("div",{className:"card-content",children:M.jsxs("div",{className:"action-buttons",children:[M.jsxs("button",{className:"action-btn",children:[M.jsx(Xt,{size:20}),M.jsx("span",{children:"Settings"})]}),M.jsxs("button",{className:"action-btn",children:[M.jsx(Zt,{size:20}),M.jsx("span",{children:"Security"})]}),M.jsxs("button",{className:"action-btn logout",onClick:m,children:[M.jsx(Lt,{size:20}),M.jsx("span",{children:"Logout"})]})]})})]})]})})]});var w},Nx=({message:e,onSuggestionClick:t,onBuyClick:n,onSellClick:s})=>{const{cardType:i,content:r,stockData:a,suggestions:o}=e,l=()=>M.jsx("div",{className:"saytrix-card text-card-content",children:M.jsx("div",{className:"markdown-content",children:M.jsx(_h,{children:r})})}),c=(()=>{switch(i){case"stock-price":case"stock_data":return(()=>{var e,t,i,r,o,c;if(!a)return l();const u=a.change>=0;return M.jsxs("div",{className:"saytrix-card stock-card-content",children:[M.jsxs("div",{className:"card-header",children:[M.jsxs("div",{className:"stock-symbol",children:[M.jsx(Ke,{className:"symbol-icon"}),M.jsx("span",{children:a.symbol})]}),M.jsxs("div",{className:"stock-change "+(u?"positive":"negative"),children:[u?M.jsx(cn,{}):M.jsx(ln,{}),(null==(e=a.changesPercentage)?void 0:e.toFixed(2))||"N/A","%"]})]}),M.jsxs("div",{className:"stock-price",children:[M.jsx("span",{className:"currency",children:"₹"}),M.jsx("span",{className:"price",children:(null==(t=a.price)?void 0:t.toFixed(2))||"N/A"})]}),M.jsxs("div",{className:"stock-details",children:[M.jsxs("div",{className:"detail-item",children:[M.jsx("span",{className:"label",children:"Change"}),M.jsxs("span",{className:"value "+(u?"positive":"negative"),children:[u?"+":"",(null==(i=a.change)?void 0:i.toFixed(2))||"N/A"]})]}),M.jsxs("div",{className:"detail-item",children:[M.jsx("span",{className:"label",children:"Volume"}),M.jsx("span",{className:"value",children:(null==(r=a.volume)?void 0:r.toLocaleString())||"N/A"})]}),M.jsxs("div",{className:"detail-item",children:[M.jsx("span",{className:"label",children:"Day High"}),M.jsx("span",{className:"value",children:(null==(o=a.dayHigh)?void 0:o.toFixed(2))||"N/A"})]}),M.jsxs("div",{className:"detail-item",children:[M.jsx("span",{className:"label",children:"Day Low"}),M.jsx("span",{className:"value",children:(null==(c=a.dayLow)?void 0:c.toFixed(2))||"N/A"})]})]}),M.jsxs("div",{className:"card-actions",children:[M.jsxs("button",{className:"action-btn buy-btn",onClick:()=>null==n?void 0:n(a),children:[M.jsx(Qe,{})," Buy"]}),M.jsxs("button",{className:"action-btn sell-btn",onClick:()=>null==s?void 0:s(a),children:[M.jsx(He,{})," Sell"]})]})]})})();case"welcome":return M.jsxs("div",{className:"saytrix-card welcome-card-content",children:[M.jsx("div",{className:"card-header",children:M.jsxs("div",{className:"company-name",children:[M.jsx(it,{className:"company-icon"}),M.jsx("span",{children:"Welcome to Saytrix"})]})}),M.jsx("div",{className:"markdown-content",children:M.jsx(_h,{children:r})})]});case"error":return M.jsxs("div",{className:"saytrix-card error-card-content",children:[M.jsx("div",{className:"card-header",children:M.jsxs("div",{className:"company-name",children:[M.jsx($e,{className:"company-icon error-icon"}),M.jsx("span",{children:"Error"})]})}),M.jsx("div",{className:"markdown-content",children:M.jsx(_h,{children:r})})]});default:return l()}})();return M.jsxs(v.div,{className:"saytrix-card-wrapper",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[c,o&&0!==o.length?M.jsx("div",{className:"suggestions-container",children:o.map((e,n)=>M.jsx("button",{className:"suggestion-chip",onClick:()=>null==t?void 0:t(e),children:e},n))}):null]})},Sx=()=>{const{isListening:e,stopListening:t,startListening:n}=Or(),i=s.useCallback(()=>{if(e)t();else{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)return void alert("Voice input is not supported in this browser.");navigator.mediaDevices.getUserMedia({audio:!0}).then(()=>n()).catch(e=>{alert("Microphone access is required for voice input. Please allow it in your browser settings.")})}},[e,n,t]);return M.jsxs("button",{className:"audio-toggle-btn "+(e?"enabled":"disabled"),onClick:i,title:e?"Turn Off Microphone":"Turn On Microphone","aria-label":e?"Turn Off Microphone":"Turn On Microphone",children:[M.jsx(y,{mode:"wait",children:M.jsx(v.span,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.2},children:e?M.jsx(Ot,{}):M.jsx(At,{})},e?"mic-on":"mic-off")}),M.jsx("span",{className:"button-text",children:e?"Mic On":"Mic Off"})]})},Cx=({user:e,theme:t})=>{const[n]=s.useState(["Show me NIFTY performance","What are today's top gainers?","Tell me about RELIANCE stock","Latest market news","Portfolio analysis"]),{messages:i,inputText:r,isProcessing:a,isSpeaking:o,error:c,messagesEndRef:u,setInputText:h,sendMessage:d,clearChat:m,aiMode:p,setError:f,handleModeChange:g,handleBuyStock:x,handleSellStock:b,handleSuggestionClick:w,handleRecentQuestionClick:j}=(()=>{l();const[e,t]=s.useState([]),[n,i]=s.useState(""),[r,a]=s.useState(!1),[o,c]=s.useState(null),[u,h]=s.useState("high"),[d,m]=s.useState("casual"),[p,f]=s.useState(!1),[g,y]=s.useState(!1),v=s.useRef(null),x=s.useRef(null),b=s.useRef(null);s.useEffect(()=>{const e={id:"welcome_"+Date.now(),type:"assistant",content:"🚀 Hello! I'm Saytrix, your AI-powered stock market assistant. I can help you with:\n\n📊 Real-time stock prices and data\n📈 Market analysis and trends\n🏢 Company information and fundamentals\n⭐ Top gainers and losers\n📰 Latest market news\n🎓 Stock market education\n\nWhat would you like to know about the stock market today?\n\n💡 Currently running in demo mode with sample data for showcase",timestamp:new Date,suggestions:["Show me NIFTY performance","What are today's top gainers?","Tell me about RELIANCE stock","Latest market news"],confidence:"high",cardType:"welcome"};t([e]),w(),j()},[]),s.useEffect(()=>{var e;null==(e=v.current)||e.scrollIntoView({behavior:"smooth"})},[e]);const w=()=>{if("webkitSpeechRecognition"in window||"SpeechRecognition"in window){const e=window.SpeechRecognition||window.webkitSpeechRecognition;x.current=new e,x.current.continuous=!1,x.current.interimResults=!1,x.current.lang="en-US",x.current.onstart=()=>{f(!0),c(null)},x.current.onend=()=>{f(!1)},x.current.onresult=async e=>{const t=e.results[0][0].transcript,n=e.results[0][0].confidence;i(t),h(n>.8?"high":n>.6?"medium":"low"),f(!1),setTimeout(async()=>{t.trim()&&await N(t)},300)},x.current.onerror=e=>{f(!1),c("Voice recognition failed. Please try again.")}}},j=()=>{"speechSynthesis"in window&&(b.current=window.speechSynthesis)},k=s.useCallback(async(e=n,s=!1)=>{if(!e.trim()||r)return;i(""),a(!0),c(null);const o={id:Date.now(),type:"user",content:e,timestamp:new Date,confidence:s?u:"high"};t(e=>[...e,o]);try{const n=await Ir(e,"offline_session_id");if(!n.success)throw new Error("Backend response failed");{const e={id:Date.now()+1,type:"assistant",content:n.data.response,timestamp:new Date,suggestions:n.data.suggestions||[],stockData:n.data.stockData,cardType:T(n.data.response,n.data.stockData)};t(t=>[...t,e]),s&&S(e.content)}}catch(l){c("Server connection failed. Using offline mode with limited functionality."),await new Promise(e=>setTimeout(e,500));const n={id:Date.now()+1,type:"assistant",content:M(e),timestamp:new Date,suggestions:I(e),cardType:L(e)};t(e=>[...e,n]),s&&S(n.content)}finally{a(!1)}},[n,r,u]),N=s.useCallback(async e=>{r||(i(e),h(E(e)),k(e,!0))},[k,r]),S=e=>{if(b.current&&e){y(!0);const t=e.replace(/\*\*(.*?)\*\*/g,"$1").replace(/\*(.*?)\*/g,"$1").replace(/₹/g,"rupees").replace(/[•]/g,"").replace(/\n+/g,". ").substring(0,200),n=new SpeechSynthesisUtterance(t);n.rate=.9,n.pitch=1,n.volume=.8,n.onend=()=>{y(!1)},n.onerror=()=>{y(!1)},b.current.cancel(),b.current.speak(n)}},C=s.useCallback(()=>{if(x.current&&!p)try{x.current.start(),setTimeout(()=>{if(x.current&&p)try{x.current.stop()}catch(e){}},1e4)}catch(e){c("Voice recognition failed. Please try again."),f(!1)}},[p]),P=s.useCallback(()=>{if(x.current&&p){try{x.current.stop()}catch(e){}f(!1)}},[p]),E=e=>e.includes("₹")||e.includes("stock")||e.includes("market")?"high":e.includes("might")||e.includes("possibly")||e.includes("maybe")?"medium":"high",T=(e,t)=>t?"stock-price":e&&(e.toLowerCase().includes("buy")||e.toLowerCase().includes("sell"))?"recommendation":"text",L=e=>{const t=e.toLowerCase();return t.includes("price")||t.includes("quote")||t.includes("₹")?"stock-price":"text"},M=e=>{const t=e.toLowerCase();return t.includes("reliance")||t.includes("ril")?"**Reliance Industries (RELIANCE)**\n\n**Current Price:** ₹2,465 *(demo data)*\n\n**Company Overview:**\nReliance Industries is one of India's largest conglomerates with diversified business interests across multiple sectors.\n\n**Key Business Segments:**\n• Petrochemicals and Oil Refining\n• Telecommunications (Jio)\n• Retail (Reliance Retail)\n• Digital Services\n\n**Investment Highlights:**\n• Strong market position in each segment\n• Consistent dividend history\n• Blue-chip investment with long-term growth potential\n• Strategic focus on digital transformation\n\nWould you like to explore its **fundamentals** or **recent performance** in detail?":"**Welcome to Saytrix!** 🚀\n\nI'm your AI-powered trading assistant here to help you navigate the Indian stock markets with confidence.\n\nNote: Currently displaying demo data for illustration purposes.\n\nReady to start your trading journey? Ask me anything about the markets!"},I=e=>{const t=e.toLowerCase();return t.includes("reliance")||t.includes("ril")?["Tell me about TCS","Show HDFC Bank info","Compare IT stocks"]:["Market overview","Top stocks","Sector analysis","Trading tips"]},_=s.useCallback(()=>{t([]),c(null);const e={id:"welcome_"+Date.now(),type:"assistant",content:"🚀 Hello! I'm Saytrix, your AI-powered stock market assistant. I can help you with...",timestamp:new Date,suggestions:["Show me NIFTY performance","What are today's top gainers?"],confidence:"high",cardType:"welcome"};t([e])},[]),D=s.useCallback(e=>{m(e);const n={id:Date.now(),type:"assistant",content:`🤖 **AI Mode Changed**\n\nSwitched to **${e.charAt(0).toUpperCase()+e.slice(1)} Mode**\n\n${"expert"===e?"🎯 Expert mode provides detailed technical analysis and advanced trading insights.":"😊 Casual mode offers friendly, easy-to-understand market information."}`,timestamp:new Date,cardType:"text",suggestions:"expert"===e?["Technical analysis","Market trends","Risk assessment"]:["Stock basics","Simple explanations","Market overview"]};t(e=>[...e,n])},[]);return{messages:e,inputText:n,isProcessing:r,isListening:p,isSpeaking:g,error:o,confidence:u,aiMode:d,messagesEndRef:v,setInputText:i,setMessages:t,sendMessage:s.useCallback(()=>k(n),[k,n]),startListening:C,stopListening:P,clearChat:_,setAiMode:D,setError:c}})(),{isListening:k,startListening:N,stopListening:S}=Or();s.useEffect(()=>{},[k]);const C=s.useCallback(e=>{"Enter"!==e.key||e.shiftKey?"Escape"===e.key?(h(""),f(null)):e.ctrlKey&&"k"===e.key?(e.preventDefault(),m()):e.ctrlKey&&"m"===e.key&&(e.preventDefault(),k?S():N()):(e.preventDefault(),d())},[d,h,f,m,k,S,N]);return M.jsxs("div",{className:`saytrix-page ${t}`,children:[M.jsxs("div",{className:"saytrix-navbar",children:[M.jsx("div",{className:"navbar-left",children:M.jsxs("div",{className:"tradebro-brand",children:[M.jsx(fn,{className:"brand-icon"}),M.jsx("span",{className:"brand-text",children:"TradeBro"})]})}),M.jsx("div",{className:"navbar-center",children:M.jsxs("div",{className:"ai-mode-toggle",children:[M.jsx("button",{className:"mode-btn "+("casual"===p?"active":""),onClick:()=>g("casual"),children:"Casual"}),M.jsx("button",{className:"mode-btn "+("expert"===p?"active":""),onClick:()=>g("expert"),children:"Expert"})]})}),M.jsxs("div",{className:"navbar-right",children:[M.jsx(Sx,{}),M.jsxs("button",{className:"profile-btn",onClick:m,title:"Clear Chat","aria-label":"Clear Chat",children:[M.jsx(Yt,{}),M.jsx("span",{className:"button-text",children:"Clear"})]}),M.jsxs("button",{className:"profile-btn",children:[M.jsx(un,{}),M.jsx("span",{className:"button-text",children:(null==e?void 0:e.name)||"User"})]})]})]}),M.jsxs("div",{className:"saytrix-container",children:[M.jsx("div",{className:"saytrix-layout",children:M.jsxs("div",{className:"saytrix-main",children:[0===i.length&&M.jsxs(v.div,{className:"recent-questions",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[M.jsx("h3",{children:"Recent Questions"}),M.jsx("div",{className:"question-chips",children:n.map((e,t)=>M.jsx(v.button,{className:"question-chip",onClick:()=>j(e),whileHover:{scale:1.02},whileTap:{scale:.98},children:e},t))})]}),M.jsxs("div",{className:"messages-container",children:[M.jsx(y,{children:i.map(e=>M.jsxs(v.div,{className:`message-wrapper ${e.type}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:[M.jsx("div",{className:"message-avatar",children:"user"===e.type?M.jsx(un,{size:20}):M.jsx(ct,{size:20})}),M.jsx("div",{className:"message-content",children:M.jsx(Nx,{message:e,onSuggestionClick:w,onBuyClick:x,onSellClick:b})})]},e.id))}),a&&M.jsxs(v.div,{className:"message-wrapper assistant processing",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[M.jsx("div",{className:"message-avatar",children:M.jsx(ct,{size:20})}),M.jsx("div",{className:"message-content",children:M.jsxs("div",{className:"typing-indicator",children:[M.jsx("span",{}),M.jsx("span",{}),M.jsx("span",{})]})})]}),M.jsx("div",{ref:u})]}),M.jsx(y,{children:c&&M.jsxs(v.div,{className:"error-banner",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},children:[M.jsx($e,{size:16}),M.jsx("span",{children:c}),M.jsx("button",{onClick:()=>f(null),"aria-label":"Dismiss error",children:M.jsx(pn,{size:16})})]})})]})}),M.jsxs(v.div,{className:"floating-input",initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},children:[M.jsxs("div",{className:"input-container",children:[M.jsx("button",{className:"voice-btn",onClick:k?S:N,title:k?"Stop listening":"Start voice input","aria-label":k?"Stop voice input":"Start voice input",children:M.jsx(y,{mode:"wait",children:M.jsx(v.span,{initial:{scale:1},animate:{scale:[1,1.2,1]},exit:{scale:1},transition:{duration:k?1:.2,repeat:k?1/0:0},children:k?M.jsx(Ot,{size:20}):M.jsx(At,{size:20})},k?"mic-listening":"mic-off")})}),M.jsx("input",{type:"text",className:"message-input",placeholder:"Ask Saytrix about stocks, portfolio, or market trends... (Ctrl+M for voice, Ctrl+K to clear)",value:r,onChange:e=>h(e.target.value),onKeyDown:C,autoFocus:!0}),M.jsx("button",{className:"send-btn",onClick:d,disabled:!r.trim()||a,title:"Send message","aria-label":"Send message",children:a?M.jsx(Yt,{size:20,className:"animate-spin"}):M.jsx(Jt,{size:20})})]}),M.jsx(y,{children:o&&M.jsxs(v.div,{className:"voice-indicator speaking",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},transition:{duration:.2},children:[M.jsx(dn,{size:16}),M.jsx("span",{children:"Saytrix is speaking..."})]})})]})]})]})},Px=()=>{const{symbol:e}=h(),t=l(),{portfolioData:n,buyStock:i,isLoading:r}=ra(),{user:a}=yn(),[o,c]=s.useState(null),[u,d]=s.useState(!0),[m,p]=s.useState(null),[f,g]=s.useState(1),[y,x]=s.useState(!1),[b,w]=s.useState(0),[j,k]=s.useState(!1),[N,S]=s.useState(!1),[C,P]=s.useState(!1);s.useEffect(()=>{e&&E()},[e]);const E=async()=>{try{d(!0),p(null);const t={RELIANCE:{name:"Reliance Industries Ltd",price:2847.65,sector:"Energy",industry:"Oil & Gas",description:"Reliance Industries Limited is an Indian multinational conglomerate, headquartered in Mumbai. It has diverse businesses including energy, petrochemicals, natural gas, retail, telecommunications, mass media, and textiles."},TCS:{name:"Tata Consultancy Services",price:4125.8,sector:"Information Technology",industry:"IT Services",description:"Tata Consultancy Services is an Indian multinational information technology services and consulting company headquartered in Mumbai. It is a part of the Tata Group and operates in 149 locations across 46 countries."},HDFCBANK:{name:"HDFC Bank Limited",price:1687.9,sector:"Financial Services",industry:"Banking",description:"HDFC Bank Limited is an Indian banking and financial services company headquartered in Mumbai. It is one of the largest private sector banks in India by assets and market capitalization."},INFY:{name:"Infosys Limited",price:1842.35,sector:"Information Technology",industry:"IT Services",description:"Infosys Limited is an Indian multinational information technology company that provides business consulting, information technology and outsourcing services."},HINDUNILVR:{name:"Hindustan Unilever Ltd",price:2456.7,sector:"FMCG",industry:"Consumer Goods",description:"Hindustan Unilever Limited is an Indian consumer goods company headquartered in Mumbai. It is a subsidiary of the British company Unilever."},ICICIBANK:{name:"ICICI Bank Limited",price:1287.45,sector:"Financial Services",industry:"Banking",description:"ICICI Bank Limited is an Indian multinational bank and financial services company headquartered in Mumbai with its registered office in Vadodara."}}[e.toUpperCase()]||{name:`${e.toUpperCase()} Corporation`,price:1e3+2e3*Math.random(),sector:"Technology",industry:"Software",description:`${e.toUpperCase()} Corporation is a leading company in its sector with strong fundamentals and growth prospects.`},n=t.price,s=(Math.random()-.5)*n*.05,i=s/n*100,r={symbol:e.toUpperCase(),name:t.name,price:n,change:s,changePercent:i,volume:Math.floor(2e6*Math.random())+5e5,marketCap:Math.floor(1e9*n+5e11*Math.random()),pe:Math.floor(25*Math.random())+15,high52w:1.3*n,low52w:.7*n,dayHigh:1.02*n,dayLow:.98*n,avgVolume:Math.floor(1e6*Math.random())+3e5,beta:.8+.8*Math.random(),eps:.05*n,dividend:3*Math.random()+1,sector:t.sector,industry:t.industry,description:t.description,lastUpdated:(new Date).toISOString()};c(r)}catch(t){p("Failed to fetch stock data")}finally{d(!1)}},T=e=>{if(!_||j)return;e.preventDefault(),e.stopPropagation();const t=e.currentTarget.closest(".slide-to-buy");if(!t)return;const n=t.getBoundingClientRect(),s=n.width-52-8;let i=!0;const r=e=>{if(!i)return;e.preventDefault();const t=(e.touches?e.touches[0].clientX:e.clientX)-n.left-26,r=Math.min(Math.max(t/s*100,0),100);w(r)},a=async()=>{i=!1,b>80?(w(100),await L()):w(0),document.removeEventListener("mousemove",r,{passive:!1}),document.removeEventListener("mouseup",a),document.removeEventListener("touchmove",r,{passive:!1}),document.removeEventListener("touchend",a)};document.addEventListener("mousemove",r,{passive:!1}),document.addEventListener("mouseup",a),document.addEventListener("touchmove",r,{passive:!1}),document.addEventListener("touchend",a)},L=async()=>{if(o&&f&&!j){k(!0);try{const e=await i(o.symbol,f,o.price,o);e.success?(We.success(`Successfully bought ${f} shares of ${o.symbol}!`),w(100),setTimeout(()=>{t("/portfolio",{state:{purchasedStock:{symbol:o.symbol,name:o.name,quantity:f,price:o.price,totalCost:f*o.price},showPurchaseSuccess:!0}})},1500)):(We.error(e.message||"Failed to buy stock"),w(0))}catch(e){We.error("Failed to buy stock"),w(0)}finally{k(!1)}}};if(u)return M.jsxs("div",{className:"stock-detail-loading",children:[M.jsx("div",{className:"loading-spinner"}),M.jsx("p",{children:"Loading stock details..."})]});if(m||!o)return M.jsxs("div",{className:"stock-detail-error",children:[M.jsx(Ve,{size:48}),M.jsx("h2",{children:"Error Loading Stock"}),M.jsx("p",{children:m||"Stock not found"}),M.jsx("button",{onClick:()=>t(-1),className:"back-btn",children:"Go Back"})]});const I=f*o.price,_=n.availableCash>=I,D=o.change>=0;return M.jsxs("div",{className:"stock-detail-page",children:[M.jsxs("div",{className:"stock-detail-header",children:[M.jsx("button",{onClick:()=>t(-1),className:"back-button",children:M.jsx(Ye,{})}),M.jsxs("div",{className:"header-info",children:[M.jsx("h1",{children:o.symbol}),M.jsx("p",{children:o.name})]}),M.jsxs("div",{className:"header-actions",children:[M.jsx("button",{onClick:async()=>{P(!0),await E(),P(!1),We.success("Stock data refreshed")},className:"refresh-btn "+(C?"spinning":""),disabled:C,children:M.jsx(Yt,{})}),M.jsx(Sd,{stockData:o,size:"small",variant:"icon",showText:!1})]})]}),M.jsxs("div",{className:"price-section",children:[M.jsxs("div",{className:"current-price",children:[M.jsx("span",{className:"price-value",children:wd(o.price)}),M.jsxs("div",{className:"price-change "+(D?"positive":"negative"),children:[D?M.jsx(cn,{}):M.jsx(ln,{}),M.jsxs("span",{children:[wd(o.change)," (",o.changePercent.toFixed(2),"%)"]})]})]}),M.jsxs("div",{className:"price-range",children:[M.jsxs("div",{className:"range-item",children:[M.jsx("span",{className:"label",children:"Day Range"}),M.jsxs("span",{className:"value",children:[wd(o.dayLow)," - ",wd(o.dayHigh)]})]}),M.jsxs("div",{className:"range-item",children:[M.jsx("span",{className:"label",children:"52W Range"}),M.jsxs("span",{className:"value",children:[wd(o.low52w)," - ",wd(o.high52w)]})]})]})]}),M.jsxs("div",{className:"key-stats",children:[M.jsxs("div",{className:"stat-item",children:[M.jsx(Ue,{className:"stat-icon"}),M.jsxs("div",{className:"stat-info",children:[M.jsx("span",{className:"stat-label",children:"Volume"}),M.jsx("span",{className:"stat-value",children:jd(o.volume)})]})]}),M.jsxs("div",{className:"stat-item",children:[M.jsx($t,{className:"stat-icon"}),M.jsxs("div",{className:"stat-info",children:[M.jsx("span",{className:"stat-label",children:"Market Cap"}),M.jsx("span",{className:"stat-value",children:wd(o.marketCap)})]})]}),M.jsxs("div",{className:"stat-item",children:[M.jsx(Ke,{className:"stat-icon"}),M.jsxs("div",{className:"stat-info",children:[M.jsx("span",{className:"stat-label",children:"P/E Ratio"}),M.jsx("span",{className:"stat-value",children:o.pe})]})]}),M.jsxs("div",{className:"stat-item",children:[M.jsx(ht,{className:"stat-icon"}),M.jsxs("div",{className:"stat-info",children:[M.jsx("span",{className:"stat-label",children:"EPS"}),M.jsx("span",{className:"stat-value",children:wd(o.eps)})]})]})]}),M.jsxs("div",{className:"trading-section",children:[M.jsxs("h3",{children:["Buy ",o.symbol]}),M.jsxs("div",{className:"quantity-section",children:[M.jsx("label",{children:"Quantity"}),M.jsxs("div",{className:"quantity-controls",children:[M.jsx("button",{onClick:()=>g(Math.max(1,f-1)),className:"quantity-btn",children:"-"}),M.jsx("input",{type:"number",value:f,onChange:e=>g(Math.max(1,parseInt(e.target.value)||1)),className:"quantity-input",min:"1"}),M.jsx("button",{onClick:()=>g(f+1),className:"quantity-btn",children:"+"})]})]}),M.jsxs("div",{className:"order-summary",children:[M.jsxs("div",{className:"summary-row",children:[M.jsx("span",{children:"Price per share"}),M.jsx("span",{children:wd(o.price)})]}),M.jsxs("div",{className:"summary-row",children:[M.jsx("span",{children:"Quantity"}),M.jsxs("span",{children:[f," shares"]})]}),M.jsxs("div",{className:"summary-row total",children:[M.jsx("span",{children:"Total Cost"}),M.jsx("span",{children:wd(I)})]}),M.jsxs("div",{className:"summary-row",children:[M.jsx("span",{children:"Available Cash"}),M.jsx("span",{className:_?"positive":"negative",children:wd(n.availableCash)})]})]}),M.jsxs("div",{className:"slide-to-buy-container",children:[!_&&M.jsxs("div",{className:"insufficient-funds-warning",children:[M.jsx(Ve,{}),M.jsx("span",{children:"Insufficient funds"})]}),M.jsxs("div",{className:`slide-to-buy ${_?"":"disabled"} ${j?"processing":""}`,children:[M.jsx("div",{className:"slide-track",style:{background:`linear-gradient(to right, #10B981 ${b}%, #E5E7EB ${b}%)`},children:M.jsx(v.div,{className:"slide-button",style:{left:`${Math.min(b,85)}%`},onMouseDown:_?T:void 0,onTouchStart:_?T:void 0,whileHover:_?{scale:1.05}:{},whileTap:_?{scale:.95}:{},animate:{left:`${Math.min(b,85)}%`},transition:{type:0===b?"spring":"tween",stiffness:300,damping:30,duration:0===b?.5:.1},children:j?M.jsx("div",{className:"loading-spinner small"}):b>80?M.jsx(it,{}):M.jsx(Ge,{})})}),M.jsx("span",{className:"slide-text",children:j?"Processing...":b>80?"Release to Buy!":"Slide to Buy"})]})]})]}),M.jsxs("div",{className:"company-info",children:[M.jsxs("h3",{children:["About ",o.name]}),M.jsxs("div",{className:"company-details",children:[M.jsxs("div",{className:"detail-row",children:[M.jsx("span",{className:"label",children:"Sector"}),M.jsx("span",{className:"value",children:o.sector})]}),M.jsxs("div",{className:"detail-row",children:[M.jsx("span",{className:"label",children:"Industry"}),M.jsx("span",{className:"value",children:o.industry})]}),M.jsxs("div",{className:"detail-row",children:[M.jsx("span",{className:"label",children:"Beta"}),M.jsx("span",{className:"value",children:o.beta})]}),M.jsxs("div",{className:"detail-row",children:[M.jsx("span",{className:"label",children:"Dividend Yield"}),M.jsxs("span",{className:"value",children:[o.dividend,"%"]})]})]}),M.jsx("p",{className:"company-description",children:o.description})]})]})},Ex=()=>M.jsx("div",{className:"legal-page",children:M.jsxs("div",{className:"legal-container",children:[M.jsxs(v.div,{className:"legal-header",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[M.jsxs(u,{to:"/login",className:"back-link",children:[M.jsx(Ye,{size:20}),"Back to Login"]}),M.jsxs("div",{className:"legal-title-section",children:[M.jsx("div",{className:"legal-icon",children:M.jsx(Zt,{size:32})}),M.jsx("h1",{className:"legal-title",children:"Terms of Service"}),M.jsx("p",{className:"legal-subtitle",children:"Please read these terms carefully before using TradeBro"}),M.jsxs("div",{className:"last-updated",children:["Last updated: ","December 15, 2024"]})]})]}),M.jsxs(v.div,{className:"legal-content",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:[M.jsxs("div",{className:"legal-notice",children:[M.jsx($e,{size:20}),M.jsxs("div",{children:[M.jsx("strong",{children:"Important Notice:"})," TradeBro is a virtual trading platform for educational purposes only. No real money or actual securities are involved in any transactions."]})]}),M.jsxs("section",{className:"legal-section",children:[M.jsx("h2",{children:"1. Acceptance of Terms"}),M.jsx("p",{children:'By accessing and using TradeBro ("the Platform", "our Service"), you accept and agree to be bound by the terms and provision of this agreement. If you do not agree to abide by the above, please do not use this service.'}),M.jsx("p",{children:'These Terms of Service ("Terms") govern your use of our virtual stock trading platform operated by TradeBro ("us", "we", or "our").'})]}),M.jsxs("section",{className:"legal-section",children:[M.jsx("h2",{children:"2. Description of Service"}),M.jsx("p",{children:"TradeBro provides:"}),M.jsxs("ul",{children:[M.jsx("li",{children:"Virtual stock trading simulation using real market data"}),M.jsx("li",{children:"Educational tools and resources for learning about stock trading"}),M.jsx("li",{children:"Portfolio management and tracking features"}),M.jsx("li",{children:"AI-powered trading assistant (Saytrix)"}),M.jsx("li",{children:"Market news and analysis"}),M.jsx("li",{children:"Social features for connecting with other virtual traders"})]}),M.jsxs("div",{className:"highlight-box",children:[M.jsx(it,{size:16}),M.jsx("span",{children:"All trading on TradeBro is virtual and for educational purposes only."})]})]}),M.jsxs("section",{className:"legal-section",children:[M.jsx("h2",{children:"3. User Accounts and Registration"}),M.jsx("h3",{children:"3.1 Account Creation"}),M.jsx("p",{children:"To use certain features of our Service, you must register for an account. You may register using your email address or through third-party authentication providers like Google."}),M.jsx("h3",{children:"3.2 Account Security"}),M.jsx("p",{children:"You are responsible for:"}),M.jsxs("ul",{children:[M.jsx("li",{children:"Maintaining the confidentiality of your account credentials"}),M.jsx("li",{children:"All activities that occur under your account"}),M.jsx("li",{children:"Notifying us immediately of any unauthorized use"}),M.jsx("li",{children:"Ensuring your account information is accurate and up-to-date"})]}),M.jsx("h3",{children:"3.3 Account Termination"}),M.jsx("p",{children:"We reserve the right to terminate or suspend your account at any time for violations of these Terms or for any other reason at our sole discretion."})]}),M.jsxs("section",{className:"legal-section",children:[M.jsx("h2",{children:"4. Virtual Trading Rules"}),M.jsx("h3",{children:"4.1 Virtual Currency"}),M.jsx("p",{children:"All users start with virtual currency (₹10,000 by default) for trading purposes. This virtual currency has no real-world value and cannot be exchanged for real money."}),M.jsx("h3",{children:"4.2 Market Data"}),M.jsx("p",{children:"We use real market data from various sources including Financial Modeling Prep (FMP) API. While we strive for accuracy, we do not guarantee the completeness or accuracy of market data."}),M.jsx("h3",{children:"4.3 Trading Limitations"}),M.jsx("p",{children:"Virtual trading is subject to:"}),M.jsxs("ul",{children:[M.jsx("li",{children:"Market hours and trading sessions"}),M.jsx("li",{children:"Available virtual funds in your account"}),M.jsx("li",{children:"Platform maintenance and technical limitations"}),M.jsx("li",{children:"Fair usage policies to prevent system abuse"})]})]}),M.jsxs("section",{className:"legal-section",children:[M.jsx("h2",{children:"5. Prohibited Uses"}),M.jsx("p",{children:"You may not use our Service:"}),M.jsxs("ul",{children:[M.jsx("li",{children:"For any unlawful purpose or to solicit others to unlawful acts"}),M.jsx("li",{children:"To violate any international, federal, provincial, or state regulations, rules, laws, or local ordinances"}),M.jsx("li",{children:"To infringe upon or violate our intellectual property rights or the intellectual property rights of others"}),M.jsx("li",{children:"To harass, abuse, insult, harm, defame, slander, disparage, intimidate, or discriminate"}),M.jsx("li",{children:"To submit false or misleading information"}),M.jsx("li",{children:"To upload or transmit viruses or any other type of malicious code"}),M.jsx("li",{children:"To spam, phish, pharm, pretext, spider, crawl, or scrape"}),M.jsx("li",{children:"For any obscene or immoral purpose"}),M.jsx("li",{children:"To interfere with or circumvent the security features of the Service"})]})]}),M.jsxs("section",{className:"legal-section",children:[M.jsx("h2",{children:"6. Intellectual Property Rights"}),M.jsx("p",{children:"The Service and its original content, features, and functionality are and will remain the exclusive property of TradeBro and its licensors. The Service is protected by copyright, trademark, and other laws."}),M.jsx("p",{children:"Our trademarks and trade dress may not be used in connection with any product or service without our prior written consent."})]}),M.jsxs("section",{className:"legal-section",children:[M.jsx("h2",{children:"7. Privacy Policy"}),M.jsx("p",{children:"Your privacy is important to us. Please review our Privacy Policy, which also governs your use of the Service, to understand our practices."}),M.jsx(u,{to:"/privacy",className:"inline-link",children:"View Privacy Policy →"})]}),M.jsxs("section",{className:"legal-section",children:[M.jsx("h2",{children:"8. Disclaimers and Limitations"}),M.jsx("h3",{children:"8.1 Educational Purpose"}),M.jsxs("div",{className:"warning-box",children:[M.jsx($e,{size:16}),M.jsxs("div",{children:[M.jsx("strong",{children:"Important:"})," TradeBro is for educational purposes only. Virtual trading results do not guarantee real trading success. Past performance does not indicate future results."]})]}),M.jsx("h3",{children:"8.2 No Financial Advice"}),M.jsx("p",{children:"The information provided on TradeBro is not intended as financial advice. We do not provide investment recommendations or advice. Always consult with qualified financial professionals before making real investment decisions."}),M.jsx("h3",{children:"8.3 Service Availability"}),M.jsx("p",{children:"We do not guarantee that the Service will be available at all times. We may experience hardware, software, or other problems or need to perform maintenance related to the Service."})]}),M.jsxs("section",{className:"legal-section",children:[M.jsx("h2",{children:"9. Limitation of Liability"}),M.jsx("p",{children:"In no event shall TradeBro, nor its directors, employees, partners, agents, suppliers, or affiliates, be liable for any indirect, incidental, special, consequential, or punitive damages, including without limitation, loss of profits, data, use, goodwill, or other intangible losses, resulting from your use of the Service."})]}),M.jsxs("section",{className:"legal-section",children:[M.jsx("h2",{children:"10. Changes to Terms"}),M.jsx("p",{children:"We reserve the right, at our sole discretion, to modify or replace these Terms at any time. If a revision is material, we will try to provide at least 30 days notice prior to any new terms taking effect."}),M.jsx("p",{children:"What constitutes a material change will be determined at our sole discretion. By continuing to access or use our Service after those revisions become effective, you agree to be bound by the revised terms."})]}),M.jsxs("section",{className:"legal-section",children:[M.jsx("h2",{children:"11. Contact Information"}),M.jsx("p",{children:"If you have any questions about these Terms of Service, please contact us:"}),M.jsxs("div",{className:"contact-info",children:[M.jsxs("p",{children:[M.jsx("strong",{children:"Email:"})," legal@tradebro.com"]}),M.jsxs("p",{children:[M.jsx("strong",{children:"Address:"})," TradeBro Legal Department",M.jsx("br",{}),"123 Trading Street",M.jsx("br",{}),"Financial District, Mumbai 400001",M.jsx("br",{}),"India"]})]})]}),M.jsxs("div",{className:"legal-footer",children:[M.jsx("p",{children:"By using TradeBro, you acknowledge that you have read, understood, and agree to be bound by these Terms of Service."}),M.jsxs("div",{className:"legal-actions",children:[M.jsx(u,{to:"/privacy",className:"btn btn-outline",children:"Privacy Policy"}),M.jsx(u,{to:"/login",className:"btn btn-primary",children:"Back to Login"})]})]})]})]})}),Tx=()=>M.jsx("div",{className:"legal-page",children:M.jsxs("div",{className:"legal-container",children:[M.jsxs(v.div,{className:"legal-header",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[M.jsxs(u,{to:"/login",className:"back-link",children:[M.jsx(Ye,{size:20}),"Back to Login"]}),M.jsxs("div",{className:"legal-title-section",children:[M.jsx("div",{className:"legal-icon",children:M.jsx(Et,{size:32})}),M.jsx("h1",{className:"legal-title",children:"Privacy Policy"}),M.jsx("p",{className:"legal-subtitle",children:"How we collect, use, and protect your personal information"}),M.jsxs("div",{className:"last-updated",children:["Last updated: ","JULY 22, 2025"]})]})]}),M.jsxs(v.div,{className:"legal-content",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:[M.jsxs("div",{className:"privacy-commitment",children:[M.jsx(Zt,{size:20}),M.jsxs("div",{children:[M.jsx("strong",{children:"Our Commitment:"})," We are committed to protecting your privacy and ensuring the security of your personal information. This Privacy Policy explains how we collect, use, and safeguard your data."]})]}),M.jsxs("section",{className:"legal-section",children:[M.jsxs("h2",{children:[M.jsx(ut,{size:20})," 1. Information We Collect"]}),M.jsx("h3",{children:"1.1 Personal Information"}),M.jsx("p",{children:"When you register for TradeBro, we may collect:"}),M.jsxs("ul",{children:[M.jsxs("li",{children:[M.jsx("strong",{children:"Account Information:"})," Name, email address, username"]}),M.jsxs("li",{children:[M.jsx("strong",{children:"Profile Information:"})," Profile picture, bio, trading preferences"]}),M.jsxs("li",{children:[M.jsx("strong",{children:"Authentication Data:"})," Password (encrypted), OAuth tokens from third-party providers"]}),M.jsxs("li",{children:[M.jsx("strong",{children:"Contact Information:"})," Email address for communications"]})]}),M.jsx("h3",{children:"1.2 Trading and Usage Data"}),M.jsx("p",{children:"We collect information about your use of our platform:"}),M.jsxs("ul",{children:[M.jsxs("li",{children:[M.jsx("strong",{children:"Virtual Trading Activity:"})," Buy/sell orders, portfolio performance, trading history"]}),M.jsxs("li",{children:[M.jsx("strong",{children:"Platform Usage:"})," Pages visited, features used, time spent on platform"]}),M.jsxs("li",{children:[M.jsx("strong",{children:"Device Information:"})," IP address, browser type, device type, operating system"]}),M.jsxs("li",{children:[M.jsx("strong",{children:"Preferences:"})," Theme settings, notification preferences, dashboard customizations"]})]}),M.jsx("h3",{children:"1.3 Automatically Collected Information"}),M.jsxs("ul",{children:[M.jsxs("li",{children:[M.jsx("strong",{children:"Cookies and Tracking:"})," Session cookies, preference cookies, analytics cookies"]}),M.jsxs("li",{children:[M.jsx("strong",{children:"Log Data:"})," Server logs, error logs, access logs"]}),M.jsxs("li",{children:[M.jsx("strong",{children:"Analytics Data:"})," User behavior, feature usage, performance metrics"]})]})]}),M.jsxs("section",{className:"legal-section",children:[M.jsxs("h2",{children:[M.jsx(gt,{size:20})," 2. How We Use Your Information"]}),M.jsx("h3",{children:"2.1 Service Provision"}),M.jsxs("ul",{children:[M.jsx("li",{children:"Create and manage your account"}),M.jsx("li",{children:"Process virtual trading transactions"}),M.jsx("li",{children:"Provide personalized trading experience"}),M.jsx("li",{children:"Display portfolio and performance data"}),M.jsx("li",{children:"Enable social features and leaderboards"})]}),M.jsx("h3",{children:"2.2 Communication"}),M.jsxs("ul",{children:[M.jsx("li",{children:"Send account-related notifications"}),M.jsx("li",{children:"Provide customer support"}),M.jsx("li",{children:"Send educational content and market updates"}),M.jsx("li",{children:"Notify about platform updates and new features"})]}),M.jsx("h3",{children:"2.3 Platform Improvement"}),M.jsxs("ul",{children:[M.jsx("li",{children:"Analyze usage patterns to improve our service"}),M.jsx("li",{children:"Develop new features and functionality"}),M.jsx("li",{children:"Ensure platform security and prevent fraud"}),M.jsx("li",{children:"Conduct research and analytics"})]}),M.jsx("h3",{children:"2.4 Legal and Safety"}),M.jsxs("ul",{children:[M.jsx("li",{children:"Comply with legal obligations"}),M.jsx("li",{children:"Protect against fraud and abuse"}),M.jsx("li",{children:"Enforce our Terms of Service"}),M.jsx("li",{children:"Respond to legal requests"})]})]}),M.jsxs("section",{className:"legal-section",children:[M.jsxs("h2",{children:[M.jsx(hn,{size:20})," 3. Information Sharing and Disclosure"]}),M.jsx("h3",{children:"3.1 We Do Not Sell Your Data"}),M.jsxs("div",{className:"highlight-box",children:[M.jsx(Zt,{size:16}),M.jsx("span",{children:"We do not sell, rent, or trade your personal information to third parties for marketing purposes."})]}),M.jsx("h3",{children:"3.2 Limited Sharing"}),M.jsx("p",{children:"We may share your information only in these circumstances:"}),M.jsxs("ul",{children:[M.jsxs("li",{children:[M.jsx("strong",{children:"Service Providers:"})," Third-party services that help us operate our platform (hosting, analytics, email)"]}),M.jsxs("li",{children:[M.jsx("strong",{children:"Legal Requirements:"})," When required by law, court order, or government request"]}),M.jsxs("li",{children:[M.jsx("strong",{children:"Safety and Security:"})," To protect the rights, property, or safety of TradeBro, our users, or others"]}),M.jsxs("li",{children:[M.jsx("strong",{children:"Business Transfers:"})," In connection with a merger, acquisition, or sale of assets"]})]}),M.jsx("h3",{children:"3.3 Public Information"}),M.jsx("p",{children:"Some information may be publicly visible:"}),M.jsxs("ul",{children:[M.jsx("li",{children:"Username and profile picture (if you choose to make them public)"}),M.jsx("li",{children:"Leaderboard rankings (anonymized or with consent)"}),M.jsx("li",{children:"Public posts or comments in community features"})]})]}),M.jsxs("section",{className:"legal-section",children:[M.jsx("h2",{children:"4. Data Security"}),M.jsx("h3",{children:"4.1 Security Measures"}),M.jsx("p",{children:"We implement industry-standard security measures:"}),M.jsxs("ul",{children:[M.jsxs("li",{children:[M.jsx("strong",{children:"Encryption:"})," Data encrypted in transit and at rest"]}),M.jsxs("li",{children:[M.jsx("strong",{children:"Access Controls:"})," Limited access to personal data on need-to-know basis"]}),M.jsxs("li",{children:[M.jsx("strong",{children:"Secure Infrastructure:"})," Secure servers and databases"]}),M.jsxs("li",{children:[M.jsx("strong",{children:"Regular Audits:"})," Security assessments and vulnerability testing"]}),M.jsxs("li",{children:[M.jsx("strong",{children:"Authentication:"})," Secure login with optional two-factor authentication"]})]}),M.jsx("h3",{children:"4.2 Data Retention"}),M.jsx("p",{children:"We retain your information:"}),M.jsxs("ul",{children:[M.jsx("li",{children:"As long as your account is active"}),M.jsx("li",{children:"As necessary to provide our services"}),M.jsx("li",{children:"To comply with legal obligations"}),M.jsx("li",{children:"To resolve disputes and enforce agreements"})]})]}),M.jsxs("section",{className:"legal-section",children:[M.jsx("h2",{children:"5. Your Privacy Rights"}),M.jsx("h3",{children:"5.1 Access and Control"}),M.jsx("p",{children:"You have the right to:"}),M.jsxs("ul",{children:[M.jsxs("li",{children:[M.jsx("strong",{children:"Access:"})," Request a copy of your personal data"]}),M.jsxs("li",{children:[M.jsx("strong",{children:"Update:"})," Correct or update your information"]}),M.jsxs("li",{children:[M.jsx("strong",{children:"Delete:"})," Request deletion of your account and data"]}),M.jsxs("li",{children:[M.jsx("strong",{children:"Export:"})," Download your trading data and history"]}),M.jsxs("li",{children:[M.jsx("strong",{children:"Opt-out:"})," Unsubscribe from marketing communications"]})]}),M.jsx("h3",{children:"5.2 Cookie Preferences"}),M.jsx("p",{children:"You can control cookies through:"}),M.jsxs("ul",{children:[M.jsx("li",{children:"Browser settings to block or delete cookies"}),M.jsx("li",{children:"Our cookie preference center"}),M.jsx("li",{children:"Opting out of analytics tracking"})]}),M.jsx("h3",{children:"5.3 Account Settings"}),M.jsx("p",{children:"Manage your privacy through your account settings:"}),M.jsxs("ul",{children:[M.jsx("li",{children:"Profile visibility settings"}),M.jsx("li",{children:"Notification preferences"}),M.jsx("li",{children:"Data sharing preferences"}),M.jsx("li",{children:"Communication settings"})]})]}),M.jsxs("section",{className:"legal-section",children:[M.jsx("h2",{children:"6. Third-Party Services"}),M.jsx("h3",{children:"6.1 OAuth Providers"}),M.jsx("p",{children:"When you sign in with Google or other OAuth providers:"}),M.jsxs("ul",{children:[M.jsx("li",{children:"We receive limited profile information (name, email, profile picture)"}),M.jsx("li",{children:"We do not access your other accounts or data"}),M.jsx("li",{children:"You can revoke access at any time through the provider's settings"})]}),M.jsx("h3",{children:"6.2 Market Data Providers"}),M.jsx("p",{children:"We use third-party APIs for market data:"}),M.jsxs("ul",{children:[M.jsx("li",{children:"Financial Modeling Prep (FMP) for stock prices and data"}),M.jsx("li",{children:"These providers may have their own privacy policies"}),M.jsx("li",{children:"We do not share your personal information with data providers"})]}),M.jsx("h3",{children:"6.3 Analytics Services"}),M.jsx("p",{children:"We may use analytics services to improve our platform:"}),M.jsxs("ul",{children:[M.jsx("li",{children:"Google Analytics (anonymized data)"}),M.jsx("li",{children:"Error tracking services"}),M.jsx("li",{children:"Performance monitoring tools"})]})]}),M.jsxs("section",{className:"legal-section",children:[M.jsx("h2",{children:"7. Children's Privacy"}),M.jsx("p",{children:"TradeBro is not intended for children under 13 years of age. We do not knowingly collect personal information from children under 13. If you are a parent or guardian and believe your child has provided us with personal information, please contact us."}),M.jsx("p",{children:"Users between 13-18 years old should have parental consent before using our service."})]}),M.jsxs("section",{className:"legal-section",children:[M.jsx("h2",{children:"8. International Data Transfers"}),M.jsx("p",{children:"Your information may be transferred to and processed in countries other than your own. We ensure appropriate safeguards are in place to protect your personal information in accordance with this Privacy Policy."})]}),M.jsxs("section",{className:"legal-section",children:[M.jsx("h2",{children:"9. Changes to Privacy Policy"}),M.jsx("p",{children:"We may update this Privacy Policy from time to time. We will notify you of any material changes by:"}),M.jsxs("ul",{children:[M.jsx("li",{children:"Posting the new Privacy Policy on this page"}),M.jsx("li",{children:"Sending an email notification"}),M.jsx("li",{children:"Providing notice through our platform"})]}),M.jsx("p",{children:"Your continued use of our service after any changes constitutes acceptance of the new Privacy Policy."})]}),M.jsxs("section",{className:"legal-section",children:[M.jsx("h2",{children:"10. Contact Us"}),M.jsx("p",{children:"If you have questions about this Privacy Policy or our privacy practices, please contact us:"}),M.jsxs("div",{className:"contact-info",children:[M.jsxs("p",{children:[M.jsx("strong",{children:"Privacy Officer:"})," privacy@tradebro.com"]}),M.jsxs("p",{children:[M.jsx("strong",{children:"Data Protection:"})," dpo@tradebro.com"]}),M.jsxs("p",{children:[M.jsx("strong",{children:"General Support:"})," support@tradebro.com"]}),M.jsxs("p",{children:[M.jsx("strong",{children:"Address:"})," TradeBro Privacy Department",M.jsx("br",{}),"123 Trading Street",M.jsx("br",{}),"Financial District, Mumbai 400001",M.jsx("br",{}),"India"]})]})]}),M.jsxs("div",{className:"legal-footer",children:[M.jsx("p",{children:"We are committed to protecting your privacy and will continue to update our practices to ensure your data remains secure."}),M.jsxs("div",{className:"legal-actions",children:[M.jsx(u,{to:"/terms",className:"btn btn-outline",children:"Terms of Service"}),M.jsx(u,{to:"/login",className:"btn btn-primary",children:"Back to Login"})]})]})]})]})}),Lx=()=>{const[e,t]=s.useState(""),[n,i]=s.useState(!1),[r,a]=s.useState(!1),[o,l]=s.useState("");return r?M.jsx("div",{className:"auth-page",children:M.jsxs(v.div,{className:"auth-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[M.jsxs("div",{className:"auth-header",children:[M.jsxs("div",{className:"auth-logo",children:[M.jsx("div",{className:"auth-logo-icon",children:"📈"}),M.jsx("h1",{className:"auth-logo-text",children:"TradeBro"})]}),M.jsxs("div",{children:[M.jsx("h2",{className:"auth-title",children:"Check Your Email"}),M.jsxs("p",{className:"auth-subtitle",children:["We've sent password reset instructions to ",e]})]})]}),M.jsxs("div",{className:"success-message",children:[M.jsx(it,{size:48}),M.jsx("p",{children:"If an account with that email exists, you'll receive a password reset link shortly."})]}),M.jsx("div",{className:"auth-footer",children:M.jsxs("p",{children:["Remember your password?"," ",M.jsx(u,{to:"/login",children:"Back to Sign In"})]})})]})}):M.jsx("div",{className:"auth-page",children:M.jsxs(v.div,{className:"auth-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[M.jsxs("div",{className:"auth-header",children:[M.jsxs("div",{className:"auth-logo",children:[M.jsx("div",{className:"auth-logo-icon",children:"📈"}),M.jsx("h1",{className:"auth-logo-text",children:"TradeBro"})]}),M.jsxs("div",{children:[M.jsx("h2",{className:"auth-title",children:"Forgot Password?"}),M.jsx("p",{className:"auth-subtitle",children:"Enter your email address and we'll send you a link to reset your password"})]})]}),M.jsxs("form",{onSubmit:async t=>{if(t.preventDefault(),e.trim())if(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)){i(!0),l("");try{const t="https://s89-satya-capstone-tradebro.onrender.com",n=await fetch(`${t}/api/auth/forgot-password`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})}),s=await n.json();n.ok&&s.success?(a(!0),We.success("Password reset instructions sent to your email")):(l(s.message||"Failed to send reset email"),We.error(s.message||"Failed to send reset email"))}catch(n){l("Network error. Please try again."),We.error("Network error. Please check your connection.")}finally{i(!1)}}else l("Please enter a valid email address");else l("Email is required")},className:"auth-form",children:[o&&M.jsxs("div",{className:"error-message",children:[M.jsx(Ve,{size:16}),M.jsx("span",{children:o})]}),M.jsxs("div",{className:"form-group",children:[M.jsxs("label",{className:"form-label",children:[M.jsx(Mt,{size:16}),"Email Address"]}),M.jsx("input",{type:"email",value:e,onChange:e=>{t(e.target.value),o&&l("")},className:"form-input "+(o?"form-input-error":""),placeholder:"Enter your email",disabled:n,autoComplete:"email",required:!0})]}),M.jsx("button",{type:"submit",className:"auth-submit",disabled:n,children:n?M.jsx("div",{className:"loading-spinner"}):M.jsxs(M.Fragment,{children:["Send Reset Link",M.jsx(Ge,{size:16})]})})]}),M.jsx("div",{className:"auth-footer",children:M.jsxs("p",{children:["Remember your password?"," ",M.jsx(u,{to:"/login",children:"Back to Sign In"})]})})]})})},Mx=()=>M.jsx("div",{className:"page",children:M.jsx("div",{className:"page-container",children:M.jsxs(v.div,{className:"not-found-container",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},style:{textAlign:"center",padding:"var(--space-16) var(--space-4)",minHeight:"60vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[M.jsx("div",{style:{fontSize:"6rem",marginBottom:"var(--space-6)"},children:"📈"}),M.jsx("h1",{style:{fontSize:"var(--font-size-4xl)",marginBottom:"var(--space-4)",color:"var(--text-primary)"},children:"404 - Page Not Found"}),M.jsx("p",{style:{fontSize:"var(--font-size-lg)",color:"var(--text-secondary)",marginBottom:"var(--space-8)",maxWidth:"500px"},children:"Oops! The page you're looking for doesn't exist. It might have been moved, deleted, or you entered the wrong URL."}),M.jsxs("div",{style:{display:"flex",gap:"var(--space-4)",flexWrap:"wrap",justifyContent:"center"},children:[M.jsxs(u,{to:"/",className:"btn btn-primary btn-lg",children:[M.jsx(jt,{size:20}),"Go Home"]}),M.jsxs("button",{onClick:()=>window.history.back(),className:"btn btn-secondary btn-lg",children:[M.jsx(Ye,{size:20}),"Go Back"]})]})]})})}),Ix=({children:e,isAuthenticated:t,loading:n,user:s})=>{const i=c();return n?M.jsxs("div",{className:"loading-container",children:[M.jsx("div",{className:"loading-spinner lg"}),M.jsx("p",{className:"loading-text",children:"Verifying authentication..."})]}):t?M.jsx(aa,{user:s,children:e}):(localStorage.setItem("redirectAfterLogin",i.pathname),M.jsx(p,{to:"/login",replace:!0}))},_x=({children:e,isAuthenticated:t})=>{const{hasVisitedLanding:n}=Ta();if(t){const e=localStorage.getItem("redirectAfterLogin");return localStorage.removeItem("redirectAfterLogin"),M.jsx(p,{to:e||"/dashboard",replace:!0})}return n||"/"===window.location.pathname?e:M.jsx(p,{to:"/",replace:!0})},Dx={initial:{opacity:0,y:20},in:{opacity:1,y:0},out:{opacity:0,y:-20}},Ax={type:"tween",ease:"anticipate",duration:.4},Ox=({isAuthenticated:e=!1,user:t=null,loading:n=!1,onLogin:s,onSignup:i,onLogout:r,onUpdateProfile:a,theme:o,toggleTheme:l})=>{const u=c();return M.jsx(y,{mode:"wait",children:M.jsx(v.div,{initial:"initial",animate:"in",exit:"out",variants:Dx,transition:Ax,children:M.jsxs(d,{children:[M.jsx(m,{path:"/",element:e?M.jsx(p,{to:"/dashboard"}):M.jsx(zh,{})}),M.jsx(m,{path:"/login",element:M.jsx(_x,{isAuthenticated:e,children:M.jsx(Vh,{onLogin:s})})}),M.jsx(m,{path:"/signup",element:M.jsx(_x,{isAuthenticated:e,children:M.jsx($h,{onSignup:i})})}),M.jsx(m,{path:"/forgot-password",element:M.jsx(_x,{isAuthenticated:e,children:M.jsx(Lx,{})})}),M.jsx(m,{path:"/terms",element:M.jsx(Ix,{isAuthenticated:e,loading:n,user:t,children:M.jsx(Ex,{})})}),M.jsx(m,{path:"/privacy",element:M.jsx(Ix,{isAuthenticated:e,loading:n,user:t,children:M.jsx(Tx,{})})}),M.jsx(m,{path:"/dashboard",element:M.jsx(Ix,{isAuthenticated:e,loading:n,user:t,children:M.jsx(Ed,{user:t,theme:o,onLogin:s})})}),M.jsx(m,{path:"/portfolio",element:M.jsx(Ix,{isAuthenticated:e,loading:n,user:t,children:M.jsx(Ld,{user:t,theme:o})})}),M.jsx(m,{path:"/trading",element:M.jsx(Ix,{isAuthenticated:e,loading:n,user:t,children:M.jsx(Id,{user:t,theme:o})})}),M.jsx(m,{path:"/charts",element:M.jsx(Ix,{isAuthenticated:e,loading:n,user:t,children:M.jsx(gx,{user:t,theme:o})})}),M.jsx(m,{path:"/watchlist",element:M.jsx(Ix,{isAuthenticated:e,loading:n,user:t,children:M.jsx(yx,{user:t,theme:o})})}),M.jsx(m,{path:"/orders",element:M.jsx(Ix,{isAuthenticated:e,loading:n,user:t,children:M.jsx(vx,{user:t,theme:o})})}),M.jsx(m,{path:"/history",element:M.jsx(Ix,{isAuthenticated:e,loading:n,user:t,children:M.jsx(xx,{user:t,theme:o})})}),M.jsx(m,{path:"/news",element:M.jsx(Ix,{isAuthenticated:e,loading:n,user:t,children:M.jsx(bx,{user:t,theme:o})})}),M.jsx(m,{path:"/notifications",element:M.jsx(Ix,{isAuthenticated:e,loading:n,user:t,children:M.jsx(wx,{user:t,theme:o})})}),M.jsx(m,{path:"/saytrix",element:M.jsx(Ix,{isAuthenticated:e,loading:n,user:t,children:M.jsx(Cx,{user:t,theme:o})})}),M.jsx(m,{path:"/settings",element:M.jsx(Ix,{isAuthenticated:e,loading:n,user:t,children:M.jsx(jx,{user:t,theme:o,toggleTheme:l,onLogout:r})})}),M.jsx(m,{path:"/profile",element:M.jsx(Ix,{isAuthenticated:e,loading:n,user:t,children:M.jsx(kx,{})})}),M.jsx(m,{path:"/stock/:symbol",element:M.jsx(Ix,{isAuthenticated:e,loading:n,user:t,children:M.jsx(Px,{user:t,theme:o})})}),M.jsx(m,{path:"/home",element:M.jsx(p,{to:"/",replace:!0})}),M.jsx(m,{path:"/app",element:M.jsx(p,{to:"/dashboard",replace:!0})}),M.jsx(m,{path:"/trade",element:M.jsx(p,{to:"/trading",replace:!0})}),M.jsx(m,{path:"/stocks",element:M.jsx(p,{to:"/charts",replace:!0})}),M.jsx(m,{path:"/chat",element:M.jsx(p,{to:"/saytrix",replace:!0})}),M.jsx(m,{path:"/ai",element:M.jsx(p,{to:"/saytrix",replace:!0})}),M.jsx(m,{path:"*",element:e?M.jsx(Mx,{}):M.jsx(p,{to:"/login",replace:!0})})]})},u.pathname)})};class Rx extends r.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){}render(){return this.state.hasError?M.jsx("div",{className:"error-boundary",children:M.jsxs("div",{className:"error-content",children:[M.jsx("h2",{children:"Something went wrong"}),M.jsx("p",{children:"We're sorry, but something unexpected happened."}),M.jsx("button",{onClick:()=>window.location.reload(),className:"retry-button",children:"Reload Page"})]})}):this.props.children}}const Fx=s.lazy(()=>he(()=>import("./PerformanceMonitor-BdI5HPfm.js"),__vite__mapDeps([0,1,2,3]),import.meta.url));function Bx(){const[e,t]=s.useState(null),[n,i]=s.useState(!1),[r,a]=s.useState("light"),[o,u]=s.useState(!0),[h,d]=s.useState(!1),{user:m,isAuthenticated:p,loading:f,login:g,logout:y}=yn();s.useEffect(()=>{t(m),i(p),u(f)},[m,p,f]),Ca("App");const{isGlobalSearchOpen:v,handleGlobalSearch:x,closeGlobalSearch:b}=(()=>{const[e,t]=s.useState(!1),n=l(),i=s.useCallback(e=>{if((e.ctrlKey||e.metaKey)&&"k"===e.key){e.preventDefault(),e.stopPropagation();const n=document.activeElement,s=n&&("INPUT"===n.tagName||"TEXTAREA"===n.tagName||"true"===n.contentEditable),i=n&&n.classList.contains("search-input");if(s&&!i)return;t(!0)}},[]),r=s.useCallback(n=>{"Escape"===n.key&&e&&t(!1)},[e]);s.useEffect(()=>(document.addEventListener("keydown",i),document.addEventListener("keydown",r),()=>{document.removeEventListener("keydown",i),document.removeEventListener("keydown",r)}),[i,r]);const a=s.useCallback((e,s="stocks")=>{if(e.trim()){switch(s){case"stocks":default:n(`/trading?search=${encodeURIComponent(e)}`);break;case"news":n(`/news?search=${encodeURIComponent(e)}`);break;case"orders":n(`/orders?search=${encodeURIComponent(e)}`)}t(!1)}},[n]),o=s.useCallback(()=>{t(!1)},[]);return{isGlobalSearchOpen:e,setIsGlobalSearchOpen:t,handleGlobalSearch:a,closeGlobalSearch:o}})(),{orderModalState:w,closeOrderModal:j}=ka(),[k,N]=s.useState({isOpen:!1,orderData:null,stockData:null,orderSummary:null,profitLossEstimate:null,onConfirm:null,isProcessing:!1}),S=s.useCallback(e=>{N({isOpen:!0,...e,isProcessing:!1})},[]),C=s.useCallback(()=>{N(e=>e.isOpen?{...e,isOpen:!1,isProcessing:!1}:e)},[]),P=s.useRef(null),E=s.useCallback(async()=>{const e=P.current;if(e){N(e=>({...e,isProcessing:!0}));try{await e(),setTimeout(()=>{C()},2e3)}catch(t){N(e=>({...e,isProcessing:!1}))}}},[C]);s.useEffect(()=>{P.current=k.onConfirm},[k.onConfirm]);const T=c(),L=l();s.useEffect(()=>{if(f)return;const e=new URLSearchParams(T.search),t=e.get("token"),n=e.get("user"),s=e.get("error");if(s)return We.error(`Login failed: ${s.replace(/_/g," ")}`),void L(T.pathname,{replace:!0});if(t&&n)try{const e=JSON.parse(decodeURIComponent(n));g(e,t),We.success("Welcome back!"),Pa.initialize(),L("/dashboard",{replace:!0})}catch(i){y(),We.error("Failed to process login data."),L("/login",{replace:!0})}else!p&&localStorage.getItem("token");o&&u(!1)},[T.search,L,g,y,f,p,o]),s.useEffect(()=>{const e=localStorage.getItem("theme")||"light";a(e),document.documentElement.setAttribute("data-theme",e)},[]);const I=s.useCallback(()=>{const e="light"===r?"dark":"light";a(e),localStorage.setItem("theme",e),document.documentElement.setAttribute("data-theme",e)},[r]),_=s.useCallback((e,t)=>{g(e,t),We.success("Welcome back!")},[g]),D=s.useCallback(()=>{y(),We.info("Logged out successfully"),L("/login")},[y,L]),A=s.useCallback((e,t)=>{g(e,t),We.success("Account created successfully!")},[g]);return o?M.jsxs("div",{className:"loading-container",children:[M.jsx("div",{className:"loading-spinner lg"}),M.jsx("p",{className:"loading-text",children:"Loading TradeBro..."})]}):M.jsx(Rx,{children:M.jsx(La,{children:M.jsxs("div",{className:"app",children:[M.jsx(zx,{isAuthenticated:n,user:e,loading:o,theme:r,onLogin:_,onLogout:D,onSignup:A,onUpdateProfile:e=>{const t=localStorage.getItem("token");g(e,t),We.success("Profile updated successfully!")},toggleTheme:I,isGlobalSearchOpen:v,handleGlobalSearch:x,closeGlobalSearch:b,sidebarCollapsed:h,setSidebarCollapsed:d,orderModalState:w,closeOrderModal:j,handleShowConfirmation:S,confirmationModalState:k,handleCloseConfirmation:C,handleConfirmOrder:E}),M.jsx(Me,{position:"top-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:r,toastStyle:{background:"dark"===r?"var(--bg-secondary)":"#FFFFFF",color:"dark"===r?"#F9FAFB":"#111827"}}),M.jsx(s.Suspense,{fallback:null,children:M.jsx(Fx,{enabled:!1})})]})})})}console.log=()=>{},console.warn=()=>{};const zx=s.memo(function({isAuthenticated:e,user:t,loading:n,theme:s,onLogin:i,onLogout:r,onSignup:a,onUpdateProfile:o,toggleTheme:l,isGlobalSearchOpen:u,handleGlobalSearch:h,closeGlobalSearch:d,sidebarCollapsed:m,setSidebarCollapsed:p,orderModalState:f,closeOrderModal:g,handleShowConfirmation:y,confirmationModalState:v,handleCloseConfirmation:x,handleConfirmOrder:b}){const w=c(),j="/"===w.pathname,k="/login"===w.pathname||"/signup"===w.pathname||"/forgot-password"===w.pathname;return M.jsxs(M.Fragment,{children:[M.jsx(Hr,{isCollapsed:m,setIsCollapsed:p}),M.jsx("main",{className:`${j||k?"main-content-full":"main-content"} ${!e||j||k?"":m?"sidebar-collapsed":"with-sidebar"}`,children:M.jsx(Ox,{isAuthenticated:e,user:t,loading:n,onLogin:i,onSignup:a,onLogout:r,onUpdateProfile:o,theme:s,toggleTheme:l})}),M.jsx(qr,{isAuthenticated:e,user:t}),M.jsx(ea,{isOpen:u,onClose:d,onSearch:h}),M.jsx(Me,{position:"top-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"dark"===s?"dark":"light",toastStyle:{background:"dark"===s?"var(--bg-secondary)":"var(--bg-elevated)",color:"var(--text-primary)",border:"1px solid var(--border-primary)",borderRadius:"var(--radius-lg)",boxShadow:"var(--shadow-lg)"}}),!j&&!k&&M.jsxs(M.Fragment,{children:[M.jsx(ta,{}),M.jsx(na,{})]}),M.jsx(ba,{isOpen:f.isOpen,onClose:g,stockData:f.stockData,initialOrderType:f.orderType,onOrderPlaced:g,onShowConfirmation:y}),M.jsx(wa,{isOpen:v.isOpen,onClose:x,onConfirm:b,orderData:v.orderData,stockData:v.stockData,orderSummary:v.orderSummary,profitLossEstimate:v.profitLossEstimate,isProcessing:v.isProcessing})]})});function Wx(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Ux=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")(),Vx=()=>Math.random().toString(36).substring(7).split("").join("."),$x={INIT:`@@redux/INIT${Vx()}`,REPLACE:`@@redux/REPLACE${Vx()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Vx()}`};function Hx(e){if("object"!=typeof e||null===e)return!1;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||null===Object.getPrototypeOf(e)}function qx(e,t,n){if("function"!=typeof e)throw new Error(Wx(2));if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error(Wx(0));if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error(Wx(1));return n(qx)(e,t)}let s=e,i=t,r=new Map,a=r,o=0,l=!1;function c(){a===r&&(a=new Map,r.forEach((e,t)=>{a.set(t,e)}))}function u(){if(l)throw new Error(Wx(3));return i}function h(e){if("function"!=typeof e)throw new Error(Wx(4));if(l)throw new Error(Wx(5));let t=!0;c();const n=o++;return a.set(n,e),function(){if(t){if(l)throw new Error(Wx(6));t=!1,c(),a.delete(n),r=null}}}function d(e){if(!Hx(e))throw new Error(Wx(7));if(void 0===e.type)throw new Error(Wx(8));if("string"!=typeof e.type)throw new Error(Wx(17));if(l)throw new Error(Wx(9));try{l=!0,i=s(i,e)}finally{l=!1}return(r=a).forEach(e=>{e()}),e}d({type:$x.INIT});return{dispatch:d,subscribe:h,getState:u,replaceReducer:function(e){if("function"!=typeof e)throw new Error(Wx(10));s=e,d({type:$x.REPLACE})},[Ux]:function(){const e=h;return{subscribe(t){if("object"!=typeof t||null===t)throw new Error(Wx(11));function n(){const e=t;e.next&&e.next(u())}n();return{unsubscribe:e(n)}},[Ux](){return this}}}}}function Yx(e){const t=Object.keys(e),n={};for(let a=0;a<t.length;a++){const s=t[a];"function"==typeof e[s]&&(n[s]=e[s])}const s=Object.keys(n);let i;try{!function(e){Object.keys(e).forEach(t=>{const n=e[t];if(void 0===n(void 0,{type:$x.INIT}))throw new Error(Wx(12));if(void 0===n(void 0,{type:$x.PROBE_UNKNOWN_ACTION()}))throw new Error(Wx(13))})}(n)}catch(r){i=r}return function(e={},t){if(i)throw i;let r=!1;const a={};for(let i=0;i<s.length;i++){const o=s[i],l=n[o],c=e[o],u=l(c,t);if(void 0===u)throw t&&t.type,new Error(Wx(14));a[o]=u,r=r||u!==c}return r=r||s.length!==Object.keys(e).length,r?a:e}}function Gx(...e){return 0===e.length?e=>e:1===e.length?e[0]:e.reduce((e,t)=>(...n)=>e(t(...n)))}var Qx=Symbol.for("immer-nothing"),Jx=Symbol.for("immer-draftable"),Xx=Symbol.for("immer-state");function Kx(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Zx=Object.getPrototypeOf;function eb(e){return!!e&&!!e[Xx]}function tb(e){var t;return!!e&&(sb(e)||Array.isArray(e)||!!e[Jx]||!!(null==(t=e.constructor)?void 0:t[Jx])||lb(e)||cb(e))}var nb=Object.prototype.constructor.toString();function sb(e){if(!e||"object"!=typeof e)return!1;const t=Zx(e);if(null===t)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===nb}function ib(e,t){0===rb(e)?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,s)=>t(s,n,e))}function rb(e){const t=e[Xx];return t?t.type_:Array.isArray(e)?1:lb(e)?2:cb(e)?3:0}function ab(e,t){return 2===rb(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function ob(e,t,n){const s=rb(e);2===s?e.set(t,n):3===s?e.add(n):e[t]=n}function lb(e){return e instanceof Map}function cb(e){return e instanceof Set}function ub(e){return e.copy_||e.base_}function hb(e,t){if(lb(e))return new Map(e);if(cb(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=sb(e);if(!0===t||"class_only"===t&&!n){const t=Object.getOwnPropertyDescriptors(e);delete t[Xx];let n=Reflect.ownKeys(t);for(let s=0;s<n.length;s++){const i=n[s],r=t[i];!1===r.writable&&(r.writable=!0,r.configurable=!0),(r.get||r.set)&&(t[i]={configurable:!0,writable:!0,enumerable:r.enumerable,value:e[i]})}return Object.create(Zx(e),t)}{const t=Zx(e);if(null!==t&&n)return{...e};const s=Object.create(t);return Object.assign(s,e)}}function db(e,t=!1){return pb(e)||eb(e)||!tb(e)||(rb(e)>1&&(e.set=e.add=e.clear=e.delete=mb),Object.freeze(e),t&&Object.entries(e).forEach(([e,t])=>db(t,!0))),e}function mb(){Kx(2)}function pb(e){return Object.isFrozen(e)}var fb,gb={};function yb(e){const t=gb[e];return t||Kx(0),t}function vb(){return fb}function xb(e,t){t&&(yb("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function bb(e){wb(e),e.drafts_.forEach(kb),e.drafts_=null}function wb(e){e===fb&&(fb=e.parent_)}function jb(e){return fb={drafts_:[],parent_:fb,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function kb(e){const t=e[Xx];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function Nb(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return void 0!==e&&e!==n?(n[Xx].modified_&&(bb(t),Kx(4)),tb(e)&&(e=Sb(t,e),t.parent_||Pb(t,e)),t.patches_&&yb("Patches").generateReplacementPatches_(n[Xx].base_,e,t.patches_,t.inversePatches_)):e=Sb(t,n,[]),bb(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Qx?e:void 0}function Sb(e,t,n){if(pb(t))return t;const s=t[Xx];if(!s)return ib(t,(i,r)=>Cb(e,s,t,i,r,n)),t;if(s.scope_!==e)return t;if(!s.modified_)return Pb(e,s.base_,!0),s.base_;if(!s.finalized_){s.finalized_=!0,s.scope_.unfinalizedDrafts_--;const t=s.copy_;let i=t,r=!1;3===s.type_&&(i=new Set(t),t.clear(),r=!0),ib(i,(i,a)=>Cb(e,s,t,i,a,n,r)),Pb(e,t,!1),n&&e.patches_&&yb("Patches").generatePatches_(s,n,e.patches_,e.inversePatches_)}return s.copy_}function Cb(e,t,n,s,i,r,a){if(eb(i)){const a=Sb(e,i,r&&t&&3!==t.type_&&!ab(t.assigned_,s)?r.concat(s):void 0);if(ob(n,s,a),!eb(a))return;e.canAutoFreeze_=!1}else a&&n.add(i);if(tb(i)&&!pb(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Sb(e,i),t&&t.scope_.parent_||"symbol"==typeof s||!Object.prototype.propertyIsEnumerable.call(n,s)||Pb(e,i)}}function Pb(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&db(t,n)}var Eb={get(e,t){if(t===Xx)return e;const n=ub(e);if(!ab(n,t))return function(e,t,n){var s;const i=Mb(t,n);return i?"value"in i?i.value:null==(s=i.get)?void 0:s.call(e.draft_):void 0}(e,n,t);const s=n[t];return e.finalized_||!tb(s)?s:s===Lb(e.base_,t)?(_b(e),e.copy_[t]=Db(s,e)):s},has:(e,t)=>t in ub(e),ownKeys:e=>Reflect.ownKeys(ub(e)),set(e,t,n){const s=Mb(ub(e),t);if(null==s?void 0:s.set)return s.set.call(e.draft_,n),!0;if(!e.modified_){const s=Lb(ub(e),t),a=null==s?void 0:s[Xx];if(a&&a.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(((i=n)===(r=s)?0!==i||1/i==1/r:i!=i&&r!=r)&&(void 0!==n||ab(e.base_,t)))return!0;_b(e),Ib(e)}var i,r;return e.copy_[t]===n&&(void 0!==n||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==Lb(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,_b(e),Ib(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const n=ub(e),s=Reflect.getOwnPropertyDescriptor(n,t);return s?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:s.enumerable,value:n[t]}:s},defineProperty(){Kx(11)},getPrototypeOf:e=>Zx(e.base_),setPrototypeOf(){Kx(12)}},Tb={};function Lb(e,t){const n=e[Xx];return(n?ub(n):e)[t]}function Mb(e,t){if(!(t in e))return;let n=Zx(e);for(;n;){const e=Object.getOwnPropertyDescriptor(n,t);if(e)return e;n=Zx(n)}}function Ib(e){e.modified_||(e.modified_=!0,e.parent_&&Ib(e.parent_))}function _b(e){e.copy_||(e.copy_=hb(e.base_,e.scope_.immer_.useStrictShallowCopy_))}ib(Eb,(e,t)=>{Tb[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),Tb.deleteProperty=function(e,t){return Tb.set.call(this,e,t,void 0)},Tb.set=function(e,t,n){return Eb.set.call(this,e[0],t,n,e[0])};function Db(e,t){const n=lb(e)?yb("MapSet").proxyMap_(e,t):cb(e)?yb("MapSet").proxySet_(e,t):function(e,t){const n=Array.isArray(e),s={type_:n?1:0,scope_:t?t.scope_:vb(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=s,r=Eb;n&&(i=[s],r=Tb);const{revoke:a,proxy:o}=Proxy.revocable(i,r);return s.draft_=o,s.revoke_=a,o}(e,t);return(t?t.scope_:vb()).drafts_.push(n),n}function Ab(e){if(!tb(e)||pb(e))return e;const t=e[Xx];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=hb(e,t.scope_.immer_.useStrictShallowCopy_)}else n=hb(e,!0);return ib(n,(e,t)=>{ob(n,e,Ab(t))}),t&&(t.finalized_=!1),n}var Ob=new class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,n)=>{if("function"==typeof e&&"function"!=typeof t){const n=t;t=e;const s=this;return function(e=n,...i){return s.produce(e,e=>t.call(this,e,...i))}}let s;if("function"!=typeof t&&Kx(6),void 0!==n&&"function"!=typeof n&&Kx(7),tb(e)){const i=jb(this),r=Db(e,void 0);let a=!0;try{s=t(r),a=!1}finally{a?bb(i):wb(i)}return xb(i,n),Nb(s,i)}if(!e||"object"!=typeof e){if(s=t(e),void 0===s&&(s=e),s===Qx&&(s=void 0),this.autoFreeze_&&db(s,!0),n){const t=[],i=[];yb("Patches").generateReplacementPatches_(e,s,t,i),n(t,i)}return s}Kx(1)},this.produceWithPatches=(e,t)=>{if("function"==typeof e)return(t,...n)=>this.produceWithPatches(t,t=>e(t,...n));let n,s;return[this.produce(e,t,(e,t)=>{n=e,s=t}),n,s]},"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),"boolean"==typeof(null==e?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){tb(e)||Kx(8),eb(e)&&(e=function(e){eb(e)||Kx(10);return Ab(e)}(e));const t=jb(this),n=Db(e,void 0);return n[Xx].isManual_=!0,wb(t),n}finishDraft(e,t){const n=e&&e[Xx];n&&n.isManual_||Kx(9);const{scope_:s}=n;return xb(s,t),Nb(void 0,s)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const s=t[n];if(0===s.path.length&&"replace"===s.op){e=s.value;break}}n>-1&&(t=t.slice(n+1));const s=yb("Patches").applyPatches_;return eb(e)?s(e,t):this.produce(e,e=>s(e,t))}},Rb=Ob.produce;function Fb(e){return({dispatch:t,getState:n})=>s=>i=>"function"==typeof i?i(t,n,e):s(i)}Ob.produceWithPatches.bind(Ob),Ob.setAutoFreeze.bind(Ob),Ob.setUseStrictShallowCopy.bind(Ob),Ob.applyPatches.bind(Ob),Ob.createDraft.bind(Ob),Ob.finishDraft.bind(Ob);var Bb=Fb(),zb=Fb,Wb="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"==typeof arguments[0]?Gx:Gx.apply(null,arguments)};function Ub(e,t){function n(...n){if(t){let s=t(...n);if(!s)throw new Error(cw(0));return{type:e,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:e,payload:n[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=t=>function(e){return Hx(e)&&"type"in e&&"string"==typeof e.type}(t)&&t.type===e,n}var Vb=class e extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,e.prototype)}static get[Symbol.species](){return e}concat(...e){return super.concat.apply(this,e)}prepend(...t){return 1===t.length&&Array.isArray(t[0])?new e(...t[0].concat(this)):new e(...t.concat(this))}};function $b(e){return tb(e)?Rb(e,()=>{}):e}function Hb(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}var qb=e=>t=>{setTimeout(t,e)},Yb=e=>function(t){const{autoBatch:n=!0}=t??{};let s=new Vb(e);return n&&s.push(((e={type:"raf"})=>t=>(...n)=>{const s=t(...n);let i=!0,r=!1,a=!1;const o=new Set,l="tick"===e.type?queueMicrotask:"raf"===e.type?"undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:qb(10):"callback"===e.type?e.queueNotification:qb(e.timeout),c=()=>{a=!1,r&&(r=!1,o.forEach(e=>e()))};return Object.assign({},s,{subscribe(e){const t=s.subscribe(()=>i&&e());return o.add(e),()=>{t(),o.delete(e)}},dispatch(e){var t;try{return i=!(null==(t=null==e?void 0:e.meta)?void 0:t.RTK_autoBatch),r=!i,r&&(a||(a=!0,l(c))),s.dispatch(e)}finally{i=!0}}})})("object"==typeof n?n:void 0)),s};function Gb(e){const t={},n=[];let s;const i={addCase(e,n){const s="string"==typeof e?e:e.type;if(!s)throw new Error(cw(28));if(s in t)throw new Error(cw(29));return t[s]=n,i},addMatcher:(e,t)=>(n.push({matcher:e,reducer:t}),i),addDefaultCase:e=>(s=e,i)};return e(i),[t,n,s]}function Qb(...e){return t=>e.some(e=>((e,t)=>{return(n=e)&&"function"==typeof n.match?e.match(t):e(t);var n})(e,t))}var Jb=["name","message","stack","code"],Xb=class{constructor(e,t){n(this,"_type"),this.payload=e,this.meta=t}},Kb=class{constructor(e,t){n(this,"_type"),this.payload=e,this.meta=t}},Zb=e=>{if("object"==typeof e&&null!==e){const t={};for(const n of Jb)"string"==typeof e[n]&&(t[n]=e[n]);return t}return{message:String(e)}},ew="External signal was aborted",tw=(()=>{function e(e,t,n){const s=Ub(e+"/fulfilled",(e,t,n,s)=>({payload:e,meta:{...s||{},arg:n,requestId:t,requestStatus:"fulfilled"}})),i=Ub(e+"/pending",(e,t,n)=>({payload:void 0,meta:{...n||{},arg:t,requestId:e,requestStatus:"pending"}})),r=Ub(e+"/rejected",(e,t,s,i,r)=>({payload:i,error:(n&&n.serializeError||Zb)(e||"Rejected"),meta:{...r||{},arg:s,requestId:t,rejectedWithValue:!!i,requestStatus:"rejected",aborted:"AbortError"===(null==e?void 0:e.name),condition:"ConditionError"===(null==e?void 0:e.name)}}));return Object.assign(function(e,{signal:a}={}){return(o,l,c)=>{const u=(null==n?void 0:n.idGenerator)?n.idGenerator(e):((e=21)=>{let t="",n=e;for(;n--;)t+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return t})(),h=new AbortController;let d,m;function p(e){m=e,h.abort()}a&&(a.aborted?p(ew):a.addEventListener("abort",()=>p(ew),{once:!0}));const f=async function(){var a,f;let g;try{let r=null==(a=null==n?void 0:n.condition)?void 0:a.call(n,e,{getState:l,extra:c});if(null!==(y=r)&&"object"==typeof y&&"function"==typeof y.then&&(r=await r),!1===r||h.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const v=new Promise((e,t)=>{d=()=>{t({name:"AbortError",message:m||"Aborted"})},h.signal.addEventListener("abort",d)});o(i(u,e,null==(f=null==n?void 0:n.getPendingMeta)?void 0:f.call(n,{requestId:u,arg:e},{getState:l,extra:c}))),g=await Promise.race([v,Promise.resolve(t(e,{dispatch:o,getState:l,extra:c,requestId:u,signal:h.signal,abort:p,rejectWithValue:(e,t)=>new Xb(e,t),fulfillWithValue:(e,t)=>new Kb(e,t)})).then(t=>{if(t instanceof Xb)throw t;return t instanceof Kb?s(t.payload,u,e,t.meta):s(t,u,e)})])}catch(v){g=v instanceof Xb?r(null,u,e,v.payload,v.meta):r(v,u,e)}finally{d&&h.signal.removeEventListener("abort",d)}var y;return n&&!n.dispatchConditionRejection&&r.match(g)&&g.meta.condition||o(g),g}();return Object.assign(f,{abort:p,requestId:u,arg:e,unwrap:()=>f.then(nw)})}},{pending:i,rejected:r,fulfilled:s,settled:Qb(r,s),typePrefix:e})}return e.withTypes=()=>e,e})();function nw(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}var sw=Symbol.for("rtk-slice-createasyncthunk");function iw(e,t){return`${e}/${t}`}function rw({creators:e}={}){var t;const n=null==(t=null==e?void 0:e.asyncThunk)?void 0:t[sw];return function(e){const{name:t,reducerPath:s=t}=e;if(!t)throw new Error(cw(11));const i=("function"==typeof e.reducers?e.reducers(function(){function e(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return e.withTypes=()=>e,{reducer:e=>Object.assign({[e.name]:(...t)=>e(...t)}[e.name],{_reducerDefinitionType:"reducer"}),preparedReducer:(e,t)=>({_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}),asyncThunk:e}}()):e.reducers)||{},r=Object.keys(i),a={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},o={addCase(e,t){const n="string"==typeof e?e:e.type;if(!n)throw new Error(cw(12));if(n in a.sliceCaseReducersByType)throw new Error(cw(13));return a.sliceCaseReducersByType[n]=t,o},addMatcher:(e,t)=>(a.sliceMatchers.push({matcher:e,reducer:t}),o),exposeAction:(e,t)=>(a.actionCreators[e]=t,o),exposeCaseReducer:(e,t)=>(a.sliceCaseReducersByName[e]=t,o)};function l(){const[t={},n=[],s]="function"==typeof e.extraReducers?Gb(e.extraReducers):[e.extraReducers],i={...t,...a.sliceCaseReducersByType};return function(e,t){let n,[s,i,r]=Gb(t);if("function"==typeof e)n=()=>$b(e());else{const t=$b(e);n=()=>t}function a(e=n(),t){let a=[s[t.type],...i.filter(({matcher:e})=>e(t)).map(({reducer:e})=>e)];return 0===a.filter(e=>!!e).length&&(a=[r]),a.reduce((e,n)=>{if(n){if(eb(e)){const s=n(e,t);return void 0===s?e:s}if(tb(e))return Rb(e,e=>n(e,t));{const s=n(e,t);if(void 0===s){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return s}}return e},e)}return a.getInitialState=n,a}(e.initialState,e=>{for(let t in i)e.addCase(t,i[t]);for(let t of a.sliceMatchers)e.addMatcher(t.matcher,t.reducer);for(let t of n)e.addMatcher(t.matcher,t.reducer);s&&e.addDefaultCase(s)})}r.forEach(s=>{const r=i[s],a={reducerName:s,type:iw(t,s),createNotation:"function"==typeof e.reducers};!function(e){return"asyncThunk"===e._reducerDefinitionType}(r)?function({type:e,reducerName:t,createNotation:n},s,i){let r,a;if("reducer"in s){if(n&&!function(e){return"reducerWithPrepare"===e._reducerDefinitionType}(s))throw new Error(cw(17));r=s.reducer,a=s.prepare}else r=s;i.addCase(e,r).exposeCaseReducer(t,r).exposeAction(t,a?Ub(e,a):Ub(e))}(a,r,o):function({type:e,reducerName:t},n,s,i){if(!i)throw new Error(cw(18));const{payloadCreator:r,fulfilled:a,pending:o,rejected:l,settled:c,options:u}=n,h=i(e,r,u);s.exposeAction(t,h),a&&s.addCase(h.fulfilled,a);o&&s.addCase(h.pending,o);l&&s.addCase(h.rejected,l);c&&s.addMatcher(h.settled,c);s.exposeCaseReducer(t,{fulfilled:a||lw,pending:o||lw,rejected:l||lw,settled:c||lw})}(a,r,o,n)});const c=e=>e,u=new Map,h=new WeakMap;let d;function m(e,t){return d||(d=l()),d(e,t)}function p(){return d||(d=l()),d.getInitialState()}function f(t,n=!1){function s(e){let i=e[t];return void 0===i&&n&&(i=Hb(h,s,p)),i}function i(t=c){const s=Hb(u,n,()=>new WeakMap);return Hb(s,t,()=>{const s={};for(const[i,r]of Object.entries(e.selectors??{}))s[i]=aw(r,t,()=>Hb(h,t,p),n);return s})}return{reducerPath:t,getSelectors:i,get selectors(){return i(s)},selectSlice:s}}const g={name:t,reducer:m,actions:a.actionCreators,caseReducers:a.sliceCaseReducersByName,getInitialState:p,...f(s),injectInto(e,{reducerPath:t,...n}={}){const i=t??s;return e.inject({reducerPath:i,reducer:m},n),{...g,...f(i,!0)}}};return g}}function aw(e,t,n,s){function i(i,...r){let a=t(i);return void 0===a&&s&&(a=n()),e(a,...r)}return i.unwrapped=e,i}var ow=rw();function lw(){}function cw(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var uw="persist:",hw="persist/FLUSH",dw="persist/REHYDRATE",mw="persist/PAUSE",pw="persist/PERSIST",fw="persist/PURGE",gw="persist/REGISTER";function yw(e){return(yw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,s)}return n}function xw(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bw(e,t,n,s){s.debug;var i=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vw(n,!0).forEach(function(t){xw(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vw(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},n);return e&&"object"===yw(e)&&Object.keys(e).forEach(function(s){"_persist"!==s&&t[s]===n[s]&&(i[s]=e[s])}),i}function ww(e){var t,n=e.blacklist||null,s=e.whitelist||null,i=e.transforms||[],r=e.throttle||0,a="".concat(void 0!==e.keyPrefix?e.keyPrefix:uw).concat(e.key),o=e.storage;t=!1===e.serialize?function(e){return e}:"function"==typeof e.serialize?e.serialize:jw;var l=e.writeFailHandler||null,c={},u={},h=[],d=null,m=null;function p(){if(0===h.length)return d&&clearInterval(d),void(d=null);var e=h.shift(),n=i.reduce(function(t,n){return n.in(t,e,c)},c[e]);if(void 0!==n)try{u[e]=t(n)}catch(s){}else delete u[e];0===h.length&&(Object.keys(u).forEach(function(e){void 0===c[e]&&delete u[e]}),m=o.setItem(a,t(u)).catch(g))}function f(e){return(!s||-1!==s.indexOf(e)||"_persist"===e)&&(!n||-1===n.indexOf(e))}function g(e){l&&l(e)}return{update:function(e){Object.keys(e).forEach(function(t){f(t)&&c[t]!==e[t]&&-1===h.indexOf(t)&&h.push(t)}),Object.keys(c).forEach(function(t){void 0===e[t]&&f(t)&&-1===h.indexOf(t)&&void 0!==c[t]&&h.push(t)}),null===d&&(d=setInterval(p,r)),c=e},flush:function(){for(;0!==h.length;)p();return m||Promise.resolve()}}}function jw(e){return JSON.stringify(e)}function kw(e){var t,n=e.transforms||[],s="".concat(void 0!==e.keyPrefix?e.keyPrefix:uw).concat(e.key),i=e.storage;return e.debug,t=!1===e.deserialize?function(e){return e}:"function"==typeof e.deserialize?e.deserialize:Nw,i.getItem(s).then(function(e){if(e)try{var s={},i=t(e);return Object.keys(i).forEach(function(e){s[e]=n.reduceRight(function(t,n){return n.out(t,e,i)},t(i[e]))}),s}catch(r){throw r}})}function Nw(e){return JSON.parse(e)}function Sw(e){}function Cw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,s)}return n}function Pw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Cw(n,!0).forEach(function(t){Ew(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Cw(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Ew(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Tw(e,t){if(null==e)return{};var n,s,i=function(e,t){if(null==e)return{};var n,s,i={},r=Object.keys(e);for(s=0;s<r.length;s++)n=r[s],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(s=0;s<r.length;s++)n=r[s],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Lw(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Mw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,s)}return n}function Iw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mw(n,!0).forEach(function(t){_w(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mw(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Dw={registry:[],bootstrapped:!1},Aw=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Dw,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case gw:return Iw({},e,{registry:[].concat(Lw(e.registry),[t.key])});case dw:var n=e.registry.indexOf(t.key),s=Lw(e.registry);return s.splice(n,1),Iw({},e,{registry:s,bootstrapped:0===s.length});default:return e}};var Ow={},Rw={};function Fw(e){return(Fw="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Bw(){}Rw.__esModule=!0,Rw.default=function(e){var t="".concat(e,"Storage");return function(e){if("object"!==("undefined"==typeof self?"undefined":Fw(self))||!(e in self))return!1;try{var t=self[e],n="redux-persist ".concat(e," test");t.setItem(n,"test"),t.getItem(n),t.removeItem(n)}catch(s){return!1}return!0}(t)?self[t]:zw};var zw={getItem:Bw,setItem:Bw,removeItem:Bw};Ow.__esModule=!0,Ow.default=function(e){var t=(0,Uw.default)(e);return{getItem:function(e){return new Promise(function(n,s){n(t.getItem(e))})},setItem:function(e,n){return new Promise(function(s,i){s(t.setItem(e,n))})},removeItem:function(e){return new Promise(function(n,s){n(t.removeItem(e))})}}};var Ww,Uw=(Ww=Rw)&&Ww.__esModule?Ww:{default:Ww};var Vw,$w=function(e){return e&&e.__esModule?e:{default:e}}(Ow);Vw=(0,$w.default)("local");const Hw={user:null,token:localStorage.getItem("token"),isAuthenticated:!1,isLoading:!1,error:null,virtualMoney:0,registrationBonus:1e4},qw=tw("auth/loginUser",async(e,{rejectWithValue:t})=>{try{const n=await Nr.login(e);return n.success?(localStorage.setItem("token",n.data.token),localStorage.setItem("user",JSON.stringify(n.data.user)),n.data):t(n.message)}catch(n){return t(n.message||"Login failed")}}),Yw=tw("auth/registerUser",async(e,{rejectWithValue:t})=>{try{const n=await Nr.register(e);if(n.success){localStorage.setItem("token",n.data.token),localStorage.setItem("user",JSON.stringify(n.data.user));return{...n.data,virtualMoney:1e4}}return t(n.message)}catch(n){return t(n.message||"Registration failed")}}),Gw=tw("auth/googleAuth",async(e,{rejectWithValue:t})=>{try{const n=await Nr.googleAuth(e);if(n.success){localStorage.setItem("token",n.data.token),localStorage.setItem("user",JSON.stringify(n.data.user));return{...n.data,virtualMoney:n.data.isNewUser?1e4:n.data.virtualMoney||0}}return t(n.message)}catch(n){return t(n.message||"Google authentication failed")}}),Qw=tw("auth/logoutUser",async(e,{rejectWithValue:t})=>{try{return await Nr.logout(),localStorage.removeItem("token"),localStorage.removeItem("user"),!0}catch(n){return localStorage.removeItem("token"),localStorage.removeItem("user"),!0}}),Jw=tw("auth/refreshToken",async(e,{rejectWithValue:t})=>{try{const e=await Nr.refreshToken();return e.success?(localStorage.setItem("token",e.data.token),e.data):t(e.message)}catch(n){return t(n.message||"Token refresh failed")}}),Xw=ow({name:"auth",initialState:Hw,reducers:{clearError:e=>{e.error=null},setUser:(e,t)=>{e.user=t.payload,e.isAuthenticated=!!t.payload},updateVirtualMoney:(e,t)=>{e.virtualMoney=t.payload,e.user&&(e.user.virtualMoney=t.payload)},addVirtualMoney:(e,t)=>{e.virtualMoney+=t.payload,e.user&&(e.user.virtualMoney=e.virtualMoney)},subtractVirtualMoney:(e,t)=>{e.virtualMoney=Math.max(0,e.virtualMoney-t.payload),e.user&&(e.user.virtualMoney=e.virtualMoney)},initializeAuth:e=>{const t=localStorage.getItem("token"),n=localStorage.getItem("user");if(t&&n)try{const s=JSON.parse(n);e.token=t,e.user=s,e.isAuthenticated=!0,e.virtualMoney=s.virtualMoney||0}catch(s){localStorage.removeItem("token"),localStorage.removeItem("user")}}},extraReducers:e=>{e.addCase(qw.pending,e=>{e.isLoading=!0,e.error=null}).addCase(qw.fulfilled,(e,t)=>{e.isLoading=!1,e.user=t.payload.user,e.token=t.payload.token,e.isAuthenticated=!0,e.virtualMoney=t.payload.user.virtualMoney||0,e.error=null}).addCase(qw.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload,e.isAuthenticated=!1}).addCase(Yw.pending,e=>{e.isLoading=!0,e.error=null}).addCase(Yw.fulfilled,(e,t)=>{e.isLoading=!1,e.user=t.payload.user,e.token=t.payload.token,e.isAuthenticated=!0,e.virtualMoney=1e4,e.error=null}).addCase(Yw.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload,e.isAuthenticated=!1}).addCase(Gw.pending,e=>{e.isLoading=!0,e.error=null}).addCase(Gw.fulfilled,(e,t)=>{e.isLoading=!1,e.user=t.payload.user,e.token=t.payload.token,e.isAuthenticated=!0,e.virtualMoney=t.payload.virtualMoney||0,e.error=null}).addCase(Gw.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload,e.isAuthenticated=!1}).addCase(Qw.fulfilled,e=>{e.user=null,e.token=null,e.isAuthenticated=!1,e.virtualMoney=0,e.error=null,e.isLoading=!1}).addCase(Jw.fulfilled,(e,t)=>{e.token=t.payload.token,e.user=t.payload.user,e.virtualMoney=t.payload.user.virtualMoney||e.virtualMoney})}}),{clearError:Kw,setUser:Zw,updateVirtualMoney:ej,addVirtualMoney:tj,subtractVirtualMoney:nj,initializeAuth:sj}=Xw.actions,ij=Xw.reducer,rj=[{id:"holding_1",symbol:"RELIANCE",name:"Reliance Industries Ltd",quantity:0,avgPrice:0,currentPrice:2520,totalValue:0,totalGains:0,gainsPercent:0,dayChange:25,dayChangePercent:1,sector:"Energy"},{id:"holding_2",symbol:"TCS",name:"Tata Consultancy Services",quantity:0,avgPrice:0,currentPrice:3350,totalValue:0,totalGains:0,gainsPercent:0,dayChange:-15,dayChangePercent:-.45,sector:"IT"},{id:"holding_3",symbol:"INFY",name:"Infosys Limited",quantity:0,avgPrice:0,currentPrice:1520,totalValue:0,totalGains:0,gainsPercent:0,dayChange:12,dayChangePercent:.79,sector:"IT"}],aj=tw("portfolio/fetchSummary",async(e,{rejectWithValue:t,getState:n})=>{try{const e=await Er();return e.success?e.data:t(e.message)}catch(s){const{portfolio:e}=n();return cj(e.holdings)}}),oj=tw("portfolio/fetchHoldings",async(e,{rejectWithValue:t})=>{try{const e=await Tr();return e.success?e.data:t(e.message)}catch(n){return rj}}),lj=tw("portfolio/updateHolding",async({symbol:e,quantity:t,price:n,type:s},{rejectWithValue:i,getState:r})=>{try{const{portfolio:a}=r(),o=a.holdings.find(t=>t.symbol===e);let l;if("BUY"===s)if(o){const e=o.quantity+t,s=(o.avgPrice*o.quantity+n*t)/e;l={...o,quantity:e,avgPrice:s,totalValue:e*o.currentPrice,totalGains:(o.currentPrice-s)*e,gainsPercent:(o.currentPrice-s)/s*100}}else{const s=rj.find(t=>t.symbol===e);if(!s)return i("Stock not found");l={...s,id:`holding_${Date.now()}`,quantity:t,avgPrice:n,totalValue:t*s.currentPrice,totalGains:(s.currentPrice-n)*t,gainsPercent:(s.currentPrice-n)/n*100}}else if("SELL"===s){if(!o||o.quantity<t)return i("Insufficient shares to sell");const e=o.quantity-t;l=0===e?null:{...o,quantity:e,totalValue:e*o.currentPrice,totalGains:(o.currentPrice-o.avgPrice)*e,gainsPercent:(o.currentPrice-o.avgPrice)/o.avgPrice*100}}return{symbol:e,updatedHolding:l,type:s,quantity:t,price:n}}catch(a){return i(a.message||"Failed to update holding")}}),cj=e=>{const t=e.reduce((e,t)=>e+t.totalValue,0),n=e.reduce((e,t)=>e+t.avgPrice*t.quantity,0),s=t-n,i=n>0?s/n*100:0,r=e.reduce((e,t)=>e+t.dayChange*t.quantity,0);return{totalValue:t,totalInvested:n,totalGains:s,totalGainsPercent:i,dayChange:r,dayChangePercent:t>0?r/(t-r)*100:0,totalStocks:e.filter(e=>e.quantity>0).length}},uj=ow({name:"portfolio",initialState:{holdings:[],summary:{totalValue:0,totalInvested:0,totalGains:0,totalGainsPercent:0,dayChange:0,dayChangePercent:0,totalStocks:0},performance:{chartData:[],timeframe:"1D"},isLoading:!1,error:null,lastUpdated:null},reducers:{clearError:e=>{e.error=null},updateCurrentPrices:(e,t)=>{const n=t.payload;e.holdings=e.holdings.map(e=>{const t=n.find(t=>t.symbol===e.symbol);if(t){const n=t.price,s=e.quantity*n,i=(n-e.avgPrice)*e.quantity,r=e.avgPrice>0?(n-e.avgPrice)/e.avgPrice*100:0;return{...e,currentPrice:n,totalValue:s,totalGains:i,gainsPercent:r,dayChange:t.dayChange||e.dayChange,dayChangePercent:t.dayChangePercent||e.dayChangePercent}}return e}),e.summary=cj(e.holdings),e.lastUpdated=(new Date).toISOString()},setTimeframe:(e,t)=>{e.performance.timeframe=t.payload}},extraReducers:e=>{e.addCase(aj.pending,e=>{e.isLoading=!0,e.error=null}).addCase(aj.fulfilled,(e,t)=>{e.isLoading=!1,e.summary=t.payload,e.lastUpdated=(new Date).toISOString()}).addCase(aj.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload}).addCase(oj.pending,e=>{e.isLoading=!0,e.error=null}).addCase(oj.fulfilled,(e,t)=>{e.isLoading=!1,e.holdings=t.payload,e.summary=cj(t.payload),e.lastUpdated=(new Date).toISOString()}).addCase(oj.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload}).addCase(lj.fulfilled,(e,t)=>{const{symbol:n,updatedHolding:s}=t.payload;if(null===s)e.holdings=e.holdings.filter(e=>e.symbol!==n);else{const t=e.holdings.findIndex(e=>e.symbol===n);t>=0?e.holdings[t]=s:e.holdings.push(s)}e.summary=cj(e.holdings),e.lastUpdated=(new Date).toISOString()}).addCase(lj.rejected,(e,t)=>{e.error=t.payload})}}),{clearError:hj,updateCurrentPrices:dj,setTimeframe:mj}=uj.actions,pj=uj.reducer,fj=[{id:"trade_1",symbol:"WIPRO",name:"Wipro Limited",type:"BUY",quantity:50,price:420,totalAmount:21e3,timestamp:new Date("2024-01-15T10:30:00"),status:"completed"},{id:"trade_2",symbol:"BAJFINANCE",name:"Bajaj Finance Limited",type:"SELL",quantity:25,price:6800,totalAmount:17e4,timestamp:new Date("2024-01-15T09:15:00"),status:"completed"}],gj=(e,t)=>{const n=e*(t.brokerage/100),s=e*(t.stt/100),i=n*(t.gst/100),r=n+s+i;return{brokerage:Math.round(100*n)/100,stt:Math.round(100*s)/100,gst:Math.round(100*i)/100,totalFees:Math.round(100*r)/100}},yj=tw("trading/executeTrade",async(e,{dispatch:t,getState:n,rejectWithValue:s})=>{try{const{symbol:i,quantity:r,price:a,type:o}=e,l=n(),{auth:c,trading:u}=l,h=r*a,d=gj(h,u.tradingFees),m="BUY"===o?h+d.totalFees:h-d.totalFees;if("BUY"===o&&c.virtualMoney<m)return s("Insufficient virtual money balance");if("SELL"===o){const e=l.portfolio.holdings.find(e=>e.symbol===i);if(!e||e.quantity<r)return s("Insufficient shares to sell")}const p={id:`trade_${Date.now()}`,symbol:i,name:e.name||i,type:o,quantity:r,price:a,grossAmount:h,fees:d,netAmount:m,timestamp:(new Date).toISOString(),status:"completed"};return t("BUY"===o?nj(m):tj(m)),t(lj({symbol:i,quantity:r,price:a,type:o})),p}catch(i){return s(i.message||"Trade execution failed")}}),vj=tw("trading/fetchRecentTrades",async(e=10,{rejectWithValue:t})=>{try{const n=await Lr.getRecentTrades(e);return n.success?n.data:t(n.message)}catch(n){return fj}}),xj=tw("trading/fetchTradeHistory",async({startDate:e,endDate:t,symbol:n},{rejectWithValue:s})=>{try{const i=await Lr.getTradeHistory({startDate:e,endDate:t,symbol:n});return i.success?i.data:s(i.message)}catch(i){return fj}}),bj=tw("trading/placeOrder",async(e,{getState:t,rejectWithValue:n})=>{try{const{symbol:s,quantity:i,price:r,type:a,orderType:o}=e,l=t(),{auth:c}=l;if("LIMIT"===o){const e=i*r,t=gj(e,l.trading.tradingFees),s="BUY"===a?e+t.totalFees:e-t.totalFees;if("BUY"===a&&c.virtualMoney<s)return n("Insufficient virtual money balance")}return{id:`order_${Date.now()}`,symbol:s,name:e.name||s,type:a,orderType:o,quantity:i,price:"MARKET"===o?null:r,status:"pending",timestamp:(new Date).toISOString(),expiryDate:e.expiryDate||null}}catch(s){return n(s.message||"Order placement failed")}}),wj=tw("trading/cancelOrder",async(e,{rejectWithValue:t})=>{try{const n=await Lr.cancelOrder(e);return n.success?e:t(n.message)}catch(n){return e}}),jj=ow({name:"trading",initialState:{recentTrades:[],activeOrders:[],tradeHistory:[],isLoading:!1,error:null,tradingFees:{brokerage:.03,stt:.1,gst:18}},reducers:{clearError:e=>{e.error=null},updateTradingFees:(e,t)=>{e.tradingFees={...e.tradingFees,...t.payload}},addTradeToHistory:(e,t)=>{e.tradeHistory.unshift(t.payload),e.recentTrades.unshift(t.payload),e.recentTrades.length>50&&(e.recentTrades=e.recentTrades.slice(0,50))}},extraReducers:e=>{e.addCase(yj.pending,e=>{e.isLoading=!0,e.error=null}).addCase(yj.fulfilled,(e,t)=>{e.isLoading=!1,e.recentTrades.unshift(t.payload),e.tradeHistory.unshift(t.payload),e.recentTrades.length>50&&(e.recentTrades=e.recentTrades.slice(0,50))}).addCase(yj.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload}).addCase(vj.fulfilled,(e,t)=>{e.recentTrades=t.payload}).addCase(xj.fulfilled,(e,t)=>{e.tradeHistory=t.payload}).addCase(bj.pending,e=>{e.isLoading=!0,e.error=null}).addCase(bj.fulfilled,(e,t)=>{e.isLoading=!1,e.activeOrders.push(t.payload)}).addCase(bj.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload}).addCase(wj.fulfilled,(e,t)=>{const n=t.payload;e.activeOrders=e.activeOrders.filter(e=>e.id!==n)})}}),{clearError:kj,updateTradingFees:Nj,addTradeToHistory:Sj}=jj.actions,Cj=jj.reducer,Pj=[{id:"watch_1",symbol:"RELIANCE",name:"Reliance Industries Ltd",price:2520,change:25,changePercent:1,volume:125e4,marketCap:1705e9,pe:24.5,sector:"Energy",isFavorite:!0,alertPrice:2600,hasAlert:!0,addedAt:new Date("2024-01-10T10:00:00").toISOString()},{id:"watch_2",symbol:"TCS",name:"Tata Consultancy Services",price:3350,change:-15,changePercent:-.45,volume:89e4,marketCap:122e10,pe:28.2,sector:"IT",isFavorite:!1,alertPrice:null,hasAlert:!1,addedAt:new Date("2024-01-12T14:30:00").toISOString()},{id:"watch_3",symbol:"INFY",name:"Infosys Limited",price:1520,change:12,changePercent:.79,volume:11e5,marketCap:645e9,pe:22.8,sector:"IT",isFavorite:!0,alertPrice:1600,hasAlert:!0,addedAt:new Date("2024-01-08T09:15:00").toISOString()}],Ej=tw("watchlist/fetchWatchlist",async(e,{rejectWithValue:t})=>{try{const e=await Mr.getWatchlist();return e.success?e.data:t(e.message)}catch(n){return Pj}}),Tj=tw("watchlist/addToWatchlist",async(e,{getState:t,rejectWithValue:n})=>{try{const{symbol:i,name:r,price:a,sector:o}=e,l=t();if(l.watchlist.stocks.find(e=>e.symbol===i))return n("Stock already in watchlist");const c={id:`watch_${Date.now()}`,symbol:i,name:r,price:a,change:0,changePercent:0,volume:0,marketCap:0,pe:0,sector:o||"Unknown",isFavorite:!1,alertPrice:null,hasAlert:!1,addedAt:(new Date).toISOString()};try{const e=await Mr.addStock(c);if(e.success)return e.data}catch(s){}return c}catch(s){return n(s.message||"Failed to add to watchlist")}}),Lj=tw("watchlist/removeFromWatchlist",async(e,{rejectWithValue:t})=>{try{try{if((await Mr.removeStock(e)).success)return e}catch(n){}return e}catch(n){return t(n.message||"Failed to remove from watchlist")}}),Mj=tw("watchlist/toggleFavorite",async(e,{getState:t,rejectWithValue:n})=>{try{const i=t().watchlist.stocks.find(t=>t.id===e);if(!i)return n("Stock not found in watchlist");const r={...i,isFavorite:!i.isFavorite};try{const t=await Mr.updateStock(e,r);if(t.success)return t.data}catch(s){}return r}catch(s){return n(s.message||"Failed to toggle favorite")}}),Ij=tw("watchlist/setPriceAlert",async({stockId:e,alertPrice:t},{getState:n,rejectWithValue:s})=>{try{const r=n().watchlist.stocks.find(t=>t.id===e);if(!r)return s("Stock not found in watchlist");const a={...r,alertPrice:t,hasAlert:null!==t};try{const t=await Mr.updateStock(e,a);if(t.success)return t.data}catch(i){}return a}catch(i){return s(i.message||"Failed to set price alert")}}),_j=tw("watchlist/updatePrices",async(e,{rejectWithValue:t})=>{try{return e}catch(n){return t(n.message||"Failed to update prices")}}),Dj=ow({name:"watchlist",initialState:{stocks:[],isLoading:!1,error:null,lastUpdated:null},reducers:{clearError:e=>{e.error=null},updateStockPrices:(e,t)=>{const n=t.payload;e.stocks=e.stocks.map(e=>{const t=n.find(t=>t.symbol===e.symbol);return t?{...e,price:t.price,change:t.change,changePercent:t.changePercent,volume:t.volume||e.volume,dayHigh:t.dayHigh||e.dayHigh,dayLow:t.dayLow||e.dayLow,lastUpdated:Date.now()}:e}),e.lastUpdated=(new Date).toISOString()},syncWithStocksData:(e,t)=>{const n=t.payload;e.stocks=e.stocks.map(e=>{const t=n[e.symbol];return t?{...e,...t,lastUpdated:Date.now()}:e}),e.lastUpdated=(new Date).toISOString()},sortWatchlist:(e,t)=>{const{sortBy:n,sortOrder:s}=t.payload;e.stocks.sort((e,t)=>{let i,r;switch(n){case"symbol":i=e.symbol,r=t.symbol;break;case"price":i=e.price,r=t.price;break;case"change":i=e.changePercent,r=t.changePercent;break;case"volume":i=e.volume,r=t.volume;break;case"addedAt":i=new Date(e.addedAt),r=new Date(t.addedAt);break;default:return 0}return"desc"===s?r>i?1:-1:i>r?1:-1})}},extraReducers:e=>{e.addCase(Ej.pending,e=>{e.isLoading=!0,e.error=null}).addCase(Ej.fulfilled,(e,t)=>{e.isLoading=!1,e.stocks=t.payload,e.lastUpdated=(new Date).toISOString()}).addCase(Ej.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload}).addCase(Tj.fulfilled,(e,t)=>{e.stocks.push(t.payload)}).addCase(Tj.rejected,(e,t)=>{e.error=t.payload}).addCase(Lj.fulfilled,(e,t)=>{const n=t.payload;e.stocks=e.stocks.filter(e=>e.id!==n)}).addCase(Lj.rejected,(e,t)=>{e.error=t.payload}).addCase(Mj.fulfilled,(e,t)=>{const n=t.payload,s=e.stocks.findIndex(e=>e.id===n.id);s>=0&&(e.stocks[s]=n)}).addCase(Ij.fulfilled,(e,t)=>{const n=t.payload,s=e.stocks.findIndex(e=>e.id===n.id);s>=0&&(e.stocks[s]=n)}).addCase(_j.fulfilled,(e,t)=>{const n=t.payload;e.stocks=e.stocks.map(e=>{const t=n.find(t=>t.symbol===e.symbol);return t?{...e,price:t.price,change:t.change,changePercent:t.changePercent,volume:t.volume||e.volume}:e}),e.lastUpdated=(new Date).toISOString()})}}),{clearError:Aj,updateStockPrices:Oj,syncWithStocksData:Rj,sortWatchlist:Fj}=Dj.actions,Bj=Dj.reducer,zj=[{id:"ORD001",symbol:"RELIANCE",name:"Reliance Industries Ltd",type:"BUY",quantity:50,price:2520,orderPrice:2500,status:"executed",timestamp:new Date("2024-01-15T10:30:00").toISOString(),executedAt:new Date("2024-01-15T10:31:00").toISOString(),totalAmount:126e3},{id:"ORD002",symbol:"TCS",name:"Tata Consultancy Services",type:"SELL",quantity:20,price:3350,orderPrice:3400,status:"pending",timestamp:new Date("2024-01-15T11:15:00").toISOString(),executedAt:null,totalAmount:67e3}],Wj=tw("orders/fetchOrders",async(e,{rejectWithValue:t})=>{try{const e=await Lr.getOrders();return e.success?e.data:t(e.message)}catch(n){return zj}}),Uj=tw("orders/placeOrder",async(e,{rejectWithValue:t})=>{try{const t={id:`ORD${Date.now()}`,...e,status:"pending",timestamp:(new Date).toISOString(),executedAt:null};try{const e=await Lr.placeOrder(t);if(e.success)return e.data}catch(n){}return t}catch(n){return t(n.message||"Failed to place order")}}),Vj=tw("orders/cancelOrder",async(e,{rejectWithValue:t})=>{try{try{if((await Lr.cancelOrder(e)).success)return e}catch(n){}return e}catch(n){return t(n.message||"Failed to cancel order")}}),$j=ow({name:"orders",initialState:{orders:[],orderHistory:[],isLoading:!1,error:null,filters:{status:"all",type:"all",symbol:""}},reducers:{clearError:e=>{e.error=null},setFilters:(e,t)=>{e.filters={...e.filters,...t.payload}},updateOrderStatus:(e,t)=>{const{orderId:n,status:s,executedAt:i,executedPrice:r}=t.payload,a=e.orders.find(e=>e.id===n);a&&(a.status=s,i&&(a.executedAt=i),r&&(a.price=r))}},extraReducers:e=>{e.addCase(Wj.pending,e=>{e.isLoading=!0,e.error=null}).addCase(Wj.fulfilled,(e,t)=>{e.isLoading=!1,e.orders=t.payload}).addCase(Wj.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload}).addCase(Uj.fulfilled,(e,t)=>{e.orders.unshift(t.payload)}).addCase(Vj.fulfilled,(e,t)=>{const n=t.payload,s=e.orders.find(e=>e.id===n);s&&(s.status="cancelled")})}}),{clearError:Hj,setFilters:qj,updateOrderStatus:Yj}=$j.actions,Gj=$j.reducer,Qj=[{id:"news001",title:"Reliance Industries Reports Strong Q3 Results, Beats Estimates",summary:"Reliance Industries posted a 12% increase in net profit for Q3, driven by strong performance in retail and digital services segments.",category:"earnings",source:"Economic Times",author:"Financial Reporter",publishedAt:new Date("2024-01-15T09:30:00").toISOString(),readTime:3,imageUrl:"/api/placeholder/400/200",tags:["RELIANCE","Earnings","Q3 Results"],sentiment:"positive",views:1250,likes:89,isBookmarked:!1,relatedStocks:["RELIANCE"]},{id:"news002",title:"IT Sector Outlook: TCS and Infosys Lead Digital Transformation Wave",summary:"Indian IT giants are capitalizing on global digital transformation trends, with strong order books and margin improvements.",category:"sector",source:"Business Standard",author:"Tech Analyst",publishedAt:new Date("2024-01-15T08:45:00").toISOString(),readTime:5,imageUrl:"/api/placeholder/400/200",tags:["TCS","INFY","IT Sector","Digital"],sentiment:"positive",views:980,likes:67,isBookmarked:!0,relatedStocks:["TCS","INFY","WIPRO"]}],Jj=tw("news/fetchNews",async({category:e="all",limit:t=20},{rejectWithValue:n})=>{try{const s=await _r.getNews({category:e,limit:t});return s.success?s.data:n(s.message)}catch(s){return Qj}}),Xj=tw("news/toggleBookmark",async(e,{getState:t,rejectWithValue:n})=>{try{const i=t().news.articles.find(t=>t.id===e);if(!i)return n("Article not found");const r={...i,isBookmarked:!i.isBookmarked};try{await _r.toggleBookmark(e)}catch(s){}return r}catch(s){return n(s.message||"Failed to toggle bookmark")}}),Kj=ow({name:"news",initialState:{articles:[],categories:["all","market","earnings","sector","policy"],activeCategory:"all",isLoading:!1,error:null,lastUpdated:null},reducers:{clearError:e=>{e.error=null},setActiveCategory:(e,t)=>{e.activeCategory=t.payload},updateArticleViews:(e,t)=>{const n=t.payload,s=e.articles.find(e=>e.id===n);s&&(s.views+=1)}},extraReducers:e=>{e.addCase(Jj.pending,e=>{e.isLoading=!0,e.error=null}).addCase(Jj.fulfilled,(e,t)=>{e.isLoading=!1,e.articles=t.payload,e.lastUpdated=(new Date).toISOString()}).addCase(Jj.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload}).addCase(Xj.fulfilled,(e,t)=>{const n=t.payload,s=e.articles.findIndex(e=>e.id===n.id);s>=0&&(e.articles[s]=n)})}}),{clearError:Zj,setActiveCategory:ek,updateArticleViews:tk}=Kj.actions,nk=Kj.reducer,sk=ow({name:"ui",initialState:{theme:localStorage.getItem("theme")||"light",notifications:[],modals:{buyStock:{isOpen:!1,data:null},sellStock:{isOpen:!1,data:null},addToWatchlist:{isOpen:!1,data:null},priceAlert:{isOpen:!1,data:null},tradeConfirmation:{isOpen:!1,data:null}},loading:{global:!1,portfolio:!1,trading:!1,watchlist:!1},toast:{isVisible:!1,message:"",type:"info",duration:3e3}},reducers:{setTheme:(e,t)=>{e.theme=t.payload,localStorage.setItem("theme",t.payload),document.documentElement.setAttribute("data-theme",t.payload)},toggleTheme:e=>{const t="light"===e.theme?"dark":"light";e.theme=t,localStorage.setItem("theme",t),document.documentElement.setAttribute("data-theme",t)},openModal:(e,t)=>{const{modalName:n,data:s}=t.payload;e.modals[n]&&(e.modals[n].isOpen=!0,e.modals[n].data=s||null)},closeModal:(e,t)=>{const n=t.payload;e.modals[n]&&(e.modals[n].isOpen=!1,e.modals[n].data=null)},closeAllModals:e=>{Object.keys(e.modals).forEach(t=>{e.modals[t].isOpen=!1,e.modals[t].data=null})},setLoading:(e,t)=>{const{key:n,value:s}=t.payload;e.loading.hasOwnProperty(n)&&(e.loading[n]=s)},setGlobalLoading:(e,t)=>{e.loading.global=t.payload},showToast:(e,t)=>{const{message:n,type:s="info",duration:i=3e3}=t.payload;e.toast={isVisible:!0,message:n,type:s,duration:i}},hideToast:e=>{e.toast.isVisible=!1},showSuccessToast:(e,t)=>{e.toast={isVisible:!0,message:t.payload,type:"success",duration:3e3}},showErrorToast:(e,t)=>{e.toast={isVisible:!0,message:t.payload,type:"error",duration:5e3}},showWarningToast:(e,t)=>{e.toast={isVisible:!0,message:t.payload,type:"warning",duration:4e3}},showInfoToast:(e,t)=>{e.toast={isVisible:!0,message:t.payload,type:"info",duration:3e3}}}}),{setTheme:ik,toggleTheme:rk,openModal:ak,closeModal:ok,closeAllModals:lk,setLoading:ck,setGlobalLoading:uk,showToast:hk,hideToast:dk,showSuccessToast:mk,showErrorToast:pk,showWarningToast:fk,showInfoToast:gk}=sk.actions,yk=sk.reducer,vk=tw("stocks/fetchIndianStockQuote",async(e,{rejectWithValue:t})=>{var n,s;try{return{symbol:e,data:await Sr(e)}}catch(i){return t((null==(s=null==(n=i.response)?void 0:n.data)?void 0:s.message)||"Failed to fetch stock quote")}}),xk=tw("stocks/fetchIndianMarketMovers",async(e,{rejectWithValue:t})=>{var n,s;try{return await Pr()}catch(i){return t((null==(s=null==(n=i.response)?void 0:n.data)?void 0:s.message)||"Failed to fetch market movers")}}),bk=tw("stocks/fetchNiftyData",async(e,{rejectWithValue:t})=>{var n,s;try{return await Sr("^NSEI")}catch(i){return t((null==(s=null==(n=i.response)?void 0:n.data)?void 0:s.message)||"Failed to fetch Nifty data")}}),wk=tw("stocks/fetchSensexData",async(e,{rejectWithValue:t})=>{var n,s;try{return await Sr("^BSESN")}catch(i){return t((null==(s=null==(n=i.response)?void 0:n.data)?void 0:s.message)||"Failed to fetch Sensex data")}}),jk=tw("stocks/fetchBatchStockQuotes",async(e,{rejectWithValue:t})=>{var n,s;try{return await Cr(e)}catch(i){return t((null==(s=null==(n=i.response)?void 0:n.data)?void 0:s.message)||"Failed to fetch batch quotes")}}),kk=ow({name:"stocks",initialState:{nifty:{data:null,loading:!1,error:null,lastUpdated:null},sensex:{data:null,loading:!1,error:null,lastUpdated:null},quotes:{},topGainers:[],topLosers:[],mostActive:[],realTimeUpdates:!0,updateInterval:3e4,lastGlobalUpdate:null,isLoading:!1,error:null,priceChanges:{},marketStatus:{isOpen:!1,nextOpen:null,nextClose:null,timezone:"Asia/Kolkata"}},reducers:{updateStockPrice:(e,t)=>{const{symbol:n,price:s,change:i,changePercent:r,volume:a,timestamp:o}=t.payload;e.quotes[n]&&e.quotes[n].price!==s&&(e.priceChanges[n]={oldPrice:e.quotes[n].price,newPrice:s,direction:s>e.quotes[n].price?"up":"down",timestamp:Date.now()}),e.quotes[n]={...e.quotes[n],price:s,change:i,changePercent:r,volume:a,lastUpdated:o||Date.now()}},updateBatchPrices:(e,t)=>{const n=t.payload,s=Date.now();n.forEach(t=>{const{symbol:n,price:i,change:r,changePercent:a,volume:o}=t;e.quotes[n]&&e.quotes[n].price!==i&&(e.priceChanges[n]={oldPrice:e.quotes[n].price,newPrice:i,direction:i>e.quotes[n].price?"up":"down",timestamp:s}),e.quotes[n]={...e.quotes[n],price:i,change:r,changePercent:a,volume:o,lastUpdated:s}}),e.lastGlobalUpdate=s},clearPriceChanges:e=>{e.priceChanges={}},toggleRealTimeUpdates:e=>{e.realTimeUpdates=!e.realTimeUpdates},setUpdateInterval:(e,t)=>{e.updateInterval=t.payload},updateMarketStatus:(e,t)=>{e.marketStatus={...e.marketStatus,...t.payload}},clearError:e=>{e.error=null,e.nifty.error=null,e.sensex.error=null}},extraReducers:e=>{e.addCase(vk.pending,e=>{e.isLoading=!0,e.error=null}).addCase(vk.fulfilled,(e,t)=>{e.isLoading=!1;const{symbol:n,data:s}=t.payload;e.quotes[n]={...s,lastUpdated:Date.now()}}).addCase(vk.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload}),e.addCase(xk.pending,e=>{e.isLoading=!0}).addCase(xk.fulfilled,(e,t)=>{e.isLoading=!1;const{gainers:n,losers:s,mostActive:i}=t.payload;e.topGainers=n||[],e.topLosers=s||[],e.mostActive=i||[],e.lastGlobalUpdate=Date.now()}).addCase(xk.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload}),e.addCase(bk.pending,e=>{e.nifty.loading=!0,e.nifty.error=null}).addCase(bk.fulfilled,(e,t)=>{e.nifty.loading=!1,e.nifty.data=t.payload,e.nifty.lastUpdated=Date.now()}).addCase(bk.rejected,(e,t)=>{e.nifty.loading=!1,e.nifty.error=t.payload}),e.addCase(wk.pending,e=>{e.sensex.loading=!0,e.sensex.error=null}).addCase(wk.fulfilled,(e,t)=>{e.sensex.loading=!1,e.sensex.data=t.payload,e.sensex.lastUpdated=Date.now()}).addCase(wk.rejected,(e,t)=>{e.sensex.loading=!1,e.sensex.error=t.payload}),e.addCase(jk.pending,e=>{e.isLoading=!0}).addCase(jk.fulfilled,(e,t)=>{e.isLoading=!1;t.payload.forEach(t=>{e.quotes[t.symbol]={...t,lastUpdated:Date.now()}}),e.lastGlobalUpdate=Date.now()}).addCase(jk.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload})}}),{updateStockPrice:Nk,updateBatchPrices:Sk,clearPriceChanges:Ck,toggleRealTimeUpdates:Pk,setUpdateInterval:Ek,updateMarketStatus:Tk,clearError:Lk}=kk.actions,Mk=function(e){const t=function(e){const{thunk:t=!0,immutableCheck:n=!0,serializableCheck:s=!0,actionCreatorCheck:i=!0}=e??{};let r=new Vb;return t&&("boolean"==typeof t?r.push(Bb):r.push(zb(t.extraArgument))),r},{reducer:n,middleware:s,devTools:i=!0,preloadedState:r,enhancers:a}=e||{};let o,l;if("function"==typeof n)o=n;else{if(!Hx(n))throw new Error(cw(1));o=Yx(n)}l="function"==typeof s?s(t):t();let c=Gx;i&&(c=Wb({trace:!1,..."object"==typeof i&&i}));const u=function(...e){return t=>(n,s)=>{const i=t(n,s);let r=()=>{throw new Error(Wx(15))};const a={getState:i.getState,dispatch:(e,...t)=>r(e,...t)},o=e.map(e=>e(a));return r=Gx(...o)(i.dispatch),{...i,dispatch:r}}}(...l),h=Yb(u);return qx(o,r,c(..."function"==typeof a?a(h):h()))}({reducer:function(e,t){var n=void 0!==e.version?e.version:-1;e.debug;var s=void 0===e.stateReconciler?bw:e.stateReconciler,i=e.getStoredState||kw,r=void 0!==e.timeout?e.timeout:5e3,a=null,o=!1,l=!0,c=function(e){return e._persist.rehydrated&&a&&!l&&a.update(e),e};return function(u,h){var d=u||{},m=d._persist,p=Tw(d,["_persist"]);if(h.type===pw){var f=!1,g=function(t,n){f||(h.rehydrate(e.key,t,n),f=!0)};if(r&&setTimeout(function(){!f&&g(void 0,new Error('redux-persist: persist timed out for persist key "'.concat(e.key,'"')))},r),l=!1,a||(a=ww(e)),m)return Pw({},t(p,h),{_persist:m});if("function"!=typeof h.rehydrate||"function"!=typeof h.register)throw new Error("redux-persist: either rehydrate or register is not a function on the PERSIST action. This can happen if the action is being replayed. This is an unexplored use case, please open an issue and we will figure out a resolution.");return h.register(e.key),i(e).then(function(t){(e.migrate||function(e,t){return Promise.resolve(e)})(t,n).then(function(e){g(e)},function(e){g(void 0,e)})},function(e){g(void 0,e)}),Pw({},t(p,h),{_persist:{version:n,rehydrated:!1}})}if(h.type===fw)return o=!0,h.result(function(e){var t=e.storage,n="".concat(void 0!==e.keyPrefix?e.keyPrefix:uw).concat(e.key);return t.removeItem(n,Sw)}(e)),Pw({},t(p,h),{_persist:m});if(h.type===hw)return h.result(a&&a.flush()),Pw({},t(p,h),{_persist:m});if(h.type===mw)l=!0;else if(h.type===dw){if(o)return Pw({},p,{_persist:Pw({},m,{rehydrated:!0})});if(h.key===e.key){var y=t(p,h),v=h.payload,x=Pw({},!1!==s&&void 0!==v?s(v,u,y,e):y,{_persist:Pw({},m,{rehydrated:!0})});return c(x)}}if(!m)return t(u,h);var b=t(p,h);return b===p?u:c(Pw({},b,{_persist:m}))}}({key:"tradebro",storage:Vw,whitelist:["auth","portfolio","trading","watchlist","orders"],blacklist:["ui","news","stocks"]},Yx({auth:ij,portfolio:pj,trading:Cj,watchlist:Bj,orders:Gj,news:nk,ui:yk,stocks:kk.reducer})),middleware:e=>e({serializableCheck:{ignoredActions:["persist/PERSIST","persist/REHYDRATE"]}}),devTools:!1}),Ik=(_k=Mk,Dk=qx(Aw,Dw,void 0),Ak=function(e){Dk.dispatch({type:gw,key:e})},Ok=function(e,t,n){var s={type:dw,payload:t,err:n,key:e};_k.dispatch(s),Dk.dispatch(s)},(Rk=Iw({},Dk,{purge:function(){var e=[];return _k.dispatch({type:fw,result:function(t){e.push(t)}}),Promise.all(e)},flush:function(){var e=[];return _k.dispatch({type:hw,result:function(t){e.push(t)}}),Promise.all(e)},pause:function(){_k.dispatch({type:mw})},persist:function(){_k.dispatch({type:pw,register:Ak,rehydrate:Ok})}})).persist(),Rk);var _k,Dk,Ak,Ok,Rk;const Fk=s.createContext(),Bk=({children:e})=>{const[t,n]=s.useState(()=>localStorage.getItem("tradebro-theme")||"light");s.useEffect(()=>{const e=document.documentElement;e.classList.remove("light-theme","dark-theme"),e.classList.add(`${t}-theme`),localStorage.setItem("tradebro-theme",t),e.setAttribute("data-theme",t)},[t]);const i={theme:t,toggleTheme:()=>{n(e=>"light"===e?"dark":"light")},setLightTheme:()=>n("light"),setDarkTheme:()=>n("dark"),isLight:"light"===t,isDark:"dark"===t};return M.jsx(Fk.Provider,{value:i,children:e})};"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").catch(()=>{})}),L(document.getElementById("root")).render(M.jsx(s.StrictMode,{children:M.jsx(X,{store:Mk,children:M.jsx(ce,{loading:M.jsx("div",{children:"Loading..."}),persistor:Ik,children:M.jsx(f,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:M.jsx(Bk,{children:M.jsx(vn,{children:M.jsx(ar,{children:M.jsx(aa,{children:M.jsx(Dd,{children:M.jsx(Rr,{children:M.jsx(fd,{children:M.jsx(Bx,{})})})})})})})})})})})}));export{Ue as F,Ft as a,pn as b,Yt as c,ct as d,M as j};
