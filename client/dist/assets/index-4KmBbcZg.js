const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/PerformanceMonitor-VL0ypXUC.js","assets/vendor-SlK7pBj5.js","assets/ui-B9qRDak7.js","assets/router-CAcH92NB.js","assets/charts-NcjUpPPG.js"])))=>i.map(i=>d[i]);
var e=Object.defineProperty,t=(t,n,s)=>((t,n,s)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[n]=s)(t,"symbol"!=typeof n?n+"":n,s);import{r as n,b as s,a,g as r,c as i}from"./vendor-SlK7pBj5.js";import{u as o,a as l,L as c,b as d,R as u,c as h,N as m,B as p}from"./router-CAcH92NB.js";import{G as f,A as g,m as y,u as x,a as v}from"./ui-B9qRDak7.js";import{F as b,z as j,C as w,J as k,m as N,y as S}from"./charts-NcjUpPPG.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var C={exports:{}},T={},P=n,E=Symbol.for("react.element"),L=Symbol.for("react.fragment"),I=Object.prototype.hasOwnProperty,A=P.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,O={key:!0,ref:!0,__self:!0,__source:!0};function D(e,t,n){var s,a={},r=null,i=null;for(s in void 0!==n&&(r=""+n),void 0!==t.key&&(r=""+t.key),void 0!==t.ref&&(i=t.ref),t)I.call(t,s)&&!O.hasOwnProperty(s)&&(a[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps)void 0===a[s]&&(a[s]=t[s]);return{$$typeof:E,type:e,key:r,ref:i,props:a,_owner:A.current}}T.Fragment=L,T.jsx=D,T.jsxs=D,C.exports=T;var R,M=C.exports,_=s;R=_.createRoot,_.hydrateRoot;var F={exports:{}},B={},z=n;var U="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},$=z.useSyncExternalStore,H=z.useRef,W=z.useEffect,q=z.useMemo,V=z.useDebugValue;B.useSyncExternalStoreWithSelector=function(e,t,n,s,a){var r=H(null);if(null===r.current){var i={hasValue:!1,value:null};r.current=i}else i=r.current;r=q(function(){function e(e){if(!l){if(l=!0,r=e,e=s(e),void 0!==a&&i.hasValue){var t=i.value;if(a(t,e))return o=t}return o=e}if(t=o,U(r,e))return t;var n=s(e);return void 0!==a&&a(t,n)?(r=e,t):(r=e,o=n)}var r,o,l=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]},[t,n,s,a]);var o=$(e,r[0],r[1]);return W(function(){i.hasValue=!0,i.value=o},[o]),V(o),o},F.exports=B;var Y=F.exports;var G={notify(){},get:()=>[]};var J=(()=>!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement))(),Q=(()=>"undefined"!=typeof navigator&&"ReactNative"===navigator.product)(),K=(()=>J||Q?n.useLayoutEffect:n.useEffect)(),X=Symbol.for("react-redux-context"),Z="undefined"!=typeof globalThis?globalThis:{};function ee(){if(!n.createContext)return{};const e=Z[X]??(Z[X]=new Map);let t=e.get(n.createContext);return t||(t=n.createContext(null),e.set(n.createContext,t)),t}var te=ee();var ne=function(e){const{children:t,context:s,serverState:a,store:r}=e,i=n.useMemo(()=>{const e=function(e){let t,n=G,s=0,a=!1;function r(){l.onStateChange&&l.onStateChange()}function i(){s++,t||(t=e.subscribe(r),n=function(){let e=null,t=null;return{clear(){e=null,t=null},notify(){(()=>{let t=e;for(;t;)t.callback(),t=t.next})()},get(){const t=[];let n=e;for(;n;)t.push(n),n=n.next;return t},subscribe(n){let s=!0;const a=t={callback:n,next:null,prev:t};return a.prev?a.prev.next=a:e=a,function(){s&&null!==e&&(s=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}())}function o(){s--,t&&0===s&&(t(),t=void 0,n.clear(),n=G)}const l={addNestedSub:function(e){i();const t=n.subscribe(e);let s=!1;return()=>{s||(s=!0,t(),o())}},notifyNestedSubs:function(){n.notify()},handleChangeWrapper:r,isSubscribed:function(){return a},trySubscribe:function(){a||(a=!0,i())},tryUnsubscribe:function(){a&&(a=!1,o())},getListeners:()=>n};return l}(r);return{store:r,subscription:e,getServerState:a?()=>a:void 0}},[r,a]),o=n.useMemo(()=>r.getState(),[r]);K(()=>{const{subscription:e}=i;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),o!==r.getState()&&e.notifyNestedSubs(),()=>{e.tryUnsubscribe(),e.onStateChange=void 0}},[i,o]);const l=s||te;return n.createElement(l.Provider,{value:i},t)};function se(e=te){return function(){return n.useContext(e)}}var ae=se(),re=(e,t)=>e===t;function ie(e=te){const t=e===te?ae:se(e),s=(e,s={})=>{const{equalityFn:a=re}="function"==typeof s?{equalityFn:s}:s,r=t(),{store:i,subscription:o,getServerState:l}=r;n.useRef(!0);const c=n.useCallback({[e.name]:t=>e(t)}[e.name],[e]),d=Y.useSyncExternalStoreWithSelector(o.addNestedSub,i.getState,l||i.getState,c,a);return n.useDebugValue(d),d};return Object.assign(s,{withTypes:()=>s}),s}var oe=ie();function le(e){return(le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ce(e,t,n){return t&&function(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}(e.prototype,t),e}function de(e){return(de=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ue(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function he(e,t){return(he=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function me(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var pe=function(){function e(){var t,n,s,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return s=this,a=(t=de(e)).call.apply(t,[this].concat(i)),n=!a||"object"!==le(a)&&"function"!=typeof a?ue(s):a,me(ue(n),"state",{bootstrapped:!1}),me(ue(n),"_unsubscribe",void 0),me(ue(n),"handlePersistorState",function(){n.props.persistor.getState().bootstrapped&&(n.props.onBeforeLift?Promise.resolve(n.props.onBeforeLift()).finally(function(){return n.setState({bootstrapped:!0})}):n.setState({bootstrapped:!0}),n._unsubscribe&&n._unsubscribe())}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&he(e,t)}(e,n.PureComponent),ce(e,[{key:"componentDidMount",value:function(){this._unsubscribe=this.props.persistor.subscribe(this.handlePersistorState),this.handlePersistorState()}},{key:"componentWillUnmount",value:function(){this._unsubscribe&&this._unsubscribe()}},{key:"render",value:function(){return"function"==typeof this.props.children?this.props.children(this.state.bootstrapped):this.state.bootstrapped?this.props.children:this.props.loading}}]),e}();me(pe,"defaultProps",{children:null,loading:null});const fe={};function ge(e){var t,n,s="";if("string"==typeof e||"number"==typeof e)s+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=ge(e[t]))&&(s&&(s+=" "),s+=n);else for(t in e)e[t]&&(s&&(s+=" "),s+=t);return s}function ye(){for(var e,t,n=0,s="";n<arguments.length;)(e=arguments[n++])&&(t=ge(e))&&(s&&(s+=" "),s+=t);return s}const xe=e=>"number"==typeof e&&!isNaN(e),ve=e=>"string"==typeof e,be=e=>"function"==typeof e,je=e=>ve(e)||be(e)?e:null,we=e=>n.isValidElement(e)||ve(e)||be(e)||xe(e);function ke(e){let{enter:t,exit:s,appendPosition:r=!1,collapse:i=!0,collapseDuration:o=300}=e;return function(e){let{children:l,position:c,preventExitTransition:d,done:u,nodeRef:h,isIn:m}=e;const p=r?`${t}--${c}`:t,f=r?`${s}--${c}`:s,g=n.useRef(0);return n.useLayoutEffect(()=>{const e=h.current,t=p.split(" "),n=s=>{s.target===h.current&&(e.dispatchEvent(new Event("d")),e.removeEventListener("animationend",n),e.removeEventListener("animationcancel",n),0===g.current&&"animationcancel"!==s.type&&e.classList.remove(...t))};e.classList.add(...t),e.addEventListener("animationend",n),e.addEventListener("animationcancel",n)},[]),n.useEffect(()=>{const e=h.current,t=()=>{e.removeEventListener("animationend",t),i?function(e,t,n){void 0===n&&(n=300);const{scrollHeight:s,style:a}=e;requestAnimationFrame(()=>{a.minHeight="initial",a.height=s+"px",a.transition=`all ${n}ms`,requestAnimationFrame(()=>{a.height="0",a.padding="0",a.margin="0",setTimeout(t,n)})})}(e,u,o):u()};m||(d?t():(g.current=1,e.className+=` ${f}`,e.addEventListener("animationend",t)))},[m]),a.createElement(a.Fragment,null,l)}}function Ne(e,t){return null!=e?{content:e.content,containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,status:t}:{}}const Se={list:new Map,emitQueue:new Map,on(e,t){return this.list.has(e)||this.list.set(e,[]),this.list.get(e).push(t),this},off(e,t){if(t){const n=this.list.get(e).filter(e=>e!==t);return this.list.set(e,n),this}return this.list.delete(e),this},cancelEmit(e){const t=this.emitQueue.get(e);return t&&(t.forEach(clearTimeout),this.emitQueue.delete(e)),this},emit(e){this.list.has(e)&&this.list.get(e).forEach(t=>{const n=setTimeout(()=>{t(...[].slice.call(arguments,1))},0);this.emitQueue.has(e)||this.emitQueue.set(e,[]),this.emitQueue.get(e).push(n)})}},Ce=e=>{let{theme:t,type:n,...s}=e;return a.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:"colored"===t?"currentColor":`var(--toastify-icon-color-${n})`,...s})},Te={info:function(e){return a.createElement(Ce,{...e},a.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(e){return a.createElement(Ce,{...e},a.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(e){return a.createElement(Ce,{...e},a.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(e){return a.createElement(Ce,{...e},a.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return a.createElement("div",{className:"Toastify__spinner"})}};function Pe(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientX:e.clientX}function Ee(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientY:e.clientY}function Le(e){let{closeToast:t,theme:n,ariaLabel:s="close"}=e;return a.createElement("button",{className:`Toastify__close-button Toastify__close-button--${n}`,type:"button",onClick:e=>{e.stopPropagation(),t(e)},"aria-label":s},a.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},a.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function Ie(e){let{delay:t,isRunning:n,closeToast:s,type:r="default",hide:i,className:o,style:l,controlledProgress:c,progress:d,rtl:u,isIn:h,theme:m}=e;const p=i||c&&0===d,f={...l,animationDuration:`${t}ms`,animationPlayState:n?"running":"paused",opacity:p?0:1};c&&(f.transform=`scaleX(${d})`);const g=ye("Toastify__progress-bar",c?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${m}`,`Toastify__progress-bar--${r}`,{"Toastify__progress-bar--rtl":u}),y=be(o)?o({rtl:u,type:r,defaultClassName:g}):ye(g,o);return a.createElement("div",{role:"progressbar","aria-hidden":p?"true":"false","aria-label":"notification timer",className:y,style:f,[c&&d>=1?"onTransitionEnd":"onAnimationEnd"]:c&&d<1?null:()=>{h&&s()}})}const Ae=e=>{const{isRunning:t,preventExitTransition:s,toastRef:r,eventHandlers:i}=function(e){const[t,s]=n.useState(!1),[a,r]=n.useState(!1),i=n.useRef(null),o=n.useRef({start:0,x:0,y:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,boundingRect:null,didMove:!1}).current,l=n.useRef(e),{autoClose:c,pauseOnHover:d,closeToast:u,onClick:h,closeOnClick:m}=e;function p(t){if(e.draggable){"touchstart"===t.nativeEvent.type&&t.nativeEvent.preventDefault(),o.didMove=!1,document.addEventListener("mousemove",x),document.addEventListener("mouseup",v),document.addEventListener("touchmove",x),document.addEventListener("touchend",v);const n=i.current;o.canCloseOnClick=!0,o.canDrag=!0,o.boundingRect=n.getBoundingClientRect(),n.style.transition="",o.x=Pe(t.nativeEvent),o.y=Ee(t.nativeEvent),"x"===e.draggableDirection?(o.start=o.x,o.removalDistance=n.offsetWidth*(e.draggablePercent/100)):(o.start=o.y,o.removalDistance=n.offsetHeight*(80===e.draggablePercent?1.5*e.draggablePercent:e.draggablePercent/100))}}function f(t){if(o.boundingRect){const{top:n,bottom:s,left:a,right:r}=o.boundingRect;"touchend"!==t.nativeEvent.type&&e.pauseOnHover&&o.x>=a&&o.x<=r&&o.y>=n&&o.y<=s?y():g()}}function g(){s(!0)}function y(){s(!1)}function x(n){const s=i.current;o.canDrag&&s&&(o.didMove=!0,t&&y(),o.x=Pe(n),o.y=Ee(n),o.delta="x"===e.draggableDirection?o.x-o.start:o.y-o.start,o.start!==o.x&&(o.canCloseOnClick=!1),s.style.transform=`translate${e.draggableDirection}(${o.delta}px)`,s.style.opacity=""+(1-Math.abs(o.delta/o.removalDistance)))}function v(){document.removeEventListener("mousemove",x),document.removeEventListener("mouseup",v),document.removeEventListener("touchmove",x),document.removeEventListener("touchend",v);const t=i.current;if(o.canDrag&&o.didMove&&t){if(o.canDrag=!1,Math.abs(o.delta)>o.removalDistance)return r(!0),void e.closeToast();t.style.transition="transform 0.2s, opacity 0.2s",t.style.transform=`translate${e.draggableDirection}(0)`,t.style.opacity="1"}}n.useEffect(()=>{l.current=e}),n.useEffect(()=>(i.current&&i.current.addEventListener("d",g,{once:!0}),be(e.onOpen)&&e.onOpen(n.isValidElement(e.children)&&e.children.props),()=>{const e=l.current;be(e.onClose)&&e.onClose(n.isValidElement(e.children)&&e.children.props)}),[]),n.useEffect(()=>(e.pauseOnFocusLoss&&(document.hasFocus()||y(),window.addEventListener("focus",g),window.addEventListener("blur",y)),()=>{e.pauseOnFocusLoss&&(window.removeEventListener("focus",g),window.removeEventListener("blur",y))}),[e.pauseOnFocusLoss]);const b={onMouseDown:p,onTouchStart:p,onMouseUp:f,onTouchEnd:f};return c&&d&&(b.onMouseEnter=y,b.onMouseLeave=g),m&&(b.onClick=e=>{h&&h(e),o.canCloseOnClick&&u()}),{playToast:g,pauseToast:y,isRunning:t,preventExitTransition:a,toastRef:i,eventHandlers:b}}(e),{closeButton:o,children:l,autoClose:c,onClick:d,type:u,hideProgressBar:h,closeToast:m,transition:p,position:f,className:g,style:y,bodyClassName:x,bodyStyle:v,progressClassName:b,progressStyle:j,updateId:w,role:k,progress:N,rtl:S,toastId:C,deleteToast:T,isIn:P,isLoading:E,iconOut:L,closeOnClick:I,theme:A}=e,O=ye("Toastify__toast",`Toastify__toast-theme--${A}`,`Toastify__toast--${u}`,{"Toastify__toast--rtl":S},{"Toastify__toast--close-on-click":I}),D=be(g)?g({rtl:S,position:f,type:u,defaultClassName:O}):ye(O,g),R=!!N||!c,M={closeToast:m,type:u,theme:A};let _=null;return!1===o||(_=be(o)?o(M):n.isValidElement(o)?n.cloneElement(o,M):Le(M)),a.createElement(p,{isIn:P,done:T,position:f,preventExitTransition:s,nodeRef:r},a.createElement("div",{id:C,onClick:d,className:D,...i,style:y,ref:r},a.createElement("div",{...P&&{role:k},className:be(x)?x({type:u}):ye("Toastify__toast-body",x),style:v},null!=L&&a.createElement("div",{className:ye("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!E})},L),a.createElement("div",null,l)),_,a.createElement(Ie,{...w&&!R?{key:`pb-${w}`}:{},rtl:S,theme:A,delay:c,isRunning:t,isIn:P,closeToast:m,hide:h,type:u,style:j,className:b,controlledProgress:R,progress:N||0})))},Oe=function(e,t){return void 0===t&&(t=!1),{enter:`Toastify--animate Toastify__${e}-enter`,exit:`Toastify--animate Toastify__${e}-exit`,appendPosition:t}},De=ke(Oe("bounce",!0));ke(Oe("slide",!0)),ke(Oe("zoom")),ke(Oe("flip"));const Re=n.forwardRef((e,t)=>{const{getToastToRender:s,containerRef:r,isToastActive:i}=function(e){const[,t]=n.useReducer(e=>e+1,0),[s,a]=n.useState([]),r=n.useRef(null),i=n.useRef(new Map).current,o=e=>-1!==s.indexOf(e),l=n.useRef({toastKey:1,displayedToast:0,count:0,queue:[],props:e,containerId:null,isToastActive:o,getToast:e=>i.get(e)}).current;function c(e){let{containerId:t}=e;const{limit:n}=l.props;!n||t&&l.containerId!==t||(l.count-=l.queue.length,l.queue=[])}function d(e){a(t=>null==e?[]:t.filter(t=>t!==e))}function u(){const{toastContent:e,toastProps:t,staleId:n}=l.queue.shift();m(e,t,n)}function h(e,s){let{delay:a,staleId:o,...c}=s;if(!we(e)||(h=c,!r.current||l.props.enableMultiContainer&&h.containerId!==l.props.containerId||i.has(h.toastId)&&null==h.updateId))return;var h;const{toastId:p,updateId:f,data:g}=c,{props:y}=l,x=()=>d(p),v=null==f;v&&l.count++;const b={...y,style:y.toastStyle,key:l.toastKey++,...Object.fromEntries(Object.entries(c).filter(e=>{let[t,n]=e;return null!=n})),toastId:p,updateId:f,data:g,closeToast:x,isIn:!1,className:je(c.className||y.toastClassName),bodyClassName:je(c.bodyClassName||y.bodyClassName),progressClassName:je(c.progressClassName||y.progressClassName),autoClose:!c.isLoading&&(j=c.autoClose,w=y.autoClose,!1===j||xe(j)&&j>0?j:w),deleteToast(){const e=Ne(i.get(p),"removed");i.delete(p),Se.emit(4,e);const n=l.queue.length;if(l.count=null==p?l.count-l.displayedToast:l.count-1,l.count<0&&(l.count=0),n>0){const e=null==p?l.props.limit:1;if(1===n||1===e)l.displayedToast++,u();else{const t=e>n?n:e;l.displayedToast=t;for(let e=0;e<t;e++)u()}}else t()}};var j,w;b.iconOut=function(e){let{theme:t,type:s,isLoading:a,icon:r}=e,i=null;const o={theme:t,type:s};return!1===r||(be(r)?i=r(o):n.isValidElement(r)?i=n.cloneElement(r,o):ve(r)||xe(r)?i=r:a?i=Te.spinner():s in Te&&(i=Te[s](o))),i}(b),be(c.onOpen)&&(b.onOpen=c.onOpen),be(c.onClose)&&(b.onClose=c.onClose),b.closeButton=y.closeButton,!1===c.closeButton||we(c.closeButton)?b.closeButton=c.closeButton:!0===c.closeButton&&(b.closeButton=!we(y.closeButton)||y.closeButton);let k=e;n.isValidElement(e)&&!ve(e.type)?k=n.cloneElement(e,{closeToast:x,toastProps:b,data:g}):be(e)&&(k=e({closeToast:x,toastProps:b,data:g})),y.limit&&y.limit>0&&l.count>y.limit&&v?l.queue.push({toastContent:k,toastProps:b,staleId:o}):xe(a)?setTimeout(()=>{m(k,b,o)},a):m(k,b,o)}function m(e,t,n){const{toastId:s}=t;n&&i.delete(n);const r={content:e,props:t};i.set(s,r),a(e=>[...e,s].filter(e=>e!==n)),Se.emit(4,Ne(r,null==r.props.updateId?"added":"updated"))}return n.useEffect(()=>(l.containerId=e.containerId,Se.cancelEmit(3).on(0,h).on(1,e=>r.current&&d(e)).on(5,c).emit(2,l),()=>{i.clear(),Se.emit(3,l)}),[]),n.useEffect(()=>{l.props=e,l.isToastActive=o,l.displayedToast=s.length}),{getToastToRender:function(t){const n=new Map,s=Array.from(i.values());return e.newestOnTop&&s.reverse(),s.forEach(e=>{const{position:t}=e.props;n.has(t)||n.set(t,[]),n.get(t).push(e)}),Array.from(n,e=>t(e[0],e[1]))},containerRef:r,isToastActive:o}}(e),{className:o,style:l,rtl:c,containerId:d}=e;function u(e){const t=ye("Toastify__toast-container",`Toastify__toast-container--${e}`,{"Toastify__toast-container--rtl":c});return be(o)?o({position:e,rtl:c,defaultClassName:t}):ye(t,je(o))}return n.useEffect(()=>{t&&(t.current=r.current)},[]),a.createElement("div",{ref:r,className:"Toastify",id:d},s((e,t)=>{const n=t.length?{...l}:{...l,pointerEvents:"none"};return a.createElement("div",{className:u(e),style:n,key:`container-${e}`},t.map((e,n)=>{let{content:s,props:r}=e;return a.createElement(Ae,{...r,isIn:i(r.toastId),style:{...r.style,"--nth":n+1,"--len":t.length},key:`toast-${r.key}`},s)}))}))});Re.displayName="ToastContainer",Re.defaultProps={position:"top-right",transition:De,autoClose:5e3,closeButton:Le,pauseOnHover:!0,pauseOnFocusLoss:!0,closeOnClick:!0,draggable:!0,draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};let Me,_e=new Map,Fe=[],Be=1;function ze(){return""+Be++}function Ue(e){return e&&(ve(e.toastId)||xe(e.toastId))?e.toastId:ze()}function $e(e,t){return _e.size>0?Se.emit(0,e,t):Fe.push({content:e,options:t}),t.toastId}function He(e,t){return{...t,type:t&&t.type||e,toastId:Ue(t)}}function We(e){return(t,n)=>$e(t,He(e,n))}function qe(e,t){return $e(e,He("default",t))}function Ve(e){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"22 12 18 12 15 21 9 3 6 12 2 12"}}]})(e)}function Ye(e){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"}},{tag:"line",attr:{x1:"12",y1:"8",x2:"12",y2:"12"}},{tag:"line",attr:{x1:"12",y1:"16",x2:"12.01",y2:"16"}}]})(e)}function Ge(e){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}},{tag:"line",attr:{x1:"12",y1:"9",x2:"12",y2:"13"}},{tag:"line",attr:{x1:"12",y1:"17",x2:"12.01",y2:"17"}}]})(e)}function Je(e){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"7",y1:"7",x2:"17",y2:"17"}},{tag:"polyline",attr:{points:"17 7 17 17 7 17"}}]})(e)}function Qe(e){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"}},{tag:"polyline",attr:{points:"19 12 12 19 5 12"}}]})(e)}function Ke(e){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"12",x2:"5",y2:"12"}},{tag:"polyline",attr:{points:"12 19 5 12 12 5"}}]})(e)}function Xe(e){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"}},{tag:"polyline",attr:{points:"12 5 19 12 12 19"}}]})(e)}function Ze(e){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"7",y1:"17",x2:"17",y2:"7"}},{tag:"polyline",attr:{points:"7 7 17 7 17 17"}}]})(e)}function et(e){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"19",x2:"12",y2:"5"}},{tag:"polyline",attr:{points:"5 12 12 5 19 12"}}]})(e)}function tt(e){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"8",r:"7"}},{tag:"polyline",attr:{points:"8.21 13.89 7 23 12 20 17 23 15.79 13.88"}}]})(e)}function nt(e){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"20",x2:"18",y2:"10"}},{tag:"line",attr:{x1:"12",y1:"20",x2:"12",y2:"4"}},{tag:"line",attr:{x1:"6",y1:"20",x2:"6",y2:"14"}}]})(e)}function st(e){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"}},{tag:"path",attr:{d:"M13.73 21a2 2 0 0 1-3.46 0"}}]})(e)}function at(e){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"}}]})(e)}function rt(e){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"}},{tag:"path",attr:{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"}}]})(e)}function it(e){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}},{tag:"line",attr:{x1:"16",y1:"2",x2:"16",y2:"6"}},{tag:"line",attr:{x1:"8",y1:"2",x2:"8",y2:"6"}},{tag:"line",attr:{x1:"3",y1:"10",x2:"21",y2:"10"}}]})(e)}function ot(e){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}},{tag:"circle",attr:{cx:"12",cy:"13",r:"4"}}]})(e)}function lt(e){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}},{tag:"polyline",attr:{points:"22 4 12 14.01 9 11.01"}}]})(e)}function ct(e){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"20 6 9 17 4 12"}}]})(e)}function dt(e){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"}},{tag:"polyline",attr:{points:"12 6 12 12 16 14"}}]})(e)}function ut(e){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3H6a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3V6a3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3h12a3 3 0 0 0 3-3 3 3 0 0 0-3-3z"}}]})(e)}function ht(e){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"9 10 4 15 9 20"}},{tag:"path",attr:{d:"M20 4v7a4 4 0 0 1-4 4H4"}}]})(e)}function mt(e){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"4",y:"4",width:"16",height:"16",rx:"2",ry:"2"}},{tag:"rect",attr:{x:"9",y:"9",width:"6",height:"6"}},{tag:"line",attr:{x1:"9",y1:"1",x2:"9",y2:"4"}},{tag:"line",attr:{x1:"15",y1:"1",x2:"15",y2:"4"}},{tag:"line",attr:{x1:"9",y1:"20",x2:"9",y2:"23"}},{tag:"line",attr:{x1:"15",y1:"20",x2:"15",y2:"23"}},{tag:"line",attr:{x1:"20",y1:"9",x2:"23",y2:"9"}},{tag:"line",attr:{x1:"20",y1:"14",x2:"23",y2:"14"}},{tag:"line",attr:{x1:"1",y1:"9",x2:"4",y2:"9"}},{tag:"line",attr:{x1:"1",y1:"14",x2:"4",y2:"14"}}]})(e)}function pt(e){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"ellipse",attr:{cx:"12",cy:"5",rx:"9",ry:"3"}},{tag:"path",attr:{d:"M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"}},{tag:"path",attr:{d:"M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"}}]})(e)}function ft(e){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"23"}},{tag:"path",attr:{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"}}]})(e)}function gt(e){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}},{tag:"polyline",attr:{points:"7 10 12 15 17 10"}},{tag:"line",attr:{x1:"12",y1:"15",x2:"12",y2:"3"}}]})(e)}function yt(e){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 20h9"}},{tag:"path",attr:{d:"M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"}}]})(e)}function xt(e){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}},{tag:"path",attr:{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"}}]})(e)}function vt(e){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}},{tag:"polyline",attr:{points:"15 3 21 3 21 9"}},{tag:"line",attr:{x1:"10",y1:"14",x2:"21",y2:"3"}}]})(e)}function bt(e){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}},{tag:"circle",attr:{cx:"12",cy:"12",r:"3"}}]})(e)}function jt(e){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}},{tag:"polyline",attr:{points:"14 2 14 8 20 8"}},{tag:"line",attr:{x1:"16",y1:"13",x2:"8",y2:"13"}},{tag:"line",attr:{x1:"16",y1:"17",x2:"8",y2:"17"}},{tag:"polyline",attr:{points:"10 9 9 9 8 9"}}]})(e)}function wt(e){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"}}]})(e)}function kt(e){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"20 12 20 22 4 22 4 12"}},{tag:"rect",attr:{x:"2",y:"7",width:"20",height:"5"}},{tag:"line",attr:{x1:"12",y1:"22",x2:"12",y2:"7"}},{tag:"path",attr:{d:"M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z"}},{tag:"path",attr:{d:"M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z"}}]})(e)}function Nt(e){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"}},{tag:"line",attr:{x1:"2",y1:"12",x2:"22",y2:"12"}},{tag:"path",attr:{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"}}]})(e)}function St(e){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"7",height:"7"}},{tag:"rect",attr:{x:"14",y:"3",width:"7",height:"7"}},{tag:"rect",attr:{x:"14",y:"14",width:"7",height:"7"}},{tag:"rect",attr:{x:"3",y:"14",width:"7",height:"7"}}]})(e)}function Ct(e){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}},{tag:"polyline",attr:{points:"9 22 9 12 15 12 15 22"}}]})(e)}function Tt(e){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"}},{tag:"line",attr:{x1:"12",y1:"16",x2:"12",y2:"12"}},{tag:"line",attr:{x1:"12",y1:"8",x2:"12.01",y2:"8"}}]})(e)}function Pt(e){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"}}]})(e)}function Et(e){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"12 2 2 7 12 12 22 7 12 2"}},{tag:"polyline",attr:{points:"2 17 12 22 22 17"}},{tag:"polyline",attr:{points:"2 12 12 17 22 12"}}]})(e)}function Lt(e){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"8",y1:"6",x2:"21",y2:"6"}},{tag:"line",attr:{x1:"8",y1:"12",x2:"21",y2:"12"}},{tag:"line",attr:{x1:"8",y1:"18",x2:"21",y2:"18"}},{tag:"line",attr:{x1:"3",y1:"6",x2:"3.01",y2:"6"}},{tag:"line",attr:{x1:"3",y1:"12",x2:"3.01",y2:"12"}},{tag:"line",attr:{x1:"3",y1:"18",x2:"3.01",y2:"18"}}]})(e)}function It(e){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"2",x2:"12",y2:"6"}},{tag:"line",attr:{x1:"12",y1:"18",x2:"12",y2:"22"}},{tag:"line",attr:{x1:"4.93",y1:"4.93",x2:"7.76",y2:"7.76"}},{tag:"line",attr:{x1:"16.24",y1:"16.24",x2:"19.07",y2:"19.07"}},{tag:"line",attr:{x1:"2",y1:"12",x2:"6",y2:"12"}},{tag:"line",attr:{x1:"18",y1:"12",x2:"22",y2:"12"}},{tag:"line",attr:{x1:"4.93",y1:"19.07",x2:"7.76",y2:"16.24"}},{tag:"line",attr:{x1:"16.24",y1:"7.76",x2:"19.07",y2:"4.93"}}]})(e)}function At(e){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}},{tag:"path",attr:{d:"M7 11V7a5 5 0 0 1 10 0v4"}}]})(e)}function Ot(e){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4"}},{tag:"polyline",attr:{points:"10 17 15 12 10 7"}},{tag:"line",attr:{x1:"15",y1:"12",x2:"3",y2:"12"}}]})(e)}function Dt(e){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}},{tag:"polyline",attr:{points:"16 17 21 12 16 7"}},{tag:"line",attr:{x1:"21",y1:"12",x2:"9",y2:"12"}}]})(e)}function Rt(e){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}},{tag:"polyline",attr:{points:"22,6 12,13 2,6"}}]})(e)}function Mt(e){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}},{tag:"circle",attr:{cx:"12",cy:"10",r:"3"}}]})(e)}function _t(e){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"3",y1:"12",x2:"21",y2:"12"}},{tag:"line",attr:{x1:"3",y1:"6",x2:"21",y2:"6"}},{tag:"line",attr:{x1:"3",y1:"18",x2:"21",y2:"18"}}]})(e)}function Ft(e){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"}}]})(e)}function Bt(e){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"1",y1:"1",x2:"23",y2:"23"}},{tag:"path",attr:{d:"M9 9v3a3 3 0 0 0 5.12 2.12M15 9.34V4a3 3 0 0 0-5.94-.6"}},{tag:"path",attr:{d:"M17 16.95A7 7 0 0 1 5 12v-2m14 0v2a7 7 0 0 1-.11 1.23"}},{tag:"line",attr:{x1:"12",y1:"19",x2:"12",y2:"23"}},{tag:"line",attr:{x1:"8",y1:"23",x2:"16",y2:"23"}}]})(e)}function zt(e){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"}},{tag:"path",attr:{d:"M19 10v2a7 7 0 0 1-14 0v-2"}},{tag:"line",attr:{x1:"12",y1:"19",x2:"12",y2:"23"}},{tag:"line",attr:{x1:"8",y1:"23",x2:"16",y2:"23"}}]})(e)}function Ut(e){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"}}]})(e)}function $t(e){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"2",y:"3",width:"20",height:"14",rx:"2",ry:"2"}},{tag:"line",attr:{x1:"8",y1:"21",x2:"16",y2:"21"}},{tag:"line",attr:{x1:"12",y1:"17",x2:"12",y2:"21"}}]})(e)}function Ht(e){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"}}]})(e)}function Wt(e){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"1"}},{tag:"circle",attr:{cx:"19",cy:"12",r:"1"}},{tag:"circle",attr:{cx:"5",cy:"12",r:"1"}}]})(e)}function qt(e){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"6",y:"4",width:"4",height:"16"}},{tag:"rect",attr:{x:"14",y:"4",width:"4",height:"16"}}]})(e)}function Vt(e){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"5",x2:"5",y2:"19"}},{tag:"circle",attr:{cx:"6.5",cy:"6.5",r:"2.5"}},{tag:"circle",attr:{cx:"17.5",cy:"17.5",r:"2.5"}}]})(e)}function Yt(e){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"}}]})(e)}function Gt(e){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21.21 15.89A10 10 0 1 1 8 2.83"}},{tag:"path",attr:{d:"M22 12A10 10 0 0 0 12 2v10z"}}]})(e)}function Jt(e){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"5 3 19 12 5 21 5 3"}}]})(e)}function Qt(e){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"}},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"}}]})(e)}function Kt(e){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 4 23 10 17 10"}},{tag:"polyline",attr:{points:"1 20 1 14 7 14"}},{tag:"path",attr:{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"}}]})(e)}function Xt(e){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}},{tag:"polyline",attr:{points:"17 21 17 13 7 13 7 21"}},{tag:"polyline",attr:{points:"7 3 7 8 15 8"}}]})(e)}function Zt(e){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"}},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"}}]})(e)}function en(e){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"22",y1:"2",x2:"11",y2:"13"}},{tag:"polygon",attr:{points:"22 2 15 22 11 13 2 9 22 2"}}]})(e)}function tn(e){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"3"}},{tag:"path",attr:{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"}}]})(e)}function nn(e){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"18",cy:"5",r:"3"}},{tag:"circle",attr:{cx:"6",cy:"12",r:"3"}},{tag:"circle",attr:{cx:"18",cy:"19",r:"3"}},{tag:"line",attr:{x1:"8.59",y1:"13.51",x2:"15.42",y2:"17.49"}},{tag:"line",attr:{x1:"15.41",y1:"6.51",x2:"8.59",y2:"10.49"}}]})(e)}function sn(e){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"}}]})(e)}function an(e){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"9",cy:"21",r:"1"}},{tag:"circle",attr:{cx:"20",cy:"21",r:"1"}},{tag:"path",attr:{d:"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"}}]})(e)}function rn(e){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"5",y:"2",width:"14",height:"20",rx:"2",ry:"2"}},{tag:"line",attr:{x1:"12",y1:"18",x2:"12.01",y2:"18"}}]})(e)}function on(e){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"}}]})(e)}function ln(e){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"5"}},{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"3"}},{tag:"line",attr:{x1:"12",y1:"21",x2:"12",y2:"23"}},{tag:"line",attr:{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}},{tag:"line",attr:{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}},{tag:"line",attr:{x1:"1",y1:"12",x2:"3",y2:"12"}},{tag:"line",attr:{x1:"21",y1:"12",x2:"23",y2:"12"}},{tag:"line",attr:{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}},{tag:"line",attr:{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"}}]})(e)}function cn(e){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"}},{tag:"line",attr:{x1:"7",y1:"7",x2:"7.01",y2:"7"}}]})(e)}function dn(e){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"}},{tag:"circle",attr:{cx:"12",cy:"12",r:"6"}},{tag:"circle",attr:{cx:"12",cy:"12",r:"2"}}]})(e)}function un(e){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"}},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"}},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"}}]})(e)}function hn(e){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 18 13.5 8.5 8.5 13.5 1 6"}},{tag:"polyline",attr:{points:"17 18 23 18 23 12"}}]})(e)}function mn(e){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 6 13.5 15.5 8.5 10.5 1 18"}},{tag:"polyline",attr:{points:"17 6 23 6 23 12"}}]})(e)}function pn(e){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"}}]})(e)}function fn(e){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"}},{tag:"path",attr:{d:"M23 21v-2a4 4 0 0 0-3-3.87"}},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"}}]})(e)}function gn(e){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5"}},{tag:"path",attr:{d:"M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"}}]})(e)}function yn(e){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"}},{tag:"line",attr:{x1:"15",y1:"9",x2:"9",y2:"15"}},{tag:"line",attr:{x1:"9",y1:"9",x2:"15",y2:"15"}}]})(e)}function xn(e){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"}},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"}}]})(e)}function vn(e){return f({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"}}]})(e)}qe.loading=(e,t)=>$e(e,He("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t})),qe.promise=function(e,t,n){let s,{pending:a,error:r,success:i}=t;a&&(s=ve(a)?qe.loading(a,n):qe.loading(a.render,{...n,...a}));const o={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},l=(e,t,a)=>{if(null==t)return void qe.dismiss(s);const r={type:e,...o,...n,data:a},i=ve(t)?{render:t}:t;return s?qe.update(s,{...r,...i}):qe(i.render,{...r,...i}),a},c=be(e)?e():e;return c.then(e=>l("success",i,e)).catch(e=>l("error",r,e)),c},qe.success=We("success"),qe.info=We("info"),qe.error=We("error"),qe.warning=We("warning"),qe.warn=qe.warning,qe.dark=(e,t)=>$e(e,He("default",{theme:"dark",...t})),qe.dismiss=e=>{_e.size>0?Se.emit(1,e):Fe=Fe.filter(t=>null!=e&&t.options.toastId!==e)},qe.clearWaitingQueue=function(e){return void 0===e&&(e={}),Se.emit(5,e)},qe.isActive=e=>{let t=!1;return _e.forEach(n=>{n.isToastActive&&n.isToastActive(e)&&(t=!0)}),t},qe.update=function(e,t){void 0===t&&(t={}),setTimeout(()=>{const n=function(e,t){let{containerId:n}=t;const s=_e.get(n||Me);return s&&s.getToast(e)}(e,t);if(n){const{props:s,content:a}=n,r={delay:100,...s,...t,toastId:t.toastId||e,updateId:ze()};r.toastId!==e&&(r.staleId=e);const i=r.render||a;delete r.render,$e(i,r)}},0)},qe.done=e=>{qe.update(e,{progress:1})},qe.onChange=e=>(Se.on(4,e),()=>{Se.off(4,e)}),qe.POSITION={TOP_LEFT:"top-left",TOP_RIGHT:"top-right",TOP_CENTER:"top-center",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",BOTTOM_CENTER:"bottom-center"},qe.TYPE={INFO:"info",SUCCESS:"success",WARNING:"warning",ERROR:"error",DEFAULT:"default"},Se.on(2,e=>{Me=e.containerId||e,_e.set(Me,e),Fe.forEach(e=>{Se.emit(0,e.content,e.options)}),Fe=[]}).on(3,e=>{_e.delete(e.containerId||e),0===_e.size&&Se.off(0).off(1).off(5)});const bn=n.createContext(),jn=()=>n.useContext(bn),wn=({children:e})=>{const[t,s]=n.useState(null),[a,r]=n.useState(!1),[i,o]=n.useState(!1),l=n.useCallback((e,t)=>{localStorage.setItem("token",t),localStorage.setItem("user",JSON.stringify(e)),s(e),r(!0)},[]),c=n.useCallback(()=>localStorage.getItem("token"),[]),d=n.useCallback(()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),s(null),r(!1)},[]);n.useEffect(()=>{const e=localStorage.getItem("token"),t=localStorage.getItem("user");if(e&&t)try{const e=JSON.parse(t);s(e),r(!0)}catch(n){d()}},[d]);const u={user:t,isAuthenticated:a,loading:i,login:l,logout:d,getToken:c};return M.jsx(bn.Provider,{value:u,children:e})};function kn(e,t){return function(){return e.apply(t,arguments)}}const{toString:Nn}=Object.prototype,{getPrototypeOf:Sn}=Object,{iterator:Cn,toStringTag:Tn}=Symbol,Pn=(e=>t=>{const n=Nn.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),En=e=>(e=e.toLowerCase(),t=>Pn(t)===e),Ln=e=>t=>typeof t===e,{isArray:In}=Array,An=Ln("undefined");const On=En("ArrayBuffer");const Dn=Ln("string"),Rn=Ln("function"),Mn=Ln("number"),_n=e=>null!==e&&"object"==typeof e,Fn=e=>{if("object"!==Pn(e))return!1;const t=Sn(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Tn in e||Cn in e)},Bn=En("Date"),zn=En("File"),Un=En("Blob"),$n=En("FileList"),Hn=En("URLSearchParams"),[Wn,qn,Vn,Yn]=["ReadableStream","Request","Response","Headers"].map(En);function Gn(e,t,{allOwnKeys:n=!1}={}){if(null==e)return;let s,a;if("object"!=typeof e&&(e=[e]),In(e))for(s=0,a=e.length;s<a;s++)t.call(null,e[s],s,e);else{const a=n?Object.getOwnPropertyNames(e):Object.keys(e),r=a.length;let i;for(s=0;s<r;s++)i=a[s],t.call(null,e[i],i,e)}}function Jn(e,t){t=t.toLowerCase();const n=Object.keys(e);let s,a=n.length;for(;a-- >0;)if(s=n[a],t===s.toLowerCase())return s;return null}const Qn="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,Kn=e=>!An(e)&&e!==Qn;const Xn=(e=>t=>e&&t instanceof e)("undefined"!=typeof Uint8Array&&Sn(Uint8Array)),Zn=En("HTMLFormElement"),es=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),ts=En("RegExp"),ns=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),s={};Gn(n,(n,a)=>{let r;!1!==(r=t(n,a,e))&&(s[a]=r||n)}),Object.defineProperties(e,s)};const ss=En("AsyncFunction"),as=(rs="function"==typeof setImmediate,is=Rn(Qn.postMessage),rs?setImmediate:is?(os=`axios@${Math.random()}`,ls=[],Qn.addEventListener("message",({source:e,data:t})=>{e===Qn&&t===os&&ls.length&&ls.shift()()},!1),e=>{ls.push(e),Qn.postMessage(os,"*")}):e=>setTimeout(e));var rs,is,os,ls;const cs="undefined"!=typeof queueMicrotask?queueMicrotask.bind(Qn):"undefined"!=typeof process&&process.nextTick||as,ds={isArray:In,isArrayBuffer:On,isBuffer:function(e){return null!==e&&!An(e)&&null!==e.constructor&&!An(e.constructor)&&Rn(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||Rn(e.append)&&("formdata"===(t=Pn(e))||"object"===t&&Rn(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&On(e.buffer),t},isString:Dn,isNumber:Mn,isBoolean:e=>!0===e||!1===e,isObject:_n,isPlainObject:Fn,isReadableStream:Wn,isRequest:qn,isResponse:Vn,isHeaders:Yn,isUndefined:An,isDate:Bn,isFile:zn,isBlob:Un,isRegExp:ts,isFunction:Rn,isStream:e=>_n(e)&&Rn(e.pipe),isURLSearchParams:Hn,isTypedArray:Xn,isFileList:$n,forEach:Gn,merge:function e(){const{caseless:t}=Kn(this)&&this||{},n={},s=(s,a)=>{const r=t&&Jn(n,a)||a;Fn(n[r])&&Fn(s)?n[r]=e(n[r],s):Fn(s)?n[r]=e({},s):In(s)?n[r]=s.slice():n[r]=s};for(let a=0,r=arguments.length;a<r;a++)arguments[a]&&Gn(arguments[a],s);return n},extend:(e,t,n,{allOwnKeys:s}={})=>(Gn(t,(t,s)=>{n&&Rn(t)?e[s]=kn(t,n):e[s]=t},{allOwnKeys:s}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,s)=>{e.prototype=Object.create(t.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,s)=>{let a,r,i;const o={};if(t=t||{},null==e)return t;do{for(a=Object.getOwnPropertyNames(e),r=a.length;r-- >0;)i=a[r],s&&!s(i,e,t)||o[i]||(t[i]=e[i],o[i]=!0);e=!1!==n&&Sn(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:Pn,kindOfTest:En,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const s=e.indexOf(t,n);return-1!==s&&s===n},toArray:e=>{if(!e)return null;if(In(e))return e;let t=e.length;if(!Mn(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[Cn]).call(e);let s;for(;(s=n.next())&&!s.done;){const n=s.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const s=[];for(;null!==(n=e.exec(t));)s.push(n);return s},isHTMLForm:Zn,hasOwnProperty:es,hasOwnProp:es,reduceDescriptors:ns,freezeMethods:e=>{ns(e,(t,n)=>{if(Rn(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const s=e[n];Rn(s)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))})},toObjectSet:(e,t)=>{const n={},s=e=>{e.forEach(e=>{n[e]=!0})};return In(e)?s(e):s(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,n){return t.toUpperCase()+n}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:Jn,global:Qn,isContextDefined:Kn,isSpecCompliantForm:function(e){return!!(e&&Rn(e.append)&&"FormData"===e[Tn]&&e[Cn])},toJSONObject:e=>{const t=new Array(10),n=(e,s)=>{if(_n(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[s]=e;const a=In(e)?[]:{};return Gn(e,(e,t)=>{const r=n(e,s+1);!An(r)&&(a[t]=r)}),t[s]=void 0,a}}return e};return n(e,0)},isAsyncFn:ss,isThenable:e=>e&&(_n(e)||Rn(e))&&Rn(e.then)&&Rn(e.catch),setImmediate:as,asap:cs,isIterable:e=>null!=e&&Rn(e[Cn])};function us(e,t,n,s,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),s&&(this.request=s),a&&(this.response=a,this.status=a.status?a.status:null)}ds.inherits(us,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ds.toJSONObject(this.config),code:this.code,status:this.status}}});const hs=us.prototype,ms={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{ms[e]={value:e}}),Object.defineProperties(us,ms),Object.defineProperty(hs,"isAxiosError",{value:!0}),us.from=(e,t,n,s,a,r)=>{const i=Object.create(hs);return ds.toFlatObject(e,i,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e),us.call(i,e.message,t,n,s,a),i.cause=e,i.name=e.name,r&&Object.assign(i,r),i};function ps(e){return ds.isPlainObject(e)||ds.isArray(e)}function fs(e){return ds.endsWith(e,"[]")?e.slice(0,-2):e}function gs(e,t,n){return e?e.concat(t).map(function(e,t){return e=fs(e),!n&&t?"["+e+"]":e}).join(n?".":""):t}const ys=ds.toFlatObject(ds,{},null,function(e){return/^is[A-Z]/.test(e)});function xs(e,t,n){if(!ds.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const s=(n=ds.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!ds.isUndefined(t[e])})).metaTokens,a=n.visitor||c,r=n.dots,i=n.indexes,o=(n.Blob||"undefined"!=typeof Blob&&Blob)&&ds.isSpecCompliantForm(t);if(!ds.isFunction(a))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(ds.isDate(e))return e.toISOString();if(ds.isBoolean(e))return e.toString();if(!o&&ds.isBlob(e))throw new us("Blob is not supported. Use a Buffer instead.");return ds.isArrayBuffer(e)||ds.isTypedArray(e)?o&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,a){let o=e;if(e&&!a&&"object"==typeof e)if(ds.endsWith(n,"{}"))n=s?n:n.slice(0,-2),e=JSON.stringify(e);else if(ds.isArray(e)&&function(e){return ds.isArray(e)&&!e.some(ps)}(e)||(ds.isFileList(e)||ds.endsWith(n,"[]"))&&(o=ds.toArray(e)))return n=fs(n),o.forEach(function(e,s){!ds.isUndefined(e)&&null!==e&&t.append(!0===i?gs([n],s,r):null===i?n:n+"[]",l(e))}),!1;return!!ps(e)||(t.append(gs(a,n,r),l(e)),!1)}const d=[],u=Object.assign(ys,{defaultVisitor:c,convertValue:l,isVisitable:ps});if(!ds.isObject(e))throw new TypeError("data must be an object");return function e(n,s){if(!ds.isUndefined(n)){if(-1!==d.indexOf(n))throw Error("Circular reference detected in "+s.join("."));d.push(n),ds.forEach(n,function(n,r){!0===(!(ds.isUndefined(n)||null===n)&&a.call(t,n,ds.isString(r)?r.trim():r,s,u))&&e(n,s?s.concat(r):[r])}),d.pop()}}(e),t}function vs(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function bs(e,t){this._pairs=[],e&&xs(e,this,t)}const js=bs.prototype;function ws(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function ks(e,t,n){if(!t)return e;const s=n&&n.encode||ws;ds.isFunction(n)&&(n={serialize:n});const a=n&&n.serialize;let r;if(r=a?a(t,n):ds.isURLSearchParams(t)?t.toString():new bs(t,n).toString(s),r){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e}js.append=function(e,t){this._pairs.push([e,t])},js.toString=function(e){const t=e?function(t){return e.call(this,t,vs)}:vs;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};class Ns{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){ds.forEach(this.handlers,function(t){null!==t&&e(t)})}}const Ss={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Cs={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:bs,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},Ts="undefined"!=typeof window&&"undefined"!=typeof document,Ps="object"==typeof navigator&&navigator||void 0,Es=Ts&&(!Ps||["ReactNative","NativeScript","NS"].indexOf(Ps.product)<0),Ls="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,Is=Ts&&window.location.href||"http://localhost",As={...Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Ts,hasStandardBrowserEnv:Es,hasStandardBrowserWebWorkerEnv:Ls,navigator:Ps,origin:Is},Symbol.toStringTag,{value:"Module"})),...Cs};function Os(e){function t(e,n,s,a){let r=e[a++];if("__proto__"===r)return!0;const i=Number.isFinite(+r),o=a>=e.length;if(r=!r&&ds.isArray(s)?s.length:r,o)return ds.hasOwnProp(s,r)?s[r]=[s[r],n]:s[r]=n,!i;s[r]&&ds.isObject(s[r])||(s[r]=[]);return t(e,n,s[r],a)&&ds.isArray(s[r])&&(s[r]=function(e){const t={},n=Object.keys(e);let s;const a=n.length;let r;for(s=0;s<a;s++)r=n[s],t[r]=e[r];return t}(s[r])),!i}if(ds.isFormData(e)&&ds.isFunction(e.entries)){const n={};return ds.forEachEntry(e,(e,s)=>{t(function(e){return ds.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}(e),s,n,0)}),n}return null}const Ds={transitional:Ss,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",s=n.indexOf("application/json")>-1,a=ds.isObject(e);a&&ds.isHTMLForm(e)&&(e=new FormData(e));if(ds.isFormData(e))return s?JSON.stringify(Os(e)):e;if(ds.isArrayBuffer(e)||ds.isBuffer(e)||ds.isStream(e)||ds.isFile(e)||ds.isBlob(e)||ds.isReadableStream(e))return e;if(ds.isArrayBufferView(e))return e.buffer;if(ds.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let r;if(a){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return xs(e,new As.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,s){return As.isNode&&ds.isBuffer(e)?(this.append(t,e.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((r=ds.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return xs(r?{"files[]":e}:e,t&&new t,this.formSerializer)}}return a||s?(t.setContentType("application/json",!1),function(e,t,n){if(ds.isString(e))try{return(t||JSON.parse)(e),ds.trim(e)}catch(s){if("SyntaxError"!==s.name)throw s}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||Ds.transitional,n=t&&t.forcedJSONParsing,s="json"===this.responseType;if(ds.isResponse(e)||ds.isReadableStream(e))return e;if(e&&ds.isString(e)&&(n&&!this.responseType||s)){const n=!(t&&t.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(a){if(n){if("SyntaxError"===a.name)throw us.from(a,us.ERR_BAD_RESPONSE,this,null,this.response);throw a}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:As.classes.FormData,Blob:As.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ds.forEach(["delete","get","head","post","put","patch"],e=>{Ds.headers[e]={}});const Rs=ds.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Ms=Symbol("internals");function _s(e){return e&&String(e).trim().toLowerCase()}function Fs(e){return!1===e||null==e?e:ds.isArray(e)?e.map(Fs):String(e)}function Bs(e,t,n,s,a){return ds.isFunction(s)?s.call(this,t,n):(a&&(t=n),ds.isString(t)?ds.isString(s)?-1!==t.indexOf(s):ds.isRegExp(s)?s.test(t):void 0:void 0)}let zs=class{constructor(e){e&&this.set(e)}set(e,t,n){const s=this;function a(e,t,n){const a=_s(t);if(!a)throw new Error("header name must be a non-empty string");const r=ds.findKey(s,a);(!r||void 0===s[r]||!0===n||void 0===n&&!1!==s[r])&&(s[r||t]=Fs(e))}const r=(e,t)=>ds.forEach(e,(e,n)=>a(e,n,t));if(ds.isPlainObject(e)||e instanceof this.constructor)r(e,t);else if(ds.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))r((e=>{const t={};let n,s,a;return e&&e.split("\n").forEach(function(e){a=e.indexOf(":"),n=e.substring(0,a).trim().toLowerCase(),s=e.substring(a+1).trim(),!n||t[n]&&Rs[n]||("set-cookie"===n?t[n]?t[n].push(s):t[n]=[s]:t[n]=t[n]?t[n]+", "+s:s)}),t})(e),t);else if(ds.isObject(e)&&ds.isIterable(e)){let n,s,a={};for(const t of e){if(!ds.isArray(t))throw TypeError("Object iterator must return a key-value pair");a[s=t[0]]=(n=a[s])?ds.isArray(n)?[...n,t[1]]:[n,t[1]]:t[1]}r(a,t)}else null!=e&&a(t,e,n);return this}get(e,t){if(e=_s(e)){const n=ds.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=n.exec(e);)t[s[1]]=s[2];return t}(e);if(ds.isFunction(t))return t.call(this,e,n);if(ds.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=_s(e)){const n=ds.findKey(this,e);return!(!n||void 0===this[n]||t&&!Bs(0,this[n],n,t))}return!1}delete(e,t){const n=this;let s=!1;function a(e){if(e=_s(e)){const a=ds.findKey(n,e);!a||t&&!Bs(0,n[a],a,t)||(delete n[a],s=!0)}}return ds.isArray(e)?e.forEach(a):a(e),s}clear(e){const t=Object.keys(this);let n=t.length,s=!1;for(;n--;){const a=t[n];e&&!Bs(0,this[a],a,e,!0)||(delete this[a],s=!0)}return s}normalize(e){const t=this,n={};return ds.forEach(this,(s,a)=>{const r=ds.findKey(n,a);if(r)return t[r]=Fs(s),void delete t[a];const i=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,n)=>t.toUpperCase()+n)}(a):String(a).trim();i!==a&&delete t[a],t[i]=Fs(s),n[i]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return ds.forEach(this,(n,s)=>{null!=n&&!1!==n&&(t[s]=e&&ds.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach(e=>n.set(e)),n}static accessor(e){const t=(this[Ms]=this[Ms]={accessors:{}}).accessors,n=this.prototype;function s(e){const s=_s(e);t[s]||(!function(e,t){const n=ds.toCamelCase(" "+t);["get","set","has"].forEach(s=>{Object.defineProperty(e,s+n,{value:function(e,n,a){return this[s].call(this,t,e,n,a)},configurable:!0})})}(n,e),t[s]=!0)}return ds.isArray(e)?e.forEach(s):s(e),this}};function Us(e,t){const n=this||Ds,s=t||n,a=zs.from(s.headers);let r=s.data;return ds.forEach(e,function(e){r=e.call(n,r,a.normalize(),t?t.status:void 0)}),a.normalize(),r}function $s(e){return!(!e||!e.__CANCEL__)}function Hs(e,t,n){us.call(this,null==e?"canceled":e,us.ERR_CANCELED,t,n),this.name="CanceledError"}function Ws(e,t,n){const s=n.config.validateStatus;n.status&&s&&!s(n.status)?t(new us("Request failed with status code "+n.status,[us.ERR_BAD_REQUEST,us.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}zs.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),ds.reduceDescriptors(zs.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[n]=e}}}),ds.freezeMethods(zs),ds.inherits(Hs,us,{__CANCEL__:!0});const qs=(e,t,n=3)=>{let s=0;const a=function(e,t){e=e||10;const n=new Array(e),s=new Array(e);let a,r=0,i=0;return t=void 0!==t?t:1e3,function(o){const l=Date.now(),c=s[i];a||(a=l),n[r]=o,s[r]=l;let d=i,u=0;for(;d!==r;)u+=n[d++],d%=e;if(r=(r+1)%e,r===i&&(i=(i+1)%e),l-a<t)return;const h=c&&l-c;return h?Math.round(1e3*u/h):void 0}}(50,250);return function(e,t){let n,s,a=0,r=1e3/t;const i=(t,r=Date.now())=>{a=r,n=null,s&&(clearTimeout(s),s=null),e.apply(null,t)};return[(...e)=>{const t=Date.now(),o=t-a;o>=r?i(e,t):(n=e,s||(s=setTimeout(()=>{s=null,i(n)},r-o)))},()=>n&&i(n)]}(n=>{const r=n.loaded,i=n.lengthComputable?n.total:void 0,o=r-s,l=a(o);s=r;e({loaded:r,total:i,progress:i?r/i:void 0,bytes:o,rate:l||void 0,estimated:l&&i&&r<=i?(i-r)/l:void 0,event:n,lengthComputable:null!=i,[t?"download":"upload"]:!0})},n)},Vs=(e,t)=>{const n=null!=e;return[s=>t[0]({lengthComputable:n,total:e,loaded:s}),t[1]]},Ys=e=>(...t)=>ds.asap(()=>e(...t)),Gs=As.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,As.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(As.origin),As.navigator&&/(msie|trident)/i.test(As.navigator.userAgent)):()=>!0,Js=As.hasStandardBrowserEnv?{write(e,t,n,s,a,r){const i=[e+"="+encodeURIComponent(t)];ds.isNumber(n)&&i.push("expires="+new Date(n).toGMTString()),ds.isString(s)&&i.push("path="+s),ds.isString(a)&&i.push("domain="+a),!0===r&&i.push("secure"),document.cookie=i.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function Qs(e,t,n){let s=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(s||0==n)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const Ks=e=>e instanceof zs?{...e}:e;function Xs(e,t){t=t||{};const n={};function s(e,t,n,s){return ds.isPlainObject(e)&&ds.isPlainObject(t)?ds.merge.call({caseless:s},e,t):ds.isPlainObject(t)?ds.merge({},t):ds.isArray(t)?t.slice():t}function a(e,t,n,a){return ds.isUndefined(t)?ds.isUndefined(e)?void 0:s(void 0,e,0,a):s(e,t,0,a)}function r(e,t){if(!ds.isUndefined(t))return s(void 0,t)}function i(e,t){return ds.isUndefined(t)?ds.isUndefined(e)?void 0:s(void 0,e):s(void 0,t)}function o(n,a,r){return r in t?s(n,a):r in e?s(void 0,n):void 0}const l={url:r,method:r,data:r,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:o,headers:(e,t,n)=>a(Ks(e),Ks(t),0,!0)};return ds.forEach(Object.keys(Object.assign({},e,t)),function(s){const r=l[s]||a,i=r(e[s],t[s],s);ds.isUndefined(i)&&r!==o||(n[s]=i)}),n}const Zs=e=>{const t=Xs({},e);let n,{data:s,withXSRFToken:a,xsrfHeaderName:r,xsrfCookieName:i,headers:o,auth:l}=t;if(t.headers=o=zs.from(o),t.url=ks(Qs(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),ds.isFormData(s))if(As.hasStandardBrowserEnv||As.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(!1!==(n=o.getContentType())){const[e,...t]=n?n.split(";").map(e=>e.trim()).filter(Boolean):[];o.setContentType([e||"multipart/form-data",...t].join("; "))}if(As.hasStandardBrowserEnv&&(a&&ds.isFunction(a)&&(a=a(t)),a||!1!==a&&Gs(t.url))){const e=r&&i&&Js.read(i);e&&o.set(r,e)}return t},ea="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise(function(t,n){const s=Zs(e);let a=s.data;const r=zs.from(s.headers).normalize();let i,o,l,c,d,{responseType:u,onUploadProgress:h,onDownloadProgress:m}=s;function p(){c&&c(),d&&d(),s.cancelToken&&s.cancelToken.unsubscribe(i),s.signal&&s.signal.removeEventListener("abort",i)}let f=new XMLHttpRequest;function g(){if(!f)return;const s=zs.from("getAllResponseHeaders"in f&&f.getAllResponseHeaders());Ws(function(e){t(e),p()},function(e){n(e),p()},{data:u&&"text"!==u&&"json"!==u?f.response:f.responseText,status:f.status,statusText:f.statusText,headers:s,config:e,request:f}),f=null}f.open(s.method.toUpperCase(),s.url,!0),f.timeout=s.timeout,"onloadend"in f?f.onloadend=g:f.onreadystatechange=function(){f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))&&setTimeout(g)},f.onabort=function(){f&&(n(new us("Request aborted",us.ECONNABORTED,e,f)),f=null)},f.onerror=function(){n(new us("Network Error",us.ERR_NETWORK,e,f)),f=null},f.ontimeout=function(){let t=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const a=s.transitional||Ss;s.timeoutErrorMessage&&(t=s.timeoutErrorMessage),n(new us(t,a.clarifyTimeoutError?us.ETIMEDOUT:us.ECONNABORTED,e,f)),f=null},void 0===a&&r.setContentType(null),"setRequestHeader"in f&&ds.forEach(r.toJSON(),function(e,t){f.setRequestHeader(t,e)}),ds.isUndefined(s.withCredentials)||(f.withCredentials=!!s.withCredentials),u&&"json"!==u&&(f.responseType=s.responseType),m&&([l,d]=qs(m,!0),f.addEventListener("progress",l)),h&&f.upload&&([o,c]=qs(h),f.upload.addEventListener("progress",o),f.upload.addEventListener("loadend",c)),(s.cancelToken||s.signal)&&(i=t=>{f&&(n(!t||t.type?new Hs(null,e,f):t),f.abort(),f=null)},s.cancelToken&&s.cancelToken.subscribe(i),s.signal&&(s.signal.aborted?i():s.signal.addEventListener("abort",i)));const y=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(s.url);y&&-1===As.protocols.indexOf(y)?n(new us("Unsupported protocol "+y+":",us.ERR_BAD_REQUEST,e)):f.send(a||null)})},ta=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,s=new AbortController;const a=function(e){if(!n){n=!0,i();const t=e instanceof Error?e:this.reason;s.abort(t instanceof us?t:new Hs(t instanceof Error?t.message:t))}};let r=t&&setTimeout(()=>{r=null,a(new us(`timeout ${t} of ms exceeded`,us.ETIMEDOUT))},t);const i=()=>{e&&(r&&clearTimeout(r),r=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(a):e.removeEventListener("abort",a)}),e=null)};e.forEach(e=>e.addEventListener("abort",a));const{signal:o}=s;return o.unsubscribe=()=>ds.asap(i),o}},na=function*(e,t){let n=e.byteLength;if(n<t)return void(yield e);let s,a=0;for(;a<n;)s=a+t,yield e.slice(a,s),a=s},sa=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:n}=await t.read();if(e)break;yield n}}finally{await t.cancel()}},aa=(e,t,n,s)=>{const a=async function*(e,t){for await(const n of sa(e))yield*na(n,t)}(e,t);let r,i=0,o=e=>{r||(r=!0,s&&s(e))};return new ReadableStream({async pull(e){try{const{done:t,value:s}=await a.next();if(t)return o(),void e.close();let r=s.byteLength;if(n){let e=i+=r;n(e)}e.enqueue(new Uint8Array(s))}catch(t){throw o(t),t}},cancel:e=>(o(e),a.return())},{highWaterMark:2})},ra="function"==typeof fetch&&"function"==typeof Request&&"function"==typeof Response,ia=ra&&"function"==typeof ReadableStream,oa=ra&&("function"==typeof TextEncoder?(e=>t=>e.encode(t))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),la=(e,...t)=>{try{return!!e(...t)}catch(n){return!1}},ca=ia&&la(()=>{let e=!1;const t=new Request(As.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),da=ia&&la(()=>ds.isReadableStream(new Response("").body)),ua={stream:da&&(e=>e.body)};var ha;ra&&(ha=new Response,["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!ua[e]&&(ua[e]=ds.isFunction(ha[e])?t=>t[e]():(t,n)=>{throw new us(`Response type '${e}' is not supported`,us.ERR_NOT_SUPPORT,n)})}));const ma=async(e,t)=>{const n=ds.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(ds.isBlob(e))return e.size;if(ds.isSpecCompliantForm(e)){const t=new Request(As.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return ds.isArrayBufferView(e)||ds.isArrayBuffer(e)?e.byteLength:(ds.isURLSearchParams(e)&&(e+=""),ds.isString(e)?(await oa(e)).byteLength:void 0)})(t):n},pa={http:null,xhr:ea,fetch:ra&&(async e=>{let{url:t,method:n,data:s,signal:a,cancelToken:r,timeout:i,onDownloadProgress:o,onUploadProgress:l,responseType:c,headers:d,withCredentials:u="same-origin",fetchOptions:h}=Zs(e);c=c?(c+"").toLowerCase():"text";let m,p=ta([a,r&&r.toAbortSignal()],i);const f=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let g;try{if(l&&ca&&"get"!==n&&"head"!==n&&0!==(g=await ma(d,s))){let e,n=new Request(t,{method:"POST",body:s,duplex:"half"});if(ds.isFormData(s)&&(e=n.headers.get("content-type"))&&d.setContentType(e),n.body){const[e,t]=Vs(g,qs(Ys(l)));s=aa(n.body,65536,e,t)}}ds.isString(u)||(u=u?"include":"omit");const a="credentials"in Request.prototype;m=new Request(t,{...h,signal:p,method:n.toUpperCase(),headers:d.normalize().toJSON(),body:s,duplex:"half",credentials:a?u:void 0});let r=await fetch(m,h);const i=da&&("stream"===c||"response"===c);if(da&&(o||i&&f)){const e={};["status","statusText","headers"].forEach(t=>{e[t]=r[t]});const t=ds.toFiniteNumber(r.headers.get("content-length")),[n,s]=o&&Vs(t,qs(Ys(o),!0))||[];r=new Response(aa(r.body,65536,n,()=>{s&&s(),f&&f()}),e)}c=c||"text";let y=await ua[ds.findKey(ua,c)||"text"](r,e);return!i&&f&&f(),await new Promise((t,n)=>{Ws(t,n,{data:y,headers:zs.from(r.headers),status:r.status,statusText:r.statusText,config:e,request:m})})}catch(y){if(f&&f(),y&&"TypeError"===y.name&&/Load failed|fetch/i.test(y.message))throw Object.assign(new us("Network Error",us.ERR_NETWORK,e,m),{cause:y.cause||y});throw us.from(y,y&&y.code,e,m)}})};ds.forEach(pa,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(n){}Object.defineProperty(e,"adapterName",{value:t})}});const fa=e=>`- ${e}`,ga=e=>ds.isFunction(e)||null===e||!1===e,ya=e=>{e=ds.isArray(e)?e:[e];const{length:t}=e;let n,s;const a={};for(let r=0;r<t;r++){let t;if(n=e[r],s=n,!ga(n)&&(s=pa[(t=String(n)).toLowerCase()],void 0===s))throw new us(`Unknown adapter '${t}'`);if(s)break;a[t||"#"+r]=s}if(!s){const e=Object.entries(a).map(([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build"));throw new us("There is no suitable adapter to dispatch the request "+(t?e.length>1?"since :\n"+e.map(fa).join("\n"):" "+fa(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return s};function xa(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Hs(null,e)}function va(e){xa(e),e.headers=zs.from(e.headers),e.data=Us.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return ya(e.adapter||Ds.adapter)(e).then(function(t){return xa(e),t.data=Us.call(e,e.transformResponse,t),t.headers=zs.from(t.headers),t},function(t){return $s(t)||(xa(e),t&&t.response&&(t.response.data=Us.call(e,e.transformResponse,t.response),t.response.headers=zs.from(t.response.headers))),Promise.reject(t)})}const ba="1.10.0",ja={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{ja[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const wa={};ja.transitional=function(e,t,n){return(s,a,r)=>{if(!1===e)throw new us(function(e,t){return"[Axios v"+ba+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}(a," has been removed"+(t?" in "+t:"")),us.ERR_DEPRECATED);return t&&!wa[a]&&(wa[a]=!0),!e||e(s,a,r)}},ja.spelling=function(e){return(e,t)=>!0};const ka={assertOptions:function(e,t,n){if("object"!=typeof e)throw new us("options must be an object",us.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let a=s.length;for(;a-- >0;){const r=s[a],i=t[r];if(i){const t=e[r],n=void 0===t||i(t,r,e);if(!0!==n)throw new us("option "+r+" must be "+n,us.ERR_BAD_OPTION_VALUE);continue}if(!0!==n)throw new us("Unknown option "+r,us.ERR_BAD_OPTION)}},validators:ja},Na=ka.validators;let Sa=class{constructor(e){this.defaults=e||{},this.interceptors={request:new Ns,response:new Ns}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{n.stack?t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+t):n.stack=t}catch(s){}}throw n}}_request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=Xs(this.defaults,t);const{transitional:n,paramsSerializer:s,headers:a}=t;void 0!==n&&ka.assertOptions(n,{silentJSONParsing:Na.transitional(Na.boolean),forcedJSONParsing:Na.transitional(Na.boolean),clarifyTimeoutError:Na.transitional(Na.boolean)},!1),null!=s&&(ds.isFunction(s)?t.paramsSerializer={serialize:s}:ka.assertOptions(s,{encode:Na.function,serialize:Na.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),ka.assertOptions(t,{baseUrl:Na.spelling("baseURL"),withXsrfToken:Na.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let r=a&&ds.merge(a.common,a[t.method]);a&&ds.forEach(["delete","get","head","post","put","patch","common"],e=>{delete a[e]}),t.headers=zs.concat(r,a);const i=[];let o=!0;this.interceptors.request.forEach(function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(o=o&&e.synchronous,i.unshift(e.fulfilled,e.rejected))});const l=[];let c;this.interceptors.response.forEach(function(e){l.push(e.fulfilled,e.rejected)});let d,u=0;if(!o){const e=[va.bind(this),void 0];for(e.unshift.apply(e,i),e.push.apply(e,l),d=e.length,c=Promise.resolve(t);u<d;)c=c.then(e[u++],e[u++]);return c}d=i.length;let h=t;for(u=0;u<d;){const e=i[u++],t=i[u++];try{h=e(h)}catch(m){t.call(this,m);break}}try{c=va.call(this,h)}catch(m){return Promise.reject(m)}for(u=0,d=l.length;u<d;)c=c.then(l[u++],l[u++]);return c}getUri(e){return ks(Qs((e=Xs(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}};ds.forEach(["delete","get","head","options"],function(e){Sa.prototype[e]=function(t,n){return this.request(Xs(n||{},{method:e,url:t,data:(n||{}).data}))}}),ds.forEach(["post","put","patch"],function(e){function t(t){return function(n,s,a){return this.request(Xs(a||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:s}))}}Sa.prototype[e]=t(),Sa.prototype[e+"Form"]=t(!0)});const Ca={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Ca).forEach(([e,t])=>{Ca[t]=e});const Ta=function e(t){const n=new Sa(t),s=kn(Sa.prototype.request,n);return ds.extend(s,Sa.prototype,n,{allOwnKeys:!0}),ds.extend(s,n,null,{allOwnKeys:!0}),s.create=function(n){return e(Xs(t,n))},s}(Ds);Ta.Axios=Sa,Ta.CanceledError=Hs,Ta.CancelToken=class e{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(e){t=e});const n=this;this.promise.then(e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null}),this.promise.then=e=>{let t;const s=new Promise(e=>{n.subscribe(e),t=e}).then(e);return s.cancel=function(){n.unsubscribe(t)},s},e(function(e,s,a){n.reason||(n.reason=new Hs(e,s,a),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let t;return{token:new e(function(e){t=e}),cancel:t}}},Ta.isCancel=$s,Ta.VERSION=ba,Ta.toFormData=xs,Ta.AxiosError=us,Ta.Cancel=Ta.CanceledError,Ta.all=function(e){return Promise.all(e)},Ta.spread=function(e){return function(t){return e.apply(null,t)}},Ta.isAxiosError=function(e){return ds.isObject(e)&&!0===e.isAxiosError},Ta.mergeConfig=Xs,Ta.AxiosHeaders=zs,Ta.formToJSON=e=>Os(ds.isHTMLForm(e)?new FormData(e):e),Ta.getAdapter=ya,Ta.HttpStatusCode=Ca,Ta.default=Ta;const{Axios:Pa,AxiosError:Ea,CanceledError:La,isCancel:Ia,CancelToken:Aa,VERSION:Oa,all:Da,Cancel:Ra,isAxiosError:Ma,spread:_a,toFormData:Fa,AxiosHeaders:Ba,HttpStatusCode:za,formToJSON:Ua,getAdapter:$a,mergeConfig:Ha}=Ta;var Wa,qa={exports:{}};
/*!
 * Pusher JavaScript Library v8.4.0
 * https://pusher.com/
 *
 * Copyright 2020, Pusher
 * Released under the MIT licence.
 */window,Wa=function(){return function(e){var t={};function n(s){if(t[s])return t[s].exports;var a=t[s]={i:s,l:!1,exports:{}};return e[s].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(s,a,function(t){return e[t]}.bind(null,a));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t,n){var s=this&&this.__extends||function(){var e=function(t,n){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(t,n)};return function(t,n){function s(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(s.prototype=n.prototype,new s)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=256,r=function(){function e(e){void 0===e&&(e="="),this._paddingCharacter=e}return e.prototype.encodedLength=function(e){return this._paddingCharacter?(e+2)/3*4|0:(8*e+5)/6|0},e.prototype.encode=function(e){for(var t="",n=0;n<e.length-2;n+=3){var s=e[n]<<16|e[n+1]<<8|e[n+2];t+=this._encodeByte(s>>>18&63),t+=this._encodeByte(s>>>12&63),t+=this._encodeByte(s>>>6&63),t+=this._encodeByte(s>>>0&63)}var a=e.length-n;return a>0&&(s=e[n]<<16|(2===a?e[n+1]<<8:0),t+=this._encodeByte(s>>>18&63),t+=this._encodeByte(s>>>12&63),t+=2===a?this._encodeByte(s>>>6&63):this._paddingCharacter||"",t+=this._paddingCharacter||""),t},e.prototype.maxDecodedLength=function(e){return this._paddingCharacter?e/4*3|0:(6*e+7)/8|0},e.prototype.decodedLength=function(e){return this.maxDecodedLength(e.length-this._getPaddingLength(e))},e.prototype.decode=function(e){if(0===e.length)return new Uint8Array(0);for(var t=this._getPaddingLength(e),n=e.length-t,s=new Uint8Array(this.maxDecodedLength(n)),r=0,i=0,o=0,l=0,c=0,d=0,u=0;i<n-4;i+=4)l=this._decodeChar(e.charCodeAt(i+0)),c=this._decodeChar(e.charCodeAt(i+1)),d=this._decodeChar(e.charCodeAt(i+2)),u=this._decodeChar(e.charCodeAt(i+3)),s[r++]=l<<2|c>>>4,s[r++]=c<<4|d>>>2,s[r++]=d<<6|u,o|=l&a,o|=c&a,o|=d&a,o|=u&a;if(i<n-1&&(l=this._decodeChar(e.charCodeAt(i)),c=this._decodeChar(e.charCodeAt(i+1)),s[r++]=l<<2|c>>>4,o|=l&a,o|=c&a),i<n-2&&(d=this._decodeChar(e.charCodeAt(i+2)),s[r++]=c<<4|d>>>2,o|=d&a),i<n-3&&(u=this._decodeChar(e.charCodeAt(i+3)),s[r++]=d<<6|u,o|=u&a),0!==o)throw new Error("Base64Coder: incorrect characters for decoding");return s},e.prototype._encodeByte=function(e){var t=e;return t+=65,t+=25-e>>>8&6,t+=51-e>>>8&-75,t+=61-e>>>8&-15,t+=62-e>>>8&3,String.fromCharCode(t)},e.prototype._decodeChar=function(e){var t=a;return t+=(42-e&e-44)>>>8&-256+e-43+62,t+=(46-e&e-48)>>>8&-256+e-47+63,t+=(47-e&e-58)>>>8&-256+e-48+52,t+=(64-e&e-91)>>>8&-256+e-65+0,t+=(96-e&e-123)>>>8&-256+e-97+26},e.prototype._getPaddingLength=function(e){var t=0;if(this._paddingCharacter){for(var n=e.length-1;n>=0&&e[n]===this._paddingCharacter;n--)t++;if(e.length<4||t>2)throw new Error("Base64Coder: incorrect padding")}return t},e}();t.Coder=r;var i=new r;t.encode=function(e){return i.encode(e)},t.decode=function(e){return i.decode(e)};var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return s(t,e),t.prototype._encodeByte=function(e){var t=e;return t+=65,t+=25-e>>>8&6,t+=51-e>>>8&-75,t+=61-e>>>8&-13,t+=62-e>>>8&49,String.fromCharCode(t)},t.prototype._decodeChar=function(e){var t=a;return t+=(44-e&e-46)>>>8&-256+e-45+62,t+=(94-e&e-96)>>>8&-256+e-95+63,t+=(47-e&e-58)>>>8&-256+e-48+52,t+=(64-e&e-91)>>>8&-256+e-65+0,t+=(96-e&e-123)>>>8&-256+e-97+26},t}(r);t.URLSafeCoder=o;var l=new o;t.encodeURLSafe=function(e){return l.encode(e)},t.decodeURLSafe=function(e){return l.decode(e)},t.encodedLength=function(e){return i.encodedLength(e)},t.maxDecodedLength=function(e){return i.maxDecodedLength(e)},t.decodedLength=function(e){return i.decodedLength(e)}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var s="utf8: invalid string",a="utf8: invalid source encoding";function r(e){for(var t=0,n=0;n<e.length;n++){var a=e.charCodeAt(n);if(a<128)t+=1;else if(a<2048)t+=2;else if(a<55296)t+=3;else{if(!(a<=57343))throw new Error(s);if(n>=e.length-1)throw new Error(s);n++,t+=4}}return t}t.encode=function(e){for(var t=new Uint8Array(r(e)),n=0,s=0;s<e.length;s++){var a=e.charCodeAt(s);a<128?t[n++]=a:a<2048?(t[n++]=192|a>>6,t[n++]=128|63&a):a<55296?(t[n++]=224|a>>12,t[n++]=128|a>>6&63,t[n++]=128|63&a):(s++,a=(1023&a)<<10,a|=1023&e.charCodeAt(s),a+=65536,t[n++]=240|a>>18,t[n++]=128|a>>12&63,t[n++]=128|a>>6&63,t[n++]=128|63&a)}return t},t.encodedLength=r,t.decode=function(e){for(var t=[],n=0;n<e.length;n++){var s=e[n];if(128&s){var r=void 0;if(s<224){if(n>=e.length)throw new Error(a);if(128!=(192&(i=e[++n])))throw new Error(a);s=(31&s)<<6|63&i,r=128}else if(s<240){if(n>=e.length-1)throw new Error(a);var i=e[++n],o=e[++n];if(128!=(192&i)||128!=(192&o))throw new Error(a);s=(15&s)<<12|(63&i)<<6|63&o,r=2048}else{if(!(s<248))throw new Error(a);if(n>=e.length-2)throw new Error(a);i=e[++n],o=e[++n];var l=e[++n];if(128!=(192&i)||128!=(192&o)||128!=(192&l))throw new Error(a);s=(15&s)<<18|(63&i)<<12|(63&o)<<6|63&l,r=65536}if(s<r||s>=55296&&s<=57343)throw new Error(a);if(s>=65536){if(s>1114111)throw new Error(a);s-=65536,t.push(String.fromCharCode(55296|s>>10)),s=56320|1023&s}}t.push(String.fromCharCode(s))}return t.join("")}},function(e,t,n){e.exports=n(3).default},function(e,t,n){n.r(t);class s{constructor(e,t){this.lastId=0,this.prefix=e,this.name=t}create(e){this.lastId++;var t=this.lastId,n=this.prefix+t,s=this.name+"["+t+"]",a=!1,r=function(){a||(e.apply(null,arguments),a=!0)};return this[t]=r,{number:t,id:n,name:s,callback:r}}remove(e){delete this[e.number]}}var a=new s("_pusher_script_","Pusher.ScriptReceivers"),r={VERSION:"8.4.0",PROTOCOL:7,wsPort:80,wssPort:443,wsPath:"",httpHost:"sockjs.pusher.com",httpPort:80,httpsPort:443,httpPath:"/pusher",stats_host:"stats.pusher.com",authEndpoint:"/pusher/auth",authTransport:"ajax",activityTimeout:12e4,pongTimeout:3e4,unavailableTimeout:1e4,userAuthentication:{endpoint:"/pusher/user-auth",transport:"ajax"},channelAuthorization:{endpoint:"/pusher/auth",transport:"ajax"},cdn_http:"http://js.pusher.com",cdn_https:"https://js.pusher.com",dependency_suffix:""},i=new s("_pusher_dependencies","Pusher.DependenciesReceivers"),o=new class{constructor(e){this.options=e,this.receivers=e.receivers||a,this.loading={}}load(e,t,n){var s=this;if(s.loading[e]&&s.loading[e].length>0)s.loading[e].push(n);else{s.loading[e]=[n];var a=ut.createScriptRequest(s.getPath(e,t)),r=s.receivers.create(function(t){if(s.receivers.remove(r),s.loading[e]){var n=s.loading[e];delete s.loading[e];for(var i=function(e){e||a.cleanup()},o=0;o<n.length;o++)n[o](t,i)}});a.send(r)}}getRoot(e){var t=ut.getDocument().location.protocol;return(e&&e.useTLS||"https:"===t?this.options.cdn_https:this.options.cdn_http).replace(/\/*$/,"")+"/"+this.options.version}getPath(e,t){return this.getRoot(t)+"/"+e+this.options.suffix+".js"}}({cdn_http:r.cdn_http,cdn_https:r.cdn_https,version:r.VERSION,suffix:r.dependency_suffix,receivers:i});const l={baseUrl:"https://pusher.com",urls:{authenticationEndpoint:{path:"/docs/channels/server_api/authenticating_users"},authorizationEndpoint:{path:"/docs/channels/server_api/authorizing-users/"},javascriptQuickStart:{path:"/docs/javascript_quick_start"},triggeringClientEvents:{path:"/docs/client_api_guide/client_events#trigger-events"},encryptedChannelSupport:{fullUrl:"https://github.com/pusher/pusher-js/tree/cc491015371a4bde5743d1c87a0fbac0feb53195#encrypted-channel-support"}}};var c,d,u=function(e){const t=l.urls[e];if(!t)return"";let n;return t.fullUrl?n=t.fullUrl:t.path&&(n=l.baseUrl+t.path),n?`See: ${n}`:""};(d=c||(c={})).UserAuthentication="user-authentication",d.ChannelAuthorization="channel-authorization";class h extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}class m extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}class p extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}class f extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}class g extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}class y extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}class x extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}class v extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}class b extends Error{constructor(e,t){super(t),this.status=e,Object.setPrototypeOf(this,new.target.prototype)}}var j=function(e,t,n,s,a){const r=ut.createXHR();for(var i in r.open("POST",n.endpoint,!0),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.headers)r.setRequestHeader(i,n.headers[i]);if(null!=n.headersProvider){let e=n.headersProvider();for(var i in e)r.setRequestHeader(i,e[i])}return r.onreadystatechange=function(){if(4===r.readyState)if(200===r.status){let t,n=!1;try{t=JSON.parse(r.responseText),n=!0}catch(e){a(new b(200,`JSON returned from ${s.toString()} endpoint was invalid, yet status code was 200. Data was: ${r.responseText}`),null)}n&&a(null,t)}else{let e="";switch(s){case c.UserAuthentication:e=u("authenticationEndpoint");break;case c.ChannelAuthorization:e=`Clients must be authorized to join private or presence channels. ${u("authorizationEndpoint")}`}a(new b(r.status,`Unable to retrieve auth string from ${s.toString()} endpoint - received status: ${r.status} from ${n.endpoint}. ${e}`),null)}},r.send(t),r},w=String.fromCharCode,k="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",N=function(e){var t=e.charCodeAt(0);return t<128?e:t<2048?w(192|t>>>6)+w(128|63&t):w(224|t>>>12&15)+w(128|t>>>6&63)+w(128|63&t)},S=function(e){return e.replace(/[^\x00-\x7F]/g,N)},C=function(e){var t=[0,2,1][e.length%3],n=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0);return[k.charAt(n>>>18),k.charAt(n>>>12&63),t>=2?"=":k.charAt(n>>>6&63),t>=1?"=":k.charAt(63&n)].join("")},T=window.btoa||function(e){return e.replace(/[\s\S]{1,3}/g,C)},P=class{constructor(e,t,n,s){this.clear=t,this.timer=e(()=>{this.timer&&(this.timer=s(this.timer))},n)}isRunning(){return null!==this.timer}ensureAborted(){this.timer&&(this.clear(this.timer),this.timer=null)}};function E(e){window.clearTimeout(e)}function L(e){window.clearInterval(e)}class I extends P{constructor(e,t){super(setTimeout,E,e,function(e){return t(),null})}}class A extends P{constructor(e,t){super(setInterval,L,e,function(e){return t(),e})}}var O={now:()=>Date.now?Date.now():(new Date).valueOf(),defer:e=>new I(0,e),method(e,...t){var n=Array.prototype.slice.call(arguments,1);return function(t){return t[e].apply(t,n.concat(arguments))}}},D=O;function R(e,...t){for(var n=0;n<t.length;n++){var s=t[n];for(var a in s)s[a]&&s[a].constructor&&s[a].constructor===Object?e[a]=R(e[a]||{},s[a]):e[a]=s[a]}return e}function M(){for(var e=["Pusher"],t=0;t<arguments.length;t++)"string"==typeof arguments[t]?e.push(arguments[t]):e.push(Y(arguments[t]));return e.join(" : ")}function _(e,t){var n=Array.prototype.indexOf;if(null===e)return-1;if(n&&e.indexOf===n)return e.indexOf(t);for(var s=0,a=e.length;s<a;s++)if(e[s]===t)return s;return-1}function F(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(e[n],n,e)}function B(e){var t=[];return F(e,function(e,n){t.push(n)}),t}function z(e,t,n){for(var s=0;s<e.length;s++)t.call(n||window,e[s],s,e)}function U(e,t){for(var n=[],s=0;s<e.length;s++)n.push(t(e[s],s,e,n));return n}function $(e,t){t=t||function(e){return!!e};for(var n=[],s=0;s<e.length;s++)t(e[s],s,e,n)&&n.push(e[s]);return n}function H(e,t){var n={};return F(e,function(s,a){(t&&t(s,a,e,n)||Boolean(s))&&(n[a]=s)}),n}function W(e,t){for(var n=0;n<e.length;n++)if(t(e[n],n,e))return!0;return!1}function q(e){return t=function(e){return"object"==typeof e&&(e=Y(e)),encodeURIComponent((t=e.toString(),T(S(t))));var t},n={},F(e,function(e,s){n[s]=t(e)}),n;var t,n}function V(e){var t,n,s=H(e,function(e){return void 0!==e});return U((t=q(s),n=[],F(t,function(e,t){n.push([t,e])}),n),D.method("join","=")).join("&")}function Y(e){try{return JSON.stringify(e)}catch(s){return JSON.stringify((t=[],n=[],function e(s,a){var r,i,o;switch(typeof s){case"object":if(!s)return null;for(r=0;r<t.length;r+=1)if(t[r]===s)return{$ref:n[r]};if(t.push(s),n.push(a),"[object Array]"===Object.prototype.toString.apply(s))for(o=[],r=0;r<s.length;r+=1)o[r]=e(s[r],a+"["+r+"]");else for(i in o={},s)Object.prototype.hasOwnProperty.call(s,i)&&(o[i]=e(s[i],a+"["+JSON.stringify(i)+"]"));return o;case"number":case"string":case"boolean":return s}}(e,"$")))}var t,n}var G=new class{constructor(){this.globalLog=e=>{window.console&&window.console.log&&window.console.log(e)}}debug(...e){this.log(this.globalLog,e)}warn(...e){this.log(this.globalLogWarn,e)}error(...e){this.log(this.globalLogError,e)}globalLogWarn(e){window.console&&window.console.warn?window.console.warn(e):this.globalLog(e)}globalLogError(e){window.console&&window.console.error?window.console.error(e):this.globalLogWarn(e)}log(e,...t){var n=M.apply(this,arguments);It.log?It.log(n):It.logToConsole&&e.bind(this)(n)}},J=function(e,t,n,s,a){void 0===n.headers&&null==n.headersProvider||G.warn(`To send headers with the ${s.toString()} request, you must use AJAX, rather than JSONP.`);var r=e.nextAuthCallbackID.toString();e.nextAuthCallbackID++;var i=e.getDocument(),o=i.createElement("script");e.auth_callbacks[r]=function(e){a(null,e)};var l="Pusher.auth_callbacks['"+r+"']";o.src=n.endpoint+"?callback="+encodeURIComponent(l)+"&"+t;var c=i.getElementsByTagName("head")[0]||i.documentElement;c.insertBefore(o,c.firstChild)};class Q{constructor(e){this.src=e}send(e){var t=this,n="Error loading "+t.src;t.script=document.createElement("script"),t.script.id=e.id,t.script.src=t.src,t.script.type="text/javascript",t.script.charset="UTF-8",t.script.addEventListener?(t.script.onerror=function(){e.callback(n)},t.script.onload=function(){e.callback(null)}):t.script.onreadystatechange=function(){"loaded"!==t.script.readyState&&"complete"!==t.script.readyState||e.callback(null)},void 0===t.script.async&&document.attachEvent&&/opera/i.test(navigator.userAgent)?(t.errorScript=document.createElement("script"),t.errorScript.id=e.id+"_error",t.errorScript.text=e.name+"('"+n+"');",t.script.async=t.errorScript.async=!1):t.script.async=!0;var s=document.getElementsByTagName("head")[0];s.insertBefore(t.script,s.firstChild),t.errorScript&&s.insertBefore(t.errorScript,t.script.nextSibling)}cleanup(){this.script&&(this.script.onload=this.script.onerror=null,this.script.onreadystatechange=null),this.script&&this.script.parentNode&&this.script.parentNode.removeChild(this.script),this.errorScript&&this.errorScript.parentNode&&this.errorScript.parentNode.removeChild(this.errorScript),this.script=null,this.errorScript=null}}class K{constructor(e,t){this.url=e,this.data=t}send(e){if(!this.request){var t=V(this.data),n=this.url+"/"+e.number+"?"+t;this.request=ut.createScriptRequest(n),this.request.send(e)}}cleanup(){this.request&&this.request.cleanup()}}var X={name:"jsonp",getAgent:function(e,t){return function(n,s){var r="http"+(t?"s":"")+"://"+(e.host||e.options.host)+e.options.path,i=ut.createJSONPRequest(r,n),o=ut.ScriptReceivers.create(function(t,n){a.remove(o),i.cleanup(),n&&n.host&&(e.host=n.host),s&&s(t,n)});i.send(o)}}};function Z(e,t,n){return e+(t.useTLS?"s":"")+"://"+(t.useTLS?t.hostTLS:t.hostNonTLS)+n}function ee(e,t){return"/app/"+e+"?protocol="+r.PROTOCOL+"&client=js&version="+r.VERSION+(t?"&"+t:"")}var te={getInitial:function(e,t){return Z("ws",t,(t.httpPath||"")+ee(e,"flash=false"))}},ne={getInitial:function(e,t){return Z("http",t,(t.httpPath||"/pusher")+ee(e))}},se={getInitial:function(e,t){return Z("http",t,t.httpPath||"/pusher")},getPath:function(e,t){return ee(e)}};class ae{constructor(){this._callbacks={}}get(e){return this._callbacks[re(e)]}add(e,t,n){var s=re(e);this._callbacks[s]=this._callbacks[s]||[],this._callbacks[s].push({fn:t,context:n})}remove(e,t,n){if(e||t||n){var s=e?[re(e)]:B(this._callbacks);t||n?this.removeCallback(s,t,n):this.removeAllCallbacks(s)}else this._callbacks={}}removeCallback(e,t,n){z(e,function(e){this._callbacks[e]=$(this._callbacks[e]||[],function(e){return t&&t!==e.fn||n&&n!==e.context}),0===this._callbacks[e].length&&delete this._callbacks[e]},this)}removeAllCallbacks(e){z(e,function(e){delete this._callbacks[e]},this)}}function re(e){return"_"+e}class ie{constructor(e){this.callbacks=new ae,this.global_callbacks=[],this.failThrough=e}bind(e,t,n){return this.callbacks.add(e,t,n),this}bind_global(e){return this.global_callbacks.push(e),this}unbind(e,t,n){return this.callbacks.remove(e,t,n),this}unbind_global(e){return e?(this.global_callbacks=$(this.global_callbacks||[],t=>t!==e),this):(this.global_callbacks=[],this)}unbind_all(){return this.unbind(),this.unbind_global(),this}emit(e,t,n){for(var s=0;s<this.global_callbacks.length;s++)this.global_callbacks[s](e,t);var a=this.callbacks.get(e),r=[];if(n?r.push(t,n):t&&r.push(t),a&&a.length>0)for(s=0;s<a.length;s++)a[s].fn.apply(a[s].context||window,r);else this.failThrough&&this.failThrough(e,t);return this}}class oe extends ie{constructor(e,t,n,s,a){super(),this.initialize=ut.transportConnectionInitializer,this.hooks=e,this.name=t,this.priority=n,this.key=s,this.options=a,this.state="new",this.timeline=a.timeline,this.activityTimeout=a.activityTimeout,this.id=this.timeline.generateUniqueID()}handlesActivityChecks(){return Boolean(this.hooks.handlesActivityChecks)}supportsPing(){return Boolean(this.hooks.supportsPing)}connect(){if(this.socket||"initialized"!==this.state)return!1;var e=this.hooks.urls.getInitial(this.key,this.options);try{this.socket=this.hooks.getSocket(e,this.options)}catch(t){return D.defer(()=>{this.onError(t),this.changeState("closed")}),!1}return this.bindListeners(),G.debug("Connecting",{transport:this.name,url:e}),this.changeState("connecting"),!0}close(){return!!this.socket&&(this.socket.close(),!0)}send(e){return"open"===this.state&&(D.defer(()=>{this.socket&&this.socket.send(e)}),!0)}ping(){"open"===this.state&&this.supportsPing()&&this.socket.ping()}onOpen(){this.hooks.beforeOpen&&this.hooks.beforeOpen(this.socket,this.hooks.urls.getPath(this.key,this.options)),this.changeState("open"),this.socket.onopen=void 0}onError(e){this.emit("error",{type:"WebSocketError",error:e}),this.timeline.error(this.buildTimelineMessage({error:e.toString()}))}onClose(e){e?this.changeState("closed",{code:e.code,reason:e.reason,wasClean:e.wasClean}):this.changeState("closed"),this.unbindListeners(),this.socket=void 0}onMessage(e){this.emit("message",e)}onActivity(){this.emit("activity")}bindListeners(){this.socket.onopen=()=>{this.onOpen()},this.socket.onerror=e=>{this.onError(e)},this.socket.onclose=e=>{this.onClose(e)},this.socket.onmessage=e=>{this.onMessage(e)},this.supportsPing()&&(this.socket.onactivity=()=>{this.onActivity()})}unbindListeners(){this.socket&&(this.socket.onopen=void 0,this.socket.onerror=void 0,this.socket.onclose=void 0,this.socket.onmessage=void 0,this.supportsPing()&&(this.socket.onactivity=void 0))}changeState(e,t){this.state=e,this.timeline.info(this.buildTimelineMessage({state:e,params:t})),this.emit(e,t)}buildTimelineMessage(e){return R({cid:this.id},e)}}class le{constructor(e){this.hooks=e}isSupported(e){return this.hooks.isSupported(e)}createConnection(e,t,n,s){return new oe(this.hooks,e,t,n,s)}}var ce=new le({urls:te,handlesActivityChecks:!1,supportsPing:!1,isInitialized:function(){return Boolean(ut.getWebSocketAPI())},isSupported:function(){return Boolean(ut.getWebSocketAPI())},getSocket:function(e){return ut.createWebSocket(e)}}),de={urls:ne,handlesActivityChecks:!1,supportsPing:!0,isInitialized:function(){return!0}},ue=R({getSocket:function(e){return ut.HTTPFactory.createStreamingSocket(e)}},de),he=R({getSocket:function(e){return ut.HTTPFactory.createPollingSocket(e)}},de),me={isSupported:function(){return ut.isXHRSupported()}},pe={ws:ce,xhr_streaming:new le(R({},ue,me)),xhr_polling:new le(R({},he,me))},fe=new le({file:"sockjs",urls:se,handlesActivityChecks:!0,supportsPing:!1,isSupported:function(){return!0},isInitialized:function(){return void 0!==window.SockJS},getSocket:function(e,t){return new window.SockJS(e,null,{js_path:o.getPath("sockjs",{useTLS:t.useTLS}),ignore_null_origin:t.ignoreNullOrigin})},beforeOpen:function(e,t){e.send(JSON.stringify({path:t}))}}),ge={isSupported:function(e){return ut.isXDRSupported(e.useTLS)}},ye=new le(R({},ue,ge)),xe=new le(R({},he,ge));pe.xdr_streaming=ye,pe.xdr_polling=xe,pe.sockjs=fe;var ve=pe,be=new class extends ie{constructor(){super();var e=this;void 0!==window.addEventListener&&(window.addEventListener("online",function(){e.emit("online")},!1),window.addEventListener("offline",function(){e.emit("offline")},!1))}isOnline(){return void 0===window.navigator.onLine||window.navigator.onLine}};class je{constructor(e,t,n){this.manager=e,this.transport=t,this.minPingDelay=n.minPingDelay,this.maxPingDelay=n.maxPingDelay,this.pingDelay=void 0}createConnection(e,t,n,s){s=R({},s,{activityTimeout:this.pingDelay});var a=this.transport.createConnection(e,t,n,s),r=null,i=function(){a.unbind("open",i),a.bind("closed",o),r=D.now()},o=e=>{if(a.unbind("closed",o),1002===e.code||1003===e.code)this.manager.reportDeath();else if(!e.wasClean&&r){var t=D.now()-r;t<2*this.maxPingDelay&&(this.manager.reportDeath(),this.pingDelay=Math.max(t/2,this.minPingDelay))}};return a.bind("open",i),a}isSupported(e){return this.manager.isAlive()&&this.transport.isSupported(e)}}const we={decodeMessage:function(e){try{var t=JSON.parse(e.data),n=t.data;if("string"==typeof n)try{n=JSON.parse(t.data)}catch(a){}var s={event:t.event,channel:t.channel,data:n};return t.user_id&&(s.user_id=t.user_id),s}catch(a){throw{type:"MessageParseError",error:a,data:e.data}}},encodeMessage:function(e){return JSON.stringify(e)},processHandshake:function(e){var t=we.decodeMessage(e);if("pusher:connection_established"===t.event){if(!t.data.activity_timeout)throw"No activity timeout specified in handshake";return{action:"connected",id:t.data.socket_id,activityTimeout:1e3*t.data.activity_timeout}}if("pusher:error"===t.event)return{action:this.getCloseAction(t.data),error:this.getCloseError(t.data)};throw"Invalid handshake"},getCloseAction:function(e){return e.code<4e3?e.code>=1002&&e.code<=1004?"backoff":null:4e3===e.code?"tls_only":e.code<4100?"refused":e.code<4200?"backoff":e.code<4300?"retry":"refused"},getCloseError:function(e){return 1e3!==e.code&&1001!==e.code?{type:"PusherError",data:{code:e.code,message:e.reason||e.message}}:null}};var ke=we;class Ne extends ie{constructor(e,t){super(),this.id=e,this.transport=t,this.activityTimeout=t.activityTimeout,this.bindListeners()}handlesActivityChecks(){return this.transport.handlesActivityChecks()}send(e){return this.transport.send(e)}send_event(e,t,n){var s={event:e,data:t};return n&&(s.channel=n),G.debug("Event sent",s),this.send(ke.encodeMessage(s))}ping(){this.transport.supportsPing()?this.transport.ping():this.send_event("pusher:ping",{})}close(){this.transport.close()}bindListeners(){var e={message:e=>{var t;try{t=ke.decodeMessage(e)}catch(n){this.emit("error",{type:"MessageParseError",error:n,data:e.data})}if(void 0!==t){switch(G.debug("Event recd",t),t.event){case"pusher:error":this.emit("error",{type:"PusherError",data:t.data});break;case"pusher:ping":this.emit("ping");break;case"pusher:pong":this.emit("pong")}this.emit("message",t)}},activity:()=>{this.emit("activity")},error:e=>{this.emit("error",e)},closed:e=>{t(),e&&e.code&&this.handleCloseEvent(e),this.transport=null,this.emit("closed")}},t=()=>{F(e,(e,t)=>{this.transport.unbind(t,e)})};F(e,(e,t)=>{this.transport.bind(t,e)})}handleCloseEvent(e){var t=ke.getCloseAction(e),n=ke.getCloseError(e);n&&this.emit("error",n),t&&this.emit(t,{action:t,error:n})}}class Se{constructor(e,t){this.transport=e,this.callback=t,this.bindListeners()}close(){this.unbindListeners(),this.transport.close()}bindListeners(){this.onMessage=e=>{var t;this.unbindListeners();try{t=ke.processHandshake(e)}catch(n){return this.finish("error",{error:n}),void this.transport.close()}"connected"===t.action?this.finish("connected",{connection:new Ne(t.id,this.transport),activityTimeout:t.activityTimeout}):(this.finish(t.action,{error:t.error}),this.transport.close())},this.onClosed=e=>{this.unbindListeners();var t=ke.getCloseAction(e)||"backoff",n=ke.getCloseError(e);this.finish(t,{error:n})},this.transport.bind("message",this.onMessage),this.transport.bind("closed",this.onClosed)}unbindListeners(){this.transport.unbind("message",this.onMessage),this.transport.unbind("closed",this.onClosed)}finish(e,t){this.callback(R({transport:this.transport,action:e},t))}}class Ce{constructor(e,t){this.timeline=e,this.options=t||{}}send(e,t){this.timeline.isEmpty()||this.timeline.send(ut.TimelineTransport.getAgent(this,e),t)}}class Te extends ie{constructor(e,t){super(function(t,n){G.debug("No callbacks on "+e+" for "+t)}),this.name=e,this.pusher=t,this.subscribed=!1,this.subscriptionPending=!1,this.subscriptionCancelled=!1}authorize(e,t){return t(null,{auth:""})}trigger(e,t){if(0!==e.indexOf("client-"))throw new h("Event '"+e+"' does not start with 'client-'");if(!this.subscribed){var n=u("triggeringClientEvents");G.warn(`Client event triggered before channel 'subscription_succeeded' event . ${n}`)}return this.pusher.send_event(e,t,this.name)}disconnect(){this.subscribed=!1,this.subscriptionPending=!1}handleEvent(e){var t=e.event,n=e.data;"pusher_internal:subscription_succeeded"===t?this.handleSubscriptionSucceededEvent(e):"pusher_internal:subscription_count"===t?this.handleSubscriptionCountEvent(e):0!==t.indexOf("pusher_internal:")&&this.emit(t,n,{})}handleSubscriptionSucceededEvent(e){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):this.emit("pusher:subscription_succeeded",e.data)}handleSubscriptionCountEvent(e){e.data.subscription_count&&(this.subscriptionCount=e.data.subscription_count),this.emit("pusher:subscription_count",e.data)}subscribe(){this.subscribed||(this.subscriptionPending=!0,this.subscriptionCancelled=!1,this.authorize(this.pusher.connection.socket_id,(e,t)=>{e?(this.subscriptionPending=!1,G.error(e.toString()),this.emit("pusher:subscription_error",Object.assign({},{type:"AuthError",error:e.message},e instanceof b?{status:e.status}:{}))):this.pusher.send_event("pusher:subscribe",{auth:t.auth,channel_data:t.channel_data,channel:this.name})}))}unsubscribe(){this.subscribed=!1,this.pusher.send_event("pusher:unsubscribe",{channel:this.name})}cancelSubscription(){this.subscriptionCancelled=!0}reinstateSubscription(){this.subscriptionCancelled=!1}}class Pe extends Te{authorize(e,t){return this.pusher.config.channelAuthorizer({channelName:this.name,socketId:e},t)}}class Ee{constructor(){this.reset()}get(e){return Object.prototype.hasOwnProperty.call(this.members,e)?{id:e,info:this.members[e]}:null}each(e){F(this.members,(t,n)=>{e(this.get(n))})}setMyID(e){this.myID=e}onSubscription(e){this.members=e.presence.hash,this.count=e.presence.count,this.me=this.get(this.myID)}addMember(e){return null===this.get(e.user_id)&&this.count++,this.members[e.user_id]=e.user_info,this.get(e.user_id)}removeMember(e){var t=this.get(e.user_id);return t&&(delete this.members[e.user_id],this.count--),t}reset(){this.members={},this.count=0,this.myID=null,this.me=null}}var Le=function(e,t,n,s){return new(n||(n=Promise))(function(a,r){function i(e){try{l(s.next(e))}catch(t){r(t)}}function o(e){try{l(s.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,o)}l((s=s.apply(e,t||[])).next())})};class Ie extends Pe{constructor(e,t){super(e,t),this.members=new Ee}authorize(e,t){super.authorize(e,(e,n)=>Le(this,void 0,void 0,function*(){if(!e)if(null!=n.channel_data){var s=JSON.parse(n.channel_data);this.members.setMyID(s.user_id)}else{if(yield this.pusher.user.signinDonePromise,null==this.pusher.user.user_data){let e=u("authorizationEndpoint");return G.error(`Invalid auth response for channel '${this.name}', expected 'channel_data' field. ${e}, or the user should be signed in.`),void t("Invalid auth response")}this.members.setMyID(this.pusher.user.user_data.id)}t(e,n)}))}handleEvent(e){var t=e.event;if(0===t.indexOf("pusher_internal:"))this.handleInternalEvent(e);else{var n=e.data,s={};e.user_id&&(s.user_id=e.user_id),this.emit(t,n,s)}}handleInternalEvent(e){var t=e.event,n=e.data;switch(t){case"pusher_internal:subscription_succeeded":this.handleSubscriptionSucceededEvent(e);break;case"pusher_internal:subscription_count":this.handleSubscriptionCountEvent(e);break;case"pusher_internal:member_added":var s=this.members.addMember(n);this.emit("pusher:member_added",s);break;case"pusher_internal:member_removed":var a=this.members.removeMember(n);a&&this.emit("pusher:member_removed",a)}}handleSubscriptionSucceededEvent(e){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):(this.members.onSubscription(e.data),this.emit("pusher:subscription_succeeded",this.members))}disconnect(){this.members.reset(),super.disconnect()}}var Ae=n(1),Oe=n(0);class De extends Pe{constructor(e,t,n){super(e,t),this.key=null,this.nacl=n}authorize(e,t){super.authorize(e,(e,n)=>{if(e)return void t(e,n);let s=n.shared_secret;s?(this.key=Object(Oe.decode)(s),delete n.shared_secret,t(null,n)):t(new Error(`No shared_secret key in auth payload for encrypted channel: ${this.name}`),null)})}trigger(e,t){throw new y("Client events are not currently supported for encrypted channels")}handleEvent(e){var t=e.event,n=e.data;0!==t.indexOf("pusher_internal:")&&0!==t.indexOf("pusher:")?this.handleEncryptedEvent(t,n):super.handleEvent(e)}handleEncryptedEvent(e,t){if(!this.key)return void G.debug("Received encrypted event before key has been retrieved from the authEndpoint");if(!t.ciphertext||!t.nonce)return void G.error("Unexpected format for encrypted event, expected object with `ciphertext` and `nonce` fields, got: "+t);let n=Object(Oe.decode)(t.ciphertext);if(n.length<this.nacl.secretbox.overheadLength)return void G.error(`Expected encrypted event ciphertext length to be ${this.nacl.secretbox.overheadLength}, got: ${n.length}`);let s=Object(Oe.decode)(t.nonce);if(s.length<this.nacl.secretbox.nonceLength)return void G.error(`Expected encrypted event nonce length to be ${this.nacl.secretbox.nonceLength}, got: ${s.length}`);let a=this.nacl.secretbox.open(n,s,this.key);if(null===a)return G.debug("Failed to decrypt an event, probably because it was encrypted with a different key. Fetching a new key from the authEndpoint..."),void this.authorize(this.pusher.connection.socket_id,(t,r)=>{t?G.error(`Failed to make a request to the authEndpoint: ${r}. Unable to fetch new key, so dropping encrypted event`):(a=this.nacl.secretbox.open(n,s,this.key),null!==a?this.emit(e,this.getDataToEmit(a)):G.error("Failed to decrypt event with new key. Dropping encrypted event"))});this.emit(e,this.getDataToEmit(a))}getDataToEmit(e){let t=Object(Ae.decode)(e);try{return JSON.parse(t)}catch(n){return t}}}class Re extends ie{constructor(e,t){super(),this.state="initialized",this.connection=null,this.key=e,this.options=t,this.timeline=this.options.timeline,this.usingTLS=this.options.useTLS,this.errorCallbacks=this.buildErrorCallbacks(),this.connectionCallbacks=this.buildConnectionCallbacks(this.errorCallbacks),this.handshakeCallbacks=this.buildHandshakeCallbacks(this.errorCallbacks);var n=ut.getNetwork();n.bind("online",()=>{this.timeline.info({netinfo:"online"}),"connecting"!==this.state&&"unavailable"!==this.state||this.retryIn(0)}),n.bind("offline",()=>{this.timeline.info({netinfo:"offline"}),this.connection&&this.sendActivityCheck()}),this.updateStrategy()}connect(){this.connection||this.runner||(this.strategy.isSupported()?(this.updateState("connecting"),this.startConnecting(),this.setUnavailableTimer()):this.updateState("failed"))}send(e){return!!this.connection&&this.connection.send(e)}send_event(e,t,n){return!!this.connection&&this.connection.send_event(e,t,n)}disconnect(){this.disconnectInternally(),this.updateState("disconnected")}isUsingTLS(){return this.usingTLS}startConnecting(){var e=(t,n)=>{t?this.runner=this.strategy.connect(0,e):"error"===n.action?(this.emit("error",{type:"HandshakeError",error:n.error}),this.timeline.error({handshakeError:n.error})):(this.abortConnecting(),this.handshakeCallbacks[n.action](n))};this.runner=this.strategy.connect(0,e)}abortConnecting(){this.runner&&(this.runner.abort(),this.runner=null)}disconnectInternally(){this.abortConnecting(),this.clearRetryTimer(),this.clearUnavailableTimer(),this.connection&&this.abandonConnection().close()}updateStrategy(){this.strategy=this.options.getStrategy({key:this.key,timeline:this.timeline,useTLS:this.usingTLS})}retryIn(e){this.timeline.info({action:"retry",delay:e}),e>0&&this.emit("connecting_in",Math.round(e/1e3)),this.retryTimer=new I(e||0,()=>{this.disconnectInternally(),this.connect()})}clearRetryTimer(){this.retryTimer&&(this.retryTimer.ensureAborted(),this.retryTimer=null)}setUnavailableTimer(){this.unavailableTimer=new I(this.options.unavailableTimeout,()=>{this.updateState("unavailable")})}clearUnavailableTimer(){this.unavailableTimer&&this.unavailableTimer.ensureAborted()}sendActivityCheck(){this.stopActivityCheck(),this.connection.ping(),this.activityTimer=new I(this.options.pongTimeout,()=>{this.timeline.error({pong_timed_out:this.options.pongTimeout}),this.retryIn(0)})}resetActivityCheck(){this.stopActivityCheck(),this.connection&&!this.connection.handlesActivityChecks()&&(this.activityTimer=new I(this.activityTimeout,()=>{this.sendActivityCheck()}))}stopActivityCheck(){this.activityTimer&&this.activityTimer.ensureAborted()}buildConnectionCallbacks(e){return R({},e,{message:e=>{this.resetActivityCheck(),this.emit("message",e)},ping:()=>{this.send_event("pusher:pong",{})},activity:()=>{this.resetActivityCheck()},error:e=>{this.emit("error",e)},closed:()=>{this.abandonConnection(),this.shouldRetry()&&this.retryIn(1e3)}})}buildHandshakeCallbacks(e){return R({},e,{connected:e=>{this.activityTimeout=Math.min(this.options.activityTimeout,e.activityTimeout,e.connection.activityTimeout||1/0),this.clearUnavailableTimer(),this.setConnection(e.connection),this.socket_id=this.connection.id,this.updateState("connected",{socket_id:this.socket_id})}})}buildErrorCallbacks(){let e=e=>t=>{t.error&&this.emit("error",{type:"WebSocketError",error:t.error}),e(t)};return{tls_only:e(()=>{this.usingTLS=!0,this.updateStrategy(),this.retryIn(0)}),refused:e(()=>{this.disconnect()}),backoff:e(()=>{this.retryIn(1e3)}),retry:e(()=>{this.retryIn(0)})}}setConnection(e){for(var t in this.connection=e,this.connectionCallbacks)this.connection.bind(t,this.connectionCallbacks[t]);this.resetActivityCheck()}abandonConnection(){if(this.connection){for(var e in this.stopActivityCheck(),this.connectionCallbacks)this.connection.unbind(e,this.connectionCallbacks[e]);var t=this.connection;return this.connection=null,t}}updateState(e,t){var n=this.state;if(this.state=e,n!==e){var s=e;"connected"===s&&(s+=" with new socket ID "+t.socket_id),G.debug("State changed",n+" -> "+s),this.timeline.info({state:e,params:t}),this.emit("state_change",{previous:n,current:e}),this.emit(e,t)}}shouldRetry(){return"connecting"===this.state||"connected"===this.state}}class Me{constructor(){this.channels={}}add(e,t){return this.channels[e]||(this.channels[e]=function(e,t){if(0===e.indexOf("private-encrypted-")){if(t.config.nacl)return _e.createEncryptedChannel(e,t,t.config.nacl);let n="Tried to subscribe to a private-encrypted- channel but no nacl implementation available",s=u("encryptedChannelSupport");throw new y(`${n}. ${s}`)}if(0===e.indexOf("private-"))return _e.createPrivateChannel(e,t);if(0===e.indexOf("presence-"))return _e.createPresenceChannel(e,t);if(0===e.indexOf("#"))throw new m('Cannot create a channel with name "'+e+'".');return _e.createChannel(e,t)}(e,t)),this.channels[e]}all(){return e=this.channels,t=[],F(e,function(e){t.push(e)}),t;var e,t}find(e){return this.channels[e]}remove(e){var t=this.channels[e];return delete this.channels[e],t}disconnect(){F(this.channels,function(e){e.disconnect()})}}var _e={createChannels:()=>new Me,createConnectionManager:(e,t)=>new Re(e,t),createChannel:(e,t)=>new Te(e,t),createPrivateChannel:(e,t)=>new Pe(e,t),createPresenceChannel:(e,t)=>new Ie(e,t),createEncryptedChannel:(e,t,n)=>new De(e,t,n),createTimelineSender:(e,t)=>new Ce(e,t),createHandshake:(e,t)=>new Se(e,t),createAssistantToTheTransportManager:(e,t,n)=>new je(e,t,n)};class Fe{constructor(e){this.options=e||{},this.livesLeft=this.options.lives||1/0}getAssistant(e){return _e.createAssistantToTheTransportManager(this,e,{minPingDelay:this.options.minPingDelay,maxPingDelay:this.options.maxPingDelay})}isAlive(){return this.livesLeft>0}reportDeath(){this.livesLeft-=1}}class Be{constructor(e,t){this.strategies=e,this.loop=Boolean(t.loop),this.failFast=Boolean(t.failFast),this.timeout=t.timeout,this.timeoutLimit=t.timeoutLimit}isSupported(){return W(this.strategies,D.method("isSupported"))}connect(e,t){var n=this.strategies,s=0,a=this.timeout,r=null,i=(o,l)=>{l?t(null,l):(s+=1,this.loop&&(s%=n.length),s<n.length?(a&&(a*=2,this.timeoutLimit&&(a=Math.min(a,this.timeoutLimit))),r=this.tryStrategy(n[s],e,{timeout:a,failFast:this.failFast},i)):t(!0))};return r=this.tryStrategy(n[s],e,{timeout:a,failFast:this.failFast},i),{abort:function(){r.abort()},forceMinPriority:function(t){e=t,r&&r.forceMinPriority(t)}}}tryStrategy(e,t,n,s){var a=null,r=null;return n.timeout>0&&(a=new I(n.timeout,function(){r.abort(),s(!0)})),r=e.connect(t,function(e,t){e&&a&&a.isRunning()&&!n.failFast||(a&&a.ensureAborted(),s(e,t))}),{abort:function(){a&&a.ensureAborted(),r.abort()},forceMinPriority:function(e){r.forceMinPriority(e)}}}}class ze{constructor(e){this.strategies=e}isSupported(){return W(this.strategies,D.method("isSupported"))}connect(e,t){return function(e,t,n){var s=U(e,function(e,s,a,r){return e.connect(t,n(s,r))});return{abort:function(){z(s,Ue)},forceMinPriority:function(e){z(s,function(t){t.forceMinPriority(e)})}}}(this.strategies,e,function(e,n){return function(s,a){n[e].error=s,s?function(e){return function(e,t){for(var n=0;n<e.length;n++)if(!t(e[n],n,e))return!1;return!0}(e,function(e){return Boolean(e.error)})}(n)&&t(!0):(z(n,function(e){e.forceMinPriority(a.transport.priority)}),t(null,a))}})}}function Ue(e){e.error||e.aborted||(e.abort(),e.aborted=!0)}class $e{constructor(e,t,n){this.strategy=e,this.transports=t,this.ttl=n.ttl||18e5,this.usingTLS=n.useTLS,this.timeline=n.timeline}isSupported(){return this.strategy.isSupported()}connect(e,t){var n=this.usingTLS,s=function(e){var t=ut.getLocalStorage();if(t)try{var n=t[He(e)];if(n)return JSON.parse(n)}catch(s){We(e)}return null}(n),a=s&&s.cacheSkipCount?s.cacheSkipCount:0,r=[this.strategy];if(s&&s.timestamp+this.ttl>=D.now()){var i=this.transports[s.transport];i&&(["ws","wss"].includes(s.transport)||a>3?(this.timeline.info({cached:!0,transport:s.transport,latency:s.latency}),r.push(new Be([i],{timeout:2*s.latency+1e3,failFast:!0}))):a++)}var o=D.now(),l=r.pop().connect(e,function s(i,c){i?(We(n),r.length>0?(o=D.now(),l=r.pop().connect(e,s)):t(i)):(function(e,t,n,s){var a=ut.getLocalStorage();if(a)try{a[He(e)]=Y({timestamp:D.now(),transport:t,latency:n,cacheSkipCount:s})}catch(r){}}(n,c.transport.name,D.now()-o,a),t(null,c))});return{abort:function(){l.abort()},forceMinPriority:function(t){e=t,l&&l.forceMinPriority(t)}}}}function He(e){return"pusherTransport"+(e?"TLS":"NonTLS")}function We(e){var t=ut.getLocalStorage();if(t)try{delete t[He(e)]}catch(n){}}class qe{constructor(e,{delay:t}){this.strategy=e,this.options={delay:t}}isSupported(){return this.strategy.isSupported()}connect(e,t){var n,s=this.strategy,a=new I(this.options.delay,function(){n=s.connect(e,t)});return{abort:function(){a.ensureAborted(),n&&n.abort()},forceMinPriority:function(t){e=t,n&&n.forceMinPriority(t)}}}}class Ve{constructor(e,t,n){this.test=e,this.trueBranch=t,this.falseBranch=n}isSupported(){return(this.test()?this.trueBranch:this.falseBranch).isSupported()}connect(e,t){return(this.test()?this.trueBranch:this.falseBranch).connect(e,t)}}class Ye{constructor(e){this.strategy=e}isSupported(){return this.strategy.isSupported()}connect(e,t){var n=this.strategy.connect(e,function(e,s){s&&n.abort(),t(e,s)});return n}}function Ge(e){return function(){return e.isSupported()}}var Je,Qe,Ke=function(e,t,n){var s={};function a(t,a,r,i,o){var l=n(e,t,a,r,i,o);return s[t]=l,l}var r,i=Object.assign({},t,{hostNonTLS:e.wsHost+":"+e.wsPort,hostTLS:e.wsHost+":"+e.wssPort,httpPath:e.wsPath}),o=Object.assign({},i,{useTLS:!0}),l=Object.assign({},t,{hostNonTLS:e.httpHost+":"+e.httpPort,hostTLS:e.httpHost+":"+e.httpsPort,httpPath:e.httpPath}),c={loop:!0,timeout:15e3,timeoutLimit:6e4},d=new Fe({minPingDelay:1e4,maxPingDelay:e.activityTimeout}),u=new Fe({lives:2,minPingDelay:1e4,maxPingDelay:e.activityTimeout}),h=a("ws","ws",3,i,d),m=a("wss","ws",3,o,d),p=a("sockjs","sockjs",1,l),f=a("xhr_streaming","xhr_streaming",1,l,u),g=a("xdr_streaming","xdr_streaming",1,l,u),y=a("xhr_polling","xhr_polling",1,l),x=a("xdr_polling","xdr_polling",1,l),v=new Be([h],c),b=new Be([m],c),j=new Be([p],c),w=new Be([new Ve(Ge(f),f,g)],c),k=new Be([new Ve(Ge(y),y,x)],c),N=new Be([new Ve(Ge(w),new ze([w,new qe(k,{delay:4e3})]),k)],c),S=new Ve(Ge(N),N,j);return r=t.useTLS?new ze([v,new qe(S,{delay:2e3})]):new ze([v,new qe(b,{delay:2e3}),new qe(S,{delay:5e3})]),new $e(new Ye(new Ve(Ge(h),r,S)),s,{ttl:18e5,timeline:t.timeline,useTLS:t.useTLS})},Xe={getRequest:function(e){var t=new window.XDomainRequest;return t.ontimeout=function(){e.emit("error",new p),e.close()},t.onerror=function(t){e.emit("error",t),e.close()},t.onprogress=function(){t.responseText&&t.responseText.length>0&&e.onChunk(200,t.responseText)},t.onload=function(){t.responseText&&t.responseText.length>0&&e.onChunk(200,t.responseText),e.emit("finished",200),e.close()},t},abortRequest:function(e){e.ontimeout=e.onerror=e.onprogress=e.onload=null,e.abort()}};class Ze extends ie{constructor(e,t,n){super(),this.hooks=e,this.method=t,this.url=n}start(e){this.position=0,this.xhr=this.hooks.getRequest(this),this.unloader=()=>{this.close()},ut.addUnloadListener(this.unloader),this.xhr.open(this.method,this.url,!0),this.xhr.setRequestHeader&&this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.send(e)}close(){this.unloader&&(ut.removeUnloadListener(this.unloader),this.unloader=null),this.xhr&&(this.hooks.abortRequest(this.xhr),this.xhr=null)}onChunk(e,t){for(;;){var n=this.advanceBuffer(t);if(!n)break;this.emit("chunk",{status:e,data:n})}this.isBufferTooLong(t)&&this.emit("buffer_too_long")}advanceBuffer(e){var t=e.slice(this.position),n=t.indexOf("\n");return-1!==n?(this.position+=n+1,t.slice(0,n)):null}isBufferTooLong(e){return this.position===e.length&&e.length>262144}}(Qe=Je||(Je={}))[Qe.CONNECTING=0]="CONNECTING",Qe[Qe.OPEN=1]="OPEN",Qe[Qe.CLOSED=3]="CLOSED";var et=Je,tt=1;function nt(e){var t=-1===e.indexOf("?")?"?":"&";return e+t+"t="+ +new Date+"&n="+tt++}function st(e){return ut.randomInt(e)}var at,rt,it=class{constructor(e,t){this.hooks=e,this.session=st(1e3)+"/"+function(e){for(var t=[],n=0;n<e;n++)t.push(st(32).toString(32));return t.join("")}(8),this.location=function(e){var t=/([^\?]*)\/*(\??.*)/.exec(e);return{base:t[1],queryString:t[2]}}(t),this.readyState=et.CONNECTING,this.openStream()}send(e){return this.sendRaw(JSON.stringify([e]))}ping(){this.hooks.sendHeartbeat(this)}close(e,t){this.onClose(e,t,!0)}sendRaw(e){if(this.readyState!==et.OPEN)return!1;try{return ut.createSocketRequest("POST",nt((t=this.location,n=this.session,t.base+"/"+n+"/xhr_send"))).start(e),!0}catch(s){return!1}var t,n}reconnect(){this.closeStream(),this.openStream()}onClose(e,t,n){this.closeStream(),this.readyState=et.CLOSED,this.onclose&&this.onclose({code:e,reason:t,wasClean:n})}onChunk(e){var t;if(200===e.status)switch(this.readyState===et.OPEN&&this.onActivity(),e.data.slice(0,1)){case"o":t=JSON.parse(e.data.slice(1)||"{}"),this.onOpen(t);break;case"a":t=JSON.parse(e.data.slice(1)||"[]");for(var n=0;n<t.length;n++)this.onEvent(t[n]);break;case"m":t=JSON.parse(e.data.slice(1)||"null"),this.onEvent(t);break;case"h":this.hooks.onHeartbeat(this);break;case"c":t=JSON.parse(e.data.slice(1)||"[]"),this.onClose(t[0],t[1],!0)}}onOpen(e){var t,n,s;this.readyState===et.CONNECTING?(e&&e.hostname&&(this.location.base=(t=this.location.base,n=e.hostname,(s=/(https?:\/\/)([^\/:]+)((\/|:)?.*)/.exec(t))[1]+n+s[3])),this.readyState=et.OPEN,this.onopen&&this.onopen()):this.onClose(1006,"Server lost session",!0)}onEvent(e){this.readyState===et.OPEN&&this.onmessage&&this.onmessage({data:e})}onActivity(){this.onactivity&&this.onactivity()}onError(e){this.onerror&&this.onerror(e)}openStream(){this.stream=ut.createSocketRequest("POST",nt(this.hooks.getReceiveURL(this.location,this.session))),this.stream.bind("chunk",e=>{this.onChunk(e)}),this.stream.bind("finished",e=>{this.hooks.onFinished(this,e)}),this.stream.bind("buffer_too_long",()=>{this.reconnect()});try{this.stream.start()}catch(e){D.defer(()=>{this.onError(e),this.onClose(1006,"Could not start streaming",!1)})}}closeStream(){this.stream&&(this.stream.unbind_all(),this.stream.close(),this.stream=null)}},ot={getReceiveURL:function(e,t){return e.base+"/"+t+"/xhr_streaming"+e.queryString},onHeartbeat:function(e){e.sendRaw("[]")},sendHeartbeat:function(e){e.sendRaw("[]")},onFinished:function(e,t){e.onClose(1006,"Connection interrupted ("+t+")",!1)}},lt={getReceiveURL:function(e,t){return e.base+"/"+t+"/xhr"+e.queryString},onHeartbeat:function(){},sendHeartbeat:function(e){e.sendRaw("[]")},onFinished:function(e,t){200===t?e.reconnect():e.onClose(1006,"Connection interrupted ("+t+")",!1)}},ct={getRequest:function(e){var t=new(ut.getXHRAPI());return t.onreadystatechange=t.onprogress=function(){switch(t.readyState){case 3:t.responseText&&t.responseText.length>0&&e.onChunk(t.status,t.responseText);break;case 4:t.responseText&&t.responseText.length>0&&e.onChunk(t.status,t.responseText),e.emit("finished",t.status),e.close()}},t},abortRequest:function(e){e.onreadystatechange=null,e.abort()}},dt={createStreamingSocket(e){return this.createSocket(ot,e)},createPollingSocket(e){return this.createSocket(lt,e)},createSocket:(e,t)=>new it(e,t),createXHR(e,t){return this.createRequest(ct,e,t)},createRequest:(e,t,n)=>new Ze(e,t,n),createXDR:function(e,t){return this.createRequest(Xe,e,t)}},ut={nextAuthCallbackID:1,auth_callbacks:{},ScriptReceivers:a,DependenciesReceivers:i,getDefaultStrategy:Ke,Transports:ve,transportConnectionInitializer:function(){var e=this;e.timeline.info(e.buildTimelineMessage({transport:e.name+(e.options.useTLS?"s":"")})),e.hooks.isInitialized()?e.changeState("initialized"):e.hooks.file?(e.changeState("initializing"),o.load(e.hooks.file,{useTLS:e.options.useTLS},function(t,n){e.hooks.isInitialized()?(e.changeState("initialized"),n(!0)):(t&&e.onError(t),e.onClose(),n(!1))})):e.onClose()},HTTPFactory:dt,TimelineTransport:X,getXHRAPI:()=>window.XMLHttpRequest,getWebSocketAPI:()=>window.WebSocket||window.MozWebSocket,setup(e){window.Pusher=e;var t=()=>{this.onDocumentBody(e.ready)};window.JSON?t():o.load("json2",{},t)},getDocument:()=>document,getProtocol(){return this.getDocument().location.protocol},getAuthorizers:()=>({ajax:j,jsonp:J}),onDocumentBody(e){document.body?e():setTimeout(()=>{this.onDocumentBody(e)},0)},createJSONPRequest:(e,t)=>new K(e,t),createScriptRequest:e=>new Q(e),getLocalStorage(){try{return window.localStorage}catch(e){return}},createXHR(){return this.getXHRAPI()?this.createXMLHttpRequest():this.createMicrosoftXHR()},createXMLHttpRequest(){return new(this.getXHRAPI())},createMicrosoftXHR:()=>new ActiveXObject("Microsoft.XMLHTTP"),getNetwork:()=>be,createWebSocket(e){return new(this.getWebSocketAPI())(e)},createSocketRequest(e,t){if(this.isXHRSupported())return this.HTTPFactory.createXHR(e,t);if(this.isXDRSupported(0===t.indexOf("https:")))return this.HTTPFactory.createXDR(e,t);throw"Cross-origin HTTP requests are not supported"},isXHRSupported(){var e=this.getXHRAPI();return Boolean(e)&&void 0!==(new e).withCredentials},isXDRSupported(e){var t=e?"https:":"http:",n=this.getProtocol();return Boolean(window.XDomainRequest)&&n===t},addUnloadListener(e){void 0!==window.addEventListener?window.addEventListener("unload",e,!1):void 0!==window.attachEvent&&window.attachEvent("onunload",e)},removeUnloadListener(e){void 0!==window.addEventListener?window.removeEventListener("unload",e,!1):void 0!==window.detachEvent&&window.detachEvent("onunload",e)},randomInt:e=>Math.floor((window.crypto||window.msCrypto).getRandomValues(new Uint32Array(1))[0]/Math.pow(2,32)*e)};(rt=at||(at={}))[rt.ERROR=3]="ERROR",rt[rt.INFO=6]="INFO",rt[rt.DEBUG=7]="DEBUG";var ht=at;class mt{constructor(e,t,n){this.key=e,this.session=t,this.events=[],this.options=n||{},this.sent=0,this.uniqueID=0}log(e,t){e<=this.options.level&&(this.events.push(R({},t,{timestamp:D.now()})),this.options.limit&&this.events.length>this.options.limit&&this.events.shift())}error(e){this.log(ht.ERROR,e)}info(e){this.log(ht.INFO,e)}debug(e){this.log(ht.DEBUG,e)}isEmpty(){return 0===this.events.length}send(e,t){var n=R({session:this.session,bundle:this.sent+1,key:this.key,lib:"js",version:this.options.version,cluster:this.options.cluster,features:this.options.features,timeline:this.events},this.options.params);return this.events=[],e(n,(e,n)=>{e||this.sent++,t&&t(e,n)}),!0}generateUniqueID(){return this.uniqueID++,this.uniqueID}}class pt{constructor(e,t,n,s){this.name=e,this.priority=t,this.transport=n,this.options=s||{}}isSupported(){return this.transport.isSupported({useTLS:this.options.useTLS})}connect(e,t){if(!this.isSupported())return ft(new v,t);if(this.priority<e)return ft(new f,t);var n=!1,s=this.transport.createConnection(this.name,this.priority,this.options.key,this.options),a=null,r=function(){s.unbind("initialized",r),s.connect()},i=function(){a=_e.createHandshake(s,function(e){n=!0,c(),t(null,e)})},o=function(e){c(),t(e)},l=function(){var e;c(),e=Y(s),t(new g(e))},c=function(){s.unbind("initialized",r),s.unbind("open",i),s.unbind("error",o),s.unbind("closed",l)};return s.bind("initialized",r),s.bind("open",i),s.bind("error",o),s.bind("closed",l),s.initialize(),{abort:()=>{n||(c(),a?a.close():s.close())},forceMinPriority:e=>{n||this.priority<e&&(a?a.close():s.close())}}}}function ft(e,t){return D.defer(function(){t(e)}),{abort:function(){},forceMinPriority:function(){}}}const{Transports:gt}=ut;var yt=function(e,t,n,s,a,r){var i,o=gt[n];if(!o)throw new x(n);return e.enabledTransports&&-1===_(e.enabledTransports,t)||e.disabledTransports&&-1!==_(e.disabledTransports,t)?i=xt:(a=Object.assign({ignoreNullOrigin:e.ignoreNullOrigin},a),i=new pt(t,s,r?r.getAssistant(o):o,a)),i},xt={isSupported:function(){return!1},connect:function(e,t){var n=D.defer(function(){t(new v)});return{abort:function(){n.ensureAborted()},forceMinPriority:function(){}}}},vt=e=>{if(void 0===ut.getAuthorizers()[e.transport])throw`'${e.transport}' is not a recognized auth transport`;return(t,n)=>{const s=((e,t)=>{var n="socket_id="+encodeURIComponent(e.socketId);for(var s in t.params)n+="&"+encodeURIComponent(s)+"="+encodeURIComponent(t.params[s]);if(null!=t.paramsProvider){let e=t.paramsProvider();for(var s in e)n+="&"+encodeURIComponent(s)+"="+encodeURIComponent(e[s])}return n})(t,e);ut.getAuthorizers()[e.transport](ut,s,e,c.UserAuthentication,n)}},bt=e=>{if(void 0===ut.getAuthorizers()[e.transport])throw`'${e.transport}' is not a recognized auth transport`;return(t,n)=>{const s=((e,t)=>{var n="socket_id="+encodeURIComponent(e.socketId);for(var s in n+="&channel_name="+encodeURIComponent(e.channelName),t.params)n+="&"+encodeURIComponent(s)+"="+encodeURIComponent(t.params[s]);if(null!=t.paramsProvider){let e=t.paramsProvider();for(var s in e)n+="&"+encodeURIComponent(s)+"="+encodeURIComponent(e[s])}return n})(t,e);ut.getAuthorizers()[e.transport](ut,s,e,c.ChannelAuthorization,n)}};function jt(e){return e.httpHost?e.httpHost:e.cluster?`sockjs-${e.cluster}.pusher.com`:r.httpHost}function wt(e){return e.wsHost?e.wsHost:`ws-${e.cluster}.pusher.com`}function kt(e){return"https:"===ut.getProtocol()||!1!==e.forceTLS}function Nt(e){return"enableStats"in e?e.enableStats:"disableStats"in e&&!e.disableStats}function St(e){const t=Object.assign(Object.assign({},r.userAuthentication),e.userAuthentication);return"customHandler"in t&&null!=t.customHandler?t.customHandler:vt(t)}function Ct(e,t){const n=function(e,t){let n;return"channelAuthorization"in e?n=Object.assign(Object.assign({},r.channelAuthorization),e.channelAuthorization):(n={transport:e.authTransport||r.authTransport,endpoint:e.authEndpoint||r.authEndpoint},"auth"in e&&("params"in e.auth&&(n.params=e.auth.params),"headers"in e.auth&&(n.headers=e.auth.headers)),"authorizer"in e&&(n.customHandler=((e,t,n)=>{const s={authTransport:t.transport,authEndpoint:t.endpoint,auth:{params:t.params,headers:t.headers}};return(t,a)=>{const r=e.channel(t.channelName);n(r,s).authorize(t.socketId,a)}})(t,n,e.authorizer))),n}(e,t);return"customHandler"in n&&null!=n.customHandler?n.customHandler:bt(n)}class Tt extends ie{constructor(e){super(function(e,t){G.debug(`No callbacks on watchlist events for ${e}`)}),this.pusher=e,this.bindWatchlistInternalEvent()}handleEvent(e){e.data.events.forEach(e=>{this.emit(e.name,e)})}bindWatchlistInternalEvent(){this.pusher.connection.bind("message",e=>{"pusher_internal:watchlist_events"===e.event&&this.handleEvent(e)})}}var Pt=function(){let e,t;const n=new Promise((n,s)=>{e=n,t=s});return{promise:n,resolve:e,reject:t}};class Et extends ie{constructor(e){super(function(e,t){G.debug("No callbacks on user for "+e)}),this.signin_requested=!1,this.user_data=null,this.serverToUserChannel=null,this.signinDonePromise=null,this._signinDoneResolve=null,this._onAuthorize=(e,t)=>{if(e)return G.warn(`Error during signin: ${e}`),void this._cleanup();this.pusher.send_event("pusher:signin",{auth:t.auth,user_data:t.user_data})},this.pusher=e,this.pusher.connection.bind("state_change",({previous:e,current:t})=>{"connected"!==e&&"connected"===t&&this._signin(),"connected"===e&&"connected"!==t&&(this._cleanup(),this._newSigninPromiseIfNeeded())}),this.watchlist=new Tt(e),this.pusher.connection.bind("message",e=>{"pusher:signin_success"===e.event&&this._onSigninSuccess(e.data),this.serverToUserChannel&&this.serverToUserChannel.name===e.channel&&this.serverToUserChannel.handleEvent(e)})}signin(){this.signin_requested||(this.signin_requested=!0,this._signin())}_signin(){this.signin_requested&&(this._newSigninPromiseIfNeeded(),"connected"===this.pusher.connection.state&&this.pusher.config.userAuthenticator({socketId:this.pusher.connection.socket_id},this._onAuthorize))}_onSigninSuccess(e){try{this.user_data=JSON.parse(e.user_data)}catch(t){return G.error(`Failed parsing user data after signin: ${e.user_data}`),void this._cleanup()}if("string"!=typeof this.user_data.id||""===this.user_data.id)return G.error(`user_data doesn't contain an id. user_data: ${this.user_data}`),void this._cleanup();this._signinDoneResolve(),this._subscribeChannels()}_subscribeChannels(){this.serverToUserChannel=new Te(`#server-to-user-${this.user_data.id}`,this.pusher),this.serverToUserChannel.bind_global((e,t)=>{0!==e.indexOf("pusher_internal:")&&0!==e.indexOf("pusher:")&&this.emit(e,t)}),(e=>{e.subscriptionPending&&e.subscriptionCancelled?e.reinstateSubscription():e.subscriptionPending||"connected"!==this.pusher.connection.state||e.subscribe()})(this.serverToUserChannel)}_cleanup(){this.user_data=null,this.serverToUserChannel&&(this.serverToUserChannel.unbind_all(),this.serverToUserChannel.disconnect(),this.serverToUserChannel=null),this.signin_requested&&this._signinDoneResolve()}_newSigninPromiseIfNeeded(){if(!this.signin_requested)return;if(this.signinDonePromise&&!this.signinDonePromise.done)return;const{promise:e,resolve:t}=Pt();e.done=!1;const n=()=>{e.done=!0};e.then(n).catch(n),this.signinDonePromise=e,this._signinDoneResolve=t}}class Lt{static ready(){Lt.isReady=!0;for(var e=0,t=Lt.instances.length;e<t;e++)Lt.instances[e].connect()}static getClientFeatures(){return B(H({ws:ut.Transports.ws},function(e){return e.isSupported({})}))}constructor(e,t){!function(e){if(null==e)throw"You must pass your app key when you instantiate Pusher."}(e),function(e){if(null==e)throw"You must pass an options object";if(null==e.cluster)throw"Options object must provide a cluster";"disableStats"in e&&G.warn("The disableStats option is deprecated in favor of enableStats")}(t),this.key=e,this.config=function(e,t){let n={activityTimeout:e.activityTimeout||r.activityTimeout,cluster:e.cluster,httpPath:e.httpPath||r.httpPath,httpPort:e.httpPort||r.httpPort,httpsPort:e.httpsPort||r.httpsPort,pongTimeout:e.pongTimeout||r.pongTimeout,statsHost:e.statsHost||r.stats_host,unavailableTimeout:e.unavailableTimeout||r.unavailableTimeout,wsPath:e.wsPath||r.wsPath,wsPort:e.wsPort||r.wsPort,wssPort:e.wssPort||r.wssPort,enableStats:Nt(e),httpHost:jt(e),useTLS:kt(e),wsHost:wt(e),userAuthenticator:St(e),channelAuthorizer:Ct(e,t)};return"disabledTransports"in e&&(n.disabledTransports=e.disabledTransports),"enabledTransports"in e&&(n.enabledTransports=e.enabledTransports),"ignoreNullOrigin"in e&&(n.ignoreNullOrigin=e.ignoreNullOrigin),"timelineParams"in e&&(n.timelineParams=e.timelineParams),"nacl"in e&&(n.nacl=e.nacl),n}(t,this),this.channels=_e.createChannels(),this.global_emitter=new ie,this.sessionID=ut.randomInt(1e9),this.timeline=new mt(this.key,this.sessionID,{cluster:this.config.cluster,features:Lt.getClientFeatures(),params:this.config.timelineParams||{},limit:50,level:ht.INFO,version:r.VERSION}),this.config.enableStats&&(this.timelineSender=_e.createTimelineSender(this.timeline,{host:this.config.statsHost,path:"/timeline/v2/"+ut.TimelineTransport.name})),this.connection=_e.createConnectionManager(this.key,{getStrategy:e=>ut.getDefaultStrategy(this.config,e,yt),timeline:this.timeline,activityTimeout:this.config.activityTimeout,pongTimeout:this.config.pongTimeout,unavailableTimeout:this.config.unavailableTimeout,useTLS:Boolean(this.config.useTLS)}),this.connection.bind("connected",()=>{this.subscribeAll(),this.timelineSender&&this.timelineSender.send(this.connection.isUsingTLS())}),this.connection.bind("message",e=>{var t=0===e.event.indexOf("pusher_internal:");if(e.channel){var n=this.channel(e.channel);n&&n.handleEvent(e)}t||this.global_emitter.emit(e.event,e.data)}),this.connection.bind("connecting",()=>{this.channels.disconnect()}),this.connection.bind("disconnected",()=>{this.channels.disconnect()}),this.connection.bind("error",e=>{G.warn(e)}),Lt.instances.push(this),this.timeline.info({instances:Lt.instances.length}),this.user=new Et(this),Lt.isReady&&this.connect()}channel(e){return this.channels.find(e)}allChannels(){return this.channels.all()}connect(){if(this.connection.connect(),this.timelineSender&&!this.timelineSenderTimer){var e=this.connection.isUsingTLS(),t=this.timelineSender;this.timelineSenderTimer=new A(6e4,function(){t.send(e)})}}disconnect(){this.connection.disconnect(),this.timelineSenderTimer&&(this.timelineSenderTimer.ensureAborted(),this.timelineSenderTimer=null)}bind(e,t,n){return this.global_emitter.bind(e,t,n),this}unbind(e,t,n){return this.global_emitter.unbind(e,t,n),this}bind_global(e){return this.global_emitter.bind_global(e),this}unbind_global(e){return this.global_emitter.unbind_global(e),this}unbind_all(e){return this.global_emitter.unbind_all(),this}subscribeAll(){var e;for(e in this.channels.channels)this.channels.channels.hasOwnProperty(e)&&this.subscribe(e)}subscribe(e){var t=this.channels.add(e,this);return t.subscriptionPending&&t.subscriptionCancelled?t.reinstateSubscription():t.subscriptionPending||"connected"!==this.connection.state||t.subscribe(),t}unsubscribe(e){var t=this.channels.find(e);t&&t.subscriptionPending?t.cancelSubscription():(t=this.channels.remove(e))&&t.subscribed&&t.unsubscribe()}send_event(e,t,n){return this.connection.send_event(e,t,n)}shouldUseTLS(){return this.config.useTLS}signin(){this.user.signin()}}Lt.instances=[],Lt.isReady=!1,Lt.logToConsole=!1,Lt.Runtime=ut,Lt.ScriptReceivers=ut.ScriptReceivers,Lt.DependenciesReceivers=ut.DependenciesReceivers,Lt.auth_callbacks=ut.auth_callbacks;var It=t.default=Lt;ut.setup(Lt)}])};const Va=r(qa.exports=Wa());const Ya=new class{constructor(){this.baseURL="https://s89-satya-capstone-tradebro.onrender.com",this.pusher=null,this.channel=null,this.listeners=new Set,this.isConnected=!1,this.reconnectAttempts=0,this.maxReconnectAttempts=5,this.reconnectDelay=1e3}async initializePusher(e){try{const t="478146ed5eddba9a37cb";this.pusher&&this.disconnectPusher(),this.pusher=new Va(t,{cluster:"ap2",encrypted:!0,authEndpoint:`${this.baseURL}/pusher/auth`,auth:{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}}),this.channel=this.pusher.subscribe(`private-user-${e}`),this.setupEventListeners(),this.pusher.connection.bind("connected",()=>{this.isConnected=!0,this.reconnectAttempts=0,this.notifyListeners("connection",{status:"connected"})}),this.pusher.connection.bind("disconnected",()=>{this.isConnected=!1,this.notifyListeners("connection",{status:"disconnected"}),this.handleReconnection(e)}),this.pusher.connection.bind("error",e=>{this.notifyListeners("connection",{status:"error",error:e})})}catch(t){}}setupEventListeners(){this.channel&&(this.channel.bind("notification",e=>{this.notifyListeners("notification",e)}),this.channel.bind("notification-update",e=>{this.notifyListeners("notification-update",e)}),this.channel.bind("notifications-read-all",e=>{this.notifyListeners("notifications-read-all",e)}))}async handleReconnection(e){if(this.reconnectAttempts>=this.maxReconnectAttempts)return;this.reconnectAttempts++;const t=this.reconnectDelay*Math.pow(2,this.reconnectAttempts-1);setTimeout(()=>{this.initializePusher(e)},t)}disconnectPusher(){this.channel&&(this.channel.unbind_all(),this.pusher.unsubscribe(this.channel.name)),this.pusher&&this.pusher.disconnect(),this.pusher=null,this.channel=null,this.isConnected=!1}addEventListener(e){return this.listeners.add(e),()=>this.listeners.delete(e)}notifyListeners(e,t){this.listeners.forEach(n=>{try{n(e,t)}catch(s){}})}getAuthHeaders(){return{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}}async getNotifications(e=1,t=10,n="-createdAt"){try{return(await Ta.get(`${this.baseURL}/api/notifications`,{params:{page:e,limit:t,sort:n},headers:this.getAuthHeaders(),timeout:5e3})).data}catch(s){return this.getLocalNotifications(e,t)}}getLocalNotifications(e=1,t=10){try{const n=JSON.parse(localStorage.getItem("tradebro_notifications")||"[]"),s=this.getMockNotifications(1,50).notifications,a=[...n,...s].filter((e,t,n)=>t===n.findIndex(t=>t.id===e.id)).sort((e,t)=>new Date(t.createdAt)-new Date(e.createdAt)),r=(e-1)*t,i=r+t;return{success:!0,notifications:a.slice(r,i),pagination:{page:e,limit:t,total:a.length,hasMore:i<a.length}}}catch(n){return this.getMockNotifications(e,t)}}async getUnreadCount(){try{return(await Ta.get(`${this.baseURL}/api/notifications/unread-count`,{headers:this.getAuthHeaders(),timeout:5e3})).data}catch(e){return{success:!0,count:3}}}async markAsRead(e){try{return(await Ta.put(`${this.baseURL}/api/notifications/${e}/read`,{},{headers:this.getAuthHeaders()})).data}catch(t){return{success:!0,message:"Notification marked as read (fallback)"}}}async markAllAsRead(){try{return(await Ta.put(`${this.baseURL}/api/notifications/read-all`,{},{headers:this.getAuthHeaders()})).data}catch(e){return{success:!0,message:"All notifications marked as read (fallback)"}}}async deleteNotification(e){try{return(await Ta.delete(`${this.baseURL}/api/notifications/${e}`,{headers:this.getAuthHeaders()})).data}catch(t){return{success:!0,message:"Notification deleted (fallback)"}}}async createNotification(e){var t;try{return(await Ta.post(`${this.baseURL}/api/notifications`,e,{headers:this.getAuthHeaders()})).data}catch(n){if(404===(null==(t=n.response)?void 0:t.status))return{success:!0,message:"Notification created (fallback)"};throw this.handleError(n)}}handleError(e){var t;return e.response?{message:(null==(t=e.response.data)?void 0:t.message)||"Server error occurred",status:e.response.status,data:e.response.data}:e.request?{message:"Network error - please check your connection",status:0,data:null}:{message:e.message||"An unexpected error occurred",status:-1,data:null}}getMockNotifications(e=1,t=10){const n=[{id:"1",title:"Trade Executed Successfully",message:"Your buy order for 100 shares of RELIANCE has been executed at ₹2,450.00",type:"success",read:!1,createdAt:new Date(Date.now()-3e5).toISOString(),data:{symbol:"RELIANCE",quantity:100,price:2450}},{id:"2",title:"Price Alert Triggered",message:"TCS has reached your target price of ₹3,500.00",type:"info",read:!1,createdAt:new Date(Date.now()-18e5).toISOString(),data:{symbol:"TCS",targetPrice:3500}},{id:"3",title:"Market Update",message:"NIFTY 50 is up 1.2% today. Your portfolio is performing well!",type:"info",read:!0,createdAt:new Date(Date.now()-72e5).toISOString(),data:{index:"NIFTY50",change:1.2}},{id:"4",title:"Dividend Received",message:"You received ₹150 dividend from HDFC Bank",type:"success",read:!0,createdAt:new Date(Date.now()-864e5).toISOString(),data:{symbol:"HDFCBANK",amount:150}},{id:"5",title:"Stop Loss Triggered",message:"Your stop loss order for INFY has been executed at ₹1,420.00",type:"warning",read:!1,createdAt:new Date(Date.now()-2592e5).toISOString(),data:{symbol:"INFY",price:1420,type:"stop_loss"}}],s=(e-1)*t,a=s+t;return{success:!0,notifications:n.slice(s,a),pagination:{page:e,limit:t,total:n.length,hasMore:a<n.length}}}startMockLiveNotifications(){this.mockInterval||(this.mockInterval=setInterval(()=>{const e=this.generateMockNotification();this.notifyListeners("notification",e)},3e4))}stopMockLiveNotifications(){this.mockInterval&&(clearInterval(this.mockInterval),this.mockInterval=null)}generateMockNotification(){const e=["success","info","warning","error"],t={success:[{title:"Trade Executed",message:"Your buy order for {symbol} has been executed successfully"},{title:"Dividend Received",message:"You received ₹{amount} dividend from {symbol}"},{title:"Profit Booked",message:"Successfully sold {symbol} with {profit}% profit"}],info:[{title:"Price Alert",message:"{symbol} has reached your target price of ₹{price}"},{title:"Market Update",message:"NIFTY 50 is {change}% today"},{title:"News Alert",message:"Important news update for {symbol}"}],warning:[{title:"Stop Loss Alert",message:"{symbol} is approaching your stop loss level"},{title:"High Volatility",message:"{symbol} showing high volatility today"},{title:"Market Closure",message:"Market will close in 30 minutes"}],error:[{title:"Order Failed",message:"Your order for {symbol} could not be executed"},{title:"Connection Issue",message:"Temporary connection issue detected"}]},n=["RELIANCE","TCS","INFY","HDFCBANK","ICICIBANK","WIPRO","ITC"],s=e[Math.floor(Math.random()*e.length)],a=t[s][Math.floor(Math.random()*t[s].length)];return{id:Date.now().toString(),title:a.title,message:a.message.replace("{symbol}",n[Math.floor(Math.random()*n.length)]).replace("{amount}",Math.floor(500*Math.random())+50).replace("{price}",Math.floor(1e3*Math.random())+1e3).replace("{profit}",(20*Math.random()+5).toFixed(1)).replace("{change}",(4*Math.random()-2).toFixed(1)),type:s,read:!1,createdAt:(new Date).toISOString(),data:{}}}getConnectionStatus(){var e,t;return{isConnected:this.isConnected,reconnectAttempts:this.reconnectAttempts,pusherState:(null==(t=null==(e=this.pusher)?void 0:e.connection)?void 0:t.state)||"disconnected"}}},Ga={notifications:[],unreadCount:0,loading:!1,error:null,connectionStatus:"disconnected",filters:{type:"all",read:"all",dateRange:"all"},pagination:{page:1,limit:10,total:0,hasMore:!1}},Ja="SET_LOADING",Qa="SET_ERROR",Ka="SET_NOTIFICATIONS",Xa="ADD_NOTIFICATION",Za="UPDATE_NOTIFICATION",er="REMOVE_NOTIFICATION",tr="SET_UNREAD_COUNT",nr="MARK_AS_READ",sr="MARK_ALL_AS_READ",ar="SET_CONNECTION_STATUS",rr="SET_FILTERS",ir="SET_PAGINATION",or="CLEAR_ALL";function lr(e,t){switch(t.type){case Ja:return{...e,loading:t.payload};case Qa:return{...e,error:t.payload,loading:!1};case Ka:return{...e,notifications:t.payload.notifications||[],pagination:{...e.pagination,...t.payload.pagination},loading:!1,error:null};case Xa:return{...e,notifications:[t.payload,...e.notifications],unreadCount:e.unreadCount+(t.payload.read?0:1)};case Za:return{...e,notifications:e.notifications.map(e=>(e._id||e.id)===(t.payload._id||t.payload.id)?{...e,...t.payload}:e)};case er:const n=e.notifications.find(e=>(e._id||e.id)===t.payload);return{...e,notifications:e.notifications.filter(e=>(e._id||e.id)!==t.payload),unreadCount:n&&!n.read?Math.max(0,e.unreadCount-1):e.unreadCount};case tr:return{...e,unreadCount:t.payload};case nr:return{...e,notifications:e.notifications.map(e=>(e._id||e.id)===t.payload?{...e,read:!0,readAt:(new Date).toISOString()}:e),unreadCount:Math.max(0,e.unreadCount-1)};case sr:return{...e,notifications:e.notifications.map(e=>({...e,read:!0,readAt:(new Date).toISOString()})),unreadCount:0};case ar:return{...e,connectionStatus:t.payload};case rr:return{...e,filters:{...e.filters,...t.payload},pagination:{...e.pagination,page:1}};case ir:return{...e,pagination:{...e.pagination,...t.payload}};case or:return{...Ga};default:return e}}const cr=n.createContext(),dr=({children:e})=>{const[t,s]=n.useReducer(lr,Ga),{user:a,isAuthenticated:r}=jn(),i=n.useCallback((e,t)=>{switch(e){case"notification":s({type:Xa,payload:t}),o(t);break;case"notification-update":s({type:Za,payload:t});break;case"notifications-read-all":s({type:sr});break;case"connection":s({type:ar,payload:t.status})}},[]),o=n.useCallback(e=>{const t={position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0};switch(e.type){case"success":qe.success(e.message,t);break;case"error":qe.error(e.message,t);break;case"warning":qe.warning(e.message,t);break;default:qe.info(e.message,t)}},[]),l=n.useCallback(async(e=1)=>{try{s({type:Ja,payload:!0});const n=await Ya.getNotifications(e,t.pagination.limit,"-createdAt");n.success&&s({type:Ka,payload:{notifications:1===e?n.notifications:[...t.notifications,...n.notifications],pagination:{page:n.pagination.page,total:n.pagination.total,hasMore:n.pagination.hasMore}}})}catch(n){s({type:Qa,payload:n.message})}finally{s({type:Ja,payload:!1})}},[t.pagination.limit,t.notifications]),c=n.useCallback(async()=>{try{const e=await Ya.getUnreadCount();e.success&&s({type:tr,payload:e.count})}catch(e){}},[]),d=n.useCallback(async e=>{try{await Ya.markAsRead(e),s({type:nr,payload:e})}catch(t){}},[]),u=n.useCallback(async()=>{try{await Ya.markAllAsRead(),s({type:sr})}catch(e){}},[]),h=n.useCallback(async e=>{try{await Ya.deleteNotification(e),s({type:er,payload:e})}catch(t){}},[]),m=n.useCallback(e=>{s({type:rr,payload:e})},[]),p=n.useCallback(()=>{t.pagination.hasMore&&!t.loading&&l(t.pagination.page+1)},[t.pagination.hasMore,t.loading,t.pagination.page,l]);n.useEffect(()=>{let e;return r&&(null==a?void 0:a.id)&&(s({type:Ja,payload:!0}),c(),l(),Ya.startMockLiveNotifications(),e=Ya.addEventListener(i),Ya.initializePusher(a.id)),()=>{Ya.stopMockLiveNotifications(),Ya.disconnectPusher(),e&&e()}},[r,null==a?void 0:a.id,l,c,i]);const f={...t,fetchNotifications:l,markAsRead:d,markAllAsRead:u,deleteNotification:h,setFilters:m,loadMore:p};return M.jsx(cr.Provider,{value:f,children:e})},ur=()=>{const e=n.useContext(cr);if(!e)throw new Error("useNotifications must be used within a NotificationProvider");return e},hr=(e,t=100,n=30)=>{const s=[];let a=t;const r=new Date;for(let i=n;i>=0;i--){const e=new Date(r);e.setDate(e.getDate()-i);const t=.1*(Math.random()-.5);a=Math.max(a*(1+t),1);const n=a,o=n*(1+.05*Math.random()),l=n*(1-.05*Math.random()),c=l+Math.random()*(o-l),d=Math.floor(1e6*Math.random())+1e5;s.push({time:e.toISOString().split("T")[0],open:parseFloat(n.toFixed(2)),high:parseFloat(o.toFixed(2)),low:parseFloat(l.toFixed(2)),close:parseFloat(c.toFixed(2)),volume:d}),a=c}return s},mr={"RELIANCE.NS":{symbol:"RELIANCE.NS",name:"Reliance Industries Limited",price:2847.5,change:15.25,changesPercentage:.54,dayLow:2835.4,dayHigh:2865.8,yearHigh:3024.9,yearLow:2220.3,marketCap:1925e10,priceAvg50:2798.45,priceAvg200:2654.78,volume:8765432,avgVolume:12e6,exchange:"NSE",open:2840.2,previousClose:2832.25,timestamp:Math.floor(Date.now()/1e3)},"TCS.NS":{symbol:"TCS.NS",name:"Tata Consultancy Services",price:4125.8,change:-12.4,changesPercentage:-.3,dayLow:4118.25,dayHigh:4145.6,yearHigh:4592.25,yearLow:3311,marketCap:151e11,priceAvg50:4089.75,priceAvg200:3987.2,volume:1234567,avgVolume:25e5,exchange:"NSE",open:4138.2,previousClose:4138.2,timestamp:Math.floor(Date.now()/1e3)},"HDFCBANK.NS":{symbol:"HDFCBANK.NS",name:"HDFC Bank Limited",price:1687.9,change:8.75,changesPercentage:.52,dayLow:1678.3,dayHigh:1695.4,yearHigh:1794.5,yearLow:1363.55,marketCap:1285e10,priceAvg50:1654.45,priceAvg200:1598.78,volume:5678901,avgVolume:85e5,exchange:"NSE",open:1682.15,previousClose:1679.15,timestamp:Math.floor(Date.now()/1e3)},"INFY.NS":{symbol:"INFY.NS",name:"Infosys Limited",price:1842.35,change:22.15,changesPercentage:1.22,dayLow:1835.2,dayHigh:1856.8,yearHigh:1953.9,yearLow:1351.65,marketCap:765e10,priceAvg50:1798.75,priceAvg200:1687.2,volume:3456789,avgVolume:52e5,exchange:"NSE",open:1838.4,previousClose:1820.2,timestamp:Math.floor(Date.now()/1e3)},"HINDUNILVR.NS":{symbol:"HINDUNILVR.NS",name:"Hindustan Unilever Limited",price:2456.7,change:-5.3,changesPercentage:-.22,dayLow:2445.6,dayHigh:2468.9,yearHigh:2844.95,yearLow:2172,marketCap:575e10,priceAvg50:2489.75,priceAvg200:2398.2,volume:987654,avgVolume:18e5,exchange:"NSE",open:2462,previousClose:2462,timestamp:Math.floor(Date.now()/1e3)},"ICICIBANK.NS":{symbol:"ICICIBANK.NS",name:"ICICI Bank Limited",price:1287.45,change:18.9,changesPercentage:1.49,dayLow:1278.3,dayHigh:1295.8,yearHigh:1257.65,yearLow:912.35,marketCap:905e10,priceAvg50:1245.75,priceAvg200:1156.2,volume:7890123,avgVolume:125e5,exchange:"NSE",open:1280.55,previousClose:1268.55,timestamp:Math.floor(Date.now()/1e3)},INFY:{symbol:"INFY",name:"Infosys Limited",price:1456.3,change:8.75,changesPercentage:.6,dayLow:1445.2,dayHigh:1468.9,yearHigh:1953.9,yearLow:1330.2,marketCap:61e11,priceAvg50:1423.45,priceAvg200:1567.89,volume:3456789,avgVolume:42e5,exchange:"NSE",open:1447.55,previousClose:1447.55,timestamp:Math.floor(Date.now()/1e3)},HDFCBANK:{symbol:"HDFCBANK",name:"HDFC Bank Limited",price:1567.45,change:12.3,changesPercentage:.79,dayLow:1555.2,dayHigh:1578.9,yearHigh:1725,yearLow:1363.55,marketCap:119e11,priceAvg50:1534.67,priceAvg200:1598.23,volume:2345678,avgVolume:28e5,exchange:"NSE",open:1555.15,previousClose:1555.15,timestamp:Math.floor(Date.now()/1e3)},ICICIBANK:{symbol:"ICICIBANK",name:"ICICI Bank Limited",price:987.65,change:-5.45,changesPercentage:-.55,dayLow:982.3,dayHigh:995.8,yearHigh:1257.8,yearLow:875.35,marketCap:69e11,priceAvg50:1012.34,priceAvg200:1089.67,volume:4567890,avgVolume:52e5,exchange:"NSE",open:993.1,previousClose:993.1,timestamp:Math.floor(Date.now()/1e3)}},pr=[{symbol:"RELIANCE.NS",name:"Reliance Industries Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"TCS.NS",name:"Tata Consultancy Services",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"HDFCBANK.NS",name:"HDFC Bank Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"INFY.NS",name:"Infosys Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"HINDUNILVR.NS",name:"Hindustan Unilever Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"ICICIBANK.NS",name:"ICICI Bank Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"KOTAKBANK.NS",name:"Kotak Mahindra Bank Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"BHARTIARTL.NS",name:"Bharti Airtel Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"ITC.NS",name:"ITC Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"SBIN.NS",name:"State Bank of India",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"LT.NS",name:"Larsen & Toubro Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"ASIANPAINT.NS",name:"Asian Paints Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"MARUTI.NS",name:"Maruti Suzuki India Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"BAJFINANCE.NS",name:"Bajaj Finance Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"WIPRO.NS",name:"Wipro Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"HCLTECH.NS",name:"HCL Technologies Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"TECHM.NS",name:"Tech Mahindra Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"SUNPHARMA.NS",name:"Sun Pharmaceutical Industries Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"TITAN.NS",name:"Titan Company Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"NESTLEIND.NS",name:"Nestle India Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"ULTRACEMCO.NS",name:"UltraTech Cement Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"POWERGRID.NS",name:"Power Grid Corporation of India Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"NTPC.NS",name:"NTPC Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"ONGC.NS",name:"Oil and Natural Gas Corporation Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"COALINDIA.NS",name:"Coal India Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"ZOMATO.NS",name:"Zomato Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"PAYTM.NS",name:"One 97 Communications Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"NYKAA.NS",name:"FSN E-Commerce Ventures Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"POLICYBZR.NS",name:"PB Fintech Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"ZOMATO.NS",name:"Zomato Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"SWIGGY.NS",name:"Bundl Technologies Private Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"INFY.NS",name:"Infosys Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"AAPL",name:"Apple Inc.",exchange:"NASDAQ",currency:"USD",type:"stock"},{symbol:"GOOGL",name:"Alphabet Inc.",exchange:"NASDAQ",currency:"USD",type:"stock"},{symbol:"MSFT",name:"Microsoft Corporation",exchange:"NASDAQ",currency:"USD",type:"stock"},{symbol:"AMZN",name:"Amazon.com Inc.",exchange:"NASDAQ",currency:"USD",type:"stock"},{symbol:"TSLA",name:"Tesla Inc.",exchange:"NASDAQ",currency:"USD",type:"stock"},{symbol:"META",name:"Meta Platforms Inc.",exchange:"NASDAQ",currency:"USD",type:"stock"},{symbol:"NVDA",name:"NVIDIA Corporation",exchange:"NASDAQ",currency:"USD",type:"stock"},{symbol:"ADANIPORTS.NS",name:"Adani Ports and Special Economic Zone Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"AXISBANK.NS",name:"Axis Bank Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"BAJAJ-AUTO.NS",name:"Bajaj Auto Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"BRITANNIA.NS",name:"Britannia Industries Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"CIPLA.NS",name:"Cipla Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"DRREDDY.NS",name:"Dr. Reddys Laboratories Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"EICHERMOT.NS",name:"Eicher Motors Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"GRASIM.NS",name:"Grasim Industries Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"HEROMOTOCO.NS",name:"Hero MotoCorp Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"JSWSTEEL.NS",name:"JSW Steel Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"TSLA",name:"Tesla Inc.",exchange:"NASDAQ",currency:"USD",type:"stock"},{symbol:"META",name:"Meta Platforms Inc.",exchange:"NASDAQ",currency:"USD",type:"stock"},{symbol:"NVDA",name:"NVIDIA Corporation",exchange:"NASDAQ",currency:"USD",type:"stock"},{symbol:"NFLX",name:"Netflix Inc.",exchange:"NASDAQ",currency:"USD",type:"stock"},{symbol:"CRM",name:"Salesforce Inc.",exchange:"NYSE",currency:"USD",type:"stock"},{symbol:"ADBE",name:"Adobe Inc.",exchange:"NASDAQ",currency:"USD",type:"stock"}],fr=[{symbol:"AAPL",name:"Apple Inc.",change:2.15,changesPercentage:1.24,price:175.43},{symbol:"NVDA",name:"NVIDIA Corporation",change:15.42,changesPercentage:1.79,price:875.28},{symbol:"META",name:"Meta Platforms Inc.",change:8.75,changesPercentage:1.84,price:484.2},{symbol:"GOOGL",name:"Alphabet Inc.",change:3.42,changesPercentage:2.46,price:142.56},{symbol:"AMZN",name:"Amazon.com Inc.",change:1.87,changesPercentage:1.25,price:151.94}],gr=[{title:"Reliance Industries Reports Strong Q3 Results",text:"Reliance Industries Limited reported strong quarterly results with increased revenue from petrochemicals and retail segments.",url:"#",image:"https://via.placeholder.com/300x200",site:"Economic Times",publishedDate:(new Date).toISOString(),symbol:"RELIANCE"},{title:"TCS Announces New Digital Transformation Services",text:"Tata Consultancy Services launches new suite of digital transformation services for enterprise clients.",url:"#",image:"https://via.placeholder.com/300x200",site:"Business Standard",publishedDate:new Date(Date.now()-36e5).toISOString(),symbol:"TCS"},{title:"Indian IT Sector Shows Resilience Amid Global Challenges",text:"The Indian IT sector continues to show strong performance despite global economic uncertainties.",url:"#",image:"https://via.placeholder.com/300x200",site:"Financial Express",publishedDate:new Date(Date.now()-72e5).toISOString(),symbol:"INFY"}],yr={searchStocks:async(e,t=10)=>{if(await new Promise(e=>setTimeout(e,300)),!e||""===e.trim()){const e=pr.slice(0,t);return{success:!0,results:e,total:e.length}}const n=e.toLowerCase().trim(),s=pr.map(e=>{let t=0;const s=e.symbol.toLowerCase(),a=e.name.toLowerCase();return s===n?t+=100:s.startsWith(n)?t+=50:s.includes(n)&&(t+=25),a===n?t+=75:a.startsWith(n)?t+=40:a.split(" ").some(e=>e.startsWith(n))?t+=30:a.includes(n)&&(t+=20),("NSE"===e.exchange||"BSE"===e.exchange||e.symbol.endsWith(".NS")||e.symbol.endsWith(".BO"))&&(t+=10),{stock:e,score:t}}).filter(e=>e.score>0).sort((e,t)=>t.score-e.score).map(e=>e.stock).slice(0,t);return s.length,{success:!0,results:s,total:s.length}},getStockQuote:async e=>{await new Promise(e=>setTimeout(e,200));const t=mr[e.toUpperCase()];return t?{success:!0,data:t}:{success:!1,error:"Stock not found"}},getHistoricalData:async(e,t="1D")=>{var n;await new Promise(e=>setTimeout(e,500));const s=(null==(n=mr[e.toUpperCase()])?void 0:n.price)||100;return{success:!0,data:hr(0,s,"1D"===t?1:"1M"===t?30:90),symbol:e,period:t}},getGainers:async(e=10)=>(await new Promise(e=>setTimeout(e,300)),{success:!0,data:fr.slice(0,e)}),getMarketNews:async(e=20)=>(await new Promise(e=>setTimeout(e,400)),{success:!0,data:gr.slice(0,e)})},xr=["VCMjfaz3k5CjRqbLvtpMALKTks5YVLxx","sYWvqZLnzWgIlTE2XBWWL0ZxDUK4O1MY","ORvcjYythoW1cNX3sA7gvYD46sK8mxvx",void 0].filter(Boolean);let vr=0;const br=new Set;let jr=xr[vr];xr.length;const wr=Ta.create({baseURL:"https://financialmodelingprep.com/api/v3",timeout:1e4}),kr=async(e,t={})=>{var n;if(!xr.length||br.size===xr.length)throw new Error("All API keys failed");for(let a=0;a<xr.length;a++)if(jr=xr[vr],br.has(jr))vr=(vr+1)%xr.length,jr=xr[vr];else try{return(await wr.get(e,{params:{...t,apikey:jr}})).data}catch(s){const e=null==(n=s.response)?void 0:n.status;if((429===e||403===e||401===e)&&br.add(jr),vr=(vr+1)%xr.length,br.size===xr.length)break}throw new Error("All API keys failed or exhausted.")},Nr={searchStocks:async(e,t=10)=>{try{const n=await kr("/search",{query:e,limit:t});if(!Array.isArray(n))throw new Error("Invalid response format");return{success:!0,results:n,total:n.length}}catch(n){return await yr.searchStocks(e,t)}},getStockQuote:async e=>{try{return{success:!0,data:(await kr(`/quote/${e}`))[0]}}catch(t){return await yr.getStockQuote(e)}},getMultipleQuotes:async e=>{const t=Array.isArray(e)?e.join(","):e;try{return{success:!0,data:await kr(`/quote/${t}`)}}catch(n){return{success:!1,data:[]}}},getStockProfile:async e=>{try{const t=await kr(`/profile/${e}`);if(!t[0])throw new Error("Company profile not found");return{success:!0,data:t[0]}}catch(t){return await yr.getStockProfile(e)}}},Sr=Nr,Cr={getHistoricalData:async(e,t="1D")=>{try{return{success:!0,data:(await kr(`/historical-price-full/${e}`,{serietype:"line"})).historical,symbol:e}}catch(n){return await yr.getHistoricalData(e,t)}},getIntradayData:async(e,t="1min")=>{try{return{success:!0,data:(await kr(`/historical-chart/${t}/${e}`)).reverse(),symbol:e,interval:t}}catch(n){return{success:!1,data:[]}}}},Tr=Ta.create({baseURL:"https://s89-satya-capstone-tradebro.onrender.com/api",timeout:3e4,headers:{"Content-Type":"application/json"}});Tr.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e)),Tr.interceptors.response.use(e=>e,e=>{var t,n,s;return"ERR_NETWORK"===e.code||null==(t=e.response)||t.status,401===(null==(n=e.response)?void 0:n.status)&&(localStorage.removeItem("token"),localStorage.removeItem("user"),"/login"!==window.location.pathname&&"/signup"!==window.location.pathname&&(window.location.href="/login")),(null==(s=e.response)?void 0:s.status)>=500?Promise.resolve({data:{success:!1,message:"Service temporarily unavailable. Please try again later.",fallback:!0}}):Promise.reject(e)});const Pr={login:async e=>(await Tr.post("/auth/login",e)).data,register:async e=>(await Tr.post("/auth/register",e)).data,verifyToken:async()=>(await Tr.get("/auth/verify")).data,googleAuth:async e=>(await Tr.post("/auth/google",{tokenId:e})).data,logout:async()=>(await Tr.post("/auth/logout")).data},Er=async e=>(await Tr.get(`/proxy/fmp/quote/${e}`)).data,Lr=async e=>{const t=Array.isArray(e)?e.join(","):e;return(await Tr.get(`/proxy/stock-batch?symbols=${t}`)).data},Ir=async()=>{try{const[e,t]=await Promise.all([Tr.get("/proxy/top-gainers"),Tr.get("/proxy/top-losers")]);return{gainers:e.data||[],losers:t.data||[],mostActive:[]}}catch(e){return{gainers:[],losers:[],mostActive:[]}}},Ar=async()=>{try{return(await Tr.get("/portfolio/summary")).data}catch(e){return{success:!1,data:{totalValue:1e4,availableCash:1e4,totalInvested:0,totalGainLoss:0,totalGainLossPercentage:0,holdings:[],transactions:[],watchlist:[]}}}},Or=async()=>{try{return(await Tr.get("/portfolio/holdings")).data}catch(e){return{success:!0,data:[]}}},Dr={placeOrder:async e=>(await Tr.post("/orders/place",e)).data,getOrders:async({status:e="all",page:t=1,limit:n=20,stockSymbol:s=null,type:a=null,orderType:r=null,sort:i="-createdAt"}={})=>{let o=`/orders/all?page=${t}&limit=${n}&sort=${i}`;"all"!==e&&(o+=`&status=${e}`),s&&(o+=`&stockSymbol=${s.toUpperCase()}`),a&&(o+=`&type=${a}`),r&&(o+=`&orderType=${r}`);return(await Tr.get(o)).data},searchOrders:async(e,t={})=>{const{status:n,type:s,orderType:a,limit:r=20}=t;let i=`/orders/all?stockSymbol=${e.toUpperCase()}&limit=${r}`;n&&(i+=`&status=${n}`),s&&(i+=`&type=${s}`),a&&(i+=`&orderType=${a}`);return(await Tr.get(i)).data},cancelOrder:async e=>(await Tr.delete(`/orders/${e}`)).data,getOrderHistory:async(e=50)=>(await Tr.get(`/orders/history?limit=${e}`)).data,getRecentTrades:async(e=10)=>(await Tr.get(`/trades/recent?limit=${e}`)).data},Rr={getWatchlists:async()=>(await Tr.get("/watchlist")).data,createWatchlist:async(e,t="")=>(await Tr.post("/watchlist",{name:e,description:t})).data,addStock:async(e,t)=>(await Tr.post(`/watchlist/${e}/add`,{symbol:t})).data,removeStock:async(e,t)=>(await Tr.delete(`/watchlist/${e}/remove/${t}`)).data,deleteWatchlist:async e=>(await Tr.delete(`/watchlist/${e}`)).data,searchStocks:async(e,t=10)=>(await Tr.get(`/watchlist/search?query=${encodeURIComponent(e)}&limit=${t}`)).data},Mr=async(e,t=null)=>{try{return(await Tr.post("/saytrix/chat",{message:e,sessionId:t})).data}catch(n){return{success:!1,message:"AI service temporarily unavailable.",error:n.message}}},_r={getMarketNews:async(e=20)=>(await Tr.get(`/news/market?limit=${e}`)).data,getNews:async({category:e="all",limit:t=20,q:n=null}={})=>{let s=`/news?limit=${t}`;n&&(s+=`&q=${encodeURIComponent(n)}`);return(await Tr.get(s)).data},searchNews:async(e,t=20)=>(await Tr.get(`/news/search?q=${encodeURIComponent(e)}&limit=${t}`)).data,getStockNews:async(e,t=10)=>(await Tr.get(`/news/stock/${e}?limit=${t}`)).data,getTrendingNews:async()=>(await Tr.get("/news/trending")).data};class Fr{constructor(e){this.navigate=e}async processCommand(e){const t=this.localProcess(e);if(t.success)return t;try{const t=await Mr(e,"voice_session");if(t.success&&t.data.action)return this.executeAction(t.data.action,t.data.params)}catch(n){}return{success:!1,message:"Command not recognized"}}executeAction(e,t={}){switch(e){case"navigate":return this.navigate(t.path),{success:!0,message:`Navigating to ${t.path}`};case"search_stock":return this.navigate(`/stock/${t.symbol}`),{success:!0,message:`Showing ${t.symbol} details`};case"buy_stock":return this.navigate("/trading"),{success:!0,message:"Opening trading page"};case"show_portfolio":return this.navigate("/portfolio"),{success:!0,message:"Opening portfolio"};default:return{success:!1,message:"Command not understood"}}}localProcess(e){const t=e.toLowerCase().trim(),n={chart:"/charts",charge:"/charts",charts:"/charts",dashboard:"/dashboard",home:"/dashboard",portfolio:"/portfolio",trading:"/trading",trade:"/trading",orders:"/orders",order:"/orders",history:"/history",news:"/news",watchlist:"/watchlist",notifications:"/notifications",profile:"/profile",settings:"/settings",saytrix:"/saytrix"};for(const[s,a]of Object.entries(n))if(t===s||t.includes(s))return this.navigate(a),{success:!0,message:`Opening ${s}`};if(t.includes("price")||t.includes("stock")){const e=t.match(/(?:price of|stock|show me)\s+([a-z]+)/i);if(e){const t=e[1].toUpperCase();return this.navigate(`/stock/${t}`),{success:!0,message:`Showing ${t} price`}}}return{success:!1}}}const Br=n.createContext(),zr=()=>{const e=n.useContext(Br);if(void 0===e)throw new Error("useVoice must be used within a VoiceProvider");return e},Ur=({children:e})=>{const t=o(),s=l(),a=new Fr(t),[r,i]=n.useState(!1),[c,d]=n.useState(!1),[u,h]=n.useState(""),[m,p]=n.useState(null),[f,g]=n.useState(!1);n.useEffect(()=>{if("webkitSpeechRecognition"in window||"SpeechRecognition"in window){const e=new(window.SpeechRecognition||window.webkitSpeechRecognition);e.continuous=!0,e.interimResults=!0,e.lang="en-US",e.maxAlternatives=1,p(e),g(!0)}else g(!1)},[]);const y=n.useCallback(e=>{const n=e.toLowerCase().trim();if(n.includes("dashboard")||n.includes("home")?t("/dashboard"):n.includes("chart")||n.includes("charge")?t("/charts"):n.includes("portfolio")?t("/portfolio"):n.includes("watchlist")||n.includes("watch list")?t("/watchlist"):n.includes("orders")||n.includes("order")?t("/orders"):n.includes("history")?t("/history"):n.includes("news")?t("/news"):n.includes("notifications")||n.includes("notification")?t("/notifications"):n.includes("saytrix")||n.includes("chat")?t("/saytrix"):n.includes("profile")?t("/profile"):n.includes("settings")||n.includes("setting")?t("/settings"):(n.includes("trading")||n.includes("trade"))&&t("/trading"),n.includes("price of")||n.includes("show price")){const e=x(n);e&&t(`/stock/${e}`)}else(n.includes("top gainers")||n.includes("gainers")||n.includes("top losers")||n.includes("losers"))&&t("/dashboard");(n.includes("buy")&&(n.includes("stock")||n.includes("share"))||n.includes("sell")&&(n.includes("stock")||n.includes("share")))&&t("/trading")},[t]),x=n.useCallback(e=>{const t=[/price of ([a-zA-Z]+)/i,/show price ([a-zA-Z]+)/i,/([a-zA-Z]+) price/i];for(const n of t){const t=e.match(n);if(t)return t[1].toUpperCase()}return null},[]),v=n.useCallback(e=>{if("speechSynthesis"in window){const t=new SpeechSynthesisUtterance(e);t.rate=.9,t.pitch=1,t.volume=.8,speechSynthesis.speak(t)}},[]),b=n.useCallback(()=>{if(m&&f&&!r){i(!0),m.onresult=e=>{let t="";for(let n=e.resultIndex;n<e.results.length;n++){const s=e.results[n][0].transcript;e.results[n].isFinal,t+=s}h(t);["saytrix","citrix","citric","matrix","tricks","se tric","say tricks"].some(e=>t.toLowerCase().includes(e))&&(m.stop(),j())},m.onerror=e=>{"network"===e.error||e.error,i(!1),"aborted"!==e.error&&"not-allowed"!==e.error&&setTimeout(()=>{b()},2e3)},m.onend=()=>{i(!1),c||setTimeout(()=>{b()},500)};try{m.start()}catch(e){"InvalidStateError"!==e.name&&i(!1)}}},[m,f,r,c]),j=n.useCallback(()=>{if(d(!0),v("Yes?"),m){m.onresult=e=>{let t="";for(let n=e.resultIndex;n<e.results.length;n++){const s=e.results[n][0].transcript;e.results[n].isFinal&&(t+=s)}if(t){h(t);let n=t;if(e.results[0].length>1){n=e.results[0][0].transcript;for(let t=1;t<e.results[0].length;t++)e.results[0][t].confidence>e.results[0][0].confidence&&(n=e.results[0][t].transcript)}a.processCommand(n).then(e=>{e.success?v(e.message||"Done"):v("Could you repeat that?")}),d(!1),m.stop(),setTimeout(()=>{b()},500)}};try{m.start()}catch(e){}}},[m,y,v,b]),w=n.useCallback(()=>{if(i(!1),d(!1),m)try{m.stop()}catch(e){}},[m]),k=n.useCallback(()=>{f?c?w():j():alert("Voice commands are not supported in this browser. Please use Chrome, Edge, or Safari.")},[f,c,j,w]);n.useEffect(()=>{const e="/login"===s.pathname||"/signup"===s.pathname||"/"===s.pathname;return!f||r||c||e||b(),()=>{if(m)try{m.stop()}catch(e){}}},[f,b,s.pathname]);const N={isListening:r,isVoiceModeActive:c,transcript:u,isSupported:f,triggerVoiceMode:k,stopListening:w,speak:v,activateVoiceMode:j,startWakeWordDetection:b,processVoiceCommand:y};return M.jsx(Br.Provider,{value:N,children:e})},$r=({position:e="navbar",size:t="small",showLabel:s=!1,className:a=""})=>{const{isListening:r,isSupported:i,startListening:o,stopListening:l}=zr(),c=n.useCallback(()=>{r?l():o()},[r,o,l]);if(!i)return null;const d=r;return M.jsxs("button",{className:`saytrix-trigger-btn ${e} ${t} ${a} ${d?"active":""}`,onClick:c,title:d?"Deactivate Saytrix AI":"Activate Saytrix AI","aria-label":d?"Deactivate Saytrix AI voice assistant":"Activate Saytrix AI voice assistant",children:[M.jsx(g,{mode:"wait",children:M.jsx(y.span,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.2},children:r?M.jsx(Bt,{}):M.jsx(zt,{})},r?"mic-on":"mic-off")}),s&&M.jsx("span",{children:"Saytrix"})]})},Hr=n.createContext(),Wr=()=>{const e=n.useContext(Hr);if(!e)throw new Error("useLocalSidebar must be used within LocalSidebarProvider");return e},qr=({children:e})=>{const[t,s]=n.useState(!1),[a,r]=n.useState(!1);n.useEffect(()=>{const e=()=>{const e=window.innerWidth<=768;r(e),e&&s(!0)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),n.useEffect(()=>{const e=document.querySelector(".main-content");return e&&(e.classList.add("with-sidebar"),t?(e.classList.add("sidebar-collapsed"),e.classList.remove("sidebar-expanded")):(e.classList.add("sidebar-expanded"),e.classList.remove("sidebar-collapsed"))),()=>{e&&e.classList.remove("with-sidebar","sidebar-collapsed","sidebar-expanded")}},[t]);const i={isCollapsed:t,isMobile:a,toggleSidebar:()=>{s(!t)},setIsCollapsed:s};return M.jsx(Hr.Provider,{value:i,children:e})},Vr=()=>{const{isCollapsed:e,isMobile:t,toggleSidebar:n}=Wr();return t&&e?M.jsx("button",{className:"mobile-menu-btn",onClick:n,"aria-label":"Open navigation menu",type:"button",children:M.jsx(_t,{})}):null},Yr=()=>{const{isCollapsed:e,isMobile:t,toggleSidebar:n}=Wr();return!t||e?null:M.jsx("div",{className:"sidebar-overlay "+(e?"":"show"),onClick:n,"aria-hidden":"true"})},Gr=()=>{const{isCollapsed:e,isMobile:t,toggleSidebar:s}=Wr(),{unreadCount:a}=ur(),r=l(),i=o(),{isAuthenticated:d,logout:u,user:h}=jn(),m=n.useRef(null),p=h||{fullName:"User",email:"",profileImage:"https://randomuser.me/api/portraits/lego/1.jpg",role:"Member"};return n.useEffect(()=>{(()=>{const n=document.documentElement;t?n.style.setProperty("--sidebar-current-width","0px"):n.style.setProperty("--sidebar-current-width",e?"80px":"280px")})()},[e,t]),n.useEffect(()=>{const n=()=>{const n=m.current;n&&(n.style.position="fixed",n.style.zIndex="2147483647",n.style.transform="none",n.style.webkitTransform="none",n.style.mozTransform="none",n.style.msTransform="none",n.style.oTransform="none",n.style.margin="0px",n.style.contain="none",n.style.isolation="auto",n.style.willChange="auto",n.style.backgroundAttachment="fixed",n.style.boxSizing="border-box",n.style.clip="auto",n.style.clipPath="none",n.style.mask="none",n.style.filter="none",n.style.mixBlendMode="normal",n.style.opacity="1",n.style.visibility="visible",n.style.backfaceVisibility="visible",n.style.webkitBackfaceVisibility="visible",n.style.perspective="none",n.style.webkitPerspective="none",t?(n.style.top="0px",n.style.left="0px",n.style.right="0px",n.style.width="100%",e?(n.style.bottom="auto",n.style.height="70px",n.style.maxHeight="70px",n.style.minHeight="70px",n.style.padding="12px 20px",n.style.display="flex",n.style.flexDirection="row",n.style.alignItems="center",n.style.justifyContent="space-between",n.style.overflow="hidden"):(n.style.bottom="0px",n.style.height="100vh",n.style.maxHeight="100vh",n.style.minHeight="100vh",n.style.padding="20px",n.style.display="flex",n.style.flexDirection="column",n.style.alignItems="stretch",n.style.justifyContent="flex-start",n.style.overflowY="auto")):(n.style.top="0px",n.style.left="0px",n.style.bottom="0px",n.style.right="auto",n.style.width=e?"80px":"280px",n.style.height="100vh",n.style.maxHeight="100vh",n.style.minHeight="100vh",n.style.padding=e?"24px 16px":"24px 20px",n.style.display="flex",n.style.flexDirection="column",n.style.overflowY="auto"))};n();const s=()=>{n()},a=()=>{n()},r=new MutationObserver(()=>{n()});return m.current&&r.observe(m.current,{attributes:!0,attributeFilter:["style","class"]}),window.addEventListener("scroll",s,{passive:!0}),window.addEventListener("resize",a,{passive:!0}),document.addEventListener("scroll",s,{passive:!0}),()=>{window.removeEventListener("scroll",s),window.removeEventListener("resize",a),document.removeEventListener("scroll",s),r.disconnect()}},[e,t]),M.jsxs("div",{ref:m,className:`sidebar ${e?"collapsed":""} ${t?"mobile":""}`,role:"navigation","aria-label":"Main navigation",children:[M.jsxs("div",{className:"top-section",children:[M.jsx("button",{className:"toggle-btn",onClick:e=>{e.preventDefault(),e.stopPropagation(),s()},type:"button","aria-label":e?"Expand sidebar navigation":"Collapse sidebar navigation",title:e?"Expand sidebar":"Collapse sidebar","aria-expanded":!e,children:M.jsx(_t,{})}),(!e||t)&&M.jsxs("div",{className:"logo-section",children:[M.jsx("h1",{className:"logo",role:"banner",children:"⚡ TradeBro"}),!e&&M.jsx($r,{position:"navbar",size:"small",showLabel:!1,className:"sidebar-voice-btn"})]})]}),!e&&M.jsxs("div",{className:"user-profile",children:[M.jsxs("div",{className:"user-avatar",children:[p.profileImage||p.picture?M.jsx("img",{src:p.profileImage||p.picture,alt:p.fullName||p.name,className:"avatar-image",onError:e=>{e.target.style.display="none",e.target.nextSibling.style.display="flex"}}):null,M.jsx("div",{className:"avatar-symbol",style:{display:p.profileImage||p.picture?"none":"flex"},children:"👤"})]}),M.jsxs("div",{className:"user-info",children:[M.jsx("h3",{className:"user-name",children:p.fullName||p.name||p.email}),M.jsx("p",{className:"user-role",children:p.role||"Member"})]})]}),M.jsx("nav",{role:"navigation","aria-label":"Main menu",children:M.jsxs("ul",{className:"sidebar-links",children:[M.jsx("li",{children:M.jsxs(c,{to:"/dashboard",className:"sidebar-link "+("/dashboard"===r.pathname?"active":""),"aria-current":"/dashboard"===r.pathname?"page":void 0,title:"Dashboard",children:[M.jsx(nt,{"aria-hidden":"true"}),!e&&M.jsx("span",{children:"Dashboard"})]})}),M.jsx("li",{children:M.jsxs(c,{to:"/charts",className:"sidebar-link "+("/charts"===r.pathname?"active":""),children:[M.jsx(mn,{}),!e&&M.jsx("span",{children:"Charts"})]})}),M.jsx("li",{children:M.jsxs(c,{to:"/portfolio",className:"sidebar-link "+("/portfolio"===r.pathname?"active":""),children:[M.jsx(Gt,{}),!e&&M.jsx("span",{children:"Portfolio"})]})}),M.jsx("li",{children:M.jsxs(c,{to:"/watchlist",className:"sidebar-link "+("/watchlist"===r.pathname?"active":""),children:[M.jsx(at,{}),!e&&M.jsx("span",{children:"Watchlist"})]})}),M.jsx("li",{children:M.jsxs(c,{to:"/orders",className:"sidebar-link "+("/orders"===r.pathname?"active":""),children:[M.jsx(an,{}),!e&&M.jsx("span",{children:"Orders"})]})}),M.jsx("li",{children:M.jsxs(c,{to:"/history",className:"sidebar-link "+("/history"===r.pathname?"active":""),children:[M.jsx(dt,{}),!e&&M.jsx("span",{children:"History"})]})}),M.jsx("li",{children:M.jsxs(c,{to:"/news",className:"sidebar-link "+("/news"===r.pathname?"active":""),children:[M.jsx(jt,{}),!e&&M.jsx("span",{children:"News"})]})}),M.jsx("li",{children:M.jsx(c,{to:"/notifications",className:"sidebar-link "+("/notifications"===r.pathname?"active":""),children:M.jsxs("div",{className:"sidebar-link-content",children:[M.jsxs("div",{className:"sidebar-icon-wrapper",children:[M.jsx(st,{}),a>0&&M.jsx("span",{className:"notification-badge",children:a>99?"99+":a})]}),!e&&M.jsx("span",{children:"Notifications"})]})})}),M.jsx("li",{children:M.jsxs(c,{to:"/saytrix",className:`sidebar-link ${"/saytrix"===r.pathname||"/chatbot"===r.pathname?"active":""} highlight`,children:[M.jsx(Ft,{}),!e&&M.jsx("span",{children:"Saytrix AI"})]})})]})}),M.jsxs("div",{className:"sidebar-bottom",children:[M.jsxs("div",{className:"sidebar-actions",children:[M.jsxs(c,{to:"/profile",className:"sidebar-link "+("/profile"===r.pathname?"active":""),children:[M.jsx(pn,{}),!e&&M.jsx("span",{children:"Profile"})]}),M.jsxs(c,{to:"/settings",className:"sidebar-link "+("/settings"===r.pathname?"active":""),children:[M.jsx(tn,{}),!e&&M.jsx("span",{children:"Settings"})]}),M.jsxs("button",{onClick:()=>{u(),i("/login")},className:"sidebar-link logout-btn","aria-label":"Logout from TradeBro",title:"Logout from TradeBro",children:[M.jsx(Dt,{}),!e&&M.jsx("span",{children:"Logout"})]})]}),!e&&M.jsxs("div",{className:"sidebar-footer",children:[M.jsx("p",{className:"copyright",children:"© 2024 TradeBro ⚡"}),M.jsx("p",{className:"version",children:"v1.0.0 • 🚀"})]})]})]})},Jr=()=>{const e=l(),{isAuthenticated:t}=jn();return t&&!["/login","/signup","/"].includes(e.pathname)?M.jsxs(qr,{children:[M.jsx(Vr,{}),M.jsx(Yr,{}),M.jsx(Gr,{})]}):null},Qr=({isAuthenticated:e})=>e?null:M.jsxs(y.div,{className:"card card-glass",style:{position:"fixed",bottom:"24px",right:"24px",width:"320px",zIndex:999,background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.2)",boxShadow:"0 8px 20px rgba(0, 0, 0, 0.2)",borderRadius:"12px"},initial:{opacity:0,y:100,scale:.8},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:100,scale:.8},transition:{duration:.5,type:"spring",stiffness:100},children:[M.jsx("div",{className:"card-header",style:{padding:"16px"},children:M.jsxs("div",{className:"d-flex align-center gap-md",children:[M.jsx("div",{style:{width:"40px",height:"40px",background:"linear-gradient(135deg, #4facfe, #00f2fe)",borderRadius:"8px",color:"#fff",display:"flex",alignItems:"center",justifyContent:"center"},children:M.jsx(At,{size:20})}),M.jsxs("div",{children:[M.jsx("h3",{style:{fontSize:"1rem",marginBottom:"4px"},children:"Sign In Required"}),M.jsx("p",{style:{fontSize:"0.75rem",color:"#ccc"},children:"Access premium features"})]})]})}),M.jsxs("div",{className:"card-body",style:{padding:"16px"},children:[M.jsx("p",{style:{fontSize:"0.875rem",color:"#bbb",marginBottom:"16px",lineHeight:1.5},children:"Sign in to access your portfolio, trading tools, and personalized insights."}),M.jsxs("div",{className:"d-flex gap-sm",children:[M.jsxs(c,{to:"/login",className:"btn btn-primary btn-sm flex-1",children:[M.jsx(pn,{size:14})," Sign In"]}),M.jsxs(c,{to:"/signup",className:"btn btn-outline btn-sm flex-1",children:[M.jsx(Xe,{size:14})," Sign Up"]})]})]})]}),Kr={STOCK_SEARCH:"tradebro_stock_search_history",NEWS_SEARCH:"tradebro_news_search_history",ORDER_SEARCH:"tradebro_order_search_history",GLOBAL_SEARCH:"tradebro_global_search_history"},Xr=e=>{try{const t=Kr[`${e.toUpperCase()}_SEARCH`]||Kr.GLOBAL_SEARCH,n=localStorage.getItem(t);return n?JSON.parse(n):[]}catch(t){return[]}},Zr=e=>Xr(e).slice(0,5),ei=(e,t={})=>{const[s,a]=n.useState(""),[r,i]=n.useState([]),[o,l]=n.useState([]),[c,d]=n.useState(!1),[u,h]=n.useState(null),[m,p]=n.useState(null),[f,g]=n.useState([]),[y,x]=n.useState(!1),{debounceMs:v=300,minQueryLength:b=2,limit:j=10,enableSuggestions:w=!0,enableHistory:k=!0,filters:N={},onResults:S=null,onError:C=null}=t;n.useEffect(()=>{k&&g(Zr(e))},[e,k]);const T=n.useCallback(e=>{m&&clearTimeout(m);const t=setTimeout(async()=>{e.length>=b?await P(e):(i([]),l([]),h(null))},v);p(t)},[m,b,v]),P=n.useCallback(async t=>{if(t&&!(t.length<b)){d(!0),h(null);try{let n=[],s=[];switch(e){case"stocks":const a=await Nr.searchStocks(t,j);if(n=a.success?a.results:[],n.length>0){const e=n.filter(e=>"NSE"===e.exchange||"BSE"===e.exchange||e.symbol.endsWith(".NS")||e.symbol.endsWith(".BO")),t=n.filter(e=>!("NSE"===e.exchange||"BSE"===e.exchange||e.symbol.endsWith(".NS")||e.symbol.endsWith(".BO")));n=[...e,...t]}w&&t.length>=1&&(s=n.slice(0,5));break;case"news":const r=await _r.searchNews(t,j);n=r.success?r.data:[];break;case"orders":const i=await Dr.searchOrders(t,N);n=i.success?i.data:[];break;case"watchlist":const o=await Rr.searchStocks(t,j);n=o.success?o.data:[];break;default:throw new Error(`Unsupported search type: ${e}`)}i(n),l(s),k&&n.length>0&&(((e,t,n={})=>{if(t&&!(t.trim().length<2))try{const s=Kr[`${e.toUpperCase()}_SEARCH`]||Kr.GLOBAL_SEARCH,a=Xr(e),r=[{query:t.trim(),timestamp:Date.now(),type:e,...n},...a.filter(e=>e.query.toLowerCase()!==t.toLowerCase())].slice(0,10);localStorage.setItem(s,JSON.stringify(r))}catch(u){}})(e,t,{resultsCount:n.length,hasResults:!0}),g(Zr(e))),S&&S(n,t)}catch(n){h(n.message||"Search failed"),i([]),l([]),C&&C(n,t)}finally{d(!1)}}},[e,j,b,w,N,S,C]),E=n.useCallback(e=>{a(e),T(e)},[T]),L=n.useCallback(()=>{a(""),i([]),l([]),h(null),m&&clearTimeout(m)},[m]),I=n.useCallback((e=s)=>{P(e)},[P,s]);n.useEffect(()=>()=>{m&&clearTimeout(m)},[m]);const A=n.useCallback(e=>{a(e.query),x(!1),I(e.query)},[I]);return n.useMemo(()=>({query:s,results:r,suggestions:o,loading:c,error:u,recentSearches:f,showHistory:y,setQuery:E,clearSearch:L,triggerSearch:I,setShowHistory:x,handleHistoryClick:A,hasResults:r.length>0,hasSuggestions:o.length>0,hasRecentSearches:f.length>0,isEmpty:!c&&0===r.length&&s.length>=b,searchType:e,minQueryLength:b,enableHistory:k}),[s,r,o,c,u,f,y,E,L,I,A,e,b,k])},ti=(e={})=>ei("stocks",{enableSuggestions:!0,limit:10,...e}),ni=(e={})=>ei("news",{enableSuggestions:!1,limit:20,...e}),si=({placeholder:e="Search...",value:t="",onChange:s,onSearch:a,onClear:r,suggestions:i=[],onSuggestionClick:o,recentSearches:l=[],onHistoryClick:c,showHistory:d=!1,loading:u=!1,disabled:h=!1,size:m="md",showSuggestions:p=!0,enableHistory:f=!0,renderSuggestion:x,renderHistoryItem:v,className:b="",autoFocus:j=!1,...w})=>{const[k,N]=n.useState(!1),[S,C]=n.useState(!1),[T,P]=n.useState(-1),E=n.useRef(null),L=n.useRef(null),I=e=>{var t;null==o||o(e),C(!1),null==(t=E.current)||t.blur()};n.useEffect(()=>{j&&E.current&&E.current.focus()},[j]),n.useEffect(()=>{p&&k&&i.length>0&&t.length>0?C(!0):C(!1)},[i,p,k,t]);const A=x||((e,t)=>{const n=e.symbol||e.title||e;return M.jsx("div",{className:"search-suggestion-item",children:M.jsxs("div",{className:"suggestion-content",children:[M.jsx("span",{className:"suggestion-text",children:n}),e.name&&M.jsx("span",{className:"suggestion-subtitle",children:e.name})]})},t)}),O=v||((e,t)=>M.jsx("div",{className:"search-history-item",children:M.jsxs("div",{className:"history-content",children:[M.jsx(dt,{className:"history-icon"}),M.jsx("span",{className:"history-text",children:e.query}),M.jsx("span",{className:"history-time",children:new Date(e.timestamp).toLocaleDateString()})]})},t)),D=f&&d&&l.length>0&&!t,R=p&&i.length>0&&t;return M.jsxs("div",{className:`search-input-container ${b} size-${m}`,children:[M.jsxs("div",{className:`search-input-wrapper ${k?"focused":""} ${h?"disabled":""}`,children:[M.jsx(Zt,{className:"search-icon"}),M.jsx("input",{ref:E,type:"text",className:"search-input",placeholder:e,value:t,onChange:e=>{const t=e.target.value;null==s||s(t),p&&t.length>0&&i.length>0?C(!0):C(!1)},onFocus:()=>{N(!0),p&&i.length>0&&C(!0)},onBlur:e=>{setTimeout(()=>{var e;(null==(e=L.current)?void 0:e.contains(document.activeElement))||(N(!1),C(!1))},150)},onKeyDown:e=>{var n;const s=(()=>{const e=[];return D&&e.push(...l.map(e=>({type:"history",data:e}))),R&&e.push(...i.map(e=>({type:"suggestion",data:e}))),e})();if("ArrowDown"===e.key)e.preventDefault(),s.length>0&&(P(e=>e<s.length-1?e+1:0),S||C(!0));else if("ArrowUp"===e.key)e.preventDefault(),s.length>0&&(P(e=>e>0?e-1:s.length-1),S||C(!0));else if("Enter"===e.key){if(e.preventDefault(),T>=0&&s[T]){const e=s[T];"history"===e.type?null==c||c(e.data):I(e.data)}else null==a||a(t);C(!1),P(-1)}else"Escape"===e.key?(C(!1),P(-1),null==(n=E.current)||n.blur()):P(-1)},disabled:h,...w}),M.jsxs("div",{className:"search-actions",children:[u&&M.jsx(It,{className:"search-loading animate-spin"}),t&&!u&&M.jsx("button",{type:"button",className:"search-clear",onClick:()=>{var e;null==s||s(""),null==r||r(),C(!1),null==(e=E.current)||e.focus()},disabled:h,children:M.jsx(xn,{})})]})]}),M.jsx(g,{children:S&&(D||R)&&M.jsxs(y.div,{ref:L,className:"search-suggestions-dropdown",initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.15},children:[D&&M.jsxs("div",{className:"history-section",children:[M.jsx("div",{className:"section-header",children:M.jsx("span",{className:"section-title",children:"Recent Searches"})}),M.jsx("div",{className:"history-list",children:l.map((e,t)=>{const n=T===t;return M.jsx(y.div,{className:"history-item-wrapper "+(n?"selected":""),onClick:()=>null==c?void 0:c(e),whileHover:{backgroundColor:"var(--hover-bg)"},transition:{duration:.1},children:O(e,t)},`history-${t}`)})})]}),R&&M.jsxs("div",{className:"suggestions-section",children:[D&&M.jsx("div",{className:"section-header",children:M.jsx("span",{className:"section-title",children:"Suggestions"})}),M.jsx("div",{className:"suggestions-list",children:i.map((e,t)=>{const n=D?l.length+t:t,s=T===n;return M.jsx(y.div,{className:"suggestion-item-wrapper "+(s?"selected":""),onClick:()=>I(e),whileHover:{backgroundColor:"var(--hover-bg)"},transition:{duration:.1},children:A(e,t)},`suggestion-${t}`)})})]})]})})]})},ai=({isOpen:e,onClose:t,onSearch:s})=>{const[a,r]=n.useState("stocks"),[i,o]=n.useState(""),l=n.useRef(null),c=ti({enableSuggestions:!0,enableHistory:!0,limit:8}),d=ni({enableSuggestions:!1,enableHistory:!0,limit:6}),u=(()=>{switch(a){case"stocks":default:return c;case"news":return d}})(),h=e=>{e.trim()&&s(e.trim(),a)},m=e=>{const t=e.query||e.symbol||e.title||e;h(t)};n.useEffect(()=>{const n=e=>{l.current&&!l.current.contains(e.target)&&t()};if(e)return document.addEventListener("mousedown",n),()=>document.removeEventListener("mousedown",n)},[e,t]),n.useEffect(()=>{e&&setTimeout(()=>{var e;const t=null==(e=l.current)?void 0:e.querySelector(".search-input");null==t||t.focus()},100)},[e]);const p=[{id:"stocks",label:"Stocks",icon:mn,placeholder:"Search stocks, symbols...",shortcut:"S"},{id:"news",label:"News",icon:Nt,placeholder:"Search news articles...",shortcut:"N"},{id:"orders",label:"Orders",icon:an,placeholder:"Search orders by symbol...",shortcut:"O"}],f=p.find(e=>e.id===a);return M.jsx(g,{children:e&&M.jsxs(M.Fragment,{children:[M.jsx(y.div,{className:"global-search-backdrop",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},onClick:t}),M.jsxs(y.div,{ref:l,className:"global-search-modal",initial:{opacity:0,scale:.95,y:-20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-20},transition:{duration:.2},children:[M.jsx("div",{className:"global-search-header",children:M.jsx("div",{className:"search-type-tabs",children:p.map(e=>{const t=e.icon;return M.jsxs("button",{className:"search-type-tab "+(a===e.id?"active":""),onClick:()=>(e=>{r(e),o(""),u.clearSearch()})(e.id),children:[M.jsx(t,{className:"tab-icon"}),M.jsx("span",{className:"tab-label",children:e.label}),M.jsx("kbd",{className:"tab-shortcut",children:e.shortcut})]},e.id)})})}),M.jsx("div",{className:"global-search-input-container",children:M.jsx(si,{placeholder:(null==f?void 0:f.placeholder)||"Search...",value:u.query,onChange:u.setQuery,onSearch:h,onClear:u.clearSearch,suggestions:u.suggestions,recentSearches:u.recentSearches,onSuggestionClick:m,onHistoryClick:m,showHistory:u.showHistory,loading:u.loading,size:"lg",showSuggestions:!0,enableHistory:!0,className:"global-search-input",autoFocus:!0})}),M.jsxs("div",{className:"global-search-footer",children:[M.jsxs("div",{className:"search-shortcuts",children:[M.jsxs("div",{className:"shortcut-item",children:[M.jsx("kbd",{children:M.jsx(et,{})}),M.jsx("kbd",{children:M.jsx(Qe,{})}),M.jsx("span",{children:"Navigate"})]}),M.jsxs("div",{className:"shortcut-item",children:[M.jsx("kbd",{children:M.jsx(ht,{})}),M.jsx("span",{children:"Select"})]}),M.jsxs("div",{className:"shortcut-item",children:[M.jsx("kbd",{children:"Esc"}),M.jsx("span",{children:"Close"})]})]}),M.jsxs("div",{className:"search-branding",children:[M.jsx("span",{children:"Global Search"}),M.jsxs("div",{className:"shortcut-badge",children:[M.jsx(ut,{className:"command-icon"}),M.jsx("span",{children:"K"})]})]})]})]})]})})},ri=()=>{const{isVoiceModeActive:e,isListening:t,transcript:n,stopListening:s}=zr();return e?M.jsx("div",{className:"voice-modal-overlay",children:M.jsxs("div",{className:"voice-modal",children:[M.jsxs("div",{className:"voice-modal-header",children:[M.jsx("h3",{children:"🎤 Saytrix Voice Commands"}),M.jsx("button",{className:"voice-modal-close",onClick:s,"aria-label":"Close voice commands",children:M.jsx(xn,{})})]}),M.jsxs("div",{className:"voice-modal-content",children:[M.jsxs("div",{className:"voice-status",children:[M.jsxs("div",{className:"voice-indicator "+(t?"listening":""),children:[M.jsx(zt,{}),M.jsx("div",{className:"pulse-ring"}),M.jsx("div",{className:"pulse-ring delay-1"}),M.jsx("div",{className:"pulse-ring delay-2"})]}),M.jsx("p",{className:"voice-status-text",children:t?"Listening for commands...":"Voice mode active"})]}),n&&M.jsx("div",{className:"voice-transcript",children:M.jsxs("p",{children:[M.jsx("strong",{children:"You said:"}),' "',n,'"']})}),M.jsxs("div",{className:"voice-commands-list",children:[M.jsx("h4",{children:"Available Commands:"}),M.jsxs("div",{className:"commands-grid",children:[M.jsxs("div",{className:"command-item",children:[M.jsx("span",{className:"command-text",children:'"Dashboard"'}),M.jsx("span",{className:"command-desc",children:"Go to dashboard"})]}),M.jsxs("div",{className:"command-item",children:[M.jsx("span",{className:"command-text",children:'"Charts"'}),M.jsx("span",{className:"command-desc",children:"Open charts"})]}),M.jsxs("div",{className:"command-item",children:[M.jsx("span",{className:"command-text",children:'"Portfolio"'}),M.jsx("span",{className:"command-desc",children:"View portfolio"})]}),M.jsxs("div",{className:"command-item",children:[M.jsx("span",{className:"command-text",children:'"Watchlist"'}),M.jsx("span",{className:"command-desc",children:"Open watchlist"})]}),M.jsxs("div",{className:"command-item",children:[M.jsx("span",{className:"command-text",children:'"Orders"'}),M.jsx("span",{className:"command-desc",children:"View orders"})]}),M.jsxs("div",{className:"command-item",children:[M.jsx("span",{className:"command-text",children:'"History"'}),M.jsx("span",{className:"command-desc",children:"Check history"})]}),M.jsxs("div",{className:"command-item",children:[M.jsx("span",{className:"command-text",children:'"News"'}),M.jsx("span",{className:"command-desc",children:"Read news"})]}),M.jsxs("div",{className:"command-item",children:[M.jsx("span",{className:"command-text",children:'"Notifications"'}),M.jsx("span",{className:"command-desc",children:"View notifications"})]}),M.jsxs("div",{className:"command-item",children:[M.jsx("span",{className:"command-text",children:'"Profile"'}),M.jsx("span",{className:"command-desc",children:"Open profile"})]}),M.jsxs("div",{className:"command-item",children:[M.jsx("span",{className:"command-text",children:'"Settings"'}),M.jsx("span",{className:"command-desc",children:"Open settings"})]}),M.jsxs("div",{className:"command-item",children:[M.jsx("span",{className:"command-text",children:'"Stop" / "Exit"'}),M.jsx("span",{className:"command-desc",children:"Close voice mode"})]})]})]}),M.jsx("div",{className:"voice-tips",children:M.jsxs("p",{children:[M.jsx("strong",{children:"💡 Tip:"}),' Say "Saytrix" anytime to activate voice commands']})})]})]})}):null},ii=()=>{const{isListening:e,isVoiceModeActive:t,isSupported:n}=zr();return!n||t?null:M.jsxs("div",{className:"voice-status-indicator "+(e?"listening":""),children:[M.jsx("div",{className:"voice-status-icon",children:M.jsx(zt,{})}),M.jsx("div",{className:"voice-status-text",children:M.jsx("span",{children:'Say "Saytrix" to activate'})}),e&&M.jsxs("div",{className:"voice-pulse-rings",children:[M.jsx("div",{className:"pulse-ring"}),M.jsx("div",{className:"pulse-ring delay-1"}),M.jsx("div",{className:"pulse-ring delay-2"})]})]})};const oi=new class{constructor(){this.portfolio=new Map,this.tradingHistory=[],this.virtualBalance=1e4,this.listeners=new Set,this.dailyRewards={lastLoginDate:null,lastClaimDate:null,totalRewards:0,loginStreak:0},this.loadPortfolioFromStorage(),this.checkDailyLogin()}async _createAndStoreNotification(e){try{const t={id:`trade_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,...e,read:!1,createdAt:(new Date).toISOString()},n=JSON.parse(localStorage.getItem("tradebro_notifications")||"[]");return n.unshift(t),n.length>50&&n.splice(50),localStorage.setItem("tradebro_notifications",JSON.stringify(n)),Ya.notifyListeners("notification",t),t}catch(t){return null}}async createTradeNotification(e,t,n,s){await this._createAndStoreNotification({title:"Trade Executed Successfully",message:`Your ${s.toLowerCase()} order for ${t} shares of ${e} has been executed at ₹${n.toFixed(2)}`,type:"success",data:{symbol:e,quantity:t,price:n,action:s}})}async createRewardNotification(e,t){await this._createAndStoreNotification({title:"Daily Reward Claimed!",message:`You've earned ₹${e} daily bonus! Login streak: ${t} days`,type:"success",data:{amount:e,streak:t,type:"DAILY_REWARD"}})}loadPortfolioFromStorage(){try{const e=localStorage.getItem("tradebro_portfolio"),t=localStorage.getItem("tradebro_balance"),n=localStorage.getItem("tradebro_history"),s=localStorage.getItem("tradebro_daily_rewards");if(e){const t=JSON.parse(e);this.portfolio=new Map(Object.entries(t))}this.virtualBalance=t?parseFloat(t):1e4,n&&(this.tradingHistory=JSON.parse(n)),s&&(this.dailyRewards=JSON.parse(s))}catch(e){this.virtualBalance=1e4,this.dailyRewards={lastLoginDate:null,lastClaimDate:null,totalRewards:0,loginStreak:0}}}savePortfolioToStorage(){try{const e=Object.fromEntries(this.portfolio);localStorage.setItem("tradebro_portfolio",JSON.stringify(e)),localStorage.setItem("tradebro_balance",this.virtualBalance.toString()),localStorage.setItem("tradebro_history",JSON.stringify(this.tradingHistory)),localStorage.setItem("tradebro_daily_rewards",JSON.stringify(this.dailyRewards))}catch(e){}}addListener(e){this.listeners.add(e)}removeListener(e){this.listeners.delete(e)}notifyListeners(){this.listeners.forEach(e=>{try{e(this.getPortfolioSummary())}catch(t){}})}hasHoldings(e){const t=this.portfolio.get(e);return t&&t.quantity>0}getPosition(e){return this.portfolio.get(e)||{symbol:e,quantity:0,avgPrice:0,totalInvested:0,currentValue:0,pnl:0,pnlPercentage:0,lastUpdated:new Date}}getPortfolioSummary(){const e=Array.from(this.portfolio.values()).filter(e=>e.quantity>0);let t=0,n=0,s=0,a=0;e.forEach(e=>{t+=e.totalInvested,n+=e.currentValue||e.totalInvested,s+=(e.currentValue||e.totalInvested)-e.totalInvested,a+=e.realizedPnL||0});const r=t>0?s/t*100:0;return{totalValue:this.virtualBalance+n,availableCash:this.virtualBalance,totalInvested:t,totalCurrentValue:n,totalPnL:s,totalPnLPercentage:r,totalRealizedPnL:a,positions:e,totalPositions:e.length,lastUpdated:new Date}}getTradingHistory(e=100){return this.tradingHistory.slice(0,e)}calculateBrokerage(e){return Math.min(.001*e,20)}calculateTaxes(e,t){const n=345e-7*e;return("SELL"===t?25e-5*e:0)+n+.18*(this.calculateBrokerage(e)+n)+1e-6*e+("BUY"===t?3e-5*e:0)}calculateTradeMetrics(e,t,n,s){const a=this.getPosition(e),r=t*n,i=this.calculateBrokerage(r),o=this.calculateTaxes(r,s),l=r+i+o;let c={...a};if("BUY"===s){const e=a.quantity+t,n=a.totalInvested+l;c={...a,quantity:e,avgPrice:n/e,totalInvested:n,lastUpdated:new Date}}else if("SELL"===s){if(a.quantity<t)throw new Error(`Insufficient holdings. You have ${a.quantity} shares, trying to sell ${t}`);const e=a.quantity-t,n=r-i-o,s=t/a.quantity*a.totalInvested,l=n-s;c={...a,quantity:e,totalInvested:e>0?a.totalInvested-s:0,avgPrice:e>0?a.avgPrice:0,lastUpdated:new Date,realizedPnL:(a.realizedPnL||0)+l}}return{newPosition:c,tradeValue:r,brokerage:i,taxes:o,totalCost:"BUY"===s?l:r-i-o,realizedPnL:"SELL"===s?r-i-o-t/a.quantity*a.totalInvested:0}}async executeTrade(e,t,n,s,a="MARKET"){try{if(!(e&&t&&n&&s))throw new Error("Missing required trade parameters");if(t<=0||n<=0)throw new Error("Quantity and price must be positive");const r=this.calculateTradeMetrics(e,t,n,s);if("BUY"===s&&this.virtualBalance<r.totalCost)throw new Error(`Insufficient balance. Required: ₹${r.totalCost.toFixed(2)}, Available: ₹${this.virtualBalance.toFixed(2)}`);this.portfolio.set(e,r.newPosition),"BUY"===s?this.virtualBalance-=r.totalCost:this.virtualBalance+=r.totalCost;const i={id:Date.now().toString(),symbol:e,quantity:t,price:n,action:s,orderType:a,tradeValue:r.tradeValue,brokerage:r.brokerage,taxes:r.taxes,totalCost:r.totalCost,realizedPnL:r.realizedPnL,timestamp:new Date,status:"EXECUTED"};return this.tradingHistory.unshift(i),this.tradingHistory.length>1e3&&(this.tradingHistory=this.tradingHistory.slice(0,1e3)),this.savePortfolioToStorage(),this.notifyListeners(),this.createTradeNotification(e,t,n,s),{success:!0,trade:i,newPosition:r.newPosition,newBalance:this.virtualBalance,message:`Successfully ${s.toLowerCase()}ed ${t} shares of ${e}`}}catch(r){return{success:!1,error:r.message}}}async buyStock(e,t,n,s="market"){return this.executeTrade(e,t,n,"BUY",s)}async sellStock(e,t,n,s="market"){return this.executeTrade(e,t,n,"SELL",s)}async getPortfolio(){return{success:!0,data:this.getPortfolioSummary()}}async getHoldings(){return{success:!0,data:this.getPortfolioSummary().positions}}async getVirtualMoneyAccount(){return{success:!0,data:{balance:this.virtualBalance,totalInvested:this.getPortfolioSummary().totalInvested,totalReturns:this.getPortfolioSummary().totalPnL}}}async checkDailyLogin(){try{const e=(new Date).toDateString(),t=this.dailyRewards.lastClaimDate;if(t===e)return{awarded:!1,alreadyClaimed:!0,streak:this.dailyRewards.loginStreak,message:"You've already claimed your daily reward today! Come back tomorrow."};if(!t||t!==e){const t=100,n=this.virtualBalance;this.virtualBalance+=t;const s=new Date;s.setDate(s.getDate()-1);const a=this.dailyRewards.lastLoginDate===s.toDateString();return this.dailyRewards={lastLoginDate:e,lastClaimDate:e,totalRewards:this.dailyRewards.totalRewards+t,loginStreak:a?this.dailyRewards.loginStreak+1:1},this.tradingHistory.unshift({id:`daily_${Date.now()}`,type:"BONUS",symbol:"DAILY_REWARD",quantity:1,price:t,total:t,timestamp:new Date,description:`Daily login bonus - Day ${this.dailyRewards.loginStreak}`,balanceBefore:n,balanceAfter:this.virtualBalance}),this.savePortfolioToStorage(),await this.syncWithServer(),this.notifyListeners(),this.createRewardNotification(t,this.dailyRewards.loginStreak),{awarded:!0,amount:t,streak:this.dailyRewards.loginStreak,totalRewards:this.dailyRewards.totalRewards,newBalance:this.virtualBalance,oldBalance:n}}return{awarded:!1,alreadyClaimed:!1,streak:this.dailyRewards.loginStreak,totalRewards:this.dailyRewards.totalRewards}}catch(e){return{awarded:!1,error:e.message}}}getDailyRewardsInfo(){const e=(new Date).toDateString(),t=this.dailyRewards.lastClaimDate,n=!t||t!==e;return{...this.dailyRewards,canClaimToday:n,alreadyClaimedToday:t===e,timeUntilNextReward:this.getTimeUntilNextReward()}}getTimeUntilNextReward(){const e=this.dailyRewards.lastClaimDate;if(!e)return null;const t=new Date(e),n=new Date(t);n.setDate(n.getDate()+1),n.setHours(0,0,0,0);const s=new Date,a=n.getTime()-s.getTime();if(a<=0)return null;return{hours:Math.floor(a/36e5),minutes:Math.floor(a%36e5/6e4),totalMinutes:Math.floor(a/6e4),nextRewardTime:n.toISOString()}}async claimDailyReward(){try{const e=(new Date).toDateString(),t=this.dailyRewards.lastClaimDate;if(t&&t===e)return{success:!1,alreadyClaimed:!0,message:"You've already claimed your daily reward today!",timeUntilNext:this.getTimeUntilNextReward()};const n=100,s=this.virtualBalance;this.virtualBalance+=n;const a=new Date;a.setDate(a.getDate()-1);const r=this.dailyRewards.lastLoginDate===a.toDateString();return this.dailyRewards={lastLoginDate:e,lastClaimDate:e,totalRewards:this.dailyRewards.totalRewards+n,loginStreak:r?this.dailyRewards.loginStreak+1:1},this.tradingHistory.unshift({id:`daily_${Date.now()}`,type:"BONUS",symbol:"DAILY_REWARD",quantity:1,price:n,total:n,timestamp:new Date,description:`Daily login bonus - Day ${this.dailyRewards.loginStreak}`,balanceBefore:s,balanceAfter:this.virtualBalance}),this.savePortfolioToStorage(),await this.syncPortfolioData(),this.createRewardNotification(n,this.dailyRewards.loginStreak),this.notifyListeners(),{success:!0,awarded:!0,amount:n,streak:this.dailyRewards.loginStreak,totalRewards:this.dailyRewards.totalRewards,newBalance:this.virtualBalance,oldBalance:s}}catch(e){return{success:!1,error:e.message}}}forceDailyReward(){this.dailyRewards.lastLoginDate=null,this.dailyRewards.lastClaimDate=null,this.savePortfolioToStorage();const e=this.checkDailyLogin();return setTimeout(()=>{this.notifyListeners()},100),e}async syncPortfolioData(){try{return this.savePortfolioToStorage(),await this.syncWithServer(),this.notifyListeners(),{success:!0,summary:this.getPortfolioSummary(),rewards:this.getDailyRewardsInfo()}}catch(e){return{success:!1,error:e.message}}}async syncWithServer(){try{if(!localStorage.getItem("token"))return;(await Tr.post("/virtual-money/sync-balance",{balance:this.virtualBalance,totalRewards:this.dailyRewards.totalRewards,loginStreak:this.dailyRewards.loginStreak,lastClaimDate:this.dailyRewards.lastClaimDate})).status}catch(e){}}clearAllData(){this.portfolio.clear(),this.tradingHistory=[],this.virtualBalance=1e4,this.dailyRewards={lastLoginDate:null,lastClaimDate:null,totalRewards:0,loginStreak:0},localStorage.removeItem("tradebro_portfolio"),localStorage.removeItem("tradebro_balance"),localStorage.removeItem("tradebro_history"),localStorage.removeItem("tradebro_daily_rewards"),this.notifyListeners()}},li=n.createContext(),ci=()=>{const e=n.useContext(li);if(!e)throw new Error("usePortfolio must be used within a PortfolioProvider");return e},di=({children:e,user:t})=>{const[s,a]=n.useState({totalValue:1e4,availableCash:1e4,totalInvested:0,totalGainLoss:0,totalGainLossPercentage:0,holdings:[],transactions:[],watchlist:[]}),[r,i]=n.useState(!1);n.useEffect(()=>{const e=e=>{a(t=>({...t,totalValue:e.totalValue,availableCash:e.availableCash,totalInvested:e.totalInvested,totalGainLoss:e.totalPnL,totalGainLossPercentage:e.totalPnLPercentage,holdings:e.positions.map(e=>({symbol:e.symbol,quantity:e.quantity,avgPrice:e.avgPrice,currentPrice:e.currentValue/e.quantity||e.avgPrice,totalValue:e.currentValue||e.totalInvested,gainLoss:(e.currentValue||e.totalInvested)-e.totalInvested,gainLossPercentage:e.totalInvested>0?((e.currentValue||e.totalInvested)-e.totalInvested)/e.totalInvested*100:0}))}))};oi.addListener(e);const t=oi.getPortfolioSummary();e(t);const n=setTimeout(()=>{const t=oi.getPortfolioSummary();e(t)},2e3),s=t=>{const n=oi.getPortfolioSummary();e(n)};return window.addEventListener("balanceUpdated",s),()=>{oi.removeListener(e),window.removeEventListener("balanceUpdated",s),clearTimeout(n)}},[]),n.useEffect(()=>{const e=localStorage.getItem("token"),n=(null==t?void 0:t.id)||(null==t?void 0:t._id);if(t&&n&&e){const e=setTimeout(()=>{o()},100);return()=>clearTimeout(e)}a({totalValue:1e4,availableCash:1e4,totalInvested:0,totalGainLoss:0,totalGainLossPercentage:0,holdings:[],transactions:[],watchlist:[]})},[t]);const o=async()=>{i(!0);try{const e=oi.getPortfolioSummary(),t=oi.getTradingHistory(100);a({totalValue:e.totalValue,availableCash:e.availableCash,totalInvested:e.totalInvested,totalGainLoss:e.totalPnL,totalGainLossPercentage:e.totalPnLPercentage,holdings:e.positions.map(e=>({symbol:e.symbol,quantity:e.quantity,avgPrice:e.avgPrice,currentPrice:e.currentValue/e.quantity||e.avgPrice,totalValue:e.currentValue||e.totalInvested,gainLoss:(e.currentValue||e.totalInvested)-e.totalInvested,gainLossPercentage:e.totalInvested>0?((e.currentValue||e.totalInvested)-e.totalInvested)/e.totalInvested*100:0})),transactions:t,watchlist:[]})}catch(e){}finally{i(!1)}},l=n.useCallback(async(e,t,n,s=null)=>{try{i(!0);const s=await oi.buyStock(e,t,n);if(!s.success)throw new Error(s.error);try{await u(e)}catch(a){}return s}catch(r){throw r}finally{i(!1)}},[s.holdings]),c=n.useCallback(async(e,t,n,a=null)=>{try{i(!0);const o=s.holdings.find(t=>t.symbol===e),l=o&&o.quantity<=t,c=await oi.sellStock(e,t,n);if(!c.success)throw new Error(c.error);if(l)try{const t=a||{symbol:e,name:(null==o?void 0:o.name)||e,price:n,sector:(null==o?void 0:o.sector)||"Unknown"};await d(e,t)}catch(r){}return c}catch(o){throw o}finally{i(!1)}},[s.holdings]),d=async(e,n=null)=>{try{const s=localStorage.getItem("token"),r={userId:(null==t?void 0:t.id)||(null==t?void 0:t._id),symbol:e};n&&(n.name&&(r.name=n.name),n.sector&&(r.sector=n.sector),n.price&&(r.currentPrice=n.price));const i=await fetch("https://s89-satya-capstone-tradebro.onrender.com/api/portfolio/watchlist/add",{method:"POST",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify(r)});if(i.ok){const e=await i.json();return a(t=>({...t,watchlist:e})),e}if((await fetch("https://s89-satya-capstone-tradebro.onrender.com/api/watchlist/add",{method:"POST",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify({symbol:e,name:(null==n?void 0:n.name)||"",notes:"Added after selling position"})})).ok)return!0}catch(s){throw s}},u=async e=>{try{const n=localStorage.getItem("token"),s=await fetch("https://s89-satya-capstone-tradebro.onrender.com/api/portfolio/watchlist/remove",{method:"DELETE",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:JSON.stringify({userId:(null==t?void 0:t.id)||(null==t?void 0:t._id),symbol:e})});if(s.ok){const e=await s.json();return a(t=>({...t,watchlist:e})),e}return(await fetch(`https://s89-satya-capstone-tradebro.onrender.com/api/watchlist/remove/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"}})).ok,!0}catch(n){return!0}},h=n.useCallback(async()=>{try{const e=localStorage.getItem("token"),n=(null==t?void 0:t.id)||(null==t?void 0:t._id),s=await fetch(`https://s89-satya-capstone-tradebro.onrender.com/api/portfolio/update-values/${n}`,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(s.ok){const e=await s.json();return a(e),e}}catch(e){}},[null==t?void 0:t.id]),m=n.useCallback(()=>{const e=oi.getPortfolioSummary(),t=oi.getDailyRewardsInfo();a(n=>({...n,totalValue:e.totalValue,availableCash:e.availableCash,totalInvested:e.totalInvested,totalGainLoss:e.totalPnL,totalGainLossPercentage:e.totalPnLPercentage,dailyRewards:t,holdings:e.positions.map(e=>({symbol:e.symbol,quantity:e.quantity,avgPrice:e.avgPrice,currentPrice:e.currentValue/e.quantity||e.avgPrice,totalValue:e.currentValue||e.totalInvested,gainLoss:(e.currentValue||e.totalInvested)-e.totalInvested,gainLossPercentage:e.totalInvested>0?((e.currentValue||e.totalInvested)-e.totalInvested)/e.totalInvested*100:0}))}))},[]),p=n.useCallback(e=>{setTimeout(()=>{m()},100)},[m]),f={portfolioData:s,loading:r,buyStock:l,sellStock:c,addToWatchlist:d,removeFromWatchlist:u,updatePortfolioValues:h,initializePortfolio:o,refreshPortfolio:m,handleDailyReward:p};return M.jsx(li.Provider,{value:f,children:e})},ui=n.memo(({symbol:e,price:t,change:s,changePercent:a,priceChange:r=null,showSymbol:i=!0,showChange:o=!0,size:l="medium",className:c=""})=>{const[d,u]=n.useState(!1),[h,m]=n.useState(null);n.useEffect(()=>{if(r&&r.direction){m(r.direction),u(!0);const e=setTimeout(()=>{u(!1)},2e3);return()=>clearTimeout(e)}},[r]);const p=n.useCallback(e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2,maximumFractionDigits:2}).format(e),[]),f=n.useCallback(e=>{if("number"!=typeof e||isNaN(e))return"--";return`${e>=0?"+":""}${e.toFixed(2)}%`},[]),{trendDirection:x,isPositive:v,formattedPrice:b,formattedChange:j}=n.useMemo(()=>({trendDirection:s>0?"up":s<0?"down":"neutral",isPositive:s>=0,formattedPrice:"number"==typeof t?p(t):t,formattedChange:"number"==typeof s?f(s):s}),[t,s,p,f]);return M.jsxs("div",{className:`stock-price ${l} ${c}`,children:[i&&M.jsx("div",{className:"stock-symbol",children:e}),M.jsxs("div",{className:"price-container",children:[M.jsxs(y.div,{className:"price-value "+(d?"animating":""),variants:{initial:{scale:1},animate:{scale:[1,1.05,1],transition:{duration:.6,ease:"easeInOut"}}},initial:"initial",animate:d?"animate":"initial",children:[p(t),M.jsx(g,{children:d&&M.jsx(y.div,{className:`price-flash ${h}`,variants:{initial:{opacity:0},animate:{opacity:[0,.3,0],transition:{duration:1,ease:"easeInOut"}}},initial:"initial",animate:"animate",exit:"initial"})})]}),o&&M.jsxs("div",{className:`price-change ${x}`,children:[M.jsxs("div",{className:"change-icon",children:["up"===x&&M.jsx(mn,{size:14}),"down"===x&&M.jsx(hn,{size:14}),"neutral"===x&&M.jsx(Ut,{size:14})]}),M.jsxs("div",{className:"change-values",children:[M.jsxs("span",{className:"change-amount",children:[v?"+":"",p(Math.abs(s))]}),M.jsxs("span",{className:"change-percent",children:["(",f(a),")"]})]})]})]}),M.jsx(g,{children:d&&M.jsx(y.div,{className:"pulse-indicator",initial:{scale:0,opacity:1},animate:{scale:2,opacity:0},exit:{scale:0,opacity:0},transition:{duration:1}})})]})});ui.displayName="StockPrice";const hi=(e,t="INR")=>new Intl.NumberFormat("en-IN",{style:"currency",currency:t,minimumFractionDigits:2,maximumFractionDigits:2}).format(e),mi=(e,t=2)=>`${e>=0?"+":""}${e.toFixed(t)}%`,pi=(e,t=2)=>"number"!=typeof e?"₹0.00":`₹${e.toLocaleString("en-IN",{minimumFractionDigits:t,maximumFractionDigits:t})}`,fi=({notification:e,onClose:t,theme:n="light"})=>M.jsxs(y.div,{className:`notification-toast ${e.type} ${n}`,initial:{opacity:0,x:300,scale:.9},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:300,scale:.9},transition:{type:"spring",stiffness:300,damping:30},children:[M.jsx("div",{className:"toast-icon-container",children:(e=>{const t={size:20};switch(e){case"success":return M.jsx(lt,{...t,className:"toast-icon success"});case"error":return M.jsx(yn,{...t,className:"toast-icon error"});case"warning":return M.jsx(Ge,{...t,className:"toast-icon warning"});case"alert":return M.jsx(Ye,{...t,className:"toast-icon alert"});default:return M.jsx(Tt,{...t,className:"toast-icon info"})}})(e.type)}),M.jsxs("div",{className:"toast-content",children:[M.jsx("div",{className:"toast-title",children:e.title}),e.message&&M.jsx("div",{className:"toast-message",children:e.message}),e.link&&M.jsxs(y.button,{className:"toast-action",onClick:()=>{e.link&&window.open(e.link,"_blank")},whileHover:{scale:1.05},whileTap:{scale:.95},children:["View Details",M.jsx(vt,{size:14})]})]}),M.jsx(y.button,{className:"toast-close",onClick:t,whileHover:{scale:1.1},whileTap:{scale:.9},"aria-label":"Dismiss notification",children:M.jsx(xn,{size:16})})]}),gi=(e,t="light")=>{const n={toastId:`notification-${e.id}`,position:"top-right",autoClose:"error"===e.type?7e3:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,closeButton:!1,className:`toast-container-wrapper ${t}`},s=({closeToast:n})=>M.jsx(fi,{notification:e,onClose:n,theme:t});switch(e.type){case"success":return qe.success(s,n);case"error":return qe.error(s,n);case"warning":return qe.warning(s,n);default:return qe.info(s,n)}},yi={success:(e,t,n,s,a="light")=>{const r={id:Date.now(),type:"success",title:`${e} Order Executed`,message:`${"buy"===e?"Bought":"Sold"} ${n} shares of ${t} at ₹${s.toLocaleString("en-IN")}`,link:"/orders"};return gi(r,a)},pending:(e,t,n,s="light")=>{const a={id:Date.now(),type:"info",title:`${e} Order Pending`,message:`Placing ${e} order for ${n} shares of ${t}`,link:"/orders"};return gi(a,s)},error:(e,t,n="light")=>{const s={id:Date.now(),type:"error",title:"Order Failed",message:t||e,link:"/orders"};return gi(s,n)}};class xi{constructor(){this.intervals=new Set,this.timeouts=new Set,this.listeners=new Set}addInterval(e){return this.intervals.add(e),e}addTimeout(e){return this.timeouts.add(e),e}addListener(e,t,n){const s={element:e,event:t,handler:n};return this.listeners.add(s),e.addEventListener(t,n),s}cleanup(){this.intervals.forEach(e=>clearInterval(e)),this.intervals.clear(),this.timeouts.forEach(e=>clearTimeout(e)),this.timeouts.clear(),this.listeners.forEach(({element:e,event:t,handler:n})=>{e.removeEventListener(t,n)}),this.listeners.clear()}}const vi=()=>{const e=n.useRef(new xi);return n.useEffect(()=>()=>{e.current.cleanup()},[]),e.current};class bi{constructor(e=100){this.maxSize=e,this.cache=new Map}get(e){if(this.cache.has(e)){const t=this.cache.get(e);return this.cache.delete(e),this.cache.set(e,t),t}return null}set(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){const e=this.cache.keys().next().value;this.cache.delete(e)}this.cache.set(e,t)}clear(){this.cache.clear()}size(){return this.cache.size}}const ji=(e,t)=>{const n=e>=0?"+":"";return{absolute:`${n}₹${Math.abs(e).toFixed(2)}`,percent:`${n}${t.toFixed(2)}%`,direction:e>0?"up":e<0?"down":"same"}},wi=({stockData:e,orderType:t,quantity:s,orderPrice:a,averagePrice:r=null,className:i=""})=>{const[o,l]=n.useState(!1),[c,d]=n.useState(0),{getPrice:u,isConnected:h,lastUpdate:m}=((e=[],t=!0)=>{const[s,a]=n.useState({}),[r,i]=n.useState(!1),[o,l]=n.useState(null),[c,d]=n.useState(0),u=n.useRef(null),h=n.useRef(null),m=n.useRef(null),p=n.useRef([]),f=n.useRef(null);n.useRef(new bi(1e3)),vi();const g={wsUrl:"wss://ws.finnhub.io?token=YOUR_FINNHUB_TOKEN",fallbackInterval:t?3e4:6e4,debounceDelay:50,reconnectDelay:5e3,maxReconnectAttempts:5,batchSize:10,maxCacheAge:3e4},y=n.useCallback(()=>{if(0===p.current.length)return;const e=[...p.current];p.current=[];const t=e.reduce((e,t)=>(e[t.symbol]=t,e),{});a(e=>{const n={...e};let s=!1;return Object.values(t).forEach(e=>{const t=n[e.symbol];t&&t.price===e.price||(n[e.symbol]={...e,previousPrice:(null==t?void 0:t.price)||e.price,priceDirection:t?e.price>t.price?"up":e.price<t.price?"down":"same":"same",lastUpdated:(new Date).toISOString()},s=!0)}),s&&(l((new Date).toISOString()),d(e=>e+1)),n})},[]),x=n.useCallback(e=>{p.current.push(e),f.current&&clearTimeout(f.current),f.current=setTimeout(()=>{y()},g.debounceDelay)},[y,g.debounceDelay]),v=n.useCallback(()=>{if(t&&0!==e.length)try{u.current=new WebSocket(g.wsUrl),u.current.onopen=()=>{i(!0),e.forEach(e=>{u.current.send(JSON.stringify({type:"subscribe",symbol:e.toUpperCase()}))})},u.current.onmessage=e=>{try{const t=JSON.parse(e.data);"trade"===t.type&&t.data.forEach(e=>{x({symbol:e.s,price:e.p,volume:e.v,timestamp:e.t,change:0,changePercent:0})})}catch(t){}},u.current.onclose=()=>{i(!1),t&&(m.current=setTimeout(()=>{v()},g.reconnectDelay))},u.current.onerror=e=>{i(!1)}}catch(n){i(!1)}},[t,e,x,g.wsUrl,g.reconnectDelay]),b=n.useCallback(async()=>{if(t&&0!==e.length)try{const t=e.map(async e=>{try{const t=await fetch(`https://s89-satya-capstone-tradebro.onrender.com/api/stocks/quote/${e}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}});if(t.ok){const e=await t.json();return{symbol:e.symbol,price:e.price||e.c,change:e.change||e.d,changePercent:e.changePercent||e.dp,volume:e.volume||e.v,high:e.high||e.h,low:e.low||e.l,timestamp:Date.now()}}}catch(t){}return null});(await Promise.all(t)).filter(Boolean).forEach(x)}catch(n){}},[t,e,x]),j=n.useCallback(()=>{h.current&&clearInterval(h.current),h.current=setInterval(b,g.fallbackInterval),b()},[b,g.fallbackInterval]);n.useEffect(()=>{if(!t||0===e.length)return;v();const n=setTimeout(()=>{r||j()},2e3);return()=>{clearTimeout(n)}},[t,e,v,j,r]),n.useEffect(()=>()=>{u.current&&u.current.close(),h.current&&clearInterval(h.current),m.current&&clearTimeout(m.current),f.current&&clearTimeout(f.current)},[]);const w=n.useCallback(e=>s[null==e?void 0:e.toUpperCase()]||null,[s]),k=n.useCallback(e=>e.map(e=>({symbol:e,...w(e)})).filter(Boolean),[w]),N=n.useCallback(e=>{u.current&&u.current.readyState===WebSocket.OPEN&&u.current.send(JSON.stringify({type:"subscribe",symbol:e.toUpperCase()}))},[]),S=n.useCallback(e=>{u.current&&u.current.readyState===WebSocket.OPEN&&u.current.send(JSON.stringify({type:"unsubscribe",symbol:e.toUpperCase()}))},[]),C=n.useCallback(()=>{b()},[b]),T=n.useCallback((e,t,n)=>{const s=w(e);if(!s||!t||!n)return{pnl:0,pnlPercent:0,unrealized:!0};const a=t*s.price,r=t*n,i=a-r;return{pnl:i,pnlPercent:i/r*100,currentValue:a,investedValue:r,unrealized:!0,lastUpdated:s.lastUpdated}},[w]);return{prices:s,isConnected:r,lastUpdate:o,updateCount:c,getPrice:w,getPrices:k,subscribe:N,unsubscribe:S,refresh:C,calculatePnL:T,connectionStatus:r?"connected":"disconnected"}})(e?[e.symbol]:[],!0),p=u(null==e?void 0:e.symbol),f=(null==p?void 0:p.price)||(null==e?void 0:e.price)||0,g=n.useMemo(()=>{if(!e||!s||!a)return null;const n=parseInt(s),i=parseFloat(a),o=parseFloat(f);if("buy"===t){const e=n*i,t=n*o,s=t-e,a=o-i;return{type:"buy",orderValue:e,currentValue:t,unrealizedPnL:s,unrealizedPnLPercent:e>0?s/e*100:0,priceDiff:a,priceDiffPercent:i>0?a/i*100:0,breakEvenPrice:i,isProfit:s>=0,recommendation:a>0?"favorable":a<0?"unfavorable":"neutral"}}{const e=parseFloat(r||i),t=n*i,s=n*e,a=t-s,l=n*o,c=l-t;return{type:"sell",investedValue:s,sellValue:t,marketValue:l,realizedPnL:a,realizedPnLPercent:s>0?a/s*100:0,opportunityCost:c,opportunityCostPercent:t>0?c/t*100:0,breakEvenPrice:e,isProfit:a>=0,recommendation:c<0?"good_timing":c>0?"consider_waiting":"neutral"}}},[e,t,s,a,f,r]);if(n.useEffect(()=>{l(!!g),g&&d(e=>e+1)},[g]),n.useEffect(()=>{p&&m&&d(e=>e+1)},[p,m]),!o||!g)return null;return M.jsxs(y.div,{className:`live-pnl-calculator ${i}`,initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,ease:"easeOut"},children:[M.jsxs("div",{className:"pnl-header",children:[M.jsxs("div",{className:"pnl-title",children:[M.jsx(Ve,{className:"pnl-icon"}),M.jsx("span",{children:"Live P&L Calculator"})]}),M.jsxs("div",{className:"connection-status",children:[M.jsx("div",{className:"status-indicator "+(h?"connected":"disconnected")}),M.jsx("span",{className:"status-text",children:h?"Live":"Delayed"})]})]}),M.jsxs("div",{className:"current-price-section",children:[M.jsx("div",{className:"price-label",children:"Current Market Price"}),M.jsxs("div",{className:"price-display",children:[M.jsx("span",{className:"price-value",children:hi(f)}),p&&M.jsxs(y.div,{className:`price-change ${p.priceDirection}`,initial:{scale:1},animate:{scale:[1,1.1,1]},transition:{duration:.3},children:["up"===p.priceDirection&&M.jsx(mn,{size:14}),"down"===p.priceDirection&&M.jsx(hn,{size:14}),M.jsx("span",{children:ji(p.change,p.changePercent).percent})]})]})]}),M.jsx("div",{className:"pnl-calculations",children:"buy"===g.type?M.jsxs(M.Fragment,{children:[M.jsxs("div",{className:"calc-row",children:[M.jsx("span",{className:"calc-label",children:"Investment Value:"}),M.jsx("span",{className:"calc-value",children:hi(g.orderValue)})]}),M.jsxs("div",{className:"calc-row",children:[M.jsx("span",{className:"calc-label",children:"Current Value:"}),M.jsx("span",{className:"calc-value",children:hi(g.currentValue)})]}),M.jsxs("div",{className:"calc-row highlight",children:[M.jsx("span",{className:"calc-label",children:"Unrealized P&L:"}),M.jsxs("span",{className:"calc-value "+(g.isProfit?"profit":"loss"),children:[g.isProfit?M.jsx(mn,{size:14}):M.jsx(hn,{size:14}),hi(Math.abs(g.unrealizedPnL)),M.jsxs("span",{className:"percent",children:["(",mi(g.unrealizedPnLPercent),")"]})]})]}),M.jsxs("div",{className:"calc-row",children:[M.jsx("span",{className:"calc-label",children:"Price Difference:"}),M.jsxs("span",{className:"calc-value "+(g.priceDiff>=0?"profit":"loss"),children:[hi(Math.abs(g.priceDiff)),M.jsxs("span",{className:"percent",children:["(",mi(g.priceDiffPercent),")"]})]})]})]}):M.jsxs(M.Fragment,{children:[M.jsxs("div",{className:"calc-row",children:[M.jsx("span",{className:"calc-label",children:"Invested Value:"}),M.jsx("span",{className:"calc-value",children:hi(g.investedValue)})]}),M.jsxs("div",{className:"calc-row",children:[M.jsx("span",{className:"calc-label",children:"Sale Value:"}),M.jsx("span",{className:"calc-value",children:hi(g.sellValue)})]}),M.jsxs("div",{className:"calc-row highlight",children:[M.jsx("span",{className:"calc-label",children:"Realized P&L:"}),M.jsxs("span",{className:"calc-value "+(g.isProfit?"profit":"loss"),children:[g.isProfit?M.jsx(mn,{size:14}):M.jsx(hn,{size:14}),hi(Math.abs(g.realizedPnL)),M.jsxs("span",{className:"percent",children:["(",mi(g.realizedPnLPercent),")"]})]})]}),M.jsxs("div",{className:"calc-row",children:[M.jsx("span",{className:"calc-label",children:"Opportunity Cost:"}),M.jsxs("span",{className:"calc-value "+(g.opportunityCost<=0?"profit":"loss"),children:[hi(Math.abs(g.opportunityCost)),M.jsxs("span",{className:"percent",children:["(",mi(g.opportunityCostPercent),")"]})]})]})]})}),M.jsx("div",{className:"pnl-recommendation",children:M.jsxs("div",{className:"recommendation-indicator",style:{color:(e=>{switch(e){case"favorable":case"good_timing":return"#10B981";case"unfavorable":case"consider_waiting":return"#EF4444";default:return"#6B7280"}})(g.recommendation)},children:[M.jsx(ft,{size:16}),M.jsx("span",{children:((e,t)=>{if("buy"===t)switch(e){case"favorable":return"Good entry point - price below market";case"unfavorable":return"Consider waiting - price above market";default:return"Price aligned with market"}else switch(e){case"good_timing":return"Good timing - selling above market";case"consider_waiting":return"Consider waiting - market price higher";default:return"Price aligned with market"}})(g.recommendation,g.type)})]})}),M.jsxs("div",{className:"break-even-info",children:[M.jsx(Vt,{size:14}),M.jsxs("span",{children:["Break-even: ",hi(g.breakEvenPrice)]})]}),m&&M.jsxs("div",{className:"last-update",children:[M.jsx(dt,{size:12}),M.jsxs("span",{children:["Updated: ",new Date(m).toLocaleTimeString()]})]})]},c)},ki=({stockData:e,orderType:t,portfolioData:s,currentPrice:a,onQuantitySelect:r,selectedQuantity:i,className:o=""})=>{const l=n.useMemo(()=>{if(!e||!a)return[];const n=[];if("buy"===t){const e=s.availableCash;[1,5,10,25,50,100,200,500].forEach(t=>{const s=t*a;s<=e&&s>=500&&n.push({type:"round",quantity:t,amount:s,label:`${t} shares`,description:"Round number",icon:dn,priority:2})});[1e3,2500,5e3,1e4,25e3,5e4].forEach(t=>{if(t<=e){const e=Math.floor(t/a);e>0&&n.push({type:"amount",quantity:e,amount:e*a,label:`₹${t.toLocaleString("en-IN")}`,description:`${e} shares`,icon:ft,priority:3})}});[10,25,50,75,100].forEach(t=>{const s=e*t/100,r=Math.floor(s/a);r>0&&s>=500&&n.push({type:"percentage",quantity:r,amount:r*a,label:`${t}%`,description:`${r} shares of available cash`,icon:Vt,priority:25===t||50===t?1:2})});const t=s.totalValue||0;if(t>0){[2,5,10].forEach(s=>{const r=t*s/100,i=Math.floor(r/a);i>0&&r<=e&&n.push({type:"diversification",quantity:i,amount:i*a,label:`${s}% of portfolio`,description:`${i} shares for diversification`,icon:Gt,priority:1})})}}else{const t=s.holdings.find(t=>t.symbol===e.symbol);if(!t||0===t.quantity)return[];const r=t.quantity,i=t.averagePrice||t.averageBuyPrice||0;[25,50,75,100].forEach(e=>{const t=Math.floor(r*e/100);if(t>0){const s=t*a,r=t*i,o=s-r,l=r>0?o/r*100:0;n.push({type:"profit",quantity:t,amount:s,label:`${e}% of holding`,description:`${t} shares • ${o>=0?"Profit":"Loss"}: ₹${Math.abs(o).toLocaleString("en-IN")}`,icon:o>=0?mn:nt,priority:o>=0?1:3,profitLoss:o,profitPercent:l})}});if([1,5,10,25,50,100].forEach(e=>{if(e<=r){const t=e*a,s=t-e*i;n.push({type:"round",quantity:e,amount:t,label:`${e} shares`,description:`${s>=0?"Profit":"Loss"}: ₹${Math.abs(s).toLocaleString("en-IN")}`,icon:dn,priority:2,profitLoss:s})}}),i>0&&a!==i){const e=Math.min(r,Math.floor(r/2));e>0&&n.push({type:"breakeven",quantity:e,amount:e*a,label:"Break-even",description:`${e} shares at current price`,icon:vn,priority:a>=i?1:3})}}return n.filter((e,t,n)=>t===n.findIndex(t=>t.quantity===e.quantity)).sort((e,t)=>e.priority!==t.priority?e.priority-t.priority:e.quantity-t.quantity).slice(0,8)},[e,t,s,a]);if(0===l.length)return null;l.reduce((e,t)=>{const n=t.type;return e[n]||(e[n]=[]),e[n].push(t),e},{});return M.jsxs("div",{className:`smart-quantity-suggestions ${o}`,children:[M.jsxs("div",{className:"suggestions-header",children:[M.jsx(on,{className:"suggestions-icon"}),M.jsx("span",{className:"suggestions-title",children:"Smart Suggestions"})]}),M.jsx("div",{className:"suggestions-grid",children:l.map((e,t)=>{const n=e.icon,s=i===e.quantity,a=(e=>{switch(e.type){case"percentage":case"diversification":return"#8B5CF6";case"amount":return"#10B981";case"profit":return e.profitLoss>=0?"#10B981":"#EF4444";case"round":return"#3B82F6";case"breakeven":return"#F59E0B";default:return"#6B7280"}})(e);return M.jsxs(y.button,{className:"suggestion-card "+(s?"selected":""),onClick:()=>r(e.quantity),initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.2,delay:.05*t},whileHover:{scale:1.02},whileTap:{scale:.98},style:{"--suggestion-color":a},children:[M.jsxs("div",{className:"suggestion-header",children:[M.jsx(n,{className:"suggestion-icon",size:16}),M.jsx("span",{className:"suggestion-label",children:e.label})]}),M.jsxs("div",{className:"suggestion-details",children:[M.jsx("div",{className:"suggestion-description",children:e.description}),M.jsxs("div",{className:"suggestion-amount",children:["₹",e.amount.toLocaleString("en-IN")]})]}),void 0!==e.profitLoss&&M.jsxs("div",{className:"profit-indicator "+(e.profitLoss>=0?"profit":"loss"),children:[e.profitLoss>=0?"+":"","₹",Math.abs(e.profitLoss).toLocaleString("en-IN"),void 0!==e.profitPercent&&M.jsxs("span",{className:"profit-percent",children:["(",e.profitPercent>=0?"+":"",e.profitPercent.toFixed(1),"%)"]})]}),1===e.priority&&M.jsxs("div",{className:"priority-badge",children:[M.jsx(on,{size:10}),"Recommended"]})]},`${e.type}-${e.quantity}`)})}),M.jsx("div",{className:"suggestions-footer",children:M.jsx("span",{className:"suggestions-note",children:"Suggestions based on your portfolio and market conditions"})})]})},Ni=({isOpen:e,onClose:t,stockData:s=null,initialOrderType:a="buy",onOrderPlaced:r,onShowConfirmation:i})=>{var o,l;const[c,d]=n.useState(a),[u,h]=n.useState("market"),[m,p]=n.useState(1),[f,x]=n.useState(""),[v,b]=n.useState(!1),[j,w]=n.useState(!1),{portfolioData:k,buyStock:N,sellStock:S}=ci(),{user:C}=oe(e=>e.auth),T=document.documentElement.getAttribute("data-theme")||"light",{validationErrors:P,profitLossEstimate:E,isValidating:L,isValid:I,getOrderSummary:A}=((e,t,s,a,r)=>{const[i,o]=n.useState({}),[l,c]=n.useState(null),[d,u]=n.useState(!1),[h,m]=n.useState(!1),{portfolioData:p}=ci(),{user:f}=oe(e=>e.auth),g=n.useCallback(async()=>{if(!e)return o({stock:"Please select a stock"}),m(!1),!1;u(!0);const n={};try{(!s||s<=0)&&(n.quantity="Quantity must be greater than 0"),"limit"===r&&(!a||parseFloat(a)<=0)&&(n.price="Please enter a valid limit price");const i="market"===r?e.price:parseFloat(a)||0,l=s*i,c=b(l),d="buy"===t?l+c:l-c;return"buy"===t?await y(n,l,d,e):await x(n,s,i,e),"limit"===r&&i>0&&v(n,i,e.price,t),o(n),m(0===Object.keys(n).length),0===Object.keys(n).length}catch(i){return o({general:"Validation failed. Please try again."}),m(!1),!1}finally{u(!1)}},[e,t,s,a,r,p]),y=async(e,t,n,a)=>{n>p.availableCash&&(e.funds=`Insufficient funds. Available: ₹${p.availableCash.toLocaleString("en-IN")}, Required: ₹${n.toLocaleString("en-IN")}`),t<500&&(e.minOrder="Minimum order value is ₹500"),t>1e5&&(e.maxOrder="Maximum order value is ₹1,00,000"),a.volume&&a.volume<s&&(e.availability="Requested quantity exceeds available volume")},x=async(e,t,n,s)=>{const a=p.holdings.find(e=>e.symbol===s.symbol);if(!a)return void(e.shares="You do not own any shares of this stock");if(a.quantity<t)return void(e.shares=`Insufficient shares. Available: ${a.quantity}, Requested: ${t}`);const r=t*n,i=a.averagePrice||a.averageBuyPrice,o=t*i,l=r-o;c({amount:l,percentage:o>0?l/o*100:0,isProfit:l>=0,sellValue:r,buyValue:o,avgBuyPrice:i}),r<100&&(e.minSell="Minimum sell value is ₹100")},v=(e,t,n,s)=>{const a=Math.abs(t-n)/n*100;a>20&&(e.priceRange=`Limit price is ${a.toFixed(1)}% away from market price. Consider adjusting.`),"buy"===s&&t>1.1*n&&(e.buyPriceHigh="Limit price is significantly higher than market price"),"sell"===s&&t<.9*n&&(e.sellPriceLow="Limit price is significantly lower than market price")},b=e=>{const t=3e-4*e,n=.001*e,s=345e-7*e,a=.18*(t+s),r=1e-6*e,i=3e-5*e;return{brokerage:t,stt:n,exchangeCharges:s,gst:a,sebiCharges:r,stampDuty:i,total:t+n+s+a+r+i}},j=n.useCallback(()=>{if(!e||!s)return{grossAmount:0,fees:{total:0},netAmount:0,pricePerShare:0};const n="market"===r?e.price:parseFloat(a)||0,i=s*n,o=b(i);return{grossAmount:i,fees:o,netAmount:"buy"===t?i+o.total:i-o.total,pricePerShare:n,quantity:s}},[e,s,a,r,t]);return n.useEffect(()=>{const e=setTimeout(()=>{g()},300);return()=>clearTimeout(e)},[g]),n.useEffect(()=>{e&&(o({}),c(null),m(!1))},[null==e?void 0:e.symbol]),{validationErrors:i,profitLossEstimate:l,isValidating:d,isValid:h,validateOrder:g,getOrderSummary:j,calculateTradingFees:b}})(s,c,m,f,u),{stockData:O,isLoading:D,refreshStockData:R,isMarketOpen:_}=((e,t=!0)=>{const[s,a]=n.useState(null),[r,i]=n.useState(!1),[o,l]=n.useState(null),[c,d]=n.useState(!1),u=n.useCallback(async e=>{if(!e||!t)return a(null),d(!1),void l(null);i(!0),l(null);try{if(!(await h(e)))return d(!1),l(`Invalid stock symbol: ${e}`),void a(null);const t=await p(e);t?(a(t),d(!0),l(null)):(d(!1),l("Failed to fetch stock data"),a(null))}catch(n){l(n.message||"Failed to validate stock"),d(!1),a(null)}finally{i(!1)}},[t]),h=async e=>{try{const t=/^[0-9]{6}$/;if(!/^[A-Z0-9&-]{1,20}$/.test(e)&&!t.test(e))return!1;const n=await fetch(`https://s89-satya-capstone-tradebro.onrender.com/api/stocks/validate/${e}`,{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}});return n.ok?(await n.json()).isValid:m(e)}catch(t){return m(e)}},m=e=>["RELIANCE","TCS","HDFCBANK","INFY","HINDUNILVR","ICICIBANK","KOTAKBANK","BHARTIARTL","ITC","SBIN","BAJFINANCE","ASIANPAINT","MARUTI","AXISBANK","LT","DMART","SUNPHARMA","TITAN","ULTRACEMCO","NESTLEIND","WIPRO","TECHM","POWERGRID","NTPC","ONGC","TATAMOTORS","BAJAJFINSV","HCLTECH","COALINDIA","DRREDDY","EICHERMOT","ADANIPORTS","JSWSTEEL","TATASTEEL","GRASIM","CIPLA","BRITANNIA","DIVISLAB","APOLLOHOSP","BPCL","HEROMOTOCO","SHREECEM","PIDILITIND","DABUR"].includes(e.toUpperCase()),p=async e=>{try{const t=await fetch(`https://s89-satya-capstone-tradebro.onrender.com/api/stocks/quote/${e}`,{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}});if(t.ok){const e=await t.json();return{symbol:e.symbol,name:e.name||e.symbol,price:e.price||e.c||0,change:e.change||e.d||0,changePercent:e.changePercent||e.dp||0,volume:e.volume||e.v||0,high:e.high||e.h||0,low:e.low||e.l||0,open:e.open||e.o||0,previousClose:e.previousClose||e.pc||0,marketCap:e.marketCap||0,pe:e.pe||0,lastUpdated:(new Date).toISOString()}}return f(e)}catch(t){return f(e)}},f=e=>{const t=2e3*Math.random()+100,n=100*(Math.random()-.5),s=n/t*100;return{symbol:e.toUpperCase(),name:`${e.toUpperCase()} Limited`,price:parseFloat(t.toFixed(2)),change:parseFloat(n.toFixed(2)),changePercent:parseFloat(s.toFixed(2)),volume:Math.floor(1e6*Math.random()),high:parseFloat((t+Math.abs(n)).toFixed(2)),low:parseFloat((t-Math.abs(n)).toFixed(2)),open:parseFloat((t-n).toFixed(2)),previousClose:parseFloat((t-n).toFixed(2)),marketCap:Math.floor(1e12*Math.random()),pe:parseFloat((50*Math.random()+5).toFixed(2)),lastUpdated:(new Date).toISOString()}},g=n.useCallback(()=>{if(!s||!t)return;const e=setInterval(async()=>{try{const e=await p(s.symbol);e&&a(t=>({...t,...e,lastUpdated:(new Date).toISOString()}))}catch(e){}},3e4);return()=>clearInterval(e)},[s,t]);n.useEffect(()=>{const t=setTimeout(()=>{e&&e.length>=2?u(e):(a(null),d(!1),l(null))},500);return()=>clearTimeout(t)},[e,u]),n.useEffect(()=>{if(s&&t)return g()},[s,t,g]);const y=n.useCallback(async()=>{s&&await u(s.symbol)},[s,u]),x=n.useCallback(()=>s?s.change>0?"positive":s.change<0?"negative":"neutral":"neutral",[s]),v=n.useCallback(()=>{const e=new Date,t=e.getDay(),n=100*e.getHours()+e.getMinutes();return 0!==t&&6!==t&&n>=915&&n<=1530},[]);return{stockData:s,isLoading:r,error:o,isValidSymbol:c,refreshStockData:y,getPriceTrend:x,isMarketOpen:v(),validateAndFetchStock:u}})(null==s?void 0:s.symbol,e),F=O||s;n.useEffect(()=>{var t;e&&F&&(x((null==(t=F.price)?void 0:t.toString())||""),p(1))},[e,F]),n.useEffect(()=>{if(e&&(null==F?void 0:F.symbol)){const e=setInterval(()=>{R()},3e4);return()=>clearInterval(e)}},[e,null==F?void 0:F.symbol,R]);const B=A(),z=e=>{const t=Math.max(1,m+e);p(t)},U=async()=>{w(!0);try{const n="market"===u?F.price:parseFloat(f),s=yi.pending(c,F.symbol,m,T);let a;if(a="buy"===c?await N(F.symbol,m,n,F):await S(F.symbol,m,n,F),e=s,qe.dismiss(e),!a.success)throw new Error(a.error||"Order failed");if("buy"===c)yi.buySuccess(F.symbol,m,n,T);else{const e=E?E.amount:0;yi.sellSuccess(F.symbol,m,n,e,T)}(null==k?void 0:k.refreshPortfolio)&&k.refreshPortfolio(),null==r||r(),t()}catch(n){yi.error("Order failed",n.message||"An unexpected error occurred",T)}finally{w(!1)}var e};return e?M.jsx(g,{children:M.jsx(y.div,{className:"order-modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e=>e.target===e.currentTarget&&t(),children:M.jsxs(y.div,{className:"order-modal",initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{duration:.3,ease:[.4,0,.2,1]},children:[M.jsxs("div",{className:"order-modal-header",children:[M.jsxs("h2",{className:"order-modal-title",children:[M.jsx(an,{}),"buy"===c?"Buy Order":"Sell Order"]}),M.jsx("button",{className:"order-modal-close",onClick:t,children:M.jsx(xn,{size:20})})]}),M.jsxs("div",{className:"order-modal-body",children:[F&&M.jsxs("div",{className:"order-stock-info",children:[M.jsxs("div",{className:"order-stock-details",children:[M.jsx("h3",{children:F.symbol}),M.jsx("p",{children:F.name||F.symbol}),!_&&M.jsxs("span",{className:"market-closed-indicator",children:[M.jsx(dt,{size:12}),"Market Closed"]})]}),M.jsxs("div",{className:"order-stock-price",children:[M.jsx(ui,{price:F.price,change:F.change,changePercent:F.changePercent,size:"large"}),D&&M.jsxs("div",{className:"price-loading",children:[M.jsx("div",{className:"loading-spinner"}),"Updating..."]})]})]}),M.jsxs("div",{className:"order-form-section",children:[M.jsxs("h3",{className:"section-title",children:[M.jsx(Ve,{}),"Order Type"]}),M.jsxs("div",{className:"order-type-toggle",children:[M.jsxs("button",{className:"order-type-btn "+("buy"===c?"active buy":""),onClick:()=>d("buy"),children:[M.jsx(mn,{}),"Buy"]}),M.jsxs("button",{className:"order-type-btn "+("sell"===c?"active sell":""),onClick:()=>d("sell"),children:[M.jsx(hn,{}),"Sell"]})]})]}),M.jsx("div",{className:"order-form-section",children:M.jsxs("div",{className:"order-method-select",children:[M.jsx("label",{htmlFor:"order-method",children:"Order Method"}),M.jsxs("select",{id:"order-method",value:u,onChange:e=>h(e.target.value),children:[M.jsx("option",{value:"market",children:"Market Order"}),M.jsx("option",{value:"limit",children:"Limit Order"})]})]})}),M.jsxs("div",{className:"order-form-section",children:[M.jsxs("div",{className:"order-inputs-grid",children:[M.jsxs("div",{className:"order-input-group full-width",children:[M.jsx("label",{children:"Quantity"}),M.jsx(ki,{stockData:F,orderType:c,portfolioData:k,currentPrice:"market"===u?(null==F?void 0:F.price)||0:parseFloat(f)||0,onQuantitySelect:p,selectedQuantity:m}),M.jsx("div",{className:"quantity-options",children:(()=>{if(!F)return[];const e="market"===u?F.price:parseFloat(f)||F.price;if("buy"===c){const t=k.availableCash,n=[];[1e3,2500,5e3,1e4].forEach(s=>{const a=Math.floor(s/e);a>0&&s<=t&&n.push({value:a,label:`${a} shares`,amount:a*e,disabled:!1})});return[25,50,75,100].forEach(s=>{const a=t*s/100,r=Math.floor(a/e);r>0&&!n.find(e=>e.value===r)&&n.push({value:r,label:`${s}% (${r})`,amount:r*e,disabled:!1})}),n.sort((e,t)=>e.value-t.value).slice(0,6).map(e=>({...e,disabled:e.amount>t}))}{const t=k.holdings.find(e=>e.symbol===F.symbol);if(!t||0===t.quantity)return[];const n=t.quantity,s=[];[1,5,10,25,50,100].forEach(t=>{t<=n&&s.push({value:t,label:`${t} shares`,amount:t*e,disabled:!1})});return[25,50,75,100].forEach(t=>{const a=Math.floor(n*t/100);a>0&&!s.find(e=>e.value===a)&&s.push({value:a,label:`${t}% (${a})`,amount:a*e,disabled:!1})}),s.find(e=>e.value===n)||s.push({value:n,label:`All (${n})`,amount:n*e,disabled:!1}),s.sort((e,t)=>e.value-t.value).slice(0,6)}})().map(e=>M.jsxs("button",{className:"quantity-option-btn "+(m===e.value?"active":""),onClick:()=>p(e.value),disabled:e.disabled,children:[M.jsx("span",{className:"option-value",children:e.label}),M.jsxs("span",{className:"option-amount",children:["₹",(e.value*("market"===u?(null==F?void 0:F.price)||0:parseFloat(f)||0)).toLocaleString("en-IN")]})]},e.value))}),M.jsxs("div",{className:"order-quantity-control",children:[M.jsx("button",{className:"qty-control-btn",onClick:()=>z(-1),disabled:m<=1,children:M.jsx(Ut,{})}),M.jsx("input",{type:"number",className:"qty-control-input",value:m,onChange:e=>p(Math.max(1,parseInt(e.target.value)||1)),min:"1",placeholder:"Enter quantity"}),M.jsx("button",{className:"qty-control-btn",onClick:()=>z(1),children:M.jsx(Qt,{})})]}),M.jsxs("div",{className:"investment-amount-display",children:[M.jsx("span",{className:"investment-label",children:"Investment Amount:"}),M.jsxs("span",{className:"investment-value",children:["₹",(m*("market"===u?(null==F?void 0:F.price)||0:parseFloat(f)||0)).toLocaleString("en-IN")]})]}),P.quantity&&M.jsx("span",{className:"error-text",children:P.quantity})]}),"limit"===u&&M.jsxs("div",{className:"order-input-group",children:[M.jsx("label",{children:"Limit Price (₹)"}),M.jsx("input",{type:"number",className:"order-price-input",value:f,onChange:e=>x(e.target.value),placeholder:"Enter limit price",step:"0.01"}),P.price&&M.jsx("span",{className:"error-text",children:P.price})]})]}),P.funds&&M.jsxs("div",{className:"error-message",children:[M.jsx(Ge,{}),P.funds]}),P.shares&&M.jsxs("div",{className:"error-message",children:[M.jsx(Ge,{}),P.shares]})]}),F&&m>0&&("market"===u||f)&&M.jsx("div",{className:"order-form-section",children:M.jsx(wi,{stockData:F,orderType:c,quantity:m,orderPrice:"market"===u?F.price:parseFloat(f)||0,averagePrice:"sell"===c?null==(o=k.holdings.find(e=>e.symbol===F.symbol))?void 0:o.averagePrice:null})}),M.jsx("div",{className:"order-form-section",children:M.jsxs("div",{className:"order-summary-card",children:[M.jsxs("h3",{className:"order-summary-title",children:[M.jsx(ft,{}),"Order Summary"]}),M.jsxs("div",{className:"summary-row",children:[M.jsx("span",{className:"summary-label",children:"Quantity:"}),M.jsxs("span",{className:"summary-value",children:[m," shares"]})]}),M.jsxs("div",{className:"summary-row",children:[M.jsx("span",{className:"summary-label",children:"Price per share:"}),M.jsx("span",{className:"summary-value",children:pi(B.pricePerShare)})]}),M.jsxs("div",{className:"summary-row",children:[M.jsx("span",{className:"summary-label",children:"Gross amount:"}),M.jsx("span",{className:"summary-value",children:hi(B.grossAmount)})]}),M.jsxs("div",{className:"summary-row",children:[M.jsx("span",{className:"summary-label",children:"Fees & charges:"}),M.jsx("span",{className:"summary-value",children:hi(B.fees.total)})]}),M.jsxs("div",{className:"summary-row total",children:[M.jsx("span",{className:"summary-label",children:"Net amount:"}),M.jsx("span",{className:"summary-value",children:hi(B.netAmount)})]}),E&&M.jsxs("div",{className:"profit-loss-indicator "+(E.isProfit?"profit":"loss"),children:[E.isProfit?M.jsx(mn,{}):M.jsx(hn,{}),"Estimated ",E.isProfit?"Profit":"Loss",":",hi(Math.abs(E.amount)),"(",mi(E.percentage),")"]})]})}),M.jsxs("div",{className:"confirm-checkbox",children:[M.jsx("input",{type:"checkbox",id:"confirm-checkbox",checked:v,onChange:e=>b(e.target.checked)}),M.jsxs("label",{htmlFor:"confirm-checkbox",children:["I confirm that I want to place this ",c," order"]})]}),M.jsxs("div",{className:"order-modal-actions",children:[M.jsx("button",{className:"order-action-btn cancel",onClick:t,disabled:j,children:"Cancel"}),M.jsx("button",{className:"order-action-btn "+("buy"===c?"place-buy":"place-sell"),onClick:()=>{!I||v&&!document.getElementById("confirm-checkbox").checked||i&&i({orderData:{orderType:c,orderMethod:u,quantity:m,limitPrice:f},stockData:F,orderSummary:B,profitLossEstimate:E,onConfirm:U})},disabled:j||!I||L||v&&!(null==(l=document.getElementById("confirm-checkbox"))?void 0:l.checked),children:j?M.jsxs(M.Fragment,{children:[M.jsx("div",{className:"loading-spinner"}),"Placing Order..."]}):`Place ${"buy"===c?"Buy":"Sell"} Order`})]})]})]})})}):null},Si=({isOpen:e,onClose:t,onConfirm:s,orderData:r,stockData:i,orderSummary:o,profitLossEstimate:l,isProcessing:c=!1})=>{const[d,u]=n.useState("details"),[h,m]=n.useState(0),[p,f]=n.useState(!1),x=n.useRef(null),{portfolioData:v}=ci(),b=a.useMemo(()=>{if("sell"===(null==r?void 0:r.orderType)&&i&&(null==v?void 0:v.holdings)){const e=v.holdings.find(e=>e.symbol===i.symbol);if(e){const t=i.price||0,n=e.averagePrice||0,s=e.quantity||0,a=n*s,r=t*s,o=r-a,l=a>0?o/a*100:0;return{...e,currentPrice:t,buyPrice:n,totalInvested:a,currentValue:r,totalGainLoss:o,gainLossPercentage:l,isProfit:o>=0}}}return null},[r,i,v]);a.useMemo(()=>{if(b){const e=20,t=b.currentPrice-b.buyPrice,n=[];for(let s=0;s<=e;s++){const a=s/e,r=b.buyPrice+t*a,i=r*b.quantity;n.push({time:Date.now()-24*(e-s)*60*60*1e3,price:r,value:i})}return n}return[]},[b]),n.useEffect(()=>{e&&(u("details"),m(0),f(!1))},[e]);const j=e=>{f(!0);const t=e.touches?e.touches[0].clientX:e.clientX,n=x.current;if(!n)return;const a=n.getBoundingClientRect().width-60,r=e=>{const n=e.touches?e.touches[0].clientX:e.clientX,s=Math.max(0,Math.min(a,n-t));m(s/a*100)},i=()=>{h>80?(u("processing"),s()):m(0),f(!1),document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",i),document.removeEventListener("touchmove",r),document.removeEventListener("touchend",i)};document.addEventListener("mousemove",r),document.addEventListener("mouseup",i),document.addEventListener("touchmove",r),document.addEventListener("touchend",i)};if(!e||!r||!i)return null;const{orderType:w,orderMethod:k,quantity:N,limitPrice:S}=r,C="market"===k?i.price:parseFloat(S),T="buy"===w;return M.jsx(g,{mode:"wait",children:e&&M.jsx(y.div,{className:"enhanced-confirmation-overlay app-level-modal",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e=>e.target===e.currentTarget&&t(),"data-modal-level":"app",children:M.jsxs(y.div,{className:"enhanced-confirmation-modal",initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{duration:.3,ease:[.4,0,.2,1]},children:[M.jsx(y.button,{className:"enhanced-modal-close",onClick:t,whileHover:{scale:1.1},whileTap:{scale:.9},children:M.jsx(xn,{size:24})}),"details"===d&&M.jsxs(y.div,{className:"modal-content",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:[M.jsxs("div",{className:"stock-header",children:[M.jsxs("div",{className:"stock-info",children:[M.jsx("h1",{className:"stock-symbol",children:i.symbol}),M.jsx("p",{className:"stock-name",children:i.name}),M.jsx("div",{className:"stock-exchange-badge",children:"NSE"})]}),M.jsxs("div",{className:"stock-price",children:[M.jsx("span",{className:"current-price",children:hi(C)}),M.jsxs("div",{className:"price-change "+(i.change>=0?"positive":"negative"),children:[i.change>=0?M.jsx(mn,{}):M.jsx(hn,{}),M.jsxs("span",{children:[hi(Math.abs(i.change))," (",mi(Math.abs(i.changePercent)),")"]})]})]})]}),M.jsxs("div",{className:"order-details",children:[M.jsxs("h3",{className:"section-title",children:[M.jsx(ft,{}),"Order Details"]}),M.jsxs("div",{className:"detail-grid",children:[M.jsxs("div",{className:"detail-item",children:[M.jsx("span",{className:"label",children:"Order Type:"}),M.jsx("span",{className:"value "+(T?"buy":"sell"),children:T?"BUY":"SELL"})]}),M.jsxs("div",{className:"detail-item",children:[M.jsx("span",{className:"label",children:"Quantity:"}),M.jsxs("span",{className:"value",children:[N," shares"]})]}),M.jsxs("div",{className:"detail-item",children:[M.jsx("span",{className:"label",children:"Price:"}),M.jsx("span",{className:"value",children:hi(C)})]}),M.jsxs("div",{className:"detail-item",children:[M.jsx("span",{className:"label",children:"Total Amount:"}),M.jsx("span",{className:"value total",children:hi(C*N)})]})]})]}),!T&&b&&M.jsxs("div",{className:"profit-loss-analysis",children:[M.jsxs("h3",{className:"section-title",children:[M.jsx(nt,{}),"Profit & Loss Analysis"]}),M.jsxs("div",{className:"pnl-summary",children:[M.jsxs("div",{className:"pnl-item",children:[M.jsx("span",{className:"label",children:"Buy Price:"}),M.jsx("span",{className:"value",children:hi(b.buyPrice)})]}),M.jsxs("div",{className:"pnl-item",children:[M.jsx("span",{className:"label",children:"Current Price:"}),M.jsx("span",{className:"value",children:hi(b.currentPrice)})]}),M.jsxs("div",{className:"pnl-item",children:[M.jsx("span",{className:"label",children:"Total Invested:"}),M.jsx("span",{className:"value",children:hi(b.totalInvested)})]}),M.jsxs("div",{className:"pnl-item total",children:[M.jsxs("span",{className:"label",children:["Total ",b.isProfit?"Profit":"Loss",":"]}),M.jsxs("span",{className:"value "+(b.isProfit?"profit":"loss"),children:[b.isProfit?"+":"",hi(b.totalGainLoss),"(",b.isProfit?"+":"",mi(b.gainLossPercentage),")"]})]})]})]}),M.jsx("div",{className:"slide-to-confirm",children:M.jsxs("div",{ref:x,className:"slide-container",children:[M.jsx("div",{className:"slide-track",style:{background:`linear-gradient(to right, ${T?"#10B981":"#EF4444"} ${h}%, #E5E7EB ${h}%)`},children:M.jsx(y.div,{className:"slide-button",style:{left:`${h}%`},onMouseDown:j,onTouchStart:j,whileHover:{scale:1.05},whileTap:{scale:.95},children:M.jsx(Xe,{})})}),M.jsxs("span",{className:"slide-text",children:["Slide to ",T?"Buy":"Sell"]})]})})]}),"processing"===d&&M.jsxs(y.div,{className:"processing-content",initial:{opacity:0},animate:{opacity:1},children:[M.jsx("div",{className:"processing-animation",children:M.jsx(y.div,{className:"spinner",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}})}),M.jsx("h2",{children:"Processing Order..."}),M.jsxs("p",{children:["Please wait while we execute your ",T?"buy":"sell"," order"]})]}),"success"===d&&M.jsxs(y.div,{className:"success-content",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},children:[M.jsx(y.div,{className:"success-icon",initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:300},children:M.jsx(lt,{})}),M.jsx("h2",{children:"Order Confirmed!"}),M.jsxs("p",{children:["Your ",T?"buy":"sell"," order has been successfully placed"]}),M.jsx(y.button,{className:"success-button",onClick:t,whileHover:{scale:1.05},whileTap:{scale:.95},children:"Done"})]})]})})})},Ci=(e,t="manual")=>e?{symbol:e.symbol||e.ticker||e.stockSymbol,name:e.name||e.companyName||e.longName||e.symbol,price:e.price||e.currentPrice||e.close||e.regularMarketPrice||0,change:e.change||e.priceChange||e.regularMarketChange||0,changePercent:e.changePercent||e.percentChange||e.regularMarketChangePercent||0,volume:e.volume||e.regularMarketVolume||0,marketCap:e.marketCap||0,sector:e.sector||e.sectorName||"",industry:e.industry||"",source:t,timestamp:(new Date).toISOString(),...e}:null,Ti=()=>{const[e,t]=n.useState({isOpen:!1,stockData:null,orderType:"buy",source:null}),s=o(),a=n.useCallback((e,n="buy",s="manual")=>{const a=Ci(e,s);t({isOpen:!0,stockData:a,orderType:n,source:s})},[]),r=n.useCallback(()=>{t({isOpen:!1,stockData:null,orderType:"buy",source:null})},[]),i=n.useCallback(async(e,t=1)=>{try{const n=Ci(e);if(!n)throw new Error("Invalid stock data");const s=await oi.buyStock(n.symbol,t,n.price,"market");return s.success?(qe.success(s.message),{success:!0,data:s.data}):(qe.error(s.error),{success:!1,error:s.error})}catch(n){return qe.error(n.message||"Failed to buy stock"),{success:!1,error:n.message}}},[]),l=n.useCallback(async(e,t=1)=>{try{const n=Ci(e);if(!n)throw new Error("Invalid stock data");const s=await oi.sellStock(n.symbol,t,n.price,"market");return s.success?(qe.success(s.message),{success:!0,data:s.data}):(qe.error(s.error),{success:!1,error:s.error})}catch(n){return qe.error(n.message||"Failed to sell stock"),{success:!1,error:n.message}}},[]),c=n.useCallback((e,t="buy")=>{const n=e.symbol||e.stockSymbol;s(`/trading?symbol=${n}&type=${t}`)},[s]),d=n.useCallback(e=>{const t={symbol:e.symbol,name:e.name||e.symbol,price:e.price||e.close||e.c,change:e.change||e.d||0,changePercent:e.changePercent||e.dp||0,volume:e.volume||e.v||0,high:e.high||e.h||0,low:e.low||e.l||0,open:e.open||e.o||0,source:"chart"};a(t,"buy","chart")},[a]),u=n.useCallback((e,t="buy")=>{const n={symbol:e.symbol||e.stockSymbol,name:e.name||e.stockName||e.symbol,price:e.price||e.currentPrice||0,change:e.change||e.dayChange||0,changePercent:e.changePercent||e.dayChangePercent||0,volume:e.volume||0,high:e.high||e.dayHigh||0,low:e.low||e.dayLow||0,open:e.open||0,source:"watchlist"};a(n,t,"watchlist")},[a]),h=n.useCallback((e,t="sell")=>{const n={symbol:e.symbol||e.stockSymbol,name:e.name||e.stockName||e.symbol,price:e.currentPrice||e.price||0,change:e.dayChange||e.change||0,changePercent:e.dayChangePercent||e.changePercent||0,volume:e.volume||0,high:e.dayHigh||e.high||0,low:e.dayLow||e.low||0,open:e.open||0,averagePrice:e.averagePrice||e.averageBuyPrice||0,quantity:e.quantity||0,totalValue:e.totalValue||e.currentValue||0,totalGains:e.totalGains||e.gainLoss||0,gainsPercent:e.gainsPercent||e.gainLossPercentage||0,source:"portfolio"};a(n,t,"portfolio")},[a]),m=n.useCallback((e,t="buy")=>{const n={symbol:e.symbol||e.ticker,name:e.name||e.companyName||e.symbol,price:e.price||e.lastPrice||0,change:e.change||e.priceChange||0,changePercent:e.changePercent||e.percentChange||0,volume:e.volume||e.totalVolume||0,high:e.high||e.dayHigh||0,low:e.low||e.dayLow||0,open:e.open||e.openPrice||0,source:"market"};a(n,t,"market")},[a]),p=n.useCallback((e,t="buy")=>{if(e.length>0){const n=e[0],s={...Ci(n,"bulk"),bulkList:e,source:"bulk"};a(s,t,"bulk")}},[a]),f=n.useCallback(e=>[{label:"Quick Buy",icon:"FiTrendingUp",action:()=>i(e),color:"green"},{label:"Quick Sell",icon:"FiTrendingDown",action:()=>l(e),color:"red",disabled:!Pi(e.symbol)},{label:"View Chart",icon:"FiBarChart2",action:()=>s(`/charts?symbol=${e.symbol}`),color:"blue"},{label:"Add to Watchlist",icon:"FiBookmark",action:()=>Ei(e),color:"purple"}],[i,l,s]);return{orderModalState:e,openOrderModal:a,closeOrderModal:r,navigateToTrading:c,handleChartStockClick:d,handleWatchlistStockClick:u,handlePortfolioStockClick:h,handleMarketDataClick:m,quickBuy:i,quickSell:l,handleBulkOrder:p,getContextMenuActions:f}},Pi=e=>!0,Ei=e=>{},Li=(e,t={})=>{const{enableProfiling:s=!1,cacheSize:a=100,debounceDelay:r=300,throttleDelay:i=1e3}=t,o=n.useRef(0),l=n.useRef(Date.now()),c=n.useRef(new bi(a)),d=vi();n.useEffect(()=>{o.current+=1;const e=Date.now();l.current;l.current=e});return{debounce:n.useCallback((e,t=r)=>((e,t)=>{let n;return(...s)=>{clearTimeout(n),n=setTimeout(()=>e.apply(null,s),t)}})(e,t),[r]),throttle:n.useCallback((e,t=i)=>((e,t)=>{let n;return(...s)=>{n||(e.apply(null,s),n=!0,setTimeout(()=>n=!1,t))}})(e,t),[i]),cache:n.useMemo(()=>({get:e=>c.current.get(e),set:(e,t)=>c.current.set(e,t),clear:()=>c.current.clear(),size:()=>c.current.size()}),[]),getMetrics:n.useCallback(()=>({renderCount:o.current,lastRenderTime:l.current,cacheSize:c.current.size(),componentName:e}),[e]),cleanupManager:d}};const Ii=new class{constructor(){this.listeners=new Set,this.currentBalance=1e4,this.isInitialized=!1}async initialize(){if(!this.isInitialized)try{const e=oi.getPortfolioSummary();this.currentBalance=e.availableCash,oi.addListener(this.handleTradingServiceUpdate.bind(this)),window.addEventListener("balanceUpdated",this.handleBalanceUpdate.bind(this)),this.isInitialized=!0}catch(e){}}handleTradingServiceUpdate(e){const t=e.availableCash;t!==this.currentBalance&&(this.currentBalance=t,this.notifyListeners())}handleBalanceUpdate(e){const{newBalance:t}=e.detail;t!==this.currentBalance&&(this.currentBalance=t,this.notifyListeners())}getCurrentBalance(){return this.currentBalance}getFormattedBalance(){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2,maximumFractionDigits:2}).format(this.currentBalance)}async updateBalance(e,t="manual"){const n=this.currentBalance;this.currentBalance=e,oi.virtualBalance=e,oi.savePortfolioToStorage(),oi.notifyListeners(),await this.syncWithServer(),this.notifyListeners(),window.dispatchEvent(new CustomEvent("balanceUpdated",{detail:{newBalance:e,oldBalance:n,change:e-n,source:t}}))}async syncWithServer(){try{const e=localStorage.getItem("token");if(!e)return;(await fetch("https://s89-satya-capstone-tradebro.onrender.com/api/virtual-money/sync-balance",{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({balance:this.currentBalance,totalRewards:oi.dailyRewards.totalRewards,loginStreak:oi.dailyRewards.loginStreak,lastClaimDate:oi.dailyRewards.lastClaimDate})})).ok}catch(e){}}addListener(e){return this.listeners.add(e),e({balance:this.currentBalance,formattedBalance:this.getFormattedBalance()}),()=>this.listeners.delete(e)}removeListener(e){this.listeners.delete(e)}notifyListeners(){const e={balance:this.currentBalance,formattedBalance:this.getFormattedBalance()};this.listeners.forEach(t=>{try{t(e)}catch(n){}})}async forceRefresh(){try{oi.getPortfolioSummary();const e=localStorage.getItem("token");if(e){const t=await fetch("https://s89-satya-capstone-tradebro.onrender.com/api/virtual-money/account",{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(t.ok){const e=(await t.json()).data.balance;this.currentBalance=e,oi.virtualBalance=e,oi.savePortfolioToStorage()}}this.notifyListeners()}catch(e){}}cleanup(){this.listeners.clear(),window.removeEventListener("balanceUpdated",this.handleBalanceUpdate.bind(this)),this.isInitialized=!1}},Ai=({isAuthenticated:e=!1,user:t=null,theme:s="light",onToggleTheme:a=()=>{},onLogin:r=()=>{},onSignup:i=()=>{}})=>{const[o,d]=n.useState(!1),[u,h]=n.useState(!1),m=l();n.useEffect(()=>{const e=()=>{h(window.scrollY>20)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]),n.useEffect(()=>{d(!1)},[m.pathname]);const p=()=>{d(!o)},f=[{name:"Features",href:"#features",external:!1},{name:"How it Works",href:"#how-it-works",external:!1},{name:"AI Demo",href:"#ai-demo",external:!1}],x=e=>{if(e.startsWith("#")){const t=document.querySelector(e);t&&t.scrollIntoView({behavior:"smooth"})}};return M.jsxs(y.header,{className:`tradebro-header ${u?"scrolled":""} ${s}`,initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6},children:[M.jsxs("div",{className:"header-container",children:[M.jsx(y.div,{className:"header-logo",whileHover:{scale:1.02},transition:{type:"spring",stiffness:400,damping:17},children:M.jsx(c,{to:"/",className:"logo-link",children:M.jsxs("div",{className:"logo-text",children:[M.jsx("span",{className:"logo-main",children:"TradeBro"}),M.jsx("span",{className:"logo-tagline",children:"AI Trading Platform"})]})})}),M.jsx("nav",{className:"header-nav desktop-nav",children:f.map((e,t)=>M.jsx(y.button,{className:"nav-item",onClick:()=>x(e.href),whileHover:{scale:1.05},whileTap:{scale:.95},initial:{opacity:0,y:-10},animate:{opacity:1,y:0},transition:{duration:.3,delay:.1*t},children:e.name},e.name))}),M.jsxs("div",{className:"header-actions",children:[M.jsx(y.button,{className:"theme-toggle",onClick:a,whileHover:{scale:1.1},whileTap:{scale:.9},"aria-label":"Toggle theme",children:M.jsx(g,{mode:"wait",children:"dark"===s?M.jsx(y.div,{initial:{rotate:-90,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:90,opacity:0},transition:{duration:.2},children:M.jsx(ln,{})},"sun"):M.jsx(y.div,{initial:{rotate:90,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:-90,opacity:0},transition:{duration:.2},children:M.jsx(Ht,{})},"moon")})}),e?M.jsx(y.div,{className:"user-profile",whileHover:{scale:1.05},transition:{type:"spring",stiffness:400,damping:17},children:M.jsxs(c,{to:"/dashboard",className:"profile-link",children:[M.jsx("div",{className:"profile-avatar",children:(null==t?void 0:t.profilePicture)?M.jsx("img",{src:t.profilePicture,alt:t.name}):M.jsx(pn,{})}),M.jsx("span",{className:"profile-name",children:(null==t?void 0:t.name)||"User"})]})}):M.jsxs("div",{className:"auth-actions",children:[M.jsxs(y.button,{className:"btn-header btn-ghost",onClick:r,whileHover:{scale:1.05},whileTap:{scale:.95},children:[M.jsx(Ot,{size:16}),M.jsx("span",{className:"btn-text",children:"Login"})]}),M.jsxs(y.button,{className:"btn-header btn-primary",onClick:i,whileHover:{scale:1.05},whileTap:{scale:.95},children:[M.jsx(vn,{size:16}),M.jsx("span",{className:"btn-text",children:"Start Trading"}),M.jsx(Xe,{size:14})]})]}),M.jsx(y.button,{className:"mobile-menu-toggle",onClick:p,whileHover:{scale:1.1},whileTap:{scale:.9},"aria-label":"Toggle mobile menu",children:M.jsx(g,{mode:"wait",children:o?M.jsx(y.div,{initial:{rotate:-90,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:90,opacity:0},transition:{duration:.2},children:M.jsx(xn,{})},"close"):M.jsx(y.div,{initial:{rotate:90,opacity:0},animate:{rotate:0,opacity:1},exit:{rotate:-90,opacity:0},transition:{duration:.2},children:M.jsx(_t,{})},"menu")})})]})]}),M.jsx(g,{children:o&&M.jsx(y.div,{className:"mobile-nav-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.3},onClick:p,children:M.jsxs(y.nav,{className:"mobile-nav",initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",stiffness:300,damping:30},onClick:e=>e.stopPropagation(),children:[M.jsxs("div",{className:"mobile-nav-header",children:[M.jsxs("div",{className:"mobile-logo",children:[M.jsx(vn,{className:"mobile-logo-icon"}),M.jsx("span",{children:"TradeBro"})]}),M.jsx("button",{className:"mobile-close-btn",onClick:p,children:M.jsx(xn,{})})]}),M.jsxs("div",{className:"mobile-nav-content",children:[f.map((e,t)=>M.jsx(y.button,{className:"mobile-nav-item",onClick:()=>{x(e.href),p()},initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{duration:.3,delay:.1*t},children:e.name},e.name)),!e&&M.jsxs("div",{className:"mobile-auth-actions",children:[M.jsxs(y.button,{className:"mobile-btn btn-ghost",onClick:()=>{r(),p()},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.4},children:[M.jsx(Ot,{size:16}),"Login"]}),M.jsxs(y.button,{className:"mobile-btn btn-primary",onClick:()=>{i(),p()},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.5},children:[M.jsx(vn,{size:16}),"Start Trading",M.jsx(Xe,{size:14})]})]})]})]})})})]})},Oi=({className:e="",orbCount:t=3,colors:n=["#3B82F6","#10B981","#8B5CF6"],size:s="large"})=>{const a={small:"orb-small",medium:"orb-medium",large:"orb-large"};return M.jsx("div",{className:`orb-background ${e}`,children:Array.from({length:t}).map((e,t)=>M.jsx(y.div,{className:`orb ${a[s]}`,style:{background:`radial-gradient(circle, ${n[t%n.length]}40 0%, ${n[t%n.length]}20 50%, transparent 70%)`,left:20+30*t+"%",top:10+20*t+"%"},animate:{x:[0,100,-50,0],y:[0,-80,60,0],scale:[1,1.2,.8,1]},transition:{duration:20+5*t,repeat:1/0,ease:"easeInOut",delay:2*t}},t))})},Di=({className:e="",gridSize:t=50,lineColor:n="rgba(59, 130, 246, 0.1)",speed:s=20,animate:a=!0})=>M.jsx("div",{className:`grid-motion-container ${e}`,children:M.jsx(y.div,{className:"grid-motion-background",style:{backgroundImage:`\n            linear-gradient(${n} 1px, transparent 1px),\n            linear-gradient(90deg, ${n} 1px, transparent 1px)\n          `,backgroundSize:`${t}px ${t}px`},animate:a?{x:[0,t],y:[0,t]}:{},transition:{duration:s,repeat:1/0,ease:"linear"}})}),Ri=()=>{const[e,t]=n.useState(0),[s,a]=n.useState(!1),r=[{value:1e4,label:"Start",color:"#3B82F6"},{value:12500,label:"1 Month",color:"#10B981"},{value:11800,label:"2 Months",color:"#F59E0B"},{value:15200,label:"3 Months",color:"#10B981"},{value:18750,label:"6 Months",color:"#10B981"},{value:22300,label:"1 Year",color:"#10B981"}];n.useEffect(()=>{const e=setInterval(()=>{s||t(e=>(e+1)%r.length)},2e3);return()=>clearInterval(e)},[s,r.length]);const i=n.useMemo(()=>{const e=20,t=r.map(e=>e.value),n=Math.min(...t),s=Math.max(...t)-n,a=e=>0===s?80:160-(e-n)/s*160;return{svgWidth:400,svgHeight:200,generatePath:()=>{let t=`M 20 ${a(r[0].value)+e}`;for(let n=1;n<r.length;n++){const s=n/(r.length-1)*360,i=a(r[n].value);t+=` L ${s+e} ${i+e}`}return t},points:r.map((t,n)=>({x:n/(r.length-1)*360+e,y:a(t.value)+e,color:t.color,label:t.label,value:t.value})),margin:e}},[r]);return M.jsxs("div",{className:"interactive-chart",onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),children:[M.jsxs("div",{className:"chart-header",children:[M.jsx("div",{className:"chart-title-section",children:M.jsx("h3",{children:"Portfolio Growth Simulation"})}),M.jsxs("div",{className:"chart-value-section",children:[M.jsxs("div",{className:"chart-value",children:[M.jsx("span",{className:"currency",children:"₹"}),M.jsx(y.span,{className:"amount",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3},children:r[e].value.toLocaleString()},e)]}),M.jsx("span",{className:"chart-period",children:r[e].label})]})]}),"---",M.jsx("div",{className:"chart-container",children:M.jsxs("svg",{viewBox:`0 0 ${i.svgWidth} ${i.svgHeight}`,className:"chart-svg",children:[M.jsx("defs",{children:M.jsx("pattern",{id:"grid",width:"40",height:"20",patternUnits:"userSpaceOnUse",children:M.jsx("path",{d:"M 40 0 L 0 0 0 20",fill:"none",stroke:"rgba(59, 130, 246, 0.1)",strokeWidth:"1"})})}),M.jsx("rect",{width:"100%",height:"100%",fill:"url(#grid)"}),M.jsx(y.path,{d:i.generatePath(),fill:"none",stroke:"url(#chartGradient)",strokeWidth:"3",initial:{pathLength:0},animate:{pathLength:1},transition:{duration:2,ease:"easeInOut"}},"chart-line"),M.jsx("defs",{children:M.jsxs("linearGradient",{id:"chartGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[M.jsx("stop",{offset:"0%",stopColor:"#3B82F6"}),M.jsx("stop",{offset:"50%",stopColor:"#10B981"}),M.jsx("stop",{offset:"100%",stopColor:"#10B981"})]})}),i.points.map((n,s)=>M.jsx(y.circle,{cx:n.x,cy:n.y,r:e===s?8:5,fill:n.color,className:"chart-point",initial:{scale:0},animate:{scale:1},transition:{delay:.2*s,duration:.3},onClick:()=>t(s),style:{cursor:"pointer"}},s)),M.jsx(y.circle,{cx:i.points[e].x,cy:i.points[e].y,r:"12",fill:"none",stroke:i.points[e].color,strokeWidth:"2",initial:{scale:0},animate:{scale:1},transition:{duration:.3}},`active-circle-${e}`)]})}),"---",M.jsx("div",{className:"chart-legend",children:r.map((n,s)=>M.jsxs(y.button,{className:"legend-item "+(e===s?"active":""),onClick:()=>t(s),whileHover:{scale:1.05},whileTap:{scale:.95},children:[M.jsx("span",{className:"legend-dot",style:{backgroundColor:n.color}}),M.jsx("span",{className:"legend-label",children:n.label})]},s))})]})},Mi=({texts:e=["AI-Powered Trading","Smart Portfolio Management","Real-Time Market Data","Risk-Free Virtual Trading"],speed:t=100,deleteSpeed:s=50,pauseTime:a=2e3})=>{const[r,i]=n.useState(0),[o,l]=n.useState(""),[c,d]=n.useState(!1),[u,h]=n.useState(!1);return n.useEffect(()=>{const n=e[r];if(u){const e=setTimeout(()=>{h(!1),d(!0)},a);return()=>clearTimeout(e)}const m=setTimeout(()=>{c?o.length>0?l(o.slice(0,-1)):(d(!1),i(t=>(t+1)%e.length)):o.length<n.length?l(n.slice(0,o.length+1)):h(!0)},c?s:t);return()=>clearTimeout(m)},[o,r,c,u,e,t,s,a]),M.jsx("div",{className:"typewriter-container",children:M.jsxs("span",{className:"typewriter-text",children:[o,M.jsx(y.span,{className:"cursor",animate:{opacity:[1,0]},transition:{duration:.8,repeat:1/0,repeatType:"reverse"},children:"|"})]})})};function _i(){}function Fi(){}const Bi=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,zi=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,Ui={};function $i(e,t){return(Ui.jsx?zi:Bi).test(e)}const Hi=/[ \t\n\f\r]/g;function Wi(e){return""===e.replace(Hi,"")}class qi{constructor(e,t,n){this.normal=t,this.property=e,n&&(this.space=n)}}function Vi(e,t){const n={},s={};for(const a of e)Object.assign(n,a.property),Object.assign(s,a.normal);return new qi(n,s,t)}function Yi(e){return e.toLowerCase()}qi.prototype.normal={},qi.prototype.property={},qi.prototype.space=void 0;class Gi{constructor(e,t){this.attribute=t,this.property=e}}Gi.prototype.attribute="",Gi.prototype.booleanish=!1,Gi.prototype.boolean=!1,Gi.prototype.commaOrSpaceSeparated=!1,Gi.prototype.commaSeparated=!1,Gi.prototype.defined=!1,Gi.prototype.mustUseProperty=!1,Gi.prototype.number=!1,Gi.prototype.overloadedBoolean=!1,Gi.prototype.property="",Gi.prototype.spaceSeparated=!1,Gi.prototype.space=void 0;let Ji=0;const Qi=so(),Ki=so(),Xi=so(),Zi=so(),eo=so(),to=so(),no=so();function so(){return 2**++Ji}const ao=Object.freeze(Object.defineProperty({__proto__:null,boolean:Qi,booleanish:Ki,commaOrSpaceSeparated:no,commaSeparated:to,number:Zi,overloadedBoolean:Xi,spaceSeparated:eo},Symbol.toStringTag,{value:"Module"})),ro=Object.keys(ao);class io extends Gi{constructor(e,t,n,s){let a=-1;if(super(e,t),oo(this,"space",s),"number"==typeof n)for(;++a<ro.length;){const e=ro[a];oo(this,ro[a],(n&ao[e])===ao[e])}}}function oo(e,t,n){n&&(e[t]=n)}function lo(e){const t={},n={};for(const[s,a]of Object.entries(e.properties)){const r=new io(s,e.transform(e.attributes||{},s),a,e.space);e.mustUseProperty&&e.mustUseProperty.includes(s)&&(r.mustUseProperty=!0),t[s]=r,n[Yi(s)]=s,n[Yi(r.attribute)]=s}return new qi(t,n,e.space)}io.prototype.defined=!0;const co=lo({properties:{ariaActiveDescendant:null,ariaAtomic:Ki,ariaAutoComplete:null,ariaBusy:Ki,ariaChecked:Ki,ariaColCount:Zi,ariaColIndex:Zi,ariaColSpan:Zi,ariaControls:eo,ariaCurrent:null,ariaDescribedBy:eo,ariaDetails:null,ariaDisabled:Ki,ariaDropEffect:eo,ariaErrorMessage:null,ariaExpanded:Ki,ariaFlowTo:eo,ariaGrabbed:Ki,ariaHasPopup:null,ariaHidden:Ki,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:eo,ariaLevel:Zi,ariaLive:null,ariaModal:Ki,ariaMultiLine:Ki,ariaMultiSelectable:Ki,ariaOrientation:null,ariaOwns:eo,ariaPlaceholder:null,ariaPosInSet:Zi,ariaPressed:Ki,ariaReadOnly:Ki,ariaRelevant:null,ariaRequired:Ki,ariaRoleDescription:eo,ariaRowCount:Zi,ariaRowIndex:Zi,ariaRowSpan:Zi,ariaSelected:Ki,ariaSetSize:Zi,ariaSort:null,ariaValueMax:Zi,ariaValueMin:Zi,ariaValueNow:Zi,ariaValueText:null,role:null},transform:(e,t)=>"role"===t?t:"aria-"+t.slice(4).toLowerCase()});function uo(e,t){return t in e?e[t]:t}function ho(e,t){return uo(e,t.toLowerCase())}const mo=lo({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:to,acceptCharset:eo,accessKey:eo,action:null,allow:null,allowFullScreen:Qi,allowPaymentRequest:Qi,allowUserMedia:Qi,alt:null,as:null,async:Qi,autoCapitalize:null,autoComplete:eo,autoFocus:Qi,autoPlay:Qi,blocking:eo,capture:null,charSet:null,checked:Qi,cite:null,className:eo,cols:Zi,colSpan:null,content:null,contentEditable:Ki,controls:Qi,controlsList:eo,coords:Zi|to,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Qi,defer:Qi,dir:null,dirName:null,disabled:Qi,download:Xi,draggable:Ki,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Qi,formTarget:null,headers:eo,height:Zi,hidden:Xi,high:Zi,href:null,hrefLang:null,htmlFor:eo,httpEquiv:eo,id:null,imageSizes:null,imageSrcSet:null,inert:Qi,inputMode:null,integrity:null,is:null,isMap:Qi,itemId:null,itemProp:eo,itemRef:eo,itemScope:Qi,itemType:eo,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Qi,low:Zi,manifest:null,max:null,maxLength:Zi,media:null,method:null,min:null,minLength:Zi,multiple:Qi,muted:Qi,name:null,nonce:null,noModule:Qi,noValidate:Qi,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Qi,optimum:Zi,pattern:null,ping:eo,placeholder:null,playsInline:Qi,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Qi,referrerPolicy:null,rel:eo,required:Qi,reversed:Qi,rows:Zi,rowSpan:Zi,sandbox:eo,scope:null,scoped:Qi,seamless:Qi,selected:Qi,shadowRootClonable:Qi,shadowRootDelegatesFocus:Qi,shadowRootMode:null,shape:null,size:Zi,sizes:null,slot:null,span:Zi,spellCheck:Ki,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Zi,step:null,style:null,tabIndex:Zi,target:null,title:null,translate:null,type:null,typeMustMatch:Qi,useMap:null,value:Ki,width:Zi,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:eo,axis:null,background:null,bgColor:null,border:Zi,borderColor:null,bottomMargin:Zi,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Qi,declare:Qi,event:null,face:null,frame:null,frameBorder:null,hSpace:Zi,leftMargin:Zi,link:null,longDesc:null,lowSrc:null,marginHeight:Zi,marginWidth:Zi,noResize:Qi,noHref:Qi,noShade:Qi,noWrap:Qi,object:null,profile:null,prompt:null,rev:null,rightMargin:Zi,rules:null,scheme:null,scrolling:Ki,standby:null,summary:null,text:null,topMargin:Zi,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Zi,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Qi,disableRemotePlayback:Qi,prefix:null,property:null,results:Zi,security:null,unselectable:null},space:"html",transform:ho}),po=lo({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:no,accentHeight:Zi,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Zi,amplitude:Zi,arabicForm:null,ascent:Zi,attributeName:null,attributeType:null,azimuth:Zi,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Zi,by:null,calcMode:null,capHeight:Zi,className:eo,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Zi,diffuseConstant:Zi,direction:null,display:null,dur:null,divisor:Zi,dominantBaseline:null,download:Qi,dx:null,dy:null,edgeMode:null,editable:null,elevation:Zi,enableBackground:null,end:null,event:null,exponent:Zi,externalResourcesRequired:null,fill:null,fillOpacity:Zi,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:to,g2:to,glyphName:to,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Zi,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Zi,horizOriginX:Zi,horizOriginY:Zi,id:null,ideographic:Zi,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Zi,k:Zi,k1:Zi,k2:Zi,k3:Zi,k4:Zi,kernelMatrix:no,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Zi,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Zi,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Zi,overlineThickness:Zi,paintOrder:null,panose1:null,path:null,pathLength:Zi,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:eo,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Zi,pointsAtY:Zi,pointsAtZ:Zi,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:no,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:no,rev:no,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:no,requiredFeatures:no,requiredFonts:no,requiredFormats:no,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Zi,specularExponent:Zi,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Zi,strikethroughThickness:Zi,string:null,stroke:null,strokeDashArray:no,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Zi,strokeOpacity:Zi,strokeWidth:null,style:null,surfaceScale:Zi,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:no,tabIndex:Zi,tableValues:null,target:null,targetX:Zi,targetY:Zi,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:no,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Zi,underlineThickness:Zi,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Zi,values:null,vAlphabetic:Zi,vMathematical:Zi,vectorEffect:null,vHanging:Zi,vIdeographic:Zi,version:null,vertAdvY:Zi,vertOriginX:Zi,vertOriginY:Zi,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Zi,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:uo}),fo=lo({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform:(e,t)=>"xlink:"+t.slice(5).toLowerCase()}),go=lo({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:ho}),yo=lo({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform:(e,t)=>"xml:"+t.slice(3).toLowerCase()}),xo={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},vo=/[A-Z]/g,bo=/-[a-z]/g,jo=/^data[-\w.:]+$/i;function wo(e){return"-"+e.toLowerCase()}function ko(e){return e.charAt(1).toUpperCase()}const No=Vi([co,mo,fo,go,yo],"html"),So=Vi([co,po,fo,go,yo],"svg");var Co={},To=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,Po=/\n/g,Eo=/^\s*/,Lo=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,Io=/^:\s*/,Ao=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,Oo=/^[;\s]*/,Do=/^\s+|\s+$/g,Ro="";function Mo(e){return e?e.replace(Do,Ro):Ro}var _o=i&&i.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Co,"__esModule",{value:!0}),Co.default=function(e,t){var n=null;if(!e||"string"!=typeof e)return n;var s=(0,Fo.default)(e),a="function"==typeof t;return s.forEach(function(e){if("declaration"===e.type){var s=e.property,r=e.value;a?t(s,r,e):r&&((n=n||{})[s]=r)}}),n};var Fo=_o(function(e,t){if("string"!=typeof e)throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,s=1;function a(e){var t=e.match(Po);t&&(n+=t.length);var a=e.lastIndexOf("\n");s=~a?e.length-a:s+e.length}function r(){var e={line:n,column:s};return function(t){return t.position=new i(e),c(),t}}function i(e){this.start=e,this.end={line:n,column:s},this.source=t.source}function o(a){var r=new Error(t.source+":"+n+":"+s+": "+a);if(r.reason=a,r.filename=t.source,r.line=n,r.column=s,r.source=e,!t.silent)throw r}function l(t){var n=t.exec(e);if(n){var s=n[0];return a(s),e=e.slice(s.length),n}}function c(){l(Eo)}function d(e){var t;for(e=e||[];t=u();)!1!==t&&e.push(t);return e}function u(){var t=r();if("/"==e.charAt(0)&&"*"==e.charAt(1)){for(var n=2;Ro!=e.charAt(n)&&("*"!=e.charAt(n)||"/"!=e.charAt(n+1));)++n;if(n+=2,Ro===e.charAt(n-1))return o("End of comment missing");var i=e.slice(2,n-2);return s+=2,a(i),e=e.slice(n),s+=2,t({type:"comment",comment:i})}}function h(){var e=r(),t=l(Lo);if(t){if(u(),!l(Io))return o("property missing ':'");var n=l(Ao),s=e({type:"declaration",property:Mo(t[0].replace(To,Ro)),value:n?Mo(n[0].replace(To,Ro)):Ro});return l(Oo),s}}return i.prototype.content=e,c(),function(){var e,t=[];for(d(t);e=h();)!1!==e&&(t.push(e),d(t));return t}()});var Bo={};Object.defineProperty(Bo,"__esModule",{value:!0}),Bo.camelCase=void 0;var zo=/^--[a-zA-Z0-9_-]+$/,Uo=/-([a-z])/g,$o=/^[^-]+$/,Ho=/^-(webkit|moz|ms|o|khtml)-/,Wo=/^-(ms)-/,qo=function(e,t){return t.toUpperCase()},Vo=function(e,t){return"".concat(t,"-")};Bo.camelCase=function(e,t){return void 0===t&&(t={}),function(e){return!e||$o.test(e)||zo.test(e)}(e)?e:(e=e.toLowerCase(),(e=t.reactCompat?e.replace(Wo,Vo):e.replace(Ho,Vo)).replace(Uo,qo))};var Yo=(i&&i.__importDefault||function(e){return e&&e.__esModule?e:{default:e}})(Co),Go=Bo;function Jo(e,t){var n={};return e&&"string"==typeof e?((0,Yo.default)(e,function(e,s){e&&s&&(n[(0,Go.camelCase)(e,t)]=s)}),n):n}Jo.default=Jo;const Qo=r(Jo),Ko=Zo("end"),Xo=Zo("start");function Zo(e){return function(t){const n=t&&t.position&&t.position[e]||{};if("number"==typeof n.line&&n.line>0&&"number"==typeof n.column&&n.column>0)return{line:n.line,column:n.column,offset:"number"==typeof n.offset&&n.offset>-1?n.offset:void 0}}}function el(e){return e&&"object"==typeof e?"position"in e||"type"in e?nl(e.position):"start"in e||"end"in e?nl(e):"line"in e||"column"in e?tl(e):"":""}function tl(e){return sl(e&&e.line)+":"+sl(e&&e.column)}function nl(e){return tl(e&&e.start)+"-"+tl(e&&e.end)}function sl(e){return e&&"number"==typeof e?e:1}class al extends Error{constructor(e,t,n){super(),"string"==typeof t&&(n=t,t=void 0);let s="",a={},r=!1;if(t&&(a="line"in t&&"column"in t||"start"in t&&"end"in t?{place:t}:"type"in t?{ancestors:[t],place:t.position}:{...t}),"string"==typeof e?s=e:!a.cause&&e&&(r=!0,s=e.message,a.cause=e),!a.ruleId&&!a.source&&"string"==typeof n){const e=n.indexOf(":");-1===e?a.ruleId=n:(a.source=n.slice(0,e),a.ruleId=n.slice(e+1))}if(!a.place&&a.ancestors&&a.ancestors){const e=a.ancestors[a.ancestors.length-1];e&&(a.place=e.position)}const i=a.place&&"start"in a.place?a.place.start:a.place;this.ancestors=a.ancestors||void 0,this.cause=a.cause||void 0,this.column=i?i.column:void 0,this.fatal=void 0,this.file="",this.message=s,this.line=i?i.line:void 0,this.name=el(a.place)||"1:1",this.place=a.place||void 0,this.reason=this.message,this.ruleId=a.ruleId||void 0,this.source=a.source||void 0,this.stack=r&&a.cause&&"string"==typeof a.cause.stack?a.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}al.prototype.file="",al.prototype.name="",al.prototype.reason="",al.prototype.message="",al.prototype.stack="",al.prototype.column=void 0,al.prototype.line=void 0,al.prototype.ancestors=void 0,al.prototype.cause=void 0,al.prototype.fatal=void 0,al.prototype.place=void 0,al.prototype.ruleId=void 0,al.prototype.source=void 0;const rl={}.hasOwnProperty,il=new Map,ol=/[A-Z]/g,ll=new Set(["table","tbody","thead","tfoot","tr"]),cl=new Set(["td","th"]),dl="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function ul(e,t){if(!t||void 0===t.Fragment)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let s;if(t.development){if("function"!=typeof t.jsxDEV)throw new TypeError("Expected `jsxDEV` in options when `development: true`");s=function(e,t){return n;function n(n,s,a,r){const i=Array.isArray(a.children),o=Xo(n);return t(s,a,r,i,{columnNumber:o?o.column-1:void 0,fileName:e,lineNumber:o?o.line:void 0},void 0)}}(n,t.jsxDEV)}else{if("function"!=typeof t.jsx)throw new TypeError("Expected `jsx` in production options");if("function"!=typeof t.jsxs)throw new TypeError("Expected `jsxs` in production options");s=function(e,t,n){return s;function s(e,s,a,r){const i=Array.isArray(a.children)?n:t;return r?i(s,a,r):i(s,a)}}(0,t.jsx,t.jsxs)}const a={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:s,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:!1!==t.passKeys,passNode:t.passNode||!1,schema:"svg"===t.space?So:No,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:!1!==t.tableCellAlignToStyle},r=hl(a,e,void 0);return r&&"string"!=typeof r?r:a.create(e,a.Fragment,{children:r||void 0},void 0)}function hl(e,t,n){return"element"===t.type?function(e,t,n){const s=e.schema;let a=s;"svg"===t.tagName.toLowerCase()&&"html"===s.space&&(a=So,e.schema=a);e.ancestors.push(t);const r=yl(e,t.tagName,!1),i=function(e,t){const n={};let s,a;for(a in t.properties)if("children"!==a&&rl.call(t.properties,a)){const r=gl(e,a,t.properties[a]);if(r){const[a,i]=r;e.tableCellAlignToStyle&&"align"===a&&"string"==typeof i&&cl.has(t.tagName)?s=i:n[a]=i}}if(s){(n.style||(n.style={}))["css"===e.stylePropertyNameCase?"text-align":"textAlign"]=s}return n}(e,t);let o=fl(e,t);ll.has(t.tagName)&&(o=o.filter(function(e){return"string"!=typeof e||!("object"==typeof(t=e)?"text"===t.type&&Wi(t.value):Wi(t));var t}));return ml(e,i,r,t),pl(i,o),e.ancestors.pop(),e.schema=s,e.create(t,r,i,n)}(e,t,n):"mdxFlowExpression"===t.type||"mdxTextExpression"===t.type?function(e,t){if(t.data&&t.data.estree&&e.evaluater){const n=t.data.estree.body[0];return n.type,e.evaluater.evaluateExpression(n.expression)}xl(e,t.position)}(e,t):"mdxJsxFlowElement"===t.type||"mdxJsxTextElement"===t.type?function(e,t,n){const s=e.schema;let a=s;"svg"===t.name&&"html"===s.space&&(a=So,e.schema=a);e.ancestors.push(t);const r=null===t.name?e.Fragment:yl(e,t.name,!0),i=function(e,t){const n={};for(const s of t.attributes)if("mdxJsxExpressionAttribute"===s.type)if(s.data&&s.data.estree&&e.evaluater){const t=s.data.estree.body[0];_i(t.type);const a=t.expression;_i(a.type);const r=a.properties[0];_i(r.type),Object.assign(n,e.evaluater.evaluateExpression(r.argument))}else xl(e,t.position);else{const a=s.name;let r;if(s.value&&"object"==typeof s.value)if(s.value.data&&s.value.data.estree&&e.evaluater){const t=s.value.data.estree.body[0];_i(t.type),r=e.evaluater.evaluateExpression(t.expression)}else xl(e,t.position);else r=null===s.value||s.value;n[a]=r}return n}(e,t),o=fl(e,t);return ml(e,i,r,t),pl(i,o),e.ancestors.pop(),e.schema=s,e.create(t,r,i,n)}(e,t,n):"mdxjsEsm"===t.type?function(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);xl(e,t.position)}(e,t):"root"===t.type?function(e,t,n){const s={};return pl(s,fl(e,t)),e.create(t,e.Fragment,s,n)}(e,t,n):"text"===t.type?function(e,t){return t.value}(0,t):void 0}function ml(e,t,n,s){"string"!=typeof n&&n!==e.Fragment&&e.passNode&&(t.node=s)}function pl(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function fl(e,t){const n=[];let s=-1;const a=e.passKeys?new Map:il;for(;++s<t.children.length;){const r=t.children[s];let i;if(e.passKeys){const e="element"===r.type?r.tagName:"mdxJsxFlowElement"===r.type||"mdxJsxTextElement"===r.type?r.name:void 0;if(e){const t=a.get(e)||0;i=e+"-"+t,a.set(e,t+1)}}const o=hl(e,r,i);void 0!==o&&n.push(o)}return n}function gl(e,t,n){const s=function(e,t){const n=Yi(t);let s=t,a=Gi;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&"data"===n.slice(0,4)&&jo.test(t)){if("-"===t.charAt(4)){const e=t.slice(5).replace(bo,ko);s="data"+e.charAt(0).toUpperCase()+e.slice(1)}else{const e=t.slice(4);if(!bo.test(e)){let n=e.replace(vo,wo);"-"!==n.charAt(0)&&(n="-"+n),t="data"+n}}a=io}return new a(s,t)}(e.schema,t);if(!(null==n||"number"==typeof n&&Number.isNaN(n))){if(Array.isArray(n)&&(n=s.commaSeparated?function(e){const t={};return(""===e[e.length-1]?[...e,""]:e).join((t.padRight?" ":"")+","+(!1===t.padLeft?"":" ")).trim()}(n):n.join(" ").trim()),"style"===s.property){let t="object"==typeof n?n:function(e,t){try{return Qo(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const t=n,s=new al("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:t,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw s.file=e.filePath||void 0,s.url=dl+"#cannot-parse-style-attribute",s}}(e,String(n));return"css"===e.stylePropertyNameCase&&(t=function(e){const t={};let n;for(n in e)rl.call(e,n)&&(t[vl(n)]=e[n]);return t}(t)),["style",t]}return["react"===e.elementAttributeNameCase&&s.space?xo[s.property]||s.property:s.attribute,n]}}function yl(e,t,n){let s;if(n)if(t.includes(".")){const e=t.split(".");let n,a=-1;for(;++a<e.length;){const t=$i(e[a])?{type:"Identifier",name:e[a]}:{type:"Literal",value:e[a]};n=n?{type:"MemberExpression",object:n,property:t,computed:Boolean(a&&"Literal"===t.type),optional:!1}:t}s=n}else s=$i(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};else s={type:"Literal",value:t};if("Literal"===s.type){const t=s.value;return rl.call(e.components,t)?e.components[t]:t}if(e.evaluater)return e.evaluater.evaluateExpression(s);xl(e)}function xl(e,t){const n=new al("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=dl+"#cannot-handle-mdx-estrees-without-createevaluater",n}function vl(e){let t=e.replace(ol,bl);return"ms-"===t.slice(0,3)&&(t="-"+t),t}function bl(e){return"-"+e.toLowerCase()}const jl={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},wl={};function kl(e,t,n){if(function(e){return Boolean(e&&"object"==typeof e)}(e)){if("value"in e)return"html"!==e.type||n?e.value:"";if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return Nl(e.children,t,n)}return Array.isArray(e)?Nl(e,t,n):""}function Nl(e,t,n){const s=[];let a=-1;for(;++a<e.length;)s[a]=kl(e[a],t,n);return s.join("")}const Sl=document.createElement("i");function Cl(e){const t="&"+e+";";Sl.innerHTML=t;const n=Sl.textContent;return(59!==n.charCodeAt(n.length-1)||"semi"===e)&&(n!==t&&n)}function Tl(e,t,n,s){const a=e.length;let r,i=0;if(t=t<0?-t>a?0:a+t:t>a?a:t,n=n>0?n:0,s.length<1e4)r=Array.from(s),r.unshift(t,n),e.splice(...r);else for(n&&e.splice(t,n);i<s.length;)r=s.slice(i,i+1e4),r.unshift(t,0),e.splice(...r),i+=1e4,t+=1e4}function Pl(e,t){return e.length>0?(Tl(e,e.length,0,t),e):t}const El={}.hasOwnProperty;function Ll(e,t){let n;for(n in t){const s=(El.call(e,n)?e[n]:void 0)||(e[n]={}),a=t[n];let r;if(a)for(r in a){El.call(s,r)||(s[r]=[]);const e=a[r];Il(s[r],Array.isArray(e)?e:e?[e]:[])}}}function Il(e,t){let n=-1;const s=[];for(;++n<t.length;)("after"===t[n].add?e:s).push(t[n]);Tl(e,0,0,s)}function Al(e,t){const n=Number.parseInt(e,t);return n<9||11===n||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||!(65535&~n)||65534==(65535&n)||n>1114111?"�":String.fromCodePoint(n)}function Ol(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Dl=Vl(/[A-Za-z]/),Rl=Vl(/[\dA-Za-z]/),Ml=Vl(/[#-'*+\--9=?A-Z^-~]/);function _l(e){return null!==e&&(e<32||127===e)}const Fl=Vl(/\d/),Bl=Vl(/[\dA-Fa-f]/),zl=Vl(/[!-/:-@[-`{-~]/);function Ul(e){return null!==e&&e<-2}function $l(e){return null!==e&&(e<0||32===e)}function Hl(e){return-2===e||-1===e||32===e}const Wl=Vl(new RegExp("\\p{P}|\\p{S}","u")),ql=Vl(/\s/);function Vl(e){return function(t){return null!==t&&t>-1&&e.test(String.fromCharCode(t))}}function Yl(e){const t=[];let n=-1,s=0,a=0;for(;++n<e.length;){const r=e.charCodeAt(n);let i="";if(37===r&&Rl(e.charCodeAt(n+1))&&Rl(e.charCodeAt(n+2)))a=2;else if(r<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(r))||(i=String.fromCharCode(r));else if(r>55295&&r<57344){const t=e.charCodeAt(n+1);r<56320&&t>56319&&t<57344?(i=String.fromCharCode(r,t),a=1):i="�"}else i=String.fromCharCode(r);i&&(t.push(e.slice(s,n),encodeURIComponent(i)),s=n+a+1,i=""),a&&(n+=a,a=0)}return t.join("")+e.slice(s)}function Gl(e,t,n,s){const a=s?s-1:Number.POSITIVE_INFINITY;let r=0;return function(s){if(Hl(s))return e.enter(n),i(s);return t(s)};function i(s){return Hl(s)&&r++<a?(e.consume(s),i):(e.exit(n),t(s))}}const Jl={tokenize:function(e){const t=e.attempt(this.parser.constructs.contentInitial,function(n){if(null===n)return void e.consume(n);return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),Gl(e,t,"linePrefix")},function(t){return e.enter("paragraph"),s(t)});let n;return t;function s(t){const s=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=s),n=s,a(t)}function a(t){return null===t?(e.exit("chunkText"),e.exit("paragraph"),void e.consume(t)):Ul(t)?(e.consume(t),e.exit("chunkText"),s):(e.consume(t),a)}}};const Ql={tokenize:function(e){const t=this,n=[];let s,a,r,i=0;return o;function o(s){if(i<n.length){const a=n[i];return t.containerState=a[1],e.attempt(a[0].continuation,l,c)(s)}return c(s)}function l(e){if(i++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,s&&x();const n=t.events.length;let a,r=n;for(;r--;)if("exit"===t.events[r][0]&&"chunkFlow"===t.events[r][1].type){a=t.events[r][1].end;break}y(i);let o=n;for(;o<t.events.length;)t.events[o][1].end={...a},o++;return Tl(t.events,r+1,0,t.events.slice(n)),t.events.length=o,c(e)}return o(e)}function c(a){if(i===n.length){if(!s)return h(a);if(s.currentConstruct&&s.currentConstruct.concrete)return p(a);t.interrupt=Boolean(s.currentConstruct&&!s._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(Kl,d,u)(a)}function d(e){return s&&x(),y(i),h(e)}function u(e){return t.parser.lazy[t.now().line]=i!==n.length,r=t.now().offset,p(e)}function h(n){return t.containerState={},e.attempt(Kl,m,p)(n)}function m(e){return i++,n.push([t.currentConstruct,t.containerState]),h(e)}function p(n){return null===n?(s&&x(),y(0),void e.consume(n)):(s=s||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:s,contentType:"flow",previous:a}),f(n))}function f(n){return null===n?(g(e.exit("chunkFlow"),!0),y(0),void e.consume(n)):Ul(n)?(e.consume(n),g(e.exit("chunkFlow")),i=0,t.interrupt=void 0,o):(e.consume(n),f)}function g(e,n){const o=t.sliceStream(e);if(n&&o.push(null),e.previous=a,a&&(a.next=e),a=e,s.defineSkip(e.start),s.write(o),t.parser.lazy[e.start.line]){let e=s.events.length;for(;e--;)if(s.events[e][1].start.offset<r&&(!s.events[e][1].end||s.events[e][1].end.offset>r))return;const n=t.events.length;let a,o,l=n;for(;l--;)if("exit"===t.events[l][0]&&"chunkFlow"===t.events[l][1].type){if(a){o=t.events[l][1].end;break}a=!0}for(y(i),e=n;e<t.events.length;)t.events[e][1].end={...o},e++;Tl(t.events,l+1,0,t.events.slice(n)),t.events.length=e}}function y(s){let a=n.length;for(;a-- >s;){const s=n[a];t.containerState=s[1],s[0].exit.call(t,e)}n.length=s}function x(){s.write([null]),a=void 0,s=void 0,t.containerState._closeFlow=void 0}}},Kl={tokenize:function(e,t,n){return Gl(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}};function Xl(e){return null===e||$l(e)||ql(e)?1:Wl(e)?2:void 0}function Zl(e,t,n){const s=[];let a=-1;for(;++a<e.length;){const r=e[a].resolveAll;r&&!s.includes(r)&&(t=r(t,n),s.push(r))}return t}const ec={name:"attention",resolveAll:function(e,t){let n,s,a,r,i,o,l,c,d=-1;for(;++d<e.length;)if("enter"===e[d][0]&&"attentionSequence"===e[d][1].type&&e[d][1]._close)for(n=d;n--;)if("exit"===e[n][0]&&"attentionSequence"===e[n][1].type&&e[n][1]._open&&t.sliceSerialize(e[n][1]).charCodeAt(0)===t.sliceSerialize(e[d][1]).charCodeAt(0)){if((e[n][1]._close||e[d][1]._open)&&(e[d][1].end.offset-e[d][1].start.offset)%3&&!((e[n][1].end.offset-e[n][1].start.offset+e[d][1].end.offset-e[d][1].start.offset)%3))continue;o=e[n][1].end.offset-e[n][1].start.offset>1&&e[d][1].end.offset-e[d][1].start.offset>1?2:1;const u={...e[n][1].end},h={...e[d][1].start};tc(u,-o),tc(h,o),r={type:o>1?"strongSequence":"emphasisSequence",start:u,end:{...e[n][1].end}},i={type:o>1?"strongSequence":"emphasisSequence",start:{...e[d][1].start},end:h},a={type:o>1?"strongText":"emphasisText",start:{...e[n][1].end},end:{...e[d][1].start}},s={type:o>1?"strong":"emphasis",start:{...r.start},end:{...i.end}},e[n][1].end={...r.start},e[d][1].start={...i.end},l=[],e[n][1].end.offset-e[n][1].start.offset&&(l=Pl(l,[["enter",e[n][1],t],["exit",e[n][1],t]])),l=Pl(l,[["enter",s,t],["enter",r,t],["exit",r,t],["enter",a,t]]),l=Pl(l,Zl(t.parser.constructs.insideSpan.null,e.slice(n+1,d),t)),l=Pl(l,[["exit",a,t],["enter",i,t],["exit",i,t],["exit",s,t]]),e[d][1].end.offset-e[d][1].start.offset?(c=2,l=Pl(l,[["enter",e[d][1],t],["exit",e[d][1],t]])):c=0,Tl(e,n-1,d-n+3,l),d=n+l.length-c-2;break}d=-1;for(;++d<e.length;)"attentionSequence"===e[d][1].type&&(e[d][1].type="data");return e},tokenize:function(e,t){const n=this.parser.constructs.attentionMarkers.null,s=this.previous,a=Xl(s);let r;return function(t){return r=t,e.enter("attentionSequence"),i(t)};function i(o){if(o===r)return e.consume(o),i;const l=e.exit("attentionSequence"),c=Xl(o),d=!c||2===c&&a||n.includes(o),u=!a||2===a&&c||n.includes(s);return l._open=Boolean(42===r?d:d&&(a||!u)),l._close=Boolean(42===r?u:u&&(c||!d)),t(o)}}};function tc(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const nc={name:"autolink",tokenize:function(e,t,n){let s=0;return function(t){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(t),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),a};function a(t){return Dl(t)?(e.consume(t),r):64===t?n(t):l(t)}function r(e){return 43===e||45===e||46===e||Rl(e)?(s=1,i(e)):l(e)}function i(t){return 58===t?(e.consume(t),s=0,o):(43===t||45===t||46===t||Rl(t))&&s++<32?(e.consume(t),i):(s=0,l(t))}function o(s){return 62===s?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(s),e.exit("autolinkMarker"),e.exit("autolink"),t):null===s||32===s||60===s||_l(s)?n(s):(e.consume(s),o)}function l(t){return 64===t?(e.consume(t),c):Ml(t)?(e.consume(t),l):n(t)}function c(e){return Rl(e)?d(e):n(e)}function d(n){return 46===n?(e.consume(n),s=0,c):62===n?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(n),e.exit("autolinkMarker"),e.exit("autolink"),t):u(n)}function u(t){if((45===t||Rl(t))&&s++<63){const n=45===t?u:d;return e.consume(t),n}return n(t)}}};const sc={partial:!0,tokenize:function(e,t,n){return function(t){return Hl(t)?Gl(e,s,"linePrefix")(t):s(t)};function s(e){return null===e||Ul(e)?t(e):n(e)}}};const ac={continuation:{tokenize:function(e,t,n){const s=this;return function(t){if(Hl(t))return Gl(e,a,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t);return a(t)};function a(s){return e.attempt(ac,t,n)(s)}}},exit:function(e){e.exit("blockQuote")},name:"blockQuote",tokenize:function(e,t,n){const s=this;return function(t){if(62===t){const n=s.containerState;return n.open||(e.enter("blockQuote",{_container:!0}),n.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(t),e.exit("blockQuoteMarker"),a}return n(t)};function a(n){return Hl(n)?(e.enter("blockQuotePrefixWhitespace"),e.consume(n),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(n))}}};const rc={name:"characterEscape",tokenize:function(e,t,n){return function(t){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(t),e.exit("escapeMarker"),s};function s(s){return zl(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}};const ic={name:"characterReference",tokenize:function(e,t,n){const s=this;let a,r,i=0;return function(t){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(t),e.exit("characterReferenceMarker"),o};function o(t){return 35===t?(e.enter("characterReferenceMarkerNumeric"),e.consume(t),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),a=31,r=Rl,c(t))}function l(t){return 88===t||120===t?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(t),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),a=6,r=Bl,c):(e.enter("characterReferenceValue"),a=7,r=Fl,c(t))}function c(o){if(59===o&&i){const a=e.exit("characterReferenceValue");return r!==Rl||Cl(s.sliceSerialize(a))?(e.enter("characterReferenceMarker"),e.consume(o),e.exit("characterReferenceMarker"),e.exit("characterReference"),t):n(o)}return r(o)&&i++<a?(e.consume(o),c):n(o)}}};const oc={partial:!0,tokenize:function(e,t,n){const s=this;return function(t){if(null===t)return n(t);return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),a};function a(e){return s.parser.lazy[s.now().line]?n(e):t(e)}}},lc={concrete:!0,name:"codeFenced",tokenize:function(e,t,n){const s=this,a={partial:!0,tokenize:function(e,t,n){let a=0;return i;function i(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),l}function l(t){return e.enter("codeFencedFence"),Hl(t)?Gl(e,c,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):c(t)}function c(t){return t===r?(e.enter("codeFencedFenceSequence"),d(t)):n(t)}function d(t){return t===r?(a++,e.consume(t),d):a>=o?(e.exit("codeFencedFenceSequence"),Hl(t)?Gl(e,u,"whitespace")(t):u(t)):n(t)}function u(s){return null===s||Ul(s)?(e.exit("codeFencedFence"),t(s)):n(s)}}};let r,i=0,o=0;return function(t){return function(t){const n=s.events[s.events.length-1];return i=n&&"linePrefix"===n[1].type?n[2].sliceSerialize(n[1],!0).length:0,r=t,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),l(t)}(t)};function l(t){return t===r?(o++,e.consume(t),l):o<3?n(t):(e.exit("codeFencedFenceSequence"),Hl(t)?Gl(e,c,"whitespace")(t):c(t))}function c(n){return null===n||Ul(n)?(e.exit("codeFencedFence"),s.interrupt?t(n):e.check(oc,m,x)(n)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),d(n))}function d(t){return null===t||Ul(t)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),c(t)):Hl(t)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Gl(e,u,"whitespace")(t)):96===t&&t===r?n(t):(e.consume(t),d)}function u(t){return null===t||Ul(t)?c(t):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),h(t))}function h(t){return null===t||Ul(t)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),c(t)):96===t&&t===r?n(t):(e.consume(t),h)}function m(t){return e.attempt(a,x,p)(t)}function p(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),f}function f(t){return i>0&&Hl(t)?Gl(e,g,"linePrefix",i+1)(t):g(t)}function g(t){return null===t||Ul(t)?e.check(oc,m,x)(t):(e.enter("codeFlowValue"),y(t))}function y(t){return null===t||Ul(t)?(e.exit("codeFlowValue"),g(t)):(e.consume(t),y)}function x(n){return e.exit("codeFenced"),t(n)}}};const cc={name:"codeIndented",tokenize:function(e,t,n){const s=this;return function(t){return e.enter("codeIndented"),Gl(e,a,"linePrefix",5)(t)};function a(e){const t=s.events[s.events.length-1];return t&&"linePrefix"===t[1].type&&t[2].sliceSerialize(t[1],!0).length>=4?r(e):n(e)}function r(t){return null===t?o(t):Ul(t)?e.attempt(dc,r,o)(t):(e.enter("codeFlowValue"),i(t))}function i(t){return null===t||Ul(t)?(e.exit("codeFlowValue"),r(t)):(e.consume(t),i)}function o(n){return e.exit("codeIndented"),t(n)}}},dc={partial:!0,tokenize:function(e,t,n){const s=this;return a;function a(t){return s.parser.lazy[s.now().line]?n(t):Ul(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),a):Gl(e,r,"linePrefix",5)(t)}function r(e){const r=s.events[s.events.length-1];return r&&"linePrefix"===r[1].type&&r[2].sliceSerialize(r[1],!0).length>=4?t(e):Ul(e)?a(e):n(e)}}};const uc={name:"codeText",previous:function(e){return 96!==e||"characterEscape"===this.events[this.events.length-1][1].type},resolve:function(e){let t,n,s=e.length-4,a=3;if(!("lineEnding"!==e[a][1].type&&"space"!==e[a][1].type||"lineEnding"!==e[s][1].type&&"space"!==e[s][1].type))for(t=a;++t<s;)if("codeTextData"===e[t][1].type){e[a][1].type="codeTextPadding",e[s][1].type="codeTextPadding",a+=2,s-=2;break}t=a-1,s++;for(;++t<=s;)void 0===n?t!==s&&"lineEnding"!==e[t][1].type&&(n=t):t!==s&&"lineEnding"!==e[t][1].type||(e[n][1].type="codeTextData",t!==n+2&&(e[n][1].end=e[t-1][1].end,e.splice(n+2,t-n-2),s-=t-n-2,t=n+2),n=void 0);return e},tokenize:function(e,t,n){let s,a,r=0;return function(t){return e.enter("codeText"),e.enter("codeTextSequence"),i(t)};function i(t){return 96===t?(e.consume(t),r++,i):(e.exit("codeTextSequence"),o(t))}function o(t){return null===t?n(t):32===t?(e.enter("space"),e.consume(t),e.exit("space"),o):96===t?(a=e.enter("codeTextSequence"),s=0,c(t)):Ul(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),o):(e.enter("codeTextData"),l(t))}function l(t){return null===t||32===t||96===t||Ul(t)?(e.exit("codeTextData"),o(t)):(e.consume(t),l)}function c(n){return 96===n?(e.consume(n),s++,c):s===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(n)):(a.type="codeTextData",l(n))}}};class hc{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,t){const n=null==t?Number.POSITIVE_INFINITY:t;return n<this.left.length?this.left.slice(e,n):e>this.left.length?this.right.slice(this.right.length-n+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-n+this.left.length).reverse())}splice(e,t,n){const s=t||0;this.setCursor(Math.trunc(e));const a=this.right.splice(this.right.length-s,Number.POSITIVE_INFINITY);return n&&mc(this.left,n),a.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),mc(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),mc(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&0===this.right.length||e<0&&0===this.left.length))if(e<this.left.length){const t=this.left.splice(e,Number.POSITIVE_INFINITY);mc(this.right,t.reverse())}else{const t=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);mc(this.left,t.reverse())}}}function mc(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function pc(e){const t={};let n,s,a,r,i,o,l,c=-1;const d=new hc(e);for(;++c<d.length;){for(;c in t;)c=t[c];if(n=d.get(c),c&&"chunkFlow"===n[1].type&&"listItemPrefix"===d.get(c-1)[1].type&&(o=n[1]._tokenizer.events,a=0,a<o.length&&"lineEndingBlank"===o[a][1].type&&(a+=2),a<o.length&&"content"===o[a][1].type))for(;++a<o.length&&"content"!==o[a][1].type;)"chunkText"===o[a][1].type&&(o[a][1]._isInFirstContentOfListItem=!0,a++);if("enter"===n[0])n[1].contentType&&(Object.assign(t,fc(d,c)),c=t[c],l=!0);else if(n[1]._container){for(a=c,s=void 0;a--;)if(r=d.get(a),"lineEnding"===r[1].type||"lineEndingBlank"===r[1].type)"enter"===r[0]&&(s&&(d.get(s)[1].type="lineEndingBlank"),r[1].type="lineEnding",s=a);else if("linePrefix"!==r[1].type&&"listItemIndent"!==r[1].type)break;s&&(n[1].end={...d.get(s)[1].start},i=d.slice(s,c),i.unshift(n),d.splice(s,c-s+1,i))}}return Tl(e,0,Number.POSITIVE_INFINITY,d.slice(0)),!l}function fc(e,t){const n=e.get(t)[1],s=e.get(t)[2];let a=t-1;const r=[];let i=n._tokenizer;i||(i=s.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(i._contentTypeTextTrailing=!0));const o=i.events,l=[],c={};let d,u,h=-1,m=n,p=0,f=0;const g=[f];for(;m;){for(;e.get(++a)[1]!==m;);r.push(a),m._tokenizer||(d=s.sliceStream(m),m.next||d.push(null),u&&i.defineSkip(m.start),m._isInFirstContentOfListItem&&(i._gfmTasklistFirstContentOfListItem=!0),i.write(d),m._isInFirstContentOfListItem&&(i._gfmTasklistFirstContentOfListItem=void 0)),u=m,m=m.next}for(m=n;++h<o.length;)"exit"===o[h][0]&&"enter"===o[h-1][0]&&o[h][1].type===o[h-1][1].type&&o[h][1].start.line!==o[h][1].end.line&&(f=h+1,g.push(f),m._tokenizer=void 0,m.previous=void 0,m=m.next);for(i.events=[],m?(m._tokenizer=void 0,m.previous=void 0):g.pop(),h=g.length;h--;){const t=o.slice(g[h],g[h+1]),n=r.pop();l.push([n,n+t.length-1]),e.splice(n,2,t)}for(l.reverse(),h=-1;++h<l.length;)c[p+l[h][0]]=p+l[h][1],p+=l[h][1]-l[h][0]-1;return c}const gc={resolve:function(e){return pc(e),e},tokenize:function(e,t){let n;return function(t){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),s(t)};function s(t){return null===t?a(t):Ul(t)?e.check(yc,r,a)(t):(e.consume(t),s)}function a(n){return e.exit("chunkContent"),e.exit("content"),t(n)}function r(t){return e.consume(t),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,s}}},yc={partial:!0,tokenize:function(e,t,n){const s=this;return function(t){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),Gl(e,a,"linePrefix")};function a(a){if(null===a||Ul(a))return n(a);const r=s.events[s.events.length-1];return!s.parser.constructs.disable.null.includes("codeIndented")&&r&&"linePrefix"===r[1].type&&r[2].sliceSerialize(r[1],!0).length>=4?t(a):e.interrupt(s.parser.constructs.flow,n,t)(a)}}};function xc(e,t,n,s,a,r,i,o,l){const c=l||Number.POSITIVE_INFINITY;let d=0;return function(t){if(60===t)return e.enter(s),e.enter(a),e.enter(r),e.consume(t),e.exit(r),u;if(null===t||32===t||41===t||_l(t))return n(t);return e.enter(s),e.enter(i),e.enter(o),e.enter("chunkString",{contentType:"string"}),p(t)};function u(n){return 62===n?(e.enter(r),e.consume(n),e.exit(r),e.exit(a),e.exit(s),t):(e.enter(o),e.enter("chunkString",{contentType:"string"}),h(n))}function h(t){return 62===t?(e.exit("chunkString"),e.exit(o),u(t)):null===t||60===t||Ul(t)?n(t):(e.consume(t),92===t?m:h)}function m(t){return 60===t||62===t||92===t?(e.consume(t),h):h(t)}function p(a){return d||null!==a&&41!==a&&!$l(a)?d<c&&40===a?(e.consume(a),d++,p):41===a?(e.consume(a),d--,p):null===a||32===a||40===a||_l(a)?n(a):(e.consume(a),92===a?f:p):(e.exit("chunkString"),e.exit(o),e.exit(i),e.exit(s),t(a))}function f(t){return 40===t||41===t||92===t?(e.consume(t),p):p(t)}}function vc(e,t,n,s,a,r){const i=this;let o,l=0;return function(t){return e.enter(s),e.enter(a),e.consume(t),e.exit(a),e.enter(r),c};function c(u){return l>999||null===u||91===u||93===u&&!o||94===u&&!l&&"_hiddenFootnoteSupport"in i.parser.constructs?n(u):93===u?(e.exit(r),e.enter(a),e.consume(u),e.exit(a),e.exit(s),t):Ul(u)?(e.enter("lineEnding"),e.consume(u),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),d(u))}function d(t){return null===t||91===t||93===t||Ul(t)||l++>999?(e.exit("chunkString"),c(t)):(e.consume(t),o||(o=!Hl(t)),92===t?u:d)}function u(t){return 91===t||92===t||93===t?(e.consume(t),l++,d):d(t)}}function bc(e,t,n,s,a,r){let i;return function(t){if(34===t||39===t||40===t)return e.enter(s),e.enter(a),e.consume(t),e.exit(a),i=40===t?41:t,o;return n(t)};function o(n){return n===i?(e.enter(a),e.consume(n),e.exit(a),e.exit(s),t):(e.enter(r),l(n))}function l(t){return t===i?(e.exit(r),o(i)):null===t?n(t):Ul(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),Gl(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(t))}function c(t){return t===i||null===t||Ul(t)?(e.exit("chunkString"),l(t)):(e.consume(t),92===t?d:c)}function d(t){return t===i||92===t?(e.consume(t),c):c(t)}}function jc(e,t){let n;return function s(a){if(Ul(a))return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),n=!0,s;if(Hl(a))return Gl(e,s,n?"linePrefix":"lineSuffix")(a);return t(a)}}const wc={name:"definition",tokenize:function(e,t,n){const s=this;let a;return function(t){return e.enter("definition"),function(t){return vc.call(s,e,r,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(t)}(t)};function r(t){return a=Ol(s.sliceSerialize(s.events[s.events.length-1][1]).slice(1,-1)),58===t?(e.enter("definitionMarker"),e.consume(t),e.exit("definitionMarker"),i):n(t)}function i(t){return $l(t)?jc(e,o)(t):o(t)}function o(t){return xc(e,l,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(t)}function l(t){return e.attempt(kc,c,c)(t)}function c(t){return Hl(t)?Gl(e,d,"whitespace")(t):d(t)}function d(r){return null===r||Ul(r)?(e.exit("definition"),s.parser.defined.push(a),t(r)):n(r)}}},kc={partial:!0,tokenize:function(e,t,n){return function(t){return $l(t)?jc(e,s)(t):n(t)};function s(t){return bc(e,a,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(t)}function a(t){return Hl(t)?Gl(e,r,"whitespace")(t):r(t)}function r(e){return null===e||Ul(e)?t(e):n(e)}}};const Nc={name:"hardBreakEscape",tokenize:function(e,t,n){return function(t){return e.enter("hardBreakEscape"),e.consume(t),s};function s(s){return Ul(s)?(e.exit("hardBreakEscape"),t(s)):n(s)}}};const Sc={name:"headingAtx",resolve:function(e,t){let n,s,a=e.length-2,r=3;"whitespace"===e[r][1].type&&(r+=2);a-2>r&&"whitespace"===e[a][1].type&&(a-=2);"atxHeadingSequence"===e[a][1].type&&(r===a-1||a-4>r&&"whitespace"===e[a-2][1].type)&&(a-=r+1===a?2:4);a>r&&(n={type:"atxHeadingText",start:e[r][1].start,end:e[a][1].end},s={type:"chunkText",start:e[r][1].start,end:e[a][1].end,contentType:"text"},Tl(e,r,a-r+1,[["enter",n,t],["enter",s,t],["exit",s,t],["exit",n,t]]));return e},tokenize:function(e,t,n){let s=0;return function(t){return e.enter("atxHeading"),function(t){return e.enter("atxHeadingSequence"),a(t)}(t)};function a(t){return 35===t&&s++<6?(e.consume(t),a):null===t||$l(t)?(e.exit("atxHeadingSequence"),r(t)):n(t)}function r(n){return 35===n?(e.enter("atxHeadingSequence"),i(n)):null===n||Ul(n)?(e.exit("atxHeading"),t(n)):Hl(n)?Gl(e,r,"whitespace")(n):(e.enter("atxHeadingText"),o(n))}function i(t){return 35===t?(e.consume(t),i):(e.exit("atxHeadingSequence"),r(t))}function o(t){return null===t||35===t||$l(t)?(e.exit("atxHeadingText"),r(t)):(e.consume(t),o)}}};const Cc=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],Tc=["pre","script","style","textarea"],Pc={concrete:!0,name:"htmlFlow",resolveTo:function(e){let t=e.length;for(;t--&&("enter"!==e[t][0]||"htmlFlow"!==e[t][1].type););t>1&&"linePrefix"===e[t-2][1].type&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2));return e},tokenize:function(e,t,n){const s=this;let a,r,i,o,l;return function(t){return function(t){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(t),c}(t)};function c(o){return 33===o?(e.consume(o),d):47===o?(e.consume(o),r=!0,m):63===o?(e.consume(o),a=3,s.interrupt?t:D):Dl(o)?(e.consume(o),i=String.fromCharCode(o),p):n(o)}function d(r){return 45===r?(e.consume(r),a=2,u):91===r?(e.consume(r),a=5,o=0,h):Dl(r)?(e.consume(r),a=4,s.interrupt?t:D):n(r)}function u(a){return 45===a?(e.consume(a),s.interrupt?t:D):n(a)}function h(a){const r="CDATA[";return a===r.charCodeAt(o++)?(e.consume(a),6===o?s.interrupt?t:C:h):n(a)}function m(t){return Dl(t)?(e.consume(t),i=String.fromCharCode(t),p):n(t)}function p(o){if(null===o||47===o||62===o||$l(o)){const l=47===o,c=i.toLowerCase();return l||r||!Tc.includes(c)?Cc.includes(i.toLowerCase())?(a=6,l?(e.consume(o),f):s.interrupt?t(o):C(o)):(a=7,s.interrupt&&!s.parser.lazy[s.now().line]?n(o):r?g(o):y(o)):(a=1,s.interrupt?t(o):C(o))}return 45===o||Rl(o)?(e.consume(o),i+=String.fromCharCode(o),p):n(o)}function f(a){return 62===a?(e.consume(a),s.interrupt?t:C):n(a)}function g(t){return Hl(t)?(e.consume(t),g):N(t)}function y(t){return 47===t?(e.consume(t),N):58===t||95===t||Dl(t)?(e.consume(t),x):Hl(t)?(e.consume(t),y):N(t)}function x(t){return 45===t||46===t||58===t||95===t||Rl(t)?(e.consume(t),x):v(t)}function v(t){return 61===t?(e.consume(t),b):Hl(t)?(e.consume(t),v):y(t)}function b(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),l=t,j):Hl(t)?(e.consume(t),b):w(t)}function j(t){return t===l?(e.consume(t),l=null,k):null===t||Ul(t)?n(t):(e.consume(t),j)}function w(t){return null===t||34===t||39===t||47===t||60===t||61===t||62===t||96===t||$l(t)?v(t):(e.consume(t),w)}function k(e){return 47===e||62===e||Hl(e)?y(e):n(e)}function N(t){return 62===t?(e.consume(t),S):n(t)}function S(t){return null===t||Ul(t)?C(t):Hl(t)?(e.consume(t),S):n(t)}function C(t){return 45===t&&2===a?(e.consume(t),L):60===t&&1===a?(e.consume(t),I):62===t&&4===a?(e.consume(t),R):63===t&&3===a?(e.consume(t),D):93===t&&5===a?(e.consume(t),O):!Ul(t)||6!==a&&7!==a?null===t||Ul(t)?(e.exit("htmlFlowData"),T(t)):(e.consume(t),C):(e.exit("htmlFlowData"),e.check(Ec,M,T)(t))}function T(t){return e.check(Lc,P,M)(t)}function P(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),E}function E(t){return null===t||Ul(t)?T(t):(e.enter("htmlFlowData"),C(t))}function L(t){return 45===t?(e.consume(t),D):C(t)}function I(t){return 47===t?(e.consume(t),i="",A):C(t)}function A(t){if(62===t){const n=i.toLowerCase();return Tc.includes(n)?(e.consume(t),R):C(t)}return Dl(t)&&i.length<8?(e.consume(t),i+=String.fromCharCode(t),A):C(t)}function O(t){return 93===t?(e.consume(t),D):C(t)}function D(t){return 62===t?(e.consume(t),R):45===t&&2===a?(e.consume(t),D):C(t)}function R(t){return null===t||Ul(t)?(e.exit("htmlFlowData"),M(t)):(e.consume(t),R)}function M(n){return e.exit("htmlFlow"),t(n)}}},Ec={partial:!0,tokenize:function(e,t,n){return function(s){return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),e.attempt(sc,t,n)}}},Lc={partial:!0,tokenize:function(e,t,n){const s=this;return function(t){if(Ul(t))return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),a;return n(t)};function a(e){return s.parser.lazy[s.now().line]?n(e):t(e)}}};const Ic={name:"htmlText",tokenize:function(e,t,n){const s=this;let a,r,i;return function(t){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(t),o};function o(t){return 33===t?(e.consume(t),l):47===t?(e.consume(t),b):63===t?(e.consume(t),x):Dl(t)?(e.consume(t),k):n(t)}function l(t){return 45===t?(e.consume(t),c):91===t?(e.consume(t),r=0,m):Dl(t)?(e.consume(t),y):n(t)}function c(t){return 45===t?(e.consume(t),h):n(t)}function d(t){return null===t?n(t):45===t?(e.consume(t),u):Ul(t)?(i=d,A(t)):(e.consume(t),d)}function u(t){return 45===t?(e.consume(t),h):d(t)}function h(e){return 62===e?I(e):45===e?u(e):d(e)}function m(t){const s="CDATA[";return t===s.charCodeAt(r++)?(e.consume(t),6===r?p:m):n(t)}function p(t){return null===t?n(t):93===t?(e.consume(t),f):Ul(t)?(i=p,A(t)):(e.consume(t),p)}function f(t){return 93===t?(e.consume(t),g):p(t)}function g(t){return 62===t?I(t):93===t?(e.consume(t),g):p(t)}function y(t){return null===t||62===t?I(t):Ul(t)?(i=y,A(t)):(e.consume(t),y)}function x(t){return null===t?n(t):63===t?(e.consume(t),v):Ul(t)?(i=x,A(t)):(e.consume(t),x)}function v(e){return 62===e?I(e):x(e)}function b(t){return Dl(t)?(e.consume(t),j):n(t)}function j(t){return 45===t||Rl(t)?(e.consume(t),j):w(t)}function w(t){return Ul(t)?(i=w,A(t)):Hl(t)?(e.consume(t),w):I(t)}function k(t){return 45===t||Rl(t)?(e.consume(t),k):47===t||62===t||$l(t)?N(t):n(t)}function N(t){return 47===t?(e.consume(t),I):58===t||95===t||Dl(t)?(e.consume(t),S):Ul(t)?(i=N,A(t)):Hl(t)?(e.consume(t),N):I(t)}function S(t){return 45===t||46===t||58===t||95===t||Rl(t)?(e.consume(t),S):C(t)}function C(t){return 61===t?(e.consume(t),T):Ul(t)?(i=C,A(t)):Hl(t)?(e.consume(t),C):N(t)}function T(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),a=t,P):Ul(t)?(i=T,A(t)):Hl(t)?(e.consume(t),T):(e.consume(t),E)}function P(t){return t===a?(e.consume(t),a=void 0,L):null===t?n(t):Ul(t)?(i=P,A(t)):(e.consume(t),P)}function E(t){return null===t||34===t||39===t||60===t||61===t||96===t?n(t):47===t||62===t||$l(t)?N(t):(e.consume(t),E)}function L(e){return 47===e||62===e||$l(e)?N(e):n(e)}function I(s){return 62===s?(e.consume(s),e.exit("htmlTextData"),e.exit("htmlText"),t):n(s)}function A(t){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),O}function O(t){return Hl(t)?Gl(e,D,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):D(t)}function D(t){return e.enter("htmlTextData"),i(t)}}};const Ac={name:"labelEnd",resolveAll:function(e){let t=-1;const n=[];for(;++t<e.length;){const s=e[t][1];if(n.push(e[t]),"labelImage"===s.type||"labelLink"===s.type||"labelEnd"===s.type){const e="labelImage"===s.type?4:2;s.type="data",t+=e}}e.length!==n.length&&Tl(e,0,e.length,n);return e},resolveTo:function(e,t){let n,s,a,r,i=e.length,o=0;for(;i--;)if(n=e[i][1],s){if("link"===n.type||"labelLink"===n.type&&n._inactive)break;"enter"===e[i][0]&&"labelLink"===n.type&&(n._inactive=!0)}else if(a){if("enter"===e[i][0]&&("labelImage"===n.type||"labelLink"===n.type)&&!n._balanced&&(s=i,"labelLink"!==n.type)){o=2;break}}else"labelEnd"===n.type&&(a=i);const l={type:"labelLink"===e[s][1].type?"link":"image",start:{...e[s][1].start},end:{...e[e.length-1][1].end}},c={type:"label",start:{...e[s][1].start},end:{...e[a][1].end}},d={type:"labelText",start:{...e[s+o+2][1].end},end:{...e[a-2][1].start}};return r=[["enter",l,t],["enter",c,t]],r=Pl(r,e.slice(s+1,s+o+3)),r=Pl(r,[["enter",d,t]]),r=Pl(r,Zl(t.parser.constructs.insideSpan.null,e.slice(s+o+4,a-3),t)),r=Pl(r,[["exit",d,t],e[a-2],e[a-1],["exit",c,t]]),r=Pl(r,e.slice(a+1)),r=Pl(r,[["exit",l,t]]),Tl(e,s,e.length,r),e},tokenize:function(e,t,n){const s=this;let a,r,i=s.events.length;for(;i--;)if(("labelImage"===s.events[i][1].type||"labelLink"===s.events[i][1].type)&&!s.events[i][1]._balanced){a=s.events[i][1];break}return function(t){if(!a)return n(t);if(a._inactive)return d(t);return r=s.parser.defined.includes(Ol(s.sliceSerialize({start:a.end,end:s.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelEnd"),o};function o(t){return 40===t?e.attempt(Oc,c,r?c:d)(t):91===t?e.attempt(Dc,c,r?l:d)(t):r?c(t):d(t)}function l(t){return e.attempt(Rc,c,d)(t)}function c(e){return t(e)}function d(e){return a._balanced=!0,n(e)}}},Oc={tokenize:function(e,t,n){return function(t){return e.enter("resource"),e.enter("resourceMarker"),e.consume(t),e.exit("resourceMarker"),s};function s(t){return $l(t)?jc(e,a)(t):a(t)}function a(t){return 41===t?c(t):xc(e,r,i,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(t)}function r(t){return $l(t)?jc(e,o)(t):c(t)}function i(e){return n(e)}function o(t){return 34===t||39===t||40===t?bc(e,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(t):c(t)}function l(t){return $l(t)?jc(e,c)(t):c(t)}function c(s){return 41===s?(e.enter("resourceMarker"),e.consume(s),e.exit("resourceMarker"),e.exit("resource"),t):n(s)}}},Dc={tokenize:function(e,t,n){const s=this;return function(t){return vc.call(s,e,a,r,"reference","referenceMarker","referenceString")(t)};function a(e){return s.parser.defined.includes(Ol(s.sliceSerialize(s.events[s.events.length-1][1]).slice(1,-1)))?t(e):n(e)}function r(e){return n(e)}}},Rc={tokenize:function(e,t,n){return function(t){return e.enter("reference"),e.enter("referenceMarker"),e.consume(t),e.exit("referenceMarker"),s};function s(s){return 93===s?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}};const Mc={name:"labelStartImage",resolveAll:Ac.resolveAll,tokenize:function(e,t,n){const s=this;return function(t){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(t),e.exit("labelImageMarker"),a};function a(t){return 91===t?(e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelImage"),r):n(t)}function r(e){return 94===e&&"_hiddenFootnoteSupport"in s.parser.constructs?n(e):t(e)}}};const _c={name:"labelStartLink",resolveAll:Ac.resolveAll,tokenize:function(e,t,n){const s=this;return function(t){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelLink"),a};function a(e){return 94===e&&"_hiddenFootnoteSupport"in s.parser.constructs?n(e):t(e)}}};const Fc={name:"lineEnding",tokenize:function(e,t){return function(n){return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),Gl(e,t,"linePrefix")}}};const Bc={name:"thematicBreak",tokenize:function(e,t,n){let s,a=0;return function(t){return e.enter("thematicBreak"),function(e){return s=e,r(e)}(t)};function r(r){return r===s?(e.enter("thematicBreakSequence"),i(r)):a>=3&&(null===r||Ul(r))?(e.exit("thematicBreak"),t(r)):n(r)}function i(t){return t===s?(e.consume(t),a++,i):(e.exit("thematicBreakSequence"),Hl(t)?Gl(e,r,"whitespace")(t):r(t))}}};const zc={continuation:{tokenize:function(e,t,n){const s=this;return s.containerState._closeFlow=void 0,e.check(sc,function(n){return s.containerState.furtherBlankLines=s.containerState.furtherBlankLines||s.containerState.initialBlankLine,Gl(e,t,"listItemIndent",s.containerState.size+1)(n)},function(n){if(s.containerState.furtherBlankLines||!Hl(n))return s.containerState.furtherBlankLines=void 0,s.containerState.initialBlankLine=void 0,a(n);return s.containerState.furtherBlankLines=void 0,s.containerState.initialBlankLine=void 0,e.attempt($c,t,a)(n)});function a(a){return s.containerState._closeFlow=!0,s.interrupt=void 0,Gl(e,e.attempt(zc,t,n),"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}},exit:function(e){e.exit(this.containerState.type)},name:"list",tokenize:function(e,t,n){const s=this,a=s.events[s.events.length-1];let r=a&&"linePrefix"===a[1].type?a[2].sliceSerialize(a[1],!0).length:0,i=0;return function(t){const a=s.containerState.type||(42===t||43===t||45===t?"listUnordered":"listOrdered");if("listUnordered"===a?!s.containerState.marker||t===s.containerState.marker:Fl(t)){if(s.containerState.type||(s.containerState.type=a,e.enter(a,{_container:!0})),"listUnordered"===a)return e.enter("listItemPrefix"),42===t||45===t?e.check(Bc,n,l)(t):l(t);if(!s.interrupt||49===t)return e.enter("listItemPrefix"),e.enter("listItemValue"),o(t)}return n(t)};function o(t){return Fl(t)&&++i<10?(e.consume(t),o):(!s.interrupt||i<2)&&(s.containerState.marker?t===s.containerState.marker:41===t||46===t)?(e.exit("listItemValue"),l(t)):n(t)}function l(t){return e.enter("listItemMarker"),e.consume(t),e.exit("listItemMarker"),s.containerState.marker=s.containerState.marker||t,e.check(sc,s.interrupt?n:c,e.attempt(Uc,u,d))}function c(e){return s.containerState.initialBlankLine=!0,r++,u(e)}function d(t){return Hl(t)?(e.enter("listItemPrefixWhitespace"),e.consume(t),e.exit("listItemPrefixWhitespace"),u):n(t)}function u(n){return s.containerState.size=r+s.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(n)}}},Uc={partial:!0,tokenize:function(e,t,n){const s=this;return Gl(e,function(e){const a=s.events[s.events.length-1];return!Hl(e)&&a&&"listItemPrefixWhitespace"===a[1].type?t(e):n(e)},"listItemPrefixWhitespace",s.parser.constructs.disable.null.includes("codeIndented")?void 0:5)}},$c={partial:!0,tokenize:function(e,t,n){const s=this;return Gl(e,function(e){const a=s.events[s.events.length-1];return a&&"listItemIndent"===a[1].type&&a[2].sliceSerialize(a[1],!0).length===s.containerState.size?t(e):n(e)},"listItemIndent",s.containerState.size+1)}};const Hc={name:"setextUnderline",resolveTo:function(e,t){let n,s,a,r=e.length;for(;r--;)if("enter"===e[r][0]){if("content"===e[r][1].type){n=r;break}"paragraph"===e[r][1].type&&(s=r)}else"content"===e[r][1].type&&e.splice(r,1),a||"definition"!==e[r][1].type||(a=r);const i={type:"setextHeading",start:{...e[n][1].start},end:{...e[e.length-1][1].end}};e[s][1].type="setextHeadingText",a?(e.splice(s,0,["enter",i,t]),e.splice(a+1,0,["exit",e[n][1],t]),e[n][1].end={...e[a][1].end}):e[n][1]=i;return e.push(["exit",i,t]),e},tokenize:function(e,t,n){const s=this;let a;return function(t){let i,o=s.events.length;for(;o--;)if("lineEnding"!==s.events[o][1].type&&"linePrefix"!==s.events[o][1].type&&"content"!==s.events[o][1].type){i="paragraph"===s.events[o][1].type;break}if(!s.parser.lazy[s.now().line]&&(s.interrupt||i))return e.enter("setextHeadingLine"),a=t,function(t){return e.enter("setextHeadingLineSequence"),r(t)}(t);return n(t)};function r(t){return t===a?(e.consume(t),r):(e.exit("setextHeadingLineSequence"),Hl(t)?Gl(e,i,"lineSuffix")(t):i(t))}function i(s){return null===s||Ul(s)?(e.exit("setextHeadingLine"),t(s)):n(s)}}};const Wc={tokenize:function(e){const t=this,n=e.attempt(sc,function(s){if(null===s)return void e.consume(s);return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n},e.attempt(this.parser.constructs.flowInitial,s,Gl(e,e.attempt(this.parser.constructs.flow,s,e.attempt(gc,s)),"linePrefix")));return n;function s(s){if(null!==s)return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n;e.consume(s)}}};const qc={resolveAll:Jc()},Vc=Gc("string"),Yc=Gc("text");function Gc(e){return{resolveAll:Jc("text"===e?Qc:void 0),tokenize:function(t){const n=this,s=this.parser.constructs[e],a=t.attempt(s,r,i);return r;function r(e){return l(e)?a(e):i(e)}function i(e){if(null!==e)return t.enter("data"),t.consume(e),o;t.consume(e)}function o(e){return l(e)?(t.exit("data"),a(e)):(t.consume(e),o)}function l(e){if(null===e)return!0;const t=s[e];let a=-1;if(t)for(;++a<t.length;){const e=t[a];if(!e.previous||e.previous.call(n,n.previous))return!0}return!1}}}}function Jc(e){return function(t,n){let s,a=-1;for(;++a<=t.length;)void 0===s?t[a]&&"data"===t[a][1].type&&(s=a,a++):t[a]&&"data"===t[a][1].type||(a!==s+2&&(t[s][1].end=t[a-1][1].end,t.splice(s+2,a-s-2),a=s+2),s=void 0);return e?e(t,n):t}}function Qc(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||"lineEnding"===e[n][1].type)&&"data"===e[n-1][1].type){const s=e[n-1][1],a=t.sliceStream(s);let r,i=a.length,o=-1,l=0;for(;i--;){const e=a[i];if("string"==typeof e){for(o=e.length;32===e.charCodeAt(o-1);)l++,o--;if(o)break;o=-1}else if(-2===e)r=!0,l++;else if(-1!==e){i++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(l=0),l){const a={type:n===e.length||r||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:i?o:s.start._bufferIndex+o,_index:s.start._index+i,line:s.end.line,column:s.end.column-l,offset:s.end.offset-l},end:{...s.end}};s.end={...a.start},s.start.offset===s.end.offset?Object.assign(s,a):(e.splice(n,0,["enter",a,t],["exit",a,t]),n+=2)}n++}return e}const Kc={42:zc,43:zc,45:zc,48:zc,49:zc,50:zc,51:zc,52:zc,53:zc,54:zc,55:zc,56:zc,57:zc,62:ac},Xc={91:wc},Zc={[-2]:cc,[-1]:cc,32:cc},ed={35:Sc,42:Bc,45:[Hc,Bc],60:Pc,61:Hc,95:Bc,96:lc,126:lc},td={38:ic,92:rc},nd={[-5]:Fc,[-4]:Fc,[-3]:Fc,33:Mc,38:ic,42:ec,60:[nc,Ic],91:_c,92:[Nc,rc],93:Ac,95:ec,96:uc},sd={null:[ec,qc]},ad=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:{null:[42,95]},contentInitial:Xc,disable:{null:[]},document:Kc,flow:ed,flowInitial:Zc,insideSpan:sd,string:td,text:nd},Symbol.toStringTag,{value:"Module"}));function rd(e,t,n){let s={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const a={},r=[];let i=[],o=[];const l={attempt:g(function(e,t){y(e,t.from)}),check:g(f),consume:function(e){Ul(e)?(s.line++,s.column=1,s.offset+=-3===e?2:1,x()):-1!==e&&(s.column++,s.offset++);s._bufferIndex<0?s._index++:(s._bufferIndex++,s._bufferIndex===i[s._index].length&&(s._bufferIndex=-1,s._index++));c.previous=e},enter:function(e,t){const n=t||{};return n.type=e,n.start=h(),c.events.push(["enter",n,c]),o.push(n),n},exit:function(e){const t=o.pop();return t.end=h(),c.events.push(["exit",t,c]),t},interrupt:g(f,{interrupt:!0})},c={code:null,containerState:{},defineSkip:function(e){a[e.line]=e.column,x()},events:[],now:h,parser:e,previous:null,sliceSerialize:function(e,t){return function(e,t){let n=-1;const s=[];let a;for(;++n<e.length;){const r=e[n];let i;if("string"==typeof r)i=r;else switch(r){case-5:i="\r";break;case-4:i="\n";break;case-3:i="\r\n";break;case-2:i=t?" ":"\t";break;case-1:if(!t&&a)continue;i=" ";break;default:i=String.fromCharCode(r)}a=-2===r,s.push(i)}return s.join("")}(u(e),t)},sliceStream:u,write:function(e){if(i=Pl(i,e),m(),null!==i[i.length-1])return[];return y(t,0),c.events=Zl(r,c.events,c),c.events}};let d=t.tokenize.call(c,l);return t.resolveAll&&r.push(t),c;function u(e){return function(e,t){const n=t.start._index,s=t.start._bufferIndex,a=t.end._index,r=t.end._bufferIndex;let i;if(n===a)i=[e[n].slice(s,r)];else{if(i=e.slice(n,a),s>-1){const e=i[0];"string"==typeof e?i[0]=e.slice(s):i.shift()}r>0&&i.push(e[a].slice(0,r))}return i}(i,e)}function h(){const{_bufferIndex:e,_index:t,line:n,column:a,offset:r}=s;return{_bufferIndex:e,_index:t,line:n,column:a,offset:r}}function m(){let e;for(;s._index<i.length;){const t=i[s._index];if("string"==typeof t)for(e=s._index,s._bufferIndex<0&&(s._bufferIndex=0);s._index===e&&s._bufferIndex<t.length;)p(t.charCodeAt(s._bufferIndex));else p(t)}}function p(e){d=d(e)}function f(e,t){t.restore()}function g(e,t){return function(n,a,r){let i,d,u,m;return Array.isArray(n)?p(n):"tokenize"in n?p([n]):function(e){return t;function t(t){const n=null!==t&&e[t],s=null!==t&&e.null;return p([...Array.isArray(n)?n:n?[n]:[],...Array.isArray(s)?s:s?[s]:[]])(t)}}(n);function p(e){return i=e,d=0,0===e.length?r:f(e[d])}function f(e){return function(n){m=function(){const e=h(),t=c.previous,n=c.currentConstruct,a=c.events.length,r=Array.from(o);return{from:a,restore:i};function i(){s=e,c.previous=t,c.currentConstruct=n,c.events.length=a,o=r,x()}}(),u=e,e.partial||(c.currentConstruct=e);if(e.name&&c.parser.constructs.disable.null.includes(e.name))return y();return e.tokenize.call(t?Object.assign(Object.create(c),t):c,l,g,y)(n)}}function g(t){return e(u,m),a}function y(e){return m.restore(),++d<i.length?f(i[d]):r}}}function y(e,t){e.resolveAll&&!r.includes(e)&&r.push(e),e.resolve&&Tl(c.events,t,c.events.length-t,e.resolve(c.events.slice(t),c)),e.resolveTo&&(c.events=e.resolveTo(c.events,c))}function x(){s.line in a&&s.column<2&&(s.column=a[s.line],s.offset+=a[s.line]-1)}}function id(e){const t={constructs:function(e){const t={};let n=-1;for(;++n<e.length;)Ll(t,e[n]);return t}([ad,...(e||{}).extensions||[]]),content:n(Jl),defined:[],document:n(Ql),flow:n(Wc),lazy:{},string:n(Vc),text:n(Yc)};return t;function n(e){return function(n){return rd(t,e,n)}}}const od=/[\0\t\n\r]/g;const ld=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function cd(e,t,n){if(t)return t;if(35===n.charCodeAt(0)){const e=n.charCodeAt(1),t=120===e||88===e;return Al(n.slice(t?2:1),t?16:10)}return Cl(n)||e}const dd={}.hasOwnProperty;function ud(e,t,n){return"string"!=typeof t&&(n=t,t=void 0),function(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:r(te),autolinkProtocol:S,autolinkEmail:S,atxHeading:r(K),blockQuote:r(V),characterEscape:S,characterReference:S,codeFenced:r(Y),codeFencedFenceInfo:i,codeFencedFenceMeta:i,codeIndented:r(Y,i),codeText:r(G,i),codeTextData:S,data:S,codeFlowValue:S,definition:r(J),definitionDestinationString:i,definitionLabelString:i,definitionTitleString:i,emphasis:r(Q),hardBreakEscape:r(X),hardBreakTrailing:r(X),htmlFlow:r(Z,i),htmlFlowData:S,htmlText:r(Z,i),htmlTextData:S,image:r(ee),label:i,link:r(te),listItem:r(se),listItemValue:h,listOrdered:r(ne,u),listUnordered:r(ne),paragraph:r(ae),reference:B,referenceString:i,resourceDestinationString:i,resourceTitleString:i,setextHeading:r(K),strong:r(re),thematicBreak:r(oe)},exit:{atxHeading:l(),atxHeadingSequence:j,autolink:l(),autolinkEmail:q,autolinkProtocol:W,blockQuote:l(),characterEscapeValue:C,characterReferenceMarkerHexadecimal:U,characterReferenceMarkerNumeric:U,characterReferenceValue:$,characterReference:H,codeFenced:l(g),codeFencedFence:f,codeFencedFenceInfo:m,codeFencedFenceMeta:p,codeFlowValue:C,codeIndented:l(y),codeText:l(I),codeTextData:C,data:C,definition:l(),definitionDestinationString:b,definitionLabelString:x,definitionTitleString:v,emphasis:l(),hardBreakEscape:l(P),hardBreakTrailing:l(P),htmlFlow:l(E),htmlFlowData:C,htmlText:l(L),htmlTextData:C,image:l(O),label:R,labelText:D,lineEnding:T,link:l(A),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:z,resourceDestinationString:M,resourceTitleString:_,resource:F,setextHeading:l(N),setextHeadingLineSequence:k,setextHeadingText:w,strong:l(),thematicBreak:l()}};md(t,(e||{}).mdastExtensions||[]);const n={};return s;function s(e){let s={type:"root",children:[]};const r={stack:[s],tokenStack:[],config:t,enter:o,exit:c,buffer:i,resume:d,data:n},l=[];let u=-1;for(;++u<e.length;)if("listOrdered"===e[u][1].type||"listUnordered"===e[u][1].type)if("enter"===e[u][0])l.push(u);else{u=a(e,l.pop(),u)}for(u=-1;++u<e.length;){const n=t[e[u][0]];dd.call(n,e[u][1].type)&&n[e[u][1].type].call(Object.assign({sliceSerialize:e[u][2].sliceSerialize},r),e[u][1])}if(r.tokenStack.length>0){const e=r.tokenStack[r.tokenStack.length-1];(e[1]||fd).call(r,void 0,e[0])}for(s.position={start:hd(e.length>0?e[0][1].start:{line:1,column:1,offset:0}),end:hd(e.length>0?e[e.length-2][1].end:{line:1,column:1,offset:0})},u=-1;++u<t.transforms.length;)s=t.transforms[u](s)||s;return s}function a(e,t,n){let s,a,r,i,o=t-1,l=-1,c=!1;for(;++o<=n;){const t=e[o];switch(t[1].type){case"listUnordered":case"listOrdered":case"blockQuote":"enter"===t[0]?l++:l--,i=void 0;break;case"lineEndingBlank":"enter"===t[0]&&(!s||i||l||r||(r=o),i=void 0);break;case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:i=void 0}if(!l&&"enter"===t[0]&&"listItemPrefix"===t[1].type||-1===l&&"exit"===t[0]&&("listUnordered"===t[1].type||"listOrdered"===t[1].type)){if(s){let i=o;for(a=void 0;i--;){const t=e[i];if("lineEnding"===t[1].type||"lineEndingBlank"===t[1].type){if("exit"===t[0])continue;a&&(e[a][1].type="lineEndingBlank",c=!0),t[1].type="lineEnding",a=i}else if("linePrefix"!==t[1].type&&"blockQuotePrefix"!==t[1].type&&"blockQuotePrefixWhitespace"!==t[1].type&&"blockQuoteMarker"!==t[1].type&&"listItemIndent"!==t[1].type)break}r&&(!a||r<a)&&(s._spread=!0),s.end=Object.assign({},a?e[a][1].start:t[1].end),e.splice(a||o,0,["exit",s,t[2]]),o++,n++}if("listItemPrefix"===t[1].type){const a={type:"listItem",_spread:!1,start:Object.assign({},t[1].start),end:void 0};s=a,e.splice(o,0,["enter",a,t[2]]),o++,n++,r=void 0,i=!0}}}return e[t][1]._spread=c,n}function r(e,t){return n;function n(n){o.call(this,e(n),n),t&&t.call(this,n)}}function i(){this.stack.push({type:"fragment",children:[]})}function o(e,t,n){this.stack[this.stack.length-1].children.push(e),this.stack.push(e),this.tokenStack.push([t,n||void 0]),e.position={start:hd(t.start),end:void 0}}function l(e){return t;function t(t){e&&e.call(this,t),c.call(this,t)}}function c(e,t){const n=this.stack.pop(),s=this.tokenStack.pop();if(!s)throw new Error("Cannot close `"+e.type+"` ("+el({start:e.start,end:e.end})+"): it’s not open");if(s[0].type!==e.type)if(t)t.call(this,e,s[0]);else{(s[1]||fd).call(this,e,s[0])}n.position.end=hd(e.end)}function d(){return function(e){return kl(e,"boolean"!=typeof wl.includeImageAlt||wl.includeImageAlt,"boolean"!=typeof wl.includeHtml||wl.includeHtml)}(this.stack.pop())}function u(){this.data.expectingFirstListItemValue=!0}function h(e){if(this.data.expectingFirstListItemValue){this.stack[this.stack.length-2].start=Number.parseInt(this.sliceSerialize(e),10),this.data.expectingFirstListItemValue=void 0}}function m(){const e=this.resume();this.stack[this.stack.length-1].lang=e}function p(){const e=this.resume();this.stack[this.stack.length-1].meta=e}function f(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function g(){const e=this.resume();this.stack[this.stack.length-1].value=e.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function y(){const e=this.resume();this.stack[this.stack.length-1].value=e.replace(/(\r?\n|\r)$/g,"")}function x(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=Ol(this.sliceSerialize(e)).toLowerCase()}function v(){const e=this.resume();this.stack[this.stack.length-1].title=e}function b(){const e=this.resume();this.stack[this.stack.length-1].url=e}function j(e){const t=this.stack[this.stack.length-1];if(!t.depth){const n=this.sliceSerialize(e).length;t.depth=n}}function w(){this.data.setextHeadingSlurpLineEnding=!0}function k(e){this.stack[this.stack.length-1].depth=61===this.sliceSerialize(e).codePointAt(0)?1:2}function N(){this.data.setextHeadingSlurpLineEnding=void 0}function S(e){const t=this.stack[this.stack.length-1].children;let n=t[t.length-1];n&&"text"===n.type||(n=ie(),n.position={start:hd(e.start),end:void 0},t.push(n)),this.stack.push(n)}function C(e){const t=this.stack.pop();t.value+=this.sliceSerialize(e),t.position.end=hd(e.end)}function T(e){const n=this.stack[this.stack.length-1];if(this.data.atHardBreak){return n.children[n.children.length-1].position.end=hd(e.end),void(this.data.atHardBreak=void 0)}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(n.type)&&(S.call(this,e),C.call(this,e))}function P(){this.data.atHardBreak=!0}function E(){const e=this.resume();this.stack[this.stack.length-1].value=e}function L(){const e=this.resume();this.stack[this.stack.length-1].value=e}function I(){const e=this.resume();this.stack[this.stack.length-1].value=e}function A(){const e=this.stack[this.stack.length-1];if(this.data.inReference){const t=this.data.referenceType||"shortcut";e.type+="Reference",e.referenceType=t,delete e.url,delete e.title}else delete e.identifier,delete e.label;this.data.referenceType=void 0}function O(){const e=this.stack[this.stack.length-1];if(this.data.inReference){const t=this.data.referenceType||"shortcut";e.type+="Reference",e.referenceType=t,delete e.url,delete e.title}else delete e.identifier,delete e.label;this.data.referenceType=void 0}function D(e){const t=this.sliceSerialize(e),n=this.stack[this.stack.length-2];n.label=function(e){return e.replace(ld,cd)}(t),n.identifier=Ol(t).toLowerCase()}function R(){const e=this.stack[this.stack.length-1],t=this.resume(),n=this.stack[this.stack.length-1];if(this.data.inReference=!0,"link"===n.type){const t=e.children;n.children=t}else n.alt=t}function M(){const e=this.resume();this.stack[this.stack.length-1].url=e}function _(){const e=this.resume();this.stack[this.stack.length-1].title=e}function F(){this.data.inReference=void 0}function B(){this.data.referenceType="collapsed"}function z(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=Ol(this.sliceSerialize(e)).toLowerCase(),this.data.referenceType="full"}function U(e){this.data.characterReferenceType=e.type}function $(e){const t=this.sliceSerialize(e),n=this.data.characterReferenceType;let s;if(n)s=Al(t,"characterReferenceMarkerNumeric"===n?10:16),this.data.characterReferenceType=void 0;else{s=Cl(t)}this.stack[this.stack.length-1].value+=s}function H(e){this.stack.pop().position.end=hd(e.end)}function W(e){C.call(this,e);this.stack[this.stack.length-1].url=this.sliceSerialize(e)}function q(e){C.call(this,e);this.stack[this.stack.length-1].url="mailto:"+this.sliceSerialize(e)}function V(){return{type:"blockquote",children:[]}}function Y(){return{type:"code",lang:null,meta:null,value:""}}function G(){return{type:"inlineCode",value:""}}function J(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Q(){return{type:"emphasis",children:[]}}function K(){return{type:"heading",depth:0,children:[]}}function X(){return{type:"break"}}function Z(){return{type:"html",value:""}}function ee(){return{type:"image",title:null,url:"",alt:null}}function te(){return{type:"link",title:null,url:"",children:[]}}function ne(e){return{type:"list",ordered:"listOrdered"===e.type,start:null,spread:e._spread,children:[]}}function se(e){return{type:"listItem",spread:e._spread,checked:null,children:[]}}function ae(){return{type:"paragraph",children:[]}}function re(){return{type:"strong",children:[]}}function ie(){return{type:"text",value:""}}function oe(){return{type:"thematicBreak"}}}(n)(function(e){for(;!pc(e););return e}(id(n).document().write(function(){let e,t=1,n="",s=!0;return function(a,r,i){const o=[];let l,c,d,u,h;for(a=n+("string"==typeof a?a.toString():new TextDecoder(r||void 0).decode(a)),d=0,n="",s&&(65279===a.charCodeAt(0)&&d++,s=void 0);d<a.length;){if(od.lastIndex=d,l=od.exec(a),u=l&&void 0!==l.index?l.index:a.length,h=a.charCodeAt(u),!l){n=a.slice(d);break}if(10===h&&d===u&&e)o.push(-3),e=void 0;else switch(e&&(o.push(-5),e=void 0),d<u&&(o.push(a.slice(d,u)),t+=u-d),h){case 0:o.push(65533),t++;break;case 9:for(c=4*Math.ceil(t/4),o.push(-2);t++<c;)o.push(-1);break;case 10:o.push(-4),t=1;break;default:e=!0,t=1}d=u+1}return i&&(e&&o.push(-5),n&&o.push(n),o.push(null)),o}}()(e,t,!0))))}function hd(e){return{line:e.line,column:e.column,offset:e.offset}}function md(e,t){let n=-1;for(;++n<t.length;){const s=t[n];Array.isArray(s)?md(e,s):pd(e,s)}}function pd(e,t){let n;for(n in t)if(dd.call(t,n))switch(n){case"canContainEols":{const s=t[n];s&&e[n].push(...s);break}case"transforms":{const s=t[n];s&&e[n].push(...s);break}case"enter":case"exit":{const s=t[n];s&&Object.assign(e[n],s);break}}}function fd(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+el({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+el({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+el({start:t.start,end:t.end})+") is still open")}function gd(e){const t=this;t.parser=function(n){return ud(n,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function yd(e,t){const n=t.referenceType;let s="]";if("collapsed"===n?s+="[]":"full"===n&&(s+="["+(t.label||t.identifier)+"]"),"imageReference"===t.type)return[{type:"text",value:"!["+t.alt+s}];const a=e.all(t),r=a[0];r&&"text"===r.type?r.value="["+r.value:a.unshift({type:"text",value:"["});const i=a[a.length-1];return i&&"text"===i.type?i.value+=s:a.push({type:"text",value:s}),a}function xd(e){const t=e.spread;return null==t?e.children.length>1:t}function vd(e){const t=String(e),n=/\r?\n|\r/g;let s=n.exec(t),a=0;const r=[];for(;s;)r.push(bd(t.slice(a,s.index),a>0,!0),s[0]),a=s.index+s[0].length,s=n.exec(t);return r.push(bd(t.slice(a),a>0,!1)),r.join("")}function bd(e,t,n){let s=0,a=e.length;if(t){let t=e.codePointAt(s);for(;9===t||32===t;)s++,t=e.codePointAt(s)}if(n){let t=e.codePointAt(a-1);for(;9===t||32===t;)a--,t=e.codePointAt(a-1)}return a>s?e.slice(s,a):""}const jd={blockquote:function(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)},break:function(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:"\n"}]},code:function(e,t){const n=t.value?t.value+"\n":"",s={};t.lang&&(s.className=["language-"+t.lang]);let a={type:"element",tagName:"code",properties:s,children:[{type:"text",value:n}]};return t.meta&&(a.data={meta:t.meta}),e.patch(t,a),a=e.applyData(t,a),a={type:"element",tagName:"pre",properties:{},children:[a]},e.patch(t,a),a},delete:function(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},emphasis:function(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},footnoteReference:function(e,t){const n="string"==typeof e.options.clobberPrefix?e.options.clobberPrefix:"user-content-",s=String(t.identifier).toUpperCase(),a=Yl(s.toLowerCase()),r=e.footnoteOrder.indexOf(s);let i,o=e.footnoteCounts.get(s);void 0===o?(o=0,e.footnoteOrder.push(s),i=e.footnoteOrder.length):i=r+1,o+=1,e.footnoteCounts.set(s,o);const l={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+a,id:n+"fnref-"+a+(o>1?"-"+o:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(i)}]};e.patch(t,l);const c={type:"element",tagName:"sup",properties:{},children:[l]};return e.patch(t,c),e.applyData(t,c)},heading:function(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},html:function(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}},imageReference:function(e,t){const n=String(t.identifier).toUpperCase(),s=e.definitionById.get(n);if(!s)return yd(e,t);const a={src:Yl(s.url||""),alt:t.alt};null!==s.title&&void 0!==s.title&&(a.title=s.title);const r={type:"element",tagName:"img",properties:a,children:[]};return e.patch(t,r),e.applyData(t,r)},image:function(e,t){const n={src:Yl(t.url)};null!==t.alt&&void 0!==t.alt&&(n.alt=t.alt),null!==t.title&&void 0!==t.title&&(n.title=t.title);const s={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,s),e.applyData(t,s)},inlineCode:function(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const s={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,s),e.applyData(t,s)},linkReference:function(e,t){const n=String(t.identifier).toUpperCase(),s=e.definitionById.get(n);if(!s)return yd(e,t);const a={href:Yl(s.url||"")};null!==s.title&&void 0!==s.title&&(a.title=s.title);const r={type:"element",tagName:"a",properties:a,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)},link:function(e,t){const n={href:Yl(t.url)};null!==t.title&&void 0!==t.title&&(n.title=t.title);const s={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)},listItem:function(e,t,n){const s=e.all(t),a=n?function(e){let t=!1;if("list"===e.type){t=e.spread||!1;const n=e.children;let s=-1;for(;!t&&++s<n.length;)t=xd(n[s])}return t}(n):xd(t),r={},i=[];if("boolean"==typeof t.checked){const e=s[0];let n;e&&"element"===e.type&&"p"===e.tagName?n=e:(n={type:"element",tagName:"p",properties:{},children:[]},s.unshift(n)),n.children.length>0&&n.children.unshift({type:"text",value:" "}),n.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),r.className=["task-list-item"]}let o=-1;for(;++o<s.length;){const e=s[o];(a||0!==o||"element"!==e.type||"p"!==e.tagName)&&i.push({type:"text",value:"\n"}),"element"!==e.type||"p"!==e.tagName||a?i.push(e):i.push(...e.children)}const l=s[s.length-1];l&&(a||"element"!==l.type||"p"!==l.tagName)&&i.push({type:"text",value:"\n"});const c={type:"element",tagName:"li",properties:r,children:i};return e.patch(t,c),e.applyData(t,c)},list:function(e,t){const n={},s=e.all(t);let a=-1;for("number"==typeof t.start&&1!==t.start&&(n.start=t.start);++a<s.length;){const e=s[a];if("element"===e.type&&"li"===e.tagName&&e.properties&&Array.isArray(e.properties.className)&&e.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const r={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(s,!0)};return e.patch(t,r),e.applyData(t,r)},paragraph:function(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},root:function(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)},strong:function(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},table:function(e,t){const n=e.all(t),s=n.shift(),a=[];if(s){const n={type:"element",tagName:"thead",properties:{},children:e.wrap([s],!0)};e.patch(t.children[0],n),a.push(n)}if(n.length>0){const s={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},r=Xo(t.children[1]),i=Ko(t.children[t.children.length-1]);r&&i&&(s.position={start:r,end:i}),a.push(s)}const r={type:"element",tagName:"table",properties:{},children:e.wrap(a,!0)};return e.patch(t,r),e.applyData(t,r)},tableCell:function(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},tableRow:function(e,t,n){const s=n?n.children:void 0,a=0===(s?s.indexOf(t):1)?"th":"td",r=n&&"table"===n.type?n.align:void 0,i=r?r.length:t.children.length;let o=-1;const l=[];for(;++o<i;){const n=t.children[o],s={},i=r?r[o]:void 0;i&&(s.align=i);let c={type:"element",tagName:a,properties:s,children:[]};n&&(c.children=e.all(n),e.patch(n,c),c=e.applyData(n,c)),l.push(c)}const c={type:"element",tagName:"tr",properties:{},children:e.wrap(l,!0)};return e.patch(t,c),e.applyData(t,c)},text:function(e,t){const n={type:"text",value:vd(String(t.value))};return e.patch(t,n),e.applyData(t,n)},thematicBreak:function(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)},toml:wd,yaml:wd,definition:wd,footnoteDefinition:wd};function wd(){}const kd="object"==typeof self?self:globalThis,Nd=e=>((e,t)=>{const n=(t,n)=>(e.set(n,t),t),s=a=>{if(e.has(a))return e.get(a);const[r,i]=t[a];switch(r){case 0:case-1:return n(i,a);case 1:{const e=n([],a);for(const t of i)e.push(s(t));return e}case 2:{const e=n({},a);for(const[t,n]of i)e[s(t)]=s(n);return e}case 3:return n(new Date(i),a);case 4:{const{source:e,flags:t}=i;return n(new RegExp(e,t),a)}case 5:{const e=n(new Map,a);for(const[t,n]of i)e.set(s(t),s(n));return e}case 6:{const e=n(new Set,a);for(const t of i)e.add(s(t));return e}case 7:{const{name:e,message:t}=i;return n(new kd[e](t),a)}case 8:return n(BigInt(i),a);case"BigInt":return n(Object(BigInt(i)),a);case"ArrayBuffer":return n(new Uint8Array(i).buffer,i);case"DataView":{const{buffer:e}=new Uint8Array(i);return n(new DataView(e),i)}}return n(new kd[r](i),a)};return s})(new Map,e)(0),Sd="",{toString:Cd}={},{keys:Td}=Object,Pd=e=>{const t=typeof e;if("object"!==t||!e)return[0,t];const n=Cd.call(e).slice(8,-1);switch(n){case"Array":return[1,Sd];case"Object":return[2,Sd];case"Date":return[3,Sd];case"RegExp":return[4,Sd];case"Map":return[5,Sd];case"Set":return[6,Sd];case"DataView":return[1,n]}return n.includes("Array")?[1,n]:n.includes("Error")?[7,n]:[2,n]},Ed=([e,t])=>0===e&&("function"===t||"symbol"===t),Ld=(e,{json:t,lossy:n}={})=>{const s=[];return((e,t,n,s)=>{const a=(e,t)=>{const a=s.push(e)-1;return n.set(t,a),a},r=s=>{if(n.has(s))return n.get(s);let[i,o]=Pd(s);switch(i){case 0:{let t=s;switch(o){case"bigint":i=8,t=s.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+o);t=null;break;case"undefined":return a([-1],s)}return a([i,t],s)}case 1:{if(o){let e=s;return"DataView"===o?e=new Uint8Array(s.buffer):"ArrayBuffer"===o&&(e=new Uint8Array(s)),a([o,[...e]],s)}const e=[],t=a([i,e],s);for(const n of s)e.push(r(n));return t}case 2:{if(o)switch(o){case"BigInt":return a([o,s.toString()],s);case"Boolean":case"Number":case"String":return a([o,s.valueOf()],s)}if(t&&"toJSON"in s)return r(s.toJSON());const n=[],l=a([i,n],s);for(const t of Td(s))!e&&Ed(Pd(s[t]))||n.push([r(t),r(s[t])]);return l}case 3:return a([i,s.toISOString()],s);case 4:{const{source:e,flags:t}=s;return a([i,{source:e,flags:t}],s)}case 5:{const t=[],n=a([i,t],s);for(const[a,i]of s)(e||!Ed(Pd(a))&&!Ed(Pd(i)))&&t.push([r(a),r(i)]);return n}case 6:{const t=[],n=a([i,t],s);for(const a of s)!e&&Ed(Pd(a))||t.push(r(a));return n}}const{message:l}=s;return a([i,{name:o,message:l}],s)};return r})(!(t||n),!!t,new Map,s)(e),s},Id="function"==typeof structuredClone?(e,t)=>t&&("json"in t||"lossy"in t)?Nd(Ld(e,t)):structuredClone(e):(e,t)=>Nd(Ld(e,t));function Ad(e,t){const n=[{type:"text",value:"↩"}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function Od(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}const Dd=function(e){if(null==e)return Md;if("function"==typeof e)return Rd(e);if("object"==typeof e)return Array.isArray(e)?function(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=Dd(e[n]);return Rd(s);function s(...e){let n=-1;for(;++n<t.length;)if(t[n].apply(this,e))return!0;return!1}}(e):function(e){const t=e;return Rd(n);function n(n){const s=n;let a;for(a in e)if(s[a]!==t[a])return!1;return!0}}(e);if("string"==typeof e)return function(e){return Rd(t);function t(t){return t&&t.type===e}}(e);throw new Error("Expected function, string, or object as test")};function Rd(e){return function(t,n,s){return Boolean(function(e){return null!==e&&"object"==typeof e&&"type"in e}(t)&&e.call(this,t,"number"==typeof n?n:void 0,s||void 0))}}function Md(){return!0}const _d=[],Fd=!0,Bd=!1;function zd(e,t,n,s){let a;"function"==typeof t&&"function"!=typeof n?(s=n,n=t):a=t;const r=Dd(a),i=s?-1:1;!function e(a,o,l){const c=a&&"object"==typeof a?a:{};if("string"==typeof c.type){const e="string"==typeof c.tagName?c.tagName:"string"==typeof c.name?c.name:void 0;Object.defineProperty(d,"name",{value:"node ("+a.type+(e?"<"+e+">":"")+")"})}return d;function d(){let c,d,u,h=_d;if((!t||r(a,o,l[l.length-1]||void 0))&&(h=function(e){if(Array.isArray(e))return e;if("number"==typeof e)return[Fd,e];return null==e?_d:[e]}(n(a,l)),h[0]===Bd))return h;if("children"in a&&a.children){const t=a;if(t.children&&"skip"!==h[0])for(d=(s?t.children.length:-1)+i,u=l.concat(t);d>-1&&d<t.children.length;){const n=t.children[d];if(c=e(n,d,u)(),c[0]===Bd)return c;d="number"==typeof c[1]?c[1]:d+i}}return h}}(e,void 0,[])()}function Ud(e,t,n,s){let a,r,i;"function"==typeof t&&"function"!=typeof n?(r=void 0,i=t,a=n):(r=t,i=n,a=s),zd(e,r,function(e,t){const n=t[t.length-1],s=n?n.children.indexOf(e):void 0;return i(e,s,n)},a)}const $d={}.hasOwnProperty,Hd={};function Wd(e,t){e.position&&(t.position=function(e){const t=Xo(e),n=Ko(e);if(t&&n)return{start:t,end:n}}(e))}function qd(e,t){let n=t;if(e&&e.data){const t=e.data.hName,s=e.data.hChildren,a=e.data.hProperties;if("string"==typeof t)if("element"===n.type)n.tagName=t;else{n={type:"element",tagName:t,properties:{},children:"children"in n?n.children:[n]}}"element"===n.type&&a&&Object.assign(n.properties,Id(a)),"children"in n&&n.children&&null!=s&&(n.children=s)}return n}function Vd(e,t){const n=t.data||{},s=!("value"in t)||$d.call(n,"hProperties")||$d.call(n,"hChildren")?{type:"element",tagName:"div",properties:{},children:e.all(t)}:{type:"text",value:t.value};return e.patch(t,s),e.applyData(t,s)}function Yd(e,t){const n=[];let s=-1;for(t&&n.push({type:"text",value:"\n"});++s<e.length;)s&&n.push({type:"text",value:"\n"}),n.push(e[s]);return t&&e.length>0&&n.push({type:"text",value:"\n"}),n}function Gd(e){let t=0,n=e.charCodeAt(t);for(;9===n||32===n;)t++,n=e.charCodeAt(t);return e.slice(t)}function Jd(e,t){const n=function(e,t){const n=t||Hd,s=new Map,a=new Map,r=new Map,i={...jd,...n.handlers},o={all:function(e){const t=[];if("children"in e){const n=e.children;let s=-1;for(;++s<n.length;){const a=o.one(n[s],e);if(a){if(s&&"break"===n[s-1].type&&(Array.isArray(a)||"text"!==a.type||(a.value=Gd(a.value)),!Array.isArray(a)&&"element"===a.type)){const e=a.children[0];e&&"text"===e.type&&(e.value=Gd(e.value))}Array.isArray(a)?t.push(...a):t.push(a)}}}return t},applyData:qd,definitionById:s,footnoteById:a,footnoteCounts:r,footnoteOrder:[],handlers:i,one:function(e,t){const n=e.type,s=o.handlers[n];if($d.call(o.handlers,n)&&s)return s(o,e,t);if(o.options.passThrough&&o.options.passThrough.includes(n)){if("children"in e){const{children:t,...n}=e,s=Id(n);return s.children=o.all(e),s}return Id(e)}return(o.options.unknownHandler||Vd)(o,e,t)},options:n,patch:Wd,wrap:Yd};return Ud(e,function(e){if("definition"===e.type||"footnoteDefinition"===e.type){const t="definition"===e.type?s:a,n=String(e.identifier).toUpperCase();t.has(n)||t.set(n,e)}}),o}(e,t),s=n.one(e,void 0),a=function(e){const t="string"==typeof e.options.clobberPrefix?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||Ad,s=e.options.footnoteBackLabel||Od,a=e.options.footnoteLabel||"Footnotes",r=e.options.footnoteLabelTagName||"h2",i=e.options.footnoteLabelProperties||{className:["sr-only"]},o=[];let l=-1;for(;++l<e.footnoteOrder.length;){const a=e.footnoteById.get(e.footnoteOrder[l]);if(!a)continue;const r=e.all(a),i=String(a.identifier).toUpperCase(),c=Yl(i.toLowerCase());let d=0;const u=[],h=e.footnoteCounts.get(i);for(;void 0!==h&&++d<=h;){u.length>0&&u.push({type:"text",value:" "});let e="string"==typeof n?n:n(l,d);"string"==typeof e&&(e={type:"text",value:e}),u.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+c+(d>1?"-"+d:""),dataFootnoteBackref:"",ariaLabel:"string"==typeof s?s:s(l,d),className:["data-footnote-backref"]},children:Array.isArray(e)?e:[e]})}const m=r[r.length-1];if(m&&"element"===m.type&&"p"===m.tagName){const e=m.children[m.children.length-1];e&&"text"===e.type?e.value+=" ":m.children.push({type:"text",value:" "}),m.children.push(...u)}else r.push(...u);const p={type:"element",tagName:"li",properties:{id:t+"fn-"+c},children:e.wrap(r,!0)};e.patch(a,p),o.push(p)}if(0!==o.length)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:r,properties:{...Id(i),id:"footnote-label"},children:[{type:"text",value:a}]},{type:"text",value:"\n"},{type:"element",tagName:"ol",properties:{},children:e.wrap(o,!0)},{type:"text",value:"\n"}]}}(n),r=Array.isArray(s)?{type:"root",children:s}:s||{type:"root",children:[]};return a&&r.children.push({type:"text",value:"\n"},a),r}function Qd(e,t){return e&&"run"in e?async function(n,s){const a=Jd(n,{file:s,...t});await e.run(a,s)}:function(n,s){return Jd(n,{file:s,...e||t})}}function Kd(e){if(e)throw e}var Xd=Object.prototype.hasOwnProperty,Zd=Object.prototype.toString,eu=Object.defineProperty,tu=Object.getOwnPropertyDescriptor,nu=function(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===Zd.call(e)},su=function(e){if(!e||"[object Object]"!==Zd.call(e))return!1;var t,n=Xd.call(e,"constructor"),s=e.constructor&&e.constructor.prototype&&Xd.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!n&&!s)return!1;for(t in e);return void 0===t||Xd.call(e,t)},au=function(e,t){eu&&"__proto__"===t.name?eu(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},ru=function(e,t){if("__proto__"===t){if(!Xd.call(e,t))return;if(tu)return tu(e,t).value}return e[t]},iu=function e(){var t,n,s,a,r,i,o=arguments[0],l=1,c=arguments.length,d=!1;for("boolean"==typeof o&&(d=o,o=arguments[1]||{},l=2),(null==o||"object"!=typeof o&&"function"!=typeof o)&&(o={});l<c;++l)if(null!=(t=arguments[l]))for(n in t)s=ru(o,n),o!==(a=ru(t,n))&&(d&&a&&(su(a)||(r=nu(a)))?(r?(r=!1,i=s&&nu(s)?s:[]):i=s&&su(s)?s:{},au(o,{name:n,newValue:e(d,i,a)})):void 0!==a&&au(o,{name:n,newValue:a}));return o};const ou=r(iu);function lu(e){if("object"!=typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)}function cu(){const e=[],t={run:function(...t){let n=-1;const s=t.pop();if("function"!=typeof s)throw new TypeError("Expected function as last argument, not "+s);!function a(r,...i){const o=e[++n];let l=-1;if(r)s(r);else{for(;++l<t.length;)null!==i[l]&&void 0!==i[l]||(i[l]=t[l]);t=i,o?function(e,t){let n;return s;function s(...t){const s=e.length>t.length;let o;s&&t.push(a);try{o=e.apply(this,t)}catch(r){if(s&&n)throw r;return a(r)}s||(o&&o.then&&"function"==typeof o.then?o.then(i,a):o instanceof Error?a(o):i(o))}function a(e,...s){n||(n=!0,t(e,...s))}function i(e){a(null,e)}}(o,a)(...i):s(null,...i)}}(null,...t)},use:function(n){if("function"!=typeof n)throw new TypeError("Expected `middelware` to be a function, not "+n);return e.push(n),t}};return t}const du={basename:function(e,t){if(void 0!==t&&"string"!=typeof t)throw new TypeError('"ext" argument must be a string');uu(e);let n,s=0,a=-1,r=e.length;if(void 0===t||0===t.length||t.length>e.length){for(;r--;)if(47===e.codePointAt(r)){if(n){s=r+1;break}}else a<0&&(n=!0,a=r+1);return a<0?"":e.slice(s,a)}if(t===e)return"";let i=-1,o=t.length-1;for(;r--;)if(47===e.codePointAt(r)){if(n){s=r+1;break}}else i<0&&(n=!0,i=r+1),o>-1&&(e.codePointAt(r)===t.codePointAt(o--)?o<0&&(a=r):(o=-1,a=i));s===a?a=i:a<0&&(a=e.length);return e.slice(s,a)},dirname:function(e){if(uu(e),0===e.length)return".";let t,n=-1,s=e.length;for(;--s;)if(47===e.codePointAt(s)){if(t){n=s;break}}else t||(t=!0);return n<0?47===e.codePointAt(0)?"/":".":1===n&&47===e.codePointAt(0)?"//":e.slice(0,n)},extname:function(e){uu(e);let t,n=e.length,s=-1,a=0,r=-1,i=0;for(;n--;){const o=e.codePointAt(n);if(47!==o)s<0&&(t=!0,s=n+1),46===o?r<0?r=n:1!==i&&(i=1):r>-1&&(i=-1);else if(t){a=n+1;break}}if(r<0||s<0||0===i||1===i&&r===s-1&&r===a+1)return"";return e.slice(r,s)},join:function(...e){let t,n=-1;for(;++n<e.length;)uu(e[n]),e[n]&&(t=void 0===t?e[n]:t+"/"+e[n]);return void 0===t?".":function(e){uu(e);const t=47===e.codePointAt(0);let n=function(e,t){let n,s,a="",r=0,i=-1,o=0,l=-1;for(;++l<=e.length;){if(l<e.length)n=e.codePointAt(l);else{if(47===n)break;n=47}if(47===n){if(i===l-1||1===o);else if(i!==l-1&&2===o){if(a.length<2||2!==r||46!==a.codePointAt(a.length-1)||46!==a.codePointAt(a.length-2))if(a.length>2){if(s=a.lastIndexOf("/"),s!==a.length-1){s<0?(a="",r=0):(a=a.slice(0,s),r=a.length-1-a.lastIndexOf("/")),i=l,o=0;continue}}else if(a.length>0){a="",r=0,i=l,o=0;continue}t&&(a=a.length>0?a+"/..":"..",r=2)}else a.length>0?a+="/"+e.slice(i+1,l):a=e.slice(i+1,l),r=l-i-1;i=l,o=0}else 46===n&&o>-1?o++:o=-1}return a}(e,!t);0!==n.length||t||(n=".");n.length>0&&47===e.codePointAt(e.length-1)&&(n+="/");return t?"/"+n:n}(t)},sep:"/"};function uu(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const hu={cwd:function(){return"/"}};function mu(e){return Boolean(null!==e&&"object"==typeof e&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&void 0===e.auth)}function pu(e){if("string"==typeof e)e=new URL(e);else if(!mu(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if("file:"!==e.protocol){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return function(e){if(""!==e.hostname){const e=new TypeError('File URL host must be "localhost" or empty on darwin');throw e.code="ERR_INVALID_FILE_URL_HOST",e}const t=e.pathname;let n=-1;for(;++n<t.length;)if(37===t.codePointAt(n)&&50===t.codePointAt(n+1)){const e=t.codePointAt(n+2);if(70===e||102===e){const e=new TypeError("File URL path must not include encoded / characters");throw e.code="ERR_INVALID_FILE_URL_PATH",e}}return decodeURIComponent(t)}(e)}const fu=["history","path","basename","stem","extname","dirname"];class gu{constructor(e){let t;t=e?mu(e)?{path:e}:"string"==typeof e||function(e){return Boolean(e&&"object"==typeof e&&"byteLength"in e&&"byteOffset"in e)}(e)?{value:e}:e:{},this.cwd="cwd"in t?"":hu.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let n,s=-1;for(;++s<fu.length;){const e=fu[s];e in t&&void 0!==t[e]&&null!==t[e]&&(this[e]="history"===e?[...t[e]]:t[e])}for(n in t)fu.includes(n)||(this[n]=t[n])}get basename(){return"string"==typeof this.path?du.basename(this.path):void 0}set basename(e){xu(e,"basename"),yu(e,"basename"),this.path=du.join(this.dirname||"",e)}get dirname(){return"string"==typeof this.path?du.dirname(this.path):void 0}set dirname(e){vu(this.basename,"dirname"),this.path=du.join(e||"",this.basename)}get extname(){return"string"==typeof this.path?du.extname(this.path):void 0}set extname(e){if(yu(e,"extname"),vu(this.dirname,"extname"),e){if(46!==e.codePointAt(0))throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=du.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){mu(e)&&(e=pu(e)),xu(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return"string"==typeof this.path?du.basename(this.path,this.extname):void 0}set stem(e){xu(e,"stem"),yu(e,"stem"),this.path=du.join(this.dirname||"",e+(this.extname||""))}fail(e,t,n){const s=this.message(e,t,n);throw s.fatal=!0,s}info(e,t,n){const s=this.message(e,t,n);return s.fatal=void 0,s}message(e,t,n){const s=new al(e,t,n);return this.path&&(s.name=this.path+":"+s.name,s.file=this.path),s.fatal=!1,this.messages.push(s),s}toString(e){if(void 0===this.value)return"";if("string"==typeof this.value)return this.value;return new TextDecoder(e||void 0).decode(this.value)}}function yu(e,t){if(e&&e.includes(du.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+du.sep+"`")}function xu(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function vu(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}const bu=function(e){const t=this.constructor.prototype,n=t[e],s=function(){return n.apply(s,arguments)};return Object.setPrototypeOf(s,t),s},ju={}.hasOwnProperty;class wu extends bu{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=cu()}copy(){const e=new wu;let t=-1;for(;++t<this.attachers.length;){const n=this.attachers[t];e.use(...n)}return e.data(ou(!0,{},this.namespace)),e}data(e,t){return"string"==typeof e?2===arguments.length?(Cu("data",this.frozen),this.namespace[e]=t,this):ju.call(this.namespace,e)&&this.namespace[e]||void 0:e?(Cu("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[t,...n]=this.attachers[this.freezeIndex];if(!1===n[0])continue;!0===n[0]&&(n[0]=void 0);const s=t.call(e,...n);"function"==typeof s&&this.transformers.use(s)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const t=Eu(e),n=this.parser||this.Parser;return Nu("parse",n),n(String(t),t)}process(e,t){const n=this;return this.freeze(),Nu("process",this.parser||this.Parser),Su("process",this.compiler||this.Compiler),t?s(void 0,t):new Promise(s);function s(s,a){const r=Eu(e),i=n.parse(r);function o(e,n){e||!n?a(e):s?s(n):t(void 0,n)}n.run(i,r,function(e,t,s){if(e||!t||!s)return o(e);const a=t,r=n.stringify(a,s);var i;"string"==typeof(i=r)||function(e){return Boolean(e&&"object"==typeof e&&"byteLength"in e&&"byteOffset"in e)}(i)?s.value=r:s.result=r,o(e,s)})}}processSync(e){let t,n=!1;return this.freeze(),Nu("processSync",this.parser||this.Parser),Su("processSync",this.compiler||this.Compiler),this.process(e,function(e,s){n=!0,Kd(e),t=s}),Pu("processSync","process",n),t}run(e,t,n){Tu(e),this.freeze();const s=this.transformers;return n||"function"!=typeof t||(n=t,t=void 0),n?a(void 0,n):new Promise(a);function a(a,r){const i=Eu(t);s.run(e,i,function(t,s,i){const o=s||e;t?r(t):a?a(o):n(void 0,o,i)})}}runSync(e,t){let n,s=!1;return this.run(e,t,function(e,t){Kd(e),n=t,s=!0}),Pu("runSync","run",s),n}stringify(e,t){this.freeze();const n=Eu(t),s=this.compiler||this.Compiler;return Su("stringify",s),Tu(e),s(e,n)}use(e,...t){const n=this.attachers,s=this.namespace;if(Cu("use",this.frozen),null==e);else if("function"==typeof e)o(e,t);else{if("object"!=typeof e)throw new TypeError("Expected usable value, not `"+e+"`");Array.isArray(e)?i(e):r(e)}return this;function a(e){if("function"==typeof e)o(e,[]);else{if("object"!=typeof e)throw new TypeError("Expected usable value, not `"+e+"`");if(Array.isArray(e)){const[t,...n]=e;o(t,n)}else r(e)}}function r(e){if(!("plugins"in e)&&!("settings"in e))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");i(e.plugins),e.settings&&(s.settings=ou(!0,s.settings,e.settings))}function i(e){let t=-1;if(null==e);else{if(!Array.isArray(e))throw new TypeError("Expected a list of plugins, not `"+e+"`");for(;++t<e.length;){a(e[t])}}}function o(e,t){let s=-1,a=-1;for(;++s<n.length;)if(n[s][0]===e){a=s;break}if(-1===a)n.push([e,...t]);else if(t.length>0){let[s,...r]=t;const i=n[a][1];lu(i)&&lu(s)&&(s=ou(!0,i,s)),n[a]=[e,s,...r]}}}}const ku=(new wu).freeze();function Nu(e,t){if("function"!=typeof t)throw new TypeError("Cannot `"+e+"` without `parser`")}function Su(e,t){if("function"!=typeof t)throw new TypeError("Cannot `"+e+"` without `compiler`")}function Cu(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function Tu(e){if(!lu(e)||"string"!=typeof e.type)throw new TypeError("Expected node, got `"+e+"`")}function Pu(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function Eu(e){return function(e){return Boolean(e&&"object"==typeof e&&"message"in e&&"messages"in e)}(e)?e:new gu(e)}const Lu=[],Iu={allowDangerousHtml:!0},Au=/^(https?|ircs?|mailto|xmpp)$/i,Ou=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function Du(e){const t=function(e){const t=e.rehypePlugins||Lu,n=e.remarkPlugins||Lu,s=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...Iu}:Iu,a=ku().use(gd).use(n).use(Qd,s).use(t);return a}(e),n=function(e){const t=e.children||"",n=new gu;"string"==typeof t&&(n.value=t);return n}(e);return function(e,t){const n=t.allowedElements,s=t.allowElement,a=t.components,r=t.disallowedElements,i=t.skipHtml,o=t.unwrapDisallowed,l=t.urlTransform||Ru;for(const d of Ou)Object.hasOwn(t,d.from)&&Fi((d.from,d.to&&d.to,d.id));return Ud(e,c),ul(e,{Fragment:M.Fragment,components:a,ignoreInvalidStyle:!0,jsx:M.jsx,jsxs:M.jsxs,passKeys:!0,passNode:!0});function c(e,t,a){if("raw"===e.type&&a&&"number"==typeof t)return i?a.children.splice(t,1):a.children[t]={type:"text",value:e.value},t;if("element"===e.type){let t;for(t in jl)if(Object.hasOwn(jl,t)&&Object.hasOwn(e.properties,t)){const n=e.properties[t],s=jl[t];(null===s||s.includes(e.tagName))&&(e.properties[t]=l(String(n||""),t,e))}}if("element"===e.type){let i=n?!n.includes(e.tagName):!!r&&r.includes(e.tagName);if(!i&&s&&"number"==typeof t&&(i=!s(e,t,a)),i&&a&&"number"==typeof t)return o&&e.children?a.children.splice(t,1,...e.children):a.children.splice(t,1),t}}}(t.runSync(t.parse(n),n),e)}function Ru(e){const t=e.indexOf(":"),n=e.indexOf("?"),s=e.indexOf("#"),a=e.indexOf("/");return-1===t||-1!==a&&t>a||-1!==n&&t>n||-1!==s&&t>s||Au.test(e.slice(0,t))?e:""}const Mu=({children:e,className:t="",variant:n="primary",animate:s=!0,size:a="base"})=>{const r={primary:["#047857","#064E3B","#065F46"],secondary:["#10B981","#059669","#047857"],accent:["#3B82F6","#2563EB","#1D4ED8"],rainbow:["#047857","#10B981","#3B82F6","#EF4444","#F59E0B"],saytrix:["#14F195","#10B981","#059669"]},i={sm:"text-sm",base:"text-base",lg:"text-lg",xl:"text-xl","2xl":"text-2xl","3xl":"text-3xl"},o={background:`linear-gradient(135deg, ${(r[n]||r.primary).join(", ")})`,backgroundSize:s?"200% 200%":"100% 100%",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"};return s?M.jsx(y.span,{className:`gradient-text ${i[a]} ${t}`,style:o,animate:{backgroundPosition:["0% 50%","100% 50%","0% 50%"]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},children:e}):M.jsx("span",{className:`gradient-text ${i[a]} ${t}`,style:o,children:e})},_u=({title:e,subtitle:t,highlight:n,variant:s="primary",align:a="center",className:r="",animate:i=!0})=>{const o={left:"text-left",center:"text-center",right:"text-right"},l=()=>{if(n&&e.includes(n)){const t=e.split(n);return M.jsxs(M.Fragment,{children:[t[0],M.jsx(Mu,{variant:s,animate:i,children:n}),t[1]]})}return e};return i?M.jsxs(y.div,{className:`section-header-modern ${o[a]} ${r}`,initial:{opacity:0,y:30},whileInView:{opacity:1,y:0},transition:{duration:.6},viewport:{once:!0},children:[M.jsx(y.h2,{className:"section-title-modern",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.1},viewport:{once:!0},children:l()}),t&&M.jsx(y.p,{className:"section-subtitle-modern",initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},transition:{duration:.6,delay:.2},viewport:{once:!0},children:t})]}):M.jsxs("div",{className:`section-header-modern ${o[a]} ${r}`,children:[M.jsx("h2",{className:"section-title-modern",children:l()}),t&&M.jsx("p",{className:"section-subtitle-modern",children:t})]})},Fu=()=>{const[e,t]=n.useState([]),[s,a]=n.useState(0),[r,i]=n.useState(!1),[o,l]=n.useState(""),[c,d]=n.useState(""),u=n.useRef(null),h=[{type:"user",message:"Compare TCS and Infosys for me",timestamp:"2:34 PM"},{type:"ai",message:"Great question! Here's a detailed comparison:\n\n**TCS (Tata Consultancy Services)**\n• Current Price: ₹3,789.60 (+1.21%)\n• Market Cap: ₹13.8L Cr\n• P/E Ratio: 28.5\n• Dividend Yield: 1.8%\n\n**Infosys**\n• Current Price: ₹1,456.75 (-0.57%)\n• Market Cap: ₹6.2L Cr\n• P/E Ratio: 24.2\n• Dividend Yield: 2.1%\n\nMy Analysis: TCS has stronger fundamentals and market leadership, but Infosys offers better value at current levels. For long-term investment, I'd lean towards TCS.",timestamp:"2:34 PM"},{type:"user",message:"What about the technical analysis?",timestamp:"2:35 PM"},{type:"ai",message:"📈 **Technical Analysis:**\n\n**TCS:**\n• RSI: 65 (Slightly overbought)\n• Moving Average: Above 50-day MA\n• Support: ₹3,650 | Resistance: ₹3,850\n• Trend: Bullish momentum\n\n**Infosys:**\n• RSI: 45 (Neutral zone)\n• Moving Average: Near 50-day MA\n• Support: ₹1,400 | Resistance: ₹1,500\n• Trend: Consolidation phase\n\nRecommendation: TCS shows stronger momentum, while Infosys is in a good accumulation zone.",timestamp:"2:35 PM"}];n.useEffect(()=>{if(s>=h.length){const e=setTimeout(()=>{t([]),a(0)},5e3);return()=>clearTimeout(e)}const e=h[s];let n;if("user"===e.type)t(t=>[...t,e]),n=setTimeout(()=>{a(e=>e+1)},1e3);else{i(!0),d("");const s=e.message.split(" ");let r=0;const o=()=>{r<s.length?(d(e=>e+" "+s[r]),r++,n=setTimeout(o,40)):(i(!1),t(t=>[...t,e]),n=setTimeout(()=>{a(e=>e+1)},3e3))};o()}return()=>clearTimeout(n)},[s,h.length]),n.useEffect(()=>{var e;null==(e=u.current)||e.scrollIntoView({behavior:"smooth"})},[e,r,c]);const m=()=>{};return M.jsx("section",{className:"saytrix-chat-preview",children:M.jsxs("div",{className:"container",children:[M.jsx(_u,{title:"Meet Saytrix AI Assistant",subtitle:"Your personal trading mentor powered by advanced AI",highlight:"Saytrix",variant:"saytrix"}),M.jsxs("div",{className:"chat-demo-container",children:[M.jsxs(y.div,{className:"chat-window",initial:{opacity:0,scale:.95},whileInView:{opacity:1,scale:1},transition:{duration:.6,delay:.2},viewport:{once:!0},children:[M.jsxs("div",{className:"chat-header",children:[M.jsx("div",{className:"chat-avatar",children:M.jsx(mt,{size:20})}),M.jsxs("div",{className:"chat-info",children:[M.jsx("h3",{children:"Saytrix AI"}),M.jsx("span",{className:"status",children:"Online • Ready to help"})]}),M.jsx("div",{className:"voice-indicator",children:M.jsx(zt,{size:16})})]}),M.jsxs("div",{className:"chat-messages",children:[M.jsxs(g,{children:[e.map((e,t)=>M.jsxs(y.div,{className:`message ${e.type}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:[M.jsx("div",{className:"message-avatar",children:"user"===e.type?M.jsx(pn,{size:16}):M.jsx(mt,{size:16})}),M.jsxs("div",{className:"message-content",children:[M.jsx("div",{className:"message-text",children:"ai"===e.type?M.jsx(Du,{children:e.message}):M.jsx("p",{children:e.message})}),M.jsx("span",{className:"message-time",children:e.timestamp})]})]},t)),r&&M.jsxs(y.div,{className:"message ai typing",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[M.jsx("div",{className:"message-avatar",children:M.jsx(mt,{size:16})}),M.jsx("div",{className:"message-content",children:M.jsx("div",{className:"message-text message-text--temp",children:M.jsx(Du,{children:c})})})]},"typing-message")]}),M.jsx("div",{ref:u})]}),M.jsxs("div",{className:"chat-input-container",children:[M.jsx("div",{className:"quick-actions",children:["Compare stocks","Market analysis","Portfolio review","Risk assessment"].map((e,t)=>M.jsx(y.button,{className:"quick-action-btn",onClick:()=>(e=>{l(e)})(e),whileHover:{scale:1.05},whileTap:{scale:.95},initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.1*t},children:e},e))}),M.jsxs("div",{className:"chat-input",children:[M.jsx("input",{type:"text",placeholder:"Ask Saytrix anything about stocks...",value:o,onChange:e=>l(e.target.value),onKeyDown:e=>"Enter"===e.key&&void 0}),M.jsx("button",{className:"send-btn",onClick:m,children:M.jsx(en,{size:16})})]})]})]}),M.jsxs(y.div,{className:"chat-features",initial:{opacity:0,x:50},whileInView:{opacity:1,x:0},transition:{duration:.6,delay:.4},viewport:{once:!0},children:[M.jsx("h3",{children:"What Saytrix Can Do:"}),M.jsxs("ul",{children:[M.jsx("li",{children:"📊 Real-time stock analysis"}),M.jsx("li",{children:"📈 Technical chart interpretation"}),M.jsx("li",{children:"💰 Portfolio optimization tips"}),M.jsx("li",{children:"🎯 Risk assessment guidance"}),M.jsx("li",{children:"📰 Market news summaries"}),M.jsx("li",{children:"🗣️ Voice command support"})]}),M.jsxs(y.button,{className:"try-saytrix-btn",whileHover:{scale:1.05},whileTap:{scale:.95},children:["Try Saytrix Now ",M.jsx(Xe,{size:16})]})]})]})]})})},Bu=()=>{const[e,t]=n.useState(null),s=[{icon:Ft,title:"AI Assistant – Saytrix",description:"Ask anything, get instant insights. Your personal finance mentor available 24/7 with voice commands.",color:"#3B82F6",badge:"AI Powered",details:["Voice-activated commands","Real-time market analysis","Personalized recommendations","Smart portfolio insights"]},{icon:sn,title:"Virtual Stock Trading",description:"Learn risk-free with ₹1L demo money. Practice with real Indian stock prices and market conditions.",color:"#10B981",badge:"Risk Free",details:["₹1,00,000 virtual money","Real NSE & BSE prices","Zero financial risk","Practice trading strategies"]},{icon:mn,title:"Live Indian Stock Data",description:"Real-time NSE & BSE data powered by FMP API. 30-second refresh with professional-grade accuracy.",color:"#F59E0B",badge:"Real Time",details:["30-second data refresh","NSE & BSE coverage","Professional-grade accuracy","Live market indicators"]},{icon:rt,title:"Portfolio Tracker",description:"Realistic P&L tracking, detailed charts, and comprehensive transaction history with analytics.",color:"#8B5CF6",badge:"Professional",details:["Real-time P&L tracking","Advanced analytics","Transaction history","Performance metrics"]},{icon:vn,title:"Secure Login",description:"Google OAuth integration plus email OTP support. Your data is protected with enterprise security.",color:"#EF4444",badge:"Secure",details:["Google OAuth integration","Email OTP verification","Enterprise-grade security","Data encryption"]},{icon:dn,title:"Dark & Light Mode",description:"Beautiful El-Classico theme with seamless dark/light mode switching for comfortable trading.",color:"#6366F1",badge:"Customizable",details:["El-Classico theme","Seamless mode switching","Eye-friendly design","Professional aesthetics"]}],a={hidden:{opacity:0,x:-20},visible:{opacity:1,x:0,transition:{duration:.5,ease:"easeOut"}}};return M.jsx("section",{className:"animated-features-section",children:M.jsxs("div",{className:"container",children:[M.jsx(_u,{title:"Complete Trading Ecosystem",subtitle:"From beginner-friendly tools to advanced analytics, TradeBro provides everything you need to succeed",highlight:"Everything You Need",variant:"secondary"}),M.jsx(y.div,{className:"animated-features-list",variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},initial:"hidden",whileInView:"visible",viewport:{once:!0,margin:"-100px"},children:s.map((n,s)=>{const r=n.icon,i=e===s;return M.jsxs(y.div,{className:"feature-list-item",variants:a,onMouseEnter:()=>t(s),onMouseLeave:()=>t(null),style:{"--feature-color":n.color},children:[M.jsxs("div",{className:"feature-item-content",children:[M.jsxs("div",{className:"feature-item-header",children:[M.jsx("div",{className:"feature-item-icon",style:{color:n.color},children:M.jsx(r,{size:24})}),M.jsxs("div",{className:"feature-item-info",children:[M.jsxs("div",{className:"feature-item-title-row",children:[M.jsx("h3",{className:"feature-item-title",children:n.title}),M.jsx("span",{className:"feature-item-badge",style:{backgroundColor:`${n.color}15`,color:n.color},children:n.badge})]}),M.jsx("p",{className:"feature-item-description",children:n.description})]}),M.jsx(y.div,{className:"feature-item-arrow",animate:{x:i?4:0},transition:{duration:.2},children:M.jsx(Xe,{size:16})})]}),M.jsx(g,{children:i&&M.jsx(y.div,{className:"feature-item-details",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3,ease:"easeInOut"},children:M.jsx("div",{className:"feature-details-grid",children:n.details.map((e,t)=>M.jsxs(y.div,{className:"feature-detail-item",initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.05*t},children:[M.jsx(ct,{size:14,style:{color:n.color}}),M.jsx("span",{children:e})]},t))})})})]}),M.jsx(y.div,{className:"feature-item-glow",style:{background:`${n.color}10`},animate:{opacity:i?1:0},transition:{duration:.3}})]},s)})})]})})},zu=()=>{const e=o(),[t,s]=n.useState(0),r=[{step:"01",title:"Create Your Account",description:"Sign up in under 2 minutes and get ₹10,000 virtual money to start trading risk-free",icon:fn,details:["Quick email or Google signup","₹10,000 virtual trading money","Instant account activation","No documents required"],color:"#3B82F6"},{step:"02",title:"Learn with Saytrix AI",description:"Get personalized market insights, stock analysis, and trading recommendations from our AI assistant",icon:rt,details:["Voice-activated AI assistant","Real-time market analysis","Personalized recommendations","Interactive learning modules"],color:"#10B981"},{step:"03",title:"Trade & Grow",description:"Execute trades, track your portfolio performance, and build wealth with professional-grade tools",icon:mn,details:["Real NSE & BSE stock prices","Professional trading charts","Portfolio performance tracking","Risk-free practice environment"],color:"#F59E0B"},{step:"04",title:"Master the Markets",description:"Compete on leaderboards, earn rewards, and become a confident trader with our gamified learning system",icon:tt,details:["Global leaderboards","Achievement system","Daily trading challenges","Community competitions"],color:"#8B5CF6"}];return M.jsx("section",{className:"tradebro-stepper-section",children:M.jsxs("div",{className:"container",children:[M.jsx(_u,{title:"How TradeBro Works",subtitle:"Master trading with our step-by-step approach",highlight:"TradeBro",variant:"primary"}),M.jsxs("div",{className:"stepper-container",children:[M.jsx("div",{className:"stepper-navigation",children:r.map((e,n)=>{const a=e.icon,r=n===t,i=n<t;return M.jsxs(y.div,{className:`step-item ${r?"active":""} ${i?"completed":""}`,onClick:()=>(e=>{s(e)})(n),whileHover:{scale:1.02},whileTap:{scale:.98},style:{"--step-color":e.color},children:[M.jsxs("div",{className:"step-indicator",children:[M.jsx("div",{className:"step-number",children:i?M.jsx(ct,{size:16}):M.jsx("span",{children:e.step})}),M.jsx("div",{className:"step-icon",style:{color:e.color},children:M.jsx(a,{size:20})})]}),M.jsxs("div",{className:"step-content",children:[M.jsx("h3",{className:"step-title",children:e.title}),M.jsx("p",{className:"step-description",children:e.description})]})]},n)})}),M.jsx(g,{mode:"wait",children:M.jsxs(y.div,{className:"step-details",initial:{opacity:0,x:20},animate:{opacity:1,x:0},exit:{opacity:0,x:-20},transition:{duration:.3},children:[M.jsxs("div",{className:"step-details-header",children:[M.jsx("div",{className:"step-details-icon",style:{color:r[t].color},children:a.createElement(r[t].icon,{size:32})}),M.jsxs("div",{children:[M.jsx("h3",{className:"step-details-title",children:r[t].title}),M.jsx("p",{className:"step-details-description",children:r[t].description})]})]}),M.jsx("div",{className:"step-details-list",children:r[t].details.map((e,n)=>M.jsxs(y.div,{className:"detail-item",initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{delay:.1*n},children:[M.jsx(ct,{size:16,style:{color:r[t].color}}),M.jsx("span",{children:e})]},n))}),M.jsx(y.div,{className:"step-actions",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},children:t<r.length-1?M.jsxs("button",{className:"next-step-btn",onClick:()=>s(t+1),style:{backgroundColor:r[t].color},children:["Next Step",M.jsx(Xe,{size:16})]}):M.jsxs("button",{className:"get-started-btn",onClick:()=>e("/signup"),style:{backgroundColor:r[t].color},children:["Get Started Now",M.jsx(Xe,{size:16})]})})]},t)})]})]})})},Uu=({theme:e="light",onToggleTheme:t=()=>{}})=>{const n=o();return M.jsxs("div",{className:"landing-page",children:[M.jsx(Ai,{isAuthenticated:!1,theme:e,onToggleTheme:t,onLogin:()=>{n("/login")},onSignup:()=>{n("/signup")}}),M.jsxs("section",{className:"hero-section",children:[M.jsxs("div",{className:"hero-background",children:[M.jsx(Di,{gridSize:40,lineColor:"rgba(59, 130, 246, 0.1)",speed:20}),M.jsx(Oi,{orbCount:3,colors:["#3B82F6","#10B981","#8B5CF6"],size:"large"})]}),M.jsxs("div",{className:"hero-container-grid",children:[M.jsxs(y.div,{className:"hero-content",initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.8},children:[M.jsxs(y.h1,{className:"hero-title",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.2},children:["Master the Markets with",M.jsx("br",{}),M.jsx(Mi,{})]}),M.jsx(y.p,{className:"hero-subtitle",initial:{opacity:0},animate:{opacity:1},transition:{duration:.8,delay:.4},children:"Experience the future of stock trading with Saytrix AI assistant, real-time market data, professional-grade charts, and risk-free virtual trading. Join 75,000+ traders building wealth intelligently."}),M.jsx(y.div,{className:"hero-actions",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.6},children:M.jsx(y.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:M.jsxs(c,{to:"/signup",className:"btn-premium btn-primary btn-large",children:[M.jsx(vn,{}),"Start Trading Free",M.jsx(Xe,{})]})})})]}),M.jsx(y.div,{className:"hero-visual",initial:{opacity:0,x:50},animate:{opacity:1,x:0},transition:{duration:.8,delay:.2},children:M.jsxs("div",{className:"interactive-dashboard",children:[M.jsxs("div",{className:"dashboard-header",children:[M.jsxs("div",{className:"header-dots",children:[M.jsx(y.span,{initial:{scale:0},animate:{scale:1},transition:{delay:.8,duration:.3}}),M.jsx(y.span,{initial:{scale:0},animate:{scale:1},transition:{delay:.9,duration:.3}}),M.jsx(y.span,{initial:{scale:0},animate:{scale:1},transition:{delay:1,duration:.3}})]}),M.jsx(y.span,{className:"dashboard-title",initial:{opacity:0},animate:{opacity:1},transition:{delay:1.1,duration:.5},children:"TradeBro Dashboard"})]}),M.jsx("div",{className:"dashboard-content",children:M.jsx(Ri,{})})]})})]})]}),M.jsx("section",{id:"features",children:M.jsx(Bu,{})}),M.jsx("section",{id:"ai-demo",children:M.jsx(Fu,{})}),M.jsx("section",{id:"how-it-works",children:M.jsx(zu,{})})]})},$u=({disabled:e=!1})=>e?M.jsx("button",{className:"google-button disabled",disabled:!0,type:"button",children:M.jsx("span",{children:"Loading..."})}):M.jsxs("button",{className:"google-button",onClick:()=>{window.location.href="https://s89-satya-capstone-tradebro.onrender.com/api/auth/google"},type:"button",children:[M.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",children:[M.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),M.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),M.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),M.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),Hu=({onVerify:e,onCancel:t,email:s})=>{const[a,r]=n.useState(""),[i,o]=n.useState(!1),[l,c]=n.useState("");return M.jsx("div",{className:"two-factor-modal",children:M.jsxs("div",{className:"two-factor-content",children:[M.jsxs("div",{className:"two-factor-header",children:[M.jsx(sn,{size:32}),M.jsx("h2",{children:"Two-Factor Authentication"}),M.jsxs("p",{children:["Enter the 6-digit code sent to ",s]})]}),M.jsxs("form",{onSubmit:async t=>{if(t.preventDefault(),6===a.length){o(!0),c("");try{const t=await fetch("/api/auth/verify-2fa",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s,code:a})}),n=await t.json();n.success?e(n.token,n.user):c(n.message||"Invalid code")}catch(n){c("Verification failed. Please try again.")}finally{o(!1)}}else c("Please enter a 6-digit code")},className:"two-factor-form",children:[M.jsx("div",{className:"code-input-group",children:M.jsx("input",{type:"text",value:a,onChange:e=>r(e.target.value.replace(/\D/g,"").slice(0,6)),placeholder:"000000",className:"code-input",maxLength:6,autoFocus:!0})}),l&&M.jsxs("div",{className:"error-message",children:[M.jsx(xn,{size:16}),l]}),M.jsxs("div",{className:"two-factor-actions",children:[M.jsx("button",{type:"button",onClick:t,className:"cancel-btn",disabled:i,children:"Cancel"}),M.jsx("button",{type:"submit",className:"verify-btn",disabled:i||6!==a.length,children:i?"Verifying...":M.jsxs(M.Fragment,{children:[M.jsx(ct,{size:16}),"Verify"]})})]})]})]})})},Wu=({onLogin:e})=>{var t,s;const a=o(),r=l(),[i,d]=n.useState({email:"",password:""}),[u,h]=n.useState(!1),[m,p]=n.useState({}),[f,g]=n.useState(!1),[x,v]=n.useState(!1),[b,j]=n.useState(""),w=(null==(s=null==(t=r.state)?void 0:t.from)?void 0:s.pathname)||"/dashboard",k=localStorage.getItem("redirectAfterLogin")||w;n.useEffect(()=>{var e;if("oauth_failed"===new URLSearchParams(window.location.search).get("error"))return qe.error("Google authentication failed. Please try again."),void window.history.replaceState({},document.title,window.location.pathname);(null==(e=r.state)?void 0:e.from)&&qe.info("Please log in to access that page",{position:"top-right",autoClose:3e3})},[r.search,a]);const N=e=>{const{name:t,value:n}=e.target;d(e=>({...e,[t]:n})),m[t]&&p(e=>({...e,[t]:""}))},S=(t,n)=>{e(n,t),qe.success("Welcome back! Login successful",{position:"top-right",autoClose:2e3}),a(k,{replace:!0}),localStorage.removeItem("redirectAfterLogin")},C=()=>{v(!1),j("")};return x?M.jsx(Hu,{email:b,onVerify:S,onCancel:C}):M.jsx("div",{className:"auth-page",children:M.jsxs(y.div,{className:"auth-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[M.jsxs("div",{className:"auth-header",children:[M.jsxs("div",{className:"auth-logo",children:[M.jsx("div",{className:"auth-logo-icon",children:"📈"}),M.jsx("h1",{className:"auth-logo-text",children:"TradeBro"})]}),M.jsxs("div",{children:[M.jsx("h2",{className:"auth-title",children:"Welcome Back"}),M.jsx("p",{className:"auth-subtitle",children:"Sign in to your account to continue trading"})]})]}),M.jsxs("form",{onSubmit:async t=>{if(t.preventDefault(),(()=>{const e={};return i.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i.email)||(e.email="Please enter a valid email address"):e.email="Email is required",i.password?i.password.length<6&&(e.password="Password must be at least 6 characters"):e.password="Password is required",p(e),0===Object.keys(e).length})()){h(!0),p({});try{const t="https://s89-satya-capstone-tradebro.onrender.com",n=await fetch(`${t}/api/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i.email,password:i.password})}),s=await n.json();n.ok&&s.success?s.requiresTwoFactor?(j(s.email),v(!0),qe.info("Please enter the 2FA code sent to your email",{position:"top-right",autoClose:3e3})):(e(s.user,s.token),qe.success("Welcome back! Login successful",{position:"top-right",autoClose:2e3}),a(k,{replace:!0}),localStorage.removeItem("redirectAfterLogin")):(p({general:s.message||"Login failed. Please try again."}),qe.error(s.message||"Invalid credentials. Please try again.",{position:"top-right",autoClose:3e3}))}catch(n){p({general:"Network error. Please try again."}),qe.error("Network error. Please check your connection.",{position:"top-right",autoClose:3e3})}finally{h(!1)}}},className:"auth-form",children:[m.general&&M.jsxs("div",{className:"error-message",children:[M.jsx(Ye,{size:16}),M.jsx("span",{children:m.general})]}),M.jsxs("div",{className:"form-group",children:[M.jsxs("label",{className:"form-label",children:[M.jsx(Rt,{size:16}),"Email Address"]}),M.jsx("input",{type:"email",name:"email",value:i.email,onChange:N,className:"form-input "+(m.email?"form-input-error":""),placeholder:"Enter your email",disabled:u,autoComplete:"email",required:!0}),m.email&&M.jsxs("div",{className:"form-error",children:[M.jsx(Ye,{size:14}),M.jsx("span",{children:m.email})]})]}),M.jsxs("div",{className:"form-group",children:[M.jsxs("label",{className:"form-label",children:[M.jsx(At,{size:16}),"Password"]}),M.jsx("input",{type:"password",name:"password",value:i.password,onChange:N,className:"form-input "+(m.password?"form-input-error":""),placeholder:"Enter your password",disabled:u,autoComplete:"current-password",required:!0}),m.password&&M.jsxs("div",{className:"form-error",children:[M.jsx(Ye,{size:14}),M.jsx("span",{children:m.password})]})]}),M.jsxs("div",{className:"form-options",children:[M.jsxs("label",{className:"checkbox-label",children:[M.jsx("input",{type:"checkbox",checked:f,onChange:e=>{g(e.target.checked)},disabled:u,id:"remember-me"}),M.jsx("span",{children:"Remember me"})]}),M.jsx(c,{to:"/forgot-password",className:"forgot-link",children:"Forgot password?"})]}),M.jsx("button",{type:"submit",className:"auth-submit",disabled:u,children:u?M.jsx("div",{className:"loading-spinner"}):M.jsxs(M.Fragment,{children:["Sign In",M.jsx(Xe,{size:16})]})})]}),M.jsx("div",{className:"auth-divider",children:M.jsx("span",{children:"or continue with"})}),M.jsx($u,{disabled:u}),M.jsx("div",{className:"auth-footer",children:M.jsxs("p",{children:["Don't have an account?"," ",M.jsx(c,{to:"/signup",children:"Sign up for free"})]})})]})})},qu=({onSignup:e})=>{const t=o(),[s,a]=n.useState({name:"",email:"",password:"",confirmPassword:""}),[r,i]=n.useState(!1),[l,d]=n.useState({}),[u,h]=n.useState(!1),[m,p]=n.useState({length:!1,uppercase:!1,lowercase:!1,number:!1,special:!1}),f=localStorage.getItem("redirectAfterLogin")||"/dashboard",g=e=>{const{name:t,value:n}=e.target;a(e=>({...e,[t]:n})),"password"===t&&(e=>{const t={length:e.length>=8,uppercase:/[A-Z]/.test(e),lowercase:/[a-z]/.test(e),number:/\d/.test(e),special:/[!@#$%^&*(),.?":{}|<>]/.test(e)};p(t)})(n),l[t]&&d(e=>({...e,[t]:""}))},x=()=>Object.values(m).filter(Boolean).length,v=()=>{const e=x();return e<2?"#ef4444":e<4?"#f59e0b":"#10b981"};return M.jsx("div",{className:"auth-page",children:M.jsxs(y.div,{className:"auth-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[M.jsxs("div",{className:"auth-header",children:[M.jsxs("div",{className:"auth-logo",children:[M.jsx("div",{className:"auth-logo-icon",children:"📈"}),M.jsx("h1",{className:"auth-logo-text",children:"TradeBro"})]}),M.jsxs("div",{children:[M.jsx("h2",{className:"auth-title",children:"Create Account"}),M.jsx("p",{className:"auth-subtitle",children:"Join TradeBro and start your trading journey today"})]})]}),M.jsxs("form",{onSubmit:async n=>{if(n.preventDefault(),(()=>{const e={};return s.name.trim()?s.name.trim().length<2&&(e.name="Name must be at least 2 characters"):e.name="Full name is required",s.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.email)||(e.email="Please enter a valid email address"):e.email="Email is required",s.password?s.password.length<8&&(e.password="Password must be at least 8 characters"):e.password="Password is required",s.confirmPassword?s.password!==s.confirmPassword&&(e.confirmPassword="Passwords do not match"):e.confirmPassword="Please confirm your password",u||(e.terms="You must accept the Terms of Service and Privacy Policy"),d(e),0===Object.keys(e).length})()){i(!0),d({});try{const n=s.email.split("@")[0].replace(/[^a-zA-Z0-9]/g,""),a=n+Date.now().toString().slice(-4),r="https://s89-satya-capstone-tradebro.onrender.com",i=await fetch(`${r}/api/auth/signup`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:a,email:s.email,password:s.password,fullName:s.name})}),o=await i.json();if(i.ok&&o.success)e(o.user,o.token),qe.success("Welcome to TradeBro! Account created successfully",{position:"top-right",autoClose:2e3}),setTimeout(()=>{t(f,{replace:!0}),localStorage.removeItem("redirectAfterLogin")},1e3);else if(o.errors&&"object"==typeof o.errors){d(o.errors);const e=Object.values(o.errors)[0];qe.error(e||"Please fix the validation errors.",{position:"top-right",autoClose:4e3})}else d({general:o.message||"Signup failed. Please try again."}),qe.error(o.message||"Signup failed. Please try again.",{position:"top-right",autoClose:3e3})}catch(a){d({general:"Network error. Please try again."}),qe.error("Network error. Please check your connection.",{position:"top-right",autoClose:3e3})}finally{i(!1)}}},className:"auth-form",children:[l.general&&M.jsxs("div",{className:"error-message",children:[M.jsx(Ye,{size:16}),M.jsx("span",{children:l.general})]}),M.jsxs("div",{className:"form-group",children:[M.jsxs("label",{className:"form-label",children:[M.jsx(pn,{size:16}),"Full Name"]}),M.jsx("input",{type:"text",name:"name",value:s.name,onChange:g,className:"form-input "+(l.name?"form-input-error":""),placeholder:"Enter your full name",disabled:r,autoComplete:"name",required:!0}),l.name&&M.jsxs("div",{className:"form-error",children:[M.jsx(Ye,{size:14}),M.jsx("span",{children:l.name})]})]}),M.jsxs("div",{className:"form-group",children:[M.jsxs("label",{className:"form-label",children:[M.jsx(Rt,{size:16}),"Email Address"]}),M.jsx("input",{type:"email",name:"email",value:s.email,onChange:g,className:"form-input "+(l.email?"form-input-error":""),placeholder:"Enter your email",disabled:r,autoComplete:"email",required:!0}),l.email&&M.jsxs("div",{className:"form-error",children:[M.jsx(Ye,{size:14}),M.jsx("span",{children:l.email})]})]}),M.jsxs("div",{className:"form-group",children:[M.jsxs("label",{className:"form-label",children:[M.jsx(At,{size:16}),"Password"]}),M.jsx("input",{type:"password",name:"password",value:s.password,onChange:g,className:"form-input "+(l.password?"form-input-error":""),placeholder:"Create a password",disabled:r,autoComplete:"new-password",required:!0}),l.password&&M.jsxs("div",{className:"form-error",children:[M.jsx(Ye,{size:14}),M.jsx("span",{children:l.password})]}),s.password&&M.jsxs("div",{className:"password-strength",children:[M.jsx("div",{className:"password-strength-bar",children:M.jsx("div",{className:"password-strength-fill",style:{width:x()/5*100+"%",backgroundColor:v()}})}),M.jsx("span",{className:"password-strength-text",style:{color:v()},children:(()=>{const e=x();return e<2?"Weak":e<4?"Medium":"Strong"})()})]})]}),M.jsxs("div",{className:"form-group",children:[M.jsxs("label",{className:"form-label",children:[M.jsx(At,{size:16}),"Confirm Password"]}),M.jsx("input",{type:"password",name:"confirmPassword",value:s.confirmPassword,onChange:g,className:"form-input "+(l.confirmPassword?"form-input-error":""),placeholder:"Confirm your password",disabled:r,autoComplete:"new-password",required:!0}),l.confirmPassword&&M.jsxs("div",{className:"form-error",children:[M.jsx(Ye,{size:14}),M.jsx("span",{children:l.confirmPassword})]})]}),M.jsxs("div",{className:"form-group",children:[M.jsxs("label",{className:"checkbox-label",children:[M.jsx("input",{type:"checkbox",checked:u,onChange:e=>h(e.target.checked),disabled:r}),M.jsxs("span",{children:["I agree to the"," ",M.jsx(c,{to:"/terms",children:"Terms of Service"})," ","and"," ",M.jsx(c,{to:"/privacy",children:"Privacy Policy"})]})]}),l.terms&&M.jsxs("div",{className:"form-error",children:[M.jsx(Ye,{size:14}),M.jsx("span",{children:l.terms})]})]}),M.jsx("button",{type:"submit",className:"auth-submit",disabled:r,children:r?M.jsx("div",{className:"loading-spinner"}):M.jsxs(M.Fragment,{children:["Create Account",M.jsx(Xe,{size:16})]})})]}),M.jsx("div",{className:"auth-divider",children:M.jsx("span",{children:"or continue with"})}),M.jsx($u,{disabled:r}),M.jsx("div",{className:"auth-footer",children:M.jsxs("p",{children:["Already have an account?"," ",M.jsx(c,{to:"/login",children:"Sign in"})]})})]})})};var Vu,Yu,Gu,Ju={},Qu={exports:{}};Vu=Qu.exports,Yu=function(){return Yu=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Yu.apply(this,arguments)},Gu=function(){function e(e,t,n){var s=this;this.endVal=t,this.options=n,this.version="2.9.0",this.defaults={startVal:0,decimalPlaces:0,duration:2,useEasing:!0,useGrouping:!0,useIndianSeparators:!1,smartEasingThreshold:999,smartEasingAmount:333,separator:",",decimal:".",prefix:"",suffix:"",enableScrollSpy:!1,scrollSpyDelay:200,scrollSpyOnce:!1},this.finalEndVal=null,this.useEasing=!0,this.countDown=!1,this.error="",this.startVal=0,this.paused=!0,this.once=!1,this.count=function(e){s.startTime||(s.startTime=e);var t=e-s.startTime;s.remaining=s.duration-t,s.useEasing?s.countDown?s.frameVal=s.startVal-s.easingFn(t,0,s.startVal-s.endVal,s.duration):s.frameVal=s.easingFn(t,s.startVal,s.endVal-s.startVal,s.duration):s.frameVal=s.startVal+(s.endVal-s.startVal)*(t/s.duration);var n=s.countDown?s.frameVal<s.endVal:s.frameVal>s.endVal;s.frameVal=n?s.endVal:s.frameVal,s.frameVal=Number(s.frameVal.toFixed(s.options.decimalPlaces)),s.printValue(s.frameVal),t<s.duration?s.rAF=requestAnimationFrame(s.count):null!==s.finalEndVal?s.update(s.finalEndVal):s.options.onCompleteCallback&&s.options.onCompleteCallback()},this.formatNumber=function(e){var t,n,a,r,i=e<0?"-":"";t=Math.abs(e).toFixed(s.options.decimalPlaces);var o=(t+="").split(".");if(n=o[0],a=o.length>1?s.options.decimal+o[1]:"",s.options.useGrouping){r="";for(var l=3,c=0,d=0,u=n.length;d<u;++d)s.options.useIndianSeparators&&4===d&&(l=2,c=1),0!==d&&c%l==0&&(r=s.options.separator+r),c++,r=n[u-d-1]+r;n=r}return s.options.numerals&&s.options.numerals.length&&(n=n.replace(/[0-9]/g,function(e){return s.options.numerals[+e]}),a=a.replace(/[0-9]/g,function(e){return s.options.numerals[+e]})),i+s.options.prefix+n+a+s.options.suffix},this.easeOutExpo=function(e,t,n,s){return n*(1-Math.pow(2,-10*e/s))*1024/1023+t},this.options=Yu(Yu({},this.defaults),n),this.formattingFn=this.options.formattingFn?this.options.formattingFn:this.formatNumber,this.easingFn=this.options.easingFn?this.options.easingFn:this.easeOutExpo,this.el="string"==typeof e?document.getElementById(e):e,t=null==t?this.parse(this.el.innerHTML):t,this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.endVal=this.validateValue(t),this.options.decimalPlaces=Math.max(this.options.decimalPlaces),this.resetDuration(),this.options.separator=String(this.options.separator),this.useEasing=this.options.useEasing,""===this.options.separator&&(this.options.useGrouping=!1),this.el?this.printValue(this.startVal):this.error="[CountUp] target is null or undefined","undefined"!=typeof window&&this.options.enableScrollSpy&&(this.error||(window.onScrollFns=window.onScrollFns||[],window.onScrollFns.push(function(){return s.handleScroll(s)}),window.onscroll=function(){window.onScrollFns.forEach(function(e){return e()})},this.handleScroll(this)))}return e.prototype.handleScroll=function(e){if(e&&window&&!e.once){var t=window.innerHeight+window.scrollY,n=e.el.getBoundingClientRect(),s=n.top+window.pageYOffset,a=n.top+n.height+window.pageYOffset;a<t&&a>window.scrollY&&e.paused?(e.paused=!1,setTimeout(function(){return e.start()},e.options.scrollSpyDelay),e.options.scrollSpyOnce&&(e.once=!0)):(window.scrollY>a||s>t)&&!e.paused&&e.reset()}},e.prototype.determineDirectionAndSmartEasing=function(){var e=this.finalEndVal?this.finalEndVal:this.endVal;this.countDown=this.startVal>e;var t=e-this.startVal;if(Math.abs(t)>this.options.smartEasingThreshold&&this.options.useEasing){this.finalEndVal=e;var n=this.countDown?1:-1;this.endVal=e+n*this.options.smartEasingAmount,this.duration=this.duration/2}else this.endVal=e,this.finalEndVal=null;null!==this.finalEndVal?this.useEasing=!1:this.useEasing=this.options.useEasing},e.prototype.start=function(e){this.error||(this.options.onStartCallback&&this.options.onStartCallback(),e&&(this.options.onCompleteCallback=e),this.duration>0?(this.determineDirectionAndSmartEasing(),this.paused=!1,this.rAF=requestAnimationFrame(this.count)):this.printValue(this.endVal))},e.prototype.pauseResume=function(){this.paused?(this.startTime=null,this.duration=this.remaining,this.startVal=this.frameVal,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count)):cancelAnimationFrame(this.rAF),this.paused=!this.paused},e.prototype.reset=function(){cancelAnimationFrame(this.rAF),this.paused=!0,this.resetDuration(),this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.printValue(this.startVal)},e.prototype.update=function(e){cancelAnimationFrame(this.rAF),this.startTime=null,this.endVal=this.validateValue(e),this.endVal!==this.frameVal&&(this.startVal=this.frameVal,null==this.finalEndVal&&this.resetDuration(),this.finalEndVal=null,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count))},e.prototype.printValue=function(e){var t;if(this.el){var n=this.formattingFn(e);(null===(t=this.options.plugin)||void 0===t?void 0:t.render)?this.options.plugin.render(this.el,n):"INPUT"===this.el.tagName?this.el.value=n:"text"===this.el.tagName||"tspan"===this.el.tagName?this.el.textContent=n:this.el.innerHTML=n}},e.prototype.ensureNumber=function(e){return"number"==typeof e&&!isNaN(e)},e.prototype.validateValue=function(e){var t=Number(e);return this.ensureNumber(t)?t:(this.error="[CountUp] invalid start or end value: ".concat(e),null)},e.prototype.resetDuration=function(){this.startTime=null,this.duration=1e3*Number(this.options.duration),this.remaining=this.duration},e.prototype.parse=function(e){var t=function(e){return e.replace(/([.,'  ])/g,"\\$1")},n=t(this.options.separator),s=t(this.options.decimal),a=e.replace(new RegExp(n,"g"),"").replace(new RegExp(s,"g"),".");return parseFloat(a)},e}(),Vu.CountUp=Gu;var Ku=Qu.exports;Object.defineProperty(Ju,"__esModule",{value:!0});var Xu=n,Zu=Ku;function eh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,s)}return n}function th(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eh(Object(n),!0).forEach(function(t){sh(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eh(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function nh(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,t);if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function sh(e,t,n){return(t=nh(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ah(){return ah=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},ah.apply(this,arguments)}function rh(e,t){if(null==e)return{};var n,s,a=function(e,t){if(null==e)return{};var n,s,a={},r=Object.keys(e);for(s=0;s<r.length;s++)n=r[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(s=0;s<r.length;s++)n=r[s],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function ih(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var s,a,r,i,o=[],l=!0,c=!1;try{if(r=(n=n.call(e)).next,0===t);else for(;!(l=(s=r.call(n)).done)&&(o.push(s.value),o.length!==t);l=!0);}catch(d){c=!0,a=d}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return oh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oh(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}var lh="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?Xu.useLayoutEffect:Xu.useEffect;function ch(e){var t=Xu.useRef(e);return lh(function(){t.current=e}),Xu.useCallback(function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return t.current.apply(void 0,n)},[])}var dh=["ref","startOnMount","enableReinitialize","delay","onEnd","onStart","onPauseResume","onReset","onUpdate"],uh={decimal:".",separator:",",delay:null,prefix:"",suffix:"",duration:2,start:0,decimals:0,startOnMount:!0,enableReinitialize:!0,useEasing:!0,useGrouping:!0,useIndianSeparators:!1},hh=function(e){var t=Object.fromEntries(Object.entries(e).filter(function(e){return void 0!==ih(e,2)[1]})),n=Xu.useMemo(function(){return th(th({},uh),t)},[e]),s=n.ref,a=n.startOnMount,r=n.enableReinitialize,i=n.delay,o=n.onEnd,l=n.onStart,c=n.onPauseResume,d=n.onReset,u=n.onUpdate,h=rh(n,dh),m=Xu.useRef(),p=Xu.useRef(),f=Xu.useRef(!1),g=ch(function(){return function(e,t){var n=t.decimal,s=t.decimals,a=t.duration,r=t.easingFn,i=t.end,o=t.formattingFn,l=t.numerals,c=t.prefix,d=t.separator,u=t.start,h=t.suffix,m=t.useEasing,p=t.useGrouping,f=t.useIndianSeparators,g=t.enableScrollSpy,y=t.scrollSpyDelay,x=t.scrollSpyOnce,v=t.plugin;return new Zu.CountUp(e,i,{startVal:u,duration:a,decimal:n,decimalPlaces:s,easingFn:r,formattingFn:o,numerals:l,separator:d,prefix:c,suffix:h,plugin:v,useEasing:m,useIndianSeparators:f,useGrouping:p,enableScrollSpy:g,scrollSpyDelay:y,scrollSpyOnce:x})}("string"==typeof s?s:s.current,h)}),y=ch(function(e){var t=m.current;if(t&&!e)return t;var n=g();return m.current=n,n}),x=ch(function(){var e=function(){return y(!0).start(function(){null==o||o({pauseResume:v,reset:b,start:w,update:j})})};i&&i>0?p.current=setTimeout(e,1e3*i):e(),null==l||l({pauseResume:v,reset:b,update:j})}),v=ch(function(){y().pauseResume(),null==c||c({reset:b,start:w,update:j})}),b=ch(function(){y().el&&(p.current&&clearTimeout(p.current),y().reset(),null==d||d({pauseResume:v,start:w,update:j}))}),j=ch(function(e){y().update(e),null==u||u({pauseResume:v,reset:b,start:w})}),w=ch(function(){b(),x()}),k=ch(function(e){a&&(e&&b(),x())});return Xu.useEffect(function(){f.current?r&&k(!0):(f.current=!0,k())},[r,f,k,i,e.start,e.suffix,e.prefix,e.duration,e.separator,e.decimals,e.decimal,e.formattingFn]),Xu.useEffect(function(){return function(){b()}},[b]),{start:w,pauseResume:v,reset:b,update:j,getCountUp:y}},mh=["className","redraw","containerProps","children","style"],ph=Ju.default=function(e){var t=e.className,n=e.redraw,s=e.containerProps,a=e.children,r=e.style,i=rh(e,mh),o=Xu.useRef(null),l=Xu.useRef(!1),c=hh(th(th({},i),{},{ref:o,startOnMount:"function"!=typeof a||0===e.delay,enableReinitialize:!1})),d=c.start,u=c.reset,h=c.update,m=c.pauseResume,p=c.getCountUp,f=ch(function(){d()}),g=ch(function(t){e.preserveValue||u(),h(t)}),y=ch(function(){("function"!=typeof e.children||o.current instanceof Element)&&p()});Xu.useEffect(function(){y()},[y]),Xu.useEffect(function(){l.current&&g(e.end)},[e.end,g]);var x=n&&e;return Xu.useEffect(function(){n&&l.current&&f()},[f,n,x]),Xu.useEffect(function(){!n&&l.current&&f()},[f,n,e.start,e.suffix,e.prefix,e.duration,e.separator,e.decimals,e.decimal,e.className,e.formattingFn]),Xu.useEffect(function(){l.current=!0},[]),"function"==typeof a?a({countUpRef:o,start:d,reset:u,update:h,pauseResume:m,getCountUp:p}):Xu.createElement("span",ah({className:t,ref:o,style:r},s),void 0!==e.start?p().formattingFn(e.start):"")};Ju.useCountUp=hh;const fh=n.createContext(),gh=({children:e})=>{const{isAuthenticated:t,getToken:s}=jn(),[a,r]=n.useState({balance:1e4,transactions:[],lastLoginReward:null,totalInvested:0,totalGains:0,portfolioValue:0}),[i,o]=n.useState(!1),[l,c]=n.useState(null),d=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2,maximumFractionDigits:2}).format(e),u=async()=>{if(t){o(!0),c(null);try{const e=s(),t=await fetch("https://s89-satya-capstone-tradebro.onrender.com/api/virtual-money/account",{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!t.ok)throw new Error("Failed to fetch virtual money data");{const e=await t.json();r(e.data)}}catch(e){c(e.message)}finally{o(!1)}}};n.useEffect(()=>{t&&u()},[t]),n.useEffect(()=>{const e=e=>{u()};return window.addEventListener("balanceUpdated",e),()=>{window.removeEventListener("balanceUpdated",e)}},[u]);const h={virtualMoney:a,loading:i,error:l,formatCurrency:d,fetchVirtualMoney:u,buyStock:async(e,n,a)=>{if(!t)return{success:!1,message:"Not authenticated"};o(!0),c(null);try{const t=s(),i=await fetch("https://s89-satya-capstone-tradebro.onrender.com/api/virtual-money/buy",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({stockSymbol:e,quantity:n,price:a})}),o=await i.json();if(i.ok)return r(o.data),{success:!0,message:o.message};throw new Error(o.message||"Failed to buy stock")}catch(i){return c(i.message),{success:!1,message:i.message}}finally{o(!1)}},sellStock:async(e,n,a)=>{if(!t)return{success:!1,message:"Not authenticated"};o(!0),c(null);try{const t=s(),i=await fetch("https://s89-satya-capstone-tradebro.onrender.com/api/virtual-money/sell",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({stockSymbol:e,quantity:n,price:a})}),o=await i.json();if(i.ok)return r(o.data),{success:!0,message:o.message};throw new Error(o.message||"Failed to sell stock")}catch(i){return c(i.message),{success:!1,message:i.message}}finally{o(!1)}},claimLoginReward:async()=>{if(!t)return{success:!1,message:"Not authenticated"};o(!0),c(null);try{const e=s(),t=await fetch("https://s89-satya-capstone-tradebro.onrender.com/api/virtual-money/login-reward",{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}}),n=await t.json();if(t.ok)return r(n.data),{success:!0,message:n.message,reward:n.reward};throw new Error(n.message||"Failed to claim reward")}catch(e){return c(e.message),{success:!1,message:e.message}}finally{o(!1)}},balance:a.balance,formattedBalance:d(a.balance),transactions:a.transactions||[],canClaimReward:!a.lastLoginReward||new Date-new Date(a.lastLoginReward)>864e5};return M.jsx(fh.Provider,{value:h,children:e})},yh=()=>{const[e,t]=n.useState(!1),[s,a]=n.useState(null),[r,i]=n.useState(null),{refreshPortfolio:o}=ci(),{claimLoginReward:l,fetchVirtualMoney:c}=(()=>{const e=n.useContext(fh);if(void 0===e)throw new Error("useVirtualMoney must be used within a VirtualMoneyProvider");return e})(),d=n.useRef(!1);n.useEffect(()=>{if(d.current)return;(async()=>{const e=await oi.checkDailyLogin(),n=oi.getDailyRewardsInfo();i(n),e.awarded&&(a(e),t(!0),l().then(()=>{setTimeout(()=>{oi.syncPortfolioData(),o(),c()},500)}).catch(e=>{setTimeout(()=>{oi.syncPortfolioData(),o()},500)})),d.current=!0})().catch(console.error)},[]);const u=()=>{t(!1),oi.syncPortfolioData(),o(),c()},h=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(e);return M.jsxs(M.Fragment,{children:[M.jsx(g,{children:e&&s&&M.jsx(y.div,{className:"daily-reward-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:u,children:M.jsxs(y.div,{className:"daily-reward-modal",initial:{scale:.8,opacity:0,y:50},animate:{scale:1,opacity:1,y:0},exit:{scale:.8,opacity:0,y:50},onClick:e=>e.stopPropagation(),children:[M.jsx("button",{className:"close-btn",onClick:u,children:M.jsx(xn,{})}),M.jsxs("div",{className:"reward-content",children:[M.jsx(y.div,{className:"reward-icon",animate:{rotate:[0,-10,10,-10,0],scale:[1,1.1,1]},transition:{duration:.6,repeat:1/0,repeatDelay:2},children:M.jsx(kt,{})}),M.jsx("h2",{children:"Daily Login Bonus!"}),M.jsx("div",{className:"reward-amount",children:h(s.amount)}),M.jsxs("div",{className:"reward-details",children:[M.jsxs("div",{className:"detail-item",children:[M.jsx(it,{}),M.jsxs("span",{children:["Login Streak: ",s.streak," days"]})]}),M.jsxs("div",{className:"detail-item",children:[M.jsx(mn,{}),M.jsxs("span",{children:["Total Rewards: ",h(s.totalRewards)]})]})]}),M.jsxs("div",{className:"reward-message",children:[M.jsx("p",{children:"Keep logging in daily to maintain your streak!"}),s.streak>=7&&M.jsxs("div",{className:"streak-bonus",children:[M.jsx(on,{}),M.jsx("span",{children:"Amazing! 7+ day streak!"})]})]}),M.jsx("button",{className:"claim-btn",onClick:u,children:"Awesome! 🎉"})]})]})})}),r&&M.jsxs("div",{className:"daily-rewards-widget",children:[M.jsxs("div",{className:"widget-header",children:[M.jsx(kt,{}),M.jsx("span",{children:"Daily Rewards"})]}),M.jsxs("div",{className:"widget-content",children:[M.jsxs("div",{className:"streak-info",children:[M.jsx("span",{className:"streak-number",children:r.loginStreak}),M.jsx("span",{className:"streak-label",children:"Day Streak"})]}),M.jsxs("div",{className:"total-rewards",children:[M.jsx("span",{className:"total-label",children:"Total Earned"}),M.jsx("span",{className:"total-amount",children:h(r.totalRewards)})]}),r.nextRewardAvailable&&M.jsx("div",{className:"next-reward",children:M.jsx("span",{children:"Next reward available tomorrow!"})})]})]})]})},xh=({notification:e,onClick:t,onDelete:s,onMarkAsRead:a,compact:r=!1,showActions:i=!0})=>{const o=n.useCallback(e=>{const t=new Date(e),n=new Date,s=Math.floor((n-t)/6e4);return s<1?"Just now":s<60?`${s}m ago`:s<1440?`${Math.floor(s/60)}h ago`:`${Math.floor(s/1440)}d ago`},[]),l=n.useCallback(()=>{t&&t(e)},[t,e]),c=n.useCallback(e=>{e.stopPropagation(),s&&s(e)},[s]),d=n.useCallback(t=>{t.stopPropagation(),a&&a(e.id)},[a,e.id]);return M.jsxs(y.div,{className:`notification-item ${r?"compact":""} ${e.read?"read":"unread"} ${e.type}`,onClick:l,whileHover:{backgroundColor:"var(--notification-hover-bg)"},layout:!0,children:[!e.read&&M.jsx("div",{className:"unread-indicator"}),M.jsxs("div",{className:"notification-content",children:[M.jsx("div",{className:"notification-icon",children:(e=>{const t={size:r?16:20};switch(e){case"success":return M.jsx(lt,{...t,className:"icon-success"});case"error":return M.jsx(yn,{...t,className:"icon-error"});case"warning":return M.jsx(Ge,{...t,className:"icon-warning"});case"alert":return M.jsx(Ye,{...t,className:"icon-alert"});default:return M.jsx(Tt,{...t,className:"icon-info"})}})(e.type)}),M.jsxs("div",{className:"notification-text",children:[M.jsx("div",{className:"notification-title",children:e.title}),e.message&&M.jsx("div",{className:"notification-message",children:e.message}),M.jsxs("div",{className:"notification-meta",children:[M.jsxs("span",{className:"notification-time",children:[M.jsx(dt,{size:12}),o(e.createdAt)]}),e.link&&M.jsxs("span",{className:"notification-link",children:[M.jsx(vt,{size:12}),"View details"]})]})]}),i&&M.jsxs("div",{className:"notification-actions",children:[!e.read&&a&&M.jsx(y.button,{className:"action-btn mark-read",onClick:d,whileHover:{scale:1.1},whileTap:{scale:.9},title:"Mark as read","aria-label":"Mark as read",children:M.jsx(lt,{size:14})}),s&&M.jsx(y.button,{className:"action-btn delete",onClick:c,whileHover:{scale:1.1},whileTap:{scale:.9},title:"Delete notification","aria-label":"Delete notification",children:M.jsx(xn,{size:14})})]})]})]})},vh=({notifications:e=[],unreadCount:t=0,loading:s=!1,onClose:a})=>{const{markAsRead:r,deleteNotification:i,markAllAsRead:o}=ur(),l=e.slice(0,5),d=n.useCallback(async e=>{try{e.read||await r(e.id),e.link&&(window.location.href=e.link),a()}catch(t){}},[r,a]),u=n.useCallback(async(e,t)=>{t.stopPropagation();try{await i(e)}catch(n){}},[i]),h=n.useCallback(async()=>{try{await o()}catch(e){}},[o]);return M.jsxs("div",{className:"notification-dropdown",children:[M.jsxs("div",{className:"dropdown-header",children:[M.jsxs("div",{className:"header-content",children:[M.jsx("h3",{className:"dropdown-title",children:"Notifications"}),t>0&&M.jsxs("span",{className:"unread-count",children:[t," new"]})]}),M.jsxs("div",{className:"header-actions",children:[t>0&&M.jsx(y.button,{className:"mark-all-read-btn",onClick:h,whileHover:{scale:1.05},whileTap:{scale:.95},title:"Mark all as read","aria-label":"Mark all notifications as read",children:M.jsx(ct,{size:16})}),M.jsx(c,{to:"/settings",className:"settings-btn",title:"Notification settings",onClick:a,children:M.jsx(tn,{size:16})})]})]}),M.jsx("div",{className:"dropdown-content",children:s?M.jsxs("div",{className:"dropdown-loading",children:[M.jsx("div",{className:"loading-spinner"}),M.jsx("span",{children:"Loading notifications..."})]}):l.length>0?M.jsxs(M.Fragment,{children:[M.jsx("div",{className:"notification-list",children:l.map((e,t)=>M.jsx(y.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.05*t},children:M.jsx(xh,{notification:e,onClick:()=>d(e),onDelete:t=>u(e._id||e.id,t),compact:!0})},e._id||e.id))}),M.jsx("div",{className:"dropdown-footer",children:M.jsxs(c,{to:"/notifications",className:"view-all-btn",onClick:a,children:["View all notifications",M.jsx(vt,{size:14})]})})]}):M.jsxs("div",{className:"empty-state",children:[M.jsx("div",{className:"empty-icon",children:M.jsx(lt,{size:32})}),M.jsx("h4",{children:"All caught up!"}),M.jsx("p",{children:"You have no new notifications"})]})})]})},bh=({className:e="",position:t="bottom-right"})=>{const[s,a]=n.useState(!1),r=n.useRef(null),i=n.useRef(null),{unreadCount:o,notifications:l,loading:c,markAllAsRead:d,connectionStatus:u}=ur();n.useEffect(()=>{const e=e=>{r.current&&!r.current.contains(e.target)&&i.current&&!i.current.contains(e.target)&&a(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const[h,m]=n.useState(!1);n.useEffect(()=>{if(o>0&&!h){m(!0);const e=setTimeout(()=>m(!1),1200);return()=>clearTimeout(e)}},[o,h]);const p=n.useCallback(()=>{a(e=>!e)},[]),f=n.useCallback(async()=>{try{await d()}catch(e){}},[d]);return M.jsxs("div",{className:`notification-bell-container ${e}`,ref:r,children:[M.jsxs(y.button,{className:`notification-bell ${h?"animate":""} ${s?"active":""}`,onClick:p,whileHover:{scale:1.05},whileTap:{scale:.95},"aria-label":"Notifications "+(o>0?`(${o} unread)`:""),children:[M.jsx(y.div,{className:"bell-icon",animate:h?{rotate:[0,-10,10,-10,10,0],transition:{duration:.6,ease:"easeInOut",repeat:1,repeatDelay:.6}}:{},children:M.jsx(st,{size:20})}),M.jsx(g,{children:o>0&&M.jsx(y.div,{className:"notification-badge",initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},transition:{type:"spring",stiffness:500,damping:30},children:o>99?"99+":o})}),M.jsx("div",{className:`connection-indicator ${(()=>{switch(u){case"connected":return"connected";case"connecting":return"connecting";case"disconnected":return"disconnected";default:return"unknown"}})()}`})]}),M.jsx(g,{children:s&&M.jsx(y.div,{ref:i,className:`notification-dropdown-wrapper ${t}`,initial:{opacity:0,scale:.95,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-10},transition:{duration:.2,ease:"easeOut"},children:M.jsx(vh,{notifications:l,unreadCount:o,loading:c,onMarkAllAsRead:f,onClose:()=>a(!1)})})})]})},jh=({icon:e,title:t,subtitle:n,actions:s=[],borderColor:a="primary",showNotifications:r=!0,className:i=""})=>M.jsx(y.div,{className:`page-header ${(e=>{switch(e){case"primary":default:return"border-primary";case"success":return"border-success";case"warning":return"border-warning";case"info":return"border-info";case"purple":return"border-purple";case"orange":return"border-orange"}})(a)} ${i}`,initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},children:M.jsxs("div",{className:"header-content",children:[M.jsx("div",{className:"header-left",children:M.jsxs("div",{className:"header-title-section",children:[e&&M.jsx("div",{className:"header-icon",children:M.jsx(e,{size:24})}),M.jsxs("div",{className:"header-text",children:[M.jsx("h1",{className:"header-title",children:t}),n&&M.jsx("p",{className:"header-subtitle",children:n})]})]})}),M.jsx("div",{className:"header-right",children:M.jsxs("div",{className:"header-actions",children:[s.map((e,t)=>M.jsxs(y.button,{className:`header-action-btn ${e.variant||"secondary"}`,onClick:e.onClick,disabled:e.disabled,whileHover:{scale:1.02},whileTap:{scale:.98},title:e.tooltip,children:[e.icon&&M.jsx(e.icon,{size:16}),M.jsx("span",{children:e.label})]},t)),r&&M.jsx("div",{className:"header-notifications",children:M.jsx(bh,{position:"bottom-right"})})]})})]})}),wh=(e,t=!1)=>{if(null==e||isNaN(e))return"₹0.00";const n=Number(e);if(t){if(n>=1e7)return`₹${(n/1e7).toFixed(2)}Cr`;if(n>=1e5)return`₹${(n/1e5).toFixed(2)}L`;if(n>=1e3)return`₹${(n/1e3).toFixed(2)}K`}return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2,maximumFractionDigits:2}).format(n)},kh=(e,t=!1)=>{if(null==e||isNaN(e))return"0";const n=Number(e);if(t){if(n>=1e7)return`${(n/1e7).toFixed(2)}Cr`;if(n>=1e5)return`${(n/1e5).toFixed(2)}L`;if(n>=1e3)return`${(n/1e3).toFixed(2)}K`}return new Intl.NumberFormat("en-IN",{minimumFractionDigits:0,maximumFractionDigits:2}).format(n)},Nh=(e,t="short")=>{if(!e)return"";const n=new Date(e);if(isNaN(n.getTime()))return"";return new Intl.DateTimeFormat("en-IN",{short:{day:"2-digit",month:"2-digit",year:"numeric"},long:{day:"numeric",month:"long",year:"numeric"},time:{hour:"2-digit",minute:"2-digit",hour12:!0},datetime:{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}}[t]).format(n)},Sh=()=>{const{user:e}=jn(),[t,s]=n.useState([]),[a,r]=n.useState(!1),[i,o]=n.useState(null),l=n.useCallback(async()=>{if(null==e?void 0:e.id)try{r(!0),o(null);const t=`watchlists_${e.id}`,n=localStorage.getItem(t);if(n){const e=JSON.parse(n);s(e)}else{const e={_id:"default",name:"My Watchlist",stocks:[],isDefault:!0,createdAt:(new Date).toISOString()};s([e]),localStorage.setItem(t,JSON.stringify([e]))}}catch(t){o(t.message);const e={_id:"default",name:"My Watchlist",stocks:[],isDefault:!0,createdAt:(new Date).toISOString()};s([e])}finally{r(!1)}},[null==e?void 0:e.id]);n.useEffect(()=>{l()},[l]);const c=n.useCallback(e=>t.some(t=>t.stocks.some(t=>t.symbol===e||t.stockSymbol===e)),[t]),d=n.useCallback(e=>t.find(t=>t.stocks.some(t=>t.symbol===e||t.stockSymbol===e)),[t]),u=n.useCallback(async(n,a=null)=>{var i,o;if(!(null==e?void 0:e.id))return qe.error("Please login to add stocks to watchlist"),{success:!1,message:"User not authenticated"};try{r(!0);const l=a||(null==(i=t.find(e=>e.isDefault))?void 0:i._id)||(null==(o=t[0])?void 0:o._id);if(!l){const a={_id:"default",name:"My Watchlist",stocks:[],isDefault:!0,createdAt:(new Date).toISOString()},r=[...t,a];s(r);const i=`watchlists_${e.id}`;return localStorage.setItem(i,JSON.stringify(r)),u(n,a._id)}const c=t.find(e=>e._id===l);if(null==c?void 0:c.stocks.some(e=>e.symbol===(n.symbol||n.stockSymbol)))return qe.info(`${n.symbol||n.stockSymbol} is already in your watchlist`),{success:!1,message:"Stock already in watchlist"};const d={symbol:n.symbol||n.stockSymbol,name:n.name||n.companyName||`${n.symbol} Corporation`,price:n.price||n.currentPrice||0,change:n.change||n.priceChange||0,changePercent:n.changePercent||n.changePercentage||0,volume:n.volume||0,marketCap:n.marketCap||0,sector:n.sector||"Unknown",addedAt:(new Date).toISOString()},h=t.map(e=>e._id===l?{...e,stocks:[...e.stocks,d]}:e);s(h);const m=`watchlists_${e.id}`;return localStorage.setItem(m,JSON.stringify(h)),qe.success(`${d.symbol} added to watchlist!`),{success:!0,data:h.find(e=>e._id===l)}}catch(l){return qe.error(l.message||"Failed to add stock to watchlist"),{success:!1,message:l.message}}finally{r(!1)}},[null==e?void 0:e.id,t]),h=n.useCallback(async(n,a=null)=>{if(!(null==e?void 0:e.id))return qe.error("Please login to manage watchlist"),{success:!1,message:"User not authenticated"};try{r(!0);const i=a?t.find(e=>e._id===a):d(n);if(!i)return qe.error("Stock not found in any watchlist"),{success:!1,message:"Stock not found in watchlist"};const o=t.map(e=>e._id===i._id?{...e,stocks:e.stocks.filter(e=>e.symbol!==n&&e.stockSymbol!==n)}:e);s(o);const l=`watchlists_${e.id}`;return localStorage.setItem(l,JSON.stringify(o)),qe.success(`${n} removed from watchlist!`),{success:!0}}catch(i){return qe.error(i.message||"Failed to remove stock from watchlist"),{success:!1,message:i.message}}finally{r(!1)}},[null==e?void 0:e.id,t,d]),m=n.useCallback(async e=>{const t=e.symbol||e.stockSymbol;return c(t)?await h(t):await u(e)},[c,u,h]),p=n.useCallback(async(n,a="")=>{if(!(null==e?void 0:e.id))return qe.error("Please login to create watchlist"),{success:!1,message:"User not authenticated"};try{r(!0);const i={_id:`watchlist_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,name:n,description:a,stocks:[],isDefault:0===t.length,createdAt:(new Date).toISOString()},o=[...t,i];s(o);const l=`watchlists_${e.id}`;return localStorage.setItem(l,JSON.stringify(o)),qe.success(`Watchlist "${n}" created successfully!`),{success:!0,data:i}}catch(i){return qe.error(i.message||"Failed to create watchlist"),{success:!1,message:i.message}}finally{r(!1)}},[null==e?void 0:e.id,t]),f=n.useCallback(async n=>{if(!(null==e?void 0:e.id))return qe.error("Please login to delete watchlist"),{success:!1,message:"User not authenticated"};try{r(!0);const a=t.filter(e=>e._id!==n);s(a);const i=`watchlists_${e.id}`;return localStorage.setItem(i,JSON.stringify(a)),qe.success("Watchlist deleted successfully!"),{success:!0}}catch(a){return qe.error(a.message||"Failed to delete watchlist"),{success:!1,message:a.message}}finally{r(!1)}},[null==e?void 0:e.id,t]),g=n.useCallback(()=>t.reduce((e,t)=>e+t.stocks.length,0),[t]),y=n.useCallback(()=>t.find(e=>e.isDefault)||t[0]||null,[t]),x=n.useCallback(async()=>{await l()},[l]);return{watchlists:t,loading:a,error:i,isInWatchlist:c,getWatchlistWithStock:d,addToWatchlist:u,removeFromWatchlist:h,toggleWatchlist:m,createWatchlist:p,deleteWatchlist:f,refreshWatchlists:x,getTotalStockCount:g,getDefaultWatchlist:y}},Ch=({stockData:e,size:t="medium",variant:s="icon",showText:a=!1,className:r="",onSuccess:i,onError:o})=>{const{isInWatchlist:l,toggleWatchlist:c,addToWatchlist:d,removeFromWatchlist:u,watchlists:h,loading:m}=Sh(),[p,f]=n.useState(!1),[x,v]=n.useState(!1),[b,j]=n.useState(!1);if(!e)return null;const w=e.symbol||e.stockSymbol;if(!w)return null;const k=l(w),N=async t=>{if(null==t||t.stopPropagation(),!x&&!m){v(!0);try{const t={symbol:w,name:e.name||e.companyName||`${w} Corporation`,price:e.price||e.currentPrice||0,change:e.change||e.priceChange||0,changePercent:e.changePercent||e.changePercentage||0,volume:e.volume||0,marketCap:e.marketCap||0,sector:e.sector||"Unknown"},n=await c(t);n.success?(i&&i(n,k?"removed":"added"),navigator.vibrate&&navigator.vibrate(50),j(!0),setTimeout(()=>j(!1),600)):o&&o(n.message||"Failed to update watchlist")}catch(n){o&&o("Failed to update watchlist")}finally{v(!1)}}},S=async()=>{if(!x&&!m){v(!0),f(!1);try{const e=await u(w);e.success&&i?i(e,"removed"):!e.success&&o&&o(e.message)}catch(e){o&&o("Failed to remove from watchlist")}finally{v(!1)}}};return"simple"===s?M.jsxs("button",{className:`watchlist-btn watchlist-btn-${t} ${k?"active":""} ${x?"processing":""} ${b?"success":""} ${r}`,onClick:N,disabled:x||m,title:k?"Remove from watchlist":"Add to watchlist",children:[x?M.jsx(It,{className:"animate-spin"}):k?M.jsx(ct,{}):M.jsx(on,{}),a&&M.jsx("span",{className:"btn-text",children:k?"In Watchlist":"Add to Watchlist"})]}):"dropdown"===s?M.jsxs("div",{className:`watchlist-dropdown-container ${r}`,children:[M.jsxs("button",{className:`watchlist-btn watchlist-btn-${t} ${k?"active":""}`,onClick:e=>{e.stopPropagation(),f(!p)},disabled:x||m,title:"Manage watchlist",children:[x?M.jsx(It,{className:"animate-spin"}):M.jsx(Lt,{}),a&&M.jsx("span",{className:"btn-text",children:"Watchlist"})]}),M.jsx(g,{children:p&&M.jsxs(y.div,{className:"watchlist-dropdown",initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.2},children:[M.jsxs("div",{className:"dropdown-header",children:[M.jsx("span",{children:"Add to Watchlist"}),M.jsx("button",{className:"close-btn",onClick:()=>f(!1),children:M.jsx(xn,{})})]}),M.jsxs("div",{className:"dropdown-content",children:[k&&M.jsxs("button",{className:"dropdown-item remove-item",onClick:S,disabled:x,children:[M.jsx(xn,{}),M.jsx("span",{children:"Remove from Watchlist"})]}),h.map(t=>{const n=t.stocks.some(e=>e.symbol===w||e.stockSymbol===w);return M.jsxs("button",{className:"dropdown-item "+(n?"has-stock":""),onClick:()=>(async t=>{if(!x&&!m){v(!0),f(!1);try{const n={symbol:w,name:e.name||e.companyName||`${w} Corporation`,price:e.price||e.currentPrice||0,change:e.change||e.priceChange||0,changePercent:e.changePercent||e.changePercentage||0,volume:e.volume||0,marketCap:e.marketCap||0,sector:e.sector||"Unknown"},s=await d(n,t);s.success?i&&i(s,"added"):o&&o(s.message||"Failed to add to watchlist")}catch(n){o&&o("Failed to add to watchlist")}finally{v(!1)}}})(t._id),disabled:x||n,children:[n?M.jsx(ct,{}):M.jsx(Qt,{}),M.jsx("span",{children:t.name}),t.isDefault&&M.jsx("span",{className:"default-badge",children:"Default"})]},t._id)}),0===h.length&&M.jsx("div",{className:"dropdown-empty",children:M.jsx("span",{children:"No watchlists found"})})]})]})}),p&&M.jsx("div",{className:"watchlist-dropdown-backdrop",onClick:()=>f(!1)})]}):M.jsxs("button",{className:`watchlist-btn watchlist-btn-${t} ${k?"active":""} ${x?"processing":""} ${b?"success":""} ${r}`,onClick:N,disabled:x||m,title:k?"Remove from watchlist":"Add to watchlist",children:[M.jsx(y.div,{initial:{scale:.5,opacity:0,rotate:-180},animate:{scale:1,opacity:1,rotate:0,y:b?[-2,0]:0},transition:{duration:.4,type:"spring",stiffness:300,damping:20},children:x?M.jsx(y.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:M.jsx(It,{})}):M.jsx(y.div,{animate:{scale:b?[1,1.3,1]:1,rotate:k?[0,15,-15,0]:0},transition:{duration:.3},children:M.jsx(on,{className:k?"filled":""})})},k?"filled":"empty"),a&&M.jsx("span",{className:"btn-text",children:k?"In Watchlist":"Add to Watchlist"})]})},Th=({stockData:e,isOpen:t,onClose:s,showQuantityControls:a=!0,defaultQuantity:r=1,onSuccess:i,compact:l=!1})=>{var c;const d=o(),{portfolioData:u,buyStock:h,isLoading:m}=ci(),[p,f]=n.useState(r),[g,x]=n.useState(!1),[v,b]=n.useState(0),[j,w]=n.useState(!1);n.useEffect(()=>{t&&(f(r),b(0),w(!1))},[t,r]);const k=(null==e?void 0:e.price)||0,N=p*k,S=u.availableCash>=N,C=e=>{if(!S||j)return;e.preventDefault(),e.stopPropagation();const t=e.currentTarget.closest(".slide-to-buy");if(!t)return;const n=t.getBoundingClientRect(),s=n.width-52-8;let a=!0;const r=e=>{if(!a)return;e.preventDefault();const t=(e.touches?e.touches[0].clientX:e.clientX)-n.left-26,r=Math.min(Math.max(t/s*100,0),100);b(r)},i=async()=>{a=!1,v>80?(b(100),await T()):b(0),document.removeEventListener("mousemove",r,{passive:!1}),document.removeEventListener("mouseup",i),document.removeEventListener("touchmove",r,{passive:!1}),document.removeEventListener("touchend",i)};document.addEventListener("mousemove",r,{passive:!1}),document.addEventListener("mouseup",i),document.addEventListener("touchmove",r,{passive:!1}),document.addEventListener("touchend",i)},T=async()=>{if(e&&p&&!j){w(!0);try{const t=await h(e.symbol,p,e.price,e);if(t&&t.success)qe.success(`Successfully bought ${p} shares of ${e.symbol}!`),b(100),i&&i(t),setTimeout(()=>{s(),b(0)},1500);else{const e=(null==t?void 0:t.error)||(null==t?void 0:t.message)||"Failed to buy stock";qe.error(e),b(0)}}catch(t){qe.error(t.message||"Failed to buy stock"),b(0)}finally{w(!1)}}};return t&&e?M.jsx(y.div,{className:"slide-to-buy-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:s,children:M.jsxs(y.div,{className:"slide-to-buy-modal "+(l?"compact":""),initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:e=>e.stopPropagation(),children:[M.jsxs("div",{className:"modal-header",children:[M.jsxs("div",{className:"stock-info",children:[M.jsx("h3",{children:e.symbol}),M.jsx("p",{children:e.name})]}),M.jsxs("div",{className:"header-actions",children:[M.jsx(Ch,{stockData:e,size:"medium",variant:"simple",showText:!1}),M.jsx("button",{onClick:s,className:"close-btn",children:M.jsx(xn,{})})]})]}),M.jsx("div",{className:"stock-price-section",children:M.jsxs("div",{className:"current-price",children:[M.jsx("span",{className:"price-value",children:wh(e.price)}),M.jsxs("div",{className:"price-change "+(e.change>=0?"positive":"negative"),children:[e.change>=0?"+":"",wh(e.change),"(",(null==(c=e.changePercent)?void 0:c.toFixed(2))||"0.00","%)"]})]})}),a&&M.jsxs("div",{className:"quantity-section",children:[M.jsx("label",{children:"Quantity"}),M.jsxs("div",{className:"quantity-controls",children:[M.jsx("button",{onClick:()=>f(Math.max(1,p-1)),className:"quantity-btn",disabled:j,children:M.jsx(Ut,{})}),M.jsx("input",{type:"number",value:p,onChange:e=>f(Math.max(1,parseInt(e.target.value)||1)),className:"quantity-input",min:"1",disabled:j}),M.jsx("button",{onClick:()=>f(p+1),className:"quantity-btn",disabled:j,children:M.jsx(Qt,{})})]})]}),M.jsxs("div",{className:"order-summary",children:[M.jsxs("div",{className:"summary-row",children:[M.jsx("span",{children:"Price per share"}),M.jsx("span",{children:wh(k)})]}),M.jsxs("div",{className:"summary-row",children:[M.jsx("span",{children:"Quantity"}),M.jsxs("span",{children:[p," shares"]})]}),M.jsxs("div",{className:"summary-row total",children:[M.jsx("span",{children:"Total Cost"}),M.jsx("span",{children:wh(N)})]}),M.jsxs("div",{className:"summary-row",children:[M.jsx("span",{children:"Available Cash"}),M.jsx("span",{className:S?"positive":"negative",children:wh(u.availableCash)})]})]}),!S&&M.jsxs("div",{className:"insufficient-funds-warning",children:[M.jsx(Ye,{}),M.jsx("span",{children:"Insufficient funds to complete this purchase"})]}),M.jsxs("div",{className:"action-buttons",children:[M.jsxs("button",{onClick:async()=>{S&&!j&&await T()},disabled:!S||j,className:"quick-buy-btn "+(S?"":"disabled"),children:[M.jsx(an,{}),j?"Processing...":"Quick Buy"]}),M.jsx("div",{className:"slide-to-buy-container",children:M.jsxs("div",{className:`slide-to-buy ${S?"":"disabled"} ${j?"processing":""}`,children:[M.jsx("div",{className:"slide-track",style:{background:`linear-gradient(to right, #10B981 ${v}%, #E5E7EB ${v}%)`},children:M.jsx(y.div,{className:"slide-button",style:{left:`${Math.min(v,85)}%`},onMouseDown:S?C:void 0,onTouchStart:S?C:void 0,whileHover:S?{scale:1.05}:{},whileTap:S?{scale:.95}:{},animate:{left:`${Math.min(v,85)}%`},transition:{type:0===v?"spring":"tween",stiffness:300,damping:30,duration:0===v?.5:.1},children:j?M.jsx("div",{className:"loading-spinner small"}):v>80?M.jsx(lt,{}):M.jsx(Xe,{})})}),M.jsx("span",{className:"slide-text",children:j?"Processing...":v>80?"Release to Buy!":"Slide to Buy"})]})})]}),M.jsx("div",{className:"additional-actions",children:M.jsx("button",{onClick:()=>{s(),d(`/stock/${e.symbol}`)},className:"view-details-btn",children:"View Full Details"})})]})}):null},Ph=()=>{const[e,t]=n.useState(!1),[s,a]=n.useState(null),[r,i]=n.useState(1),o=n.useCallback((e,n=1)=>{if(!e)return;const s={symbol:e.symbol||e.stockSymbol,name:e.name||e.companyName||`${e.symbol} Corporation`,price:e.price||e.currentPrice||0,change:e.change||e.priceChange||0,changePercent:e.changePercent||e.changePercentage||0,volume:e.volume||0,marketCap:e.marketCap||0,sector:e.sector||"Unknown",...e};a(s),i(n),t(!0)},[]),l=n.useCallback(()=>{t(!1),setTimeout(()=>{a(null),i(1)},300)},[]),c=n.useCallback(e=>{o(e,1)},[o]);return{isOpen:e,currentStock:s,defaultQuantity:r,openSlideToBuy:o,closeSlideToBuy:l,quickBuy:c}},Eh=n.memo(({user:e,theme:t,onLogin:s})=>{var a;o();const[r,i]=n.useState(!1),{portfolioData:l,loading:c,updatePortfolioValues:d,refreshPortfolio:u}=ci(),{isOpen:h,currentStock:m,defaultQuantity:p,closeSlideToBuy:f}=Ph();n.useEffect(()=>{const e=new URLSearchParams(window.location.search),t=e.get("token"),n=e.get("user");if(t&&n&&s)try{const e=JSON.parse(decodeURIComponent(n));s(e,t),qe.success(`Welcome ${e.fullName}!`),window.history.replaceState({},document.title,window.location.pathname)}catch(a){qe.error("Authentication failed. Please try again.")}},[s]),n.useEffect(()=>{1e4===l.availableCash&&1e4===l.totalValue&&setTimeout(()=>{u()},1e3)},[l.availableCash,l.totalValue,u]);const g=[{title:"Total Value",value:l.totalValue,changePercent:l.totalGainLossPercentage,icon:ft,color:"primary"},{title:"Available Cash",value:l.availableCash,changePercent:0,icon:ft,color:"info"},{title:"Total Invested",value:l.totalInvested,changePercent:l.totalGainLossPercentage,icon:mn,color:l.totalGainLoss>=0?"success":"danger"},{title:"Holdings",value:(null==(a=l.holdings)?void 0:a.length)||0,changePercent:0,icon:an,color:"success"}],x=async()=>{i(!0);try{oi.getPortfolioSummary();u(),await d(),await new Promise(e=>setTimeout(e,1e3))}catch(e){}finally{i(!1)}};return M.jsxs("div",{className:"dashboard-page",children:[M.jsx(jh,{icon:mn,title:"TradeBro Dashboard",subtitle:"Indian Stock Market Overview - NSE & BSE Trading Platform",borderColor:"primary",actions:[{label:"Refresh",icon:Kt,onClick:x,variant:"secondary",disabled:r},{label:"Claim Daily ₹100",icon:kt,onClick:async()=>{try{const e=await oi.claimDailyReward();e.success?qe.success(`Daily reward claimed! +₹${e.amount}`):e.alreadyClaimed&&qe.info("Daily reward already claimed today!"),setTimeout(()=>{u(),x()},1e3)}catch(e){qe.error("Failed to claim daily reward")}},variant:"success",disabled:!1}]}),M.jsx(yh,{}),M.jsxs("div",{className:"dashboard-container",children:[M.jsx(y.div,{className:"market-indices",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},children:[{name:"NIFTY 50",value:19674.25,change:145.3,changePercent:.74},{name:"SENSEX",value:65953.48,change:501.92,changePercent:.77},{name:"NIFTY BANK",value:44821.15,change:287.65,changePercent:.65},{name:"NIFTY IT",value:29847.3,change:-89.45,changePercent:-.3}].map((e,t)=>{const n=e.change>=0;return M.jsxs(y.div,{className:"index-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.1*t},children:[M.jsxs("div",{className:"index-header",children:[M.jsx("h3",{className:"index-name",children:e.name}),M.jsxs("div",{className:"index-change "+(n?"positive":"negative"),children:[n?M.jsx(Ze,{size:12}):M.jsx(Je,{size:12}),Math.abs(e.changePercent),"%"]})]}),M.jsx("div",{className:"index-value",children:M.jsx(ph,{end:e.value,duration:2,separator:",",decimals:2})}),M.jsxs("div",{className:"index-change-value "+(n?"positive":"negative"),children:[n?"+":"",e.change.toFixed(2)]})]},e.name)})}),M.jsx(y.div,{className:"stats-grid",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},children:g.map((e,t)=>{const n=e.icon,s=e.changePercent>=0;return M.jsxs(y.div,{className:`stat-card stat-${e.color}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.1*(t+4)},children:[M.jsxs("div",{className:"stat-header",children:[M.jsx("div",{className:"stat-icon",children:M.jsx(n,{})}),0!==e.changePercent&&M.jsxs("div",{className:"stat-change "+(s?"positive":"negative"),children:[s?M.jsx(Ze,{size:12}):M.jsx(Je,{size:12}),Math.abs(e.changePercent).toFixed(1),"%"]})]}),M.jsxs("div",{className:"stat-content",children:[M.jsx("h3",{className:"stat-value",children:"number"==typeof e.value&&e.value>1e3?M.jsx(ph,{end:e.value,duration:2,separator:",",prefix:e.title.includes("Value")||e.title.includes("Cash")||e.title.includes("Invested")?"₹":""}):e.value}),M.jsx("p",{className:"stat-title",children:e.title})]})]},e.title)})})]}),M.jsx(Th,{stockData:m,isOpen:h,onClose:f,defaultQuantity:p,onSuccess:()=>{d()}})]})});Eh.displayName="Dashboard";const Lh=({isOpen:e,onClose:t,onConfirm:s,orderData:a,loading:r=!1})=>{const[i,o]=n.useState(!1),[l,c]=n.useState(!1),d=n.useRef(null),u=x(0),h=v(u,[0,200],[0,1]),m=v(h,[0,.3,.7,1],"BUY"===(null==a?void 0:a.action)?["rgba(229, 231, 235, 0.3)","rgba(251, 191, 36, 0.4)","rgba(16, 185, 129, 0.6)","rgba(16, 185, 129, 0.9)"]:["rgba(229, 231, 235, 0.3)","rgba(251, 191, 36, 0.4)","rgba(239, 68, 68, 0.6)","rgba(239, 68, 68, 0.9)"]),p=v(h,[0,1],["0%","100%"]),[f,b]=n.useState(0),[j,w]=n.useState(0);n.useEffect(()=>h.on("change",e=>{const t=Math.round(100*e);b(t);const n=[25,50,75].find(e=>t>=e&&j<e);n&&l&&(w(n),navigator.vibrate&&navigator.vibrate(30))}),[h,j,l]),n.useEffect(()=>{e&&(o(!1),c(!1),w(0),b(0),u.set(0))},[e,u]);const k=n.useCallback(()=>{c(!0),w(0),navigator.vibrate&&navigator.vibrate(50)},[]),N=n.useCallback(()=>{const e=u.get();c(!1),e>=180?(o(!0),navigator.vibrate&&navigator.vibrate([100,50,100]),setTimeout(()=>{s(a)},300)):u.set(0)},[u,s,a]),S=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2,maximumFractionDigits:2}).format(e),C=a?a.quantity*a.price:0;return a?M.jsx(g,{children:e&&M.jsxs(M.Fragment,{children:[M.jsx(y.div,{className:"drag-confirm-backdrop",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:t}),M.jsxs(y.div,{className:"drag-confirm-modal "+(i?"confirmed":""),initial:{opacity:0,scale:.9,y:-20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:-20},transition:{type:"spring",damping:25,stiffness:300},children:[M.jsxs("div",{className:"modal-header",children:[M.jsxs("div",{className:"header-content",children:[M.jsx("div",{className:`action-icon ${a.action.toLowerCase()}`,children:"BUY"===a.action?M.jsx(mn,{}):M.jsx(hn,{})}),M.jsxs("div",{className:"header-text",children:[M.jsxs("h2",{className:"modal-title",children:["Confirm ",a.action," Order"]}),M.jsx("p",{className:"modal-subtitle",children:"Review your order details carefully"})]})]}),M.jsx("button",{className:"close-button",onClick:t,children:M.jsx(xn,{})})]}),M.jsxs("div",{className:"order-details",children:[M.jsxs("div",{className:"stock-info",children:[M.jsx("div",{className:"stock-symbol",children:a.symbol}),M.jsx("div",{className:"stock-name",children:a.name||a.symbol})]}),M.jsxs("div",{className:"order-summary",children:[M.jsxs("div",{className:"summary-row",children:[M.jsx("span",{className:"label",children:"Action:"}),M.jsx("span",{className:`value ${a.action.toLowerCase()}`,children:a.action})]}),M.jsxs("div",{className:"summary-row",children:[M.jsx("span",{className:"label",children:"Quantity:"}),M.jsxs("span",{className:"value",children:[a.quantity," shares"]})]}),M.jsxs("div",{className:"summary-row",children:[M.jsx("span",{className:"label",children:"Price per share:"}),M.jsx("span",{className:"value",children:S(a.price)})]}),M.jsxs("div",{className:"summary-row total",children:[M.jsx("span",{className:"label",children:"Total Value:"}),M.jsx("span",{className:"value",children:S(C)})]})]}),M.jsxs("div",{className:"risk-warning",children:[M.jsx(sn,{className:"warning-icon"}),M.jsxs("div",{className:"warning-text",children:[M.jsx("strong",{children:"Important:"})," This action cannot be undone. Please review all details before confirming."]})]})]}),M.jsxs("div",{className:"drag-confirm-container",children:[M.jsx("div",{className:"drag-instruction",children:i?M.jsx("span",{className:"confirmed-text",children:"✓ Order Confirmed!"}):M.jsxs("span",{children:["Drag to confirm ",a.action.toLowerCase()," order"]})}),M.jsxs("div",{className:"drag-track",ref:d,children:[M.jsx(y.div,{className:"drag-track-fill",style:{backgroundColor:m,width:i?"100%":p}}),M.jsx(y.div,{className:`drag-handle ${l?"dragging":""} ${i?"confirmed":""}`,drag:"x",dragConstraints:d,dragElastic:.1,dragMomentum:!1,style:{x:u},onDragStart:k,onDragEnd:N,whileDrag:{scale:1.1},animate:{x:i?200:0},transition:{type:"spring",damping:20,stiffness:300},children:i?M.jsx(y.div,{initial:{scale:0},animate:{scale:1},className:"check-icon",children:"✓"}):M.jsx(Xe,{})}),M.jsx("div",{className:"drag-text",children:i?"Processing...":l&&f>5?`${f}%`:`Confirm ${a.action}`})]})]}),r&&M.jsxs("div",{className:"loading-overlay",children:[M.jsx("div",{className:"loading-spinner"}),M.jsx("p",{children:"Processing your order..."})]})]})]})}):null},Ih=({user:e,theme:t})=>{var s;const a=o(),r=l(),[i,c]=n.useState(!1),[d,u]=n.useState(null),{isOpen:h,currentStock:m,defaultQuantity:p,openSlideToBuy:f,closeSlideToBuy:g}=Ph(),[x,v]=n.useState("all"),[b,j]=n.useState("value"),{portfolioData:w,loading:k,updatePortfolioValues:N,refreshPortfolio:S,sellStock:C}=ci();if(n.useEffect(()=>{var e,t;if((null==(e=r.state)?void 0:e.showPurchaseSuccess)&&(null==(t=r.state)?void 0:t.purchasedStock)){const e=r.state.purchasedStock;qe.success(`🎉 Successfully purchased ${e.quantity} shares of ${e.symbol} for ${A(e.totalCost)}!`,{duration:5e3}),u(e.symbol),setTimeout(()=>{u(null)},5e3),a(r.pathname,{replace:!0})}},[r.state,a,r.pathname]),k||!w)return M.jsx("div",{className:"portfolio-page",children:M.jsx("div",{className:"portfolio-container",children:M.jsxs("div",{className:"loading-container",children:[M.jsx("div",{className:"loading-spinner"}),M.jsx("p",{children:"Loading portfolio..."})]})})});const T=[{title:"Total Value",value:w.totalValue||0,changePercent:w.totalGainLossPercentage||0,changeAmount:w.totalGainLoss||0,icon:ft,color:"primary"},{title:"Available Cash",value:w.availableCash||0,changePercent:0,changeAmount:0,icon:ft,color:"info"},{title:"Total Invested",value:w.totalInvested||0,changePercent:w.totalGainLossPercentage||0,changeAmount:w.totalGainLoss||0,icon:nt,color:(w.totalGainLoss||0)>=0?"success":"danger"},{title:"Holdings",value:(null==(s=w.holdings)?void 0:s.length)||0,changePercent:0,changeAmount:0,icon:Gt,color:"info"}],P=w.holdings||[],E=P.filter(e=>"gainers"===x?(e.totalGain||0)>0:"losers"!==x||(e.totalGain||0)<0),L=[...E].sort((e,t)=>(t.value||0)-(e.value||0)),I=async()=>{c(!0),await new Promise(e=>setTimeout(e,1500)),c(!1)},A=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(e);return M.jsxs("div",{className:"portfolio-page",children:[M.jsx(jh,{icon:Gt,title:"Portfolio",subtitle:"Track your investments and portfolio performance",borderColor:"success",actions:[{label:"Refresh",icon:Kt,onClick:I,variant:"secondary",disabled:i}]}),M.jsxs("div",{className:"portfolio-container",children:[M.jsx(y.div,{className:"portfolio-stats",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},children:T.map((e,t)=>{const n=e.icon,s=e.changePercent>=0;return M.jsxs(y.div,{className:`stat-card stat-${e.color}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.1*t},children:[M.jsxs("div",{className:"stat-header",children:[M.jsx("div",{className:"stat-icon",children:M.jsx(n,{})}),M.jsxs("div",{className:"stat-change "+(s?"positive":"negative"),children:[s?M.jsx(Ze,{size:14}):M.jsx(Je,{size:14}),Math.abs(e.changePercent),"%"]})]}),M.jsxs("div",{className:"stat-content",children:[M.jsx("h3",{className:"stat-value",children:"number"==typeof e.value&&e.value>1e3?M.jsx(ph,{end:e.value,duration:2,separator:",",prefix:e.title.includes("Value")||e.title.includes("P&L")?"₹":""}):e.value}),M.jsx("p",{className:"stat-title",children:e.title}),0!==e.changeAmount&&M.jsxs("p",{className:"stat-change-amount "+(s?"positive":"negative"),children:[s?"+":"",A(e.changeAmount)]})]})]},e.title)})}),M.jsx("div",{className:"portfolio-grid",children:M.jsxs(y.div,{className:"portfolio-card holdings-table",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},children:[M.jsxs("div",{className:"card-header",children:[M.jsxs("div",{className:"header-left",children:[M.jsxs("h3",{className:"card-title",children:[M.jsx(nt,{className:"card-icon"}),"My Holdings",M.jsxs("span",{className:"holdings-count",children:["(",E.length," of ",P.length," stocks)"]})]}),M.jsxs("div",{className:"holdings-summary",children:[M.jsxs("span",{className:"total-invested",children:["Total Invested: ",A(w.totalInvested||0)]}),M.jsxs("span",{className:"current-value",children:["Current Value: ",A(w.totalValue||0)]})]})]}),M.jsxs("div",{className:"card-actions",children:[M.jsx("div",{className:"filter-group",children:M.jsxs("select",{className:"filter-select",value:x,onChange:e=>v(e.target.value),children:[M.jsx("option",{value:"all",children:"All Holdings"}),M.jsx("option",{value:"gainers",children:"Gainers Only"}),M.jsx("option",{value:"losers",children:"Losers Only"})]})}),M.jsx("button",{className:"btn-refresh",onClick:I,disabled:i,title:"Refresh Holdings",children:M.jsx(Kt,{className:i?"spinning":""})})]})]}),M.jsx("div",{className:"card-content",children:M.jsxs("div",{className:"holdings-table",children:[M.jsxs("div",{className:"table-header",children:[M.jsx("div",{className:"col-stock",children:"Stock"}),M.jsx("div",{className:"col-quantity",children:"Quantity"}),M.jsx("div",{className:"col-avg-price",children:"Avg Price"}),M.jsx("div",{className:"col-current-price",children:"Current Price"}),M.jsx("div",{className:"col-value",children:"Value"}),M.jsx("div",{className:"col-gains",children:"Total P&L"}),M.jsx("div",{className:"col-day-change",children:"Day Change"}),M.jsx("div",{className:"col-actions",children:"Actions"})]}),M.jsx("div",{className:"table-body",children:L.length>0?L.map((e,t)=>{return M.jsxs(y.div,{className:"table-row clickable "+(d===e.symbol?"highlighted-purchase":""),initial:{opacity:0,y:10},animate:{opacity:1,y:0,scale:d===e.symbol?1.02:1},style:{backgroundColor:d===e.symbol?"var(--success-bg, rgba(16, 185, 129, 0.1))":"transparent"},transition:{duration:.3,delay:.05*t},onClick:()=>a(`/stock/${e.symbol}`),children:[M.jsx("div",{className:"col-stock",children:M.jsxs("div",{className:"stock-info",children:[M.jsx("div",{className:"stock-symbol",children:e.symbol}),M.jsx("div",{className:"stock-name",children:e.name}),M.jsx("div",{className:"stock-sector",children:e.sector})]})}),M.jsx("div",{className:"col-quantity",children:(n=e.quantity||0,new Intl.NumberFormat("en-IN").format(n))}),M.jsx("div",{className:"col-avg-price",children:A(e.avgPrice||0)}),M.jsx("div",{className:"col-current-price",children:M.jsx(ui,{price:e.currentPrice||0,change:e.dayChange||0,changePercent:e.dayChangePercent||0,size:"small"})}),M.jsx("div",{className:"col-value",children:A(e.value||0)}),M.jsxs("div",{className:"col-gains",children:[M.jsxs("div",{className:"gain-amount "+((e.totalGain||0)>=0?"positive":"negative"),children:[(e.totalGain||0)>=0?"+":"",A(e.totalGain||0)]}),M.jsxs("div",{className:"gain-percent "+((e.totalGainPercent||0)>=0?"positive":"negative"),children:["(",(e.totalGainPercent||0)>=0?"+":"",(e.totalGainPercent||0).toFixed(2),"%)"]})]}),M.jsxs("div",{className:"col-day-change",children:[M.jsxs("div",{className:"day-change "+((e.dayChange||0)>=0?"positive":"negative"),children:[(e.dayChange||0)>=0?"+":"",(e.dayChange||0).toFixed(2)]}),M.jsxs("div",{className:"day-change-percent "+((e.dayChangePercent||0)>=0?"positive":"negative"),children:["(",(e.dayChangePercent||0)>=0?"+":"",(e.dayChangePercent||0).toFixed(2),"%)"]})]}),M.jsx("div",{className:"col-actions",children:M.jsxs("div",{className:"action-buttons",children:[M.jsx(Ch,{stockData:{symbol:e.symbol,name:e.name,price:e.currentPrice,change:e.dayChange,changePercent:e.dayChangePercent},size:"small",variant:"simple",showText:!1}),M.jsx("button",{className:"buy-btn-small",onClick:t=>{t.stopPropagation(),f({symbol:e.symbol,name:e.name,price:e.currentPrice,change:e.dayChange,changePercent:e.dayChangePercent})},title:"Buy More",children:"Buy"}),M.jsx("button",{className:"sell-btn-small",onClick:t=>{t.stopPropagation(),(async e=>{const t=prompt(`How many shares of ${e.symbol} do you want to sell? (Available: ${e.quantity})`);if(!t||isNaN(t)||t<=0)return;const n=parseInt(t);if(n>e.quantity)qe.error(`You only have ${e.quantity} shares available`);else try{const t=await C(e.symbol,n,e.currentPrice||e.avgPrice);t&&t.success?qe.success(`Successfully sold ${n} shares of ${e.symbol}!`):qe.error((null==t?void 0:t.error)||"Failed to sell stock")}catch(s){qe.error(s.message||"Failed to sell stock")}})(e)},title:"Sell Stock",children:"Sell"})]})})]},e.symbol);var n}):M.jsxs("div",{className:"empty-holdings",children:[M.jsx("div",{className:"empty-icon",children:M.jsx(nt,{size:48})}),M.jsx("h3",{className:"empty-title",children:"gainers"===x?"No Gainers Found":"losers"===x?"No Losers Found":"No Holdings Yet"}),M.jsx("p",{className:"empty-description",children:"gainers"===x?"None of your holdings are currently in profit.":"losers"===x?"None of your holdings are currently in loss.":"Start building your portfolio by adding your first stock."}),"all"!==x&&M.jsx("button",{className:"btn-secondary",onClick:()=>v("all"),children:"View All Holdings"})]})})]})})]})}),M.jsx(Th,{stockData:m,isOpen:h,onClose:g,defaultQuantity:p,onSuccess:()=>{}})]})]})},Ah=({isOpen:e,position:t,stockData:s,onClose:a,onQuickBuy:r,onQuickSell:i,onViewChart:o,onAddToWatchlist:l,onViewDetails:c,hasHolding:d=!1,isInWatchlist:u=!1})=>{var h,m,p;const f=n.useRef(null),[x,v]=n.useState(t);if(n.useEffect(()=>{if(e&&f.current&&t){const e=f.current.getBoundingClientRect(),n={width:window.innerWidth,height:window.innerHeight};let{x:s,y:a}=t;s+e.width>n.width&&(s=n.width-e.width-10),s<10&&(s=10),a+e.height>n.height&&(a=n.height-e.height-10),a<10&&(a=10),v({x:s,y:a})}},[e,t]),n.useEffect(()=>{const t=e=>{f.current&&!f.current.contains(e.target)&&a()},n=e=>{"Escape"===e.key&&a()};return e&&(document.addEventListener("mousedown",t),document.addEventListener("keydown",n)),()=>{document.removeEventListener("mousedown",t),document.removeEventListener("keydown",n)}},[e,a]),!e||!s)return null;const b=[{id:"quick-sell",label:"Quick Sell",icon:hn,action:()=>{i(s),a()},color:"red",disabled:!d,shortcut:"S"},{id:"enhanced-order",label:"Enhanced Order",icon:an,action:()=>{a()},color:"blue",shortcut:"E"},{id:"view-chart",label:"View Chart",icon:nt,action:()=>{o(s),a()},color:"purple",shortcut:"C"},{id:"watchlist",label:u?"Remove from Watchlist":"Add to Watchlist",icon:at,action:()=>{l(s),a()},color:"orange",shortcut:"W"},{id:"view-details",label:"View Details",icon:Tt,action:()=>{c(s),a()},color:"gray",shortcut:"I"}];return M.jsx(g,{children:M.jsxs(y.div,{ref:f,className:"stock-context-menu",style:{position:"fixed",left:x.x,top:x.y,zIndex:1e3},initial:{opacity:0,scale:.95,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-10},transition:{duration:.15,ease:"easeOut"},children:[M.jsxs("div",{className:"context-menu-header",children:[M.jsxs("div",{className:"stock-info",children:[M.jsx("span",{className:"stock-symbol",children:s.symbol}),M.jsxs("span",{className:"stock-price",children:["₹",(null==(h=s.price)?void 0:h.toLocaleString("en-IN"))||"0.00"]})]}),M.jsxs("div",{className:"price-change "+(s.change>=0?"positive":"negative"),children:[s.change>=0?"+":"",(null==(m=s.change)?void 0:m.toFixed(2))||"0.00","(",(null==(p=s.changePercent)?void 0:p.toFixed(2))||"0.00","%)"]})]}),M.jsx("div",{className:"context-menu-items",children:b.map((e,t)=>M.jsxs(y.button,{className:`context-menu-item ${e.color} ${e.disabled?"disabled":""}`,onClick:e.action,disabled:e.disabled,initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{duration:.1,delay:.02*t},whileHover:{backgroundColor:"var(--hover-bg)"},whileTap:{scale:.98},children:[M.jsxs("div",{className:"menu-item-content",children:[M.jsx(e.icon,{className:"menu-item-icon",size:16}),M.jsx("span",{className:"menu-item-label",children:e.label})]}),M.jsx("span",{className:"menu-item-shortcut",children:e.shortcut})]},e.id))}),M.jsxs("div",{className:"context-menu-footer",children:[M.jsxs("div",{className:"market-status",children:[M.jsx(Ve,{size:12}),M.jsx("span",{children:"Market Open"})]}),M.jsxs("div",{className:"last-updated",children:["Updated: ",(new Date).toLocaleTimeString()]})]})]})})},Oh=({user:e,theme:t})=>{var s;const[a,r]=n.useState(null),[i,c]=n.useState("market"),[d,u]=n.useState("buy"),[h,m]=n.useState(1),[p,f]=n.useState(""),[g,x]=n.useState(!1),[v,b]=n.useState(!1),[j,w]=n.useState(!1),[k,N]=n.useState(!1),[S,C]=n.useState(null),T=l(),P=o(),{portfolioData:E,buyStock:L,sellStock:I}=ci(),{isOpen:A,currentStock:O,defaultQuantity:D,closeSlideToBuy:R}=Ph(),{orderModalState:_,closeOrderModal:F,quickBuy:B,quickSell:z,navigateToTrading:U}=Ti(),{contextMenu:$,openContextMenu:H,closeContextMenu:W}=(()=>{const[e,t]=n.useState({isOpen:!1,position:{x:0,y:0},stockData:null}),s=()=>{t({isOpen:!1,position:{x:0,y:0},stockData:null})};return n.useEffect(()=>{const t=t=>{if(!e.isOpen)return;const{key:n}=t;switch(e.stockData,n.toLowerCase()){case"b":case"s":case"c":case"w":case"e":case"i":t.preventDefault(),s()}};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[e]),{contextMenu:e,openContextMenu:(e,n)=>{e.preventDefault(),e.stopPropagation(),t({isOpen:!0,position:{x:e.clientX,y:e.clientY},stockData:n})},closeContextMenu:s}})(),{isModalOpen:q,orderData:V,loading:Y,closeConfirmation:G,processOrder:J,confirmBuy:Q,confirmSell:K}=(()=>{const[e,t]=n.useState(!1),[s,a]=n.useState(null),[r,i]=n.useState(!1),o=n.useCallback(e=>{a(e),t(!0)},[]),l=n.useCallback(()=>{r||(t(!1),setTimeout(()=>{a(null),i(!1)},300))},[r]),c=n.useCallback(async e=>{i(!0);try{let t;if("BUY"===e.action?t=await oi.buyStock(e.symbol,e.quantity,e.price,e.orderType||"market"):"SELL"===e.action&&(t=await oi.sellStock(e.symbol,e.quantity,e.price,e.orderType||"market")),t.success)return qe.success(`${e.action} order executed successfully! ${e.quantity} shares of ${e.symbol}`,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0}),setTimeout(()=>{l()},1500),t;throw new Error(t.message||"Order execution failed")}catch(t){return qe.error(t.message||`Failed to execute ${e.action.toLowerCase()} order`,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0}),i(!1),{success:!1,error:t.message}}},[l]),d=n.useCallback((e,t,n,s={})=>{o({action:"BUY",symbol:e,quantity:t,price:n,...s})},[o]),u=n.useCallback((e,t,n,s={})=>{o({action:"SELL",symbol:e,quantity:t,price:n,...s})},[o]);return{isModalOpen:e,orderData:s,loading:r,openConfirmation:o,closeConfirmation:l,processOrder:c,confirmBuy:d,confirmSell:u}})(),{query:X,setQuery:Z,results:ee,suggestions:te,recentSearches:ne,showHistory:se,handleHistoryClick:ae,loading:re,clearSearch:ie,hasResults:oe}=ti({enableSuggestions:!0,enableHistory:!0,limit:20,debounceMs:300,onResults:(e,t)=>{e.length>0&&w(!0)}}),le=[{title:"Available Balance",value:E.availableCash,icon:ft,color:"primary"},{title:"Total Holdings",value:(null==(s=E.holdings)?void 0:s.length)||0,icon:an,color:"info"},{title:"Total Invested",value:E.totalInvested,icon:nt,color:"warning"},{title:"Total P&L",value:E.totalGainLoss,changePercent:E.totalGainLossPercentage,icon:E.totalGainLoss>=0?mn:hn,color:E.totalGainLoss>=0?"success":"danger"}],ce=[{symbol:"RELIANCE",name:"Reliance Industries",price:2465.3,change:2.71,changePercent:.11,volume:"2.5M"},{symbol:"TCS",name:"Tata Consultancy Services",price:3185.45,change:-14.85,changePercent:-.47,volume:"1.8M"},{symbol:"HDFCBANK",name:"HDFC Bank",price:1650.2,change:51.75,changePercent:3.13,volume:"3.2M"},{symbol:"INFY",name:"Infosys",price:1595.8,change:19.7,changePercent:1.25,volume:"2.1M"},{symbol:"ICICIBANK",name:"ICICI Bank",price:945.15,change:12.3,changePercent:1.32,volume:"4.1M"},{symbol:"WIPRO",name:"Wipro Ltd",price:420.85,change:-3.25,changePercent:-.77,volume:"1.5M"},{symbol:"BAJFINANCE",name:"Bajaj Finance",price:6845.3,change:125.4,changePercent:1.87,volume:"0.8M"},{symbol:"MARUTI",name:"Maruti Suzuki",price:9245.6,change:-85.2,changePercent:-.91,volume:"0.6M"}];n.useEffect(()=>{const e=new URLSearchParams(T.search),t=e.get("search"),n=e.get("symbol");if(t&&Z(t),n){const e=ce.find(e=>e.symbol===n)||ee.find(e=>e.symbol===n);e&&de(e)}},[T.search,ee]);const de=e=>{var t;r(e),f((null==(t=e.price)?void 0:t.toString())||"")},ue=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),he=oe&&j?ee.map(e=>({symbol:e.symbol,name:e.name,price:e.price||0,change:e.change||0,changePercent:e.changePercent||0,volume:e.volume||"N/A",exchange:e.exchange})):X&&!oe?ce.filter(e=>e.symbol.toLowerCase().includes(X.toLowerCase())||e.name.toLowerCase().includes(X.toLowerCase())):ce;return M.jsx("div",{className:"trading-page",children:M.jsxs("div",{className:"trading-container",children:[M.jsx(y.div,{className:"trading-header",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6},children:M.jsxs("div",{className:"header-content",children:[M.jsxs("div",{className:"header-left",children:[M.jsxs("h1",{className:"page-title",children:[M.jsx(an,{className:"title-icon"}),"Trading"]}),M.jsx("p",{className:"page-subtitle",children:"Buy and sell stocks with real-time market data"})]}),M.jsx("div",{className:"header-actions",children:M.jsxs("button",{className:"btn-premium btn-secondary",onClick:async()=>{x(!0),await new Promise(e=>setTimeout(e,1500)),x(!1)},disabled:g,children:[M.jsx(Kt,{size:16,className:g?"animate-spin":""}),"Refresh"]})})]})}),M.jsx(y.div,{className:"trading-stats",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},children:le.map((e,t)=>{const n=e.icon,s=e.changePercent>=0;return M.jsxs(y.div,{className:`stat-card stat-${e.color}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.1*t},children:[M.jsxs("div",{className:"stat-header",children:[M.jsx("div",{className:"stat-icon",children:M.jsx(n,{})}),void 0!==e.changePercent&&M.jsxs("div",{className:"stat-change "+(s?"positive":"negative"),children:[s?M.jsx(Ze,{size:14}):M.jsx(Je,{size:14}),Math.abs(e.changePercent),"%"]})]}),M.jsxs("div",{className:"stat-content",children:[M.jsx("h3",{className:"stat-value",children:"number"==typeof e.value&&e.value>1e3?M.jsx(ph,{end:e.value,duration:2,separator:",",prefix:e.title.includes("Balance")||e.title.includes("P&L")?"₹":""}):e.value}),M.jsx("p",{className:"stat-title",children:e.title})]})]},e.title)})}),M.jsxs("div",{className:"trading-grid",children:[M.jsxs(y.div,{className:"trading-card stocks-panel",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:[M.jsxs("div",{className:"card-header",children:[M.jsxs("h3",{className:"card-title",children:[M.jsx(nt,{className:"card-icon"}),oe&&j?"Search Results":"Popular Stocks"]}),M.jsx("div",{className:"search-container",children:M.jsx(si,{placeholder:"Search stocks...",value:X,onChange:Z,onClear:()=>{ie(),w(!1)},suggestions:te,recentSearches:ne,onSuggestionClick:e=>{const t={symbol:e.symbol,name:e.name,price:0,change:0,changePercent:0,volume:"N/A"};de(t),ie()},onHistoryClick:ae,showHistory:se,loading:re,size:"sm",showSuggestions:!0,enableHistory:!0,className:"trading-search-input",renderSuggestion:(e,t)=>M.jsx("div",{className:"trading-search-suggestion",children:M.jsxs("div",{className:"suggestion-content",children:[M.jsx("span",{className:"suggestion-symbol",children:e.symbol}),M.jsx("span",{className:"suggestion-name",children:e.name}),e.exchange&&M.jsx("span",{className:"suggestion-exchange",children:e.exchange})]})},t)})})]}),M.jsx("div",{className:"card-content",children:M.jsxs("div",{className:"stocks-list",children:[re&&M.jsxs("div",{className:"loading-state",children:[M.jsx(Ve,{className:"loading-icon animate-spin"}),M.jsx("span",{children:"Searching stocks..."})]}),!re&&0===he.length&&X&&M.jsxs("div",{className:"empty-state",children:[M.jsx(Zt,{className:"empty-icon"}),M.jsxs("span",{children:['No stocks found for "',X,'"']})]}),!re&&he.map((e,t)=>M.jsxs(y.div,{className:"stock-item "+((null==a?void 0:a.symbol)===e.symbol?"selected":""),onClick:t=>{1===t.detail?de(e):2===t.detail&&P(`/stock/${e.symbol}`)},onContextMenu:t=>H(t,e),initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:.05*t},children:[M.jsxs("div",{className:"stock-info",children:[M.jsx("div",{className:"stock-symbol",children:e.symbol}),M.jsx("div",{className:"stock-name",children:e.name}),M.jsxs("div",{className:"stock-volume",children:["Vol: ",e.volume]})]}),M.jsx("div",{className:"stock-price-info",children:M.jsx(ui,{price:e.price,change:e.change,changePercent:e.changePercent,size:"small"})}),M.jsx("div",{className:"stock-actions",children:M.jsx(Ch,{stockData:e,size:"small",variant:"simple",showText:!1})})]},e.symbol))]})})]}),M.jsxs(y.div,{className:"trading-card order-panel",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},children:[M.jsx("div",{className:"card-header",children:M.jsxs("h3",{className:"card-title",children:[M.jsx(an,{className:"card-icon"}),"Place Order"]})}),M.jsx("div",{className:"card-content",children:a?M.jsxs("div",{className:"order-form",children:[M.jsxs("div",{className:"selected-stock",children:[M.jsxs("div",{className:"stock-details",children:[M.jsx("h4",{children:a.symbol}),M.jsx("p",{children:a.name})]}),M.jsx(ui,{price:a.price,change:a.change,changePercent:a.changePercent,size:"medium"})]}),M.jsxs("div",{className:"order-controls",children:[M.jsxs("div",{className:"transaction-type",children:[M.jsxs("button",{className:"type-btn "+("buy"===d?"active buy":""),onClick:()=>u("buy"),children:[M.jsx(mn,{size:16}),"BUY"]}),M.jsxs("button",{className:"type-btn "+("sell"===d?"active sell":""),onClick:()=>u("sell"),children:[M.jsx(hn,{size:16}),"SELL"]})]}),M.jsxs("div",{className:"order-type",children:[M.jsx("label",{children:"Order Type"}),M.jsxs("select",{value:i,onChange:e=>c(e.target.value),className:"order-select",children:[M.jsx("option",{value:"market",children:"Market Order"}),M.jsx("option",{value:"limit",children:"Limit Order"}),M.jsx("option",{value:"stop",children:"Stop Order"})]})]}),M.jsxs("div",{className:"quantity-control",children:[M.jsx("label",{children:"Quantity"}),M.jsxs("div",{className:"quantity-input",children:[M.jsx("button",{className:"qty-btn",onClick:()=>m(Math.max(1,h-1)),children:M.jsx(Ut,{size:14})}),M.jsx("input",{type:"number",value:h,onChange:e=>m(Math.max(1,parseInt(e.target.value)||1)),className:"qty-input",min:"1"}),M.jsx("button",{className:"qty-btn",onClick:()=>m(h+1),children:M.jsx(Qt,{size:14})})]})]}),"market"!==i&&M.jsxs("div",{className:"price-control",children:[M.jsx("label",{children:"Price (₹)"}),M.jsx("input",{type:"number",value:p,onChange:e=>f(e.target.value),className:"price-input",placeholder:"Enter price",step:"0.01"})]}),M.jsxs("div",{className:"order-summary",children:[M.jsxs("div",{className:"summary-row",children:[M.jsx("span",{children:"Quantity:"}),M.jsxs("span",{children:[h," shares"]})]}),M.jsxs("div",{className:"summary-row",children:[M.jsx("span",{children:"Price:"}),M.jsx("span",{children:ue("market"===i?a.price:parseFloat(p)||0)})]}),M.jsxs("div",{className:"summary-row total",children:[M.jsx("span",{children:"Total:"}),M.jsx("span",{children:ue(("market"===i?a.price:parseFloat(p)||0)*h)})]})]}),M.jsxs("div",{className:"order-actions-grid",children:[M.jsx("button",{className:`place-order-btn ${d}`,onClick:async()=>{if(!a||!h)return;const e="market"===i?a.price:parseFloat(p),t=parseInt(h),n={symbol:a.symbol,name:a.name,price:e,quantity:t,orderType:i,source:"trading-page"};"buy"===d?Q(n.symbol,n.quantity,n.price,{name:n.name,orderType:n.orderType,source:n.source}):K(n.symbol,n.quantity,n.price,{name:n.name,orderType:n.orderType,source:n.source}),m(1),f("")},disabled:!h||"market"!==i&&!p||v,children:v?M.jsxs(M.Fragment,{children:[M.jsx("div",{className:"loading-spinner sm"}),"Placing Order..."]}):"buy"===d?"Place Buy Order":"Place Sell Order"}),M.jsxs("button",{className:"enhanced-order-btn",onClick:()=>((e,t="buy")=>{C({...e,initialOrderType:t}),N(!0)})(a,d),disabled:!a,children:[M.jsx(an,{size:16}),"Enhanced Order"]})]})]})]}):M.jsxs("div",{className:"no-stock-selected",children:[M.jsx(Ve,{size:48}),M.jsx("p",{children:"Select a stock to place an order"})]})})]}),M.jsxs(y.div,{className:"trading-card orders-panel",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},children:[M.jsx("div",{className:"card-header",children:M.jsxs("h3",{className:"card-title",children:[M.jsx(dt,{className:"card-icon"}),"Recent Orders"]})}),M.jsx("div",{className:"card-content",children:M.jsx("div",{className:"orders-list",children:[{id:1,symbol:"WIPRO",type:"BUY",quantity:50,price:420,status:"completed",time:"10:30 AM",total:21e3},{id:2,symbol:"BAJFINANCE",type:"SELL",quantity:25,price:6800,status:"completed",time:"11:45 AM",total:17e4},{id:3,symbol:"MARUTI",type:"BUY",quantity:10,price:9200,status:"pending",time:"12:15 PM",total:92e3},{id:4,symbol:"ASIANPAINT",type:"SELL",quantity:15,price:3100,status:"cancelled",time:"01:30 PM",total:46500}].map((e,t)=>M.jsxs(y.div,{className:"order-item",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:.05*t},children:[M.jsxs("div",{className:"order-info",children:[M.jsx("div",{className:"order-symbol",children:e.symbol}),M.jsxs("div",{className:"order-details",children:[M.jsx("span",{className:`order-type ${e.type.toLowerCase()}`,children:e.type}),M.jsxs("span",{className:"order-quantity",children:[e.quantity," shares"]}),M.jsx("span",{className:"order-time",children:e.time})]})]}),M.jsxs("div",{className:"order-price",children:[M.jsx("div",{className:"price-value",children:ue(e.price)}),M.jsx("div",{className:"total-value",children:ue(e.total)})]}),M.jsxs("div",{className:"order-status",children:["completed"===e.status&&M.jsx(lt,{className:"status-icon completed"}),"pending"===e.status&&M.jsx(dt,{className:"status-icon pending"}),"cancelled"===e.status&&M.jsx(yn,{className:"status-icon cancelled"}),M.jsx("span",{className:`status-text ${e.status}`,children:e.status})]})]},e.id))})})]})]}),M.jsx(Ni,{isOpen:k||_.isOpen,onClose:()=>{N(!1),F()},stockData:S||_.stockData,initialOrderType:(null==S?void 0:S.initialOrderType)||_.orderType,onOrderPlaced:()=>{N(!1),C(null),F()},onShowConfirmation:null}),M.jsx(Ah,{isOpen:$.isOpen,position:$.position,stockData:$.stockData,onClose:W,onQuickBuy:B,onQuickSell:z,onViewChart:e=>U(e,"buy"),onAddToWatchlist:e=>{},onViewDetails:e=>{},hasHolding:!!$.stockData&&E.holdings.some(e=>e.symbol===$.stockData.symbol)}),M.jsx(Lh,{isOpen:q,onClose:G,onConfirm:J,orderData:V,loading:Y}),M.jsx(Th,{stockData:O,isOpen:A,onClose:R,defaultQuantity:D,onSuccess:()=>{}})]})})},Dh=n.createContext(),Rh=({children:e})=>{const[t,s]=n.useState(()=>{const e=localStorage.getItem("sidebarCollapsed");return null!==e?JSON.parse(e):window.innerWidth<=768}),[a,r]=n.useState(window.innerWidth<=768);n.useEffect(()=>{const e=()=>{const e=window.innerWidth<=768;r(e),e&&s(e=>e||(localStorage.setItem("sidebarCollapsed","true"),!0))};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const i={isCollapsed:t,setIsCollapsed:s,isMobile:a,toggleSidebar:()=>{s(e=>{const t=!e;return localStorage.setItem("sidebarCollapsed",JSON.stringify(t)),t})},expandSidebar:()=>{s(()=>(localStorage.setItem("sidebarCollapsed","false"),!1))},collapseSidebar:()=>{s(()=>(localStorage.setItem("sidebarCollapsed","true"),!0))}};return M.jsx(Dh.Provider,{value:i,children:e})},Mh={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function _h(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const Fh={date:_h({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:_h({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:_h({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},Bh={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function zh(e){return(t,n)=>{let s;if("formatting"===((null==n?void 0:n.context)?String(n.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,a=(null==n?void 0:n.width)?String(n.width):t;s=e.formattingValues[a]||e.formattingValues[t]}else{const t=e.defaultWidth,a=(null==n?void 0:n.width)?String(n.width):e.defaultWidth;s=e.values[a]||e.values[t]}return s[e.argumentCallback?e.argumentCallback(t):t]}}function Uh(e){return(t,n={})=>{const s=n.width,a=s&&e.matchPatterns[s]||e.matchPatterns[e.defaultMatchWidth],r=t.match(a);if(!r)return null;const i=r[0],o=s&&e.parsePatterns[s]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(o)?function(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n;return}(o,e=>e.test(i)):function(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n;return}(o,e=>e.test(i));let c;c=e.valueCallback?e.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;return{value:c,rest:t.slice(i.length)}}}var $h;const Hh={code:"en-US",formatDistance:(e,t,n)=>{let s;const a=Mh[e];return s="string"==typeof a?a:1===t?a.one:a.other.replace("{{count}}",t.toString()),(null==n?void 0:n.addSuffix)?n.comparison&&n.comparison>0?"in "+s:s+" ago":s},formatLong:Fh,formatRelative:(e,t,n,s)=>Bh[e],localize:{ordinalNumber:(e,t)=>{const n=Number(e),s=n%100;if(s>20||s<10)switch(s%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:zh({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:zh({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:zh({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:zh({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:zh({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})},match:{ordinalNumber:($h={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)},(e,t={})=>{const n=e.match($h.matchPattern);if(!n)return null;const s=n[0],a=e.match($h.parsePattern);if(!a)return null;let r=$h.valueCallback?$h.valueCallback(a[0]):a[0];return r=t.valueCallback?t.valueCallback(r):r,{value:r,rest:e.slice(s.length)}}),era:Uh({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:Uh({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:Uh({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:Uh({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:Uh({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})},options:{weekStartsOn:0,firstWeekContainsDate:1}};let Wh={};function qh(){return Wh}const Vh=6048e5,Yh=Symbol.for("constructDateFrom");function Gh(e,t){return"function"==typeof e?e(t):e&&"object"==typeof e&&Yh in e?e[Yh](t):e instanceof Date?new e.constructor(t):new Date(t)}function Jh(e,t){return Gh(t||e,e)}function Qh(e){const t=Jh(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function Kh(e,t){const n=Jh(e,null==t?void 0:t.in);return n.setHours(0,0,0,0),n}function Xh(e,t,n){const[s,a]=function(e,...t){const n=Gh.bind(null,t.find(e=>"object"==typeof e));return t.map(n)}(null==n||n.in,e,t),r=Kh(s),i=Kh(a),o=+r-Qh(r),l=+i-Qh(i);return Math.round((o-l)/864e5)}function Zh(e,t){const n=Jh(e,null==t?void 0:t.in),s=Xh(n,function(e,t){const n=Jh(e,null==t?void 0:t.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}(n));return s+1}function em(e,t){var n,s,a,r;const i=qh(),o=(null==t?void 0:t.weekStartsOn)??(null==(s=null==(n=null==t?void 0:t.locale)?void 0:n.options)?void 0:s.weekStartsOn)??i.weekStartsOn??(null==(r=null==(a=i.locale)?void 0:a.options)?void 0:r.weekStartsOn)??0,l=Jh(e,null==t?void 0:t.in),c=l.getDay(),d=(c<o?7:0)+c-o;return l.setDate(l.getDate()-d),l.setHours(0,0,0,0),l}function tm(e,t){return em(e,{...t,weekStartsOn:1})}function nm(e,t){const n=Jh(e,null==t?void 0:t.in),s=n.getFullYear(),a=Gh(n,0);a.setFullYear(s+1,0,4),a.setHours(0,0,0,0);const r=tm(a),i=Gh(n,0);i.setFullYear(s,0,4),i.setHours(0,0,0,0);const o=tm(i);return n.getTime()>=r.getTime()?s+1:n.getTime()>=o.getTime()?s:s-1}function sm(e,t){const n=Jh(e,null==t?void 0:t.in),s=+tm(n)-+function(e,t){const n=nm(e,t),s=Gh(e,0);return s.setFullYear(n,0,4),s.setHours(0,0,0,0),tm(s)}(n);return Math.round(s/Vh)+1}function am(e,t){var n,s,a,r;const i=Jh(e,null==t?void 0:t.in),o=i.getFullYear(),l=qh(),c=(null==t?void 0:t.firstWeekContainsDate)??(null==(s=null==(n=null==t?void 0:t.locale)?void 0:n.options)?void 0:s.firstWeekContainsDate)??l.firstWeekContainsDate??(null==(r=null==(a=l.locale)?void 0:a.options)?void 0:r.firstWeekContainsDate)??1,d=Gh((null==t?void 0:t.in)||e,0);d.setFullYear(o+1,0,c),d.setHours(0,0,0,0);const u=em(d,t),h=Gh((null==t?void 0:t.in)||e,0);h.setFullYear(o,0,c),h.setHours(0,0,0,0);const m=em(h,t);return+i>=+u?o+1:+i>=+m?o:o-1}function rm(e,t){const n=Jh(e,null==t?void 0:t.in),s=+em(n,t)-+function(e,t){var n,s,a,r;const i=qh(),o=(null==t?void 0:t.firstWeekContainsDate)??(null==(s=null==(n=null==t?void 0:t.locale)?void 0:n.options)?void 0:s.firstWeekContainsDate)??i.firstWeekContainsDate??(null==(r=null==(a=i.locale)?void 0:a.options)?void 0:r.firstWeekContainsDate)??1,l=am(e,t),c=Gh((null==t?void 0:t.in)||e,0);return c.setFullYear(l,0,o),c.setHours(0,0,0,0),em(c,t)}(n,t);return Math.round(s/Vh)+1}function im(e,t){return(e<0?"-":"")+Math.abs(e).toString().padStart(t,"0")}const om={y(e,t){const n=e.getFullYear(),s=n>0?n:1-n;return im("yy"===t?s%100:s,t.length)},M(e,t){const n=e.getMonth();return"M"===t?String(n+1):im(n+1,2)},d:(e,t)=>im(e.getDate(),t.length),a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:(e,t)=>im(e.getHours()%12||12,t.length),H:(e,t)=>im(e.getHours(),t.length),m:(e,t)=>im(e.getMinutes(),t.length),s:(e,t)=>im(e.getSeconds(),t.length),S(e,t){const n=t.length,s=e.getMilliseconds();return im(Math.trunc(s*Math.pow(10,n-3)),t.length)}},lm="midnight",cm="noon",dm="morning",um="afternoon",hm="evening",mm="night",pm={G:function(e,t,n){const s=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(s,{width:"abbreviated"});case"GGGGG":return n.era(s,{width:"narrow"});default:return n.era(s,{width:"wide"})}},y:function(e,t,n){if("yo"===t){const t=e.getFullYear(),s=t>0?t:1-t;return n.ordinalNumber(s,{unit:"year"})}return om.y(e,t)},Y:function(e,t,n,s){const a=am(e,s),r=a>0?a:1-a;if("YY"===t){return im(r%100,2)}return"Yo"===t?n.ordinalNumber(r,{unit:"year"}):im(r,t.length)},R:function(e,t){return im(nm(e),t.length)},u:function(e,t){return im(e.getFullYear(),t.length)},Q:function(e,t,n){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(s);case"QQ":return im(s,2);case"Qo":return n.ordinalNumber(s,{unit:"quarter"});case"QQQ":return n.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(s,{width:"narrow",context:"formatting"});default:return n.quarter(s,{width:"wide",context:"formatting"})}},q:function(e,t,n){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(s);case"qq":return im(s,2);case"qo":return n.ordinalNumber(s,{unit:"quarter"});case"qqq":return n.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(s,{width:"narrow",context:"standalone"});default:return n.quarter(s,{width:"wide",context:"standalone"})}},M:function(e,t,n){const s=e.getMonth();switch(t){case"M":case"MM":return om.M(e,t);case"Mo":return n.ordinalNumber(s+1,{unit:"month"});case"MMM":return n.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(s,{width:"narrow",context:"formatting"});default:return n.month(s,{width:"wide",context:"formatting"})}},L:function(e,t,n){const s=e.getMonth();switch(t){case"L":return String(s+1);case"LL":return im(s+1,2);case"Lo":return n.ordinalNumber(s+1,{unit:"month"});case"LLL":return n.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(s,{width:"narrow",context:"standalone"});default:return n.month(s,{width:"wide",context:"standalone"})}},w:function(e,t,n,s){const a=rm(e,s);return"wo"===t?n.ordinalNumber(a,{unit:"week"}):im(a,t.length)},I:function(e,t,n){const s=sm(e);return"Io"===t?n.ordinalNumber(s,{unit:"week"}):im(s,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getDate(),{unit:"date"}):om.d(e,t)},D:function(e,t,n){const s=Zh(e);return"Do"===t?n.ordinalNumber(s,{unit:"dayOfYear"}):im(s,t.length)},E:function(e,t,n){const s=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(s,{width:"short",context:"formatting"});default:return n.day(s,{width:"wide",context:"formatting"})}},e:function(e,t,n,s){const a=e.getDay(),r=(a-s.weekStartsOn+8)%7||7;switch(t){case"e":return String(r);case"ee":return im(r,2);case"eo":return n.ordinalNumber(r,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,n,s){const a=e.getDay(),r=(a-s.weekStartsOn+8)%7||7;switch(t){case"c":return String(r);case"cc":return im(r,t.length);case"co":return n.ordinalNumber(r,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,n){const s=e.getDay(),a=0===s?7:s;switch(t){case"i":return String(a);case"ii":return im(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(s,{width:"short",context:"formatting"});default:return n.day(s,{width:"wide",context:"formatting"})}},a:function(e,t,n){const s=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,t,n){const s=e.getHours();let a;switch(a=12===s?cm:0===s?lm:s/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,n){const s=e.getHours();let a;switch(a=s>=17?hm:s>=12?um:s>=4?dm:mm,t){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),n.ordinalNumber(t,{unit:"hour"})}return om.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getHours(),{unit:"hour"}):om.H(e,t)},K:function(e,t,n){const s=e.getHours()%12;return"Ko"===t?n.ordinalNumber(s,{unit:"hour"}):im(s,t.length)},k:function(e,t,n){let s=e.getHours();return 0===s&&(s=24),"ko"===t?n.ordinalNumber(s,{unit:"hour"}):im(s,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):om.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getSeconds(),{unit:"second"}):om.s(e,t)},S:function(e,t){return om.S(e,t)},X:function(e,t,n){const s=e.getTimezoneOffset();if(0===s)return"Z";switch(t){case"X":return gm(s);case"XXXX":case"XX":return ym(s);default:return ym(s,":")}},x:function(e,t,n){const s=e.getTimezoneOffset();switch(t){case"x":return gm(s);case"xxxx":case"xx":return ym(s);default:return ym(s,":")}},O:function(e,t,n){const s=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+fm(s,":");default:return"GMT"+ym(s,":")}},z:function(e,t,n){const s=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+fm(s,":");default:return"GMT"+ym(s,":")}},t:function(e,t,n){return im(Math.trunc(+e/1e3),t.length)},T:function(e,t,n){return im(+e,t.length)}};function fm(e,t=""){const n=e>0?"-":"+",s=Math.abs(e),a=Math.trunc(s/60),r=s%60;return 0===r?n+String(a):n+String(a)+t+im(r,2)}function gm(e,t){if(e%60==0){return(e>0?"-":"+")+im(Math.abs(e)/60,2)}return ym(e,t)}function ym(e,t=""){const n=e>0?"-":"+",s=Math.abs(e);return n+im(Math.trunc(s/60),2)+t+im(s%60,2)}const xm=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},vm=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},bm={p:vm,P:(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],s=n[1],a=n[2];if(!a)return xm(e,t);let r;switch(s){case"P":r=t.dateTime({width:"short"});break;case"PP":r=t.dateTime({width:"medium"});break;case"PPP":r=t.dateTime({width:"long"});break;default:r=t.dateTime({width:"full"})}return r.replace("{{date}}",xm(s,t)).replace("{{time}}",vm(a,t))}},jm=/^D+$/,wm=/^Y+$/,km=["D","DD","YY","YYYY"];function Nm(e){return!(!((t=e)instanceof Date||"object"==typeof t&&"[object Date]"===Object.prototype.toString.call(t))&&"number"!=typeof e||isNaN(+Jh(e)));var t}const Sm=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Cm=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Tm=/^'([^]*?)'?$/,Pm=/''/g,Em=/[a-zA-Z]/;function Lm(e,t,n){var s,a,r,i,o,l,c,d;const u=qh(),h=(null==n?void 0:n.locale)??u.locale??Hh,m=(null==n?void 0:n.firstWeekContainsDate)??(null==(a=null==(s=null==n?void 0:n.locale)?void 0:s.options)?void 0:a.firstWeekContainsDate)??u.firstWeekContainsDate??(null==(i=null==(r=u.locale)?void 0:r.options)?void 0:i.firstWeekContainsDate)??1,p=(null==n?void 0:n.weekStartsOn)??(null==(l=null==(o=null==n?void 0:n.locale)?void 0:o.options)?void 0:l.weekStartsOn)??u.weekStartsOn??(null==(d=null==(c=u.locale)?void 0:c.options)?void 0:d.weekStartsOn)??0,f=Jh(e,null==n?void 0:n.in);if(!Nm(f))throw new RangeError("Invalid time value");let g=t.match(Cm).map(e=>{const t=e[0];if("p"===t||"P"===t){return(0,bm[t])(e,h.formatLong)}return e}).join("").match(Sm).map(e=>{if("''"===e)return{isToken:!1,value:"'"};const t=e[0];if("'"===t)return{isToken:!1,value:Im(e)};if(pm[t])return{isToken:!0,value:e};if(t.match(Em))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}});h.localize.preprocessor&&(g=h.localize.preprocessor(f,g));const y={firstWeekContainsDate:m,weekStartsOn:p,locale:h};return g.map(s=>{if(!s.isToken)return s.value;const a=s.value;(!(null==n?void 0:n.useAdditionalWeekYearTokens)&&function(e){return wm.test(e)}(a)||!(null==n?void 0:n.useAdditionalDayOfYearTokens)&&function(e){return jm.test(e)}(a))&&function(e,t,n){const s=function(e,t,n){const s="Y"===e[0]?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${s} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}(e,t,n);if(km.includes(e))throw new RangeError(s)}(a,t,String(e));return(0,pm[a[0]])(f,a,h.localize,y)}).join("")}function Im(e){const t=e.match(Tm);return t?t[1].replace(Pm,"'"):e}function Am(e,t,n){const s=Object.assign({},qh()),a=function(e,t,n){return new Intl.DateTimeFormat(n?[n.code,"en-US"]:void 0,{timeZone:t,timeZoneName:e})}(e,n.timeZone,n.locale??s.locale);return"formatToParts"in a?function(e,t){const n=e.formatToParts(t);for(let s=n.length-1;s>=0;--s)if("timeZoneName"===n[s].type)return n[s].value;return}(a,t):function(e,t){const n=e.format(t).replace(/\u200E/g,""),s=/ [\w-+ ]+$/.exec(n);return s?s[0].substr(1):""}(a,t)}function Om(e,t){const n=function(e){Rm[e]||(Rm[e]=_m?new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}));return Rm[e]}(t);return"formatToParts"in n?function(e,t){try{const n=e.formatToParts(t),s=[];for(let e=0;e<n.length;e++){const t=Dm[n[e].type];void 0!==t&&(s[t]=parseInt(n[e].value,10))}return s}catch(n){if(n instanceof RangeError)return[NaN];throw n}}(n,e):function(e,t){const n=e.format(t),s=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(n);return[parseInt(s[3],10),parseInt(s[1],10),parseInt(s[2],10),parseInt(s[4],10),parseInt(s[5],10),parseInt(s[6],10)]}(n,e)}const Dm={year:0,month:1,day:2,hour:3,minute:4,second:5};const Rm={},Mm=new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:"America/New_York",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),_m="06/25/2014, 00:00:00"===Mm||"‎06‎/‎25‎/‎2014‎ ‎00‎:‎00‎:‎00"===Mm;function Fm(e,t,n,s,a,r,i){const o=new Date(0);return o.setUTCFullYear(e,t,n),o.setUTCHours(s,a,r,i),o}const Bm=36e5,zm={timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-])(\d{2}):?(\d{2})$/};function Um(e,t,n){if(!e)return 0;let s,a,r=zm.timezoneZ.exec(e);if(r)return 0;if(r=zm.timezoneHH.exec(e),r)return s=parseInt(r[1],10),Hm(s)?-s*Bm:NaN;if(r=zm.timezoneHHMM.exec(e),r){s=parseInt(r[2],10);const e=parseInt(r[3],10);return Hm(s,e)?(a=Math.abs(s)*Bm+6e4*e,"+"===r[1]?-a:a):NaN}if(function(e){if(Wm[e])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:e}),Wm[e]=!0,!0}catch(t){return!1}}(e)){t=new Date(t||Date.now());const s=n?t:function(e){return Fm(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}(t),a=$m(s,e),r=n?a:function(e,t,n){const s=e.getTime();let a=s-t;const r=$m(new Date(a),n);if(t===r)return t;a-=r-t;const i=$m(new Date(a),n);if(r===i)return r;return Math.max(r,i)}(t,a,e);return-r}return NaN}function $m(e,t){const n=Om(e,t),s=Fm(n[0],n[1]-1,n[2],n[3]%24,n[4],n[5],0).getTime();let a=e.getTime();const r=a%1e3;return a-=r>=0?r:1e3+r,s-a}function Hm(e,t){return-23<=e&&e<=23&&(null==t||0<=t&&t<=59)}const Wm={};const qm={X:function(e,t,n){const s=Vm(n.timeZone,e);if(0===s)return"Z";switch(t){case"X":return Jm(s);case"XXXX":case"XX":return Gm(s);default:return Gm(s,":")}},x:function(e,t,n){const s=Vm(n.timeZone,e);switch(t){case"x":return Jm(s);case"xxxx":case"xx":return Gm(s);default:return Gm(s,":")}},O:function(e,t,n){const s=Vm(n.timeZone,e);switch(t){case"O":case"OO":case"OOO":return"GMT"+function(e,t=""){const n=e>0?"-":"+",s=Math.abs(e),a=Math.floor(s/60),r=s%60;if(0===r)return n+String(a);return n+String(a)+t+Ym(r,2)}(s,":");default:return"GMT"+Gm(s,":")}},z:function(e,t,n){switch(t){case"z":case"zz":case"zzz":return Am("short",e,n);default:return Am("long",e,n)}}};function Vm(e,t){const n=e?Um(e,t,!0)/6e4:(null==t?void 0:t.getTimezoneOffset())??0;if(Number.isNaN(n))throw new RangeError("Invalid time zone specified: "+e);return n}function Ym(e,t){const n=e<0?"-":"";let s=Math.abs(e).toString();for(;s.length<t;)s="0"+s;return n+s}function Gm(e,t=""){const n=e>0?"-":"+",s=Math.abs(e);return n+Ym(Math.floor(s/60),2)+t+Ym(Math.floor(s%60),2)}function Jm(e,t){if(e%60==0){return(e>0?"-":"+")+Ym(Math.abs(e)/60,2)}return Gm(e,t)}function Qm(e){const t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+e-+t}const Km=36e5,Xm=6e4,Zm={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/};function ep(e,t={}){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(null===e)return new Date(NaN);const n=null==t.additionalDigits?2:Number(t.additionalDigits);if(2!==n&&1!==n&&0!==n)throw new RangeError("additionalDigits must be 0, 1 or 2");if(e instanceof Date||"object"==typeof e&&"[object Date]"===Object.prototype.toString.call(e))return new Date(e.getTime());if("number"==typeof e||"[object Number]"===Object.prototype.toString.call(e))return new Date(e);if("[object String]"!==Object.prototype.toString.call(e))return new Date(NaN);const s=function(e){const t={};let n,s=Zm.dateTimePattern.exec(e);s?(t.date=s[1],n=s[3]):(s=Zm.datePattern.exec(e),s?(t.date=s[1],n=s[2]):(t.date=null,n=e));if(n){const e=Zm.timeZone.exec(n);e?(t.time=n.replace(e[1],""),t.timeZone=e[1].trim()):t.time=n}return t}(e),{year:a,restDateString:r}=function(e,t){if(e){const n=Zm.YYY[t],s=Zm.YYYYY[t];let a=Zm.YYYY.exec(e)||s.exec(e);if(a){const t=a[1];return{year:parseInt(t,10),restDateString:e.slice(t.length)}}if(a=Zm.YY.exec(e)||n.exec(e),a){const t=a[1];return{year:100*parseInt(t,10),restDateString:e.slice(t.length)}}}return{year:null}}(s.date,n),i=function(e,t){if(null===t)return null;let n,s,a;if(!e||!e.length)return n=new Date(0),n.setUTCFullYear(t),n;let r=Zm.MM.exec(e);if(r)return n=new Date(0),s=parseInt(r[1],10)-1,rp(t,s)?(n.setUTCFullYear(t,s),n):new Date(NaN);if(r=Zm.DDD.exec(e),r){n=new Date(0);const e=parseInt(r[1],10);return function(e,t){if(t<1)return!1;const n=ap(e);if(n&&t>366)return!1;if(!n&&t>365)return!1;return!0}(t,e)?(n.setUTCFullYear(t,0,e),n):new Date(NaN)}if(r=Zm.MMDD.exec(e),r){n=new Date(0),s=parseInt(r[1],10)-1;const e=parseInt(r[2],10);return rp(t,s,e)?(n.setUTCFullYear(t,s,e),n):new Date(NaN)}if(r=Zm.Www.exec(e),r)return a=parseInt(r[1],10)-1,ip(a)?tp(t,a):new Date(NaN);if(r=Zm.WwwD.exec(e),r){a=parseInt(r[1],10)-1;const e=parseInt(r[2],10)-1;return ip(a,e)?tp(t,a,e):new Date(NaN)}return null}(r,a);if(null===i||isNaN(i.getTime()))return new Date(NaN);if(i){const e=i.getTime();let n,a=0;if(s.time&&(a=function(e){let t,n,s=Zm.HH.exec(e);if(s)return t=parseFloat(s[1].replace(",",".")),op(t)?t%24*Km:NaN;if(s=Zm.HHMM.exec(e),s)return t=parseInt(s[1],10),n=parseFloat(s[2].replace(",",".")),op(t,n)?t%24*Km+n*Xm:NaN;if(s=Zm.HHMMSS.exec(e),s){t=parseInt(s[1],10),n=parseInt(s[2],10);const e=parseFloat(s[3].replace(",","."));return op(t,n,e)?t%24*Km+n*Xm+1e3*e:NaN}return null}(s.time),null===a||isNaN(a)))return new Date(NaN);if(s.timeZone||t.timeZone){if(n=Um(s.timeZone||t.timeZone,new Date(e+a)),isNaN(n))return new Date(NaN)}else n=Qm(new Date(e+a)),n=Qm(new Date(e+a+n));return new Date(e+a+n)}return new Date(NaN)}function tp(e,t,n){t=t||0,n=n||0;const s=new Date(0);s.setUTCFullYear(e,0,4);const a=7*t+n+1-(s.getUTCDay()||7);return s.setUTCDate(s.getUTCDate()+a),s}const np=[31,28,31,30,31,30,31,31,30,31,30,31],sp=[31,29,31,30,31,30,31,31,30,31,30,31];function ap(e){return e%400==0||e%4==0&&e%100!=0}function rp(e,t,n){if(t<0||t>11)return!1;if(null!=n){if(n<1)return!1;const s=ap(e);if(s&&n>sp[t])return!1;if(!s&&n>np[t])return!1}return!0}function ip(e,t){return!(e<0||e>52)&&(null==t||!(t<0||t>6))}function op(e,t,n){return!(e<0||e>=25)&&((null==t||!(t<0||t>=60))&&(null==n||!(n<0||n>=60)))}const lp=/([xXOz]+)|''|'(''|[^'])+('|$)/g;function cp(e,t,n,s){return function(e,t,n={}){const s=(t=String(t)).match(lp);if(s){const a=ep(n.originalDate||e,n);t=s.reduce(function(e,t){if("'"===t[0])return e;const s=e.indexOf(t),r="'"===e[s-1],i=e.replace(t,"'"+qm[t[0]](a,t,n)+"'");return r?i.substring(0,s-1)+i.substring(s+1):i},t)}return Lm(e,t,n)}(function(e,t,n){const s=Um(t,e=ep(e,n),!0),a=new Date(e.getTime()-s),r=new Date(0);return r.setFullYear(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate()),r.setHours(a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds()),r}(e,t,{timeZone:(s={...s,timeZone:t,originalDate:e}).timeZone}),n,s)}const dp="https://s89-satya-capstone-tradebro.onrender.com";const up=new class{constructor(){this.intervals=new Map,this.subscribers=new Map,this.lastUpdateTimes=new Map}startLiveUpdates(e,t){this.stopLiveUpdates(e),this.subscribers.set(e,t),this.fetchLatestCandle(e);const n=this.getSmartInterval(e),s=setInterval(()=>{this.fetchLatestCandle(e)},n);return this.intervals.set(e,s),e}getSmartInterval(e){const t=new Date;let n,s,a=!1;if(e.endsWith(".NS")||e.endsWith(".BO")){const e=cp(t,"Asia/Kolkata","HH:mm");n=parseInt(e.split(":")[0],10),s=parseInt(e.split(":")[1],10),(9===n&&s>=15||n>9&&n<15||15===n&&s<=30)&&(a=!0)}else{const e=cp(t,"America/New_York","HH:mm");n=parseInt(e.split(":")[0],10),s=parseInt(e.split(":")[1],10),(9===n&&s>=30||n>9&&n<16)&&(a=!0)}return a?15e3:n>=8&&n<9||n>16&&n<=18?6e4:3e5}stopLiveUpdates(e){const t=this.intervals.get(e);t&&(clearInterval(t),this.intervals.delete(e),this.subscribers.delete(e),this.lastUpdateTimes.delete(e))}stopAllUpdates(){this.intervals.forEach(e=>{clearInterval(e)}),this.intervals.clear(),this.subscribers.clear(),this.lastUpdateTimes.clear()}async fetchLatestCandle(e){try{const t=await Ta.get(`${dp}/api/live-charts/latest/${e}`,{timeout:1e4});if(t.data.success&&t.data.latest){const n=t.data.latest,s=this.subscribers.get(e),a=this.lastUpdateTimes.get(e),r=n.time;!a||r>a?(this.lastUpdateTimes.set(e,r),s&&s({type:"update",data:n,marketOpen:t.data.marketOpen,exchange:t.data.exchange,timestamp:t.data.timestamp,symbol:e})):s&&s({type:"price_update",data:n,marketOpen:t.data.marketOpen,exchange:t.data.exchange,timestamp:t.data.timestamp,symbol:e})}else if(!t.data.success)throw new Error(t.data.message||`API error for ${e}`)}catch(t){const n=this.subscribers.get(e);n&&n({type:"error",error:t.message,symbol:e})}}async fetchInitialData(e,t){try{const n=await Ta.get(`${dp}/api/live-charts/historical/${e}`,{params:{period:t},timeout:15e3});if(n.data.success)return{success:!0,data:n.data.data,latest:n.data.latest,marketOpen:n.data.marketOpen,exchange:n.data.exchange,count:n.data.data.length};throw new Error(n.data.message||"Failed to fetch initial historical data")}catch(n){return{success:!1,error:n.message,data:[]}}}async checkMarketStatus(e="NSE"){try{return(await Ta.get(`${dp}/api/live-charts/market-status/${e}`,{timeout:5e3})).data}catch(t){return{success:!1,marketOpen:!1,exchange:e.toUpperCase(),error:t.message}}}getActiveSymbols(){return Array.from(this.subscribers.keys())}isTracking(e){return this.subscribers.has(e)}getUpdateIntervalId(e){return this.intervals.get(e)}startBatchLiveUpdates(e,t,n=6e4){const s=`batch_${e.sort().join("_")}`;this.stopLiveUpdates(s),this.subscribers.set(s,t),this.fetchBatchCandles(e).then(n=>{n.success?t({type:"batch_update",data:n.results,timestamp:n.timestamp,marketOpen:n.marketOpen,exchange:n.exchange,symbols:e}):t({type:"error",error:n.error,symbols:e})});const a=setInterval(()=>{this.fetchBatchCandles(e).then(n=>{n.success?t({type:"batch_update",data:n.results,timestamp:n.timestamp,marketOpen:n.marketOpen,exchange:n.exchange,symbols:e}):t({type:"error",error:n.error,symbols:e})})},n);return this.intervals.set(s,a),s}async fetchBatchCandles(e){try{if(0===e.length)return{success:!0,results:[],count:0};const t=await Ta.post(`${dp}/api/live-charts/batch`,{symbols:e},{timeout:15e3});if(t.data.success)return{success:!0,results:t.data.results,timestamp:t.data.timestamp,marketOpen:t.data.marketOpen,exchange:t.data.exchange};throw new Error(t.data.message||"Batch fetch failed")}catch(t){return{success:!1,error:t.message,results:[]}}}};"undefined"!=typeof window&&window.addEventListener("beforeunload",()=>{up.stopAllUpdates()});const hp=({data:e=[],symbol:t="RELIANCE.NS",timeframe:s="1D",chartType:a="candlestick",theme:r="dark",onRefresh:i,loading:o=!1,height:l=500,enableLiveUpdates:c=!0})=>{const d=n.useRef(),u=n.useRef(),h=n.useRef(),m=n.useRef(),p=n.useRef(),f=n.useRef(),[g,x]=n.useState(!1),[v,C]=n.useState(!0),[T,P]=n.useState({sma:!1,ema:!1,rsi:!1,macd:!1}),[E,L]=n.useState(c&&"1D"===s),[I,A]=n.useState(null),[O,D]=n.useState(!1),[R,_]=n.useState(null),[F,B]=n.useState(null),z=e=>{if(!u.current)return;const{type:t,data:n,marketOpen:s,error:r}=e;r||(D(s),A(new Date),"update"===t&&n?(h.current&&"candlestick"===a?h.current.update(n):m.current&&"line"===a?m.current.update({time:n.time,value:n.close}):p.current&&"area"===a&&p.current.update({time:n.time,value:n.close}),v&&f.current&&n.volume&&f.current.update({time:n.time,value:n.volume,color:n.close>=n.open?"#26a69a":"#ef5350"}),_(n.close),B({direction:"update",timestamp:Date.now()}),setTimeout(()=>B(null),1e3)):"price_update"===t&&n&&(h.current&&"candlestick"===a&&h.current.update(n),_(n.close)))};n.useEffect(()=>{if(!d.current)return;const e=b(d.current,{layout:{background:{type:j.Solid,color:"dark"===r?"#0F172A":"#FFFFFF"},textColor:"dark"===r?"#F8FAFC":"#1E293B",fontSize:12,fontFamily:"Inter, -apple-system, BlinkMacSystemFont, sans-serif"},grid:{vertLines:{color:"dark"===r?"#1E293B":"#E2E8F0",style:1},horzLines:{color:"dark"===r?"#1E293B":"#E2E8F0",style:1}},crosshair:{mode:1,vertLine:{color:"dark"===r?"#64748B":"#475569",width:1,style:3},horzLine:{color:"dark"===r?"#64748B":"#475569",width:1,style:3}},priceScale:{borderColor:"dark"===r?"#334155":"#CBD5E1",textColor:"dark"===r?"#94A3B8":"#64748B"},timeScale:{borderColor:"dark"===r?"#334155":"#CBD5E1",textColor:"dark"===r?"#94A3B8":"#64748B",timeVisible:!0,secondsVisible:!1},watermark:{visible:!0,fontSize:48,horzAlign:"center",vertAlign:"center",color:"dark"===r?"rgba(248, 250, 252, 0.05)":"rgba(30, 41, 59, 0.05)",text:t},rightPriceScale:{scaleMargins:{top:.1,bottom:v?.4:.1}},width:d.current.clientWidth,height:g?window.innerHeight-100:l});u.current=e;try{"candlestick"===a?h.current=e.addSeries(w,{upColor:"#10B981",downColor:"#EF4444",borderDownColor:"#EF4444",borderUpColor:"#10B981",wickDownColor:"#EF4444",wickUpColor:"#10B981"}):"line"===a?m.current=e.addSeries(k,{color:"#3B82F6",lineWidth:2,lineStyle:0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4}):"area"===a&&(p.current=e.addSeries(N,{topColor:"rgba(59, 130, 246, 0.4)",bottomColor:"rgba(59, 130, 246, 0.0)",lineColor:"#3B82F6",lineWidth:2}))}catch(s){}v&&(f.current=e.addSeries(S,{color:"dark"===r?"#475569":"#94A3B8",priceFormat:{type:"volume"},priceScaleId:"volume",scaleMargins:{top:.7,bottom:0}}),e.priceScale("volume").applyOptions({scaleMargins:{top:.7,bottom:0}}));const n=()=>{u.current&&d.current&&u.current.applyOptions({width:d.current.clientWidth,height:g?window.innerHeight-100:l})};return window.addEventListener("resize",n),()=>{window.removeEventListener("resize",n),u.current&&u.current.remove()}},[a,r,v,g,l]),n.useEffect(()=>{if(!d.current)return;const e=new ResizeObserver(e=>{for(let t of e)if(u.current){const{width:e}=t.contentRect;u.current.applyOptions({width:e,height:g?window.innerHeight-100:l}),u.current.timeScale().fitContent()}});return e.observe(d.current),()=>{e.disconnect()}},[g,l]),n.useEffect(()=>{if(e&&0!==e.length)try{const t=e=>{if(!e)return(new Date).toISOString().split("T")[0];if("number"==typeof e)return e;if("string"==typeof e){const t=new Date(e);if(isNaN(t.getTime())){return e.split(" ")[0]||(new Date).toISOString().split("T")[0]}return t.toISOString().split("T")[0]}return(new Date).toISOString().split("T")[0]},n=e.map(e=>({time:t(e.time||e.date),open:parseFloat(e.open),high:parseFloat(e.high),low:parseFloat(e.low),close:parseFloat(e.close),value:parseFloat(e.close)})),s=e.map(e=>({time:t(e.time||e.date),value:parseInt(e.volume||0),color:e.close>=e.open?"#10B981":"#EF4444"})),r=[],i=new Set;n.sort((e,t)=>new Date(e.time)-new Date(t.time)).forEach(e=>{i.has(e.time)||(i.add(e.time),r.push(e))});const o=[],l=new Set;s.sort((e,t)=>new Date(e.time)-new Date(t.time)).forEach(e=>{l.has(e.time)||(l.add(e.time),o.push(e))}),"candlestick"===a&&h.current?h.current.setData(r):"line"===a&&m.current?m.current.setData(r):"area"===a&&p.current&&p.current.setData(r),v&&f.current&&o.length>0&&f.current.setData(o),u.current&&u.current.timeScale().fitContent()}catch(t){}},[e,a,v]),n.useEffect(()=>{if("1D"===s)return E?(up.startLiveUpdates(t,z),up.checkMarketStatus(t.includes(".NS")?"NSE":"NASDAQ").then(e=>{D(e.marketOpen)})):up.stopLiveUpdates(t),()=>{up.stopLiveUpdates(t)};E&&(L(!1),up.stopLiveUpdates(t))},[E,t,s]),n.useEffect(()=>(up.stopLiveUpdates(t),"1D"===s&&c?(L(!0),up.startLiveUpdates(t,z)):L(!1),()=>{up.stopLiveUpdates(t)}),[t,s]),n.useEffect(()=>{const e=e=>{"Escape"===e.key&&g&&U(),"f"!==e.key&&"F"!==e.key||(e.ctrlKey||e.metaKey)&&(e.preventDefault(),U())};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e),g&&(document.body.style.overflow="",document.body.classList.remove("chart-fullscreen-active"))}},[g]);const U=()=>{const e=!g;x(e),e?(document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.width="100%",document.body.style.height="100%",document.body.style.top="0",document.body.style.left="0",document.body.classList.add("chart-fullscreen-active"),document.documentElement.style.overflow="hidden"):(document.body.style.overflow="",document.body.style.position="",document.body.style.width="",document.body.style.height="",document.body.style.top="",document.body.style.left="",document.body.classList.remove("chart-fullscreen-active"),document.documentElement.style.overflow=""),setTimeout(()=>{if(u.current&&d.current){const t=e?window.innerWidth:d.current.clientWidth,n=e?window.innerHeight-d.current.offsetTop-60:l;u.current.applyOptions({width:t,height:n}),u.current.timeScale().fitContent()}},150)};return M.jsxs(y.div,{className:"tradingview-chart-container "+(g?"fullscreen":""),initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.5},children:[M.jsxs("div",{className:"chart-header",children:[M.jsxs("div",{className:"chart-title",children:[M.jsxs("h3",{children:[t," - ",s]}),M.jsx("span",{className:"chart-type",children:a.charAt(0).toUpperCase()+a.slice(1)}),E&&M.jsxs("div",{className:"live-indicators",children:[R&&M.jsxs("span",{className:"live-price "+(F?`price-${F.direction}`:""),children:["₹",R.toFixed(2)]}),M.jsxs("span",{className:"market-status "+(O?"open":"closed"),children:[M.jsx(Ve,{size:14,className:"status-icon"}),O?"Market Open":"Market Closed"]}),I&&M.jsxs("span",{className:"last-update",children:["Updated: ",I.toLocaleTimeString()]})]})]}),M.jsxs("div",{className:"chart-controls",children:[M.jsx("button",{className:"chart-control-btn "+(v?"active":""),onClick:()=>{C(!v)},title:"Toggle Volume Display",children:"📊"}),M.jsx("button",{className:"chart-control-btn",onClick:i,disabled:o,title:"Refresh Chart Data",children:"🔄"}),"1D"===s&&c&&M.jsx("button",{onClick:()=>{E?(up.stopLiveUpdates(t),L(!1)):(up.startLiveUpdates(t,z,5e3),L(!0))},className:"chart-control-btn "+(E?"live-active":""),title:E?"Stop Live Updates":"Start Live Updates",children:E?"⏸️":"▶️"}),M.jsx("button",{className:"chart-control-btn",onClick:()=>{if(u.current){const e=d.current.querySelector("canvas");if(e){const n=document.createElement("a");n.download=`${t}_${s}_chart.png`,n.href=e.toDataURL(),n.click()}}},title:"Download Chart as PNG",children:"💾"}),M.jsx("button",{className:"chart-control-btn "+(g?"fullscreen-active":""),onClick:U,title:g?"Exit Fullscreen (Esc)":"Enter Fullscreen (F)",children:g?"🔲":"⛶"})]})]}),M.jsxs("div",{ref:d,className:"chart-wrapper",style:{position:"relative",width:"100%",height:g?"100%":`${l}px`,flex:g?"1":"none"},children:[o&&M.jsx("div",{className:"chart-loading-overlay",children:M.jsxs("div",{className:"loading-content",children:[M.jsx(Kt,{size:32,className:"animate-spin"}),M.jsx("p",{children:"Loading chart data..."})]})}),0===e.length&&!o&&M.jsx("div",{className:"chart-empty-overlay",children:M.jsxs("div",{className:"empty-content",children:[M.jsx("p",{children:"No chart data available"}),M.jsxs("button",{onClick:i,className:"btn-primary",children:[M.jsx(Kt,{size:16}),"Refresh"]})]})})]}),M.jsx("div",{className:"chart-footer",children:M.jsxs("div",{className:"chart-info",children:[M.jsxs("span",{children:["Data Points: ",e.length]}),M.jsx("span",{children:"•"}),M.jsxs("span",{children:["Last Updated: ",(new Date).toLocaleTimeString()]})]})})]})},mp=({onStockSelect:e,selectedStock:t,className:s="",popularStocks:a,onUpdatePopularStocks:r})=>{const[i,o]=n.useState(""),[l,c]=n.useState([]),[d,u]=n.useState(!1),[h,m]=n.useState(!1),[p,f]=n.useState("all"),[x,v]=n.useState(!1),b=n.useRef(null),j=((e,t)=>{const[s,a]=n.useState(e);return n.useEffect(()=>{const n=setTimeout(()=>{a(e)},t);return()=>{clearTimeout(n)}},[e,t]),s})(i,300),[w,k]=n.useState(a||[{symbol:"RELIANCE",name:"Reliance Industries Ltd",price:2847.65,change:23.45,changePercent:.83,volume:2847392,marketCap:1925e9,sector:"Energy",isWatchlisted:!1},{symbol:"TCS",name:"Tata Consultancy Services",price:3567.8,change:-12.4,changePercent:-.35,volume:1234567,marketCap:13e11,sector:"IT",isWatchlisted:!0},{symbol:"HDFCBANK",name:"HDFC Bank Limited",price:1687.9,change:15.6,changePercent:.93,volume:3456789,marketCap:93e10,sector:"Banking",isWatchlisted:!1},{symbol:"INFY",name:"Infosys Limited",price:1456.25,change:8.75,changePercent:.6,volume:2345678,marketCap:62e10,sector:"IT",isWatchlisted:!1},{symbol:"HINDUNILVR",name:"Hindustan Unilever Ltd",price:2789.45,change:-5.3,changePercent:-.19,volume:876543,marketCap:65e10,sector:"FMCG",isWatchlisted:!0},{symbol:"ICICIBANK",name:"ICICI Bank Limited",price:1098.7,change:12.85,changePercent:1.18,volume:4567890,marketCap:77e10,sector:"Banking",isWatchlisted:!1},{symbol:"KOTAKBANK",name:"Kotak Mahindra Bank",price:1876.2,change:-8.45,changePercent:-.45,volume:1987654,marketCap:37e10,sector:"Banking",isWatchlisted:!1},{symbol:"BHARTIARTL",name:"Bharti Airtel Limited",price:1234.55,change:18.9,changePercent:1.55,volume:3210987,marketCap:68e10,sector:"Telecom",isWatchlisted:!0},{symbol:"ITC",name:"ITC Limited",price:456.8,change:-2.15,changePercent:-.47,volume:5432109,marketCap:57e10,sector:"FMCG",isWatchlisted:!1}]),N=n.useMemo(()=>{let e=[...w];switch(p){case"gainers":e=e.filter(e=>e.change>0).sort((e,t)=>t.changePercent-e.changePercent);break;case"losers":e=e.filter(e=>e.change<0).sort((e,t)=>e.changePercent-t.changePercent);break;case"watchlist":e=e.filter(e=>e.isWatchlisted);break;case"volume":e=e.sort((e,t)=>t.volume-e.volume);break;default:e=e.sort((e,t)=>t.marketCap-e.marketCap)}return e},[w,p]);n.useEffect(()=>{j&&j.trim().length>=2?(async e=>{if(e.trim()){u(!0);try{const t=await Nr.searchStocks(e,10);if(t.success&&t.results){const e=t.results.sort((e,t)=>{const n="NSE"===e.exchange||"BSE"===e.exchange||e.symbol.endsWith(".NS")||e.symbol.endsWith(".BO"),s="NSE"===t.exchange||"BSE"===t.exchange||t.symbol.endsWith(".NS")||t.symbol.endsWith(".BO");return n&&!s?-1:!n&&s?1:0}).slice(0,8).map(e=>({symbol:e.symbol,name:e.name,exchange:e.exchange,currency:e.currency,type:e.type,price:"NSE"===e.exchange||"BSE"===e.exchange?2e3*Math.random()+100:500*Math.random()+50,change:40*(Math.random()-.5),changePercent:8*(Math.random()-.5),sector:"Unknown"}));c(e)}else c([])}catch(t){const n=w.filter(t=>t.symbol.toLowerCase().includes(e.toLowerCase())||t.name.toLowerCase().includes(e.toLowerCase()));c(n)}finally{u(!1)}}else c([])})(j):c([])},[j]);const S=t=>{null==e||e(t),o(""),c([])};return M.jsxs("div",{className:`stock-search-panel ${s}`,children:[M.jsxs("div",{className:"stock-search",children:[M.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:M.jsx("h3",{className:"search-title",children:"Search Stocks"})}),M.jsxs("div",{className:"search-input-container",children:[M.jsx(Zt,{className:"search-icon",size:18}),M.jsx("input",{ref:b,type:"text",placeholder:"Search stocks...",value:i,onChange:e=>o(e.target.value)}),i&&M.jsx("button",{className:"clear-search-btn",onClick:()=>{o(""),c([])},children:M.jsx(xn,{size:16})}),d&&M.jsx("div",{className:"search-loading",children:M.jsx("div",{className:"loading-spinner"})})]}),M.jsxs(g,{children:[l.length>0&&M.jsxs(y.div,{className:"search-results",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:[M.jsx("div",{className:"results-header",children:"Search Results"}),l.map((e,t)=>{var n,s;return M.jsxs(y.div,{className:"search-result-item",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.2,delay:.05*t},onClick:()=>S(e),children:[M.jsxs("div",{className:"search-result-left",children:[M.jsx("div",{className:"symbol",children:e.symbol}),M.jsx("div",{className:"name",children:e.name})]}),M.jsxs("div",{className:"search-result-right",children:[M.jsx("div",{className:"search-result-price",children:hi(e.price)}),M.jsxs("div",{className:"search-result-change "+(e.change>=0?"positive":"negative"),children:[e.change>=0?"+":"",null==(n=e.change)?void 0:n.toFixed(2),"(",null==(s=e.changePercent)?void 0:s.toFixed(2),"%)"]})]}),M.jsx("div",{className:"search-result-actions",onClick:t=>{t.stopPropagation();const n={...e,isWatchlisted:!e.isWatchlisted};c(t=>t.map(t=>t.symbol===e.symbol?n:t))},children:e.isWatchlisted?"⭐":"☆"}),e.exchange&&M.jsx("div",{className:"exchange",children:e.exchange})]},e.symbol)})]}),j&&j.trim().length>=2&&0===l.length&&!d&&M.jsx(y.div,{className:"search-results",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:M.jsxs("div",{className:"no-results",children:[M.jsx(Zt,{size:24}),M.jsxs("p",{children:['No stocks found for "',j,'"']}),M.jsx("small",{children:"Try searching with different keywords or stock symbols"})]})})]})]}),M.jsxs("div",{className:"popular-stocks-section",children:[M.jsx("div",{className:"popular-stocks-header",children:M.jsx("h3",{className:"popular-stocks-title",children:"Popular Stocks"})}),M.jsx("div",{className:"popular-stocks-list",children:M.jsx(g,{children:N.map((e,n)=>{var s,a;return M.jsxs(y.div,{className:"popular-stock-item "+((null==t?void 0:t.symbol)===e.symbol?"selected":""),initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3,delay:.05*n},onClick:()=>S(e),whileHover:{scale:1.02},whileTap:{scale:.98},children:[M.jsxs("div",{className:"popular-stock-info",children:[M.jsx("div",{className:"popular-stock-symbol",children:e.symbol}),M.jsx("div",{className:"popular-stock-name",children:e.name})]}),M.jsxs("div",{className:"popular-stock-price",children:[M.jsx("div",{className:"popular-stock-value",children:hi(e.price)}),M.jsxs("div",{className:"popular-stock-change "+(e.change>=0?"positive":"negative"),children:[e.change>=0?"+":"",null==(s=e.change)?void 0:s.toFixed(2),"(",null==(a=e.changePercent)?void 0:a.toFixed(2),"%)"]})]}),M.jsx("div",{className:"popular-stock-actions",onClick:t=>{t.stopPropagation();const n=w.map(t=>t.symbol===e.symbol?{...t,isWatchlisted:!t.isWatchlisted}:t);k(n),null==r||r(n)},children:e.isWatchlisted?"⭐":"☆"})]},e.symbol)})})})]})]})},pp=({user:e,theme:t})=>{const{isCollapsed:s}=(()=>{const e=n.useContext(Dh);if(void 0===e)throw new Error("useSidebar must be used within a SidebarProvider");return e})(),[a,r]=n.useState("RELIANCE"),[i,o]=n.useState("1D"),[l,c]=n.useState("candlestick"),[d,u]=n.useState(!1),[h,m]=n.useState([]),[p,f]=n.useState([]),[g,x]=n.useState(null),[v,b]=n.useState(!1),[j,w]=n.useState(null),[k,N]=n.useState(!1),[S,C]=n.useState(null),[T,P]=n.useState(null),{query:E,setQuery:L,results:I,loading:A,recentSearches:O,clearSearch:D}=ti({limit:10,debounceMs:300}),R=[{id:"candlestick",name:"Candlestick",icon:nt},{id:"line",name:"Line",icon:Ve},{id:"area",name:"Area",icon:Et}],[_,F]=n.useState([{symbol:"RELIANCE",name:"Reliance Industries Ltd",price:2847.5,change:15.25,changePercent:.54,isWatchlisted:!1},{symbol:"TCS",name:"Tata Consultancy Services",price:4125.8,change:-12.4,changePercent:-.3,isWatchlisted:!0},{symbol:"HDFCBANK",name:"HDFC Bank Limited",price:1687.9,change:8.75,changePercent:.52,isWatchlisted:!1},{symbol:"INFY",name:"Infosys Limited",price:1842.35,change:22.15,changePercent:1.22,isWatchlisted:!1},{symbol:"HINDUNILVR",name:"Hindustan Unilever Ltd",price:2456.7,change:-5.3,changePercent:-.22,isWatchlisted:!0},{symbol:"ICICIBANK",name:"ICICI Bank Limited",price:1287.45,change:18.9,changePercent:1.49,isWatchlisted:!1}]),B=e=>e.replace(/\.(NS|BO)$/,""),z=(e,t)=>{const n="1D"===t?100:"5D"===t?500:1e3,s=[];let a=1e3;const r=new Date;for(let i=n;i>=0;i--){const e=new Date(r.getTime()-i*("1D"===t?3e5:864e5)),n=.02,o=a,l=a+(Math.random()-.5)*n*a,c=Math.max(o,l)+.01*Math.random()*a,d=Math.min(o,l)-.01*Math.random()*a;s.push({time:e.toISOString().split("T")[0],open:parseFloat(o.toFixed(2)),high:parseFloat(c.toFixed(2)),low:parseFloat(d.toFixed(2)),close:parseFloat(l.toFixed(2)),volume:Math.floor(1e6*Math.random())+1e5}),a=l}return s},U=async(e,t)=>{b(!0),w(null);try{const s=B(e),a=await Cr.getHistoricalData(s,t);if(a&&a.success&&a.data&&a.data.length>0){const e=(e=>{if(!e||0===e.length)return[];const t=e.map(e=>({time:e.date||e.time,open:parseFloat(e.open),high:parseFloat(e.high),low:parseFloat(e.low),close:parseFloat(e.close),volume:parseInt(e.volume||0)})),n=[],s=new Set;return t.sort((e,t)=>new Date(e.time)-new Date(t.time)).forEach(e=>{s.has(e.time)||(s.add(e.time),n.push(e))}),n})(a.data);f(e)}else{const e=z(0,t);f(e)}try{const e=await Sr.getStockQuote(s);e.success&&x(e.data)}catch(n){const t=_.find(t=>t.symbol===e)||_[0];x({symbol:t.symbol,name:t.name,price:t.price,change:t.change,changesPercentage:t.changePercent})}}catch(s){const n=z(0,t);f(n);const a=_.find(t=>t.symbol===e)||_[0];x({symbol:a.symbol,name:a.name,price:a.price,change:a.change,changesPercentage:a.changePercent})}finally{b(!1)}},$=async()=>{u(!0),await U(a,i),u(!1)},H=n.useCallback(e=>{F(e)},[]),W=_.find(e=>e.symbol===a)||{symbol:a,name:`${a} Co.`,price:(null==g?void 0:g.price)||0,change:(null==g?void 0:g.change)||0,changePercent:(null==g?void 0:g.changesPercentage)||0,isWatchlisted:!1},q=n.useCallback(e=>null==e?"₹ N/A":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2,maximumFractionDigits:2}).format(e),[]);return n.useEffect(()=>{U(a,i)},[a,i]),n.useEffect(()=>()=>{T&&clearInterval(T)},[T]),M.jsx("div",{className:"charts-page "+(s?"sidebar-collapsed":"sidebar-expanded"),children:M.jsxs("div",{className:"charts-container",children:[M.jsxs(y.div,{className:"charts-header",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:[M.jsxs("div",{className:"header-left",children:[M.jsxs("div",{className:"page-title",children:[M.jsx(nt,{size:24}),M.jsx("h1",{children:"Charts"})]}),M.jsxs("div",{className:"stock-info",children:[M.jsx("h2",{children:W.name}),M.jsxs("span",{className:"symbol",children:["(",W.symbol,")"]}),M.jsx(ui,{price:(null==g?void 0:g.price)||W.price,change:(null==g?void 0:g.change)||W.change,changePercent:(null==g?void 0:g.changesPercentage)||W.changePercent}),M.jsx("div",{className:"stock-actions-row",children:M.jsx(Ch,{symbol:W.symbol,isWatchlisted:W.isWatchlisted,onToggleWatchlist:()=>{const e={...W,isWatchlisted:!W.isWatchlisted};F(_.map(t=>t.symbol===W.symbol?e:t)),qe.info(e.isWatchlisted?`${e.name} added to watchlist!`:`${e.name} removed from watchlist!`)}})})]})]}),M.jsxs("div",{className:"header-actions",children:[M.jsxs("button",{className:"btn-premium btn-secondary",onClick:$,disabled:d||v,children:[M.jsx(Kt,{size:16,className:d?"animate-spin":""}),"Refresh"]}),M.jsxs("button",{className:"btn-premium "+(k?"btn-danger":"btn-success"),onClick:()=>{const e=!k;if(N(e),e){const e=setInterval(()=>{if(!d){(async e=>{try{const t=await Sr.getStockQuote(e);if(t.success&&t.data)return x(t.data),C(new Date),t.data}catch(t){}})(B(a))}},3e4);P(e),qe.success("Live updates enabled")}else T&&(clearInterval(T),P(null)),qe.info("Live updates paused")},children:[k?M.jsx(qt,{size:16}):M.jsx(Jt,{size:16}),k?"Pause Live":"Go Live"]})]})]}),M.jsxs("div",{className:"charts-content",children:[M.jsxs(y.div,{className:"charts-sidebar",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.1},children:[M.jsx(mp,{onStockSelect:async e=>{const t=e.replace(/\.(NS|BO)$/,"");r(t),await U(t,i)},selectedStock:{symbol:a},className:"charts-stock-search",popularStocks:_,onUpdatePopularStocks:H}),M.jsxs("div",{className:"sidebar-section",children:[M.jsx("h3",{children:"Timeframe"}),M.jsx("div",{className:"timeframe-buttons",children:["1D","5D","1M","3M","6M","1Y","5Y"].map(e=>M.jsx("button",{className:"timeframe-btn "+(i===e?"active":""),onClick:()=>(async e=>{o(e),await U(a,e)})(e),disabled:v,children:e},e))})]}),M.jsxs("div",{className:"sidebar-section",children:[M.jsx("h3",{children:"Chart Type"}),M.jsx("div",{className:"chart-type-buttons",children:R.map(e=>M.jsxs("button",{className:"chart-type-btn "+(l===e.id?"active":""),onClick:()=>c(e.id),disabled:v,children:[M.jsx(e.icon,{size:16}),e.name]},e.id))})]}),M.jsxs("div",{className:"sidebar-section",children:[M.jsx("h3",{children:"Technical Indicators"}),M.jsx("div",{className:"indicators-list",children:[{id:"sma",name:"SMA (20)",color:"#3B82F6"},{id:"ema",name:"EMA (12)",color:"#10B981"},{id:"rsi",name:"RSI (14)",color:"#F59E0B"},{id:"macd",name:"MACD",color:"#EF4444"},{id:"bollinger",name:"Bollinger Bands",color:"#8B5CF6"}].map(e=>M.jsxs("div",{className:"indicator-item "+(h.includes(e.id)?"active":""),onClick:()=>{return t=e.id,void m(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);var t},children:[M.jsx("div",{className:"indicator-color",style:{backgroundColor:e.color}}),M.jsx("span",{children:e.name})]},e.id))})]})]}),M.jsxs(y.div,{className:"chart-main",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.6,delay:.2},children:[v&&M.jsx("div",{className:"chart-loading-overlay",children:"Loading Chart Data..."}),j&&M.jsxs("div",{className:"chart-error-message",children:["Error: ",j]}),M.jsx(hp,{data:p,symbol:a,timeframe:i,chartType:l,theme:t,onRefresh:$,loading:v,height:600,indicators:h}),M.jsxs("div",{className:"chart-footer",children:[M.jsxs("div",{className:"footer-left",children:[M.jsxs("div",{className:"volume-info",children:[M.jsx(gn,{size:16}),M.jsxs("span",{children:["Volume: ",(null==g?void 0:g.volume)?g.volume.toLocaleString():"N/A"]})]}),M.jsxs("div",{className:"market-cap-info",children:[M.jsx(dn,{size:16}),M.jsxs("span",{children:["Market Cap: ",(null==g?void 0:g.marketCap)?q(g.marketCap):"N/A"]})]})]}),M.jsx("div",{className:"footer-right",children:M.jsxs("div",{className:"last-updated",children:[M.jsx(dt,{size:16}),M.jsxs("span",{children:["Last updated: ",S?S.toLocaleTimeString():"N/A"]})]})})]})]})]})]})})},fp=({user:e,theme:t})=>{const s=o(),{portfolioData:a}=ci(),{watchlists:r,loading:i,addToWatchlist:l,createWatchlist:c,refreshWatchlists:d}=Sh(),[u,h]=n.useState("all"),[m,p]=n.useState("list"),[f,x]=n.useState("symbol"),[v,b]=n.useState("asc"),[j,w]=n.useState(""),[k,N]=n.useState(!1),[S,C]=n.useState(!1),[T,P]=n.useState(""),[E,L]=n.useState(""),[I,A]=n.useState(!1),{isOpen:O,currentStock:D,defaultQuantity:R,closeSlideToBuy:_}=Ph(),F=n.useMemo(()=>{if("all"===u){return{name:"All Watchlists",stocks:r.reduce((e,t)=>[...e,...t.stocks||[]],[])}}return r.find(e=>e._id===u)||{name:"Unknown",stocks:[]}},[r,u]),B=n.useMemo(()=>{let e=F.stocks||[];return j&&(e=e.filter(e=>e.symbol.toLowerCase().includes(j.toLowerCase())||e.name.toLowerCase().includes(j.toLowerCase()))),e.sort((e,t)=>{let n=e[f],s=t[f];return"string"==typeof n&&(n=n.toLowerCase(),s=s.toLowerCase()),"asc"===v?n>s?1:-1:n<s?1:-1})},[F.stocks,j,f,v]),z=n.useMemo(()=>{const e=F.stocks||[];return{gainers:e.filter(e=>(e.change||0)>0).length,losers:e.filter(e=>(e.change||0)<0).length,neutral:e.filter(e=>0===(e.change||0)).length}},[F.stocks]),U=()=>r.reduce((e,t)=>{var n;return e+((null==(n=t.stocks)?void 0:n.length)||0)},0),$=async()=>{N(!0);try{await d(),qe.success("Watchlists refreshed successfully")}catch(e){qe.error("Failed to refresh watchlists")}finally{N(!1)}};return n.useEffect(()=>{r.length>0&&"all"===u&&h(r[0]._id)},[r]),i?M.jsx("div",{className:"watchlist-page",children:M.jsxs("div",{className:"loading-container",children:[M.jsx("div",{className:"loading-spinner"}),M.jsx("p",{children:"Loading watchlists..."})]})}):M.jsxs("div",{className:"watchlist-page",children:[M.jsxs("div",{className:"watchlist-container",children:[M.jsxs(y.div,{className:"watchlist-header",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:[M.jsxs("div",{className:"watchlist-header-top",children:[M.jsxs("div",{className:"header-left",children:[M.jsx("div",{className:"header-icon",children:M.jsx(bt,{})}),M.jsxs("div",{className:"header-text",children:[M.jsx("h1",{children:"My Watchlists"}),M.jsx("p",{children:"Track and manage your favorite stocks"})]})]}),M.jsxs("div",{className:"header-actions",children:[M.jsxs("button",{className:"action-btn "+(k?"loading":""),onClick:$,disabled:k,children:[M.jsx(Kt,{className:k?"spinning":""}),k?"Refreshing...":"Refresh"]}),M.jsxs("button",{className:"action-btn primary",onClick:()=>C(!0),children:[M.jsx(Qt,{}),"New Watchlist"]})]})]}),M.jsxs("div",{className:"stats-overview",children:[M.jsxs("div",{className:"stat-card",children:[M.jsx("div",{className:"stat-icon",children:M.jsx(nt,{})}),M.jsxs("div",{className:"stat-content",children:[M.jsx("div",{className:"stat-value",children:U()}),M.jsx("div",{className:"stat-label",children:"Total Stocks"})]})]}),M.jsxs("div",{className:"stat-card",children:[M.jsx("div",{className:"stat-icon positive",children:M.jsx(mn,{})}),M.jsxs("div",{className:"stat-content",children:[M.jsx("div",{className:"stat-value",children:z.gainers}),M.jsx("div",{className:"stat-label",children:"Gainers"})]})]}),M.jsxs("div",{className:"stat-card",children:[M.jsx("div",{className:"stat-icon negative",children:M.jsx(hn,{})}),M.jsxs("div",{className:"stat-content",children:[M.jsx("div",{className:"stat-value",children:z.losers}),M.jsx("div",{className:"stat-label",children:"Losers"})]})]}),M.jsxs("div",{className:"stat-card",children:[M.jsx("div",{className:"stat-icon",children:M.jsx(on,{})}),M.jsxs("div",{className:"stat-content",children:[M.jsx("div",{className:"stat-value",children:r.length}),M.jsx("div",{className:"stat-label",children:"Watchlists"})]})]})]})]}),M.jsxs("div",{className:"watchlist-content",children:[M.jsxs(y.div,{className:"watchlist-sidebar",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.1},children:[M.jsx(mp,{onStockSelect:e=>{(async e=>{if("all"!==u)try{await l(u,e),qe.success(`Added ${e} to watchlist`)}catch(t){qe.error("Failed to add stock to watchlist")}else qe.warning("Please select a specific watchlist to add stocks")})(e.symbol||e)},selectedStock:null,className:"watchlist-stock-search"}),M.jsxs("div",{className:"sidebar-section",children:[M.jsx("h3",{children:"My Watchlists"}),M.jsxs("div",{className:"watchlist-list",children:[M.jsxs("button",{className:"watchlist-tab "+("all"===u?"active":""),onClick:()=>h("all"),children:[M.jsx(Ve,{}),"All Watchlists",M.jsx("span",{className:"tab-count",children:U()})]}),r.map(e=>{var t;return M.jsxs("button",{className:"watchlist-tab "+(u===e._id?"active":""),onClick:()=>h(e._id),children:[M.jsx(at,{}),e.name,M.jsx("span",{className:"tab-count",children:(null==(t=e.stocks)?void 0:t.length)||0})]},e._id)})]})]}),M.jsxs("div",{className:"sidebar-section",children:[M.jsx("h3",{children:"Quick Actions"}),M.jsxs("div",{className:"quick-actions",children:[M.jsxs("button",{className:"action-btn",onClick:()=>C(!0),children:[M.jsx(Qt,{}),"New Watchlist"]}),M.jsxs("button",{className:"action-btn",onClick:$,disabled:k,children:[M.jsx(Kt,{className:k?"spinning":""}),"Refresh Data"]})]})]})]}),M.jsxs(y.div,{className:"watchlist-main",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.6,delay:.2},children:[M.jsxs("div",{className:"watchlist-tabs",children:[M.jsxs("button",{className:"watchlist-tab "+("all"===u?"active":""),onClick:()=>h("all"),children:[M.jsx(Ve,{}),"All Watchlists",M.jsx("span",{className:"tab-count",children:U()})]}),r.map(e=>{var t;return M.jsxs("button",{className:"watchlist-tab "+(u===e._id?"active":""),onClick:()=>h(e._id),children:[M.jsx(at,{}),e.name,M.jsx("span",{className:"tab-count",children:(null==(t=e.stocks)?void 0:t.length)||0})]},e._id)})]}),M.jsxs("div",{className:"main-header",children:[M.jsxs("div",{className:"main-title",children:[M.jsxs("h2",{children:[M.jsx(bt,{}),F.name]}),M.jsxs("div",{className:"main-controls",children:[M.jsxs("div",{className:"view-toggle","data-active":m,children:[M.jsxs("button",{className:"list"===m?"active":"",onClick:()=>p("list"),children:[M.jsx(Lt,{}),"List"]}),M.jsxs("button",{className:"grid"===m?"active":"",onClick:()=>p("grid"),children:[M.jsx(St,{}),"Grid"]})]}),M.jsx("div",{className:"sort-dropdown",children:M.jsxs("button",{className:"sort-btn",children:[M.jsx(wt,{}),"Sort by ",f,M.jsx(Qe,{})]})})]})]}),M.jsx("div",{className:"search-section",children:M.jsx(si,{value:j,onChange:w,placeholder:"Search stocks in watchlist...",className:"watchlist-search"})})]}),M.jsx("div",{className:"stocks-section",children:0===B.length?M.jsxs("div",{className:"empty-state",children:[M.jsx("div",{className:"empty-icon",children:M.jsx(at,{})}),M.jsx("h3",{children:"No stocks found"}),M.jsx("p",{children:j?`No stocks found matching "${j}" in your watchlist`:0===F.stocks.length?"Start building your watchlist by adding stocks you want to track":"Use the search above to add new stocks to your watchlist"}),!j&&0===F.stocks.length&&M.jsxs("button",{className:"action-btn primary",onClick:()=>C(!0),children:[M.jsx(Qt,{}),"Add Your First Stock"]})]}):M.jsx("div",{className:"stock-list",children:B.map((e,t)=>M.jsxs(y.div,{className:"stock-item",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:.03*t},onClick:()=>s(`/stock/${e.symbol}`),children:[M.jsxs("div",{className:"stock-info",children:[M.jsx("div",{className:"stock-symbol",children:e.symbol}),M.jsx("div",{className:"stock-name",children:e.name})]}),M.jsx("div",{className:"stock-price",children:M.jsx(ui,{symbol:e.symbol,showChange:!0,size:"medium"})}),M.jsx("div",{className:"stock-actions",children:M.jsx(Ch,{stockData:e,size:"small",variant:"simple",showText:!1,onSuccess:(t,n)=>{"removed"===n?(qe.success(`Removed ${e.symbol} from watchlist`),d()):"added"===n&&(qe.success(`Added ${e.symbol} to watchlist`),d())},onError:e=>{qe.error(e||"Failed to update watchlist")}})})]},e.symbol))})})]})]})]}),M.jsx(g,{children:S&&M.jsx(y.div,{className:"modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>C(!1),children:M.jsxs(y.div,{className:"modal-content",initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},onClick:e=>e.stopPropagation(),children:[M.jsxs("div",{className:"modal-header",children:[M.jsx("h3",{children:"Create New Watchlist"}),M.jsx("button",{className:"close-btn",onClick:()=>C(!1),children:M.jsx(xn,{})})]}),M.jsx("div",{className:"modal-body",children:M.jsxs("div",{className:"form-group",children:[M.jsx("label",{htmlFor:"watchlist-name",children:"Watchlist Name"}),M.jsx("input",{id:"watchlist-name",type:"text",value:T,onChange:e=>P(e.target.value),placeholder:"Enter watchlist name...",className:"form-input",autoFocus:!0})]})}),M.jsxs("div",{className:"modal-footer",children:[M.jsx("button",{className:"action-btn",onClick:()=>C(!1),children:"Cancel"}),M.jsx("button",{className:"action-btn primary",onClick:async()=>{if(T.trim()){A(!0);try{await c({name:T.trim(),description:E.trim()}),P(""),L(""),C(!1),qe.success("Watchlist created successfully")}catch(e){qe.error("Failed to create watchlist")}finally{A(!1)}}},disabled:!T.trim()||I,children:I?M.jsxs(M.Fragment,{children:[M.jsx(Kt,{className:"spinning"}),"Creating..."]}):M.jsxs(M.Fragment,{children:[M.jsx(Qt,{}),"Create Watchlist"]})})]})]})})}),M.jsx(Th,{stockData:D,isOpen:O,onClose:_,defaultQuantity:R,onSuccess:()=>{}})]})},gp=({user:e,theme:t})=>{const[s,a]=n.useState("all"),[r,i]=n.useState("all"),[o,l]=n.useState(!1),{portfolioData:c}=ci(),{query:d,setQuery:u,results:h,recentSearches:m,showHistory:p,handleHistoryClick:f,loading:g,clearSearch:x,hasResults:v}=((e={})=>ei("orders",{enableSuggestions:!1,limit:20,minQueryLength:1,...e}))({enableSuggestions:!1,enableHistory:!0,limit:50,debounceMs:300,filters:{status:"all"!==s?s:null,type:"all"!==r?r:null}}),b=c.transactions||[],j=e=>{switch(e){case"completed":return M.jsx(lt,{className:"status-icon completed"});case"pending":return M.jsx(dt,{className:"status-icon pending"});case"cancelled":return M.jsx(yn,{className:"status-icon cancelled"});default:return M.jsx(dt,{className:"status-icon"})}},w=e=>{switch(e){case"completed":return"#10B981";case"pending":return"#F59E0B";case"cancelled":return"#EF4444";default:return"#6B7280"}},k=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),N=b.filter(e=>{const t=e.symbol.toLowerCase().includes(d.toLowerCase())||e.name.toLowerCase().includes(d.toLowerCase())||e.id.toLowerCase().includes(d.toLowerCase()),n="all"===s||e.status===s,a="all"===r||e.type.toLowerCase()===r;return t&&n&&a});return M.jsxs("div",{className:"orders-page",children:[M.jsx(jh,{icon:an,title:"Orders",subtitle:"Track and manage your trading orders",borderColor:"warning",actions:[{label:"Refresh",icon:Kt,onClick:async()=>{l(!0),await new Promise(e=>setTimeout(e,1500)),l(!1)},variant:"secondary",disabled:o},{label:"Export",icon:gt,onClick:()=>{},variant:"outline"}]}),M.jsxs("div",{className:"orders-container",children:[M.jsxs(y.div,{className:"orders-controls",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},children:[M.jsxs("div",{className:"controls-left",children:[M.jsx("div",{className:"search-container",children:M.jsx(si,{placeholder:"Search orders by stock symbol...",value:d,onChange:u,onClear:x,recentSearches:m,onHistoryClick:f,showHistory:p,loading:g,size:"md",showSuggestions:!1,enableHistory:!0,className:"orders-search-input"})}),M.jsxs("div",{className:"filter-group",children:[M.jsx("select",{value:s,onChange:e=>a(e.target.value),className:"filter-select",children:[{id:"all",name:"All Orders",count:25},{id:"pending",name:"Pending",count:3},{id:"completed",name:"Completed",count:18},{id:"cancelled",name:"Cancelled",count:4}].map(e=>M.jsxs("option",{value:e.id,children:[e.name," (",e.count,")"]},e.id))}),M.jsx("select",{value:r,onChange:e=>i(e.target.value),className:"filter-select",children:[{id:"all",name:"All Types"},{id:"buy",name:"Buy Orders"},{id:"sell",name:"Sell Orders"}].map(e=>M.jsx("option",{value:e.id,children:e.name},e.id))})]})]}),M.jsx("div",{className:"controls-right",children:M.jsxs("button",{className:"btn-premium btn-ghost",children:[M.jsx(wt,{size:16}),"More Filters"]})})]}),M.jsxs(y.div,{className:"orders-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:[M.jsx("div",{className:"card-header",children:M.jsxs("h3",{className:"card-title",children:[M.jsx(an,{className:"card-icon"}),"Order History (",N.length,")"]})}),M.jsx("div",{className:"card-content",children:M.jsxs("div",{className:"orders-table",children:[M.jsxs("div",{className:"table-header",children:[M.jsx("div",{className:"col-order",children:"Order Details"}),M.jsx("div",{className:"col-type",children:"Type"}),M.jsx("div",{className:"col-quantity",children:"Quantity"}),M.jsx("div",{className:"col-price",children:"Price"}),M.jsx("div",{className:"col-total",children:"Total"}),M.jsx("div",{className:"col-status",children:"Status"}),M.jsx("div",{className:"col-time",children:"Time"}),M.jsx("div",{className:"col-actions",children:"Actions"})]}),M.jsx("div",{className:"table-body",children:N.map((e,t)=>{const n=(e=>{const t=new Date(e);return{date:t.toLocaleDateString("en-IN"),time:t.toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"})}})(e.timestamp);return M.jsxs(y.div,{className:"table-row",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:.05*t},children:[M.jsx("div",{className:"col-order",children:M.jsxs("div",{className:"order-info",children:[M.jsxs("div",{className:"order-id",children:["#",e.id]}),M.jsx("div",{className:"stock-symbol",children:e.symbol}),M.jsx("div",{className:"stock-name",children:e.name})]})}),M.jsxs("div",{className:"col-type",children:[M.jsxs("div",{className:`order-type ${e.type.toLowerCase()}`,children:["BUY"===e.type?M.jsx(mn,{size:14}):M.jsx(hn,{size:14}),e.type]}),M.jsx("div",{className:"order-subtype",children:e.orderType})]}),M.jsx("div",{className:"col-quantity",children:e.quantity}),M.jsx("div",{className:"col-price",children:M.jsxs("div",{className:"price-info",children:[M.jsx("div",{className:"order-price",children:k(e.price)}),e.executedPrice&&e.executedPrice!==e.price&&M.jsxs("div",{className:"executed-price",children:["Exec: ",k(e.executedPrice)]})]})}),M.jsxs("div",{className:"col-total",children:[M.jsx("div",{className:"total-amount",children:k(e.total)}),e.fees>0&&M.jsxs("div",{className:"fees",children:["Fees: ",k(e.fees)]})]}),M.jsx("div",{className:"col-status",children:M.jsxs("div",{className:"status-container",children:[j(e.status),M.jsx("span",{className:`status-text ${e.status}`,style:{color:w(e.status)},children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})]})}),M.jsx("div",{className:"col-time",children:M.jsxs("div",{className:"time-info",children:[M.jsx("div",{className:"order-date",children:n.date}),M.jsx("div",{className:"order-time",children:n.time})]})}),M.jsx("div",{className:"col-actions",children:M.jsxs("div",{className:"action-buttons",children:["pending"===e.status&&M.jsx("button",{className:"action-btn",title:"Edit Order",children:M.jsx(xt,{size:14})}),"pending"===e.status&&M.jsx("button",{className:"action-btn cancel",title:"Cancel Order",children:M.jsx(yn,{size:14})}),M.jsx("button",{className:"action-btn",title:"More Options",children:M.jsx(Wt,{size:14})})]})})]},e.id)})})]})})]})]})]})},yp=({user:e,theme:t})=>{var s;const a=o(),{portfolioData:r,getTransactionHistory:i}=ci(),[l,c]=n.useState([]),[d,u]=n.useState(!0),[h,m]=n.useState(""),[p,f]=n.useState("all"),[x,v]=n.useState("all"),[b,j]=n.useState("all"),[w,k]=n.useState("date"),[N,S]=n.useState("desc"),[C,T]=n.useState(null),[P,E]=n.useState(!1),[L,I]=n.useState(!1),A=[{id:"txn_001",type:"buy",symbol:"RELIANCE",name:"Reliance Industries Ltd",quantity:10,price:2847.65,totalAmount:28476.5,fees:14.24,netAmount:28490.74,status:"completed",timestamp:new Date("2024-01-15T10:30:00"),orderId:"ORD_001",exchange:"NSE",sector:"Energy"},{id:"txn_002",type:"sell",symbol:"TCS",name:"Tata Consultancy Services",quantity:5,price:3892.4,totalAmount:19462,fees:9.73,netAmount:19452.27,status:"completed",timestamp:new Date("2024-01-14T14:45:00"),orderId:"ORD_002",exchange:"NSE",sector:"IT",gainLoss:1847.3,gainLossPercent:10.5},{id:"txn_003",type:"buy",symbol:"HDFC",name:"HDFC Bank Ltd",quantity:15,price:1734.85,totalAmount:26022.75,fees:13.01,netAmount:26035.76,status:"pending",timestamp:new Date("2024-01-13T09:15:00"),orderId:"ORD_003",exchange:"NSE",sector:"Banking"},{id:"txn_004",type:"buy",symbol:"INFY",name:"Infosys Ltd",quantity:8,price:1456.2,totalAmount:11649.6,fees:5.82,netAmount:11655.42,status:"completed",timestamp:new Date("2024-01-12T11:20:00"),orderId:"ORD_004",exchange:"NSE",sector:"IT"},{id:"txn_005",type:"sell",symbol:"WIPRO",name:"Wipro Ltd",quantity:20,price:432.85,totalAmount:8657,fees:4.33,netAmount:8652.67,status:"failed",timestamp:new Date("2024-01-11T16:30:00"),orderId:"ORD_005",exchange:"NSE",sector:"IT",gainLoss:-245.8,gainLossPercent:-2.8,failureReason:"Insufficient shares"}];n.useEffect(()=>{(async()=>{u(!0);try{const e=oi.getTransactionHistory(),t=(null==r?void 0:r.transactions)||[],n=[...e,...t],s=n.map((e,t)=>{var n;return{id:e.id||`txn_${Date.now()}_${t}`,type:(null==(n=e.type)?void 0:n.toLowerCase())||"buy",symbol:e.symbol||"UNKNOWN",name:e.companyName||e.name||`${e.symbol} Corp`,quantity:e.quantity||0,price:e.price||0,totalAmount:e.total||e.totalAmount||e.quantity*e.price,fees:e.fees||5e-4*(e.total||e.totalAmount||e.quantity*e.price),netAmount:e.netAmount||e.total||e.totalAmount||e.quantity*e.price,status:e.status||"completed",timestamp:new Date(e.timestamp||e.createdAt||Date.now()),orderId:e.orderId||`ORD_${Date.now()}_${t}`,exchange:e.exchange||"NSE",sector:e.sector||"Unknown",gainLoss:e.gainLoss,gainLossPercent:e.gainLossPercent}}).filter((e,t,n)=>t===n.findIndex(t=>t.id===e.id));s.sort((e,t)=>new Date(t.timestamp)-new Date(e.timestamp)),0===s.length?c(A.slice(0,2)):c(s),u(!1)}catch(e){qe.error("Failed to load transaction history"),u(!1)}})()},[null==r?void 0:r.transactions]);const O=n.useMemo(()=>{let e=[...l];if(h&&(e=e.filter(e=>e.symbol.toLowerCase().includes(h.toLowerCase())||e.name.toLowerCase().includes(h.toLowerCase())||e.orderId.toLowerCase().includes(h.toLowerCase()))),"all"!==p&&(e=e.filter(e=>e.type===p)),"all"!==x&&(e=e.filter(e=>e.status===x)),"all"!==b){const t=new Date,n=new Date;switch(b){case"today":n.setHours(0,0,0,0);break;case"week":n.setDate(t.getDate()-7);break;case"month":n.setMonth(t.getMonth()-1);break;case"year":n.setFullYear(t.getFullYear()-1)}e=e.filter(e=>e.timestamp>=n)}return e.sort((e,t)=>{let n,s;switch(w){case"date":default:n=e.timestamp,s=t.timestamp;break;case"symbol":n=e.symbol,s=t.symbol;break;case"amount":n=e.totalAmount,s=t.totalAmount;break;case"quantity":n=e.quantity,s=t.quantity;break;case"status":n=e.status,s=t.status}return n instanceof Date&&s instanceof Date?"asc"===N?n-s:s-n:"string"==typeof n?"asc"===N?n.localeCompare(s):s.localeCompare(n):"asc"===N?n-s:s-n}),e},[l,h,p,x,b,w,N]),D=n.useMemo(()=>{const e=O.length,t=O.filter(e=>"completed"===e.status),n=t.filter(e=>"buy"===e.type),s=t.filter(e=>"sell"===e.type),a=n.reduce((e,t)=>e+t.totalAmount,0),r=s.reduce((e,t)=>e+t.totalAmount,0),i=t.reduce((e,t)=>e+(t.fees||0),0),o=s.reduce((e,t)=>e+(t.gainLoss||0),0);return{totalTransactions:e,completedTransactions:t.length,buyTransactions:n.length,sellTransactions:s.length,totalBuyAmount:a,totalSellAmount:r,totalFees:i,totalGainLoss:o,successRate:e>0?t.length/e*100:0}},[O]),R=e=>{w===e?S("asc"===N?"desc":"asc"):(k(e),S("desc"))},_=e=>{switch(e){case"completed":return M.jsx(lt,{className:"status-icon completed"});case"pending":return M.jsx(Ye,{className:"status-icon pending"});case"failed":return M.jsx(yn,{className:"status-icon failed"});default:return M.jsx(dt,{className:"status-icon"})}},F=e=>"buy"===e?M.jsx(mn,{className:"type-icon buy"}):M.jsx(hn,{className:"type-icon sell"});return d?M.jsx("div",{className:"history-page",children:M.jsx("div",{className:"history-container",children:M.jsxs("div",{className:"loading-container",children:[M.jsx("div",{className:"loading-spinner"}),M.jsx("p",{children:"Loading transaction history..."})]})})}):M.jsxs("div",{className:"history-page",children:[M.jsxs("div",{className:"history-header",children:[M.jsxs("div",{className:"header-content",children:[M.jsxs("div",{className:"header-left",children:[M.jsx("div",{className:"header-icon",children:M.jsx(dt,{})}),M.jsxs("div",{className:"header-text",children:[M.jsx("h1",{children:"Transaction History"}),M.jsx("p",{children:"Track all your trading activities and portfolio changes"})]})]}),M.jsx("div",{className:"header-actions",children:M.jsxs("button",{className:"action-btn "+(P?"active":""),onClick:()=>E(!P),children:[M.jsx(wt,{}),"Filters"]})})]}),M.jsxs("div",{className:"stats-overview",children:[M.jsxs("div",{className:"stat-card",children:[M.jsx("div",{className:"stat-icon",children:M.jsx(Ve,{})}),M.jsxs("div",{className:"stat-content",children:[M.jsx("div",{className:"stat-value",children:D.totalTransactions}),M.jsx("div",{className:"stat-label",children:"Total Transactions"})]})]}),M.jsxs("div",{className:"stat-card",children:[M.jsx("div",{className:"stat-icon positive",children:M.jsx(mn,{})}),M.jsxs("div",{className:"stat-content",children:[M.jsx("div",{className:"stat-value",children:wh(D.totalBuyAmount)}),M.jsx("div",{className:"stat-label",children:"Total Invested"})]})]}),M.jsxs("div",{className:"stat-card",children:[M.jsx("div",{className:"stat-icon negative",children:M.jsx(hn,{})}),M.jsxs("div",{className:"stat-content",children:[M.jsx("div",{className:"stat-value",children:wh(D.totalSellAmount)}),M.jsx("div",{className:"stat-label",children:"Total Sold"})]})]}),M.jsxs("div",{className:"stat-card",children:[M.jsx("div",{className:"stat-icon",children:M.jsx(dn,{})}),M.jsxs("div",{className:"stat-content",children:[M.jsxs("div",{className:"stat-value",children:[D.successRate.toFixed(1),"%"]}),M.jsx("div",{className:"stat-label",children:"Success Rate"})]})]})]})]}),M.jsxs("div",{className:"history-container",children:[M.jsx(g,{children:P&&M.jsx(y.div,{className:"filters-panel",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:M.jsxs("div",{className:"filters-content",children:[M.jsxs("div",{className:"filter-group",children:[M.jsx("label",{children:"Search"}),M.jsxs("div",{className:"search-wrapper",children:[M.jsx(Zt,{className:"search-icon"}),M.jsx("input",{type:"text",placeholder:"Search by symbol, name, or order ID...",value:h,onChange:e=>m(e.target.value),className:"search-input"}),h&&M.jsx("button",{className:"clear-search",onClick:()=>m(""),children:M.jsx(xn,{})})]})]}),M.jsxs("div",{className:"filter-group",children:[M.jsx("label",{children:"Transaction Type"}),M.jsxs("select",{value:p,onChange:e=>f(e.target.value),className:"filter-select",children:[M.jsx("option",{value:"all",children:"All Types"}),M.jsx("option",{value:"buy",children:"Buy Orders"}),M.jsx("option",{value:"sell",children:"Sell Orders"})]})]}),M.jsxs("div",{className:"filter-group",children:[M.jsx("label",{children:"Status"}),M.jsxs("select",{value:x,onChange:e=>v(e.target.value),className:"filter-select",children:[M.jsx("option",{value:"all",children:"All Status"}),M.jsx("option",{value:"completed",children:"Completed"}),M.jsx("option",{value:"pending",children:"Pending"}),M.jsx("option",{value:"failed",children:"Failed"})]})]}),M.jsxs("div",{className:"filter-group",children:[M.jsx("label",{children:"Date Range"}),M.jsxs("select",{value:b,onChange:e=>j(e.target.value),className:"filter-select",children:[M.jsx("option",{value:"all",children:"All Time"}),M.jsx("option",{value:"today",children:"Today"}),M.jsx("option",{value:"week",children:"Last 7 Days"}),M.jsx("option",{value:"month",children:"Last Month"}),M.jsx("option",{value:"year",children:"Last Year"})]})]}),M.jsx("div",{className:"filter-actions",children:M.jsx("button",{className:"clear-filters-btn",onClick:()=>{m(""),f("all"),v("all"),j("all")},children:"Clear All"})})]})})}),M.jsx("div",{className:"transactions-section",children:0===O.length?M.jsxs("div",{className:"empty-state",children:[M.jsx("div",{className:"empty-icon",children:M.jsx(dt,{})}),M.jsx("h3",{children:"No transactions found"}),M.jsx("p",{children:h||"all"!==p||"all"!==x||"all"!==b?"No transactions match your current filters":"Start trading to see your transaction history here"}),(h||"all"!==p||"all"!==x||"all"!==b)&&M.jsx("button",{className:"clear-filters-btn",onClick:()=>{m(""),f("all"),v("all"),j("all")},children:"Clear Filters"})]}):M.jsxs("div",{className:"transactions-table",children:[M.jsx("div",{className:"table-header",children:M.jsxs("div",{className:"table-row header",children:[M.jsxs("div",{className:"col-date sortable",onClick:()=>R("date"),children:["Date & Time","date"===w&&("asc"===N?M.jsx(et,{}):M.jsx(Qe,{}))]}),M.jsxs("div",{className:"col-stock sortable",onClick:()=>R("symbol"),children:["Stock","symbol"===w&&("asc"===N?M.jsx(et,{}):M.jsx(Qe,{}))]}),M.jsx("div",{className:"col-type",children:"Type"}),M.jsxs("div",{className:"col-quantity sortable",onClick:()=>R("quantity"),children:["Quantity","quantity"===w&&("asc"===N?M.jsx(et,{}):M.jsx(Qe,{}))]}),M.jsx("div",{className:"col-price",children:"Price"}),M.jsxs("div",{className:"col-amount sortable",onClick:()=>R("amount"),children:["Total Amount","amount"===w&&("asc"===N?M.jsx(et,{}):M.jsx(Qe,{}))]}),M.jsx("div",{className:"col-gain-loss",children:"Gain/Loss"}),M.jsxs("div",{className:"col-status sortable",onClick:()=>R("status"),children:["Status","status"===w&&("asc"===N?M.jsx(et,{}):M.jsx(Qe,{}))]}),M.jsx("div",{className:"col-actions",children:"Actions"})]})}),M.jsx("div",{className:"table-body",children:O.map((e,t)=>{var n;return M.jsxs(y.div,{className:"table-row clickable",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.05*t},onClick:()=>T(e),children:[M.jsx("div",{className:"col-date",children:M.jsxs("div",{className:"date-info",children:[M.jsx("span",{className:"date",children:Nh(e.timestamp,"MMM DD, YYYY")}),M.jsx("span",{className:"time",children:Nh(e.timestamp,"HH:mm")})]})}),M.jsx("div",{className:"col-stock",children:M.jsxs("div",{className:"stock-info",children:[M.jsx("span",{className:"symbol",children:e.symbol}),M.jsx("span",{className:"name",children:e.name}),M.jsx("span",{className:"exchange",children:e.exchange})]})}),M.jsx("div",{className:"col-type",children:M.jsxs("div",{className:`type-badge ${e.type}`,children:[F(e.type),M.jsx("span",{children:e.type.toUpperCase()})]})}),M.jsx("div",{className:"col-quantity",children:M.jsx("span",{className:"quantity",children:kh(e.quantity)})}),M.jsx("div",{className:"col-price",children:M.jsx("span",{className:"price",children:wh(e.price)})}),M.jsx("div",{className:"col-amount",children:M.jsxs("div",{className:"amount-info",children:[M.jsx("span",{className:"total",children:wh(e.totalAmount)}),M.jsxs("span",{className:"fees",children:["Fees: ",wh(e.fees||0)]})]})}),M.jsx("div",{className:"col-gain-loss",children:void 0!==e.gainLoss?M.jsxs("div",{className:"gain-loss "+(e.gainLoss>=0?"positive":"negative"),children:[M.jsxs("span",{className:"amount",children:[e.gainLoss>=0?"+":"",wh(e.gainLoss)]}),M.jsxs("span",{className:"percent",children:["(",e.gainLoss>=0?"+":"",null==(n=e.gainLossPercent)?void 0:n.toFixed(2),"%)"]})]}):M.jsx("span",{className:"no-data",children:"-"})}),M.jsx("div",{className:"col-status",children:M.jsxs("div",{className:`status-badge ${e.status}`,children:[_(e.status),M.jsx("span",{children:e.status})]})}),M.jsx("div",{className:"col-actions",children:M.jsx("button",{className:"action-btn-small",onClick:t=>{t.stopPropagation(),T(e)},title:"View Details",children:M.jsx(bt,{})})})]},e.id)})})]})})]}),M.jsx(g,{children:C&&M.jsx(y.div,{className:"modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>T(null),children:M.jsxs(y.div,{className:"modal-content transaction-detail-modal",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:e=>e.stopPropagation(),children:[M.jsxs("div",{className:"modal-header",children:[M.jsx("h3",{children:"Transaction Details"}),M.jsx("button",{className:"modal-close",onClick:()=>T(null),children:M.jsx(xn,{})})]}),M.jsx("div",{className:"modal-body",children:M.jsxs("div",{className:"transaction-details",children:[M.jsxs("div",{className:"detail-section",children:[M.jsx("h4",{children:"Basic Information"}),M.jsxs("div",{className:"detail-grid",children:[M.jsxs("div",{className:"detail-item",children:[M.jsx("label",{children:"Transaction ID"}),M.jsx("span",{children:C.id})]}),M.jsxs("div",{className:"detail-item",children:[M.jsx("label",{children:"Order ID"}),M.jsx("span",{children:C.orderId})]}),M.jsxs("div",{className:"detail-item",children:[M.jsx("label",{children:"Date & Time"}),M.jsx("span",{children:Nh(C.timestamp,"MMM DD, YYYY HH:mm:ss")})]}),M.jsxs("div",{className:"detail-item",children:[M.jsx("label",{children:"Status"}),M.jsxs("div",{className:`status-badge ${C.status}`,children:[_(C.status),M.jsx("span",{children:C.status})]})]})]})]}),M.jsxs("div",{className:"detail-section",children:[M.jsx("h4",{children:"Stock Information"}),M.jsxs("div",{className:"detail-grid",children:[M.jsxs("div",{className:"detail-item",children:[M.jsx("label",{children:"Symbol"}),M.jsx("span",{children:C.symbol})]}),M.jsxs("div",{className:"detail-item",children:[M.jsx("label",{children:"Company Name"}),M.jsx("span",{children:C.name})]}),M.jsxs("div",{className:"detail-item",children:[M.jsx("label",{children:"Exchange"}),M.jsx("span",{children:C.exchange})]}),M.jsxs("div",{className:"detail-item",children:[M.jsx("label",{children:"Sector"}),M.jsx("span",{children:C.sector})]})]})]}),M.jsxs("div",{className:"detail-section",children:[M.jsx("h4",{children:"Transaction Details"}),M.jsxs("div",{className:"detail-grid",children:[M.jsxs("div",{className:"detail-item",children:[M.jsx("label",{children:"Type"}),M.jsxs("div",{className:`type-badge ${C.type}`,children:[F(C.type),M.jsx("span",{children:C.type.toUpperCase()})]})]}),M.jsxs("div",{className:"detail-item",children:[M.jsx("label",{children:"Quantity"}),M.jsxs("span",{children:[kh(C.quantity)," shares"]})]}),M.jsxs("div",{className:"detail-item",children:[M.jsx("label",{children:"Price per Share"}),M.jsx("span",{children:wh(C.price)})]}),M.jsxs("div",{className:"detail-item",children:[M.jsx("label",{children:"Total Amount"}),M.jsx("span",{children:wh(C.totalAmount)})]}),M.jsxs("div",{className:"detail-item",children:[M.jsx("label",{children:"Fees & Charges"}),M.jsx("span",{children:wh(C.fees||0)})]}),M.jsxs("div",{className:"detail-item",children:[M.jsx("label",{children:"Net Amount"}),M.jsx("span",{className:"net-amount",children:wh(C.netAmount)})]})]})]}),void 0!==C.gainLoss&&M.jsxs("div",{className:"detail-section",children:[M.jsx("h4",{children:"Performance"}),M.jsxs("div",{className:"detail-grid",children:[M.jsxs("div",{className:"detail-item",children:[M.jsx("label",{children:"Gain/Loss Amount"}),M.jsxs("span",{className:"gain-loss "+(C.gainLoss>=0?"positive":"negative"),children:[C.gainLoss>=0?"+":"",wh(C.gainLoss)]})]}),M.jsxs("div",{className:"detail-item",children:[M.jsx("label",{children:"Gain/Loss Percentage"}),M.jsxs("span",{className:"gain-loss "+(C.gainLoss>=0?"positive":"negative"),children:[C.gainLoss>=0?"+":"",null==(s=C.gainLossPercent)?void 0:s.toFixed(2),"%"]})]})]})]}),"failed"===C.status&&C.failureReason&&M.jsxs("div",{className:"detail-section",children:[M.jsx("h4",{children:"Failure Information"}),M.jsxs("div",{className:"failure-reason",children:[M.jsx(yn,{className:"failure-icon"}),M.jsx("span",{children:C.failureReason})]})]})]})}),M.jsxs("div",{className:"modal-footer",children:[M.jsx("button",{className:"btn secondary",onClick:()=>T(null),children:"Close"}),M.jsx("button",{className:"btn primary",onClick:()=>a(`/stock/${C.symbol}`),children:"View Stock"})]})]})})})]})},xp=({user:e,theme:t})=>{const[s,a]=n.useState("all"),[r,i]=n.useState(!1),[o,l]=n.useState([]),{query:c,setQuery:d,results:u,recentSearches:h,showHistory:m,handleHistoryClick:p,loading:f,clearSearch:g,hasResults:x}=ni({enableSuggestions:!1,enableHistory:!0,limit:30,debounceMs:500}),v=e=>{const t=new Date,n=new Date(e),s=Math.floor((t-n)/36e5);return s<1?"Just now":s<24?`${s}h ago`:`${Math.floor(s/24)}d ago`},b=[{id:1,title:"Sensex Surges 500 Points as Banking Stocks Rally on RBI Policy Optimism",summary:"Indian benchmark indices closed higher on Tuesday as banking and financial stocks led the rally following positive sentiment around the upcoming RBI monetary policy meeting.",content:"The BSE Sensex gained 501.92 points to close at 65,953.48, while the NSE Nifty 50 advanced 145.30 points to end at 19,674.25. Banking stocks were the top performers with HDFC Bank, ICICI Bank, and Kotak Mahindra Bank leading the gains.",category:"market",source:"Economic Times",author:"Rajesh Kumar",publishedAt:"2024-01-15T10:30:00Z",imageUrl:"https://images.unsplash.com/photo-1611974789855-9c2a0a7236a3?w=400",readTime:"3 min read",tags:["Sensex","Banking","RBI","Market Rally"],isBookmarked:!1},{id:2,title:"Reliance Industries Reports Strong Q3 Results, Beats Estimates",summary:"Reliance Industries Ltd reported better-than-expected quarterly results driven by strong performance in its retail and digital services segments.",content:"The oil-to-telecom conglomerate posted a net profit of ₹18,549 crore for the quarter ended December 2023, up 8.5% year-on-year. Revenue from operations increased to ₹2.35 lakh crore.",category:"earnings",source:"Business Standard",author:"Priya Sharma",publishedAt:"2024-01-15T09:15:00Z",imageUrl:"https://images.unsplash.com/photo-1560472354-b33ff0c44a43?w=400",readTime:"4 min read",tags:["Reliance","Earnings","Q3 Results"],isBookmarked:!0},{id:3,title:"IT Stocks Under Pressure as US Fed Signals Hawkish Stance",summary:"Indian IT stocks declined in early trade as the US Federal Reserve indicated a more aggressive approach to interest rate hikes.",content:"TCS, Infosys, and Wipro were among the top losers as investors worried about the impact of higher interest rates on IT spending by US clients. The Nifty IT index fell 2.3%.",category:"stocks",source:"Mint",author:"Amit Verma",publishedAt:"2024-01-15T08:45:00Z",imageUrl:"https://images.unsplash.com/photo-1551288049-bebda4e38f71?w=400",readTime:"2 min read",tags:["IT Stocks","Fed Policy","TCS","Infosys"],isBookmarked:!1},{id:4,title:"Government Announces New PLI Scheme for Electronics Manufacturing",summary:"The government unveiled a new Production Linked Incentive scheme worth ₹76,000 crore to boost electronics manufacturing in India.",content:"The scheme aims to attract global electronics manufacturers and create employment opportunities. Companies like Apple, Samsung, and Foxconn are expected to benefit from this initiative.",category:"policy",source:"Financial Express",author:"Neha Gupta",publishedAt:"2024-01-15T07:30:00Z",imageUrl:"https://images.unsplash.com/photo-1518709268805-4e9042af2176?w=400",readTime:"5 min read",tags:["PLI Scheme","Electronics","Manufacturing","Policy"],isBookmarked:!1},{id:5,title:"Crude Oil Prices Rise on Middle East Tensions, OMCs in Focus",summary:"Oil marketing companies gained as crude oil prices surged due to escalating tensions in the Middle East region.",content:"Brent crude futures rose 2.5% to $85.40 per barrel. Indian Oil Corporation, BPCL, and HPCL were among the top gainers in the energy sector.",category:"market",source:"Reuters",author:"Global Desk",publishedAt:"2024-01-15T06:00:00Z",imageUrl:"https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=400",readTime:"3 min read",tags:["Crude Oil","OMCs","Energy Sector"],isBookmarked:!1},{id:6,title:"FII Inflows Continue as India Remains Attractive Investment Destination",summary:"Foreign institutional investors pumped in ₹12,500 crore into Indian equities last week, showing continued confidence in the market.",content:"The sustained FII inflows reflect positive sentiment towards Indian markets amid global uncertainties. Experts believe India's growth prospects remain strong.",category:"economy",source:"Moneycontrol",author:"Investment Desk",publishedAt:"2024-01-14T16:20:00Z",imageUrl:"https://images.unsplash.com/photo-1559526324-4b87b5e36e44?w=400",readTime:"4 min read",tags:["FII","Investment","Market Flows"],isBookmarked:!0}].filter(e=>{const t=e.title.toLowerCase().includes(c.toLowerCase())||e.summary.toLowerCase().includes(c.toLowerCase())||e.tags.some(e=>e.toLowerCase().includes(c.toLowerCase())),n="all"===s||e.category===s;return t&&n});return M.jsxs("div",{className:"news-page",children:[M.jsx(jh,{icon:Nt,title:"Market News",subtitle:"Stay updated with the latest market news and analysis from trusted sources",borderColor:"info",actions:[{label:"Refresh",icon:Kt,onClick:async()=>{i(!0),await new Promise(e=>setTimeout(e,1500)),i(!1)},variant:"secondary",disabled:r},{label:"Bookmarks",icon:at,onClick:()=>{},variant:"primary"}]}),M.jsxs("div",{className:"news-container",children:[M.jsxs(y.div,{className:"news-controls",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},children:[M.jsxs("div",{className:"controls-left",children:[M.jsx("div",{className:"search-container",children:M.jsx(si,{placeholder:"Search news articles...",value:c,onChange:d,onClear:g,recentSearches:h,onHistoryClick:p,showHistory:m,loading:f,size:"md",showSuggestions:!1,enableHistory:!0,className:"news-search-input"})}),M.jsx("div",{className:"category-filter",children:[{id:"all",name:"All News",count:45},{id:"market",name:"Market",count:12},{id:"stocks",name:"Stocks",count:8},{id:"economy",name:"Economy",count:10},{id:"policy",name:"Policy",count:6},{id:"earnings",name:"Earnings",count:9}].map(e=>M.jsxs("button",{className:"category-btn "+(s===e.id?"active":""),onClick:()=>a(e.id),children:[e.name,M.jsx("span",{className:"category-count",children:e.count})]},e.id))})]}),M.jsx("div",{className:"controls-right",children:M.jsxs("button",{className:"btn-premium btn-ghost",children:[M.jsx(wt,{size:16}),"Filter"]})})]}),M.jsx(y.div,{className:"news-grid",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:b.map((e,t)=>M.jsxs(y.article,{className:"news-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.1*t},children:[M.jsxs("div",{className:"news-image",children:[M.jsx("img",{src:e.imageUrl,alt:e.title}),M.jsx("div",{className:"news-category",children:M.jsx("span",{className:`category-tag ${e.category}`,children:e.category.toUpperCase()})})]}),M.jsxs("div",{className:"news-content",children:[M.jsxs("div",{className:"news-meta",children:[M.jsxs("div",{className:"meta-left",children:[M.jsxs("span",{className:"news-source",children:[M.jsx(pn,{size:12}),e.source]}),M.jsxs("span",{className:"news-time",children:[M.jsx(dt,{size:12}),v(e.publishedAt)]})]}),M.jsx("div",{className:"meta-right",children:M.jsx("span",{className:"read-time",children:e.readTime})})]}),M.jsx("h3",{className:"news-title",children:e.title}),M.jsx("p",{className:"news-summary",children:e.summary}),M.jsx("div",{className:"news-tags",children:e.tags.slice(0,3).map(e=>M.jsxs("span",{className:"news-tag",children:[M.jsx(cn,{size:10}),e]},e))}),M.jsxs("div",{className:"news-actions",children:[M.jsx("div",{className:"actions-left",children:M.jsxs("button",{className:"news-author",children:["By ",e.author]})}),M.jsxs("div",{className:"actions-right",children:[M.jsx("button",{className:"action-btn "+(o.includes(e.id)||e.isBookmarked?"bookmarked":""),onClick:()=>{return t=e.id,void l(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);var t},title:"Bookmark",children:M.jsx(at,{size:16})}),M.jsx("button",{className:"action-btn",onClick:()=>(e=>{navigator.share?navigator.share({title:e.title,text:e.summary,url:window.location.href}):navigator.clipboard.writeText(window.location.href)})(e),title:"Share",children:M.jsx(nn,{size:16})}),M.jsx("button",{className:"action-btn",title:"Read Full Article",children:M.jsx(vt,{size:16})})]})]})]})]},e.id))}),M.jsx(y.div,{className:"load-more-section",initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.4},children:M.jsx("button",{className:"btn-premium btn-secondary btn-lg",children:"Load More Articles"})})]})]})},vp=({user:e,theme:t})=>{const[s,a]=n.useState(""),[r,i]=n.useState(new Set),[o,l]=n.useState(!1),[c,d]=n.useState(!1),{notifications:u,unreadCount:h,loading:m,error:p,filters:f,pagination:x,connectionStatus:v,fetchNotifications:b,markAsRead:j,markAllAsRead:w,deleteNotification:k,setFilters:N,loadMore:S}=ur();n.useEffect(()=>{b()},[b]);const C=n.useCallback(()=>{b()},[b]),T=n.useCallback((e,t)=>{N({[e]:t})},[N]),P=u.filter(e=>{if(s){const t=s.toLowerCase();if(!e.title.toLowerCase().includes(t)&&!e.message.toLowerCase().includes(t))return!1}return("all"===f.type||e.type===f.type)&&(!("read"===f.read&&!e.read)&&("unread"!==f.read||!e.read))}),E=n.useCallback(e=>{const t=new Set(r);t.has(e)?t.delete(e):t.add(e),i(t)},[r]),L=n.useCallback(()=>{r.size===P.length?i(new Set):i(new Set(P.map(e=>e.id||e._id)))},[r,P]),I=n.useCallback(async()=>{const e=Array.from(r).map(e=>j(e));await Promise.all(e),i(new Set),d(!1)},[r,j]),A=n.useCallback(async()=>{const e=Array.from(r).map(e=>k(e));await Promise.all(e),i(new Set),d(!1)},[r,k]),O=n.useCallback(()=>{d(e=>!e),c&&i(new Set)},[c]);return M.jsxs("div",{className:"notifications-page",children:[M.jsx(jh,{icon:st,title:"Notifications",subtitle:`${h} unread • ${"connected"===v?"LIVE":"OFFLINE"}`,borderColor:"primary",showNotifications:!1,actions:[{label:c?"Cancel":"Select",icon:c?xn:yt,onClick:O,variant:c?"outline-danger":"outline"},{label:"Refresh",icon:Kt,onClick:C,variant:"secondary",disabled:m},{label:"Settings",icon:tn,onClick:()=>{},variant:"outline"}]}),M.jsxs("div",{className:"notifications-content",children:[M.jsx(g,{children:h>0&&!c&&M.jsx(y.div,{className:"notifications-actions",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},children:M.jsxs(y.button,{className:"action-btn mark-all",onClick:w,whileHover:{scale:1.05},whileTap:{scale:.95},children:[M.jsx(ct,{}),"Mark all read"]})})}),M.jsxs("div",{className:"notifications-controls",children:[M.jsxs("div",{className:"search-container",children:[M.jsx(Zt,{className:"search-icon"}),M.jsx("input",{type:"text",placeholder:"Search notifications...",value:s,onChange:e=>a(e.target.value),className:"search-input"})]}),M.jsxs("button",{className:"filter-toggle",onClick:()=>l(e=>!e),children:[M.jsx(ct,{}),M.jsx("span",{children:"Filters"})]})]}),M.jsx(g,{children:o&&M.jsxs(y.div,{className:"filters-container",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},children:[M.jsxs("div",{className:"filter-group",children:[M.jsx("label",{children:"Type:"}),M.jsxs("select",{value:f.type,onChange:e=>T("type",e.target.value),children:[M.jsx("option",{value:"all",children:"All Types"}),M.jsx("option",{value:"info",children:"Info"}),M.jsx("option",{value:"success",children:"Success"}),M.jsx("option",{value:"warning",children:"Warning"}),M.jsx("option",{value:"error",children:"Error"}),M.jsx("option",{value:"alert",children:"Alert"})]})]}),M.jsxs("div",{className:"filter-group",children:[M.jsx("label",{children:"Status:"}),M.jsxs("select",{value:f.read,onChange:e=>T("read",e.target.value),children:[M.jsx("option",{value:"all",children:"All"}),M.jsx("option",{value:"unread",children:"Unread"}),M.jsx("option",{value:"read",children:"Read"})]})]})]})}),M.jsx(g,{children:r.size>0&&M.jsxs(y.div,{className:"bulk-actions",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:[M.jsxs("div",{className:"bulk-info",children:[M.jsx("input",{type:"checkbox",checked:r.size===P.length,onChange:L}),M.jsxs("span",{children:[r.size," selected"]})]}),M.jsxs("div",{className:"bulk-buttons",children:[M.jsxs("button",{onClick:I,children:[M.jsx(ct,{})," Mark as read"]}),M.jsxs("button",{onClick:A,className:"danger",children:[M.jsx(un,{})," Delete"]})]})]})}),M.jsx("div",{className:"notifications-list",children:p?M.jsxs("div",{className:"error-state",children:[M.jsx(st,{size:48}),M.jsx("h3",{children:"Failed to load notifications"}),M.jsx("p",{children:p}),M.jsx("button",{onClick:C,children:"Try again"})]}):P.length>0?M.jsxs(M.Fragment,{children:[P.map((e,t)=>M.jsxs(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*t},className:"notification-wrapper",children:[M.jsx(g,{mode:"wait",children:c&&M.jsx(y.input,{type:"checkbox",checked:r.has(e.id||e._id),onChange:()=>E(e.id||e._id),className:"notification-checkbox",initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0}},"checkbox")}),M.jsx(xh,{notification:e,onClick:()=>j(e.id||e._id),onDelete:()=>k(e.id||e._id),onMarkAsRead:()=>j(e.id||e._id),compact:!1,showActions:!c})]},e.id||e._id)),x.hasMore&&M.jsx("div",{className:"load-more-container",children:M.jsx(y.button,{className:"load-more-btn",onClick:S,disabled:m,whileHover:{scale:1.02},whileTap:{scale:.98},children:m?"Loading...":"Load More"})})]}):M.jsxs("div",{className:"empty-state",children:[M.jsx(st,{size:48}),M.jsx("h3",{children:"No notifications found"}),M.jsx("p",{children:s||"all"!==f.type||"all"!==f.read?"Try adjusting your search or filters":"You're all caught up! New notifications will appear here."})]})})]})]})},bp=({user:e,theme:t})=>{var s,a;const[r,i]=n.useState("profile"),[o,l]=n.useState(!1),[c,d]=n.useState(!1),u=[{id:"profile",name:"Profile",icon:pn},{id:"notifications",name:"Notifications",icon:st},{id:"security",name:"Security",icon:sn},{id:"preferences",name:"Preferences",icon:tn}],[h,m]=n.useState({firstName:(null==e?void 0:e.firstName)||(null==(s=null==e?void 0:e.fullName)?void 0:s.split(" ")[0])||"",lastName:(null==e?void 0:e.lastName)||(null==(a=null==e?void 0:e.fullName)?void 0:a.split(" ").slice(1).join(" "))||"",email:(null==e?void 0:e.email)||"",phone:(null==e?void 0:e.phoneNumber)||(null==e?void 0:e.phone)||"",bio:(null==e?void 0:e.bio)||"Welcome to TradeBro! Start your trading journey today.",location:(null==e?void 0:e.location)||(null==e?void 0:e.address)||""}),[p,f]=n.useState({emailNotifications:!0,pushNotifications:!0,smsNotifications:!1,priceAlerts:!0,newsAlerts:!0,portfolioUpdates:!0,marketOpen:!1,weeklyReports:!0}),[g,x]=n.useState({twoFactorAuth:(null==e?void 0:e.twoFactorEnabled)||!1,loginAlerts:!1!==(null==e?void 0:e.loginAlerts),sessionTimeout:"30",allowedDevices:3}),[v,b]=n.useState(!1),[j,w]=n.useState(""),[k,N]=n.useState(""),[S,C]=n.useState(!1),[T,P]=n.useState({theme:t,language:"en",currency:"INR",timezone:"Asia/Kolkata",dateFormat:"DD/MM/YYYY",numberFormat:"Indian",defaultPage:"dashboard"}),E=(e,t)=>{m(n=>({...n,[e]:t}))},L=e=>{f(t=>({...t,[e]:!t[e]}))},I=async(e,t)=>{"twoFactorAuth"===e?t?await A():await D():x(n=>({...n,[e]:t}))},A=async()=>{try{C(!0);const e="https://s89-satya-capstone-tradebro.onrender.com",t=await fetch(`${e}/api/auth/2fa/enable`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}}),n=await t.json();n.success&&(w(n.qrCodeUrl),b(!0))}catch(e){}finally{C(!1)}},O=async()=>{try{const e="https://s89-satya-capstone-tradebro.onrender.com",t=await fetch(`${e}/api/auth/2fa/verify`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"},body:JSON.stringify({code:k})});(await t.json()).success?(x(e=>({...e,twoFactorAuth:!0})),b(!1),N(""),alert("Two-factor authentication enabled successfully!")):alert("Invalid verification code. Please try again.")}catch(e){alert("Error verifying code. Please try again.")}},D=async()=>{try{const e="https://s89-satya-capstone-tradebro.onrender.com",t=await fetch(`${e}/api/auth/2fa/disable`,{method:"POST",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}});(await t.json()).success&&(x(e=>({...e,twoFactorAuth:!1})),alert("Two-factor authentication disabled successfully!"))}catch(e){}},R=(e,t)=>{P(n=>({...n,[e]:t}))},_=()=>M.jsxs("div",{className:"settings-section",children:[M.jsx("h3",{className:"section-title",children:"Profile Information"}),M.jsxs("div",{className:"form-grid",children:[M.jsxs("div",{className:"form-group",children:[M.jsx("label",{className:"form-label",children:"First Name"}),M.jsx("input",{type:"text",className:"form-input",value:h.firstName,onChange:e=>E("firstName",e.target.value)})]}),M.jsxs("div",{className:"form-group",children:[M.jsx("label",{className:"form-label",children:"Last Name"}),M.jsx("input",{type:"text",className:"form-input",value:h.lastName,onChange:e=>E("lastName",e.target.value)})]}),M.jsxs("div",{className:"form-group",children:[M.jsx("label",{className:"form-label",children:"Email Address"}),M.jsx("input",{type:"email",className:"form-input",value:h.email,onChange:e=>E("email",e.target.value)})]}),M.jsxs("div",{className:"form-group",children:[M.jsx("label",{className:"form-label",children:"Phone Number"}),M.jsx("input",{type:"tel",className:"form-input",value:h.phone,onChange:e=>E("phone",e.target.value)})]}),M.jsxs("div",{className:"form-group full-width",children:[M.jsx("label",{className:"form-label",children:"Bio"}),M.jsx("textarea",{className:"form-textarea",rows:"3",value:h.bio,onChange:e=>E("bio",e.target.value)})]}),M.jsxs("div",{className:"form-group full-width",children:[M.jsx("label",{className:"form-label",children:"Location"}),M.jsx("input",{type:"text",className:"form-input",value:h.location,onChange:e=>E("location",e.target.value)})]})]})]});return M.jsxs("div",{className:"settings-page",children:[M.jsx(jh,{icon:tn,title:"Settings",subtitle:"Manage your account preferences and security settings",borderColor:"success",actions:[{label:o?"Saving...":"Save Changes",icon:o?Kt:Xt,onClick:async()=>{l(!0),await new Promise(e=>setTimeout(e,1500)),l(!1)},variant:"primary",disabled:o}]}),M.jsx("div",{className:"settings-container",children:M.jsxs("div",{className:"settings-layout",children:[M.jsx(y.div,{className:"settings-tabs",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.1},children:u.map(e=>{const t=e.icon;return M.jsxs("button",{className:"tab-button "+(r===e.id?"active":""),onClick:()=>i(e.id),children:[M.jsx(t,{size:20}),e.name]},e.id)})}),M.jsx(y.div,{className:"settings-content",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:(()=>{switch(r){case"profile":default:return _();case"notifications":return M.jsxs("div",{className:"settings-section",children:[M.jsx("h3",{className:"section-title",children:"Notification Preferences"}),M.jsxs("div",{className:"notification-groups",children:[M.jsxs("div",{className:"notification-group",children:[M.jsx("h4",{className:"group-title",children:"Communication"}),M.jsxs("div",{className:"toggle-list",children:[M.jsxs("div",{className:"toggle-item",children:[M.jsxs("div",{className:"toggle-info",children:[M.jsx(Rt,{className:"toggle-icon"}),M.jsxs("div",{children:[M.jsx("div",{className:"toggle-label",children:"Email Notifications"}),M.jsx("div",{className:"toggle-description",children:"Receive updates via email"})]})]}),M.jsx("div",{className:"toggle-switch "+(p.emailNotifications?"on":"off"),onClick:()=>L("emailNotifications"),children:M.jsx("div",{className:"toggle-thumb"})})]}),M.jsxs("div",{className:"toggle-item",children:[M.jsxs("div",{className:"toggle-info",children:[M.jsx(st,{className:"toggle-icon"}),M.jsxs("div",{children:[M.jsx("div",{className:"toggle-label",children:"Push Notifications"}),M.jsx("div",{className:"toggle-description",children:"Browser push notifications"})]})]}),M.jsx("div",{className:"toggle-switch "+(p.pushNotifications?"on":"off"),onClick:()=>L("pushNotifications"),children:M.jsx("div",{className:"toggle-thumb"})})]}),M.jsxs("div",{className:"toggle-item",children:[M.jsxs("div",{className:"toggle-info",children:[M.jsx(rn,{className:"toggle-icon"}),M.jsxs("div",{children:[M.jsx("div",{className:"toggle-label",children:"SMS Notifications"}),M.jsx("div",{className:"toggle-description",children:"Text message alerts"})]})]}),M.jsx("div",{className:"toggle-switch "+(p.smsNotifications?"on":"off"),onClick:()=>L("smsNotifications"),children:M.jsx("div",{className:"toggle-thumb"})})]})]})]}),M.jsxs("div",{className:"notification-group",children:[M.jsx("h4",{className:"group-title",children:"Market Alerts"}),M.jsxs("div",{className:"toggle-list",children:[M.jsxs("div",{className:"toggle-item",children:[M.jsxs("div",{className:"toggle-info",children:[M.jsx(ft,{className:"toggle-icon"}),M.jsxs("div",{children:[M.jsx("div",{className:"toggle-label",children:"Price Alerts"}),M.jsx("div",{className:"toggle-description",children:"Stock price movement alerts"})]})]}),M.jsx("div",{className:"toggle-switch "+(p.priceAlerts?"on":"off"),onClick:()=>L("priceAlerts"),children:M.jsx("div",{className:"toggle-thumb"})})]}),M.jsxs("div",{className:"toggle-item",children:[M.jsxs("div",{className:"toggle-info",children:[M.jsx(Nt,{className:"toggle-icon"}),M.jsxs("div",{children:[M.jsx("div",{className:"toggle-label",children:"News Alerts"}),M.jsx("div",{className:"toggle-description",children:"Market news and updates"})]})]}),M.jsx("div",{className:"toggle-switch "+(p.newsAlerts?"on":"off"),onClick:()=>L("newsAlerts"),children:M.jsx("div",{className:"toggle-thumb"})})]}),M.jsxs("div",{className:"toggle-item",children:[M.jsxs("div",{className:"toggle-info",children:[M.jsx(pn,{className:"toggle-icon"}),M.jsxs("div",{children:[M.jsx("div",{className:"toggle-label",children:"Portfolio Updates"}),M.jsx("div",{className:"toggle-description",children:"Portfolio performance updates"})]})]}),M.jsx("div",{className:"toggle-switch "+(p.portfolioUpdates?"on":"off"),onClick:()=>L("portfolioUpdates"),children:M.jsx("div",{className:"toggle-thumb"})})]})]})]})]})]});case"security":return M.jsxs("div",{className:"settings-section",children:[M.jsx("h3",{className:"section-title",children:"Security & Privacy"}),M.jsxs("div",{className:"security-groups",children:[M.jsxs("div",{className:"security-group",children:[M.jsx("h4",{className:"group-title",children:"Authentication"}),M.jsxs("div",{className:"security-item",children:[M.jsxs("div",{className:"security-info",children:[M.jsx(sn,{className:"security-icon"}),M.jsxs("div",{children:[M.jsx("div",{className:"security-label",children:"Two-Factor Authentication"}),M.jsx("div",{className:"security-description",children:"Add an extra layer of security"})]})]}),M.jsx("div",{className:`toggle-switch ${g.twoFactorAuth?"on":"off"} ${S?"disabled":""}`,onClick:()=>!S&&I("twoFactorAuth",!g.twoFactorAuth),children:M.jsx("div",{className:"toggle-thumb"})})]}),v&&M.jsx("div",{className:"modal-overlay",onClick:()=>b(!1),children:M.jsxs("div",{className:"modal-content",onClick:e=>e.stopPropagation(),children:[M.jsxs("div",{className:"modal-header",children:[M.jsx("h3",{children:"Setup Two-Factor Authentication"}),M.jsx("button",{className:"modal-close",onClick:()=>b(!1),children:M.jsx(xn,{size:20})})]}),M.jsx("div",{className:"modal-body",children:M.jsxs("div",{className:"qr-section",children:[M.jsx("p",{children:"1. Install Google Authenticator or similar app"}),M.jsx("p",{children:"2. Scan this QR code:"}),j&&M.jsx("div",{className:"qr-code",children:M.jsx("img",{src:j,alt:"QR Code"})}),M.jsx("p",{children:"3. Enter the 6-digit code from your app:"}),M.jsx("input",{type:"text",className:"verification-input",placeholder:"000000",value:k,onChange:e=>N(e.target.value),maxLength:"6"})]})}),M.jsxs("div",{className:"modal-footer",children:[M.jsx("button",{className:"btn-premium btn-secondary",onClick:()=>b(!1),children:"Cancel"}),M.jsx("button",{className:"btn-premium btn-primary",onClick:O,disabled:6!==k.length,children:"Verify & Enable"})]})]})}),M.jsxs("div",{className:"security-item",children:[M.jsxs("div",{className:"security-info",children:[M.jsx(st,{className:"security-icon"}),M.jsxs("div",{children:[M.jsx("div",{className:"security-label",children:"Login Alerts"}),M.jsx("div",{className:"security-description",children:"Get notified of new logins"})]})]}),M.jsx("div",{className:"toggle-switch "+(g.loginAlerts?"on":"off"),onClick:()=>I("loginAlerts",!g.loginAlerts),children:M.jsx("div",{className:"toggle-thumb"})})]})]}),M.jsxs("div",{className:"security-group",children:[M.jsx("h4",{className:"group-title",children:"Session Management"}),M.jsxs("div",{className:"form-group",children:[M.jsx("label",{className:"form-label",children:"Session Timeout (minutes)"}),M.jsxs("select",{className:"form-select",value:g.sessionTimeout,onChange:e=>I("sessionTimeout",e.target.value),children:[M.jsx("option",{value:"15",children:"15 minutes"}),M.jsx("option",{value:"30",children:"30 minutes"}),M.jsx("option",{value:"60",children:"1 hour"}),M.jsx("option",{value:"120",children:"2 hours"}),M.jsx("option",{value:"0",children:"Never"})]})]})]}),M.jsxs("div",{className:"security-group",children:[M.jsx("h4",{className:"group-title",children:"Password"}),M.jsxs("div",{className:"password-section",children:[M.jsxs("button",{className:"btn-premium btn-secondary",children:[M.jsx(Pt,{size:16}),"Change Password"]}),M.jsxs("button",{className:"btn-premium btn-ghost",children:[M.jsx(Kt,{size:16}),"Reset All Sessions"]})]})]})]})]});case"preferences":return M.jsxs("div",{className:"settings-section",children:[M.jsx("h3",{className:"section-title",children:"Application Preferences"}),M.jsxs("div",{className:"preferences-groups",children:[M.jsxs("div",{className:"preferences-group",children:[M.jsx("h4",{className:"group-title",children:"Appearance"}),M.jsxs("div",{className:"form-group",children:[M.jsx("label",{className:"form-label",children:"Theme"}),M.jsxs("div",{className:"theme-selector",children:[M.jsxs("button",{className:"theme-option "+("light"===T.theme?"active":""),onClick:()=>R("theme","light"),children:[M.jsx(ln,{size:16}),"Light"]}),M.jsxs("button",{className:"theme-option "+("dark"===T.theme?"active":""),onClick:()=>R("theme","dark"),children:[M.jsx(Ht,{size:16}),"Dark"]})]})]})]}),M.jsxs("div",{className:"preferences-group",children:[M.jsx("h4",{className:"group-title",children:"Localization"}),M.jsxs("div",{className:"form-grid",children:[M.jsxs("div",{className:"form-group",children:[M.jsx("label",{className:"form-label",children:"Language"}),M.jsxs("select",{className:"form-select",value:T.language,onChange:e=>R("language",e.target.value),children:[M.jsx("option",{value:"en",children:"English"}),M.jsx("option",{value:"hi",children:"Hindi"}),M.jsx("option",{value:"mr",children:"Marathi"}),M.jsx("option",{value:"gu",children:"Gujarati"})]})]}),M.jsxs("div",{className:"form-group",children:[M.jsx("label",{className:"form-label",children:"Currency"}),M.jsxs("select",{className:"form-select",value:T.currency,onChange:e=>R("currency",e.target.value),children:[M.jsx("option",{value:"INR",children:"Indian Rupee (₹)"}),M.jsx("option",{value:"USD",children:"US Dollar ($)"}),M.jsx("option",{value:"EUR",children:"Euro (€)"})]})]}),M.jsxs("div",{className:"form-group",children:[M.jsx("label",{className:"form-label",children:"Timezone"}),M.jsxs("select",{className:"form-select",value:T.timezone,onChange:e=>R("timezone",e.target.value),children:[M.jsx("option",{value:"Asia/Kolkata",children:"Asia/Kolkata (IST)"}),M.jsx("option",{value:"America/New_York",children:"America/New_York (EST)"}),M.jsx("option",{value:"Europe/London",children:"Europe/London (GMT)"})]})]}),M.jsxs("div",{className:"form-group",children:[M.jsx("label",{className:"form-label",children:"Date Format"}),M.jsxs("select",{className:"form-select",value:T.dateFormat,onChange:e=>R("dateFormat",e.target.value),children:[M.jsx("option",{value:"DD/MM/YYYY",children:"DD/MM/YYYY"}),M.jsx("option",{value:"MM/DD/YYYY",children:"MM/DD/YYYY"}),M.jsx("option",{value:"YYYY-MM-DD",children:"YYYY-MM-DD"})]})]})]})]}),M.jsxs("div",{className:"preferences-group",children:[M.jsx("h4",{className:"group-title",children:"Default Settings"}),M.jsxs("div",{className:"form-group",children:[M.jsx("label",{className:"form-label",children:"Default Page"}),M.jsxs("select",{className:"form-select",value:T.defaultPage,onChange:e=>R("defaultPage",e.target.value),children:[M.jsx("option",{value:"dashboard",children:"Dashboard"}),M.jsx("option",{value:"portfolio",children:"Portfolio"}),M.jsx("option",{value:"trading",children:"Trading"}),M.jsx("option",{value:"watchlist",children:"Watchlist"})]})]})]})]})]})}})()},r)]})})]})},jp=()=>{var e,t,s,a,r;const[i,o]=n.useState(!1),[l,c]=n.useState(!1),{portfolioData:d}=ci(),{user:u,updateProfile:h,logout:m}=jn(),[p,f]=n.useState({firstName:"",lastName:"",email:"",phone:"",location:"",bio:"",joinDate:"",avatar:null});n.useEffect(()=>{if(u){const e=(u.fullName||u.name||"").split(" "),t=e[0]||u.firstName||"",n=e.slice(1).join(" ")||u.lastName||"";f({firstName:t,lastName:n,email:u.email||"",phone:u.phoneNumber||u.phone||"",location:u.location||u.address||"",bio:u.bio||"Welcome to TradeBro! Start your trading journey today.",joinDate:u.createdAt?new Date(u.createdAt).toISOString().split("T")[0]:(new Date).toISOString().split("T")[0],avatar:u.profilePicture||u.profileImage||u.avatar||null})}},[u]);const g=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(e||0),x=[{title:"Portfolio Value",value:g((null==d?void 0:d.totalValue)||1e4),change:(null==d?void 0:d.totalGainLossPercentage)?`${d.totalGainLossPercentage>=0?"+":""}${d.totalGainLossPercentage.toFixed(2)}%`:"0.00%",icon:ft,color:((null==d?void 0:d.totalGainLoss)||0)>=0?"#10B981":"#EF4444"},{title:"Available Cash",value:g((null==d?void 0:d.availableCash)||1e4),change:"Available",icon:ft,color:"#3B82F6"},{title:"Total Invested",value:g((null==d?void 0:d.totalInvested)||0),change:`${(null==(e=null==d?void 0:d.holdings)?void 0:e.length)||0} holdings`,icon:mn,color:"#F59E0B"},{title:"Total Transactions",value:(null==(t=null==d?void 0:d.transactions)?void 0:t.length)||0,change:"Completed",icon:Ve,color:"#8B5CF6"}],v=[{title:"First Trade",description:"Completed your first trade",earned:((null==(s=null==d?void 0:d.transactions)?void 0:s.length)||0)>0},{title:"Portfolio Builder",description:"Built a diversified portfolio",earned:((null==(a=null==d?void 0:d.holdings)?void 0:a.length)||0)>=3},{title:"Profit Maker",description:"Made positive returns",earned:((null==d?void 0:d.totalGainLoss)||0)>0},{title:"Active Trader",description:"Completed 10+ transactions",earned:((null==(r=null==d?void 0:d.transactions)?void 0:r.length)||0)>=10},{title:"Market Expert",description:"Achieved 80% success rate",earned:!1},{title:"Long Term Investor",description:"Held positions for 6+ months",earned:!1}],b=(e,t)=>{f(n=>({...n,[e]:t}))};return M.jsxs("div",{className:"profile-page",children:[M.jsx(jh,{icon:pn,title:"Profile",subtitle:"Manage your account information and trading preferences",borderColor:"purple",actions:i?[{label:"Cancel",icon:pn,onClick:()=>{if(u){const e=(u.fullName||u.name||"").split(" "),t=e[0]||"",n=e.slice(1).join(" ")||"";f({firstName:t,lastName:n,email:u.email||"",phone:u.phoneNumber||u.phone||"",location:u.location||"",bio:u.bio||"Welcome to TradeBro! Start your trading journey today.",joinDate:u.createdAt?new Date(u.createdAt).toISOString().split("T")[0]:(new Date).toISOString().split("T")[0],avatar:u.profileImage||u.avatar||null})}o(!1)},variant:"secondary"},{label:l?"Saving...":"Save Changes",icon:Xt,onClick:async()=>{c(!0);try{const e={...u,fullName:`${p.firstName} ${p.lastName}`.trim(),firstName:p.firstName,lastName:p.lastName,email:p.email,phoneNumber:p.phone,phone:p.phone,location:p.location,bio:p.bio};h(e),await new Promise(e=>setTimeout(e,1e3)),o(!1),c(!1)}catch(e){c(!1)}},variant:"primary",disabled:l}]:[{label:"Edit Profile",icon:xt,onClick:()=>o(!0),variant:"primary"}]}),M.jsx("div",{className:"profile-container",children:M.jsxs("div",{className:"profile-layout",children:[M.jsxs(y.div,{className:"profile-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},children:[M.jsx("div",{className:"card-header",children:M.jsx("h3",{className:"card-title",children:"Personal Information"})}),M.jsxs("div",{className:"card-content",children:[M.jsxs("div",{className:"profile-avatar-section",children:[M.jsxs("div",{className:"avatar-container",children:[M.jsxs("div",{className:"avatar",children:[p.avatar?M.jsx("img",{src:p.avatar,alt:`${p.firstName} ${p.lastName}`,onError:e=>{e.target.style.display="none",e.target.nextSibling.style.display="flex"}}):null,M.jsx("div",{className:"avatar-placeholder",style:{display:p.avatar?"none":"flex"},children:p.firstName?M.jsxs("span",{className:"avatar-initial",children:[p.firstName.charAt(0).toUpperCase(),p.lastName?p.lastName.charAt(0).toUpperCase():""]}):M.jsx(pn,{size:48})})]}),i&&M.jsx("button",{className:"avatar-edit-btn",children:M.jsx(ot,{size:16})})]}),M.jsxs("div",{className:"profile-basic-info",children:[M.jsxs("h2",{className:"profile-name",children:[p.firstName," ",p.lastName]}),M.jsx("p",{className:"profile-email",children:p.email}),M.jsx("div",{className:"profile-meta",children:M.jsxs("span",{className:"join-date",children:[M.jsx(it,{size:14}),"Joined ",(j=p.joinDate,new Date(j).toLocaleDateString("en-IN",{year:"numeric",month:"long",day:"numeric"}))]})})]})]}),M.jsx("div",{className:"profile-form",children:M.jsxs("div",{className:"form-grid",children:[M.jsxs("div",{className:"form-group",children:[M.jsx("label",{className:"form-label",children:"First Name"}),i?M.jsx("input",{type:"text",className:"form-input",value:p.firstName,onChange:e=>b("firstName",e.target.value)}):M.jsx("div",{className:"form-display",children:p.firstName})]}),M.jsxs("div",{className:"form-group",children:[M.jsx("label",{className:"form-label",children:"Last Name"}),i?M.jsx("input",{type:"text",className:"form-input",value:p.lastName,onChange:e=>b("lastName",e.target.value)}):M.jsx("div",{className:"form-display",children:p.lastName})]}),M.jsxs("div",{className:"form-group",children:[M.jsxs("label",{className:"form-label",children:[M.jsx(Rt,{size:16}),"Email Address"]}),i?M.jsx("input",{type:"email",className:"form-input",value:p.email,onChange:e=>b("email",e.target.value)}):M.jsx("div",{className:"form-display",children:p.email})]}),M.jsxs("div",{className:"form-group",children:[M.jsxs("label",{className:"form-label",children:[M.jsx(Yt,{size:16}),"Phone Number"]}),i?M.jsx("input",{type:"tel",className:"form-input",value:p.phone,onChange:e=>b("phone",e.target.value)}):M.jsx("div",{className:"form-display",children:p.phone})]}),M.jsxs("div",{className:"form-group full-width",children:[M.jsxs("label",{className:"form-label",children:[M.jsx(Mt,{size:16}),"Location"]}),i?M.jsx("input",{type:"text",className:"form-input",value:p.location,onChange:e=>b("location",e.target.value)}):M.jsx("div",{className:"form-display",children:p.location})]}),M.jsxs("div",{className:"form-group full-width",children:[M.jsx("label",{className:"form-label",children:"Bio"}),i?M.jsx("textarea",{className:"form-textarea",rows:"3",value:p.bio,onChange:e=>b("bio",e.target.value)}):M.jsx("div",{className:"form-display",children:p.bio})]})]})})]})]}),M.jsxs(y.div,{className:"stats-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:[M.jsx("div",{className:"card-header",children:M.jsxs("h3",{className:"card-title",children:[M.jsx(mn,{className:"card-icon"}),"Trading Performance"]})}),M.jsx("div",{className:"card-content",children:M.jsx("div",{className:"stats-grid",children:x.map((e,t)=>{const n=e.icon;return M.jsxs("div",{className:"stat-item",children:[M.jsx("div",{className:"stat-icon",style:{color:e.color},children:M.jsx(n,{size:24})}),M.jsxs("div",{className:"stat-content",children:[M.jsx("div",{className:"stat-value",children:e.value}),M.jsx("div",{className:"stat-title",children:e.title}),M.jsx("div",{className:"stat-change",style:{color:e.color},children:e.change})]})]},e.title)})})})]}),M.jsxs(y.div,{className:"achievements-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},children:[M.jsx("div",{className:"card-header",children:M.jsxs("h3",{className:"card-title",children:[M.jsx(tt,{className:"card-icon"}),"Achievements"]})}),M.jsx("div",{className:"card-content",children:M.jsx("div",{className:"achievements-grid",children:v.map((e,t)=>M.jsxs("div",{className:"achievement-item "+(e.earned?"earned":"locked"),children:[M.jsx("div",{className:"achievement-icon",children:M.jsx(tt,{size:20})}),M.jsxs("div",{className:"achievement-content",children:[M.jsx("h4",{className:"achievement-title",children:e.title}),M.jsx("p",{className:"achievement-description",children:e.description})]}),e.earned&&M.jsx("div",{className:"achievement-badge",children:M.jsx(sn,{size:16})})]},e.title))})})]}),M.jsxs(y.div,{className:"actions-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},children:[M.jsx("div",{className:"card-header",children:M.jsx("h3",{className:"card-title",children:"Quick Actions"})}),M.jsx("div",{className:"card-content",children:M.jsxs("div",{className:"action-buttons",children:[M.jsxs("button",{className:"action-btn",children:[M.jsx(tn,{size:20}),M.jsx("span",{children:"Settings"})]}),M.jsxs("button",{className:"action-btn",children:[M.jsx(sn,{size:20}),M.jsx("span",{children:"Security"})]}),M.jsxs("button",{className:"action-btn logout",onClick:m,children:[M.jsx(Dt,{size:20}),M.jsx("span",{children:"Logout"})]})]})})]})]})})]});var j},wp=({message:e,onSuggestionClick:t,onBuyClick:n,onSellClick:s})=>{const{cardType:a,content:r,stockData:i,suggestions:o}=e,l=()=>M.jsx("div",{className:"saytrix-card text-card-content",children:M.jsx("div",{className:"markdown-content",children:M.jsx(Du,{children:r})})}),c=(()=>{switch(a){case"stock-price":case"stock_data":return(()=>{var e,t,a,r,o,c;if(!i)return l();const d=i.change>=0;return M.jsxs("div",{className:"saytrix-card stock-card-content",children:[M.jsxs("div",{className:"card-header",children:[M.jsxs("div",{className:"stock-symbol",children:[M.jsx(nt,{className:"symbol-icon"}),M.jsx("span",{children:i.symbol})]}),M.jsxs("div",{className:"stock-change "+(d?"positive":"negative"),children:[d?M.jsx(mn,{}):M.jsx(hn,{}),(null==(e=i.changesPercentage)?void 0:e.toFixed(2))||"N/A","%"]})]}),M.jsxs("div",{className:"stock-price",children:[M.jsx("span",{className:"currency",children:"₹"}),M.jsx("span",{className:"price",children:(null==(t=i.price)?void 0:t.toFixed(2))||"N/A"})]}),M.jsxs("div",{className:"stock-details",children:[M.jsxs("div",{className:"detail-item",children:[M.jsx("span",{className:"label",children:"Change"}),M.jsxs("span",{className:"value "+(d?"positive":"negative"),children:[d?"+":"",(null==(a=i.change)?void 0:a.toFixed(2))||"N/A"]})]}),M.jsxs("div",{className:"detail-item",children:[M.jsx("span",{className:"label",children:"Volume"}),M.jsx("span",{className:"value",children:(null==(r=i.volume)?void 0:r.toLocaleString())||"N/A"})]}),M.jsxs("div",{className:"detail-item",children:[M.jsx("span",{className:"label",children:"Day High"}),M.jsx("span",{className:"value",children:(null==(o=i.dayHigh)?void 0:o.toFixed(2))||"N/A"})]}),M.jsxs("div",{className:"detail-item",children:[M.jsx("span",{className:"label",children:"Day Low"}),M.jsx("span",{className:"value",children:(null==(c=i.dayLow)?void 0:c.toFixed(2))||"N/A"})]})]}),M.jsxs("div",{className:"card-actions",children:[M.jsxs("button",{className:"action-btn buy-btn",onClick:()=>null==n?void 0:n(i),children:[M.jsx(Ze,{})," Buy"]}),M.jsxs("button",{className:"action-btn sell-btn",onClick:()=>null==s?void 0:s(i),children:[M.jsx(Je,{})," Sell"]})]})]})})();case"welcome":return M.jsxs("div",{className:"saytrix-card welcome-card-content",children:[M.jsx("div",{className:"card-header",children:M.jsxs("div",{className:"company-name",children:[M.jsx(lt,{className:"company-icon"}),M.jsx("span",{children:"Welcome to Saytrix"})]})}),M.jsx("div",{className:"markdown-content",children:M.jsx(Du,{children:r})})]});case"error":return M.jsxs("div",{className:"saytrix-card error-card-content",children:[M.jsx("div",{className:"card-header",children:M.jsxs("div",{className:"company-name",children:[M.jsx(Ge,{className:"company-icon error-icon"}),M.jsx("span",{children:"Error"})]})}),M.jsx("div",{className:"markdown-content",children:M.jsx(Du,{children:r})})]});default:return l()}})();return M.jsxs(y.div,{className:"saytrix-card-wrapper",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[c,o&&0!==o.length?M.jsx("div",{className:"suggestions-container",children:o.map((e,n)=>M.jsx("button",{className:"suggestion-chip",onClick:()=>null==t?void 0:t(e),children:e},n))}):null]})},kp=()=>{const{isListening:e,stopListening:t,startListening:s}=zr(),a=n.useCallback(()=>{if(e)t();else{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)return void alert("Voice input is not supported in this browser.");navigator.mediaDevices.getUserMedia({audio:!0}).then(()=>s()).catch(e=>{alert("Microphone access is required for voice input. Please allow it in your browser settings.")})}},[e,s,t]);return M.jsxs("button",{className:"audio-toggle-btn "+(e?"enabled":"disabled"),onClick:a,title:e?"Turn Off Microphone":"Turn On Microphone","aria-label":e?"Turn Off Microphone":"Turn On Microphone",children:[M.jsx(g,{mode:"wait",children:M.jsx(y.span,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.2},children:e?M.jsx(zt,{}):M.jsx(Bt,{})},e?"mic-on":"mic-off")}),M.jsx("span",{className:"button-text",children:e?"Mic On":"Mic Off"})]})},Np=({user:e,theme:t})=>{const[s]=n.useState(["Show me NIFTY performance","What are today's top gainers?","Tell me about RELIANCE stock","Latest market news","Portfolio analysis"]),{messages:a,inputText:r,isProcessing:i,isSpeaking:l,error:c,messagesEndRef:d,setInputText:u,sendMessage:h,clearChat:m,aiMode:p,setError:f,handleModeChange:x,handleBuyStock:v,handleSellStock:b,handleSuggestionClick:j,handleRecentQuestionClick:w}=(()=>{o();const[e,t]=n.useState([]),[s,a]=n.useState(""),[r,i]=n.useState(!1),[l,c]=n.useState(null),[d,u]=n.useState("high"),[h,m]=n.useState("casual"),[p,f]=n.useState(!1),[g,y]=n.useState(!1),x=n.useRef(null),v=n.useRef(null),b=n.useRef(null);n.useEffect(()=>{const e={id:"welcome_"+Date.now(),type:"assistant",content:"🚀 Hello! I'm Saytrix, your AI-powered stock market assistant. I can help you with:\n\n📊 Real-time stock prices and data\n📈 Market analysis and trends\n🏢 Company information and fundamentals\n⭐ Top gainers and losers\n📰 Latest market news\n🎓 Stock market education\n\nWhat would you like to know about the stock market today?\n\n💡 Currently running in demo mode with sample data for showcase",timestamp:new Date,suggestions:["Show me NIFTY performance","What are today's top gainers?","Tell me about RELIANCE stock","Latest market news"],confidence:"high",cardType:"welcome"};t([e]),j(),w()},[]),n.useEffect(()=>{var e;null==(e=x.current)||e.scrollIntoView({behavior:"smooth"})},[e]);const j=()=>{if("webkitSpeechRecognition"in window||"SpeechRecognition"in window){const e=window.SpeechRecognition||window.webkitSpeechRecognition;v.current=new e,v.current.continuous=!1,v.current.interimResults=!1,v.current.lang="en-US",v.current.onstart=()=>{f(!0),c(null)},v.current.onend=()=>{f(!1)},v.current.onresult=async e=>{const t=e.results[0][0].transcript,n=e.results[0][0].confidence;a(t),u(n>.8?"high":n>.6?"medium":"low"),f(!1),setTimeout(async()=>{t.trim()&&await N(t)},300)},v.current.onerror=e=>{f(!1),c("Voice recognition failed. Please try again.")}}},w=()=>{"speechSynthesis"in window&&(b.current=window.speechSynthesis)},k=n.useCallback(async(e=s,n=!1)=>{if(!e.trim()||r)return;a(""),i(!0),c(null);const o={id:Date.now(),type:"user",content:e,timestamp:new Date,confidence:n?d:"high"};t(e=>[...e,o]);try{const s=await Mr(e,"offline_session_id");if(!s.success)throw new Error("Backend response failed");{const e={id:Date.now()+1,type:"assistant",content:s.data.response,timestamp:new Date,suggestions:s.data.suggestions||[],stockData:s.data.stockData,cardType:E(s.data.response,s.data.stockData)};t(t=>[...t,e]),n&&S(e.content)}}catch(l){c("Server connection failed. Using offline mode with limited functionality."),await new Promise(e=>setTimeout(e,500));const s={id:Date.now()+1,type:"assistant",content:I(e),timestamp:new Date,suggestions:A(e),cardType:L(e)};t(e=>[...e,s]),n&&S(s.content)}finally{i(!1)}},[s,r,d]),N=n.useCallback(async e=>{r||(a(e),u(P(e)),k(e,!0))},[k,r]),S=e=>{if(b.current&&e){y(!0);const t=e.replace(/\*\*(.*?)\*\*/g,"$1").replace(/\*(.*?)\*/g,"$1").replace(/₹/g,"rupees").replace(/[•]/g,"").replace(/\n+/g,". ").substring(0,200),n=new SpeechSynthesisUtterance(t);n.rate=.9,n.pitch=1,n.volume=.8,n.onend=()=>{y(!1)},n.onerror=()=>{y(!1)},b.current.cancel(),b.current.speak(n)}},C=n.useCallback(()=>{if(v.current&&!p)try{v.current.start(),setTimeout(()=>{if(v.current&&p)try{v.current.stop()}catch(e){}},1e4)}catch(e){c("Voice recognition failed. Please try again."),f(!1)}},[p]),T=n.useCallback(()=>{if(v.current&&p){try{v.current.stop()}catch(e){}f(!1)}},[p]),P=e=>e.includes("₹")||e.includes("stock")||e.includes("market")?"high":e.includes("might")||e.includes("possibly")||e.includes("maybe")?"medium":"high",E=(e,t)=>t?"stock-price":e&&(e.toLowerCase().includes("buy")||e.toLowerCase().includes("sell"))?"recommendation":"text",L=e=>{const t=e.toLowerCase();return t.includes("price")||t.includes("quote")||t.includes("₹")?"stock-price":"text"},I=e=>{const t=e.toLowerCase();return t.includes("reliance")||t.includes("ril")?"**Reliance Industries (RELIANCE)**\n\n**Current Price:** ₹2,465 *(demo data)*\n\n**Company Overview:**\nReliance Industries is one of India's largest conglomerates with diversified business interests across multiple sectors.\n\n**Key Business Segments:**\n• Petrochemicals and Oil Refining\n• Telecommunications (Jio)\n• Retail (Reliance Retail)\n• Digital Services\n\n**Investment Highlights:**\n• Strong market position in each segment\n• Consistent dividend history\n• Blue-chip investment with long-term growth potential\n• Strategic focus on digital transformation\n\nWould you like to explore its **fundamentals** or **recent performance** in detail?":"**Welcome to Saytrix!** 🚀\n\nI'm your AI-powered trading assistant here to help you navigate the Indian stock markets with confidence.\n\nNote: Currently displaying demo data for illustration purposes.\n\nReady to start your trading journey? Ask me anything about the markets!"},A=e=>{const t=e.toLowerCase();return t.includes("reliance")||t.includes("ril")?["Tell me about TCS","Show HDFC Bank info","Compare IT stocks"]:["Market overview","Top stocks","Sector analysis","Trading tips"]},O=n.useCallback(()=>{t([]),c(null);const e={id:"welcome_"+Date.now(),type:"assistant",content:"🚀 Hello! I'm Saytrix, your AI-powered stock market assistant. I can help you with...",timestamp:new Date,suggestions:["Show me NIFTY performance","What are today's top gainers?"],confidence:"high",cardType:"welcome"};t([e])},[]),D=n.useCallback(e=>{m(e);const n={id:Date.now(),type:"assistant",content:`🤖 **AI Mode Changed**\n\nSwitched to **${e.charAt(0).toUpperCase()+e.slice(1)} Mode**\n\n${"expert"===e?"🎯 Expert mode provides detailed technical analysis and advanced trading insights.":"😊 Casual mode offers friendly, easy-to-understand market information."}`,timestamp:new Date,cardType:"text",suggestions:"expert"===e?["Technical analysis","Market trends","Risk assessment"]:["Stock basics","Simple explanations","Market overview"]};t(e=>[...e,n])},[]);return{messages:e,inputText:s,isProcessing:r,isListening:p,isSpeaking:g,error:l,confidence:d,aiMode:h,messagesEndRef:x,setInputText:a,setMessages:t,sendMessage:n.useCallback(()=>k(s),[k,s]),startListening:C,stopListening:T,clearChat:O,setAiMode:D,setError:c}})(),{isListening:k,startListening:N,stopListening:S}=zr();n.useEffect(()=>{},[k]);const C=n.useCallback(e=>{"Enter"!==e.key||e.shiftKey?"Escape"===e.key?(u(""),f(null)):e.ctrlKey&&"k"===e.key?(e.preventDefault(),m()):e.ctrlKey&&"m"===e.key&&(e.preventDefault(),k?S():N()):(e.preventDefault(),h())},[h,u,f,m,k,S,N]);return M.jsxs("div",{className:`saytrix-page ${t}`,children:[M.jsxs("div",{className:"saytrix-navbar",children:[M.jsx("div",{className:"navbar-left",children:M.jsxs("div",{className:"tradebro-brand",children:[M.jsx(vn,{className:"brand-icon"}),M.jsx("span",{className:"brand-text",children:"TradeBro"})]})}),M.jsx("div",{className:"navbar-center",children:M.jsxs("div",{className:"ai-mode-toggle",children:[M.jsx("button",{className:"mode-btn "+("casual"===p?"active":""),onClick:()=>x("casual"),children:"Casual"}),M.jsx("button",{className:"mode-btn "+("expert"===p?"active":""),onClick:()=>x("expert"),children:"Expert"})]})}),M.jsxs("div",{className:"navbar-right",children:[M.jsx(kp,{}),M.jsxs("button",{className:"profile-btn",onClick:m,title:"Clear Chat","aria-label":"Clear Chat",children:[M.jsx(Kt,{}),M.jsx("span",{className:"button-text",children:"Clear"})]}),M.jsxs("button",{className:"profile-btn",children:[M.jsx(pn,{}),M.jsx("span",{className:"button-text",children:(null==e?void 0:e.name)||"User"})]})]})]}),M.jsxs("div",{className:"saytrix-container",children:[M.jsx("div",{className:"saytrix-layout",children:M.jsxs("div",{className:"saytrix-main",children:[0===a.length&&M.jsxs(y.div,{className:"recent-questions",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[M.jsx("h3",{children:"Recent Questions"}),M.jsx("div",{className:"question-chips",children:s.map((e,t)=>M.jsx(y.button,{className:"question-chip",onClick:()=>w(e),whileHover:{scale:1.02},whileTap:{scale:.98},children:e},t))})]}),M.jsxs("div",{className:"messages-container",children:[M.jsx(g,{children:a.map(e=>M.jsxs(y.div,{className:`message-wrapper ${e.type}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:[M.jsx("div",{className:"message-avatar",children:"user"===e.type?M.jsx(pn,{size:20}):M.jsx(mt,{size:20})}),M.jsx("div",{className:"message-content",children:M.jsx(wp,{message:e,onSuggestionClick:j,onBuyClick:v,onSellClick:b})})]},e.id))}),i&&M.jsxs(y.div,{className:"message-wrapper assistant processing",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[M.jsx("div",{className:"message-avatar",children:M.jsx(mt,{size:20})}),M.jsx("div",{className:"message-content",children:M.jsxs("div",{className:"typing-indicator",children:[M.jsx("span",{}),M.jsx("span",{}),M.jsx("span",{})]})})]}),M.jsx("div",{ref:d})]}),M.jsx(g,{children:c&&M.jsxs(y.div,{className:"error-banner",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},children:[M.jsx(Ge,{size:16}),M.jsx("span",{children:c}),M.jsx("button",{onClick:()=>f(null),"aria-label":"Dismiss error",children:M.jsx(xn,{size:16})})]})})]})}),M.jsxs(y.div,{className:"floating-input",initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},children:[M.jsxs("div",{className:"input-container",children:[M.jsx("button",{className:"voice-btn",onClick:k?S:N,title:k?"Stop listening":"Start voice input","aria-label":k?"Stop voice input":"Start voice input",children:M.jsx(g,{mode:"wait",children:M.jsx(y.span,{initial:{scale:1},animate:{scale:[1,1.2,1]},exit:{scale:1},transition:{duration:k?1:.2,repeat:k?1/0:0},children:k?M.jsx(zt,{size:20}):M.jsx(Bt,{size:20})},k?"mic-listening":"mic-off")})}),M.jsx("input",{type:"text",className:"message-input",placeholder:"Ask Saytrix about stocks, portfolio, or market trends... (Ctrl+M for voice, Ctrl+K to clear)",value:r,onChange:e=>u(e.target.value),onKeyDown:C,autoFocus:!0}),M.jsx("button",{className:"send-btn",onClick:h,disabled:!r.trim()||i,title:"Send message","aria-label":"Send message",children:i?M.jsx(Kt,{size:20,className:"animate-spin"}):M.jsx(en,{size:20})})]}),M.jsx(g,{children:l&&M.jsxs(y.div,{className:"voice-indicator speaking",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},transition:{duration:.2},children:[M.jsx(gn,{size:16}),M.jsx("span",{children:"Saytrix is speaking..."})]})})]})]})]})},Sp=()=>{const{symbol:e}=d(),t=o(),{portfolioData:s,buyStock:a,isLoading:r}=ci(),{user:i}=jn(),[l,c]=n.useState(null),[u,h]=n.useState(!0),[m,p]=n.useState(null),[f,g]=n.useState(1),[x,v]=n.useState(!1),[b,j]=n.useState(0),[w,k]=n.useState(!1),[N,S]=n.useState(!1),[C,T]=n.useState(!1);n.useEffect(()=>{e&&P()},[e]);const P=async()=>{try{h(!0),p(null);const t={RELIANCE:{name:"Reliance Industries Ltd",price:2847.65,sector:"Energy",industry:"Oil & Gas",description:"Reliance Industries Limited is an Indian multinational conglomerate, headquartered in Mumbai. It has diverse businesses including energy, petrochemicals, natural gas, retail, telecommunications, mass media, and textiles."},TCS:{name:"Tata Consultancy Services",price:4125.8,sector:"Information Technology",industry:"IT Services",description:"Tata Consultancy Services is an Indian multinational information technology services and consulting company headquartered in Mumbai. It is a part of the Tata Group and operates in 149 locations across 46 countries."},HDFCBANK:{name:"HDFC Bank Limited",price:1687.9,sector:"Financial Services",industry:"Banking",description:"HDFC Bank Limited is an Indian banking and financial services company headquartered in Mumbai. It is one of the largest private sector banks in India by assets and market capitalization."},INFY:{name:"Infosys Limited",price:1842.35,sector:"Information Technology",industry:"IT Services",description:"Infosys Limited is an Indian multinational information technology company that provides business consulting, information technology and outsourcing services."},HINDUNILVR:{name:"Hindustan Unilever Ltd",price:2456.7,sector:"FMCG",industry:"Consumer Goods",description:"Hindustan Unilever Limited is an Indian consumer goods company headquartered in Mumbai. It is a subsidiary of the British company Unilever."},ICICIBANK:{name:"ICICI Bank Limited",price:1287.45,sector:"Financial Services",industry:"Banking",description:"ICICI Bank Limited is an Indian multinational bank and financial services company headquartered in Mumbai with its registered office in Vadodara."}}[e.toUpperCase()]||{name:`${e.toUpperCase()} Corporation`,price:1e3+2e3*Math.random(),sector:"Technology",industry:"Software",description:`${e.toUpperCase()} Corporation is a leading company in its sector with strong fundamentals and growth prospects.`},n=t.price,s=(Math.random()-.5)*n*.05,a=s/n*100,r={symbol:e.toUpperCase(),name:t.name,price:n,change:s,changePercent:a,volume:Math.floor(2e6*Math.random())+5e5,marketCap:Math.floor(1e9*n+5e11*Math.random()),pe:Math.floor(25*Math.random())+15,high52w:1.3*n,low52w:.7*n,dayHigh:1.02*n,dayLow:.98*n,avgVolume:Math.floor(1e6*Math.random())+3e5,beta:.8+.8*Math.random(),eps:.05*n,dividend:3*Math.random()+1,sector:t.sector,industry:t.industry,description:t.description,lastUpdated:(new Date).toISOString()};c(r)}catch(t){p("Failed to fetch stock data")}finally{h(!1)}},E=e=>{if(!A||w)return;e.preventDefault(),e.stopPropagation();const t=e.currentTarget.closest(".slide-to-buy");if(!t)return;const n=t.getBoundingClientRect(),s=n.width-52-8;let a=!0;const r=e=>{if(!a)return;e.preventDefault();const t=(e.touches?e.touches[0].clientX:e.clientX)-n.left-26,r=Math.min(Math.max(t/s*100,0),100);j(r)},i=async()=>{a=!1,b>80?(j(100),await L()):j(0),document.removeEventListener("mousemove",r,{passive:!1}),document.removeEventListener("mouseup",i),document.removeEventListener("touchmove",r,{passive:!1}),document.removeEventListener("touchend",i)};document.addEventListener("mousemove",r,{passive:!1}),document.addEventListener("mouseup",i),document.addEventListener("touchmove",r,{passive:!1}),document.addEventListener("touchend",i)},L=async()=>{if(l&&f&&!w){k(!0);try{const e=await a(l.symbol,f,l.price,l);e.success?(qe.success(`Successfully bought ${f} shares of ${l.symbol}!`),j(100),setTimeout(()=>{t("/portfolio",{state:{purchasedStock:{symbol:l.symbol,name:l.name,quantity:f,price:l.price,totalCost:f*l.price},showPurchaseSuccess:!0}})},1500)):(qe.error(e.message||"Failed to buy stock"),j(0))}catch(e){qe.error("Failed to buy stock"),j(0)}finally{k(!1)}}};if(u)return M.jsxs("div",{className:"stock-detail-loading",children:[M.jsx("div",{className:"loading-spinner"}),M.jsx("p",{children:"Loading stock details..."})]});if(m||!l)return M.jsxs("div",{className:"stock-detail-error",children:[M.jsx(Ye,{size:48}),M.jsx("h2",{children:"Error Loading Stock"}),M.jsx("p",{children:m||"Stock not found"}),M.jsx("button",{onClick:()=>t(-1),className:"back-btn",children:"Go Back"})]});const I=f*l.price,A=s.availableCash>=I,O=l.change>=0;return M.jsxs("div",{className:"stock-detail-page",children:[M.jsxs("div",{className:"stock-detail-header",children:[M.jsx("button",{onClick:()=>t(-1),className:"back-button",children:M.jsx(Ke,{})}),M.jsxs("div",{className:"header-info",children:[M.jsx("h1",{children:l.symbol}),M.jsx("p",{children:l.name})]}),M.jsxs("div",{className:"header-actions",children:[M.jsx("button",{onClick:async()=>{T(!0),await P(),T(!1),qe.success("Stock data refreshed")},className:"refresh-btn "+(C?"spinning":""),disabled:C,children:M.jsx(Kt,{})}),M.jsx(Ch,{stockData:l,size:"small",variant:"icon",showText:!1})]})]}),M.jsxs("div",{className:"price-section",children:[M.jsxs("div",{className:"current-price",children:[M.jsx("span",{className:"price-value",children:wh(l.price)}),M.jsxs("div",{className:"price-change "+(O?"positive":"negative"),children:[O?M.jsx(mn,{}):M.jsx(hn,{}),M.jsxs("span",{children:[wh(l.change)," (",l.changePercent.toFixed(2),"%)"]})]})]}),M.jsxs("div",{className:"price-range",children:[M.jsxs("div",{className:"range-item",children:[M.jsx("span",{className:"label",children:"Day Range"}),M.jsxs("span",{className:"value",children:[wh(l.dayLow)," - ",wh(l.dayHigh)]})]}),M.jsxs("div",{className:"range-item",children:[M.jsx("span",{className:"label",children:"52W Range"}),M.jsxs("span",{className:"value",children:[wh(l.low52w)," - ",wh(l.high52w)]})]})]})]}),M.jsxs("div",{className:"key-stats",children:[M.jsxs("div",{className:"stat-item",children:[M.jsx(Ve,{className:"stat-icon"}),M.jsxs("div",{className:"stat-info",children:[M.jsx("span",{className:"stat-label",children:"Volume"}),M.jsx("span",{className:"stat-value",children:kh(l.volume)})]})]}),M.jsxs("div",{className:"stat-item",children:[M.jsx(Gt,{className:"stat-icon"}),M.jsxs("div",{className:"stat-info",children:[M.jsx("span",{className:"stat-label",children:"Market Cap"}),M.jsx("span",{className:"stat-value",children:wh(l.marketCap)})]})]}),M.jsxs("div",{className:"stat-item",children:[M.jsx(nt,{className:"stat-icon"}),M.jsxs("div",{className:"stat-info",children:[M.jsx("span",{className:"stat-label",children:"P/E Ratio"}),M.jsx("span",{className:"stat-value",children:l.pe})]})]}),M.jsxs("div",{className:"stat-item",children:[M.jsx(ft,{className:"stat-icon"}),M.jsxs("div",{className:"stat-info",children:[M.jsx("span",{className:"stat-label",children:"EPS"}),M.jsx("span",{className:"stat-value",children:wh(l.eps)})]})]})]}),M.jsxs("div",{className:"trading-section",children:[M.jsxs("h3",{children:["Buy ",l.symbol]}),M.jsxs("div",{className:"quantity-section",children:[M.jsx("label",{children:"Quantity"}),M.jsxs("div",{className:"quantity-controls",children:[M.jsx("button",{onClick:()=>g(Math.max(1,f-1)),className:"quantity-btn",children:"-"}),M.jsx("input",{type:"number",value:f,onChange:e=>g(Math.max(1,parseInt(e.target.value)||1)),className:"quantity-input",min:"1"}),M.jsx("button",{onClick:()=>g(f+1),className:"quantity-btn",children:"+"})]})]}),M.jsxs("div",{className:"order-summary",children:[M.jsxs("div",{className:"summary-row",children:[M.jsx("span",{children:"Price per share"}),M.jsx("span",{children:wh(l.price)})]}),M.jsxs("div",{className:"summary-row",children:[M.jsx("span",{children:"Quantity"}),M.jsxs("span",{children:[f," shares"]})]}),M.jsxs("div",{className:"summary-row total",children:[M.jsx("span",{children:"Total Cost"}),M.jsx("span",{children:wh(I)})]}),M.jsxs("div",{className:"summary-row",children:[M.jsx("span",{children:"Available Cash"}),M.jsx("span",{className:A?"positive":"negative",children:wh(s.availableCash)})]})]}),M.jsxs("div",{className:"slide-to-buy-container",children:[!A&&M.jsxs("div",{className:"insufficient-funds-warning",children:[M.jsx(Ye,{}),M.jsx("span",{children:"Insufficient funds"})]}),M.jsxs("div",{className:`slide-to-buy ${A?"":"disabled"} ${w?"processing":""}`,children:[M.jsx("div",{className:"slide-track",style:{background:`linear-gradient(to right, #10B981 ${b}%, #E5E7EB ${b}%)`},children:M.jsx(y.div,{className:"slide-button",style:{left:`${Math.min(b,85)}%`},onMouseDown:A?E:void 0,onTouchStart:A?E:void 0,whileHover:A?{scale:1.05}:{},whileTap:A?{scale:.95}:{},animate:{left:`${Math.min(b,85)}%`},transition:{type:0===b?"spring":"tween",stiffness:300,damping:30,duration:0===b?.5:.1},children:w?M.jsx("div",{className:"loading-spinner small"}):b>80?M.jsx(lt,{}):M.jsx(Xe,{})})}),M.jsx("span",{className:"slide-text",children:w?"Processing...":b>80?"Release to Buy!":"Slide to Buy"})]})]})]}),M.jsxs("div",{className:"company-info",children:[M.jsxs("h3",{children:["About ",l.name]}),M.jsxs("div",{className:"company-details",children:[M.jsxs("div",{className:"detail-row",children:[M.jsx("span",{className:"label",children:"Sector"}),M.jsx("span",{className:"value",children:l.sector})]}),M.jsxs("div",{className:"detail-row",children:[M.jsx("span",{className:"label",children:"Industry"}),M.jsx("span",{className:"value",children:l.industry})]}),M.jsxs("div",{className:"detail-row",children:[M.jsx("span",{className:"label",children:"Beta"}),M.jsx("span",{className:"value",children:l.beta})]}),M.jsxs("div",{className:"detail-row",children:[M.jsx("span",{className:"label",children:"Dividend Yield"}),M.jsxs("span",{className:"value",children:[l.dividend,"%"]})]})]}),M.jsx("p",{className:"company-description",children:l.description})]})]})},Cp=()=>M.jsx("div",{className:"legal-page",children:M.jsxs("div",{className:"legal-container",children:[M.jsxs(y.div,{className:"legal-header",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[M.jsxs(c,{to:"/login",className:"back-link",children:[M.jsx(Ke,{size:20}),"Back to Login"]}),M.jsxs("div",{className:"legal-title-section",children:[M.jsx("div",{className:"legal-icon",children:M.jsx(sn,{size:32})}),M.jsx("h1",{className:"legal-title",children:"Terms of Service"}),M.jsx("p",{className:"legal-subtitle",children:"Please read these terms carefully before using TradeBro"}),M.jsxs("div",{className:"last-updated",children:["Last updated: ","December 15, 2024"]})]})]}),M.jsxs(y.div,{className:"legal-content",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:[M.jsxs("div",{className:"legal-notice",children:[M.jsx(Ge,{size:20}),M.jsxs("div",{children:[M.jsx("strong",{children:"Important Notice:"})," TradeBro is a virtual trading platform for educational purposes only. No real money or actual securities are involved in any transactions."]})]}),M.jsxs("section",{className:"legal-section",children:[M.jsx("h2",{children:"1. Acceptance of Terms"}),M.jsx("p",{children:'By accessing and using TradeBro ("the Platform", "our Service"), you accept and agree to be bound by the terms and provision of this agreement. If you do not agree to abide by the above, please do not use this service.'}),M.jsx("p",{children:'These Terms of Service ("Terms") govern your use of our virtual stock trading platform operated by TradeBro ("us", "we", or "our").'})]}),M.jsxs("section",{className:"legal-section",children:[M.jsx("h2",{children:"2. Description of Service"}),M.jsx("p",{children:"TradeBro provides:"}),M.jsxs("ul",{children:[M.jsx("li",{children:"Virtual stock trading simulation using real market data"}),M.jsx("li",{children:"Educational tools and resources for learning about stock trading"}),M.jsx("li",{children:"Portfolio management and tracking features"}),M.jsx("li",{children:"AI-powered trading assistant (Saytrix)"}),M.jsx("li",{children:"Market news and analysis"}),M.jsx("li",{children:"Social features for connecting with other virtual traders"})]}),M.jsxs("div",{className:"highlight-box",children:[M.jsx(lt,{size:16}),M.jsx("span",{children:"All trading on TradeBro is virtual and for educational purposes only."})]})]}),M.jsxs("section",{className:"legal-section",children:[M.jsx("h2",{children:"3. User Accounts and Registration"}),M.jsx("h3",{children:"3.1 Account Creation"}),M.jsx("p",{children:"To use certain features of our Service, you must register for an account. You may register using your email address or through third-party authentication providers like Google."}),M.jsx("h3",{children:"3.2 Account Security"}),M.jsx("p",{children:"You are responsible for:"}),M.jsxs("ul",{children:[M.jsx("li",{children:"Maintaining the confidentiality of your account credentials"}),M.jsx("li",{children:"All activities that occur under your account"}),M.jsx("li",{children:"Notifying us immediately of any unauthorized use"}),M.jsx("li",{children:"Ensuring your account information is accurate and up-to-date"})]}),M.jsx("h3",{children:"3.3 Account Termination"}),M.jsx("p",{children:"We reserve the right to terminate or suspend your account at any time for violations of these Terms or for any other reason at our sole discretion."})]}),M.jsxs("section",{className:"legal-section",children:[M.jsx("h2",{children:"4. Virtual Trading Rules"}),M.jsx("h3",{children:"4.1 Virtual Currency"}),M.jsx("p",{children:"All users start with virtual currency (₹10,000 by default) for trading purposes. This virtual currency has no real-world value and cannot be exchanged for real money."}),M.jsx("h3",{children:"4.2 Market Data"}),M.jsx("p",{children:"We use real market data from various sources including Financial Modeling Prep (FMP) API. While we strive for accuracy, we do not guarantee the completeness or accuracy of market data."}),M.jsx("h3",{children:"4.3 Trading Limitations"}),M.jsx("p",{children:"Virtual trading is subject to:"}),M.jsxs("ul",{children:[M.jsx("li",{children:"Market hours and trading sessions"}),M.jsx("li",{children:"Available virtual funds in your account"}),M.jsx("li",{children:"Platform maintenance and technical limitations"}),M.jsx("li",{children:"Fair usage policies to prevent system abuse"})]})]}),M.jsxs("section",{className:"legal-section",children:[M.jsx("h2",{children:"5. Prohibited Uses"}),M.jsx("p",{children:"You may not use our Service:"}),M.jsxs("ul",{children:[M.jsx("li",{children:"For any unlawful purpose or to solicit others to unlawful acts"}),M.jsx("li",{children:"To violate any international, federal, provincial, or state regulations, rules, laws, or local ordinances"}),M.jsx("li",{children:"To infringe upon or violate our intellectual property rights or the intellectual property rights of others"}),M.jsx("li",{children:"To harass, abuse, insult, harm, defame, slander, disparage, intimidate, or discriminate"}),M.jsx("li",{children:"To submit false or misleading information"}),M.jsx("li",{children:"To upload or transmit viruses or any other type of malicious code"}),M.jsx("li",{children:"To spam, phish, pharm, pretext, spider, crawl, or scrape"}),M.jsx("li",{children:"For any obscene or immoral purpose"}),M.jsx("li",{children:"To interfere with or circumvent the security features of the Service"})]})]}),M.jsxs("section",{className:"legal-section",children:[M.jsx("h2",{children:"6. Intellectual Property Rights"}),M.jsx("p",{children:"The Service and its original content, features, and functionality are and will remain the exclusive property of TradeBro and its licensors. The Service is protected by copyright, trademark, and other laws."}),M.jsx("p",{children:"Our trademarks and trade dress may not be used in connection with any product or service without our prior written consent."})]}),M.jsxs("section",{className:"legal-section",children:[M.jsx("h2",{children:"7. Privacy Policy"}),M.jsx("p",{children:"Your privacy is important to us. Please review our Privacy Policy, which also governs your use of the Service, to understand our practices."}),M.jsx(c,{to:"/privacy",className:"inline-link",children:"View Privacy Policy →"})]}),M.jsxs("section",{className:"legal-section",children:[M.jsx("h2",{children:"8. Disclaimers and Limitations"}),M.jsx("h3",{children:"8.1 Educational Purpose"}),M.jsxs("div",{className:"warning-box",children:[M.jsx(Ge,{size:16}),M.jsxs("div",{children:[M.jsx("strong",{children:"Important:"})," TradeBro is for educational purposes only. Virtual trading results do not guarantee real trading success. Past performance does not indicate future results."]})]}),M.jsx("h3",{children:"8.2 No Financial Advice"}),M.jsx("p",{children:"The information provided on TradeBro is not intended as financial advice. We do not provide investment recommendations or advice. Always consult with qualified financial professionals before making real investment decisions."}),M.jsx("h3",{children:"8.3 Service Availability"}),M.jsx("p",{children:"We do not guarantee that the Service will be available at all times. We may experience hardware, software, or other problems or need to perform maintenance related to the Service."})]}),M.jsxs("section",{className:"legal-section",children:[M.jsx("h2",{children:"9. Limitation of Liability"}),M.jsx("p",{children:"In no event shall TradeBro, nor its directors, employees, partners, agents, suppliers, or affiliates, be liable for any indirect, incidental, special, consequential, or punitive damages, including without limitation, loss of profits, data, use, goodwill, or other intangible losses, resulting from your use of the Service."})]}),M.jsxs("section",{className:"legal-section",children:[M.jsx("h2",{children:"10. Changes to Terms"}),M.jsx("p",{children:"We reserve the right, at our sole discretion, to modify or replace these Terms at any time. If a revision is material, we will try to provide at least 30 days notice prior to any new terms taking effect."}),M.jsx("p",{children:"What constitutes a material change will be determined at our sole discretion. By continuing to access or use our Service after those revisions become effective, you agree to be bound by the revised terms."})]}),M.jsxs("section",{className:"legal-section",children:[M.jsx("h2",{children:"11. Contact Information"}),M.jsx("p",{children:"If you have any questions about these Terms of Service, please contact us:"}),M.jsxs("div",{className:"contact-info",children:[M.jsxs("p",{children:[M.jsx("strong",{children:"Email:"})," legal@tradebro.com"]}),M.jsxs("p",{children:[M.jsx("strong",{children:"Address:"})," TradeBro Legal Department",M.jsx("br",{}),"123 Trading Street",M.jsx("br",{}),"Financial District, Mumbai 400001",M.jsx("br",{}),"India"]})]})]}),M.jsxs("div",{className:"legal-footer",children:[M.jsx("p",{children:"By using TradeBro, you acknowledge that you have read, understood, and agree to be bound by these Terms of Service."}),M.jsxs("div",{className:"legal-actions",children:[M.jsx(c,{to:"/privacy",className:"btn btn-outline",children:"Privacy Policy"}),M.jsx(c,{to:"/login",className:"btn btn-primary",children:"Back to Login"})]})]})]})]})}),Tp=()=>M.jsx("div",{className:"legal-page",children:M.jsxs("div",{className:"legal-container",children:[M.jsxs(y.div,{className:"legal-header",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[M.jsxs(c,{to:"/login",className:"back-link",children:[M.jsx(Ke,{size:20}),"Back to Login"]}),M.jsxs("div",{className:"legal-title-section",children:[M.jsx("div",{className:"legal-icon",children:M.jsx(At,{size:32})}),M.jsx("h1",{className:"legal-title",children:"Privacy Policy"}),M.jsx("p",{className:"legal-subtitle",children:"How we collect, use, and protect your personal information"}),M.jsxs("div",{className:"last-updated",children:["Last updated: ","JULY 22, 2025"]})]})]}),M.jsxs(y.div,{className:"legal-content",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:[M.jsxs("div",{className:"privacy-commitment",children:[M.jsx(sn,{size:20}),M.jsxs("div",{children:[M.jsx("strong",{children:"Our Commitment:"})," We are committed to protecting your privacy and ensuring the security of your personal information. This Privacy Policy explains how we collect, use, and safeguard your data."]})]}),M.jsxs("section",{className:"legal-section",children:[M.jsxs("h2",{children:[M.jsx(pt,{size:20})," 1. Information We Collect"]}),M.jsx("h3",{children:"1.1 Personal Information"}),M.jsx("p",{children:"When you register for TradeBro, we may collect:"}),M.jsxs("ul",{children:[M.jsxs("li",{children:[M.jsx("strong",{children:"Account Information:"})," Name, email address, username"]}),M.jsxs("li",{children:[M.jsx("strong",{children:"Profile Information:"})," Profile picture, bio, trading preferences"]}),M.jsxs("li",{children:[M.jsx("strong",{children:"Authentication Data:"})," Password (encrypted), OAuth tokens from third-party providers"]}),M.jsxs("li",{children:[M.jsx("strong",{children:"Contact Information:"})," Email address for communications"]})]}),M.jsx("h3",{children:"1.2 Trading and Usage Data"}),M.jsx("p",{children:"We collect information about your use of our platform:"}),M.jsxs("ul",{children:[M.jsxs("li",{children:[M.jsx("strong",{children:"Virtual Trading Activity:"})," Buy/sell orders, portfolio performance, trading history"]}),M.jsxs("li",{children:[M.jsx("strong",{children:"Platform Usage:"})," Pages visited, features used, time spent on platform"]}),M.jsxs("li",{children:[M.jsx("strong",{children:"Device Information:"})," IP address, browser type, device type, operating system"]}),M.jsxs("li",{children:[M.jsx("strong",{children:"Preferences:"})," Theme settings, notification preferences, dashboard customizations"]})]}),M.jsx("h3",{children:"1.3 Automatically Collected Information"}),M.jsxs("ul",{children:[M.jsxs("li",{children:[M.jsx("strong",{children:"Cookies and Tracking:"})," Session cookies, preference cookies, analytics cookies"]}),M.jsxs("li",{children:[M.jsx("strong",{children:"Log Data:"})," Server logs, error logs, access logs"]}),M.jsxs("li",{children:[M.jsx("strong",{children:"Analytics Data:"})," User behavior, feature usage, performance metrics"]})]})]}),M.jsxs("section",{className:"legal-section",children:[M.jsxs("h2",{children:[M.jsx(bt,{size:20})," 2. How We Use Your Information"]}),M.jsx("h3",{children:"2.1 Service Provision"}),M.jsxs("ul",{children:[M.jsx("li",{children:"Create and manage your account"}),M.jsx("li",{children:"Process virtual trading transactions"}),M.jsx("li",{children:"Provide personalized trading experience"}),M.jsx("li",{children:"Display portfolio and performance data"}),M.jsx("li",{children:"Enable social features and leaderboards"})]}),M.jsx("h3",{children:"2.2 Communication"}),M.jsxs("ul",{children:[M.jsx("li",{children:"Send account-related notifications"}),M.jsx("li",{children:"Provide customer support"}),M.jsx("li",{children:"Send educational content and market updates"}),M.jsx("li",{children:"Notify about platform updates and new features"})]}),M.jsx("h3",{children:"2.3 Platform Improvement"}),M.jsxs("ul",{children:[M.jsx("li",{children:"Analyze usage patterns to improve our service"}),M.jsx("li",{children:"Develop new features and functionality"}),M.jsx("li",{children:"Ensure platform security and prevent fraud"}),M.jsx("li",{children:"Conduct research and analytics"})]}),M.jsx("h3",{children:"2.4 Legal and Safety"}),M.jsxs("ul",{children:[M.jsx("li",{children:"Comply with legal obligations"}),M.jsx("li",{children:"Protect against fraud and abuse"}),M.jsx("li",{children:"Enforce our Terms of Service"}),M.jsx("li",{children:"Respond to legal requests"})]})]}),M.jsxs("section",{className:"legal-section",children:[M.jsxs("h2",{children:[M.jsx(fn,{size:20})," 3. Information Sharing and Disclosure"]}),M.jsx("h3",{children:"3.1 We Do Not Sell Your Data"}),M.jsxs("div",{className:"highlight-box",children:[M.jsx(sn,{size:16}),M.jsx("span",{children:"We do not sell, rent, or trade your personal information to third parties for marketing purposes."})]}),M.jsx("h3",{children:"3.2 Limited Sharing"}),M.jsx("p",{children:"We may share your information only in these circumstances:"}),M.jsxs("ul",{children:[M.jsxs("li",{children:[M.jsx("strong",{children:"Service Providers:"})," Third-party services that help us operate our platform (hosting, analytics, email)"]}),M.jsxs("li",{children:[M.jsx("strong",{children:"Legal Requirements:"})," When required by law, court order, or government request"]}),M.jsxs("li",{children:[M.jsx("strong",{children:"Safety and Security:"})," To protect the rights, property, or safety of TradeBro, our users, or others"]}),M.jsxs("li",{children:[M.jsx("strong",{children:"Business Transfers:"})," In connection with a merger, acquisition, or sale of assets"]})]}),M.jsx("h3",{children:"3.3 Public Information"}),M.jsx("p",{children:"Some information may be publicly visible:"}),M.jsxs("ul",{children:[M.jsx("li",{children:"Username and profile picture (if you choose to make them public)"}),M.jsx("li",{children:"Leaderboard rankings (anonymized or with consent)"}),M.jsx("li",{children:"Public posts or comments in community features"})]})]}),M.jsxs("section",{className:"legal-section",children:[M.jsx("h2",{children:"4. Data Security"}),M.jsx("h3",{children:"4.1 Security Measures"}),M.jsx("p",{children:"We implement industry-standard security measures:"}),M.jsxs("ul",{children:[M.jsxs("li",{children:[M.jsx("strong",{children:"Encryption:"})," Data encrypted in transit and at rest"]}),M.jsxs("li",{children:[M.jsx("strong",{children:"Access Controls:"})," Limited access to personal data on need-to-know basis"]}),M.jsxs("li",{children:[M.jsx("strong",{children:"Secure Infrastructure:"})," Secure servers and databases"]}),M.jsxs("li",{children:[M.jsx("strong",{children:"Regular Audits:"})," Security assessments and vulnerability testing"]}),M.jsxs("li",{children:[M.jsx("strong",{children:"Authentication:"})," Secure login with optional two-factor authentication"]})]}),M.jsx("h3",{children:"4.2 Data Retention"}),M.jsx("p",{children:"We retain your information:"}),M.jsxs("ul",{children:[M.jsx("li",{children:"As long as your account is active"}),M.jsx("li",{children:"As necessary to provide our services"}),M.jsx("li",{children:"To comply with legal obligations"}),M.jsx("li",{children:"To resolve disputes and enforce agreements"})]})]}),M.jsxs("section",{className:"legal-section",children:[M.jsx("h2",{children:"5. Your Privacy Rights"}),M.jsx("h3",{children:"5.1 Access and Control"}),M.jsx("p",{children:"You have the right to:"}),M.jsxs("ul",{children:[M.jsxs("li",{children:[M.jsx("strong",{children:"Access:"})," Request a copy of your personal data"]}),M.jsxs("li",{children:[M.jsx("strong",{children:"Update:"})," Correct or update your information"]}),M.jsxs("li",{children:[M.jsx("strong",{children:"Delete:"})," Request deletion of your account and data"]}),M.jsxs("li",{children:[M.jsx("strong",{children:"Export:"})," Download your trading data and history"]}),M.jsxs("li",{children:[M.jsx("strong",{children:"Opt-out:"})," Unsubscribe from marketing communications"]})]}),M.jsx("h3",{children:"5.2 Cookie Preferences"}),M.jsx("p",{children:"You can control cookies through:"}),M.jsxs("ul",{children:[M.jsx("li",{children:"Browser settings to block or delete cookies"}),M.jsx("li",{children:"Our cookie preference center"}),M.jsx("li",{children:"Opting out of analytics tracking"})]}),M.jsx("h3",{children:"5.3 Account Settings"}),M.jsx("p",{children:"Manage your privacy through your account settings:"}),M.jsxs("ul",{children:[M.jsx("li",{children:"Profile visibility settings"}),M.jsx("li",{children:"Notification preferences"}),M.jsx("li",{children:"Data sharing preferences"}),M.jsx("li",{children:"Communication settings"})]})]}),M.jsxs("section",{className:"legal-section",children:[M.jsx("h2",{children:"6. Third-Party Services"}),M.jsx("h3",{children:"6.1 OAuth Providers"}),M.jsx("p",{children:"When you sign in with Google or other OAuth providers:"}),M.jsxs("ul",{children:[M.jsx("li",{children:"We receive limited profile information (name, email, profile picture)"}),M.jsx("li",{children:"We do not access your other accounts or data"}),M.jsx("li",{children:"You can revoke access at any time through the provider's settings"})]}),M.jsx("h3",{children:"6.2 Market Data Providers"}),M.jsx("p",{children:"We use third-party APIs for market data:"}),M.jsxs("ul",{children:[M.jsx("li",{children:"Financial Modeling Prep (FMP) for stock prices and data"}),M.jsx("li",{children:"These providers may have their own privacy policies"}),M.jsx("li",{children:"We do not share your personal information with data providers"})]}),M.jsx("h3",{children:"6.3 Analytics Services"}),M.jsx("p",{children:"We may use analytics services to improve our platform:"}),M.jsxs("ul",{children:[M.jsx("li",{children:"Google Analytics (anonymized data)"}),M.jsx("li",{children:"Error tracking services"}),M.jsx("li",{children:"Performance monitoring tools"})]})]}),M.jsxs("section",{className:"legal-section",children:[M.jsx("h2",{children:"7. Children's Privacy"}),M.jsx("p",{children:"TradeBro is not intended for children under 13 years of age. We do not knowingly collect personal information from children under 13. If you are a parent or guardian and believe your child has provided us with personal information, please contact us."}),M.jsx("p",{children:"Users between 13-18 years old should have parental consent before using our service."})]}),M.jsxs("section",{className:"legal-section",children:[M.jsx("h2",{children:"8. International Data Transfers"}),M.jsx("p",{children:"Your information may be transferred to and processed in countries other than your own. We ensure appropriate safeguards are in place to protect your personal information in accordance with this Privacy Policy."})]}),M.jsxs("section",{className:"legal-section",children:[M.jsx("h2",{children:"9. Changes to Privacy Policy"}),M.jsx("p",{children:"We may update this Privacy Policy from time to time. We will notify you of any material changes by:"}),M.jsxs("ul",{children:[M.jsx("li",{children:"Posting the new Privacy Policy on this page"}),M.jsx("li",{children:"Sending an email notification"}),M.jsx("li",{children:"Providing notice through our platform"})]}),M.jsx("p",{children:"Your continued use of our service after any changes constitutes acceptance of the new Privacy Policy."})]}),M.jsxs("section",{className:"legal-section",children:[M.jsx("h2",{children:"10. Contact Us"}),M.jsx("p",{children:"If you have questions about this Privacy Policy or our privacy practices, please contact us:"}),M.jsxs("div",{className:"contact-info",children:[M.jsxs("p",{children:[M.jsx("strong",{children:"Privacy Officer:"})," privacy@tradebro.com"]}),M.jsxs("p",{children:[M.jsx("strong",{children:"Data Protection:"})," dpo@tradebro.com"]}),M.jsxs("p",{children:[M.jsx("strong",{children:"General Support:"})," support@tradebro.com"]}),M.jsxs("p",{children:[M.jsx("strong",{children:"Address:"})," TradeBro Privacy Department",M.jsx("br",{}),"123 Trading Street",M.jsx("br",{}),"Financial District, Mumbai 400001",M.jsx("br",{}),"India"]})]})]}),M.jsxs("div",{className:"legal-footer",children:[M.jsx("p",{children:"We are committed to protecting your privacy and will continue to update our practices to ensure your data remains secure."}),M.jsxs("div",{className:"legal-actions",children:[M.jsx(c,{to:"/terms",className:"btn btn-outline",children:"Terms of Service"}),M.jsx(c,{to:"/login",className:"btn btn-primary",children:"Back to Login"})]})]})]})]})}),Pp=()=>{const[e,t]=n.useState(""),[s,a]=n.useState(!1),[r,i]=n.useState(!1),[o,l]=n.useState("");return r?M.jsx("div",{className:"auth-page",children:M.jsxs(y.div,{className:"auth-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[M.jsxs("div",{className:"auth-header",children:[M.jsxs("div",{className:"auth-logo",children:[M.jsx("div",{className:"auth-logo-icon",children:"📈"}),M.jsx("h1",{className:"auth-logo-text",children:"TradeBro"})]}),M.jsxs("div",{children:[M.jsx("h2",{className:"auth-title",children:"Check Your Email"}),M.jsxs("p",{className:"auth-subtitle",children:["We've sent password reset instructions to ",e]})]})]}),M.jsxs("div",{className:"success-message",children:[M.jsx(lt,{size:48}),M.jsx("p",{children:"If an account with that email exists, you'll receive a password reset link shortly."})]}),M.jsx("div",{className:"auth-footer",children:M.jsxs("p",{children:["Remember your password?"," ",M.jsx(c,{to:"/login",children:"Back to Sign In"})]})})]})}):M.jsx("div",{className:"auth-page",children:M.jsxs(y.div,{className:"auth-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[M.jsxs("div",{className:"auth-header",children:[M.jsxs("div",{className:"auth-logo",children:[M.jsx("div",{className:"auth-logo-icon",children:"📈"}),M.jsx("h1",{className:"auth-logo-text",children:"TradeBro"})]}),M.jsxs("div",{children:[M.jsx("h2",{className:"auth-title",children:"Forgot Password?"}),M.jsx("p",{className:"auth-subtitle",children:"Enter your email address and we'll send you a link to reset your password"})]})]}),M.jsxs("form",{onSubmit:async t=>{if(t.preventDefault(),e.trim())if(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)){a(!0),l("");try{const t="https://s89-satya-capstone-tradebro.onrender.com",n=await fetch(`${t}/api/auth/forgot-password`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})}),s=await n.json();n.ok&&s.success?(i(!0),qe.success("Password reset instructions sent to your email")):(l(s.message||"Failed to send reset email"),qe.error(s.message||"Failed to send reset email"))}catch(n){l("Network error. Please try again."),qe.error("Network error. Please check your connection.")}finally{a(!1)}}else l("Please enter a valid email address");else l("Email is required")},className:"auth-form",children:[o&&M.jsxs("div",{className:"error-message",children:[M.jsx(Ye,{size:16}),M.jsx("span",{children:o})]}),M.jsxs("div",{className:"form-group",children:[M.jsxs("label",{className:"form-label",children:[M.jsx(Rt,{size:16}),"Email Address"]}),M.jsx("input",{type:"email",value:e,onChange:e=>{t(e.target.value),o&&l("")},className:"form-input "+(o?"form-input-error":""),placeholder:"Enter your email",disabled:s,autoComplete:"email",required:!0})]}),M.jsx("button",{type:"submit",className:"auth-submit",disabled:s,children:s?M.jsx("div",{className:"loading-spinner"}):M.jsxs(M.Fragment,{children:["Send Reset Link",M.jsx(Xe,{size:16})]})})]}),M.jsx("div",{className:"auth-footer",children:M.jsxs("p",{children:["Remember your password?"," ",M.jsx(c,{to:"/login",children:"Back to Sign In"})]})})]})})},Ep=()=>M.jsx("div",{className:"page",children:M.jsx("div",{className:"page-container",children:M.jsxs(y.div,{className:"not-found-container",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},style:{textAlign:"center",padding:"var(--space-16) var(--space-4)",minHeight:"60vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[M.jsx("div",{style:{fontSize:"6rem",marginBottom:"var(--space-6)"},children:"📈"}),M.jsx("h1",{style:{fontSize:"var(--font-size-4xl)",marginBottom:"var(--space-4)",color:"var(--text-primary)"},children:"404 - Page Not Found"}),M.jsx("p",{style:{fontSize:"var(--font-size-lg)",color:"var(--text-secondary)",marginBottom:"var(--space-8)",maxWidth:"500px"},children:"Oops! The page you're looking for doesn't exist. It might have been moved, deleted, or you entered the wrong URL."}),M.jsxs("div",{style:{display:"flex",gap:"var(--space-4)",flexWrap:"wrap",justifyContent:"center"},children:[M.jsxs(c,{to:"/",className:"btn btn-primary btn-lg",children:[M.jsx(Ct,{size:20}),"Go Home"]}),M.jsxs("button",{onClick:()=>window.history.back(),className:"btn btn-secondary btn-lg",children:[M.jsx(Ke,{size:20}),"Go Back"]})]})]})})}),Lp=({children:e,isAuthenticated:t,loading:n,user:s})=>{const a=l();return n?M.jsxs("div",{className:"loading-container",children:[M.jsx("div",{className:"loading-spinner lg"}),M.jsx("p",{className:"loading-text",children:"Verifying authentication..."})]}):t?M.jsx(di,{user:s,children:e}):(localStorage.setItem("redirectAfterLogin",a.pathname),M.jsx(m,{to:"/login",replace:!0}))},Ip=({children:e,isAuthenticated:t})=>{if(t){const e=localStorage.getItem("redirectAfterLogin");return localStorage.removeItem("redirectAfterLogin"),M.jsx(m,{to:e||"/dashboard",replace:!0})}return e},Ap={initial:{opacity:0,y:20},in:{opacity:1,y:0},out:{opacity:0,y:-20}},Op={type:"tween",ease:"anticipate",duration:.4},Dp=({isAuthenticated:e=!1,user:t=null,loading:n=!1,onLogin:s,onSignup:a,onLogout:r,onUpdateProfile:i,theme:o,toggleTheme:c})=>{const d=l();return M.jsx(g,{mode:"wait",children:M.jsx(y.div,{initial:"initial",animate:"in",exit:"out",variants:Ap,transition:Op,children:M.jsxs(u,{children:[M.jsx(h,{path:"/",element:e?M.jsx(m,{to:"/dashboard"}):M.jsx(Uu,{})}),M.jsx(h,{path:"/login",element:M.jsx(Ip,{isAuthenticated:e,children:M.jsx(Wu,{onLogin:s})})}),M.jsx(h,{path:"/signup",element:M.jsx(Ip,{isAuthenticated:e,children:M.jsx(qu,{onSignup:a})})}),M.jsx(h,{path:"/forgot-password",element:M.jsx(Ip,{isAuthenticated:e,children:M.jsx(Pp,{})})}),M.jsx(h,{path:"/terms",element:M.jsx(Lp,{isAuthenticated:e,loading:n,user:t,children:M.jsx(Cp,{})})}),M.jsx(h,{path:"/privacy",element:M.jsx(Lp,{isAuthenticated:e,loading:n,user:t,children:M.jsx(Tp,{})})}),M.jsx(h,{path:"/dashboard",element:M.jsx(Lp,{isAuthenticated:e,loading:n,user:t,children:M.jsx(Eh,{user:t,theme:o,onLogin:s})})}),M.jsx(h,{path:"/portfolio",element:M.jsx(Lp,{isAuthenticated:e,loading:n,user:t,children:M.jsx(Ih,{user:t,theme:o})})}),M.jsx(h,{path:"/trading",element:M.jsx(Lp,{isAuthenticated:e,loading:n,user:t,children:M.jsx(Oh,{user:t,theme:o})})}),M.jsx(h,{path:"/charts",element:M.jsx(Lp,{isAuthenticated:e,loading:n,user:t,children:M.jsx(pp,{user:t,theme:o})})}),M.jsx(h,{path:"/watchlist",element:M.jsx(Lp,{isAuthenticated:e,loading:n,user:t,children:M.jsx(fp,{user:t,theme:o})})}),M.jsx(h,{path:"/orders",element:M.jsx(Lp,{isAuthenticated:e,loading:n,user:t,children:M.jsx(gp,{user:t,theme:o})})}),M.jsx(h,{path:"/history",element:M.jsx(Lp,{isAuthenticated:e,loading:n,user:t,children:M.jsx(yp,{user:t,theme:o})})}),M.jsx(h,{path:"/news",element:M.jsx(Lp,{isAuthenticated:e,loading:n,user:t,children:M.jsx(xp,{user:t,theme:o})})}),M.jsx(h,{path:"/notifications",element:M.jsx(Lp,{isAuthenticated:e,loading:n,user:t,children:M.jsx(vp,{user:t,theme:o})})}),M.jsx(h,{path:"/saytrix",element:M.jsx(Lp,{isAuthenticated:e,loading:n,user:t,children:M.jsx(Np,{user:t,theme:o})})}),M.jsx(h,{path:"/settings",element:M.jsx(Lp,{isAuthenticated:e,loading:n,user:t,children:M.jsx(bp,{user:t,theme:o,toggleTheme:c,onLogout:r})})}),M.jsx(h,{path:"/profile",element:M.jsx(Lp,{isAuthenticated:e,loading:n,user:t,children:M.jsx(jp,{})})}),M.jsx(h,{path:"/stock/:symbol",element:M.jsx(Lp,{isAuthenticated:e,loading:n,user:t,children:M.jsx(Sp,{user:t,theme:o})})}),M.jsx(h,{path:"/home",element:M.jsx(m,{to:"/",replace:!0})}),M.jsx(h,{path:"/app",element:M.jsx(m,{to:"/dashboard",replace:!0})}),M.jsx(h,{path:"/trade",element:M.jsx(m,{to:"/trading",replace:!0})}),M.jsx(h,{path:"/stocks",element:M.jsx(m,{to:"/charts",replace:!0})}),M.jsx(h,{path:"/chat",element:M.jsx(m,{to:"/saytrix",replace:!0})}),M.jsx(h,{path:"/ai",element:M.jsx(m,{to:"/saytrix",replace:!0})}),M.jsx(h,{path:"*",element:M.jsx(Ep,{})})]})},d.pathname)})};class Rp extends a.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){}render(){return this.state.hasError?M.jsx("div",{className:"error-boundary",children:M.jsxs("div",{className:"error-content",children:[M.jsx("h2",{children:"Something went wrong"}),M.jsx("p",{children:"We're sorry, but something unexpected happened."}),M.jsx("button",{onClick:()=>window.location.reload(),className:"retry-button",children:"Reload Page"})]})}):this.props.children}}const Mp=n.lazy(()=>function(e,t){let n=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const e=document.querySelector("meta[property=csp-nonce]"),s=(null==e?void 0:e.nonce)||(null==e?void 0:e.getAttribute("nonce"));n=Promise.allSettled(t.map(e=>{if((e=function(e){return"/"+e}(e))in fe)return;fe[e]=!0;const t=e.endsWith(".css"),n=t?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${n}`))return;const a=document.createElement("link");return a.rel=t?"stylesheet":"modulepreload",t||(a.as="script"),a.crossOrigin="",a.href=e,s&&a.setAttribute("nonce",s),document.head.appendChild(a),t?new Promise((t,n)=>{a.addEventListener("load",t),a.addEventListener("error",()=>n(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function s(e){const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e}return n.then(t=>{for(const e of t||[])"rejected"===e.status&&s(e.reason);return e().catch(s)})}(()=>import("./PerformanceMonitor-VL0ypXUC.js"),__vite__mapDeps([0,1,2,3,4])));function _p(){const[e,t]=n.useState(null),[s,a]=n.useState(!1),[r,i]=n.useState("light"),[c,d]=n.useState(!0),[u,h]=n.useState(!1),{user:m,isAuthenticated:p,loading:f,login:g,logout:y}=jn();n.useEffect(()=>{t(m),a(p),d(f)},[m,p,f]),Li("App");const{isGlobalSearchOpen:x,handleGlobalSearch:v,closeGlobalSearch:b}=(()=>{const[e,t]=n.useState(!1),s=o(),a=n.useCallback(e=>{if((e.ctrlKey||e.metaKey)&&"k"===e.key){e.preventDefault(),e.stopPropagation();const n=document.activeElement,s=n&&("INPUT"===n.tagName||"TEXTAREA"===n.tagName||"true"===n.contentEditable),a=n&&n.classList.contains("search-input");if(s&&!a)return;t(!0)}},[]),r=n.useCallback(n=>{"Escape"===n.key&&e&&t(!1)},[e]);n.useEffect(()=>(document.addEventListener("keydown",a),document.addEventListener("keydown",r),()=>{document.removeEventListener("keydown",a),document.removeEventListener("keydown",r)}),[a,r]);const i=n.useCallback((e,n="stocks")=>{if(e.trim()){switch(n){case"stocks":default:s(`/trading?search=${encodeURIComponent(e)}`);break;case"news":s(`/news?search=${encodeURIComponent(e)}`);break;case"orders":s(`/orders?search=${encodeURIComponent(e)}`)}t(!1)}},[s]),l=n.useCallback(()=>{t(!1)},[]);return{isGlobalSearchOpen:e,setIsGlobalSearchOpen:t,handleGlobalSearch:i,closeGlobalSearch:l}})(),{orderModalState:j,closeOrderModal:w}=Ti(),[k,N]=n.useState({isOpen:!1,orderData:null,stockData:null,orderSummary:null,profitLossEstimate:null,onConfirm:null,isProcessing:!1}),S=n.useCallback(e=>{N({isOpen:!0,...e,isProcessing:!1})},[]),C=n.useCallback(()=>{N(e=>e.isOpen?{...e,isOpen:!1,isProcessing:!1}:e)},[]),T=n.useRef(null),P=n.useCallback(async()=>{const e=T.current;if(e){N(e=>({...e,isProcessing:!0}));try{await e(),setTimeout(()=>{C()},2e3)}catch(t){N(e=>({...e,isProcessing:!1}))}}},[C]);n.useEffect(()=>{T.current=k.onConfirm},[k.onConfirm]);const E=l(),L=o();n.useEffect(()=>{if(f)return;const e=new URLSearchParams(E.search),t=e.get("token"),n=e.get("user"),s=e.get("error");if(s)return qe.error(`Login failed: ${s.replace(/_/g," ")}`),void L(E.pathname,{replace:!0});if(t&&n)try{const e=JSON.parse(decodeURIComponent(n));g(e,t),qe.success("Welcome back!"),Ii.initialize(),L("/dashboard",{replace:!0})}catch(a){y(),qe.error("Failed to process login data."),L("/login",{replace:!0})}else!p&&localStorage.getItem("token");c&&d(!1)},[E.search,L,g,y,f,p,c]),n.useEffect(()=>{const e=localStorage.getItem("theme")||"light";i(e),document.documentElement.setAttribute("data-theme",e)},[]);const I=n.useCallback(()=>{const e="light"===r?"dark":"light";i(e),localStorage.setItem("theme",e),document.documentElement.setAttribute("data-theme",e)},[r]),A=n.useCallback((e,t)=>{g(e,t),qe.success("Welcome back!")},[g]),O=n.useCallback(()=>{y(),qe.info("Logged out successfully"),L("/login")},[y,L]),D=n.useCallback((e,t)=>{g(e,t),qe.success("Account created successfully!")},[g]);return c?M.jsxs("div",{className:"loading-container",children:[M.jsx("div",{className:"loading-spinner lg"}),M.jsx("p",{className:"loading-text",children:"Loading TradeBro..."})]}):M.jsx(Rp,{children:M.jsxs("div",{className:"app",children:[M.jsx(Fp,{isAuthenticated:s,user:e,loading:c,theme:r,onLogin:A,onLogout:O,onSignup:D,onUpdateProfile:e=>{const t=localStorage.getItem("token");g(e,t),qe.success("Profile updated successfully!")},toggleTheme:I,isGlobalSearchOpen:x,handleGlobalSearch:v,closeGlobalSearch:b,sidebarCollapsed:u,setSidebarCollapsed:h,orderModalState:j,closeOrderModal:w,handleShowConfirmation:S,confirmationModalState:k,handleCloseConfirmation:C,handleConfirmOrder:P}),M.jsx(Re,{position:"top-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:r,toastStyle:{background:"dark"===r?"var(--bg-secondary)":"#FFFFFF",color:"dark"===r?"#F9FAFB":"#111827"}}),M.jsx(n.Suspense,{fallback:null,children:M.jsx(Mp,{enabled:!1})})]})})}console.log=()=>{},console.warn=()=>{};const Fp=n.memo(function({isAuthenticated:e,user:t,loading:n,theme:s,onLogin:a,onLogout:r,onSignup:i,onUpdateProfile:o,toggleTheme:c,isGlobalSearchOpen:d,handleGlobalSearch:u,closeGlobalSearch:h,sidebarCollapsed:m,setSidebarCollapsed:p,orderModalState:f,closeOrderModal:g,handleShowConfirmation:y,confirmationModalState:x,handleCloseConfirmation:v,handleConfirmOrder:b}){const j=l(),w="/"===j.pathname,k="/login"===j.pathname||"/signup"===j.pathname||"/forgot-password"===j.pathname;return M.jsxs(M.Fragment,{children:[M.jsx(Jr,{isCollapsed:m,setIsCollapsed:p}),M.jsx("main",{className:`${w||k?"main-content-full":"main-content"} ${!e||w||k?"":m?"sidebar-collapsed":"with-sidebar"}`,children:M.jsx(Dp,{isAuthenticated:e,user:t,loading:n,onLogin:a,onSignup:i,onLogout:r,onUpdateProfile:o,theme:s,toggleTheme:c})}),M.jsx(Qr,{isAuthenticated:e,user:t}),M.jsx(ai,{isOpen:d,onClose:h,onSearch:u}),M.jsx(Re,{position:"top-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"dark"===s?"dark":"light",toastStyle:{background:"dark"===s?"var(--bg-secondary)":"var(--bg-elevated)",color:"var(--text-primary)",border:"1px solid var(--border-primary)",borderRadius:"var(--radius-lg)",boxShadow:"var(--shadow-lg)"}}),!w&&!k&&M.jsxs(M.Fragment,{children:[M.jsx(ri,{}),M.jsx(ii,{})]}),M.jsx(Ni,{isOpen:f.isOpen,onClose:g,stockData:f.stockData,initialOrderType:f.orderType,onOrderPlaced:g,onShowConfirmation:y}),M.jsx(Si,{isOpen:x.isOpen,onClose:v,onConfirm:b,orderData:x.orderData,stockData:x.stockData,orderSummary:x.orderSummary,profitLossEstimate:x.profitLossEstimate,isProcessing:x.isProcessing})]})});function Bp(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var zp=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")(),Up=()=>Math.random().toString(36).substring(7).split("").join("."),$p={INIT:`@@redux/INIT${Up()}`,REPLACE:`@@redux/REPLACE${Up()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Up()}`};function Hp(e){if("object"!=typeof e||null===e)return!1;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||null===Object.getPrototypeOf(e)}function Wp(e,t,n){if("function"!=typeof e)throw new Error(Bp(2));if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error(Bp(0));if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error(Bp(1));return n(Wp)(e,t)}let s=e,a=t,r=new Map,i=r,o=0,l=!1;function c(){i===r&&(i=new Map,r.forEach((e,t)=>{i.set(t,e)}))}function d(){if(l)throw new Error(Bp(3));return a}function u(e){if("function"!=typeof e)throw new Error(Bp(4));if(l)throw new Error(Bp(5));let t=!0;c();const n=o++;return i.set(n,e),function(){if(t){if(l)throw new Error(Bp(6));t=!1,c(),i.delete(n),r=null}}}function h(e){if(!Hp(e))throw new Error(Bp(7));if(void 0===e.type)throw new Error(Bp(8));if("string"!=typeof e.type)throw new Error(Bp(17));if(l)throw new Error(Bp(9));try{l=!0,a=s(a,e)}finally{l=!1}return(r=i).forEach(e=>{e()}),e}h({type:$p.INIT});return{dispatch:h,subscribe:u,getState:d,replaceReducer:function(e){if("function"!=typeof e)throw new Error(Bp(10));s=e,h({type:$p.REPLACE})},[zp]:function(){const e=u;return{subscribe(t){if("object"!=typeof t||null===t)throw new Error(Bp(11));function n(){const e=t;e.next&&e.next(d())}n();return{unsubscribe:e(n)}},[zp](){return this}}}}}function qp(e){const t=Object.keys(e),n={};for(let i=0;i<t.length;i++){const s=t[i];"function"==typeof e[s]&&(n[s]=e[s])}const s=Object.keys(n);let a;try{!function(e){Object.keys(e).forEach(t=>{const n=e[t];if(void 0===n(void 0,{type:$p.INIT}))throw new Error(Bp(12));if(void 0===n(void 0,{type:$p.PROBE_UNKNOWN_ACTION()}))throw new Error(Bp(13))})}(n)}catch(r){a=r}return function(e={},t){if(a)throw a;let r=!1;const i={};for(let a=0;a<s.length;a++){const o=s[a],l=n[o],c=e[o],d=l(c,t);if(void 0===d)throw t&&t.type,new Error(Bp(14));i[o]=d,r=r||d!==c}return r=r||s.length!==Object.keys(e).length,r?i:e}}function Vp(...e){return 0===e.length?e=>e:1===e.length?e[0]:e.reduce((e,t)=>(...n)=>e(t(...n)))}var Yp=Symbol.for("immer-nothing"),Gp=Symbol.for("immer-draftable"),Jp=Symbol.for("immer-state");function Qp(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Kp=Object.getPrototypeOf;function Xp(e){return!!e&&!!e[Jp]}function Zp(e){var t;return!!e&&(tf(e)||Array.isArray(e)||!!e[Gp]||!!(null==(t=e.constructor)?void 0:t[Gp])||of(e)||lf(e))}var ef=Object.prototype.constructor.toString();function tf(e){if(!e||"object"!=typeof e)return!1;const t=Kp(e);if(null===t)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===ef}function nf(e,t){0===sf(e)?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,s)=>t(s,n,e))}function sf(e){const t=e[Jp];return t?t.type_:Array.isArray(e)?1:of(e)?2:lf(e)?3:0}function af(e,t){return 2===sf(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function rf(e,t,n){const s=sf(e);2===s?e.set(t,n):3===s?e.add(n):e[t]=n}function of(e){return e instanceof Map}function lf(e){return e instanceof Set}function cf(e){return e.copy_||e.base_}function df(e,t){if(of(e))return new Map(e);if(lf(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=tf(e);if(!0===t||"class_only"===t&&!n){const t=Object.getOwnPropertyDescriptors(e);delete t[Jp];let n=Reflect.ownKeys(t);for(let s=0;s<n.length;s++){const a=n[s],r=t[a];!1===r.writable&&(r.writable=!0,r.configurable=!0),(r.get||r.set)&&(t[a]={configurable:!0,writable:!0,enumerable:r.enumerable,value:e[a]})}return Object.create(Kp(e),t)}{const t=Kp(e);if(null!==t&&n)return{...e};const s=Object.create(t);return Object.assign(s,e)}}function uf(e,t=!1){return mf(e)||Xp(e)||!Zp(e)||(sf(e)>1&&(e.set=e.add=e.clear=e.delete=hf),Object.freeze(e),t&&Object.entries(e).forEach(([e,t])=>uf(t,!0))),e}function hf(){Qp(2)}function mf(e){return Object.isFrozen(e)}var pf,ff={};function gf(e){const t=ff[e];return t||Qp(0),t}function yf(){return pf}function xf(e,t){t&&(gf("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function vf(e){bf(e),e.drafts_.forEach(wf),e.drafts_=null}function bf(e){e===pf&&(pf=e.parent_)}function jf(e){return pf={drafts_:[],parent_:pf,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function wf(e){const t=e[Jp];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function kf(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return void 0!==e&&e!==n?(n[Jp].modified_&&(vf(t),Qp(4)),Zp(e)&&(e=Nf(t,e),t.parent_||Cf(t,e)),t.patches_&&gf("Patches").generateReplacementPatches_(n[Jp].base_,e,t.patches_,t.inversePatches_)):e=Nf(t,n,[]),vf(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Yp?e:void 0}function Nf(e,t,n){if(mf(t))return t;const s=t[Jp];if(!s)return nf(t,(a,r)=>Sf(e,s,t,a,r,n)),t;if(s.scope_!==e)return t;if(!s.modified_)return Cf(e,s.base_,!0),s.base_;if(!s.finalized_){s.finalized_=!0,s.scope_.unfinalizedDrafts_--;const t=s.copy_;let a=t,r=!1;3===s.type_&&(a=new Set(t),t.clear(),r=!0),nf(a,(a,i)=>Sf(e,s,t,a,i,n,r)),Cf(e,t,!1),n&&e.patches_&&gf("Patches").generatePatches_(s,n,e.patches_,e.inversePatches_)}return s.copy_}function Sf(e,t,n,s,a,r,i){if(Xp(a)){const i=Nf(e,a,r&&t&&3!==t.type_&&!af(t.assigned_,s)?r.concat(s):void 0);if(rf(n,s,i),!Xp(i))return;e.canAutoFreeze_=!1}else i&&n.add(a);if(Zp(a)&&!mf(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Nf(e,a),t&&t.scope_.parent_||"symbol"==typeof s||!Object.prototype.propertyIsEnumerable.call(n,s)||Cf(e,a)}}function Cf(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&uf(t,n)}var Tf={get(e,t){if(t===Jp)return e;const n=cf(e);if(!af(n,t))return function(e,t,n){var s;const a=Lf(t,n);return a?"value"in a?a.value:null==(s=a.get)?void 0:s.call(e.draft_):void 0}(e,n,t);const s=n[t];return e.finalized_||!Zp(s)?s:s===Ef(e.base_,t)?(Af(e),e.copy_[t]=Of(s,e)):s},has:(e,t)=>t in cf(e),ownKeys:e=>Reflect.ownKeys(cf(e)),set(e,t,n){const s=Lf(cf(e),t);if(null==s?void 0:s.set)return s.set.call(e.draft_,n),!0;if(!e.modified_){const s=Ef(cf(e),t),i=null==s?void 0:s[Jp];if(i&&i.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(((a=n)===(r=s)?0!==a||1/a==1/r:a!=a&&r!=r)&&(void 0!==n||af(e.base_,t)))return!0;Af(e),If(e)}var a,r;return e.copy_[t]===n&&(void 0!==n||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==Ef(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,Af(e),If(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const n=cf(e),s=Reflect.getOwnPropertyDescriptor(n,t);return s?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:s.enumerable,value:n[t]}:s},defineProperty(){Qp(11)},getPrototypeOf:e=>Kp(e.base_),setPrototypeOf(){Qp(12)}},Pf={};function Ef(e,t){const n=e[Jp];return(n?cf(n):e)[t]}function Lf(e,t){if(!(t in e))return;let n=Kp(e);for(;n;){const e=Object.getOwnPropertyDescriptor(n,t);if(e)return e;n=Kp(n)}}function If(e){e.modified_||(e.modified_=!0,e.parent_&&If(e.parent_))}function Af(e){e.copy_||(e.copy_=df(e.base_,e.scope_.immer_.useStrictShallowCopy_))}nf(Tf,(e,t)=>{Pf[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),Pf.deleteProperty=function(e,t){return Pf.set.call(this,e,t,void 0)},Pf.set=function(e,t,n){return Tf.set.call(this,e[0],t,n,e[0])};function Of(e,t){const n=of(e)?gf("MapSet").proxyMap_(e,t):lf(e)?gf("MapSet").proxySet_(e,t):function(e,t){const n=Array.isArray(e),s={type_:n?1:0,scope_:t?t.scope_:yf(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=s,r=Tf;n&&(a=[s],r=Pf);const{revoke:i,proxy:o}=Proxy.revocable(a,r);return s.draft_=o,s.revoke_=i,o}(e,t);return(t?t.scope_:yf()).drafts_.push(n),n}function Df(e){if(!Zp(e)||mf(e))return e;const t=e[Jp];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=df(e,t.scope_.immer_.useStrictShallowCopy_)}else n=df(e,!0);return nf(n,(e,t)=>{rf(n,e,Df(t))}),t&&(t.finalized_=!1),n}var Rf=new class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,n)=>{if("function"==typeof e&&"function"!=typeof t){const n=t;t=e;const s=this;return function(e=n,...a){return s.produce(e,e=>t.call(this,e,...a))}}let s;if("function"!=typeof t&&Qp(6),void 0!==n&&"function"!=typeof n&&Qp(7),Zp(e)){const a=jf(this),r=Of(e,void 0);let i=!0;try{s=t(r),i=!1}finally{i?vf(a):bf(a)}return xf(a,n),kf(s,a)}if(!e||"object"!=typeof e){if(s=t(e),void 0===s&&(s=e),s===Yp&&(s=void 0),this.autoFreeze_&&uf(s,!0),n){const t=[],a=[];gf("Patches").generateReplacementPatches_(e,s,t,a),n(t,a)}return s}Qp(1)},this.produceWithPatches=(e,t)=>{if("function"==typeof e)return(t,...n)=>this.produceWithPatches(t,t=>e(t,...n));let n,s;return[this.produce(e,t,(e,t)=>{n=e,s=t}),n,s]},"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),"boolean"==typeof(null==e?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Zp(e)||Qp(8),Xp(e)&&(e=function(e){Xp(e)||Qp(10);return Df(e)}(e));const t=jf(this),n=Of(e,void 0);return n[Jp].isManual_=!0,bf(t),n}finishDraft(e,t){const n=e&&e[Jp];n&&n.isManual_||Qp(9);const{scope_:s}=n;return xf(s,t),kf(void 0,s)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const s=t[n];if(0===s.path.length&&"replace"===s.op){e=s.value;break}}n>-1&&(t=t.slice(n+1));const s=gf("Patches").applyPatches_;return Xp(e)?s(e,t):this.produce(e,e=>s(e,t))}},Mf=Rf.produce;function _f(e){return({dispatch:t,getState:n})=>s=>a=>"function"==typeof a?a(t,n,e):s(a)}Rf.produceWithPatches.bind(Rf),Rf.setAutoFreeze.bind(Rf),Rf.setUseStrictShallowCopy.bind(Rf),Rf.applyPatches.bind(Rf),Rf.createDraft.bind(Rf),Rf.finishDraft.bind(Rf);var Ff=_f(),Bf=_f,zf="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"==typeof arguments[0]?Vp:Vp.apply(null,arguments)};function Uf(e,t){function n(...n){if(t){let s=t(...n);if(!s)throw new Error(lg(0));return{type:e,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:e,payload:n[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=t=>function(e){return Hp(e)&&"type"in e&&"string"==typeof e.type}(t)&&t.type===e,n}var $f=class e extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,e.prototype)}static get[Symbol.species](){return e}concat(...e){return super.concat.apply(this,e)}prepend(...t){return 1===t.length&&Array.isArray(t[0])?new e(...t[0].concat(this)):new e(...t.concat(this))}};function Hf(e){return Zp(e)?Mf(e,()=>{}):e}function Wf(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}var qf=e=>t=>{setTimeout(t,e)},Vf=e=>function(t){const{autoBatch:n=!0}=t??{};let s=new $f(e);return n&&s.push(((e={type:"raf"})=>t=>(...n)=>{const s=t(...n);let a=!0,r=!1,i=!1;const o=new Set,l="tick"===e.type?queueMicrotask:"raf"===e.type?"undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:qf(10):"callback"===e.type?e.queueNotification:qf(e.timeout),c=()=>{i=!1,r&&(r=!1,o.forEach(e=>e()))};return Object.assign({},s,{subscribe(e){const t=s.subscribe(()=>a&&e());return o.add(e),()=>{t(),o.delete(e)}},dispatch(e){var t;try{return a=!(null==(t=null==e?void 0:e.meta)?void 0:t.RTK_autoBatch),r=!a,r&&(i||(i=!0,l(c))),s.dispatch(e)}finally{a=!0}}})})("object"==typeof n?n:void 0)),s};function Yf(e){const t={},n=[];let s;const a={addCase(e,n){const s="string"==typeof e?e:e.type;if(!s)throw new Error(lg(28));if(s in t)throw new Error(lg(29));return t[s]=n,a},addMatcher:(e,t)=>(n.push({matcher:e,reducer:t}),a),addDefaultCase:e=>(s=e,a)};return e(a),[t,n,s]}function Gf(...e){return t=>e.some(e=>((e,t)=>{return(n=e)&&"function"==typeof n.match?e.match(t):e(t);var n})(e,t))}var Jf=["name","message","stack","code"],Qf=class{constructor(e,n){t(this,"_type"),this.payload=e,this.meta=n}},Kf=class{constructor(e,n){t(this,"_type"),this.payload=e,this.meta=n}},Xf=e=>{if("object"==typeof e&&null!==e){const t={};for(const n of Jf)"string"==typeof e[n]&&(t[n]=e[n]);return t}return{message:String(e)}},Zf="External signal was aborted",eg=(()=>{function e(e,t,n){const s=Uf(e+"/fulfilled",(e,t,n,s)=>({payload:e,meta:{...s||{},arg:n,requestId:t,requestStatus:"fulfilled"}})),a=Uf(e+"/pending",(e,t,n)=>({payload:void 0,meta:{...n||{},arg:t,requestId:e,requestStatus:"pending"}})),r=Uf(e+"/rejected",(e,t,s,a,r)=>({payload:a,error:(n&&n.serializeError||Xf)(e||"Rejected"),meta:{...r||{},arg:s,requestId:t,rejectedWithValue:!!a,requestStatus:"rejected",aborted:"AbortError"===(null==e?void 0:e.name),condition:"ConditionError"===(null==e?void 0:e.name)}}));return Object.assign(function(e,{signal:i}={}){return(o,l,c)=>{const d=(null==n?void 0:n.idGenerator)?n.idGenerator(e):((e=21)=>{let t="",n=e;for(;n--;)t+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return t})(),u=new AbortController;let h,m;function p(e){m=e,u.abort()}i&&(i.aborted?p(Zf):i.addEventListener("abort",()=>p(Zf),{once:!0}));const f=async function(){var i,f;let g;try{let r=null==(i=null==n?void 0:n.condition)?void 0:i.call(n,e,{getState:l,extra:c});if(null!==(y=r)&&"object"==typeof y&&"function"==typeof y.then&&(r=await r),!1===r||u.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const x=new Promise((e,t)=>{h=()=>{t({name:"AbortError",message:m||"Aborted"})},u.signal.addEventListener("abort",h)});o(a(d,e,null==(f=null==n?void 0:n.getPendingMeta)?void 0:f.call(n,{requestId:d,arg:e},{getState:l,extra:c}))),g=await Promise.race([x,Promise.resolve(t(e,{dispatch:o,getState:l,extra:c,requestId:d,signal:u.signal,abort:p,rejectWithValue:(e,t)=>new Qf(e,t),fulfillWithValue:(e,t)=>new Kf(e,t)})).then(t=>{if(t instanceof Qf)throw t;return t instanceof Kf?s(t.payload,d,e,t.meta):s(t,d,e)})])}catch(x){g=x instanceof Qf?r(null,d,e,x.payload,x.meta):r(x,d,e)}finally{h&&u.signal.removeEventListener("abort",h)}var y;return n&&!n.dispatchConditionRejection&&r.match(g)&&g.meta.condition||o(g),g}();return Object.assign(f,{abort:p,requestId:d,arg:e,unwrap:()=>f.then(tg)})}},{pending:a,rejected:r,fulfilled:s,settled:Gf(r,s),typePrefix:e})}return e.withTypes=()=>e,e})();function tg(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}var ng=Symbol.for("rtk-slice-createasyncthunk");function sg(e,t){return`${e}/${t}`}function ag({creators:e}={}){var t;const n=null==(t=null==e?void 0:e.asyncThunk)?void 0:t[ng];return function(e){const{name:t,reducerPath:s=t}=e;if(!t)throw new Error(lg(11));const a=("function"==typeof e.reducers?e.reducers(function(){function e(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return e.withTypes=()=>e,{reducer:e=>Object.assign({[e.name]:(...t)=>e(...t)}[e.name],{_reducerDefinitionType:"reducer"}),preparedReducer:(e,t)=>({_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}),asyncThunk:e}}()):e.reducers)||{},r=Object.keys(a),i={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},o={addCase(e,t){const n="string"==typeof e?e:e.type;if(!n)throw new Error(lg(12));if(n in i.sliceCaseReducersByType)throw new Error(lg(13));return i.sliceCaseReducersByType[n]=t,o},addMatcher:(e,t)=>(i.sliceMatchers.push({matcher:e,reducer:t}),o),exposeAction:(e,t)=>(i.actionCreators[e]=t,o),exposeCaseReducer:(e,t)=>(i.sliceCaseReducersByName[e]=t,o)};function l(){const[t={},n=[],s]="function"==typeof e.extraReducers?Yf(e.extraReducers):[e.extraReducers],a={...t,...i.sliceCaseReducersByType};return function(e,t){let n,[s,a,r]=Yf(t);if("function"==typeof e)n=()=>Hf(e());else{const t=Hf(e);n=()=>t}function i(e=n(),t){let i=[s[t.type],...a.filter(({matcher:e})=>e(t)).map(({reducer:e})=>e)];return 0===i.filter(e=>!!e).length&&(i=[r]),i.reduce((e,n)=>{if(n){if(Xp(e)){const s=n(e,t);return void 0===s?e:s}if(Zp(e))return Mf(e,e=>n(e,t));{const s=n(e,t);if(void 0===s){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return s}}return e},e)}return i.getInitialState=n,i}(e.initialState,e=>{for(let t in a)e.addCase(t,a[t]);for(let t of i.sliceMatchers)e.addMatcher(t.matcher,t.reducer);for(let t of n)e.addMatcher(t.matcher,t.reducer);s&&e.addDefaultCase(s)})}r.forEach(s=>{const r=a[s],i={reducerName:s,type:sg(t,s),createNotation:"function"==typeof e.reducers};!function(e){return"asyncThunk"===e._reducerDefinitionType}(r)?function({type:e,reducerName:t,createNotation:n},s,a){let r,i;if("reducer"in s){if(n&&!function(e){return"reducerWithPrepare"===e._reducerDefinitionType}(s))throw new Error(lg(17));r=s.reducer,i=s.prepare}else r=s;a.addCase(e,r).exposeCaseReducer(t,r).exposeAction(t,i?Uf(e,i):Uf(e))}(i,r,o):function({type:e,reducerName:t},n,s,a){if(!a)throw new Error(lg(18));const{payloadCreator:r,fulfilled:i,pending:o,rejected:l,settled:c,options:d}=n,u=a(e,r,d);s.exposeAction(t,u),i&&s.addCase(u.fulfilled,i);o&&s.addCase(u.pending,o);l&&s.addCase(u.rejected,l);c&&s.addMatcher(u.settled,c);s.exposeCaseReducer(t,{fulfilled:i||og,pending:o||og,rejected:l||og,settled:c||og})}(i,r,o,n)});const c=e=>e,d=new Map,u=new WeakMap;let h;function m(e,t){return h||(h=l()),h(e,t)}function p(){return h||(h=l()),h.getInitialState()}function f(t,n=!1){function s(e){let a=e[t];return void 0===a&&n&&(a=Wf(u,s,p)),a}function a(t=c){const s=Wf(d,n,()=>new WeakMap);return Wf(s,t,()=>{const s={};for(const[a,r]of Object.entries(e.selectors??{}))s[a]=rg(r,t,()=>Wf(u,t,p),n);return s})}return{reducerPath:t,getSelectors:a,get selectors(){return a(s)},selectSlice:s}}const g={name:t,reducer:m,actions:i.actionCreators,caseReducers:i.sliceCaseReducersByName,getInitialState:p,...f(s),injectInto(e,{reducerPath:t,...n}={}){const a=t??s;return e.inject({reducerPath:a,reducer:m},n),{...g,...f(a,!0)}}};return g}}function rg(e,t,n,s){function a(a,...r){let i=t(a);return void 0===i&&s&&(i=n()),e(i,...r)}return a.unwrapped=e,a}var ig=ag();function og(){}function lg(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var cg="persist:",dg="persist/FLUSH",ug="persist/REHYDRATE",hg="persist/PAUSE",mg="persist/PERSIST",pg="persist/PURGE",fg="persist/REGISTER";function gg(e){return(gg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function yg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,s)}return n}function xg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vg(e,t,n,s){s.debug;var a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yg(n,!0).forEach(function(t){xg(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yg(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},n);return e&&"object"===gg(e)&&Object.keys(e).forEach(function(s){"_persist"!==s&&t[s]===n[s]&&(a[s]=e[s])}),a}function bg(e){var t,n=e.blacklist||null,s=e.whitelist||null,a=e.transforms||[],r=e.throttle||0,i="".concat(void 0!==e.keyPrefix?e.keyPrefix:cg).concat(e.key),o=e.storage;t=!1===e.serialize?function(e){return e}:"function"==typeof e.serialize?e.serialize:jg;var l=e.writeFailHandler||null,c={},d={},u=[],h=null,m=null;function p(){if(0===u.length)return h&&clearInterval(h),void(h=null);var e=u.shift(),n=a.reduce(function(t,n){return n.in(t,e,c)},c[e]);if(void 0!==n)try{d[e]=t(n)}catch(s){}else delete d[e];0===u.length&&(Object.keys(d).forEach(function(e){void 0===c[e]&&delete d[e]}),m=o.setItem(i,t(d)).catch(g))}function f(e){return(!s||-1!==s.indexOf(e)||"_persist"===e)&&(!n||-1===n.indexOf(e))}function g(e){l&&l(e)}return{update:function(e){Object.keys(e).forEach(function(t){f(t)&&c[t]!==e[t]&&-1===u.indexOf(t)&&u.push(t)}),Object.keys(c).forEach(function(t){void 0===e[t]&&f(t)&&-1===u.indexOf(t)&&void 0!==c[t]&&u.push(t)}),null===h&&(h=setInterval(p,r)),c=e},flush:function(){for(;0!==u.length;)p();return m||Promise.resolve()}}}function jg(e){return JSON.stringify(e)}function wg(e){var t,n=e.transforms||[],s="".concat(void 0!==e.keyPrefix?e.keyPrefix:cg).concat(e.key),a=e.storage;return e.debug,t=!1===e.deserialize?function(e){return e}:"function"==typeof e.deserialize?e.deserialize:kg,a.getItem(s).then(function(e){if(e)try{var s={},a=t(e);return Object.keys(a).forEach(function(e){s[e]=n.reduceRight(function(t,n){return n.out(t,e,a)},t(a[e]))}),s}catch(r){throw r}})}function kg(e){return JSON.parse(e)}function Ng(e){}function Sg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,s)}return n}function Cg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Sg(n,!0).forEach(function(t){Tg(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Sg(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Tg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pg(e,t){if(null==e)return{};var n,s,a=function(e,t){if(null==e)return{};var n,s,a={},r=Object.keys(e);for(s=0;s<r.length;s++)n=r[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(s=0;s<r.length;s++)n=r[s],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Eg(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Lg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,s)}return n}function Ig(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lg(n,!0).forEach(function(t){Ag(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lg(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Ag(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Og={registry:[],bootstrapped:!1},Dg=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Og,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case fg:return Ig({},e,{registry:[].concat(Eg(e.registry),[t.key])});case ug:var n=e.registry.indexOf(t.key),s=Eg(e.registry);return s.splice(n,1),Ig({},e,{registry:s,bootstrapped:0===s.length});default:return e}};var Rg={},Mg={};function _g(e){return(_g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fg(){}Mg.__esModule=!0,Mg.default=function(e){var t="".concat(e,"Storage");return function(e){if("object"!==("undefined"==typeof self?"undefined":_g(self))||!(e in self))return!1;try{var t=self[e],n="redux-persist ".concat(e," test");t.setItem(n,"test"),t.getItem(n),t.removeItem(n)}catch(s){return!1}return!0}(t)?self[t]:Bg};var Bg={getItem:Fg,setItem:Fg,removeItem:Fg};Rg.__esModule=!0,Rg.default=function(e){var t=(0,Ug.default)(e);return{getItem:function(e){return new Promise(function(n,s){n(t.getItem(e))})},setItem:function(e,n){return new Promise(function(s,a){s(t.setItem(e,n))})},removeItem:function(e){return new Promise(function(n,s){n(t.removeItem(e))})}}};var zg,Ug=(zg=Mg)&&zg.__esModule?zg:{default:zg};var $g,Hg=function(e){return e&&e.__esModule?e:{default:e}}(Rg);$g=(0,Hg.default)("local");const Wg={user:null,token:localStorage.getItem("token"),isAuthenticated:!1,isLoading:!1,error:null,virtualMoney:0,registrationBonus:1e4},qg=eg("auth/loginUser",async(e,{rejectWithValue:t})=>{try{const n=await Pr.login(e);return n.success?(localStorage.setItem("token",n.data.token),localStorage.setItem("user",JSON.stringify(n.data.user)),n.data):t(n.message)}catch(n){return t(n.message||"Login failed")}}),Vg=eg("auth/registerUser",async(e,{rejectWithValue:t})=>{try{const n=await Pr.register(e);if(n.success){localStorage.setItem("token",n.data.token),localStorage.setItem("user",JSON.stringify(n.data.user));return{...n.data,virtualMoney:1e4}}return t(n.message)}catch(n){return t(n.message||"Registration failed")}}),Yg=eg("auth/googleAuth",async(e,{rejectWithValue:t})=>{try{const n=await Pr.googleAuth(e);if(n.success){localStorage.setItem("token",n.data.token),localStorage.setItem("user",JSON.stringify(n.data.user));return{...n.data,virtualMoney:n.data.isNewUser?1e4:n.data.virtualMoney||0}}return t(n.message)}catch(n){return t(n.message||"Google authentication failed")}}),Gg=eg("auth/logoutUser",async(e,{rejectWithValue:t})=>{try{return await Pr.logout(),localStorage.removeItem("token"),localStorage.removeItem("user"),!0}catch(n){return localStorage.removeItem("token"),localStorage.removeItem("user"),!0}}),Jg=eg("auth/refreshToken",async(e,{rejectWithValue:t})=>{try{const e=await Pr.refreshToken();return e.success?(localStorage.setItem("token",e.data.token),e.data):t(e.message)}catch(n){return t(n.message||"Token refresh failed")}}),Qg=ig({name:"auth",initialState:Wg,reducers:{clearError:e=>{e.error=null},setUser:(e,t)=>{e.user=t.payload,e.isAuthenticated=!!t.payload},updateVirtualMoney:(e,t)=>{e.virtualMoney=t.payload,e.user&&(e.user.virtualMoney=t.payload)},addVirtualMoney:(e,t)=>{e.virtualMoney+=t.payload,e.user&&(e.user.virtualMoney=e.virtualMoney)},subtractVirtualMoney:(e,t)=>{e.virtualMoney=Math.max(0,e.virtualMoney-t.payload),e.user&&(e.user.virtualMoney=e.virtualMoney)},initializeAuth:e=>{const t=localStorage.getItem("token"),n=localStorage.getItem("user");if(t&&n)try{const s=JSON.parse(n);e.token=t,e.user=s,e.isAuthenticated=!0,e.virtualMoney=s.virtualMoney||0}catch(s){localStorage.removeItem("token"),localStorage.removeItem("user")}}},extraReducers:e=>{e.addCase(qg.pending,e=>{e.isLoading=!0,e.error=null}).addCase(qg.fulfilled,(e,t)=>{e.isLoading=!1,e.user=t.payload.user,e.token=t.payload.token,e.isAuthenticated=!0,e.virtualMoney=t.payload.user.virtualMoney||0,e.error=null}).addCase(qg.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload,e.isAuthenticated=!1}).addCase(Vg.pending,e=>{e.isLoading=!0,e.error=null}).addCase(Vg.fulfilled,(e,t)=>{e.isLoading=!1,e.user=t.payload.user,e.token=t.payload.token,e.isAuthenticated=!0,e.virtualMoney=1e4,e.error=null}).addCase(Vg.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload,e.isAuthenticated=!1}).addCase(Yg.pending,e=>{e.isLoading=!0,e.error=null}).addCase(Yg.fulfilled,(e,t)=>{e.isLoading=!1,e.user=t.payload.user,e.token=t.payload.token,e.isAuthenticated=!0,e.virtualMoney=t.payload.virtualMoney||0,e.error=null}).addCase(Yg.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload,e.isAuthenticated=!1}).addCase(Gg.fulfilled,e=>{e.user=null,e.token=null,e.isAuthenticated=!1,e.virtualMoney=0,e.error=null,e.isLoading=!1}).addCase(Jg.fulfilled,(e,t)=>{e.token=t.payload.token,e.user=t.payload.user,e.virtualMoney=t.payload.user.virtualMoney||e.virtualMoney})}}),{clearError:Kg,setUser:Xg,updateVirtualMoney:Zg,addVirtualMoney:ey,subtractVirtualMoney:ty,initializeAuth:ny}=Qg.actions,sy=Qg.reducer,ay=[{id:"holding_1",symbol:"RELIANCE",name:"Reliance Industries Ltd",quantity:0,avgPrice:0,currentPrice:2520,totalValue:0,totalGains:0,gainsPercent:0,dayChange:25,dayChangePercent:1,sector:"Energy"},{id:"holding_2",symbol:"TCS",name:"Tata Consultancy Services",quantity:0,avgPrice:0,currentPrice:3350,totalValue:0,totalGains:0,gainsPercent:0,dayChange:-15,dayChangePercent:-.45,sector:"IT"},{id:"holding_3",symbol:"INFY",name:"Infosys Limited",quantity:0,avgPrice:0,currentPrice:1520,totalValue:0,totalGains:0,gainsPercent:0,dayChange:12,dayChangePercent:.79,sector:"IT"}],ry=eg("portfolio/fetchSummary",async(e,{rejectWithValue:t,getState:n})=>{try{const e=await Ar();return e.success?e.data:t(e.message)}catch(s){const{portfolio:e}=n();return ly(e.holdings)}}),iy=eg("portfolio/fetchHoldings",async(e,{rejectWithValue:t})=>{try{const e=await Or();return e.success?e.data:t(e.message)}catch(n){return ay}}),oy=eg("portfolio/updateHolding",async({symbol:e,quantity:t,price:n,type:s},{rejectWithValue:a,getState:r})=>{try{const{portfolio:i}=r(),o=i.holdings.find(t=>t.symbol===e);let l;if("BUY"===s)if(o){const e=o.quantity+t,s=(o.avgPrice*o.quantity+n*t)/e;l={...o,quantity:e,avgPrice:s,totalValue:e*o.currentPrice,totalGains:(o.currentPrice-s)*e,gainsPercent:(o.currentPrice-s)/s*100}}else{const s=ay.find(t=>t.symbol===e);if(!s)return a("Stock not found");l={...s,id:`holding_${Date.now()}`,quantity:t,avgPrice:n,totalValue:t*s.currentPrice,totalGains:(s.currentPrice-n)*t,gainsPercent:(s.currentPrice-n)/n*100}}else if("SELL"===s){if(!o||o.quantity<t)return a("Insufficient shares to sell");const e=o.quantity-t;l=0===e?null:{...o,quantity:e,totalValue:e*o.currentPrice,totalGains:(o.currentPrice-o.avgPrice)*e,gainsPercent:(o.currentPrice-o.avgPrice)/o.avgPrice*100}}return{symbol:e,updatedHolding:l,type:s,quantity:t,price:n}}catch(i){return a(i.message||"Failed to update holding")}}),ly=e=>{const t=e.reduce((e,t)=>e+t.totalValue,0),n=e.reduce((e,t)=>e+t.avgPrice*t.quantity,0),s=t-n,a=n>0?s/n*100:0,r=e.reduce((e,t)=>e+t.dayChange*t.quantity,0);return{totalValue:t,totalInvested:n,totalGains:s,totalGainsPercent:a,dayChange:r,dayChangePercent:t>0?r/(t-r)*100:0,totalStocks:e.filter(e=>e.quantity>0).length}},cy=ig({name:"portfolio",initialState:{holdings:[],summary:{totalValue:0,totalInvested:0,totalGains:0,totalGainsPercent:0,dayChange:0,dayChangePercent:0,totalStocks:0},performance:{chartData:[],timeframe:"1D"},isLoading:!1,error:null,lastUpdated:null},reducers:{clearError:e=>{e.error=null},updateCurrentPrices:(e,t)=>{const n=t.payload;e.holdings=e.holdings.map(e=>{const t=n.find(t=>t.symbol===e.symbol);if(t){const n=t.price,s=e.quantity*n,a=(n-e.avgPrice)*e.quantity,r=e.avgPrice>0?(n-e.avgPrice)/e.avgPrice*100:0;return{...e,currentPrice:n,totalValue:s,totalGains:a,gainsPercent:r,dayChange:t.dayChange||e.dayChange,dayChangePercent:t.dayChangePercent||e.dayChangePercent}}return e}),e.summary=ly(e.holdings),e.lastUpdated=(new Date).toISOString()},setTimeframe:(e,t)=>{e.performance.timeframe=t.payload}},extraReducers:e=>{e.addCase(ry.pending,e=>{e.isLoading=!0,e.error=null}).addCase(ry.fulfilled,(e,t)=>{e.isLoading=!1,e.summary=t.payload,e.lastUpdated=(new Date).toISOString()}).addCase(ry.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload}).addCase(iy.pending,e=>{e.isLoading=!0,e.error=null}).addCase(iy.fulfilled,(e,t)=>{e.isLoading=!1,e.holdings=t.payload,e.summary=ly(t.payload),e.lastUpdated=(new Date).toISOString()}).addCase(iy.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload}).addCase(oy.fulfilled,(e,t)=>{const{symbol:n,updatedHolding:s}=t.payload;if(null===s)e.holdings=e.holdings.filter(e=>e.symbol!==n);else{const t=e.holdings.findIndex(e=>e.symbol===n);t>=0?e.holdings[t]=s:e.holdings.push(s)}e.summary=ly(e.holdings),e.lastUpdated=(new Date).toISOString()}).addCase(oy.rejected,(e,t)=>{e.error=t.payload})}}),{clearError:dy,updateCurrentPrices:uy,setTimeframe:hy}=cy.actions,my=cy.reducer,py=[{id:"trade_1",symbol:"WIPRO",name:"Wipro Limited",type:"BUY",quantity:50,price:420,totalAmount:21e3,timestamp:new Date("2024-01-15T10:30:00"),status:"completed"},{id:"trade_2",symbol:"BAJFINANCE",name:"Bajaj Finance Limited",type:"SELL",quantity:25,price:6800,totalAmount:17e4,timestamp:new Date("2024-01-15T09:15:00"),status:"completed"}],fy=(e,t)=>{const n=e*(t.brokerage/100),s=e*(t.stt/100),a=n*(t.gst/100),r=n+s+a;return{brokerage:Math.round(100*n)/100,stt:Math.round(100*s)/100,gst:Math.round(100*a)/100,totalFees:Math.round(100*r)/100}},gy=eg("trading/executeTrade",async(e,{dispatch:t,getState:n,rejectWithValue:s})=>{try{const{symbol:a,quantity:r,price:i,type:o}=e,l=n(),{auth:c,trading:d}=l,u=r*i,h=fy(u,d.tradingFees),m="BUY"===o?u+h.totalFees:u-h.totalFees;if("BUY"===o&&c.virtualMoney<m)return s("Insufficient virtual money balance");if("SELL"===o){const e=l.portfolio.holdings.find(e=>e.symbol===a);if(!e||e.quantity<r)return s("Insufficient shares to sell")}const p={id:`trade_${Date.now()}`,symbol:a,name:e.name||a,type:o,quantity:r,price:i,grossAmount:u,fees:h,netAmount:m,timestamp:(new Date).toISOString(),status:"completed"};return t("BUY"===o?ty(m):ey(m)),t(oy({symbol:a,quantity:r,price:i,type:o})),p}catch(a){return s(a.message||"Trade execution failed")}}),yy=eg("trading/fetchRecentTrades",async(e=10,{rejectWithValue:t})=>{try{const n=await Dr.getRecentTrades(e);return n.success?n.data:t(n.message)}catch(n){return py}}),xy=eg("trading/fetchTradeHistory",async({startDate:e,endDate:t,symbol:n},{rejectWithValue:s})=>{try{const a=await Dr.getTradeHistory({startDate:e,endDate:t,symbol:n});return a.success?a.data:s(a.message)}catch(a){return py}}),vy=eg("trading/placeOrder",async(e,{getState:t,rejectWithValue:n})=>{try{const{symbol:s,quantity:a,price:r,type:i,orderType:o}=e,l=t(),{auth:c}=l;if("LIMIT"===o){const e=a*r,t=fy(e,l.trading.tradingFees),s="BUY"===i?e+t.totalFees:e-t.totalFees;if("BUY"===i&&c.virtualMoney<s)return n("Insufficient virtual money balance")}return{id:`order_${Date.now()}`,symbol:s,name:e.name||s,type:i,orderType:o,quantity:a,price:"MARKET"===o?null:r,status:"pending",timestamp:(new Date).toISOString(),expiryDate:e.expiryDate||null}}catch(s){return n(s.message||"Order placement failed")}}),by=eg("trading/cancelOrder",async(e,{rejectWithValue:t})=>{try{const n=await Dr.cancelOrder(e);return n.success?e:t(n.message)}catch(n){return e}}),jy=ig({name:"trading",initialState:{recentTrades:[],activeOrders:[],tradeHistory:[],isLoading:!1,error:null,tradingFees:{brokerage:.03,stt:.1,gst:18}},reducers:{clearError:e=>{e.error=null},updateTradingFees:(e,t)=>{e.tradingFees={...e.tradingFees,...t.payload}},addTradeToHistory:(e,t)=>{e.tradeHistory.unshift(t.payload),e.recentTrades.unshift(t.payload),e.recentTrades.length>50&&(e.recentTrades=e.recentTrades.slice(0,50))}},extraReducers:e=>{e.addCase(gy.pending,e=>{e.isLoading=!0,e.error=null}).addCase(gy.fulfilled,(e,t)=>{e.isLoading=!1,e.recentTrades.unshift(t.payload),e.tradeHistory.unshift(t.payload),e.recentTrades.length>50&&(e.recentTrades=e.recentTrades.slice(0,50))}).addCase(gy.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload}).addCase(yy.fulfilled,(e,t)=>{e.recentTrades=t.payload}).addCase(xy.fulfilled,(e,t)=>{e.tradeHistory=t.payload}).addCase(vy.pending,e=>{e.isLoading=!0,e.error=null}).addCase(vy.fulfilled,(e,t)=>{e.isLoading=!1,e.activeOrders.push(t.payload)}).addCase(vy.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload}).addCase(by.fulfilled,(e,t)=>{const n=t.payload;e.activeOrders=e.activeOrders.filter(e=>e.id!==n)})}}),{clearError:wy,updateTradingFees:ky,addTradeToHistory:Ny}=jy.actions,Sy=jy.reducer,Cy=[{id:"watch_1",symbol:"RELIANCE",name:"Reliance Industries Ltd",price:2520,change:25,changePercent:1,volume:125e4,marketCap:1705e9,pe:24.5,sector:"Energy",isFavorite:!0,alertPrice:2600,hasAlert:!0,addedAt:new Date("2024-01-10T10:00:00").toISOString()},{id:"watch_2",symbol:"TCS",name:"Tata Consultancy Services",price:3350,change:-15,changePercent:-.45,volume:89e4,marketCap:122e10,pe:28.2,sector:"IT",isFavorite:!1,alertPrice:null,hasAlert:!1,addedAt:new Date("2024-01-12T14:30:00").toISOString()},{id:"watch_3",symbol:"INFY",name:"Infosys Limited",price:1520,change:12,changePercent:.79,volume:11e5,marketCap:645e9,pe:22.8,sector:"IT",isFavorite:!0,alertPrice:1600,hasAlert:!0,addedAt:new Date("2024-01-08T09:15:00").toISOString()}],Ty=eg("watchlist/fetchWatchlist",async(e,{rejectWithValue:t})=>{try{const e=await Rr.getWatchlist();return e.success?e.data:t(e.message)}catch(n){return Cy}}),Py=eg("watchlist/addToWatchlist",async(e,{getState:t,rejectWithValue:n})=>{try{const{symbol:a,name:r,price:i,sector:o}=e,l=t();if(l.watchlist.stocks.find(e=>e.symbol===a))return n("Stock already in watchlist");const c={id:`watch_${Date.now()}`,symbol:a,name:r,price:i,change:0,changePercent:0,volume:0,marketCap:0,pe:0,sector:o||"Unknown",isFavorite:!1,alertPrice:null,hasAlert:!1,addedAt:(new Date).toISOString()};try{const e=await Rr.addStock(c);if(e.success)return e.data}catch(s){}return c}catch(s){return n(s.message||"Failed to add to watchlist")}}),Ey=eg("watchlist/removeFromWatchlist",async(e,{rejectWithValue:t})=>{try{try{if((await Rr.removeStock(e)).success)return e}catch(n){}return e}catch(n){return t(n.message||"Failed to remove from watchlist")}}),Ly=eg("watchlist/toggleFavorite",async(e,{getState:t,rejectWithValue:n})=>{try{const a=t().watchlist.stocks.find(t=>t.id===e);if(!a)return n("Stock not found in watchlist");const r={...a,isFavorite:!a.isFavorite};try{const t=await Rr.updateStock(e,r);if(t.success)return t.data}catch(s){}return r}catch(s){return n(s.message||"Failed to toggle favorite")}}),Iy=eg("watchlist/setPriceAlert",async({stockId:e,alertPrice:t},{getState:n,rejectWithValue:s})=>{try{const r=n().watchlist.stocks.find(t=>t.id===e);if(!r)return s("Stock not found in watchlist");const i={...r,alertPrice:t,hasAlert:null!==t};try{const t=await Rr.updateStock(e,i);if(t.success)return t.data}catch(a){}return i}catch(a){return s(a.message||"Failed to set price alert")}}),Ay=eg("watchlist/updatePrices",async(e,{rejectWithValue:t})=>{try{return e}catch(n){return t(n.message||"Failed to update prices")}}),Oy=ig({name:"watchlist",initialState:{stocks:[],isLoading:!1,error:null,lastUpdated:null},reducers:{clearError:e=>{e.error=null},updateStockPrices:(e,t)=>{const n=t.payload;e.stocks=e.stocks.map(e=>{const t=n.find(t=>t.symbol===e.symbol);return t?{...e,price:t.price,change:t.change,changePercent:t.changePercent,volume:t.volume||e.volume,dayHigh:t.dayHigh||e.dayHigh,dayLow:t.dayLow||e.dayLow,lastUpdated:Date.now()}:e}),e.lastUpdated=(new Date).toISOString()},syncWithStocksData:(e,t)=>{const n=t.payload;e.stocks=e.stocks.map(e=>{const t=n[e.symbol];return t?{...e,...t,lastUpdated:Date.now()}:e}),e.lastUpdated=(new Date).toISOString()},sortWatchlist:(e,t)=>{const{sortBy:n,sortOrder:s}=t.payload;e.stocks.sort((e,t)=>{let a,r;switch(n){case"symbol":a=e.symbol,r=t.symbol;break;case"price":a=e.price,r=t.price;break;case"change":a=e.changePercent,r=t.changePercent;break;case"volume":a=e.volume,r=t.volume;break;case"addedAt":a=new Date(e.addedAt),r=new Date(t.addedAt);break;default:return 0}return"desc"===s?r>a?1:-1:a>r?1:-1})}},extraReducers:e=>{e.addCase(Ty.pending,e=>{e.isLoading=!0,e.error=null}).addCase(Ty.fulfilled,(e,t)=>{e.isLoading=!1,e.stocks=t.payload,e.lastUpdated=(new Date).toISOString()}).addCase(Ty.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload}).addCase(Py.fulfilled,(e,t)=>{e.stocks.push(t.payload)}).addCase(Py.rejected,(e,t)=>{e.error=t.payload}).addCase(Ey.fulfilled,(e,t)=>{const n=t.payload;e.stocks=e.stocks.filter(e=>e.id!==n)}).addCase(Ey.rejected,(e,t)=>{e.error=t.payload}).addCase(Ly.fulfilled,(e,t)=>{const n=t.payload,s=e.stocks.findIndex(e=>e.id===n.id);s>=0&&(e.stocks[s]=n)}).addCase(Iy.fulfilled,(e,t)=>{const n=t.payload,s=e.stocks.findIndex(e=>e.id===n.id);s>=0&&(e.stocks[s]=n)}).addCase(Ay.fulfilled,(e,t)=>{const n=t.payload;e.stocks=e.stocks.map(e=>{const t=n.find(t=>t.symbol===e.symbol);return t?{...e,price:t.price,change:t.change,changePercent:t.changePercent,volume:t.volume||e.volume}:e}),e.lastUpdated=(new Date).toISOString()})}}),{clearError:Dy,updateStockPrices:Ry,syncWithStocksData:My,sortWatchlist:_y}=Oy.actions,Fy=Oy.reducer,By=[{id:"ORD001",symbol:"RELIANCE",name:"Reliance Industries Ltd",type:"BUY",quantity:50,price:2520,orderPrice:2500,status:"executed",timestamp:new Date("2024-01-15T10:30:00").toISOString(),executedAt:new Date("2024-01-15T10:31:00").toISOString(),totalAmount:126e3},{id:"ORD002",symbol:"TCS",name:"Tata Consultancy Services",type:"SELL",quantity:20,price:3350,orderPrice:3400,status:"pending",timestamp:new Date("2024-01-15T11:15:00").toISOString(),executedAt:null,totalAmount:67e3}],zy=eg("orders/fetchOrders",async(e,{rejectWithValue:t})=>{try{const e=await Dr.getOrders();return e.success?e.data:t(e.message)}catch(n){return By}}),Uy=eg("orders/placeOrder",async(e,{rejectWithValue:t})=>{try{const t={id:`ORD${Date.now()}`,...e,status:"pending",timestamp:(new Date).toISOString(),executedAt:null};try{const e=await Dr.placeOrder(t);if(e.success)return e.data}catch(n){}return t}catch(n){return t(n.message||"Failed to place order")}}),$y=eg("orders/cancelOrder",async(e,{rejectWithValue:t})=>{try{try{if((await Dr.cancelOrder(e)).success)return e}catch(n){}return e}catch(n){return t(n.message||"Failed to cancel order")}}),Hy=ig({name:"orders",initialState:{orders:[],orderHistory:[],isLoading:!1,error:null,filters:{status:"all",type:"all",symbol:""}},reducers:{clearError:e=>{e.error=null},setFilters:(e,t)=>{e.filters={...e.filters,...t.payload}},updateOrderStatus:(e,t)=>{const{orderId:n,status:s,executedAt:a,executedPrice:r}=t.payload,i=e.orders.find(e=>e.id===n);i&&(i.status=s,a&&(i.executedAt=a),r&&(i.price=r))}},extraReducers:e=>{e.addCase(zy.pending,e=>{e.isLoading=!0,e.error=null}).addCase(zy.fulfilled,(e,t)=>{e.isLoading=!1,e.orders=t.payload}).addCase(zy.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload}).addCase(Uy.fulfilled,(e,t)=>{e.orders.unshift(t.payload)}).addCase($y.fulfilled,(e,t)=>{const n=t.payload,s=e.orders.find(e=>e.id===n);s&&(s.status="cancelled")})}}),{clearError:Wy,setFilters:qy,updateOrderStatus:Vy}=Hy.actions,Yy=Hy.reducer,Gy=[{id:"news001",title:"Reliance Industries Reports Strong Q3 Results, Beats Estimates",summary:"Reliance Industries posted a 12% increase in net profit for Q3, driven by strong performance in retail and digital services segments.",category:"earnings",source:"Economic Times",author:"Financial Reporter",publishedAt:new Date("2024-01-15T09:30:00").toISOString(),readTime:3,imageUrl:"/api/placeholder/400/200",tags:["RELIANCE","Earnings","Q3 Results"],sentiment:"positive",views:1250,likes:89,isBookmarked:!1,relatedStocks:["RELIANCE"]},{id:"news002",title:"IT Sector Outlook: TCS and Infosys Lead Digital Transformation Wave",summary:"Indian IT giants are capitalizing on global digital transformation trends, with strong order books and margin improvements.",category:"sector",source:"Business Standard",author:"Tech Analyst",publishedAt:new Date("2024-01-15T08:45:00").toISOString(),readTime:5,imageUrl:"/api/placeholder/400/200",tags:["TCS","INFY","IT Sector","Digital"],sentiment:"positive",views:980,likes:67,isBookmarked:!0,relatedStocks:["TCS","INFY","WIPRO"]}],Jy=eg("news/fetchNews",async({category:e="all",limit:t=20},{rejectWithValue:n})=>{try{const s=await _r.getNews({category:e,limit:t});return s.success?s.data:n(s.message)}catch(s){return Gy}}),Qy=eg("news/toggleBookmark",async(e,{getState:t,rejectWithValue:n})=>{try{const a=t().news.articles.find(t=>t.id===e);if(!a)return n("Article not found");const r={...a,isBookmarked:!a.isBookmarked};try{await _r.toggleBookmark(e)}catch(s){}return r}catch(s){return n(s.message||"Failed to toggle bookmark")}}),Ky=ig({name:"news",initialState:{articles:[],categories:["all","market","earnings","sector","policy"],activeCategory:"all",isLoading:!1,error:null,lastUpdated:null},reducers:{clearError:e=>{e.error=null},setActiveCategory:(e,t)=>{e.activeCategory=t.payload},updateArticleViews:(e,t)=>{const n=t.payload,s=e.articles.find(e=>e.id===n);s&&(s.views+=1)}},extraReducers:e=>{e.addCase(Jy.pending,e=>{e.isLoading=!0,e.error=null}).addCase(Jy.fulfilled,(e,t)=>{e.isLoading=!1,e.articles=t.payload,e.lastUpdated=(new Date).toISOString()}).addCase(Jy.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload}).addCase(Qy.fulfilled,(e,t)=>{const n=t.payload,s=e.articles.findIndex(e=>e.id===n.id);s>=0&&(e.articles[s]=n)})}}),{clearError:Xy,setActiveCategory:Zy,updateArticleViews:ex}=Ky.actions,tx=Ky.reducer,nx=ig({name:"ui",initialState:{theme:localStorage.getItem("theme")||"light",notifications:[],modals:{buyStock:{isOpen:!1,data:null},sellStock:{isOpen:!1,data:null},addToWatchlist:{isOpen:!1,data:null},priceAlert:{isOpen:!1,data:null},tradeConfirmation:{isOpen:!1,data:null}},loading:{global:!1,portfolio:!1,trading:!1,watchlist:!1},toast:{isVisible:!1,message:"",type:"info",duration:3e3}},reducers:{setTheme:(e,t)=>{e.theme=t.payload,localStorage.setItem("theme",t.payload),document.documentElement.setAttribute("data-theme",t.payload)},toggleTheme:e=>{const t="light"===e.theme?"dark":"light";e.theme=t,localStorage.setItem("theme",t),document.documentElement.setAttribute("data-theme",t)},openModal:(e,t)=>{const{modalName:n,data:s}=t.payload;e.modals[n]&&(e.modals[n].isOpen=!0,e.modals[n].data=s||null)},closeModal:(e,t)=>{const n=t.payload;e.modals[n]&&(e.modals[n].isOpen=!1,e.modals[n].data=null)},closeAllModals:e=>{Object.keys(e.modals).forEach(t=>{e.modals[t].isOpen=!1,e.modals[t].data=null})},setLoading:(e,t)=>{const{key:n,value:s}=t.payload;e.loading.hasOwnProperty(n)&&(e.loading[n]=s)},setGlobalLoading:(e,t)=>{e.loading.global=t.payload},showToast:(e,t)=>{const{message:n,type:s="info",duration:a=3e3}=t.payload;e.toast={isVisible:!0,message:n,type:s,duration:a}},hideToast:e=>{e.toast.isVisible=!1},showSuccessToast:(e,t)=>{e.toast={isVisible:!0,message:t.payload,type:"success",duration:3e3}},showErrorToast:(e,t)=>{e.toast={isVisible:!0,message:t.payload,type:"error",duration:5e3}},showWarningToast:(e,t)=>{e.toast={isVisible:!0,message:t.payload,type:"warning",duration:4e3}},showInfoToast:(e,t)=>{e.toast={isVisible:!0,message:t.payload,type:"info",duration:3e3}}}}),{setTheme:sx,toggleTheme:ax,openModal:rx,closeModal:ix,closeAllModals:ox,setLoading:lx,setGlobalLoading:cx,showToast:dx,hideToast:ux,showSuccessToast:hx,showErrorToast:mx,showWarningToast:px,showInfoToast:fx}=nx.actions,gx=nx.reducer,yx=eg("stocks/fetchIndianStockQuote",async(e,{rejectWithValue:t})=>{var n,s;try{return{symbol:e,data:await Er(e)}}catch(a){return t((null==(s=null==(n=a.response)?void 0:n.data)?void 0:s.message)||"Failed to fetch stock quote")}}),xx=eg("stocks/fetchIndianMarketMovers",async(e,{rejectWithValue:t})=>{var n,s;try{return await Ir()}catch(a){return t((null==(s=null==(n=a.response)?void 0:n.data)?void 0:s.message)||"Failed to fetch market movers")}}),vx=eg("stocks/fetchNiftyData",async(e,{rejectWithValue:t})=>{var n,s;try{return await Er("^NSEI")}catch(a){return t((null==(s=null==(n=a.response)?void 0:n.data)?void 0:s.message)||"Failed to fetch Nifty data")}}),bx=eg("stocks/fetchSensexData",async(e,{rejectWithValue:t})=>{var n,s;try{return await Er("^BSESN")}catch(a){return t((null==(s=null==(n=a.response)?void 0:n.data)?void 0:s.message)||"Failed to fetch Sensex data")}}),jx=eg("stocks/fetchBatchStockQuotes",async(e,{rejectWithValue:t})=>{var n,s;try{return await Lr(e)}catch(a){return t((null==(s=null==(n=a.response)?void 0:n.data)?void 0:s.message)||"Failed to fetch batch quotes")}}),wx=ig({name:"stocks",initialState:{nifty:{data:null,loading:!1,error:null,lastUpdated:null},sensex:{data:null,loading:!1,error:null,lastUpdated:null},quotes:{},topGainers:[],topLosers:[],mostActive:[],realTimeUpdates:!0,updateInterval:3e4,lastGlobalUpdate:null,isLoading:!1,error:null,priceChanges:{},marketStatus:{isOpen:!1,nextOpen:null,nextClose:null,timezone:"Asia/Kolkata"}},reducers:{updateStockPrice:(e,t)=>{const{symbol:n,price:s,change:a,changePercent:r,volume:i,timestamp:o}=t.payload;e.quotes[n]&&e.quotes[n].price!==s&&(e.priceChanges[n]={oldPrice:e.quotes[n].price,newPrice:s,direction:s>e.quotes[n].price?"up":"down",timestamp:Date.now()}),e.quotes[n]={...e.quotes[n],price:s,change:a,changePercent:r,volume:i,lastUpdated:o||Date.now()}},updateBatchPrices:(e,t)=>{const n=t.payload,s=Date.now();n.forEach(t=>{const{symbol:n,price:a,change:r,changePercent:i,volume:o}=t;e.quotes[n]&&e.quotes[n].price!==a&&(e.priceChanges[n]={oldPrice:e.quotes[n].price,newPrice:a,direction:a>e.quotes[n].price?"up":"down",timestamp:s}),e.quotes[n]={...e.quotes[n],price:a,change:r,changePercent:i,volume:o,lastUpdated:s}}),e.lastGlobalUpdate=s},clearPriceChanges:e=>{e.priceChanges={}},toggleRealTimeUpdates:e=>{e.realTimeUpdates=!e.realTimeUpdates},setUpdateInterval:(e,t)=>{e.updateInterval=t.payload},updateMarketStatus:(e,t)=>{e.marketStatus={...e.marketStatus,...t.payload}},clearError:e=>{e.error=null,e.nifty.error=null,e.sensex.error=null}},extraReducers:e=>{e.addCase(yx.pending,e=>{e.isLoading=!0,e.error=null}).addCase(yx.fulfilled,(e,t)=>{e.isLoading=!1;const{symbol:n,data:s}=t.payload;e.quotes[n]={...s,lastUpdated:Date.now()}}).addCase(yx.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload}),e.addCase(xx.pending,e=>{e.isLoading=!0}).addCase(xx.fulfilled,(e,t)=>{e.isLoading=!1;const{gainers:n,losers:s,mostActive:a}=t.payload;e.topGainers=n||[],e.topLosers=s||[],e.mostActive=a||[],e.lastGlobalUpdate=Date.now()}).addCase(xx.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload}),e.addCase(vx.pending,e=>{e.nifty.loading=!0,e.nifty.error=null}).addCase(vx.fulfilled,(e,t)=>{e.nifty.loading=!1,e.nifty.data=t.payload,e.nifty.lastUpdated=Date.now()}).addCase(vx.rejected,(e,t)=>{e.nifty.loading=!1,e.nifty.error=t.payload}),e.addCase(bx.pending,e=>{e.sensex.loading=!0,e.sensex.error=null}).addCase(bx.fulfilled,(e,t)=>{e.sensex.loading=!1,e.sensex.data=t.payload,e.sensex.lastUpdated=Date.now()}).addCase(bx.rejected,(e,t)=>{e.sensex.loading=!1,e.sensex.error=t.payload}),e.addCase(jx.pending,e=>{e.isLoading=!0}).addCase(jx.fulfilled,(e,t)=>{e.isLoading=!1;t.payload.forEach(t=>{e.quotes[t.symbol]={...t,lastUpdated:Date.now()}}),e.lastGlobalUpdate=Date.now()}).addCase(jx.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload})}}),{updateStockPrice:kx,updateBatchPrices:Nx,clearPriceChanges:Sx,toggleRealTimeUpdates:Cx,setUpdateInterval:Tx,updateMarketStatus:Px,clearError:Ex}=wx.actions,Lx=function(e){const t=function(e){const{thunk:t=!0,immutableCheck:n=!0,serializableCheck:s=!0,actionCreatorCheck:a=!0}=e??{};let r=new $f;return t&&("boolean"==typeof t?r.push(Ff):r.push(Bf(t.extraArgument))),r},{reducer:n,middleware:s,devTools:a=!0,preloadedState:r,enhancers:i}=e||{};let o,l;if("function"==typeof n)o=n;else{if(!Hp(n))throw new Error(lg(1));o=qp(n)}l="function"==typeof s?s(t):t();let c=Vp;a&&(c=zf({trace:!1,..."object"==typeof a&&a}));const d=function(...e){return t=>(n,s)=>{const a=t(n,s);let r=()=>{throw new Error(Bp(15))};const i={getState:a.getState,dispatch:(e,...t)=>r(e,...t)},o=e.map(e=>e(i));return r=Vp(...o)(a.dispatch),{...a,dispatch:r}}}(...l),u=Vf(d);return Wp(o,r,c(..."function"==typeof i?i(u):u()))}({reducer:function(e,t){var n=void 0!==e.version?e.version:-1;e.debug;var s=void 0===e.stateReconciler?vg:e.stateReconciler,a=e.getStoredState||wg,r=void 0!==e.timeout?e.timeout:5e3,i=null,o=!1,l=!0,c=function(e){return e._persist.rehydrated&&i&&!l&&i.update(e),e};return function(d,u){var h=d||{},m=h._persist,p=Pg(h,["_persist"]);if(u.type===mg){var f=!1,g=function(t,n){f||(u.rehydrate(e.key,t,n),f=!0)};if(r&&setTimeout(function(){!f&&g(void 0,new Error('redux-persist: persist timed out for persist key "'.concat(e.key,'"')))},r),l=!1,i||(i=bg(e)),m)return Cg({},t(p,u),{_persist:m});if("function"!=typeof u.rehydrate||"function"!=typeof u.register)throw new Error("redux-persist: either rehydrate or register is not a function on the PERSIST action. This can happen if the action is being replayed. This is an unexplored use case, please open an issue and we will figure out a resolution.");return u.register(e.key),a(e).then(function(t){(e.migrate||function(e,t){return Promise.resolve(e)})(t,n).then(function(e){g(e)},function(e){g(void 0,e)})},function(e){g(void 0,e)}),Cg({},t(p,u),{_persist:{version:n,rehydrated:!1}})}if(u.type===pg)return o=!0,u.result(function(e){var t=e.storage,n="".concat(void 0!==e.keyPrefix?e.keyPrefix:cg).concat(e.key);return t.removeItem(n,Ng)}(e)),Cg({},t(p,u),{_persist:m});if(u.type===dg)return u.result(i&&i.flush()),Cg({},t(p,u),{_persist:m});if(u.type===hg)l=!0;else if(u.type===ug){if(o)return Cg({},p,{_persist:Cg({},m,{rehydrated:!0})});if(u.key===e.key){var y=t(p,u),x=u.payload,v=Cg({},!1!==s&&void 0!==x?s(x,d,y,e):y,{_persist:Cg({},m,{rehydrated:!0})});return c(v)}}if(!m)return t(d,u);var b=t(p,u);return b===p?d:c(Cg({},b,{_persist:m}))}}({key:"tradebro",storage:$g,whitelist:["auth","portfolio","trading","watchlist","orders"],blacklist:["ui","news","stocks"]},qp({auth:sy,portfolio:my,trading:Sy,watchlist:Fy,orders:Yy,news:tx,ui:gx,stocks:wx.reducer})),middleware:e=>e({serializableCheck:{ignoredActions:["persist/PERSIST","persist/REHYDRATE"]}}),devTools:!1}),Ix=(Ax=Lx,Ox=Wp(Dg,Og,void 0),Dx=function(e){Ox.dispatch({type:fg,key:e})},Rx=function(e,t,n){var s={type:ug,payload:t,err:n,key:e};Ax.dispatch(s),Ox.dispatch(s)},(Mx=Ig({},Ox,{purge:function(){var e=[];return Ax.dispatch({type:pg,result:function(t){e.push(t)}}),Promise.all(e)},flush:function(){var e=[];return Ax.dispatch({type:dg,result:function(t){e.push(t)}}),Promise.all(e)},pause:function(){Ax.dispatch({type:hg})},persist:function(){Ax.dispatch({type:mg,register:Dx,rehydrate:Rx})}})).persist(),Mx);var Ax,Ox,Dx,Rx,Mx;const _x=n.createContext(),Fx=({children:e})=>{const[t,s]=n.useState(()=>localStorage.getItem("tradebro-theme")||"light");n.useEffect(()=>{const e=document.documentElement;e.classList.remove("light-theme","dark-theme"),e.classList.add(`${t}-theme`),localStorage.setItem("tradebro-theme",t),e.setAttribute("data-theme",t)},[t]);const a={theme:t,toggleTheme:()=>{s(e=>"light"===e?"dark":"light")},setLightTheme:()=>s("light"),setDarkTheme:()=>s("dark"),isLight:"light"===t,isDark:"dark"===t};return M.jsx(_x.Provider,{value:a,children:e})};"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").catch(()=>{})}),R(document.getElementById("root")).render(M.jsx(n.StrictMode,{children:M.jsx(ne,{store:Lx,children:M.jsx(pe,{loading:M.jsx("div",{children:"Loading..."}),persistor:Ix,children:M.jsx(p,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:M.jsx(Fx,{children:M.jsx(wn,{children:M.jsx(dr,{children:M.jsx(di,{children:M.jsx(Rh,{children:M.jsx(Ur,{children:M.jsx(gh,{children:M.jsx(_p,{})})})})})})})})})})})}));export{Ve as F,$t as a,xn as b,Kt as c,mt as d,M as j};
