var e=Object.defineProperty,t=(t,n,s)=>(((t,n,s)=>{n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[n]=s})(t,"symbol"!=typeof n?n+"":n,s),s);import{r as n,b as s,a,g as r,c as i}from"./vendor-83d6deea.js";import{u as o,a as l,L as c,b as d,R as u,c as h,N as m,B as p}from"./router-3d30db0f.js";import{G as f,A as g,m as y,u as v,a as x,b,c as j}from"./ui-d10ec992.js";import{v as w}from"./utils-ba5d26a9.js";import{F as N,C as k,J as S,m as C,y as T,z as P}from"./charts-073267b1.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const n of e)if("childList"===n.type)for(const e of n.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var E={exports:{}},L={},I=n,A=Symbol.for("react.element"),O=Symbol.for("react.fragment"),D=Object.prototype.hasOwnProperty,R=I.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,M={key:!0,ref:!0,__self:!0,__source:!0};function _(e,t,n){var s,a={},r=null,i=null;for(s in void 0!==n&&(r=""+n),void 0!==t.key&&(r=""+t.key),void 0!==t.ref&&(i=t.ref),t)D.call(t,s)&&!M.hasOwnProperty(s)&&(a[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps)void 0===a[s]&&(a[s]=t[s]);return{$$typeof:A,type:e,key:r,ref:i,props:a,_owner:R.current}}L.Fragment=O,L.jsx=_,L.jsxs=_,E.exports=L;var F,B=E.exports,z=s;F=z.createRoot,z.hydrateRoot;var U={exports:{}},H={},$=n;var q="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},W=$.useSyncExternalStore,V=$.useRef,Y=$.useEffect,G=$.useMemo,J=$.useDebugValue;H.useSyncExternalStoreWithSelector=function(e,t,n,s,a){var r=V(null);if(null===r.current){var i={hasValue:!1,value:null};r.current=i}else i=r.current;r=G(function(){function e(e){if(!l){if(l=!0,r=e,e=s(e),void 0!==a&&i.hasValue){var t=i.value;if(a(t,e))return o=t}return o=e}if(t=o,q(r,e))return t;var n=s(e);return void 0!==a&&a(t,n)?(r=e,t):(r=e,o=n)}var r,o,l=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]},[t,n,s,a]);var o=W(e,r[0],r[1]);return Y(function(){i.hasValue=!0,i.value=o},[o]),J(o),o},U.exports=H;var K=U.exports;var Q={notify(){},get:()=>[]};var X=(()=>!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement))(),Z=(()=>"undefined"!=typeof navigator&&"ReactNative"===navigator.product)(),ee=(()=>X||Z?n.useLayoutEffect:n.useEffect)(),te=Symbol.for("react-redux-context"),ne="undefined"!=typeof globalThis?globalThis:{};function se(){if(!n.createContext)return{};const e=ne[te]??(ne[te]=new Map);let t=e.get(n.createContext);return t||(t=n.createContext(null),e.set(n.createContext,t)),t}var ae=se();var re=function(e){const{children:t,context:s,serverState:a,store:r}=e,i=n.useMemo(()=>{const e=function(e,t){let n,s=Q,a=0,r=!1;function i(){c.onStateChange&&c.onStateChange()}function o(){a++,n||(n=t?t.addNestedSub(i):e.subscribe(i),s=function(){let e=null,t=null;return{clear(){e=null,t=null},notify(){(()=>{let t=e;for(;t;)t.callback(),t=t.next})()},get(){const t=[];let n=e;for(;n;)t.push(n),n=n.next;return t},subscribe(n){let s=!0;const a=t={callback:n,next:null,prev:t};return a.prev?a.prev.next=a:e=a,function(){s&&null!==e&&(s=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}())}function l(){a--,n&&0===a&&(n(),n=void 0,s.clear(),s=Q)}const c={addNestedSub:function(e){o();const t=s.subscribe(e);let n=!1;return()=>{n||(n=!0,t(),l())}},notifyNestedSubs:function(){s.notify()},handleChangeWrapper:i,isSubscribed:function(){return r},trySubscribe:function(){r||(r=!0,o())},tryUnsubscribe:function(){r&&(r=!1,l())},getListeners:()=>s};return c}(r);return{store:r,subscription:e,getServerState:a?()=>a:void 0}},[r,a]),o=n.useMemo(()=>r.getState(),[r]);ee(()=>{const{subscription:e}=i;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),o!==r.getState()&&e.notifyNestedSubs(),()=>{e.tryUnsubscribe(),e.onStateChange=void 0}},[i,o]);const l=s||ae;return n.createElement(l.Provider,{value:i},t)};function ie(e=ae){return function(){return n.useContext(e)}}var oe=ie();function le(e=ae){const t=e===ae?oe:ie(e),n=()=>{const{store:e}=t();return e};return Object.assign(n,{withTypes:()=>n}),n}var ce=le();function de(e=ae){const t=e===ae?ce:le(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var ue=de(),he=(e,t)=>e===t;function me(e=ae){const t=e===ae?oe:ie(e),s=(e,s={})=>{const{equalityFn:a=he}="function"==typeof s?{equalityFn:s}:s,r=t(),{store:i,subscription:o,getServerState:l}=r;n.useRef(!0);const c=n.useCallback({[e.name]:t=>e(t)}[e.name],[e]),d=K.useSyncExternalStoreWithSelector(o.addNestedSub,i.getState,l||i.getState,c,a);return n.useDebugValue(d),d};return Object.assign(s,{withTypes:()=>s}),s}var pe=me();function fe(e){return(fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ge(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function ye(e){return(ye=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ve(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xe(e,t){return(xe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function be(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var je=function(){function e(){var t,n,s,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);for(var r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return s=this,a=(t=ye(e)).call.apply(t,[this].concat(i)),n=!a||"object"!==fe(a)&&"function"!=typeof a?ve(s):a,be(ve(n),"state",{bootstrapped:!1}),be(ve(n),"_unsubscribe",void 0),be(ve(n),"handlePersistorState",function(){n.props.persistor.getState().bootstrapped&&(n.props.onBeforeLift?Promise.resolve(n.props.onBeforeLift()).finally(function(){return n.setState({bootstrapped:!0})}):n.setState({bootstrapped:!0}),n._unsubscribe&&n._unsubscribe())}),n}var t,s,a;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xe(e,t)}(e,n.PureComponent),t=e,(s=[{key:"componentDidMount",value:function(){this._unsubscribe=this.props.persistor.subscribe(this.handlePersistorState),this.handlePersistorState()}},{key:"componentWillUnmount",value:function(){this._unsubscribe&&this._unsubscribe()}},{key:"render",value:function(){return"function"==typeof this.props.children?this.props.children(this.state.bootstrapped):this.state.bootstrapped?this.props.children:this.props.loading}}])&&ge(t.prototype,s),a&&ge(t,a),e}();be(je,"defaultProps",{children:null,loading:null});const we={},Ne=function(e,t,n){if(!t||0===t.length)return e();const s=document.getElementsByTagName("link");return Promise.all(t.map(e=>{if(e=function(e,t){return new URL(e,t).href}(e,n),e in we)return;we[e]=!0;const t=e.endsWith(".css"),a=t?'[rel="stylesheet"]':"";if(!!n)for(let n=s.length-1;n>=0;n--){const a=s[n];if(a.href===e&&(!t||"stylesheet"===a.rel))return}else if(document.querySelector(`link[href="${e}"]${a}`))return;const r=document.createElement("link");return r.rel=t?"stylesheet":"modulepreload",t||(r.as="script",r.crossOrigin=""),r.href=e,document.head.appendChild(r),t?new Promise((t,n)=>{r.addEventListener("load",t),r.addEventListener("error",()=>n(new Error(`Unable to preload CSS for ${e}`)))}):void 0})).then(()=>e()).catch(e=>{const t=new Event("vite:preloadError",{cancelable:!0});if(t.payload=e,window.dispatchEvent(t),!t.defaultPrevented)throw e})};function ke(e){var t,n,s="";if("string"==typeof e||"number"==typeof e)s+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=ke(e[t]))&&(s&&(s+=" "),s+=n);else for(t in e)e[t]&&(s&&(s+=" "),s+=t);return s}function Se(){for(var e,t,n=0,s="";n<arguments.length;)(e=arguments[n++])&&(t=ke(e))&&(s&&(s+=" "),s+=t);return s}const Ce=e=>"number"==typeof e&&!isNaN(e),Te=e=>"string"==typeof e,Pe=e=>"function"==typeof e,Ee=e=>Te(e)||Pe(e)?e:null,Le=e=>n.isValidElement(e)||Te(e)||Pe(e)||Ce(e);function Ie(e){let{enter:t,exit:s,appendPosition:r=!1,collapse:i=!0,collapseDuration:o=300}=e;return function(e){let{children:l,position:c,preventExitTransition:d,done:u,nodeRef:h,isIn:m}=e;const p=r?`${t}--${c}`:t,f=r?`${s}--${c}`:s,g=n.useRef(0);return n.useLayoutEffect(()=>{const e=h.current,t=p.split(" "),n=s=>{s.target===h.current&&(e.dispatchEvent(new Event("d")),e.removeEventListener("animationend",n),e.removeEventListener("animationcancel",n),0===g.current&&"animationcancel"!==s.type&&e.classList.remove(...t))};e.classList.add(...t),e.addEventListener("animationend",n),e.addEventListener("animationcancel",n)},[]),n.useEffect(()=>{const e=h.current,t=()=>{e.removeEventListener("animationend",t),i?function(e,t,n){void 0===n&&(n=300);const{scrollHeight:s,style:a}=e;requestAnimationFrame(()=>{a.minHeight="initial",a.height=s+"px",a.transition=`all ${n}ms`,requestAnimationFrame(()=>{a.height="0",a.padding="0",a.margin="0",setTimeout(t,n)})})}(e,u,o):u()};m||(d?t():(g.current=1,e.className+=` ${f}`,e.addEventListener("animationend",t)))},[m]),a.createElement(a.Fragment,null,l)}}function Ae(e,t){return null!=e?{content:e.content,containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,status:t}:{}}const Oe={list:new Map,emitQueue:new Map,on(e,t){return this.list.has(e)||this.list.set(e,[]),this.list.get(e).push(t),this},off(e,t){if(t){const n=this.list.get(e).filter(e=>e!==t);return this.list.set(e,n),this}return this.list.delete(e),this},cancelEmit(e){const t=this.emitQueue.get(e);return t&&(t.forEach(clearTimeout),this.emitQueue.delete(e)),this},emit(e){this.list.has(e)&&this.list.get(e).forEach(t=>{const n=setTimeout(()=>{t(...[].slice.call(arguments,1))},0);this.emitQueue.has(e)||this.emitQueue.set(e,[]),this.emitQueue.get(e).push(n)})}},De=e=>{let{theme:t,type:n,...s}=e;return a.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:"colored"===t?"currentColor":`var(--toastify-icon-color-${n})`,...s})},Re={info:function(e){return a.createElement(De,{...e},a.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(e){return a.createElement(De,{...e},a.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(e){return a.createElement(De,{...e},a.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(e){return a.createElement(De,{...e},a.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return a.createElement("div",{className:"Toastify__spinner"})}};function Me(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientX:e.clientX}function _e(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientY:e.clientY}function Fe(e){let{closeToast:t,theme:n,ariaLabel:s="close"}=e;return a.createElement("button",{className:`Toastify__close-button Toastify__close-button--${n}`,type:"button",onClick:e=>{e.stopPropagation(),t(e)},"aria-label":s},a.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},a.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function Be(e){let{delay:t,isRunning:n,closeToast:s,type:r="default",hide:i,className:o,style:l,controlledProgress:c,progress:d,rtl:u,isIn:h,theme:m}=e;const p=i||c&&0===d,f={...l,animationDuration:`${t}ms`,animationPlayState:n?"running":"paused",opacity:p?0:1};c&&(f.transform=`scaleX(${d})`);const g=Se("Toastify__progress-bar",c?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${m}`,`Toastify__progress-bar--${r}`,{"Toastify__progress-bar--rtl":u}),y=Pe(o)?o({rtl:u,type:r,defaultClassName:g}):Se(g,o);return a.createElement("div",{role:"progressbar","aria-hidden":p?"true":"false","aria-label":"notification timer",className:y,style:f,[c&&d>=1?"onTransitionEnd":"onAnimationEnd"]:c&&d<1?null:()=>{h&&s()}})}const ze=e=>{const{isRunning:t,preventExitTransition:s,toastRef:r,eventHandlers:i}=function(e){const[t,s]=n.useState(!1),[a,r]=n.useState(!1),i=n.useRef(null),o=n.useRef({start:0,x:0,y:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,boundingRect:null,didMove:!1}).current,l=n.useRef(e),{autoClose:c,pauseOnHover:d,closeToast:u,onClick:h,closeOnClick:m}=e;function p(t){if(e.draggable){"touchstart"===t.nativeEvent.type&&t.nativeEvent.preventDefault(),o.didMove=!1,document.addEventListener("mousemove",v),document.addEventListener("mouseup",x),document.addEventListener("touchmove",v),document.addEventListener("touchend",x);const n=i.current;o.canCloseOnClick=!0,o.canDrag=!0,o.boundingRect=n.getBoundingClientRect(),n.style.transition="",o.x=Me(t.nativeEvent),o.y=_e(t.nativeEvent),"x"===e.draggableDirection?(o.start=o.x,o.removalDistance=n.offsetWidth*(e.draggablePercent/100)):(o.start=o.y,o.removalDistance=n.offsetHeight*(80===e.draggablePercent?1.5*e.draggablePercent:e.draggablePercent/100))}}function f(t){if(o.boundingRect){const{top:n,bottom:s,left:a,right:r}=o.boundingRect;"touchend"!==t.nativeEvent.type&&e.pauseOnHover&&o.x>=a&&o.x<=r&&o.y>=n&&o.y<=s?y():g()}}function g(){s(!0)}function y(){s(!1)}function v(n){const s=i.current;o.canDrag&&s&&(o.didMove=!0,t&&y(),o.x=Me(n),o.y=_e(n),o.delta="x"===e.draggableDirection?o.x-o.start:o.y-o.start,o.start!==o.x&&(o.canCloseOnClick=!1),s.style.transform=`translate${e.draggableDirection}(${o.delta}px)`,s.style.opacity=""+(1-Math.abs(o.delta/o.removalDistance)))}function x(){document.removeEventListener("mousemove",v),document.removeEventListener("mouseup",x),document.removeEventListener("touchmove",v),document.removeEventListener("touchend",x);const t=i.current;if(o.canDrag&&o.didMove&&t){if(o.canDrag=!1,Math.abs(o.delta)>o.removalDistance)return r(!0),void e.closeToast();t.style.transition="transform 0.2s, opacity 0.2s",t.style.transform=`translate${e.draggableDirection}(0)`,t.style.opacity="1"}}n.useEffect(()=>{l.current=e}),n.useEffect(()=>(i.current&&i.current.addEventListener("d",g,{once:!0}),Pe(e.onOpen)&&e.onOpen(n.isValidElement(e.children)&&e.children.props),()=>{const e=l.current;Pe(e.onClose)&&e.onClose(n.isValidElement(e.children)&&e.children.props)}),[]),n.useEffect(()=>(e.pauseOnFocusLoss&&(document.hasFocus()||y(),window.addEventListener("focus",g),window.addEventListener("blur",y)),()=>{e.pauseOnFocusLoss&&(window.removeEventListener("focus",g),window.removeEventListener("blur",y))}),[e.pauseOnFocusLoss]);const b={onMouseDown:p,onTouchStart:p,onMouseUp:f,onTouchEnd:f};return c&&d&&(b.onMouseEnter=y,b.onMouseLeave=g),m&&(b.onClick=e=>{h&&h(e),o.canCloseOnClick&&u()}),{playToast:g,pauseToast:y,isRunning:t,preventExitTransition:a,toastRef:i,eventHandlers:b}}(e),{closeButton:o,children:l,autoClose:c,onClick:d,type:u,hideProgressBar:h,closeToast:m,transition:p,position:f,className:g,style:y,bodyClassName:v,bodyStyle:x,progressClassName:b,progressStyle:j,updateId:w,role:N,progress:k,rtl:S,toastId:C,deleteToast:T,isIn:P,isLoading:E,iconOut:L,closeOnClick:I,theme:A}=e,O=Se("Toastify__toast",`Toastify__toast-theme--${A}`,`Toastify__toast--${u}`,{"Toastify__toast--rtl":S},{"Toastify__toast--close-on-click":I}),D=Pe(g)?g({rtl:S,position:f,type:u,defaultClassName:O}):Se(O,g),R=!!k||!c,M={closeToast:m,type:u,theme:A};let _=null;return!1===o||(_=Pe(o)?o(M):n.isValidElement(o)?n.cloneElement(o,M):Fe(M)),a.createElement(p,{isIn:P,done:T,position:f,preventExitTransition:s,nodeRef:r},a.createElement("div",{id:C,onClick:d,className:D,...i,style:y,ref:r},a.createElement("div",{...P&&{role:N},className:Pe(v)?v({type:u}):Se("Toastify__toast-body",v),style:x},null!=L&&a.createElement("div",{className:Se("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!E})},L),a.createElement("div",null,l)),_,a.createElement(Be,{...w&&!R?{key:`pb-${w}`}:{},rtl:S,theme:A,delay:c,isRunning:t,isIn:P,closeToast:m,hide:h,type:u,style:j,className:b,controlledProgress:R,progress:k||0})))},Ue=function(e,t){return void 0===t&&(t=!1),{enter:`Toastify--animate Toastify__${e}-enter`,exit:`Toastify--animate Toastify__${e}-exit`,appendPosition:t}},He=Ie(Ue("bounce",!0));Ie(Ue("slide",!0)),Ie(Ue("zoom")),Ie(Ue("flip"));const $e=n.forwardRef((e,t)=>{const{getToastToRender:s,containerRef:r,isToastActive:i}=function(e){const[,t]=n.useReducer(e=>e+1,0),[s,a]=n.useState([]),r=n.useRef(null),i=n.useRef(new Map).current,o=e=>-1!==s.indexOf(e),l=n.useRef({toastKey:1,displayedToast:0,count:0,queue:[],props:e,containerId:null,isToastActive:o,getToast:e=>i.get(e)}).current;function c(e){let{containerId:t}=e;const{limit:n}=l.props;!n||t&&l.containerId!==t||(l.count-=l.queue.length,l.queue=[])}function d(e){a(t=>null==e?[]:t.filter(t=>t!==e))}function u(){const{toastContent:e,toastProps:t,staleId:n}=l.queue.shift();m(e,t,n)}function h(e,s){let{delay:a,staleId:o,...c}=s;if(!Le(e)||(h=c,!r.current||l.props.enableMultiContainer&&h.containerId!==l.props.containerId||i.has(h.toastId)&&null==h.updateId))return;var h;const{toastId:p,updateId:f,data:g}=c,{props:y}=l,v=()=>d(p),x=null==f;x&&l.count++;const b={...y,style:y.toastStyle,key:l.toastKey++,...Object.fromEntries(Object.entries(c).filter(e=>{let[t,n]=e;return null!=n})),toastId:p,updateId:f,data:g,closeToast:v,isIn:!1,className:Ee(c.className||y.toastClassName),bodyClassName:Ee(c.bodyClassName||y.bodyClassName),progressClassName:Ee(c.progressClassName||y.progressClassName),autoClose:!c.isLoading&&(j=c.autoClose,w=y.autoClose,!1===j||Ce(j)&&j>0?j:w),deleteToast(){const e=Ae(i.get(p),"removed");i.delete(p),Oe.emit(4,e);const n=l.queue.length;if(l.count=null==p?l.count-l.displayedToast:l.count-1,l.count<0&&(l.count=0),n>0){const e=null==p?l.props.limit:1;if(1===n||1===e)l.displayedToast++,u();else{const t=e>n?n:e;l.displayedToast=t;for(let e=0;e<t;e++)u()}}else t()}};var j,w;b.iconOut=function(e){let{theme:t,type:s,isLoading:a,icon:r}=e,i=null;const o={theme:t,type:s};return!1===r||(Pe(r)?i=r(o):n.isValidElement(r)?i=n.cloneElement(r,o):Te(r)||Ce(r)?i=r:a?i=Re.spinner():s in Re&&(i=Re[s](o))),i}(b),Pe(c.onOpen)&&(b.onOpen=c.onOpen),Pe(c.onClose)&&(b.onClose=c.onClose),b.closeButton=y.closeButton,!1===c.closeButton||Le(c.closeButton)?b.closeButton=c.closeButton:!0===c.closeButton&&(b.closeButton=!Le(y.closeButton)||y.closeButton);let N=e;n.isValidElement(e)&&!Te(e.type)?N=n.cloneElement(e,{closeToast:v,toastProps:b,data:g}):Pe(e)&&(N=e({closeToast:v,toastProps:b,data:g})),y.limit&&y.limit>0&&l.count>y.limit&&x?l.queue.push({toastContent:N,toastProps:b,staleId:o}):Ce(a)?setTimeout(()=>{m(N,b,o)},a):m(N,b,o)}function m(e,t,n){const{toastId:s}=t;n&&i.delete(n);const r={content:e,props:t};i.set(s,r),a(e=>[...e,s].filter(e=>e!==n)),Oe.emit(4,Ae(r,null==r.props.updateId?"added":"updated"))}return n.useEffect(()=>(l.containerId=e.containerId,Oe.cancelEmit(3).on(0,h).on(1,e=>r.current&&d(e)).on(5,c).emit(2,l),()=>{i.clear(),Oe.emit(3,l)}),[]),n.useEffect(()=>{l.props=e,l.isToastActive=o,l.displayedToast=s.length}),{getToastToRender:function(t){const n=new Map,s=Array.from(i.values());return e.newestOnTop&&s.reverse(),s.forEach(e=>{const{position:t}=e.props;n.has(t)||n.set(t,[]),n.get(t).push(e)}),Array.from(n,e=>t(e[0],e[1]))},containerRef:r,isToastActive:o}}(e),{className:o,style:l,rtl:c,containerId:d}=e;function u(e){const t=Se("Toastify__toast-container",`Toastify__toast-container--${e}`,{"Toastify__toast-container--rtl":c});return Pe(o)?o({position:e,rtl:c,defaultClassName:t}):Se(t,Ee(o))}return n.useEffect(()=>{t&&(t.current=r.current)},[]),a.createElement("div",{ref:r,className:"Toastify",id:d},s((e,t)=>{const n=t.length?{...l}:{...l,pointerEvents:"none"};return a.createElement("div",{className:u(e),style:n,key:`container-${e}`},t.map((e,n)=>{let{content:s,props:r}=e;return a.createElement(ze,{...r,isIn:i(r.toastId),style:{...r.style,"--nth":n+1,"--len":t.length},key:`toast-${r.key}`},s)}))}))});$e.displayName="ToastContainer",$e.defaultProps={position:"top-right",transition:He,autoClose:5e3,closeButton:Fe,pauseOnHover:!0,pauseOnFocusLoss:!0,closeOnClick:!0,draggable:!0,draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};let qe,We=new Map,Ve=[],Ye=1;function Ge(){return""+Ye++}function Je(e){return e&&(Te(e.toastId)||Ce(e.toastId))?e.toastId:Ge()}function Ke(e,t){return We.size>0?Oe.emit(0,e,t):Ve.push({content:e,options:t}),t.toastId}function Qe(e,t){return{...t,type:t&&t.type||e,toastId:Je(t)}}function Xe(e){return(t,n)=>Ke(t,Qe(e,n))}function Ze(e,t){return Ke(e,Qe("default",t))}Ze.loading=(e,t)=>Ke(e,Qe("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t})),Ze.promise=function(e,t,n){let s,{pending:a,error:r,success:i}=t;a&&(s=Te(a)?Ze.loading(a,n):Ze.loading(a.render,{...n,...a}));const o={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},l=(e,t,a)=>{if(null==t)return void Ze.dismiss(s);const r={type:e,...o,...n,data:a},i=Te(t)?{render:t}:t;return s?Ze.update(s,{...r,...i}):Ze(i.render,{...r,...i}),a},c=Pe(e)?e():e;return c.then(e=>l("success",i,e)).catch(e=>l("error",r,e)),c},Ze.success=Xe("success"),Ze.info=Xe("info"),Ze.error=Xe("error"),Ze.warning=Xe("warning"),Ze.warn=Ze.warning,Ze.dark=(e,t)=>Ke(e,Qe("default",{theme:"dark",...t})),Ze.dismiss=e=>{We.size>0?Oe.emit(1,e):Ve=Ve.filter(t=>null!=e&&t.options.toastId!==e)},Ze.clearWaitingQueue=function(e){return void 0===e&&(e={}),Oe.emit(5,e)},Ze.isActive=e=>{let t=!1;return We.forEach(n=>{n.isToastActive&&n.isToastActive(e)&&(t=!0)}),t},Ze.update=function(e,t){void 0===t&&(t={}),setTimeout(()=>{const n=function(e,t){let{containerId:n}=t;const s=We.get(n||qe);return s&&s.getToast(e)}(e,t);if(n){const{props:s,content:a}=n,r={delay:100,...s,...t,toastId:t.toastId||e,updateId:Ge()};r.toastId!==e&&(r.staleId=e);const i=r.render||a;delete r.render,Ke(i,r)}},0)},Ze.done=e=>{Ze.update(e,{progress:1})},Ze.onChange=e=>(Oe.on(4,e),()=>{Oe.off(4,e)}),Ze.POSITION={TOP_LEFT:"top-left",TOP_RIGHT:"top-right",TOP_CENTER:"top-center",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",BOTTOM_CENTER:"bottom-center"},Ze.TYPE={INFO:"info",SUCCESS:"success",WARNING:"warning",ERROR:"error",DEFAULT:"default"},Oe.on(2,e=>{qe=e.containerId||e,We.set(qe,e),Ve.forEach(e=>{Oe.emit(0,e.content,e.options)}),Ve=[]}).on(3,e=>{We.delete(e.containerId||e),0===We.size&&Oe.off(0).off(1).off(5)});function et(e){return f({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"22 12 18 12 15 21 9 3 6 12 2 12"}}]})(e)}function tt(e){return f({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"}},{tag:"line",attr:{x1:"12",y1:"8",x2:"12",y2:"12"}},{tag:"line",attr:{x1:"12",y1:"16",x2:"12.01",y2:"16"}}]})(e)}function nt(e){return f({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}},{tag:"line",attr:{x1:"12",y1:"9",x2:"12",y2:"13"}},{tag:"line",attr:{x1:"12",y1:"17",x2:"12.01",y2:"17"}}]})(e)}function st(e){return f({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"7",y1:"7",x2:"17",y2:"17"}},{tag:"polyline",attr:{points:"17 7 17 17 7 17"}}]})(e)}function at(e){return f({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"}},{tag:"polyline",attr:{points:"19 12 12 19 5 12"}}]})(e)}function rt(e){return f({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"12",x2:"5",y2:"12"}},{tag:"polyline",attr:{points:"12 19 5 12 12 5"}}]})(e)}function it(e){return f({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"}},{tag:"polyline",attr:{points:"12 5 19 12 12 19"}}]})(e)}function ot(e){return f({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"7",y1:"17",x2:"17",y2:"7"}},{tag:"polyline",attr:{points:"7 7 17 7 17 17"}}]})(e)}function lt(e){return f({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"19",x2:"12",y2:"5"}},{tag:"polyline",attr:{points:"5 12 12 5 19 12"}}]})(e)}function ct(e){return f({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"8",r:"7"}},{tag:"polyline",attr:{points:"8.21 13.89 7 23 12 20 17 23 15.79 13.88"}}]})(e)}function dt(e){return f({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"20",x2:"18",y2:"10"}},{tag:"line",attr:{x1:"12",y1:"20",x2:"12",y2:"4"}},{tag:"line",attr:{x1:"6",y1:"20",x2:"6",y2:"14"}}]})(e)}function ut(e){return f({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"}},{tag:"path",attr:{d:"M13.73 21a2 2 0 0 1-3.46 0"}}]})(e)}function ht(e){return f({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"}}]})(e)}function mt(e){return f({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}},{tag:"line",attr:{x1:"16",y1:"2",x2:"16",y2:"6"}},{tag:"line",attr:{x1:"8",y1:"2",x2:"8",y2:"6"}},{tag:"line",attr:{x1:"3",y1:"10",x2:"21",y2:"10"}}]})(e)}function pt(e){return f({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}},{tag:"circle",attr:{cx:"12",cy:"13",r:"4"}}]})(e)}function ft(e){return f({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}},{tag:"polyline",attr:{points:"22 4 12 14.01 9 11.01"}}]})(e)}function gt(e){return f({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"20 6 9 17 4 12"}}]})(e)}function yt(e){return f({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"}},{tag:"polyline",attr:{points:"12 6 12 12 16 14"}}]})(e)}function vt(e){return f({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3H6a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3V6a3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3h12a3 3 0 0 0 3-3 3 3 0 0 0-3-3z"}}]})(e)}function xt(e){return f({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}},{tag:"path",attr:{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"}}]})(e)}function bt(e){return f({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"9 10 4 15 9 20"}},{tag:"path",attr:{d:"M20 4v7a4 4 0 0 1-4 4H4"}}]})(e)}function jt(e){return f({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"4",y:"4",width:"16",height:"16",rx:"2",ry:"2"}},{tag:"rect",attr:{x:"9",y:"9",width:"6",height:"6"}},{tag:"line",attr:{x1:"9",y1:"1",x2:"9",y2:"4"}},{tag:"line",attr:{x1:"15",y1:"1",x2:"15",y2:"4"}},{tag:"line",attr:{x1:"9",y1:"20",x2:"9",y2:"23"}},{tag:"line",attr:{x1:"15",y1:"20",x2:"15",y2:"23"}},{tag:"line",attr:{x1:"20",y1:"9",x2:"23",y2:"9"}},{tag:"line",attr:{x1:"20",y1:"14",x2:"23",y2:"14"}},{tag:"line",attr:{x1:"1",y1:"9",x2:"4",y2:"9"}},{tag:"line",attr:{x1:"1",y1:"14",x2:"4",y2:"14"}}]})(e)}function wt(e){return f({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"ellipse",attr:{cx:"12",cy:"5",rx:"9",ry:"3"}},{tag:"path",attr:{d:"M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"}},{tag:"path",attr:{d:"M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"}}]})(e)}function Nt(e){return f({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"23"}},{tag:"path",attr:{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"}}]})(e)}function kt(e){return f({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}},{tag:"polyline",attr:{points:"7 10 12 15 17 10"}},{tag:"line",attr:{x1:"12",y1:"15",x2:"12",y2:"3"}}]})(e)}function St(e){return f({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 20h9"}},{tag:"path",attr:{d:"M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"}}]})(e)}function Ct(e){return f({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}},{tag:"path",attr:{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"}}]})(e)}function Tt(e){return f({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}},{tag:"polyline",attr:{points:"15 3 21 3 21 9"}},{tag:"line",attr:{x1:"10",y1:"14",x2:"21",y2:"3"}}]})(e)}function Pt(e){return f({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}},{tag:"circle",attr:{cx:"12",cy:"12",r:"3"}}]})(e)}function Et(e){return f({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}},{tag:"polyline",attr:{points:"14 2 14 8 20 8"}},{tag:"line",attr:{x1:"16",y1:"13",x2:"8",y2:"13"}},{tag:"line",attr:{x1:"16",y1:"17",x2:"8",y2:"17"}},{tag:"polyline",attr:{points:"10 9 9 9 8 9"}}]})(e)}function Lt(e){return f({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"}}]})(e)}function It(e){return f({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"20 12 20 22 4 22 4 12"}},{tag:"rect",attr:{x:"2",y:"7",width:"20",height:"5"}},{tag:"line",attr:{x1:"12",y1:"22",x2:"12",y2:"7"}},{tag:"path",attr:{d:"M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z"}},{tag:"path",attr:{d:"M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z"}}]})(e)}function At(e){return f({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"}},{tag:"line",attr:{x1:"2",y1:"12",x2:"22",y2:"12"}},{tag:"path",attr:{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"}}]})(e)}function Ot(e){return f({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}},{tag:"polyline",attr:{points:"9 22 9 12 15 12 15 22"}}]})(e)}function Dt(e){return f({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"}},{tag:"line",attr:{x1:"12",y1:"16",x2:"12",y2:"12"}},{tag:"line",attr:{x1:"12",y1:"8",x2:"12.01",y2:"8"}}]})(e)}function Rt(e){return f({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"12 2 2 7 12 12 22 7 12 2"}},{tag:"polyline",attr:{points:"2 17 12 22 22 17"}},{tag:"polyline",attr:{points:"2 12 12 17 22 12"}}]})(e)}function Mt(e){return f({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"8",y1:"6",x2:"21",y2:"6"}},{tag:"line",attr:{x1:"8",y1:"12",x2:"21",y2:"12"}},{tag:"line",attr:{x1:"8",y1:"18",x2:"21",y2:"18"}},{tag:"line",attr:{x1:"3",y1:"6",x2:"3.01",y2:"6"}},{tag:"line",attr:{x1:"3",y1:"12",x2:"3.01",y2:"12"}},{tag:"line",attr:{x1:"3",y1:"18",x2:"3.01",y2:"18"}}]})(e)}function _t(e){return f({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"2",x2:"12",y2:"6"}},{tag:"line",attr:{x1:"12",y1:"18",x2:"12",y2:"22"}},{tag:"line",attr:{x1:"4.93",y1:"4.93",x2:"7.76",y2:"7.76"}},{tag:"line",attr:{x1:"16.24",y1:"16.24",x2:"19.07",y2:"19.07"}},{tag:"line",attr:{x1:"2",y1:"12",x2:"6",y2:"12"}},{tag:"line",attr:{x1:"18",y1:"12",x2:"22",y2:"12"}},{tag:"line",attr:{x1:"4.93",y1:"19.07",x2:"7.76",y2:"16.24"}},{tag:"line",attr:{x1:"16.24",y1:"7.76",x2:"19.07",y2:"4.93"}}]})(e)}function Ft(e){return f({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}},{tag:"path",attr:{d:"M7 11V7a5 5 0 0 1 10 0v4"}}]})(e)}function Bt(e){return f({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}},{tag:"polyline",attr:{points:"16 17 21 12 16 7"}},{tag:"line",attr:{x1:"21",y1:"12",x2:"9",y2:"12"}}]})(e)}function zt(e){return f({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}},{tag:"polyline",attr:{points:"22,6 12,13 2,6"}}]})(e)}function Ut(e){return f({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}},{tag:"circle",attr:{cx:"12",cy:"10",r:"3"}}]})(e)}function Ht(e){return f({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"3",y1:"12",x2:"21",y2:"12"}},{tag:"line",attr:{x1:"3",y1:"6",x2:"21",y2:"6"}},{tag:"line",attr:{x1:"3",y1:"18",x2:"21",y2:"18"}}]})(e)}function $t(e){return f({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"}}]})(e)}function qt(e){return f({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"1",y1:"1",x2:"23",y2:"23"}},{tag:"path",attr:{d:"M9 9v3a3 3 0 0 0 5.12 2.12M15 9.34V4a3 3 0 0 0-5.94-.6"}},{tag:"path",attr:{d:"M17 16.95A7 7 0 0 1 5 12v-2m14 0v2a7 7 0 0 1-.11 1.23"}},{tag:"line",attr:{x1:"12",y1:"19",x2:"12",y2:"23"}},{tag:"line",attr:{x1:"8",y1:"23",x2:"16",y2:"23"}}]})(e)}function Wt(e){return f({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"}},{tag:"path",attr:{d:"M19 10v2a7 7 0 0 1-14 0v-2"}},{tag:"line",attr:{x1:"12",y1:"19",x2:"12",y2:"23"}},{tag:"line",attr:{x1:"8",y1:"23",x2:"16",y2:"23"}}]})(e)}function Vt(e){return f({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"}}]})(e)}function Yt(e){return f({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"2",y:"3",width:"20",height:"14",rx:"2",ry:"2"}},{tag:"line",attr:{x1:"8",y1:"21",x2:"16",y2:"21"}},{tag:"line",attr:{x1:"12",y1:"17",x2:"12",y2:"21"}}]})(e)}function Gt(e){return f({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"}}]})(e)}function Jt(e){return f({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"1"}},{tag:"circle",attr:{cx:"19",cy:"12",r:"1"}},{tag:"circle",attr:{cx:"5",cy:"12",r:"1"}}]})(e)}function Kt(e){return f({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"6",y:"4",width:"4",height:"16"}},{tag:"rect",attr:{x:"14",y:"4",width:"4",height:"16"}}]})(e)}function Qt(e){return f({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"5",x2:"5",y2:"19"}},{tag:"circle",attr:{cx:"6.5",cy:"6.5",r:"2.5"}},{tag:"circle",attr:{cx:"17.5",cy:"17.5",r:"2.5"}}]})(e)}function Xt(e){return f({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"}}]})(e)}function Zt(e){return f({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21.21 15.89A10 10 0 1 1 8 2.83"}},{tag:"path",attr:{d:"M22 12A10 10 0 0 0 12 2v10z"}}]})(e)}function en(e){return f({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"5 3 19 12 5 21 5 3"}}]})(e)}function tn(e){return f({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"}},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"}}]})(e)}function nn(e){return f({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 4 23 10 17 10"}},{tag:"polyline",attr:{points:"1 20 1 14 7 14"}},{tag:"path",attr:{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"}}]})(e)}function sn(e){return f({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}},{tag:"polyline",attr:{points:"17 21 17 13 7 13 7 21"}},{tag:"polyline",attr:{points:"7 3 7 8 15 8"}}]})(e)}function an(e){return f({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"}},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"}}]})(e)}function rn(e){return f({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"22",y1:"2",x2:"11",y2:"13"}},{tag:"polygon",attr:{points:"22 2 15 22 11 13 2 9 22 2"}}]})(e)}function on(e){return f({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"3"}},{tag:"path",attr:{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"}}]})(e)}function ln(e){return f({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"18",cy:"5",r:"3"}},{tag:"circle",attr:{cx:"6",cy:"12",r:"3"}},{tag:"circle",attr:{cx:"18",cy:"19",r:"3"}},{tag:"line",attr:{x1:"8.59",y1:"13.51",x2:"15.42",y2:"17.49"}},{tag:"line",attr:{x1:"15.41",y1:"6.51",x2:"8.59",y2:"10.49"}}]})(e)}function cn(e){return f({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"}}]})(e)}function dn(e){return f({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"9",cy:"21",r:"1"}},{tag:"circle",attr:{cx:"20",cy:"21",r:"1"}},{tag:"path",attr:{d:"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"}}]})(e)}function un(e){return f({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"5",y:"2",width:"14",height:"20",rx:"2",ry:"2"}},{tag:"line",attr:{x1:"12",y1:"18",x2:"12.01",y2:"18"}}]})(e)}function hn(e){return f({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"}}]})(e)}function mn(e){return f({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"5"}},{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"3"}},{tag:"line",attr:{x1:"12",y1:"21",x2:"12",y2:"23"}},{tag:"line",attr:{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}},{tag:"line",attr:{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}},{tag:"line",attr:{x1:"1",y1:"12",x2:"3",y2:"12"}},{tag:"line",attr:{x1:"21",y1:"12",x2:"23",y2:"12"}},{tag:"line",attr:{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}},{tag:"line",attr:{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"}}]})(e)}function pn(e){return f({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"}},{tag:"line",attr:{x1:"7",y1:"7",x2:"7.01",y2:"7"}}]})(e)}function fn(e){return f({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"}},{tag:"circle",attr:{cx:"12",cy:"12",r:"6"}},{tag:"circle",attr:{cx:"12",cy:"12",r:"2"}}]})(e)}function gn(e){return f({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"}},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"}},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"}}]})(e)}function yn(e){return f({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 18 13.5 8.5 8.5 13.5 1 6"}},{tag:"polyline",attr:{points:"17 18 23 18 23 12"}}]})(e)}function vn(e){return f({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 6 13.5 15.5 8.5 10.5 1 18"}},{tag:"polyline",attr:{points:"17 6 23 6 23 12"}}]})(e)}function xn(e){return f({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"}}]})(e)}function bn(e){return f({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"}},{tag:"path",attr:{d:"M23 21v-2a4 4 0 0 0-3-3.87"}},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"}}]})(e)}function jn(e){return f({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5"}},{tag:"path",attr:{d:"M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"}}]})(e)}function wn(e){return f({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"}},{tag:"line",attr:{x1:"15",y1:"9",x2:"9",y2:"15"}},{tag:"line",attr:{x1:"9",y1:"9",x2:"15",y2:"15"}}]})(e)}function Nn(e){return f({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"}},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"}}]})(e)}function kn(e){return f({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"}}]})(e)}const Sn=n.createContext(),Cn=()=>n.useContext(Sn),Tn=({children:e})=>{const[t,s]=n.useState(null),[a,r]=n.useState(!1),[i,o]=n.useState(!1),l=n.useCallback((e,t)=>{localStorage.setItem("token",t),localStorage.setItem("user",JSON.stringify(e)),s(e),r(!0)},[]),c=n.useCallback(()=>localStorage.getItem("token"),[]),d=n.useCallback(async e=>{try{const t=await fetch("https://s89-satya-capstone-tradebro.onrender.com/api/user/profile",{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${c()}`},body:JSON.stringify(e)});if(t.ok){const n=(await t.json()).user||e;return localStorage.setItem("user",JSON.stringify(n)),s(n),{success:!0}}throw new Error("Failed to update profile")}catch(t){return{success:!1,error:t.message}}},[c]),u=n.useCallback(()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),s(null),r(!1)},[]);n.useEffect(()=>{const e=localStorage.getItem("token"),t=localStorage.getItem("user");if(e&&t)try{const e=JSON.parse(t);s(e),r(!0)}catch(n){u()}},[u]);const h={user:t,isAuthenticated:a,loading:i,login:l,logout:u,getToken:c,updateProfile:d};return B.jsx(Sn.Provider,{value:h,children:e})};function Pn(e,t){return function(){return e.apply(t,arguments)}}const{toString:En}=Object.prototype,{getPrototypeOf:Ln}=Object,{iterator:In,toStringTag:An}=Symbol,On=(Dn=Object.create(null),e=>{const t=En.call(e);return Dn[t]||(Dn[t]=t.slice(8,-1).toLowerCase())});var Dn;const Rn=e=>(e=e.toLowerCase(),t=>On(t)===e),Mn=e=>t=>typeof t===e,{isArray:_n}=Array,Fn=Mn("undefined");const Bn=Rn("ArrayBuffer");const zn=Mn("string"),Un=Mn("function"),Hn=Mn("number"),$n=e=>null!==e&&"object"==typeof e,qn=e=>{if("object"!==On(e))return!1;const t=Ln(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||An in e||In in e)},Wn=Rn("Date"),Vn=Rn("File"),Yn=Rn("Blob"),Gn=Rn("FileList"),Jn=Rn("URLSearchParams"),[Kn,Qn,Xn,Zn]=["ReadableStream","Request","Response","Headers"].map(Rn);function es(e,t,{allOwnKeys:n=!1}={}){if(null==e)return;let s,a;if("object"!=typeof e&&(e=[e]),_n(e))for(s=0,a=e.length;s<a;s++)t.call(null,e[s],s,e);else{const a=n?Object.getOwnPropertyNames(e):Object.keys(e),r=a.length;let i;for(s=0;s<r;s++)i=a[s],t.call(null,e[i],i,e)}}function ts(e,t){t=t.toLowerCase();const n=Object.keys(e);let s,a=n.length;for(;a-- >0;)if(s=n[a],t===s.toLowerCase())return s;return null}const ns="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,ss=e=>!Fn(e)&&e!==ns;const as=(rs="undefined"!=typeof Uint8Array&&Ln(Uint8Array),e=>rs&&e instanceof rs);var rs;const is=Rn("HTMLFormElement"),os=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),ls=Rn("RegExp"),cs=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),s={};es(n,(n,a)=>{let r;!1!==(r=t(n,a,e))&&(s[a]=r||n)}),Object.defineProperties(e,s)};const ds=Rn("AsyncFunction"),us=(hs="function"==typeof setImmediate,ms=Un(ns.postMessage),hs?setImmediate:ms?(ps=`axios@${Math.random()}`,fs=[],ns.addEventListener("message",({source:e,data:t})=>{e===ns&&t===ps&&fs.length&&fs.shift()()},!1),e=>{fs.push(e),ns.postMessage(ps,"*")}):e=>setTimeout(e));var hs,ms,ps,fs;const gs="undefined"!=typeof queueMicrotask?queueMicrotask.bind(ns):"undefined"!=typeof process&&process.nextTick||us,ys={isArray:_n,isArrayBuffer:Bn,isBuffer:function(e){return null!==e&&!Fn(e)&&null!==e.constructor&&!Fn(e.constructor)&&Un(e.constructor.isBuffer)&&e.constructor.isBuffer(e)},isFormData:e=>{let t;return e&&("function"==typeof FormData&&e instanceof FormData||Un(e.append)&&("formdata"===(t=On(e))||"object"===t&&Un(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&Bn(e.buffer),t},isString:zn,isNumber:Hn,isBoolean:e=>!0===e||!1===e,isObject:$n,isPlainObject:qn,isReadableStream:Kn,isRequest:Qn,isResponse:Xn,isHeaders:Zn,isUndefined:Fn,isDate:Wn,isFile:Vn,isBlob:Yn,isRegExp:ls,isFunction:Un,isStream:e=>$n(e)&&Un(e.pipe),isURLSearchParams:Jn,isTypedArray:as,isFileList:Gn,forEach:es,merge:function e(){const{caseless:t}=ss(this)&&this||{},n={},s=(s,a)=>{const r=t&&ts(n,a)||a;qn(n[r])&&qn(s)?n[r]=e(n[r],s):qn(s)?n[r]=e({},s):_n(s)?n[r]=s.slice():n[r]=s};for(let a=0,r=arguments.length;a<r;a++)arguments[a]&&es(arguments[a],s);return n},extend:(e,t,n,{allOwnKeys:s}={})=>(es(t,(t,s)=>{n&&Un(t)?e[s]=Pn(t,n):e[s]=t},{allOwnKeys:s}),e),trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,s)=>{e.prototype=Object.create(t.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,s)=>{let a,r,i;const o={};if(t=t||{},null==e)return t;do{for(a=Object.getOwnPropertyNames(e),r=a.length;r-- >0;)i=a[r],s&&!s(i,e,t)||o[i]||(t[i]=e[i],o[i]=!0);e=!1!==n&&Ln(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:On,kindOfTest:Rn,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const s=e.indexOf(t,n);return-1!==s&&s===n},toArray:e=>{if(!e)return null;if(_n(e))return e;let t=e.length;if(!Hn(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[In]).call(e);let s;for(;(s=n.next())&&!s.done;){const n=s.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const s=[];for(;null!==(n=e.exec(t));)s.push(n);return s},isHTMLForm:is,hasOwnProperty:os,hasOwnProp:os,reduceDescriptors:cs,freezeMethods:e=>{cs(e,(t,n)=>{if(Un(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const s=e[n];Un(s)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))})},toObjectSet:(e,t)=>{const n={},s=e=>{e.forEach(e=>{n[e]=!0})};return _n(e)?s(e):s(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,n){return t.toUpperCase()+n}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:ts,global:ns,isContextDefined:ss,isSpecCompliantForm:function(e){return!!(e&&Un(e.append)&&"FormData"===e[An]&&e[In])},toJSONObject:e=>{const t=new Array(10),n=(e,s)=>{if($n(e)){if(t.indexOf(e)>=0)return;if(!("toJSON"in e)){t[s]=e;const a=_n(e)?[]:{};return es(e,(e,t)=>{const r=n(e,s+1);!Fn(r)&&(a[t]=r)}),t[s]=void 0,a}}return e};return n(e,0)},isAsyncFn:ds,isThenable:e=>e&&($n(e)||Un(e))&&Un(e.then)&&Un(e.catch),setImmediate:us,asap:gs,isIterable:e=>null!=e&&Un(e[In])};function vs(e,t,n,s,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),s&&(this.request=s),a&&(this.response=a,this.status=a.status?a.status:null)}ys.inherits(vs,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ys.toJSONObject(this.config),code:this.code,status:this.status}}});const xs=vs.prototype,bs={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{bs[e]={value:e}}),Object.defineProperties(vs,bs),Object.defineProperty(xs,"isAxiosError",{value:!0}),vs.from=(e,t,n,s,a,r)=>{const i=Object.create(xs);return ys.toFlatObject(e,i,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e),vs.call(i,e.message,t,n,s,a),i.cause=e,i.name=e.name,r&&Object.assign(i,r),i};function js(e){return ys.isPlainObject(e)||ys.isArray(e)}function ws(e){return ys.endsWith(e,"[]")?e.slice(0,-2):e}function Ns(e,t,n){return e?e.concat(t).map(function(e,t){return e=ws(e),!n&&t?"["+e+"]":e}).join(n?".":""):t}const ks=ys.toFlatObject(ys,{},null,function(e){return/^is[A-Z]/.test(e)});function Ss(e,t,n){if(!ys.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const s=(n=ys.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!ys.isUndefined(t[e])})).metaTokens,a=n.visitor||c,r=n.dots,i=n.indexes,o=(n.Blob||"undefined"!=typeof Blob&&Blob)&&ys.isSpecCompliantForm(t);if(!ys.isFunction(a))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(ys.isDate(e))return e.toISOString();if(ys.isBoolean(e))return e.toString();if(!o&&ys.isBlob(e))throw new vs("Blob is not supported. Use a Buffer instead.");return ys.isArrayBuffer(e)||ys.isTypedArray(e)?o&&"function"==typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,a){let o=e;if(e&&!a&&"object"==typeof e)if(ys.endsWith(n,"{}"))n=s?n:n.slice(0,-2),e=JSON.stringify(e);else if(ys.isArray(e)&&function(e){return ys.isArray(e)&&!e.some(js)}(e)||(ys.isFileList(e)||ys.endsWith(n,"[]"))&&(o=ys.toArray(e)))return n=ws(n),o.forEach(function(e,s){!ys.isUndefined(e)&&null!==e&&t.append(!0===i?Ns([n],s,r):null===i?n:n+"[]",l(e))}),!1;return!!js(e)||(t.append(Ns(a,n,r),l(e)),!1)}const d=[],u=Object.assign(ks,{defaultVisitor:c,convertValue:l,isVisitable:js});if(!ys.isObject(e))throw new TypeError("data must be an object");return function e(n,s){if(!ys.isUndefined(n)){if(-1!==d.indexOf(n))throw Error("Circular reference detected in "+s.join("."));d.push(n),ys.forEach(n,function(n,r){!0===(!(ys.isUndefined(n)||null===n)&&a.call(t,n,ys.isString(r)?r.trim():r,s,u))&&e(n,s?s.concat(r):[r])}),d.pop()}}(e),t}function Cs(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function Ts(e,t){this._pairs=[],e&&Ss(e,this,t)}const Ps=Ts.prototype;function Es(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Ls(e,t,n){if(!t)return e;const s=n&&n.encode||Es;ys.isFunction(n)&&(n={serialize:n});const a=n&&n.serialize;let r;if(r=a?a(t,n):ys.isURLSearchParams(t)?t.toString():new Ts(t,n).toString(s),r){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+r}return e}Ps.append=function(e,t){this._pairs.push([e,t])},Ps.toString=function(e){const t=e?function(t){return e.call(this,t,Cs)}:Cs;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};const Is=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){ys.forEach(this.handlers,function(t){null!==t&&e(t)})}},As={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Os={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:Ts,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},Ds="undefined"!=typeof window&&"undefined"!=typeof document,Rs="object"==typeof navigator&&navigator||void 0,Ms=Ds&&(!Rs||["ReactNative","NativeScript","NS"].indexOf(Rs.product)<0),_s="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts,Fs=Ds&&window.location.href||"http://localhost",Bs={...Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Ds,hasStandardBrowserEnv:Ms,hasStandardBrowserWebWorkerEnv:_s,navigator:Rs,origin:Fs},Symbol.toStringTag,{value:"Module"})),...Os};function zs(e){function t(e,n,s,a){let r=e[a++];if("__proto__"===r)return!0;const i=Number.isFinite(+r),o=a>=e.length;if(r=!r&&ys.isArray(s)?s.length:r,o)return ys.hasOwnProp(s,r)?s[r]=[s[r],n]:s[r]=n,!i;s[r]&&ys.isObject(s[r])||(s[r]=[]);return t(e,n,s[r],a)&&ys.isArray(s[r])&&(s[r]=function(e){const t={},n=Object.keys(e);let s;const a=n.length;let r;for(s=0;s<a;s++)r=n[s],t[r]=e[r];return t}(s[r])),!i}if(ys.isFormData(e)&&ys.isFunction(e.entries)){const n={};return ys.forEachEntry(e,(e,s)=>{t(function(e){return ys.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}(e),s,n,0)}),n}return null}const Us={transitional:As,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",s=n.indexOf("application/json")>-1,a=ys.isObject(e);a&&ys.isHTMLForm(e)&&(e=new FormData(e));if(ys.isFormData(e))return s?JSON.stringify(zs(e)):e;if(ys.isArrayBuffer(e)||ys.isBuffer(e)||ys.isStream(e)||ys.isFile(e)||ys.isBlob(e)||ys.isReadableStream(e))return e;if(ys.isArrayBufferView(e))return e.buffer;if(ys.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let r;if(a){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Ss(e,new Bs.classes.URLSearchParams,Object.assign({visitor:function(e,t,n,s){return Bs.isNode&&ys.isBuffer(e)?(this.append(t,e.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((r=ys.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Ss(r?{"files[]":e}:e,t&&new t,this.formSerializer)}}return a||s?(t.setContentType("application/json",!1),function(e,t,n){if(ys.isString(e))try{return(t||JSON.parse)(e),ys.trim(e)}catch(s){if("SyntaxError"!==s.name)throw s}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||Us.transitional,n=t&&t.forcedJSONParsing,s="json"===this.responseType;if(ys.isResponse(e)||ys.isReadableStream(e))return e;if(e&&ys.isString(e)&&(n&&!this.responseType||s)){const n=!(t&&t.silentJSONParsing)&&s;try{return JSON.parse(e)}catch(a){if(n){if("SyntaxError"===a.name)throw vs.from(a,vs.ERR_BAD_RESPONSE,this,null,this.response);throw a}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Bs.classes.FormData,Blob:Bs.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ys.forEach(["delete","get","head","post","put","patch"],e=>{Us.headers[e]={}});const Hs=Us,$s=ys.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),qs=Symbol("internals");function Ws(e){return e&&String(e).trim().toLowerCase()}function Vs(e){return!1===e||null==e?e:ys.isArray(e)?e.map(Vs):String(e)}function Ys(e,t,n,s,a){return ys.isFunction(s)?s.call(this,t,n):(a&&(t=n),ys.isString(t)?ys.isString(s)?-1!==t.indexOf(s):ys.isRegExp(s)?s.test(t):void 0:void 0)}class Gs{constructor(e){e&&this.set(e)}set(e,t,n){const s=this;function a(e,t,n){const a=Ws(t);if(!a)throw new Error("header name must be a non-empty string");const r=ys.findKey(s,a);(!r||void 0===s[r]||!0===n||void 0===n&&!1!==s[r])&&(s[r||t]=Vs(e))}const r=(e,t)=>ys.forEach(e,(e,n)=>a(e,n,t));if(ys.isPlainObject(e)||e instanceof this.constructor)r(e,t);else if(ys.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))r((e=>{const t={};let n,s,a;return e&&e.split("\n").forEach(function(e){a=e.indexOf(":"),n=e.substring(0,a).trim().toLowerCase(),s=e.substring(a+1).trim(),!n||t[n]&&$s[n]||("set-cookie"===n?t[n]?t[n].push(s):t[n]=[s]:t[n]=t[n]?t[n]+", "+s:s)}),t})(e),t);else if(ys.isObject(e)&&ys.isIterable(e)){let n,s,a={};for(const t of e){if(!ys.isArray(t))throw TypeError("Object iterator must return a key-value pair");a[s=t[0]]=(n=a[s])?ys.isArray(n)?[...n,t[1]]:[n,t[1]]:t[1]}r(a,t)}else null!=e&&a(t,e,n);return this}get(e,t){if(e=Ws(e)){const n=ys.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=n.exec(e);)t[s[1]]=s[2];return t}(e);if(ys.isFunction(t))return t.call(this,e,n);if(ys.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=Ws(e)){const n=ys.findKey(this,e);return!(!n||void 0===this[n]||t&&!Ys(0,this[n],n,t))}return!1}delete(e,t){const n=this;let s=!1;function a(e){if(e=Ws(e)){const a=ys.findKey(n,e);!a||t&&!Ys(0,n[a],a,t)||(delete n[a],s=!0)}}return ys.isArray(e)?e.forEach(a):a(e),s}clear(e){const t=Object.keys(this);let n=t.length,s=!1;for(;n--;){const a=t[n];e&&!Ys(0,this[a],a,e,!0)||(delete this[a],s=!0)}return s}normalize(e){const t=this,n={};return ys.forEach(this,(s,a)=>{const r=ys.findKey(n,a);if(r)return t[r]=Vs(s),void delete t[a];const i=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,n)=>t.toUpperCase()+n)}(a):String(a).trim();i!==a&&delete t[a],t[i]=Vs(s),n[i]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const t=Object.create(null);return ys.forEach(this,(n,s)=>{null!=n&&!1!==n&&(t[s]=e&&ys.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){const n=new this(e);return t.forEach(e=>n.set(e)),n}static accessor(e){const t=(this[qs]=this[qs]={accessors:{}}).accessors,n=this.prototype;function s(e){const s=Ws(e);t[s]||(!function(e,t){const n=ys.toCamelCase(" "+t);["get","set","has"].forEach(s=>{Object.defineProperty(e,s+n,{value:function(e,n,a){return this[s].call(this,t,e,n,a)},configurable:!0})})}(n,e),t[s]=!0)}return ys.isArray(e)?e.forEach(s):s(e),this}}Gs.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),ys.reduceDescriptors(Gs.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(e){this[n]=e}}}),ys.freezeMethods(Gs);const Js=Gs;function Ks(e,t){const n=this||Hs,s=t||n,a=Js.from(s.headers);let r=s.data;return ys.forEach(e,function(e){r=e.call(n,r,a.normalize(),t?t.status:void 0)}),a.normalize(),r}function Qs(e){return!(!e||!e.__CANCEL__)}function Xs(e,t,n){vs.call(this,null==e?"canceled":e,vs.ERR_CANCELED,t,n),this.name="CanceledError"}function Zs(e,t,n){const s=n.config.validateStatus;n.status&&s&&!s(n.status)?t(new vs("Request failed with status code "+n.status,[vs.ERR_BAD_REQUEST,vs.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}ys.inherits(Xs,vs,{__CANCEL__:!0});const ea=(e,t,n=3)=>{let s=0;const a=function(e,t){e=e||10;const n=new Array(e),s=new Array(e);let a,r=0,i=0;return t=void 0!==t?t:1e3,function(o){const l=Date.now(),c=s[i];a||(a=l),n[r]=o,s[r]=l;let d=i,u=0;for(;d!==r;)u+=n[d++],d%=e;if(r=(r+1)%e,r===i&&(i=(i+1)%e),l-a<t)return;const h=c&&l-c;return h?Math.round(1e3*u/h):void 0}}(50,250);return function(e,t){let n,s,a=0,r=1e3/t;const i=(t,r=Date.now())=>{a=r,n=null,s&&(clearTimeout(s),s=null),e.apply(null,t)};return[(...e)=>{const t=Date.now(),o=t-a;o>=r?i(e,t):(n=e,s||(s=setTimeout(()=>{s=null,i(n)},r-o)))},()=>n&&i(n)]}(n=>{const r=n.loaded,i=n.lengthComputable?n.total:void 0,o=r-s,l=a(o);s=r;e({loaded:r,total:i,progress:i?r/i:void 0,bytes:o,rate:l||void 0,estimated:l&&i&&r<=i?(i-r)/l:void 0,event:n,lengthComputable:null!=i,[t?"download":"upload"]:!0})},n)},ta=(e,t)=>{const n=null!=e;return[s=>t[0]({lengthComputable:n,total:e,loaded:s}),t[1]]},na=e=>(...t)=>ys.asap(()=>e(...t)),sa=Bs.hasStandardBrowserEnv?(aa=new URL(Bs.origin),ra=Bs.navigator&&/(msie|trident)/i.test(Bs.navigator.userAgent),e=>(e=new URL(e,Bs.origin),aa.protocol===e.protocol&&aa.host===e.host&&(ra||aa.port===e.port))):()=>!0;var aa,ra;const ia=Bs.hasStandardBrowserEnv?{write(e,t,n,s,a,r){const i=[e+"="+encodeURIComponent(t)];ys.isNumber(n)&&i.push("expires="+new Date(n).toGMTString()),ys.isString(s)&&i.push("path="+s),ys.isString(a)&&i.push("domain="+a),!0===r&&i.push("secure"),document.cookie=i.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function oa(e,t,n){let s=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(s||0==n)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const la=e=>e instanceof Js?{...e}:e;function ca(e,t){t=t||{};const n={};function s(e,t,n,s){return ys.isPlainObject(e)&&ys.isPlainObject(t)?ys.merge.call({caseless:s},e,t):ys.isPlainObject(t)?ys.merge({},t):ys.isArray(t)?t.slice():t}function a(e,t,n,a){return ys.isUndefined(t)?ys.isUndefined(e)?void 0:s(void 0,e,0,a):s(e,t,0,a)}function r(e,t){if(!ys.isUndefined(t))return s(void 0,t)}function i(e,t){return ys.isUndefined(t)?ys.isUndefined(e)?void 0:s(void 0,e):s(void 0,t)}function o(n,a,r){return r in t?s(n,a):r in e?s(void 0,n):void 0}const l={url:r,method:r,data:r,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:o,headers:(e,t,n)=>a(la(e),la(t),0,!0)};return ys.forEach(Object.keys(Object.assign({},e,t)),function(s){const r=l[s]||a,i=r(e[s],t[s],s);ys.isUndefined(i)&&r!==o||(n[s]=i)}),n}const da=e=>{const t=ca({},e);let n,{data:s,withXSRFToken:a,xsrfHeaderName:r,xsrfCookieName:i,headers:o,auth:l}=t;if(t.headers=o=Js.from(o),t.url=Ls(oa(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),ys.isFormData(s))if(Bs.hasStandardBrowserEnv||Bs.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(!1!==(n=o.getContentType())){const[e,...t]=n?n.split(";").map(e=>e.trim()).filter(Boolean):[];o.setContentType([e||"multipart/form-data",...t].join("; "))}if(Bs.hasStandardBrowserEnv&&(a&&ys.isFunction(a)&&(a=a(t)),a||!1!==a&&sa(t.url))){const e=r&&i&&ia.read(i);e&&o.set(r,e)}return t},ua="undefined"!=typeof XMLHttpRequest&&function(e){return new Promise(function(t,n){const s=da(e);let a=s.data;const r=Js.from(s.headers).normalize();let i,o,l,c,d,{responseType:u,onUploadProgress:h,onDownloadProgress:m}=s;function p(){c&&c(),d&&d(),s.cancelToken&&s.cancelToken.unsubscribe(i),s.signal&&s.signal.removeEventListener("abort",i)}let f=new XMLHttpRequest;function g(){if(!f)return;const s=Js.from("getAllResponseHeaders"in f&&f.getAllResponseHeaders());Zs(function(e){t(e),p()},function(e){n(e),p()},{data:u&&"text"!==u&&"json"!==u?f.response:f.responseText,status:f.status,statusText:f.statusText,headers:s,config:e,request:f}),f=null}f.open(s.method.toUpperCase(),s.url,!0),f.timeout=s.timeout,"onloadend"in f?f.onloadend=g:f.onreadystatechange=function(){f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))&&setTimeout(g)},f.onabort=function(){f&&(n(new vs("Request aborted",vs.ECONNABORTED,e,f)),f=null)},f.onerror=function(){n(new vs("Network Error",vs.ERR_NETWORK,e,f)),f=null},f.ontimeout=function(){let t=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded";const a=s.transitional||As;s.timeoutErrorMessage&&(t=s.timeoutErrorMessage),n(new vs(t,a.clarifyTimeoutError?vs.ETIMEDOUT:vs.ECONNABORTED,e,f)),f=null},void 0===a&&r.setContentType(null),"setRequestHeader"in f&&ys.forEach(r.toJSON(),function(e,t){f.setRequestHeader(t,e)}),ys.isUndefined(s.withCredentials)||(f.withCredentials=!!s.withCredentials),u&&"json"!==u&&(f.responseType=s.responseType),m&&([l,d]=ea(m,!0),f.addEventListener("progress",l)),h&&f.upload&&([o,c]=ea(h),f.upload.addEventListener("progress",o),f.upload.addEventListener("loadend",c)),(s.cancelToken||s.signal)&&(i=t=>{f&&(n(!t||t.type?new Xs(null,e,f):t),f.abort(),f=null)},s.cancelToken&&s.cancelToken.subscribe(i),s.signal&&(s.signal.aborted?i():s.signal.addEventListener("abort",i)));const y=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(s.url);y&&-1===Bs.protocols.indexOf(y)?n(new vs("Unsupported protocol "+y+":",vs.ERR_BAD_REQUEST,e)):f.send(a||null)})},ha=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,s=new AbortController;const a=function(e){if(!n){n=!0,i();const t=e instanceof Error?e:this.reason;s.abort(t instanceof vs?t:new Xs(t instanceof Error?t.message:t))}};let r=t&&setTimeout(()=>{r=null,a(new vs(`timeout ${t} of ms exceeded`,vs.ETIMEDOUT))},t);const i=()=>{e&&(r&&clearTimeout(r),r=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(a):e.removeEventListener("abort",a)}),e=null)};e.forEach(e=>e.addEventListener("abort",a));const{signal:o}=s;return o.unsubscribe=()=>ys.asap(i),o}},ma=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let s,a=0;for(;a<n;)s=a+t,yield e.slice(a,s),a=s},pa=async function*(e){if(e[Symbol.asyncIterator])return void(yield*e);const t=e.getReader();try{for(;;){const{done:e,value:n}=await t.read();if(e)break;yield n}}finally{await t.cancel()}},fa=(e,t,n,s)=>{const a=async function*(e,t){for await(const n of pa(e))yield*ma(n,t)}(e,t);let r,i=0,o=e=>{r||(r=!0,s&&s(e))};return new ReadableStream({async pull(e){try{const{done:t,value:s}=await a.next();if(t)return o(),void e.close();let r=s.byteLength;if(n){let e=i+=r;n(e)}e.enqueue(new Uint8Array(s))}catch(t){throw o(t),t}},cancel:e=>(o(e),a.return())},{highWaterMark:2})},ga="function"==typeof fetch&&"function"==typeof Request&&"function"==typeof Response,ya=ga&&"function"==typeof ReadableStream,va=ga&&("function"==typeof TextEncoder?(xa=new TextEncoder,e=>xa.encode(e)):async e=>new Uint8Array(await new Response(e).arrayBuffer()));var xa;const ba=(e,...t)=>{try{return!!e(...t)}catch(n){return!1}},ja=ya&&ba(()=>{let e=!1;const t=new Request(Bs.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),wa=ya&&ba(()=>ys.isReadableStream(new Response("").body)),Na={stream:wa&&(e=>e.body)};var ka;ga&&(ka=new Response,["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Na[e]&&(Na[e]=ys.isFunction(ka[e])?t=>t[e]():(t,n)=>{throw new vs(`Response type '${e}' is not supported`,vs.ERR_NOT_SUPPORT,n)})}));const Sa=async(e,t)=>{const n=ys.toFiniteNumber(e.getContentLength());return null==n?(async e=>{if(null==e)return 0;if(ys.isBlob(e))return e.size;if(ys.isSpecCompliantForm(e)){const t=new Request(Bs.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return ys.isArrayBufferView(e)||ys.isArrayBuffer(e)?e.byteLength:(ys.isURLSearchParams(e)&&(e+=""),ys.isString(e)?(await va(e)).byteLength:void 0)})(t):n},Ca=ga&&(async e=>{let{url:t,method:n,data:s,signal:a,cancelToken:r,timeout:i,onDownloadProgress:o,onUploadProgress:l,responseType:c,headers:d,withCredentials:u="same-origin",fetchOptions:h}=da(e);c=c?(c+"").toLowerCase():"text";let m,p=ha([a,r&&r.toAbortSignal()],i);const f=p&&p.unsubscribe&&(()=>{p.unsubscribe()});let g;try{if(l&&ja&&"get"!==n&&"head"!==n&&0!==(g=await Sa(d,s))){let e,n=new Request(t,{method:"POST",body:s,duplex:"half"});if(ys.isFormData(s)&&(e=n.headers.get("content-type"))&&d.setContentType(e),n.body){const[e,t]=ta(g,ea(na(l)));s=fa(n.body,65536,e,t)}}ys.isString(u)||(u=u?"include":"omit");const a="credentials"in Request.prototype;m=new Request(t,{...h,signal:p,method:n.toUpperCase(),headers:d.normalize().toJSON(),body:s,duplex:"half",credentials:a?u:void 0});let r=await fetch(m,h);const i=wa&&("stream"===c||"response"===c);if(wa&&(o||i&&f)){const e={};["status","statusText","headers"].forEach(t=>{e[t]=r[t]});const t=ys.toFiniteNumber(r.headers.get("content-length")),[n,s]=o&&ta(t,ea(na(o),!0))||[];r=new Response(fa(r.body,65536,n,()=>{s&&s(),f&&f()}),e)}c=c||"text";let y=await Na[ys.findKey(Na,c)||"text"](r,e);return!i&&f&&f(),await new Promise((t,n)=>{Zs(t,n,{data:y,headers:Js.from(r.headers),status:r.status,statusText:r.statusText,config:e,request:m})})}catch(y){if(f&&f(),y&&"TypeError"===y.name&&/Load failed|fetch/i.test(y.message))throw Object.assign(new vs("Network Error",vs.ERR_NETWORK,e,m),{cause:y.cause||y});throw vs.from(y,y&&y.code,e,m)}}),Ta={http:null,xhr:ua,fetch:Ca};ys.forEach(Ta,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(n){}Object.defineProperty(e,"adapterName",{value:t})}});const Pa=e=>`- ${e}`,Ea=e=>ys.isFunction(e)||null===e||!1===e,La=e=>{e=ys.isArray(e)?e:[e];const{length:t}=e;let n,s;const a={};for(let r=0;r<t;r++){let t;if(n=e[r],s=n,!Ea(n)&&(s=Ta[(t=String(n)).toLowerCase()],void 0===s))throw new vs(`Unknown adapter '${t}'`);if(s)break;a[t||"#"+r]=s}if(!s){const e=Object.entries(a).map(([e,t])=>`adapter ${e} `+(!1===t?"is not supported by the environment":"is not available in the build"));throw new vs("There is no suitable adapter to dispatch the request "+(t?e.length>1?"since :\n"+e.map(Pa).join("\n"):" "+Pa(e[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return s};function Ia(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Xs(null,e)}function Aa(e){Ia(e),e.headers=Js.from(e.headers),e.data=Ks.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return La(e.adapter||Hs.adapter)(e).then(function(t){return Ia(e),t.data=Ks.call(e,e.transformResponse,t),t.headers=Js.from(t.headers),t},function(t){return Qs(t)||(Ia(e),t&&t.response&&(t.response.data=Ks.call(e,e.transformResponse,t.response),t.response.headers=Js.from(t.response.headers))),Promise.reject(t)})}const Oa="1.10.0",Da={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{Da[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const Ra={};Da.transitional=function(e,t,n){return(s,a,r)=>{if(!1===e)throw new vs(function(e,t){return"[Axios v"+Oa+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}(a," has been removed"+(t?" in "+t:"")),vs.ERR_DEPRECATED);return t&&!Ra[a]&&(Ra[a]=!0),!e||e(s,a,r)}},Da.spelling=function(e){return(e,t)=>!0};const Ma={assertOptions:function(e,t,n){if("object"!=typeof e)throw new vs("options must be an object",vs.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let a=s.length;for(;a-- >0;){const r=s[a],i=t[r];if(i){const t=e[r],n=void 0===t||i(t,r,e);if(!0!==n)throw new vs("option "+r+" must be "+n,vs.ERR_BAD_OPTION_VALUE);continue}if(!0!==n)throw new vs("Unknown option "+r,vs.ERR_BAD_OPTION)}},validators:Da},_a=Ma.validators;class Fa{constructor(e){this.defaults=e||{},this.interceptors={request:new Is,response:new Is}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{n.stack?t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+t):n.stack=t}catch(s){}}throw n}}_request(e,t){"string"==typeof e?(t=t||{}).url=e:t=e||{},t=ca(this.defaults,t);const{transitional:n,paramsSerializer:s,headers:a}=t;void 0!==n&&Ma.assertOptions(n,{silentJSONParsing:_a.transitional(_a.boolean),forcedJSONParsing:_a.transitional(_a.boolean),clarifyTimeoutError:_a.transitional(_a.boolean)},!1),null!=s&&(ys.isFunction(s)?t.paramsSerializer={serialize:s}:Ma.assertOptions(s,{encode:_a.function,serialize:_a.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),Ma.assertOptions(t,{baseUrl:_a.spelling("baseURL"),withXsrfToken:_a.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let r=a&&ys.merge(a.common,a[t.method]);a&&ys.forEach(["delete","get","head","post","put","patch","common"],e=>{delete a[e]}),t.headers=Js.concat(r,a);const i=[];let o=!0;this.interceptors.request.forEach(function(e){"function"==typeof e.runWhen&&!1===e.runWhen(t)||(o=o&&e.synchronous,i.unshift(e.fulfilled,e.rejected))});const l=[];let c;this.interceptors.response.forEach(function(e){l.push(e.fulfilled,e.rejected)});let d,u=0;if(!o){const e=[Aa.bind(this),void 0];for(e.unshift.apply(e,i),e.push.apply(e,l),d=e.length,c=Promise.resolve(t);u<d;)c=c.then(e[u++],e[u++]);return c}d=i.length;let h=t;for(u=0;u<d;){const e=i[u++],t=i[u++];try{h=e(h)}catch(m){t.call(this,m);break}}try{c=Aa.call(this,h)}catch(m){return Promise.reject(m)}for(u=0,d=l.length;u<d;)c=c.then(l[u++],l[u++]);return c}getUri(e){return Ls(oa((e=ca(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}ys.forEach(["delete","get","head","options"],function(e){Fa.prototype[e]=function(t,n){return this.request(ca(n||{},{method:e,url:t,data:(n||{}).data}))}}),ys.forEach(["post","put","patch"],function(e){function t(t){return function(n,s,a){return this.request(ca(a||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:s}))}}Fa.prototype[e]=t(),Fa.prototype[e+"Form"]=t(!0)});const Ba=Fa;class za{constructor(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(e){t=e});const n=this;this.promise.then(e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null}),this.promise.then=e=>{let t;const s=new Promise(e=>{n.subscribe(e),t=e}).then(e);return s.cancel=function(){n.unsubscribe(t)},s},e(function(e,s,a){n.reason||(n.reason=new Xs(e,s,a),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new za(function(t){e=t}),cancel:e}}}const Ua=za;const Ha={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Ha).forEach(([e,t])=>{Ha[t]=e});const $a=Ha;const qa=function e(t){const n=new Ba(t),s=Pn(Ba.prototype.request,n);return ys.extend(s,Ba.prototype,n,{allOwnKeys:!0}),ys.extend(s,n,null,{allOwnKeys:!0}),s.create=function(n){return e(ca(t,n))},s}(Hs);qa.Axios=Ba,qa.CanceledError=Xs,qa.CancelToken=Ua,qa.isCancel=Qs,qa.VERSION=Oa,qa.toFormData=Ss,qa.AxiosError=vs,qa.Cancel=qa.CanceledError,qa.all=function(e){return Promise.all(e)},qa.spread=function(e){return function(t){return e.apply(null,t)}},qa.isAxiosError=function(e){return ys.isObject(e)&&!0===e.isAxiosError},qa.mergeConfig=ca,qa.AxiosHeaders=Js,qa.formToJSON=e=>zs(ys.isHTMLForm(e)?new FormData(e):e),qa.getAdapter=La,qa.HttpStatusCode=$a,qa.default=qa;const Wa=qa;var Va,Ya={exports:{}};
/*!
 * Pusher JavaScript Library v8.4.0
 * https://pusher.com/
 *
 * Copyright 2020, Pusher
 * Released under the MIT licence.
 */window,Va=function(){return function(e){var t={};function n(s){if(t[s])return t[s].exports;var a=t[s]={i:s,l:!1,exports:{}};return e[s].call(a.exports,a,a.exports,n),a.l=!0,a.exports}return n.m=e,n.c=t,n.d=function(e,t,s){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(n.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(s,a,function(t){return e[t]}.bind(null,a));return s},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t,n){var s,a=this&&this.__extends||(s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var r=256,i=function(){function e(e){void 0===e&&(e="="),this._paddingCharacter=e}return e.prototype.encodedLength=function(e){return this._paddingCharacter?(e+2)/3*4|0:(8*e+5)/6|0},e.prototype.encode=function(e){for(var t="",n=0;n<e.length-2;n+=3){var s=e[n]<<16|e[n+1]<<8|e[n+2];t+=this._encodeByte(s>>>18&63),t+=this._encodeByte(s>>>12&63),t+=this._encodeByte(s>>>6&63),t+=this._encodeByte(s>>>0&63)}var a=e.length-n;return a>0&&(s=e[n]<<16|(2===a?e[n+1]<<8:0),t+=this._encodeByte(s>>>18&63),t+=this._encodeByte(s>>>12&63),t+=2===a?this._encodeByte(s>>>6&63):this._paddingCharacter||"",t+=this._paddingCharacter||""),t},e.prototype.maxDecodedLength=function(e){return this._paddingCharacter?e/4*3|0:(6*e+7)/8|0},e.prototype.decodedLength=function(e){return this.maxDecodedLength(e.length-this._getPaddingLength(e))},e.prototype.decode=function(e){if(0===e.length)return new Uint8Array(0);for(var t=this._getPaddingLength(e),n=e.length-t,s=new Uint8Array(this.maxDecodedLength(n)),a=0,i=0,o=0,l=0,c=0,d=0,u=0;i<n-4;i+=4)l=this._decodeChar(e.charCodeAt(i+0)),c=this._decodeChar(e.charCodeAt(i+1)),d=this._decodeChar(e.charCodeAt(i+2)),u=this._decodeChar(e.charCodeAt(i+3)),s[a++]=l<<2|c>>>4,s[a++]=c<<4|d>>>2,s[a++]=d<<6|u,o|=l&r,o|=c&r,o|=d&r,o|=u&r;if(i<n-1&&(l=this._decodeChar(e.charCodeAt(i)),c=this._decodeChar(e.charCodeAt(i+1)),s[a++]=l<<2|c>>>4,o|=l&r,o|=c&r),i<n-2&&(d=this._decodeChar(e.charCodeAt(i+2)),s[a++]=c<<4|d>>>2,o|=d&r),i<n-3&&(u=this._decodeChar(e.charCodeAt(i+3)),s[a++]=d<<6|u,o|=u&r),0!==o)throw new Error("Base64Coder: incorrect characters for decoding");return s},e.prototype._encodeByte=function(e){var t=e;return t+=65,t+=25-e>>>8&6,t+=51-e>>>8&-75,t+=61-e>>>8&-15,t+=62-e>>>8&3,String.fromCharCode(t)},e.prototype._decodeChar=function(e){var t=r;return t+=(42-e&e-44)>>>8&-256+e-43+62,t+=(46-e&e-48)>>>8&-256+e-47+63,t+=(47-e&e-58)>>>8&-256+e-48+52,t+=(64-e&e-91)>>>8&-256+e-65+0,t+=(96-e&e-123)>>>8&-256+e-97+26},e.prototype._getPaddingLength=function(e){var t=0;if(this._paddingCharacter){for(var n=e.length-1;n>=0&&e[n]===this._paddingCharacter;n--)t++;if(e.length<4||t>2)throw new Error("Base64Coder: incorrect padding")}return t},e}();t.Coder=i;var o=new i;t.encode=function(e){return o.encode(e)},t.decode=function(e){return o.decode(e)};var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return a(t,e),t.prototype._encodeByte=function(e){var t=e;return t+=65,t+=25-e>>>8&6,t+=51-e>>>8&-75,t+=61-e>>>8&-13,t+=62-e>>>8&49,String.fromCharCode(t)},t.prototype._decodeChar=function(e){var t=r;return t+=(44-e&e-46)>>>8&-256+e-45+62,t+=(94-e&e-96)>>>8&-256+e-95+63,t+=(47-e&e-58)>>>8&-256+e-48+52,t+=(64-e&e-91)>>>8&-256+e-65+0,t+=(96-e&e-123)>>>8&-256+e-97+26},t}(i);t.URLSafeCoder=l;var c=new l;t.encodeURLSafe=function(e){return c.encode(e)},t.decodeURLSafe=function(e){return c.decode(e)},t.encodedLength=function(e){return o.encodedLength(e)},t.maxDecodedLength=function(e){return o.maxDecodedLength(e)},t.decodedLength=function(e){return o.decodedLength(e)}},function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0});var s="utf8: invalid string",a="utf8: invalid source encoding";function r(e){for(var t=0,n=0;n<e.length;n++){var a=e.charCodeAt(n);if(a<128)t+=1;else if(a<2048)t+=2;else if(a<55296)t+=3;else{if(!(a<=57343))throw new Error(s);if(n>=e.length-1)throw new Error(s);n++,t+=4}}return t}t.encode=function(e){for(var t=new Uint8Array(r(e)),n=0,s=0;s<e.length;s++){var a=e.charCodeAt(s);a<128?t[n++]=a:a<2048?(t[n++]=192|a>>6,t[n++]=128|63&a):a<55296?(t[n++]=224|a>>12,t[n++]=128|a>>6&63,t[n++]=128|63&a):(s++,a=(1023&a)<<10,a|=1023&e.charCodeAt(s),a+=65536,t[n++]=240|a>>18,t[n++]=128|a>>12&63,t[n++]=128|a>>6&63,t[n++]=128|63&a)}return t},t.encodedLength=r,t.decode=function(e){for(var t=[],n=0;n<e.length;n++){var s=e[n];if(128&s){var r=void 0;if(s<224){if(n>=e.length)throw new Error(a);if(128!=(192&(i=e[++n])))throw new Error(a);s=(31&s)<<6|63&i,r=128}else if(s<240){if(n>=e.length-1)throw new Error(a);var i=e[++n],o=e[++n];if(128!=(192&i)||128!=(192&o))throw new Error(a);s=(15&s)<<12|(63&i)<<6|63&o,r=2048}else{if(!(s<248))throw new Error(a);if(n>=e.length-2)throw new Error(a);i=e[++n],o=e[++n];var l=e[++n];if(128!=(192&i)||128!=(192&o)||128!=(192&l))throw new Error(a);s=(15&s)<<18|(63&i)<<12|(63&o)<<6|63&l,r=65536}if(s<r||s>=55296&&s<=57343)throw new Error(a);if(s>=65536){if(s>1114111)throw new Error(a);s-=65536,t.push(String.fromCharCode(55296|s>>10)),s=56320|1023&s}}t.push(String.fromCharCode(s))}return t.join("")}},function(e,t,n){e.exports=n(3).default},function(e,t,n){n.r(t);class s{constructor(e,t){this.lastId=0,this.prefix=e,this.name=t}create(e){this.lastId++;var t=this.lastId,n=this.prefix+t,s=this.name+"["+t+"]",a=!1,r=function(){a||(e.apply(null,arguments),a=!0)};return this[t]=r,{number:t,id:n,name:s,callback:r}}remove(e){delete this[e.number]}}var a=new s("_pusher_script_","Pusher.ScriptReceivers"),r={VERSION:"8.4.0",PROTOCOL:7,wsPort:80,wssPort:443,wsPath:"",httpHost:"sockjs.pusher.com",httpPort:80,httpsPort:443,httpPath:"/pusher",stats_host:"stats.pusher.com",authEndpoint:"/pusher/auth",authTransport:"ajax",activityTimeout:12e4,pongTimeout:3e4,unavailableTimeout:1e4,userAuthentication:{endpoint:"/pusher/user-auth",transport:"ajax"},channelAuthorization:{endpoint:"/pusher/auth",transport:"ajax"},cdn_http:"http://js.pusher.com",cdn_https:"https://js.pusher.com",dependency_suffix:""},i=new s("_pusher_dependencies","Pusher.DependenciesReceivers"),o=new class{constructor(e){this.options=e,this.receivers=e.receivers||a,this.loading={}}load(e,t,n){var s=this;if(s.loading[e]&&s.loading[e].length>0)s.loading[e].push(n);else{s.loading[e]=[n];var a=ut.createScriptRequest(s.getPath(e,t)),r=s.receivers.create(function(t){if(s.receivers.remove(r),s.loading[e]){var n=s.loading[e];delete s.loading[e];for(var i=function(e){e||a.cleanup()},o=0;o<n.length;o++)n[o](t,i)}});a.send(r)}}getRoot(e){var t=ut.getDocument().location.protocol;return(e&&e.useTLS||"https:"===t?this.options.cdn_https:this.options.cdn_http).replace(/\/*$/,"")+"/"+this.options.version}getPath(e,t){return this.getRoot(t)+"/"+e+this.options.suffix+".js"}}({cdn_http:r.cdn_http,cdn_https:r.cdn_https,version:r.VERSION,suffix:r.dependency_suffix,receivers:i});const l={baseUrl:"https://pusher.com",urls:{authenticationEndpoint:{path:"/docs/channels/server_api/authenticating_users"},authorizationEndpoint:{path:"/docs/channels/server_api/authorizing-users/"},javascriptQuickStart:{path:"/docs/javascript_quick_start"},triggeringClientEvents:{path:"/docs/client_api_guide/client_events#trigger-events"},encryptedChannelSupport:{fullUrl:"https://github.com/pusher/pusher-js/tree/cc491015371a4bde5743d1c87a0fbac0feb53195#encrypted-channel-support"}}};var c,d,u=function(e){const t=l.urls[e];if(!t)return"";let n;return t.fullUrl?n=t.fullUrl:t.path&&(n=l.baseUrl+t.path),n?`See: ${n}`:""};(d=c||(c={})).UserAuthentication="user-authentication",d.ChannelAuthorization="channel-authorization";class h extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}class m extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}class p extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}class f extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}class g extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}class y extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}class v extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}class x extends Error{constructor(e){super(e),Object.setPrototypeOf(this,new.target.prototype)}}class b extends Error{constructor(e,t){super(t),this.status=e,Object.setPrototypeOf(this,new.target.prototype)}}var j=function(e,t,n,s,a){const r=ut.createXHR();for(var i in r.open("POST",n.endpoint,!0),r.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.headers)r.setRequestHeader(i,n.headers[i]);if(null!=n.headersProvider){let e=n.headersProvider();for(var i in e)r.setRequestHeader(i,e[i])}return r.onreadystatechange=function(){if(4===r.readyState)if(200===r.status){let t,n=!1;try{t=JSON.parse(r.responseText),n=!0}catch(e){a(new b(200,`JSON returned from ${s.toString()} endpoint was invalid, yet status code was 200. Data was: ${r.responseText}`),null)}n&&a(null,t)}else{let e="";switch(s){case c.UserAuthentication:e=u("authenticationEndpoint");break;case c.ChannelAuthorization:e=`Clients must be authorized to join private or presence channels. ${u("authorizationEndpoint")}`}a(new b(r.status,`Unable to retrieve auth string from ${s.toString()} endpoint - received status: ${r.status} from ${n.endpoint}. ${e}`),null)}},r.send(t),r},w=String.fromCharCode,N="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",k=function(e){var t=e.charCodeAt(0);return t<128?e:t<2048?w(192|t>>>6)+w(128|63&t):w(224|t>>>12&15)+w(128|t>>>6&63)+w(128|63&t)},S=function(e){return e.replace(/[^\x00-\x7F]/g,k)},C=function(e){var t=[0,2,1][e.length%3],n=e.charCodeAt(0)<<16|(e.length>1?e.charCodeAt(1):0)<<8|(e.length>2?e.charCodeAt(2):0);return[N.charAt(n>>>18),N.charAt(n>>>12&63),t>=2?"=":N.charAt(n>>>6&63),t>=1?"=":N.charAt(63&n)].join("")},T=window.btoa||function(e){return e.replace(/[\s\S]{1,3}/g,C)},P=class{constructor(e,t,n,s){this.clear=t,this.timer=e(()=>{this.timer&&(this.timer=s(this.timer))},n)}isRunning(){return null!==this.timer}ensureAborted(){this.timer&&(this.clear(this.timer),this.timer=null)}};function E(e){window.clearTimeout(e)}function L(e){window.clearInterval(e)}class I extends P{constructor(e,t){super(setTimeout,E,e,function(e){return t(),null})}}class A extends P{constructor(e,t){super(setInterval,L,e,function(e){return t(),e})}}var O={now:()=>Date.now?Date.now():(new Date).valueOf(),defer:e=>new I(0,e),method(e,...t){var n=Array.prototype.slice.call(arguments,1);return function(t){return t[e].apply(t,n.concat(arguments))}}},D=O;function R(e,...t){for(var n=0;n<t.length;n++){var s=t[n];for(var a in s)s[a]&&s[a].constructor&&s[a].constructor===Object?e[a]=R(e[a]||{},s[a]):e[a]=s[a]}return e}function M(){for(var e=["Pusher"],t=0;t<arguments.length;t++)"string"==typeof arguments[t]?e.push(arguments[t]):e.push(Y(arguments[t]));return e.join(" : ")}function _(e,t){var n=Array.prototype.indexOf;if(null===e)return-1;if(n&&e.indexOf===n)return e.indexOf(t);for(var s=0,a=e.length;s<a;s++)if(e[s]===t)return s;return-1}function F(e,t){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(e[n],n,e)}function B(e){var t=[];return F(e,function(e,n){t.push(n)}),t}function z(e,t,n){for(var s=0;s<e.length;s++)t.call(n||window,e[s],s,e)}function U(e,t){for(var n=[],s=0;s<e.length;s++)n.push(t(e[s],s,e,n));return n}function H(e,t){t=t||function(e){return!!e};for(var n=[],s=0;s<e.length;s++)t(e[s],s,e,n)&&n.push(e[s]);return n}function $(e,t){var n={};return F(e,function(s,a){(t&&t(s,a,e,n)||Boolean(s))&&(n[a]=s)}),n}function q(e,t){for(var n=0;n<e.length;n++)if(t(e[n],n,e))return!0;return!1}function W(e){return t=function(e){return"object"==typeof e&&(e=Y(e)),encodeURIComponent((t=e.toString(),T(S(t))));var t},n={},F(e,function(e,s){n[s]=t(e)}),n;var t,n}function V(e){var t,n,s=$(e,function(e){return void 0!==e});return U((t=W(s),n=[],F(t,function(e,t){n.push([t,e])}),n),D.method("join","=")).join("&")}function Y(e){try{return JSON.stringify(e)}catch(s){return JSON.stringify((t=[],n=[],function e(s,a){var r,i,o;switch(typeof s){case"object":if(!s)return null;for(r=0;r<t.length;r+=1)if(t[r]===s)return{$ref:n[r]};if(t.push(s),n.push(a),"[object Array]"===Object.prototype.toString.apply(s))for(o=[],r=0;r<s.length;r+=1)o[r]=e(s[r],a+"["+r+"]");else for(i in o={},s)Object.prototype.hasOwnProperty.call(s,i)&&(o[i]=e(s[i],a+"["+JSON.stringify(i)+"]"));return o;case"number":case"string":case"boolean":return s}}(e,"$")))}var t,n}var G=new class{constructor(){this.globalLog=e=>{window.console&&window.console.log&&window.console.log(e)}}debug(...e){this.log(this.globalLog,e)}warn(...e){this.log(this.globalLogWarn,e)}error(...e){this.log(this.globalLogError,e)}globalLogWarn(e){window.console&&window.console.warn?window.console.warn(e):this.globalLog(e)}globalLogError(e){window.console&&window.console.error?window.console.error(e):this.globalLogWarn(e)}log(e,...t){var n=M.apply(this,arguments);It.log?It.log(n):It.logToConsole&&e.bind(this)(n)}},J=function(e,t,n,s,a){void 0===n.headers&&null==n.headersProvider||G.warn(`To send headers with the ${s.toString()} request, you must use AJAX, rather than JSONP.`);var r=e.nextAuthCallbackID.toString();e.nextAuthCallbackID++;var i=e.getDocument(),o=i.createElement("script");e.auth_callbacks[r]=function(e){a(null,e)};var l="Pusher.auth_callbacks['"+r+"']";o.src=n.endpoint+"?callback="+encodeURIComponent(l)+"&"+t;var c=i.getElementsByTagName("head")[0]||i.documentElement;c.insertBefore(o,c.firstChild)};class K{constructor(e){this.src=e}send(e){var t=this,n="Error loading "+t.src;t.script=document.createElement("script"),t.script.id=e.id,t.script.src=t.src,t.script.type="text/javascript",t.script.charset="UTF-8",t.script.addEventListener?(t.script.onerror=function(){e.callback(n)},t.script.onload=function(){e.callback(null)}):t.script.onreadystatechange=function(){"loaded"!==t.script.readyState&&"complete"!==t.script.readyState||e.callback(null)},void 0===t.script.async&&document.attachEvent&&/opera/i.test(navigator.userAgent)?(t.errorScript=document.createElement("script"),t.errorScript.id=e.id+"_error",t.errorScript.text=e.name+"('"+n+"');",t.script.async=t.errorScript.async=!1):t.script.async=!0;var s=document.getElementsByTagName("head")[0];s.insertBefore(t.script,s.firstChild),t.errorScript&&s.insertBefore(t.errorScript,t.script.nextSibling)}cleanup(){this.script&&(this.script.onload=this.script.onerror=null,this.script.onreadystatechange=null),this.script&&this.script.parentNode&&this.script.parentNode.removeChild(this.script),this.errorScript&&this.errorScript.parentNode&&this.errorScript.parentNode.removeChild(this.errorScript),this.script=null,this.errorScript=null}}class Q{constructor(e,t){this.url=e,this.data=t}send(e){if(!this.request){var t=V(this.data),n=this.url+"/"+e.number+"?"+t;this.request=ut.createScriptRequest(n),this.request.send(e)}}cleanup(){this.request&&this.request.cleanup()}}var X={name:"jsonp",getAgent:function(e,t){return function(n,s){var r="http"+(t?"s":"")+"://"+(e.host||e.options.host)+e.options.path,i=ut.createJSONPRequest(r,n),o=ut.ScriptReceivers.create(function(t,n){a.remove(o),i.cleanup(),n&&n.host&&(e.host=n.host),s&&s(t,n)});i.send(o)}}};function Z(e,t,n){return e+(t.useTLS?"s":"")+"://"+(t.useTLS?t.hostTLS:t.hostNonTLS)+n}function ee(e,t){return"/app/"+e+"?protocol="+r.PROTOCOL+"&client=js&version="+r.VERSION+(t?"&"+t:"")}var te={getInitial:function(e,t){return Z("ws",t,(t.httpPath||"")+ee(e,"flash=false"))}},ne={getInitial:function(e,t){return Z("http",t,(t.httpPath||"/pusher")+ee(e))}},se={getInitial:function(e,t){return Z("http",t,t.httpPath||"/pusher")},getPath:function(e,t){return ee(e)}};class ae{constructor(){this._callbacks={}}get(e){return this._callbacks[re(e)]}add(e,t,n){var s=re(e);this._callbacks[s]=this._callbacks[s]||[],this._callbacks[s].push({fn:t,context:n})}remove(e,t,n){if(e||t||n){var s=e?[re(e)]:B(this._callbacks);t||n?this.removeCallback(s,t,n):this.removeAllCallbacks(s)}else this._callbacks={}}removeCallback(e,t,n){z(e,function(e){this._callbacks[e]=H(this._callbacks[e]||[],function(e){return t&&t!==e.fn||n&&n!==e.context}),0===this._callbacks[e].length&&delete this._callbacks[e]},this)}removeAllCallbacks(e){z(e,function(e){delete this._callbacks[e]},this)}}function re(e){return"_"+e}class ie{constructor(e){this.callbacks=new ae,this.global_callbacks=[],this.failThrough=e}bind(e,t,n){return this.callbacks.add(e,t,n),this}bind_global(e){return this.global_callbacks.push(e),this}unbind(e,t,n){return this.callbacks.remove(e,t,n),this}unbind_global(e){return e?(this.global_callbacks=H(this.global_callbacks||[],t=>t!==e),this):(this.global_callbacks=[],this)}unbind_all(){return this.unbind(),this.unbind_global(),this}emit(e,t,n){for(var s=0;s<this.global_callbacks.length;s++)this.global_callbacks[s](e,t);var a=this.callbacks.get(e),r=[];if(n?r.push(t,n):t&&r.push(t),a&&a.length>0)for(s=0;s<a.length;s++)a[s].fn.apply(a[s].context||window,r);else this.failThrough&&this.failThrough(e,t);return this}}class oe extends ie{constructor(e,t,n,s,a){super(),this.initialize=ut.transportConnectionInitializer,this.hooks=e,this.name=t,this.priority=n,this.key=s,this.options=a,this.state="new",this.timeline=a.timeline,this.activityTimeout=a.activityTimeout,this.id=this.timeline.generateUniqueID()}handlesActivityChecks(){return Boolean(this.hooks.handlesActivityChecks)}supportsPing(){return Boolean(this.hooks.supportsPing)}connect(){if(this.socket||"initialized"!==this.state)return!1;var e=this.hooks.urls.getInitial(this.key,this.options);try{this.socket=this.hooks.getSocket(e,this.options)}catch(t){return D.defer(()=>{this.onError(t),this.changeState("closed")}),!1}return this.bindListeners(),G.debug("Connecting",{transport:this.name,url:e}),this.changeState("connecting"),!0}close(){return!!this.socket&&(this.socket.close(),!0)}send(e){return"open"===this.state&&(D.defer(()=>{this.socket&&this.socket.send(e)}),!0)}ping(){"open"===this.state&&this.supportsPing()&&this.socket.ping()}onOpen(){this.hooks.beforeOpen&&this.hooks.beforeOpen(this.socket,this.hooks.urls.getPath(this.key,this.options)),this.changeState("open"),this.socket.onopen=void 0}onError(e){this.emit("error",{type:"WebSocketError",error:e}),this.timeline.error(this.buildTimelineMessage({error:e.toString()}))}onClose(e){e?this.changeState("closed",{code:e.code,reason:e.reason,wasClean:e.wasClean}):this.changeState("closed"),this.unbindListeners(),this.socket=void 0}onMessage(e){this.emit("message",e)}onActivity(){this.emit("activity")}bindListeners(){this.socket.onopen=()=>{this.onOpen()},this.socket.onerror=e=>{this.onError(e)},this.socket.onclose=e=>{this.onClose(e)},this.socket.onmessage=e=>{this.onMessage(e)},this.supportsPing()&&(this.socket.onactivity=()=>{this.onActivity()})}unbindListeners(){this.socket&&(this.socket.onopen=void 0,this.socket.onerror=void 0,this.socket.onclose=void 0,this.socket.onmessage=void 0,this.supportsPing()&&(this.socket.onactivity=void 0))}changeState(e,t){this.state=e,this.timeline.info(this.buildTimelineMessage({state:e,params:t})),this.emit(e,t)}buildTimelineMessage(e){return R({cid:this.id},e)}}class le{constructor(e){this.hooks=e}isSupported(e){return this.hooks.isSupported(e)}createConnection(e,t,n,s){return new oe(this.hooks,e,t,n,s)}}var ce=new le({urls:te,handlesActivityChecks:!1,supportsPing:!1,isInitialized:function(){return Boolean(ut.getWebSocketAPI())},isSupported:function(){return Boolean(ut.getWebSocketAPI())},getSocket:function(e){return ut.createWebSocket(e)}}),de={urls:ne,handlesActivityChecks:!1,supportsPing:!0,isInitialized:function(){return!0}},ue=R({getSocket:function(e){return ut.HTTPFactory.createStreamingSocket(e)}},de),he=R({getSocket:function(e){return ut.HTTPFactory.createPollingSocket(e)}},de),me={isSupported:function(){return ut.isXHRSupported()}},pe={ws:ce,xhr_streaming:new le(R({},ue,me)),xhr_polling:new le(R({},he,me))},fe=new le({file:"sockjs",urls:se,handlesActivityChecks:!0,supportsPing:!1,isSupported:function(){return!0},isInitialized:function(){return void 0!==window.SockJS},getSocket:function(e,t){return new window.SockJS(e,null,{js_path:o.getPath("sockjs",{useTLS:t.useTLS}),ignore_null_origin:t.ignoreNullOrigin})},beforeOpen:function(e,t){e.send(JSON.stringify({path:t}))}}),ge={isSupported:function(e){return ut.isXDRSupported(e.useTLS)}},ye=new le(R({},ue,ge)),ve=new le(R({},he,ge));pe.xdr_streaming=ye,pe.xdr_polling=ve,pe.sockjs=fe;var xe=pe,be=new class extends ie{constructor(){super();var e=this;void 0!==window.addEventListener&&(window.addEventListener("online",function(){e.emit("online")},!1),window.addEventListener("offline",function(){e.emit("offline")},!1))}isOnline(){return void 0===window.navigator.onLine||window.navigator.onLine}};class je{constructor(e,t,n){this.manager=e,this.transport=t,this.minPingDelay=n.minPingDelay,this.maxPingDelay=n.maxPingDelay,this.pingDelay=void 0}createConnection(e,t,n,s){s=R({},s,{activityTimeout:this.pingDelay});var a=this.transport.createConnection(e,t,n,s),r=null,i=function(){a.unbind("open",i),a.bind("closed",o),r=D.now()},o=e=>{if(a.unbind("closed",o),1002===e.code||1003===e.code)this.manager.reportDeath();else if(!e.wasClean&&r){var t=D.now()-r;t<2*this.maxPingDelay&&(this.manager.reportDeath(),this.pingDelay=Math.max(t/2,this.minPingDelay))}};return a.bind("open",i),a}isSupported(e){return this.manager.isAlive()&&this.transport.isSupported(e)}}const we={decodeMessage:function(e){try{var t=JSON.parse(e.data),n=t.data;if("string"==typeof n)try{n=JSON.parse(t.data)}catch(a){}var s={event:t.event,channel:t.channel,data:n};return t.user_id&&(s.user_id=t.user_id),s}catch(a){throw{type:"MessageParseError",error:a,data:e.data}}},encodeMessage:function(e){return JSON.stringify(e)},processHandshake:function(e){var t=we.decodeMessage(e);if("pusher:connection_established"===t.event){if(!t.data.activity_timeout)throw"No activity timeout specified in handshake";return{action:"connected",id:t.data.socket_id,activityTimeout:1e3*t.data.activity_timeout}}if("pusher:error"===t.event)return{action:this.getCloseAction(t.data),error:this.getCloseError(t.data)};throw"Invalid handshake"},getCloseAction:function(e){return e.code<4e3?e.code>=1002&&e.code<=1004?"backoff":null:4e3===e.code?"tls_only":e.code<4100?"refused":e.code<4200?"backoff":e.code<4300?"retry":"refused"},getCloseError:function(e){return 1e3!==e.code&&1001!==e.code?{type:"PusherError",data:{code:e.code,message:e.reason||e.message}}:null}};var Ne=we;class ke extends ie{constructor(e,t){super(),this.id=e,this.transport=t,this.activityTimeout=t.activityTimeout,this.bindListeners()}handlesActivityChecks(){return this.transport.handlesActivityChecks()}send(e){return this.transport.send(e)}send_event(e,t,n){var s={event:e,data:t};return n&&(s.channel=n),G.debug("Event sent",s),this.send(Ne.encodeMessage(s))}ping(){this.transport.supportsPing()?this.transport.ping():this.send_event("pusher:ping",{})}close(){this.transport.close()}bindListeners(){var e={message:e=>{var t;try{t=Ne.decodeMessage(e)}catch(n){this.emit("error",{type:"MessageParseError",error:n,data:e.data})}if(void 0!==t){switch(G.debug("Event recd",t),t.event){case"pusher:error":this.emit("error",{type:"PusherError",data:t.data});break;case"pusher:ping":this.emit("ping");break;case"pusher:pong":this.emit("pong")}this.emit("message",t)}},activity:()=>{this.emit("activity")},error:e=>{this.emit("error",e)},closed:e=>{t(),e&&e.code&&this.handleCloseEvent(e),this.transport=null,this.emit("closed")}},t=()=>{F(e,(e,t)=>{this.transport.unbind(t,e)})};F(e,(e,t)=>{this.transport.bind(t,e)})}handleCloseEvent(e){var t=Ne.getCloseAction(e),n=Ne.getCloseError(e);n&&this.emit("error",n),t&&this.emit(t,{action:t,error:n})}}class Se{constructor(e,t){this.transport=e,this.callback=t,this.bindListeners()}close(){this.unbindListeners(),this.transport.close()}bindListeners(){this.onMessage=e=>{var t;this.unbindListeners();try{t=Ne.processHandshake(e)}catch(n){return this.finish("error",{error:n}),void this.transport.close()}"connected"===t.action?this.finish("connected",{connection:new ke(t.id,this.transport),activityTimeout:t.activityTimeout}):(this.finish(t.action,{error:t.error}),this.transport.close())},this.onClosed=e=>{this.unbindListeners();var t=Ne.getCloseAction(e)||"backoff",n=Ne.getCloseError(e);this.finish(t,{error:n})},this.transport.bind("message",this.onMessage),this.transport.bind("closed",this.onClosed)}unbindListeners(){this.transport.unbind("message",this.onMessage),this.transport.unbind("closed",this.onClosed)}finish(e,t){this.callback(R({transport:this.transport,action:e},t))}}class Ce{constructor(e,t){this.timeline=e,this.options=t||{}}send(e,t){this.timeline.isEmpty()||this.timeline.send(ut.TimelineTransport.getAgent(this,e),t)}}class Te extends ie{constructor(e,t){super(function(t,n){G.debug("No callbacks on "+e+" for "+t)}),this.name=e,this.pusher=t,this.subscribed=!1,this.subscriptionPending=!1,this.subscriptionCancelled=!1}authorize(e,t){return t(null,{auth:""})}trigger(e,t){if(0!==e.indexOf("client-"))throw new h("Event '"+e+"' does not start with 'client-'");if(!this.subscribed){var n=u("triggeringClientEvents");G.warn(`Client event triggered before channel 'subscription_succeeded' event . ${n}`)}return this.pusher.send_event(e,t,this.name)}disconnect(){this.subscribed=!1,this.subscriptionPending=!1}handleEvent(e){var t=e.event,n=e.data;"pusher_internal:subscription_succeeded"===t?this.handleSubscriptionSucceededEvent(e):"pusher_internal:subscription_count"===t?this.handleSubscriptionCountEvent(e):0!==t.indexOf("pusher_internal:")&&this.emit(t,n,{})}handleSubscriptionSucceededEvent(e){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):this.emit("pusher:subscription_succeeded",e.data)}handleSubscriptionCountEvent(e){e.data.subscription_count&&(this.subscriptionCount=e.data.subscription_count),this.emit("pusher:subscription_count",e.data)}subscribe(){this.subscribed||(this.subscriptionPending=!0,this.subscriptionCancelled=!1,this.authorize(this.pusher.connection.socket_id,(e,t)=>{e?(this.subscriptionPending=!1,G.error(e.toString()),this.emit("pusher:subscription_error",Object.assign({},{type:"AuthError",error:e.message},e instanceof b?{status:e.status}:{}))):this.pusher.send_event("pusher:subscribe",{auth:t.auth,channel_data:t.channel_data,channel:this.name})}))}unsubscribe(){this.subscribed=!1,this.pusher.send_event("pusher:unsubscribe",{channel:this.name})}cancelSubscription(){this.subscriptionCancelled=!0}reinstateSubscription(){this.subscriptionCancelled=!1}}class Pe extends Te{authorize(e,t){return this.pusher.config.channelAuthorizer({channelName:this.name,socketId:e},t)}}class Ee{constructor(){this.reset()}get(e){return Object.prototype.hasOwnProperty.call(this.members,e)?{id:e,info:this.members[e]}:null}each(e){F(this.members,(t,n)=>{e(this.get(n))})}setMyID(e){this.myID=e}onSubscription(e){this.members=e.presence.hash,this.count=e.presence.count,this.me=this.get(this.myID)}addMember(e){return null===this.get(e.user_id)&&this.count++,this.members[e.user_id]=e.user_info,this.get(e.user_id)}removeMember(e){var t=this.get(e.user_id);return t&&(delete this.members[e.user_id],this.count--),t}reset(){this.members={},this.count=0,this.myID=null,this.me=null}}var Le=function(e,t,n,s){return new(n||(n=Promise))(function(a,r){function i(e){try{l(s.next(e))}catch(t){r(t)}}function o(e){try{l(s.throw(e))}catch(t){r(t)}}function l(e){var t;e.done?a(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(i,o)}l((s=s.apply(e,t||[])).next())})};class Ie extends Pe{constructor(e,t){super(e,t),this.members=new Ee}authorize(e,t){super.authorize(e,(e,n)=>Le(this,void 0,void 0,function*(){if(!e)if(null!=n.channel_data){var s=JSON.parse(n.channel_data);this.members.setMyID(s.user_id)}else{if(yield this.pusher.user.signinDonePromise,null==this.pusher.user.user_data){let e=u("authorizationEndpoint");return G.error(`Invalid auth response for channel '${this.name}', expected 'channel_data' field. ${e}, or the user should be signed in.`),void t("Invalid auth response")}this.members.setMyID(this.pusher.user.user_data.id)}t(e,n)}))}handleEvent(e){var t=e.event;if(0===t.indexOf("pusher_internal:"))this.handleInternalEvent(e);else{var n=e.data,s={};e.user_id&&(s.user_id=e.user_id),this.emit(t,n,s)}}handleInternalEvent(e){var t=e.event,n=e.data;switch(t){case"pusher_internal:subscription_succeeded":this.handleSubscriptionSucceededEvent(e);break;case"pusher_internal:subscription_count":this.handleSubscriptionCountEvent(e);break;case"pusher_internal:member_added":var s=this.members.addMember(n);this.emit("pusher:member_added",s);break;case"pusher_internal:member_removed":var a=this.members.removeMember(n);a&&this.emit("pusher:member_removed",a)}}handleSubscriptionSucceededEvent(e){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):(this.members.onSubscription(e.data),this.emit("pusher:subscription_succeeded",this.members))}disconnect(){this.members.reset(),super.disconnect()}}var Ae=n(1),Oe=n(0);class De extends Pe{constructor(e,t,n){super(e,t),this.key=null,this.nacl=n}authorize(e,t){super.authorize(e,(e,n)=>{if(e)return void t(e,n);let s=n.shared_secret;s?(this.key=Object(Oe.decode)(s),delete n.shared_secret,t(null,n)):t(new Error(`No shared_secret key in auth payload for encrypted channel: ${this.name}`),null)})}trigger(e,t){throw new y("Client events are not currently supported for encrypted channels")}handleEvent(e){var t=e.event,n=e.data;0!==t.indexOf("pusher_internal:")&&0!==t.indexOf("pusher:")?this.handleEncryptedEvent(t,n):super.handleEvent(e)}handleEncryptedEvent(e,t){if(!this.key)return void G.debug("Received encrypted event before key has been retrieved from the authEndpoint");if(!t.ciphertext||!t.nonce)return void G.error("Unexpected format for encrypted event, expected object with `ciphertext` and `nonce` fields, got: "+t);let n=Object(Oe.decode)(t.ciphertext);if(n.length<this.nacl.secretbox.overheadLength)return void G.error(`Expected encrypted event ciphertext length to be ${this.nacl.secretbox.overheadLength}, got: ${n.length}`);let s=Object(Oe.decode)(t.nonce);if(s.length<this.nacl.secretbox.nonceLength)return void G.error(`Expected encrypted event nonce length to be ${this.nacl.secretbox.nonceLength}, got: ${s.length}`);let a=this.nacl.secretbox.open(n,s,this.key);if(null===a)return G.debug("Failed to decrypt an event, probably because it was encrypted with a different key. Fetching a new key from the authEndpoint..."),void this.authorize(this.pusher.connection.socket_id,(t,r)=>{t?G.error(`Failed to make a request to the authEndpoint: ${r}. Unable to fetch new key, so dropping encrypted event`):(a=this.nacl.secretbox.open(n,s,this.key),null!==a?this.emit(e,this.getDataToEmit(a)):G.error("Failed to decrypt event with new key. Dropping encrypted event"))});this.emit(e,this.getDataToEmit(a))}getDataToEmit(e){let t=Object(Ae.decode)(e);try{return JSON.parse(t)}catch(n){return t}}}class Re extends ie{constructor(e,t){super(),this.state="initialized",this.connection=null,this.key=e,this.options=t,this.timeline=this.options.timeline,this.usingTLS=this.options.useTLS,this.errorCallbacks=this.buildErrorCallbacks(),this.connectionCallbacks=this.buildConnectionCallbacks(this.errorCallbacks),this.handshakeCallbacks=this.buildHandshakeCallbacks(this.errorCallbacks);var n=ut.getNetwork();n.bind("online",()=>{this.timeline.info({netinfo:"online"}),"connecting"!==this.state&&"unavailable"!==this.state||this.retryIn(0)}),n.bind("offline",()=>{this.timeline.info({netinfo:"offline"}),this.connection&&this.sendActivityCheck()}),this.updateStrategy()}connect(){this.connection||this.runner||(this.strategy.isSupported()?(this.updateState("connecting"),this.startConnecting(),this.setUnavailableTimer()):this.updateState("failed"))}send(e){return!!this.connection&&this.connection.send(e)}send_event(e,t,n){return!!this.connection&&this.connection.send_event(e,t,n)}disconnect(){this.disconnectInternally(),this.updateState("disconnected")}isUsingTLS(){return this.usingTLS}startConnecting(){var e=(t,n)=>{t?this.runner=this.strategy.connect(0,e):"error"===n.action?(this.emit("error",{type:"HandshakeError",error:n.error}),this.timeline.error({handshakeError:n.error})):(this.abortConnecting(),this.handshakeCallbacks[n.action](n))};this.runner=this.strategy.connect(0,e)}abortConnecting(){this.runner&&(this.runner.abort(),this.runner=null)}disconnectInternally(){this.abortConnecting(),this.clearRetryTimer(),this.clearUnavailableTimer(),this.connection&&this.abandonConnection().close()}updateStrategy(){this.strategy=this.options.getStrategy({key:this.key,timeline:this.timeline,useTLS:this.usingTLS})}retryIn(e){this.timeline.info({action:"retry",delay:e}),e>0&&this.emit("connecting_in",Math.round(e/1e3)),this.retryTimer=new I(e||0,()=>{this.disconnectInternally(),this.connect()})}clearRetryTimer(){this.retryTimer&&(this.retryTimer.ensureAborted(),this.retryTimer=null)}setUnavailableTimer(){this.unavailableTimer=new I(this.options.unavailableTimeout,()=>{this.updateState("unavailable")})}clearUnavailableTimer(){this.unavailableTimer&&this.unavailableTimer.ensureAborted()}sendActivityCheck(){this.stopActivityCheck(),this.connection.ping(),this.activityTimer=new I(this.options.pongTimeout,()=>{this.timeline.error({pong_timed_out:this.options.pongTimeout}),this.retryIn(0)})}resetActivityCheck(){this.stopActivityCheck(),this.connection&&!this.connection.handlesActivityChecks()&&(this.activityTimer=new I(this.activityTimeout,()=>{this.sendActivityCheck()}))}stopActivityCheck(){this.activityTimer&&this.activityTimer.ensureAborted()}buildConnectionCallbacks(e){return R({},e,{message:e=>{this.resetActivityCheck(),this.emit("message",e)},ping:()=>{this.send_event("pusher:pong",{})},activity:()=>{this.resetActivityCheck()},error:e=>{this.emit("error",e)},closed:()=>{this.abandonConnection(),this.shouldRetry()&&this.retryIn(1e3)}})}buildHandshakeCallbacks(e){return R({},e,{connected:e=>{this.activityTimeout=Math.min(this.options.activityTimeout,e.activityTimeout,e.connection.activityTimeout||1/0),this.clearUnavailableTimer(),this.setConnection(e.connection),this.socket_id=this.connection.id,this.updateState("connected",{socket_id:this.socket_id})}})}buildErrorCallbacks(){let e=e=>t=>{t.error&&this.emit("error",{type:"WebSocketError",error:t.error}),e(t)};return{tls_only:e(()=>{this.usingTLS=!0,this.updateStrategy(),this.retryIn(0)}),refused:e(()=>{this.disconnect()}),backoff:e(()=>{this.retryIn(1e3)}),retry:e(()=>{this.retryIn(0)})}}setConnection(e){for(var t in this.connection=e,this.connectionCallbacks)this.connection.bind(t,this.connectionCallbacks[t]);this.resetActivityCheck()}abandonConnection(){if(this.connection){for(var e in this.stopActivityCheck(),this.connectionCallbacks)this.connection.unbind(e,this.connectionCallbacks[e]);var t=this.connection;return this.connection=null,t}}updateState(e,t){var n=this.state;if(this.state=e,n!==e){var s=e;"connected"===s&&(s+=" with new socket ID "+t.socket_id),G.debug("State changed",n+" -> "+s),this.timeline.info({state:e,params:t}),this.emit("state_change",{previous:n,current:e}),this.emit(e,t)}}shouldRetry(){return"connecting"===this.state||"connected"===this.state}}class Me{constructor(){this.channels={}}add(e,t){return this.channels[e]||(this.channels[e]=function(e,t){if(0===e.indexOf("private-encrypted-")){if(t.config.nacl)return _e.createEncryptedChannel(e,t,t.config.nacl);let n="Tried to subscribe to a private-encrypted- channel but no nacl implementation available",s=u("encryptedChannelSupport");throw new y(`${n}. ${s}`)}if(0===e.indexOf("private-"))return _e.createPrivateChannel(e,t);if(0===e.indexOf("presence-"))return _e.createPresenceChannel(e,t);if(0===e.indexOf("#"))throw new m('Cannot create a channel with name "'+e+'".');return _e.createChannel(e,t)}(e,t)),this.channels[e]}all(){return e=this.channels,t=[],F(e,function(e){t.push(e)}),t;var e,t}find(e){return this.channels[e]}remove(e){var t=this.channels[e];return delete this.channels[e],t}disconnect(){F(this.channels,function(e){e.disconnect()})}}var _e={createChannels:()=>new Me,createConnectionManager:(e,t)=>new Re(e,t),createChannel:(e,t)=>new Te(e,t),createPrivateChannel:(e,t)=>new Pe(e,t),createPresenceChannel:(e,t)=>new Ie(e,t),createEncryptedChannel:(e,t,n)=>new De(e,t,n),createTimelineSender:(e,t)=>new Ce(e,t),createHandshake:(e,t)=>new Se(e,t),createAssistantToTheTransportManager:(e,t,n)=>new je(e,t,n)};class Fe{constructor(e){this.options=e||{},this.livesLeft=this.options.lives||1/0}getAssistant(e){return _e.createAssistantToTheTransportManager(this,e,{minPingDelay:this.options.minPingDelay,maxPingDelay:this.options.maxPingDelay})}isAlive(){return this.livesLeft>0}reportDeath(){this.livesLeft-=1}}class Be{constructor(e,t){this.strategies=e,this.loop=Boolean(t.loop),this.failFast=Boolean(t.failFast),this.timeout=t.timeout,this.timeoutLimit=t.timeoutLimit}isSupported(){return q(this.strategies,D.method("isSupported"))}connect(e,t){var n=this.strategies,s=0,a=this.timeout,r=null,i=(o,l)=>{l?t(null,l):(s+=1,this.loop&&(s%=n.length),s<n.length?(a&&(a*=2,this.timeoutLimit&&(a=Math.min(a,this.timeoutLimit))),r=this.tryStrategy(n[s],e,{timeout:a,failFast:this.failFast},i)):t(!0))};return r=this.tryStrategy(n[s],e,{timeout:a,failFast:this.failFast},i),{abort:function(){r.abort()},forceMinPriority:function(t){e=t,r&&r.forceMinPriority(t)}}}tryStrategy(e,t,n,s){var a=null,r=null;return n.timeout>0&&(a=new I(n.timeout,function(){r.abort(),s(!0)})),r=e.connect(t,function(e,t){e&&a&&a.isRunning()&&!n.failFast||(a&&a.ensureAborted(),s(e,t))}),{abort:function(){a&&a.ensureAborted(),r.abort()},forceMinPriority:function(e){r.forceMinPriority(e)}}}}class ze{constructor(e){this.strategies=e}isSupported(){return q(this.strategies,D.method("isSupported"))}connect(e,t){return function(e,t,n){var s=U(e,function(e,s,a,r){return e.connect(t,n(s,r))});return{abort:function(){z(s,Ue)},forceMinPriority:function(e){z(s,function(t){t.forceMinPriority(e)})}}}(this.strategies,e,function(e,n){return function(s,a){n[e].error=s,s?function(e){return function(e,t){for(var n=0;n<e.length;n++)if(!t(e[n],n,e))return!1;return!0}(e,function(e){return Boolean(e.error)})}(n)&&t(!0):(z(n,function(e){e.forceMinPriority(a.transport.priority)}),t(null,a))}})}}function Ue(e){e.error||e.aborted||(e.abort(),e.aborted=!0)}class He{constructor(e,t,n){this.strategy=e,this.transports=t,this.ttl=n.ttl||18e5,this.usingTLS=n.useTLS,this.timeline=n.timeline}isSupported(){return this.strategy.isSupported()}connect(e,t){var n=this.usingTLS,s=function(e){var t=ut.getLocalStorage();if(t)try{var n=t[$e(e)];if(n)return JSON.parse(n)}catch(s){qe(e)}return null}(n),a=s&&s.cacheSkipCount?s.cacheSkipCount:0,r=[this.strategy];if(s&&s.timestamp+this.ttl>=D.now()){var i=this.transports[s.transport];i&&(["ws","wss"].includes(s.transport)||a>3?(this.timeline.info({cached:!0,transport:s.transport,latency:s.latency}),r.push(new Be([i],{timeout:2*s.latency+1e3,failFast:!0}))):a++)}var o=D.now(),l=r.pop().connect(e,function s(i,c){i?(qe(n),r.length>0?(o=D.now(),l=r.pop().connect(e,s)):t(i)):(function(e,t,n,s){var a=ut.getLocalStorage();if(a)try{a[$e(e)]=Y({timestamp:D.now(),transport:t,latency:n,cacheSkipCount:s})}catch(r){}}(n,c.transport.name,D.now()-o,a),t(null,c))});return{abort:function(){l.abort()},forceMinPriority:function(t){e=t,l&&l.forceMinPriority(t)}}}}function $e(e){return"pusherTransport"+(e?"TLS":"NonTLS")}function qe(e){var t=ut.getLocalStorage();if(t)try{delete t[$e(e)]}catch(n){}}class We{constructor(e,{delay:t}){this.strategy=e,this.options={delay:t}}isSupported(){return this.strategy.isSupported()}connect(e,t){var n,s=this.strategy,a=new I(this.options.delay,function(){n=s.connect(e,t)});return{abort:function(){a.ensureAborted(),n&&n.abort()},forceMinPriority:function(t){e=t,n&&n.forceMinPriority(t)}}}}class Ve{constructor(e,t,n){this.test=e,this.trueBranch=t,this.falseBranch=n}isSupported(){return(this.test()?this.trueBranch:this.falseBranch).isSupported()}connect(e,t){return(this.test()?this.trueBranch:this.falseBranch).connect(e,t)}}class Ye{constructor(e){this.strategy=e}isSupported(){return this.strategy.isSupported()}connect(e,t){var n=this.strategy.connect(e,function(e,s){s&&n.abort(),t(e,s)});return n}}function Ge(e){return function(){return e.isSupported()}}var Je,Ke,Qe=function(e,t,n){var s={};function a(t,a,r,i,o){var l=n(e,t,a,r,i,o);return s[t]=l,l}var r,i=Object.assign({},t,{hostNonTLS:e.wsHost+":"+e.wsPort,hostTLS:e.wsHost+":"+e.wssPort,httpPath:e.wsPath}),o=Object.assign({},i,{useTLS:!0}),l=Object.assign({},t,{hostNonTLS:e.httpHost+":"+e.httpPort,hostTLS:e.httpHost+":"+e.httpsPort,httpPath:e.httpPath}),c={loop:!0,timeout:15e3,timeoutLimit:6e4},d=new Fe({minPingDelay:1e4,maxPingDelay:e.activityTimeout}),u=new Fe({lives:2,minPingDelay:1e4,maxPingDelay:e.activityTimeout}),h=a("ws","ws",3,i,d),m=a("wss","ws",3,o,d),p=a("sockjs","sockjs",1,l),f=a("xhr_streaming","xhr_streaming",1,l,u),g=a("xdr_streaming","xdr_streaming",1,l,u),y=a("xhr_polling","xhr_polling",1,l),v=a("xdr_polling","xdr_polling",1,l),x=new Be([h],c),b=new Be([m],c),j=new Be([p],c),w=new Be([new Ve(Ge(f),f,g)],c),N=new Be([new Ve(Ge(y),y,v)],c),k=new Be([new Ve(Ge(w),new ze([w,new We(N,{delay:4e3})]),N)],c),S=new Ve(Ge(k),k,j);return r=t.useTLS?new ze([x,new We(S,{delay:2e3})]):new ze([x,new We(b,{delay:2e3}),new We(S,{delay:5e3})]),new He(new Ye(new Ve(Ge(h),r,S)),s,{ttl:18e5,timeline:t.timeline,useTLS:t.useTLS})},Xe={getRequest:function(e){var t=new window.XDomainRequest;return t.ontimeout=function(){e.emit("error",new p),e.close()},t.onerror=function(t){e.emit("error",t),e.close()},t.onprogress=function(){t.responseText&&t.responseText.length>0&&e.onChunk(200,t.responseText)},t.onload=function(){t.responseText&&t.responseText.length>0&&e.onChunk(200,t.responseText),e.emit("finished",200),e.close()},t},abortRequest:function(e){e.ontimeout=e.onerror=e.onprogress=e.onload=null,e.abort()}};class Ze extends ie{constructor(e,t,n){super(),this.hooks=e,this.method=t,this.url=n}start(e){this.position=0,this.xhr=this.hooks.getRequest(this),this.unloader=()=>{this.close()},ut.addUnloadListener(this.unloader),this.xhr.open(this.method,this.url,!0),this.xhr.setRequestHeader&&this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.send(e)}close(){this.unloader&&(ut.removeUnloadListener(this.unloader),this.unloader=null),this.xhr&&(this.hooks.abortRequest(this.xhr),this.xhr=null)}onChunk(e,t){for(;;){var n=this.advanceBuffer(t);if(!n)break;this.emit("chunk",{status:e,data:n})}this.isBufferTooLong(t)&&this.emit("buffer_too_long")}advanceBuffer(e){var t=e.slice(this.position),n=t.indexOf("\n");return-1!==n?(this.position+=n+1,t.slice(0,n)):null}isBufferTooLong(e){return this.position===e.length&&e.length>262144}}(Ke=Je||(Je={}))[Ke.CONNECTING=0]="CONNECTING",Ke[Ke.OPEN=1]="OPEN",Ke[Ke.CLOSED=3]="CLOSED";var et=Je,tt=1;function nt(e){var t=-1===e.indexOf("?")?"?":"&";return e+t+"t="+ +new Date+"&n="+tt++}function st(e){return ut.randomInt(e)}var at,rt,it=class{constructor(e,t){this.hooks=e,this.session=st(1e3)+"/"+function(e){for(var t=[],n=0;n<e;n++)t.push(st(32).toString(32));return t.join("")}(8),this.location=function(e){var t=/([^\?]*)\/*(\??.*)/.exec(e);return{base:t[1],queryString:t[2]}}(t),this.readyState=et.CONNECTING,this.openStream()}send(e){return this.sendRaw(JSON.stringify([e]))}ping(){this.hooks.sendHeartbeat(this)}close(e,t){this.onClose(e,t,!0)}sendRaw(e){if(this.readyState!==et.OPEN)return!1;try{return ut.createSocketRequest("POST",nt((t=this.location,n=this.session,t.base+"/"+n+"/xhr_send"))).start(e),!0}catch(s){return!1}var t,n}reconnect(){this.closeStream(),this.openStream()}onClose(e,t,n){this.closeStream(),this.readyState=et.CLOSED,this.onclose&&this.onclose({code:e,reason:t,wasClean:n})}onChunk(e){var t;if(200===e.status)switch(this.readyState===et.OPEN&&this.onActivity(),e.data.slice(0,1)){case"o":t=JSON.parse(e.data.slice(1)||"{}"),this.onOpen(t);break;case"a":t=JSON.parse(e.data.slice(1)||"[]");for(var n=0;n<t.length;n++)this.onEvent(t[n]);break;case"m":t=JSON.parse(e.data.slice(1)||"null"),this.onEvent(t);break;case"h":this.hooks.onHeartbeat(this);break;case"c":t=JSON.parse(e.data.slice(1)||"[]"),this.onClose(t[0],t[1],!0)}}onOpen(e){var t,n,s;this.readyState===et.CONNECTING?(e&&e.hostname&&(this.location.base=(t=this.location.base,n=e.hostname,(s=/(https?:\/\/)([^\/:]+)((\/|:)?.*)/.exec(t))[1]+n+s[3])),this.readyState=et.OPEN,this.onopen&&this.onopen()):this.onClose(1006,"Server lost session",!0)}onEvent(e){this.readyState===et.OPEN&&this.onmessage&&this.onmessage({data:e})}onActivity(){this.onactivity&&this.onactivity()}onError(e){this.onerror&&this.onerror(e)}openStream(){this.stream=ut.createSocketRequest("POST",nt(this.hooks.getReceiveURL(this.location,this.session))),this.stream.bind("chunk",e=>{this.onChunk(e)}),this.stream.bind("finished",e=>{this.hooks.onFinished(this,e)}),this.stream.bind("buffer_too_long",()=>{this.reconnect()});try{this.stream.start()}catch(e){D.defer(()=>{this.onError(e),this.onClose(1006,"Could not start streaming",!1)})}}closeStream(){this.stream&&(this.stream.unbind_all(),this.stream.close(),this.stream=null)}},ot={getReceiveURL:function(e,t){return e.base+"/"+t+"/xhr_streaming"+e.queryString},onHeartbeat:function(e){e.sendRaw("[]")},sendHeartbeat:function(e){e.sendRaw("[]")},onFinished:function(e,t){e.onClose(1006,"Connection interrupted ("+t+")",!1)}},lt={getReceiveURL:function(e,t){return e.base+"/"+t+"/xhr"+e.queryString},onHeartbeat:function(){},sendHeartbeat:function(e){e.sendRaw("[]")},onFinished:function(e,t){200===t?e.reconnect():e.onClose(1006,"Connection interrupted ("+t+")",!1)}},ct={getRequest:function(e){var t=new(ut.getXHRAPI());return t.onreadystatechange=t.onprogress=function(){switch(t.readyState){case 3:t.responseText&&t.responseText.length>0&&e.onChunk(t.status,t.responseText);break;case 4:t.responseText&&t.responseText.length>0&&e.onChunk(t.status,t.responseText),e.emit("finished",t.status),e.close()}},t},abortRequest:function(e){e.onreadystatechange=null,e.abort()}},dt={createStreamingSocket(e){return this.createSocket(ot,e)},createPollingSocket(e){return this.createSocket(lt,e)},createSocket:(e,t)=>new it(e,t),createXHR(e,t){return this.createRequest(ct,e,t)},createRequest:(e,t,n)=>new Ze(e,t,n),createXDR:function(e,t){return this.createRequest(Xe,e,t)}},ut={nextAuthCallbackID:1,auth_callbacks:{},ScriptReceivers:a,DependenciesReceivers:i,getDefaultStrategy:Qe,Transports:xe,transportConnectionInitializer:function(){var e=this;e.timeline.info(e.buildTimelineMessage({transport:e.name+(e.options.useTLS?"s":"")})),e.hooks.isInitialized()?e.changeState("initialized"):e.hooks.file?(e.changeState("initializing"),o.load(e.hooks.file,{useTLS:e.options.useTLS},function(t,n){e.hooks.isInitialized()?(e.changeState("initialized"),n(!0)):(t&&e.onError(t),e.onClose(),n(!1))})):e.onClose()},HTTPFactory:dt,TimelineTransport:X,getXHRAPI:()=>window.XMLHttpRequest,getWebSocketAPI:()=>window.WebSocket||window.MozWebSocket,setup(e){window.Pusher=e;var t=()=>{this.onDocumentBody(e.ready)};window.JSON?t():o.load("json2",{},t)},getDocument:()=>document,getProtocol(){return this.getDocument().location.protocol},getAuthorizers:()=>({ajax:j,jsonp:J}),onDocumentBody(e){document.body?e():setTimeout(()=>{this.onDocumentBody(e)},0)},createJSONPRequest:(e,t)=>new Q(e,t),createScriptRequest:e=>new K(e),getLocalStorage(){try{return window.localStorage}catch(e){return}},createXHR(){return this.getXHRAPI()?this.createXMLHttpRequest():this.createMicrosoftXHR()},createXMLHttpRequest(){return new(this.getXHRAPI())},createMicrosoftXHR:()=>new ActiveXObject("Microsoft.XMLHTTP"),getNetwork:()=>be,createWebSocket(e){return new(this.getWebSocketAPI())(e)},createSocketRequest(e,t){if(this.isXHRSupported())return this.HTTPFactory.createXHR(e,t);if(this.isXDRSupported(0===t.indexOf("https:")))return this.HTTPFactory.createXDR(e,t);throw"Cross-origin HTTP requests are not supported"},isXHRSupported(){var e=this.getXHRAPI();return Boolean(e)&&void 0!==(new e).withCredentials},isXDRSupported(e){var t=e?"https:":"http:",n=this.getProtocol();return Boolean(window.XDomainRequest)&&n===t},addUnloadListener(e){void 0!==window.addEventListener?window.addEventListener("unload",e,!1):void 0!==window.attachEvent&&window.attachEvent("onunload",e)},removeUnloadListener(e){void 0!==window.addEventListener?window.removeEventListener("unload",e,!1):void 0!==window.detachEvent&&window.detachEvent("onunload",e)},randomInt:e=>Math.floor((window.crypto||window.msCrypto).getRandomValues(new Uint32Array(1))[0]/Math.pow(2,32)*e)};(rt=at||(at={}))[rt.ERROR=3]="ERROR",rt[rt.INFO=6]="INFO",rt[rt.DEBUG=7]="DEBUG";var ht=at;class mt{constructor(e,t,n){this.key=e,this.session=t,this.events=[],this.options=n||{},this.sent=0,this.uniqueID=0}log(e,t){e<=this.options.level&&(this.events.push(R({},t,{timestamp:D.now()})),this.options.limit&&this.events.length>this.options.limit&&this.events.shift())}error(e){this.log(ht.ERROR,e)}info(e){this.log(ht.INFO,e)}debug(e){this.log(ht.DEBUG,e)}isEmpty(){return 0===this.events.length}send(e,t){var n=R({session:this.session,bundle:this.sent+1,key:this.key,lib:"js",version:this.options.version,cluster:this.options.cluster,features:this.options.features,timeline:this.events},this.options.params);return this.events=[],e(n,(e,n)=>{e||this.sent++,t&&t(e,n)}),!0}generateUniqueID(){return this.uniqueID++,this.uniqueID}}class pt{constructor(e,t,n,s){this.name=e,this.priority=t,this.transport=n,this.options=s||{}}isSupported(){return this.transport.isSupported({useTLS:this.options.useTLS})}connect(e,t){if(!this.isSupported())return ft(new x,t);if(this.priority<e)return ft(new f,t);var n=!1,s=this.transport.createConnection(this.name,this.priority,this.options.key,this.options),a=null,r=function(){s.unbind("initialized",r),s.connect()},i=function(){a=_e.createHandshake(s,function(e){n=!0,c(),t(null,e)})},o=function(e){c(),t(e)},l=function(){var e;c(),e=Y(s),t(new g(e))},c=function(){s.unbind("initialized",r),s.unbind("open",i),s.unbind("error",o),s.unbind("closed",l)};return s.bind("initialized",r),s.bind("open",i),s.bind("error",o),s.bind("closed",l),s.initialize(),{abort:()=>{n||(c(),a?a.close():s.close())},forceMinPriority:e=>{n||this.priority<e&&(a?a.close():s.close())}}}}function ft(e,t){return D.defer(function(){t(e)}),{abort:function(){},forceMinPriority:function(){}}}const{Transports:gt}=ut;var yt=function(e,t,n,s,a,r){var i,o=gt[n];if(!o)throw new v(n);return e.enabledTransports&&-1===_(e.enabledTransports,t)||e.disabledTransports&&-1!==_(e.disabledTransports,t)?i=vt:(a=Object.assign({ignoreNullOrigin:e.ignoreNullOrigin},a),i=new pt(t,s,r?r.getAssistant(o):o,a)),i},vt={isSupported:function(){return!1},connect:function(e,t){var n=D.defer(function(){t(new x)});return{abort:function(){n.ensureAborted()},forceMinPriority:function(){}}}},xt=e=>{if(void 0===ut.getAuthorizers()[e.transport])throw`'${e.transport}' is not a recognized auth transport`;return(t,n)=>{const s=((e,t)=>{var n="socket_id="+encodeURIComponent(e.socketId);for(var s in t.params)n+="&"+encodeURIComponent(s)+"="+encodeURIComponent(t.params[s]);if(null!=t.paramsProvider){let e=t.paramsProvider();for(var s in e)n+="&"+encodeURIComponent(s)+"="+encodeURIComponent(e[s])}return n})(t,e);ut.getAuthorizers()[e.transport](ut,s,e,c.UserAuthentication,n)}},bt=e=>{if(void 0===ut.getAuthorizers()[e.transport])throw`'${e.transport}' is not a recognized auth transport`;return(t,n)=>{const s=((e,t)=>{var n="socket_id="+encodeURIComponent(e.socketId);for(var s in n+="&channel_name="+encodeURIComponent(e.channelName),t.params)n+="&"+encodeURIComponent(s)+"="+encodeURIComponent(t.params[s]);if(null!=t.paramsProvider){let e=t.paramsProvider();for(var s in e)n+="&"+encodeURIComponent(s)+"="+encodeURIComponent(e[s])}return n})(t,e);ut.getAuthorizers()[e.transport](ut,s,e,c.ChannelAuthorization,n)}};function jt(e){return e.httpHost?e.httpHost:e.cluster?`sockjs-${e.cluster}.pusher.com`:r.httpHost}function wt(e){return e.wsHost?e.wsHost:`ws-${e.cluster}.pusher.com`}function Nt(e){return"https:"===ut.getProtocol()||!1!==e.forceTLS}function kt(e){return"enableStats"in e?e.enableStats:"disableStats"in e&&!e.disableStats}function St(e){const t=Object.assign(Object.assign({},r.userAuthentication),e.userAuthentication);return"customHandler"in t&&null!=t.customHandler?t.customHandler:xt(t)}function Ct(e,t){const n=function(e,t){let n;return"channelAuthorization"in e?n=Object.assign(Object.assign({},r.channelAuthorization),e.channelAuthorization):(n={transport:e.authTransport||r.authTransport,endpoint:e.authEndpoint||r.authEndpoint},"auth"in e&&("params"in e.auth&&(n.params=e.auth.params),"headers"in e.auth&&(n.headers=e.auth.headers)),"authorizer"in e&&(n.customHandler=((e,t,n)=>{const s={authTransport:t.transport,authEndpoint:t.endpoint,auth:{params:t.params,headers:t.headers}};return(t,a)=>{const r=e.channel(t.channelName);n(r,s).authorize(t.socketId,a)}})(t,n,e.authorizer))),n}(e,t);return"customHandler"in n&&null!=n.customHandler?n.customHandler:bt(n)}class Tt extends ie{constructor(e){super(function(e,t){G.debug(`No callbacks on watchlist events for ${e}`)}),this.pusher=e,this.bindWatchlistInternalEvent()}handleEvent(e){e.data.events.forEach(e=>{this.emit(e.name,e)})}bindWatchlistInternalEvent(){this.pusher.connection.bind("message",e=>{"pusher_internal:watchlist_events"===e.event&&this.handleEvent(e)})}}var Pt=function(){let e,t;const n=new Promise((n,s)=>{e=n,t=s});return{promise:n,resolve:e,reject:t}};class Et extends ie{constructor(e){super(function(e,t){G.debug("No callbacks on user for "+e)}),this.signin_requested=!1,this.user_data=null,this.serverToUserChannel=null,this.signinDonePromise=null,this._signinDoneResolve=null,this._onAuthorize=(e,t)=>{if(e)return G.warn(`Error during signin: ${e}`),void this._cleanup();this.pusher.send_event("pusher:signin",{auth:t.auth,user_data:t.user_data})},this.pusher=e,this.pusher.connection.bind("state_change",({previous:e,current:t})=>{"connected"!==e&&"connected"===t&&this._signin(),"connected"===e&&"connected"!==t&&(this._cleanup(),this._newSigninPromiseIfNeeded())}),this.watchlist=new Tt(e),this.pusher.connection.bind("message",e=>{"pusher:signin_success"===e.event&&this._onSigninSuccess(e.data),this.serverToUserChannel&&this.serverToUserChannel.name===e.channel&&this.serverToUserChannel.handleEvent(e)})}signin(){this.signin_requested||(this.signin_requested=!0,this._signin())}_signin(){this.signin_requested&&(this._newSigninPromiseIfNeeded(),"connected"===this.pusher.connection.state&&this.pusher.config.userAuthenticator({socketId:this.pusher.connection.socket_id},this._onAuthorize))}_onSigninSuccess(e){try{this.user_data=JSON.parse(e.user_data)}catch(t){return G.error(`Failed parsing user data after signin: ${e.user_data}`),void this._cleanup()}if("string"!=typeof this.user_data.id||""===this.user_data.id)return G.error(`user_data doesn't contain an id. user_data: ${this.user_data}`),void this._cleanup();this._signinDoneResolve(),this._subscribeChannels()}_subscribeChannels(){this.serverToUserChannel=new Te(`#server-to-user-${this.user_data.id}`,this.pusher),this.serverToUserChannel.bind_global((e,t)=>{0!==e.indexOf("pusher_internal:")&&0!==e.indexOf("pusher:")&&this.emit(e,t)}),(e=>{e.subscriptionPending&&e.subscriptionCancelled?e.reinstateSubscription():e.subscriptionPending||"connected"!==this.pusher.connection.state||e.subscribe()})(this.serverToUserChannel)}_cleanup(){this.user_data=null,this.serverToUserChannel&&(this.serverToUserChannel.unbind_all(),this.serverToUserChannel.disconnect(),this.serverToUserChannel=null),this.signin_requested&&this._signinDoneResolve()}_newSigninPromiseIfNeeded(){if(!this.signin_requested)return;if(this.signinDonePromise&&!this.signinDonePromise.done)return;const{promise:e,resolve:t,reject:n}=Pt();e.done=!1;const s=()=>{e.done=!0};e.then(s).catch(s),this.signinDonePromise=e,this._signinDoneResolve=t}}class Lt{static ready(){Lt.isReady=!0;for(var e=0,t=Lt.instances.length;e<t;e++)Lt.instances[e].connect()}static getClientFeatures(){return B($({ws:ut.Transports.ws},function(e){return e.isSupported({})}))}constructor(e,t){!function(e){if(null==e)throw"You must pass your app key when you instantiate Pusher."}(e),function(e){if(null==e)throw"You must pass an options object";if(null==e.cluster)throw"Options object must provide a cluster";"disableStats"in e&&G.warn("The disableStats option is deprecated in favor of enableStats")}(t),this.key=e,this.config=function(e,t){let n={activityTimeout:e.activityTimeout||r.activityTimeout,cluster:e.cluster,httpPath:e.httpPath||r.httpPath,httpPort:e.httpPort||r.httpPort,httpsPort:e.httpsPort||r.httpsPort,pongTimeout:e.pongTimeout||r.pongTimeout,statsHost:e.statsHost||r.stats_host,unavailableTimeout:e.unavailableTimeout||r.unavailableTimeout,wsPath:e.wsPath||r.wsPath,wsPort:e.wsPort||r.wsPort,wssPort:e.wssPort||r.wssPort,enableStats:kt(e),httpHost:jt(e),useTLS:Nt(e),wsHost:wt(e),userAuthenticator:St(e),channelAuthorizer:Ct(e,t)};return"disabledTransports"in e&&(n.disabledTransports=e.disabledTransports),"enabledTransports"in e&&(n.enabledTransports=e.enabledTransports),"ignoreNullOrigin"in e&&(n.ignoreNullOrigin=e.ignoreNullOrigin),"timelineParams"in e&&(n.timelineParams=e.timelineParams),"nacl"in e&&(n.nacl=e.nacl),n}(t,this),this.channels=_e.createChannels(),this.global_emitter=new ie,this.sessionID=ut.randomInt(1e9),this.timeline=new mt(this.key,this.sessionID,{cluster:this.config.cluster,features:Lt.getClientFeatures(),params:this.config.timelineParams||{},limit:50,level:ht.INFO,version:r.VERSION}),this.config.enableStats&&(this.timelineSender=_e.createTimelineSender(this.timeline,{host:this.config.statsHost,path:"/timeline/v2/"+ut.TimelineTransport.name})),this.connection=_e.createConnectionManager(this.key,{getStrategy:e=>ut.getDefaultStrategy(this.config,e,yt),timeline:this.timeline,activityTimeout:this.config.activityTimeout,pongTimeout:this.config.pongTimeout,unavailableTimeout:this.config.unavailableTimeout,useTLS:Boolean(this.config.useTLS)}),this.connection.bind("connected",()=>{this.subscribeAll(),this.timelineSender&&this.timelineSender.send(this.connection.isUsingTLS())}),this.connection.bind("message",e=>{var t=0===e.event.indexOf("pusher_internal:");if(e.channel){var n=this.channel(e.channel);n&&n.handleEvent(e)}t||this.global_emitter.emit(e.event,e.data)}),this.connection.bind("connecting",()=>{this.channels.disconnect()}),this.connection.bind("disconnected",()=>{this.channels.disconnect()}),this.connection.bind("error",e=>{G.warn(e)}),Lt.instances.push(this),this.timeline.info({instances:Lt.instances.length}),this.user=new Et(this),Lt.isReady&&this.connect()}channel(e){return this.channels.find(e)}allChannels(){return this.channels.all()}connect(){if(this.connection.connect(),this.timelineSender&&!this.timelineSenderTimer){var e=this.connection.isUsingTLS(),t=this.timelineSender;this.timelineSenderTimer=new A(6e4,function(){t.send(e)})}}disconnect(){this.connection.disconnect(),this.timelineSenderTimer&&(this.timelineSenderTimer.ensureAborted(),this.timelineSenderTimer=null)}bind(e,t,n){return this.global_emitter.bind(e,t,n),this}unbind(e,t,n){return this.global_emitter.unbind(e,t,n),this}bind_global(e){return this.global_emitter.bind_global(e),this}unbind_global(e){return this.global_emitter.unbind_global(e),this}unbind_all(e){return this.global_emitter.unbind_all(),this}subscribeAll(){var e;for(e in this.channels.channels)this.channels.channels.hasOwnProperty(e)&&this.subscribe(e)}subscribe(e){var t=this.channels.add(e,this);return t.subscriptionPending&&t.subscriptionCancelled?t.reinstateSubscription():t.subscriptionPending||"connected"!==this.connection.state||t.subscribe(),t}unsubscribe(e){var t=this.channels.find(e);t&&t.subscriptionPending?t.cancelSubscription():(t=this.channels.remove(e))&&t.subscribed&&t.unsubscribe()}send_event(e,t,n){return this.connection.send_event(e,t,n)}shouldUseTLS(){return this.config.useTLS}signin(){this.user.signin()}}Lt.instances=[],Lt.isReady=!1,Lt.logToConsole=!1,Lt.Runtime=ut,Lt.ScriptReceivers=ut.ScriptReceivers,Lt.DependenciesReceivers=ut.DependenciesReceivers,Lt.auth_callbacks=ut.auth_callbacks;var It=t.default=Lt;ut.setup(Lt)}])};const Ga=r(Ya.exports=Va());const Ja=new class{constructor(){this.baseURL="https://s89-satya-capstone-tradebro.onrender.com",this.pusher=null,this.channel=null,this.listeners=new Set,this.isConnected=!1,this.reconnectAttempts=0,this.maxReconnectAttempts=5,this.reconnectDelay=1e3}async initializePusher(e){try{const t="478146ed5eddba9a37cb";this.pusher&&this.disconnectPusher(),this.pusher=new Ga(t,{cluster:"ap2",encrypted:!0,authEndpoint:`${this.baseURL}/pusher/auth`,auth:{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}}),this.channel=this.pusher.subscribe(`private-user-${e}`),this.setupEventListeners(),this.pusher.connection.bind("connected",()=>{this.isConnected=!0,this.reconnectAttempts=0,this.notifyListeners("connection",{status:"connected"})}),this.pusher.connection.bind("disconnected",()=>{this.isConnected=!1,this.notifyListeners("connection",{status:"disconnected"}),this.handleReconnection(e)}),this.pusher.connection.bind("error",e=>{this.notifyListeners("connection",{status:"error",error:e})})}catch(t){}}setupEventListeners(){this.channel&&(this.channel.bind("notification",e=>{this.notifyListeners("notification",e)}),this.channel.bind("notification-update",e=>{this.notifyListeners("notification-update",e)}),this.channel.bind("notifications-read-all",e=>{this.notifyListeners("notifications-read-all",e)}))}async handleReconnection(e){if(this.reconnectAttempts>=this.maxReconnectAttempts)return;this.reconnectAttempts++;const t=this.reconnectDelay*Math.pow(2,this.reconnectAttempts-1);setTimeout(()=>{this.initializePusher(e)},t)}disconnectPusher(){this.channel&&(this.channel.unbind_all(),this.pusher.unsubscribe(this.channel.name)),this.pusher&&this.pusher.disconnect(),this.pusher=null,this.channel=null,this.isConnected=!1}addEventListener(e){return this.listeners.add(e),()=>this.listeners.delete(e)}notifyListeners(e,t){this.listeners.forEach(n=>{try{n(e,t)}catch(s){}})}getAuthHeaders(){return{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}}async getNotifications(e=1,t=10,n="-createdAt"){try{return(await Wa.get(`${this.baseURL}/api/notifications`,{params:{page:e,limit:t,sort:n},headers:this.getAuthHeaders(),timeout:5e3})).data}catch(s){return this.getLocalNotifications(e,t)}}getLocalNotifications(e=1,t=10){try{const n=JSON.parse(localStorage.getItem("tradebro_notifications")||"[]"),s=this.getMockNotifications(1,50).notifications,a=[...n,...s].filter((e,t,n)=>t===n.findIndex(t=>t.id===e.id)).sort((e,t)=>new Date(t.createdAt)-new Date(e.createdAt)),r=(e-1)*t,i=r+t;return{success:!0,notifications:a.slice(r,i),pagination:{page:e,limit:t,total:a.length,hasMore:i<a.length}}}catch(n){return this.getMockNotifications(e,t)}}async getUnreadCount(){try{return(await Wa.get(`${this.baseURL}/api/notifications/unread-count`,{headers:this.getAuthHeaders(),timeout:5e3})).data}catch(e){return{success:!0,count:3}}}async markAsRead(e){try{return(await Wa.put(`${this.baseURL}/api/notifications/${e}/read`,{},{headers:this.getAuthHeaders()})).data}catch(t){return{success:!0,message:"Notification marked as read (fallback)"}}}async markAllAsRead(){try{return(await Wa.put(`${this.baseURL}/api/notifications/read-all`,{},{headers:this.getAuthHeaders()})).data}catch(e){return{success:!0,message:"All notifications marked as read (fallback)"}}}async deleteNotification(e){try{return(await Wa.delete(`${this.baseURL}/api/notifications/${e}`,{headers:this.getAuthHeaders()})).data}catch(t){return{success:!0,message:"Notification deleted (fallback)"}}}async createNotification(e){var t;try{return(await Wa.post(`${this.baseURL}/api/notifications`,e,{headers:this.getAuthHeaders()})).data}catch(n){if(404===(null==(t=n.response)?void 0:t.status))return{success:!0,message:"Notification created (fallback)"};throw this.handleError(n)}}handleError(e){var t;return e.response?{message:(null==(t=e.response.data)?void 0:t.message)||"Server error occurred",status:e.response.status,data:e.response.data}:e.request?{message:"Network error - please check your connection",status:0,data:null}:{message:e.message||"An unexpected error occurred",status:-1,data:null}}getMockNotifications(e=1,t=10){const n=[{id:"1",title:"Trade Executed Successfully",message:"Your buy order for 100 shares of RELIANCE has been executed at ₹2,450.00",type:"success",read:!1,createdAt:new Date(Date.now()-3e5).toISOString(),data:{symbol:"RELIANCE",quantity:100,price:2450}},{id:"2",title:"Price Alert Triggered",message:"TCS has reached your target price of ₹3,500.00",type:"info",read:!1,createdAt:new Date(Date.now()-18e5).toISOString(),data:{symbol:"TCS",targetPrice:3500}},{id:"3",title:"Market Update",message:"NIFTY 50 is up 1.2% today. Your portfolio is performing well!",type:"info",read:!0,createdAt:new Date(Date.now()-72e5).toISOString(),data:{index:"NIFTY50",change:1.2}},{id:"4",title:"Dividend Received",message:"You received ₹150 dividend from HDFC Bank",type:"success",read:!0,createdAt:new Date(Date.now()-864e5).toISOString(),data:{symbol:"HDFCBANK",amount:150}},{id:"5",title:"Stop Loss Triggered",message:"Your stop loss order for INFY has been executed at ₹1,420.00",type:"warning",read:!1,createdAt:new Date(Date.now()-2592e5).toISOString(),data:{symbol:"INFY",price:1420,type:"stop_loss"}}],s=(e-1)*t,a=s+t;return{success:!0,notifications:n.slice(s,a),pagination:{page:e,limit:t,total:n.length,hasMore:a<n.length}}}startMockLiveNotifications(){this.mockInterval||(this.mockInterval=setInterval(()=>{const e=this.generateMockNotification();this.notifyListeners("notification",e)},3e4))}stopMockLiveNotifications(){this.mockInterval&&(clearInterval(this.mockInterval),this.mockInterval=null)}generateMockNotification(){const e=["success","info","warning","error"],t={success:[{title:"Trade Executed",message:"Your buy order for {symbol} has been executed successfully"},{title:"Dividend Received",message:"You received ₹{amount} dividend from {symbol}"},{title:"Profit Booked",message:"Successfully sold {symbol} with {profit}% profit"}],info:[{title:"Price Alert",message:"{symbol} has reached your target price of ₹{price}"},{title:"Market Update",message:"NIFTY 50 is {change}% today"},{title:"News Alert",message:"Important news update for {symbol}"}],warning:[{title:"Stop Loss Alert",message:"{symbol} is approaching your stop loss level"},{title:"High Volatility",message:"{symbol} showing high volatility today"},{title:"Market Closure",message:"Market will close in 30 minutes"}],error:[{title:"Order Failed",message:"Your order for {symbol} could not be executed"},{title:"Connection Issue",message:"Temporary connection issue detected"}]},n=["RELIANCE","TCS","INFY","HDFCBANK","ICICIBANK","WIPRO","ITC"],s=e[Math.floor(Math.random()*e.length)],a=t[s][Math.floor(Math.random()*t[s].length)];return{id:Date.now().toString(),title:a.title,message:a.message.replace("{symbol}",n[Math.floor(Math.random()*n.length)]).replace("{amount}",Math.floor(500*Math.random())+50).replace("{price}",Math.floor(1e3*Math.random())+1e3).replace("{profit}",(20*Math.random()+5).toFixed(1)).replace("{change}",(4*Math.random()-2).toFixed(1)),type:s,read:!1,createdAt:(new Date).toISOString(),data:{}}}getConnectionStatus(){var e,t;return{isConnected:this.isConnected,reconnectAttempts:this.reconnectAttempts,pusherState:(null==(t=null==(e=this.pusher)?void 0:e.connection)?void 0:t.state)||"disconnected"}}},Ka={notifications:[],unreadCount:0,loading:!1,error:null,connectionStatus:"disconnected",filters:{type:"all",read:"all",dateRange:"all"},pagination:{page:1,limit:10,total:0,hasMore:!1}},Qa="SET_LOADING",Xa="SET_ERROR",Za="SET_NOTIFICATIONS",er="ADD_NOTIFICATION",tr="UPDATE_NOTIFICATION",nr="REMOVE_NOTIFICATION",sr="SET_UNREAD_COUNT",ar="MARK_AS_READ",rr="MARK_ALL_AS_READ",ir="SET_CONNECTION_STATUS",or="SET_FILTERS",lr="SET_PAGINATION",cr="CLEAR_ALL";function dr(e,t){switch(t.type){case Qa:return{...e,loading:t.payload};case Xa:return{...e,error:t.payload,loading:!1};case Za:return{...e,notifications:t.payload.notifications||[],pagination:{...e.pagination,...t.payload.pagination},loading:!1,error:null};case er:return{...e,notifications:[t.payload,...e.notifications],unreadCount:e.unreadCount+(t.payload.read?0:1)};case tr:return{...e,notifications:e.notifications.map(e=>(e._id||e.id)===(t.payload._id||t.payload.id)?{...e,...t.payload}:e)};case nr:const n=e.notifications.find(e=>(e._id||e.id)===t.payload);return{...e,notifications:e.notifications.filter(e=>(e._id||e.id)!==t.payload),unreadCount:n&&!n.read?Math.max(0,e.unreadCount-1):e.unreadCount};case sr:return{...e,unreadCount:t.payload};case ar:return{...e,notifications:e.notifications.map(e=>(e._id||e.id)===t.payload?{...e,read:!0,readAt:(new Date).toISOString()}:e),unreadCount:Math.max(0,e.unreadCount-1)};case rr:return{...e,notifications:e.notifications.map(e=>({...e,read:!0,readAt:(new Date).toISOString()})),unreadCount:0};case ir:return{...e,connectionStatus:t.payload};case or:return{...e,filters:{...e.filters,...t.payload},pagination:{...e.pagination,page:1}};case lr:return{...e,pagination:{...e.pagination,...t.payload}};case cr:return{...Ka};default:return e}}const ur=n.createContext(),hr=({children:e})=>{const[t,s]=n.useReducer(dr,Ka),{user:a,isAuthenticated:r}=Cn(),i=n.useCallback((e,t)=>{switch(e){case"notification":s({type:er,payload:t}),o(t);break;case"notification-update":s({type:tr,payload:t});break;case"notifications-read-all":s({type:rr});break;case"connection":s({type:ir,payload:t.status})}},[]),o=n.useCallback(e=>{const t={position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0};switch(e.type){case"success":Ze.success(e.message,t);break;case"error":Ze.error(e.message,t);break;case"warning":Ze.warning(e.message,t);break;default:Ze.info(e.message,t)}},[]),l=n.useCallback(async(e=1)=>{try{s({type:Qa,payload:!0});const n=await Ja.getNotifications(e,t.pagination.limit,"-createdAt");n.success&&s({type:Za,payload:{notifications:1===e?n.notifications:[...t.notifications,...n.notifications],pagination:{page:n.pagination.page,total:n.pagination.total,hasMore:n.pagination.hasMore}}})}catch(n){s({type:Xa,payload:n.message})}finally{s({type:Qa,payload:!1})}},[t.pagination.limit,t.notifications]),c=n.useCallback(async()=>{try{const e=await Ja.getUnreadCount();e.success&&s({type:sr,payload:e.count})}catch(e){}},[]),d=n.useCallback(async e=>{try{await Ja.markAsRead(e),s({type:ar,payload:e})}catch(t){}},[]),u=n.useCallback(async()=>{try{await Ja.markAllAsRead(),s({type:rr})}catch(e){}},[]),h=n.useCallback(async e=>{try{await Ja.deleteNotification(e),s({type:nr,payload:e})}catch(t){}},[]),m=n.useCallback(e=>{s({type:or,payload:e})},[]),p=n.useCallback(()=>{t.pagination.hasMore&&!t.loading&&l(t.pagination.page+1)},[t.pagination.hasMore,t.loading,t.pagination.page,l]);n.useEffect(()=>{let e;return r&&(null==a?void 0:a.id)&&(s({type:Qa,payload:!0}),c(),l(),Ja.startMockLiveNotifications(),e=Ja.addEventListener(i),Ja.initializePusher(a.id)),()=>{Ja.stopMockLiveNotifications(),Ja.disconnectPusher(),e&&e()}},[r,null==a?void 0:a.id,l,c,i]);const f={...t,fetchNotifications:l,markAsRead:d,markAllAsRead:u,deleteNotification:h,setFilters:m,loadMore:p};return B.jsx(ur.Provider,{value:f,children:e})},mr=()=>{const e=n.useContext(ur);if(!e)throw new Error("useNotifications must be used within a NotificationProvider");return e},pr=(e,t=100,n=30)=>{const s=[];let a=t;const r=new Date;for(let i=n;i>=0;i--){const e=new Date(r);e.setDate(e.getDate()-i);const t=.1*(Math.random()-.5);a=Math.max(a*(1+t),1);const n=a,o=n*(1+.05*Math.random()),l=n*(1-.05*Math.random()),c=l+Math.random()*(o-l),d=Math.floor(1e6*Math.random())+1e5;s.push({time:e.toISOString().split("T")[0],open:parseFloat(n.toFixed(2)),high:parseFloat(o.toFixed(2)),low:parseFloat(l.toFixed(2)),close:parseFloat(c.toFixed(2)),volume:d}),a=c}return s},fr={"RELIANCE.NS":{symbol:"RELIANCE.NS",name:"Reliance Industries Limited",price:2847.5,change:15.25,changesPercentage:.54,dayLow:2835.4,dayHigh:2865.8,yearHigh:3024.9,yearLow:2220.3,marketCap:1925e10,priceAvg50:2798.45,priceAvg200:2654.78,volume:8765432,avgVolume:12e6,exchange:"NSE",open:2840.2,previousClose:2832.25,timestamp:Math.floor(Date.now()/1e3)},"TCS.NS":{symbol:"TCS.NS",name:"Tata Consultancy Services",price:4125.8,change:-12.4,changesPercentage:-.3,dayLow:4118.25,dayHigh:4145.6,yearHigh:4592.25,yearLow:3311,marketCap:151e11,priceAvg50:4089.75,priceAvg200:3987.2,volume:1234567,avgVolume:25e5,exchange:"NSE",open:4138.2,previousClose:4138.2,timestamp:Math.floor(Date.now()/1e3)},"HDFCBANK.NS":{symbol:"HDFCBANK.NS",name:"HDFC Bank Limited",price:1687.9,change:8.75,changesPercentage:.52,dayLow:1678.3,dayHigh:1695.4,yearHigh:1794.5,yearLow:1363.55,marketCap:1285e10,priceAvg50:1654.45,priceAvg200:1598.78,volume:5678901,avgVolume:85e5,exchange:"NSE",open:1682.15,previousClose:1679.15,timestamp:Math.floor(Date.now()/1e3)},"INFY.NS":{symbol:"INFY.NS",name:"Infosys Limited",price:1842.35,change:22.15,changesPercentage:1.22,dayLow:1835.2,dayHigh:1856.8,yearHigh:1953.9,yearLow:1351.65,marketCap:765e10,priceAvg50:1798.75,priceAvg200:1687.2,volume:3456789,avgVolume:52e5,exchange:"NSE",open:1838.4,previousClose:1820.2,timestamp:Math.floor(Date.now()/1e3)},"HINDUNILVR.NS":{symbol:"HINDUNILVR.NS",name:"Hindustan Unilever Limited",price:2456.7,change:-5.3,changesPercentage:-.22,dayLow:2445.6,dayHigh:2468.9,yearHigh:2844.95,yearLow:2172,marketCap:575e10,priceAvg50:2489.75,priceAvg200:2398.2,volume:987654,avgVolume:18e5,exchange:"NSE",open:2462,previousClose:2462,timestamp:Math.floor(Date.now()/1e3)},"ICICIBANK.NS":{symbol:"ICICIBANK.NS",name:"ICICI Bank Limited",price:1287.45,change:18.9,changesPercentage:1.49,dayLow:1278.3,dayHigh:1295.8,yearHigh:1257.65,yearLow:912.35,marketCap:905e10,priceAvg50:1245.75,priceAvg200:1156.2,volume:7890123,avgVolume:125e5,exchange:"NSE",open:1280.55,previousClose:1268.55,timestamp:Math.floor(Date.now()/1e3)},INFY:{symbol:"INFY",name:"Infosys Limited",price:1456.3,change:8.75,changesPercentage:.6,dayLow:1445.2,dayHigh:1468.9,yearHigh:1953.9,yearLow:1330.2,marketCap:61e11,priceAvg50:1423.45,priceAvg200:1567.89,volume:3456789,avgVolume:42e5,exchange:"NSE",open:1447.55,previousClose:1447.55,timestamp:Math.floor(Date.now()/1e3)},HDFCBANK:{symbol:"HDFCBANK",name:"HDFC Bank Limited",price:1567.45,change:12.3,changesPercentage:.79,dayLow:1555.2,dayHigh:1578.9,yearHigh:1725,yearLow:1363.55,marketCap:119e11,priceAvg50:1534.67,priceAvg200:1598.23,volume:2345678,avgVolume:28e5,exchange:"NSE",open:1555.15,previousClose:1555.15,timestamp:Math.floor(Date.now()/1e3)},ICICIBANK:{symbol:"ICICIBANK",name:"ICICI Bank Limited",price:987.65,change:-5.45,changesPercentage:-.55,dayLow:982.3,dayHigh:995.8,yearHigh:1257.8,yearLow:875.35,marketCap:69e11,priceAvg50:1012.34,priceAvg200:1089.67,volume:4567890,avgVolume:52e5,exchange:"NSE",open:993.1,previousClose:993.1,timestamp:Math.floor(Date.now()/1e3)}},gr=[{symbol:"RELIANCE.NS",name:"Reliance Industries Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"TCS.NS",name:"Tata Consultancy Services",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"HDFCBANK.NS",name:"HDFC Bank Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"INFY.NS",name:"Infosys Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"HINDUNILVR.NS",name:"Hindustan Unilever Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"ICICIBANK.NS",name:"ICICI Bank Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"KOTAKBANK.NS",name:"Kotak Mahindra Bank Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"BHARTIARTL.NS",name:"Bharti Airtel Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"ITC.NS",name:"ITC Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"SBIN.NS",name:"State Bank of India",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"LT.NS",name:"Larsen & Toubro Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"ASIANPAINT.NS",name:"Asian Paints Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"MARUTI.NS",name:"Maruti Suzuki India Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"BAJFINANCE.NS",name:"Bajaj Finance Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"WIPRO.NS",name:"Wipro Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"HCLTECH.NS",name:"HCL Technologies Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"TECHM.NS",name:"Tech Mahindra Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"SUNPHARMA.NS",name:"Sun Pharmaceutical Industries Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"TITAN.NS",name:"Titan Company Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"NESTLEIND.NS",name:"Nestle India Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"ULTRACEMCO.NS",name:"UltraTech Cement Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"POWERGRID.NS",name:"Power Grid Corporation of India Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"NTPC.NS",name:"NTPC Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"ONGC.NS",name:"Oil and Natural Gas Corporation Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"COALINDIA.NS",name:"Coal India Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"ZOMATO.NS",name:"Zomato Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"PAYTM.NS",name:"One 97 Communications Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"NYKAA.NS",name:"FSN E-Commerce Ventures Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"POLICYBZR.NS",name:"PB Fintech Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"ZOMATO.NS",name:"Zomato Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"SWIGGY.NS",name:"Bundl Technologies Private Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"INFY.NS",name:"Infosys Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"AAPL",name:"Apple Inc.",exchange:"NASDAQ",currency:"USD",type:"stock"},{symbol:"GOOGL",name:"Alphabet Inc.",exchange:"NASDAQ",currency:"USD",type:"stock"},{symbol:"MSFT",name:"Microsoft Corporation",exchange:"NASDAQ",currency:"USD",type:"stock"},{symbol:"AMZN",name:"Amazon.com Inc.",exchange:"NASDAQ",currency:"USD",type:"stock"},{symbol:"TSLA",name:"Tesla Inc.",exchange:"NASDAQ",currency:"USD",type:"stock"},{symbol:"META",name:"Meta Platforms Inc.",exchange:"NASDAQ",currency:"USD",type:"stock"},{symbol:"NVDA",name:"NVIDIA Corporation",exchange:"NASDAQ",currency:"USD",type:"stock"},{symbol:"ADANIPORTS.NS",name:"Adani Ports and Special Economic Zone Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"AXISBANK.NS",name:"Axis Bank Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"BAJAJ-AUTO.NS",name:"Bajaj Auto Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"BRITANNIA.NS",name:"Britannia Industries Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"CIPLA.NS",name:"Cipla Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"DRREDDY.NS",name:"Dr. Reddys Laboratories Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"EICHERMOT.NS",name:"Eicher Motors Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"GRASIM.NS",name:"Grasim Industries Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"HEROMOTOCO.NS",name:"Hero MotoCorp Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"JSWSTEEL.NS",name:"JSW Steel Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"TSLA",name:"Tesla Inc.",exchange:"NASDAQ",currency:"USD",type:"stock"},{symbol:"META",name:"Meta Platforms Inc.",exchange:"NASDAQ",currency:"USD",type:"stock"},{symbol:"NVDA",name:"NVIDIA Corporation",exchange:"NASDAQ",currency:"USD",type:"stock"},{symbol:"NFLX",name:"Netflix Inc.",exchange:"NASDAQ",currency:"USD",type:"stock"},{symbol:"CRM",name:"Salesforce Inc.",exchange:"NYSE",currency:"USD",type:"stock"},{symbol:"ADBE",name:"Adobe Inc.",exchange:"NASDAQ",currency:"USD",type:"stock"}],yr=[{symbol:"AAPL",name:"Apple Inc.",change:2.15,changesPercentage:1.24,price:175.43},{symbol:"NVDA",name:"NVIDIA Corporation",change:15.42,changesPercentage:1.79,price:875.28},{symbol:"META",name:"Meta Platforms Inc.",change:8.75,changesPercentage:1.84,price:484.2},{symbol:"GOOGL",name:"Alphabet Inc.",change:3.42,changesPercentage:2.46,price:142.56},{symbol:"AMZN",name:"Amazon.com Inc.",change:1.87,changesPercentage:1.25,price:151.94}],vr=[{title:"Reliance Industries Reports Strong Q3 Results",text:"Reliance Industries Limited reported strong quarterly results with increased revenue from petrochemicals and retail segments.",url:"#",image:"https://via.placeholder.com/300x200",site:"Economic Times",publishedDate:(new Date).toISOString(),symbol:"RELIANCE"},{title:"TCS Announces New Digital Transformation Services",text:"Tata Consultancy Services launches new suite of digital transformation services for enterprise clients.",url:"#",image:"https://via.placeholder.com/300x200",site:"Business Standard",publishedDate:new Date(Date.now()-36e5).toISOString(),symbol:"TCS"},{title:"Indian IT Sector Shows Resilience Amid Global Challenges",text:"The Indian IT sector continues to show strong performance despite global economic uncertainties.",url:"#",image:"https://via.placeholder.com/300x200",site:"Financial Express",publishedDate:new Date(Date.now()-72e5).toISOString(),symbol:"INFY"}],xr={searchStocks:async(e,t=10)=>{if(await new Promise(e=>setTimeout(e,300)),!e||""===e.trim()){const e=gr.slice(0,t);return{success:!0,results:e,total:e.length}}const n=e.toLowerCase().trim(),s=gr.map(e=>{let t=0;const s=e.symbol.toLowerCase(),a=e.name.toLowerCase();return s===n?t+=100:s.startsWith(n)?t+=50:s.includes(n)&&(t+=25),a===n?t+=75:a.startsWith(n)?t+=40:a.split(" ").some(e=>e.startsWith(n))?t+=30:a.includes(n)&&(t+=20),("NSE"===e.exchange||"BSE"===e.exchange||e.symbol.endsWith(".NS")||e.symbol.endsWith(".BO"))&&(t+=10),{stock:e,score:t}}).filter(e=>e.score>0).sort((e,t)=>t.score-e.score).map(e=>e.stock).slice(0,t);return s.length,{success:!0,results:s,total:s.length}},getStockQuote:async e=>{await new Promise(e=>setTimeout(e,200));const t=fr[e.toUpperCase()];return t?{success:!0,data:t}:{success:!1,error:"Stock not found"}},getHistoricalData:async(e,t="1D")=>{var n;await new Promise(e=>setTimeout(e,500));const s=(null==(n=fr[e.toUpperCase()])?void 0:n.price)||100;return{success:!0,data:pr(0,s,"1D"===t?1:"1M"===t?30:90),symbol:e,period:t}},getGainers:async(e=10)=>(await new Promise(e=>setTimeout(e,300)),{success:!0,data:yr.slice(0,e)}),getMarketNews:async(e=20)=>(await new Promise(e=>setTimeout(e,400)),{success:!0,data:vr.slice(0,e)})},br=["VCMjfaz3k5CjRqbLvtpMALKTks5YVLxx","sYWvqZLnzWgIlTE2XBWWL0ZxDUK4O1MY","ORvcjYythoW1cNX3sA7gvYD46sK8mxvx",{}.VITE_FMP_API_KEY_FALLBACK].filter(Boolean);let jr=0;const wr=new Set;let Nr=br[jr];br.length;const kr=Wa.create({baseURL:"https://financialmodelingprep.com/api/v3",timeout:1e4}),Sr=async(e,t={})=>{var n;if(!br.length||wr.size===br.length)throw new Error("All API keys failed");for(let a=0;a<br.length;a++)if(Nr=br[jr],wr.has(Nr))jr=(jr+1)%br.length,Nr=br[jr];else try{return(await kr.get(e,{params:{...t,apikey:Nr}})).data}catch(s){const e=null==(n=s.response)?void 0:n.status;if((429===e||403===e||401===e)&&wr.add(Nr),jr=(jr+1)%br.length,wr.size===br.length)break}throw new Error("All API keys failed or exhausted.")},Cr={searchStocks:async(e,t=10)=>{try{const n=await Sr("/search",{query:e,limit:t});if(!Array.isArray(n))throw new Error("Invalid response format");return{success:!0,results:n,total:n.length}}catch(n){return await xr.searchStocks(e,t)}},getStockQuote:async e=>{try{return{success:!0,data:(await Sr(`/quote/${e}`))[0]}}catch(t){return await xr.getStockQuote(e)}},getMultipleQuotes:async e=>{const t=Array.isArray(e)?e.join(","):e;try{return{success:!0,data:await Sr(`/quote/${t}`)}}catch(n){return{success:!1,data:[]}}},getStockProfile:async e=>{try{const t=await Sr(`/profile/${e}`);if(!t[0])throw new Error("Company profile not found");return{success:!0,data:t[0]}}catch(t){return await xr.getStockProfile(e)}}},Tr=Cr,Pr={getHistoricalData:async(e,t="1D")=>{try{return{success:!0,data:(await Sr(`/historical-price-full/${e}`,{serietype:"line"})).historical,symbol:e}}catch(n){return await xr.getHistoricalData(e,t)}},getIntradayData:async(e,t="1min")=>{try{return{success:!0,data:(await Sr(`/historical-chart/${t}/${e}`)).reverse(),symbol:e,interval:t}}catch(n){return{success:!1,data:[]}}}},Er=Wa.create({baseURL:"https://s89-satya-capstone-tradebro.onrender.com/api",timeout:3e4,headers:{"Content-Type":"application/json"}});Er.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>Promise.reject(e)),Er.interceptors.response.use(e=>e,e=>{var t,n,s;return"ERR_NETWORK"===e.code||null==(t=e.response)||t.status,401===(null==(n=e.response)?void 0:n.status)&&(localStorage.removeItem("token"),localStorage.removeItem("user"),"/login"!==window.location.pathname&&"/signup"!==window.location.pathname&&(window.location.href="/login")),(null==(s=e.response)?void 0:s.status)>=500?Promise.resolve({data:{success:!1,message:"Service temporarily unavailable. Please try again later.",fallback:!0}}):Promise.reject(e)});const Lr={login:async e=>(await Er.post("/auth/login",e)).data,register:async e=>(await Er.post("/auth/register",e)).data,verifyToken:async()=>(await Er.get("/auth/verify")).data,googleAuth:async e=>(await Er.post("/auth/google",{tokenId:e})).data,logout:async()=>(await Er.post("/auth/logout")).data},Ir=async e=>(await Er.get(`/proxy/fmp/quote/${e}`)).data,Ar=async e=>{const t=Array.isArray(e)?e.join(","):e;return(await Er.get(`/proxy/stock-batch?symbols=${t}`)).data},Or=async()=>{try{const[e,t]=await Promise.all([Er.get("/proxy/top-gainers"),Er.get("/proxy/top-losers")]);return{gainers:e.data||[],losers:t.data||[],mostActive:[]}}catch(e){return{gainers:[],losers:[],mostActive:[]}}},Dr=async()=>{try{return(await Er.get("/portfolio/summary")).data}catch(e){return{success:!1,data:{totalValue:1e4,availableCash:1e4,totalInvested:0,totalGainLoss:0,totalGainLossPercentage:0,holdings:[],transactions:[],watchlist:[]}}}},Rr=async()=>{try{return(await Er.get("/portfolio/holdings")).data}catch(e){return{success:!0,data:[]}}},Mr={placeOrder:async e=>(await Er.post("/orders/place",e)).data,getOrders:async({status:e="all",page:t=1,limit:n=20,stockSymbol:s=null,type:a=null,orderType:r=null,sort:i="-createdAt"}={})=>{let o=`/orders/all?page=${t}&limit=${n}&sort=${i}`;"all"!==e&&(o+=`&status=${e}`),s&&(o+=`&stockSymbol=${s.toUpperCase()}`),a&&(o+=`&type=${a}`),r&&(o+=`&orderType=${r}`);return(await Er.get(o)).data},searchOrders:async(e,t={})=>{const{status:n,type:s,orderType:a,limit:r=20}=t;let i=`/orders/all?stockSymbol=${e.toUpperCase()}&limit=${r}`;n&&(i+=`&status=${n}`),s&&(i+=`&type=${s}`),a&&(i+=`&orderType=${a}`);return(await Er.get(i)).data},cancelOrder:async e=>(await Er.delete(`/orders/${e}`)).data,getOrderHistory:async(e=50)=>(await Er.get(`/orders/history?limit=${e}`)).data,getRecentTrades:async(e=10)=>(await Er.get(`/trades/recent?limit=${e}`)).data},_r=async(e,t=10)=>(await Er.get(`/watchlist/search?query=${encodeURIComponent(e)}&limit=${t}`)).data,Fr=async(e,t=null)=>{try{return(await Er.post("/saytrix/chat",{message:e,sessionId:t})).data}catch(n){return{success:!1,message:"AI service temporarily unavailable.",error:n.message}}},Br={getMarketNews:async(e=20)=>(await Er.get(`/news/market?limit=${e}`)).data,getNews:async({category:e="all",limit:t=20,q:n=null}={})=>{let s=`/news?limit=${t}`;n&&(s+=`&q=${encodeURIComponent(n)}`);return(await Er.get(s)).data},searchNews:async(e,t=20)=>(await Er.get(`/news/search?q=${encodeURIComponent(e)}&limit=${t}`)).data,getStockNews:async(e,t=10)=>(await Er.get(`/news/stock/${e}?limit=${t}`)).data,getTrendingNews:async()=>(await Er.get("/news/trending")).data};class zr{constructor(e){this.navigate=e}async processCommand(e){const t=this.localProcess(e);if(t.success)return t;try{const t=await Fr(e,"voice_session");if(t.success&&t.data.action)return this.executeAction(t.data.action,t.data.params)}catch(n){}return{success:!1,message:"Command not recognized"}}executeAction(e,t={}){switch(e){case"navigate":return this.navigate(t.path),{success:!0,message:`Navigating to ${t.path}`};case"search_stock":return this.navigate(`/stock/${t.symbol}`),{success:!0,message:`Showing ${t.symbol} details`};case"buy_stock":return this.navigate("/trading"),{success:!0,message:"Opening trading page"};case"show_portfolio":return this.navigate("/portfolio"),{success:!0,message:"Opening portfolio"};default:return{success:!1,message:"Command not understood"}}}localProcess(e){const t=e.toLowerCase().trim(),n={chart:"/charts",charge:"/charts",charts:"/charts",dashboard:"/dashboard",home:"/dashboard",portfolio:"/portfolio",trading:"/trading",trade:"/trading",orders:"/orders",order:"/orders",history:"/history",news:"/news",watchlist:"/watchlist",notifications:"/notifications",profile:"/profile",settings:"/settings",saytrix:"/saytrix"};for(const[s,a]of Object.entries(n))if(t===s||t.includes(s))return this.navigate(a),{success:!0,message:`Opening ${s}`};if(t.includes("price")||t.includes("stock")){const e=t.match(/(?:price of|stock|show me)\s+([a-z]+)/i);if(e){const t=e[1].toUpperCase();return this.navigate(`/stock/${t}`),{success:!0,message:`Showing ${t} price`}}}return{success:!1}}}const Ur=n.createContext(),Hr=()=>{const e=n.useContext(Ur);if(void 0===e)throw new Error("useVoice must be used within a VoiceProvider");return e},$r=({children:e})=>{const t=o(),s=l(),a=new zr(t),[r,i]=n.useState(!1),[c,d]=n.useState(!1),[u,h]=n.useState(""),[m,p]=n.useState(null),[f,g]=n.useState(!1);n.useEffect(()=>{if("webkitSpeechRecognition"in window||"SpeechRecognition"in window){const e=new(window.SpeechRecognition||window.webkitSpeechRecognition);e.continuous=!0,e.interimResults=!0,e.lang="en-US",e.maxAlternatives=1,p(e),g(!0)}else g(!1)},[]);const y=n.useCallback(e=>{const n=e.toLowerCase().trim();if(n.includes("dashboard")||n.includes("home")?t("/dashboard"):n.includes("chart")||n.includes("charge")?t("/charts"):n.includes("portfolio")?t("/portfolio"):n.includes("watchlist")||n.includes("watch list")?t("/watchlist"):n.includes("orders")||n.includes("order")?t("/orders"):n.includes("history")?t("/history"):n.includes("news")?t("/news"):n.includes("notifications")||n.includes("notification")?t("/notifications"):n.includes("saytrix")||n.includes("chat")?t("/saytrix"):n.includes("profile")?t("/profile"):n.includes("settings")||n.includes("setting")?t("/settings"):(n.includes("trading")||n.includes("trade"))&&t("/trading"),n.includes("price of")||n.includes("show price")){const e=v(n);e&&t(`/stock/${e}`)}else(n.includes("top gainers")||n.includes("gainers")||n.includes("top losers")||n.includes("losers"))&&t("/dashboard");(n.includes("buy")&&(n.includes("stock")||n.includes("share"))||n.includes("sell")&&(n.includes("stock")||n.includes("share")))&&t("/trading")},[t]),v=n.useCallback(e=>{const t=[/price of ([a-zA-Z]+)/i,/show price ([a-zA-Z]+)/i,/([a-zA-Z]+) price/i];for(const n of t){const t=e.match(n);if(t)return t[1].toUpperCase()}return null},[]),x=n.useCallback(e=>{if("speechSynthesis"in window){const t=new SpeechSynthesisUtterance(e);t.rate=.9,t.pitch=1,t.volume=.8,speechSynthesis.speak(t)}},[]),b=n.useCallback(()=>{if(m&&f&&!r){i(!0),m.onresult=e=>{let t="";for(let n=e.resultIndex;n<e.results.length;n++){const s=e.results[n][0].transcript;e.results[n].isFinal,t+=s}h(t);["saytrix","citrix","citric","matrix","tricks","se tric","say tricks"].some(e=>t.toLowerCase().includes(e))&&(m.stop(),j())},m.onerror=e=>{"network"===e.error||e.error,i(!1),"aborted"!==e.error&&"not-allowed"!==e.error&&setTimeout(()=>{b()},2e3)},m.onend=()=>{i(!1),c||setTimeout(()=>{b()},500)};try{m.start()}catch(e){"InvalidStateError"!==e.name&&i(!1)}}},[m,f,r,c]),j=n.useCallback(()=>{if(d(!0),x("Yes?"),m){m.onresult=e=>{let t="";for(let n=e.resultIndex;n<e.results.length;n++){const s=e.results[n][0].transcript;e.results[n].isFinal&&(t+=s)}if(t){h(t);let n=t;if(e.results[0].length>1){n=e.results[0][0].transcript;for(let t=1;t<e.results[0].length;t++)e.results[0][t].confidence>e.results[0][0].confidence&&(n=e.results[0][t].transcript)}a.processCommand(n).then(e=>{e.success?x(e.message||"Done"):x("Could you repeat that?")}),d(!1),m.stop(),setTimeout(()=>{b()},500)}};try{m.start()}catch(e){}}},[m,y,x,b]),w=n.useCallback(()=>{if(i(!1),d(!1),m)try{m.stop()}catch(e){}},[m]),N=n.useCallback(()=>{f?c?w():j():alert("Voice commands are not supported in this browser. Please use Chrome, Edge, or Safari.")},[f,c,j,w]);n.useEffect(()=>{const e="/login"===s.pathname||"/signup"===s.pathname||"/"===s.pathname;return!f||r||c||e||b(),()=>{if(m)try{m.stop()}catch(e){}}},[f,b,s.pathname]);const k={isListening:r,isVoiceModeActive:c,transcript:u,isSupported:f,triggerVoiceMode:N,stopListening:w,speak:x,activateVoiceMode:j,startWakeWordDetection:b,processVoiceCommand:y};return B.jsx(Ur.Provider,{value:k,children:e})},qr=({position:e="navbar",size:t="small",showLabel:s=!1,className:a=""})=>{const{isListening:r,isSupported:i,startListening:o,stopListening:l}=Hr(),c=n.useCallback(()=>{r?l():o()},[r,o,l]);if(!i)return null;const d=r;return B.jsxs("button",{className:`saytrix-trigger-btn ${e} ${t} ${a} ${d?"active":""}`,onClick:c,title:d?"Deactivate Saytrix AI":"Activate Saytrix AI","aria-label":d?"Deactivate Saytrix AI voice assistant":"Activate Saytrix AI voice assistant",children:[B.jsx(g,{mode:"wait",children:B.jsx(y.span,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.2},children:r?B.jsx(qt,{}):B.jsx(Wt,{})},r?"mic-on":"mic-off")}),s&&B.jsx("span",{children:"Saytrix"})]})},Wr=n.createContext(),Vr=()=>{const e=n.useContext(Wr);if(!e)throw new Error("useLocalSidebar must be used within LocalSidebarProvider");return e},Yr=({children:e})=>{const[t,s]=n.useState(!1),[a,r]=n.useState(!1);n.useEffect(()=>{const e=()=>{const e=window.innerWidth<=768;r(e),e&&s(!0)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),n.useEffect(()=>{const e=document.querySelector(".main-content");return e&&(e.classList.add("with-sidebar"),t?(e.classList.add("sidebar-collapsed"),e.classList.remove("sidebar-expanded")):(e.classList.add("sidebar-expanded"),e.classList.remove("sidebar-collapsed"))),()=>{e&&e.classList.remove("with-sidebar","sidebar-collapsed","sidebar-expanded")}},[t]);const i={isCollapsed:t,isMobile:a,toggleSidebar:()=>{s(!t)},setIsCollapsed:s};return B.jsx(Wr.Provider,{value:i,children:e})},Gr=()=>{const{isCollapsed:e,isMobile:t,toggleSidebar:n}=Vr();return t&&e?B.jsx("button",{className:"mobile-menu-btn",onClick:n,"aria-label":"Open navigation menu",type:"button",children:B.jsx(Ht,{})}):null},Jr=()=>{const{isCollapsed:e,isMobile:t,toggleSidebar:n}=Vr();return!t||e?null:B.jsx("div",{className:"sidebar-overlay "+(e?"":"show"),onClick:n,"aria-hidden":"true"})},Kr=()=>{const{isCollapsed:e,isMobile:t,toggleSidebar:s}=Vr(),{unreadCount:a}=mr(),r=l(),i=o(),{isAuthenticated:d,logout:u,user:h}=Cn(),m=n.useRef(null),p=h||{fullName:"User",email:"",profileImage:"https://randomuser.me/api/portraits/lego/1.jpg",role:"Member"};return n.useEffect(()=>{(()=>{const n=document.documentElement;t?n.style.setProperty("--sidebar-current-width","0px"):n.style.setProperty("--sidebar-current-width",e?"80px":"280px")})()},[e,t]),n.useEffect(()=>{const n=()=>{const n=m.current;n&&(n.style.position="fixed",n.style.zIndex="2147483647",n.style.transform="none",n.style.webkitTransform="none",n.style.mozTransform="none",n.style.msTransform="none",n.style.oTransform="none",n.style.margin="0px",n.style.contain="none",n.style.isolation="auto",n.style.willChange="auto",n.style.backgroundAttachment="fixed",n.style.boxSizing="border-box",n.style.clip="auto",n.style.clipPath="none",n.style.mask="none",n.style.filter="none",n.style.mixBlendMode="normal",n.style.opacity="1",n.style.visibility="visible",n.style.backfaceVisibility="visible",n.style.webkitBackfaceVisibility="visible",n.style.perspective="none",n.style.webkitPerspective="none",t?(n.style.top="0px",n.style.left="0px",n.style.right="0px",n.style.width="100%",e?(n.style.bottom="auto",n.style.height="70px",n.style.maxHeight="70px",n.style.minHeight="70px",n.style.padding="12px 20px",n.style.display="flex",n.style.flexDirection="row",n.style.alignItems="center",n.style.justifyContent="space-between",n.style.overflow="hidden"):(n.style.bottom="0px",n.style.height="100vh",n.style.maxHeight="100vh",n.style.minHeight="100vh",n.style.padding="20px",n.style.display="flex",n.style.flexDirection="column",n.style.alignItems="stretch",n.style.justifyContent="flex-start",n.style.overflowY="auto")):(n.style.top="0px",n.style.left="0px",n.style.bottom="0px",n.style.right="auto",n.style.width=e?"80px":"280px",n.style.height="100vh",n.style.maxHeight="100vh",n.style.minHeight="100vh",n.style.padding=e?"24px 16px":"24px 20px",n.style.display="flex",n.style.flexDirection="column",n.style.overflowY="auto"))};n();const s=()=>{n()},a=()=>{n()},r=new MutationObserver(()=>{n()});return m.current&&r.observe(m.current,{attributes:!0,attributeFilter:["style","class"]}),window.addEventListener("scroll",s,{passive:!0}),window.addEventListener("resize",a,{passive:!0}),document.addEventListener("scroll",s,{passive:!0}),()=>{window.removeEventListener("scroll",s),window.removeEventListener("resize",a),document.removeEventListener("scroll",s),r.disconnect()}},[e,t]),B.jsxs("div",{ref:m,className:`sidebar ${e?"collapsed":""} ${t?"mobile":""}`,role:"navigation","aria-label":"Main navigation",children:[B.jsxs("div",{className:"top-section",children:[B.jsx("button",{className:"toggle-btn",onClick:e=>{e.preventDefault(),e.stopPropagation(),s()},type:"button","aria-label":e?"Expand sidebar navigation":"Collapse sidebar navigation",title:e?"Expand sidebar":"Collapse sidebar","aria-expanded":!e,children:B.jsx(Ht,{})}),(!e||t)&&B.jsxs("div",{className:"logo-section",children:[B.jsx("h1",{className:"logo",role:"banner",children:"⚡ TradeBro"}),!e&&B.jsx(qr,{position:"navbar",size:"small",showLabel:!1,className:"sidebar-voice-btn"})]})]}),!e&&B.jsxs("div",{className:"user-profile",children:[B.jsxs("div",{className:"user-avatar",children:[p.profileImage||p.picture||p.avatar?B.jsx("img",{src:p.profileImage||p.picture||p.avatar,alt:p.fullName||p.name,className:"avatar-image",onError:e=>{e.target.style.display="none",e.target.nextSibling.style.display="flex"}}):null,B.jsx("div",{className:"avatar-symbol",style:{display:p.profileImage||p.picture||p.avatar?"none":"flex"},children:"👤"})]}),B.jsxs("div",{className:"user-info",children:[B.jsx("h3",{className:"user-name",children:p.fullName||p.name||p.email}),B.jsx("p",{className:"user-role",children:p.role||"Member"})]})]}),B.jsx("nav",{role:"navigation","aria-label":"Main menu",children:B.jsxs("ul",{className:"sidebar-links",children:[B.jsx("li",{children:B.jsxs(c,{to:"/dashboard",className:"sidebar-link "+("/dashboard"===r.pathname?"active":""),"aria-current":"/dashboard"===r.pathname?"page":void 0,title:"Dashboard",children:[B.jsx(dt,{"aria-hidden":"true"}),!e&&B.jsx("span",{children:"Dashboard"})]})}),B.jsx("li",{children:B.jsxs(c,{to:"/charts",className:"sidebar-link "+("/charts"===r.pathname?"active":""),children:[B.jsx(vn,{}),!e&&B.jsx("span",{children:"Charts"})]})}),B.jsx("li",{children:B.jsxs(c,{to:"/portfolio",className:"sidebar-link "+("/portfolio"===r.pathname?"active":""),children:[B.jsx(Zt,{}),!e&&B.jsx("span",{children:"Portfolio"})]})}),B.jsx("li",{children:B.jsxs(c,{to:"/watchlist",className:"sidebar-link "+("/watchlist"===r.pathname?"active":""),children:[B.jsx(ht,{}),!e&&B.jsx("span",{children:"Watchlist"})]})}),B.jsx("li",{children:B.jsxs(c,{to:"/orders",className:"sidebar-link "+("/orders"===r.pathname?"active":""),children:[B.jsx(dn,{}),!e&&B.jsx("span",{children:"Orders"})]})}),B.jsx("li",{children:B.jsxs(c,{to:"/history",className:"sidebar-link "+("/history"===r.pathname?"active":""),children:[B.jsx(yt,{}),!e&&B.jsx("span",{children:"History"})]})}),B.jsx("li",{children:B.jsxs(c,{to:"/news",className:"sidebar-link "+("/news"===r.pathname?"active":""),children:[B.jsx(Et,{}),!e&&B.jsx("span",{children:"News"})]})}),B.jsx("li",{children:B.jsx(c,{to:"/notifications",className:"sidebar-link "+("/notifications"===r.pathname?"active":""),children:B.jsxs("div",{className:"sidebar-link-content",children:[B.jsxs("div",{className:"sidebar-icon-wrapper",children:[B.jsx(ut,{}),a>0&&B.jsx("span",{className:"notification-badge",children:a>99?"99+":a})]}),!e&&B.jsx("span",{children:"Notifications"})]})})}),B.jsx("li",{children:B.jsxs(c,{to:"/saytrix",className:`sidebar-link ${"/saytrix"===r.pathname||"/chatbot"===r.pathname?"active":""} highlight`,children:[B.jsx($t,{}),!e&&B.jsx("span",{children:"Saytrix AI"})]})})]})}),B.jsxs("div",{className:"sidebar-bottom",children:[B.jsxs("div",{className:"sidebar-actions",children:[B.jsxs(c,{to:"/profile",className:"sidebar-link "+("/profile"===r.pathname?"active":""),children:[B.jsx(xn,{}),!e&&B.jsx("span",{children:"Profile"})]}),B.jsxs(c,{to:"/settings",className:"sidebar-link "+("/settings"===r.pathname?"active":""),children:[B.jsx(on,{}),!e&&B.jsx("span",{children:"Settings"})]}),B.jsxs("button",{onClick:()=>{u(),i("/login")},className:"sidebar-link logout-btn","aria-label":"Logout from TradeBro",title:"Logout from TradeBro",children:[B.jsx(Bt,{}),!e&&B.jsx("span",{children:"Logout"})]})]}),!e&&B.jsxs("div",{className:"sidebar-footer",children:[B.jsx("p",{className:"copyright",children:"© 2024 TradeBro ⚡"}),B.jsx("p",{className:"version",children:"v1.0.0 • 🚀"})]})]})]})},Qr=()=>{const e=l(),{isAuthenticated:t}=Cn();return t&&!["/login","/signup","/"].includes(e.pathname)?B.jsxs(Yr,{children:[B.jsx(Gr,{}),B.jsx(Jr,{}),B.jsx(Kr,{})]}):null},Xr=({isAuthenticated:e})=>e?null:B.jsxs(y.div,{className:"card card-glass",style:{position:"fixed",bottom:"24px",right:"24px",width:"320px",zIndex:999,background:"rgba(255, 255, 255, 0.1)",backdropFilter:"blur(20px)",border:"1px solid rgba(255, 255, 255, 0.2)",boxShadow:"0 8px 20px rgba(0, 0, 0, 0.2)",borderRadius:"12px"},initial:{opacity:0,y:100,scale:.8},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:100,scale:.8},transition:{duration:.5,type:"spring",stiffness:100},children:[B.jsx("div",{className:"card-header",style:{padding:"16px"},children:B.jsxs("div",{className:"d-flex align-center gap-md",children:[B.jsx("div",{style:{width:"40px",height:"40px",background:"linear-gradient(135deg, #4facfe, #00f2fe)",borderRadius:"8px",color:"#fff",display:"flex",alignItems:"center",justifyContent:"center"},children:B.jsx(Ft,{size:20})}),B.jsxs("div",{children:[B.jsx("h3",{style:{fontSize:"1rem",marginBottom:"4px"},children:"Sign In Required"}),B.jsx("p",{style:{fontSize:"0.75rem",color:"#ccc"},children:"Access premium features"})]})]})}),B.jsxs("div",{className:"card-body",style:{padding:"16px"},children:[B.jsx("p",{style:{fontSize:"0.875rem",color:"#bbb",marginBottom:"16px",lineHeight:1.5},children:"Sign in to access your portfolio, trading tools, and personalized insights."}),B.jsxs("div",{className:"d-flex gap-sm",children:[B.jsxs(c,{to:"/login",className:"btn btn-primary btn-sm flex-1",children:[B.jsx(xn,{size:14})," Sign In"]}),B.jsxs(c,{to:"/signup",className:"btn btn-outline btn-sm flex-1",children:[B.jsx(it,{size:14})," Sign Up"]})]})]})]}),Zr={STOCK_SEARCH:"tradebro_stock_search_history",NEWS_SEARCH:"tradebro_news_search_history",ORDER_SEARCH:"tradebro_order_search_history",GLOBAL_SEARCH:"tradebro_global_search_history"},ei=e=>{try{const t=Zr[`${e.toUpperCase()}_SEARCH`]||Zr.GLOBAL_SEARCH,n=localStorage.getItem(t);return n?JSON.parse(n):[]}catch(t){return[]}},ti=e=>ei(e).slice(0,5),ni=(e,t={})=>{const[s,a]=n.useState(""),[r,i]=n.useState([]),[o,l]=n.useState([]),[c,d]=n.useState(!1),[u,h]=n.useState(null),[m,p]=n.useState(null),[f,g]=n.useState([]),[y,v]=n.useState(!1),{debounceMs:x=300,minQueryLength:b=2,limit:j=10,enableSuggestions:w=!0,enableHistory:N=!0,filters:k={},onResults:S=null,onError:C=null}=t;n.useEffect(()=>{N&&g(ti(e))},[e,N]);const T=n.useCallback(e=>{m&&clearTimeout(m);const t=setTimeout(async()=>{e.length>=b?await P(e):(i([]),l([]),h(null))},x);p(t)},[m,b,x]),P=n.useCallback(async t=>{if(t&&!(t.length<b)){d(!0),h(null);try{let n=[],s=[];switch(e){case"stocks":const a=await Cr.searchStocks(t,j);if(n=a.success?a.results:[],n.length>0){const e=n.filter(e=>"NSE"===e.exchange||"BSE"===e.exchange||e.symbol.endsWith(".NS")||e.symbol.endsWith(".BO")),t=n.filter(e=>!("NSE"===e.exchange||"BSE"===e.exchange||e.symbol.endsWith(".NS")||e.symbol.endsWith(".BO")));n=[...e,...t]}w&&t.length>=1&&(s=n.slice(0,5));break;case"news":const r=await Br.searchNews(t,j);n=r.success?r.data:[];break;case"orders":const i=await Mr.searchOrders(t,k);n=i.success?i.data:[];break;case"watchlist":const o=await _r(t,j);n=o.success?o.data:[];break;default:throw new Error(`Unsupported search type: ${e}`)}i(n),l(s),N&&n.length>0&&(((e,t,n={})=>{if(t&&!(t.trim().length<2))try{const s=Zr[`${e.toUpperCase()}_SEARCH`]||Zr.GLOBAL_SEARCH,a=ei(e),r=[{query:t.trim(),timestamp:Date.now(),type:e,...n},...a.filter(e=>e.query.toLowerCase()!==t.toLowerCase())].slice(0,10);localStorage.setItem(s,JSON.stringify(r))}catch(u){}})(e,t,{resultsCount:n.length,hasResults:!0}),g(ti(e))),S&&S(n,t)}catch(n){h(n.message||"Search failed"),i([]),l([]),C&&C(n,t)}finally{d(!1)}}},[e,j,b,w,k,S,C]),E=n.useCallback(e=>{a(e),T(e)},[T]),L=n.useCallback(()=>{a(""),i([]),l([]),h(null),m&&clearTimeout(m)},[m]),I=n.useCallback((e=s)=>{P(e)},[P,s]);n.useEffect(()=>()=>{m&&clearTimeout(m)},[m]);const A=n.useCallback(e=>{a(e.query),v(!1),I(e.query)},[I]);return n.useMemo(()=>({query:s,results:r,suggestions:o,loading:c,error:u,recentSearches:f,showHistory:y,setQuery:E,clearSearch:L,triggerSearch:I,setShowHistory:v,handleHistoryClick:A,hasResults:r.length>0,hasSuggestions:o.length>0,hasRecentSearches:f.length>0,isEmpty:!c&&0===r.length&&s.length>=b,searchType:e,minQueryLength:b,enableHistory:N}),[s,r,o,c,u,f,y,E,L,I,A,e,b,N])},si=(e={})=>ni("stocks",{enableSuggestions:!0,limit:10,...e}),ai=(e={})=>ni("news",{enableSuggestions:!1,limit:20,...e}),ri=({placeholder:e="Search...",value:t="",onChange:s,onSearch:a,onClear:r,suggestions:i=[],onSuggestionClick:o,recentSearches:l=[],onHistoryClick:c,showHistory:d=!1,loading:u=!1,disabled:h=!1,size:m="md",showSuggestions:p=!0,enableHistory:f=!0,renderSuggestion:v,renderHistoryItem:x,className:b="",autoFocus:j=!1,...w})=>{const[N,k]=n.useState(!1),[S,C]=n.useState(!1),[T,P]=n.useState(-1),E=n.useRef(null),L=n.useRef(null),I=e=>{var t;null==o||o(e),C(!1),null==(t=E.current)||t.blur()};n.useEffect(()=>{j&&E.current&&E.current.focus()},[j]),n.useEffect(()=>{p&&N&&i.length>0&&t.length>0?C(!0):C(!1)},[i,p,N,t]);const A=v||((e,t)=>{const n=e.symbol||e.title||e;return B.jsx("div",{className:"search-suggestion-item",children:B.jsxs("div",{className:"suggestion-content",children:[B.jsx("span",{className:"suggestion-text",children:n}),e.name&&B.jsx("span",{className:"suggestion-subtitle",children:e.name})]})},t)}),O=x||((e,t)=>B.jsx("div",{className:"search-history-item",children:B.jsxs("div",{className:"history-content",children:[B.jsx(yt,{className:"history-icon"}),B.jsx("span",{className:"history-text",children:e.query}),B.jsx("span",{className:"history-time",children:new Date(e.timestamp).toLocaleDateString()})]})},t)),D=f&&d&&l.length>0&&!t,R=p&&i.length>0&&t;return B.jsxs("div",{className:`search-input-container ${b} size-${m}`,children:[B.jsxs("div",{className:`search-input-wrapper ${N?"focused":""} ${h?"disabled":""}`,children:[B.jsx(an,{className:"search-icon"}),B.jsx("input",{ref:E,type:"text",className:"search-input",placeholder:e,value:t,onChange:e=>{const t=e.target.value;null==s||s(t),p&&t.length>0&&i.length>0?C(!0):C(!1)},onFocus:()=>{k(!0),p&&i.length>0&&C(!0)},onBlur:e=>{setTimeout(()=>{var e;(null==(e=L.current)?void 0:e.contains(document.activeElement))||(k(!1),C(!1))},150)},onKeyDown:e=>{var n;const s=(()=>{const e=[];return D&&e.push(...l.map(e=>({type:"history",data:e}))),R&&e.push(...i.map(e=>({type:"suggestion",data:e}))),e})();if("ArrowDown"===e.key)e.preventDefault(),s.length>0&&(P(e=>e<s.length-1?e+1:0),S||C(!0));else if("ArrowUp"===e.key)e.preventDefault(),s.length>0&&(P(e=>e>0?e-1:s.length-1),S||C(!0));else if("Enter"===e.key){if(e.preventDefault(),T>=0&&s[T]){const e=s[T];"history"===e.type?null==c||c(e.data):I(e.data)}else null==a||a(t);C(!1),P(-1)}else"Escape"===e.key?(C(!1),P(-1),null==(n=E.current)||n.blur()):P(-1)},disabled:h,...w}),B.jsxs("div",{className:"search-actions",children:[u&&B.jsx(_t,{className:"search-loading animate-spin"}),t&&!u&&B.jsx("button",{type:"button",className:"search-clear",onClick:()=>{var e;null==s||s(""),null==r||r(),C(!1),null==(e=E.current)||e.focus()},disabled:h,children:B.jsx(Nn,{})})]})]}),B.jsx(g,{children:S&&(D||R)&&B.jsxs(y.div,{ref:L,className:"search-suggestions-dropdown",initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.15},children:[D&&B.jsxs("div",{className:"history-section",children:[B.jsx("div",{className:"section-header",children:B.jsx("span",{className:"section-title",children:"Recent Searches"})}),B.jsx("div",{className:"history-list",children:l.map((e,t)=>{const n=T===t;return B.jsx(y.div,{className:"history-item-wrapper "+(n?"selected":""),onClick:()=>null==c?void 0:c(e),whileHover:{backgroundColor:"var(--hover-bg)"},transition:{duration:.1},children:O(e,t)},`history-${t}`)})})]}),R&&B.jsxs("div",{className:"suggestions-section",children:[D&&B.jsx("div",{className:"section-header",children:B.jsx("span",{className:"section-title",children:"Suggestions"})}),B.jsx("div",{className:"suggestions-list",children:i.map((e,t)=>{const n=D?l.length+t:t,s=T===n;return B.jsx(y.div,{className:"suggestion-item-wrapper "+(s?"selected":""),onClick:()=>I(e),whileHover:{backgroundColor:"var(--hover-bg)"},transition:{duration:.1},children:A(e,t)},`suggestion-${t}`)})})]})]})})]})},ii=({isOpen:e,onClose:t,onSearch:s})=>{const[a,r]=n.useState("stocks"),[i,o]=n.useState(""),l=n.useRef(null),c=si({enableSuggestions:!0,enableHistory:!0,limit:8}),d=ai({enableSuggestions:!1,enableHistory:!0,limit:6}),u=(()=>{switch(a){case"stocks":default:return c;case"news":return d}})(),h=e=>{e.trim()&&s(e.trim(),a)},m=e=>{const t=e.query||e.symbol||e.title||e;h(t)};n.useEffect(()=>{const n=e=>{l.current&&!l.current.contains(e.target)&&t()};if(e)return document.addEventListener("mousedown",n),()=>document.removeEventListener("mousedown",n)},[e,t]),n.useEffect(()=>{e&&setTimeout(()=>{var e;const t=null==(e=l.current)?void 0:e.querySelector(".search-input");null==t||t.focus()},100)},[e]);const p=[{id:"stocks",label:"Stocks",icon:vn,placeholder:"Search stocks, symbols...",shortcut:"S"},{id:"news",label:"News",icon:At,placeholder:"Search news articles...",shortcut:"N"},{id:"orders",label:"Orders",icon:dn,placeholder:"Search orders by symbol...",shortcut:"O"}],f=p.find(e=>e.id===a);return B.jsx(g,{children:e&&B.jsxs(B.Fragment,{children:[B.jsx(y.div,{className:"global-search-backdrop",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},onClick:t}),B.jsxs(y.div,{ref:l,className:"global-search-modal",initial:{opacity:0,scale:.95,y:-20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-20},transition:{duration:.2},children:[B.jsx("div",{className:"global-search-header",children:B.jsx("div",{className:"search-type-tabs",children:p.map(e=>{const t=e.icon;return B.jsxs("button",{className:"search-type-tab "+(a===e.id?"active":""),onClick:()=>(e=>{r(e),o(""),u.clearSearch()})(e.id),children:[B.jsx(t,{className:"tab-icon"}),B.jsx("span",{className:"tab-label",children:e.label}),B.jsx("kbd",{className:"tab-shortcut",children:e.shortcut})]},e.id)})})}),B.jsx("div",{className:"global-search-input-container",children:B.jsx(ri,{placeholder:(null==f?void 0:f.placeholder)||"Search...",value:u.query,onChange:u.setQuery,onSearch:h,onClear:u.clearSearch,suggestions:u.suggestions,recentSearches:u.recentSearches,onSuggestionClick:m,onHistoryClick:m,showHistory:u.showHistory,loading:u.loading,size:"lg",showSuggestions:!0,enableHistory:!0,className:"global-search-input",autoFocus:!0})}),B.jsxs("div",{className:"global-search-footer",children:[B.jsxs("div",{className:"search-shortcuts",children:[B.jsxs("div",{className:"shortcut-item",children:[B.jsx("kbd",{children:B.jsx(lt,{})}),B.jsx("kbd",{children:B.jsx(at,{})}),B.jsx("span",{children:"Navigate"})]}),B.jsxs("div",{className:"shortcut-item",children:[B.jsx("kbd",{children:B.jsx(bt,{})}),B.jsx("span",{children:"Select"})]}),B.jsxs("div",{className:"shortcut-item",children:[B.jsx("kbd",{children:"Esc"}),B.jsx("span",{children:"Close"})]})]}),B.jsxs("div",{className:"search-branding",children:[B.jsx("span",{children:"Global Search"}),B.jsxs("div",{className:"shortcut-badge",children:[B.jsx(vt,{className:"command-icon"}),B.jsx("span",{children:"K"})]})]})]})]})]})})},oi=()=>{const{isVoiceModeActive:e,isListening:t,transcript:n,stopListening:s}=Hr();return e?B.jsx("div",{className:"voice-modal-overlay",children:B.jsxs("div",{className:"voice-modal",children:[B.jsxs("div",{className:"voice-modal-header",children:[B.jsx("h3",{children:"🎤 Saytrix Voice Commands"}),B.jsx("button",{className:"voice-modal-close",onClick:s,"aria-label":"Close voice commands",children:B.jsx(Nn,{})})]}),B.jsxs("div",{className:"voice-modal-content",children:[B.jsxs("div",{className:"voice-status",children:[B.jsxs("div",{className:"voice-indicator "+(t?"listening":""),children:[B.jsx(Wt,{}),B.jsx("div",{className:"pulse-ring"}),B.jsx("div",{className:"pulse-ring delay-1"}),B.jsx("div",{className:"pulse-ring delay-2"})]}),B.jsx("p",{className:"voice-status-text",children:t?"Listening for commands...":"Voice mode active"})]}),n&&B.jsx("div",{className:"voice-transcript",children:B.jsxs("p",{children:[B.jsx("strong",{children:"You said:"}),' "',n,'"']})}),B.jsxs("div",{className:"voice-commands-list",children:[B.jsx("h4",{children:"Available Commands:"}),B.jsxs("div",{className:"commands-grid",children:[B.jsxs("div",{className:"command-item",children:[B.jsx("span",{className:"command-text",children:'"Dashboard"'}),B.jsx("span",{className:"command-desc",children:"Go to dashboard"})]}),B.jsxs("div",{className:"command-item",children:[B.jsx("span",{className:"command-text",children:'"Charts"'}),B.jsx("span",{className:"command-desc",children:"Open charts"})]}),B.jsxs("div",{className:"command-item",children:[B.jsx("span",{className:"command-text",children:'"Portfolio"'}),B.jsx("span",{className:"command-desc",children:"View portfolio"})]}),B.jsxs("div",{className:"command-item",children:[B.jsx("span",{className:"command-text",children:'"Watchlist"'}),B.jsx("span",{className:"command-desc",children:"Open watchlist"})]}),B.jsxs("div",{className:"command-item",children:[B.jsx("span",{className:"command-text",children:'"Orders"'}),B.jsx("span",{className:"command-desc",children:"View orders"})]}),B.jsxs("div",{className:"command-item",children:[B.jsx("span",{className:"command-text",children:'"History"'}),B.jsx("span",{className:"command-desc",children:"Check history"})]}),B.jsxs("div",{className:"command-item",children:[B.jsx("span",{className:"command-text",children:'"News"'}),B.jsx("span",{className:"command-desc",children:"Read news"})]}),B.jsxs("div",{className:"command-item",children:[B.jsx("span",{className:"command-text",children:'"Notifications"'}),B.jsx("span",{className:"command-desc",children:"View notifications"})]}),B.jsxs("div",{className:"command-item",children:[B.jsx("span",{className:"command-text",children:'"Profile"'}),B.jsx("span",{className:"command-desc",children:"Open profile"})]}),B.jsxs("div",{className:"command-item",children:[B.jsx("span",{className:"command-text",children:'"Settings"'}),B.jsx("span",{className:"command-desc",children:"Open settings"})]}),B.jsxs("div",{className:"command-item",children:[B.jsx("span",{className:"command-text",children:'"Stop" / "Exit"'}),B.jsx("span",{className:"command-desc",children:"Close voice mode"})]})]})]}),B.jsx("div",{className:"voice-tips",children:B.jsxs("p",{children:[B.jsx("strong",{children:"💡 Tip:"}),' Say "Saytrix" anytime to activate voice commands']})})]})]})}):null},li=()=>{const{isListening:e,isVoiceModeActive:t,isSupported:n}=Hr();return!n||t?null:B.jsxs("div",{className:"voice-status-indicator "+(e?"listening":""),children:[B.jsx("div",{className:"voice-status-icon",children:B.jsx(Wt,{})}),B.jsx("div",{className:"voice-status-text",children:B.jsx("span",{children:'Say "Saytrix" to activate'})}),e&&B.jsxs("div",{className:"voice-pulse-rings",children:[B.jsx("div",{className:"pulse-ring"}),B.jsx("div",{className:"pulse-ring delay-1"}),B.jsx("div",{className:"pulse-ring delay-2"})]})]})};const ci=new class{constructor(){this.portfolio=new Map,this.tradingHistory=[],this.virtualBalance=1e4,this.listeners=new Set,this.dailyRewards={lastLoginDate:null,lastClaimDate:null,totalRewards:0,loginStreak:0},this.loadPortfolioFromStorage(),this.checkDailyLogin()}async _createAndStoreNotification(e){try{const t={id:`trade_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,...e,read:!1,createdAt:(new Date).toISOString()},n=JSON.parse(localStorage.getItem("tradebro_notifications")||"[]");return n.unshift(t),n.length>50&&n.splice(50),localStorage.setItem("tradebro_notifications",JSON.stringify(n)),Ja.notifyListeners("notification",t),t}catch(t){return null}}async createTradeNotification(e,t,n,s){await this._createAndStoreNotification({title:"Trade Executed Successfully",message:`Your ${s.toLowerCase()} order for ${t} shares of ${e} has been executed at ₹${n.toFixed(2)}`,type:"success",data:{symbol:e,quantity:t,price:n,action:s}})}async createRewardNotification(e,t){await this._createAndStoreNotification({title:"Daily Reward Claimed!",message:`You've earned ₹${e} daily bonus! Login streak: ${t} days`,type:"success",data:{amount:e,streak:t,type:"DAILY_REWARD"}})}loadPortfolioFromStorage(){try{const e=localStorage.getItem("tradebro_portfolio"),t=localStorage.getItem("tradebro_balance"),n=localStorage.getItem("tradebro_history"),s=localStorage.getItem("tradebro_daily_rewards");if(e){const t=JSON.parse(e);this.portfolio=new Map(Object.entries(t))}this.virtualBalance=t?parseFloat(t):1e4,n&&(this.tradingHistory=JSON.parse(n)),s&&(this.dailyRewards=JSON.parse(s))}catch(e){this.virtualBalance=1e4,this.dailyRewards={lastLoginDate:null,lastClaimDate:null,totalRewards:0,loginStreak:0}}}savePortfolioToStorage(){try{const e=Object.fromEntries(this.portfolio);localStorage.setItem("tradebro_portfolio",JSON.stringify(e)),localStorage.setItem("tradebro_balance",this.virtualBalance.toString()),localStorage.setItem("tradebro_history",JSON.stringify(this.tradingHistory)),localStorage.setItem("tradebro_daily_rewards",JSON.stringify(this.dailyRewards))}catch(e){}}addListener(e){this.listeners.add(e)}removeListener(e){this.listeners.delete(e)}notifyListeners(){this.listeners.forEach(e=>{try{e(this.getPortfolioSummary())}catch(t){}})}hasHoldings(e){const t=this.portfolio.get(e);return t&&t.quantity>0}getPosition(e){return this.portfolio.get(e)||{symbol:e,quantity:0,avgPrice:0,totalInvested:0,currentValue:0,pnl:0,pnlPercentage:0,lastUpdated:new Date}}getPortfolioSummary(){const e=Array.from(this.portfolio.values()).filter(e=>e.quantity>0);let t=0,n=0,s=0,a=0;e.forEach(e=>{t+=e.totalInvested,n+=e.currentValue||e.totalInvested,s+=(e.currentValue||e.totalInvested)-e.totalInvested,a+=e.realizedPnL||0});const r=t>0?s/t*100:0;return{totalValue:this.virtualBalance+n,availableCash:this.virtualBalance,totalInvested:t,totalCurrentValue:n,totalPnL:s,totalPnLPercentage:r,totalRealizedPnL:a,positions:e,totalPositions:e.length,lastUpdated:new Date}}getTradingHistory(e=100){return this.tradingHistory.slice(0,e)}calculateBrokerage(e){return Math.min(.001*e,20)}calculateTaxes(e,t){const n=345e-7*e;return("SELL"===t?25e-5*e:0)+n+.18*(this.calculateBrokerage(e)+n)+1e-6*e+("BUY"===t?3e-5*e:0)}calculateTradeMetrics(e,t,n,s){const a=this.getPosition(e),r=t*n,i=this.calculateBrokerage(r),o=this.calculateTaxes(r,s),l=r+i+o;let c={...a};if("BUY"===s){const e=a.quantity+t,n=a.totalInvested+l;c={...a,quantity:e,avgPrice:n/e,totalInvested:n,lastUpdated:new Date}}else if("SELL"===s){if(a.quantity<t)throw new Error(`Insufficient holdings. You have ${a.quantity} shares, trying to sell ${t}`);const e=a.quantity-t,n=r-i-o,s=t/a.quantity*a.totalInvested,l=n-s;c={...a,quantity:e,totalInvested:e>0?a.totalInvested-s:0,avgPrice:e>0?a.avgPrice:0,lastUpdated:new Date,realizedPnL:(a.realizedPnL||0)+l}}return{newPosition:c,tradeValue:r,brokerage:i,taxes:o,totalCost:"BUY"===s?l:r-i-o,realizedPnL:"SELL"===s?r-i-o-t/a.quantity*a.totalInvested:0}}async executeTrade(e,t,n,s,a="MARKET"){try{if(!(e&&t&&n&&s))throw new Error("Missing required trade parameters");if(t<=0||n<=0)throw new Error("Quantity and price must be positive");const r=this.calculateTradeMetrics(e,t,n,s);if("BUY"===s&&this.virtualBalance<r.totalCost)throw new Error(`Insufficient balance. Required: ₹${r.totalCost.toFixed(2)}, Available: ₹${this.virtualBalance.toFixed(2)}`);this.portfolio.set(e,r.newPosition),"BUY"===s?this.virtualBalance-=r.totalCost:this.virtualBalance+=r.totalCost;const i={id:Date.now().toString(),symbol:e,quantity:t,price:n,action:s,orderType:a,tradeValue:r.tradeValue,brokerage:r.brokerage,taxes:r.taxes,totalCost:r.totalCost,realizedPnL:r.realizedPnL,timestamp:new Date,status:"EXECUTED"};return this.tradingHistory.unshift(i),this.tradingHistory.length>1e3&&(this.tradingHistory=this.tradingHistory.slice(0,1e3)),this.savePortfolioToStorage(),this.notifyListeners(),this.createTradeNotification(e,t,n,s),{success:!0,trade:i,newPosition:r.newPosition,newBalance:this.virtualBalance,message:`Successfully ${s.toLowerCase()}ed ${t} shares of ${e}`}}catch(r){return{success:!1,error:r.message}}}async buyStock(e,t,n,s="market"){return this.executeTrade(e,t,n,"BUY",s)}async sellStock(e,t,n,s="market"){return this.executeTrade(e,t,n,"SELL",s)}async getPortfolio(){return{success:!0,data:this.getPortfolioSummary()}}async getHoldings(){return{success:!0,data:this.getPortfolioSummary().positions}}async getVirtualMoneyAccount(){return{success:!0,data:{balance:this.virtualBalance,totalInvested:this.getPortfolioSummary().totalInvested,totalReturns:this.getPortfolioSummary().totalPnL}}}async checkDailyLogin(){try{const e=(new Date).toDateString(),t=this.dailyRewards.lastClaimDate;if(t===e)return{awarded:!1,alreadyClaimed:!0,streak:this.dailyRewards.loginStreak,message:"You've already claimed your daily reward today! Come back tomorrow."};if(!t||t!==e){const t=100,n=this.virtualBalance;this.virtualBalance+=t;const s=new Date;s.setDate(s.getDate()-1);const a=this.dailyRewards.lastLoginDate===s.toDateString();return this.dailyRewards={lastLoginDate:e,lastClaimDate:e,totalRewards:this.dailyRewards.totalRewards+t,loginStreak:a?this.dailyRewards.loginStreak+1:1},this.tradingHistory.unshift({id:`daily_${Date.now()}`,type:"BONUS",symbol:"DAILY_REWARD",quantity:1,price:t,total:t,timestamp:new Date,description:`Daily login bonus - Day ${this.dailyRewards.loginStreak}`,balanceBefore:n,balanceAfter:this.virtualBalance}),this.savePortfolioToStorage(),await this.syncWithServer(),this.notifyListeners(),this.createRewardNotification(t,this.dailyRewards.loginStreak),{awarded:!0,amount:t,streak:this.dailyRewards.loginStreak,totalRewards:this.dailyRewards.totalRewards,newBalance:this.virtualBalance,oldBalance:n}}return{awarded:!1,alreadyClaimed:!1,streak:this.dailyRewards.loginStreak,totalRewards:this.dailyRewards.totalRewards}}catch(e){return{awarded:!1,error:e.message}}}getDailyRewardsInfo(){const e=(new Date).toDateString(),t=this.dailyRewards.lastClaimDate,n=!t||t!==e;return{...this.dailyRewards,canClaimToday:n,alreadyClaimedToday:t===e,timeUntilNextReward:this.getTimeUntilNextReward()}}getTimeUntilNextReward(){const e=this.dailyRewards.lastClaimDate;if(!e)return null;const t=new Date(e),n=new Date(t);n.setDate(n.getDate()+1),n.setHours(0,0,0,0);const s=new Date,a=n.getTime()-s.getTime();if(a<=0)return null;return{hours:Math.floor(a/36e5),minutes:Math.floor(a%36e5/6e4),totalMinutes:Math.floor(a/6e4),nextRewardTime:n.toISOString()}}async claimDailyReward(){try{const e=(new Date).toDateString(),t=this.dailyRewards.lastClaimDate;if(t&&t===e)return{success:!1,alreadyClaimed:!0,message:"You've already claimed your daily reward today!",timeUntilNext:this.getTimeUntilNextReward()};const n=100,s=this.virtualBalance;this.virtualBalance+=n;const a=new Date;a.setDate(a.getDate()-1);const r=this.dailyRewards.lastLoginDate===a.toDateString();return this.dailyRewards={lastLoginDate:e,lastClaimDate:e,totalRewards:this.dailyRewards.totalRewards+n,loginStreak:r?this.dailyRewards.loginStreak+1:1},this.tradingHistory.unshift({id:`daily_${Date.now()}`,type:"BONUS",symbol:"DAILY_REWARD",quantity:1,price:n,total:n,timestamp:new Date,description:`Daily login bonus - Day ${this.dailyRewards.loginStreak}`,balanceBefore:s,balanceAfter:this.virtualBalance}),this.savePortfolioToStorage(),await this.syncPortfolioData(),this.createRewardNotification(n,this.dailyRewards.loginStreak),this.notifyListeners(),{success:!0,awarded:!0,amount:n,streak:this.dailyRewards.loginStreak,totalRewards:this.dailyRewards.totalRewards,newBalance:this.virtualBalance,oldBalance:s}}catch(e){return{success:!1,error:e.message}}}forceDailyReward(){this.dailyRewards.lastLoginDate=null,this.dailyRewards.lastClaimDate=null,this.savePortfolioToStorage();const e=this.checkDailyLogin();return setTimeout(()=>{this.notifyListeners()},100),e}async syncPortfolioData(){try{return this.savePortfolioToStorage(),await this.syncWithServer(),this.notifyListeners(),{success:!0,summary:this.getPortfolioSummary(),rewards:this.getDailyRewardsInfo()}}catch(e){return{success:!1,error:e.message}}}async syncWithServer(){try{if(!localStorage.getItem("token"))return;(await Er.post("/virtual-money/sync-balance",{balance:this.virtualBalance,totalRewards:this.dailyRewards.totalRewards,loginStreak:this.dailyRewards.loginStreak,lastClaimDate:this.dailyRewards.lastClaimDate})).status}catch(e){}}clearAllData(){this.portfolio.clear(),this.tradingHistory=[],this.virtualBalance=1e4,this.dailyRewards={lastLoginDate:null,lastClaimDate:null,totalRewards:0,loginStreak:0},localStorage.removeItem("tradebro_portfolio"),localStorage.removeItem("tradebro_balance"),localStorage.removeItem("tradebro_history"),localStorage.removeItem("tradebro_daily_rewards"),this.notifyListeners()}},di=n.createContext(),ui=()=>{const e=n.useContext(di);if(!e)throw new Error("usePortfolio must be used within a PortfolioProvider");return e},hi=({children:e,user:t})=>{const[s,a]=n.useState({totalValue:1e4,availableCash:1e4,totalInvested:0,totalGainLoss:0,totalGainLossPercentage:0,holdings:[],transactions:[],watchlist:[]}),[r,i]=n.useState(!1);n.useEffect(()=>{const e=e=>{a(t=>({...t,totalValue:e.totalValue,availableCash:e.availableCash,totalInvested:e.totalInvested,totalGainLoss:e.totalPnL,totalGainLossPercentage:e.totalPnLPercentage,holdings:e.positions.map(e=>({symbol:e.symbol,quantity:e.quantity,avgPrice:e.avgPrice,currentPrice:e.currentValue/e.quantity||e.avgPrice,totalValue:e.currentValue||e.totalInvested,gainLoss:(e.currentValue||e.totalInvested)-e.totalInvested,gainLossPercentage:e.totalInvested>0?((e.currentValue||e.totalInvested)-e.totalInvested)/e.totalInvested*100:0}))}))};ci.addListener(e);const t=ci.getPortfolioSummary();e(t);const n=setTimeout(()=>{const t=ci.getPortfolioSummary();e(t)},2e3),s=t=>{const n=ci.getPortfolioSummary();e(n)};return window.addEventListener("balanceUpdated",s),()=>{ci.removeListener(e),window.removeEventListener("balanceUpdated",s),clearTimeout(n)}},[]),n.useEffect(()=>{const e=localStorage.getItem("token"),n=(null==t?void 0:t.id)||(null==t?void 0:t._id);if(t&&n&&e){const e=setTimeout(()=>{o()},100);return()=>clearTimeout(e)}a({totalValue:1e4,availableCash:1e4,totalInvested:0,totalGainLoss:0,totalGainLossPercentage:0,holdings:[],transactions:[],watchlist:[]})},[t]);const o=async()=>{i(!0);try{const e=ci.getPortfolioSummary(),t=ci.getTradingHistory(100);a({totalValue:e.totalValue,availableCash:e.availableCash,totalInvested:e.totalInvested,totalGainLoss:e.totalPnL,totalGainLossPercentage:e.totalPnLPercentage,holdings:e.positions.map(e=>({symbol:e.symbol,quantity:e.quantity,avgPrice:e.avgPrice,currentPrice:e.currentValue/e.quantity||e.avgPrice,totalValue:e.currentValue||e.totalInvested,gainLoss:(e.currentValue||e.totalInvested)-e.totalInvested,gainLossPercentage:e.totalInvested>0?((e.currentValue||e.totalInvested)-e.totalInvested)/e.totalInvested*100:0})),transactions:t,watchlist:[]})}catch(e){}finally{i(!1)}},l=n.useCallback(async(e,t,n,s=null)=>{try{i(!0);const s=await ci.buyStock(e,t,n);if(!s.success)throw new Error(s.error);try{await u(e)}catch(a){}return s}catch(r){throw r}finally{i(!1)}},[s.holdings]),c=n.useCallback(async(e,t,n,a=null)=>{try{i(!0);const o=s.holdings.find(t=>t.symbol===e),l=o&&o.quantity<=t,c=await ci.sellStock(e,t,n);if(!c.success)throw new Error(c.error);if(l)try{const t=a||{symbol:e,name:(null==o?void 0:o.name)||e,price:n,sector:(null==o?void 0:o.sector)||"Unknown"};await d(e,t)}catch(r){}return c}catch(o){throw o}finally{i(!1)}},[s.holdings]),d=async(e,n=null)=>{try{const s=localStorage.getItem("token"),r={userId:(null==t?void 0:t.id)||(null==t?void 0:t._id),symbol:e};n&&(n.name&&(r.name=n.name),n.sector&&(r.sector=n.sector),n.price&&(r.currentPrice=n.price));const i=await fetch("https://s89-satya-capstone-tradebro.onrender.com/api/portfolio/watchlist/add",{method:"POST",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify(r)});if(i.ok){const e=await i.json();return a(t=>({...t,watchlist:e})),e}if((await fetch("https://s89-satya-capstone-tradebro.onrender.com/api/watchlist/add",{method:"POST",headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"},body:JSON.stringify({symbol:e,name:(null==n?void 0:n.name)||"",notes:"Added after selling position"})})).ok)return!0}catch(s){throw s}},u=async e=>{try{const n=localStorage.getItem("token"),s=await fetch("https://s89-satya-capstone-tradebro.onrender.com/api/portfolio/watchlist/remove",{method:"DELETE",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"},body:JSON.stringify({userId:(null==t?void 0:t.id)||(null==t?void 0:t._id),symbol:e})});if(s.ok){const e=await s.json();return a(t=>({...t,watchlist:e})),e}return(await fetch(`https://s89-satya-capstone-tradebro.onrender.com/api/watchlist/remove/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"}})).ok,!0}catch(n){return!0}},h=n.useCallback(async()=>{try{const e=localStorage.getItem("token"),n=(null==t?void 0:t.id)||(null==t?void 0:t._id),s=await fetch(`https://s89-satya-capstone-tradebro.onrender.com/api/portfolio/update-values/${n}`,{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(s.ok){const e=await s.json();return a(e),e}}catch(e){}},[null==t?void 0:t.id]),m=n.useCallback(()=>{const e=ci.getPortfolioSummary(),t=ci.getDailyRewardsInfo();a(n=>({...n,totalValue:e.totalValue,availableCash:e.availableCash,totalInvested:e.totalInvested,totalGainLoss:e.totalPnL,totalGainLossPercentage:e.totalPnLPercentage,dailyRewards:t,holdings:e.positions.map(e=>({symbol:e.symbol,quantity:e.quantity,avgPrice:e.avgPrice,currentPrice:e.currentValue/e.quantity||e.avgPrice,totalValue:e.currentValue||e.totalInvested,gainLoss:(e.currentValue||e.totalInvested)-e.totalInvested,gainLossPercentage:e.totalInvested>0?((e.currentValue||e.totalInvested)-e.totalInvested)/e.totalInvested*100:0}))}))},[]),p=n.useCallback(e=>{setTimeout(()=>{m()},100)},[m]),f={portfolioData:s,loading:r,buyStock:l,sellStock:c,addToWatchlist:d,removeFromWatchlist:u,updatePortfolioValues:h,initializePortfolio:o,refreshPortfolio:m,handleDailyReward:p};return B.jsx(di.Provider,{value:f,children:e})},mi=n.memo(({symbol:e,price:t,change:s,changePercent:a,priceChange:r=null,showSymbol:i=!0,showChange:o=!0,size:l="medium",className:c=""})=>{const[d,u]=n.useState(!1),[h,m]=n.useState(null);n.useEffect(()=>{if(r&&r.direction){m(r.direction),u(!0);const e=setTimeout(()=>{u(!1)},2e3);return()=>clearTimeout(e)}},[r]);const p=n.useCallback(e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2,maximumFractionDigits:2}).format(e),[]),f=n.useCallback(e=>{if("number"!=typeof e||isNaN(e))return"--";return`${e>=0?"+":""}${e.toFixed(2)}%`},[]),{trendDirection:v,isPositive:x,formattedPrice:b,formattedChange:j}=n.useMemo(()=>({trendDirection:s>0?"up":s<0?"down":"neutral",isPositive:s>=0,formattedPrice:"number"==typeof t?p(t):t,formattedChange:"number"==typeof s?f(s):s}),[t,s,p,f]);return B.jsxs("div",{className:`stock-price ${l} ${c}`,children:[i&&B.jsx("div",{className:"stock-symbol",children:e}),B.jsxs("div",{className:"price-container",children:[B.jsxs(y.div,{className:"price-value "+(d?"animating":""),variants:{initial:{scale:1},animate:{scale:[1,1.05,1],transition:{duration:.6,ease:"easeInOut"}}},initial:"initial",animate:d?"animate":"initial",children:[p(t),B.jsx(g,{children:d&&B.jsx(y.div,{className:`price-flash ${h}`,variants:{initial:{opacity:0},animate:{opacity:[0,.3,0],transition:{duration:1,ease:"easeInOut"}}},initial:"initial",animate:"animate",exit:"initial"})})]}),o&&B.jsxs("div",{className:`price-change ${v}`,children:[B.jsxs("div",{className:"change-icon",children:["up"===v&&B.jsx(vn,{size:14}),"down"===v&&B.jsx(yn,{size:14}),"neutral"===v&&B.jsx(Vt,{size:14})]}),B.jsxs("div",{className:"change-values",children:[B.jsxs("span",{className:"change-amount",children:[x?"+":"",p(Math.abs(s))]}),B.jsxs("span",{className:"change-percent",children:["(",f(a),")"]})]})]})]}),B.jsx(g,{children:d&&B.jsx(y.div,{className:"pulse-indicator",initial:{scale:0,opacity:1},animate:{scale:2,opacity:0},exit:{scale:0,opacity:0},transition:{duration:1}})})]})});mi.displayName="StockPrice";const pi=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),fi=e=>`${e.toFixed(2)}%`,gi=(e,t=2)=>"number"!=typeof e?"₹0.00":`₹${e.toLocaleString("en-IN",{minimumFractionDigits:t,maximumFractionDigits:t})}`,yi=({notification:e,onClose:t,theme:n="light"})=>B.jsxs(y.div,{className:`notification-toast ${e.type} ${n}`,initial:{opacity:0,x:300,scale:.9},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:300,scale:.9},transition:{type:"spring",stiffness:300,damping:30},children:[B.jsx("div",{className:"toast-icon-container",children:(e=>{const t={size:20};switch(e){case"success":return B.jsx(ft,{...t,className:"toast-icon success"});case"error":return B.jsx(wn,{...t,className:"toast-icon error"});case"warning":return B.jsx(nt,{...t,className:"toast-icon warning"});case"alert":return B.jsx(tt,{...t,className:"toast-icon alert"});default:return B.jsx(Dt,{...t,className:"toast-icon info"})}})(e.type)}),B.jsxs("div",{className:"toast-content",children:[B.jsx("div",{className:"toast-title",children:e.title}),e.message&&B.jsx("div",{className:"toast-message",children:e.message}),e.link&&B.jsxs(y.button,{className:"toast-action",onClick:()=>{e.link&&window.open(e.link,"_blank")},whileHover:{scale:1.05},whileTap:{scale:.95},children:["View Details",B.jsx(Tt,{size:14})]})]}),B.jsx(y.button,{className:"toast-close",onClick:t,whileHover:{scale:1.1},whileTap:{scale:.9},"aria-label":"Dismiss notification",children:B.jsx(Nn,{size:16})})]}),vi=(e,t="light")=>{const n={toastId:`notification-${e.id}`,position:"top-right",autoClose:"error"===e.type?7e3:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,closeButton:!1,className:`toast-container-wrapper ${t}`},s=({closeToast:n})=>B.jsx(yi,{notification:e,onClose:n,theme:t});switch(e.type){case"success":return Ze.success(s,n);case"error":return Ze.error(s,n);case"warning":return Ze.warning(s,n);default:return Ze.info(s,n)}},xi={success:(e,t,n,s,a="light")=>{const r={id:Date.now(),type:"success",title:`${e} Order Executed`,message:`${"buy"===e?"Bought":"Sold"} ${n} shares of ${t} at ₹${s.toLocaleString("en-IN")}`,link:"/orders"};return vi(r,a)},pending:(e,t,n,s="light")=>{const a={id:Date.now(),type:"info",title:`${e} Order Pending`,message:`Placing ${e} order for ${n} shares of ${t}`,link:"/orders"};return vi(a,s)},error:(e,t,n="light")=>{const s={id:Date.now(),type:"error",title:"Order Failed",message:t||e,link:"/orders"};return vi(s,n)}};class bi{constructor(){this.intervals=new Set,this.timeouts=new Set,this.listeners=new Set}addInterval(e){return this.intervals.add(e),e}addTimeout(e){return this.timeouts.add(e),e}addListener(e,t,n){const s={element:e,event:t,handler:n};return this.listeners.add(s),e.addEventListener(t,n),s}cleanup(){this.intervals.forEach(e=>clearInterval(e)),this.intervals.clear(),this.timeouts.forEach(e=>clearTimeout(e)),this.timeouts.clear(),this.listeners.forEach(({element:e,event:t,handler:n})=>{e.removeEventListener(t,n)}),this.listeners.clear()}}const ji=()=>{const e=n.useRef(new bi);return n.useEffect(()=>()=>{e.current.cleanup()},[]),e.current};class wi{constructor(e=100){this.maxSize=e,this.cache=new Map}get(e){if(this.cache.has(e)){const t=this.cache.get(e);return this.cache.delete(e),this.cache.set(e,t),t}return null}set(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){const e=this.cache.keys().next().value;this.cache.delete(e)}this.cache.set(e,t)}clear(){this.cache.clear()}size(){return this.cache.size}}const Ni=(e,t)=>{const n=e>=0?"+":"";return{absolute:`${n}₹${Math.abs(e).toFixed(2)}`,percent:`${n}${t.toFixed(2)}%`,direction:e>0?"up":e<0?"down":"same"}},ki=({stockData:e,orderType:t,quantity:s,orderPrice:a,averagePrice:r=null,className:i=""})=>{const[o,l]=n.useState(!1),[c,d]=n.useState(0),{getPrice:u,isConnected:h,lastUpdate:m}=((e=[],t=!0)=>{const[s,a]=n.useState({}),[r,i]=n.useState(!1),[o,l]=n.useState(null),[c,d]=n.useState(0),u=n.useRef(null),h=n.useRef(null),m=n.useRef(null),p=n.useRef([]),f=n.useRef(null);n.useRef(new wi(1e3)),ji();const g={wsUrl:"wss://ws.finnhub.io?token=YOUR_FINNHUB_TOKEN",fallbackInterval:t?3e4:6e4,debounceDelay:50,reconnectDelay:5e3,maxReconnectAttempts:5,batchSize:10,maxCacheAge:3e4},y=n.useCallback(()=>{if(0===p.current.length)return;const e=[...p.current];p.current=[];const t=e.reduce((e,t)=>(e[t.symbol]=t,e),{});a(e=>{const n={...e};let s=!1;return Object.values(t).forEach(e=>{const t=n[e.symbol];t&&t.price===e.price||(n[e.symbol]={...e,previousPrice:(null==t?void 0:t.price)||e.price,priceDirection:t?e.price>t.price?"up":e.price<t.price?"down":"same":"same",lastUpdated:(new Date).toISOString()},s=!0)}),s&&(l((new Date).toISOString()),d(e=>e+1)),n})},[]),v=n.useCallback(e=>{p.current.push(e),f.current&&clearTimeout(f.current),f.current=setTimeout(()=>{y()},g.debounceDelay)},[y,g.debounceDelay]),x=n.useCallback(()=>{if(t&&0!==e.length)try{u.current=new WebSocket(g.wsUrl),u.current.onopen=()=>{i(!0),e.forEach(e=>{u.current.send(JSON.stringify({type:"subscribe",symbol:e.toUpperCase()}))})},u.current.onmessage=e=>{try{const t=JSON.parse(e.data);"trade"===t.type&&t.data.forEach(e=>{v({symbol:e.s,price:e.p,volume:e.v,timestamp:e.t,change:0,changePercent:0})})}catch(t){}},u.current.onclose=()=>{i(!1),t&&(m.current=setTimeout(()=>{x()},g.reconnectDelay))},u.current.onerror=e=>{i(!1)}}catch(n){i(!1)}},[t,e,v,g.wsUrl,g.reconnectDelay]),b=n.useCallback(async()=>{if(t&&0!==e.length)try{const t=e.map(async e=>{try{const t=await fetch(`https://s89-satya-capstone-tradebro.onrender.com/api/stocks/quote/${e}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}});if(t.ok){const e=await t.json();return{symbol:e.symbol,price:e.price||e.c,change:e.change||e.d,changePercent:e.changePercent||e.dp,volume:e.volume||e.v,high:e.high||e.h,low:e.low||e.l,timestamp:Date.now()}}}catch(t){}return null});(await Promise.all(t)).filter(Boolean).forEach(v)}catch(n){}},[t,e,v]),j=n.useCallback(()=>{h.current&&clearInterval(h.current),h.current=setInterval(b,g.fallbackInterval),b()},[b,g.fallbackInterval]);n.useEffect(()=>{if(!t||0===e.length)return;x();const n=setTimeout(()=>{r||j()},2e3);return()=>{clearTimeout(n)}},[t,e,x,j,r]),n.useEffect(()=>()=>{u.current&&u.current.close(),h.current&&clearInterval(h.current),m.current&&clearTimeout(m.current),f.current&&clearTimeout(f.current)},[]);const w=n.useCallback(e=>s[null==e?void 0:e.toUpperCase()]||null,[s]),N=n.useCallback(e=>e.map(e=>({symbol:e,...w(e)})).filter(Boolean),[w]),k=n.useCallback(e=>{u.current&&u.current.readyState===WebSocket.OPEN&&u.current.send(JSON.stringify({type:"subscribe",symbol:e.toUpperCase()}))},[]),S=n.useCallback(e=>{u.current&&u.current.readyState===WebSocket.OPEN&&u.current.send(JSON.stringify({type:"unsubscribe",symbol:e.toUpperCase()}))},[]),C=n.useCallback(()=>{b()},[b]),T=n.useCallback((e,t,n)=>{const s=w(e);if(!s||!t||!n)return{pnl:0,pnlPercent:0,unrealized:!0};const a=t*s.price,r=t*n,i=a-r;return{pnl:i,pnlPercent:i/r*100,currentValue:a,investedValue:r,unrealized:!0,lastUpdated:s.lastUpdated}},[w]);return{prices:s,isConnected:r,lastUpdate:o,updateCount:c,getPrice:w,getPrices:N,subscribe:k,unsubscribe:S,refresh:C,calculatePnL:T,connectionStatus:r?"connected":"disconnected"}})(e?[e.symbol]:[],!0),p=u(null==e?void 0:e.symbol),f=(null==p?void 0:p.price)||(null==e?void 0:e.price)||0,g=n.useMemo(()=>{if(!e||!s||!a)return null;const n=parseInt(s),i=parseFloat(a),o=parseFloat(f);if("buy"===t){const e=n*i,t=n*o,s=t-e,a=o-i;return{type:"buy",orderValue:e,currentValue:t,unrealizedPnL:s,unrealizedPnLPercent:e>0?s/e*100:0,priceDiff:a,priceDiffPercent:i>0?a/i*100:0,breakEvenPrice:i,isProfit:s>=0,recommendation:a>0?"favorable":a<0?"unfavorable":"neutral"}}{const e=parseFloat(r||i),t=n*i,s=n*e,a=t-s,l=n*o,c=l-t;return{type:"sell",investedValue:s,sellValue:t,marketValue:l,realizedPnL:a,realizedPnLPercent:s>0?a/s*100:0,opportunityCost:c,opportunityCostPercent:t>0?c/t*100:0,breakEvenPrice:e,isProfit:a>=0,recommendation:c<0?"good_timing":c>0?"consider_waiting":"neutral"}}},[e,t,s,a,f,r]);if(n.useEffect(()=>{l(!!g),g&&d(e=>e+1)},[g]),n.useEffect(()=>{p&&m&&d(e=>e+1)},[p,m]),!o||!g)return null;return B.jsxs(y.div,{className:`live-pnl-calculator ${i}`,initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,ease:"easeOut"},children:[B.jsxs("div",{className:"pnl-header",children:[B.jsxs("div",{className:"pnl-title",children:[B.jsx(et,{className:"pnl-icon"}),B.jsx("span",{children:"Live P&L Calculator"})]}),B.jsxs("div",{className:"connection-status",children:[B.jsx("div",{className:"status-indicator "+(h?"connected":"disconnected")}),B.jsx("span",{className:"status-text",children:h?"Live":"Delayed"})]})]}),B.jsxs("div",{className:"current-price-section",children:[B.jsx("div",{className:"price-label",children:"Current Market Price"}),B.jsxs("div",{className:"price-display",children:[B.jsx("span",{className:"price-value",children:pi(f)}),p&&B.jsxs(y.div,{className:`price-change ${p.priceDirection}`,initial:{scale:1},animate:{scale:[1,1.1,1]},transition:{duration:.3},children:["up"===p.priceDirection&&B.jsx(vn,{size:14}),"down"===p.priceDirection&&B.jsx(yn,{size:14}),B.jsx("span",{children:Ni(p.change,p.changePercent).percent})]})]})]}),B.jsx("div",{className:"pnl-calculations",children:"buy"===g.type?B.jsxs(B.Fragment,{children:[B.jsxs("div",{className:"calc-row",children:[B.jsx("span",{className:"calc-label",children:"Investment Value:"}),B.jsx("span",{className:"calc-value",children:pi(g.orderValue)})]}),B.jsxs("div",{className:"calc-row",children:[B.jsx("span",{className:"calc-label",children:"Current Value:"}),B.jsx("span",{className:"calc-value",children:pi(g.currentValue)})]}),B.jsxs("div",{className:"calc-row highlight",children:[B.jsx("span",{className:"calc-label",children:"Unrealized P&L:"}),B.jsxs("span",{className:"calc-value "+(g.isProfit?"profit":"loss"),children:[g.isProfit?B.jsx(vn,{size:14}):B.jsx(yn,{size:14}),pi(Math.abs(g.unrealizedPnL)),B.jsxs("span",{className:"percent",children:["(",fi(g.unrealizedPnLPercent),")"]})]})]}),B.jsxs("div",{className:"calc-row",children:[B.jsx("span",{className:"calc-label",children:"Price Difference:"}),B.jsxs("span",{className:"calc-value "+(g.priceDiff>=0?"profit":"loss"),children:[pi(Math.abs(g.priceDiff)),B.jsxs("span",{className:"percent",children:["(",fi(g.priceDiffPercent),")"]})]})]})]}):B.jsxs(B.Fragment,{children:[B.jsxs("div",{className:"calc-row",children:[B.jsx("span",{className:"calc-label",children:"Invested Value:"}),B.jsx("span",{className:"calc-value",children:pi(g.investedValue)})]}),B.jsxs("div",{className:"calc-row",children:[B.jsx("span",{className:"calc-label",children:"Sale Value:"}),B.jsx("span",{className:"calc-value",children:pi(g.sellValue)})]}),B.jsxs("div",{className:"calc-row highlight",children:[B.jsx("span",{className:"calc-label",children:"Realized P&L:"}),B.jsxs("span",{className:"calc-value "+(g.isProfit?"profit":"loss"),children:[g.isProfit?B.jsx(vn,{size:14}):B.jsx(yn,{size:14}),pi(Math.abs(g.realizedPnL)),B.jsxs("span",{className:"percent",children:["(",fi(g.realizedPnLPercent),")"]})]})]}),B.jsxs("div",{className:"calc-row",children:[B.jsx("span",{className:"calc-label",children:"Opportunity Cost:"}),B.jsxs("span",{className:"calc-value "+(g.opportunityCost<=0?"profit":"loss"),children:[pi(Math.abs(g.opportunityCost)),B.jsxs("span",{className:"percent",children:["(",fi(g.opportunityCostPercent),")"]})]})]})]})}),B.jsx("div",{className:"pnl-recommendation",children:B.jsxs("div",{className:"recommendation-indicator",style:{color:(e=>{switch(e){case"favorable":case"good_timing":return"#10B981";case"unfavorable":case"consider_waiting":return"#EF4444";default:return"#6B7280"}})(g.recommendation)},children:[B.jsx(Nt,{size:16}),B.jsx("span",{children:((e,t)=>{if("buy"===t)switch(e){case"favorable":return"Good entry point - price below market";case"unfavorable":return"Consider waiting - price above market";default:return"Price aligned with market"}else switch(e){case"good_timing":return"Good timing - selling above market";case"consider_waiting":return"Consider waiting - market price higher";default:return"Price aligned with market"}})(g.recommendation,g.type)})]})}),B.jsxs("div",{className:"break-even-info",children:[B.jsx(Qt,{size:14}),B.jsxs("span",{children:["Break-even: ",pi(g.breakEvenPrice)]})]}),m&&B.jsxs("div",{className:"last-update",children:[B.jsx(yt,{size:12}),B.jsxs("span",{children:["Updated: ",new Date(m).toLocaleTimeString()]})]})]},c)},Si=({stockData:e,orderType:t,portfolioData:s,currentPrice:a,onQuantitySelect:r,selectedQuantity:i,className:o=""})=>{const l=n.useMemo(()=>{if(!e||!a)return[];const n=[];if("buy"===t){const e=s.availableCash;[1,5,10,25,50,100,200,500].forEach(t=>{const s=t*a;s<=e&&s>=500&&n.push({type:"round",quantity:t,amount:s,label:`${t} shares`,description:"Round number",icon:fn,priority:2})});[1e3,2500,5e3,1e4,25e3,5e4].forEach(t=>{if(t<=e){const e=Math.floor(t/a);e>0&&n.push({type:"amount",quantity:e,amount:e*a,label:`₹${t.toLocaleString("en-IN")}`,description:`${e} shares`,icon:Nt,priority:3})}});[10,25,50,75,100].forEach(t=>{const s=e*t/100,r=Math.floor(s/a);r>0&&s>=500&&n.push({type:"percentage",quantity:r,amount:r*a,label:`${t}%`,description:`${r} shares of available cash`,icon:Qt,priority:25===t||50===t?1:2})});const t=s.totalValue||0;if(t>0){[2,5,10].forEach(s=>{const r=t*s/100,i=Math.floor(r/a);i>0&&r<=e&&n.push({type:"diversification",quantity:i,amount:i*a,label:`${s}% of portfolio`,description:`${i} shares for diversification`,icon:Zt,priority:1})})}}else{const t=s.holdings.find(t=>t.symbol===e.symbol);if(!t||0===t.quantity)return[];const r=t.quantity,i=t.averagePrice||t.averageBuyPrice||0;[25,50,75,100].forEach(e=>{const t=Math.floor(r*e/100);if(t>0){const s=t*a,r=t*i,o=s-r,l=r>0?o/r*100:0;n.push({type:"profit",quantity:t,amount:s,label:`${e}% of holding`,description:`${t} shares • ${o>=0?"Profit":"Loss"}: ₹${Math.abs(o).toLocaleString("en-IN")}`,icon:o>=0?vn:dt,priority:o>=0?1:3,profitLoss:o,profitPercent:l})}});if([1,5,10,25,50,100].forEach(e=>{if(e<=r){const t=e*a,s=t-e*i;n.push({type:"round",quantity:e,amount:t,label:`${e} shares`,description:`${s>=0?"Profit":"Loss"}: ₹${Math.abs(s).toLocaleString("en-IN")}`,icon:fn,priority:2,profitLoss:s})}}),i>0&&a!==i){const e=Math.min(r,Math.floor(r/2));e>0&&n.push({type:"breakeven",quantity:e,amount:e*a,label:"Break-even",description:`${e} shares at current price`,icon:kn,priority:a>=i?1:3})}}return n.filter((e,t,n)=>t===n.findIndex(t=>t.quantity===e.quantity)).sort((e,t)=>e.priority!==t.priority?e.priority-t.priority:e.quantity-t.quantity).slice(0,8)},[e,t,s,a]);if(0===l.length)return null;l.reduce((e,t)=>{const n=t.type;return e[n]||(e[n]=[]),e[n].push(t),e},{});return B.jsxs("div",{className:`smart-quantity-suggestions ${o}`,children:[B.jsxs("div",{className:"suggestions-header",children:[B.jsx(hn,{className:"suggestions-icon"}),B.jsx("span",{className:"suggestions-title",children:"Smart Suggestions"})]}),B.jsx("div",{className:"suggestions-grid",children:l.map((e,t)=>{const n=e.icon,s=i===e.quantity,a=(e=>{switch(e.type){case"percentage":case"diversification":return"#8B5CF6";case"amount":return"#10B981";case"profit":return e.profitLoss>=0?"#10B981":"#EF4444";case"round":return"#3B82F6";case"breakeven":return"#F59E0B";default:return"#6B7280"}})(e);return B.jsxs(y.button,{className:"suggestion-card "+(s?"selected":""),onClick:()=>r(e.quantity),initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.2,delay:.05*t},whileHover:{scale:1.02},whileTap:{scale:.98},style:{"--suggestion-color":a},children:[B.jsxs("div",{className:"suggestion-header",children:[B.jsx(n,{className:"suggestion-icon",size:16}),B.jsx("span",{className:"suggestion-label",children:e.label})]}),B.jsxs("div",{className:"suggestion-details",children:[B.jsx("div",{className:"suggestion-description",children:e.description}),B.jsxs("div",{className:"suggestion-amount",children:["₹",e.amount.toLocaleString("en-IN")]})]}),void 0!==e.profitLoss&&B.jsxs("div",{className:"profit-indicator "+(e.profitLoss>=0?"profit":"loss"),children:[e.profitLoss>=0?"+":"","₹",Math.abs(e.profitLoss).toLocaleString("en-IN"),void 0!==e.profitPercent&&B.jsxs("span",{className:"profit-percent",children:["(",e.profitPercent>=0?"+":"",e.profitPercent.toFixed(1),"%)"]})]}),1===e.priority&&B.jsxs("div",{className:"priority-badge",children:[B.jsx(hn,{size:10}),"Recommended"]})]},`${e.type}-${e.quantity}`)})}),B.jsx("div",{className:"suggestions-footer",children:B.jsx("span",{className:"suggestions-note",children:"Suggestions based on your portfolio and market conditions"})})]})},Ci=({isOpen:e,onClose:t,stockData:s=null,initialOrderType:a="buy",onOrderPlaced:r,onShowConfirmation:i})=>{var o,l;const[c,d]=n.useState(a),[u,h]=n.useState("market"),[m,p]=n.useState(1),[f,v]=n.useState(""),[x,b]=n.useState(!1),[j,w]=n.useState(!1),{portfolioData:N,buyStock:k,sellStock:S}=ui();pe(e=>e.auth);const C=document.documentElement.getAttribute("data-theme")||"light",{validationErrors:T,profitLossEstimate:P,isValidating:E,isValid:L,getOrderSummary:I}=((e,t,s,a,r)=>{const[i,o]=n.useState({}),[l,c]=n.useState(null),[d,u]=n.useState(!1),[h,m]=n.useState(!1),{availableCash:p,holdings:f}=pe(e=>e.portfolio.data)||{},g=n.useMemo(()=>{const e={market:.001,limit:5e-4};return t=>{const n=t*(e[null==r?void 0:r.toLowerCase()]||e.market);return Number(Math.max(1,Math.min(100,n)).toFixed(2))}},[r]),y=n.useCallback(()=>{const n=parseFloat(s),i="market"===r?(null==e?void 0:e.price)||0:parseFloat(a)||0;if(!e||isNaN(n)||n<=0||isNaN(i)||i<=0)return{grossAmount:0,fees:0,netAmount:0,pricePerShare:i,quantity:n};const o=n*i,l=g(o);return{grossAmount:o,fees:l,netAmount:"buy"===t?o+l:o-l,pricePerShare:i,quantity:n}},[e,s,a,r,t,g]),v=n.useCallback(()=>{u(!0);const n={},a=parseFloat(s),{netAmount:i,grossAmount:l,pricePerShare:d}=y();if(e||(n.stock="Please select a stock"),(isNaN(a)||a<=0||!Number.isInteger(a))&&(n.quantity="Quantity must be a whole number greater than 0"),"limit"===r&&(isNaN(d)||d<=0)&&(n.price="Please enter a valid limit price"),"buy"===t)i>p&&(n.funds=`Insufficient funds. Available: ${pi(p)}`);else if("sell"===t){const t=f.find(t=>{var n,s;return(null==(n=t.symbol)?void 0:n.toUpperCase())===(null==(s=null==e?void 0:e.symbol)?void 0:s.toUpperCase())});(!t||t.quantity<a)&&(n.shares=`Insufficient shares. Available: ${(null==t?void 0:t.quantity)||0}`)}if("sell"!==t||n.shares)c(null);else{const t=f.find(t=>{var n,s;return(null==(n=t.symbol)?void 0:n.toUpperCase())===(null==(s=null==e?void 0:e.symbol)?void 0:s.toUpperCase())}),n=a*((null==t?void 0:t.averagePrice)||0),s=a*d-n;c({amount:s,percentage:n>0?s/n*100:0,isProfit:s>=0})}o(n),m(0===Object.keys(n).length&&!!e),u(!1)},[e,t,s,a,r,p,f,y]);return n.useEffect(()=>{const e=setTimeout(()=>v(),300);return()=>clearTimeout(e)},[v]),{validationErrors:i,profitLossEstimate:l,isValidating:d,isValid:h,getOrderSummary:y,calculateTradingFees:g}})(s,c,m,f,u),{stockData:A,isLoading:O,refreshStockData:D,isMarketOpen:R}=((e,t=!0)=>{const[s,a]=n.useState(null),[r,i]=n.useState(!1),[o,l]=n.useState(null),[c,d]=n.useState(!1),u=n.useCallback(async e=>{if(!e||!t)return a(null),d(!1),void l(null);i(!0),l(null);try{if(!(await h(e)))return d(!1),l(`Invalid stock symbol: ${e}`),void a(null);const t=await p(e);t?(a(t),d(!0),l(null)):(d(!1),l("Failed to fetch stock data"),a(null))}catch(n){l(n.message||"Failed to validate stock"),d(!1),a(null)}finally{i(!1)}},[t]),h=async e=>{try{const t=/^[0-9]{6}$/;if(!/^[A-Z0-9&-]{1,20}$/.test(e)&&!t.test(e))return!1;const n=await fetch(`https://s89-satya-capstone-tradebro.onrender.com/api/stocks/validate/${e}`,{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}});return n.ok?(await n.json()).isValid:m(e)}catch(t){return m(e)}},m=e=>["RELIANCE","TCS","HDFCBANK","INFY","HINDUNILVR","ICICIBANK","KOTAKBANK","BHARTIARTL","ITC","SBIN","BAJFINANCE","ASIANPAINT","MARUTI","AXISBANK","LT","DMART","SUNPHARMA","TITAN","ULTRACEMCO","NESTLEIND","WIPRO","TECHM","POWERGRID","NTPC","ONGC","TATAMOTORS","BAJAJFINSV","HCLTECH","COALINDIA","DRREDDY","EICHERMOT","ADANIPORTS","JSWSTEEL","TATASTEEL","GRASIM","CIPLA","BRITANNIA","DIVISLAB","APOLLOHOSP","BPCL","HEROMOTOCO","SHREECEM","PIDILITIND","DABUR"].includes(e.toUpperCase()),p=async e=>{try{const t=await fetch(`https://s89-satya-capstone-tradebro.onrender.com/api/stocks/quote/${e}`,{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}});if(t.ok){const e=await t.json();return{symbol:e.symbol,name:e.name||e.symbol,price:e.price||e.c||0,change:e.change||e.d||0,changePercent:e.changePercent||e.dp||0,volume:e.volume||e.v||0,high:e.high||e.h||0,low:e.low||e.l||0,open:e.open||e.o||0,previousClose:e.previousClose||e.pc||0,marketCap:e.marketCap||0,pe:e.pe||0,lastUpdated:(new Date).toISOString()}}return f(e)}catch(t){return f(e)}},f=e=>{const t=2e3*Math.random()+100,n=100*(Math.random()-.5),s=n/t*100;return{symbol:e.toUpperCase(),name:`${e.toUpperCase()} Limited`,price:parseFloat(t.toFixed(2)),change:parseFloat(n.toFixed(2)),changePercent:parseFloat(s.toFixed(2)),volume:Math.floor(1e6*Math.random()),high:parseFloat((t+Math.abs(n)).toFixed(2)),low:parseFloat((t-Math.abs(n)).toFixed(2)),open:parseFloat((t-n).toFixed(2)),previousClose:parseFloat((t-n).toFixed(2)),marketCap:Math.floor(1e12*Math.random()),pe:parseFloat((50*Math.random()+5).toFixed(2)),lastUpdated:(new Date).toISOString()}},g=n.useCallback(()=>{if(!s||!t)return;const e=setInterval(async()=>{try{const e=await p(s.symbol);e&&a(t=>({...t,...e,lastUpdated:(new Date).toISOString()}))}catch(e){}},3e4);return()=>clearInterval(e)},[s,t]);n.useEffect(()=>{const t=setTimeout(()=>{e&&e.length>=2?u(e):(a(null),d(!1),l(null))},500);return()=>clearTimeout(t)},[e,u]),n.useEffect(()=>{if(s&&t)return g()},[s,t,g]);const y=n.useCallback(async()=>{s&&await u(s.symbol)},[s,u]),v=n.useCallback(()=>s?s.change>0?"positive":s.change<0?"negative":"neutral":"neutral",[s]),x=n.useCallback(()=>{const e=new Date,t=e.getDay(),n=100*e.getHours()+e.getMinutes();return 0!==t&&6!==t&&n>=915&&n<=1530},[]);return{stockData:s,isLoading:r,error:o,isValidSymbol:c,refreshStockData:y,getPriceTrend:v,isMarketOpen:x(),validateAndFetchStock:u}})(null==s?void 0:s.symbol,e),M=A||s;n.useEffect(()=>{var t;e&&M&&(v((null==(t=M.price)?void 0:t.toString())||""),p(1))},[e,M]),n.useEffect(()=>{if(e&&(null==M?void 0:M.symbol)){const e=setInterval(()=>{D()},3e4);return()=>clearInterval(e)}},[e,null==M?void 0:M.symbol,D]);const _=I(),F=e=>{const t=Math.max(1,m+e);p(t)},z=async()=>{w(!0);try{const n="market"===u?M.price:parseFloat(f),s=xi.pending(c,M.symbol,m,C);let a;if(a="buy"===c?await k(M.symbol,m,n,M):await S(M.symbol,m,n,M),e=s,Ze.dismiss(e),!a.success)throw new Error(a.error||"Order failed");if("buy"===c)xi.buySuccess(M.symbol,m,n,C);else{const e=P?P.amount:0;xi.sellSuccess(M.symbol,m,n,e,C)}(null==N?void 0:N.refreshPortfolio)&&N.refreshPortfolio(),null==r||r(),t()}catch(n){xi.error("Order failed",n.message||"An unexpected error occurred",C)}finally{w(!1)}var e};return e?B.jsx(g,{children:B.jsx(y.div,{className:"order-modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e=>e.target===e.currentTarget&&t(),children:B.jsxs(y.div,{className:"order-modal",initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{duration:.3,ease:[.4,0,.2,1]},children:[B.jsxs("div",{className:"order-modal-header",children:[B.jsxs("h2",{className:"order-modal-title",children:[B.jsx(dn,{}),"buy"===c?"Buy Order":"Sell Order"]}),B.jsx("button",{className:"order-modal-close",onClick:t,children:B.jsx(Nn,{size:20})})]}),B.jsxs("div",{className:"order-modal-body",children:[M&&B.jsxs("div",{className:"order-stock-info",children:[B.jsxs("div",{className:"order-stock-details",children:[B.jsx("h3",{children:M.symbol}),B.jsx("p",{children:M.name||M.symbol}),!R&&B.jsxs("span",{className:"market-closed-indicator",children:[B.jsx(yt,{size:12}),"Market Closed"]})]}),B.jsxs("div",{className:"order-stock-price",children:[B.jsx(mi,{price:M.price,change:M.change,changePercent:M.changePercent,size:"large"}),O&&B.jsxs("div",{className:"price-loading",children:[B.jsx("div",{className:"loading-spinner"}),"Updating..."]})]})]}),B.jsxs("div",{className:"order-form-section",children:[B.jsxs("h3",{className:"section-title",children:[B.jsx(et,{}),"Order Type"]}),B.jsxs("div",{className:"order-type-toggle",children:[B.jsxs("button",{className:"order-type-btn "+("buy"===c?"active buy":""),onClick:()=>d("buy"),children:[B.jsx(vn,{}),"Buy"]}),B.jsxs("button",{className:"order-type-btn "+("sell"===c?"active sell":""),onClick:()=>d("sell"),children:[B.jsx(yn,{}),"Sell"]})]})]}),B.jsx("div",{className:"order-form-section",children:B.jsxs("div",{className:"order-method-select",children:[B.jsx("label",{htmlFor:"order-method",children:"Order Method"}),B.jsxs("select",{id:"order-method",value:u,onChange:e=>h(e.target.value),children:[B.jsx("option",{value:"market",children:"Market Order"}),B.jsx("option",{value:"limit",children:"Limit Order"})]})]})}),B.jsxs("div",{className:"order-form-section",children:[B.jsxs("div",{className:"order-inputs-grid",children:[B.jsxs("div",{className:"order-input-group full-width",children:[B.jsx("label",{children:"Quantity"}),B.jsx(Si,{stockData:M,orderType:c,portfolioData:N,currentPrice:"market"===u?(null==M?void 0:M.price)||0:parseFloat(f)||0,onQuantitySelect:p,selectedQuantity:m}),B.jsx("div",{className:"quantity-options",children:(()=>{if(!M)return[];const e="market"===u?M.price:parseFloat(f)||M.price;if("buy"===c){const t=N.availableCash,n=[];[1e3,2500,5e3,1e4].forEach(s=>{const a=Math.floor(s/e);a>0&&s<=t&&n.push({value:a,label:`${a} shares`,amount:a*e,disabled:!1})});return[25,50,75,100].forEach(s=>{const a=t*s/100,r=Math.floor(a/e);r>0&&!n.find(e=>e.value===r)&&n.push({value:r,label:`${s}% (${r})`,amount:r*e,disabled:!1})}),n.sort((e,t)=>e.value-t.value).slice(0,6).map(e=>({...e,disabled:e.amount>t}))}{const t=N.holdings.find(e=>e.symbol===M.symbol);if(!t||0===t.quantity)return[];const n=t.quantity,s=[];[1,5,10,25,50,100].forEach(t=>{t<=n&&s.push({value:t,label:`${t} shares`,amount:t*e,disabled:!1})});return[25,50,75,100].forEach(t=>{const a=Math.floor(n*t/100);a>0&&!s.find(e=>e.value===a)&&s.push({value:a,label:`${t}% (${a})`,amount:a*e,disabled:!1})}),s.find(e=>e.value===n)||s.push({value:n,label:`All (${n})`,amount:n*e,disabled:!1}),s.sort((e,t)=>e.value-t.value).slice(0,6)}})().map(e=>B.jsxs("button",{className:"quantity-option-btn "+(m===e.value?"active":""),onClick:()=>p(e.value),disabled:e.disabled,children:[B.jsx("span",{className:"option-value",children:e.label}),B.jsxs("span",{className:"option-amount",children:["₹",(e.value*("market"===u?(null==M?void 0:M.price)||0:parseFloat(f)||0)).toLocaleString("en-IN")]})]},e.value))}),B.jsxs("div",{className:"order-quantity-control",children:[B.jsx("button",{className:"qty-control-btn",onClick:()=>F(-1),disabled:m<=1,children:B.jsx(Vt,{})}),B.jsx("input",{type:"number",className:"qty-control-input",value:m,onChange:e=>p(Math.max(1,parseInt(e.target.value)||1)),min:"1",placeholder:"Enter quantity"}),B.jsx("button",{className:"qty-control-btn",onClick:()=>F(1),children:B.jsx(tn,{})})]}),B.jsxs("div",{className:"investment-amount-display",children:[B.jsx("span",{className:"investment-label",children:"Investment Amount:"}),B.jsxs("span",{className:"investment-value",children:["₹",(m*("market"===u?(null==M?void 0:M.price)||0:parseFloat(f)||0)).toLocaleString("en-IN")]})]}),T.quantity&&B.jsx("span",{className:"error-text",children:T.quantity})]}),"limit"===u&&B.jsxs("div",{className:"order-input-group",children:[B.jsx("label",{children:"Limit Price (₹)"}),B.jsx("input",{type:"number",className:"order-price-input",value:f,onChange:e=>v(e.target.value),placeholder:"Enter limit price",step:"0.01"}),T.price&&B.jsx("span",{className:"error-text",children:T.price})]})]}),T.funds&&B.jsxs("div",{className:"error-message",children:[B.jsx(nt,{}),T.funds]}),T.shares&&B.jsxs("div",{className:"error-message",children:[B.jsx(nt,{}),T.shares]})]}),M&&m>0&&("market"===u||f)&&B.jsx("div",{className:"order-form-section",children:B.jsx(ki,{stockData:M,orderType:c,quantity:m,orderPrice:"market"===u?M.price:parseFloat(f)||0,averagePrice:"sell"===c?null==(o=N.holdings.find(e=>e.symbol===M.symbol))?void 0:o.averagePrice:null})}),B.jsx("div",{className:"order-form-section",children:B.jsxs("div",{className:"order-summary-card",children:[B.jsxs("h3",{className:"order-summary-title",children:[B.jsx(Nt,{}),"Order Summary"]}),B.jsxs("div",{className:"summary-row",children:[B.jsx("span",{className:"summary-label",children:"Quantity:"}),B.jsxs("span",{className:"summary-value",children:[m," shares"]})]}),B.jsxs("div",{className:"summary-row",children:[B.jsx("span",{className:"summary-label",children:"Price per share:"}),B.jsx("span",{className:"summary-value",children:gi(_.pricePerShare)})]}),B.jsxs("div",{className:"summary-row",children:[B.jsx("span",{className:"summary-label",children:"Gross amount:"}),B.jsx("span",{className:"summary-value",children:pi(_.grossAmount)})]}),B.jsxs("div",{className:"summary-row",children:[B.jsx("span",{className:"summary-label",children:"Fees & charges:"}),B.jsx("span",{className:"summary-value",children:pi(_.fees.total)})]}),B.jsxs("div",{className:"summary-row total",children:[B.jsx("span",{className:"summary-label",children:"Net amount:"}),B.jsx("span",{className:"summary-value",children:pi(_.netAmount)})]}),P&&B.jsxs("div",{className:"profit-loss-indicator "+(P.isProfit?"profit":"loss"),children:[P.isProfit?B.jsx(vn,{}):B.jsx(yn,{}),"Estimated ",P.isProfit?"Profit":"Loss",":",pi(Math.abs(P.amount)),"(",fi(P.percentage),")"]})]})}),B.jsxs("div",{className:"confirm-checkbox",children:[B.jsx("input",{type:"checkbox",id:"confirm-checkbox",checked:x,onChange:e=>b(e.target.checked)}),B.jsxs("label",{htmlFor:"confirm-checkbox",children:["I confirm that I want to place this ",c," order"]})]}),B.jsxs("div",{className:"order-modal-actions",children:[B.jsx("button",{className:"order-action-btn cancel",onClick:t,disabled:j,children:"Cancel"}),B.jsx("button",{className:"order-action-btn "+("buy"===c?"place-buy":"place-sell"),onClick:()=>{!L||x&&!document.getElementById("confirm-checkbox").checked||i&&i({orderData:{orderType:c,orderMethod:u,quantity:m,limitPrice:f},stockData:M,orderSummary:_,profitLossEstimate:P,onConfirm:z})},disabled:j||!L||E||x&&!(null==(l=document.getElementById("confirm-checkbox"))?void 0:l.checked),children:j?B.jsxs(B.Fragment,{children:[B.jsx("div",{className:"loading-spinner"}),"Placing Order..."]}):`Place ${"buy"===c?"Buy":"Sell"} Order`})]})]})]})})}):null},Ti=({isOpen:e,onClose:t,onConfirm:s,orderData:r,stockData:i,orderSummary:o,profitLossEstimate:l,isProcessing:c=!1})=>{const[d,u]=n.useState("details"),[h,m]=n.useState(0),[p,f]=n.useState(!1),v=n.useRef(null),{portfolioData:x}=ui(),b=a.useMemo(()=>{if("sell"===(null==r?void 0:r.orderType)&&i&&(null==x?void 0:x.holdings)){const e=x.holdings.find(e=>e.symbol===i.symbol);if(e){const t=i.price||0,n=e.averagePrice||0,s=e.quantity||0,a=n*s,r=t*s,o=r-a,l=a>0?o/a*100:0;return{...e,currentPrice:t,buyPrice:n,totalInvested:a,currentValue:r,totalGainLoss:o,gainLossPercentage:l,isProfit:o>=0}}}return null},[r,i,x]);a.useMemo(()=>{if(b){const e=20,t=b.currentPrice-b.buyPrice,n=[];for(let s=0;s<=e;s++){const a=s/e,r=b.buyPrice+t*a,i=r*b.quantity;n.push({time:Date.now()-24*(e-s)*60*60*1e3,price:r,value:i})}return n}return[]},[b]),n.useEffect(()=>{e&&(u("details"),m(0),f(!1))},[e]);const j=e=>{f(!0);const t=e.touches?e.touches[0].clientX:e.clientX,n=v.current;if(!n)return;const a=n.getBoundingClientRect().width-60,r=e=>{const n=e.touches?e.touches[0].clientX:e.clientX,s=Math.max(0,Math.min(a,n-t));m(s/a*100)},i=()=>{h>80?(u("processing"),s()):m(0),f(!1),document.removeEventListener("mousemove",r),document.removeEventListener("mouseup",i),document.removeEventListener("touchmove",r),document.removeEventListener("touchend",i)};document.addEventListener("mousemove",r),document.addEventListener("mouseup",i),document.addEventListener("touchmove",r),document.addEventListener("touchend",i)};if(!e||!r||!i)return null;const{orderType:w,orderMethod:N,quantity:k,limitPrice:S}=r,C="market"===N?i.price:parseFloat(S),T="buy"===w;return B.jsx(g,{mode:"wait",children:e&&B.jsx(y.div,{className:"enhanced-confirmation-overlay app-level-modal",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e=>e.target===e.currentTarget&&t(),"data-modal-level":"app",children:B.jsxs(y.div,{className:"enhanced-confirmation-modal",initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{duration:.3,ease:[.4,0,.2,1]},children:[B.jsx(y.button,{className:"enhanced-modal-close",onClick:t,whileHover:{scale:1.1},whileTap:{scale:.9},children:B.jsx(Nn,{size:24})}),"details"===d&&B.jsxs(y.div,{className:"modal-content",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:[B.jsxs("div",{className:"stock-header",children:[B.jsxs("div",{className:"stock-info",children:[B.jsx("h1",{className:"stock-symbol",children:i.symbol}),B.jsx("p",{className:"stock-name",children:i.name}),B.jsx("div",{className:"stock-exchange-badge",children:"NSE"})]}),B.jsxs("div",{className:"stock-price",children:[B.jsx("span",{className:"current-price",children:pi(C)}),B.jsxs("div",{className:"price-change "+(i.change>=0?"positive":"negative"),children:[i.change>=0?B.jsx(vn,{}):B.jsx(yn,{}),B.jsxs("span",{children:[pi(Math.abs(i.change))," (",fi(Math.abs(i.changePercent)),")"]})]})]})]}),B.jsxs("div",{className:"order-details",children:[B.jsxs("h3",{className:"section-title",children:[B.jsx(Nt,{}),"Order Details"]}),B.jsxs("div",{className:"detail-grid",children:[B.jsxs("div",{className:"detail-item",children:[B.jsx("span",{className:"label",children:"Order Type:"}),B.jsx("span",{className:"value "+(T?"buy":"sell"),children:T?"BUY":"SELL"})]}),B.jsxs("div",{className:"detail-item",children:[B.jsx("span",{className:"label",children:"Quantity:"}),B.jsxs("span",{className:"value",children:[k," shares"]})]}),B.jsxs("div",{className:"detail-item",children:[B.jsx("span",{className:"label",children:"Price:"}),B.jsx("span",{className:"value",children:pi(C)})]}),B.jsxs("div",{className:"detail-item",children:[B.jsx("span",{className:"label",children:"Total Amount:"}),B.jsx("span",{className:"value total",children:pi(C*k)})]})]})]}),!T&&b&&B.jsxs("div",{className:"profit-loss-analysis",children:[B.jsxs("h3",{className:"section-title",children:[B.jsx(dt,{}),"Profit & Loss Analysis"]}),B.jsxs("div",{className:"pnl-summary",children:[B.jsxs("div",{className:"pnl-item",children:[B.jsx("span",{className:"label",children:"Buy Price:"}),B.jsx("span",{className:"value",children:pi(b.buyPrice)})]}),B.jsxs("div",{className:"pnl-item",children:[B.jsx("span",{className:"label",children:"Current Price:"}),B.jsx("span",{className:"value",children:pi(b.currentPrice)})]}),B.jsxs("div",{className:"pnl-item",children:[B.jsx("span",{className:"label",children:"Total Invested:"}),B.jsx("span",{className:"value",children:pi(b.totalInvested)})]}),B.jsxs("div",{className:"pnl-item total",children:[B.jsxs("span",{className:"label",children:["Total ",b.isProfit?"Profit":"Loss",":"]}),B.jsxs("span",{className:"value "+(b.isProfit?"profit":"loss"),children:[b.isProfit?"+":"",pi(b.totalGainLoss),"(",b.isProfit?"+":"",fi(b.gainLossPercentage),")"]})]})]})]}),B.jsx("div",{className:"slide-to-confirm",children:B.jsxs("div",{ref:v,className:"slide-container",children:[B.jsx("div",{className:"slide-track",style:{background:`linear-gradient(to right, ${T?"#10B981":"#EF4444"} ${h}%, #E5E7EB ${h}%)`},children:B.jsx(y.div,{className:"slide-button",style:{left:`${h}%`},onMouseDown:j,onTouchStart:j,whileHover:{scale:1.05},whileTap:{scale:.95},children:B.jsx(it,{})})}),B.jsxs("span",{className:"slide-text",children:["Slide to ",T?"Buy":"Sell"]})]})})]}),"processing"===d&&B.jsxs(y.div,{className:"processing-content",initial:{opacity:0},animate:{opacity:1},children:[B.jsx("div",{className:"processing-animation",children:B.jsx(y.div,{className:"spinner",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}})}),B.jsx("h2",{children:"Processing Order..."}),B.jsxs("p",{children:["Please wait while we execute your ",T?"buy":"sell"," order"]})]}),"success"===d&&B.jsxs(y.div,{className:"success-content",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},children:[B.jsx(y.div,{className:"success-icon",initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:300},children:B.jsx(ft,{})}),B.jsx("h2",{children:"Order Confirmed!"}),B.jsxs("p",{children:["Your ",T?"buy":"sell"," order has been successfully placed"]}),B.jsx(y.button,{className:"success-button",onClick:t,whileHover:{scale:1.05},whileTap:{scale:.95},children:"Done"})]})]})})})},Pi=()=>{const{user:e}=Cn(),[t,s]=n.useState([]),[a,r]=n.useState(!1),[i,o]=n.useState({active:!1,action:null}),[l,c]=n.useState(!1),[d,u]=n.useState(null),h=n.useMemo(()=>(null==e?void 0:e.id)?`watchlists_${e.id}`:null,[null==e?void 0:e.id]),m=n.useCallback(async()=>{if(h){r(!0),o({active:!0,action:"fetch"}),u(null);try{const e=localStorage.getItem(h);if(e){const t=JSON.parse(e);s(t)}else{const e={_id:w(),name:"My Watchlist",stocks:[],isDefault:!0,createdAt:(new Date).toISOString()};s([e]),localStorage.setItem(h,JSON.stringify([e]))}}catch(e){u("Failed to load watchlists. Please try again.")}finally{r(!1),o({active:!1,action:null})}}},[h]);n.useEffect(()=>{h&&m()},[m,h]);const p=n.useCallback(e=>!!e&&t.some(t=>t.stocks.some(t=>{var n,s;return(null==(n=t.symbol)?void 0:n.toLowerCase())===e.toLowerCase()||(null==(s=t.stockSymbol)?void 0:s.toLowerCase())===e.toLowerCase()})),[t]),f=n.useCallback(async(n,a=null)=>{var i;if(!(null==e?void 0:e.id))return Ze.error("Please login to add stocks to a watchlist."),{success:!1,message:"User not authenticated"};r(!0),o({active:!0,action:"add"}),u(null);try{const e=a||(null==(i=t.find(e=>e.isDefault))?void 0:i._id)||(t.length>0?t[0]._id:null);if(!e)return Ze.error("No watchlists found. Please create one first."),{success:!1,message:"No watchlists found"};const r=t.find(t=>t._id===e),o=n.symbol||n.stockSymbol;if(null==r?void 0:r.stocks.some(e=>e.symbol===o)){const e=`${o} is already in this watchlist.`;return Ze.info(e),{success:!1,message:e}}const l={symbol:o,name:n.name||`${o} Corporation`,price:n.price||0,change:n.change||0,changePercent:n.changePercent||0,volume:n.volume||0,marketCap:n.marketCap||0,sector:n.sector||"Unknown",addedAt:(new Date).toISOString()},c=t.map(t=>t._id===e?{...t,stocks:[...t.stocks,l]}:t);return s(c),localStorage.setItem(h,JSON.stringify(c)),Ze.success(`${l.symbol} added to watchlist!`),{success:!0}}catch(l){return u("Failed to add stock to watchlist."),Ze.error("Failed to add stock to watchlist."),{success:!1,message:"Failed to add stock"}}finally{r(!1),o({active:!1,action:null})}},[null==e?void 0:e.id,t,h]),g=n.useCallback(async(n,a=null)=>{if(!(null==e?void 0:e.id))return Ze.error("Please login to manage your watchlist."),{success:!1,message:"User not authenticated"};r(!0),o({active:!0,action:"remove"}),u(null);try{let e=a;if(!e){const s=t.find(e=>e.stocks.some(e=>e.symbol===n));e=null==s?void 0:s._id}if(!e)return Ze.error("Stock not found in any watchlist."),{success:!1,message:"Stock not found"};const r=t.map(t=>t._id===e?{...t,stocks:t.stocks.filter(e=>e.symbol!==n)}:t);return s(r),localStorage.setItem(h,JSON.stringify(r)),Ze.success(`${n} removed from watchlist.`),{success:!0}}catch(i){return u("Failed to remove stock from watchlist."),Ze.error("Failed to remove stock from watchlist."),{success:!1,message:"Failed to remove stock"}}finally{r(!1),o({active:!1,action:null})}},[null==e?void 0:e.id,t,h]),y=n.useCallback(async(n,a="")=>{if(!(null==e?void 0:e.id))return Ze.error("Please login to create a watchlist."),{success:!1,message:"User not authenticated"};r(!0),o({active:!0,action:"create"}),u(null);try{const e={_id:w(),name:n,description:a,stocks:[],isDefault:0===t.length,createdAt:(new Date).toISOString()},r=[...t,e];return s(r),localStorage.setItem(h,JSON.stringify(r)),Ze.success(`Watchlist "${n}" created successfully.`),{success:!0,data:e}}catch(i){return u("Failed to create watchlist."),Ze.error("Failed to create watchlist."),{success:!1,message:"Failed to create watchlist"}}finally{r(!1),o({active:!1,action:null})}},[null==e?void 0:e.id,t,h]),v=n.useCallback(async n=>{if(!(null==e?void 0:e.id))return Ze.error("Please login to delete a watchlist."),{success:!1,message:"User not authenticated"};r(!0),o({active:!0,action:"delete"}),u(null);try{const e=t.filter(e=>e._id!==n);return s(e),localStorage.setItem(h,JSON.stringify(e)),Ze.success("Watchlist deleted successfully."),{success:!0}}catch(a){return u("Failed to delete watchlist."),Ze.error("Failed to delete watchlist."),{success:!1,message:"Failed to delete watchlist"}}finally{r(!1),o({active:!1,action:null})}},[null==e?void 0:e.id,t,h]),x=n.useCallback(async()=>{c(!0),await new Promise(e=>setTimeout(e,1500)),c(!1),Ze.success("Watchlists refreshed successfully.")},[]);return{watchlists:t,loading:a,loadingState:i,refreshingState:l,error:d,isInWatchlist:p,addToWatchlist:f,removeFromWatchlist:g,createWatchlist:y,deleteWatchlist:v,refreshWatchlists:x}},Ei=(e,t="manual")=>e&&"string"==typeof e.symbol?{symbol:e.symbol.toUpperCase(),name:e.name||e.companyName||e.symbol,price:e.price||e.currentPrice||0,change:e.change||e.priceChange||0,changePercent:e.changePercent||e.percentChange||0,volume:e.volume||0,marketCap:e.marketCap||0,source:t,...e}:null,Li=()=>{const[e,t]=n.useState({isOpen:!1,stockData:null,orderType:"buy",source:null}),s=o(),{addToWatchlist:a,removeFromWatchlist:r,isInWatchlist:i}=Pi(),l=pe(e=>{var t;return(null==(t=e.portfolio.data)?void 0:t.holdings)||[]},(e,t)=>JSON.stringify(e)===JSON.stringify(t)),c=n.useCallback(e=>l.some(t=>{var n;return(null==(n=t.symbol)?void 0:n.toUpperCase())===(null==e?void 0:e.toUpperCase())}),[l]),d=n.useCallback((e,n="buy",s="manual")=>{const a=Ei(e,s);a?t({isOpen:!0,stockData:a,orderType:n,source:s}):Ze.error("Invalid stock data provided.")},[]),u=n.useCallback(()=>{t(e=>({...e,isOpen:!1,stockData:null,source:null}))},[]),h=n.useCallback(async(e,t=1)=>{try{const n=Ei(e);if(!n)throw new Error("Invalid stock data");const s=await ci.placeOrder({type:"BUY",stockSymbol:n.symbol,stockName:n.name,quantity:t,price:n.price,orderType:"MARKET"});return Ze.success(s.message),{success:!0,data:s.data}}catch(n){return Ze.error(n.message||"Failed to buy stock"),{success:!1,error:n.message}}},[]),m=n.useCallback(async(e,t=1)=>{try{const n=Ei(e);if(!n)throw new Error("Invalid stock data");const s=await ci.placeOrder({type:"SELL",stockSymbol:n.symbol,stockName:n.name,quantity:t,price:n.price,orderType:"MARKET"});return Ze.success(s.message),{success:!0,data:s.data}}catch(n){return Ze.error(n.message||"Failed to sell stock"),{success:!1,error:n.message}}},[]),p=n.useCallback(e=>{var t;const n=null==(t=e.symbol)?void 0:t.toUpperCase(),o=c(n),l=i(n);return[{label:"Quick Buy",icon:"FiTrendingUp",action:()=>h(e),color:"green"},{label:"Quick Sell",icon:"FiTrendingDown",action:()=>m(e),color:"red",disabled:!o},{label:"View Chart",icon:"FiBarChart2",action:()=>s(`/trading?symbol=${e.symbol}`),color:"blue"},{label:l?"Remove from Watchlist":"Add to Watchlist",icon:"FiBookmark",action:()=>l?r(e.symbol):a(e),color:"purple"}]},[h,m,s,c,i,a,r]);return{orderModalState:e,openOrderModal:d,closeOrderModal:u,navigateToTrading:(e,t)=>{const n=e.symbol||e.stockSymbol;s(`/trading?symbol=${n}&type=${t}`)},handleChartStockClick:e=>d(e,"buy","chart"),handleWatchlistStockClick:(e,t)=>d(e,t,"watchlist"),handlePortfolioStockClick:(e,t="sell")=>d(e,t,"portfolio"),handleMarketDataClick:(e,t="buy")=>d(e,t,"market"),quickBuy:h,quickSell:m,handleBulkOrder:(e,t)=>{e.length>0&&d({...Ei(e[0],"bulk"),bulkList:e},t,"bulk")},getContextMenuActions:p,normalizeStockData:Ei}},Ii=(e,t={})=>{const{enableProfiling:s=!1,cacheSize:a=100,debounceDelay:r=300,throttleDelay:i=1e3}=t,o=n.useRef(0),l=n.useRef(Date.now()),c=n.useRef(new wi(a)),d=ji();n.useEffect(()=>{o.current+=1;const e=Date.now();l.current;l.current=e});return{debounce:n.useCallback((e,t=r)=>((e,t)=>{let n;return(...s)=>{clearTimeout(n),n=setTimeout(()=>e.apply(null,s),t)}})(e,t),[r]),throttle:n.useCallback((e,t=i)=>((e,t)=>{let n;return(...s)=>{n||(e.apply(null,s),n=!0,setTimeout(()=>n=!1,t))}})(e,t),[i]),cache:n.useMemo(()=>({get:e=>c.current.get(e),set:(e,t)=>c.current.set(e,t),clear:()=>c.current.clear(),size:()=>c.current.size()}),[]),getMetrics:n.useCallback(()=>({renderCount:o.current,lastRenderTime:l.current,cacheSize:c.current.size(),componentName:e}),[e]),cleanupManager:d}};const Ai=new class{constructor(){this.listeners=new Set,this.currentBalance=1e4,this.isInitialized=!1}async initialize(){if(!this.isInitialized)try{const e=ci.getPortfolioSummary();this.currentBalance=e.availableCash,ci.addListener(this.handleTradingServiceUpdate.bind(this)),window.addEventListener("balanceUpdated",this.handleBalanceUpdate.bind(this)),this.isInitialized=!0}catch(e){}}handleTradingServiceUpdate(e){const t=e.availableCash;t!==this.currentBalance&&(this.currentBalance=t,this.notifyListeners())}handleBalanceUpdate(e){const{newBalance:t}=e.detail;t!==this.currentBalance&&(this.currentBalance=t,this.notifyListeners())}getCurrentBalance(){return this.currentBalance}getFormattedBalance(){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2,maximumFractionDigits:2}).format(this.currentBalance)}async updateBalance(e,t="manual"){const n=this.currentBalance;this.currentBalance=e,ci.virtualBalance=e,ci.savePortfolioToStorage(),ci.notifyListeners(),await this.syncWithServer(),this.notifyListeners(),window.dispatchEvent(new CustomEvent("balanceUpdated",{detail:{newBalance:e,oldBalance:n,change:e-n,source:t}}))}async syncWithServer(){try{const e=localStorage.getItem("token");if(!e)return;(await fetch("https://s89-satya-capstone-tradebro.onrender.com/api/virtual-money/sync-balance",{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({balance:this.currentBalance,totalRewards:ci.dailyRewards.totalRewards,loginStreak:ci.dailyRewards.loginStreak,lastClaimDate:ci.dailyRewards.lastClaimDate})})).ok}catch(e){}}addListener(e){return this.listeners.add(e),e({balance:this.currentBalance,formattedBalance:this.getFormattedBalance()}),()=>this.listeners.delete(e)}removeListener(e){this.listeners.delete(e)}notifyListeners(){const e={balance:this.currentBalance,formattedBalance:this.getFormattedBalance()};this.listeners.forEach(t=>{try{t(e)}catch(n){}})}async forceRefresh(){try{ci.getPortfolioSummary();const e=localStorage.getItem("token");if(e){const t=await fetch("https://s89-satya-capstone-tradebro.onrender.com/api/virtual-money/account",{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(t.ok){const e=(await t.json()).data.balance;this.currentBalance=e,ci.virtualBalance=e,ci.savePortfolioToStorage()}}this.notifyListeners()}catch(e){}}cleanup(){this.listeners.clear(),window.removeEventListener("balanceUpdated",this.handleBalanceUpdate.bind(this)),this.isInitialized=!1}},Oi=({children:e,className:t=""})=>{const n=a.useRef(null),s=b(n,{once:!0,margin:"-100px"});return B.jsx(y.div,{ref:n,className:t,initial:{opacity:0,y:50},animate:s?{opacity:1,y:0}:{opacity:0,y:50},transition:{duration:.6,ease:"easeOut"},children:e})},Di=({children:e,effect:t="lift",className:n=""})=>B.jsx(y.div,{className:n,variants:{lift:{hover:{y:-10,scale:1.02,transition:{duration:.3}}},both:{hover:{y:-5,scale:1.05,transition:{duration:.3}}}}[t],whileHover:"hover",children:e}),Ri=({children:e,amplitude:t=10,duration:n=2,className:s=""})=>B.jsx(y.div,{className:s,animate:{y:[-t,t,-t]},transition:{duration:n,repeat:1/0,ease:"easeInOut"},children:e}),Mi=({children:e,className:t="",childVariant:n="fadeUp"})=>{const s={fadeUp:{hidden:{opacity:0,y:30},visible:{opacity:1,y:0,transition:{duration:.6}}},scale:{hidden:{opacity:0,scale:.8},visible:{opacity:1,scale:1,transition:{duration:.6}}}};return B.jsx(y.div,{className:t,variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.2}}},initial:"hidden",whileInView:"visible",viewport:{once:!0},children:a.Children.map(e,(e,t)=>B.jsx(y.div,{variants:s[n],children:e},t))})},_i=({children:e,speed:t=.5,direction:n="up"})=>{const{scrollYProgress:s}=v(),a=x(s,[0,1],"up"===n?[0,-100*t]:[0,100*t]);return B.jsx(y.div,{style:{y:a},children:e})},Fi=({text:e,type:t="words",className:n=""})=>{const s=e.split(" "),a={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}};return B.jsx(y.h2,{className:n,variants:{hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},initial:"hidden",whileInView:"visible",viewport:{once:!0},children:s.map((e,t)=>B.jsx(y.span,{variants:a,style:{display:"inline-block",marginRight:"0.25em"},children:e},t))})},Bi=n.memo(({mobileMenuOpen:e,toggleMobileMenu:t,handleGetStarted:s})=>{const[a,r]=n.useState(!1);return n.useEffect(()=>{const e=()=>{r(window.scrollY>50)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]),B.jsxs(y.header,{className:"navbar "+(a?"scrolled":""),initial:{y:-100,opacity:0},animate:{y:0,opacity:1},transition:{duration:.5,ease:[.6,.05,.01,.9]},children:[B.jsx(y.div,{className:"logo",whileHover:{scale:1.05},whileTap:{scale:.95},children:"TradeBro"}),B.jsx("button",{className:"mobile-menu-btn",onClick:t,"aria-label":"Toggle menu",children:e?B.jsx(Nn,{}):B.jsx(Ht,{})}),B.jsxs("nav",{className:"nav-links "+(e?"mobile-active":""),children:[B.jsx(y.a,{href:"#features",onClick:()=>t(!1),whileHover:{scale:1.1},whileTap:{scale:.95},children:"Features"}),B.jsx(y.a,{href:"#about",onClick:()=>t(!1),whileHover:{scale:1.1},whileTap:{scale:.95},children:"About"}),B.jsx(y.a,{href:"#contact",onClick:()=>t(!1),whileHover:{scale:1.1},whileTap:{scale:.95},children:"Contact"}),B.jsx(y.button,{className:"cta-button",onClick:s,whileHover:{scale:1.05},whileTap:{scale:.95},children:"Get Started"})]})]})}),zi=n.memo(({handleGetStarted:e})=>{const{scrollYProgress:t}=v();return x(t,[0,1],[0,300]),B.jsxs("section",{className:"hero-section",children:[B.jsxs(y.div,{className:"hero-content",initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.8,ease:[.6,.05,.01,.9]},children:[B.jsx("h1",{className:"hero-title",children:"Master the Markets with Confidence"}),B.jsx(y.p,{initial:{opacity:0},animate:{opacity:1},transition:{duration:.8,delay:.4},children:"TradeBro is your personal stock market companion — track live data, simulate portfolios, and unlock insights with AI-powered tools."}),B.jsxs(y.div,{className:"hero-buttons",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.8,delay:.6},children:[B.jsxs(y.button,{className:"primary-btn",onClick:e,whileHover:{scale:1.05},whileTap:{scale:.95},children:["Get Started ",B.jsx(it,{style:{marginLeft:"8px",verticalAlign:"middle"}})]}),B.jsx(y.button,{className:"secondary-btn",whileHover:{scale:1.05},whileTap:{scale:.95},children:"View Demo"})]})]}),B.jsx(y.div,{className:"hero-visual",initial:{opacity:0},animate:{opacity:1},transition:{duration:.8,delay:.2},children:B.jsx("img",{src:"https://images.unsplash.com/photo-1611974789855-9c2a0a7236a3?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=1470&q=80",alt:"Stock Market Dashboard",loading:"eager"})})]})}),Ui=({icon:e,title:t,description:n})=>B.jsxs(Di,{effect:"lift",className:"feature",children:[B.jsx("span",{className:"feature-highlight"}),B.jsx(Ri,{amplitude:5,duration:3,className:"feature-icon-wrapper",children:B.jsx(e,{className:"feature-icon"})}),B.jsx("h3",{children:t}),B.jsx("p",{children:n})]}),Hi=({src:e,alt:t,caption:n})=>B.jsxs(Di,{effect:"both",className:"gallery-item",children:[B.jsx("img",{src:e,alt:t,loading:"lazy"}),B.jsx(y.div,{className:"gallery-caption",initial:{opacity:0,y:20},whileHover:{opacity:1,y:0},transition:{duration:.3},children:B.jsx("h4",{children:n})})]}),$i=({quote:e,author:t})=>B.jsxs(Di,{effect:"lift",className:"testimonial",children:[B.jsxs("p",{children:['"',e,'"']}),B.jsxs("h4",{children:["- ",t]})]}),qi=()=>{const e=o(),[t,s]=n.useState(!1),r=()=>e("/signup"),i=[{icon:dt,title:"Live NSE/BSE Data",description:"Stream real-time stock prices, volumes, and technical indicators from Indian and global markets."},{icon:Zt,title:"Interactive Demo Portfolio",description:"Test your investment strategies risk-free. Simulate trades, monitor profits, and learn by doing."},{icon:vn,title:"AI-Powered Chat Assistant",description:"Ask anything about stocks, trends, or financial terms — our AI assistant delivers instant answers and analysis."},{icon:dt,title:"Detailed Stock Analysis",description:"Access comprehensive stock data including price history, key metrics, and buy/sell functionality for informed trading decisions."}];return B.jsxs("div",{className:"landing-container",children:[B.jsx(Bi,{mobileMenuOpen:t,toggleMobileMenu:e=>s(void 0!==e?e:!t),handleGetStarted:r}),B.jsx(zi,{handleGetStarted:r}),B.jsx(Oi,{children:B.jsxs("section",{className:"features-section",id:"features",children:[B.jsx("h2",{className:"section-title",children:"Key Features"}),B.jsx(Mi,{className:"features-grid",childVariant:"fadeUp",children:i.map((e,t)=>B.jsx(Ui,{icon:e.icon,title:e.title,description:e.description},t))})]})}),B.jsx(_i,{speed:.2,direction:"up",children:B.jsx(Oi,{children:B.jsxs("section",{className:"about-section",id:"about",children:[B.jsx(Fi,{text:"About TradeBro",type:"words",className:"section-title"}),B.jsx(y.p,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:.2},children:"Built for new investors and seasoned traders alike, TradeBro offers a modern platform for learning, testing, and mastering the stock market."}),B.jsx(y.p,{initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6,delay:.4},children:"From real-time market feeds to intelligent chat assistance and demo trading, we help you trade smarter — with confidence and clarity."})]})})}),B.jsx(Oi,{children:B.jsxs("section",{className:"gallery-section",children:[B.jsx("h2",{className:"section-title",children:"Platform Showcase"}),B.jsx(Mi,{className:"gallery-grid",childVariant:"scale",children:[{src:"https://i.pinimg.com/736x/41/35/46/4135461de8f243948c5f35de57c91456.jpg",alt:"Trading Screen",caption:"Advanced Trading Interface"},{src:"https://i.pinimg.com/736x/a8/39/d3/a839d32b1fd0e47a94bb88fa6994b83d.jpg",alt:"Portfolio Analysis",caption:"Portfolio Performance Analytics"},{src:"https://i.pinimg.com/736x/69/6b/b3/696bb3f36d24d8f75c3fd9aec18c3a16.jpg",alt:"Mobile App",caption:"Mobile Trading Experience"}].map((e,t)=>B.jsx(Hi,{src:e.src,alt:e.alt,caption:e.caption},t))})]})}),B.jsx(Oi,{children:B.jsxs("section",{className:"testimonials-section",children:[B.jsx("h2",{className:"section-title",children:"What Our Users Say"}),B.jsx(Mi,{className:"testimonials",childVariant:"fadeUp",children:[{quote:"TradeBro helped me understand the stock market without risking real money. The demo feature is incredibly useful.",author:"Ramesh P., Beginner Investor"},{quote:"I love how intuitive the screener and AI bot are. It's like having a financial expert with me 24/7.",author:"Sneha M., Technical Analyst"}].map((e,t)=>B.jsx($i,{quote:e.quote,author:e.author},t))})]})}),B.jsx(Oi,{children:B.jsxs("section",{className:"contact-section",id:"contact",children:[B.jsx("h2",{className:"section-title",children:"Contact Us"}),B.jsx("p",{children:"Have a question or suggestion? We'd love to hear from you."}),B.jsxs(y.form,{className:"contact-form",onSubmit:e=>e.preventDefault(),initial:{opacity:0,y:20},whileInView:{opacity:1,y:0},viewport:{once:!0},transition:{duration:.6},children:[B.jsx(y.input,{type:"text",placeholder:"Your Name",required:!0,"aria-label":"Your Name",whileFocus:{scale:1.02,boxShadow:"0 0 0 3px rgba(27, 142, 153, 0.2)"}}),B.jsx(y.input,{type:"email",placeholder:"Your Email",required:!0,"aria-label":"Your Email",whileFocus:{scale:1.02,boxShadow:"0 0 0 3px rgba(27, 142, 153, 0.2)"}}),B.jsx(y.textarea,{placeholder:"Your Message",required:!0,"aria-label":"Your Message",whileFocus:{scale:1.02,boxShadow:"0 0 0 3px rgba(27, 142, 153, 0.2)"}}),B.jsx(Di,{effect:"both",children:B.jsx("button",{type:"submit",className:"primary-btn",children:"Send Message"})})]})]})}),B.jsxs("footer",{className:"footer",children:[B.jsxs("p",{children:["© ",(new Date).getFullYear()," TradeBro. All rights reserved."]}),B.jsxs("p",{children:["Follow us:",[{name:"Twitter",url:"https://twitter.com"},{name:"Facebook",url:"https://facebook.com"},{name:"LinkedIn",url:"https://linkedin.com"}].map((e,t,n)=>B.jsxs(a.Fragment,{children:[B.jsx(y.a,{href:e.url,target:"_blank",rel:"noopener noreferrer",whileHover:{color:"#1B8E99",scale:1.1},whileTap:{scale:.95},children:e.name}),t<n.length-1&&"| "]},e.name))]})]})]})},Wi=({disabled:e=!1})=>e?B.jsx("button",{className:"google-button disabled",disabled:!0,type:"button",children:B.jsx("span",{children:"Loading..."})}):B.jsxs("button",{className:"google-button",onClick:()=>{window.location.href="https://s89-satya-capstone-tradebro.onrender.com/api/auth/google"},type:"button",children:[B.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",children:[B.jsx("path",{fill:"#4285F4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),B.jsx("path",{fill:"#34A853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),B.jsx("path",{fill:"#FBBC05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),B.jsx("path",{fill:"#EA4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),"Continue with Google"]}),Vi=({onVerify:e,onCancel:t,email:s})=>{const[a,r]=n.useState(""),[i,o]=n.useState(!1),[l,c]=n.useState("");return B.jsx("div",{className:"two-factor-modal",children:B.jsxs("div",{className:"two-factor-content",children:[B.jsxs("div",{className:"two-factor-header",children:[B.jsx(cn,{size:32}),B.jsx("h2",{children:"Two-Factor Authentication"}),B.jsxs("p",{children:["Enter the 6-digit code sent to ",s]})]}),B.jsxs("form",{onSubmit:async t=>{if(t.preventDefault(),6===a.length){o(!0),c("");try{const t=await fetch("/api/auth/verify-2fa",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:s,code:a})}),n=await t.json();n.success?e(n.token,n.user):c(n.message||"Invalid code")}catch(n){c("Verification failed. Please try again.")}finally{o(!1)}}else c("Please enter a 6-digit code")},className:"two-factor-form",children:[B.jsx("div",{className:"code-input-group",children:B.jsx("input",{type:"text",value:a,onChange:e=>r(e.target.value.replace(/\D/g,"").slice(0,6)),placeholder:"000000",className:"code-input",maxLength:6,autoFocus:!0})}),l&&B.jsxs("div",{className:"error-message",children:[B.jsx(Nn,{size:16}),l]}),B.jsxs("div",{className:"two-factor-actions",children:[B.jsx("button",{type:"button",onClick:t,className:"cancel-btn",disabled:i,children:"Cancel"}),B.jsx("button",{type:"submit",className:"verify-btn",disabled:i||6!==a.length,children:i?"Verifying...":B.jsxs(B.Fragment,{children:[B.jsx(gt,{size:16}),"Verify"]})})]})]})]})})},Yi=({onLogin:e})=>{var t,s;const a=o(),r=l(),[i,d]=n.useState({email:"",password:""}),[u,h]=n.useState(!1),[m,p]=n.useState({}),[f,g]=n.useState(!1),[v,x]=n.useState(!1),[b,j]=n.useState(""),w=(null==(s=null==(t=r.state)?void 0:t.from)?void 0:s.pathname)||"/dashboard",N=localStorage.getItem("redirectAfterLogin")||w;n.useEffect(()=>{var e;if("oauth_failed"===new URLSearchParams(window.location.search).get("error"))return Ze.error("Google authentication failed. Please try again."),void window.history.replaceState({},document.title,window.location.pathname);(null==(e=r.state)?void 0:e.from)&&Ze.info("Please log in to access that page",{position:"top-right",autoClose:3e3})},[r.search,a]);const k=e=>{const{name:t,value:n}=e.target;d(e=>({...e,[t]:n})),m[t]&&p(e=>({...e,[t]:""}))},S=(t,n)=>{e(n,t),Ze.success("Welcome back! Login successful",{position:"top-right",autoClose:2e3}),a(N,{replace:!0}),localStorage.removeItem("redirectAfterLogin")},C=()=>{x(!1),j("")};return v?B.jsx(Vi,{email:b,onVerify:S,onCancel:C}):B.jsx("div",{className:"auth-page",children:B.jsxs(y.div,{className:"auth-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[B.jsxs("div",{className:"auth-header",children:[B.jsxs("div",{className:"auth-logo",children:[B.jsx("div",{className:"auth-logo-icon",children:"📈"}),B.jsx("h1",{className:"auth-logo-text",children:"TradeBro"})]}),B.jsxs("div",{children:[B.jsx("h2",{className:"auth-title",children:"Welcome Back"}),B.jsx("p",{className:"auth-subtitle",children:"Sign in to your account to continue trading"})]})]}),B.jsxs("form",{onSubmit:async t=>{if(t.preventDefault(),(()=>{const e={};return i.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(i.email)||(e.email="Please enter a valid email address"):e.email="Email is required",i.password?i.password.length<6&&(e.password="Password must be at least 6 characters"):e.password="Password is required",p(e),0===Object.keys(e).length})()){h(!0),p({});try{const t="https://s89-satya-capstone-tradebro.onrender.com",n=await fetch(`${t}/api/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i.email,password:i.password})}),s=await n.json();n.ok&&s.success?s.requiresTwoFactor?(j(s.email),x(!0),Ze.info("Please enter the 2FA code sent to your email",{position:"top-right",autoClose:3e3})):(e(s.user,s.token),Ze.success("Welcome back! Login successful",{position:"top-right",autoClose:2e3}),a(N,{replace:!0}),localStorage.removeItem("redirectAfterLogin")):(p({general:s.message||"Login failed. Please try again."}),Ze.error(s.message||"Invalid credentials. Please try again.",{position:"top-right",autoClose:3e3}))}catch(n){p({general:"Network error. Please try again."}),Ze.error("Network error. Please check your connection.",{position:"top-right",autoClose:3e3})}finally{h(!1)}}},className:"auth-form",children:[m.general&&B.jsxs("div",{className:"error-message",children:[B.jsx(tt,{size:16}),B.jsx("span",{children:m.general})]}),B.jsxs("div",{className:"form-group",children:[B.jsxs("label",{className:"form-label",children:[B.jsx(zt,{size:16}),"Email Address"]}),B.jsx("input",{type:"email",name:"email",value:i.email,onChange:k,className:"form-input "+(m.email?"form-input-error":""),placeholder:"Enter your email",disabled:u,autoComplete:"email",required:!0}),m.email&&B.jsxs("div",{className:"form-error",children:[B.jsx(tt,{size:14}),B.jsx("span",{children:m.email})]})]}),B.jsxs("div",{className:"form-group",children:[B.jsxs("label",{className:"form-label",children:[B.jsx(Ft,{size:16}),"Password"]}),B.jsx("input",{type:"password",name:"password",value:i.password,onChange:k,className:"form-input "+(m.password?"form-input-error":""),placeholder:"Enter your password",disabled:u,autoComplete:"current-password",required:!0}),m.password&&B.jsxs("div",{className:"form-error",children:[B.jsx(tt,{size:14}),B.jsx("span",{children:m.password})]})]}),B.jsxs("div",{className:"form-options",children:[B.jsxs("label",{className:"checkbox-label",children:[B.jsx("input",{type:"checkbox",checked:f,onChange:e=>{g(e.target.checked)},disabled:u,id:"remember-me"}),B.jsx("span",{children:"Remember me"})]}),B.jsx(c,{to:"/forgot-password",className:"forgot-link",children:"Forgot password?"})]}),B.jsx("button",{type:"submit",className:"auth-submit",disabled:u,children:u?B.jsx("div",{className:"loading-spinner"}):B.jsxs(B.Fragment,{children:["Sign In",B.jsx(it,{size:16})]})})]}),B.jsx("div",{className:"auth-divider",children:B.jsx("span",{children:"or continue with"})}),B.jsx(Wi,{disabled:u}),B.jsx("div",{className:"auth-footer",children:B.jsxs("p",{children:["Don't have an account?"," ",B.jsx(c,{to:"/signup",children:"Sign up for free"})]})})]})})},Gi=({onSignup:e})=>{const t=o(),[s,a]=n.useState({name:"",email:"",password:"",confirmPassword:""}),[r,i]=n.useState(!1),[l,d]=n.useState({}),[u,h]=n.useState(!1),[m,p]=n.useState({length:!1,uppercase:!1,lowercase:!1,number:!1,special:!1}),f=localStorage.getItem("redirectAfterLogin")||"/dashboard",g=e=>{const{name:t,value:n}=e.target;a(e=>({...e,[t]:n})),"password"===t&&(e=>{const t={length:e.length>=8,uppercase:/[A-Z]/.test(e),lowercase:/[a-z]/.test(e),number:/\d/.test(e),special:/[!@#$%^&*(),.?":{}|<>]/.test(e)};p(t)})(n),l[t]&&d(e=>({...e,[t]:""}))},v=()=>Object.values(m).filter(Boolean).length,x=()=>{const e=v();return e<2?"#ef4444":e<4?"#f59e0b":"#10b981"};return B.jsx("div",{className:"auth-page",children:B.jsxs(y.div,{className:"auth-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[B.jsxs("div",{className:"auth-header",children:[B.jsxs("div",{className:"auth-logo",children:[B.jsx("div",{className:"auth-logo-icon",children:"📈"}),B.jsx("h1",{className:"auth-logo-text",children:"TradeBro"})]}),B.jsxs("div",{children:[B.jsx("h2",{className:"auth-title",children:"Create Account"}),B.jsx("p",{className:"auth-subtitle",children:"Join TradeBro and start your trading journey today"})]})]}),B.jsxs("form",{onSubmit:async n=>{if(n.preventDefault(),(()=>{const e={};return s.name.trim()?s.name.trim().length<2&&(e.name="Name must be at least 2 characters"):e.name="Full name is required",s.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.email)||(e.email="Please enter a valid email address"):e.email="Email is required",s.password?s.password.length<8&&(e.password="Password must be at least 8 characters"):e.password="Password is required",s.confirmPassword?s.password!==s.confirmPassword&&(e.confirmPassword="Passwords do not match"):e.confirmPassword="Please confirm your password",u||(e.terms="You must accept the Terms of Service and Privacy Policy"),d(e),0===Object.keys(e).length})()){i(!0),d({});try{const n=s.email.split("@")[0].replace(/[^a-zA-Z0-9]/g,""),a=n+Date.now().toString().slice(-4),r="https://s89-satya-capstone-tradebro.onrender.com",i=await fetch(`${r}/api/auth/signup`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:a,email:s.email,password:s.password,fullName:s.name})}),o=await i.json();if(i.ok&&o.success)e(o.user,o.token),Ze.success("Welcome to TradeBro! Account created successfully",{position:"top-right",autoClose:2e3}),setTimeout(()=>{t(f,{replace:!0}),localStorage.removeItem("redirectAfterLogin")},1e3);else if(o.errors&&"object"==typeof o.errors){d(o.errors);const e=Object.values(o.errors)[0];Ze.error(e||"Please fix the validation errors.",{position:"top-right",autoClose:4e3})}else d({general:o.message||"Signup failed. Please try again."}),Ze.error(o.message||"Signup failed. Please try again.",{position:"top-right",autoClose:3e3})}catch(a){d({general:"Network error. Please try again."}),Ze.error("Network error. Please check your connection.",{position:"top-right",autoClose:3e3})}finally{i(!1)}}},className:"auth-form",children:[l.general&&B.jsxs("div",{className:"error-message",children:[B.jsx(tt,{size:16}),B.jsx("span",{children:l.general})]}),B.jsxs("div",{className:"form-group",children:[B.jsxs("label",{className:"form-label",children:[B.jsx(xn,{size:16}),"Full Name"]}),B.jsx("input",{type:"text",name:"name",value:s.name,onChange:g,className:"form-input "+(l.name?"form-input-error":""),placeholder:"Enter your full name",disabled:r,autoComplete:"name",required:!0}),l.name&&B.jsxs("div",{className:"form-error",children:[B.jsx(tt,{size:14}),B.jsx("span",{children:l.name})]})]}),B.jsxs("div",{className:"form-group",children:[B.jsxs("label",{className:"form-label",children:[B.jsx(zt,{size:16}),"Email Address"]}),B.jsx("input",{type:"email",name:"email",value:s.email,onChange:g,className:"form-input "+(l.email?"form-input-error":""),placeholder:"Enter your email",disabled:r,autoComplete:"email",required:!0}),l.email&&B.jsxs("div",{className:"form-error",children:[B.jsx(tt,{size:14}),B.jsx("span",{children:l.email})]})]}),B.jsxs("div",{className:"form-group",children:[B.jsxs("label",{className:"form-label",children:[B.jsx(Ft,{size:16}),"Password"]}),B.jsx("input",{type:"password",name:"password",value:s.password,onChange:g,className:"form-input "+(l.password?"form-input-error":""),placeholder:"Create a password",disabled:r,autoComplete:"new-password",required:!0}),l.password&&B.jsxs("div",{className:"form-error",children:[B.jsx(tt,{size:14}),B.jsx("span",{children:l.password})]}),s.password&&B.jsxs("div",{className:"password-strength",children:[B.jsx("div",{className:"password-strength-bar",children:B.jsx("div",{className:"password-strength-fill",style:{width:v()/5*100+"%",backgroundColor:x()}})}),B.jsx("span",{className:"password-strength-text",style:{color:x()},children:(()=>{const e=v();return e<2?"Weak":e<4?"Medium":"Strong"})()})]})]}),B.jsxs("div",{className:"form-group",children:[B.jsxs("label",{className:"form-label",children:[B.jsx(Ft,{size:16}),"Confirm Password"]}),B.jsx("input",{type:"password",name:"confirmPassword",value:s.confirmPassword,onChange:g,className:"form-input "+(l.confirmPassword?"form-input-error":""),placeholder:"Confirm your password",disabled:r,autoComplete:"new-password",required:!0}),l.confirmPassword&&B.jsxs("div",{className:"form-error",children:[B.jsx(tt,{size:14}),B.jsx("span",{children:l.confirmPassword})]})]}),B.jsxs("div",{className:"form-group",children:[B.jsxs("label",{className:"checkbox-label",children:[B.jsx("input",{type:"checkbox",checked:u,onChange:e=>h(e.target.checked),disabled:r}),B.jsxs("span",{children:["I agree to the"," ",B.jsx(c,{to:"/terms",children:"Terms of Service"})," ","and"," ",B.jsx(c,{to:"/privacy",children:"Privacy Policy"})]})]}),l.terms&&B.jsxs("div",{className:"form-error",children:[B.jsx(tt,{size:14}),B.jsx("span",{children:l.terms})]})]}),B.jsx("button",{type:"submit",className:"auth-submit",disabled:r,children:r?B.jsx("div",{className:"loading-spinner"}):B.jsxs(B.Fragment,{children:["Create Account",B.jsx(it,{size:16})]})})]}),B.jsx("div",{className:"auth-divider",children:B.jsx("span",{children:"or continue with"})}),B.jsx(Wi,{disabled:r}),B.jsx("div",{className:"auth-footer",children:B.jsxs("p",{children:["Already have an account?"," ",B.jsx(c,{to:"/login",children:"Sign in"})]})})]})})};var Ji,Ki,Qi,Xi={},Zi={exports:{}};Ji=Zi.exports,Ki=function(){return Ki=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},Ki.apply(this,arguments)},Qi=function(){function e(e,t,n){var s=this;this.endVal=t,this.options=n,this.version="2.9.0",this.defaults={startVal:0,decimalPlaces:0,duration:2,useEasing:!0,useGrouping:!0,useIndianSeparators:!1,smartEasingThreshold:999,smartEasingAmount:333,separator:",",decimal:".",prefix:"",suffix:"",enableScrollSpy:!1,scrollSpyDelay:200,scrollSpyOnce:!1},this.finalEndVal=null,this.useEasing=!0,this.countDown=!1,this.error="",this.startVal=0,this.paused=!0,this.once=!1,this.count=function(e){s.startTime||(s.startTime=e);var t=e-s.startTime;s.remaining=s.duration-t,s.useEasing?s.countDown?s.frameVal=s.startVal-s.easingFn(t,0,s.startVal-s.endVal,s.duration):s.frameVal=s.easingFn(t,s.startVal,s.endVal-s.startVal,s.duration):s.frameVal=s.startVal+(s.endVal-s.startVal)*(t/s.duration);var n=s.countDown?s.frameVal<s.endVal:s.frameVal>s.endVal;s.frameVal=n?s.endVal:s.frameVal,s.frameVal=Number(s.frameVal.toFixed(s.options.decimalPlaces)),s.printValue(s.frameVal),t<s.duration?s.rAF=requestAnimationFrame(s.count):null!==s.finalEndVal?s.update(s.finalEndVal):s.options.onCompleteCallback&&s.options.onCompleteCallback()},this.formatNumber=function(e){var t,n,a,r,i=e<0?"-":"";t=Math.abs(e).toFixed(s.options.decimalPlaces);var o=(t+="").split(".");if(n=o[0],a=o.length>1?s.options.decimal+o[1]:"",s.options.useGrouping){r="";for(var l=3,c=0,d=0,u=n.length;d<u;++d)s.options.useIndianSeparators&&4===d&&(l=2,c=1),0!==d&&c%l==0&&(r=s.options.separator+r),c++,r=n[u-d-1]+r;n=r}return s.options.numerals&&s.options.numerals.length&&(n=n.replace(/[0-9]/g,function(e){return s.options.numerals[+e]}),a=a.replace(/[0-9]/g,function(e){return s.options.numerals[+e]})),i+s.options.prefix+n+a+s.options.suffix},this.easeOutExpo=function(e,t,n,s){return n*(1-Math.pow(2,-10*e/s))*1024/1023+t},this.options=Ki(Ki({},this.defaults),n),this.formattingFn=this.options.formattingFn?this.options.formattingFn:this.formatNumber,this.easingFn=this.options.easingFn?this.options.easingFn:this.easeOutExpo,this.el="string"==typeof e?document.getElementById(e):e,t=null==t?this.parse(this.el.innerHTML):t,this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.endVal=this.validateValue(t),this.options.decimalPlaces=Math.max(this.options.decimalPlaces),this.resetDuration(),this.options.separator=String(this.options.separator),this.useEasing=this.options.useEasing,""===this.options.separator&&(this.options.useGrouping=!1),this.el?this.printValue(this.startVal):this.error="[CountUp] target is null or undefined","undefined"!=typeof window&&this.options.enableScrollSpy&&(this.error||(window.onScrollFns=window.onScrollFns||[],window.onScrollFns.push(function(){return s.handleScroll(s)}),window.onscroll=function(){window.onScrollFns.forEach(function(e){return e()})},this.handleScroll(this)))}return e.prototype.handleScroll=function(e){if(e&&window&&!e.once){var t=window.innerHeight+window.scrollY,n=e.el.getBoundingClientRect(),s=n.top+window.pageYOffset,a=n.top+n.height+window.pageYOffset;a<t&&a>window.scrollY&&e.paused?(e.paused=!1,setTimeout(function(){return e.start()},e.options.scrollSpyDelay),e.options.scrollSpyOnce&&(e.once=!0)):(window.scrollY>a||s>t)&&!e.paused&&e.reset()}},e.prototype.determineDirectionAndSmartEasing=function(){var e=this.finalEndVal?this.finalEndVal:this.endVal;this.countDown=this.startVal>e;var t=e-this.startVal;if(Math.abs(t)>this.options.smartEasingThreshold&&this.options.useEasing){this.finalEndVal=e;var n=this.countDown?1:-1;this.endVal=e+n*this.options.smartEasingAmount,this.duration=this.duration/2}else this.endVal=e,this.finalEndVal=null;null!==this.finalEndVal?this.useEasing=!1:this.useEasing=this.options.useEasing},e.prototype.start=function(e){this.error||(this.options.onStartCallback&&this.options.onStartCallback(),e&&(this.options.onCompleteCallback=e),this.duration>0?(this.determineDirectionAndSmartEasing(),this.paused=!1,this.rAF=requestAnimationFrame(this.count)):this.printValue(this.endVal))},e.prototype.pauseResume=function(){this.paused?(this.startTime=null,this.duration=this.remaining,this.startVal=this.frameVal,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count)):cancelAnimationFrame(this.rAF),this.paused=!this.paused},e.prototype.reset=function(){cancelAnimationFrame(this.rAF),this.paused=!0,this.resetDuration(),this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.printValue(this.startVal)},e.prototype.update=function(e){cancelAnimationFrame(this.rAF),this.startTime=null,this.endVal=this.validateValue(e),this.endVal!==this.frameVal&&(this.startVal=this.frameVal,null==this.finalEndVal&&this.resetDuration(),this.finalEndVal=null,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count))},e.prototype.printValue=function(e){var t;if(this.el){var n=this.formattingFn(e);(null===(t=this.options.plugin)||void 0===t?void 0:t.render)?this.options.plugin.render(this.el,n):"INPUT"===this.el.tagName?this.el.value=n:"text"===this.el.tagName||"tspan"===this.el.tagName?this.el.textContent=n:this.el.innerHTML=n}},e.prototype.ensureNumber=function(e){return"number"==typeof e&&!isNaN(e)},e.prototype.validateValue=function(e){var t=Number(e);return this.ensureNumber(t)?t:(this.error="[CountUp] invalid start or end value: ".concat(e),null)},e.prototype.resetDuration=function(){this.startTime=null,this.duration=1e3*Number(this.options.duration),this.remaining=this.duration},e.prototype.parse=function(e){var t=function(e){return e.replace(/([.,'  ])/g,"\\$1")},n=t(this.options.separator),s=t(this.options.decimal),a=e.replace(new RegExp(n,"g"),"").replace(new RegExp(s,"g"),".");return parseFloat(a)},e}(),Ji.CountUp=Qi;var eo=Zi.exports;Object.defineProperty(Xi,"__esModule",{value:!0});var to=n,no=eo;function so(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,s)}return n}function ao(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?so(Object(n),!0).forEach(function(t){io(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):so(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function ro(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,t||"default");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:String(t)}function io(e,t,n){return(t=ro(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function oo(){return oo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},oo.apply(this,arguments)}function lo(e,t){if(null==e)return{};var n,s,a=function(e,t){if(null==e)return{};var n,s,a={},r=Object.keys(e);for(s=0;s<r.length;s++)n=r[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(s=0;s<r.length;s++)n=r[s],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function co(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var s,a,r,i,o=[],l=!0,c=!1;try{if(r=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(s=r.call(n)).done)&&(o.push(s.value),o.length!==t);l=!0);}catch(d){c=!0,a=d}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return uo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uo(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function uo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}var ho="undefined"!=typeof window&&void 0!==window.document&&void 0!==window.document.createElement?to.useLayoutEffect:to.useEffect;function mo(e){var t=to.useRef(e);return ho(function(){t.current=e}),to.useCallback(function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return t.current.apply(void 0,n)},[])}var po=["ref","startOnMount","enableReinitialize","delay","onEnd","onStart","onPauseResume","onReset","onUpdate"],fo={decimal:".",separator:",",delay:null,prefix:"",suffix:"",duration:2,start:0,decimals:0,startOnMount:!0,enableReinitialize:!0,useEasing:!0,useGrouping:!0,useIndianSeparators:!1},go=function(e){var t=Object.fromEntries(Object.entries(e).filter(function(e){return void 0!==co(e,2)[1]})),n=to.useMemo(function(){return ao(ao({},fo),t)},[e]),s=n.ref,a=n.startOnMount,r=n.enableReinitialize,i=n.delay,o=n.onEnd,l=n.onStart,c=n.onPauseResume,d=n.onReset,u=n.onUpdate,h=lo(n,po),m=to.useRef(),p=to.useRef(),f=to.useRef(!1),g=mo(function(){return function(e,t){var n=t.decimal,s=t.decimals,a=t.duration,r=t.easingFn,i=t.end,o=t.formattingFn,l=t.numerals,c=t.prefix,d=t.separator,u=t.start,h=t.suffix,m=t.useEasing,p=t.useGrouping,f=t.useIndianSeparators,g=t.enableScrollSpy,y=t.scrollSpyDelay,v=t.scrollSpyOnce,x=t.plugin;return new no.CountUp(e,i,{startVal:u,duration:a,decimal:n,decimalPlaces:s,easingFn:r,formattingFn:o,numerals:l,separator:d,prefix:c,suffix:h,plugin:x,useEasing:m,useIndianSeparators:f,useGrouping:p,enableScrollSpy:g,scrollSpyDelay:y,scrollSpyOnce:v})}("string"==typeof s?s:s.current,h)}),y=mo(function(e){var t=m.current;if(t&&!e)return t;var n=g();return m.current=n,n}),v=mo(function(){var e=function(){return y(!0).start(function(){null==o||o({pauseResume:x,reset:b,start:w,update:j})})};i&&i>0?p.current=setTimeout(e,1e3*i):e(),null==l||l({pauseResume:x,reset:b,update:j})}),x=mo(function(){y().pauseResume(),null==c||c({reset:b,start:w,update:j})}),b=mo(function(){y().el&&(p.current&&clearTimeout(p.current),y().reset(),null==d||d({pauseResume:x,start:w,update:j}))}),j=mo(function(e){y().update(e),null==u||u({pauseResume:x,reset:b,start:w})}),w=mo(function(){b(),v()}),N=mo(function(e){a&&(e&&b(),v())});return to.useEffect(function(){f.current?r&&N(!0):(f.current=!0,N())},[r,f,N,i,e.start,e.suffix,e.prefix,e.duration,e.separator,e.decimals,e.decimal,e.formattingFn]),to.useEffect(function(){return function(){b()}},[b]),{start:w,pauseResume:x,reset:b,update:j,getCountUp:y}},yo=["className","redraw","containerProps","children","style"],vo=Xi.default=function(e){var t=e.className,n=e.redraw,s=e.containerProps,a=e.children,r=e.style,i=lo(e,yo),o=to.useRef(null),l=to.useRef(!1),c=go(ao(ao({},i),{},{ref:o,startOnMount:"function"!=typeof a||0===e.delay,enableReinitialize:!1})),d=c.start,u=c.reset,h=c.update,m=c.pauseResume,p=c.getCountUp,f=mo(function(){d()}),g=mo(function(t){e.preserveValue||u(),h(t)}),y=mo(function(){("function"!=typeof e.children||o.current instanceof Element)&&p()});to.useEffect(function(){y()},[y]),to.useEffect(function(){l.current&&g(e.end)},[e.end,g]);var v=n&&e;return to.useEffect(function(){n&&l.current&&f()},[f,n,v]),to.useEffect(function(){!n&&l.current&&f()},[f,n,e.start,e.suffix,e.prefix,e.duration,e.separator,e.decimals,e.decimal,e.className,e.formattingFn]),to.useEffect(function(){l.current=!0},[]),"function"==typeof a?a({countUpRef:o,start:d,reset:u,update:h,pauseResume:m,getCountUp:p}):to.createElement("span",oo({className:t,ref:o,style:r},s),void 0!==e.start?p().formattingFn(e.start):"")};Xi.useCountUp=go;const xo=n.createContext(),bo=({children:e})=>{const{isAuthenticated:t,getToken:s}=Cn(),[a,r]=n.useState({balance:1e4,transactions:[],lastLoginReward:null,totalInvested:0,totalGains:0,portfolioValue:0}),[i,o]=n.useState(!1),[l,c]=n.useState(null),d=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2,maximumFractionDigits:2}).format(e),u=async()=>{if(t){o(!0),c(null);try{const e=s(),t=await fetch("https://s89-satya-capstone-tradebro.onrender.com/api/virtual-money/account",{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}});if(!t.ok)throw new Error("Failed to fetch virtual money data");{const e=await t.json();r(e.data)}}catch(e){c(e.message)}finally{o(!1)}}};n.useEffect(()=>{t&&u()},[t]),n.useEffect(()=>{const e=e=>{u()};return window.addEventListener("balanceUpdated",e),()=>{window.removeEventListener("balanceUpdated",e)}},[u]);const h={virtualMoney:a,loading:i,error:l,formatCurrency:d,fetchVirtualMoney:u,buyStock:async(e,n,a)=>{if(!t)return{success:!1,message:"Not authenticated"};o(!0),c(null);try{const t=s(),i=await fetch("https://s89-satya-capstone-tradebro.onrender.com/api/virtual-money/buy",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({stockSymbol:e,quantity:n,price:a})}),o=await i.json();if(i.ok)return r(o.data),{success:!0,message:o.message};throw new Error(o.message||"Failed to buy stock")}catch(i){return c(i.message),{success:!1,message:i.message}}finally{o(!1)}},sellStock:async(e,n,a)=>{if(!t)return{success:!1,message:"Not authenticated"};o(!0),c(null);try{const t=s(),i=await fetch("https://s89-satya-capstone-tradebro.onrender.com/api/virtual-money/sell",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({stockSymbol:e,quantity:n,price:a})}),o=await i.json();if(i.ok)return r(o.data),{success:!0,message:o.message};throw new Error(o.message||"Failed to sell stock")}catch(i){return c(i.message),{success:!1,message:i.message}}finally{o(!1)}},claimLoginReward:async()=>{if(!t)return{success:!1,message:"Not authenticated"};o(!0),c(null);try{const e=s(),t=await fetch("https://s89-satya-capstone-tradebro.onrender.com/api/virtual-money/login-reward",{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}}),n=await t.json();if(t.ok)return r(n.data),{success:!0,message:n.message,reward:n.reward};throw new Error(n.message||"Failed to claim reward")}catch(e){return c(e.message),{success:!1,message:e.message}}finally{o(!1)}},balance:a.balance,formattedBalance:d(a.balance),transactions:a.transactions||[],canClaimReward:!a.lastLoginReward||new Date-new Date(a.lastLoginReward)>864e5};return B.jsx(xo.Provider,{value:h,children:e})},jo=()=>{const[e,t]=n.useState(!1),[s,a]=n.useState(null),[r,i]=n.useState(null),{refreshPortfolio:o}=ui(),{claimLoginReward:l,fetchVirtualMoney:c}=(()=>{const e=n.useContext(xo);if(void 0===e)throw new Error("useVirtualMoney must be used within a VirtualMoneyProvider");return e})(),d=n.useRef(!1);n.useEffect(()=>{if(d.current)return;(async()=>{const e=await ci.checkDailyLogin(),n=ci.getDailyRewardsInfo();i(n),e.awarded&&(a(e),t(!0),l().then(()=>{setTimeout(()=>{ci.syncPortfolioData(),o(),c()},500)}).catch(e=>{setTimeout(()=>{ci.syncPortfolioData(),o()},500)})),d.current=!0})().catch(console.error)},[]);const u=()=>{t(!1),ci.syncPortfolioData(),o(),c()},h=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(e);return B.jsxs(B.Fragment,{children:[B.jsx(g,{children:e&&s&&B.jsx(y.div,{className:"daily-reward-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:u,children:B.jsxs(y.div,{className:"daily-reward-modal",initial:{scale:.8,opacity:0,y:50},animate:{scale:1,opacity:1,y:0},exit:{scale:.8,opacity:0,y:50},onClick:e=>e.stopPropagation(),children:[B.jsx("button",{className:"close-btn",onClick:u,children:B.jsx(Nn,{})}),B.jsxs("div",{className:"reward-content",children:[B.jsx(y.div,{className:"reward-icon",animate:{rotate:[0,-10,10,-10,0],scale:[1,1.1,1]},transition:{duration:.6,repeat:1/0,repeatDelay:2},children:B.jsx(It,{})}),B.jsx("h2",{children:"Daily Login Bonus!"}),B.jsx("div",{className:"reward-amount",children:h(s.amount)}),B.jsxs("div",{className:"reward-details",children:[B.jsxs("div",{className:"detail-item",children:[B.jsx(mt,{}),B.jsxs("span",{children:["Login Streak: ",s.streak," days"]})]}),B.jsxs("div",{className:"detail-item",children:[B.jsx(vn,{}),B.jsxs("span",{children:["Total Rewards: ",h(s.totalRewards)]})]})]}),B.jsxs("div",{className:"reward-message",children:[B.jsx("p",{children:"Keep logging in daily to maintain your streak!"}),s.streak>=7&&B.jsxs("div",{className:"streak-bonus",children:[B.jsx(hn,{}),B.jsx("span",{children:"Amazing! 7+ day streak!"})]})]}),B.jsx("button",{className:"claim-btn",onClick:u,children:"Awesome! 🎉"})]})]})})}),r&&B.jsxs("div",{className:"daily-rewards-widget",children:[B.jsxs("div",{className:"widget-header",children:[B.jsx(It,{}),B.jsx("span",{children:"Daily Rewards"})]}),B.jsxs("div",{className:"widget-content",children:[B.jsxs("div",{className:"streak-info",children:[B.jsx("span",{className:"streak-number",children:r.loginStreak}),B.jsx("span",{className:"streak-label",children:"Day Streak"})]}),B.jsxs("div",{className:"total-rewards",children:[B.jsx("span",{className:"total-label",children:"Total Earned"}),B.jsx("span",{className:"total-amount",children:h(r.totalRewards)})]}),r.nextRewardAvailable&&B.jsx("div",{className:"next-reward",children:B.jsx("span",{children:"Next reward available tomorrow!"})})]})]})]})},wo=({notification:e,onClick:t,onDelete:s,onMarkAsRead:a,compact:r=!1,showActions:i=!0})=>{const o=n.useCallback(e=>{const t=new Date(e),n=new Date,s=Math.floor((n-t)/6e4);return s<1?"Just now":s<60?`${s}m ago`:s<1440?`${Math.floor(s/60)}h ago`:`${Math.floor(s/1440)}d ago`},[]),l=n.useCallback(()=>{t&&t(e)},[t,e]),c=n.useCallback(e=>{e.stopPropagation(),s&&s(e)},[s]),d=n.useCallback(t=>{t.stopPropagation(),a&&a(e.id)},[a,e.id]);return B.jsxs(y.div,{className:`notification-item ${r?"compact":""} ${e.read?"read":"unread"} ${e.type}`,onClick:l,whileHover:{backgroundColor:"var(--notification-hover-bg)"},layout:!0,children:[!e.read&&B.jsx("div",{className:"unread-indicator"}),B.jsxs("div",{className:"notification-content",children:[B.jsx("div",{className:"notification-icon",children:(e=>{const t={size:r?16:20};switch(e){case"success":return B.jsx(ft,{...t,className:"icon-success"});case"error":return B.jsx(wn,{...t,className:"icon-error"});case"warning":return B.jsx(nt,{...t,className:"icon-warning"});case"alert":return B.jsx(tt,{...t,className:"icon-alert"});default:return B.jsx(Dt,{...t,className:"icon-info"})}})(e.type)}),B.jsxs("div",{className:"notification-text",children:[B.jsx("div",{className:"notification-title",children:e.title}),e.message&&B.jsx("div",{className:"notification-message",children:e.message}),B.jsxs("div",{className:"notification-meta",children:[B.jsxs("span",{className:"notification-time",children:[B.jsx(yt,{size:12}),o(e.createdAt)]}),e.link&&B.jsxs("span",{className:"notification-link",children:[B.jsx(Tt,{size:12}),"View details"]})]})]}),i&&B.jsxs("div",{className:"notification-actions",children:[!e.read&&a&&B.jsx(y.button,{className:"action-btn mark-read",onClick:d,whileHover:{scale:1.1},whileTap:{scale:.9},title:"Mark as read","aria-label":"Mark as read",children:B.jsx(ft,{size:14})}),s&&B.jsx(y.button,{className:"action-btn delete",onClick:c,whileHover:{scale:1.1},whileTap:{scale:.9},title:"Delete notification","aria-label":"Delete notification",children:B.jsx(Nn,{size:14})})]})]})]})},No=({notifications:e=[],unreadCount:t=0,loading:s=!1,onClose:a})=>{const{markAsRead:r,deleteNotification:i,markAllAsRead:o}=mr(),l=e.slice(0,5),d=n.useCallback(async e=>{try{e.read||await r(e.id),e.link&&(window.location.href=e.link),a()}catch(t){}},[r,a]),u=n.useCallback(async(e,t)=>{t.stopPropagation();try{await i(e)}catch(n){}},[i]),h=n.useCallback(async()=>{try{await o()}catch(e){}},[o]);return B.jsxs("div",{className:"notification-dropdown",children:[B.jsxs("div",{className:"dropdown-header",children:[B.jsxs("div",{className:"header-content",children:[B.jsx("h3",{className:"dropdown-title",children:"Notifications"}),t>0&&B.jsxs("span",{className:"unread-count",children:[t," new"]})]}),B.jsxs("div",{className:"header-actions",children:[t>0&&B.jsx(y.button,{className:"mark-all-read-btn",onClick:h,whileHover:{scale:1.05},whileTap:{scale:.95},title:"Mark all as read","aria-label":"Mark all notifications as read",children:B.jsx(gt,{size:16})}),B.jsx(c,{to:"/settings",className:"settings-btn",title:"Notification settings",onClick:a,children:B.jsx(on,{size:16})})]})]}),B.jsx("div",{className:"dropdown-content",children:s?B.jsxs("div",{className:"dropdown-loading",children:[B.jsx("div",{className:"loading-spinner"}),B.jsx("span",{children:"Loading notifications..."})]}):l.length>0?B.jsxs(B.Fragment,{children:[B.jsx("div",{className:"notification-list",children:l.map((e,t)=>B.jsx(y.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.05*t},children:B.jsx(wo,{notification:e,onClick:()=>d(e),onDelete:t=>u(e._id||e.id,t),compact:!0})},e._id||e.id))}),B.jsx("div",{className:"dropdown-footer",children:B.jsxs(c,{to:"/notifications",className:"view-all-btn",onClick:a,children:["View all notifications",B.jsx(Tt,{size:14})]})})]}):B.jsxs("div",{className:"empty-state",children:[B.jsx("div",{className:"empty-icon",children:B.jsx(ft,{size:32})}),B.jsx("h4",{children:"All caught up!"}),B.jsx("p",{children:"You have no new notifications"})]})})]})},ko=({className:e="",position:t="bottom-right"})=>{const[s,a]=n.useState(!1),r=n.useRef(null),i=n.useRef(null),{unreadCount:o,notifications:l,loading:c,markAllAsRead:d,connectionStatus:u}=mr();n.useEffect(()=>{const e=e=>{r.current&&!r.current.contains(e.target)&&i.current&&!i.current.contains(e.target)&&a(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const[h,m]=n.useState(!1);n.useEffect(()=>{if(o>0&&!h){m(!0);const e=setTimeout(()=>m(!1),1200);return()=>clearTimeout(e)}},[o,h]);const p=n.useCallback(()=>{a(e=>!e)},[]),f=n.useCallback(async()=>{try{await d()}catch(e){}},[d]);return B.jsxs("div",{className:`notification-bell-container ${e}`,ref:r,children:[B.jsxs(y.button,{className:`notification-bell ${h?"animate":""} ${s?"active":""}`,onClick:p,whileHover:{scale:1.05},whileTap:{scale:.95},"aria-label":"Notifications "+(o>0?`(${o} unread)`:""),children:[B.jsx(y.div,{className:"bell-icon",animate:h?{rotate:[0,-10,10,-10,10,0],transition:{duration:.6,ease:"easeInOut",repeat:1,repeatDelay:.6}}:{},children:B.jsx(ut,{size:20})}),B.jsx(g,{children:o>0&&B.jsx(y.div,{className:"notification-badge",initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},transition:{type:"spring",stiffness:500,damping:30},children:o>99?"99+":o})}),B.jsx("div",{className:`connection-indicator ${(()=>{switch(u){case"connected":return"connected";case"connecting":return"connecting";case"disconnected":return"disconnected";default:return"unknown"}})()}`})]}),B.jsx(g,{children:s&&B.jsx(y.div,{ref:i,className:`notification-dropdown-wrapper ${t}`,initial:{opacity:0,scale:.95,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-10},transition:{duration:.2,ease:"easeOut"},children:B.jsx(No,{notifications:l,unreadCount:o,loading:c,onMarkAllAsRead:f,onClose:()=>a(!1)})})})]})},So=({icon:e,title:t,subtitle:n,actions:s=[],borderColor:a="primary",showNotifications:r=!0,className:i=""})=>B.jsx(y.div,{className:`page-header ${(e=>{switch(e){case"primary":default:return"border-primary";case"success":return"border-success";case"warning":return"border-warning";case"info":return"border-info";case"purple":return"border-purple";case"orange":return"border-orange"}})(a)} ${i}`,initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},children:B.jsxs("div",{className:"header-content",children:[B.jsx("div",{className:"header-left",children:B.jsxs("div",{className:"header-title-section",children:[e&&B.jsx("div",{className:"header-icon",children:B.jsx(e,{size:24})}),B.jsxs("div",{className:"header-text",children:[B.jsx("h1",{className:"header-title",children:t}),n&&B.jsx("p",{className:"header-subtitle",children:n})]})]})}),B.jsx("div",{className:"header-right",children:B.jsxs("div",{className:"header-actions",children:[s.map((e,t)=>B.jsxs(y.button,{className:`header-action-btn ${e.variant||"secondary"}`,onClick:e.onClick,disabled:e.disabled,whileHover:{scale:1.02},whileTap:{scale:.98},title:e.tooltip,children:[e.icon&&B.jsx(e.icon,{size:16}),B.jsx("span",{children:e.label})]},t)),r&&B.jsx("div",{className:"header-notifications",children:B.jsx(ko,{position:"bottom-right"})})]})})]})}),Co=(e,t=!1)=>{if(null==e||isNaN(e))return"₹0.00";const n=Number(e);if(t){if(n>=1e7)return`₹${(n/1e7).toFixed(2)}Cr`;if(n>=1e5)return`₹${(n/1e5).toFixed(2)}L`;if(n>=1e3)return`₹${(n/1e3).toFixed(2)}K`}return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2,maximumFractionDigits:2}).format(n)},To=(e,t=!1)=>{if(null==e||isNaN(e))return"0";const n=Number(e);if(t){if(n>=1e7)return`${(n/1e7).toFixed(2)}Cr`;if(n>=1e5)return`${(n/1e5).toFixed(2)}L`;if(n>=1e3)return`${(n/1e3).toFixed(2)}K`}return new Intl.NumberFormat("en-IN",{minimumFractionDigits:0,maximumFractionDigits:2}).format(n)},Po=(e,t="short")=>{if(!e)return"";const n=new Date(e);if(isNaN(n.getTime()))return"";return new Intl.DateTimeFormat("en-IN",{short:{day:"2-digit",month:"2-digit",year:"numeric"},long:{day:"numeric",month:"long",year:"numeric"},time:{hour:"2-digit",minute:"2-digit",hour12:!0},datetime:{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}}[t]).format(n)},Eo=({stockData:e,size:t="medium",variant:s="icon",showText:a=!1,className:r="",onSuccess:i,onError:o})=>{const{isInWatchlist:l,addToWatchlist:c,removeFromWatchlist:d,watchlists:u,loadingState:h,loading:m,error:p,refreshWatchlists:f}=Pi(),[v,x]=n.useState(!1),b=l((null==e?void 0:e.symbol)||(null==e?void 0:e.stockSymbol)),j="toggle"===h.action&&m;h.action;const w=n.useCallback(async t=>{var n;if(null==t||t.stopPropagation(),e&&e.symbol)try{b?(await d(e.symbol),null==i||i(null,"removed")):(await c(e,null==(n=u.find(e=>e.isDefault))?void 0:n._id),null==i||i(null,"added"))}catch(s){null==o||o(s.message||"Failed to update watchlist")}},[e,b,c,d,i,o,u]),N=n.useCallback(async(t,n)=>{t.stopPropagation(),e&&e.symbol&&(x(!1),await c(e,n),f())},[e,c,f]),k=n.useCallback(async t=>{t.stopPropagation(),e&&e.symbol&&(x(!1),await d(e.symbol))},[e,d]);return n.useEffect(()=>{const e=e=>{v&&!e.target.closest(".watchlist-dropdown-container")&&x(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[v]),"simple"===s?B.jsxs("button",{className:`watchlist-btn watchlist-btn-${t} ${b?"active":""} ${j?"processing":""} ${r}`,onClick:w,disabled:j||m,title:b?"Remove from watchlist":"Add to watchlist",children:[j?B.jsx(_t,{className:"animate-spin"}):B.jsx(hn,{}),a&&B.jsx("span",{className:"btn-text",children:b?"In Watchlist":"Add to Watchlist"})]}):"dropdown"===s?B.jsxs("div",{className:`watchlist-dropdown-container ${r}`,children:[B.jsxs("button",{className:`watchlist-btn watchlist-btn-${t} ${b?"active":""}`,onClick:e=>{e.stopPropagation(),x(!v)},disabled:j||m,title:"Manage watchlist",children:[j?B.jsx(_t,{className:"animate-spin"}):B.jsx(Mt,{}),a&&B.jsx("span",{className:"btn-text",children:"Watchlist"})]}),B.jsx(g,{children:v&&B.jsxs(y.div,{className:"watchlist-dropdown",initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.2},children:[B.jsxs("div",{className:"dropdown-header",children:[B.jsx("span",{children:"Add to Watchlist"}),B.jsx("button",{className:"close-btn",onClick:()=>x(!1),children:B.jsx(Nn,{})})]}),B.jsxs("div",{className:"dropdown-content",children:[0===u.length&&B.jsx("div",{className:"dropdown-empty",children:B.jsx("span",{children:"No watchlists found"})}),u.map(t=>{var n;const s=null==(n=t.stocks)?void 0:n.some(t=>t.symbol===e.symbol||t.stockSymbol===e.symbol);return B.jsxs("button",{className:"dropdown-item "+(s?"has-stock":""),onClick:e=>N(e,t._id),disabled:j||s,children:[s?B.jsx(gt,{}):B.jsx(tn,{}),B.jsx("span",{children:t.name}),t.isDefault&&B.jsx("span",{className:"default-badge",children:"Default"})]},t._id)}),b&&B.jsxs("button",{className:"dropdown-item remove-item",onClick:k,disabled:j,children:[B.jsx(Nn,{}),B.jsx("span",{children:"Remove from All Watchlists"})]})]})]})})]}):B.jsxs("button",{className:`watchlist-btn watchlist-btn-${t} ${b?"active":""} ${j?"processing":""} ${r}`,onClick:w,disabled:j||m,title:b?"Remove from watchlist":"Add to watchlist",children:[B.jsx(y.div,{initial:{scale:.5,opacity:0,rotate:-180},animate:{scale:1,opacity:1,rotate:0},transition:{duration:.4,type:"spring",stiffness:300,damping:20},children:j?B.jsx(y.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:B.jsx(_t,{})}):B.jsx(y.div,{initial:!1,animate:{scale:b?[1,1.3,1]:1,rotate:b?[0,15,-15,0]:0},transition:{duration:.3},children:B.jsx(hn,{className:b?"filled":""})})},b?"filled":"empty"),a&&B.jsx("span",{className:"btn-text",children:b?"In Watchlist":"Add to Watchlist"})]})},Lo=({stockData:e,isOpen:t,onClose:s,showQuantityControls:a=!0,defaultQuantity:r=1,onSuccess:i,compact:l=!1})=>{var c;const d=o(),{portfolioData:u,buyStock:h,isLoading:m}=ui(),[p,f]=n.useState(r);n.useState(!1);const[g,v]=n.useState(0),[x,b]=n.useState(!1);n.useEffect(()=>{t&&(f(r),v(0),b(!1))},[t,r]);const j=(null==e?void 0:e.price)||0,w=p*j,N=u.availableCash>=w,k=e=>{if(!N||x)return;e.preventDefault(),e.stopPropagation();const t=e.currentTarget.closest(".slide-to-buy");if(!t)return;const n=t.getBoundingClientRect(),s=n.width-52-8;let a=!0;const r=e=>{if(!a)return;e.preventDefault();const t=(e.touches?e.touches[0].clientX:e.clientX)-n.left-26,r=Math.min(Math.max(t/s*100,0),100);v(r)},i=async()=>{a=!1,g>80?(v(100),await S()):v(0),document.removeEventListener("mousemove",r,{passive:!1}),document.removeEventListener("mouseup",i),document.removeEventListener("touchmove",r,{passive:!1}),document.removeEventListener("touchend",i)};document.addEventListener("mousemove",r,{passive:!1}),document.addEventListener("mouseup",i),document.addEventListener("touchmove",r,{passive:!1}),document.addEventListener("touchend",i)},S=async()=>{if(e&&p&&!x){b(!0);try{const t=await h(e.symbol,p,e.price,e);if(t&&t.success)Ze.success(`Successfully bought ${p} shares of ${e.symbol}!`),v(100),i&&i(t),setTimeout(()=>{s(),v(0)},1500);else{const e=(null==t?void 0:t.error)||(null==t?void 0:t.message)||"Failed to buy stock";Ze.error(e),v(0)}}catch(t){Ze.error(t.message||"Failed to buy stock"),v(0)}finally{b(!1)}}};return t&&e?B.jsx(y.div,{className:"slide-to-buy-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:s,children:B.jsxs(y.div,{className:"slide-to-buy-modal "+(l?"compact":""),initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:e=>e.stopPropagation(),children:[B.jsxs("div",{className:"modal-header",children:[B.jsxs("div",{className:"stock-info",children:[B.jsx("h3",{children:e.symbol}),B.jsx("p",{children:e.name})]}),B.jsxs("div",{className:"header-actions",children:[B.jsx(Eo,{stockData:e,size:"medium",variant:"simple",showText:!1}),B.jsx("button",{onClick:s,className:"close-btn",children:B.jsx(Nn,{})})]})]}),B.jsx("div",{className:"stock-price-section",children:B.jsxs("div",{className:"current-price",children:[B.jsx("span",{className:"price-value",children:Co(e.price)}),B.jsxs("div",{className:"price-change "+(e.change>=0?"positive":"negative"),children:[e.change>=0?"+":"",Co(e.change),"(",(null==(c=e.changePercent)?void 0:c.toFixed(2))||"0.00","%)"]})]})}),a&&B.jsxs("div",{className:"quantity-section",children:[B.jsx("label",{children:"Quantity"}),B.jsxs("div",{className:"quantity-controls",children:[B.jsx("button",{onClick:()=>f(Math.max(1,p-1)),className:"quantity-btn",disabled:x,children:B.jsx(Vt,{})}),B.jsx("input",{type:"number",value:p,onChange:e=>f(Math.max(1,parseInt(e.target.value)||1)),className:"quantity-input",min:"1",disabled:x}),B.jsx("button",{onClick:()=>f(p+1),className:"quantity-btn",disabled:x,children:B.jsx(tn,{})})]})]}),B.jsxs("div",{className:"order-summary",children:[B.jsxs("div",{className:"summary-row",children:[B.jsx("span",{children:"Price per share"}),B.jsx("span",{children:Co(j)})]}),B.jsxs("div",{className:"summary-row",children:[B.jsx("span",{children:"Quantity"}),B.jsxs("span",{children:[p," shares"]})]}),B.jsxs("div",{className:"summary-row total",children:[B.jsx("span",{children:"Total Cost"}),B.jsx("span",{children:Co(w)})]}),B.jsxs("div",{className:"summary-row",children:[B.jsx("span",{children:"Available Cash"}),B.jsx("span",{className:N?"positive":"negative",children:Co(u.availableCash)})]})]}),!N&&B.jsxs("div",{className:"insufficient-funds-warning",children:[B.jsx(tt,{}),B.jsx("span",{children:"Insufficient funds to complete this purchase"})]}),B.jsxs("div",{className:"action-buttons",children:[B.jsxs("button",{onClick:async()=>{N&&!x&&await S()},disabled:!N||x,className:"quick-buy-btn "+(N?"":"disabled"),children:[B.jsx(dn,{}),x?"Processing...":"Quick Buy"]}),B.jsx("div",{className:"slide-to-buy-container",children:B.jsxs("div",{className:`slide-to-buy ${N?"":"disabled"} ${x?"processing":""}`,children:[B.jsx("div",{className:"slide-track",style:{background:`linear-gradient(to right, #10B981 ${g}%, #E5E7EB ${g}%)`},children:B.jsx(y.div,{className:"slide-button",style:{left:`${Math.min(g,85)}%`},onMouseDown:N?k:void 0,onTouchStart:N?k:void 0,whileHover:N?{scale:1.05}:{},whileTap:N?{scale:.95}:{},animate:{left:`${Math.min(g,85)}%`},transition:{type:0===g?"spring":"tween",stiffness:300,damping:30,duration:0===g?.5:.1},children:x?B.jsx("div",{className:"loading-spinner small"}):g>80?B.jsx(ft,{}):B.jsx(it,{})})}),B.jsx("span",{className:"slide-text",children:x?"Processing...":g>80?"Release to Buy!":"Slide to Buy"})]})})]}),B.jsx("div",{className:"additional-actions",children:B.jsx("button",{onClick:()=>{s(),d(`/stock/${e.symbol}`)},className:"view-details-btn",children:"View Full Details"})})]})}):null},Io=()=>{const[e,t]=n.useState(!1),[s,a]=n.useState(null),[r,i]=n.useState(1),o=n.useCallback((e,n=1)=>{if(!e)return;const s={symbol:e.symbol||e.stockSymbol,name:e.name||e.companyName||`${e.symbol} Corporation`,price:e.price||e.currentPrice||0,change:e.change||e.priceChange||0,changePercent:e.changePercent||e.changePercentage||0,volume:e.volume||0,marketCap:e.marketCap||0,sector:e.sector||"Unknown",...e};a(s),i(n),t(!0)},[]),l=n.useCallback(()=>{t(!1),setTimeout(()=>{a(null),i(1)},300)},[]),c=n.useCallback(e=>{o(e,1)},[o]);return{isOpen:e,currentStock:s,defaultQuantity:r,openSlideToBuy:o,closeSlideToBuy:l,quickBuy:c}},Ao=n.memo(({user:e,theme:t,onLogin:s})=>{var a;o();const[r,i]=n.useState(!1),{portfolioData:l,loading:c,updatePortfolioValues:d,refreshPortfolio:u}=ui(),{isOpen:h,currentStock:m,defaultQuantity:p,openSlideToBuy:f,closeSlideToBuy:g}=Io();n.useEffect(()=>{const e=new URLSearchParams(window.location.search),t=e.get("token"),n=e.get("user");if(t&&n&&s)try{const e=JSON.parse(decodeURIComponent(n));s(e,t),Ze.success(`Welcome ${e.fullName}!`),window.history.replaceState({},document.title,window.location.pathname)}catch(a){Ze.error("Authentication failed. Please try again.")}},[s]),n.useEffect(()=>{1e4===l.availableCash&&1e4===l.totalValue&&setTimeout(()=>{u()},1e3)},[l.availableCash,l.totalValue,u]);const v=[{title:"Total Value",value:l.totalValue,changePercent:l.totalGainLossPercentage,icon:Nt,color:"primary"},{title:"Available Cash",value:l.availableCash,changePercent:0,icon:Nt,color:"info"},{title:"Total Invested",value:l.totalInvested,changePercent:l.totalGainLossPercentage,icon:vn,color:l.totalGainLoss>=0?"success":"danger"},{title:"Holdings",value:(null==(a=l.holdings)?void 0:a.length)||0,changePercent:0,icon:dn,color:"success"}],x=async()=>{i(!0);try{ci.getPortfolioSummary();u(),await d(),await new Promise(e=>setTimeout(e,1e3))}catch(e){}finally{i(!1)}};return B.jsxs("div",{className:"dashboard-page",children:[B.jsx(So,{icon:vn,title:"TradeBro Dashboard",subtitle:"Indian Stock Market Overview - NSE & BSE Trading Platform",borderColor:"primary",actions:[{label:"Refresh",icon:nn,onClick:x,variant:"secondary",disabled:r},{label:"Claim Daily ₹100",icon:It,onClick:async()=>{try{const e=await ci.claimDailyReward();e.success?Ze.success(`Daily reward claimed! +₹${e.amount}`):e.alreadyClaimed&&Ze.info("Daily reward already claimed today!"),setTimeout(()=>{u(),x()},1e3)}catch(e){Ze.error("Failed to claim daily reward")}},variant:"success",disabled:!1}]}),B.jsx(jo,{}),B.jsxs("div",{className:"dashboard-container",children:[B.jsx(y.div,{className:"market-indices",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},children:[{name:"NIFTY 50",value:19674.25,change:145.3,changePercent:.74},{name:"SENSEX",value:65953.48,change:501.92,changePercent:.77},{name:"NIFTY BANK",value:44821.15,change:287.65,changePercent:.65},{name:"NIFTY IT",value:29847.3,change:-89.45,changePercent:-.3}].map((e,t)=>{const n=e.change>=0;return B.jsxs(y.div,{className:"index-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.1*t},children:[B.jsxs("div",{className:"index-header",children:[B.jsx("h3",{className:"index-name",children:e.name}),B.jsxs("div",{className:"index-change "+(n?"positive":"negative"),children:[n?B.jsx(ot,{size:12}):B.jsx(st,{size:12}),Math.abs(e.changePercent),"%"]})]}),B.jsx("div",{className:"index-value",children:B.jsx(vo,{end:e.value,duration:2,separator:",",decimals:2})}),B.jsxs("div",{className:"index-change-value "+(n?"positive":"negative"),children:[n?"+":"",e.change.toFixed(2)]})]},e.name)})}),B.jsx(y.div,{className:"stats-grid",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},children:v.map((e,t)=>{const n=e.icon,s=e.changePercent>=0;return B.jsxs(y.div,{className:`stat-card stat-${e.color}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.1*(t+4)},children:[B.jsxs("div",{className:"stat-header",children:[B.jsx("div",{className:"stat-icon",children:B.jsx(n,{})}),0!==e.changePercent&&B.jsxs("div",{className:"stat-change "+(s?"positive":"negative"),children:[s?B.jsx(ot,{size:12}):B.jsx(st,{size:12}),Math.abs(e.changePercent).toFixed(1),"%"]})]}),B.jsxs("div",{className:"stat-content",children:[B.jsx("h3",{className:"stat-value",children:"number"==typeof e.value&&e.value>1e3?B.jsx(vo,{end:e.value,duration:2,separator:",",prefix:e.title.includes("Value")||e.title.includes("Cash")||e.title.includes("Invested")?"₹":""}):e.value}),B.jsx("p",{className:"stat-title",children:e.title})]})]},e.title)})})]}),B.jsx(Lo,{stockData:m,isOpen:h,onClose:g,defaultQuantity:p,onSuccess:()=>{d()}})]})});Ao.displayName="Dashboard";const Oo=({isOpen:e,onClose:t,onConfirm:s,orderData:a,loading:r=!1})=>{const[i,o]=n.useState(!1),[l,c]=n.useState(!1),d=n.useRef(null),u=j(0),h=x(u,[0,200],[0,1]),m=x(h,[0,.3,.7,1],"BUY"===(null==a?void 0:a.action)?["rgba(229, 231, 235, 0.3)","rgba(251, 191, 36, 0.4)","rgba(16, 185, 129, 0.6)","rgba(16, 185, 129, 0.9)"]:["rgba(229, 231, 235, 0.3)","rgba(251, 191, 36, 0.4)","rgba(239, 68, 68, 0.6)","rgba(239, 68, 68, 0.9)"]),p=x(h,[0,1],["0%","100%"]),[f,v]=n.useState(0),[b,w]=n.useState(0);n.useEffect(()=>h.on("change",e=>{const t=Math.round(100*e);v(t);const n=[25,50,75].find(e=>t>=e&&b<e);n&&l&&(w(n),navigator.vibrate&&navigator.vibrate(30))}),[h,b,l]),n.useEffect(()=>{e&&(o(!1),c(!1),w(0),v(0),u.set(0))},[e,u]);const N=n.useCallback(()=>{c(!0),w(0),navigator.vibrate&&navigator.vibrate(50)},[]),k=n.useCallback(()=>{const e=u.get();c(!1),e>=180?(o(!0),navigator.vibrate&&navigator.vibrate([100,50,100]),setTimeout(()=>{s(a)},300)):u.set(0)},[u,s,a]),S=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2,maximumFractionDigits:2}).format(e),C=a?a.quantity*a.price:0;return a?B.jsx(g,{children:e&&B.jsxs(B.Fragment,{children:[B.jsx(y.div,{className:"drag-confirm-backdrop",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:t}),B.jsxs(y.div,{className:"drag-confirm-modal "+(i?"confirmed":""),initial:{opacity:0,scale:.9,y:-20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:-20},transition:{type:"spring",damping:25,stiffness:300},children:[B.jsxs("div",{className:"modal-header",children:[B.jsxs("div",{className:"header-content",children:[B.jsx("div",{className:`action-icon ${a.action.toLowerCase()}`,children:"BUY"===a.action?B.jsx(vn,{}):B.jsx(yn,{})}),B.jsxs("div",{className:"header-text",children:[B.jsxs("h2",{className:"modal-title",children:["Confirm ",a.action," Order"]}),B.jsx("p",{className:"modal-subtitle",children:"Review your order details carefully"})]})]}),B.jsx("button",{className:"close-button",onClick:t,children:B.jsx(Nn,{})})]}),B.jsxs("div",{className:"order-details",children:[B.jsxs("div",{className:"stock-info",children:[B.jsx("div",{className:"stock-symbol",children:a.symbol}),B.jsx("div",{className:"stock-name",children:a.name||a.symbol})]}),B.jsxs("div",{className:"order-summary",children:[B.jsxs("div",{className:"summary-row",children:[B.jsx("span",{className:"label",children:"Action:"}),B.jsx("span",{className:`value ${a.action.toLowerCase()}`,children:a.action})]}),B.jsxs("div",{className:"summary-row",children:[B.jsx("span",{className:"label",children:"Quantity:"}),B.jsxs("span",{className:"value",children:[a.quantity," shares"]})]}),B.jsxs("div",{className:"summary-row",children:[B.jsx("span",{className:"label",children:"Price per share:"}),B.jsx("span",{className:"value",children:S(a.price)})]}),B.jsxs("div",{className:"summary-row total",children:[B.jsx("span",{className:"label",children:"Total Value:"}),B.jsx("span",{className:"value",children:S(C)})]})]}),B.jsxs("div",{className:"risk-warning",children:[B.jsx(cn,{className:"warning-icon"}),B.jsxs("div",{className:"warning-text",children:[B.jsx("strong",{children:"Important:"})," This action cannot be undone. Please review all details before confirming."]})]})]}),B.jsxs("div",{className:"drag-confirm-container",children:[B.jsx("div",{className:"drag-instruction",children:i?B.jsx("span",{className:"confirmed-text",children:"✓ Order Confirmed!"}):B.jsxs("span",{children:["Drag to confirm ",a.action.toLowerCase()," order"]})}),B.jsxs("div",{className:"drag-track",ref:d,children:[B.jsx(y.div,{className:"drag-track-fill",style:{backgroundColor:m,width:i?"100%":p}}),B.jsx(y.div,{className:`drag-handle ${l?"dragging":""} ${i?"confirmed":""}`,drag:"x",dragConstraints:d,dragElastic:.1,dragMomentum:!1,style:{x:u},onDragStart:N,onDragEnd:k,whileDrag:{scale:1.1},animate:{x:i?200:0},transition:{type:"spring",damping:20,stiffness:300},children:i?B.jsx(y.div,{initial:{scale:0},animate:{scale:1},className:"check-icon",children:"✓"}):B.jsx(it,{})}),B.jsx("div",{className:"drag-text",children:i?"Processing...":l&&f>5?`${f}%`:`Confirm ${a.action}`})]})]}),r&&B.jsxs("div",{className:"loading-overlay",children:[B.jsx("div",{className:"loading-spinner"}),B.jsx("p",{children:"Processing your order..."})]})]})]})}):null},Do=({user:e,theme:t})=>{var s;const a=o(),r=l(),[i,c]=n.useState(!1),[d,u]=n.useState(null),{isOpen:h,currentStock:m,defaultQuantity:p,openSlideToBuy:f,closeSlideToBuy:g}=Io(),[v,x]=n.useState("all");n.useState("value");const{portfolioData:b,loading:j,updatePortfolioValues:w,refreshPortfolio:N,sellStock:k}=ui();if(n.useEffect(()=>{var e,t;if((null==(e=r.state)?void 0:e.showPurchaseSuccess)&&(null==(t=r.state)?void 0:t.purchasedStock)){const e=r.state.purchasedStock;Ze.success(`🎉 Successfully purchased ${e.quantity} shares of ${e.symbol} for ${L(e.totalCost)}!`,{duration:5e3}),u(e.symbol),setTimeout(()=>{u(null)},5e3),a(r.pathname,{replace:!0})}},[r.state,a,r.pathname]),j||!b)return B.jsx("div",{className:"portfolio-page",children:B.jsx("div",{className:"portfolio-container",children:B.jsxs("div",{className:"loading-container",children:[B.jsx("div",{className:"loading-spinner"}),B.jsx("p",{children:"Loading portfolio..."})]})})});const S=[{title:"Total Value",value:b.totalValue||0,changePercent:b.totalGainLossPercentage||0,changeAmount:b.totalGainLoss||0,icon:Nt,color:"primary"},{title:"Available Cash",value:b.availableCash||0,changePercent:0,changeAmount:0,icon:Nt,color:"info"},{title:"Total Invested",value:b.totalInvested||0,changePercent:b.totalGainLossPercentage||0,changeAmount:b.totalGainLoss||0,icon:dt,color:(b.totalGainLoss||0)>=0?"success":"danger"},{title:"Holdings",value:(null==(s=b.holdings)?void 0:s.length)||0,changePercent:0,changeAmount:0,icon:Zt,color:"info"}],C=b.holdings||[],T=C.filter(e=>"gainers"===v?(e.totalGain||0)>0:"losers"!==v||(e.totalGain||0)<0),P=[...T].sort((e,t)=>(t.value||0)-(e.value||0)),E=async()=>{c(!0),await new Promise(e=>setTimeout(e,1500)),c(!1)},L=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(e);return B.jsxs("div",{className:"portfolio-page",children:[B.jsx(So,{icon:Zt,title:"Portfolio",subtitle:"Track your investments and portfolio performance",borderColor:"success",actions:[{label:"Refresh",icon:nn,onClick:E,variant:"secondary",disabled:i}]}),B.jsxs("div",{className:"portfolio-container",children:[B.jsx(y.div,{className:"portfolio-stats",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},children:S.map((e,t)=>{const n=e.icon,s=e.changePercent>=0;return B.jsxs(y.div,{className:`stat-card stat-${e.color}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.1*t},children:[B.jsxs("div",{className:"stat-header",children:[B.jsx("div",{className:"stat-icon",children:B.jsx(n,{})}),B.jsxs("div",{className:"stat-change "+(s?"positive":"negative"),children:[s?B.jsx(ot,{size:14}):B.jsx(st,{size:14}),Math.abs(e.changePercent),"%"]})]}),B.jsxs("div",{className:"stat-content",children:[B.jsx("h3",{className:"stat-value",children:"number"==typeof e.value&&e.value>1e3?B.jsx(vo,{end:e.value,duration:2,separator:",",prefix:e.title.includes("Value")||e.title.includes("P&L")?"₹":""}):e.value}),B.jsx("p",{className:"stat-title",children:e.title}),0!==e.changeAmount&&B.jsxs("p",{className:"stat-change-amount "+(s?"positive":"negative"),children:[s?"+":"",L(e.changeAmount)]})]})]},e.title)})}),B.jsx("div",{className:"portfolio-grid",children:B.jsxs(y.div,{className:"portfolio-card holdings-table",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},children:[B.jsxs("div",{className:"card-header",children:[B.jsxs("div",{className:"header-left",children:[B.jsxs("h3",{className:"card-title",children:[B.jsx(dt,{className:"card-icon"}),"My Holdings",B.jsxs("span",{className:"holdings-count",children:["(",T.length," of ",C.length," stocks)"]})]}),B.jsxs("div",{className:"holdings-summary",children:[B.jsxs("span",{className:"total-invested",children:["Total Invested: ",L(b.totalInvested||0)]}),B.jsxs("span",{className:"current-value",children:["Current Value: ",L(b.totalValue||0)]})]})]}),B.jsxs("div",{className:"card-actions",children:[B.jsx("div",{className:"filter-group",children:B.jsxs("select",{className:"filter-select",value:v,onChange:e=>x(e.target.value),children:[B.jsx("option",{value:"all",children:"All Holdings"}),B.jsx("option",{value:"gainers",children:"Gainers Only"}),B.jsx("option",{value:"losers",children:"Losers Only"})]})}),B.jsx("button",{className:"btn-refresh",onClick:E,disabled:i,title:"Refresh Holdings",children:B.jsx(nn,{className:i?"spinning":""})})]})]}),B.jsx("div",{className:"card-content",children:B.jsxs("div",{className:"holdings-table",children:[B.jsxs("div",{className:"table-header",children:[B.jsx("div",{className:"col-stock",children:"Stock"}),B.jsx("div",{className:"col-quantity",children:"Quantity"}),B.jsx("div",{className:"col-avg-price",children:"Avg Price"}),B.jsx("div",{className:"col-current-price",children:"Current Price"}),B.jsx("div",{className:"col-value",children:"Value"}),B.jsx("div",{className:"col-gains",children:"Total P&L"}),B.jsx("div",{className:"col-day-change",children:"Day Change"}),B.jsx("div",{className:"col-actions",children:"Actions"})]}),B.jsx("div",{className:"table-body",children:P.length>0?P.map((e,t)=>{return B.jsxs(y.div,{className:"table-row clickable "+(d===e.symbol?"highlighted-purchase":""),initial:{opacity:0,y:10},animate:{opacity:1,y:0,scale:d===e.symbol?1.02:1},style:{backgroundColor:d===e.symbol?"var(--success-bg, rgba(16, 185, 129, 0.1))":"transparent"},transition:{duration:.3,delay:.05*t},onClick:()=>a(`/stock/${e.symbol}`),children:[B.jsx("div",{className:"col-stock",children:B.jsxs("div",{className:"stock-info",children:[B.jsx("div",{className:"stock-symbol",children:e.symbol}),B.jsx("div",{className:"stock-name",children:e.name}),B.jsx("div",{className:"stock-sector",children:e.sector})]})}),B.jsx("div",{className:"col-quantity",children:(n=e.quantity||0,new Intl.NumberFormat("en-IN").format(n))}),B.jsx("div",{className:"col-avg-price",children:L(e.avgPrice||0)}),B.jsx("div",{className:"col-current-price",children:B.jsx(mi,{price:e.currentPrice||0,change:e.dayChange||0,changePercent:e.dayChangePercent||0,size:"small"})}),B.jsx("div",{className:"col-value",children:L(e.value||0)}),B.jsxs("div",{className:"col-gains",children:[B.jsxs("div",{className:"gain-amount "+((e.totalGain||0)>=0?"positive":"negative"),children:[(e.totalGain||0)>=0?"+":"",L(e.totalGain||0)]}),B.jsxs("div",{className:"gain-percent "+((e.totalGainPercent||0)>=0?"positive":"negative"),children:["(",(e.totalGainPercent||0)>=0?"+":"",(e.totalGainPercent||0).toFixed(2),"%)"]})]}),B.jsxs("div",{className:"col-day-change",children:[B.jsxs("div",{className:"day-change "+((e.dayChange||0)>=0?"positive":"negative"),children:[(e.dayChange||0)>=0?"+":"",(e.dayChange||0).toFixed(2)]}),B.jsxs("div",{className:"day-change-percent "+((e.dayChangePercent||0)>=0?"positive":"negative"),children:["(",(e.dayChangePercent||0)>=0?"+":"",(e.dayChangePercent||0).toFixed(2),"%)"]})]}),B.jsx("div",{className:"col-actions",children:B.jsxs("div",{className:"action-buttons",children:[B.jsx(Eo,{stockData:{symbol:e.symbol,name:e.name,price:e.currentPrice,change:e.dayChange,changePercent:e.dayChangePercent},size:"small",variant:"simple",showText:!1}),B.jsx("button",{className:"buy-btn-small",onClick:t=>{t.stopPropagation(),f({symbol:e.symbol,name:e.name,price:e.currentPrice,change:e.dayChange,changePercent:e.dayChangePercent})},title:"Buy More",children:"Buy"}),B.jsx("button",{className:"sell-btn-small",onClick:t=>{t.stopPropagation(),(async e=>{const t=prompt(`How many shares of ${e.symbol} do you want to sell? (Available: ${e.quantity})`);if(!t||isNaN(t)||t<=0)return;const n=parseInt(t);if(n>e.quantity)Ze.error(`You only have ${e.quantity} shares available`);else try{const t=await k(e.symbol,n,e.currentPrice||e.avgPrice);t&&t.success?Ze.success(`Successfully sold ${n} shares of ${e.symbol}!`):Ze.error((null==t?void 0:t.error)||"Failed to sell stock")}catch(s){Ze.error(s.message||"Failed to sell stock")}})(e)},title:"Sell Stock",children:"Sell"})]})})]},e.symbol);var n}):B.jsxs("div",{className:"empty-holdings",children:[B.jsx("div",{className:"empty-icon",children:B.jsx(dt,{size:48})}),B.jsx("h3",{className:"empty-title",children:"gainers"===v?"No Gainers Found":"losers"===v?"No Losers Found":"No Holdings Yet"}),B.jsx("p",{className:"empty-description",children:"gainers"===v?"None of your holdings are currently in profit.":"losers"===v?"None of your holdings are currently in loss.":"Start building your portfolio by adding your first stock."}),"all"!==v&&B.jsx("button",{className:"btn-secondary",onClick:()=>x("all"),children:"View All Holdings"})]})})]})})]})}),B.jsx(Lo,{stockData:m,isOpen:h,onClose:g,defaultQuantity:p,onSuccess:()=>{}})]})]})},Ro=({isOpen:e,position:t,stockData:s,onClose:a,onQuickBuy:r,onQuickSell:i,onViewChart:o,onAddToWatchlist:l,onViewDetails:c,hasHolding:d=!1,isInWatchlist:u=!1})=>{var h,m,p;const f=n.useRef(null),[v,x]=n.useState(t);if(n.useEffect(()=>{if(e&&f.current&&t){const e=f.current.getBoundingClientRect(),n={width:window.innerWidth,height:window.innerHeight};let{x:s,y:a}=t;s+e.width>n.width&&(s=n.width-e.width-10),s<10&&(s=10),a+e.height>n.height&&(a=n.height-e.height-10),a<10&&(a=10),x({x:s,y:a})}},[e,t]),n.useEffect(()=>{const t=e=>{f.current&&!f.current.contains(e.target)&&a()},n=e=>{"Escape"===e.key&&a()};return e&&(document.addEventListener("mousedown",t),document.addEventListener("keydown",n)),()=>{document.removeEventListener("mousedown",t),document.removeEventListener("keydown",n)}},[e,a]),!e||!s)return null;const b=[{id:"quick-sell",label:"Quick Sell",icon:yn,action:()=>{i(s),a()},color:"red",disabled:!d,shortcut:"S"},{id:"enhanced-order",label:"Enhanced Order",icon:dn,action:()=>{a()},color:"blue",shortcut:"E"},{id:"view-chart",label:"View Chart",icon:dt,action:()=>{o(s),a()},color:"purple",shortcut:"C"},{id:"watchlist",label:u?"Remove from Watchlist":"Add to Watchlist",icon:ht,action:()=>{l(s),a()},color:"orange",shortcut:"W"},{id:"view-details",label:"View Details",icon:Dt,action:()=>{c(s),a()},color:"gray",shortcut:"I"}];return B.jsx(g,{children:B.jsxs(y.div,{ref:f,className:"stock-context-menu",style:{position:"fixed",left:v.x,top:v.y,zIndex:1e3},initial:{opacity:0,scale:.95,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-10},transition:{duration:.15,ease:"easeOut"},children:[B.jsxs("div",{className:"context-menu-header",children:[B.jsxs("div",{className:"stock-info",children:[B.jsx("span",{className:"stock-symbol",children:s.symbol}),B.jsxs("span",{className:"stock-price",children:["₹",(null==(h=s.price)?void 0:h.toLocaleString("en-IN"))||"0.00"]})]}),B.jsxs("div",{className:"price-change "+(s.change>=0?"positive":"negative"),children:[s.change>=0?"+":"",(null==(m=s.change)?void 0:m.toFixed(2))||"0.00","(",(null==(p=s.changePercent)?void 0:p.toFixed(2))||"0.00","%)"]})]}),B.jsx("div",{className:"context-menu-items",children:b.map((e,t)=>B.jsxs(y.button,{className:`context-menu-item ${e.color} ${e.disabled?"disabled":""}`,onClick:e.action,disabled:e.disabled,initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{duration:.1,delay:.02*t},whileHover:{backgroundColor:"var(--hover-bg)"},whileTap:{scale:.98},children:[B.jsxs("div",{className:"menu-item-content",children:[B.jsx(e.icon,{className:"menu-item-icon",size:16}),B.jsx("span",{className:"menu-item-label",children:e.label})]}),B.jsx("span",{className:"menu-item-shortcut",children:e.shortcut})]},e.id))}),B.jsxs("div",{className:"context-menu-footer",children:[B.jsxs("div",{className:"market-status",children:[B.jsx(et,{size:12}),B.jsx("span",{children:"Market Open"})]}),B.jsxs("div",{className:"last-updated",children:["Updated: ",(new Date).toLocaleTimeString()]})]})]})})},Mo=({user:e,theme:t})=>{var s;const[a,r]=n.useState(null),[i,c]=n.useState("market"),[d,u]=n.useState("buy"),[h,m]=n.useState(1),[p,f]=n.useState(""),[g,v]=n.useState(!1),[x,b]=n.useState(!1),[j,w]=n.useState(!1),[N,k]=n.useState(!1),[S,C]=n.useState(null),T=l(),P=o(),{portfolioData:E,buyStock:L,sellStock:I}=ui(),{isOpen:A,currentStock:O,defaultQuantity:D,openSlideToBuy:R,closeSlideToBuy:M}=Io(),{orderModalState:_,openOrderModal:F,closeOrderModal:z,quickBuy:U,quickSell:H,handleWatchlistStockClick:$,navigateToTrading:q}=Li(),{contextMenu:W,openContextMenu:V,closeContextMenu:Y}=(()=>{const[e,t]=n.useState({isOpen:!1,position:{x:0,y:0},stockData:null}),s=()=>{t({isOpen:!1,position:{x:0,y:0},stockData:null})};return n.useEffect(()=>{const t=t=>{if(!e.isOpen)return;const{key:n}=t;switch(e.stockData,n.toLowerCase()){case"b":case"s":case"c":case"w":case"e":case"i":t.preventDefault(),s()}};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[e]),{contextMenu:e,openContextMenu:(e,n)=>{e.preventDefault(),e.stopPropagation(),t({isOpen:!0,position:{x:e.clientX,y:e.clientY},stockData:n})},closeContextMenu:s}})(),{isModalOpen:G,orderData:J,loading:K,closeConfirmation:Q,processOrder:X,confirmBuy:Z,confirmSell:ee}=(()=>{const[e,t]=n.useState(!1),[s,a]=n.useState(null),[r,i]=n.useState(!1),o=n.useCallback(e=>{a(e),t(!0)},[]),l=n.useCallback(()=>{r||(t(!1),setTimeout(()=>{a(null),i(!1)},300))},[r]),c=n.useCallback(async e=>{i(!0);try{let t;if("BUY"===e.action?t=await ci.buyStock(e.symbol,e.quantity,e.price,e.orderType||"market"):"SELL"===e.action&&(t=await ci.sellStock(e.symbol,e.quantity,e.price,e.orderType||"market")),t.success)return Ze.success(`${e.action} order executed successfully! ${e.quantity} shares of ${e.symbol}`,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0}),setTimeout(()=>{l()},1500),t;throw new Error(t.message||"Order execution failed")}catch(t){return Ze.error(t.message||`Failed to execute ${e.action.toLowerCase()} order`,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0}),i(!1),{success:!1,error:t.message}}},[l]),d=n.useCallback((e,t,n,s={})=>{o({action:"BUY",symbol:e,quantity:t,price:n,...s})},[o]),u=n.useCallback((e,t,n,s={})=>{o({action:"SELL",symbol:e,quantity:t,price:n,...s})},[o]);return{isModalOpen:e,orderData:s,loading:r,openConfirmation:o,closeConfirmation:l,processOrder:c,confirmBuy:d,confirmSell:u}})(),{query:te,setQuery:ne,results:se,suggestions:ae,recentSearches:re,showHistory:ie,handleHistoryClick:oe,loading:le,clearSearch:ce,hasResults:de}=si({enableSuggestions:!0,enableHistory:!0,limit:20,debounceMs:300,onResults:(e,t)=>{e.length>0&&w(!0)}}),ue=[{title:"Available Balance",value:E.availableCash,icon:Nt,color:"primary"},{title:"Total Holdings",value:(null==(s=E.holdings)?void 0:s.length)||0,icon:dn,color:"info"},{title:"Total Invested",value:E.totalInvested,icon:dt,color:"warning"},{title:"Total P&L",value:E.totalGainLoss,changePercent:E.totalGainLossPercentage,icon:E.totalGainLoss>=0?vn:yn,color:E.totalGainLoss>=0?"success":"danger"}],he=[{symbol:"RELIANCE",name:"Reliance Industries",price:2465.3,change:2.71,changePercent:.11,volume:"2.5M"},{symbol:"TCS",name:"Tata Consultancy Services",price:3185.45,change:-14.85,changePercent:-.47,volume:"1.8M"},{symbol:"HDFCBANK",name:"HDFC Bank",price:1650.2,change:51.75,changePercent:3.13,volume:"3.2M"},{symbol:"INFY",name:"Infosys",price:1595.8,change:19.7,changePercent:1.25,volume:"2.1M"},{symbol:"ICICIBANK",name:"ICICI Bank",price:945.15,change:12.3,changePercent:1.32,volume:"4.1M"},{symbol:"WIPRO",name:"Wipro Ltd",price:420.85,change:-3.25,changePercent:-.77,volume:"1.5M"},{symbol:"BAJFINANCE",name:"Bajaj Finance",price:6845.3,change:125.4,changePercent:1.87,volume:"0.8M"},{symbol:"MARUTI",name:"Maruti Suzuki",price:9245.6,change:-85.2,changePercent:-.91,volume:"0.6M"}];n.useEffect(()=>{const e=new URLSearchParams(T.search),t=e.get("search"),n=e.get("symbol");if(t&&ne(t),n){const e=he.find(e=>e.symbol===n)||se.find(e=>e.symbol===n);e&&me(e)}},[T.search,se]);const me=e=>{var t;r(e),f((null==(t=e.price)?void 0:t.toString())||"")},pe=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),fe=de&&j?se.map(e=>({symbol:e.symbol,name:e.name,price:e.price||0,change:e.change||0,changePercent:e.changePercent||0,volume:e.volume||"N/A",exchange:e.exchange})):te&&!de?he.filter(e=>e.symbol.toLowerCase().includes(te.toLowerCase())||e.name.toLowerCase().includes(te.toLowerCase())):he;return B.jsx("div",{className:"trading-page",children:B.jsxs("div",{className:"trading-container",children:[B.jsx(y.div,{className:"trading-header",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6},children:B.jsxs("div",{className:"header-content",children:[B.jsxs("div",{className:"header-left",children:[B.jsxs("h1",{className:"page-title",children:[B.jsx(dn,{className:"title-icon"}),"Trading"]}),B.jsx("p",{className:"page-subtitle",children:"Buy and sell stocks with real-time market data"})]}),B.jsx("div",{className:"header-actions",children:B.jsxs("button",{className:"btn-premium btn-secondary",onClick:async()=>{v(!0),await new Promise(e=>setTimeout(e,1500)),v(!1)},disabled:g,children:[B.jsx(nn,{size:16,className:g?"animate-spin":""}),"Refresh"]})})]})}),B.jsx(y.div,{className:"trading-stats",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},children:ue.map((e,t)=>{const n=e.icon,s=e.changePercent>=0;return B.jsxs(y.div,{className:`stat-card stat-${e.color}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.1*t},children:[B.jsxs("div",{className:"stat-header",children:[B.jsx("div",{className:"stat-icon",children:B.jsx(n,{})}),void 0!==e.changePercent&&B.jsxs("div",{className:"stat-change "+(s?"positive":"negative"),children:[s?B.jsx(ot,{size:14}):B.jsx(st,{size:14}),Math.abs(e.changePercent),"%"]})]}),B.jsxs("div",{className:"stat-content",children:[B.jsx("h3",{className:"stat-value",children:"number"==typeof e.value&&e.value>1e3?B.jsx(vo,{end:e.value,duration:2,separator:",",prefix:e.title.includes("Balance")||e.title.includes("P&L")?"₹":""}):e.value}),B.jsx("p",{className:"stat-title",children:e.title})]})]},e.title)})}),B.jsxs("div",{className:"trading-grid",children:[B.jsxs(y.div,{className:"trading-card stocks-panel",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:[B.jsxs("div",{className:"card-header",children:[B.jsxs("h3",{className:"card-title",children:[B.jsx(dt,{className:"card-icon"}),de&&j?"Search Results":"Popular Stocks"]}),B.jsx("div",{className:"search-container",children:B.jsx(ri,{placeholder:"Search stocks...",value:te,onChange:ne,onClear:()=>{ce(),w(!1)},suggestions:ae,recentSearches:re,onSuggestionClick:e=>{const t={symbol:e.symbol,name:e.name,price:0,change:0,changePercent:0,volume:"N/A"};me(t),ce()},onHistoryClick:oe,showHistory:ie,loading:le,size:"sm",showSuggestions:!0,enableHistory:!0,className:"trading-search-input",renderSuggestion:(e,t)=>B.jsx("div",{className:"trading-search-suggestion",children:B.jsxs("div",{className:"suggestion-content",children:[B.jsx("span",{className:"suggestion-symbol",children:e.symbol}),B.jsx("span",{className:"suggestion-name",children:e.name}),e.exchange&&B.jsx("span",{className:"suggestion-exchange",children:e.exchange})]})},t)})})]}),B.jsx("div",{className:"card-content",children:B.jsxs("div",{className:"stocks-list",children:[le&&B.jsxs("div",{className:"loading-state",children:[B.jsx(et,{className:"loading-icon animate-spin"}),B.jsx("span",{children:"Searching stocks..."})]}),!le&&0===fe.length&&te&&B.jsxs("div",{className:"empty-state",children:[B.jsx(an,{className:"empty-icon"}),B.jsxs("span",{children:['No stocks found for "',te,'"']})]}),!le&&fe.map((e,t)=>B.jsxs(y.div,{className:"stock-item "+((null==a?void 0:a.symbol)===e.symbol?"selected":""),onClick:t=>{1===t.detail?me(e):2===t.detail&&P(`/stock/${e.symbol}`)},onContextMenu:t=>V(t,e),initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:.05*t},children:[B.jsxs("div",{className:"stock-info",children:[B.jsx("div",{className:"stock-symbol",children:e.symbol}),B.jsx("div",{className:"stock-name",children:e.name}),B.jsxs("div",{className:"stock-volume",children:["Vol: ",e.volume]})]}),B.jsx("div",{className:"stock-price-info",children:B.jsx(mi,{price:e.price,change:e.change,changePercent:e.changePercent,size:"small"})}),B.jsx("div",{className:"stock-actions",children:B.jsx(Eo,{stockData:e,size:"small",variant:"simple",showText:!1})})]},e.symbol))]})})]}),B.jsxs(y.div,{className:"trading-card order-panel",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},children:[B.jsx("div",{className:"card-header",children:B.jsxs("h3",{className:"card-title",children:[B.jsx(dn,{className:"card-icon"}),"Place Order"]})}),B.jsx("div",{className:"card-content",children:a?B.jsxs("div",{className:"order-form",children:[B.jsxs("div",{className:"selected-stock",children:[B.jsxs("div",{className:"stock-details",children:[B.jsx("h4",{children:a.symbol}),B.jsx("p",{children:a.name})]}),B.jsx(mi,{price:a.price,change:a.change,changePercent:a.changePercent,size:"medium"})]}),B.jsxs("div",{className:"order-controls",children:[B.jsxs("div",{className:"transaction-type",children:[B.jsxs("button",{className:"type-btn "+("buy"===d?"active buy":""),onClick:()=>u("buy"),children:[B.jsx(vn,{size:16}),"BUY"]}),B.jsxs("button",{className:"type-btn "+("sell"===d?"active sell":""),onClick:()=>u("sell"),children:[B.jsx(yn,{size:16}),"SELL"]})]}),B.jsxs("div",{className:"order-type",children:[B.jsx("label",{children:"Order Type"}),B.jsxs("select",{value:i,onChange:e=>c(e.target.value),className:"order-select",children:[B.jsx("option",{value:"market",children:"Market Order"}),B.jsx("option",{value:"limit",children:"Limit Order"}),B.jsx("option",{value:"stop",children:"Stop Order"})]})]}),B.jsxs("div",{className:"quantity-control",children:[B.jsx("label",{children:"Quantity"}),B.jsxs("div",{className:"quantity-input",children:[B.jsx("button",{className:"qty-btn",onClick:()=>m(Math.max(1,h-1)),children:B.jsx(Vt,{size:14})}),B.jsx("input",{type:"number",value:h,onChange:e=>m(Math.max(1,parseInt(e.target.value)||1)),className:"qty-input",min:"1"}),B.jsx("button",{className:"qty-btn",onClick:()=>m(h+1),children:B.jsx(tn,{size:14})})]})]}),"market"!==i&&B.jsxs("div",{className:"price-control",children:[B.jsx("label",{children:"Price (₹)"}),B.jsx("input",{type:"number",value:p,onChange:e=>f(e.target.value),className:"price-input",placeholder:"Enter price",step:"0.01"})]}),B.jsxs("div",{className:"order-summary",children:[B.jsxs("div",{className:"summary-row",children:[B.jsx("span",{children:"Quantity:"}),B.jsxs("span",{children:[h," shares"]})]}),B.jsxs("div",{className:"summary-row",children:[B.jsx("span",{children:"Price:"}),B.jsx("span",{children:pe("market"===i?a.price:parseFloat(p)||0)})]}),B.jsxs("div",{className:"summary-row total",children:[B.jsx("span",{children:"Total:"}),B.jsx("span",{children:pe(("market"===i?a.price:parseFloat(p)||0)*h)})]})]}),B.jsxs("div",{className:"order-actions-grid",children:[B.jsx("button",{className:`place-order-btn ${d}`,onClick:async()=>{if(!a||!h)return;const e="market"===i?a.price:parseFloat(p),t=parseInt(h),n={symbol:a.symbol,name:a.name,price:e,quantity:t,orderType:i,source:"trading-page"};"buy"===d?Z(n.symbol,n.quantity,n.price,{name:n.name,orderType:n.orderType,source:n.source}):ee(n.symbol,n.quantity,n.price,{name:n.name,orderType:n.orderType,source:n.source}),m(1),f("")},disabled:!h||"market"!==i&&!p||x,children:x?B.jsxs(B.Fragment,{children:[B.jsx("div",{className:"loading-spinner sm"}),"Placing Order..."]}):"buy"===d?"Place Buy Order":"Place Sell Order"}),B.jsxs("button",{className:"enhanced-order-btn",onClick:()=>((e,t="buy")=>{C({...e,initialOrderType:t}),k(!0)})(a,d),disabled:!a,children:[B.jsx(dn,{size:16}),"Enhanced Order"]})]})]})]}):B.jsxs("div",{className:"no-stock-selected",children:[B.jsx(et,{size:48}),B.jsx("p",{children:"Select a stock to place an order"})]})})]}),B.jsxs(y.div,{className:"trading-card orders-panel",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},children:[B.jsx("div",{className:"card-header",children:B.jsxs("h3",{className:"card-title",children:[B.jsx(yt,{className:"card-icon"}),"Recent Orders"]})}),B.jsx("div",{className:"card-content",children:B.jsx("div",{className:"orders-list",children:[{id:1,symbol:"WIPRO",type:"BUY",quantity:50,price:420,status:"completed",time:"10:30 AM",total:21e3},{id:2,symbol:"BAJFINANCE",type:"SELL",quantity:25,price:6800,status:"completed",time:"11:45 AM",total:17e4},{id:3,symbol:"MARUTI",type:"BUY",quantity:10,price:9200,status:"pending",time:"12:15 PM",total:92e3},{id:4,symbol:"ASIANPAINT",type:"SELL",quantity:15,price:3100,status:"cancelled",time:"01:30 PM",total:46500}].map((e,t)=>B.jsxs(y.div,{className:"order-item",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:.05*t},children:[B.jsxs("div",{className:"order-info",children:[B.jsx("div",{className:"order-symbol",children:e.symbol}),B.jsxs("div",{className:"order-details",children:[B.jsx("span",{className:`order-type ${e.type.toLowerCase()}`,children:e.type}),B.jsxs("span",{className:"order-quantity",children:[e.quantity," shares"]}),B.jsx("span",{className:"order-time",children:e.time})]})]}),B.jsxs("div",{className:"order-price",children:[B.jsx("div",{className:"price-value",children:pe(e.price)}),B.jsx("div",{className:"total-value",children:pe(e.total)})]}),B.jsxs("div",{className:"order-status",children:["completed"===e.status&&B.jsx(ft,{className:"status-icon completed"}),"pending"===e.status&&B.jsx(yt,{className:"status-icon pending"}),"cancelled"===e.status&&B.jsx(wn,{className:"status-icon cancelled"}),B.jsx("span",{className:`status-text ${e.status}`,children:e.status})]})]},e.id))})})]})]}),B.jsx(Ci,{isOpen:N||_.isOpen,onClose:()=>{k(!1),z()},stockData:S||_.stockData,initialOrderType:(null==S?void 0:S.initialOrderType)||_.orderType,onOrderPlaced:()=>{k(!1),C(null),z()},onShowConfirmation:null}),B.jsx(Ro,{isOpen:W.isOpen,position:W.position,stockData:W.stockData,onClose:Y,onQuickBuy:U,onQuickSell:H,onViewChart:e=>q(e,"buy"),onAddToWatchlist:e=>{},onViewDetails:e=>{},hasHolding:!!W.stockData&&E.holdings.some(e=>e.symbol===W.stockData.symbol)}),B.jsx(Oo,{isOpen:G,onClose:Q,onConfirm:X,orderData:J,loading:K}),B.jsx(Lo,{stockData:O,isOpen:A,onClose:M,defaultQuantity:D,onSuccess:()=>{}})]})})},_o=n.createContext(),Fo=({children:e})=>{const[t,s]=n.useState(()=>{const e=localStorage.getItem("sidebarCollapsed");return null!==e?JSON.parse(e):window.innerWidth<=768}),[a,r]=n.useState(window.innerWidth<=768);n.useEffect(()=>{const e=()=>{const e=window.innerWidth<=768;r(e),e&&s(e=>e||(localStorage.setItem("sidebarCollapsed","true"),!0))};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const i={isCollapsed:t,setIsCollapsed:s,isMobile:a,toggleSidebar:()=>{s(e=>{const t=!e;return localStorage.setItem("sidebarCollapsed",JSON.stringify(t)),t})},expandSidebar:()=>{s(()=>(localStorage.setItem("sidebarCollapsed","false"),!1))},collapseSidebar:()=>{s(()=>(localStorage.setItem("sidebarCollapsed","true"),!0))}};return B.jsx(_o.Provider,{value:i,children:e})},Bo={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}};function zo(e){return(t={})=>{const n=t.width?String(t.width):e.defaultWidth;return e.formats[n]||e.formats[e.defaultWidth]}}const Uo={date:zo({formats:{full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},defaultWidth:"full"}),time:zo({formats:{full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},defaultWidth:"full"}),dateTime:zo({formats:{full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},defaultWidth:"full"})},Ho={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"};function $o(e){return(t,n)=>{let s;if("formatting"===((null==n?void 0:n.context)?String(n.context):"standalone")&&e.formattingValues){const t=e.defaultFormattingWidth||e.defaultWidth,a=(null==n?void 0:n.width)?String(n.width):t;s=e.formattingValues[a]||e.formattingValues[t]}else{const t=e.defaultWidth,a=(null==n?void 0:n.width)?String(n.width):e.defaultWidth;s=e.values[a]||e.values[t]}return s[e.argumentCallback?e.argumentCallback(t):t]}}const qo={ordinalNumber:(e,t)=>{const n=Number(e),s=n%100;if(s>20||s<10)switch(s%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},era:$o({values:{narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},defaultWidth:"wide"}),quarter:$o({values:{narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},defaultWidth:"wide",argumentCallback:e=>e-1}),month:$o({values:{narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},defaultWidth:"wide"}),day:$o({values:{narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},defaultWidth:"wide"}),dayPeriod:$o({values:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},defaultWidth:"wide",formattingValues:{narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},defaultFormattingWidth:"wide"})};function Wo(e){return(t,n={})=>{const s=n.width,a=s&&e.matchPatterns[s]||e.matchPatterns[e.defaultMatchWidth],r=t.match(a);if(!r)return null;const i=r[0],o=s&&e.parsePatterns[s]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(o)?function(e,t){for(let n=0;n<e.length;n++)if(t(e[n]))return n;return}(o,e=>e.test(i)):function(e,t){for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t(e[n]))return n;return}(o,e=>e.test(i));let c;c=e.valueCallback?e.valueCallback(l):l,c=n.valueCallback?n.valueCallback(c):c;return{value:c,rest:t.slice(i.length)}}}const Vo={ordinalNumber:(Yo={matchPattern:/^(\d+)(th|st|nd|rd)?/i,parsePattern:/\d+/i,valueCallback:e=>parseInt(e,10)},(e,t={})=>{const n=e.match(Yo.matchPattern);if(!n)return null;const s=n[0],a=e.match(Yo.parsePattern);if(!a)return null;let r=Yo.valueCallback?Yo.valueCallback(a[0]):a[0];return r=t.valueCallback?t.valueCallback(r):r,{value:r,rest:e.slice(s.length)}}),era:Wo({matchPatterns:{narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},defaultMatchWidth:"wide",parsePatterns:{any:[/^b/i,/^(a|c)/i]},defaultParseWidth:"any"}),quarter:Wo({matchPatterns:{narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},defaultMatchWidth:"wide",parsePatterns:{any:[/1/i,/2/i,/3/i,/4/i]},defaultParseWidth:"any",valueCallback:e=>e+1}),month:Wo({matchPatterns:{narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},defaultParseWidth:"any"}),day:Wo({matchPatterns:{narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},defaultMatchWidth:"wide",parsePatterns:{narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},defaultParseWidth:"any"}),dayPeriod:Wo({matchPatterns:{narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},defaultMatchWidth:"any",parsePatterns:{any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},defaultParseWidth:"any"})};var Yo;const Go={code:"en-US",formatDistance:(e,t,n)=>{let s;const a=Bo[e];return s="string"==typeof a?a:1===t?a.one:a.other.replace("{{count}}",t.toString()),(null==n?void 0:n.addSuffix)?n.comparison&&n.comparison>0?"in "+s:s+" ago":s},formatLong:Uo,formatRelative:(e,t,n,s)=>Ho[e],localize:qo,match:Vo,options:{weekStartsOn:0,firstWeekContainsDate:1}};let Jo={};function Ko(){return Jo}const Qo=6048e5,Xo=Symbol.for("constructDateFrom");function Zo(e,t){return"function"==typeof e?e(t):e&&"object"==typeof e&&Xo in e?e[Xo](t):e instanceof Date?new e.constructor(t):new Date(t)}function el(e,t){return Zo(t||e,e)}function tl(e){const t=el(e),n=new Date(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()));return n.setUTCFullYear(t.getFullYear()),+e-+n}function nl(e,t){const n=el(e,null==t?void 0:t.in);return n.setHours(0,0,0,0),n}function sl(e,t,n){const[s,a]=function(e,...t){const n=Zo.bind(null,e||t.find(e=>"object"==typeof e));return t.map(n)}(null==n?void 0:n.in,e,t),r=nl(s),i=nl(a),o=+r-tl(r),l=+i-tl(i);return Math.round((o-l)/864e5)}function al(e,t){const n=el(e,null==t?void 0:t.in),s=sl(n,function(e,t){const n=el(e,null==t?void 0:t.in);return n.setFullYear(n.getFullYear(),0,1),n.setHours(0,0,0,0),n}(n));return s+1}function rl(e,t){var n,s,a,r;const i=Ko(),o=(null==t?void 0:t.weekStartsOn)??(null==(s=null==(n=null==t?void 0:t.locale)?void 0:n.options)?void 0:s.weekStartsOn)??i.weekStartsOn??(null==(r=null==(a=i.locale)?void 0:a.options)?void 0:r.weekStartsOn)??0,l=el(e,null==t?void 0:t.in),c=l.getDay(),d=(c<o?7:0)+c-o;return l.setDate(l.getDate()-d),l.setHours(0,0,0,0),l}function il(e,t){return rl(e,{...t,weekStartsOn:1})}function ol(e,t){const n=el(e,null==t?void 0:t.in),s=n.getFullYear(),a=Zo(n,0);a.setFullYear(s+1,0,4),a.setHours(0,0,0,0);const r=il(a),i=Zo(n,0);i.setFullYear(s,0,4),i.setHours(0,0,0,0);const o=il(i);return n.getTime()>=r.getTime()?s+1:n.getTime()>=o.getTime()?s:s-1}function ll(e,t){const n=el(e,null==t?void 0:t.in),s=+il(n)-+function(e,t){const n=ol(e,t),s=Zo((null==t?void 0:t.in)||e,0);return s.setFullYear(n,0,4),s.setHours(0,0,0,0),il(s)}(n);return Math.round(s/Qo)+1}function cl(e,t){var n,s,a,r;const i=el(e,null==t?void 0:t.in),o=i.getFullYear(),l=Ko(),c=(null==t?void 0:t.firstWeekContainsDate)??(null==(s=null==(n=null==t?void 0:t.locale)?void 0:n.options)?void 0:s.firstWeekContainsDate)??l.firstWeekContainsDate??(null==(r=null==(a=l.locale)?void 0:a.options)?void 0:r.firstWeekContainsDate)??1,d=Zo((null==t?void 0:t.in)||e,0);d.setFullYear(o+1,0,c),d.setHours(0,0,0,0);const u=rl(d,t),h=Zo((null==t?void 0:t.in)||e,0);h.setFullYear(o,0,c),h.setHours(0,0,0,0);const m=rl(h,t);return+i>=+u?o+1:+i>=+m?o:o-1}function dl(e,t){const n=el(e,null==t?void 0:t.in),s=+rl(n,t)-+function(e,t){var n,s,a,r;const i=Ko(),o=(null==t?void 0:t.firstWeekContainsDate)??(null==(s=null==(n=null==t?void 0:t.locale)?void 0:n.options)?void 0:s.firstWeekContainsDate)??i.firstWeekContainsDate??(null==(r=null==(a=i.locale)?void 0:a.options)?void 0:r.firstWeekContainsDate)??1,l=cl(e,t),c=Zo((null==t?void 0:t.in)||e,0);return c.setFullYear(l,0,o),c.setHours(0,0,0,0),rl(c,t)}(n,t);return Math.round(s/Qo)+1}function ul(e,t){return(e<0?"-":"")+Math.abs(e).toString().padStart(t,"0")}const hl={y(e,t){const n=e.getFullYear(),s=n>0?n:1-n;return ul("yy"===t?s%100:s,t.length)},M(e,t){const n=e.getMonth();return"M"===t?String(n+1):ul(n+1,2)},d:(e,t)=>ul(e.getDate(),t.length),a(e,t){const n=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];default:return"am"===n?"a.m.":"p.m."}},h:(e,t)=>ul(e.getHours()%12||12,t.length),H:(e,t)=>ul(e.getHours(),t.length),m:(e,t)=>ul(e.getMinutes(),t.length),s:(e,t)=>ul(e.getSeconds(),t.length),S(e,t){const n=t.length,s=e.getMilliseconds();return ul(Math.trunc(s*Math.pow(10,n-3)),t.length)}},ml="midnight",pl="noon",fl="morning",gl="afternoon",yl="evening",vl="night",xl={G:function(e,t,n){const s=e.getFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(s,{width:"abbreviated"});case"GGGGG":return n.era(s,{width:"narrow"});default:return n.era(s,{width:"wide"})}},y:function(e,t,n){if("yo"===t){const t=e.getFullYear(),s=t>0?t:1-t;return n.ordinalNumber(s,{unit:"year"})}return hl.y(e,t)},Y:function(e,t,n,s){const a=cl(e,s),r=a>0?a:1-a;if("YY"===t){return ul(r%100,2)}return"Yo"===t?n.ordinalNumber(r,{unit:"year"}):ul(r,t.length)},R:function(e,t){return ul(ol(e),t.length)},u:function(e,t){return ul(e.getFullYear(),t.length)},Q:function(e,t,n){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"Q":return String(s);case"QQ":return ul(s,2);case"Qo":return n.ordinalNumber(s,{unit:"quarter"});case"QQQ":return n.quarter(s,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(s,{width:"narrow",context:"formatting"});default:return n.quarter(s,{width:"wide",context:"formatting"})}},q:function(e,t,n){const s=Math.ceil((e.getMonth()+1)/3);switch(t){case"q":return String(s);case"qq":return ul(s,2);case"qo":return n.ordinalNumber(s,{unit:"quarter"});case"qqq":return n.quarter(s,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(s,{width:"narrow",context:"standalone"});default:return n.quarter(s,{width:"wide",context:"standalone"})}},M:function(e,t,n){const s=e.getMonth();switch(t){case"M":case"MM":return hl.M(e,t);case"Mo":return n.ordinalNumber(s+1,{unit:"month"});case"MMM":return n.month(s,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(s,{width:"narrow",context:"formatting"});default:return n.month(s,{width:"wide",context:"formatting"})}},L:function(e,t,n){const s=e.getMonth();switch(t){case"L":return String(s+1);case"LL":return ul(s+1,2);case"Lo":return n.ordinalNumber(s+1,{unit:"month"});case"LLL":return n.month(s,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(s,{width:"narrow",context:"standalone"});default:return n.month(s,{width:"wide",context:"standalone"})}},w:function(e,t,n,s){const a=dl(e,s);return"wo"===t?n.ordinalNumber(a,{unit:"week"}):ul(a,t.length)},I:function(e,t,n){const s=ll(e);return"Io"===t?n.ordinalNumber(s,{unit:"week"}):ul(s,t.length)},d:function(e,t,n){return"do"===t?n.ordinalNumber(e.getDate(),{unit:"date"}):hl.d(e,t)},D:function(e,t,n){const s=al(e);return"Do"===t?n.ordinalNumber(s,{unit:"dayOfYear"}):ul(s,t.length)},E:function(e,t,n){const s=e.getDay();switch(t){case"E":case"EE":case"EEE":return n.day(s,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(s,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(s,{width:"short",context:"formatting"});default:return n.day(s,{width:"wide",context:"formatting"})}},e:function(e,t,n,s){const a=e.getDay(),r=(a-s.weekStartsOn+8)%7||7;switch(t){case"e":return String(r);case"ee":return ul(r,2);case"eo":return n.ordinalNumber(r,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});default:return n.day(a,{width:"wide",context:"formatting"})}},c:function(e,t,n,s){const a=e.getDay(),r=(a-s.weekStartsOn+8)%7||7;switch(t){case"c":return String(r);case"cc":return ul(r,t.length);case"co":return n.ordinalNumber(r,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});default:return n.day(a,{width:"wide",context:"standalone"})}},i:function(e,t,n){const s=e.getDay(),a=0===s?7:s;switch(t){case"i":return String(a);case"ii":return ul(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(s,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(s,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(s,{width:"short",context:"formatting"});default:return n.day(s,{width:"wide",context:"formatting"})}},a:function(e,t,n){const s=e.getHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(s,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(s,{width:"narrow",context:"formatting"});default:return n.dayPeriod(s,{width:"wide",context:"formatting"})}},b:function(e,t,n){const s=e.getHours();let a;switch(a=12===s?pl:0===s?ml:s/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(e,t,n){const s=e.getHours();let a;switch(a=s>=17?yl:s>=12?gl:s>=4?fl:vl,t){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(e,t,n){if("ho"===t){let t=e.getHours()%12;return 0===t&&(t=12),n.ordinalNumber(t,{unit:"hour"})}return hl.h(e,t)},H:function(e,t,n){return"Ho"===t?n.ordinalNumber(e.getHours(),{unit:"hour"}):hl.H(e,t)},K:function(e,t,n){const s=e.getHours()%12;return"Ko"===t?n.ordinalNumber(s,{unit:"hour"}):ul(s,t.length)},k:function(e,t,n){let s=e.getHours();return 0===s&&(s=24),"ko"===t?n.ordinalNumber(s,{unit:"hour"}):ul(s,t.length)},m:function(e,t,n){return"mo"===t?n.ordinalNumber(e.getMinutes(),{unit:"minute"}):hl.m(e,t)},s:function(e,t,n){return"so"===t?n.ordinalNumber(e.getSeconds(),{unit:"second"}):hl.s(e,t)},S:function(e,t){return hl.S(e,t)},X:function(e,t,n){const s=e.getTimezoneOffset();if(0===s)return"Z";switch(t){case"X":return jl(s);case"XXXX":case"XX":return wl(s);default:return wl(s,":")}},x:function(e,t,n){const s=e.getTimezoneOffset();switch(t){case"x":return jl(s);case"xxxx":case"xx":return wl(s);default:return wl(s,":")}},O:function(e,t,n){const s=e.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+bl(s,":");default:return"GMT"+wl(s,":")}},z:function(e,t,n){const s=e.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+bl(s,":");default:return"GMT"+wl(s,":")}},t:function(e,t,n){return ul(Math.trunc(+e/1e3),t.length)},T:function(e,t,n){return ul(+e,t.length)}};function bl(e,t=""){const n=e>0?"-":"+",s=Math.abs(e),a=Math.trunc(s/60),r=s%60;return 0===r?n+String(a):n+String(a)+t+ul(r,2)}function jl(e,t){if(e%60==0){return(e>0?"-":"+")+ul(Math.abs(e)/60,2)}return wl(e,t)}function wl(e,t=""){const n=e>0?"-":"+",s=Math.abs(e);return n+ul(Math.trunc(s/60),2)+t+ul(s%60,2)}const Nl=(e,t)=>{switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});default:return t.date({width:"full"})}},kl=(e,t)=>{switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});default:return t.time({width:"full"})}},Sl={p:kl,P:(e,t)=>{const n=e.match(/(P+)(p+)?/)||[],s=n[1],a=n[2];if(!a)return Nl(e,t);let r;switch(s){case"P":r=t.dateTime({width:"short"});break;case"PP":r=t.dateTime({width:"medium"});break;case"PPP":r=t.dateTime({width:"long"});break;default:r=t.dateTime({width:"full"})}return r.replace("{{date}}",Nl(s,t)).replace("{{time}}",kl(a,t))}},Cl=/^D+$/,Tl=/^Y+$/,Pl=["D","DD","YY","YYYY"];function El(e){return!(!((t=e)instanceof Date||"object"==typeof t&&"[object Date]"===Object.prototype.toString.call(t))&&"number"!=typeof e||isNaN(+el(e)));var t}const Ll=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Il=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,Al=/^'([^]*?)'?$/,Ol=/''/g,Dl=/[a-zA-Z]/;function Rl(e,t,n){var s,a,r,i,o,l,c,d;const u=Ko(),h=(null==n?void 0:n.locale)??u.locale??Go,m=(null==n?void 0:n.firstWeekContainsDate)??(null==(a=null==(s=null==n?void 0:n.locale)?void 0:s.options)?void 0:a.firstWeekContainsDate)??u.firstWeekContainsDate??(null==(i=null==(r=u.locale)?void 0:r.options)?void 0:i.firstWeekContainsDate)??1,p=(null==n?void 0:n.weekStartsOn)??(null==(l=null==(o=null==n?void 0:n.locale)?void 0:o.options)?void 0:l.weekStartsOn)??u.weekStartsOn??(null==(d=null==(c=u.locale)?void 0:c.options)?void 0:d.weekStartsOn)??0,f=el(e,null==n?void 0:n.in);if(!El(f))throw new RangeError("Invalid time value");let g=t.match(Il).map(e=>{const t=e[0];if("p"===t||"P"===t){return(0,Sl[t])(e,h.formatLong)}return e}).join("").match(Ll).map(e=>{if("''"===e)return{isToken:!1,value:"'"};const t=e[0];if("'"===t)return{isToken:!1,value:Ml(e)};if(xl[t])return{isToken:!0,value:e};if(t.match(Dl))throw new RangeError("Format string contains an unescaped latin alphabet character `"+t+"`");return{isToken:!1,value:e}});h.localize.preprocessor&&(g=h.localize.preprocessor(f,g));const y={firstWeekContainsDate:m,weekStartsOn:p,locale:h};return g.map(s=>{if(!s.isToken)return s.value;const a=s.value;(!(null==n?void 0:n.useAdditionalWeekYearTokens)&&function(e){return Tl.test(e)}(a)||!(null==n?void 0:n.useAdditionalDayOfYearTokens)&&function(e){return Cl.test(e)}(a))&&function(e,t,n){const s=function(e,t,n){const s="Y"===e[0]?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${t}\`) for formatting ${s} to the input \`${n}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}(e,t,n);if(Pl.includes(e))throw new RangeError(s)}(a,t,String(e));return(0,xl[a[0]])(f,a,h.localize,y)}).join("")}function Ml(e){const t=e.match(Al);return t?t[1].replace(Ol,"'"):e}function _l(e,t,n){const s=Object.assign({},Ko()),a=function(e,t,n){return new Intl.DateTimeFormat(n?[n.code,"en-US"]:void 0,{timeZone:t,timeZoneName:e})}(e,n.timeZone,n.locale??s.locale);return"formatToParts"in a?function(e,t){const n=e.formatToParts(t);for(let s=n.length-1;s>=0;--s)if("timeZoneName"===n[s].type)return n[s].value;return}(a,t):function(e,t){const n=e.format(t).replace(/\u200E/g,""),s=/ [\w-+ ]+$/.exec(n);return s?s[0].substr(1):""}(a,t)}function Fl(e,t){const n=function(e){zl[e]||(zl[e]=Hl?new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}));return zl[e]}(t);return"formatToParts"in n?function(e,t){try{const n=e.formatToParts(t),s=[];for(let e=0;e<n.length;e++){const t=Bl[n[e].type];void 0!==t&&(s[t]=parseInt(n[e].value,10))}return s}catch(n){if(n instanceof RangeError)return[NaN];throw n}}(n,e):function(e,t){const n=e.format(t),s=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(n);return[parseInt(s[3],10),parseInt(s[1],10),parseInt(s[2],10),parseInt(s[4],10),parseInt(s[5],10),parseInt(s[6],10)]}(n,e)}const Bl={year:0,month:1,day:2,hour:3,minute:4,second:5};const zl={},Ul=new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:"America/New_York",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z")),Hl="06/25/2014, 00:00:00"===Ul||"‎06‎/‎25‎/‎2014‎ ‎00‎:‎00‎:‎00"===Ul;function $l(e,t,n,s,a,r,i){const o=new Date(0);return o.setUTCFullYear(e,t,n),o.setUTCHours(s,a,r,i),o}const ql=36e5,Wl={timezone:/([Z+-].*)$/,timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-])(\d{2}):?(\d{2})$/};function Vl(e,t,n){if(!e)return 0;let s,a,r=Wl.timezoneZ.exec(e);if(r)return 0;if(r=Wl.timezoneHH.exec(e),r)return s=parseInt(r[1],10),Gl(s)?-s*ql:NaN;if(r=Wl.timezoneHHMM.exec(e),r){s=parseInt(r[2],10);const e=parseInt(r[3],10);return Gl(s,e)?(a=Math.abs(s)*ql+6e4*e,"+"===r[1]?-a:a):NaN}if(function(e){if(Jl[e])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:e}),Jl[e]=!0,!0}catch(t){return!1}}(e)){t=new Date(t||Date.now());const s=n?t:function(e){return $l(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())}(t),a=Yl(s,e),r=n?a:function(e,t,n){const s=e.getTime();let a=s-t;const r=Yl(new Date(a),n);if(t===r)return t;a-=r-t;const i=Yl(new Date(a),n);if(r===i)return r;return Math.max(r,i)}(t,a,e);return-r}return NaN}function Yl(e,t){const n=Fl(e,t),s=$l(n[0],n[1]-1,n[2],n[3]%24,n[4],n[5],0).getTime();let a=e.getTime();const r=a%1e3;return a-=r>=0?r:1e3+r,s-a}function Gl(e,t){return-23<=e&&e<=23&&(null==t||0<=t&&t<=59)}const Jl={};const Kl={X:function(e,t,n){const s=Ql(n.timeZone,e);if(0===s)return"Z";switch(t){case"X":return ec(s);case"XXXX":case"XX":return Zl(s);default:return Zl(s,":")}},x:function(e,t,n){const s=Ql(n.timeZone,e);switch(t){case"x":return ec(s);case"xxxx":case"xx":return Zl(s);default:return Zl(s,":")}},O:function(e,t,n){const s=Ql(n.timeZone,e);switch(t){case"O":case"OO":case"OOO":return"GMT"+function(e,t=""){const n=e>0?"-":"+",s=Math.abs(e),a=Math.floor(s/60),r=s%60;if(0===r)return n+String(a);return n+String(a)+t+Xl(r,2)}(s,":");default:return"GMT"+Zl(s,":")}},z:function(e,t,n){switch(t){case"z":case"zz":case"zzz":return _l("short",e,n);default:return _l("long",e,n)}}};function Ql(e,t){const n=e?Vl(e,t,!0)/6e4:(null==t?void 0:t.getTimezoneOffset())??0;if(Number.isNaN(n))throw new RangeError("Invalid time zone specified: "+e);return n}function Xl(e,t){const n=e<0?"-":"";let s=Math.abs(e).toString();for(;s.length<t;)s="0"+s;return n+s}function Zl(e,t=""){const n=e>0?"-":"+",s=Math.abs(e);return n+Xl(Math.floor(s/60),2)+t+Xl(Math.floor(s%60),2)}function ec(e,t){if(e%60==0){return(e>0?"-":"+")+Xl(Math.abs(e)/60,2)}return Zl(e,t)}function tc(e){const t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return t.setUTCFullYear(e.getFullYear()),+e-+t}const nc=36e5,sc=6e4,ac={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,plainTime:/:/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/};function rc(e,t={}){if(arguments.length<1)throw new TypeError("1 argument required, but only "+arguments.length+" present");if(null===e)return new Date(NaN);const n=null==t.additionalDigits?2:Number(t.additionalDigits);if(2!==n&&1!==n&&0!==n)throw new RangeError("additionalDigits must be 0, 1 or 2");if(e instanceof Date||"object"==typeof e&&"[object Date]"===Object.prototype.toString.call(e))return new Date(e.getTime());if("number"==typeof e||"[object Number]"===Object.prototype.toString.call(e))return new Date(e);if("[object String]"!==Object.prototype.toString.call(e))return new Date(NaN);const s=function(e){const t={};let n,s=ac.dateTimePattern.exec(e);s?(t.date=s[1],n=s[3]):(s=ac.datePattern.exec(e),s?(t.date=s[1],n=s[2]):(t.date=null,n=e));if(n){const e=ac.timeZone.exec(n);e?(t.time=n.replace(e[1],""),t.timeZone=e[1].trim()):t.time=n}return t}(e),{year:a,restDateString:r}=function(e,t){if(e){const n=ac.YYY[t],s=ac.YYYYY[t];let a=ac.YYYY.exec(e)||s.exec(e);if(a){const t=a[1];return{year:parseInt(t,10),restDateString:e.slice(t.length)}}if(a=ac.YY.exec(e)||n.exec(e),a){const t=a[1];return{year:100*parseInt(t,10),restDateString:e.slice(t.length)}}}return{year:null}}(s.date,n),i=function(e,t){if(null===t)return null;let n,s,a;if(!e||!e.length)return n=new Date(0),n.setUTCFullYear(t),n;let r=ac.MM.exec(e);if(r)return n=new Date(0),s=parseInt(r[1],10)-1,dc(t,s)?(n.setUTCFullYear(t,s),n):new Date(NaN);if(r=ac.DDD.exec(e),r){n=new Date(0);const e=parseInt(r[1],10);return function(e,t){if(t<1)return!1;const n=cc(e);if(n&&t>366)return!1;if(!n&&t>365)return!1;return!0}(t,e)?(n.setUTCFullYear(t,0,e),n):new Date(NaN)}if(r=ac.MMDD.exec(e),r){n=new Date(0),s=parseInt(r[1],10)-1;const e=parseInt(r[2],10);return dc(t,s,e)?(n.setUTCFullYear(t,s,e),n):new Date(NaN)}if(r=ac.Www.exec(e),r)return a=parseInt(r[1],10)-1,uc(a)?ic(t,a):new Date(NaN);if(r=ac.WwwD.exec(e),r){a=parseInt(r[1],10)-1;const e=parseInt(r[2],10)-1;return uc(a,e)?ic(t,a,e):new Date(NaN)}return null}(r,a);if(null===i||isNaN(i.getTime()))return new Date(NaN);if(i){const e=i.getTime();let n,a=0;if(s.time&&(a=function(e){let t,n,s=ac.HH.exec(e);if(s)return t=parseFloat(s[1].replace(",",".")),hc(t)?t%24*nc:NaN;if(s=ac.HHMM.exec(e),s)return t=parseInt(s[1],10),n=parseFloat(s[2].replace(",",".")),hc(t,n)?t%24*nc+n*sc:NaN;if(s=ac.HHMMSS.exec(e),s){t=parseInt(s[1],10),n=parseInt(s[2],10);const e=parseFloat(s[3].replace(",","."));return hc(t,n,e)?t%24*nc+n*sc+1e3*e:NaN}return null}(s.time),null===a||isNaN(a)))return new Date(NaN);if(s.timeZone||t.timeZone){if(n=Vl(s.timeZone||t.timeZone,new Date(e+a)),isNaN(n))return new Date(NaN)}else n=tc(new Date(e+a)),n=tc(new Date(e+a+n));return new Date(e+a+n)}return new Date(NaN)}function ic(e,t,n){t=t||0,n=n||0;const s=new Date(0);s.setUTCFullYear(e,0,4);const a=7*t+n+1-(s.getUTCDay()||7);return s.setUTCDate(s.getUTCDate()+a),s}const oc=[31,28,31,30,31,30,31,31,30,31,30,31],lc=[31,29,31,30,31,30,31,31,30,31,30,31];function cc(e){return e%400==0||e%4==0&&e%100!=0}function dc(e,t,n){if(t<0||t>11)return!1;if(null!=n){if(n<1)return!1;const s=cc(e);if(s&&n>lc[t])return!1;if(!s&&n>oc[t])return!1}return!0}function uc(e,t){return!(e<0||e>52)&&(null==t||!(t<0||t>6))}function hc(e,t,n){return!(e<0||e>=25)&&((null==t||!(t<0||t>=60))&&(null==n||!(n<0||n>=60)))}const mc=/([xXOz]+)|''|'(''|[^'])+('|$)/g;function pc(e,t,n,s){return function(e,t,n={}){const s=(t=String(t)).match(mc);if(s){const a=rc(n.originalDate||e,n);t=s.reduce(function(e,t){if("'"===t[0])return e;const s=e.indexOf(t),r="'"===e[s-1],i=e.replace(t,"'"+Kl[t[0]](a,t,n)+"'");return r?i.substring(0,s-1)+i.substring(s+1):i},t)}return Rl(e,t,n)}(function(e,t,n){const s=Vl(t,e=rc(e,n),!0),a=new Date(e.getTime()-s),r=new Date(0);return r.setFullYear(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate()),r.setHours(a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds()),r}(e,t,{timeZone:(s={...s,timeZone:t,originalDate:e}).timeZone}),n,s)}const fc="https://s89-satya-capstone-tradebro.onrender.com";const gc=new class{constructor(){this.intervals=new Map,this.subscribers=new Map,this.lastUpdateTimes=new Map}startLiveUpdates(e,t){this.stopLiveUpdates(e),this.subscribers.set(e,t),this.fetchLatestCandle(e);const n=this.getSmartInterval(e),s=setInterval(()=>{this.fetchLatestCandle(e)},n);return this.intervals.set(e,s),e}getSmartInterval(e){const t=new Date;let n,s,a=!1;if(e.endsWith(".NS")||e.endsWith(".BO")){const e=pc(t,"Asia/Kolkata","HH:mm");n=parseInt(e.split(":")[0],10),s=parseInt(e.split(":")[1],10),(9===n&&s>=15||n>9&&n<15||15===n&&s<=30)&&(a=!0)}else{const e=pc(t,"America/New_York","HH:mm");n=parseInt(e.split(":")[0],10),s=parseInt(e.split(":")[1],10),(9===n&&s>=30||n>9&&n<16)&&(a=!0)}return a?15e3:n>=8&&n<9||n>16&&n<=18?6e4:3e5}stopLiveUpdates(e){const t=this.intervals.get(e);t&&(clearInterval(t),this.intervals.delete(e),this.subscribers.delete(e),this.lastUpdateTimes.delete(e))}stopAllUpdates(){this.intervals.forEach(e=>{clearInterval(e)}),this.intervals.clear(),this.subscribers.clear(),this.lastUpdateTimes.clear()}async fetchLatestCandle(e){try{const t=await Wa.get(`${fc}/api/live-charts/latest/${e}`,{timeout:1e4});if(t.data.success&&t.data.latest){const n=t.data.latest,s=this.subscribers.get(e),a=this.lastUpdateTimes.get(e),r=n.time;!a||r>a?(this.lastUpdateTimes.set(e,r),s&&s({type:"update",data:n,marketOpen:t.data.marketOpen,exchange:t.data.exchange,timestamp:t.data.timestamp,symbol:e})):s&&s({type:"price_update",data:n,marketOpen:t.data.marketOpen,exchange:t.data.exchange,timestamp:t.data.timestamp,symbol:e})}else if(!t.data.success)throw new Error(t.data.message||`API error for ${e}`)}catch(t){const n=this.subscribers.get(e);n&&n({type:"error",error:t.message,symbol:e})}}async fetchInitialData(e,t){try{const n=await Wa.get(`${fc}/api/live-charts/historical/${e}`,{params:{period:t},timeout:15e3});if(n.data.success)return{success:!0,data:n.data.data,latest:n.data.latest,marketOpen:n.data.marketOpen,exchange:n.data.exchange,count:n.data.data.length};throw new Error(n.data.message||"Failed to fetch initial historical data")}catch(n){return{success:!1,error:n.message,data:[]}}}async checkMarketStatus(e="NSE"){try{return(await Wa.get(`${fc}/api/live-charts/market-status/${e}`,{timeout:5e3})).data}catch(t){return{success:!1,marketOpen:!1,exchange:e.toUpperCase(),error:t.message}}}getActiveSymbols(){return Array.from(this.subscribers.keys())}isTracking(e){return this.subscribers.has(e)}getUpdateIntervalId(e){return this.intervals.get(e)}startBatchLiveUpdates(e,t,n=6e4){const s=`batch_${e.sort().join("_")}`;this.stopLiveUpdates(s),this.subscribers.set(s,t),this.fetchBatchCandles(e).then(n=>{n.success?t({type:"batch_update",data:n.results,timestamp:n.timestamp,marketOpen:n.marketOpen,exchange:n.exchange,symbols:e}):t({type:"error",error:n.error,symbols:e})});const a=setInterval(()=>{this.fetchBatchCandles(e).then(n=>{n.success?t({type:"batch_update",data:n.results,timestamp:n.timestamp,marketOpen:n.marketOpen,exchange:n.exchange,symbols:e}):t({type:"error",error:n.error,symbols:e})})},n);return this.intervals.set(s,a),s}async fetchBatchCandles(e){try{if(0===e.length)return{success:!0,results:[],count:0};const t=await Wa.post(`${fc}/api/live-charts/batch`,{symbols:e},{timeout:15e3});if(t.data.success)return{success:!0,results:t.data.results,timestamp:t.data.timestamp,marketOpen:t.data.marketOpen,exchange:t.data.exchange};throw new Error(t.data.message||"Batch fetch failed")}catch(t){return{success:!1,error:t.message,results:[]}}}};"undefined"!=typeof window&&window.addEventListener("beforeunload",()=>{gc.stopAllUpdates()});const yc=({data:e=[],symbol:t="RELIANCE.NS",timeframe:s="1D",chartType:a="candlestick",theme:r="dark",onRefresh:i,loading:o=!1,height:l=500,enableLiveUpdates:c=!0})=>{const d=n.useRef(),u=n.useRef(),h=n.useRef(),m=n.useRef(),p=n.useRef(),f=n.useRef(),[g,v]=n.useState(!1),[x,b]=n.useState(!0);n.useState({sma:!1,ema:!1,rsi:!1,macd:!1});const[j,w]=n.useState(c&&"1D"===s),[E,L]=n.useState(null),[I,A]=n.useState(!1),[O,D]=n.useState(null),[R,M]=n.useState(null),_=e=>{if(!u.current)return;const{type:t,data:n,marketOpen:s,error:r}=e;r||(A(s),L(new Date),"update"===t&&n?(h.current&&"candlestick"===a?h.current.update(n):m.current&&"line"===a?m.current.update({time:n.time,value:n.close}):p.current&&"area"===a&&p.current.update({time:n.time,value:n.close}),x&&f.current&&n.volume&&f.current.update({time:n.time,value:n.volume,color:n.close>=n.open?"#26a69a":"#ef5350"}),D(n.close),M({direction:"update",timestamp:Date.now()}),setTimeout(()=>M(null),1e3)):"price_update"===t&&n&&(h.current&&"candlestick"===a&&h.current.update(n),D(n.close)))};n.useEffect(()=>{if(!d.current)return;const e=N(d.current,{layout:{background:{type:P.Solid,color:"dark"===r?"#0F172A":"#FFFFFF"},textColor:"dark"===r?"#F8FAFC":"#1E293B",fontSize:12,fontFamily:"Inter, -apple-system, BlinkMacSystemFont, sans-serif"},grid:{vertLines:{color:"dark"===r?"#1E293B":"#E2E8F0",style:1},horzLines:{color:"dark"===r?"#1E293B":"#E2E8F0",style:1}},crosshair:{mode:1,vertLine:{color:"dark"===r?"#64748B":"#475569",width:1,style:3},horzLine:{color:"dark"===r?"#64748B":"#475569",width:1,style:3}},priceScale:{borderColor:"dark"===r?"#334155":"#CBD5E1",textColor:"dark"===r?"#94A3B8":"#64748B"},timeScale:{borderColor:"dark"===r?"#334155":"#CBD5E1",textColor:"dark"===r?"#94A3B8":"#64748B",timeVisible:!0,secondsVisible:!1},watermark:{visible:!0,fontSize:48,horzAlign:"center",vertAlign:"center",color:"dark"===r?"rgba(248, 250, 252, 0.05)":"rgba(30, 41, 59, 0.05)",text:t},rightPriceScale:{scaleMargins:{top:.1,bottom:x?.4:.1}},width:d.current.clientWidth,height:g?window.innerHeight-100:l});u.current=e;try{"candlestick"===a?h.current=e.addSeries(k,{upColor:"#10B981",downColor:"#EF4444",borderDownColor:"#EF4444",borderUpColor:"#10B981",wickDownColor:"#EF4444",wickUpColor:"#10B981"}):"line"===a?m.current=e.addSeries(S,{color:"#3B82F6",lineWidth:2,lineStyle:0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4}):"area"===a&&(p.current=e.addSeries(C,{topColor:"rgba(59, 130, 246, 0.4)",bottomColor:"rgba(59, 130, 246, 0.0)",lineColor:"#3B82F6",lineWidth:2}))}catch(s){}x&&(f.current=e.addSeries(T,{color:"dark"===r?"#475569":"#94A3B8",priceFormat:{type:"volume"},priceScaleId:"volume",scaleMargins:{top:.7,bottom:0}}),e.priceScale("volume").applyOptions({scaleMargins:{top:.7,bottom:0}}));const n=()=>{u.current&&d.current&&u.current.applyOptions({width:d.current.clientWidth,height:g?window.innerHeight-100:l})};return window.addEventListener("resize",n),()=>{window.removeEventListener("resize",n),u.current&&u.current.remove()}},[a,r,x,g,l]),n.useEffect(()=>{if(!d.current)return;const e=new ResizeObserver(e=>{for(let t of e)if(u.current){const{width:e}=t.contentRect;u.current.applyOptions({width:e,height:g?window.innerHeight-100:l}),u.current.timeScale().fitContent()}});return e.observe(d.current),()=>{e.disconnect()}},[g,l]),n.useEffect(()=>{if(e&&0!==e.length)try{const t=e=>{if(!e)return(new Date).toISOString().split("T")[0];if("number"==typeof e)return e;if("string"==typeof e){const t=new Date(e);if(isNaN(t.getTime())){return e.split(" ")[0]||(new Date).toISOString().split("T")[0]}return t.toISOString().split("T")[0]}return(new Date).toISOString().split("T")[0]},n=e.map(e=>({time:t(e.time||e.date),open:parseFloat(e.open),high:parseFloat(e.high),low:parseFloat(e.low),close:parseFloat(e.close),value:parseFloat(e.close)})),s=e.map(e=>({time:t(e.time||e.date),value:parseInt(e.volume||0),color:e.close>=e.open?"#10B981":"#EF4444"})),r=[],i=new Set;n.sort((e,t)=>new Date(e.time)-new Date(t.time)).forEach(e=>{i.has(e.time)||(i.add(e.time),r.push(e))});const o=[],l=new Set;s.sort((e,t)=>new Date(e.time)-new Date(t.time)).forEach(e=>{l.has(e.time)||(l.add(e.time),o.push(e))}),"candlestick"===a&&h.current?h.current.setData(r):"line"===a&&m.current?m.current.setData(r):"area"===a&&p.current&&p.current.setData(r),x&&f.current&&o.length>0&&f.current.setData(o),u.current&&u.current.timeScale().fitContent()}catch(t){}},[e,a,x]),n.useEffect(()=>{if("1D"===s)return j?(gc.startLiveUpdates(t,_),gc.checkMarketStatus(t.includes(".NS")?"NSE":"NASDAQ").then(e=>{A(e.marketOpen)})):gc.stopLiveUpdates(t),()=>{gc.stopLiveUpdates(t)};j&&(w(!1),gc.stopLiveUpdates(t))},[j,t,s]),n.useEffect(()=>(gc.stopLiveUpdates(t),"1D"===s&&c?(w(!0),gc.startLiveUpdates(t,_)):w(!1),()=>{gc.stopLiveUpdates(t)}),[t,s]),n.useEffect(()=>{const e=e=>{"Escape"===e.key&&g&&F(),"f"!==e.key&&"F"!==e.key||(e.ctrlKey||e.metaKey)&&(e.preventDefault(),F())};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e),g&&(document.body.style.overflow="",document.body.classList.remove("chart-fullscreen-active"))}},[g]);const F=()=>{const e=!g;v(e),e?(document.body.style.overflow="hidden",document.body.style.position="fixed",document.body.style.width="100%",document.body.style.height="100%",document.body.style.top="0",document.body.style.left="0",document.body.classList.add("chart-fullscreen-active"),document.documentElement.style.overflow="hidden"):(document.body.style.overflow="",document.body.style.position="",document.body.style.width="",document.body.style.height="",document.body.style.top="",document.body.style.left="",document.body.classList.remove("chart-fullscreen-active"),document.documentElement.style.overflow=""),setTimeout(()=>{if(u.current&&d.current){const t=e?window.innerWidth:d.current.clientWidth,n=e?window.innerHeight-d.current.offsetTop-60:l;u.current.applyOptions({width:t,height:n}),u.current.timeScale().fitContent()}},150)};return B.jsxs(y.div,{className:"tradingview-chart-container "+(g?"fullscreen":""),initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.5},children:[B.jsxs("div",{className:"chart-header",children:[B.jsxs("div",{className:"chart-title",children:[B.jsxs("h3",{children:[t," - ",s]}),B.jsx("span",{className:"chart-type",children:a.charAt(0).toUpperCase()+a.slice(1)}),j&&B.jsxs("div",{className:"live-indicators",children:[O&&B.jsxs("span",{className:"live-price "+(R?`price-${R.direction}`:""),children:["₹",O.toFixed(2)]}),B.jsxs("span",{className:"market-status "+(I?"open":"closed"),children:[B.jsx(et,{size:14,className:"status-icon"}),I?"Market Open":"Market Closed"]}),E&&B.jsxs("span",{className:"last-update",children:["Updated: ",E.toLocaleTimeString()]})]})]}),B.jsxs("div",{className:"chart-controls",children:[B.jsx("button",{className:"chart-control-btn "+(x?"active":""),onClick:()=>{b(!x)},title:"Toggle Volume Display",children:"📊"}),B.jsx("button",{className:"chart-control-btn",onClick:i,disabled:o,title:"Refresh Chart Data",children:"🔄"}),"1D"===s&&c&&B.jsx("button",{onClick:()=>{j?(gc.stopLiveUpdates(t),w(!1)):(gc.startLiveUpdates(t,_,5e3),w(!0))},className:"chart-control-btn "+(j?"live-active":""),title:j?"Stop Live Updates":"Start Live Updates",children:j?"⏸️":"▶️"}),B.jsx("button",{className:"chart-control-btn",onClick:()=>{if(u.current){const e=d.current.querySelector("canvas");if(e){const n=document.createElement("a");n.download=`${t}_${s}_chart.png`,n.href=e.toDataURL(),n.click()}}},title:"Download Chart as PNG",children:"💾"}),B.jsx("button",{className:"chart-control-btn "+(g?"fullscreen-active":""),onClick:F,title:g?"Exit Fullscreen (Esc)":"Enter Fullscreen (F)",children:g?"🔲":"⛶"})]})]}),B.jsxs("div",{ref:d,className:"chart-wrapper",style:{position:"relative",width:"100%",height:g?"100%":`${l}px`,flex:g?"1":"none"},children:[o&&B.jsx("div",{className:"chart-loading-overlay",children:B.jsxs("div",{className:"loading-content",children:[B.jsx(nn,{size:32,className:"animate-spin"}),B.jsx("p",{children:"Loading chart data..."})]})}),0===e.length&&!o&&B.jsx("div",{className:"chart-empty-overlay",children:B.jsxs("div",{className:"empty-content",children:[B.jsx("p",{children:"No chart data available"}),B.jsxs("button",{onClick:i,className:"btn-primary",children:[B.jsx(nn,{size:16}),"Refresh"]})]})})]}),B.jsx("div",{className:"chart-footer",children:B.jsxs("div",{className:"chart-info",children:[B.jsxs("span",{children:["Data Points: ",e.length]}),B.jsx("span",{children:"•"}),B.jsxs("span",{children:["Last Updated: ",(new Date).toLocaleTimeString()]})]})})]})},vc=({onStockSelect:e,selectedStock:t,className:s="",popularStocks:a,onUpdatePopularStocks:r})=>{const[i,o]=n.useState(""),[l,c]=n.useState([]),[d,u]=n.useState(!1);n.useState(!1);const[h,m]=n.useState("all");n.useState(!1);const p=n.useRef(null),f=((e,t)=>{const[s,a]=n.useState(e);return n.useEffect(()=>{const n=setTimeout(()=>{a(e)},t);return()=>{clearTimeout(n)}},[e,t]),s})(i,300),[v,x]=n.useState(a||[{symbol:"RELIANCE",name:"Reliance Industries Ltd",price:2847.65,change:23.45,changePercent:.83,volume:2847392,marketCap:1925e9,sector:"Energy",isWatchlisted:!1},{symbol:"TCS",name:"Tata Consultancy Services",price:3567.8,change:-12.4,changePercent:-.35,volume:1234567,marketCap:13e11,sector:"IT",isWatchlisted:!0},{symbol:"HDFCBANK",name:"HDFC Bank Limited",price:1687.9,change:15.6,changePercent:.93,volume:3456789,marketCap:93e10,sector:"Banking",isWatchlisted:!1},{symbol:"INFY",name:"Infosys Limited",price:1456.25,change:8.75,changePercent:.6,volume:2345678,marketCap:62e10,sector:"IT",isWatchlisted:!1},{symbol:"HINDUNILVR",name:"Hindustan Unilever Ltd",price:2789.45,change:-5.3,changePercent:-.19,volume:876543,marketCap:65e10,sector:"FMCG",isWatchlisted:!0},{symbol:"ICICIBANK",name:"ICICI Bank Limited",price:1098.7,change:12.85,changePercent:1.18,volume:4567890,marketCap:77e10,sector:"Banking",isWatchlisted:!1},{symbol:"KOTAKBANK",name:"Kotak Mahindra Bank",price:1876.2,change:-8.45,changePercent:-.45,volume:1987654,marketCap:37e10,sector:"Banking",isWatchlisted:!1},{symbol:"BHARTIARTL",name:"Bharti Airtel Limited",price:1234.55,change:18.9,changePercent:1.55,volume:3210987,marketCap:68e10,sector:"Telecom",isWatchlisted:!0},{symbol:"ITC",name:"ITC Limited",price:456.8,change:-2.15,changePercent:-.47,volume:5432109,marketCap:57e10,sector:"FMCG",isWatchlisted:!1}]),b=n.useMemo(()=>{let e=[...v];switch(h){case"gainers":e=e.filter(e=>e.change>0).sort((e,t)=>t.changePercent-e.changePercent);break;case"losers":e=e.filter(e=>e.change<0).sort((e,t)=>e.changePercent-t.changePercent);break;case"watchlist":e=e.filter(e=>e.isWatchlisted);break;case"volume":e=e.sort((e,t)=>t.volume-e.volume);break;default:e=e.sort((e,t)=>t.marketCap-e.marketCap)}return e},[v,h]);n.useEffect(()=>{f&&f.trim().length>=2?(async e=>{if(e.trim()){u(!0);try{const t=await Cr.searchStocks(e,10);if(t.success&&t.results){const e=t.results.sort((e,t)=>{const n="NSE"===e.exchange||"BSE"===e.exchange||e.symbol.endsWith(".NS")||e.symbol.endsWith(".BO"),s="NSE"===t.exchange||"BSE"===t.exchange||t.symbol.endsWith(".NS")||t.symbol.endsWith(".BO");return n&&!s?-1:!n&&s?1:0}).slice(0,8).map(e=>({symbol:e.symbol,name:e.name,exchange:e.exchange,currency:e.currency,type:e.type,price:"NSE"===e.exchange||"BSE"===e.exchange?2e3*Math.random()+100:500*Math.random()+50,change:40*(Math.random()-.5),changePercent:8*(Math.random()-.5),sector:"Unknown"}));c(e)}else c([])}catch(t){const n=v.filter(t=>t.symbol.toLowerCase().includes(e.toLowerCase())||t.name.toLowerCase().includes(e.toLowerCase()));c(n)}finally{u(!1)}}else c([])})(f):c([])},[f]);const j=t=>{null==e||e(t),o(""),c([])};return B.jsxs("div",{className:`stock-search-panel ${s}`,children:[B.jsxs("div",{className:"stock-search",children:[B.jsx("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:B.jsx("h3",{className:"search-title",children:"Search Stocks"})}),B.jsxs("div",{className:"search-input-container",children:[B.jsx(an,{className:"search-icon",size:18}),B.jsx("input",{ref:p,type:"text",placeholder:"Search stocks...",value:i,onChange:e=>o(e.target.value)}),i&&B.jsx("button",{className:"clear-search-btn",onClick:()=>{o(""),c([])},children:B.jsx(Nn,{size:16})}),d&&B.jsx("div",{className:"search-loading",children:B.jsx("div",{className:"loading-spinner"})})]}),B.jsxs(g,{children:[l.length>0&&B.jsxs(y.div,{className:"search-results",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:[B.jsx("div",{className:"results-header",children:"Search Results"}),l.map((e,t)=>{var n,s;return B.jsxs(y.div,{className:"search-result-item",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.2,delay:.05*t},onClick:()=>j(e),children:[B.jsxs("div",{className:"search-result-left",children:[B.jsx("div",{className:"symbol",children:e.symbol}),B.jsx("div",{className:"name",children:e.name})]}),B.jsxs("div",{className:"search-result-right",children:[B.jsx("div",{className:"search-result-price",children:pi(e.price)}),B.jsxs("div",{className:"search-result-change "+(e.change>=0?"positive":"negative"),children:[e.change>=0?"+":"",null==(n=e.change)?void 0:n.toFixed(2),"(",null==(s=e.changePercent)?void 0:s.toFixed(2),"%)"]})]}),B.jsx("div",{className:"search-result-actions",onClick:e=>e.stopPropagation(),children:B.jsx(Eo,{stockData:e,size:"small",variant:"simple",showText:!1})}),e.exchange&&B.jsx("div",{className:"exchange",children:e.exchange})]},e.symbol)})]}),f&&f.trim().length>=2&&0===l.length&&!d&&B.jsx(y.div,{className:"search-results",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:B.jsxs("div",{className:"no-results",children:[B.jsx(an,{size:24}),B.jsxs("p",{children:['No stocks found for "',f,'"']}),B.jsx("small",{children:"Try searching with different keywords or stock symbols"})]})})]})]}),B.jsxs("div",{className:"popular-stocks-section",children:[B.jsx("div",{className:"popular-stocks-header",children:B.jsx("h3",{className:"popular-stocks-title",children:"Popular Stocks"})}),B.jsx("div",{className:"popular-stocks-list",children:B.jsx(g,{children:b.map((e,n)=>{var s,a;return B.jsxs(y.div,{className:"popular-stock-item "+((null==t?void 0:t.symbol)===e.symbol?"selected":""),initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3,delay:.05*n},onClick:()=>j(e),whileHover:{scale:1.02},whileTap:{scale:.98},children:[B.jsxs("div",{className:"popular-stock-info",children:[B.jsx("div",{className:"popular-stock-symbol",children:e.symbol}),B.jsx("div",{className:"popular-stock-name",children:e.name})]}),B.jsxs("div",{className:"popular-stock-price",children:[B.jsx("div",{className:"popular-stock-value",children:pi(e.price)}),B.jsxs("div",{className:"popular-stock-change "+(e.change>=0?"positive":"negative"),children:[e.change>=0?"+":"",null==(s=e.change)?void 0:s.toFixed(2),"(",null==(a=e.changePercent)?void 0:a.toFixed(2),"%)"]})]}),B.jsx("div",{className:"popular-stock-actions",onClick:e=>e.stopPropagation(),children:B.jsx(Eo,{stockData:e,size:"small",variant:"simple",showText:!1})})]},e.symbol)})})})]})]})},xc=({user:e,theme:t})=>{const{isCollapsed:s}=(()=>{const e=n.useContext(_o);if(void 0===e)throw new Error("useSidebar must be used within a SidebarProvider");return e})(),[a,r]=n.useState("RELIANCE"),[i,o]=n.useState("1D"),[l,c]=n.useState("candlestick"),[d,u]=n.useState(!1),[h,m]=n.useState([]),[p,f]=n.useState([]),[g,v]=n.useState(null),[x,b]=n.useState(!1),[j,w]=n.useState(null),[N,k]=n.useState(!1),[S,C]=n.useState(null),[T,P]=n.useState(null);si({limit:10,debounceMs:300});const E=[{id:"candlestick",name:"Candlestick",icon:dt},{id:"line",name:"Line",icon:et},{id:"area",name:"Area",icon:Rt}],[L,I]=n.useState([{symbol:"RELIANCE",name:"Reliance Industries Ltd",price:2847.5,change:15.25,changePercent:.54,isWatchlisted:!1},{symbol:"TCS",name:"Tata Consultancy Services",price:4125.8,change:-12.4,changePercent:-.3,isWatchlisted:!0},{symbol:"HDFCBANK",name:"HDFC Bank Limited",price:1687.9,change:8.75,changePercent:.52,isWatchlisted:!1},{symbol:"INFY",name:"Infosys Limited",price:1842.35,change:22.15,changePercent:1.22,isWatchlisted:!1},{symbol:"HINDUNILVR",name:"Hindustan Unilever Ltd",price:2456.7,change:-5.3,changePercent:-.22,isWatchlisted:!0},{symbol:"ICICIBANK",name:"ICICI Bank Limited",price:1287.45,change:18.9,changePercent:1.49,isWatchlisted:!1}]),A=e=>e.replace(/\.(NS|BO)$/,""),O=(e,t)=>{const n="1D"===t?100:"5D"===t?500:1e3,s=[];let a=1e3;const r=new Date;for(let i=n;i>=0;i--){const e=new Date(r.getTime()-i*("1D"===t?3e5:864e5)),n=.02,o=a,l=a+(Math.random()-.5)*n*a,c=Math.max(o,l)+.01*Math.random()*a,d=Math.min(o,l)-.01*Math.random()*a;s.push({time:e.toISOString().split("T")[0],open:parseFloat(o.toFixed(2)),high:parseFloat(c.toFixed(2)),low:parseFloat(d.toFixed(2)),close:parseFloat(l.toFixed(2)),volume:Math.floor(1e6*Math.random())+1e5}),a=l}return s},D=async(e,t)=>{b(!0),w(null);try{const s=A(e),a=await Pr.getHistoricalData(s,t);if(a&&a.success&&a.data&&a.data.length>0){const e=(e=>{if(!e||0===e.length)return[];const t=e.map(e=>({time:e.date||e.time,open:parseFloat(e.open),high:parseFloat(e.high),low:parseFloat(e.low),close:parseFloat(e.close),volume:parseInt(e.volume||0)})),n=[],s=new Set;return t.sort((e,t)=>new Date(e.time)-new Date(t.time)).forEach(e=>{s.has(e.time)||(s.add(e.time),n.push(e))}),n})(a.data);f(e)}else{const e=O(0,t);f(e)}try{const e=await Tr.getStockQuote(s);e.success&&v(e.data)}catch(n){const t=L.find(t=>t.symbol===e)||L[0];v({symbol:t.symbol,name:t.name,price:t.price,change:t.change,changesPercentage:t.changePercent})}}catch(s){const n=O(0,t);f(n);const a=L.find(t=>t.symbol===e)||L[0];v({symbol:a.symbol,name:a.name,price:a.price,change:a.change,changesPercentage:a.changePercent})}finally{b(!1)}},R=async()=>{u(!0),await D(a,i),u(!1)},M=n.useCallback(e=>{I(e)},[]),_=L.find(e=>e.symbol===a)||{symbol:a,name:`${a} Co.`,price:(null==g?void 0:g.price)||0,change:(null==g?void 0:g.change)||0,changePercent:(null==g?void 0:g.changesPercentage)||0,isWatchlisted:!1},F=n.useCallback(e=>null==e?"₹ N/A":new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2,maximumFractionDigits:2}).format(e),[]);return n.useEffect(()=>{D(a,i)},[a,i]),n.useEffect(()=>()=>{T&&clearInterval(T)},[T]),B.jsx("div",{className:"charts-page "+(s?"sidebar-collapsed":"sidebar-expanded"),children:B.jsxs("div",{className:"charts-container",children:[B.jsxs(y.div,{className:"charts-header",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:[B.jsxs("div",{className:"header-left",children:[B.jsxs("div",{className:"page-title",children:[B.jsx(dt,{size:24}),B.jsx("h1",{children:"Charts"})]}),B.jsxs("div",{className:"stock-info",children:[B.jsx("h2",{children:_.name}),B.jsxs("span",{className:"symbol",children:["(",_.symbol,")"]}),B.jsx(mi,{price:(null==g?void 0:g.price)||_.price,change:(null==g?void 0:g.change)||_.change,changePercent:(null==g?void 0:g.changesPercentage)||_.changePercent}),B.jsx("div",{className:"stock-actions-row",children:B.jsx(Eo,{symbol:_.symbol,isWatchlisted:_.isWatchlisted,onToggleWatchlist:()=>{const e={..._,isWatchlisted:!_.isWatchlisted};I(L.map(t=>t.symbol===_.symbol?e:t)),Ze.info(e.isWatchlisted?`${e.name} added to watchlist!`:`${e.name} removed from watchlist!`)}})})]})]}),B.jsxs("div",{className:"header-actions",children:[B.jsxs("button",{className:"btn-premium btn-secondary",onClick:R,disabled:d||x,children:[B.jsx(nn,{size:16,className:d?"animate-spin":""}),"Refresh"]}),B.jsxs("button",{className:"btn-premium "+(N?"btn-danger":"btn-success"),onClick:()=>{const e=!N;if(k(e),e){const e=setInterval(()=>{if(!d){(async e=>{try{const t=await Tr.getStockQuote(e);if(t.success&&t.data)return v(t.data),C(new Date),t.data}catch(t){}})(A(a))}},3e4);P(e),Ze.success("Live updates enabled")}else T&&(clearInterval(T),P(null)),Ze.info("Live updates paused")},children:[N?B.jsx(Kt,{size:16}):B.jsx(en,{size:16}),N?"Pause Live":"Go Live"]})]})]}),B.jsxs("div",{className:"charts-content",children:[B.jsxs(y.div,{className:"charts-sidebar",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.1},children:[B.jsx(vc,{onStockSelect:async e=>{const t=e.replace(/\.(NS|BO)$/,"");r(t),await D(t,i)},selectedStock:{symbol:a},className:"charts-stock-search",popularStocks:L,onUpdatePopularStocks:M}),B.jsxs("div",{className:"sidebar-section",children:[B.jsx("h3",{children:"Timeframe"}),B.jsx("div",{className:"timeframe-buttons",children:["1D","5D","1M","3M","6M","1Y","5Y"].map(e=>B.jsx("button",{className:"timeframe-btn "+(i===e?"active":""),onClick:()=>(async e=>{o(e),await D(a,e)})(e),disabled:x,children:e},e))})]}),B.jsxs("div",{className:"sidebar-section",children:[B.jsx("h3",{children:"Chart Type"}),B.jsx("div",{className:"chart-type-buttons",children:E.map(e=>B.jsxs("button",{className:"chart-type-btn "+(l===e.id?"active":""),onClick:()=>c(e.id),disabled:x,children:[B.jsx(e.icon,{size:16}),e.name]},e.id))})]}),B.jsxs("div",{className:"sidebar-section",children:[B.jsx("h3",{children:"Technical Indicators"}),B.jsx("div",{className:"indicators-list",children:[{id:"sma",name:"SMA (20)",color:"#3B82F6"},{id:"ema",name:"EMA (12)",color:"#10B981"},{id:"rsi",name:"RSI (14)",color:"#F59E0B"},{id:"macd",name:"MACD",color:"#EF4444"},{id:"bollinger",name:"Bollinger Bands",color:"#8B5CF6"}].map(e=>B.jsxs("div",{className:"indicator-item "+(h.includes(e.id)?"active":""),onClick:()=>{return t=e.id,void m(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);var t},children:[B.jsx("div",{className:"indicator-color",style:{backgroundColor:e.color}}),B.jsx("span",{children:e.name})]},e.id))})]})]}),B.jsxs(y.div,{className:"chart-main",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.6,delay:.2},children:[x&&B.jsx("div",{className:"chart-loading-overlay",children:"Loading Chart Data..."}),j&&B.jsxs("div",{className:"chart-error-message",children:["Error: ",j]}),B.jsx(yc,{data:p,symbol:a,timeframe:i,chartType:l,theme:t,onRefresh:R,loading:x,height:600,indicators:h}),B.jsxs("div",{className:"chart-footer",children:[B.jsxs("div",{className:"footer-left",children:[B.jsxs("div",{className:"volume-info",children:[B.jsx(jn,{size:16}),B.jsxs("span",{children:["Volume: ",(null==g?void 0:g.volume)?g.volume.toLocaleString():"N/A"]})]}),B.jsxs("div",{className:"market-cap-info",children:[B.jsx(fn,{size:16}),B.jsxs("span",{children:["Market Cap: ",(null==g?void 0:g.marketCap)?F(g.marketCap):"N/A"]})]})]}),B.jsx("div",{className:"footer-right",children:B.jsxs("div",{className:"last-updated",children:[B.jsx(yt,{size:16}),B.jsxs("span",{children:["Last updated: ",S?S.toLocaleTimeString():"N/A"]})]})})]})]})]})]})})},bc=({user:e,theme:t})=>{const s=o(),{watchlists:a,loading:r,addToWatchlist:i,createWatchlist:l,refreshWatchlists:c,deleteWatchlist:d,loadingState:u,error:h,refreshingState:m}=Pi(),[p,f]=n.useState("all"),[v,x]=n.useState("symbol"),[b,j]=n.useState("asc"),[w,N]=n.useState(""),[k,S]=n.useState(!1),[C,T]=n.useState(""),[P,E]=n.useState(!1),L=n.useMemo(()=>{if(!a||0===a.length)return{name:"Unknown",stocks:[]};if("all"===p){return{name:"All Watchlists",stocks:a.reduce((e,t)=>[...e,...t.stocks||[]],[]),_id:"all"}}return a.find(e=>e._id===p)||{name:"Unknown",stocks:[]}},[a,p]),I=n.useMemo(()=>{let e=L.stocks||[];if(w){const t=w.toLowerCase();e=e.filter(e=>{var n,s;return(null==(n=e.symbol)?void 0:n.toLowerCase().includes(t))||(null==(s=e.name)?void 0:s.toLowerCase().includes(t))})}return e.sort((e,t)=>{let n=e[v],s=t[v];"string"==typeof n&&(n=n.toLowerCase(),s=s.toLowerCase());const a=n>s?1:n<s?-1:0;return"asc"===b?a:-a})},[L.stocks,w,v,b]),A=n.useMemo(()=>{const e=L.stocks||[];return{gainers:e.filter(e=>(e.change||0)>0).length,losers:e.filter(e=>(e.change||0)<0).length,neutral:e.filter(e=>0===(e.change||0)).length}},[L.stocks]),O=n.useCallback(()=>a.reduce((e,t)=>{var n;return e+((null==(n=t.stocks)?void 0:n.length)||0)},0),[a]),D=async()=>{await c()};return n.useEffect(()=>{h&&Ze.error(h)},[h]),n.useEffect(()=>{a.length>0&&"all"===p&&f(a[0]._id)},[a,p]),r?B.jsx("div",{className:"watchlist-page",children:B.jsxs("div",{className:"loading-container",children:[B.jsx("div",{className:"loading-spinner"}),B.jsx("p",{children:"Loading watchlists..."})]})}):B.jsxs("div",{className:"watchlist-page",children:[B.jsxs("div",{className:"watchlist-container",children:[B.jsxs(y.div,{className:"watchlist-header",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:[B.jsxs("div",{className:"watchlist-header-top",children:[B.jsxs("div",{className:"header-left",children:[B.jsx("div",{className:"header-icon",children:B.jsx(Pt,{})}),B.jsxs("div",{className:"header-text",children:[B.jsx("h1",{children:"My Watchlists"}),B.jsx("p",{children:"Track and manage your favorite stocks"})]})]}),B.jsxs("div",{className:"header-actions",children:[B.jsxs("button",{className:"action-btn "+(m?"loading":""),onClick:D,disabled:m,children:[B.jsx(nn,{className:m?"spinning":""}),m?"Refreshing...":"Refresh"]}),B.jsxs("button",{className:"action-btn primary",onClick:()=>S(!0),children:[B.jsx(tn,{}),"New Watchlist"]})]})]}),B.jsxs("div",{className:"stats-overview",children:[B.jsxs("div",{className:"stat-card",children:[B.jsx("div",{className:"stat-icon",children:B.jsx(dt,{})}),B.jsxs("div",{className:"stat-content",children:[B.jsx("div",{className:"stat-value",children:O()}),B.jsx("div",{className:"stat-label",children:"Total Stocks"})]})]}),B.jsxs("div",{className:"stat-card",children:[B.jsx("div",{className:"stat-icon positive",children:B.jsx(vn,{})}),B.jsxs("div",{className:"stat-content",children:[B.jsx("div",{className:"stat-value",children:A.gainers}),B.jsx("div",{className:"stat-label",children:"Gainers"})]})]}),B.jsxs("div",{className:"stat-card",children:[B.jsx("div",{className:"stat-icon negative",children:B.jsx(yn,{})}),B.jsxs("div",{className:"stat-content",children:[B.jsx("div",{className:"stat-value",children:A.losers}),B.jsx("div",{className:"stat-label",children:"Losers"})]})]}),B.jsxs("div",{className:"stat-card",children:[B.jsx("div",{className:"stat-icon",children:B.jsx(hn,{})}),B.jsxs("div",{className:"stat-content",children:[B.jsx("div",{className:"stat-value",children:a.length}),B.jsx("div",{className:"stat-label",children:"Watchlists"})]})]})]})]}),B.jsxs("div",{className:"watchlist-content",children:[B.jsxs(y.div,{className:"watchlist-sidebar",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.1},children:[B.jsx(vc,{onStockSelect:async e=>{"all"!==p&&p?await i(e,p):Ze.warning("Please select a specific watchlist to add stocks to.")},selectedStock:null,className:"watchlist-stock-search"}),B.jsxs("div",{className:"sidebar-section",children:[B.jsx("h3",{children:"My Watchlists"}),B.jsxs("div",{className:"watchlist-list",children:[B.jsxs("button",{className:"watchlist-tab "+("all"===p?"active":""),onClick:()=>f("all"),children:[B.jsx(et,{}),"All Watchlists",B.jsx("span",{className:"tab-count",children:O()})]}),a.map(e=>{var t;return B.jsxs("button",{className:"watchlist-tab "+(p===e._id?"active":""),onClick:()=>f(e._id),children:[B.jsx(ht,{}),B.jsx("span",{className:"watchlist-name",children:e.name}),B.jsx("span",{className:"tab-count",children:(null==(t=e.stocks)?void 0:t.length)||0}),B.jsx("button",{className:"delete-watchlist-btn",onClick:t=>{t.stopPropagation(),(async e=>{window.confirm("Are you sure you want to delete this watchlist?")&&(await d(e),f("all"))})(e._id)},title:"Delete Watchlist",children:B.jsx(gn,{})})]},e._id)})]})]}),B.jsxs("div",{className:"sidebar-section",children:[B.jsx("h3",{children:"Quick Actions"}),B.jsxs("div",{className:"quick-actions",children:[B.jsxs("button",{className:"action-btn",onClick:()=>S(!0),children:[B.jsx(tn,{}),"New Watchlist"]}),B.jsxs("button",{className:"action-btn",onClick:D,disabled:m,children:[B.jsx(nn,{className:m?"spinning":""}),"Refresh Data"]})]})]})]}),B.jsxs(y.div,{className:"watchlist-main",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.6,delay:.2},children:[B.jsxs("div",{className:"watchlist-tabs",children:[B.jsxs("button",{className:"watchlist-tab "+("all"===p?"active":""),onClick:()=>f("all"),children:[B.jsx(et,{}),"All Watchlists",B.jsx("span",{className:"tab-count",children:O()})]}),a.map(e=>{var t;return B.jsxs("button",{className:"watchlist-tab "+(p===e._id?"active":""),onClick:()=>f(e._id),children:[B.jsx(ht,{}),e.name,B.jsx("span",{className:"tab-count",children:(null==(t=e.stocks)?void 0:t.length)||0})]},e._id)})]}),B.jsxs("div",{className:"main-header",children:[B.jsxs("div",{className:"main-title",children:[B.jsxs("h2",{children:[B.jsx(Pt,{}),L.name]}),B.jsx("div",{className:"main-controls",children:B.jsx("div",{className:"sort-dropdown",children:B.jsxs("button",{className:"sort-btn",children:[B.jsx(Lt,{}),"Sort by ",v,B.jsx(at,{})]})})})]}),B.jsx("div",{className:"search-section",children:B.jsx(ri,{value:w,onChange:N,placeholder:"Search stocks in watchlist...",className:"watchlist-search"})})]}),B.jsx("div",{className:"stocks-section",children:0===I.length?B.jsxs("div",{className:"empty-state",children:[B.jsx("div",{className:"empty-icon",children:B.jsx(ht,{})}),B.jsx("h3",{children:"No stocks found"}),B.jsx("p",{children:w?`No stocks found matching "${w}" in this watchlist`:0===L.stocks.length?"Start building your watchlist by adding stocks you want to track.":"No stocks available in this list."}),!w&&0===L.stocks.length&&B.jsxs("button",{className:"action-btn primary",onClick:()=>S(!0),children:[B.jsx(tn,{}),"Add Your First Stock"]})]}):B.jsx("div",{className:"stock-list",children:I.map((e,t)=>B.jsxs(y.div,{className:"stock-item",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:.03*t},onClick:()=>s(`/stock/${e.symbol}`),children:[B.jsx("div",{className:"stock-info",children:B.jsxs("div",{className:"stock-basic-info",children:[B.jsx("div",{className:"stock-symbol",children:e.symbol}),B.jsx("div",{className:"stock-name",children:e.name})]})}),B.jsxs("div",{className:"stock-price-inline",children:[B.jsxs("div",{className:"stock-price-value",children:["₹",(e.price||0).toLocaleString("en-IN",{minimumFractionDigits:2,maximumFractionDigits:2})]}),B.jsxs("div",{className:"stock-price-change "+((e.change||0)>0?"positive":(e.change||0)<0?"negative":"neutral"),children:[(e.change||0)>=0?"+":"",(e.change||0).toFixed(2),"(",(e.changePercent||0).toFixed(2),"%)"]})]}),B.jsx("div",{className:"stock-actions",children:B.jsx(Eo,{stockData:e,size:"small",variant:"simple",showText:!1,onSuccess:(t,n)=>{Ze.success(`${"removed"===n?"Removed":"Added"} ${e.symbol} ${"removed"===n?"from":"to"} watchlist`),c()},onError:e=>{Ze.error(e||"Failed to update watchlist")}})})]},e.symbol))})})]})]})]}),B.jsx(g,{children:k&&B.jsx(y.div,{className:"modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>S(!1),children:B.jsxs(y.div,{className:"modal-content",initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},onClick:e=>e.stopPropagation(),children:[B.jsxs("div",{className:"modal-header",children:[B.jsx("h3",{children:"Create New Watchlist"}),B.jsx("button",{className:"close-btn",onClick:()=>S(!1),children:B.jsx(Nn,{})})]}),B.jsx("div",{className:"modal-body",children:B.jsxs("div",{className:"form-group",children:[B.jsx("label",{htmlFor:"watchlist-name",children:"Watchlist Name"}),B.jsx("input",{id:"watchlist-name",type:"text",value:C,onChange:e=>T(e.target.value),placeholder:"Enter watchlist name...",className:"form-input",autoFocus:!0})]})}),B.jsxs("div",{className:"modal-footer",children:[B.jsx("button",{className:"action-btn",onClick:()=>S(!1),children:"Cancel"}),B.jsx("button",{className:"action-btn primary",onClick:async()=>{C.trim()?(E(!0),await l(C.trim()),T(""),S(!1),E(!1)):Ze.error("Watchlist name cannot be empty")},disabled:!C.trim()||P,children:P?B.jsxs(B.Fragment,{children:[B.jsx(nn,{className:"spinning"}),"Creating..."]}):B.jsxs(B.Fragment,{children:[B.jsx(tn,{}),"Create Watchlist"]})})]})]})})})]})};function jc(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var wc=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")(),Nc=()=>Math.random().toString(36).substring(7).split("").join("."),kc={INIT:`@@redux/INIT${Nc()}`,REPLACE:`@@redux/REPLACE${Nc()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Nc()}`};function Sc(e){if("object"!=typeof e||null===e)return!1;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||null===Object.getPrototypeOf(e)}function Cc(e,t,n){if("function"!=typeof e)throw new Error(jc(2));if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error(jc(0));if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error(jc(1));return n(Cc)(e,t)}let s=e,a=t,r=new Map,i=r,o=0,l=!1;function c(){i===r&&(i=new Map,r.forEach((e,t)=>{i.set(t,e)}))}function d(){if(l)throw new Error(jc(3));return a}function u(e){if("function"!=typeof e)throw new Error(jc(4));if(l)throw new Error(jc(5));let t=!0;c();const n=o++;return i.set(n,e),function(){if(t){if(l)throw new Error(jc(6));t=!1,c(),i.delete(n),r=null}}}function h(e){if(!Sc(e))throw new Error(jc(7));if(void 0===e.type)throw new Error(jc(8));if("string"!=typeof e.type)throw new Error(jc(17));if(l)throw new Error(jc(9));try{l=!0,a=s(a,e)}finally{l=!1}return(r=i).forEach(e=>{e()}),e}h({type:kc.INIT});return{dispatch:h,subscribe:u,getState:d,replaceReducer:function(e){if("function"!=typeof e)throw new Error(jc(10));s=e,h({type:kc.REPLACE})},[wc]:function(){const e=u;return{subscribe(t){if("object"!=typeof t||null===t)throw new Error(jc(11));function n(){const e=t;e.next&&e.next(d())}n();return{unsubscribe:e(n)}},[wc](){return this}}}}}function Tc(e){const t=Object.keys(e),n={};for(let i=0;i<t.length;i++){const s=t[i];"function"==typeof e[s]&&(n[s]=e[s])}const s=Object.keys(n);let a;try{!function(e){Object.keys(e).forEach(t=>{const n=e[t];if(void 0===n(void 0,{type:kc.INIT}))throw new Error(jc(12));if(void 0===n(void 0,{type:kc.PROBE_UNKNOWN_ACTION()}))throw new Error(jc(13))})}(n)}catch(r){a=r}return function(e={},t){if(a)throw a;let r=!1;const i={};for(let a=0;a<s.length;a++){const o=s[a],l=n[o],c=e[o],d=l(c,t);if(void 0===d)throw t&&t.type,new Error(jc(14));i[o]=d,r=r||d!==c}return r=r||s.length!==Object.keys(e).length,r?i:e}}function Pc(...e){return 0===e.length?e=>e:1===e.length?e[0]:e.reduce((e,t)=>(...n)=>e(t(...n)))}var Ec=Symbol.for("immer-nothing"),Lc=Symbol.for("immer-draftable"),Ic=Symbol.for("immer-state");function Ac(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var Oc=Object.getPrototypeOf;function Dc(e){return!!e&&!!e[Ic]}function Rc(e){var t;return!!e&&(_c(e)||Array.isArray(e)||!!e[Lc]||!!(null==(t=e.constructor)?void 0:t[Lc])||Hc(e)||$c(e))}var Mc=Object.prototype.constructor.toString();function _c(e){if(!e||"object"!=typeof e)return!1;const t=Oc(e);if(null===t)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===Mc}function Fc(e,t){0===Bc(e)?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,s)=>t(s,n,e))}function Bc(e){const t=e[Ic];return t?t.type_:Array.isArray(e)?1:Hc(e)?2:$c(e)?3:0}function zc(e,t){return 2===Bc(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Uc(e,t,n){const s=Bc(e);2===s?e.set(t,n):3===s?e.add(n):e[t]=n}function Hc(e){return e instanceof Map}function $c(e){return e instanceof Set}function qc(e){return e.copy_||e.base_}function Wc(e,t){if(Hc(e))return new Map(e);if($c(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=_c(e);if(!0===t||"class_only"===t&&!n){const t=Object.getOwnPropertyDescriptors(e);delete t[Ic];let n=Reflect.ownKeys(t);for(let s=0;s<n.length;s++){const a=n[s],r=t[a];!1===r.writable&&(r.writable=!0,r.configurable=!0),(r.get||r.set)&&(t[a]={configurable:!0,writable:!0,enumerable:r.enumerable,value:e[a]})}return Object.create(Oc(e),t)}{const t=Oc(e);if(null!==t&&n)return{...e};const s=Object.create(t);return Object.assign(s,e)}}function Vc(e,t=!1){return Gc(e)||Dc(e)||!Rc(e)||(Bc(e)>1&&(e.set=e.add=e.clear=e.delete=Yc),Object.freeze(e),t&&Object.entries(e).forEach(([e,t])=>Vc(t,!0))),e}function Yc(){Ac(2)}function Gc(e){return Object.isFrozen(e)}var Jc,Kc={};function Qc(e){const t=Kc[e];return t||Ac(0),t}function Xc(){return Jc}function Zc(e,t){t&&(Qc("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function ed(e){td(e),e.drafts_.forEach(sd),e.drafts_=null}function td(e){e===Jc&&(Jc=e.parent_)}function nd(e){return Jc={drafts_:[],parent_:Jc,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function sd(e){const t=e[Ic];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function ad(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return void 0!==e&&e!==n?(n[Ic].modified_&&(ed(t),Ac(4)),Rc(e)&&(e=rd(t,e),t.parent_||od(t,e)),t.patches_&&Qc("Patches").generateReplacementPatches_(n[Ic].base_,e,t.patches_,t.inversePatches_)):e=rd(t,n,[]),ed(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Ec?e:void 0}function rd(e,t,n){if(Gc(t))return t;const s=t[Ic];if(!s)return Fc(t,(a,r)=>id(e,s,t,a,r,n)),t;if(s.scope_!==e)return t;if(!s.modified_)return od(e,s.base_,!0),s.base_;if(!s.finalized_){s.finalized_=!0,s.scope_.unfinalizedDrafts_--;const t=s.copy_;let a=t,r=!1;3===s.type_&&(a=new Set(t),t.clear(),r=!0),Fc(a,(a,i)=>id(e,s,t,a,i,n,r)),od(e,t,!1),n&&e.patches_&&Qc("Patches").generatePatches_(s,n,e.patches_,e.inversePatches_)}return s.copy_}function id(e,t,n,s,a,r,i){if(Dc(a)){const i=rd(e,a,r&&t&&3!==t.type_&&!zc(t.assigned_,s)?r.concat(s):void 0);if(Uc(n,s,i),!Dc(i))return;e.canAutoFreeze_=!1}else i&&n.add(a);if(Rc(a)&&!Gc(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;rd(e,a),t&&t.scope_.parent_||"symbol"==typeof s||!Object.prototype.propertyIsEnumerable.call(n,s)||od(e,a)}}function od(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Vc(t,n)}var ld={get(e,t){if(t===Ic)return e;const n=qc(e);if(!zc(n,t))return function(e,t,n){var s;const a=ud(t,n);return a?"value"in a?a.value:null==(s=a.get)?void 0:s.call(e.draft_):void 0}(e,n,t);const s=n[t];return e.finalized_||!Rc(s)?s:s===dd(e.base_,t)?(md(e),e.copy_[t]=pd(s,e)):s},has:(e,t)=>t in qc(e),ownKeys:e=>Reflect.ownKeys(qc(e)),set(e,t,n){const s=ud(qc(e),t);if(null==s?void 0:s.set)return s.set.call(e.draft_,n),!0;if(!e.modified_){const s=dd(qc(e),t),i=null==s?void 0:s[Ic];if(i&&i.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(((a=n)===(r=s)?0!==a||1/a==1/r:a!=a&&r!=r)&&(void 0!==n||zc(e.base_,t)))return!0;md(e),hd(e)}var a,r;return e.copy_[t]===n&&(void 0!==n||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==dd(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,md(e),hd(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const n=qc(e),s=Reflect.getOwnPropertyDescriptor(n,t);return s?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:s.enumerable,value:n[t]}:s},defineProperty(){Ac(11)},getPrototypeOf:e=>Oc(e.base_),setPrototypeOf(){Ac(12)}},cd={};function dd(e,t){const n=e[Ic];return(n?qc(n):e)[t]}function ud(e,t){if(!(t in e))return;let n=Oc(e);for(;n;){const e=Object.getOwnPropertyDescriptor(n,t);if(e)return e;n=Oc(n)}}function hd(e){e.modified_||(e.modified_=!0,e.parent_&&hd(e.parent_))}function md(e){e.copy_||(e.copy_=Wc(e.base_,e.scope_.immer_.useStrictShallowCopy_))}Fc(ld,(e,t)=>{cd[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),cd.deleteProperty=function(e,t){return cd.set.call(this,e,t,void 0)},cd.set=function(e,t,n){return ld.set.call(this,e[0],t,n,e[0])};function pd(e,t){const n=Hc(e)?Qc("MapSet").proxyMap_(e,t):$c(e)?Qc("MapSet").proxySet_(e,t):function(e,t){const n=Array.isArray(e),s={type_:n?1:0,scope_:t?t.scope_:Xc(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=s,r=ld;n&&(a=[s],r=cd);const{revoke:i,proxy:o}=Proxy.revocable(a,r);return s.draft_=o,s.revoke_=i,o}(e,t);return(t?t.scope_:Xc()).drafts_.push(n),n}function fd(e){if(!Rc(e)||Gc(e))return e;const t=e[Ic];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=Wc(e,t.scope_.immer_.useStrictShallowCopy_)}else n=Wc(e,!0);return Fc(n,(e,t)=>{Uc(n,e,fd(t))}),t&&(t.finalized_=!1),n}var gd=new class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,n)=>{if("function"==typeof e&&"function"!=typeof t){const n=t;t=e;const s=this;return function(e=n,...a){return s.produce(e,e=>t.call(this,e,...a))}}let s;if("function"!=typeof t&&Ac(6),void 0!==n&&"function"!=typeof n&&Ac(7),Rc(e)){const a=nd(this),r=pd(e,void 0);let i=!0;try{s=t(r),i=!1}finally{i?ed(a):td(a)}return Zc(a,n),ad(s,a)}if(!e||"object"!=typeof e){if(s=t(e),void 0===s&&(s=e),s===Ec&&(s=void 0),this.autoFreeze_&&Vc(s,!0),n){const t=[],a=[];Qc("Patches").generateReplacementPatches_(e,s,t,a),n(t,a)}return s}Ac(1)},this.produceWithPatches=(e,t)=>{if("function"==typeof e)return(t,...n)=>this.produceWithPatches(t,t=>e(t,...n));let n,s;return[this.produce(e,t,(e,t)=>{n=e,s=t}),n,s]},"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),"boolean"==typeof(null==e?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Rc(e)||Ac(8),Dc(e)&&(e=function(e){Dc(e)||Ac(10);return fd(e)}(e));const t=nd(this),n=pd(e,void 0);return n[Ic].isManual_=!0,td(t),n}finishDraft(e,t){const n=e&&e[Ic];n&&n.isManual_||Ac(9);const{scope_:s}=n;return Zc(s,t),ad(void 0,s)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const s=t[n];if(0===s.path.length&&"replace"===s.op){e=s.value;break}}n>-1&&(t=t.slice(n+1));const s=Qc("Patches").applyPatches_;return Dc(e)?s(e,t):this.produce(e,e=>s(e,t))}},yd=gd.produce;function vd(e){return({dispatch:t,getState:n})=>s=>a=>"function"==typeof a?a(t,n,e):s(a)}gd.produceWithPatches.bind(gd),gd.setAutoFreeze.bind(gd),gd.setUseStrictShallowCopy.bind(gd),gd.applyPatches.bind(gd),gd.createDraft.bind(gd),gd.finishDraft.bind(gd);var xd=vd(),bd=vd,jd="undefined"!=typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"==typeof arguments[0]?Pc:Pc.apply(null,arguments)};function wd(e,t){function n(...n){if(t){let s=t(...n);if(!s)throw new Error($d(0));return{type:e,payload:s.payload,..."meta"in s&&{meta:s.meta},..."error"in s&&{error:s.error}}}return{type:e,payload:n[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=t=>function(e){return Sc(e)&&"type"in e&&"string"==typeof e.type}(t)&&t.type===e,n}var Nd=class e extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,e.prototype)}static get[Symbol.species](){return e}concat(...e){return super.concat.apply(this,e)}prepend(...t){return 1===t.length&&Array.isArray(t[0])?new e(...t[0].concat(this)):new e(...t.concat(this))}};function kd(e){return Rc(e)?yd(e,()=>{}):e}function Sd(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}var Cd=e=>t=>{setTimeout(t,e)},Td=e=>function(t){const{autoBatch:n=!0}=t??{};let s=new Nd(e);return n&&s.push(((e={type:"raf"})=>t=>(...n)=>{const s=t(...n);let a=!0,r=!1,i=!1;const o=new Set,l="tick"===e.type?queueMicrotask:"raf"===e.type?"undefined"!=typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:Cd(10):"callback"===e.type?e.queueNotification:Cd(e.timeout),c=()=>{i=!1,r&&(r=!1,o.forEach(e=>e()))};return Object.assign({},s,{subscribe(e){const t=s.subscribe(()=>a&&e());return o.add(e),()=>{t(),o.delete(e)}},dispatch(e){var t;try{return a=!(null==(t=null==e?void 0:e.meta)?void 0:t.RTK_autoBatch),r=!a,r&&(i||(i=!0,l(c))),s.dispatch(e)}finally{a=!0}}})})("object"==typeof n?n:void 0)),s};function Pd(e){const t={},n=[];let s;const a={addCase(e,n){const s="string"==typeof e?e:e.type;if(!s)throw new Error($d(28));if(s in t)throw new Error($d(29));return t[s]=n,a},addMatcher:(e,t)=>(n.push({matcher:e,reducer:t}),a),addDefaultCase:e=>(s=e,a)};return e(a),[t,n,s]}function Ed(...e){return t=>e.some(e=>((e,t)=>{return(n=e)&&"function"==typeof n.match?e.match(t):e(t);var n})(e,t))}var Ld=["name","message","stack","code"],Id=class{constructor(e,n){t(this,"_type"),this.payload=e,this.meta=n}},Ad=class{constructor(e,n){t(this,"_type"),this.payload=e,this.meta=n}},Od=e=>{if("object"==typeof e&&null!==e){const t={};for(const n of Ld)"string"==typeof e[n]&&(t[n]=e[n]);return t}return{message:String(e)}},Dd="External signal was aborted",Rd=(()=>{function e(e,t,n){const s=wd(e+"/fulfilled",(e,t,n,s)=>({payload:e,meta:{...s||{},arg:n,requestId:t,requestStatus:"fulfilled"}})),a=wd(e+"/pending",(e,t,n)=>({payload:void 0,meta:{...n||{},arg:t,requestId:e,requestStatus:"pending"}})),r=wd(e+"/rejected",(e,t,s,a,r)=>({payload:a,error:(n&&n.serializeError||Od)(e||"Rejected"),meta:{...r||{},arg:s,requestId:t,rejectedWithValue:!!a,requestStatus:"rejected",aborted:"AbortError"===(null==e?void 0:e.name),condition:"ConditionError"===(null==e?void 0:e.name)}}));return Object.assign(function(e,{signal:i}={}){return(o,l,c)=>{const d=(null==n?void 0:n.idGenerator)?n.idGenerator(e):((e=21)=>{let t="",n=e;for(;n--;)t+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return t})(),u=new AbortController;let h,m;function p(e){m=e,u.abort()}i&&(i.aborted?p(Dd):i.addEventListener("abort",()=>p(Dd),{once:!0}));const f=async function(){var i,f;let g;try{let r=null==(i=null==n?void 0:n.condition)?void 0:i.call(n,e,{getState:l,extra:c});if(null!==(y=r)&&"object"==typeof y&&"function"==typeof y.then&&(r=await r),!1===r||u.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const v=new Promise((e,t)=>{h=()=>{t({name:"AbortError",message:m||"Aborted"})},u.signal.addEventListener("abort",h)});o(a(d,e,null==(f=null==n?void 0:n.getPendingMeta)?void 0:f.call(n,{requestId:d,arg:e},{getState:l,extra:c}))),g=await Promise.race([v,Promise.resolve(t(e,{dispatch:o,getState:l,extra:c,requestId:d,signal:u.signal,abort:p,rejectWithValue:(e,t)=>new Id(e,t),fulfillWithValue:(e,t)=>new Ad(e,t)})).then(t=>{if(t instanceof Id)throw t;return t instanceof Ad?s(t.payload,d,e,t.meta):s(t,d,e)})])}catch(v){g=v instanceof Id?r(null,d,e,v.payload,v.meta):r(v,d,e)}finally{h&&u.signal.removeEventListener("abort",h)}var y;return n&&!n.dispatchConditionRejection&&r.match(g)&&g.meta.condition||o(g),g}();return Object.assign(f,{abort:p,requestId:d,arg:e,unwrap:()=>f.then(Md)})}},{pending:a,rejected:r,fulfilled:s,settled:Ed(r,s),typePrefix:e})}return e.withTypes=()=>e,e})();function Md(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}var _d=Symbol.for("rtk-slice-createasyncthunk");function Fd(e,t){return`${e}/${t}`}function Bd({creators:e}={}){var t;const n=null==(t=null==e?void 0:e.asyncThunk)?void 0:t[_d];return function(e){const{name:t,reducerPath:s=t}=e;if(!t)throw new Error($d(11));const a=("function"==typeof e.reducers?e.reducers(function(){function e(e,t){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...t}}return e.withTypes=()=>e,{reducer:e=>Object.assign({[e.name]:(...t)=>e(...t)}[e.name],{_reducerDefinitionType:"reducer"}),preparedReducer:(e,t)=>({_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}),asyncThunk:e}}()):e.reducers)||{},r=Object.keys(a),i={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},o={addCase(e,t){const n="string"==typeof e?e:e.type;if(!n)throw new Error($d(12));if(n in i.sliceCaseReducersByType)throw new Error($d(13));return i.sliceCaseReducersByType[n]=t,o},addMatcher:(e,t)=>(i.sliceMatchers.push({matcher:e,reducer:t}),o),exposeAction:(e,t)=>(i.actionCreators[e]=t,o),exposeCaseReducer:(e,t)=>(i.sliceCaseReducersByName[e]=t,o)};function l(){const[t={},n=[],s]="function"==typeof e.extraReducers?Pd(e.extraReducers):[e.extraReducers],a={...t,...i.sliceCaseReducersByType};return function(e,t){let n,[s,a,r]=Pd(t);if("function"==typeof e)n=()=>kd(e());else{const t=kd(e);n=()=>t}function i(e=n(),t){let i=[s[t.type],...a.filter(({matcher:e})=>e(t)).map(({reducer:e})=>e)];return 0===i.filter(e=>!!e).length&&(i=[r]),i.reduce((e,n)=>{if(n){if(Dc(e)){const s=n(e,t);return void 0===s?e:s}if(Rc(e))return yd(e,e=>n(e,t));{const s=n(e,t);if(void 0===s){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return s}}return e},e)}return i.getInitialState=n,i}(e.initialState,e=>{for(let t in a)e.addCase(t,a[t]);for(let t of i.sliceMatchers)e.addMatcher(t.matcher,t.reducer);for(let t of n)e.addMatcher(t.matcher,t.reducer);s&&e.addDefaultCase(s)})}r.forEach(s=>{const r=a[s],i={reducerName:s,type:Fd(t,s),createNotation:"function"==typeof e.reducers};!function(e){return"asyncThunk"===e._reducerDefinitionType}(r)?function({type:e,reducerName:t,createNotation:n},s,a){let r,i;if("reducer"in s){if(n&&!function(e){return"reducerWithPrepare"===e._reducerDefinitionType}(s))throw new Error($d(17));r=s.reducer,i=s.prepare}else r=s;a.addCase(e,r).exposeCaseReducer(t,r).exposeAction(t,i?wd(e,i):wd(e))}(i,r,o):function({type:e,reducerName:t},n,s,a){if(!a)throw new Error($d(18));const{payloadCreator:r,fulfilled:i,pending:o,rejected:l,settled:c,options:d}=n,u=a(e,r,d);s.exposeAction(t,u),i&&s.addCase(u.fulfilled,i);o&&s.addCase(u.pending,o);l&&s.addCase(u.rejected,l);c&&s.addMatcher(u.settled,c);s.exposeCaseReducer(t,{fulfilled:i||Hd,pending:o||Hd,rejected:l||Hd,settled:c||Hd})}(i,r,o,n)});const c=e=>e,d=new Map,u=new WeakMap;let h;function m(e,t){return h||(h=l()),h(e,t)}function p(){return h||(h=l()),h.getInitialState()}function f(t,n=!1){function s(e){let a=e[t];return void 0===a&&n&&(a=Sd(u,s,p)),a}function a(t=c){const s=Sd(d,n,()=>new WeakMap);return Sd(s,t,()=>{const s={};for(const[a,r]of Object.entries(e.selectors??{}))s[a]=zd(r,t,()=>Sd(u,t,p),n);return s})}return{reducerPath:t,getSelectors:a,get selectors(){return a(s)},selectSlice:s}}const g={name:t,reducer:m,actions:i.actionCreators,caseReducers:i.sliceCaseReducersByName,getInitialState:p,...f(s),injectInto(e,{reducerPath:t,...n}={}){const a=t??s;return e.inject({reducerPath:a,reducer:m},n),{...g,...f(a,!0)}}};return g}}function zd(e,t,n,s){function a(a,...r){let i=t(a);return void 0===i&&s&&(i=n()),e(i,...r)}return a.unwrapped=e,a}var Ud=Bd();function Hd(){}function $d(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}const qd="/api/orders",Wd=Rd("orders/fetchOrders",async(e,{rejectWithValue:t})=>{try{const n=await Wa.get(`${qd}/all`,{params:e});return n.data.success?{data:n.data.data,summary:n.data.summary}:t(n.data.message)}catch(n){return Ze.error("Failed to fetch orders from server."),t("Failed to fetch orders")}}),Vd=Rd("orders/placeOrder",async(e,{rejectWithValue:t})=>{var n,s,a,r;try{const n=await Wa.post(`${qd}/place`,e);return n.data.success?(Ze.success(n.data.message),n.data.data.order):t(n.data.message)}catch(i){return Ze.error((null==(s=null==(n=i.response)?void 0:n.data)?void 0:s.message)||"Failed to place order"),t((null==(r=null==(a=i.response)?void 0:a.data)?void 0:r.message)||"Failed to place order")}}),Yd=Rd("orders/cancelOrder",async({orderId:e,reason:t},{rejectWithValue:n})=>{var s,a,r,i;try{const s=await Wa.post(`${qd}/cancel/${e}`,{reason:t});return s.data.success?(Ze.success(s.data.message),s.data.data):n(s.data.message)}catch(o){return Ze.error((null==(a=null==(s=o.response)?void 0:s.data)?void 0:a.message)||"Failed to cancel order"),n((null==(i=null==(r=o.response)?void 0:r.data)?void 0:i.message)||"Failed to cancel order")}}),Gd=Ud({name:"orders",initialState:{orders:[],isLoading:!1,error:null,filters:{status:"all",type:"all",symbol:""},summary:{totalOrders:0,filledOrders:0,openOrders:0,cancelledOrders:0,rejectedOrders:0}},reducers:{clearError:e=>{e.error=null},setFilters:(e,t)=>{e.filters={...e.filters,...t.payload}},updateOrderStatus:(e,t)=>{const{_id:n,status:s,executedAt:a,executionPrice:r,fees:i,total:o}=t.payload,l=e.orders.find(e=>e._id===n);l&&(l.status=s,a&&(l.executedAt=a),r&&(l.executionPrice=r),i&&(l.fees=i),o&&(l.total=o))}},extraReducers:e=>{e.addCase(Wd.pending,e=>{e.isLoading=!0,e.error=null}).addCase(Wd.fulfilled,(e,t)=>{e.isLoading=!1,e.orders=t.payload.data,e.summary=t.payload.summary}).addCase(Wd.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload}).addCase(Vd.fulfilled,(e,t)=>{e.orders.unshift(t.payload)}).addCase(Yd.fulfilled,(e,t)=>{const n=t.payload,s=e.orders.findIndex(e=>e._id===n._id);s>-1&&(e.orders[s]=n)})}}),{clearError:Jd,setFilters:Kd,updateOrderStatus:Qd}=Gd.actions,Xd=Gd.reducer,Zd=({user:e,theme:t})=>{const s=ue(),{orders:a,isLoading:r,error:i,filters:o,summary:l}=pe(e=>e.orders),[c,d]=n.useState(o.symbol||""),[u,h]=n.useState(!1),[m,p]=n.useState(!1),f=n.useMemo(()=>[],[]);n.useEffect(()=>{s(Wd(o))},[s,o]);const g=n.useCallback(e=>{switch(e){case"FILLED":return B.jsx(ft,{className:"status-icon completed"});case"PENDING":case"OPEN":return B.jsx(yt,{className:"status-icon pending"});case"CANCELLED":case"REJECTED":return B.jsx(wn,{className:"status-icon cancelled"});default:return B.jsx(yt,{className:"status-icon"})}},[]),v=n.useMemo(()=>{const e=c.toLowerCase(),t=o.status.toLowerCase(),n=o.type.toLowerCase();return a.filter(s=>{const a=(s.stockSymbol||"").toLowerCase().includes(e)||(s.stockName||"").toLowerCase().includes(e)||(s._id||"").toLowerCase().includes(e),r="all"===t||(s.status||"PENDING").toLowerCase()===t,i="all"===n||(s.type||"").toLowerCase()===n;return a&&r&&i})},[a,c,o.status,o.type]);return r?B.jsxs("div",{className:"loading-container",children:[B.jsx("div",{className:"loading-spinner"}),B.jsx("p",{children:"Loading orders..."})]}):B.jsxs("div",{className:"orders-page",children:[B.jsx(So,{icon:dn,title:"Orders",subtitle:"Track and manage your trading orders",borderColor:"warning",actions:[{label:"Refresh",icon:nn,onClick:async()=>{h(!0),await s(Wd(o)),h(!1)},variant:"secondary",disabled:u},{label:"Export",icon:kt,onClick:()=>{},variant:"outline"}]}),B.jsxs("div",{className:"orders-container",children:[B.jsxs(y.div,{className:"orders-controls",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},children:[B.jsxs("div",{className:"controls-left",children:[B.jsx("div",{className:"search-container",children:B.jsx(ri,{placeholder:"Search orders by symbol...",value:c,onChange:d,onClear:()=>d(""),recentSearches:f,showHistory:m,onHistoryClick:e=>d(e.query),size:"md",showSuggestions:!1,enableHistory:!1,className:"orders-search-input"})}),B.jsxs("div",{className:"filter-group",children:[B.jsxs("select",{value:o.status,onChange:e=>s(Kd({status:e.target.value})),className:"filter-select",children:[B.jsxs("option",{value:"all",children:["All Statuses (",(null==l?void 0:l.totalOrders)||0,")"]}),B.jsxs("option",{value:"OPEN",children:["Open (",(null==l?void 0:l.openOrders)||0,")"]}),B.jsxs("option",{value:"FILLED",children:["Filled (",(null==l?void 0:l.filledOrders)||0,")"]}),B.jsxs("option",{value:"CANCELLED",children:["Cancelled (",(null==l?void 0:l.cancelledOrders)||0,")"]}),B.jsxs("option",{value:"REJECTED",children:["Rejected (",(null==l?void 0:l.rejectedOrders)||0,")"]})]}),B.jsxs("select",{value:o.type,onChange:e=>s(Kd({type:e.target.value})),className:"filter-select",children:[B.jsx("option",{value:"all",children:"All Types"}),B.jsx("option",{value:"BUY",children:"Buy"}),B.jsx("option",{value:"SELL",children:"Sell"})]})]})]}),B.jsx("div",{className:"controls-right",children:B.jsxs("button",{className:"btn-premium btn-ghost",children:[B.jsx(Lt,{size:16}),"More Filters"]})})]}),B.jsxs(y.div,{className:"orders-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:[B.jsx("div",{className:"card-header",children:B.jsxs("h3",{className:"card-title",children:[B.jsx(dn,{className:"card-icon"}),"Order History (",v.length,")"]})}),B.jsx("div",{className:"card-content",children:B.jsxs("div",{className:"orders-table",children:[B.jsxs("div",{className:"table-header",children:[B.jsx("div",{className:"col-order",children:"Order Details"}),B.jsx("div",{className:"col-type",children:"Type"}),B.jsx("div",{className:"col-quantity",children:"Quantity"}),B.jsx("div",{className:"col-price",children:"Price"}),B.jsx("div",{className:"col-total",children:"Total"}),B.jsx("div",{className:"col-status",children:"Status"}),B.jsx("div",{className:"col-time",children:"Time"}),B.jsx("div",{className:"col-actions",children:"Actions"})]}),B.jsx("div",{className:"table-body",children:0===v.length?B.jsxs("div",{className:"empty-state",children:[B.jsx(et,{size:48}),B.jsx("h3",{children:"No Orders Found"}),B.jsx("p",{children:"There are no orders that match your current filters."})]}):v.map((e,t)=>{var n,s;const a=(e=>{const t=new Date(e);return{date:t.toLocaleDateString("en-IN"),time:t.toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"})}})(e.createdAt),r="PENDING"===e.status||"OPEN"===e.status,i=(e.executionPrice||e.price)*e.quantity+(e.fees||0);return B.jsxs(y.div,{className:"table-row",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:.05*t},children:[B.jsx("div",{className:"col-order",children:B.jsxs("div",{className:"order-info",children:[B.jsxs("div",{className:"order-id",children:["#",e._id.slice(-6)]}),B.jsx("div",{className:"stock-symbol",children:e.stockSymbol})]})}),B.jsxs("div",{className:"col-type",children:[B.jsxs("div",{className:`order-type ${null==(n=e.type)?void 0:n.toLowerCase()}`,children:["BUY"===e.type?B.jsx(vn,{size:14}):B.jsx(yn,{size:14}),e.type]}),B.jsx("div",{className:"order-subtype",children:e.orderType})]}),B.jsx("div",{className:"col-quantity",children:e.quantity}),B.jsx("div",{className:"col-price",children:B.jsxs("div",{className:"price-info",children:[B.jsx("div",{className:"order-price",children:pi(e.price)}),e.executionPrice&&e.executionPrice!==e.price&&B.jsxs("div",{className:"executed-price",children:["Exec: ",pi(e.executionPrice)]})]})}),B.jsxs("div",{className:"col-total",children:[B.jsx("div",{className:"total-amount",children:pi(i)}),e.fees>0&&B.jsxs("div",{className:"fees",children:["Fees: ",pi(e.fees)]})]}),B.jsx("div",{className:"col-status",children:B.jsxs("div",{className:"status-container",children:[g(e.status),B.jsx("span",{className:`status-text ${null==(s=e.status)?void 0:s.toLowerCase()}`,children:(e.status||"PENDING").charAt(0).toUpperCase()+(e.status||"PENDING").slice(1)})]})}),B.jsx("div",{className:"col-time",children:B.jsxs("div",{className:"time-info",children:[B.jsx("div",{className:"order-date",children:a.date}),B.jsx("div",{className:"order-time",children:a.time})]})}),B.jsx("div",{className:"col-actions",children:B.jsxs("div",{className:"action-buttons",children:[r&&B.jsx("button",{className:"action-btn",title:"Edit Order",children:B.jsx(Ct,{size:14})}),r&&B.jsx("button",{className:"action-btn cancel",title:"Cancel Order",children:B.jsx(wn,{size:14})}),B.jsx("button",{className:"action-btn",title:"More Options",children:B.jsx(Jt,{size:14})})]})})]},e._id)})})]})})]})]})]})},eu=({user:e,theme:t})=>{var s;const a=o(),{portfolioData:r,getTransactionHistory:i}=ui(),[l,c]=n.useState([]),[d,u]=n.useState(!0),[h,m]=n.useState(""),[p,f]=n.useState("all"),[v,x]=n.useState("all"),[b,j]=n.useState("all"),[w,N]=n.useState("date"),[k,S]=n.useState("desc"),[C,T]=n.useState(null),[P,E]=n.useState(!1);n.useState(!1);const L=[{id:"txn_001",type:"buy",symbol:"RELIANCE",name:"Reliance Industries Ltd",quantity:10,price:2847.65,totalAmount:28476.5,fees:14.24,netAmount:28490.74,status:"completed",timestamp:new Date("2024-01-15T10:30:00"),orderId:"ORD_001",exchange:"NSE",sector:"Energy"},{id:"txn_002",type:"sell",symbol:"TCS",name:"Tata Consultancy Services",quantity:5,price:3892.4,totalAmount:19462,fees:9.73,netAmount:19452.27,status:"completed",timestamp:new Date("2024-01-14T14:45:00"),orderId:"ORD_002",exchange:"NSE",sector:"IT",gainLoss:1847.3,gainLossPercent:10.5},{id:"txn_003",type:"buy",symbol:"HDFC",name:"HDFC Bank Ltd",quantity:15,price:1734.85,totalAmount:26022.75,fees:13.01,netAmount:26035.76,status:"pending",timestamp:new Date("2024-01-13T09:15:00"),orderId:"ORD_003",exchange:"NSE",sector:"Banking"},{id:"txn_004",type:"buy",symbol:"INFY",name:"Infosys Ltd",quantity:8,price:1456.2,totalAmount:11649.6,fees:5.82,netAmount:11655.42,status:"completed",timestamp:new Date("2024-01-12T11:20:00"),orderId:"ORD_004",exchange:"NSE",sector:"IT"},{id:"txn_005",type:"sell",symbol:"WIPRO",name:"Wipro Ltd",quantity:20,price:432.85,totalAmount:8657,fees:4.33,netAmount:8652.67,status:"failed",timestamp:new Date("2024-01-11T16:30:00"),orderId:"ORD_005",exchange:"NSE",sector:"IT",gainLoss:-245.8,gainLossPercent:-2.8,failureReason:"Insufficient shares"}];n.useEffect(()=>{(async()=>{u(!0);try{const e=ci.getTransactionHistory(),t=(null==r?void 0:r.transactions)||[],n=[...e,...t],s=n.map((e,t)=>{var n;return{id:e.id||`txn_${Date.now()}_${t}`,type:(null==(n=e.type)?void 0:n.toLowerCase())||"buy",symbol:e.symbol||"UNKNOWN",name:e.companyName||e.name||`${e.symbol} Corp`,quantity:e.quantity||0,price:e.price||0,totalAmount:e.total||e.totalAmount||e.quantity*e.price,fees:e.fees||5e-4*(e.total||e.totalAmount||e.quantity*e.price),netAmount:e.netAmount||e.total||e.totalAmount||e.quantity*e.price,status:e.status||"completed",timestamp:new Date(e.timestamp||e.createdAt||Date.now()),orderId:e.orderId||`ORD_${Date.now()}_${t}`,exchange:e.exchange||"NSE",sector:e.sector||"Unknown",gainLoss:e.gainLoss,gainLossPercent:e.gainLossPercent}}).filter((e,t,n)=>t===n.findIndex(t=>t.id===e.id));s.sort((e,t)=>new Date(t.timestamp)-new Date(e.timestamp)),0===s.length?c(L.slice(0,2)):c(s),u(!1)}catch(e){Ze.error("Failed to load transaction history"),u(!1)}})()},[null==r?void 0:r.transactions]);const I=n.useMemo(()=>{let e=[...l];if(h&&(e=e.filter(e=>e.symbol.toLowerCase().includes(h.toLowerCase())||e.name.toLowerCase().includes(h.toLowerCase())||e.orderId.toLowerCase().includes(h.toLowerCase()))),"all"!==p&&(e=e.filter(e=>e.type===p)),"all"!==v&&(e=e.filter(e=>e.status===v)),"all"!==b){const t=new Date,n=new Date;switch(b){case"today":n.setHours(0,0,0,0);break;case"week":n.setDate(t.getDate()-7);break;case"month":n.setMonth(t.getMonth()-1);break;case"year":n.setFullYear(t.getFullYear()-1)}e=e.filter(e=>e.timestamp>=n)}return e.sort((e,t)=>{let n,s;switch(w){case"date":default:n=e.timestamp,s=t.timestamp;break;case"symbol":n=e.symbol,s=t.symbol;break;case"amount":n=e.totalAmount,s=t.totalAmount;break;case"quantity":n=e.quantity,s=t.quantity;break;case"status":n=e.status,s=t.status}return n instanceof Date&&s instanceof Date?"asc"===k?n-s:s-n:"string"==typeof n?"asc"===k?n.localeCompare(s):s.localeCompare(n):"asc"===k?n-s:s-n}),e},[l,h,p,v,b,w,k]),A=n.useMemo(()=>{const e=I.length,t=I.filter(e=>"completed"===e.status),n=t.filter(e=>"buy"===e.type),s=t.filter(e=>"sell"===e.type),a=n.reduce((e,t)=>e+t.totalAmount,0),r=s.reduce((e,t)=>e+t.totalAmount,0),i=t.reduce((e,t)=>e+(t.fees||0),0),o=s.reduce((e,t)=>e+(t.gainLoss||0),0);return{totalTransactions:e,completedTransactions:t.length,buyTransactions:n.length,sellTransactions:s.length,totalBuyAmount:a,totalSellAmount:r,totalFees:i,totalGainLoss:o,successRate:e>0?t.length/e*100:0}},[I]),O=e=>{w===e?S("asc"===k?"desc":"asc"):(N(e),S("desc"))},D=e=>{switch(e){case"completed":return B.jsx(ft,{className:"status-icon completed"});case"pending":return B.jsx(tt,{className:"status-icon pending"});case"failed":return B.jsx(wn,{className:"status-icon failed"});default:return B.jsx(yt,{className:"status-icon"})}},R=e=>"buy"===e?B.jsx(vn,{className:"type-icon buy"}):B.jsx(yn,{className:"type-icon sell"});return d?B.jsx("div",{className:"history-page",children:B.jsx("div",{className:"history-container",children:B.jsxs("div",{className:"loading-container",children:[B.jsx("div",{className:"loading-spinner"}),B.jsx("p",{children:"Loading transaction history..."})]})})}):B.jsxs("div",{className:"history-page",children:[B.jsxs("div",{className:"history-header",children:[B.jsxs("div",{className:"header-content",children:[B.jsxs("div",{className:"header-left",children:[B.jsx("div",{className:"header-icon",children:B.jsx(yt,{})}),B.jsxs("div",{className:"header-text",children:[B.jsx("h1",{children:"Transaction History"}),B.jsx("p",{children:"Track all your trading activities and portfolio changes"})]})]}),B.jsx("div",{className:"header-actions",children:B.jsxs("button",{className:"action-btn "+(P?"active":""),onClick:()=>E(!P),children:[B.jsx(Lt,{}),"Filters"]})})]}),B.jsxs("div",{className:"stats-overview",children:[B.jsxs("div",{className:"stat-card",children:[B.jsx("div",{className:"stat-icon",children:B.jsx(et,{})}),B.jsxs("div",{className:"stat-content",children:[B.jsx("div",{className:"stat-value",children:A.totalTransactions}),B.jsx("div",{className:"stat-label",children:"Total Transactions"})]})]}),B.jsxs("div",{className:"stat-card",children:[B.jsx("div",{className:"stat-icon positive",children:B.jsx(vn,{})}),B.jsxs("div",{className:"stat-content",children:[B.jsx("div",{className:"stat-value",children:Co(A.totalBuyAmount)}),B.jsx("div",{className:"stat-label",children:"Total Invested"})]})]}),B.jsxs("div",{className:"stat-card",children:[B.jsx("div",{className:"stat-icon negative",children:B.jsx(yn,{})}),B.jsxs("div",{className:"stat-content",children:[B.jsx("div",{className:"stat-value",children:Co(A.totalSellAmount)}),B.jsx("div",{className:"stat-label",children:"Total Sold"})]})]}),B.jsxs("div",{className:"stat-card",children:[B.jsx("div",{className:"stat-icon",children:B.jsx(fn,{})}),B.jsxs("div",{className:"stat-content",children:[B.jsxs("div",{className:"stat-value",children:[A.successRate.toFixed(1),"%"]}),B.jsx("div",{className:"stat-label",children:"Success Rate"})]})]})]})]}),B.jsxs("div",{className:"history-container",children:[B.jsx(g,{children:P&&B.jsx(y.div,{className:"filters-panel",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:B.jsxs("div",{className:"filters-content",children:[B.jsxs("div",{className:"filter-group",children:[B.jsx("label",{children:"Search"}),B.jsxs("div",{className:"search-wrapper",children:[B.jsx(an,{className:"search-icon"}),B.jsx("input",{type:"text",placeholder:"Search by symbol, name, or order ID...",value:h,onChange:e=>m(e.target.value),className:"search-input"}),h&&B.jsx("button",{className:"clear-search",onClick:()=>m(""),children:B.jsx(Nn,{})})]})]}),B.jsxs("div",{className:"filter-group",children:[B.jsx("label",{children:"Transaction Type"}),B.jsxs("select",{value:p,onChange:e=>f(e.target.value),className:"filter-select",children:[B.jsx("option",{value:"all",children:"All Types"}),B.jsx("option",{value:"buy",children:"Buy Orders"}),B.jsx("option",{value:"sell",children:"Sell Orders"})]})]}),B.jsxs("div",{className:"filter-group",children:[B.jsx("label",{children:"Status"}),B.jsxs("select",{value:v,onChange:e=>x(e.target.value),className:"filter-select",children:[B.jsx("option",{value:"all",children:"All Status"}),B.jsx("option",{value:"completed",children:"Completed"}),B.jsx("option",{value:"pending",children:"Pending"}),B.jsx("option",{value:"failed",children:"Failed"})]})]}),B.jsxs("div",{className:"filter-group",children:[B.jsx("label",{children:"Date Range"}),B.jsxs("select",{value:b,onChange:e=>j(e.target.value),className:"filter-select",children:[B.jsx("option",{value:"all",children:"All Time"}),B.jsx("option",{value:"today",children:"Today"}),B.jsx("option",{value:"week",children:"Last 7 Days"}),B.jsx("option",{value:"month",children:"Last Month"}),B.jsx("option",{value:"year",children:"Last Year"})]})]}),B.jsx("div",{className:"filter-actions",children:B.jsx("button",{className:"clear-filters-btn",onClick:()=>{m(""),f("all"),x("all"),j("all")},children:"Clear All"})})]})})}),B.jsx("div",{className:"transactions-section",children:0===I.length?B.jsxs("div",{className:"empty-state",children:[B.jsx("div",{className:"empty-icon",children:B.jsx(yt,{})}),B.jsx("h3",{children:"No transactions found"}),B.jsx("p",{children:h||"all"!==p||"all"!==v||"all"!==b?"No transactions match your current filters":"Start trading to see your transaction history here"}),(h||"all"!==p||"all"!==v||"all"!==b)&&B.jsx("button",{className:"clear-filters-btn",onClick:()=>{m(""),f("all"),x("all"),j("all")},children:"Clear Filters"})]}):B.jsxs("div",{className:"transactions-table",children:[B.jsx("div",{className:"table-header",children:B.jsxs("div",{className:"table-row header",children:[B.jsxs("div",{className:"col-date sortable",onClick:()=>O("date"),children:["Date & Time","date"===w&&("asc"===k?B.jsx(lt,{}):B.jsx(at,{}))]}),B.jsxs("div",{className:"col-stock sortable",onClick:()=>O("symbol"),children:["Stock","symbol"===w&&("asc"===k?B.jsx(lt,{}):B.jsx(at,{}))]}),B.jsx("div",{className:"col-type",children:"Type"}),B.jsxs("div",{className:"col-quantity sortable",onClick:()=>O("quantity"),children:["Quantity","quantity"===w&&("asc"===k?B.jsx(lt,{}):B.jsx(at,{}))]}),B.jsx("div",{className:"col-price",children:"Price"}),B.jsxs("div",{className:"col-amount sortable",onClick:()=>O("amount"),children:["Total Amount","amount"===w&&("asc"===k?B.jsx(lt,{}):B.jsx(at,{}))]}),B.jsx("div",{className:"col-gain-loss",children:"Gain/Loss"}),B.jsxs("div",{className:"col-status sortable",onClick:()=>O("status"),children:["Status","status"===w&&("asc"===k?B.jsx(lt,{}):B.jsx(at,{}))]}),B.jsx("div",{className:"col-actions",children:"Actions"})]})}),B.jsx("div",{className:"table-body",children:I.map((e,t)=>{var n;return B.jsxs(y.div,{className:"table-row clickable",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:.05*t},onClick:()=>T(e),children:[B.jsx("div",{className:"col-date",children:B.jsxs("div",{className:"date-info",children:[B.jsx("span",{className:"date",children:Po(e.timestamp,"MMM DD, YYYY")}),B.jsx("span",{className:"time",children:Po(e.timestamp,"HH:mm")})]})}),B.jsx("div",{className:"col-stock",children:B.jsxs("div",{className:"stock-info",children:[B.jsx("span",{className:"symbol",children:e.symbol}),B.jsx("span",{className:"name",children:e.name}),B.jsx("span",{className:"exchange",children:e.exchange})]})}),B.jsx("div",{className:"col-type",children:B.jsxs("div",{className:`type-badge ${e.type}`,children:[R(e.type),B.jsx("span",{children:e.type.toUpperCase()})]})}),B.jsx("div",{className:"col-quantity",children:B.jsx("span",{className:"quantity",children:To(e.quantity)})}),B.jsx("div",{className:"col-price",children:B.jsx("span",{className:"price",children:Co(e.price)})}),B.jsx("div",{className:"col-amount",children:B.jsxs("div",{className:"amount-info",children:[B.jsx("span",{className:"total",children:Co(e.totalAmount)}),B.jsxs("span",{className:"fees",children:["Fees: ",Co(e.fees||0)]})]})}),B.jsx("div",{className:"col-gain-loss",children:void 0!==e.gainLoss?B.jsxs("div",{className:"gain-loss "+(e.gainLoss>=0?"positive":"negative"),children:[B.jsxs("span",{className:"amount",children:[e.gainLoss>=0?"+":"",Co(e.gainLoss)]}),B.jsxs("span",{className:"percent",children:["(",e.gainLoss>=0?"+":"",null==(n=e.gainLossPercent)?void 0:n.toFixed(2),"%)"]})]}):B.jsx("span",{className:"no-data",children:"-"})}),B.jsx("div",{className:"col-status",children:B.jsxs("div",{className:`status-badge ${e.status}`,children:[D(e.status),B.jsx("span",{children:e.status})]})}),B.jsx("div",{className:"col-actions",children:B.jsx("button",{className:"action-btn-small",onClick:t=>{t.stopPropagation(),T(e)},title:"View Details",children:B.jsx(Pt,{})})})]},e.id)})})]})})]}),B.jsx(g,{children:C&&B.jsx(y.div,{className:"modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>T(null),children:B.jsxs(y.div,{className:"modal-content transaction-detail-modal",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:e=>e.stopPropagation(),children:[B.jsxs("div",{className:"modal-header",children:[B.jsx("h3",{children:"Transaction Details"}),B.jsx("button",{className:"modal-close",onClick:()=>T(null),children:B.jsx(Nn,{})})]}),B.jsx("div",{className:"modal-body",children:B.jsxs("div",{className:"transaction-details",children:[B.jsxs("div",{className:"detail-section",children:[B.jsx("h4",{children:"Basic Information"}),B.jsxs("div",{className:"detail-grid",children:[B.jsxs("div",{className:"detail-item",children:[B.jsx("label",{children:"Transaction ID"}),B.jsx("span",{children:C.id})]}),B.jsxs("div",{className:"detail-item",children:[B.jsx("label",{children:"Order ID"}),B.jsx("span",{children:C.orderId})]}),B.jsxs("div",{className:"detail-item",children:[B.jsx("label",{children:"Date & Time"}),B.jsx("span",{children:Po(C.timestamp,"MMM DD, YYYY HH:mm:ss")})]}),B.jsxs("div",{className:"detail-item",children:[B.jsx("label",{children:"Status"}),B.jsxs("div",{className:`status-badge ${C.status}`,children:[D(C.status),B.jsx("span",{children:C.status})]})]})]})]}),B.jsxs("div",{className:"detail-section",children:[B.jsx("h4",{children:"Stock Information"}),B.jsxs("div",{className:"detail-grid",children:[B.jsxs("div",{className:"detail-item",children:[B.jsx("label",{children:"Symbol"}),B.jsx("span",{children:C.symbol})]}),B.jsxs("div",{className:"detail-item",children:[B.jsx("label",{children:"Company Name"}),B.jsx("span",{children:C.name})]}),B.jsxs("div",{className:"detail-item",children:[B.jsx("label",{children:"Exchange"}),B.jsx("span",{children:C.exchange})]}),B.jsxs("div",{className:"detail-item",children:[B.jsx("label",{children:"Sector"}),B.jsx("span",{children:C.sector})]})]})]}),B.jsxs("div",{className:"detail-section",children:[B.jsx("h4",{children:"Transaction Details"}),B.jsxs("div",{className:"detail-grid",children:[B.jsxs("div",{className:"detail-item",children:[B.jsx("label",{children:"Type"}),B.jsxs("div",{className:`type-badge ${C.type}`,children:[R(C.type),B.jsx("span",{children:C.type.toUpperCase()})]})]}),B.jsxs("div",{className:"detail-item",children:[B.jsx("label",{children:"Quantity"}),B.jsxs("span",{children:[To(C.quantity)," shares"]})]}),B.jsxs("div",{className:"detail-item",children:[B.jsx("label",{children:"Price per Share"}),B.jsx("span",{children:Co(C.price)})]}),B.jsxs("div",{className:"detail-item",children:[B.jsx("label",{children:"Total Amount"}),B.jsx("span",{children:Co(C.totalAmount)})]}),B.jsxs("div",{className:"detail-item",children:[B.jsx("label",{children:"Fees & Charges"}),B.jsx("span",{children:Co(C.fees||0)})]}),B.jsxs("div",{className:"detail-item",children:[B.jsx("label",{children:"Net Amount"}),B.jsx("span",{className:"net-amount",children:Co(C.netAmount)})]})]})]}),void 0!==C.gainLoss&&B.jsxs("div",{className:"detail-section",children:[B.jsx("h4",{children:"Performance"}),B.jsxs("div",{className:"detail-grid",children:[B.jsxs("div",{className:"detail-item",children:[B.jsx("label",{children:"Gain/Loss Amount"}),B.jsxs("span",{className:"gain-loss "+(C.gainLoss>=0?"positive":"negative"),children:[C.gainLoss>=0?"+":"",Co(C.gainLoss)]})]}),B.jsxs("div",{className:"detail-item",children:[B.jsx("label",{children:"Gain/Loss Percentage"}),B.jsxs("span",{className:"gain-loss "+(C.gainLoss>=0?"positive":"negative"),children:[C.gainLoss>=0?"+":"",null==(s=C.gainLossPercent)?void 0:s.toFixed(2),"%"]})]})]})]}),"failed"===C.status&&C.failureReason&&B.jsxs("div",{className:"detail-section",children:[B.jsx("h4",{children:"Failure Information"}),B.jsxs("div",{className:"failure-reason",children:[B.jsx(wn,{className:"failure-icon"}),B.jsx("span",{children:C.failureReason})]})]})]})}),B.jsxs("div",{className:"modal-footer",children:[B.jsx("button",{className:"btn secondary",onClick:()=>T(null),children:"Close"}),B.jsx("button",{className:"btn primary",onClick:()=>a(`/stock/${C.symbol}`),children:"View Stock"})]})]})})})]})},tu=({user:e,theme:t})=>{const[s,a]=n.useState("all"),[r,i]=n.useState(!1),[o,l]=n.useState([]),{query:c,setQuery:d,results:u,recentSearches:h,showHistory:m,handleHistoryClick:p,loading:f,clearSearch:g,hasResults:v}=ai({enableSuggestions:!1,enableHistory:!0,limit:30,debounceMs:500}),x=e=>{const t=new Date,n=new Date(e),s=Math.floor((t-n)/36e5);return s<1?"Just now":s<24?`${s}h ago`:`${Math.floor(s/24)}d ago`},b=[{id:1,title:"Sensex Surges 500 Points as Banking Stocks Rally on RBI Policy Optimism",summary:"Indian benchmark indices closed higher on Tuesday as banking and financial stocks led the rally following positive sentiment around the upcoming RBI monetary policy meeting.",content:"The BSE Sensex gained 501.92 points to close at 65,953.48, while the NSE Nifty 50 advanced 145.30 points to end at 19,674.25. Banking stocks were the top performers with HDFC Bank, ICICI Bank, and Kotak Mahindra Bank leading the gains.",category:"market",source:"Economic Times",author:"Rajesh Kumar",publishedAt:"2024-01-15T10:30:00Z",imageUrl:"https://images.unsplash.com/photo-1611974789855-9c2a0a7236a3?w=400",readTime:"3 min read",tags:["Sensex","Banking","RBI","Market Rally"],isBookmarked:!1},{id:2,title:"Reliance Industries Reports Strong Q3 Results, Beats Estimates",summary:"Reliance Industries Ltd reported better-than-expected quarterly results driven by strong performance in its retail and digital services segments.",content:"The oil-to-telecom conglomerate posted a net profit of ₹18,549 crore for the quarter ended December 2023, up 8.5% year-on-year. Revenue from operations increased to ₹2.35 lakh crore.",category:"earnings",source:"Business Standard",author:"Priya Sharma",publishedAt:"2024-01-15T09:15:00Z",imageUrl:"https://images.unsplash.com/photo-1560472354-b33ff0c44a43?w=400",readTime:"4 min read",tags:["Reliance","Earnings","Q3 Results"],isBookmarked:!0},{id:3,title:"IT Stocks Under Pressure as US Fed Signals Hawkish Stance",summary:"Indian IT stocks declined in early trade as the US Federal Reserve indicated a more aggressive approach to interest rate hikes.",content:"TCS, Infosys, and Wipro were among the top losers as investors worried about the impact of higher interest rates on IT spending by US clients. The Nifty IT index fell 2.3%.",category:"stocks",source:"Mint",author:"Amit Verma",publishedAt:"2024-01-15T08:45:00Z",imageUrl:"https://images.unsplash.com/photo-1551288049-bebda4e38f71?w=400",readTime:"2 min read",tags:["IT Stocks","Fed Policy","TCS","Infosys"],isBookmarked:!1},{id:4,title:"Government Announces New PLI Scheme for Electronics Manufacturing",summary:"The government unveiled a new Production Linked Incentive scheme worth ₹76,000 crore to boost electronics manufacturing in India.",content:"The scheme aims to attract global electronics manufacturers and create employment opportunities. Companies like Apple, Samsung, and Foxconn are expected to benefit from this initiative.",category:"policy",source:"Financial Express",author:"Neha Gupta",publishedAt:"2024-01-15T07:30:00Z",imageUrl:"https://images.unsplash.com/photo-1518709268805-4e9042af2176?w=400",readTime:"5 min read",tags:["PLI Scheme","Electronics","Manufacturing","Policy"],isBookmarked:!1},{id:5,title:"Crude Oil Prices Rise on Middle East Tensions, OMCs in Focus",summary:"Oil marketing companies gained as crude oil prices surged due to escalating tensions in the Middle East region.",content:"Brent crude futures rose 2.5% to $85.40 per barrel. Indian Oil Corporation, BPCL, and HPCL were among the top gainers in the energy sector.",category:"market",source:"Reuters",author:"Global Desk",publishedAt:"2024-01-15T06:00:00Z",imageUrl:"https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=400",readTime:"3 min read",tags:["Crude Oil","OMCs","Energy Sector"],isBookmarked:!1},{id:6,title:"FII Inflows Continue as India Remains Attractive Investment Destination",summary:"Foreign institutional investors pumped in ₹12,500 crore into Indian equities last week, showing continued confidence in the market.",content:"The sustained FII inflows reflect positive sentiment towards Indian markets amid global uncertainties. Experts believe India's growth prospects remain strong.",category:"economy",source:"Moneycontrol",author:"Investment Desk",publishedAt:"2024-01-14T16:20:00Z",imageUrl:"https://images.unsplash.com/photo-1559526324-4b87b5e36e44?w=400",readTime:"4 min read",tags:["FII","Investment","Market Flows"],isBookmarked:!0}].filter(e=>{const t=e.title.toLowerCase().includes(c.toLowerCase())||e.summary.toLowerCase().includes(c.toLowerCase())||e.tags.some(e=>e.toLowerCase().includes(c.toLowerCase())),n="all"===s||e.category===s;return t&&n});return B.jsxs("div",{className:"news-page",children:[B.jsx(So,{icon:At,title:"Market News",subtitle:"Stay updated with the latest market news and analysis from trusted sources",borderColor:"info",actions:[{label:"Refresh",icon:nn,onClick:async()=>{i(!0),await new Promise(e=>setTimeout(e,1500)),i(!1)},variant:"secondary",disabled:r},{label:"Bookmarks",icon:ht,onClick:()=>{},variant:"primary"}]}),B.jsxs("div",{className:"news-container",children:[B.jsxs(y.div,{className:"news-controls",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},children:[B.jsxs("div",{className:"controls-left",children:[B.jsx("div",{className:"search-container",children:B.jsx(ri,{placeholder:"Search news articles...",value:c,onChange:d,onClear:g,recentSearches:h,onHistoryClick:p,showHistory:m,loading:f,size:"md",showSuggestions:!1,enableHistory:!0,className:"news-search-input"})}),B.jsx("div",{className:"category-filter",children:[{id:"all",name:"All News",count:45},{id:"market",name:"Market",count:12},{id:"stocks",name:"Stocks",count:8},{id:"economy",name:"Economy",count:10},{id:"policy",name:"Policy",count:6},{id:"earnings",name:"Earnings",count:9}].map(e=>B.jsxs("button",{className:"category-btn "+(s===e.id?"active":""),onClick:()=>a(e.id),children:[e.name,B.jsx("span",{className:"category-count",children:e.count})]},e.id))})]}),B.jsx("div",{className:"controls-right",children:B.jsxs("button",{className:"btn-premium btn-ghost",children:[B.jsx(Lt,{size:16}),"Filter"]})})]}),B.jsx(y.div,{className:"news-grid",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:b.map((e,t)=>B.jsxs(y.article,{className:"news-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:.1*t},children:[B.jsxs("div",{className:"news-image",children:[B.jsx("img",{src:e.imageUrl,alt:e.title}),B.jsx("div",{className:"news-category",children:B.jsx("span",{className:`category-tag ${e.category}`,children:e.category.toUpperCase()})})]}),B.jsxs("div",{className:"news-content",children:[B.jsxs("div",{className:"news-meta",children:[B.jsxs("div",{className:"meta-left",children:[B.jsxs("span",{className:"news-source",children:[B.jsx(xn,{size:12}),e.source]}),B.jsxs("span",{className:"news-time",children:[B.jsx(yt,{size:12}),x(e.publishedAt)]})]}),B.jsx("div",{className:"meta-right",children:B.jsx("span",{className:"read-time",children:e.readTime})})]}),B.jsx("h3",{className:"news-title",children:e.title}),B.jsx("p",{className:"news-summary",children:e.summary}),B.jsx("div",{className:"news-tags",children:e.tags.slice(0,3).map(e=>B.jsxs("span",{className:"news-tag",children:[B.jsx(pn,{size:10}),e]},e))}),B.jsxs("div",{className:"news-actions",children:[B.jsx("div",{className:"actions-left",children:B.jsxs("button",{className:"news-author",children:["By ",e.author]})}),B.jsxs("div",{className:"actions-right",children:[B.jsx("button",{className:"action-btn "+(o.includes(e.id)||e.isBookmarked?"bookmarked":""),onClick:()=>{return t=e.id,void l(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t]);var t},title:"Bookmark",children:B.jsx(ht,{size:16})}),B.jsx("button",{className:"action-btn",onClick:()=>(e=>{navigator.share?navigator.share({title:e.title,text:e.summary,url:window.location.href}):navigator.clipboard.writeText(window.location.href)})(e),title:"Share",children:B.jsx(ln,{size:16})}),B.jsx("button",{className:"action-btn",title:"Read Full Article",children:B.jsx(Tt,{size:16})})]})]})]})]},e.id))}),B.jsx(y.div,{className:"load-more-section",initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.4},children:B.jsx("button",{className:"btn-premium btn-secondary btn-lg",children:"Load More Articles"})})]})]})},nu=({user:e,theme:t})=>{const[s,a]=n.useState(""),[r,i]=n.useState(new Set),[o,l]=n.useState(!1),[c,d]=n.useState(!1),{notifications:u,unreadCount:h,loading:m,error:p,filters:f,pagination:v,connectionStatus:x,fetchNotifications:b,markAsRead:j,markAllAsRead:w,deleteNotification:N,setFilters:k,loadMore:S}=mr();n.useEffect(()=>{b()},[b]);const C=n.useCallback(()=>{b()},[b]),T=n.useCallback((e,t)=>{k({[e]:t})},[k]),P=u.filter(e=>{if(s){const t=s.toLowerCase();if(!e.title.toLowerCase().includes(t)&&!e.message.toLowerCase().includes(t))return!1}return("all"===f.type||e.type===f.type)&&(!("read"===f.read&&!e.read)&&("unread"!==f.read||!e.read))}),E=n.useCallback(e=>{const t=new Set(r);t.has(e)?t.delete(e):t.add(e),i(t)},[r]),L=n.useCallback(()=>{r.size===P.length?i(new Set):i(new Set(P.map(e=>e.id||e._id)))},[r,P]),I=n.useCallback(async()=>{const e=Array.from(r).map(e=>j(e));await Promise.all(e),i(new Set),d(!1)},[r,j]),A=n.useCallback(async()=>{const e=Array.from(r).map(e=>N(e));await Promise.all(e),i(new Set),d(!1)},[r,N]),O=n.useCallback(()=>{d(e=>!e),c&&i(new Set)},[c]);return B.jsxs("div",{className:"notifications-page",children:[B.jsx(So,{icon:ut,title:"Notifications",subtitle:`${h} unread • ${"connected"===x?"LIVE":"OFFLINE"}`,borderColor:"primary",showNotifications:!1,actions:[{label:c?"Cancel":"Select",icon:c?Nn:St,onClick:O,variant:c?"outline-danger":"outline"},{label:"Refresh",icon:nn,onClick:C,variant:"secondary",disabled:m},{label:"Settings",icon:on,onClick:()=>{},variant:"outline"}]}),B.jsxs("div",{className:"notifications-content",children:[B.jsx(g,{children:h>0&&!c&&B.jsx(y.div,{className:"notifications-actions",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},children:B.jsxs(y.button,{className:"action-btn mark-all",onClick:w,whileHover:{scale:1.05},whileTap:{scale:.95},children:[B.jsx(gt,{}),"Mark all read"]})})}),B.jsxs("div",{className:"notifications-controls",children:[B.jsxs("div",{className:"search-container",children:[B.jsx(an,{className:"search-icon"}),B.jsx("input",{type:"text",placeholder:"Search notifications...",value:s,onChange:e=>a(e.target.value),className:"search-input"})]}),B.jsxs("button",{className:"filter-toggle",onClick:()=>l(e=>!e),children:[B.jsx(gt,{}),B.jsx("span",{children:"Filters"})]})]}),B.jsx(g,{children:o&&B.jsxs(y.div,{className:"filters-container",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},children:[B.jsxs("div",{className:"filter-group",children:[B.jsx("label",{children:"Type:"}),B.jsxs("select",{value:f.type,onChange:e=>T("type",e.target.value),children:[B.jsx("option",{value:"all",children:"All Types"}),B.jsx("option",{value:"info",children:"Info"}),B.jsx("option",{value:"success",children:"Success"}),B.jsx("option",{value:"warning",children:"Warning"}),B.jsx("option",{value:"error",children:"Error"}),B.jsx("option",{value:"alert",children:"Alert"})]})]}),B.jsxs("div",{className:"filter-group",children:[B.jsx("label",{children:"Status:"}),B.jsxs("select",{value:f.read,onChange:e=>T("read",e.target.value),children:[B.jsx("option",{value:"all",children:"All"}),B.jsx("option",{value:"unread",children:"Unread"}),B.jsx("option",{value:"read",children:"Read"})]})]})]})}),B.jsx(g,{children:r.size>0&&B.jsxs(y.div,{className:"bulk-actions",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:[B.jsxs("div",{className:"bulk-info",children:[B.jsx("input",{type:"checkbox",checked:r.size===P.length,onChange:L}),B.jsxs("span",{children:[r.size," selected"]})]}),B.jsxs("div",{className:"bulk-buttons",children:[B.jsxs("button",{onClick:I,children:[B.jsx(gt,{})," Mark as read"]}),B.jsxs("button",{onClick:A,className:"danger",children:[B.jsx(gn,{})," Delete"]})]})]})}),B.jsx("div",{className:"notifications-list",children:p?B.jsxs("div",{className:"error-state",children:[B.jsx(ut,{size:48}),B.jsx("h3",{children:"Failed to load notifications"}),B.jsx("p",{children:p}),B.jsx("button",{onClick:C,children:"Try again"})]}):P.length>0?B.jsxs(B.Fragment,{children:[P.map((e,t)=>B.jsxs(y.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.05*t},className:"notification-wrapper",children:[B.jsx(g,{mode:"wait",children:c&&B.jsx(y.input,{type:"checkbox",checked:r.has(e.id||e._id),onChange:()=>E(e.id||e._id),className:"notification-checkbox",initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0}},"checkbox")}),B.jsx(wo,{notification:e,onClick:()=>j(e.id||e._id),onDelete:()=>N(e.id||e._id),onMarkAsRead:()=>j(e.id||e._id),compact:!1,showActions:!c})]},e.id||e._id)),v.hasMore&&B.jsx("div",{className:"load-more-container",children:B.jsx(y.button,{className:"load-more-btn",onClick:S,disabled:m,whileHover:{scale:1.02},whileTap:{scale:.98},children:m?"Loading...":"Load More"})})]}):B.jsxs("div",{className:"empty-state",children:[B.jsx(ut,{size:48}),B.jsx("h3",{children:"No notifications found"}),B.jsx("p",{children:s||"all"!==f.type||"all"!==f.read?"Try adjusting your search or filters":"You're all caught up! New notifications will appear here."})]})})]})]})},su=({label:e,description:t,icon:n,isToggled:s,onToggle:a})=>B.jsxs("div",{className:"toggle-item",children:[B.jsxs("div",{className:"toggle-info",children:[n&&B.jsx(n,{className:"toggle-icon"}),B.jsxs("div",{children:[B.jsx("div",{className:"toggle-label",children:e}),B.jsx("div",{className:"toggle-description",children:t})]})]}),B.jsx("div",{className:"toggle-switch "+(s?"on":"off"),onClick:a,children:B.jsx("div",{className:"toggle-thumb"})})]}),au=async e=>{var t,n;try{return{success:!0,data:(await Er.put("/user/settings",e)).data}}catch(s){return{success:!1,message:(null==(n=null==(t=s.response)?void 0:t.data)?void 0:n.message)||"Failed to save settings"}}},ru=async()=>{var e,t;try{const e=await Er.post("/auth/2fa/enable");return{success:!0,qrCodeUrl:e.data.qrCodeUrl,secretKey:e.data.secretKey}}catch(n){return{success:!1,message:(null==(t=null==(e=n.response)?void 0:e.data)?void 0:t.message)||"Failed to enable 2FA"}}},iu=async e=>{var t,n;try{return{success:!0,data:(await Er.post("/auth/2fa/verify",{code:e})).data}}catch(s){return{success:!1,message:(null==(n=null==(t=s.response)?void 0:t.data)?void 0:n.message)||"Invalid verification code"}}},ou=async()=>{var e,t;try{return{success:!0,data:(await Er.post("/auth/2fa/disable")).data}}catch(n){return{success:!1,message:(null==(t=null==(e=n.response)?void 0:e.data)?void 0:t.message)||"Failed to disable 2FA"}}},lu=({isOpen:e,onClose:t,qrCodeUrl:s,onVerifySuccess:a})=>{const[r,i]=n.useState(""),[o,l]=n.useState(!1),[c,d]=n.useState(""),[u,h]=n.useState(!1),m=()=>{i(""),h(!1),t()};return B.jsx(g,{children:e&&B.jsx(y.div,{className:"modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:m,children:B.jsxs(y.div,{className:"modal-content two-fa-modal",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:e=>e.stopPropagation(),children:[B.jsxs("div",{className:"modal-header",children:[B.jsxs("div",{className:"modal-title",children:[B.jsx(cn,{className:"modal-icon"}),B.jsx("h2",{children:"Setup Two-Factor Authentication"})]}),B.jsx("button",{className:"modal-close",onClick:m,children:B.jsx(Nn,{})})]}),B.jsx("div",{className:"modal-body",children:B.jsxs("div",{className:"two-fa-steps",children:[B.jsxs("div",{className:"step",children:[B.jsx("h3",{children:"Step 1: Install an Authenticator App"}),B.jsx("p",{children:"Download and install an authenticator app like Google Authenticator, Authy, or Microsoft Authenticator on your mobile device."})]}),B.jsxs("div",{className:"step",children:[B.jsx("h3",{children:"Step 2: Scan QR Code"}),B.jsx("div",{className:"qr-code-container",children:s?B.jsx("img",{src:s,alt:"2FA QR Code",className:"qr-code"}):B.jsx("div",{className:"qr-placeholder",children:"QR Code will appear here"})}),B.jsx("p",{children:"Scan this QR code with your authenticator app, or manually enter the secret key:"}),c&&B.jsxs("div",{className:"secret-key",children:[B.jsx("code",{children:c}),B.jsx("button",{className:"copy-button",onClick:()=>{navigator.clipboard.writeText(c),h(!0),Ze.success("Secret key copied to clipboard"),setTimeout(()=>h(!1),2e3)},children:u?B.jsx(gt,{}):B.jsx(xt,{})})]})]}),B.jsxs("div",{className:"step",children:[B.jsx("h3",{children:"Step 3: Enter Verification Code"}),B.jsx("p",{children:"Enter the 6-digit code from your authenticator app:"}),B.jsx("div",{className:"verification-input",children:B.jsx("input",{type:"text",value:r,onChange:e=>i(e.target.value.replace(/\D/g,"").slice(0,6)),placeholder:"000000",className:"code-input",maxLength:"6"})})]})]})}),B.jsxs("div",{className:"modal-footer",children:[B.jsx("button",{className:"btn btn-secondary",onClick:m,children:"Cancel"}),B.jsx("button",{className:"btn btn-primary",onClick:async()=>{if(r&&6===r.length){l(!0);try{const e=await iu(r);e.success?(a(),i("")):Ze.error(e.message||"Invalid verification code")}catch(e){Ze.error("Failed to verify code")}finally{l(!1)}}else Ze.error("Please enter a valid 6-digit code")},disabled:o||6!==r.length,children:o?"Verifying...":"Verify & Enable"})]})]})})})},cu=({theme:e,toggleTheme:t})=>{var s,a,r,i,o,l,c,d,u,h,m,p,f;const{user:g,updateProfile:v}=Cn(),[x,b]=n.useState("profile"),[j,w]=n.useState(!1),[N,k]=n.useState({firstName:(null==g?void 0:g.firstName)||"",lastName:(null==g?void 0:g.lastName)||"",email:(null==g?void 0:g.email)||"",phone:(null==g?void 0:g.phoneNumber)||(null==g?void 0:g.phone)||"",bio:(null==g?void 0:g.bio)||"",location:(null==g?void 0:g.location)||""}),[S,C]=n.useState({emailNotifications:(null==(s=null==g?void 0:g.notificationSettings)?void 0:s.emailNotifications)??!0,pushNotifications:(null==(a=null==g?void 0:g.notificationSettings)?void 0:a.pushNotifications)??!0,smsNotifications:(null==(r=null==g?void 0:g.notificationSettings)?void 0:r.smsNotifications)??!1,priceAlerts:(null==(i=null==g?void 0:g.notificationSettings)?void 0:i.priceAlerts)??!0,newsAlerts:(null==(o=null==g?void 0:g.notificationSettings)?void 0:o.newsAlerts)??!0,portfolioUpdates:(null==(l=null==g?void 0:g.notificationSettings)?void 0:l.portfolioUpdates)??!0,weeklyReports:(null==(c=null==g?void 0:g.notificationSettings)?void 0:c.weeklyReports)??!0}),[T,P]=n.useState({twoFactorAuth:(null==g?void 0:g.twoFactorEnabled)||!1,loginAlerts:(null==(d=null==g?void 0:g.securitySettings)?void 0:d.loginAlerts)??!0,sessionTimeout:(null==(u=null==g?void 0:g.securitySettings)?void 0:u.sessionTimeout)??"30"}),[E,L]=n.useState({theme:e,language:(null==(h=null==g?void 0:g.preferences)?void 0:h.language)??"en",currency:(null==(m=null==g?void 0:g.preferences)?void 0:m.currency)??"INR",timezone:(null==(p=null==g?void 0:g.preferences)?void 0:p.timezone)??"Asia/Kolkata",defaultPage:(null==(f=null==g?void 0:g.preferences)?void 0:f.defaultPage)??"dashboard"}),[I,A]=n.useState(!1),[O,D]=n.useState(""),[R,M]=n.useState(!1);n.useEffect(()=>{var e,t,n,s,a,r,i,o,l;g&&(k({firstName:g.firstName||"",lastName:g.lastName||"",email:g.email||"",phone:g.phoneNumber||g.phone||"",bio:g.bio||"",location:g.location||"",avatar:g.profileImage||g.picture||g.avatar||g.profilePicture||null}),C({emailNotifications:(null==(e=g.notificationSettings)?void 0:e.emailNotifications)??!0,pushNotifications:(null==(t=g.notificationSettings)?void 0:t.pushNotifications)??!0,smsNotifications:(null==(n=g.notificationSettings)?void 0:n.smsNotifications)??!1,priceAlerts:(null==(s=g.notificationSettings)?void 0:s.priceAlerts)??!0,newsAlerts:(null==(a=g.notificationSettings)?void 0:a.newsAlerts)??!0,portfolioUpdates:(null==(r=g.notificationSettings)?void 0:r.portfolioUpdates)??!0,weeklyReports:(null==(i=g.notificationSettings)?void 0:i.weeklyReports)??!0}),P({twoFactorAuth:g.twoFactorEnabled||!1,loginAlerts:(null==(o=g.securitySettings)?void 0:o.loginAlerts)??!0,sessionTimeout:(null==(l=g.securitySettings)?void 0:l.sessionTimeout)??"30"}),L(e=>{var t,n,s,a;return{...e,language:(null==(t=g.preferences)?void 0:t.language)??"en",currency:(null==(n=g.preferences)?void 0:n.currency)??"INR",timezone:(null==(s=g.preferences)?void 0:s.timezone)??"Asia/Kolkata",defaultPage:(null==(a=g.preferences)?void 0:a.defaultPage)??"dashboard"}}))},[g]);const _=e=>{const{name:t,value:n}=e.target;k(e=>({...e,[t]:n}))},F=e=>{C(t=>({...t,[e]:!t[e]}))},z=(n,s)=>{L(e=>({...e,[n]:s})),"theme"===n&&s!==e&&t()},U=[{id:"profile",name:"Profile",icon:xn},{id:"notifications",name:"Notifications",icon:ut},{id:"security",name:"Security",icon:cn},{id:"preferences",name:"Preferences",icon:on}],H=()=>B.jsxs("div",{className:"settings-section",children:[B.jsx("h3",{className:"section-title",children:"Profile Information"}),B.jsxs("div",{className:"form-grid",children:[B.jsxs("div",{className:"form-group",children:[B.jsx("label",{className:"form-label",children:"First Name"}),B.jsx("input",{type:"text",className:"form-input",name:"firstName",value:N.firstName,onChange:_})]}),B.jsxs("div",{className:"form-group",children:[B.jsx("label",{className:"form-label",children:"Last Name"}),B.jsx("input",{type:"text",className:"form-input",name:"lastName",value:N.lastName,onChange:_})]}),B.jsxs("div",{className:"form-group",children:[B.jsx("label",{className:"form-label",children:"Email Address"}),B.jsx("input",{type:"email",className:"form-input",name:"email",value:N.email,onChange:_})]}),B.jsxs("div",{className:"form-group",children:[B.jsx("label",{className:"form-label",children:"Phone Number"}),B.jsx("input",{type:"tel",className:"form-input",name:"phone",value:N.phone,onChange:_})]}),B.jsxs("div",{className:"form-group full-width",children:[B.jsx("label",{className:"form-label",children:"Bio"}),B.jsx("textarea",{className:"form-textarea",rows:"3",name:"bio",value:N.bio,onChange:_})]}),B.jsxs("div",{className:"form-group full-width",children:[B.jsx("label",{className:"form-label",children:"Location"}),B.jsx("input",{type:"text",className:"form-input",name:"location",value:N.location,onChange:_})]})]})]}),$=()=>B.jsxs("div",{className:"settings-section",children:[B.jsx("h3",{className:"section-title",children:"Security & Privacy"}),B.jsx("div",{className:"security-groups",children:B.jsxs("div",{className:"security-group",children:[B.jsx("h4",{className:"group-title",children:"Authentication"}),B.jsxs("div",{className:"security-item",children:[B.jsxs("div",{className:"security-info",children:[B.jsx(cn,{className:"security-icon"}),B.jsxs("div",{children:[B.jsx("div",{className:"security-label",children:"Two-Factor Authentication"}),B.jsx("div",{className:"security-description",children:"Add an extra layer of security"})]})]}),B.jsx("div",{className:`toggle-switch ${T.twoFactorAuth?"on":"off"} ${R?"disabled":""}`,onClick:()=>{R||(T.twoFactorAuth?(async()=>{if(window.confirm("Are you sure you want to disable 2FA?"))try{const e=await ou();e.success?(P(e=>({...e,twoFactorAuth:!1})),Ze.success("Two-factor authentication disabled.")):Ze.error(e.message)}catch(e){Ze.error("Failed to disable 2FA.")}})():(async()=>{M(!0);try{const e=await ru();e.success?(D(e.qrCodeUrl),A(!0)):Ze.error(e.message)}catch(e){Ze.error("Failed to initiate 2FA setup.")}finally{M(!1)}})())},children:B.jsx("div",{className:"toggle-thumb"})})]})]})}),B.jsx(lu,{isOpen:I,onClose:()=>A(!1),qrCodeUrl:O,onVerifySuccess:()=>{P(e=>({...e,twoFactorAuth:!0})),Ze.success("Two-factor authentication enabled successfully!"),A(!1)}})]});return B.jsxs("div",{className:"settings-page",children:[B.jsx(So,{icon:on,title:"Settings",subtitle:"Manage your account preferences and security settings",borderColor:"success",actions:[{label:j?"Saving...":"Save Changes",icon:j?nn:sn,onClick:async()=>{w(!0);try{const e={profileData:N,notificationSettings:S,securitySettings:T,preferences:E},t=await au(e),n={...g,firstName:N.firstName,lastName:N.lastName,fullName:`${N.firstName} ${N.lastName}`.trim(),email:N.email,phoneNumber:N.phone,phone:N.phone,location:N.location,bio:N.bio,notificationSettings:S,securitySettings:T,preferences:E};await v(n),t.success?Ze.success("Settings saved successfully!"):Ze.error(t.message||"Failed to save settings.")}catch(e){Ze.error("An unexpected error occurred while saving.")}finally{w(!1)}},variant:"primary",disabled:j,className:j?"spinning":""}]}),B.jsx("div",{className:"settings-container",children:B.jsxs("div",{className:"settings-layout",children:[B.jsx(y.div,{className:"settings-tabs",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.1},children:U.map(e=>{const t=e.icon;return B.jsxs("button",{className:"tab-button "+(x===e.id?"active":""),onClick:()=>b(e.id),children:[B.jsx(t,{size:20}),e.name]},e.id)})}),B.jsx(y.div,{className:"settings-content",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:(()=>{switch(x){case"profile":default:return H();case"notifications":return B.jsxs("div",{className:"settings-section",children:[B.jsx("h3",{className:"section-title",children:"Notification Preferences"}),B.jsx("div",{className:"notification-groups",children:B.jsxs("div",{className:"notification-group",children:[B.jsx("h4",{className:"group-title",children:"Communication"}),B.jsxs("div",{className:"toggle-list",children:[B.jsx(su,{label:"Email Notifications",description:"Receive updates via email",icon:zt,isToggled:S.emailNotifications,onToggle:()=>F("emailNotifications")}),B.jsx(su,{label:"Push Notifications",description:"Browser push notifications",icon:ut,isToggled:S.pushNotifications,onToggle:()=>F("pushNotifications")}),B.jsx(su,{label:"SMS Notifications",description:"Text message alerts",icon:un,isToggled:S.smsNotifications,onToggle:()=>F("smsNotifications")})]})]})})]});case"security":return $();case"preferences":return B.jsxs("div",{className:"settings-section",children:[B.jsx("h3",{className:"section-title",children:"Application Preferences"}),B.jsx("div",{className:"preferences-groups",children:B.jsxs("div",{className:"preferences-group",children:[B.jsx("h4",{className:"group-title",children:"Appearance"}),B.jsxs("div",{className:"form-group",children:[B.jsx("label",{className:"form-label",children:"Theme"}),B.jsxs("div",{className:"theme-selector",children:[B.jsxs("button",{className:"theme-option "+("light"===E.theme?"active":""),onClick:()=>z("theme","light"),children:[B.jsx(mn,{size:16})," Light"]}),B.jsxs("button",{className:"theme-option "+("dark"===E.theme?"active":""),onClick:()=>z("theme","dark"),children:[B.jsx(Gt,{size:16})," Dark"]})]})]})]})})]})}})()},x)]})})]})},du=e=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(e),uu=()=>{var e,t,s,a,r;const[i,o]=n.useState(!1),[l,c]=n.useState(!1),{portfolioData:d}=ui(),{user:u,updateProfile:h,logout:m}=Cn(),[p,f]=n.useState({firstName:"",lastName:"",email:"",phone:"",location:"",bio:"",joinDate:"",avatar:null});n.useEffect(()=>{if(u){const e=(u.fullName||u.name||"").split(" "),t=u.firstName||e[0]||"",n=u.lastName||(e.length>1?e.slice(1).join(" "):"");f({firstName:t,lastName:n,email:u.email||"",phone:u.phoneNumber||u.phone||"",location:u.location||u.address||"",bio:u.bio||"Welcome to TradeBro! Start your trading journey today.",joinDate:u.createdAt||(new Date).toISOString(),avatar:u.profileImage||u.picture||u.avatar||u.profilePicture||null})}},[u]);const g=[{title:"Portfolio Value",value:du((null==d?void 0:d.totalValue)||0),change:void 0!==(null==d?void 0:d.totalGainLossPercentage)?`${d.totalGainLossPercentage>=0?"+":""}${d.totalGainLossPercentage.toFixed(2)}%`:"0.00%",icon:Nt,color:((null==d?void 0:d.totalGainLoss)||0)>=0?"#10B981":"#EF4444"},{title:"Available Cash",value:du((null==d?void 0:d.availableCash)||0),change:"Available",icon:Nt,color:"#3B82F6"},{title:"Total Invested",value:du((null==d?void 0:d.totalInvested)||0),change:`${(null==(e=null==d?void 0:d.holdings)?void 0:e.length)||0} holdings`,icon:vn,color:"#F59E0B"},{title:"Total Transactions",value:(null==(t=null==d?void 0:d.transactions)?void 0:t.length)||0,change:"Completed",icon:et,color:"#8B5CF6"}],v=[{title:"First Trade",description:"Completed your first trade",earned:((null==(s=null==d?void 0:d.transactions)?void 0:s.length)||0)>0},{title:"Portfolio Builder",description:"Built a diversified portfolio",earned:((null==(a=null==d?void 0:d.holdings)?void 0:a.length)||0)>=3},{title:"Profit Maker",description:"Made positive returns",earned:((null==d?void 0:d.totalGainLoss)||0)>0},{title:"Active Trader",description:"Completed 10+ transactions",earned:((null==(r=null==d?void 0:d.transactions)?void 0:r.length)||0)>=10},{title:"Market Expert",description:"Achieved 80% success rate",earned:!1},{title:"Long Term Investor",description:"Held positions for 6+ months",earned:!1}],x=e=>{const{name:t,value:n}=e.target;f(e=>({...e,[t]:n}))};return B.jsxs("div",{className:"profile-page",children:[B.jsx(So,{icon:xn,title:"Profile",subtitle:"Manage your account information and trading preferences",borderColor:"purple",actions:i?[{label:"Cancel",icon:xn,onClick:()=>{if(u){const e=(u.fullName||u.name||"").split(" "),t=e[0]||"",n=e.slice(1).join(" ")||"";f(e=>({...e,firstName:t,lastName:n,email:u.email||"",phone:u.phoneNumber||u.phone||"",location:u.location||"",bio:u.bio||"Welcome to TradeBro! Start your trading journey today."}))}o(!1)},variant:"secondary"},{label:l?"Saving...":"Save Changes",icon:sn,onClick:async()=>{c(!0);try{const e={...u,fullName:`${p.firstName} ${p.lastName}`.trim(),firstName:p.firstName,lastName:p.lastName,email:p.email,phoneNumber:p.phone,location:p.location,bio:p.bio};await h(e),Ze.success("Profile updated successfully!"),o(!1)}catch(e){Ze.error("Failed to save profile changes.")}finally{c(!1)}},variant:"primary",disabled:l}]:[{label:"Edit Profile",icon:Ct,onClick:()=>o(!0),variant:"primary"}]}),B.jsx("div",{className:"profile-container",children:B.jsxs("div",{className:"profile-layout",children:[B.jsxs(y.div,{className:"profile-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},children:[B.jsx("div",{className:"card-header",children:B.jsx("h3",{className:"card-title",children:"Personal Information"})}),B.jsxs("div",{className:"card-content",children:[B.jsxs("div",{className:"profile-avatar-section",children:[B.jsxs("div",{className:"avatar-container",children:[B.jsxs("div",{className:"avatar",children:[p.avatar?B.jsx("img",{src:p.avatar,alt:`${p.firstName} ${p.lastName}`,onError:e=>{e.target.style.display="none",e.target.nextSibling.style.display="flex"}}):null,B.jsx("div",{className:"avatar-placeholder",style:{display:p.avatar?"none":"flex"},children:p.firstName?B.jsxs("span",{className:"avatar-initial",children:[p.firstName.charAt(0).toUpperCase(),p.lastName?p.lastName.charAt(0).toUpperCase():""]}):B.jsx(xn,{size:48})})]}),i&&B.jsx("button",{className:"avatar-edit-btn",onClick:()=>Ze.info("Avatar upload coming soon!"),children:B.jsx(pt,{size:16})})]}),B.jsxs("div",{className:"profile-basic-info",children:[B.jsxs("h2",{className:"profile-name",children:[p.firstName," ",p.lastName]}),B.jsx("p",{className:"profile-email",children:p.email}),B.jsx("div",{className:"profile-meta",children:B.jsxs("span",{className:"join-date",children:[B.jsx(mt,{size:14}),"Joined ",(b=p.joinDate,new Date(b).toLocaleDateString("en-IN",{year:"numeric",month:"long"}))]})})]})]}),B.jsx("div",{className:"profile-form",children:B.jsxs("div",{className:"form-grid",children:[B.jsxs("div",{className:"form-group",children:[B.jsx("label",{className:"form-label",children:"First Name"}),i?B.jsx("input",{type:"text",className:"form-input",name:"firstName",value:p.firstName,onChange:x}):B.jsx("div",{className:"form-display",children:p.firstName})]}),B.jsxs("div",{className:"form-group",children:[B.jsx("label",{className:"form-label",children:"Last Name"}),i?B.jsx("input",{type:"text",className:"form-input",name:"lastName",value:p.lastName,onChange:x}):B.jsx("div",{className:"form-display",children:p.lastName})]}),B.jsxs("div",{className:"form-group",children:[B.jsxs("label",{className:"form-label",children:[B.jsx(zt,{size:16})," Email Address"]}),i?B.jsx("input",{type:"email",className:"form-input",name:"email",value:p.email,onChange:x}):B.jsx("div",{className:"form-display",children:p.email})]}),B.jsxs("div",{className:"form-group",children:[B.jsxs("label",{className:"form-label",children:[B.jsx(Xt,{size:16})," Phone Number"]}),i?B.jsx("input",{type:"tel",className:"form-input",name:"phone",value:p.phone,onChange:x}):B.jsx("div",{className:"form-display",children:p.phone})]}),B.jsxs("div",{className:"form-group full-width",children:[B.jsxs("label",{className:"form-label",children:[B.jsx(Ut,{size:16})," Location"]}),i?B.jsx("input",{type:"text",className:"form-input",name:"location",value:p.location,onChange:x}):B.jsx("div",{className:"form-display",children:p.location})]}),B.jsxs("div",{className:"form-group full-width",children:[B.jsx("label",{className:"form-label",children:"Bio"}),i?B.jsx("textarea",{className:"form-textarea",rows:"3",name:"bio",value:p.bio,onChange:x}):B.jsx("div",{className:"form-display",children:p.bio})]})]})})]})]}),B.jsxs(y.div,{className:"stats-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:[B.jsx("div",{className:"card-header",children:B.jsxs("h3",{className:"card-title",children:[B.jsx(vn,{className:"card-icon"})," Trading Performance"]})}),B.jsx("div",{className:"card-content",children:B.jsx("div",{className:"stats-grid",children:g.map(e=>{const t=e.icon;return B.jsxs("div",{className:"stat-item",children:[B.jsx("div",{className:"stat-icon",style:{color:e.color},children:B.jsx(t,{size:24})}),B.jsxs("div",{className:"stat-content",children:[B.jsx("div",{className:"stat-value",children:e.value}),B.jsx("div",{className:"stat-title",children:e.title}),B.jsx("div",{className:"stat-change",style:{color:e.color},children:e.change})]})]},e.title)})})})]}),B.jsxs(y.div,{className:"achievements-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},children:[B.jsx("div",{className:"card-header",children:B.jsxs("h3",{className:"card-title",children:[B.jsx(ct,{className:"card-icon"})," Achievements"]})}),B.jsx("div",{className:"card-content",children:B.jsx("div",{className:"achievements-grid",children:v.map(e=>B.jsxs("div",{className:"achievement-item "+(e.earned?"earned":"locked"),children:[B.jsx("div",{className:"achievement-icon",children:B.jsx(ct,{size:20})}),B.jsxs("div",{className:"achievement-content",children:[B.jsx("h4",{className:"achievement-title",children:e.title}),B.jsx("p",{className:"achievement-description",children:e.description})]}),e.earned&&B.jsx("div",{className:"achievement-badge",children:B.jsx(cn,{size:16})})]},e.title))})})]}),B.jsxs(y.div,{className:"actions-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},children:[B.jsx("div",{className:"card-header",children:B.jsx("h3",{className:"card-title",children:"Quick Actions"})}),B.jsx("div",{className:"card-content",children:B.jsxs("div",{className:"action-buttons",children:[B.jsxs("button",{className:"action-btn",children:[B.jsx(on,{size:20}),B.jsx("span",{children:"Settings"})]}),B.jsxs("button",{className:"action-btn",children:[B.jsx(cn,{size:20}),B.jsx("span",{children:"Security"})]}),B.jsxs("button",{className:"action-btn logout",onClick:m,children:[B.jsx(Bt,{size:20}),B.jsx("span",{children:"Logout"})]})]})})]})]})})]});var b};function hu(){}function mu(){}const pu=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,fu=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,gu={};function yu(e,t){return((t||gu).jsx?fu:pu).test(e)}const vu=/[ \t\n\f\r]/g;function xu(e){return""===e.replace(vu,"")}class bu{constructor(e,t,n){this.normal=t,this.property=e,n&&(this.space=n)}}function ju(e,t){const n={},s={};for(const a of e)Object.assign(n,a.property),Object.assign(s,a.normal);return new bu(n,s,t)}function wu(e){return e.toLowerCase()}bu.prototype.normal={},bu.prototype.property={},bu.prototype.space=void 0;class Nu{constructor(e,t){this.attribute=t,this.property=e}}Nu.prototype.attribute="",Nu.prototype.booleanish=!1,Nu.prototype.boolean=!1,Nu.prototype.commaOrSpaceSeparated=!1,Nu.prototype.commaSeparated=!1,Nu.prototype.defined=!1,Nu.prototype.mustUseProperty=!1,Nu.prototype.number=!1,Nu.prototype.overloadedBoolean=!1,Nu.prototype.property="",Nu.prototype.spaceSeparated=!1,Nu.prototype.space=void 0;let ku=0;const Su=Au(),Cu=Au(),Tu=Au(),Pu=Au(),Eu=Au(),Lu=Au(),Iu=Au();function Au(){return 2**++ku}const Ou=Object.freeze(Object.defineProperty({__proto__:null,boolean:Su,booleanish:Cu,commaOrSpaceSeparated:Iu,commaSeparated:Lu,number:Pu,overloadedBoolean:Tu,spaceSeparated:Eu},Symbol.toStringTag,{value:"Module"})),Du=Object.keys(Ou);class Ru extends Nu{constructor(e,t,n,s){let a=-1;if(super(e,t),Mu(this,"space",s),"number"==typeof n)for(;++a<Du.length;){const e=Du[a];Mu(this,Du[a],(n&Ou[e])===Ou[e])}}}function Mu(e,t,n){n&&(e[t]=n)}function _u(e){const t={},n={};for(const[s,a]of Object.entries(e.properties)){const r=new Ru(s,e.transform(e.attributes||{},s),a,e.space);e.mustUseProperty&&e.mustUseProperty.includes(s)&&(r.mustUseProperty=!0),t[s]=r,n[wu(s)]=s,n[wu(r.attribute)]=s}return new bu(t,n,e.space)}Ru.prototype.defined=!0;const Fu=_u({properties:{ariaActiveDescendant:null,ariaAtomic:Cu,ariaAutoComplete:null,ariaBusy:Cu,ariaChecked:Cu,ariaColCount:Pu,ariaColIndex:Pu,ariaColSpan:Pu,ariaControls:Eu,ariaCurrent:null,ariaDescribedBy:Eu,ariaDetails:null,ariaDisabled:Cu,ariaDropEffect:Eu,ariaErrorMessage:null,ariaExpanded:Cu,ariaFlowTo:Eu,ariaGrabbed:Cu,ariaHasPopup:null,ariaHidden:Cu,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:Eu,ariaLevel:Pu,ariaLive:null,ariaModal:Cu,ariaMultiLine:Cu,ariaMultiSelectable:Cu,ariaOrientation:null,ariaOwns:Eu,ariaPlaceholder:null,ariaPosInSet:Pu,ariaPressed:Cu,ariaReadOnly:Cu,ariaRelevant:null,ariaRequired:Cu,ariaRoleDescription:Eu,ariaRowCount:Pu,ariaRowIndex:Pu,ariaRowSpan:Pu,ariaSelected:Cu,ariaSetSize:Pu,ariaSort:null,ariaValueMax:Pu,ariaValueMin:Pu,ariaValueNow:Pu,ariaValueText:null,role:null},transform:(e,t)=>"role"===t?t:"aria-"+t.slice(4).toLowerCase()});function Bu(e,t){return t in e?e[t]:t}function zu(e,t){return Bu(e,t.toLowerCase())}const Uu=_u({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Lu,acceptCharset:Eu,accessKey:Eu,action:null,allow:null,allowFullScreen:Su,allowPaymentRequest:Su,allowUserMedia:Su,alt:null,as:null,async:Su,autoCapitalize:null,autoComplete:Eu,autoFocus:Su,autoPlay:Su,blocking:Eu,capture:null,charSet:null,checked:Su,cite:null,className:Eu,cols:Pu,colSpan:null,content:null,contentEditable:Cu,controls:Su,controlsList:Eu,coords:Pu|Lu,crossOrigin:null,data:null,dateTime:null,decoding:null,default:Su,defer:Su,dir:null,dirName:null,disabled:Su,download:Tu,draggable:Cu,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:Su,formTarget:null,headers:Eu,height:Pu,hidden:Tu,high:Pu,href:null,hrefLang:null,htmlFor:Eu,httpEquiv:Eu,id:null,imageSizes:null,imageSrcSet:null,inert:Su,inputMode:null,integrity:null,is:null,isMap:Su,itemId:null,itemProp:Eu,itemRef:Eu,itemScope:Su,itemType:Eu,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:Su,low:Pu,manifest:null,max:null,maxLength:Pu,media:null,method:null,min:null,minLength:Pu,multiple:Su,muted:Su,name:null,nonce:null,noModule:Su,noValidate:Su,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:Su,optimum:Pu,pattern:null,ping:Eu,placeholder:null,playsInline:Su,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:Su,referrerPolicy:null,rel:Eu,required:Su,reversed:Su,rows:Pu,rowSpan:Pu,sandbox:Eu,scope:null,scoped:Su,seamless:Su,selected:Su,shadowRootClonable:Su,shadowRootDelegatesFocus:Su,shadowRootMode:null,shape:null,size:Pu,sizes:null,slot:null,span:Pu,spellCheck:Cu,src:null,srcDoc:null,srcLang:null,srcSet:null,start:Pu,step:null,style:null,tabIndex:Pu,target:null,title:null,translate:null,type:null,typeMustMatch:Su,useMap:null,value:Cu,width:Pu,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:Eu,axis:null,background:null,bgColor:null,border:Pu,borderColor:null,bottomMargin:Pu,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:Su,declare:Su,event:null,face:null,frame:null,frameBorder:null,hSpace:Pu,leftMargin:Pu,link:null,longDesc:null,lowSrc:null,marginHeight:Pu,marginWidth:Pu,noResize:Su,noHref:Su,noShade:Su,noWrap:Su,object:null,profile:null,prompt:null,rev:null,rightMargin:Pu,rules:null,scheme:null,scrolling:Cu,standby:null,summary:null,text:null,topMargin:Pu,valueType:null,version:null,vAlign:null,vLink:null,vSpace:Pu,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:Su,disableRemotePlayback:Su,prefix:null,property:null,results:Pu,security:null,unselectable:null},space:"html",transform:zu}),Hu=_u({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:Iu,accentHeight:Pu,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:Pu,amplitude:Pu,arabicForm:null,ascent:Pu,attributeName:null,attributeType:null,azimuth:Pu,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:Pu,by:null,calcMode:null,capHeight:Pu,className:Eu,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:Pu,diffuseConstant:Pu,direction:null,display:null,dur:null,divisor:Pu,dominantBaseline:null,download:Su,dx:null,dy:null,edgeMode:null,editable:null,elevation:Pu,enableBackground:null,end:null,event:null,exponent:Pu,externalResourcesRequired:null,fill:null,fillOpacity:Pu,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Lu,g2:Lu,glyphName:Lu,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:Pu,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:Pu,horizOriginX:Pu,horizOriginY:Pu,id:null,ideographic:Pu,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:Pu,k:Pu,k1:Pu,k2:Pu,k3:Pu,k4:Pu,kernelMatrix:Iu,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:Pu,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:Pu,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:Pu,overlineThickness:Pu,paintOrder:null,panose1:null,path:null,pathLength:Pu,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:Eu,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:Pu,pointsAtY:Pu,pointsAtZ:Pu,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:Iu,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:Iu,rev:Iu,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:Iu,requiredFeatures:Iu,requiredFonts:Iu,requiredFormats:Iu,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:Pu,specularExponent:Pu,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:Pu,strikethroughThickness:Pu,string:null,stroke:null,strokeDashArray:Iu,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:Pu,strokeOpacity:Pu,strokeWidth:null,style:null,surfaceScale:Pu,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:Iu,tabIndex:Pu,tableValues:null,target:null,targetX:Pu,targetY:Pu,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:Iu,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:Pu,underlineThickness:Pu,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:Pu,values:null,vAlphabetic:Pu,vMathematical:Pu,vectorEffect:null,vHanging:Pu,vIdeographic:Pu,version:null,vertAdvY:Pu,vertOriginX:Pu,vertOriginY:Pu,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:Pu,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:Bu}),$u=_u({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform:(e,t)=>"xlink:"+t.slice(5).toLowerCase()}),qu=_u({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:zu}),Wu=_u({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform:(e,t)=>"xml:"+t.slice(3).toLowerCase()}),Vu={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},Yu=/[A-Z]/g,Gu=/-[a-z]/g,Ju=/^data[-\w.:]+$/i;function Ku(e){return"-"+e.toLowerCase()}function Qu(e){return e.charAt(1).toUpperCase()}const Xu=ju([Fu,Uu,$u,qu,Wu],"html"),Zu=ju([Fu,Hu,$u,qu,Wu],"svg");var eh={},th=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,nh=/\n/g,sh=/^\s*/,ah=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,rh=/^:\s*/,ih=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,oh=/^[;\s]*/,lh=/^\s+|\s+$/g,ch="";function dh(e){return e?e.replace(lh,ch):ch}var uh=i&&i.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(eh,"__esModule",{value:!0}),eh.default=function(e,t){var n=null;if(!e||"string"!=typeof e)return n;var s=(0,hh.default)(e),a="function"==typeof t;return s.forEach(function(e){if("declaration"===e.type){var s=e.property,r=e.value;a?t(s,r,e):r&&((n=n||{})[s]=r)}}),n};var hh=uh(function(e,t){if("string"!=typeof e)throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,s=1;function a(e){var t=e.match(nh);t&&(n+=t.length);var a=e.lastIndexOf("\n");s=~a?e.length-a:s+e.length}function r(){var e={line:n,column:s};return function(t){return t.position=new i(e),c(),t}}function i(e){this.start=e,this.end={line:n,column:s},this.source=t.source}function o(a){var r=new Error(t.source+":"+n+":"+s+": "+a);if(r.reason=a,r.filename=t.source,r.line=n,r.column=s,r.source=e,!t.silent)throw r}function l(t){var n=t.exec(e);if(n){var s=n[0];return a(s),e=e.slice(s.length),n}}function c(){l(sh)}function d(e){var t;for(e=e||[];t=u();)!1!==t&&e.push(t);return e}function u(){var t=r();if("/"==e.charAt(0)&&"*"==e.charAt(1)){for(var n=2;ch!=e.charAt(n)&&("*"!=e.charAt(n)||"/"!=e.charAt(n+1));)++n;if(n+=2,ch===e.charAt(n-1))return o("End of comment missing");var i=e.slice(2,n-2);return s+=2,a(i),e=e.slice(n),s+=2,t({type:"comment",comment:i})}}function h(){var e=r(),t=l(ah);if(t){if(u(),!l(rh))return o("property missing ':'");var n=l(ih),s=e({type:"declaration",property:dh(t[0].replace(th,ch)),value:n?dh(n[0].replace(th,ch)):ch});return l(oh),s}}return i.prototype.content=e,c(),function(){var e,t=[];for(d(t);e=h();)!1!==e&&(t.push(e),d(t));return t}()});var mh={};Object.defineProperty(mh,"__esModule",{value:!0}),mh.camelCase=void 0;var ph=/^--[a-zA-Z0-9_-]+$/,fh=/-([a-z])/g,gh=/^[^-]+$/,yh=/^-(webkit|moz|ms|o|khtml)-/,vh=/^-(ms)-/,xh=function(e,t){return t.toUpperCase()},bh=function(e,t){return"".concat(t,"-")};mh.camelCase=function(e,t){return void 0===t&&(t={}),function(e){return!e||gh.test(e)||ph.test(e)}(e)?e:(e=e.toLowerCase(),(e=t.reactCompat?e.replace(vh,bh):e.replace(yh,bh)).replace(fh,xh))};var jh=(i&&i.__importDefault||function(e){return e&&e.__esModule?e:{default:e}})(eh),wh=mh;function Nh(e,t){var n={};return e&&"string"==typeof e?((0,jh.default)(e,function(e,s){e&&s&&(n[(0,wh.camelCase)(e,t)]=s)}),n):n}Nh.default=Nh;const kh=r(Nh),Sh=Th("end"),Ch=Th("start");function Th(e){return function(t){const n=t&&t.position&&t.position[e]||{};if("number"==typeof n.line&&n.line>0&&"number"==typeof n.column&&n.column>0)return{line:n.line,column:n.column,offset:"number"==typeof n.offset&&n.offset>-1?n.offset:void 0}}}function Ph(e){return e&&"object"==typeof e?"position"in e||"type"in e?Lh(e.position):"start"in e||"end"in e?Lh(e):"line"in e||"column"in e?Eh(e):"":""}function Eh(e){return Ih(e&&e.line)+":"+Ih(e&&e.column)}function Lh(e){return Eh(e&&e.start)+"-"+Eh(e&&e.end)}function Ih(e){return e&&"number"==typeof e?e:1}class Ah extends Error{constructor(e,t,n){super(),"string"==typeof t&&(n=t,t=void 0);let s="",a={},r=!1;if(t&&(a="line"in t&&"column"in t||"start"in t&&"end"in t?{place:t}:"type"in t?{ancestors:[t],place:t.position}:{...t}),"string"==typeof e?s=e:!a.cause&&e&&(r=!0,s=e.message,a.cause=e),!a.ruleId&&!a.source&&"string"==typeof n){const e=n.indexOf(":");-1===e?a.ruleId=n:(a.source=n.slice(0,e),a.ruleId=n.slice(e+1))}if(!a.place&&a.ancestors&&a.ancestors){const e=a.ancestors[a.ancestors.length-1];e&&(a.place=e.position)}const i=a.place&&"start"in a.place?a.place.start:a.place;this.ancestors=a.ancestors||void 0,this.cause=a.cause||void 0,this.column=i?i.column:void 0,this.fatal=void 0,this.file="",this.message=s,this.line=i?i.line:void 0,this.name=Ph(a.place)||"1:1",this.place=a.place||void 0,this.reason=this.message,this.ruleId=a.ruleId||void 0,this.source=a.source||void 0,this.stack=r&&a.cause&&"string"==typeof a.cause.stack?a.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}Ah.prototype.file="",Ah.prototype.name="",Ah.prototype.reason="",Ah.prototype.message="",Ah.prototype.stack="",Ah.prototype.column=void 0,Ah.prototype.line=void 0,Ah.prototype.ancestors=void 0,Ah.prototype.cause=void 0,Ah.prototype.fatal=void 0,Ah.prototype.place=void 0,Ah.prototype.ruleId=void 0,Ah.prototype.source=void 0;const Oh={}.hasOwnProperty,Dh=new Map,Rh=/[A-Z]/g,Mh=new Set(["table","tbody","thead","tfoot","tr"]),_h=new Set(["td","th"]),Fh="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function Bh(e,t){if(!t||void 0===t.Fragment)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let s;if(t.development){if("function"!=typeof t.jsxDEV)throw new TypeError("Expected `jsxDEV` in options when `development: true`");s=function(e,t){return n;function n(n,s,a,r){const i=Array.isArray(a.children),o=Ch(n);return t(s,a,r,i,{columnNumber:o?o.column-1:void 0,fileName:e,lineNumber:o?o.line:void 0},void 0)}}(n,t.jsxDEV)}else{if("function"!=typeof t.jsx)throw new TypeError("Expected `jsx` in production options");if("function"!=typeof t.jsxs)throw new TypeError("Expected `jsxs` in production options");s=function(e,t,n){return s;function s(e,s,a,r){const i=Array.isArray(a.children)?n:t;return r?i(s,a,r):i(s,a)}}(0,t.jsx,t.jsxs)}const a={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:s,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:!1!==t.passKeys,passNode:t.passNode||!1,schema:"svg"===t.space?Zu:Xu,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:!1!==t.tableCellAlignToStyle},r=zh(a,e,void 0);return r&&"string"!=typeof r?r:a.create(e,a.Fragment,{children:r||void 0},void 0)}function zh(e,t,n){return"element"===t.type?function(e,t,n){const s=e.schema;let a=s;"svg"===t.tagName.toLowerCase()&&"html"===s.space&&(a=Zu,e.schema=a);e.ancestors.push(t);const r=Wh(e,t.tagName,!1),i=function(e,t){const n={};let s,a;for(a in t.properties)if("children"!==a&&Oh.call(t.properties,a)){const r=qh(e,a,t.properties[a]);if(r){const[a,i]=r;e.tableCellAlignToStyle&&"align"===a&&"string"==typeof i&&_h.has(t.tagName)?s=i:n[a]=i}}if(s){(n.style||(n.style={}))["css"===e.stylePropertyNameCase?"text-align":"textAlign"]=s}return n}(e,t);let o=$h(e,t);Mh.has(t.tagName)&&(o=o.filter(function(e){return"string"!=typeof e||!("object"==typeof(t=e)?"text"===t.type&&xu(t.value):xu(t));var t}));return Uh(e,i,r,t),Hh(i,o),e.ancestors.pop(),e.schema=s,e.create(t,r,i,n)}(e,t,n):"mdxFlowExpression"===t.type||"mdxTextExpression"===t.type?function(e,t){if(t.data&&t.data.estree&&e.evaluater){const n=t.data.estree.body[0];return n.type,e.evaluater.evaluateExpression(n.expression)}Vh(e,t.position)}(e,t):"mdxJsxFlowElement"===t.type||"mdxJsxTextElement"===t.type?function(e,t,n){const s=e.schema;let a=s;"svg"===t.name&&"html"===s.space&&(a=Zu,e.schema=a);e.ancestors.push(t);const r=null===t.name?e.Fragment:Wh(e,t.name,!0),i=function(e,t){const n={};for(const s of t.attributes)if("mdxJsxExpressionAttribute"===s.type)if(s.data&&s.data.estree&&e.evaluater){const t=s.data.estree.body[0];hu(t.type);const a=t.expression;hu(a.type);const r=a.properties[0];hu(r.type),Object.assign(n,e.evaluater.evaluateExpression(r.argument))}else Vh(e,t.position);else{const a=s.name;let r;if(s.value&&"object"==typeof s.value)if(s.value.data&&s.value.data.estree&&e.evaluater){const t=s.value.data.estree.body[0];hu(t.type),r=e.evaluater.evaluateExpression(t.expression)}else Vh(e,t.position);else r=null===s.value||s.value;n[a]=r}return n}(e,t),o=$h(e,t);return Uh(e,i,r,t),Hh(i,o),e.ancestors.pop(),e.schema=s,e.create(t,r,i,n)}(e,t,n):"mdxjsEsm"===t.type?function(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);Vh(e,t.position)}(e,t):"root"===t.type?function(e,t,n){const s={};return Hh(s,$h(e,t)),e.create(t,e.Fragment,s,n)}(e,t,n):"text"===t.type?function(e,t){return t.value}(0,t):void 0}function Uh(e,t,n,s){"string"!=typeof n&&n!==e.Fragment&&e.passNode&&(t.node=s)}function Hh(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function $h(e,t){const n=[];let s=-1;const a=e.passKeys?new Map:Dh;for(;++s<t.children.length;){const r=t.children[s];let i;if(e.passKeys){const e="element"===r.type?r.tagName:"mdxJsxFlowElement"===r.type||"mdxJsxTextElement"===r.type?r.name:void 0;if(e){const t=a.get(e)||0;i=e+"-"+t,a.set(e,t+1)}}const o=zh(e,r,i);void 0!==o&&n.push(o)}return n}function qh(e,t,n){const s=function(e,t){const n=wu(t);let s=t,a=Nu;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&"data"===n.slice(0,4)&&Ju.test(t)){if("-"===t.charAt(4)){const e=t.slice(5).replace(Gu,Qu);s="data"+e.charAt(0).toUpperCase()+e.slice(1)}else{const e=t.slice(4);if(!Gu.test(e)){let n=e.replace(Yu,Ku);"-"!==n.charAt(0)&&(n="-"+n),t="data"+n}}a=Ru}return new a(s,t)}(e.schema,t);if(!(null==n||"number"==typeof n&&Number.isNaN(n))){if(Array.isArray(n)&&(n=s.commaSeparated?function(e,t){const n=t||{};return(""===e[e.length-1]?[...e,""]:e).join((n.padRight?" ":"")+","+(!1===n.padLeft?"":" ")).trim()}(n):n.join(" ").trim()),"style"===s.property){let t="object"==typeof n?n:function(e,t){try{return kh(t,{reactCompat:!0})}catch(n){if(e.ignoreInvalidStyle)return{};const t=n,s=new Ah("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:t,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw s.file=e.filePath||void 0,s.url=Fh+"#cannot-parse-style-attribute",s}}(e,String(n));return"css"===e.stylePropertyNameCase&&(t=function(e){const t={};let n;for(n in e)Oh.call(e,n)&&(t[Yh(n)]=e[n]);return t}(t)),["style",t]}return["react"===e.elementAttributeNameCase&&s.space?Vu[s.property]||s.property:s.attribute,n]}}function Wh(e,t,n){let s;if(n)if(t.includes(".")){const e=t.split(".");let n,a=-1;for(;++a<e.length;){const t=yu(e[a])?{type:"Identifier",name:e[a]}:{type:"Literal",value:e[a]};n=n?{type:"MemberExpression",object:n,property:t,computed:Boolean(a&&"Literal"===t.type),optional:!1}:t}s=n}else s=yu(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};else s={type:"Literal",value:t};if("Literal"===s.type){const t=s.value;return Oh.call(e.components,t)?e.components[t]:t}if(e.evaluater)return e.evaluater.evaluateExpression(s);Vh(e)}function Vh(e,t){const n=new Ah("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=Fh+"#cannot-handle-mdx-estrees-without-createevaluater",n}function Yh(e){let t=e.replace(Rh,Gh);return"ms-"===t.slice(0,3)&&(t="-"+t),t}function Gh(e){return"-"+e.toLowerCase()}const Jh={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},Kh={};function Qh(e,t,n){if(function(e){return Boolean(e&&"object"==typeof e)}(e)){if("value"in e)return"html"!==e.type||n?e.value:"";if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return Xh(e.children,t,n)}return Array.isArray(e)?Xh(e,t,n):""}function Xh(e,t,n){const s=[];let a=-1;for(;++a<e.length;)s[a]=Qh(e[a],t,n);return s.join("")}const Zh=document.createElement("i");function em(e){const t="&"+e+";";Zh.innerHTML=t;const n=Zh.textContent;return(59!==n.charCodeAt(n.length-1)||"semi"===e)&&(n!==t&&n)}function tm(e,t,n,s){const a=e.length;let r,i=0;if(t=t<0?-t>a?0:a+t:t>a?a:t,n=n>0?n:0,s.length<1e4)r=Array.from(s),r.unshift(t,n),e.splice(...r);else for(n&&e.splice(t,n);i<s.length;)r=s.slice(i,i+1e4),r.unshift(t,0),e.splice(...r),i+=1e4,t+=1e4}function nm(e,t){return e.length>0?(tm(e,e.length,0,t),e):t}const sm={}.hasOwnProperty;function am(e,t){let n;for(n in t){const s=(sm.call(e,n)?e[n]:void 0)||(e[n]={}),a=t[n];let r;if(a)for(r in a){sm.call(s,r)||(s[r]=[]);const e=a[r];rm(s[r],Array.isArray(e)?e:e?[e]:[])}}}function rm(e,t){let n=-1;const s=[];for(;++n<t.length;)("after"===t[n].add?e:s).push(t[n]);tm(e,0,0,s)}function im(e,t){const n=Number.parseInt(e,t);return n<9||11===n||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||!(65535&~n)||65534==(65535&n)||n>1114111?"�":String.fromCodePoint(n)}function om(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const lm=bm(/[A-Za-z]/),cm=bm(/[\dA-Za-z]/),dm=bm(/[#-'*+\--9=?A-Z^-~]/);function um(e){return null!==e&&(e<32||127===e)}const hm=bm(/\d/),mm=bm(/[\dA-Fa-f]/),pm=bm(/[!-/:-@[-`{-~]/);function fm(e){return null!==e&&e<-2}function gm(e){return null!==e&&(e<0||32===e)}function ym(e){return-2===e||-1===e||32===e}const vm=bm(/\p{P}|\p{S}/u),xm=bm(/\s/);function bm(e){return function(t){return null!==t&&t>-1&&e.test(String.fromCharCode(t))}}function jm(e){const t=[];let n=-1,s=0,a=0;for(;++n<e.length;){const r=e.charCodeAt(n);let i="";if(37===r&&cm(e.charCodeAt(n+1))&&cm(e.charCodeAt(n+2)))a=2;else if(r<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(r))||(i=String.fromCharCode(r));else if(r>55295&&r<57344){const t=e.charCodeAt(n+1);r<56320&&t>56319&&t<57344?(i=String.fromCharCode(r,t),a=1):i="�"}else i=String.fromCharCode(r);i&&(t.push(e.slice(s,n),encodeURIComponent(i)),s=n+a+1,i=""),a&&(n+=a,a=0)}return t.join("")+e.slice(s)}function wm(e,t,n,s){const a=s?s-1:Number.POSITIVE_INFINITY;let r=0;return function(s){if(ym(s))return e.enter(n),i(s);return t(s)};function i(s){return ym(s)&&r++<a?(e.consume(s),i):(e.exit(n),t(s))}}const Nm={tokenize:function(e){const t=e.attempt(this.parser.constructs.contentInitial,function(n){if(null===n)return void e.consume(n);return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),wm(e,t,"linePrefix")},function(t){return e.enter("paragraph"),s(t)});let n;return t;function s(t){const s=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=s),n=s,a(t)}function a(t){return null===t?(e.exit("chunkText"),e.exit("paragraph"),void e.consume(t)):fm(t)?(e.consume(t),e.exit("chunkText"),s):(e.consume(t),a)}}};const km={tokenize:function(e){const t=this,n=[];let s,a,r,i=0;return o;function o(s){if(i<n.length){const a=n[i];return t.containerState=a[1],e.attempt(a[0].continuation,l,c)(s)}return c(s)}function l(e){if(i++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,s&&v();const n=t.events.length;let a,r=n;for(;r--;)if("exit"===t.events[r][0]&&"chunkFlow"===t.events[r][1].type){a=t.events[r][1].end;break}y(i);let o=n;for(;o<t.events.length;)t.events[o][1].end={...a},o++;return tm(t.events,r+1,0,t.events.slice(n)),t.events.length=o,c(e)}return o(e)}function c(a){if(i===n.length){if(!s)return h(a);if(s.currentConstruct&&s.currentConstruct.concrete)return p(a);t.interrupt=Boolean(s.currentConstruct&&!s._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(Sm,d,u)(a)}function d(e){return s&&v(),y(i),h(e)}function u(e){return t.parser.lazy[t.now().line]=i!==n.length,r=t.now().offset,p(e)}function h(n){return t.containerState={},e.attempt(Sm,m,p)(n)}function m(e){return i++,n.push([t.currentConstruct,t.containerState]),h(e)}function p(n){return null===n?(s&&v(),y(0),void e.consume(n)):(s=s||t.parser.flow(t.now()),e.enter("chunkFlow",{_tokenizer:s,contentType:"flow",previous:a}),f(n))}function f(n){return null===n?(g(e.exit("chunkFlow"),!0),y(0),void e.consume(n)):fm(n)?(e.consume(n),g(e.exit("chunkFlow")),i=0,t.interrupt=void 0,o):(e.consume(n),f)}function g(e,n){const o=t.sliceStream(e);if(n&&o.push(null),e.previous=a,a&&(a.next=e),a=e,s.defineSkip(e.start),s.write(o),t.parser.lazy[e.start.line]){let e=s.events.length;for(;e--;)if(s.events[e][1].start.offset<r&&(!s.events[e][1].end||s.events[e][1].end.offset>r))return;const n=t.events.length;let a,o,l=n;for(;l--;)if("exit"===t.events[l][0]&&"chunkFlow"===t.events[l][1].type){if(a){o=t.events[l][1].end;break}a=!0}for(y(i),e=n;e<t.events.length;)t.events[e][1].end={...o},e++;tm(t.events,l+1,0,t.events.slice(n)),t.events.length=e}}function y(s){let a=n.length;for(;a-- >s;){const s=n[a];t.containerState=s[1],s[0].exit.call(t,e)}n.length=s}function v(){s.write([null]),a=void 0,s=void 0,t.containerState._closeFlow=void 0}}},Sm={tokenize:function(e,t,n){return wm(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}};function Cm(e){return null===e||gm(e)||xm(e)?1:vm(e)?2:void 0}function Tm(e,t,n){const s=[];let a=-1;for(;++a<e.length;){const r=e[a].resolveAll;r&&!s.includes(r)&&(t=r(t,n),s.push(r))}return t}const Pm={name:"attention",resolveAll:function(e,t){let n,s,a,r,i,o,l,c,d=-1;for(;++d<e.length;)if("enter"===e[d][0]&&"attentionSequence"===e[d][1].type&&e[d][1]._close)for(n=d;n--;)if("exit"===e[n][0]&&"attentionSequence"===e[n][1].type&&e[n][1]._open&&t.sliceSerialize(e[n][1]).charCodeAt(0)===t.sliceSerialize(e[d][1]).charCodeAt(0)){if((e[n][1]._close||e[d][1]._open)&&(e[d][1].end.offset-e[d][1].start.offset)%3&&!((e[n][1].end.offset-e[n][1].start.offset+e[d][1].end.offset-e[d][1].start.offset)%3))continue;o=e[n][1].end.offset-e[n][1].start.offset>1&&e[d][1].end.offset-e[d][1].start.offset>1?2:1;const u={...e[n][1].end},h={...e[d][1].start};Em(u,-o),Em(h,o),r={type:o>1?"strongSequence":"emphasisSequence",start:u,end:{...e[n][1].end}},i={type:o>1?"strongSequence":"emphasisSequence",start:{...e[d][1].start},end:h},a={type:o>1?"strongText":"emphasisText",start:{...e[n][1].end},end:{...e[d][1].start}},s={type:o>1?"strong":"emphasis",start:{...r.start},end:{...i.end}},e[n][1].end={...r.start},e[d][1].start={...i.end},l=[],e[n][1].end.offset-e[n][1].start.offset&&(l=nm(l,[["enter",e[n][1],t],["exit",e[n][1],t]])),l=nm(l,[["enter",s,t],["enter",r,t],["exit",r,t],["enter",a,t]]),l=nm(l,Tm(t.parser.constructs.insideSpan.null,e.slice(n+1,d),t)),l=nm(l,[["exit",a,t],["enter",i,t],["exit",i,t],["exit",s,t]]),e[d][1].end.offset-e[d][1].start.offset?(c=2,l=nm(l,[["enter",e[d][1],t],["exit",e[d][1],t]])):c=0,tm(e,n-1,d-n+3,l),d=n+l.length-c-2;break}d=-1;for(;++d<e.length;)"attentionSequence"===e[d][1].type&&(e[d][1].type="data");return e},tokenize:function(e,t){const n=this.parser.constructs.attentionMarkers.null,s=this.previous,a=Cm(s);let r;return function(t){return r=t,e.enter("attentionSequence"),i(t)};function i(o){if(o===r)return e.consume(o),i;const l=e.exit("attentionSequence"),c=Cm(o),d=!c||2===c&&a||n.includes(o),u=!a||2===a&&c||n.includes(s);return l._open=Boolean(42===r?d:d&&(a||!u)),l._close=Boolean(42===r?u:u&&(c||!d)),t(o)}}};function Em(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const Lm={name:"autolink",tokenize:function(e,t,n){let s=0;return function(t){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(t),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),a};function a(t){return lm(t)?(e.consume(t),r):64===t?n(t):l(t)}function r(e){return 43===e||45===e||46===e||cm(e)?(s=1,i(e)):l(e)}function i(t){return 58===t?(e.consume(t),s=0,o):(43===t||45===t||46===t||cm(t))&&s++<32?(e.consume(t),i):(s=0,l(t))}function o(s){return 62===s?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(s),e.exit("autolinkMarker"),e.exit("autolink"),t):null===s||32===s||60===s||um(s)?n(s):(e.consume(s),o)}function l(t){return 64===t?(e.consume(t),c):dm(t)?(e.consume(t),l):n(t)}function c(e){return cm(e)?d(e):n(e)}function d(n){return 46===n?(e.consume(n),s=0,c):62===n?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(n),e.exit("autolinkMarker"),e.exit("autolink"),t):u(n)}function u(t){if((45===t||cm(t))&&s++<63){const n=45===t?u:d;return e.consume(t),n}return n(t)}}};const Im={partial:!0,tokenize:function(e,t,n){return function(t){return ym(t)?wm(e,s,"linePrefix")(t):s(t)};function s(e){return null===e||fm(e)?t(e):n(e)}}};const Am={continuation:{tokenize:function(e,t,n){const s=this;return function(t){if(ym(t))return wm(e,a,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t);return a(t)};function a(s){return e.attempt(Am,t,n)(s)}}},exit:function(e){e.exit("blockQuote")},name:"blockQuote",tokenize:function(e,t,n){const s=this;return function(t){if(62===t){const n=s.containerState;return n.open||(e.enter("blockQuote",{_container:!0}),n.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(t),e.exit("blockQuoteMarker"),a}return n(t)};function a(n){return ym(n)?(e.enter("blockQuotePrefixWhitespace"),e.consume(n),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(n))}}};const Om={name:"characterEscape",tokenize:function(e,t,n){return function(t){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(t),e.exit("escapeMarker"),s};function s(s){return pm(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}};const Dm={name:"characterReference",tokenize:function(e,t,n){const s=this;let a,r,i=0;return function(t){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(t),e.exit("characterReferenceMarker"),o};function o(t){return 35===t?(e.enter("characterReferenceMarkerNumeric"),e.consume(t),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),a=31,r=cm,c(t))}function l(t){return 88===t||120===t?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(t),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),a=6,r=mm,c):(e.enter("characterReferenceValue"),a=7,r=hm,c(t))}function c(o){if(59===o&&i){const a=e.exit("characterReferenceValue");return r!==cm||em(s.sliceSerialize(a))?(e.enter("characterReferenceMarker"),e.consume(o),e.exit("characterReferenceMarker"),e.exit("characterReference"),t):n(o)}return r(o)&&i++<a?(e.consume(o),c):n(o)}}};const Rm={partial:!0,tokenize:function(e,t,n){const s=this;return function(t){if(null===t)return n(t);return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),a};function a(e){return s.parser.lazy[s.now().line]?n(e):t(e)}}},Mm={concrete:!0,name:"codeFenced",tokenize:function(e,t,n){const s=this,a={partial:!0,tokenize:function(e,t,n){let a=0;return i;function i(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),l}function l(t){return e.enter("codeFencedFence"),ym(t)?wm(e,c,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):c(t)}function c(t){return t===r?(e.enter("codeFencedFenceSequence"),d(t)):n(t)}function d(t){return t===r?(a++,e.consume(t),d):a>=o?(e.exit("codeFencedFenceSequence"),ym(t)?wm(e,u,"whitespace")(t):u(t)):n(t)}function u(s){return null===s||fm(s)?(e.exit("codeFencedFence"),t(s)):n(s)}}};let r,i=0,o=0;return function(t){return function(t){const n=s.events[s.events.length-1];return i=n&&"linePrefix"===n[1].type?n[2].sliceSerialize(n[1],!0).length:0,r=t,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),l(t)}(t)};function l(t){return t===r?(o++,e.consume(t),l):o<3?n(t):(e.exit("codeFencedFenceSequence"),ym(t)?wm(e,c,"whitespace")(t):c(t))}function c(n){return null===n||fm(n)?(e.exit("codeFencedFence"),s.interrupt?t(n):e.check(Rm,m,v)(n)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),d(n))}function d(t){return null===t||fm(t)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),c(t)):ym(t)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),wm(e,u,"whitespace")(t)):96===t&&t===r?n(t):(e.consume(t),d)}function u(t){return null===t||fm(t)?c(t):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),h(t))}function h(t){return null===t||fm(t)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),c(t)):96===t&&t===r?n(t):(e.consume(t),h)}function m(t){return e.attempt(a,v,p)(t)}function p(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),f}function f(t){return i>0&&ym(t)?wm(e,g,"linePrefix",i+1)(t):g(t)}function g(t){return null===t||fm(t)?e.check(Rm,m,v)(t):(e.enter("codeFlowValue"),y(t))}function y(t){return null===t||fm(t)?(e.exit("codeFlowValue"),g(t)):(e.consume(t),y)}function v(n){return e.exit("codeFenced"),t(n)}}};const _m={name:"codeIndented",tokenize:function(e,t,n){const s=this;return function(t){return e.enter("codeIndented"),wm(e,a,"linePrefix",5)(t)};function a(e){const t=s.events[s.events.length-1];return t&&"linePrefix"===t[1].type&&t[2].sliceSerialize(t[1],!0).length>=4?r(e):n(e)}function r(t){return null===t?o(t):fm(t)?e.attempt(Fm,r,o)(t):(e.enter("codeFlowValue"),i(t))}function i(t){return null===t||fm(t)?(e.exit("codeFlowValue"),r(t)):(e.consume(t),i)}function o(n){return e.exit("codeIndented"),t(n)}}},Fm={partial:!0,tokenize:function(e,t,n){const s=this;return a;function a(t){return s.parser.lazy[s.now().line]?n(t):fm(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),a):wm(e,r,"linePrefix",5)(t)}function r(e){const r=s.events[s.events.length-1];return r&&"linePrefix"===r[1].type&&r[2].sliceSerialize(r[1],!0).length>=4?t(e):fm(e)?a(e):n(e)}}};const Bm={name:"codeText",previous:function(e){return 96!==e||"characterEscape"===this.events[this.events.length-1][1].type},resolve:function(e){let t,n,s=e.length-4,a=3;if(!("lineEnding"!==e[a][1].type&&"space"!==e[a][1].type||"lineEnding"!==e[s][1].type&&"space"!==e[s][1].type))for(t=a;++t<s;)if("codeTextData"===e[t][1].type){e[a][1].type="codeTextPadding",e[s][1].type="codeTextPadding",a+=2,s-=2;break}t=a-1,s++;for(;++t<=s;)void 0===n?t!==s&&"lineEnding"!==e[t][1].type&&(n=t):t!==s&&"lineEnding"!==e[t][1].type||(e[n][1].type="codeTextData",t!==n+2&&(e[n][1].end=e[t-1][1].end,e.splice(n+2,t-n-2),s-=t-n-2,t=n+2),n=void 0);return e},tokenize:function(e,t,n){let s,a,r=0;return function(t){return e.enter("codeText"),e.enter("codeTextSequence"),i(t)};function i(t){return 96===t?(e.consume(t),r++,i):(e.exit("codeTextSequence"),o(t))}function o(t){return null===t?n(t):32===t?(e.enter("space"),e.consume(t),e.exit("space"),o):96===t?(a=e.enter("codeTextSequence"),s=0,c(t)):fm(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),o):(e.enter("codeTextData"),l(t))}function l(t){return null===t||32===t||96===t||fm(t)?(e.exit("codeTextData"),o(t)):(e.consume(t),l)}function c(n){return 96===n?(e.consume(n),s++,c):s===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(n)):(a.type="codeTextData",l(n))}}};class zm{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,t){const n=null==t?Number.POSITIVE_INFINITY:t;return n<this.left.length?this.left.slice(e,n):e>this.left.length?this.right.slice(this.right.length-n+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-n+this.left.length).reverse())}splice(e,t,n){const s=t||0;this.setCursor(Math.trunc(e));const a=this.right.splice(this.right.length-s,Number.POSITIVE_INFINITY);return n&&Um(this.left,n),a.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),Um(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),Um(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&0===this.right.length||e<0&&0===this.left.length))if(e<this.left.length){const t=this.left.splice(e,Number.POSITIVE_INFINITY);Um(this.right,t.reverse())}else{const t=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);Um(this.left,t.reverse())}}}function Um(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function Hm(e){const t={};let n,s,a,r,i,o,l,c=-1;const d=new zm(e);for(;++c<d.length;){for(;c in t;)c=t[c];if(n=d.get(c),c&&"chunkFlow"===n[1].type&&"listItemPrefix"===d.get(c-1)[1].type&&(o=n[1]._tokenizer.events,a=0,a<o.length&&"lineEndingBlank"===o[a][1].type&&(a+=2),a<o.length&&"content"===o[a][1].type))for(;++a<o.length&&"content"!==o[a][1].type;)"chunkText"===o[a][1].type&&(o[a][1]._isInFirstContentOfListItem=!0,a++);if("enter"===n[0])n[1].contentType&&(Object.assign(t,$m(d,c)),c=t[c],l=!0);else if(n[1]._container){for(a=c,s=void 0;a--;)if(r=d.get(a),"lineEnding"===r[1].type||"lineEndingBlank"===r[1].type)"enter"===r[0]&&(s&&(d.get(s)[1].type="lineEndingBlank"),r[1].type="lineEnding",s=a);else if("linePrefix"!==r[1].type&&"listItemIndent"!==r[1].type)break;s&&(n[1].end={...d.get(s)[1].start},i=d.slice(s,c),i.unshift(n),d.splice(s,c-s+1,i))}}return tm(e,0,Number.POSITIVE_INFINITY,d.slice(0)),!l}function $m(e,t){const n=e.get(t)[1],s=e.get(t)[2];let a=t-1;const r=[];let i=n._tokenizer;i||(i=s.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(i._contentTypeTextTrailing=!0));const o=i.events,l=[],c={};let d,u,h=-1,m=n,p=0,f=0;const g=[f];for(;m;){for(;e.get(++a)[1]!==m;);r.push(a),m._tokenizer||(d=s.sliceStream(m),m.next||d.push(null),u&&i.defineSkip(m.start),m._isInFirstContentOfListItem&&(i._gfmTasklistFirstContentOfListItem=!0),i.write(d),m._isInFirstContentOfListItem&&(i._gfmTasklistFirstContentOfListItem=void 0)),u=m,m=m.next}for(m=n;++h<o.length;)"exit"===o[h][0]&&"enter"===o[h-1][0]&&o[h][1].type===o[h-1][1].type&&o[h][1].start.line!==o[h][1].end.line&&(f=h+1,g.push(f),m._tokenizer=void 0,m.previous=void 0,m=m.next);for(i.events=[],m?(m._tokenizer=void 0,m.previous=void 0):g.pop(),h=g.length;h--;){const t=o.slice(g[h],g[h+1]),n=r.pop();l.push([n,n+t.length-1]),e.splice(n,2,t)}for(l.reverse(),h=-1;++h<l.length;)c[p+l[h][0]]=p+l[h][1],p+=l[h][1]-l[h][0]-1;return c}const qm={resolve:function(e){return Hm(e),e},tokenize:function(e,t){let n;return function(t){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),s(t)};function s(t){return null===t?a(t):fm(t)?e.check(Wm,r,a)(t):(e.consume(t),s)}function a(n){return e.exit("chunkContent"),e.exit("content"),t(n)}function r(t){return e.consume(t),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,s}}},Wm={partial:!0,tokenize:function(e,t,n){const s=this;return function(t){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),wm(e,a,"linePrefix")};function a(a){if(null===a||fm(a))return n(a);const r=s.events[s.events.length-1];return!s.parser.constructs.disable.null.includes("codeIndented")&&r&&"linePrefix"===r[1].type&&r[2].sliceSerialize(r[1],!0).length>=4?t(a):e.interrupt(s.parser.constructs.flow,n,t)(a)}}};function Vm(e,t,n,s,a,r,i,o,l){const c=l||Number.POSITIVE_INFINITY;let d=0;return function(t){if(60===t)return e.enter(s),e.enter(a),e.enter(r),e.consume(t),e.exit(r),u;if(null===t||32===t||41===t||um(t))return n(t);return e.enter(s),e.enter(i),e.enter(o),e.enter("chunkString",{contentType:"string"}),p(t)};function u(n){return 62===n?(e.enter(r),e.consume(n),e.exit(r),e.exit(a),e.exit(s),t):(e.enter(o),e.enter("chunkString",{contentType:"string"}),h(n))}function h(t){return 62===t?(e.exit("chunkString"),e.exit(o),u(t)):null===t||60===t||fm(t)?n(t):(e.consume(t),92===t?m:h)}function m(t){return 60===t||62===t||92===t?(e.consume(t),h):h(t)}function p(a){return d||null!==a&&41!==a&&!gm(a)?d<c&&40===a?(e.consume(a),d++,p):41===a?(e.consume(a),d--,p):null===a||32===a||40===a||um(a)?n(a):(e.consume(a),92===a?f:p):(e.exit("chunkString"),e.exit(o),e.exit(i),e.exit(s),t(a))}function f(t){return 40===t||41===t||92===t?(e.consume(t),p):p(t)}}function Ym(e,t,n,s,a,r){const i=this;let o,l=0;return function(t){return e.enter(s),e.enter(a),e.consume(t),e.exit(a),e.enter(r),c};function c(u){return l>999||null===u||91===u||93===u&&!o||94===u&&!l&&"_hiddenFootnoteSupport"in i.parser.constructs?n(u):93===u?(e.exit(r),e.enter(a),e.consume(u),e.exit(a),e.exit(s),t):fm(u)?(e.enter("lineEnding"),e.consume(u),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),d(u))}function d(t){return null===t||91===t||93===t||fm(t)||l++>999?(e.exit("chunkString"),c(t)):(e.consume(t),o||(o=!ym(t)),92===t?u:d)}function u(t){return 91===t||92===t||93===t?(e.consume(t),l++,d):d(t)}}function Gm(e,t,n,s,a,r){let i;return function(t){if(34===t||39===t||40===t)return e.enter(s),e.enter(a),e.consume(t),e.exit(a),i=40===t?41:t,o;return n(t)};function o(n){return n===i?(e.enter(a),e.consume(n),e.exit(a),e.exit(s),t):(e.enter(r),l(n))}function l(t){return t===i?(e.exit(r),o(i)):null===t?n(t):fm(t)?(e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),wm(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(t))}function c(t){return t===i||null===t||fm(t)?(e.exit("chunkString"),l(t)):(e.consume(t),92===t?d:c)}function d(t){return t===i||92===t?(e.consume(t),c):c(t)}}function Jm(e,t){let n;return function s(a){if(fm(a))return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),n=!0,s;if(ym(a))return wm(e,s,n?"linePrefix":"lineSuffix")(a);return t(a)}}const Km={name:"definition",tokenize:function(e,t,n){const s=this;let a;return function(t){return e.enter("definition"),function(t){return Ym.call(s,e,r,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(t)}(t)};function r(t){return a=om(s.sliceSerialize(s.events[s.events.length-1][1]).slice(1,-1)),58===t?(e.enter("definitionMarker"),e.consume(t),e.exit("definitionMarker"),i):n(t)}function i(t){return gm(t)?Jm(e,o)(t):o(t)}function o(t){return Vm(e,l,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(t)}function l(t){return e.attempt(Qm,c,c)(t)}function c(t){return ym(t)?wm(e,d,"whitespace")(t):d(t)}function d(r){return null===r||fm(r)?(e.exit("definition"),s.parser.defined.push(a),t(r)):n(r)}}},Qm={partial:!0,tokenize:function(e,t,n){return function(t){return gm(t)?Jm(e,s)(t):n(t)};function s(t){return Gm(e,a,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(t)}function a(t){return ym(t)?wm(e,r,"whitespace")(t):r(t)}function r(e){return null===e||fm(e)?t(e):n(e)}}};const Xm={name:"hardBreakEscape",tokenize:function(e,t,n){return function(t){return e.enter("hardBreakEscape"),e.consume(t),s};function s(s){return fm(s)?(e.exit("hardBreakEscape"),t(s)):n(s)}}};const Zm={name:"headingAtx",resolve:function(e,t){let n,s,a=e.length-2,r=3;"whitespace"===e[r][1].type&&(r+=2);a-2>r&&"whitespace"===e[a][1].type&&(a-=2);"atxHeadingSequence"===e[a][1].type&&(r===a-1||a-4>r&&"whitespace"===e[a-2][1].type)&&(a-=r+1===a?2:4);a>r&&(n={type:"atxHeadingText",start:e[r][1].start,end:e[a][1].end},s={type:"chunkText",start:e[r][1].start,end:e[a][1].end,contentType:"text"},tm(e,r,a-r+1,[["enter",n,t],["enter",s,t],["exit",s,t],["exit",n,t]]));return e},tokenize:function(e,t,n){let s=0;return function(t){return e.enter("atxHeading"),function(t){return e.enter("atxHeadingSequence"),a(t)}(t)};function a(t){return 35===t&&s++<6?(e.consume(t),a):null===t||gm(t)?(e.exit("atxHeadingSequence"),r(t)):n(t)}function r(n){return 35===n?(e.enter("atxHeadingSequence"),i(n)):null===n||fm(n)?(e.exit("atxHeading"),t(n)):ym(n)?wm(e,r,"whitespace")(n):(e.enter("atxHeadingText"),o(n))}function i(t){return 35===t?(e.consume(t),i):(e.exit("atxHeadingSequence"),r(t))}function o(t){return null===t||35===t||gm(t)?(e.exit("atxHeadingText"),r(t)):(e.consume(t),o)}}};const ep=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],tp=["pre","script","style","textarea"],np={concrete:!0,name:"htmlFlow",resolveTo:function(e){let t=e.length;for(;t--&&("enter"!==e[t][0]||"htmlFlow"!==e[t][1].type););t>1&&"linePrefix"===e[t-2][1].type&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2));return e},tokenize:function(e,t,n){const s=this;let a,r,i,o,l;return function(t){return function(t){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(t),c}(t)};function c(o){return 33===o?(e.consume(o),d):47===o?(e.consume(o),r=!0,m):63===o?(e.consume(o),a=3,s.interrupt?t:D):lm(o)?(e.consume(o),i=String.fromCharCode(o),p):n(o)}function d(r){return 45===r?(e.consume(r),a=2,u):91===r?(e.consume(r),a=5,o=0,h):lm(r)?(e.consume(r),a=4,s.interrupt?t:D):n(r)}function u(a){return 45===a?(e.consume(a),s.interrupt?t:D):n(a)}function h(a){const r="CDATA[";return a===r.charCodeAt(o++)?(e.consume(a),6===o?s.interrupt?t:C:h):n(a)}function m(t){return lm(t)?(e.consume(t),i=String.fromCharCode(t),p):n(t)}function p(o){if(null===o||47===o||62===o||gm(o)){const l=47===o,c=i.toLowerCase();return l||r||!tp.includes(c)?ep.includes(i.toLowerCase())?(a=6,l?(e.consume(o),f):s.interrupt?t(o):C(o)):(a=7,s.interrupt&&!s.parser.lazy[s.now().line]?n(o):r?g(o):y(o)):(a=1,s.interrupt?t(o):C(o))}return 45===o||cm(o)?(e.consume(o),i+=String.fromCharCode(o),p):n(o)}function f(a){return 62===a?(e.consume(a),s.interrupt?t:C):n(a)}function g(t){return ym(t)?(e.consume(t),g):k(t)}function y(t){return 47===t?(e.consume(t),k):58===t||95===t||lm(t)?(e.consume(t),v):ym(t)?(e.consume(t),y):k(t)}function v(t){return 45===t||46===t||58===t||95===t||cm(t)?(e.consume(t),v):x(t)}function x(t){return 61===t?(e.consume(t),b):ym(t)?(e.consume(t),x):y(t)}function b(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),l=t,j):ym(t)?(e.consume(t),b):w(t)}function j(t){return t===l?(e.consume(t),l=null,N):null===t||fm(t)?n(t):(e.consume(t),j)}function w(t){return null===t||34===t||39===t||47===t||60===t||61===t||62===t||96===t||gm(t)?x(t):(e.consume(t),w)}function N(e){return 47===e||62===e||ym(e)?y(e):n(e)}function k(t){return 62===t?(e.consume(t),S):n(t)}function S(t){return null===t||fm(t)?C(t):ym(t)?(e.consume(t),S):n(t)}function C(t){return 45===t&&2===a?(e.consume(t),L):60===t&&1===a?(e.consume(t),I):62===t&&4===a?(e.consume(t),R):63===t&&3===a?(e.consume(t),D):93===t&&5===a?(e.consume(t),O):!fm(t)||6!==a&&7!==a?null===t||fm(t)?(e.exit("htmlFlowData"),T(t)):(e.consume(t),C):(e.exit("htmlFlowData"),e.check(sp,M,T)(t))}function T(t){return e.check(ap,P,M)(t)}function P(t){return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),E}function E(t){return null===t||fm(t)?T(t):(e.enter("htmlFlowData"),C(t))}function L(t){return 45===t?(e.consume(t),D):C(t)}function I(t){return 47===t?(e.consume(t),i="",A):C(t)}function A(t){if(62===t){const n=i.toLowerCase();return tp.includes(n)?(e.consume(t),R):C(t)}return lm(t)&&i.length<8?(e.consume(t),i+=String.fromCharCode(t),A):C(t)}function O(t){return 93===t?(e.consume(t),D):C(t)}function D(t){return 62===t?(e.consume(t),R):45===t&&2===a?(e.consume(t),D):C(t)}function R(t){return null===t||fm(t)?(e.exit("htmlFlowData"),M(t)):(e.consume(t),R)}function M(n){return e.exit("htmlFlow"),t(n)}}},sp={partial:!0,tokenize:function(e,t,n){return function(s){return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),e.attempt(Im,t,n)}}},ap={partial:!0,tokenize:function(e,t,n){const s=this;return function(t){if(fm(t))return e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),a;return n(t)};function a(e){return s.parser.lazy[s.now().line]?n(e):t(e)}}};const rp={name:"htmlText",tokenize:function(e,t,n){const s=this;let a,r,i;return function(t){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(t),o};function o(t){return 33===t?(e.consume(t),l):47===t?(e.consume(t),b):63===t?(e.consume(t),v):lm(t)?(e.consume(t),N):n(t)}function l(t){return 45===t?(e.consume(t),c):91===t?(e.consume(t),r=0,m):lm(t)?(e.consume(t),y):n(t)}function c(t){return 45===t?(e.consume(t),h):n(t)}function d(t){return null===t?n(t):45===t?(e.consume(t),u):fm(t)?(i=d,A(t)):(e.consume(t),d)}function u(t){return 45===t?(e.consume(t),h):d(t)}function h(e){return 62===e?I(e):45===e?u(e):d(e)}function m(t){const s="CDATA[";return t===s.charCodeAt(r++)?(e.consume(t),6===r?p:m):n(t)}function p(t){return null===t?n(t):93===t?(e.consume(t),f):fm(t)?(i=p,A(t)):(e.consume(t),p)}function f(t){return 93===t?(e.consume(t),g):p(t)}function g(t){return 62===t?I(t):93===t?(e.consume(t),g):p(t)}function y(t){return null===t||62===t?I(t):fm(t)?(i=y,A(t)):(e.consume(t),y)}function v(t){return null===t?n(t):63===t?(e.consume(t),x):fm(t)?(i=v,A(t)):(e.consume(t),v)}function x(e){return 62===e?I(e):v(e)}function b(t){return lm(t)?(e.consume(t),j):n(t)}function j(t){return 45===t||cm(t)?(e.consume(t),j):w(t)}function w(t){return fm(t)?(i=w,A(t)):ym(t)?(e.consume(t),w):I(t)}function N(t){return 45===t||cm(t)?(e.consume(t),N):47===t||62===t||gm(t)?k(t):n(t)}function k(t){return 47===t?(e.consume(t),I):58===t||95===t||lm(t)?(e.consume(t),S):fm(t)?(i=k,A(t)):ym(t)?(e.consume(t),k):I(t)}function S(t){return 45===t||46===t||58===t||95===t||cm(t)?(e.consume(t),S):C(t)}function C(t){return 61===t?(e.consume(t),T):fm(t)?(i=C,A(t)):ym(t)?(e.consume(t),C):k(t)}function T(t){return null===t||60===t||61===t||62===t||96===t?n(t):34===t||39===t?(e.consume(t),a=t,P):fm(t)?(i=T,A(t)):ym(t)?(e.consume(t),T):(e.consume(t),E)}function P(t){return t===a?(e.consume(t),a=void 0,L):null===t?n(t):fm(t)?(i=P,A(t)):(e.consume(t),P)}function E(t){return null===t||34===t||39===t||60===t||61===t||96===t?n(t):47===t||62===t||gm(t)?k(t):(e.consume(t),E)}function L(e){return 47===e||62===e||gm(e)?k(e):n(e)}function I(s){return 62===s?(e.consume(s),e.exit("htmlTextData"),e.exit("htmlText"),t):n(s)}function A(t){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(t),e.exit("lineEnding"),O}function O(t){return ym(t)?wm(e,D,"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(t):D(t)}function D(t){return e.enter("htmlTextData"),i(t)}}};const ip={name:"labelEnd",resolveAll:function(e){let t=-1;const n=[];for(;++t<e.length;){const s=e[t][1];if(n.push(e[t]),"labelImage"===s.type||"labelLink"===s.type||"labelEnd"===s.type){const e="labelImage"===s.type?4:2;s.type="data",t+=e}}e.length!==n.length&&tm(e,0,e.length,n);return e},resolveTo:function(e,t){let n,s,a,r,i=e.length,o=0;for(;i--;)if(n=e[i][1],s){if("link"===n.type||"labelLink"===n.type&&n._inactive)break;"enter"===e[i][0]&&"labelLink"===n.type&&(n._inactive=!0)}else if(a){if("enter"===e[i][0]&&("labelImage"===n.type||"labelLink"===n.type)&&!n._balanced&&(s=i,"labelLink"!==n.type)){o=2;break}}else"labelEnd"===n.type&&(a=i);const l={type:"labelLink"===e[s][1].type?"link":"image",start:{...e[s][1].start},end:{...e[e.length-1][1].end}},c={type:"label",start:{...e[s][1].start},end:{...e[a][1].end}},d={type:"labelText",start:{...e[s+o+2][1].end},end:{...e[a-2][1].start}};return r=[["enter",l,t],["enter",c,t]],r=nm(r,e.slice(s+1,s+o+3)),r=nm(r,[["enter",d,t]]),r=nm(r,Tm(t.parser.constructs.insideSpan.null,e.slice(s+o+4,a-3),t)),r=nm(r,[["exit",d,t],e[a-2],e[a-1],["exit",c,t]]),r=nm(r,e.slice(a+1)),r=nm(r,[["exit",l,t]]),tm(e,s,e.length,r),e},tokenize:function(e,t,n){const s=this;let a,r,i=s.events.length;for(;i--;)if(("labelImage"===s.events[i][1].type||"labelLink"===s.events[i][1].type)&&!s.events[i][1]._balanced){a=s.events[i][1];break}return function(t){if(!a)return n(t);if(a._inactive)return d(t);return r=s.parser.defined.includes(om(s.sliceSerialize({start:a.end,end:s.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelEnd"),o};function o(t){return 40===t?e.attempt(op,c,r?c:d)(t):91===t?e.attempt(lp,c,r?l:d)(t):r?c(t):d(t)}function l(t){return e.attempt(cp,c,d)(t)}function c(e){return t(e)}function d(e){return a._balanced=!0,n(e)}}},op={tokenize:function(e,t,n){return function(t){return e.enter("resource"),e.enter("resourceMarker"),e.consume(t),e.exit("resourceMarker"),s};function s(t){return gm(t)?Jm(e,a)(t):a(t)}function a(t){return 41===t?c(t):Vm(e,r,i,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(t)}function r(t){return gm(t)?Jm(e,o)(t):c(t)}function i(e){return n(e)}function o(t){return 34===t||39===t||40===t?Gm(e,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(t):c(t)}function l(t){return gm(t)?Jm(e,c)(t):c(t)}function c(s){return 41===s?(e.enter("resourceMarker"),e.consume(s),e.exit("resourceMarker"),e.exit("resource"),t):n(s)}}},lp={tokenize:function(e,t,n){const s=this;return function(t){return Ym.call(s,e,a,r,"reference","referenceMarker","referenceString")(t)};function a(e){return s.parser.defined.includes(om(s.sliceSerialize(s.events[s.events.length-1][1]).slice(1,-1)))?t(e):n(e)}function r(e){return n(e)}}},cp={tokenize:function(e,t,n){return function(t){return e.enter("reference"),e.enter("referenceMarker"),e.consume(t),e.exit("referenceMarker"),s};function s(s){return 93===s?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}};const dp={name:"labelStartImage",resolveAll:ip.resolveAll,tokenize:function(e,t,n){const s=this;return function(t){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(t),e.exit("labelImageMarker"),a};function a(t){return 91===t?(e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelImage"),r):n(t)}function r(e){return 94===e&&"_hiddenFootnoteSupport"in s.parser.constructs?n(e):t(e)}}};const up={name:"labelStartLink",resolveAll:ip.resolveAll,tokenize:function(e,t,n){const s=this;return function(t){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(t),e.exit("labelMarker"),e.exit("labelLink"),a};function a(e){return 94===e&&"_hiddenFootnoteSupport"in s.parser.constructs?n(e):t(e)}}};const hp={name:"lineEnding",tokenize:function(e,t){return function(n){return e.enter("lineEnding"),e.consume(n),e.exit("lineEnding"),wm(e,t,"linePrefix")}}};const mp={name:"thematicBreak",tokenize:function(e,t,n){let s,a=0;return function(t){return e.enter("thematicBreak"),function(e){return s=e,r(e)}(t)};function r(r){return r===s?(e.enter("thematicBreakSequence"),i(r)):a>=3&&(null===r||fm(r))?(e.exit("thematicBreak"),t(r)):n(r)}function i(t){return t===s?(e.consume(t),a++,i):(e.exit("thematicBreakSequence"),ym(t)?wm(e,r,"whitespace")(t):r(t))}}};const pp={continuation:{tokenize:function(e,t,n){const s=this;return s.containerState._closeFlow=void 0,e.check(Im,function(n){return s.containerState.furtherBlankLines=s.containerState.furtherBlankLines||s.containerState.initialBlankLine,wm(e,t,"listItemIndent",s.containerState.size+1)(n)},function(n){if(s.containerState.furtherBlankLines||!ym(n))return s.containerState.furtherBlankLines=void 0,s.containerState.initialBlankLine=void 0,a(n);return s.containerState.furtherBlankLines=void 0,s.containerState.initialBlankLine=void 0,e.attempt(gp,t,a)(n)});function a(a){return s.containerState._closeFlow=!0,s.interrupt=void 0,wm(e,e.attempt(pp,t,n),"linePrefix",s.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}},exit:function(e){e.exit(this.containerState.type)},name:"list",tokenize:function(e,t,n){const s=this,a=s.events[s.events.length-1];let r=a&&"linePrefix"===a[1].type?a[2].sliceSerialize(a[1],!0).length:0,i=0;return function(t){const a=s.containerState.type||(42===t||43===t||45===t?"listUnordered":"listOrdered");if("listUnordered"===a?!s.containerState.marker||t===s.containerState.marker:hm(t)){if(s.containerState.type||(s.containerState.type=a,e.enter(a,{_container:!0})),"listUnordered"===a)return e.enter("listItemPrefix"),42===t||45===t?e.check(mp,n,l)(t):l(t);if(!s.interrupt||49===t)return e.enter("listItemPrefix"),e.enter("listItemValue"),o(t)}return n(t)};function o(t){return hm(t)&&++i<10?(e.consume(t),o):(!s.interrupt||i<2)&&(s.containerState.marker?t===s.containerState.marker:41===t||46===t)?(e.exit("listItemValue"),l(t)):n(t)}function l(t){return e.enter("listItemMarker"),e.consume(t),e.exit("listItemMarker"),s.containerState.marker=s.containerState.marker||t,e.check(Im,s.interrupt?n:c,e.attempt(fp,u,d))}function c(e){return s.containerState.initialBlankLine=!0,r++,u(e)}function d(t){return ym(t)?(e.enter("listItemPrefixWhitespace"),e.consume(t),e.exit("listItemPrefixWhitespace"),u):n(t)}function u(n){return s.containerState.size=r+s.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(n)}}},fp={partial:!0,tokenize:function(e,t,n){const s=this;return wm(e,function(e){const a=s.events[s.events.length-1];return!ym(e)&&a&&"listItemPrefixWhitespace"===a[1].type?t(e):n(e)},"listItemPrefixWhitespace",s.parser.constructs.disable.null.includes("codeIndented")?void 0:5)}},gp={partial:!0,tokenize:function(e,t,n){const s=this;return wm(e,function(e){const a=s.events[s.events.length-1];return a&&"listItemIndent"===a[1].type&&a[2].sliceSerialize(a[1],!0).length===s.containerState.size?t(e):n(e)},"listItemIndent",s.containerState.size+1)}};const yp={name:"setextUnderline",resolveTo:function(e,t){let n,s,a,r=e.length;for(;r--;)if("enter"===e[r][0]){if("content"===e[r][1].type){n=r;break}"paragraph"===e[r][1].type&&(s=r)}else"content"===e[r][1].type&&e.splice(r,1),a||"definition"!==e[r][1].type||(a=r);const i={type:"setextHeading",start:{...e[n][1].start},end:{...e[e.length-1][1].end}};e[s][1].type="setextHeadingText",a?(e.splice(s,0,["enter",i,t]),e.splice(a+1,0,["exit",e[n][1],t]),e[n][1].end={...e[a][1].end}):e[n][1]=i;return e.push(["exit",i,t]),e},tokenize:function(e,t,n){const s=this;let a;return function(t){let i,o=s.events.length;for(;o--;)if("lineEnding"!==s.events[o][1].type&&"linePrefix"!==s.events[o][1].type&&"content"!==s.events[o][1].type){i="paragraph"===s.events[o][1].type;break}if(!s.parser.lazy[s.now().line]&&(s.interrupt||i))return e.enter("setextHeadingLine"),a=t,function(t){return e.enter("setextHeadingLineSequence"),r(t)}(t);return n(t)};function r(t){return t===a?(e.consume(t),r):(e.exit("setextHeadingLineSequence"),ym(t)?wm(e,i,"lineSuffix")(t):i(t))}function i(s){return null===s||fm(s)?(e.exit("setextHeadingLine"),t(s)):n(s)}}};const vp={tokenize:function(e){const t=this,n=e.attempt(Im,function(s){if(null===s)return void e.consume(s);return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n},e.attempt(this.parser.constructs.flowInitial,s,wm(e,e.attempt(this.parser.constructs.flow,s,e.attempt(qm,s)),"linePrefix")));return n;function s(s){if(null!==s)return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n;e.consume(s)}}};const xp={resolveAll:Np()},bp=wp("string"),jp=wp("text");function wp(e){return{resolveAll:Np("text"===e?kp:void 0),tokenize:function(t){const n=this,s=this.parser.constructs[e],a=t.attempt(s,r,i);return r;function r(e){return l(e)?a(e):i(e)}function i(e){if(null!==e)return t.enter("data"),t.consume(e),o;t.consume(e)}function o(e){return l(e)?(t.exit("data"),a(e)):(t.consume(e),o)}function l(e){if(null===e)return!0;const t=s[e];let a=-1;if(t)for(;++a<t.length;){const e=t[a];if(!e.previous||e.previous.call(n,n.previous))return!0}return!1}}}}function Np(e){return function(t,n){let s,a=-1;for(;++a<=t.length;)void 0===s?t[a]&&"data"===t[a][1].type&&(s=a,a++):t[a]&&"data"===t[a][1].type||(a!==s+2&&(t[s][1].end=t[a-1][1].end,t.splice(s+2,a-s-2),a=s+2),s=void 0);return e?e(t,n):t}}function kp(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||"lineEnding"===e[n][1].type)&&"data"===e[n-1][1].type){const s=e[n-1][1],a=t.sliceStream(s);let r,i=a.length,o=-1,l=0;for(;i--;){const e=a[i];if("string"==typeof e){for(o=e.length;32===e.charCodeAt(o-1);)l++,o--;if(o)break;o=-1}else if(-2===e)r=!0,l++;else if(-1!==e){i++;break}}if(t._contentTypeTextTrailing&&n===e.length&&(l=0),l){const a={type:n===e.length||r||l<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:i?o:s.start._bufferIndex+o,_index:s.start._index+i,line:s.end.line,column:s.end.column-l,offset:s.end.offset-l},end:{...s.end}};s.end={...a.start},s.start.offset===s.end.offset?Object.assign(s,a):(e.splice(n,0,["enter",a,t],["exit",a,t]),n+=2)}n++}return e}const Sp={42:pp,43:pp,45:pp,48:pp,49:pp,50:pp,51:pp,52:pp,53:pp,54:pp,55:pp,56:pp,57:pp,62:Am},Cp={91:Km},Tp={[-2]:_m,[-1]:_m,32:_m},Pp={35:Zm,42:mp,45:[yp,mp],60:np,61:yp,95:mp,96:Mm,126:Mm},Ep={38:Dm,92:Om},Lp={[-5]:hp,[-4]:hp,[-3]:hp,33:dp,38:Dm,42:Pm,60:[Lm,rp],91:up,92:[Xm,Om],93:ip,95:Pm,96:Bm},Ip={null:[Pm,xp]},Ap=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:{null:[42,95]},contentInitial:Cp,disable:{null:[]},document:Sp,flow:Pp,flowInitial:Tp,insideSpan:Ip,string:Ep,text:Lp},Symbol.toStringTag,{value:"Module"}));function Op(e,t,n){let s={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const a={},r=[];let i=[],o=[];const l={attempt:g(function(e,t){y(e,t.from)}),check:g(f),consume:function(e){fm(e)?(s.line++,s.column=1,s.offset+=-3===e?2:1,v()):-1!==e&&(s.column++,s.offset++);s._bufferIndex<0?s._index++:(s._bufferIndex++,s._bufferIndex===i[s._index].length&&(s._bufferIndex=-1,s._index++));c.previous=e},enter:function(e,t){const n=t||{};return n.type=e,n.start=h(),c.events.push(["enter",n,c]),o.push(n),n},exit:function(e){const t=o.pop();return t.end=h(),c.events.push(["exit",t,c]),t},interrupt:g(f,{interrupt:!0})},c={code:null,containerState:{},defineSkip:function(e){a[e.line]=e.column,v()},events:[],now:h,parser:e,previous:null,sliceSerialize:function(e,t){return function(e,t){let n=-1;const s=[];let a;for(;++n<e.length;){const r=e[n];let i;if("string"==typeof r)i=r;else switch(r){case-5:i="\r";break;case-4:i="\n";break;case-3:i="\r\n";break;case-2:i=t?" ":"\t";break;case-1:if(!t&&a)continue;i=" ";break;default:i=String.fromCharCode(r)}a=-2===r,s.push(i)}return s.join("")}(u(e),t)},sliceStream:u,write:function(e){if(i=nm(i,e),m(),null!==i[i.length-1])return[];return y(t,0),c.events=Tm(r,c.events,c),c.events}};let d=t.tokenize.call(c,l);return t.resolveAll&&r.push(t),c;function u(e){return function(e,t){const n=t.start._index,s=t.start._bufferIndex,a=t.end._index,r=t.end._bufferIndex;let i;if(n===a)i=[e[n].slice(s,r)];else{if(i=e.slice(n,a),s>-1){const e=i[0];"string"==typeof e?i[0]=e.slice(s):i.shift()}r>0&&i.push(e[a].slice(0,r))}return i}(i,e)}function h(){const{_bufferIndex:e,_index:t,line:n,column:a,offset:r}=s;return{_bufferIndex:e,_index:t,line:n,column:a,offset:r}}function m(){let e;for(;s._index<i.length;){const t=i[s._index];if("string"==typeof t)for(e=s._index,s._bufferIndex<0&&(s._bufferIndex=0);s._index===e&&s._bufferIndex<t.length;)p(t.charCodeAt(s._bufferIndex));else p(t)}}function p(e){d=d(e)}function f(e,t){t.restore()}function g(e,t){return function(n,a,r){let i,d,u,m;return Array.isArray(n)?p(n):"tokenize"in n?p([n]):function(e){return t;function t(t){const n=null!==t&&e[t],s=null!==t&&e.null;return p([...Array.isArray(n)?n:n?[n]:[],...Array.isArray(s)?s:s?[s]:[]])(t)}}(n);function p(e){return i=e,d=0,0===e.length?r:f(e[d])}function f(e){return function(n){m=function(){const e=h(),t=c.previous,n=c.currentConstruct,a=c.events.length,r=Array.from(o);return{from:a,restore:i};function i(){s=e,c.previous=t,c.currentConstruct=n,c.events.length=a,o=r,v()}}(),u=e,e.partial||(c.currentConstruct=e);if(e.name&&c.parser.constructs.disable.null.includes(e.name))return y();return e.tokenize.call(t?Object.assign(Object.create(c),t):c,l,g,y)(n)}}function g(t){return e(u,m),a}function y(e){return m.restore(),++d<i.length?f(i[d]):r}}}function y(e,t){e.resolveAll&&!r.includes(e)&&r.push(e),e.resolve&&tm(c.events,t,c.events.length-t,e.resolve(c.events.slice(t),c)),e.resolveTo&&(c.events=e.resolveTo(c.events,c))}function v(){s.line in a&&s.column<2&&(s.column=a[s.line],s.offset+=a[s.line]-1)}}function Dp(e){const t={constructs:function(e){const t={};let n=-1;for(;++n<e.length;)am(t,e[n]);return t}([Ap,...(e||{}).extensions||[]]),content:n(Nm),defined:[],document:n(km),flow:n(vp),lazy:{},string:n(bp),text:n(jp)};return t;function n(e){return function(n){return Op(t,e,n)}}}const Rp=/[\0\t\n\r]/g;const Mp=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function _p(e,t,n){if(t)return t;if(35===n.charCodeAt(0)){const e=n.charCodeAt(1),t=120===e||88===e;return im(n.slice(t?2:1),t?16:10)}return em(n)||e}const Fp={}.hasOwnProperty;function Bp(e,t,n){return"string"!=typeof t&&(n=t,t=void 0),function(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:r(te),autolinkProtocol:S,autolinkEmail:S,atxHeading:r(Q),blockQuote:r(V),characterEscape:S,characterReference:S,codeFenced:r(Y),codeFencedFenceInfo:i,codeFencedFenceMeta:i,codeIndented:r(Y,i),codeText:r(G,i),codeTextData:S,data:S,codeFlowValue:S,definition:r(J),definitionDestinationString:i,definitionLabelString:i,definitionTitleString:i,emphasis:r(K),hardBreakEscape:r(X),hardBreakTrailing:r(X),htmlFlow:r(Z,i),htmlFlowData:S,htmlText:r(Z,i),htmlTextData:S,image:r(ee),label:i,link:r(te),listItem:r(se),listItemValue:h,listOrdered:r(ne,u),listUnordered:r(ne),paragraph:r(ae),reference:B,referenceString:i,resourceDestinationString:i,resourceTitleString:i,setextHeading:r(Q),strong:r(re),thematicBreak:r(oe)},exit:{atxHeading:l(),atxHeadingSequence:j,autolink:l(),autolinkEmail:W,autolinkProtocol:q,blockQuote:l(),characterEscapeValue:C,characterReferenceMarkerHexadecimal:U,characterReferenceMarkerNumeric:U,characterReferenceValue:H,characterReference:$,codeFenced:l(g),codeFencedFence:f,codeFencedFenceInfo:m,codeFencedFenceMeta:p,codeFlowValue:C,codeIndented:l(y),codeText:l(I),codeTextData:C,data:C,definition:l(),definitionDestinationString:b,definitionLabelString:v,definitionTitleString:x,emphasis:l(),hardBreakEscape:l(P),hardBreakTrailing:l(P),htmlFlow:l(E),htmlFlowData:C,htmlText:l(L),htmlTextData:C,image:l(O),label:R,labelText:D,lineEnding:T,link:l(A),listItem:l(),listOrdered:l(),listUnordered:l(),paragraph:l(),referenceString:z,resourceDestinationString:M,resourceTitleString:_,resource:F,setextHeading:l(k),setextHeadingLineSequence:N,setextHeadingText:w,strong:l(),thematicBreak:l()}};Up(t,(e||{}).mdastExtensions||[]);const n={};return s;function s(e){let s={type:"root",children:[]};const r={stack:[s],tokenStack:[],config:t,enter:o,exit:c,buffer:i,resume:d,data:n},l=[];let u=-1;for(;++u<e.length;)if("listOrdered"===e[u][1].type||"listUnordered"===e[u][1].type)if("enter"===e[u][0])l.push(u);else{u=a(e,l.pop(),u)}for(u=-1;++u<e.length;){const n=t[e[u][0]];Fp.call(n,e[u][1].type)&&n[e[u][1].type].call(Object.assign({sliceSerialize:e[u][2].sliceSerialize},r),e[u][1])}if(r.tokenStack.length>0){const e=r.tokenStack[r.tokenStack.length-1];(e[1]||$p).call(r,void 0,e[0])}for(s.position={start:zp(e.length>0?e[0][1].start:{line:1,column:1,offset:0}),end:zp(e.length>0?e[e.length-2][1].end:{line:1,column:1,offset:0})},u=-1;++u<t.transforms.length;)s=t.transforms[u](s)||s;return s}function a(e,t,n){let s,a,r,i,o=t-1,l=-1,c=!1;for(;++o<=n;){const t=e[o];switch(t[1].type){case"listUnordered":case"listOrdered":case"blockQuote":"enter"===t[0]?l++:l--,i=void 0;break;case"lineEndingBlank":"enter"===t[0]&&(!s||i||l||r||(r=o),i=void 0);break;case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:i=void 0}if(!l&&"enter"===t[0]&&"listItemPrefix"===t[1].type||-1===l&&"exit"===t[0]&&("listUnordered"===t[1].type||"listOrdered"===t[1].type)){if(s){let i=o;for(a=void 0;i--;){const t=e[i];if("lineEnding"===t[1].type||"lineEndingBlank"===t[1].type){if("exit"===t[0])continue;a&&(e[a][1].type="lineEndingBlank",c=!0),t[1].type="lineEnding",a=i}else if("linePrefix"!==t[1].type&&"blockQuotePrefix"!==t[1].type&&"blockQuotePrefixWhitespace"!==t[1].type&&"blockQuoteMarker"!==t[1].type&&"listItemIndent"!==t[1].type)break}r&&(!a||r<a)&&(s._spread=!0),s.end=Object.assign({},a?e[a][1].start:t[1].end),e.splice(a||o,0,["exit",s,t[2]]),o++,n++}if("listItemPrefix"===t[1].type){const a={type:"listItem",_spread:!1,start:Object.assign({},t[1].start),end:void 0};s=a,e.splice(o,0,["enter",a,t[2]]),o++,n++,r=void 0,i=!0}}}return e[t][1]._spread=c,n}function r(e,t){return n;function n(n){o.call(this,e(n),n),t&&t.call(this,n)}}function i(){this.stack.push({type:"fragment",children:[]})}function o(e,t,n){this.stack[this.stack.length-1].children.push(e),this.stack.push(e),this.tokenStack.push([t,n||void 0]),e.position={start:zp(t.start),end:void 0}}function l(e){return t;function t(t){e&&e.call(this,t),c.call(this,t)}}function c(e,t){const n=this.stack.pop(),s=this.tokenStack.pop();if(!s)throw new Error("Cannot close `"+e.type+"` ("+Ph({start:e.start,end:e.end})+"): it’s not open");if(s[0].type!==e.type)if(t)t.call(this,e,s[0]);else{(s[1]||$p).call(this,e,s[0])}n.position.end=zp(e.end)}function d(){return function(e,t){const n=t||Kh;return Qh(e,"boolean"!=typeof n.includeImageAlt||n.includeImageAlt,"boolean"!=typeof n.includeHtml||n.includeHtml)}(this.stack.pop())}function u(){this.data.expectingFirstListItemValue=!0}function h(e){if(this.data.expectingFirstListItemValue){this.stack[this.stack.length-2].start=Number.parseInt(this.sliceSerialize(e),10),this.data.expectingFirstListItemValue=void 0}}function m(){const e=this.resume();this.stack[this.stack.length-1].lang=e}function p(){const e=this.resume();this.stack[this.stack.length-1].meta=e}function f(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function g(){const e=this.resume();this.stack[this.stack.length-1].value=e.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function y(){const e=this.resume();this.stack[this.stack.length-1].value=e.replace(/(\r?\n|\r)$/g,"")}function v(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=om(this.sliceSerialize(e)).toLowerCase()}function x(){const e=this.resume();this.stack[this.stack.length-1].title=e}function b(){const e=this.resume();this.stack[this.stack.length-1].url=e}function j(e){const t=this.stack[this.stack.length-1];if(!t.depth){const n=this.sliceSerialize(e).length;t.depth=n}}function w(){this.data.setextHeadingSlurpLineEnding=!0}function N(e){this.stack[this.stack.length-1].depth=61===this.sliceSerialize(e).codePointAt(0)?1:2}function k(){this.data.setextHeadingSlurpLineEnding=void 0}function S(e){const t=this.stack[this.stack.length-1].children;let n=t[t.length-1];n&&"text"===n.type||(n=ie(),n.position={start:zp(e.start),end:void 0},t.push(n)),this.stack.push(n)}function C(e){const t=this.stack.pop();t.value+=this.sliceSerialize(e),t.position.end=zp(e.end)}function T(e){const n=this.stack[this.stack.length-1];if(this.data.atHardBreak){return n.children[n.children.length-1].position.end=zp(e.end),void(this.data.atHardBreak=void 0)}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(n.type)&&(S.call(this,e),C.call(this,e))}function P(){this.data.atHardBreak=!0}function E(){const e=this.resume();this.stack[this.stack.length-1].value=e}function L(){const e=this.resume();this.stack[this.stack.length-1].value=e}function I(){const e=this.resume();this.stack[this.stack.length-1].value=e}function A(){const e=this.stack[this.stack.length-1];if(this.data.inReference){const t=this.data.referenceType||"shortcut";e.type+="Reference",e.referenceType=t,delete e.url,delete e.title}else delete e.identifier,delete e.label;this.data.referenceType=void 0}function O(){const e=this.stack[this.stack.length-1];if(this.data.inReference){const t=this.data.referenceType||"shortcut";e.type+="Reference",e.referenceType=t,delete e.url,delete e.title}else delete e.identifier,delete e.label;this.data.referenceType=void 0}function D(e){const t=this.sliceSerialize(e),n=this.stack[this.stack.length-2];n.label=function(e){return e.replace(Mp,_p)}(t),n.identifier=om(t).toLowerCase()}function R(){const e=this.stack[this.stack.length-1],t=this.resume(),n=this.stack[this.stack.length-1];if(this.data.inReference=!0,"link"===n.type){const t=e.children;n.children=t}else n.alt=t}function M(){const e=this.resume();this.stack[this.stack.length-1].url=e}function _(){const e=this.resume();this.stack[this.stack.length-1].title=e}function F(){this.data.inReference=void 0}function B(){this.data.referenceType="collapsed"}function z(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.label=t,n.identifier=om(this.sliceSerialize(e)).toLowerCase(),this.data.referenceType="full"}function U(e){this.data.characterReferenceType=e.type}function H(e){const t=this.sliceSerialize(e),n=this.data.characterReferenceType;let s;if(n)s=im(t,"characterReferenceMarkerNumeric"===n?10:16),this.data.characterReferenceType=void 0;else{s=em(t)}this.stack[this.stack.length-1].value+=s}function $(e){this.stack.pop().position.end=zp(e.end)}function q(e){C.call(this,e);this.stack[this.stack.length-1].url=this.sliceSerialize(e)}function W(e){C.call(this,e);this.stack[this.stack.length-1].url="mailto:"+this.sliceSerialize(e)}function V(){return{type:"blockquote",children:[]}}function Y(){return{type:"code",lang:null,meta:null,value:""}}function G(){return{type:"inlineCode",value:""}}function J(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function K(){return{type:"emphasis",children:[]}}function Q(){return{type:"heading",depth:0,children:[]}}function X(){return{type:"break"}}function Z(){return{type:"html",value:""}}function ee(){return{type:"image",title:null,url:"",alt:null}}function te(){return{type:"link",title:null,url:"",children:[]}}function ne(e){return{type:"list",ordered:"listOrdered"===e.type,start:null,spread:e._spread,children:[]}}function se(e){return{type:"listItem",spread:e._spread,checked:null,children:[]}}function ae(){return{type:"paragraph",children:[]}}function re(){return{type:"strong",children:[]}}function ie(){return{type:"text",value:""}}function oe(){return{type:"thematicBreak"}}}(n)(function(e){for(;!Hm(e););return e}(Dp(n).document().write(function(){let e,t=1,n="",s=!0;return function(a,r,i){const o=[];let l,c,d,u,h;for(a=n+("string"==typeof a?a.toString():new TextDecoder(r||void 0).decode(a)),d=0,n="",s&&(65279===a.charCodeAt(0)&&d++,s=void 0);d<a.length;){if(Rp.lastIndex=d,l=Rp.exec(a),u=l&&void 0!==l.index?l.index:a.length,h=a.charCodeAt(u),!l){n=a.slice(d);break}if(10===h&&d===u&&e)o.push(-3),e=void 0;else switch(e&&(o.push(-5),e=void 0),d<u&&(o.push(a.slice(d,u)),t+=u-d),h){case 0:o.push(65533),t++;break;case 9:for(c=4*Math.ceil(t/4),o.push(-2);t++<c;)o.push(-1);break;case 10:o.push(-4),t=1;break;default:e=!0,t=1}d=u+1}return i&&(e&&o.push(-5),n&&o.push(n),o.push(null)),o}}()(e,t,!0))))}function zp(e){return{line:e.line,column:e.column,offset:e.offset}}function Up(e,t){let n=-1;for(;++n<t.length;){const s=t[n];Array.isArray(s)?Up(e,s):Hp(e,s)}}function Hp(e,t){let n;for(n in t)if(Fp.call(t,n))switch(n){case"canContainEols":{const s=t[n];s&&e[n].push(...s);break}case"transforms":{const s=t[n];s&&e[n].push(...s);break}case"enter":case"exit":{const s=t[n];s&&Object.assign(e[n],s);break}}}function $p(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+Ph({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+Ph({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+Ph({start:t.start,end:t.end})+") is still open")}function qp(e){const t=this;t.parser=function(n){return Bp(n,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function Wp(e,t){const n=t.referenceType;let s="]";if("collapsed"===n?s+="[]":"full"===n&&(s+="["+(t.label||t.identifier)+"]"),"imageReference"===t.type)return[{type:"text",value:"!["+t.alt+s}];const a=e.all(t),r=a[0];r&&"text"===r.type?r.value="["+r.value:a.unshift({type:"text",value:"["});const i=a[a.length-1];return i&&"text"===i.type?i.value+=s:a.push({type:"text",value:s}),a}function Vp(e){const t=e.spread;return null==t?e.children.length>1:t}function Yp(e){const t=String(e),n=/\r?\n|\r/g;let s=n.exec(t),a=0;const r=[];for(;s;)r.push(Gp(t.slice(a,s.index),a>0,!0),s[0]),a=s.index+s[0].length,s=n.exec(t);return r.push(Gp(t.slice(a),a>0,!1)),r.join("")}function Gp(e,t,n){let s=0,a=e.length;if(t){let t=e.codePointAt(s);for(;9===t||32===t;)s++,t=e.codePointAt(s)}if(n){let t=e.codePointAt(a-1);for(;9===t||32===t;)a--,t=e.codePointAt(a-1)}return a>s?e.slice(s,a):""}const Jp={blockquote:function(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)},break:function(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:"\n"}]},code:function(e,t){const n=t.value?t.value+"\n":"",s={};t.lang&&(s.className=["language-"+t.lang]);let a={type:"element",tagName:"code",properties:s,children:[{type:"text",value:n}]};return t.meta&&(a.data={meta:t.meta}),e.patch(t,a),a=e.applyData(t,a),a={type:"element",tagName:"pre",properties:{},children:[a]},e.patch(t,a),a},delete:function(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},emphasis:function(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},footnoteReference:function(e,t){const n="string"==typeof e.options.clobberPrefix?e.options.clobberPrefix:"user-content-",s=String(t.identifier).toUpperCase(),a=jm(s.toLowerCase()),r=e.footnoteOrder.indexOf(s);let i,o=e.footnoteCounts.get(s);void 0===o?(o=0,e.footnoteOrder.push(s),i=e.footnoteOrder.length):i=r+1,o+=1,e.footnoteCounts.set(s,o);const l={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+a,id:n+"fnref-"+a+(o>1?"-"+o:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(i)}]};e.patch(t,l);const c={type:"element",tagName:"sup",properties:{},children:[l]};return e.patch(t,c),e.applyData(t,c)},heading:function(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},html:function(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}},imageReference:function(e,t){const n=String(t.identifier).toUpperCase(),s=e.definitionById.get(n);if(!s)return Wp(e,t);const a={src:jm(s.url||""),alt:t.alt};null!==s.title&&void 0!==s.title&&(a.title=s.title);const r={type:"element",tagName:"img",properties:a,children:[]};return e.patch(t,r),e.applyData(t,r)},image:function(e,t){const n={src:jm(t.url)};null!==t.alt&&void 0!==t.alt&&(n.alt=t.alt),null!==t.title&&void 0!==t.title&&(n.title=t.title);const s={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,s),e.applyData(t,s)},inlineCode:function(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const s={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,s),e.applyData(t,s)},linkReference:function(e,t){const n=String(t.identifier).toUpperCase(),s=e.definitionById.get(n);if(!s)return Wp(e,t);const a={href:jm(s.url||"")};null!==s.title&&void 0!==s.title&&(a.title=s.title);const r={type:"element",tagName:"a",properties:a,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)},link:function(e,t){const n={href:jm(t.url)};null!==t.title&&void 0!==t.title&&(n.title=t.title);const s={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)},listItem:function(e,t,n){const s=e.all(t),a=n?function(e){let t=!1;if("list"===e.type){t=e.spread||!1;const n=e.children;let s=-1;for(;!t&&++s<n.length;)t=Vp(n[s])}return t}(n):Vp(t),r={},i=[];if("boolean"==typeof t.checked){const e=s[0];let n;e&&"element"===e.type&&"p"===e.tagName?n=e:(n={type:"element",tagName:"p",properties:{},children:[]},s.unshift(n)),n.children.length>0&&n.children.unshift({type:"text",value:" "}),n.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),r.className=["task-list-item"]}let o=-1;for(;++o<s.length;){const e=s[o];(a||0!==o||"element"!==e.type||"p"!==e.tagName)&&i.push({type:"text",value:"\n"}),"element"!==e.type||"p"!==e.tagName||a?i.push(e):i.push(...e.children)}const l=s[s.length-1];l&&(a||"element"!==l.type||"p"!==l.tagName)&&i.push({type:"text",value:"\n"});const c={type:"element",tagName:"li",properties:r,children:i};return e.patch(t,c),e.applyData(t,c)},list:function(e,t){const n={},s=e.all(t);let a=-1;for("number"==typeof t.start&&1!==t.start&&(n.start=t.start);++a<s.length;){const e=s[a];if("element"===e.type&&"li"===e.tagName&&e.properties&&Array.isArray(e.properties.className)&&e.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const r={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(s,!0)};return e.patch(t,r),e.applyData(t,r)},paragraph:function(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},root:function(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)},strong:function(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},table:function(e,t){const n=e.all(t),s=n.shift(),a=[];if(s){const n={type:"element",tagName:"thead",properties:{},children:e.wrap([s],!0)};e.patch(t.children[0],n),a.push(n)}if(n.length>0){const s={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},r=Ch(t.children[1]),i=Sh(t.children[t.children.length-1]);r&&i&&(s.position={start:r,end:i}),a.push(s)}const r={type:"element",tagName:"table",properties:{},children:e.wrap(a,!0)};return e.patch(t,r),e.applyData(t,r)},tableCell:function(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)},tableRow:function(e,t,n){const s=n?n.children:void 0,a=0===(s?s.indexOf(t):1)?"th":"td",r=n&&"table"===n.type?n.align:void 0,i=r?r.length:t.children.length;let o=-1;const l=[];for(;++o<i;){const n=t.children[o],s={},i=r?r[o]:void 0;i&&(s.align=i);let c={type:"element",tagName:a,properties:s,children:[]};n&&(c.children=e.all(n),e.patch(n,c),c=e.applyData(n,c)),l.push(c)}const c={type:"element",tagName:"tr",properties:{},children:e.wrap(l,!0)};return e.patch(t,c),e.applyData(t,c)},text:function(e,t){const n={type:"text",value:Yp(String(t.value))};return e.patch(t,n),e.applyData(t,n)},thematicBreak:function(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)},toml:Kp,yaml:Kp,definition:Kp,footnoteDefinition:Kp};function Kp(){}const Qp="object"==typeof self?self:globalThis,Xp=e=>((e,t)=>{const n=(t,n)=>(e.set(n,t),t),s=a=>{if(e.has(a))return e.get(a);const[r,i]=t[a];switch(r){case 0:case-1:return n(i,a);case 1:{const e=n([],a);for(const t of i)e.push(s(t));return e}case 2:{const e=n({},a);for(const[t,n]of i)e[s(t)]=s(n);return e}case 3:return n(new Date(i),a);case 4:{const{source:e,flags:t}=i;return n(new RegExp(e,t),a)}case 5:{const e=n(new Map,a);for(const[t,n]of i)e.set(s(t),s(n));return e}case 6:{const e=n(new Set,a);for(const t of i)e.add(s(t));return e}case 7:{const{name:e,message:t}=i;return n(new Qp[e](t),a)}case 8:return n(BigInt(i),a);case"BigInt":return n(Object(BigInt(i)),a);case"ArrayBuffer":return n(new Uint8Array(i).buffer,i);case"DataView":{const{buffer:e}=new Uint8Array(i);return n(new DataView(e),i)}}return n(new Qp[r](i),a)};return s})(new Map,e)(0),Zp="",{toString:ef}={},{keys:tf}=Object,nf=e=>{const t=typeof e;if("object"!==t||!e)return[0,t];const n=ef.call(e).slice(8,-1);switch(n){case"Array":return[1,Zp];case"Object":return[2,Zp];case"Date":return[3,Zp];case"RegExp":return[4,Zp];case"Map":return[5,Zp];case"Set":return[6,Zp];case"DataView":return[1,n]}return n.includes("Array")?[1,n]:n.includes("Error")?[7,n]:[2,n]},sf=([e,t])=>0===e&&("function"===t||"symbol"===t),af=(e,{json:t,lossy:n}={})=>{const s=[];return((e,t,n,s)=>{const a=(e,t)=>{const a=s.push(e)-1;return n.set(t,a),a},r=s=>{if(n.has(s))return n.get(s);let[i,o]=nf(s);switch(i){case 0:{let t=s;switch(o){case"bigint":i=8,t=s.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+o);t=null;break;case"undefined":return a([-1],s)}return a([i,t],s)}case 1:{if(o){let e=s;return"DataView"===o?e=new Uint8Array(s.buffer):"ArrayBuffer"===o&&(e=new Uint8Array(s)),a([o,[...e]],s)}const e=[],t=a([i,e],s);for(const n of s)e.push(r(n));return t}case 2:{if(o)switch(o){case"BigInt":return a([o,s.toString()],s);case"Boolean":case"Number":case"String":return a([o,s.valueOf()],s)}if(t&&"toJSON"in s)return r(s.toJSON());const n=[],l=a([i,n],s);for(const t of tf(s))!e&&sf(nf(s[t]))||n.push([r(t),r(s[t])]);return l}case 3:return a([i,s.toISOString()],s);case 4:{const{source:e,flags:t}=s;return a([i,{source:e,flags:t}],s)}case 5:{const t=[],n=a([i,t],s);for(const[a,i]of s)(e||!sf(nf(a))&&!sf(nf(i)))&&t.push([r(a),r(i)]);return n}case 6:{const t=[],n=a([i,t],s);for(const a of s)!e&&sf(nf(a))||t.push(r(a));return n}}const{message:l}=s;return a([i,{name:o,message:l}],s)};return r})(!(t||n),!!t,new Map,s)(e),s},rf="function"==typeof structuredClone?(e,t)=>t&&("json"in t||"lossy"in t)?Xp(af(e,t)):structuredClone(e):(e,t)=>Xp(af(e,t));function of(e,t){const n=[{type:"text",value:"↩"}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function lf(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}const cf=function(e){if(null==e)return uf;if("function"==typeof e)return df(e);if("object"==typeof e)return Array.isArray(e)?function(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=cf(e[n]);return df(s);function s(...e){let n=-1;for(;++n<t.length;)if(t[n].apply(this,e))return!0;return!1}}(e):function(e){const t=e;return df(n);function n(n){const s=n;let a;for(a in e)if(s[a]!==t[a])return!1;return!0}}(e);if("string"==typeof e)return function(e){return df(t);function t(t){return t&&t.type===e}}(e);throw new Error("Expected function, string, or object as test")};function df(e){return function(t,n,s){return Boolean(function(e){return null!==e&&"object"==typeof e&&"type"in e}(t)&&e.call(this,t,"number"==typeof n?n:void 0,s||void 0))}}function uf(){return!0}const hf=[],mf=!0,pf=!1;function ff(e,t,n,s){let a;"function"==typeof t&&"function"!=typeof n?(s=n,n=t):a=t;const r=cf(a),i=s?-1:1;!function e(a,o,l){const c=a&&"object"==typeof a?a:{};if("string"==typeof c.type){const e="string"==typeof c.tagName?c.tagName:"string"==typeof c.name?c.name:void 0;Object.defineProperty(d,"name",{value:"node ("+a.type+(e?"<"+e+">":"")+")"})}return d;function d(){let c,d,u,h=hf;if((!t||r(a,o,l[l.length-1]||void 0))&&(h=function(e){if(Array.isArray(e))return e;if("number"==typeof e)return[mf,e];return null==e?hf:[e]}(n(a,l)),h[0]===pf))return h;if("children"in a&&a.children){const t=a;if(t.children&&"skip"!==h[0])for(d=(s?t.children.length:-1)+i,u=l.concat(t);d>-1&&d<t.children.length;){const n=t.children[d];if(c=e(n,d,u)(),c[0]===pf)return c;d="number"==typeof c[1]?c[1]:d+i}}return h}}(e,void 0,[])()}function gf(e,t,n,s){let a,r,i;"function"==typeof t&&"function"!=typeof n?(r=void 0,i=t,a=n):(r=t,i=n,a=s),ff(e,r,function(e,t){const n=t[t.length-1],s=n?n.children.indexOf(e):void 0;return i(e,s,n)},a)}const yf={}.hasOwnProperty,vf={};function xf(e,t){e.position&&(t.position=function(e){const t=Ch(e),n=Sh(e);if(t&&n)return{start:t,end:n}}(e))}function bf(e,t){let n=t;if(e&&e.data){const t=e.data.hName,s=e.data.hChildren,a=e.data.hProperties;if("string"==typeof t)if("element"===n.type)n.tagName=t;else{n={type:"element",tagName:t,properties:{},children:"children"in n?n.children:[n]}}"element"===n.type&&a&&Object.assign(n.properties,rf(a)),"children"in n&&n.children&&null!=s&&(n.children=s)}return n}function jf(e,t){const n=t.data||{},s=!("value"in t)||yf.call(n,"hProperties")||yf.call(n,"hChildren")?{type:"element",tagName:"div",properties:{},children:e.all(t)}:{type:"text",value:t.value};return e.patch(t,s),e.applyData(t,s)}function wf(e,t){const n=[];let s=-1;for(t&&n.push({type:"text",value:"\n"});++s<e.length;)s&&n.push({type:"text",value:"\n"}),n.push(e[s]);return t&&e.length>0&&n.push({type:"text",value:"\n"}),n}function Nf(e){let t=0,n=e.charCodeAt(t);for(;9===n||32===n;)t++,n=e.charCodeAt(t);return e.slice(t)}function kf(e,t){const n=function(e,t){const n=t||vf,s=new Map,a=new Map,r=new Map,i={...Jp,...n.handlers},o={all:function(e){const t=[];if("children"in e){const n=e.children;let s=-1;for(;++s<n.length;){const a=o.one(n[s],e);if(a){if(s&&"break"===n[s-1].type&&(Array.isArray(a)||"text"!==a.type||(a.value=Nf(a.value)),!Array.isArray(a)&&"element"===a.type)){const e=a.children[0];e&&"text"===e.type&&(e.value=Nf(e.value))}Array.isArray(a)?t.push(...a):t.push(a)}}}return t},applyData:bf,definitionById:s,footnoteById:a,footnoteCounts:r,footnoteOrder:[],handlers:i,one:function(e,t){const n=e.type,s=o.handlers[n];if(yf.call(o.handlers,n)&&s)return s(o,e,t);if(o.options.passThrough&&o.options.passThrough.includes(n)){if("children"in e){const{children:t,...n}=e,s=rf(n);return s.children=o.all(e),s}return rf(e)}return(o.options.unknownHandler||jf)(o,e,t)},options:n,patch:xf,wrap:wf};return gf(e,function(e){if("definition"===e.type||"footnoteDefinition"===e.type){const t="definition"===e.type?s:a,n=String(e.identifier).toUpperCase();t.has(n)||t.set(n,e)}}),o}(e,t),s=n.one(e,void 0),a=function(e){const t="string"==typeof e.options.clobberPrefix?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||of,s=e.options.footnoteBackLabel||lf,a=e.options.footnoteLabel||"Footnotes",r=e.options.footnoteLabelTagName||"h2",i=e.options.footnoteLabelProperties||{className:["sr-only"]},o=[];let l=-1;for(;++l<e.footnoteOrder.length;){const a=e.footnoteById.get(e.footnoteOrder[l]);if(!a)continue;const r=e.all(a),i=String(a.identifier).toUpperCase(),c=jm(i.toLowerCase());let d=0;const u=[],h=e.footnoteCounts.get(i);for(;void 0!==h&&++d<=h;){u.length>0&&u.push({type:"text",value:" "});let e="string"==typeof n?n:n(l,d);"string"==typeof e&&(e={type:"text",value:e}),u.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+c+(d>1?"-"+d:""),dataFootnoteBackref:"",ariaLabel:"string"==typeof s?s:s(l,d),className:["data-footnote-backref"]},children:Array.isArray(e)?e:[e]})}const m=r[r.length-1];if(m&&"element"===m.type&&"p"===m.tagName){const e=m.children[m.children.length-1];e&&"text"===e.type?e.value+=" ":m.children.push({type:"text",value:" "}),m.children.push(...u)}else r.push(...u);const p={type:"element",tagName:"li",properties:{id:t+"fn-"+c},children:e.wrap(r,!0)};e.patch(a,p),o.push(p)}if(0!==o.length)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:r,properties:{...rf(i),id:"footnote-label"},children:[{type:"text",value:a}]},{type:"text",value:"\n"},{type:"element",tagName:"ol",properties:{},children:e.wrap(o,!0)},{type:"text",value:"\n"}]}}(n),r=Array.isArray(s)?{type:"root",children:s}:s||{type:"root",children:[]};return a&&r.children.push({type:"text",value:"\n"},a),r}function Sf(e,t){return e&&"run"in e?async function(n,s){const a=kf(n,{file:s,...t});await e.run(a,s)}:function(n,s){return kf(n,{file:s,...e||t})}}function Cf(e){if(e)throw e}var Tf=Object.prototype.hasOwnProperty,Pf=Object.prototype.toString,Ef=Object.defineProperty,Lf=Object.getOwnPropertyDescriptor,If=function(e){return"function"==typeof Array.isArray?Array.isArray(e):"[object Array]"===Pf.call(e)},Af=function(e){if(!e||"[object Object]"!==Pf.call(e))return!1;var t,n=Tf.call(e,"constructor"),s=e.constructor&&e.constructor.prototype&&Tf.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!n&&!s)return!1;for(t in e);return void 0===t||Tf.call(e,t)},Of=function(e,t){Ef&&"__proto__"===t.name?Ef(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},Df=function(e,t){if("__proto__"===t){if(!Tf.call(e,t))return;if(Lf)return Lf(e,t).value}return e[t]},Rf=function e(){var t,n,s,a,r,i,o=arguments[0],l=1,c=arguments.length,d=!1;for("boolean"==typeof o&&(d=o,o=arguments[1]||{},l=2),(null==o||"object"!=typeof o&&"function"!=typeof o)&&(o={});l<c;++l)if(null!=(t=arguments[l]))for(n in t)s=Df(o,n),o!==(a=Df(t,n))&&(d&&a&&(Af(a)||(r=If(a)))?(r?(r=!1,i=s&&If(s)?s:[]):i=s&&Af(s)?s:{},Of(o,{name:n,newValue:e(d,i,a)})):void 0!==a&&Of(o,{name:n,newValue:a}));return o};const Mf=r(Rf);function _f(e){if("object"!=typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)}function Ff(){const e=[],t={run:function(...t){let n=-1;const s=t.pop();if("function"!=typeof s)throw new TypeError("Expected function as last argument, not "+s);!function a(r,...i){const o=e[++n];let l=-1;if(r)s(r);else{for(;++l<t.length;)null!==i[l]&&void 0!==i[l]||(i[l]=t[l]);t=i,o?function(e,t){let n;return s;function s(...t){const s=e.length>t.length;let o;s&&t.push(a);try{o=e.apply(this,t)}catch(r){if(s&&n)throw r;return a(r)}s||(o&&o.then&&"function"==typeof o.then?o.then(i,a):o instanceof Error?a(o):i(o))}function a(e,...s){n||(n=!0,t(e,...s))}function i(e){a(null,e)}}(o,a)(...i):s(null,...i)}}(null,...t)},use:function(n){if("function"!=typeof n)throw new TypeError("Expected `middelware` to be a function, not "+n);return e.push(n),t}};return t}const Bf={basename:function(e,t){if(void 0!==t&&"string"!=typeof t)throw new TypeError('"ext" argument must be a string');zf(e);let n,s=0,a=-1,r=e.length;if(void 0===t||0===t.length||t.length>e.length){for(;r--;)if(47===e.codePointAt(r)){if(n){s=r+1;break}}else a<0&&(n=!0,a=r+1);return a<0?"":e.slice(s,a)}if(t===e)return"";let i=-1,o=t.length-1;for(;r--;)if(47===e.codePointAt(r)){if(n){s=r+1;break}}else i<0&&(n=!0,i=r+1),o>-1&&(e.codePointAt(r)===t.codePointAt(o--)?o<0&&(a=r):(o=-1,a=i));s===a?a=i:a<0&&(a=e.length);return e.slice(s,a)},dirname:function(e){if(zf(e),0===e.length)return".";let t,n=-1,s=e.length;for(;--s;)if(47===e.codePointAt(s)){if(t){n=s;break}}else t||(t=!0);return n<0?47===e.codePointAt(0)?"/":".":1===n&&47===e.codePointAt(0)?"//":e.slice(0,n)},extname:function(e){zf(e);let t,n=e.length,s=-1,a=0,r=-1,i=0;for(;n--;){const o=e.codePointAt(n);if(47!==o)s<0&&(t=!0,s=n+1),46===o?r<0?r=n:1!==i&&(i=1):r>-1&&(i=-1);else if(t){a=n+1;break}}if(r<0||s<0||0===i||1===i&&r===s-1&&r===a+1)return"";return e.slice(r,s)},join:function(...e){let t,n=-1;for(;++n<e.length;)zf(e[n]),e[n]&&(t=void 0===t?e[n]:t+"/"+e[n]);return void 0===t?".":function(e){zf(e);const t=47===e.codePointAt(0);let n=function(e,t){let n,s,a="",r=0,i=-1,o=0,l=-1;for(;++l<=e.length;){if(l<e.length)n=e.codePointAt(l);else{if(47===n)break;n=47}if(47===n){if(i===l-1||1===o);else if(i!==l-1&&2===o){if(a.length<2||2!==r||46!==a.codePointAt(a.length-1)||46!==a.codePointAt(a.length-2))if(a.length>2){if(s=a.lastIndexOf("/"),s!==a.length-1){s<0?(a="",r=0):(a=a.slice(0,s),r=a.length-1-a.lastIndexOf("/")),i=l,o=0;continue}}else if(a.length>0){a="",r=0,i=l,o=0;continue}t&&(a=a.length>0?a+"/..":"..",r=2)}else a.length>0?a+="/"+e.slice(i+1,l):a=e.slice(i+1,l),r=l-i-1;i=l,o=0}else 46===n&&o>-1?o++:o=-1}return a}(e,!t);0!==n.length||t||(n=".");n.length>0&&47===e.codePointAt(e.length-1)&&(n+="/");return t?"/"+n:n}(t)},sep:"/"};function zf(e){if("string"!=typeof e)throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const Uf={cwd:function(){return"/"}};function Hf(e){return Boolean(null!==e&&"object"==typeof e&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&void 0===e.auth)}function $f(e){if("string"==typeof e)e=new URL(e);else if(!Hf(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if("file:"!==e.protocol){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return function(e){if(""!==e.hostname){const e=new TypeError('File URL host must be "localhost" or empty on darwin');throw e.code="ERR_INVALID_FILE_URL_HOST",e}const t=e.pathname;let n=-1;for(;++n<t.length;)if(37===t.codePointAt(n)&&50===t.codePointAt(n+1)){const e=t.codePointAt(n+2);if(70===e||102===e){const e=new TypeError("File URL path must not include encoded / characters");throw e.code="ERR_INVALID_FILE_URL_PATH",e}}return decodeURIComponent(t)}(e)}const qf=["history","path","basename","stem","extname","dirname"];class Wf{constructor(e){let t;t=e?Hf(e)?{path:e}:"string"==typeof e||function(e){return Boolean(e&&"object"==typeof e&&"byteLength"in e&&"byteOffset"in e)}(e)?{value:e}:e:{},this.cwd="cwd"in t?"":Uf.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let n,s=-1;for(;++s<qf.length;){const e=qf[s];e in t&&void 0!==t[e]&&null!==t[e]&&(this[e]="history"===e?[...t[e]]:t[e])}for(n in t)qf.includes(n)||(this[n]=t[n])}get basename(){return"string"==typeof this.path?Bf.basename(this.path):void 0}set basename(e){Yf(e,"basename"),Vf(e,"basename"),this.path=Bf.join(this.dirname||"",e)}get dirname(){return"string"==typeof this.path?Bf.dirname(this.path):void 0}set dirname(e){Gf(this.basename,"dirname"),this.path=Bf.join(e||"",this.basename)}get extname(){return"string"==typeof this.path?Bf.extname(this.path):void 0}set extname(e){if(Vf(e,"extname"),Gf(this.dirname,"extname"),e){if(46!==e.codePointAt(0))throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Bf.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){Hf(e)&&(e=$f(e)),Yf(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return"string"==typeof this.path?Bf.basename(this.path,this.extname):void 0}set stem(e){Yf(e,"stem"),Vf(e,"stem"),this.path=Bf.join(this.dirname||"",e+(this.extname||""))}fail(e,t,n){const s=this.message(e,t,n);throw s.fatal=!0,s}info(e,t,n){const s=this.message(e,t,n);return s.fatal=void 0,s}message(e,t,n){const s=new Ah(e,t,n);return this.path&&(s.name=this.path+":"+s.name,s.file=this.path),s.fatal=!1,this.messages.push(s),s}toString(e){if(void 0===this.value)return"";if("string"==typeof this.value)return this.value;return new TextDecoder(e||void 0).decode(this.value)}}function Vf(e,t){if(e&&e.includes(Bf.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Bf.sep+"`")}function Yf(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function Gf(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}const Jf=function(e){const t=this.constructor.prototype,n=t[e],s=function(){return n.apply(s,arguments)};return Object.setPrototypeOf(s,t),s},Kf={}.hasOwnProperty;class Qf extends Jf{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Ff()}copy(){const e=new Qf;let t=-1;for(;++t<this.attachers.length;){const n=this.attachers[t];e.use(...n)}return e.data(Mf(!0,{},this.namespace)),e}data(e,t){return"string"==typeof e?2===arguments.length?(tg("data",this.frozen),this.namespace[e]=t,this):Kf.call(this.namespace,e)&&this.namespace[e]||void 0:e?(tg("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[t,...n]=this.attachers[this.freezeIndex];if(!1===n[0])continue;!0===n[0]&&(n[0]=void 0);const s=t.call(e,...n);"function"==typeof s&&this.transformers.use(s)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const t=ag(e),n=this.parser||this.Parser;return Zf("parse",n),n(String(t),t)}process(e,t){const n=this;return this.freeze(),Zf("process",this.parser||this.Parser),eg("process",this.compiler||this.Compiler),t?s(void 0,t):new Promise(s);function s(s,a){const r=ag(e),i=n.parse(r);function o(e,n){e||!n?a(e):s?s(n):t(void 0,n)}n.run(i,r,function(e,t,s){if(e||!t||!s)return o(e);const a=t,r=n.stringify(a,s);var i;"string"==typeof(i=r)||function(e){return Boolean(e&&"object"==typeof e&&"byteLength"in e&&"byteOffset"in e)}(i)?s.value=r:s.result=r,o(e,s)})}}processSync(e){let t,n=!1;return this.freeze(),Zf("processSync",this.parser||this.Parser),eg("processSync",this.compiler||this.Compiler),this.process(e,function(e,s){n=!0,Cf(e),t=s}),sg("processSync","process",n),t}run(e,t,n){ng(e),this.freeze();const s=this.transformers;return n||"function"!=typeof t||(n=t,t=void 0),n?a(void 0,n):new Promise(a);function a(a,r){const i=ag(t);s.run(e,i,function(t,s,i){const o=s||e;t?r(t):a?a(o):n(void 0,o,i)})}}runSync(e,t){let n,s=!1;return this.run(e,t,function(e,t){Cf(e),n=t,s=!0}),sg("runSync","run",s),n}stringify(e,t){this.freeze();const n=ag(t),s=this.compiler||this.Compiler;return eg("stringify",s),ng(e),s(e,n)}use(e,...t){const n=this.attachers,s=this.namespace;if(tg("use",this.frozen),null==e);else if("function"==typeof e)o(e,t);else{if("object"!=typeof e)throw new TypeError("Expected usable value, not `"+e+"`");Array.isArray(e)?i(e):r(e)}return this;function a(e){if("function"==typeof e)o(e,[]);else{if("object"!=typeof e)throw new TypeError("Expected usable value, not `"+e+"`");if(Array.isArray(e)){const[t,...n]=e;o(t,n)}else r(e)}}function r(e){if(!("plugins"in e)&&!("settings"in e))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");i(e.plugins),e.settings&&(s.settings=Mf(!0,s.settings,e.settings))}function i(e){let t=-1;if(null==e);else{if(!Array.isArray(e))throw new TypeError("Expected a list of plugins, not `"+e+"`");for(;++t<e.length;){a(e[t])}}}function o(e,t){let s=-1,a=-1;for(;++s<n.length;)if(n[s][0]===e){a=s;break}if(-1===a)n.push([e,...t]);else if(t.length>0){let[s,...r]=t;const i=n[a][1];_f(i)&&_f(s)&&(s=Mf(!0,i,s)),n[a]=[e,s,...r]}}}}const Xf=(new Qf).freeze();function Zf(e,t){if("function"!=typeof t)throw new TypeError("Cannot `"+e+"` without `parser`")}function eg(e,t){if("function"!=typeof t)throw new TypeError("Cannot `"+e+"` without `compiler`")}function tg(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function ng(e){if(!_f(e)||"string"!=typeof e.type)throw new TypeError("Expected node, got `"+e+"`")}function sg(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function ag(e){return function(e){return Boolean(e&&"object"==typeof e&&"message"in e&&"messages"in e)}(e)?e:new Wf(e)}const rg=[],ig={allowDangerousHtml:!0},og=/^(https?|ircs?|mailto|xmpp)$/i,lg=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function cg(e){const t=function(e){const t=e.rehypePlugins||rg,n=e.remarkPlugins||rg,s=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...ig}:ig,a=Xf().use(qp).use(n).use(Sf,s).use(t);return a}(e),n=function(e){const t=e.children||"",n=new Wf;"string"==typeof t&&(n.value=t);return n}(e);return function(e,t){const n=t.allowedElements,s=t.allowElement,a=t.components,r=t.disallowedElements,i=t.skipHtml,o=t.unwrapDisallowed,l=t.urlTransform||dg;for(const d of lg)Object.hasOwn(t,d.from)&&mu((d.from,d.to&&d.to,d.id));return gf(e,c),Bh(e,{Fragment:B.Fragment,components:a,ignoreInvalidStyle:!0,jsx:B.jsx,jsxs:B.jsxs,passKeys:!0,passNode:!0});function c(e,t,a){if("raw"===e.type&&a&&"number"==typeof t)return i?a.children.splice(t,1):a.children[t]={type:"text",value:e.value},t;if("element"===e.type){let t;for(t in Jh)if(Object.hasOwn(Jh,t)&&Object.hasOwn(e.properties,t)){const n=e.properties[t],s=Jh[t];(null===s||s.includes(e.tagName))&&(e.properties[t]=l(String(n||""),t,e))}}if("element"===e.type){let i=n?!n.includes(e.tagName):!!r&&r.includes(e.tagName);if(!i&&s&&"number"==typeof t&&(i=!s(e,t,a)),i&&a&&"number"==typeof t)return o&&e.children?a.children.splice(t,1,...e.children):a.children.splice(t,1),t}}}(t.runSync(t.parse(n),n),e)}function dg(e){const t=e.indexOf(":"),n=e.indexOf("?"),s=e.indexOf("#"),a=e.indexOf("/");return-1===t||-1!==a&&t>a||-1!==n&&t>n||-1!==s&&t>s||og.test(e.slice(0,t))?e:""}const ug=({message:e,onSuggestionClick:t,onBuyClick:n,onSellClick:s})=>{const{cardType:a,content:r,stockData:i,suggestions:o}=e,l=()=>B.jsx("div",{className:"saytrix-card text-card-content",children:B.jsx("div",{className:"markdown-content",children:B.jsx(cg,{children:r})})}),c=(()=>{switch(a){case"stock-price":case"stock_data":return(()=>{var e,t,a,r,o,c;if(!i)return l();const d=i.change>=0;return B.jsxs("div",{className:"saytrix-card stock-card-content",children:[B.jsxs("div",{className:"card-header",children:[B.jsxs("div",{className:"stock-symbol",children:[B.jsx(dt,{className:"symbol-icon"}),B.jsx("span",{children:i.symbol})]}),B.jsxs("div",{className:"stock-change "+(d?"positive":"negative"),children:[d?B.jsx(vn,{}):B.jsx(yn,{}),(null==(e=i.changesPercentage)?void 0:e.toFixed(2))||"N/A","%"]})]}),B.jsxs("div",{className:"stock-price",children:[B.jsx("span",{className:"currency",children:"₹"}),B.jsx("span",{className:"price",children:(null==(t=i.price)?void 0:t.toFixed(2))||"N/A"})]}),B.jsxs("div",{className:"stock-details",children:[B.jsxs("div",{className:"detail-item",children:[B.jsx("span",{className:"label",children:"Change"}),B.jsxs("span",{className:"value "+(d?"positive":"negative"),children:[d?"+":"",(null==(a=i.change)?void 0:a.toFixed(2))||"N/A"]})]}),B.jsxs("div",{className:"detail-item",children:[B.jsx("span",{className:"label",children:"Volume"}),B.jsx("span",{className:"value",children:(null==(r=i.volume)?void 0:r.toLocaleString())||"N/A"})]}),B.jsxs("div",{className:"detail-item",children:[B.jsx("span",{className:"label",children:"Day High"}),B.jsx("span",{className:"value",children:(null==(o=i.dayHigh)?void 0:o.toFixed(2))||"N/A"})]}),B.jsxs("div",{className:"detail-item",children:[B.jsx("span",{className:"label",children:"Day Low"}),B.jsx("span",{className:"value",children:(null==(c=i.dayLow)?void 0:c.toFixed(2))||"N/A"})]})]}),B.jsxs("div",{className:"card-actions",children:[B.jsxs("button",{className:"action-btn buy-btn",onClick:()=>null==n?void 0:n(i),children:[B.jsx(ot,{})," Buy"]}),B.jsxs("button",{className:"action-btn sell-btn",onClick:()=>null==s?void 0:s(i),children:[B.jsx(st,{})," Sell"]})]})]})})();case"welcome":return B.jsxs("div",{className:"saytrix-card welcome-card-content",children:[B.jsx("div",{className:"card-header",children:B.jsxs("div",{className:"company-name",children:[B.jsx(ft,{className:"company-icon"}),B.jsx("span",{children:"Welcome to Saytrix"})]})}),B.jsx("div",{className:"markdown-content",children:B.jsx(cg,{children:r})})]});case"error":return B.jsxs("div",{className:"saytrix-card error-card-content",children:[B.jsx("div",{className:"card-header",children:B.jsxs("div",{className:"company-name",children:[B.jsx(nt,{className:"company-icon error-icon"}),B.jsx("span",{children:"Error"})]})}),B.jsx("div",{className:"markdown-content",children:B.jsx(cg,{children:r})})]});default:return l()}})();return B.jsxs(y.div,{className:"saytrix-card-wrapper",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[c,o&&0!==o.length?B.jsx("div",{className:"suggestions-container",children:o.map((e,n)=>B.jsx("button",{className:"suggestion-chip",onClick:()=>null==t?void 0:t(e),children:e},n))}):null]})},hg=()=>{const{isListening:e,stopListening:t,startListening:s}=Hr(),a=n.useCallback(()=>{if(e)t();else{if(!navigator.mediaDevices||!navigator.mediaDevices.getUserMedia)return void alert("Voice input is not supported in this browser.");navigator.mediaDevices.getUserMedia({audio:!0}).then(()=>s()).catch(e=>{alert("Microphone access is required for voice input. Please allow it in your browser settings.")})}},[e,s,t]);return B.jsxs("button",{className:"audio-toggle-btn "+(e?"enabled":"disabled"),onClick:a,title:e?"Turn Off Microphone":"Turn On Microphone","aria-label":e?"Turn Off Microphone":"Turn On Microphone",children:[B.jsx(g,{mode:"wait",children:B.jsx(y.span,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{duration:.2},children:e?B.jsx(Wt,{}):B.jsx(qt,{})},e?"mic-on":"mic-off")}),B.jsx("span",{className:"button-text",children:e?"Mic On":"Mic Off"})]})},mg=({user:e,theme:t})=>{const[s]=n.useState(["Show me NIFTY performance","What are today's top gainers?","Tell me about RELIANCE stock","Latest market news","Portfolio analysis"]),{messages:a,inputText:r,isProcessing:i,isListening:l,isSpeaking:c,error:d,messagesEndRef:u,setInputText:h,setMessages:m,sendMessage:p,clearChat:f,aiMode:v,setAiMode:x,setError:b,handleModeChange:j,handleBuyStock:w,handleSellStock:N,handleSuggestionClick:k,handleRecentQuestionClick:S}=(()=>{o();const[e,t]=n.useState([]),[s,a]=n.useState(""),[r,i]=n.useState(!1),[l,c]=n.useState(null),[d,u]=n.useState("high"),[h,m]=n.useState("casual"),[p,f]=n.useState(!1),[g,y]=n.useState(!1),v=n.useRef(null),x=n.useRef(null),b=n.useRef(null);n.useEffect(()=>{const e={id:"welcome_"+Date.now(),type:"assistant",content:"🚀 Hello! I'm Saytrix, your AI-powered stock market assistant. I can help you with:\n\n📊 Real-time stock prices and data\n📈 Market analysis and trends\n🏢 Company information and fundamentals\n⭐ Top gainers and losers\n📰 Latest market news\n🎓 Stock market education\n\nWhat would you like to know about the stock market today?\n\n💡 Currently running in demo mode with sample data for showcase",timestamp:new Date,suggestions:["Show me NIFTY performance","What are today's top gainers?","Tell me about RELIANCE stock","Latest market news"],confidence:"high",cardType:"welcome"};t([e]),j(),w()},[]),n.useEffect(()=>{var e;null==(e=v.current)||e.scrollIntoView({behavior:"smooth"})},[e]);const j=()=>{if("webkitSpeechRecognition"in window||"SpeechRecognition"in window){const e=window.SpeechRecognition||window.webkitSpeechRecognition;x.current=new e,x.current.continuous=!1,x.current.interimResults=!1,x.current.lang="en-US",x.current.onstart=()=>{f(!0),c(null)},x.current.onend=()=>{f(!1)},x.current.onresult=async e=>{const t=e.results[0][0].transcript,n=e.results[0][0].confidence;a(t),u(n>.8?"high":n>.6?"medium":"low"),f(!1),setTimeout(async()=>{t.trim()&&await k(t)},300)},x.current.onerror=e=>{f(!1),c("Voice recognition failed. Please try again.")}}},w=()=>{"speechSynthesis"in window&&(b.current=window.speechSynthesis)},N=n.useCallback(async(e=s,n=!1)=>{if(!e.trim()||r)return;a(""),i(!0),c(null);const o={id:Date.now(),type:"user",content:e,timestamp:new Date,confidence:n?d:"high"};t(e=>[...e,o]);try{const s=await Fr(e,"offline_session_id");if(!s.success)throw new Error("Backend response failed");{const e={id:Date.now()+1,type:"assistant",content:s.data.response,timestamp:new Date,suggestions:s.data.suggestions||[],stockData:s.data.stockData,cardType:E(s.data.response,s.data.stockData)};t(t=>[...t,e]),n&&S(e.content)}}catch(l){c("Server connection failed. Using offline mode with limited functionality."),await new Promise(e=>setTimeout(e,500));const s={id:Date.now()+1,type:"assistant",content:I(e),timestamp:new Date,suggestions:A(e),cardType:L(e)};t(e=>[...e,s]),n&&S(s.content)}finally{i(!1)}},[s,r,d]),k=n.useCallback(async e=>{r||(a(e),u(P(e)),N(e,!0))},[N,r]),S=e=>{if(b.current&&e){y(!0);const t=e.replace(/\*\*(.*?)\*\*/g,"$1").replace(/\*(.*?)\*/g,"$1").replace(/₹/g,"rupees").replace(/[•]/g,"").replace(/\n+/g,". ").substring(0,200),n=new SpeechSynthesisUtterance(t);n.rate=.9,n.pitch=1,n.volume=.8,n.onend=()=>{y(!1)},n.onerror=()=>{y(!1)},b.current.cancel(),b.current.speak(n)}},C=n.useCallback(()=>{if(x.current&&!p)try{x.current.start(),setTimeout(()=>{if(x.current&&p)try{x.current.stop()}catch(e){}},1e4)}catch(e){c("Voice recognition failed. Please try again."),f(!1)}},[p]),T=n.useCallback(()=>{if(x.current&&p){try{x.current.stop()}catch(e){}f(!1)}},[p]),P=e=>e.includes("₹")||e.includes("stock")||e.includes("market")?"high":e.includes("might")||e.includes("possibly")||e.includes("maybe")?"medium":"high",E=(e,t)=>t?"stock-price":e&&(e.toLowerCase().includes("buy")||e.toLowerCase().includes("sell"))?"recommendation":"text",L=e=>{const t=e.toLowerCase();return t.includes("price")||t.includes("quote")||t.includes("₹")?"stock-price":"text"},I=e=>{const t=e.toLowerCase();return t.includes("reliance")||t.includes("ril")?"**Reliance Industries (RELIANCE)**\n\n**Current Price:** ₹2,465 *(demo data)*\n\n**Company Overview:**\nReliance Industries is one of India's largest conglomerates with diversified business interests across multiple sectors.\n\n**Key Business Segments:**\n• Petrochemicals and Oil Refining\n• Telecommunications (Jio)\n• Retail (Reliance Retail)\n• Digital Services\n\n**Investment Highlights:**\n• Strong market position in each segment\n• Consistent dividend history\n• Blue-chip investment with long-term growth potential\n• Strategic focus on digital transformation\n\nWould you like to explore its **fundamentals** or **recent performance** in detail?":"**Welcome to Saytrix!** 🚀\n\nI'm your AI-powered trading assistant here to help you navigate the Indian stock markets with confidence.\n\nNote: Currently displaying demo data for illustration purposes.\n\nReady to start your trading journey? Ask me anything about the markets!"},A=e=>{const t=e.toLowerCase();return t.includes("reliance")||t.includes("ril")?["Tell me about TCS","Show HDFC Bank info","Compare IT stocks"]:["Market overview","Top stocks","Sector analysis","Trading tips"]},O=n.useCallback(()=>{t([]),c(null);const e={id:"welcome_"+Date.now(),type:"assistant",content:"🚀 Hello! I'm Saytrix, your AI-powered stock market assistant. I can help you with...",timestamp:new Date,suggestions:["Show me NIFTY performance","What are today's top gainers?"],confidence:"high",cardType:"welcome"};t([e])},[]),D=n.useCallback(e=>{m(e);const n={id:Date.now(),type:"assistant",content:`🤖 **AI Mode Changed**\n\nSwitched to **${e.charAt(0).toUpperCase()+e.slice(1)} Mode**\n\n${"expert"===e?"🎯 Expert mode provides detailed technical analysis and advanced trading insights.":"😊 Casual mode offers friendly, easy-to-understand market information."}`,timestamp:new Date,cardType:"text",suggestions:"expert"===e?["Technical analysis","Market trends","Risk assessment"]:["Stock basics","Simple explanations","Market overview"]};t(e=>[...e,n])},[]);return{messages:e,inputText:s,isProcessing:r,isListening:p,isSpeaking:g,error:l,confidence:d,aiMode:h,messagesEndRef:v,setInputText:a,setMessages:t,sendMessage:n.useCallback(()=>N(s),[N,s]),startListening:C,stopListening:T,clearChat:O,setAiMode:D,setError:c}})(),{isListening:C,startListening:T,stopListening:P}=Hr();n.useEffect(()=>{},[C]);const E=n.useCallback(e=>{"Enter"!==e.key||e.shiftKey?"Escape"===e.key?(h(""),b(null)):e.ctrlKey&&"k"===e.key?(e.preventDefault(),f()):e.ctrlKey&&"m"===e.key&&(e.preventDefault(),C?P():T()):(e.preventDefault(),p())},[p,h,b,f,C,P,T]);return B.jsxs("div",{className:`saytrix-page ${t}`,children:[B.jsxs("div",{className:"saytrix-navbar",children:[B.jsx("div",{className:"navbar-left",children:B.jsxs("div",{className:"tradebro-brand",children:[B.jsx(kn,{className:"brand-icon"}),B.jsx("span",{className:"brand-text",children:"TradeBro"})]})}),B.jsx("div",{className:"navbar-center",children:B.jsxs("div",{className:"ai-mode-toggle",children:[B.jsx("button",{className:"mode-btn "+("casual"===v?"active":""),onClick:()=>j("casual"),children:"Casual"}),B.jsx("button",{className:"mode-btn "+("expert"===v?"active":""),onClick:()=>j("expert"),children:"Expert"})]})}),B.jsxs("div",{className:"navbar-right",children:[B.jsx(hg,{}),B.jsxs("button",{className:"profile-btn",onClick:f,title:"Clear Chat","aria-label":"Clear Chat",children:[B.jsx(nn,{}),B.jsx("span",{className:"button-text",children:"Clear"})]}),B.jsxs("button",{className:"profile-btn",children:[B.jsx(xn,{}),B.jsx("span",{className:"button-text",children:(null==e?void 0:e.name)||"User"})]})]})]}),B.jsxs("div",{className:"saytrix-container",children:[B.jsx("div",{className:"saytrix-layout",children:B.jsxs("div",{className:"saytrix-main",children:[0===a.length&&B.jsxs(y.div,{className:"recent-questions",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[B.jsx("h3",{children:"Recent Questions"}),B.jsx("div",{className:"question-chips",children:s.map((e,t)=>B.jsx(y.button,{className:"question-chip",onClick:()=>S(e),whileHover:{scale:1.02},whileTap:{scale:.98},children:e},t))})]}),B.jsxs("div",{className:"messages-container",children:[B.jsx(g,{children:a.map(e=>B.jsxs(y.div,{className:`message-wrapper ${e.type}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:[B.jsx("div",{className:"message-avatar",children:"user"===e.type?B.jsx(xn,{size:20}):B.jsx(jt,{size:20})}),B.jsx("div",{className:"message-content",children:B.jsx(ug,{message:e,onSuggestionClick:k,onBuyClick:w,onSellClick:N})})]},e.id))}),i&&B.jsxs(y.div,{className:"message-wrapper assistant processing",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[B.jsx("div",{className:"message-avatar",children:B.jsx(jt,{size:20})}),B.jsx("div",{className:"message-content",children:B.jsxs("div",{className:"typing-indicator",children:[B.jsx("span",{}),B.jsx("span",{}),B.jsx("span",{})]})})]}),B.jsx("div",{ref:u})]}),B.jsx(g,{children:d&&B.jsxs(y.div,{className:"error-banner",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},children:[B.jsx(nt,{size:16}),B.jsx("span",{children:d}),B.jsx("button",{onClick:()=>b(null),"aria-label":"Dismiss error",children:B.jsx(Nn,{size:16})})]})})]})}),B.jsxs(y.div,{className:"floating-input",initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},children:[B.jsxs("div",{className:"input-container",children:[B.jsx("button",{className:"voice-btn",onClick:C?P:T,title:C?"Stop listening":"Start voice input","aria-label":C?"Stop voice input":"Start voice input",children:B.jsx(g,{mode:"wait",children:B.jsx(y.span,{initial:{scale:1},animate:{scale:[1,1.2,1]},exit:{scale:1},transition:{duration:C?1:.2,repeat:C?1/0:0},children:C?B.jsx(Wt,{size:20}):B.jsx(qt,{size:20})},C?"mic-listening":"mic-off")})}),B.jsx("input",{type:"text",className:"message-input",placeholder:"Ask Saytrix about stocks, portfolio, or market trends... (Ctrl+M for voice, Ctrl+K to clear)",value:r,onChange:e=>h(e.target.value),onKeyDown:E,autoFocus:!0}),B.jsx("button",{className:"send-btn",onClick:p,disabled:!r.trim()||i,title:"Send message","aria-label":"Send message",children:i?B.jsx(nn,{size:20,className:"animate-spin"}):B.jsx(rn,{size:20})})]}),B.jsx(g,{children:c&&B.jsxs(y.div,{className:"voice-indicator speaking",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},transition:{duration:.2},children:[B.jsx(jn,{size:16}),B.jsx("span",{children:"Saytrix is speaking..."})]})})]})]})]})},pg=()=>{const{symbol:e}=d(),t=o(),{portfolioData:s,buyStock:a,isLoading:r}=ui();Cn();const[i,l]=n.useState(null),[c,u]=n.useState(!0),[h,m]=n.useState(null),[p,f]=n.useState(1);n.useState(!1);const[g,v]=n.useState(0),[x,b]=n.useState(!1);n.useState(!1);const[j,w]=n.useState(!1);n.useEffect(()=>{e&&N()},[e]);const N=async()=>{try{u(!0),m(null);const t={RELIANCE:{name:"Reliance Industries Ltd",price:2847.65,sector:"Energy",industry:"Oil & Gas",description:"Reliance Industries Limited is an Indian multinational conglomerate, headquartered in Mumbai. It has diverse businesses including energy, petrochemicals, natural gas, retail, telecommunications, mass media, and textiles."},TCS:{name:"Tata Consultancy Services",price:4125.8,sector:"Information Technology",industry:"IT Services",description:"Tata Consultancy Services is an Indian multinational information technology services and consulting company headquartered in Mumbai. It is a part of the Tata Group and operates in 149 locations across 46 countries."},HDFCBANK:{name:"HDFC Bank Limited",price:1687.9,sector:"Financial Services",industry:"Banking",description:"HDFC Bank Limited is an Indian banking and financial services company headquartered in Mumbai. It is one of the largest private sector banks in India by assets and market capitalization."},INFY:{name:"Infosys Limited",price:1842.35,sector:"Information Technology",industry:"IT Services",description:"Infosys Limited is an Indian multinational information technology company that provides business consulting, information technology and outsourcing services."},HINDUNILVR:{name:"Hindustan Unilever Ltd",price:2456.7,sector:"FMCG",industry:"Consumer Goods",description:"Hindustan Unilever Limited is an Indian consumer goods company headquartered in Mumbai. It is a subsidiary of the British company Unilever."},ICICIBANK:{name:"ICICI Bank Limited",price:1287.45,sector:"Financial Services",industry:"Banking",description:"ICICI Bank Limited is an Indian multinational bank and financial services company headquartered in Mumbai with its registered office in Vadodara."}}[e.toUpperCase()]||{name:`${e.toUpperCase()} Corporation`,price:1e3+2e3*Math.random(),sector:"Technology",industry:"Software",description:`${e.toUpperCase()} Corporation is a leading company in its sector with strong fundamentals and growth prospects.`},n=t.price,s=(Math.random()-.5)*n*.05,a=s/n*100,r={symbol:e.toUpperCase(),name:t.name,price:n,change:s,changePercent:a,volume:Math.floor(2e6*Math.random())+5e5,marketCap:Math.floor(1e9*n+5e11*Math.random()),pe:Math.floor(25*Math.random())+15,high52w:1.3*n,low52w:.7*n,dayHigh:1.02*n,dayLow:.98*n,avgVolume:Math.floor(1e6*Math.random())+3e5,beta:.8+.8*Math.random(),eps:.05*n,dividend:3*Math.random()+1,sector:t.sector,industry:t.industry,description:t.description,lastUpdated:(new Date).toISOString()};l(r)}catch(t){m("Failed to fetch stock data")}finally{u(!1)}},k=e=>{if(!T||x)return;e.preventDefault(),e.stopPropagation();const t=e.currentTarget.closest(".slide-to-buy");if(!t)return;const n=t.getBoundingClientRect(),s=n.width-52-8;let a=!0;const r=e=>{if(!a)return;e.preventDefault();const t=(e.touches?e.touches[0].clientX:e.clientX)-n.left-26,r=Math.min(Math.max(t/s*100,0),100);v(r)},i=async()=>{a=!1,g>80?(v(100),await S()):v(0),document.removeEventListener("mousemove",r,{passive:!1}),document.removeEventListener("mouseup",i),document.removeEventListener("touchmove",r,{passive:!1}),document.removeEventListener("touchend",i)};document.addEventListener("mousemove",r,{passive:!1}),document.addEventListener("mouseup",i),document.addEventListener("touchmove",r,{passive:!1}),document.addEventListener("touchend",i)},S=async()=>{if(i&&p&&!x){b(!0);try{const e=await a(i.symbol,p,i.price,i);e.success?(Ze.success(`Successfully bought ${p} shares of ${i.symbol}!`),v(100),setTimeout(()=>{t("/portfolio",{state:{purchasedStock:{symbol:i.symbol,name:i.name,quantity:p,price:i.price,totalCost:p*i.price},showPurchaseSuccess:!0}})},1500)):(Ze.error(e.message||"Failed to buy stock"),v(0))}catch(e){Ze.error("Failed to buy stock"),v(0)}finally{b(!1)}}};if(c)return B.jsxs("div",{className:"stock-detail-loading",children:[B.jsx("div",{className:"loading-spinner"}),B.jsx("p",{children:"Loading stock details..."})]});if(h||!i)return B.jsxs("div",{className:"stock-detail-error",children:[B.jsx(tt,{size:48}),B.jsx("h2",{children:"Error Loading Stock"}),B.jsx("p",{children:h||"Stock not found"}),B.jsx("button",{onClick:()=>t(-1),className:"back-btn",children:"Go Back"})]});const C=p*i.price,T=s.availableCash>=C,P=i.change>=0;return B.jsxs("div",{className:"stock-detail-page",children:[B.jsxs("div",{className:"stock-detail-header",children:[B.jsx("button",{onClick:()=>t(-1),className:"back-button",children:B.jsx(rt,{})}),B.jsxs("div",{className:"header-info",children:[B.jsx("h1",{children:i.symbol}),B.jsx("p",{children:i.name})]}),B.jsxs("div",{className:"header-actions",children:[B.jsx("button",{onClick:async()=>{w(!0),await N(),w(!1),Ze.success("Stock data refreshed")},className:"refresh-btn "+(j?"spinning":""),disabled:j,children:B.jsx(nn,{})}),B.jsx(Eo,{stockData:i,size:"small",variant:"icon",showText:!1})]})]}),B.jsxs("div",{className:"price-section",children:[B.jsxs("div",{className:"current-price",children:[B.jsx("span",{className:"price-value",children:Co(i.price)}),B.jsxs("div",{className:"price-change "+(P?"positive":"negative"),children:[P?B.jsx(vn,{}):B.jsx(yn,{}),B.jsxs("span",{children:[Co(i.change)," (",i.changePercent.toFixed(2),"%)"]})]})]}),B.jsxs("div",{className:"price-range",children:[B.jsxs("div",{className:"range-item",children:[B.jsx("span",{className:"label",children:"Day Range"}),B.jsxs("span",{className:"value",children:[Co(i.dayLow)," - ",Co(i.dayHigh)]})]}),B.jsxs("div",{className:"range-item",children:[B.jsx("span",{className:"label",children:"52W Range"}),B.jsxs("span",{className:"value",children:[Co(i.low52w)," - ",Co(i.high52w)]})]})]})]}),B.jsxs("div",{className:"key-stats",children:[B.jsxs("div",{className:"stat-item",children:[B.jsx(et,{className:"stat-icon"}),B.jsxs("div",{className:"stat-info",children:[B.jsx("span",{className:"stat-label",children:"Volume"}),B.jsx("span",{className:"stat-value",children:To(i.volume)})]})]}),B.jsxs("div",{className:"stat-item",children:[B.jsx(Zt,{className:"stat-icon"}),B.jsxs("div",{className:"stat-info",children:[B.jsx("span",{className:"stat-label",children:"Market Cap"}),B.jsx("span",{className:"stat-value",children:Co(i.marketCap)})]})]}),B.jsxs("div",{className:"stat-item",children:[B.jsx(dt,{className:"stat-icon"}),B.jsxs("div",{className:"stat-info",children:[B.jsx("span",{className:"stat-label",children:"P/E Ratio"}),B.jsx("span",{className:"stat-value",children:i.pe})]})]}),B.jsxs("div",{className:"stat-item",children:[B.jsx(Nt,{className:"stat-icon"}),B.jsxs("div",{className:"stat-info",children:[B.jsx("span",{className:"stat-label",children:"EPS"}),B.jsx("span",{className:"stat-value",children:Co(i.eps)})]})]})]}),B.jsxs("div",{className:"trading-section",children:[B.jsxs("h3",{children:["Buy ",i.symbol]}),B.jsxs("div",{className:"quantity-section",children:[B.jsx("label",{children:"Quantity"}),B.jsxs("div",{className:"quantity-controls",children:[B.jsx("button",{onClick:()=>f(Math.max(1,p-1)),className:"quantity-btn",children:"-"}),B.jsx("input",{type:"number",value:p,onChange:e=>f(Math.max(1,parseInt(e.target.value)||1)),className:"quantity-input",min:"1"}),B.jsx("button",{onClick:()=>f(p+1),className:"quantity-btn",children:"+"})]})]}),B.jsxs("div",{className:"order-summary",children:[B.jsxs("div",{className:"summary-row",children:[B.jsx("span",{children:"Price per share"}),B.jsx("span",{children:Co(i.price)})]}),B.jsxs("div",{className:"summary-row",children:[B.jsx("span",{children:"Quantity"}),B.jsxs("span",{children:[p," shares"]})]}),B.jsxs("div",{className:"summary-row total",children:[B.jsx("span",{children:"Total Cost"}),B.jsx("span",{children:Co(C)})]}),B.jsxs("div",{className:"summary-row",children:[B.jsx("span",{children:"Available Cash"}),B.jsx("span",{className:T?"positive":"negative",children:Co(s.availableCash)})]})]}),B.jsxs("div",{className:"slide-to-buy-container",children:[!T&&B.jsxs("div",{className:"insufficient-funds-warning",children:[B.jsx(tt,{}),B.jsx("span",{children:"Insufficient funds"})]}),B.jsxs("div",{className:`slide-to-buy ${T?"":"disabled"} ${x?"processing":""}`,children:[B.jsx("div",{className:"slide-track",style:{background:`linear-gradient(to right, #10B981 ${g}%, #E5E7EB ${g}%)`},children:B.jsx(y.div,{className:"slide-button",style:{left:`${Math.min(g,85)}%`},onMouseDown:T?k:void 0,onTouchStart:T?k:void 0,whileHover:T?{scale:1.05}:{},whileTap:T?{scale:.95}:{},animate:{left:`${Math.min(g,85)}%`},transition:{type:0===g?"spring":"tween",stiffness:300,damping:30,duration:0===g?.5:.1},children:x?B.jsx("div",{className:"loading-spinner small"}):g>80?B.jsx(ft,{}):B.jsx(it,{})})}),B.jsx("span",{className:"slide-text",children:x?"Processing...":g>80?"Release to Buy!":"Slide to Buy"})]})]})]}),B.jsxs("div",{className:"company-info",children:[B.jsxs("h3",{children:["About ",i.name]}),B.jsxs("div",{className:"company-details",children:[B.jsxs("div",{className:"detail-row",children:[B.jsx("span",{className:"label",children:"Sector"}),B.jsx("span",{className:"value",children:i.sector})]}),B.jsxs("div",{className:"detail-row",children:[B.jsx("span",{className:"label",children:"Industry"}),B.jsx("span",{className:"value",children:i.industry})]}),B.jsxs("div",{className:"detail-row",children:[B.jsx("span",{className:"label",children:"Beta"}),B.jsx("span",{className:"value",children:i.beta})]}),B.jsxs("div",{className:"detail-row",children:[B.jsx("span",{className:"label",children:"Dividend Yield"}),B.jsxs("span",{className:"value",children:[i.dividend,"%"]})]})]}),B.jsx("p",{className:"company-description",children:i.description})]})]})},fg=()=>B.jsx("div",{className:"legal-page",children:B.jsxs("div",{className:"legal-container",children:[B.jsxs(y.div,{className:"legal-header",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[B.jsxs(c,{to:"/login",className:"back-link",children:[B.jsx(rt,{size:20}),"Back to Login"]}),B.jsxs("div",{className:"legal-title-section",children:[B.jsx("div",{className:"legal-icon",children:B.jsx(cn,{size:32})}),B.jsx("h1",{className:"legal-title",children:"Terms of Service"}),B.jsx("p",{className:"legal-subtitle",children:"Please read these terms carefully before using TradeBro"}),B.jsxs("div",{className:"last-updated",children:["Last updated: ","December 15, 2024"]})]})]}),B.jsxs(y.div,{className:"legal-content",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:[B.jsxs("div",{className:"legal-notice",children:[B.jsx(nt,{size:20}),B.jsxs("div",{children:[B.jsx("strong",{children:"Important Notice:"})," TradeBro is a virtual trading platform for educational purposes only. No real money or actual securities are involved in any transactions."]})]}),B.jsxs("section",{className:"legal-section",children:[B.jsx("h2",{children:"1. Acceptance of Terms"}),B.jsx("p",{children:'By accessing and using TradeBro ("the Platform", "our Service"), you accept and agree to be bound by the terms and provision of this agreement. If you do not agree to abide by the above, please do not use this service.'}),B.jsx("p",{children:'These Terms of Service ("Terms") govern your use of our virtual stock trading platform operated by TradeBro ("us", "we", or "our").'})]}),B.jsxs("section",{className:"legal-section",children:[B.jsx("h2",{children:"2. Description of Service"}),B.jsx("p",{children:"TradeBro provides:"}),B.jsxs("ul",{children:[B.jsx("li",{children:"Virtual stock trading simulation using real market data"}),B.jsx("li",{children:"Educational tools and resources for learning about stock trading"}),B.jsx("li",{children:"Portfolio management and tracking features"}),B.jsx("li",{children:"AI-powered trading assistant (Saytrix)"}),B.jsx("li",{children:"Market news and analysis"}),B.jsx("li",{children:"Social features for connecting with other virtual traders"})]}),B.jsxs("div",{className:"highlight-box",children:[B.jsx(ft,{size:16}),B.jsx("span",{children:"All trading on TradeBro is virtual and for educational purposes only."})]})]}),B.jsxs("section",{className:"legal-section",children:[B.jsx("h2",{children:"3. User Accounts and Registration"}),B.jsx("h3",{children:"3.1 Account Creation"}),B.jsx("p",{children:"To use certain features of our Service, you must register for an account. You may register using your email address or through third-party authentication providers like Google."}),B.jsx("h3",{children:"3.2 Account Security"}),B.jsx("p",{children:"You are responsible for:"}),B.jsxs("ul",{children:[B.jsx("li",{children:"Maintaining the confidentiality of your account credentials"}),B.jsx("li",{children:"All activities that occur under your account"}),B.jsx("li",{children:"Notifying us immediately of any unauthorized use"}),B.jsx("li",{children:"Ensuring your account information is accurate and up-to-date"})]}),B.jsx("h3",{children:"3.3 Account Termination"}),B.jsx("p",{children:"We reserve the right to terminate or suspend your account at any time for violations of these Terms or for any other reason at our sole discretion."})]}),B.jsxs("section",{className:"legal-section",children:[B.jsx("h2",{children:"4. Virtual Trading Rules"}),B.jsx("h3",{children:"4.1 Virtual Currency"}),B.jsx("p",{children:"All users start with virtual currency (₹10,000 by default) for trading purposes. This virtual currency has no real-world value and cannot be exchanged for real money."}),B.jsx("h3",{children:"4.2 Market Data"}),B.jsx("p",{children:"We use real market data from various sources including Financial Modeling Prep (FMP) API. While we strive for accuracy, we do not guarantee the completeness or accuracy of market data."}),B.jsx("h3",{children:"4.3 Trading Limitations"}),B.jsx("p",{children:"Virtual trading is subject to:"}),B.jsxs("ul",{children:[B.jsx("li",{children:"Market hours and trading sessions"}),B.jsx("li",{children:"Available virtual funds in your account"}),B.jsx("li",{children:"Platform maintenance and technical limitations"}),B.jsx("li",{children:"Fair usage policies to prevent system abuse"})]})]}),B.jsxs("section",{className:"legal-section",children:[B.jsx("h2",{children:"5. Prohibited Uses"}),B.jsx("p",{children:"You may not use our Service:"}),B.jsxs("ul",{children:[B.jsx("li",{children:"For any unlawful purpose or to solicit others to unlawful acts"}),B.jsx("li",{children:"To violate any international, federal, provincial, or state regulations, rules, laws, or local ordinances"}),B.jsx("li",{children:"To infringe upon or violate our intellectual property rights or the intellectual property rights of others"}),B.jsx("li",{children:"To harass, abuse, insult, harm, defame, slander, disparage, intimidate, or discriminate"}),B.jsx("li",{children:"To submit false or misleading information"}),B.jsx("li",{children:"To upload or transmit viruses or any other type of malicious code"}),B.jsx("li",{children:"To spam, phish, pharm, pretext, spider, crawl, or scrape"}),B.jsx("li",{children:"For any obscene or immoral purpose"}),B.jsx("li",{children:"To interfere with or circumvent the security features of the Service"})]})]}),B.jsxs("section",{className:"legal-section",children:[B.jsx("h2",{children:"6. Intellectual Property Rights"}),B.jsx("p",{children:"The Service and its original content, features, and functionality are and will remain the exclusive property of TradeBro and its licensors. The Service is protected by copyright, trademark, and other laws."}),B.jsx("p",{children:"Our trademarks and trade dress may not be used in connection with any product or service without our prior written consent."})]}),B.jsxs("section",{className:"legal-section",children:[B.jsx("h2",{children:"7. Privacy Policy"}),B.jsx("p",{children:"Your privacy is important to us. Please review our Privacy Policy, which also governs your use of the Service, to understand our practices."}),B.jsx(c,{to:"/privacy",className:"inline-link",children:"View Privacy Policy →"})]}),B.jsxs("section",{className:"legal-section",children:[B.jsx("h2",{children:"8. Disclaimers and Limitations"}),B.jsx("h3",{children:"8.1 Educational Purpose"}),B.jsxs("div",{className:"warning-box",children:[B.jsx(nt,{size:16}),B.jsxs("div",{children:[B.jsx("strong",{children:"Important:"})," TradeBro is for educational purposes only. Virtual trading results do not guarantee real trading success. Past performance does not indicate future results."]})]}),B.jsx("h3",{children:"8.2 No Financial Advice"}),B.jsx("p",{children:"The information provided on TradeBro is not intended as financial advice. We do not provide investment recommendations or advice. Always consult with qualified financial professionals before making real investment decisions."}),B.jsx("h3",{children:"8.3 Service Availability"}),B.jsx("p",{children:"We do not guarantee that the Service will be available at all times. We may experience hardware, software, or other problems or need to perform maintenance related to the Service."})]}),B.jsxs("section",{className:"legal-section",children:[B.jsx("h2",{children:"9. Limitation of Liability"}),B.jsx("p",{children:"In no event shall TradeBro, nor its directors, employees, partners, agents, suppliers, or affiliates, be liable for any indirect, incidental, special, consequential, or punitive damages, including without limitation, loss of profits, data, use, goodwill, or other intangible losses, resulting from your use of the Service."})]}),B.jsxs("section",{className:"legal-section",children:[B.jsx("h2",{children:"10. Changes to Terms"}),B.jsx("p",{children:"We reserve the right, at our sole discretion, to modify or replace these Terms at any time. If a revision is material, we will try to provide at least 30 days notice prior to any new terms taking effect."}),B.jsx("p",{children:"What constitutes a material change will be determined at our sole discretion. By continuing to access or use our Service after those revisions become effective, you agree to be bound by the revised terms."})]}),B.jsxs("section",{className:"legal-section",children:[B.jsx("h2",{children:"11. Contact Information"}),B.jsx("p",{children:"If you have any questions about these Terms of Service, please contact us:"}),B.jsxs("div",{className:"contact-info",children:[B.jsxs("p",{children:[B.jsx("strong",{children:"Email:"})," legal@tradebro.com"]}),B.jsxs("p",{children:[B.jsx("strong",{children:"Address:"})," TradeBro Legal Department",B.jsx("br",{}),"123 Trading Street",B.jsx("br",{}),"Financial District, Mumbai 400001",B.jsx("br",{}),"India"]})]})]}),B.jsxs("div",{className:"legal-footer",children:[B.jsx("p",{children:"By using TradeBro, you acknowledge that you have read, understood, and agree to be bound by these Terms of Service."}),B.jsxs("div",{className:"legal-actions",children:[B.jsx(c,{to:"/privacy",className:"btn btn-outline",children:"Privacy Policy"}),B.jsx(c,{to:"/login",className:"btn btn-primary",children:"Back to Login"})]})]})]})]})}),gg=()=>B.jsx("div",{className:"legal-page",children:B.jsxs("div",{className:"legal-container",children:[B.jsxs(y.div,{className:"legal-header",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[B.jsxs(c,{to:"/login",className:"back-link",children:[B.jsx(rt,{size:20}),"Back to Login"]}),B.jsxs("div",{className:"legal-title-section",children:[B.jsx("div",{className:"legal-icon",children:B.jsx(Ft,{size:32})}),B.jsx("h1",{className:"legal-title",children:"Privacy Policy"}),B.jsx("p",{className:"legal-subtitle",children:"How we collect, use, and protect your personal information"}),B.jsxs("div",{className:"last-updated",children:["Last updated: ","JULY 22, 2025"]})]})]}),B.jsxs(y.div,{className:"legal-content",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:[B.jsxs("div",{className:"privacy-commitment",children:[B.jsx(cn,{size:20}),B.jsxs("div",{children:[B.jsx("strong",{children:"Our Commitment:"})," We are committed to protecting your privacy and ensuring the security of your personal information. This Privacy Policy explains how we collect, use, and safeguard your data."]})]}),B.jsxs("section",{className:"legal-section",children:[B.jsxs("h2",{children:[B.jsx(wt,{size:20})," 1. Information We Collect"]}),B.jsx("h3",{children:"1.1 Personal Information"}),B.jsx("p",{children:"When you register for TradeBro, we may collect:"}),B.jsxs("ul",{children:[B.jsxs("li",{children:[B.jsx("strong",{children:"Account Information:"})," Name, email address, username"]}),B.jsxs("li",{children:[B.jsx("strong",{children:"Profile Information:"})," Profile picture, bio, trading preferences"]}),B.jsxs("li",{children:[B.jsx("strong",{children:"Authentication Data:"})," Password (encrypted), OAuth tokens from third-party providers"]}),B.jsxs("li",{children:[B.jsx("strong",{children:"Contact Information:"})," Email address for communications"]})]}),B.jsx("h3",{children:"1.2 Trading and Usage Data"}),B.jsx("p",{children:"We collect information about your use of our platform:"}),B.jsxs("ul",{children:[B.jsxs("li",{children:[B.jsx("strong",{children:"Virtual Trading Activity:"})," Buy/sell orders, portfolio performance, trading history"]}),B.jsxs("li",{children:[B.jsx("strong",{children:"Platform Usage:"})," Pages visited, features used, time spent on platform"]}),B.jsxs("li",{children:[B.jsx("strong",{children:"Device Information:"})," IP address, browser type, device type, operating system"]}),B.jsxs("li",{children:[B.jsx("strong",{children:"Preferences:"})," Theme settings, notification preferences, dashboard customizations"]})]}),B.jsx("h3",{children:"1.3 Automatically Collected Information"}),B.jsxs("ul",{children:[B.jsxs("li",{children:[B.jsx("strong",{children:"Cookies and Tracking:"})," Session cookies, preference cookies, analytics cookies"]}),B.jsxs("li",{children:[B.jsx("strong",{children:"Log Data:"})," Server logs, error logs, access logs"]}),B.jsxs("li",{children:[B.jsx("strong",{children:"Analytics Data:"})," User behavior, feature usage, performance metrics"]})]})]}),B.jsxs("section",{className:"legal-section",children:[B.jsxs("h2",{children:[B.jsx(Pt,{size:20})," 2. How We Use Your Information"]}),B.jsx("h3",{children:"2.1 Service Provision"}),B.jsxs("ul",{children:[B.jsx("li",{children:"Create and manage your account"}),B.jsx("li",{children:"Process virtual trading transactions"}),B.jsx("li",{children:"Provide personalized trading experience"}),B.jsx("li",{children:"Display portfolio and performance data"}),B.jsx("li",{children:"Enable social features and leaderboards"})]}),B.jsx("h3",{children:"2.2 Communication"}),B.jsxs("ul",{children:[B.jsx("li",{children:"Send account-related notifications"}),B.jsx("li",{children:"Provide customer support"}),B.jsx("li",{children:"Send educational content and market updates"}),B.jsx("li",{children:"Notify about platform updates and new features"})]}),B.jsx("h3",{children:"2.3 Platform Improvement"}),B.jsxs("ul",{children:[B.jsx("li",{children:"Analyze usage patterns to improve our service"}),B.jsx("li",{children:"Develop new features and functionality"}),B.jsx("li",{children:"Ensure platform security and prevent fraud"}),B.jsx("li",{children:"Conduct research and analytics"})]}),B.jsx("h3",{children:"2.4 Legal and Safety"}),B.jsxs("ul",{children:[B.jsx("li",{children:"Comply with legal obligations"}),B.jsx("li",{children:"Protect against fraud and abuse"}),B.jsx("li",{children:"Enforce our Terms of Service"}),B.jsx("li",{children:"Respond to legal requests"})]})]}),B.jsxs("section",{className:"legal-section",children:[B.jsxs("h2",{children:[B.jsx(bn,{size:20})," 3. Information Sharing and Disclosure"]}),B.jsx("h3",{children:"3.1 We Do Not Sell Your Data"}),B.jsxs("div",{className:"highlight-box",children:[B.jsx(cn,{size:16}),B.jsx("span",{children:"We do not sell, rent, or trade your personal information to third parties for marketing purposes."})]}),B.jsx("h3",{children:"3.2 Limited Sharing"}),B.jsx("p",{children:"We may share your information only in these circumstances:"}),B.jsxs("ul",{children:[B.jsxs("li",{children:[B.jsx("strong",{children:"Service Providers:"})," Third-party services that help us operate our platform (hosting, analytics, email)"]}),B.jsxs("li",{children:[B.jsx("strong",{children:"Legal Requirements:"})," When required by law, court order, or government request"]}),B.jsxs("li",{children:[B.jsx("strong",{children:"Safety and Security:"})," To protect the rights, property, or safety of TradeBro, our users, or others"]}),B.jsxs("li",{children:[B.jsx("strong",{children:"Business Transfers:"})," In connection with a merger, acquisition, or sale of assets"]})]}),B.jsx("h3",{children:"3.3 Public Information"}),B.jsx("p",{children:"Some information may be publicly visible:"}),B.jsxs("ul",{children:[B.jsx("li",{children:"Username and profile picture (if you choose to make them public)"}),B.jsx("li",{children:"Leaderboard rankings (anonymized or with consent)"}),B.jsx("li",{children:"Public posts or comments in community features"})]})]}),B.jsxs("section",{className:"legal-section",children:[B.jsx("h2",{children:"4. Data Security"}),B.jsx("h3",{children:"4.1 Security Measures"}),B.jsx("p",{children:"We implement industry-standard security measures:"}),B.jsxs("ul",{children:[B.jsxs("li",{children:[B.jsx("strong",{children:"Encryption:"})," Data encrypted in transit and at rest"]}),B.jsxs("li",{children:[B.jsx("strong",{children:"Access Controls:"})," Limited access to personal data on need-to-know basis"]}),B.jsxs("li",{children:[B.jsx("strong",{children:"Secure Infrastructure:"})," Secure servers and databases"]}),B.jsxs("li",{children:[B.jsx("strong",{children:"Regular Audits:"})," Security assessments and vulnerability testing"]}),B.jsxs("li",{children:[B.jsx("strong",{children:"Authentication:"})," Secure login with optional two-factor authentication"]})]}),B.jsx("h3",{children:"4.2 Data Retention"}),B.jsx("p",{children:"We retain your information:"}),B.jsxs("ul",{children:[B.jsx("li",{children:"As long as your account is active"}),B.jsx("li",{children:"As necessary to provide our services"}),B.jsx("li",{children:"To comply with legal obligations"}),B.jsx("li",{children:"To resolve disputes and enforce agreements"})]})]}),B.jsxs("section",{className:"legal-section",children:[B.jsx("h2",{children:"5. Your Privacy Rights"}),B.jsx("h3",{children:"5.1 Access and Control"}),B.jsx("p",{children:"You have the right to:"}),B.jsxs("ul",{children:[B.jsxs("li",{children:[B.jsx("strong",{children:"Access:"})," Request a copy of your personal data"]}),B.jsxs("li",{children:[B.jsx("strong",{children:"Update:"})," Correct or update your information"]}),B.jsxs("li",{children:[B.jsx("strong",{children:"Delete:"})," Request deletion of your account and data"]}),B.jsxs("li",{children:[B.jsx("strong",{children:"Export:"})," Download your trading data and history"]}),B.jsxs("li",{children:[B.jsx("strong",{children:"Opt-out:"})," Unsubscribe from marketing communications"]})]}),B.jsx("h3",{children:"5.2 Cookie Preferences"}),B.jsx("p",{children:"You can control cookies through:"}),B.jsxs("ul",{children:[B.jsx("li",{children:"Browser settings to block or delete cookies"}),B.jsx("li",{children:"Our cookie preference center"}),B.jsx("li",{children:"Opting out of analytics tracking"})]}),B.jsx("h3",{children:"5.3 Account Settings"}),B.jsx("p",{children:"Manage your privacy through your account settings:"}),B.jsxs("ul",{children:[B.jsx("li",{children:"Profile visibility settings"}),B.jsx("li",{children:"Notification preferences"}),B.jsx("li",{children:"Data sharing preferences"}),B.jsx("li",{children:"Communication settings"})]})]}),B.jsxs("section",{className:"legal-section",children:[B.jsx("h2",{children:"6. Third-Party Services"}),B.jsx("h3",{children:"6.1 OAuth Providers"}),B.jsx("p",{children:"When you sign in with Google or other OAuth providers:"}),B.jsxs("ul",{children:[B.jsx("li",{children:"We receive limited profile information (name, email, profile picture)"}),B.jsx("li",{children:"We do not access your other accounts or data"}),B.jsx("li",{children:"You can revoke access at any time through the provider's settings"})]}),B.jsx("h3",{children:"6.2 Market Data Providers"}),B.jsx("p",{children:"We use third-party APIs for market data:"}),B.jsxs("ul",{children:[B.jsx("li",{children:"Financial Modeling Prep (FMP) for stock prices and data"}),B.jsx("li",{children:"These providers may have their own privacy policies"}),B.jsx("li",{children:"We do not share your personal information with data providers"})]}),B.jsx("h3",{children:"6.3 Analytics Services"}),B.jsx("p",{children:"We may use analytics services to improve our platform:"}),B.jsxs("ul",{children:[B.jsx("li",{children:"Google Analytics (anonymized data)"}),B.jsx("li",{children:"Error tracking services"}),B.jsx("li",{children:"Performance monitoring tools"})]})]}),B.jsxs("section",{className:"legal-section",children:[B.jsx("h2",{children:"7. Children's Privacy"}),B.jsx("p",{children:"TradeBro is not intended for children under 13 years of age. We do not knowingly collect personal information from children under 13. If you are a parent or guardian and believe your child has provided us with personal information, please contact us."}),B.jsx("p",{children:"Users between 13-18 years old should have parental consent before using our service."})]}),B.jsxs("section",{className:"legal-section",children:[B.jsx("h2",{children:"8. International Data Transfers"}),B.jsx("p",{children:"Your information may be transferred to and processed in countries other than your own. We ensure appropriate safeguards are in place to protect your personal information in accordance with this Privacy Policy."})]}),B.jsxs("section",{className:"legal-section",children:[B.jsx("h2",{children:"9. Changes to Privacy Policy"}),B.jsx("p",{children:"We may update this Privacy Policy from time to time. We will notify you of any material changes by:"}),B.jsxs("ul",{children:[B.jsx("li",{children:"Posting the new Privacy Policy on this page"}),B.jsx("li",{children:"Sending an email notification"}),B.jsx("li",{children:"Providing notice through our platform"})]}),B.jsx("p",{children:"Your continued use of our service after any changes constitutes acceptance of the new Privacy Policy."})]}),B.jsxs("section",{className:"legal-section",children:[B.jsx("h2",{children:"10. Contact Us"}),B.jsx("p",{children:"If you have questions about this Privacy Policy or our privacy practices, please contact us:"}),B.jsxs("div",{className:"contact-info",children:[B.jsxs("p",{children:[B.jsx("strong",{children:"Privacy Officer:"})," privacy@tradebro.com"]}),B.jsxs("p",{children:[B.jsx("strong",{children:"Data Protection:"})," dpo@tradebro.com"]}),B.jsxs("p",{children:[B.jsx("strong",{children:"General Support:"})," support@tradebro.com"]}),B.jsxs("p",{children:[B.jsx("strong",{children:"Address:"})," TradeBro Privacy Department",B.jsx("br",{}),"123 Trading Street",B.jsx("br",{}),"Financial District, Mumbai 400001",B.jsx("br",{}),"India"]})]})]}),B.jsxs("div",{className:"legal-footer",children:[B.jsx("p",{children:"We are committed to protecting your privacy and will continue to update our practices to ensure your data remains secure."}),B.jsxs("div",{className:"legal-actions",children:[B.jsx(c,{to:"/terms",className:"btn btn-outline",children:"Terms of Service"}),B.jsx(c,{to:"/login",className:"btn btn-primary",children:"Back to Login"})]})]})]})]})}),yg=()=>{const[e,t]=n.useState(""),[s,a]=n.useState(!1),[r,i]=n.useState(!1),[o,l]=n.useState("");return r?B.jsx("div",{className:"auth-page",children:B.jsxs(y.div,{className:"auth-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[B.jsxs("div",{className:"auth-header",children:[B.jsxs("div",{className:"auth-logo",children:[B.jsx("div",{className:"auth-logo-icon",children:"📈"}),B.jsx("h1",{className:"auth-logo-text",children:"TradeBro"})]}),B.jsxs("div",{children:[B.jsx("h2",{className:"auth-title",children:"Check Your Email"}),B.jsxs("p",{className:"auth-subtitle",children:["We've sent password reset instructions to ",e]})]})]}),B.jsxs("div",{className:"success-message",children:[B.jsx(ft,{size:48}),B.jsx("p",{children:"If an account with that email exists, you'll receive a password reset link shortly."})]}),B.jsx("div",{className:"auth-footer",children:B.jsxs("p",{children:["Remember your password?"," ",B.jsx(c,{to:"/login",children:"Back to Sign In"})]})})]})}):B.jsx("div",{className:"auth-page",children:B.jsxs(y.div,{className:"auth-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[B.jsxs("div",{className:"auth-header",children:[B.jsxs("div",{className:"auth-logo",children:[B.jsx("div",{className:"auth-logo-icon",children:"📈"}),B.jsx("h1",{className:"auth-logo-text",children:"TradeBro"})]}),B.jsxs("div",{children:[B.jsx("h2",{className:"auth-title",children:"Forgot Password?"}),B.jsx("p",{className:"auth-subtitle",children:"Enter your email address and we'll send you a link to reset your password"})]})]}),B.jsxs("form",{onSubmit:async t=>{if(t.preventDefault(),e.trim())if(/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)){a(!0),l("");try{const t="https://s89-satya-capstone-tradebro.onrender.com",n=await fetch(`${t}/api/auth/forgot-password`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})}),s=await n.json();n.ok&&s.success?(i(!0),Ze.success("Password reset instructions sent to your email")):(l(s.message||"Failed to send reset email"),Ze.error(s.message||"Failed to send reset email"))}catch(n){l("Network error. Please try again."),Ze.error("Network error. Please check your connection.")}finally{a(!1)}}else l("Please enter a valid email address");else l("Email is required")},className:"auth-form",children:[o&&B.jsxs("div",{className:"error-message",children:[B.jsx(tt,{size:16}),B.jsx("span",{children:o})]}),B.jsxs("div",{className:"form-group",children:[B.jsxs("label",{className:"form-label",children:[B.jsx(zt,{size:16}),"Email Address"]}),B.jsx("input",{type:"email",value:e,onChange:e=>{t(e.target.value),o&&l("")},className:"form-input "+(o?"form-input-error":""),placeholder:"Enter your email",disabled:s,autoComplete:"email",required:!0})]}),B.jsx("button",{type:"submit",className:"auth-submit",disabled:s,children:s?B.jsx("div",{className:"loading-spinner"}):B.jsxs(B.Fragment,{children:["Send Reset Link",B.jsx(it,{size:16})]})})]}),B.jsx("div",{className:"auth-footer",children:B.jsxs("p",{children:["Remember your password?"," ",B.jsx(c,{to:"/login",children:"Back to Sign In"})]})})]})})},vg=()=>B.jsx("div",{className:"page",children:B.jsx("div",{className:"page-container",children:B.jsxs(y.div,{className:"not-found-container",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},style:{textAlign:"center",padding:"var(--space-16) var(--space-4)",minHeight:"60vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[B.jsx("div",{style:{fontSize:"6rem",marginBottom:"var(--space-6)"},children:"📈"}),B.jsx("h1",{style:{fontSize:"var(--font-size-4xl)",marginBottom:"var(--space-4)",color:"var(--text-primary)"},children:"404 - Page Not Found"}),B.jsx("p",{style:{fontSize:"var(--font-size-lg)",color:"var(--text-secondary)",marginBottom:"var(--space-8)",maxWidth:"500px"},children:"Oops! The page you're looking for doesn't exist. It might have been moved, deleted, or you entered the wrong URL."}),B.jsxs("div",{style:{display:"flex",gap:"var(--space-4)",flexWrap:"wrap",justifyContent:"center"},children:[B.jsxs(c,{to:"/",className:"btn btn-primary btn-lg",children:[B.jsx(Ot,{size:20}),"Go Home"]}),B.jsxs("button",{onClick:()=>window.history.back(),className:"btn btn-secondary btn-lg",children:[B.jsx(rt,{size:20}),"Go Back"]})]})]})})}),xg=({onLogin:e})=>{const t=o();return n.useEffect(()=>{const n=new URLSearchParams(window.location.search),s=n.get("success"),a=n.get("google"),r=n.get("token"),i=n.get("user");if(n.get("error"))return Ze.error("Google authentication failed. Please try again."),void t("/login",{replace:!0});if("true"===s&&"true"===a){if(r&&i&&e)try{const n=JSON.parse(decodeURIComponent(i));return e(n,r),Ze.success(`Welcome ${n.fullName||n.name||"back"}!`),void t("/dashboard",{replace:!0})}catch(o){}const n=localStorage.getItem("token"),s=localStorage.getItem("user");if(n&&s)try{const e=JSON.parse(s);return Ze.success(`Welcome ${e.fullName||e.name||"back"}!`),void t("/dashboard",{replace:!0})}catch(o){}return Ze.success("Authentication successful!"),void t("/dashboard",{replace:!0})}if(r&&i&&e)try{const n=JSON.parse(decodeURIComponent(i));e(n,r),Ze.success(`Welcome ${n.fullName||n.name||"back"}!`),t("/dashboard",{replace:!0})}catch(o){Ze.error("Authentication failed. Please try again."),t("/login",{replace:!0})}else Ze.error("Authentication failed. Please try again."),t("/login",{replace:!0})},[e,t]),B.jsxs("div",{className:"loading-container",children:[B.jsx("div",{className:"loading-spinner lg"}),B.jsx("p",{className:"loading-text",children:"Completing authentication..."})]})},bg=({children:e,isAuthenticated:t,loading:n,user:s})=>{const a=l();return n?B.jsxs("div",{className:"loading-container",children:[B.jsx("div",{className:"loading-spinner lg"}),B.jsx("p",{className:"loading-text",children:"Verifying authentication..."})]}):t?B.jsx(hi,{user:s,children:e}):(localStorage.setItem("redirectAfterLogin",a.pathname),B.jsx(m,{to:"/login",replace:!0}))},jg=({children:e,isAuthenticated:t})=>{if(t){const e=localStorage.getItem("redirectAfterLogin");return localStorage.removeItem("redirectAfterLogin"),B.jsx(m,{to:e||"/dashboard",replace:!0})}return e},wg={initial:{opacity:0,y:20},in:{opacity:1,y:0},out:{opacity:0,y:-20}},Ng={type:"tween",ease:"anticipate",duration:.4},kg=({isAuthenticated:e=!1,user:t=null,loading:n=!1,onLogin:s,onSignup:a,onLogout:r,onUpdateProfile:i,theme:o,toggleTheme:c})=>{const d=l();return B.jsx(g,{mode:"wait",children:B.jsx(y.div,{initial:"initial",animate:"in",exit:"out",variants:wg,transition:Ng,children:B.jsxs(u,{children:[B.jsx(h,{path:"/",element:e?B.jsx(m,{to:"/dashboard"}):B.jsx(qi,{})}),B.jsx(h,{path:"/login",element:B.jsx(jg,{isAuthenticated:e,children:B.jsx(Yi,{onLogin:s})})}),B.jsx(h,{path:"/signup",element:B.jsx(jg,{isAuthenticated:e,children:B.jsx(Gi,{onSignup:a})})}),B.jsx(h,{path:"/forgot-password",element:B.jsx(jg,{isAuthenticated:e,children:B.jsx(yg,{})})}),B.jsx(h,{path:"/terms",element:B.jsx(bg,{isAuthenticated:e,loading:n,user:t,children:B.jsx(fg,{})})}),B.jsx(h,{path:"/privacy",element:B.jsx(bg,{isAuthenticated:e,loading:n,user:t,children:B.jsx(gg,{})})}),B.jsx(h,{path:"/auth/oauth-callback",element:B.jsx(xg,{onLogin:s})}),B.jsx(h,{path:"/auth/google/callback",element:B.jsx(xg,{onLogin:s})}),B.jsx(h,{path:"/dashboard",element:B.jsx(bg,{isAuthenticated:e,loading:n,user:t,children:B.jsx(Ao,{user:t,theme:o,onLogin:s})})}),B.jsx(h,{path:"/portfolio",element:B.jsx(bg,{isAuthenticated:e,loading:n,user:t,children:B.jsx(Do,{user:t,theme:o})})}),B.jsx(h,{path:"/trading",element:B.jsx(bg,{isAuthenticated:e,loading:n,user:t,children:B.jsx(Mo,{user:t,theme:o})})}),B.jsx(h,{path:"/charts",element:B.jsx(bg,{isAuthenticated:e,loading:n,user:t,children:B.jsx(xc,{user:t,theme:o})})}),B.jsx(h,{path:"/watchlist",element:B.jsx(bg,{isAuthenticated:e,loading:n,user:t,children:B.jsx(bc,{user:t,theme:o})})}),B.jsx(h,{path:"/orders",element:B.jsx(bg,{isAuthenticated:e,loading:n,user:t,children:B.jsx(Zd,{user:t,theme:o})})}),B.jsx(h,{path:"/history",element:B.jsx(bg,{isAuthenticated:e,loading:n,user:t,children:B.jsx(eu,{user:t,theme:o})})}),B.jsx(h,{path:"/news",element:B.jsx(bg,{isAuthenticated:e,loading:n,user:t,children:B.jsx(tu,{user:t,theme:o})})}),B.jsx(h,{path:"/notifications",element:B.jsx(bg,{isAuthenticated:e,loading:n,user:t,children:B.jsx(nu,{user:t,theme:o})})}),B.jsx(h,{path:"/saytrix",element:B.jsx(bg,{isAuthenticated:e,loading:n,user:t,children:B.jsx(mg,{user:t,theme:o})})}),B.jsx(h,{path:"/settings",element:B.jsx(bg,{isAuthenticated:e,loading:n,user:t,children:B.jsx(cu,{user:t,theme:o,toggleTheme:c,onLogout:r})})}),B.jsx(h,{path:"/profile",element:B.jsx(bg,{isAuthenticated:e,loading:n,user:t,children:B.jsx(uu,{})})}),B.jsx(h,{path:"/stock/:symbol",element:B.jsx(bg,{isAuthenticated:e,loading:n,user:t,children:B.jsx(pg,{user:t,theme:o})})}),B.jsx(h,{path:"/home",element:B.jsx(m,{to:"/",replace:!0})}),B.jsx(h,{path:"/app",element:B.jsx(m,{to:"/dashboard",replace:!0})}),B.jsx(h,{path:"/trade",element:B.jsx(m,{to:"/trading",replace:!0})}),B.jsx(h,{path:"/stocks",element:B.jsx(m,{to:"/charts",replace:!0})}),B.jsx(h,{path:"/chat",element:B.jsx(m,{to:"/saytrix",replace:!0})}),B.jsx(h,{path:"/ai",element:B.jsx(m,{to:"/saytrix",replace:!0})}),B.jsx(h,{path:"*",element:B.jsx(vg,{})})]})},d.pathname)})};class Sg extends a.Component{constructor(e){super(e),this.state={hasError:!1,error:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){}render(){return this.state.hasError?B.jsx("div",{className:"error-boundary",children:B.jsxs("div",{className:"error-content",children:[B.jsx("h2",{children:"Something went wrong"}),B.jsx("p",{children:"We're sorry, but something unexpected happened."}),B.jsx("button",{onClick:()=>window.location.reload(),className:"retry-button",children:"Reload Page"})]})}):this.props.children}}const Cg=n.lazy(()=>Ne(()=>import("./PerformanceMonitor-7e014a90.js"),["./PerformanceMonitor-7e014a90.js","./vendor-83d6deea.js","./ui-d10ec992.js","./router-3d30db0f.js","./utils-ba5d26a9.js","./charts-073267b1.js"],import.meta.url));function Tg(){const[e,t]=n.useState(null),[s,a]=n.useState(!1),[r,i]=n.useState("light"),[c,d]=n.useState(!0),[u,h]=n.useState(!1),{user:m,isAuthenticated:p,loading:f,login:g,logout:y}=Cn();n.useEffect(()=>{t(m),a(p),d(f)},[m,p,f]),Ii("App");const{isGlobalSearchOpen:v,handleGlobalSearch:x,closeGlobalSearch:b}=(()=>{const[e,t]=n.useState(!1),s=o(),a=n.useCallback(e=>{if((e.ctrlKey||e.metaKey)&&"k"===e.key){e.preventDefault(),e.stopPropagation();const n=document.activeElement,s=n&&("INPUT"===n.tagName||"TEXTAREA"===n.tagName||"true"===n.contentEditable),a=n&&n.classList.contains("search-input");if(s&&!a)return;t(!0)}},[]),r=n.useCallback(n=>{"Escape"===n.key&&e&&t(!1)},[e]);n.useEffect(()=>(document.addEventListener("keydown",a),document.addEventListener("keydown",r),()=>{document.removeEventListener("keydown",a),document.removeEventListener("keydown",r)}),[a,r]);const i=n.useCallback((e,n="stocks")=>{if(e.trim()){switch(n){case"stocks":default:s(`/trading?search=${encodeURIComponent(e)}`);break;case"news":s(`/news?search=${encodeURIComponent(e)}`);break;case"orders":s(`/orders?search=${encodeURIComponent(e)}`)}t(!1)}},[s]),l=n.useCallback(()=>{t(!1)},[]);return{isGlobalSearchOpen:e,setIsGlobalSearchOpen:t,handleGlobalSearch:i,closeGlobalSearch:l}})(),{orderModalState:j,closeOrderModal:w}=Li(),[N,k]=n.useState({isOpen:!1,orderData:null,stockData:null,orderSummary:null,profitLossEstimate:null,onConfirm:null,isProcessing:!1}),S=n.useCallback(e=>{k({isOpen:!0,...e,isProcessing:!1})},[]),C=n.useCallback(()=>{k(e=>e.isOpen?{...e,isOpen:!1,isProcessing:!1}:e)},[]),T=n.useRef(null),P=n.useCallback(async()=>{const e=T.current;if(e){k(e=>({...e,isProcessing:!0}));try{await e(),setTimeout(()=>{C()},2e3)}catch(t){k(e=>({...e,isProcessing:!1}))}}},[C]);n.useEffect(()=>{T.current=N.onConfirm},[N.onConfirm]);const E=l(),L=o();n.useEffect(()=>{if(f)return;const e=new URLSearchParams(E.search),t=e.get("token"),n=e.get("user"),s=e.get("error");if(s)return Ze.error(`Login failed: ${s.replace(/_/g," ")}`),void L(E.pathname,{replace:!0});if(t&&n)try{const e=JSON.parse(decodeURIComponent(n));g(e,t),Ze.success("Welcome back!"),Ai.initialize(),L("/dashboard",{replace:!0})}catch(a){y(),Ze.error("Failed to process login data."),L("/login",{replace:!0})}else!p&&localStorage.getItem("token");c&&d(!1)},[E.search,L,g,y,f,p,c]),n.useEffect(()=>{const e=localStorage.getItem("theme")||"light";i(e),document.documentElement.setAttribute("data-theme",e)},[]);const I=n.useCallback(()=>{const e="light"===r?"dark":"light";i(e),localStorage.setItem("theme",e),document.documentElement.setAttribute("data-theme",e)},[r]),A=n.useCallback((e,t)=>{g(e,t),Ze.success("Welcome back!")},[g]),O=n.useCallback(()=>{y(),Ze.info("Logged out successfully"),L("/login")},[y,L]),D=n.useCallback((e,t)=>{g(e,t),Ze.success("Account created successfully!")},[g]);return c?B.jsxs("div",{className:"loading-container",children:[B.jsx("div",{className:"loading-spinner lg"}),B.jsx("p",{className:"loading-text",children:"Loading TradeBro..."})]}):B.jsx(Sg,{children:B.jsxs("div",{className:"app",children:[B.jsx(Pg,{isAuthenticated:s,user:e,loading:c,theme:r,onLogin:A,onLogout:O,onSignup:D,onUpdateProfile:e=>{const t=localStorage.getItem("token");g(e,t),Ze.success("Profile updated successfully!")},toggleTheme:I,isGlobalSearchOpen:v,handleGlobalSearch:x,closeGlobalSearch:b,sidebarCollapsed:u,setSidebarCollapsed:h,orderModalState:j,closeOrderModal:w,handleShowConfirmation:S,confirmationModalState:N,handleCloseConfirmation:C,handleConfirmOrder:P}),B.jsx($e,{position:"top-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:r,toastStyle:{background:"dark"===r?"var(--bg-secondary)":"#FFFFFF",color:"dark"===r?"#F9FAFB":"#111827"}}),B.jsx(n.Suspense,{fallback:null,children:B.jsx(Cg,{enabled:!1})})]})})}console.log=()=>{},console.warn=()=>{};const Pg=n.memo(function({isAuthenticated:e,user:t,loading:n,theme:s,onLogin:a,onLogout:r,onSignup:i,onUpdateProfile:o,toggleTheme:c,isGlobalSearchOpen:d,handleGlobalSearch:u,closeGlobalSearch:h,sidebarCollapsed:m,setSidebarCollapsed:p,orderModalState:f,closeOrderModal:g,handleShowConfirmation:y,confirmationModalState:v,handleCloseConfirmation:x,handleConfirmOrder:b}){const j=l(),w="/"===j.pathname,N="/login"===j.pathname||"/signup"===j.pathname||"/forgot-password"===j.pathname;return B.jsxs(B.Fragment,{children:[B.jsx(Qr,{isCollapsed:m,setIsCollapsed:p}),B.jsx("main",{className:`${w||N?"main-content-full":"main-content"} ${!e||w||N?"":m?"sidebar-collapsed":"with-sidebar"}`,children:B.jsx(kg,{isAuthenticated:e,user:t,loading:n,onLogin:a,onSignup:i,onLogout:r,onUpdateProfile:o,theme:s,toggleTheme:c})}),B.jsx(Xr,{isAuthenticated:e,user:t}),B.jsx(ii,{isOpen:d,onClose:h,onSearch:u}),B.jsx($e,{position:"top-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"dark"===s?"dark":"light",toastStyle:{background:"dark"===s?"var(--bg-secondary)":"var(--bg-elevated)",color:"var(--text-primary)",border:"1px solid var(--border-primary)",borderRadius:"var(--radius-lg)",boxShadow:"var(--shadow-lg)"}}),!w&&!N&&B.jsxs(B.Fragment,{children:[B.jsx(oi,{}),B.jsx(li,{})]}),B.jsx(Ci,{isOpen:f.isOpen,onClose:g,stockData:f.stockData,initialOrderType:f.orderType,onOrderPlaced:g,onShowConfirmation:y}),B.jsx(Ti,{isOpen:v.isOpen,onClose:x,onConfirm:b,orderData:v.orderData,stockData:v.stockData,orderSummary:v.orderSummary,profitLossEstimate:v.profitLossEstimate,isProcessing:v.isProcessing})]})});var Eg="persist:",Lg="persist/FLUSH",Ig="persist/REHYDRATE",Ag="persist/PAUSE",Og="persist/PERSIST",Dg="persist/PURGE",Rg="persist/REGISTER";function Mg(e){return(Mg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,s)}return n}function Fg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Bg(e,t,n,s){s.debug;var a=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_g(n,!0).forEach(function(t){Fg(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_g(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},n);return e&&"object"===Mg(e)&&Object.keys(e).forEach(function(s){"_persist"!==s&&t[s]===n[s]&&(a[s]=e[s])}),a}function zg(e){var t,n=e.blacklist||null,s=e.whitelist||null,a=e.transforms||[],r=e.throttle||0,i="".concat(void 0!==e.keyPrefix?e.keyPrefix:Eg).concat(e.key),o=e.storage;t=!1===e.serialize?function(e){return e}:"function"==typeof e.serialize?e.serialize:Ug;var l=e.writeFailHandler||null,c={},d={},u=[],h=null,m=null;function p(){if(0===u.length)return h&&clearInterval(h),void(h=null);var e=u.shift(),n=a.reduce(function(t,n){return n.in(t,e,c)},c[e]);if(void 0!==n)try{d[e]=t(n)}catch(s){}else delete d[e];0===u.length&&(Object.keys(d).forEach(function(e){void 0===c[e]&&delete d[e]}),m=o.setItem(i,t(d)).catch(g))}function f(e){return(!s||-1!==s.indexOf(e)||"_persist"===e)&&(!n||-1===n.indexOf(e))}function g(e){l&&l(e)}return{update:function(e){Object.keys(e).forEach(function(t){f(t)&&c[t]!==e[t]&&-1===u.indexOf(t)&&u.push(t)}),Object.keys(c).forEach(function(t){void 0===e[t]&&f(t)&&-1===u.indexOf(t)&&void 0!==c[t]&&u.push(t)}),null===h&&(h=setInterval(p,r)),c=e},flush:function(){for(;0!==u.length;)p();return m||Promise.resolve()}}}function Ug(e){return JSON.stringify(e)}function Hg(e){var t,n=e.transforms||[],s="".concat(void 0!==e.keyPrefix?e.keyPrefix:Eg).concat(e.key),a=e.storage;return e.debug,t=!1===e.deserialize?function(e){return e}:"function"==typeof e.deserialize?e.deserialize:$g,a.getItem(s).then(function(e){if(e)try{var s={},a=t(e);return Object.keys(a).forEach(function(e){s[e]=n.reduceRight(function(t,n){return n.out(t,e,a)},t(a[e]))}),s}catch(r){throw r}})}function $g(e){return JSON.parse(e)}function qg(e){0}function Wg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,s)}return n}function Vg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wg(n,!0).forEach(function(t){Yg(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wg(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Yg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gg(e,t){if(null==e)return{};var n,s,a=function(e,t){if(null==e)return{};var n,s,a={},r=Object.keys(e);for(s=0;s<r.length;s++)n=r[s],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(s=0;s<r.length;s++)n=r[s],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Jg(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Kg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,s)}return n}function Qg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Kg(n,!0).forEach(function(t){Xg(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Kg(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Xg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Zg={registry:[],bootstrapped:!1},ey=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Zg,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case Rg:return Qg({},e,{registry:[].concat(Jg(e.registry),[t.key])});case Ig:var n=e.registry.indexOf(t.key),s=Jg(e.registry);return s.splice(n,1),Qg({},e,{registry:s,bootstrapped:0===s.length});default:return e}};var ty={},ny={};function sy(e){return(sy="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ay(){}ny.__esModule=!0,ny.default=function(e){var t="".concat(e,"Storage");return function(e){if("object"!==("undefined"==typeof self?"undefined":sy(self))||!(e in self))return!1;try{var t=self[e],n="redux-persist ".concat(e," test");t.setItem(n,"test"),t.getItem(n),t.removeItem(n)}catch(s){return!1}return!0}(t)?self[t]:ry};var ry={getItem:ay,setItem:ay,removeItem:ay};ty.__esModule=!0,ty.default=function(e){var t=(0,oy.default)(e);return{getItem:function(e){return new Promise(function(n,s){n(t.getItem(e))})},setItem:function(e,n){return new Promise(function(s,a){s(t.setItem(e,n))})},removeItem:function(e){return new Promise(function(n,s){n(t.removeItem(e))})}}};var iy,oy=(iy=ny)&&iy.__esModule?iy:{default:iy};var ly,cy=function(e){return e&&e.__esModule?e:{default:e}}(ty);ly=(0,cy.default)("local");const dy={user:null,token:localStorage.getItem("token"),isAuthenticated:!1,isLoading:!1,error:null,virtualMoney:0,registrationBonus:1e4},uy=Rd("auth/loginUser",async(e,{rejectWithValue:t})=>{try{const n=await Lr.login(e);return n.success?(localStorage.setItem("token",n.data.token),localStorage.setItem("user",JSON.stringify(n.data.user)),n.data):t(n.message)}catch(n){return t(n.message||"Login failed")}}),hy=Rd("auth/registerUser",async(e,{rejectWithValue:t})=>{try{const n=await Lr.register(e);if(n.success){localStorage.setItem("token",n.data.token),localStorage.setItem("user",JSON.stringify(n.data.user));return{...n.data,virtualMoney:1e4}}return t(n.message)}catch(n){return t(n.message||"Registration failed")}}),my=Rd("auth/googleAuth",async(e,{rejectWithValue:t})=>{try{const n=await Lr.googleAuth(e);if(n.success){localStorage.setItem("token",n.data.token),localStorage.setItem("user",JSON.stringify(n.data.user));return{...n.data,virtualMoney:n.data.isNewUser?1e4:n.data.virtualMoney||0}}return t(n.message)}catch(n){return t(n.message||"Google authentication failed")}}),py=Rd("auth/logoutUser",async(e,{rejectWithValue:t})=>{try{return await Lr.logout(),localStorage.removeItem("token"),localStorage.removeItem("user"),!0}catch(n){return localStorage.removeItem("token"),localStorage.removeItem("user"),!0}}),fy=Rd("auth/refreshToken",async(e,{rejectWithValue:t})=>{try{const e=await Lr.refreshToken();return e.success?(localStorage.setItem("token",e.data.token),e.data):t(e.message)}catch(n){return t(n.message||"Token refresh failed")}}),gy=Ud({name:"auth",initialState:dy,reducers:{clearError:e=>{e.error=null},setUser:(e,t)=>{e.user=t.payload,e.isAuthenticated=!!t.payload},updateVirtualMoney:(e,t)=>{e.virtualMoney=t.payload,e.user&&(e.user.virtualMoney=t.payload)},addVirtualMoney:(e,t)=>{e.virtualMoney+=t.payload,e.user&&(e.user.virtualMoney=e.virtualMoney)},subtractVirtualMoney:(e,t)=>{e.virtualMoney=Math.max(0,e.virtualMoney-t.payload),e.user&&(e.user.virtualMoney=e.virtualMoney)},initializeAuth:e=>{const t=localStorage.getItem("token"),n=localStorage.getItem("user");if(t&&n)try{const s=JSON.parse(n);e.token=t,e.user=s,e.isAuthenticated=!0,e.virtualMoney=s.virtualMoney||0}catch(s){localStorage.removeItem("token"),localStorage.removeItem("user")}}},extraReducers:e=>{e.addCase(uy.pending,e=>{e.isLoading=!0,e.error=null}).addCase(uy.fulfilled,(e,t)=>{e.isLoading=!1,e.user=t.payload.user,e.token=t.payload.token,e.isAuthenticated=!0,e.virtualMoney=t.payload.user.virtualMoney||0,e.error=null}).addCase(uy.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload,e.isAuthenticated=!1}).addCase(hy.pending,e=>{e.isLoading=!0,e.error=null}).addCase(hy.fulfilled,(e,t)=>{e.isLoading=!1,e.user=t.payload.user,e.token=t.payload.token,e.isAuthenticated=!0,e.virtualMoney=1e4,e.error=null}).addCase(hy.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload,e.isAuthenticated=!1}).addCase(my.pending,e=>{e.isLoading=!0,e.error=null}).addCase(my.fulfilled,(e,t)=>{e.isLoading=!1,e.user=t.payload.user,e.token=t.payload.token,e.isAuthenticated=!0,e.virtualMoney=t.payload.virtualMoney||0,e.error=null}).addCase(my.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload,e.isAuthenticated=!1}).addCase(py.fulfilled,e=>{e.user=null,e.token=null,e.isAuthenticated=!1,e.virtualMoney=0,e.error=null,e.isLoading=!1}).addCase(fy.fulfilled,(e,t)=>{e.token=t.payload.token,e.user=t.payload.user,e.virtualMoney=t.payload.user.virtualMoney||e.virtualMoney})}}),{clearError:yy,setUser:vy,updateVirtualMoney:xy,addVirtualMoney:by,subtractVirtualMoney:jy,initializeAuth:wy}=gy.actions,Ny=gy.reducer,ky=[{id:"holding_1",symbol:"RELIANCE",name:"Reliance Industries Ltd",quantity:0,avgPrice:0,currentPrice:2520,totalValue:0,totalGains:0,gainsPercent:0,dayChange:25,dayChangePercent:1,sector:"Energy"},{id:"holding_2",symbol:"TCS",name:"Tata Consultancy Services",quantity:0,avgPrice:0,currentPrice:3350,totalValue:0,totalGains:0,gainsPercent:0,dayChange:-15,dayChangePercent:-.45,sector:"IT"},{id:"holding_3",symbol:"INFY",name:"Infosys Limited",quantity:0,avgPrice:0,currentPrice:1520,totalValue:0,totalGains:0,gainsPercent:0,dayChange:12,dayChangePercent:.79,sector:"IT"}],Sy=Rd("portfolio/fetchSummary",async(e,{rejectWithValue:t,getState:n})=>{try{const e=await Dr();return e.success?e.data:t(e.message)}catch(s){const{portfolio:e}=n();return Py(e.holdings)}}),Cy=Rd("portfolio/fetchHoldings",async(e,{rejectWithValue:t})=>{try{const e=await Rr();return e.success?e.data:t(e.message)}catch(n){return ky}}),Ty=Rd("portfolio/updateHolding",async({symbol:e,quantity:t,price:n,type:s},{rejectWithValue:a,getState:r})=>{try{const{portfolio:i}=r(),o=i.holdings.find(t=>t.symbol===e);let l;if("BUY"===s)if(o){const e=o.quantity+t,s=(o.avgPrice*o.quantity+n*t)/e;l={...o,quantity:e,avgPrice:s,totalValue:e*o.currentPrice,totalGains:(o.currentPrice-s)*e,gainsPercent:(o.currentPrice-s)/s*100}}else{const s=ky.find(t=>t.symbol===e);if(!s)return a("Stock not found");l={...s,id:`holding_${Date.now()}`,quantity:t,avgPrice:n,totalValue:t*s.currentPrice,totalGains:(s.currentPrice-n)*t,gainsPercent:(s.currentPrice-n)/n*100}}else if("SELL"===s){if(!o||o.quantity<t)return a("Insufficient shares to sell");const e=o.quantity-t;l=0===e?null:{...o,quantity:e,totalValue:e*o.currentPrice,totalGains:(o.currentPrice-o.avgPrice)*e,gainsPercent:(o.currentPrice-o.avgPrice)/o.avgPrice*100}}return{symbol:e,updatedHolding:l,type:s,quantity:t,price:n}}catch(i){return a(i.message||"Failed to update holding")}}),Py=e=>{const t=e.reduce((e,t)=>e+t.totalValue,0),n=e.reduce((e,t)=>e+t.avgPrice*t.quantity,0),s=t-n,a=n>0?s/n*100:0,r=e.reduce((e,t)=>e+t.dayChange*t.quantity,0);return{totalValue:t,totalInvested:n,totalGains:s,totalGainsPercent:a,dayChange:r,dayChangePercent:t>0?r/(t-r)*100:0,totalStocks:e.filter(e=>e.quantity>0).length}},Ey=Ud({name:"portfolio",initialState:{holdings:[],summary:{totalValue:0,totalInvested:0,totalGains:0,totalGainsPercent:0,dayChange:0,dayChangePercent:0,totalStocks:0},performance:{chartData:[],timeframe:"1D"},isLoading:!1,error:null,lastUpdated:null},reducers:{clearError:e=>{e.error=null},updateCurrentPrices:(e,t)=>{const n=t.payload;e.holdings=e.holdings.map(e=>{const t=n.find(t=>t.symbol===e.symbol);if(t){const n=t.price,s=e.quantity*n,a=(n-e.avgPrice)*e.quantity,r=e.avgPrice>0?(n-e.avgPrice)/e.avgPrice*100:0;return{...e,currentPrice:n,totalValue:s,totalGains:a,gainsPercent:r,dayChange:t.dayChange||e.dayChange,dayChangePercent:t.dayChangePercent||e.dayChangePercent}}return e}),e.summary=Py(e.holdings),e.lastUpdated=(new Date).toISOString()},setTimeframe:(e,t)=>{e.performance.timeframe=t.payload}},extraReducers:e=>{e.addCase(Sy.pending,e=>{e.isLoading=!0,e.error=null}).addCase(Sy.fulfilled,(e,t)=>{e.isLoading=!1,e.summary=t.payload,e.lastUpdated=(new Date).toISOString()}).addCase(Sy.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload}).addCase(Cy.pending,e=>{e.isLoading=!0,e.error=null}).addCase(Cy.fulfilled,(e,t)=>{e.isLoading=!1,e.holdings=t.payload,e.summary=Py(t.payload),e.lastUpdated=(new Date).toISOString()}).addCase(Cy.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload}).addCase(Ty.fulfilled,(e,t)=>{const{symbol:n,updatedHolding:s}=t.payload;if(null===s)e.holdings=e.holdings.filter(e=>e.symbol!==n);else{const t=e.holdings.findIndex(e=>e.symbol===n);t>=0?e.holdings[t]=s:e.holdings.push(s)}e.summary=Py(e.holdings),e.lastUpdated=(new Date).toISOString()}).addCase(Ty.rejected,(e,t)=>{e.error=t.payload})}});Ey.actions;const Ly=Ey.reducer,Iy=[{id:"trade_1",symbol:"WIPRO",name:"Wipro Limited",type:"BUY",quantity:50,price:420,totalAmount:21e3,timestamp:new Date("2024-01-15T10:30:00"),status:"completed"},{id:"trade_2",symbol:"BAJFINANCE",name:"Bajaj Finance Limited",type:"SELL",quantity:25,price:6800,totalAmount:17e4,timestamp:new Date("2024-01-15T09:15:00"),status:"completed"}],Ay=(e,t)=>{const n=e*(t.brokerage/100),s=e*(t.stt/100),a=n*(t.gst/100),r=n+s+a;return{brokerage:Math.round(100*n)/100,stt:Math.round(100*s)/100,gst:Math.round(100*a)/100,totalFees:Math.round(100*r)/100}},Oy=Rd("trading/executeTrade",async(e,{dispatch:t,getState:n,rejectWithValue:s})=>{try{const{symbol:a,quantity:r,price:i,type:o}=e,l=n(),{auth:c,trading:d}=l,u=r*i,h=Ay(u,d.tradingFees),m="BUY"===o?u+h.totalFees:u-h.totalFees;if("BUY"===o&&c.virtualMoney<m)return s("Insufficient virtual money balance");if("SELL"===o){const e=l.portfolio.holdings.find(e=>e.symbol===a);if(!e||e.quantity<r)return s("Insufficient shares to sell")}const p={id:`trade_${Date.now()}`,symbol:a,name:e.name||a,type:o,quantity:r,price:i,grossAmount:u,fees:h,netAmount:m,timestamp:(new Date).toISOString(),status:"completed"};return t("BUY"===o?jy(m):by(m)),t(Ty({symbol:a,quantity:r,price:i,type:o})),p}catch(a){return s(a.message||"Trade execution failed")}}),Dy=Rd("trading/fetchRecentTrades",async(e=10,{rejectWithValue:t})=>{try{const n=await Mr.getRecentTrades(e);return n.success?n.data:t(n.message)}catch(n){return Iy}}),Ry=Rd("trading/fetchTradeHistory",async({startDate:e,endDate:t,symbol:n},{rejectWithValue:s})=>{try{const a=await Mr.getTradeHistory({startDate:e,endDate:t,symbol:n});return a.success?a.data:s(a.message)}catch(a){return Iy}}),My=Rd("trading/placeOrder",async(e,{getState:t,rejectWithValue:n})=>{try{const{symbol:s,quantity:a,price:r,type:i,orderType:o}=e,l=t(),{auth:c}=l;if("LIMIT"===o){const e=a*r,t=Ay(e,l.trading.tradingFees),s="BUY"===i?e+t.totalFees:e-t.totalFees;if("BUY"===i&&c.virtualMoney<s)return n("Insufficient virtual money balance")}return{id:`order_${Date.now()}`,symbol:s,name:e.name||s,type:i,orderType:o,quantity:a,price:"MARKET"===o?null:r,status:"pending",timestamp:(new Date).toISOString(),expiryDate:e.expiryDate||null}}catch(s){return n(s.message||"Order placement failed")}}),_y=Rd("trading/cancelOrder",async(e,{rejectWithValue:t})=>{try{const n=await Mr.cancelOrder(e);return n.success?e:t(n.message)}catch(n){return e}}),Fy=Ud({name:"trading",initialState:{recentTrades:[],activeOrders:[],tradeHistory:[],isLoading:!1,error:null,tradingFees:{brokerage:.03,stt:.1,gst:18}},reducers:{clearError:e=>{e.error=null},updateTradingFees:(e,t)=>{e.tradingFees={...e.tradingFees,...t.payload}},addTradeToHistory:(e,t)=>{e.tradeHistory.unshift(t.payload),e.recentTrades.unshift(t.payload),e.recentTrades.length>50&&(e.recentTrades=e.recentTrades.slice(0,50))}},extraReducers:e=>{e.addCase(Oy.pending,e=>{e.isLoading=!0,e.error=null}).addCase(Oy.fulfilled,(e,t)=>{e.isLoading=!1,e.recentTrades.unshift(t.payload),e.tradeHistory.unshift(t.payload),e.recentTrades.length>50&&(e.recentTrades=e.recentTrades.slice(0,50))}).addCase(Oy.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload}).addCase(Dy.fulfilled,(e,t)=>{e.recentTrades=t.payload}).addCase(Ry.fulfilled,(e,t)=>{e.tradeHistory=t.payload}).addCase(My.pending,e=>{e.isLoading=!0,e.error=null}).addCase(My.fulfilled,(e,t)=>{e.isLoading=!1,e.activeOrders.push(t.payload)}).addCase(My.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload}).addCase(_y.fulfilled,(e,t)=>{const n=t.payload;e.activeOrders=e.activeOrders.filter(e=>e.id!==n)})}});Fy.actions;const By=Fy.reducer,zy={}.REACT_APP_WATCHLIST_API_URL||"/api/watchlist",Uy=Rd("watchlist/fetchWatchlists",async(e,{rejectWithValue:t})=>{try{const e=await Wa.get(`${zy}`);return e.data.success?e.data.data:t(e.data.message)}catch(n){return Ze.error("Failed to fetch watchlists from server. Using mock data."),[{_id:w(),name:"My Watchlist",isDefault:!0,stocks:[{symbol:"RELIANCE",name:"Reliance Industries Ltd",price:2847.65,change:23.45,changePercent:.83,volume:2847392,marketCap:1925e9,sector:"Energy",addedAt:(new Date).toISOString()},{symbol:"TCS",name:"Tata Consultancy Services",price:3567.8,change:-12.4,changePercent:-.35,volume:1234567,marketCap:13e11,sector:"IT",addedAt:(new Date).toISOString()}]}]}}),Hy=Rd("watchlist/addToWatchlist",async({stockData:e,watchlistId:t},{rejectWithValue:n})=>{var s,a,r,i;try{const s=await Wa.post(`${zy}/add`,{symbol:e.symbol,name:e.name,watchlistId:t});return s.data.success?(Ze.success(`Added ${e.symbol} to watchlist`),s.data.data):n(s.data.message)}catch(o){return Ze.error((null==(a=null==(s=o.response)?void 0:s.data)?void 0:a.message)||"Failed to add stock"),n((null==(i=null==(r=o.response)?void 0:r.data)?void 0:i.message)||"Failed to add stock")}}),$y=Rd("watchlist/removeFromWatchlist",async({symbol:e,watchlistId:t},{rejectWithValue:n})=>{var s,a,r,i;try{const s=await Wa.delete(`${zy}/remove/${e}/${t}`);return s.data.success?(Ze.success(`Removed ${e} from watchlist`),{symbol:e,watchlistId:t}):n(s.data.message)}catch(o){return Ze.error((null==(a=null==(s=o.response)?void 0:s.data)?void 0:a.message)||"Failed to remove stock"),n((null==(i=null==(r=o.response)?void 0:r.data)?void 0:i.message)||"Failed to remove stock")}}),qy=Rd("watchlist/createWatchlist",async(e,{rejectWithValue:t})=>{var n,s,a,r;try{const n=await Wa.post(`${zy}/create`,{name:e});return n.data.success?(Ze.success(`Watchlist "${e}" created successfully!`),n.data.data):t(n.data.message)}catch(i){return Ze.error((null==(s=null==(n=i.response)?void 0:n.data)?void 0:s.message)||"Failed to create watchlist"),t((null==(r=null==(a=i.response)?void 0:a.data)?void 0:r.message)||"Failed to create watchlist")}}),Wy=Rd("watchlist/deleteWatchlist",async(e,{rejectWithValue:t})=>{var n,s,a,r;try{const n=await Wa.delete(`${zy}/${e}`);return n.data.success?(Ze.success("Watchlist deleted successfully."),e):t(n.data.message)}catch(i){return Ze.error((null==(s=null==(n=i.response)?void 0:n.data)?void 0:s.message)||"Failed to delete watchlist"),t((null==(r=null==(a=i.response)?void 0:a.data)?void 0:r.message)||"Failed to delete watchlist")}}),Vy=Ud({name:"watchlist",initialState:{watchlists:[],isLoading:!1,error:null,lastUpdated:null},reducers:{clearError:e=>{e.error=null}},extraReducers:e=>{e.addCase(Uy.pending,e=>{e.isLoading=!0,e.error=null}).addCase(Uy.fulfilled,(e,t)=>{e.isLoading=!1,e.watchlists=t.payload,e.lastUpdated=(new Date).toISOString()}).addCase(Uy.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload,e.watchlists=[]}).addCase(Hy.fulfilled,(e,t)=>{const{_id:n,stocks:s}=t.payload,a=e.watchlists.find(e=>e._id===n);a&&(a.stocks=s)}).addCase($y.fulfilled,(e,t)=>{const{symbol:n,watchlistId:s}=t.payload,a=e.watchlists.find(e=>e._id===s);a&&(a.stocks=a.stocks.filter(e=>e.symbol!==n))}).addCase(qy.fulfilled,(e,t)=>{e.watchlists.push(t.payload)}).addCase(Wy.fulfilled,(e,t)=>{const n=t.payload;e.watchlists=e.watchlists.filter(e=>e._id!==n)})}});Vy.actions;const Yy=Vy.reducer,Gy=[{id:"news001",title:"Reliance Industries Reports Strong Q3 Results, Beats Estimates",summary:"Reliance Industries posted a 12% increase in net profit for Q3, driven by strong performance in retail and digital services segments.",category:"earnings",source:"Economic Times",author:"Financial Reporter",publishedAt:new Date("2024-01-15T09:30:00").toISOString(),readTime:3,imageUrl:"/api/placeholder/400/200",tags:["RELIANCE","Earnings","Q3 Results"],sentiment:"positive",views:1250,likes:89,isBookmarked:!1,relatedStocks:["RELIANCE"]},{id:"news002",title:"IT Sector Outlook: TCS and Infosys Lead Digital Transformation Wave",summary:"Indian IT giants are capitalizing on global digital transformation trends, with strong order books and margin improvements.",category:"sector",source:"Business Standard",author:"Tech Analyst",publishedAt:new Date("2024-01-15T08:45:00").toISOString(),readTime:5,imageUrl:"/api/placeholder/400/200",tags:["TCS","INFY","IT Sector","Digital"],sentiment:"positive",views:980,likes:67,isBookmarked:!0,relatedStocks:["TCS","INFY","WIPRO"]}],Jy=Rd("news/fetchNews",async({category:e="all",limit:t=20},{rejectWithValue:n})=>{try{const s=await Br.getNews({category:e,limit:t});return s.success?s.data:n(s.message)}catch(s){return Gy}}),Ky=Rd("news/toggleBookmark",async(e,{getState:t,rejectWithValue:n})=>{try{const a=t().news.articles.find(t=>t.id===e);if(!a)return n("Article not found");const r={...a,isBookmarked:!a.isBookmarked};try{await Br.toggleBookmark(e)}catch(s){}return r}catch(s){return n(s.message||"Failed to toggle bookmark")}}),Qy=Ud({name:"news",initialState:{articles:[],categories:["all","market","earnings","sector","policy"],activeCategory:"all",isLoading:!1,error:null,lastUpdated:null},reducers:{clearError:e=>{e.error=null},setActiveCategory:(e,t)=>{e.activeCategory=t.payload},updateArticleViews:(e,t)=>{const n=t.payload,s=e.articles.find(e=>e.id===n);s&&(s.views+=1)}},extraReducers:e=>{e.addCase(Jy.pending,e=>{e.isLoading=!0,e.error=null}).addCase(Jy.fulfilled,(e,t)=>{e.isLoading=!1,e.articles=t.payload,e.lastUpdated=(new Date).toISOString()}).addCase(Jy.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload}).addCase(Ky.fulfilled,(e,t)=>{const n=t.payload,s=e.articles.findIndex(e=>e.id===n.id);s>=0&&(e.articles[s]=n)})}});Qy.actions;const Xy=Qy.reducer,Zy=Ud({name:"ui",initialState:{theme:localStorage.getItem("theme")||"light",notifications:[],modals:{buyStock:{isOpen:!1,data:null},sellStock:{isOpen:!1,data:null},addToWatchlist:{isOpen:!1,data:null},priceAlert:{isOpen:!1,data:null},tradeConfirmation:{isOpen:!1,data:null}},loading:{global:!1,portfolio:!1,trading:!1,watchlist:!1},toast:{isVisible:!1,message:"",type:"info",duration:3e3}},reducers:{setTheme:(e,t)=>{e.theme=t.payload,localStorage.setItem("theme",t.payload),document.documentElement.setAttribute("data-theme",t.payload)},toggleTheme:e=>{const t="light"===e.theme?"dark":"light";e.theme=t,localStorage.setItem("theme",t),document.documentElement.setAttribute("data-theme",t)},openModal:(e,t)=>{const{modalName:n,data:s}=t.payload;e.modals[n]&&(e.modals[n].isOpen=!0,e.modals[n].data=s||null)},closeModal:(e,t)=>{const n=t.payload;e.modals[n]&&(e.modals[n].isOpen=!1,e.modals[n].data=null)},closeAllModals:e=>{Object.keys(e.modals).forEach(t=>{e.modals[t].isOpen=!1,e.modals[t].data=null})},setLoading:(e,t)=>{const{key:n,value:s}=t.payload;e.loading.hasOwnProperty(n)&&(e.loading[n]=s)},setGlobalLoading:(e,t)=>{e.loading.global=t.payload},showToast:(e,t)=>{const{message:n,type:s="info",duration:a=3e3}=t.payload;e.toast={isVisible:!0,message:n,type:s,duration:a}},hideToast:e=>{e.toast.isVisible=!1},showSuccessToast:(e,t)=>{e.toast={isVisible:!0,message:t.payload,type:"success",duration:3e3}},showErrorToast:(e,t)=>{e.toast={isVisible:!0,message:t.payload,type:"error",duration:5e3}},showWarningToast:(e,t)=>{e.toast={isVisible:!0,message:t.payload,type:"warning",duration:4e3}},showInfoToast:(e,t)=>{e.toast={isVisible:!0,message:t.payload,type:"info",duration:3e3}}}});Zy.actions;const ev=Zy.reducer,tv=Rd("stocks/fetchIndianStockQuote",async(e,{rejectWithValue:t})=>{var n,s;try{return{symbol:e,data:await Ir(e)}}catch(a){return t((null==(s=null==(n=a.response)?void 0:n.data)?void 0:s.message)||"Failed to fetch stock quote")}}),nv=Rd("stocks/fetchIndianMarketMovers",async(e,{rejectWithValue:t})=>{var n,s;try{return await Or()}catch(a){return t((null==(s=null==(n=a.response)?void 0:n.data)?void 0:s.message)||"Failed to fetch market movers")}}),sv=Rd("stocks/fetchNiftyData",async(e,{rejectWithValue:t})=>{var n,s;try{return await Ir("^NSEI")}catch(a){return t((null==(s=null==(n=a.response)?void 0:n.data)?void 0:s.message)||"Failed to fetch Nifty data")}}),av=Rd("stocks/fetchSensexData",async(e,{rejectWithValue:t})=>{var n,s;try{return await Ir("^BSESN")}catch(a){return t((null==(s=null==(n=a.response)?void 0:n.data)?void 0:s.message)||"Failed to fetch Sensex data")}}),rv=Rd("stocks/fetchBatchStockQuotes",async(e,{rejectWithValue:t})=>{var n,s;try{return await Ar(e)}catch(a){return t((null==(s=null==(n=a.response)?void 0:n.data)?void 0:s.message)||"Failed to fetch batch quotes")}}),iv=Ud({name:"stocks",initialState:{nifty:{data:null,loading:!1,error:null,lastUpdated:null},sensex:{data:null,loading:!1,error:null,lastUpdated:null},quotes:{},topGainers:[],topLosers:[],mostActive:[],realTimeUpdates:!0,updateInterval:3e4,lastGlobalUpdate:null,isLoading:!1,error:null,priceChanges:{},marketStatus:{isOpen:!1,nextOpen:null,nextClose:null,timezone:"Asia/Kolkata"}},reducers:{updateStockPrice:(e,t)=>{const{symbol:n,price:s,change:a,changePercent:r,volume:i,timestamp:o}=t.payload;e.quotes[n]&&e.quotes[n].price!==s&&(e.priceChanges[n]={oldPrice:e.quotes[n].price,newPrice:s,direction:s>e.quotes[n].price?"up":"down",timestamp:Date.now()}),e.quotes[n]={...e.quotes[n],price:s,change:a,changePercent:r,volume:i,lastUpdated:o||Date.now()}},updateBatchPrices:(e,t)=>{const n=t.payload,s=Date.now();n.forEach(t=>{const{symbol:n,price:a,change:r,changePercent:i,volume:o}=t;e.quotes[n]&&e.quotes[n].price!==a&&(e.priceChanges[n]={oldPrice:e.quotes[n].price,newPrice:a,direction:a>e.quotes[n].price?"up":"down",timestamp:s}),e.quotes[n]={...e.quotes[n],price:a,change:r,changePercent:i,volume:o,lastUpdated:s}}),e.lastGlobalUpdate=s},clearPriceChanges:e=>{e.priceChanges={}},toggleRealTimeUpdates:e=>{e.realTimeUpdates=!e.realTimeUpdates},setUpdateInterval:(e,t)=>{e.updateInterval=t.payload},updateMarketStatus:(e,t)=>{e.marketStatus={...e.marketStatus,...t.payload}},clearError:e=>{e.error=null,e.nifty.error=null,e.sensex.error=null}},extraReducers:e=>{e.addCase(tv.pending,e=>{e.isLoading=!0,e.error=null}).addCase(tv.fulfilled,(e,t)=>{e.isLoading=!1;const{symbol:n,data:s}=t.payload;e.quotes[n]={...s,lastUpdated:Date.now()}}).addCase(tv.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload}),e.addCase(nv.pending,e=>{e.isLoading=!0}).addCase(nv.fulfilled,(e,t)=>{e.isLoading=!1;const{gainers:n,losers:s,mostActive:a}=t.payload;e.topGainers=n||[],e.topLosers=s||[],e.mostActive=a||[],e.lastGlobalUpdate=Date.now()}).addCase(nv.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload}),e.addCase(sv.pending,e=>{e.nifty.loading=!0,e.nifty.error=null}).addCase(sv.fulfilled,(e,t)=>{e.nifty.loading=!1,e.nifty.data=t.payload,e.nifty.lastUpdated=Date.now()}).addCase(sv.rejected,(e,t)=>{e.nifty.loading=!1,e.nifty.error=t.payload}),e.addCase(av.pending,e=>{e.sensex.loading=!0,e.sensex.error=null}).addCase(av.fulfilled,(e,t)=>{e.sensex.loading=!1,e.sensex.data=t.payload,e.sensex.lastUpdated=Date.now()}).addCase(av.rejected,(e,t)=>{e.sensex.loading=!1,e.sensex.error=t.payload}),e.addCase(rv.pending,e=>{e.isLoading=!0}).addCase(rv.fulfilled,(e,t)=>{e.isLoading=!1;t.payload.forEach(t=>{e.quotes[t.symbol]={...t,lastUpdated:Date.now()}}),e.lastGlobalUpdate=Date.now()}).addCase(rv.rejected,(e,t)=>{e.isLoading=!1,e.error=t.payload})}});iv.actions;const ov=function(e){const t=function(e){const{thunk:t=!0,immutableCheck:n=!0,serializableCheck:s=!0,actionCreatorCheck:a=!0}=e??{};let r=new Nd;return t&&("boolean"==typeof t?r.push(xd):r.push(bd(t.extraArgument))),r},{reducer:n,middleware:s,devTools:a=!0,duplicateMiddlewareCheck:r=!0,preloadedState:i,enhancers:o}=e||{};let l,c;if("function"==typeof n)l=n;else{if(!Sc(n))throw new Error($d(1));l=Tc(n)}c="function"==typeof s?s(t):t();let d=Pc;a&&(d=jd({trace:!1,..."object"==typeof a&&a}));const u=function(...e){return t=>(n,s)=>{const a=t(n,s);let r=()=>{throw new Error(jc(15))};const i={getState:a.getState,dispatch:(e,...t)=>r(e,...t)},o=e.map(e=>e(i));return r=Pc(...o)(a.dispatch),{...a,dispatch:r}}}(...c),h=Td(u);return Cc(l,i,d(..."function"==typeof o?o(h):h()))}({reducer:function(e,t){var n=void 0!==e.version?e.version:-1;e.debug;var s=void 0===e.stateReconciler?Bg:e.stateReconciler,a=e.getStoredState||Hg,r=void 0!==e.timeout?e.timeout:5e3,i=null,o=!1,l=!0,c=function(e){return e._persist.rehydrated&&i&&!l&&i.update(e),e};return function(d,u){var h=d||{},m=h._persist,p=Gg(h,["_persist"]);if(u.type===Og){var f=!1,g=function(t,n){f||(u.rehydrate(e.key,t,n),f=!0)};if(r&&setTimeout(function(){!f&&g(void 0,new Error('redux-persist: persist timed out for persist key "'.concat(e.key,'"')))},r),l=!1,i||(i=zg(e)),m)return Vg({},t(p,u),{_persist:m});if("function"!=typeof u.rehydrate||"function"!=typeof u.register)throw new Error("redux-persist: either rehydrate or register is not a function on the PERSIST action. This can happen if the action is being replayed. This is an unexplored use case, please open an issue and we will figure out a resolution.");return u.register(e.key),a(e).then(function(t){(e.migrate||function(e,t){return Promise.resolve(e)})(t,n).then(function(e){g(e)},function(e){g(void 0,e)})},function(e){g(void 0,e)}),Vg({},t(p,u),{_persist:{version:n,rehydrated:!1}})}if(u.type===Dg)return o=!0,u.result(function(e){var t=e.storage,n="".concat(void 0!==e.keyPrefix?e.keyPrefix:Eg).concat(e.key);return t.removeItem(n,qg)}(e)),Vg({},t(p,u),{_persist:m});if(u.type===Lg)return u.result(i&&i.flush()),Vg({},t(p,u),{_persist:m});if(u.type===Ag)l=!0;else if(u.type===Ig){if(o)return Vg({},p,{_persist:Vg({},m,{rehydrated:!0})});if(u.key===e.key){var y=t(p,u),v=u.payload,x=Vg({},!1!==s&&void 0!==v?s(v,d,y,e):y,{_persist:Vg({},m,{rehydrated:!0})});return c(x)}}if(!m)return t(d,u);var b=t(p,u);return b===p?d:c(Vg({},b,{_persist:m}))}}({key:"tradebro",storage:ly,whitelist:["auth","portfolio","trading","watchlist","orders"],blacklist:["ui","news","stocks"]},Tc({auth:Ny,portfolio:Ly,trading:By,watchlist:Yy,orders:Xd,news:Xy,ui:ev,stocks:iv.reducer})),middleware:e=>e({serializableCheck:{ignoredActions:["persist/PERSIST","persist/REHYDRATE"]}}),devTools:!1}),lv=(cv=ov,hv=uv||!1,mv=Cc(ey,Zg,dv&&dv.enhancer?dv.enhancer:void 0),pv=function(e){mv.dispatch({type:Rg,key:e})},fv=function(e,t,n){var s={type:Ig,payload:t,err:n,key:e};cv.dispatch(s),mv.dispatch(s),hv&&gv.getState().bootstrapped&&(hv(),hv=!1)},gv=Qg({},mv,{purge:function(){var e=[];return cv.dispatch({type:Dg,result:function(t){e.push(t)}}),Promise.all(e)},flush:function(){var e=[];return cv.dispatch({type:Lg,result:function(t){e.push(t)}}),Promise.all(e)},pause:function(){cv.dispatch({type:Ag})},persist:function(){cv.dispatch({type:Og,register:pv,rehydrate:fv})}}),dv&&dv.manualPersist||gv.persist(),gv);var cv,dv,uv,hv,mv,pv,fv,gv;const yv=n.createContext(),vv=({children:e})=>{const[t,s]=n.useState(()=>localStorage.getItem("tradebro-theme")||"light");n.useEffect(()=>{const e=document.documentElement;e.classList.remove("light-theme","dark-theme"),e.classList.add(`${t}-theme`),localStorage.setItem("tradebro-theme",t),e.setAttribute("data-theme",t)},[t]);const a={theme:t,toggleTheme:()=>{s(e=>"light"===e?"dark":"light")},setLightTheme:()=>s("light"),setDarkTheme:()=>s("dark"),isLight:"light"===t,isDark:"dark"===t};return B.jsx(yv.Provider,{value:a,children:e})};"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").catch(()=>{})}),F(document.getElementById("root")).render(B.jsx(n.StrictMode,{children:B.jsx(re,{store:ov,children:B.jsx(je,{loading:B.jsx("div",{children:"Loading..."}),persistor:lv,children:B.jsx(p,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:B.jsx(vv,{children:B.jsx(Tn,{children:B.jsx(hr,{children:B.jsx(hi,{children:B.jsx(Fo,{children:B.jsx($r,{children:B.jsx(bo,{children:B.jsx(Tg,{})})})})})})})})})})})}));export{et as F,Yt as a,Nn as b,nn as c,jt as d,B as j};
