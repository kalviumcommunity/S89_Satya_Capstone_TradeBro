var WC=Object.defineProperty;var HC=(t,e,s)=>e in t?WC(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var vh=(t,e,s)=>HC(t,typeof e!="symbol"?e+"":e,s);function YC(t,e){for(var s=0;s<e.length;s++){const n=e[s];if(typeof n!="string"&&!Array.isArray(n)){for(const i in n)if(i!=="default"&&!(i in t)){const a=Object.getOwnPropertyDescriptor(n,i);a&&Object.defineProperty(t,i,a.get?a:{enumerable:!0,get:()=>n[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function s(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=s(i);fetch(i.href,a)}})();var qC=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function iw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var rw={exports:{}},tu={},aw={exports:{}},xe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Eo=Symbol.for("react.element"),GC=Symbol.for("react.portal"),QC=Symbol.for("react.fragment"),KC=Symbol.for("react.strict_mode"),XC=Symbol.for("react.profiler"),JC=Symbol.for("react.provider"),ZC=Symbol.for("react.context"),e2=Symbol.for("react.forward_ref"),t2=Symbol.for("react.suspense"),s2=Symbol.for("react.memo"),n2=Symbol.for("react.lazy"),Kg=Symbol.iterator;function i2(t){return t===null||typeof t!="object"?null:(t=Kg&&t[Kg]||t["@@iterator"],typeof t=="function"?t:null)}var ow={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},lw=Object.assign,cw={};function Zr(t,e,s){this.props=t,this.context=e,this.refs=cw,this.updater=s||ow}Zr.prototype.isReactComponent={};Zr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Zr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function uw(){}uw.prototype=Zr.prototype;function Am(t,e,s){this.props=t,this.context=e,this.refs=cw,this.updater=s||ow}var Om=Am.prototype=new uw;Om.constructor=Am;lw(Om,Zr.prototype);Om.isPureReactComponent=!0;var Xg=Array.isArray,hw=Object.prototype.hasOwnProperty,Dm={current:null},dw={key:!0,ref:!0,__self:!0,__source:!0};function fw(t,e,s){var n,i={},a=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)hw.call(e,n)&&!dw.hasOwnProperty(n)&&(i[n]=e[n]);var l=arguments.length-2;if(l===1)i.children=s;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];i.children=c}if(t&&t.defaultProps)for(n in l=t.defaultProps,l)i[n]===void 0&&(i[n]=l[n]);return{$$typeof:Eo,type:t,key:a,ref:o,props:i,_owner:Dm.current}}function r2(t,e){return{$$typeof:Eo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Fm(t){return typeof t=="object"&&t!==null&&t.$$typeof===Eo}function a2(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(s){return e[s]})}var Jg=/\/+/g;function xh(t,e){return typeof t=="object"&&t!==null&&t.key!=null?a2(""+t.key):e.toString(36)}function Rl(t,e,s,n,i){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Eo:case GC:o=!0}}if(o)return o=t,i=i(o),t=n===""?"."+xh(o,0):n,Xg(i)?(s="",t!=null&&(s=t.replace(Jg,"$&/")+"/"),Rl(i,e,s,"",function(u){return u})):i!=null&&(Fm(i)&&(i=r2(i,s+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Jg,"$&/")+"/")+t)),e.push(i)),1;if(o=0,n=n===""?".":n+":",Xg(t))for(var l=0;l<t.length;l++){a=t[l];var c=n+xh(a,l);o+=Rl(a,e,s,c,i)}else if(c=i2(t),typeof c=="function")for(t=c.call(t),l=0;!(a=t.next()).done;)a=a.value,c=n+xh(a,l++),o+=Rl(a,e,s,c,i);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Xo(t,e,s){if(t==null)return t;var n=[],i=0;return Rl(t,n,"","",function(a){return e.call(s,a,i++)}),n}function o2(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(s){(t._status===0||t._status===-1)&&(t._status=1,t._result=s)},function(s){(t._status===0||t._status===-1)&&(t._status=2,t._result=s)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var $t={current:null},Ml={transition:null},l2={ReactCurrentDispatcher:$t,ReactCurrentBatchConfig:Ml,ReactCurrentOwner:Dm};function mw(){throw Error("act(...) is not supported in production builds of React.")}xe.Children={map:Xo,forEach:function(t,e,s){Xo(t,function(){e.apply(this,arguments)},s)},count:function(t){var e=0;return Xo(t,function(){e++}),e},toArray:function(t){return Xo(t,function(e){return e})||[]},only:function(t){if(!Fm(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};xe.Component=Zr;xe.Fragment=QC;xe.Profiler=XC;xe.PureComponent=Am;xe.StrictMode=KC;xe.Suspense=t2;xe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=l2;xe.act=mw;xe.cloneElement=function(t,e,s){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=lw({},t.props),i=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=Dm.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)hw.call(e,c)&&!dw.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=s;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];n.children=l}return{$$typeof:Eo,type:t.type,key:i,ref:a,props:n,_owner:o}};xe.createContext=function(t){return t={$$typeof:ZC,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:JC,_context:t},t.Consumer=t};xe.createElement=fw;xe.createFactory=function(t){var e=fw.bind(null,t);return e.type=t,e};xe.createRef=function(){return{current:null}};xe.forwardRef=function(t){return{$$typeof:e2,render:t}};xe.isValidElement=Fm;xe.lazy=function(t){return{$$typeof:n2,_payload:{_status:-1,_result:t},_init:o2}};xe.memo=function(t,e){return{$$typeof:s2,type:t,compare:e===void 0?null:e}};xe.startTransition=function(t){var e=Ml.transition;Ml.transition={};try{t()}finally{Ml.transition=e}};xe.unstable_act=mw;xe.useCallback=function(t,e){return $t.current.useCallback(t,e)};xe.useContext=function(t){return $t.current.useContext(t)};xe.useDebugValue=function(){};xe.useDeferredValue=function(t){return $t.current.useDeferredValue(t)};xe.useEffect=function(t,e){return $t.current.useEffect(t,e)};xe.useId=function(){return $t.current.useId()};xe.useImperativeHandle=function(t,e,s){return $t.current.useImperativeHandle(t,e,s)};xe.useInsertionEffect=function(t,e){return $t.current.useInsertionEffect(t,e)};xe.useLayoutEffect=function(t,e){return $t.current.useLayoutEffect(t,e)};xe.useMemo=function(t,e){return $t.current.useMemo(t,e)};xe.useReducer=function(t,e,s){return $t.current.useReducer(t,e,s)};xe.useRef=function(t){return $t.current.useRef(t)};xe.useState=function(t){return $t.current.useState(t)};xe.useSyncExternalStore=function(t,e,s){return $t.current.useSyncExternalStore(t,e,s)};xe.useTransition=function(){return $t.current.useTransition()};xe.version="18.3.1";aw.exports=xe;var b=aw.exports;const ve=iw(b),c2=YC({__proto__:null,default:ve},[b]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var u2=b,h2=Symbol.for("react.element"),d2=Symbol.for("react.fragment"),f2=Object.prototype.hasOwnProperty,m2=u2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p2={key:!0,ref:!0,__self:!0,__source:!0};function pw(t,e,s){var n,i={},a=null,o=null;s!==void 0&&(a=""+s),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)f2.call(e,n)&&!p2.hasOwnProperty(n)&&(i[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)i[n]===void 0&&(i[n]=e[n]);return{$$typeof:h2,type:t,key:a,ref:o,props:i,_owner:m2.current}}tu.Fragment=d2;tu.jsx=pw;tu.jsxs=pw;rw.exports=tu;var r=rw.exports,gw={exports:{}},ls={},yw={exports:{}},vw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(D,V){var $=D.length;D.push(V);e:for(;0<$;){var Q=$-1>>>1,se=D[Q];if(0<i(se,V))D[Q]=V,D[$]=se,$=Q;else break e}}function s(D){return D.length===0?null:D[0]}function n(D){if(D.length===0)return null;var V=D[0],$=D.pop();if($!==V){D[0]=$;e:for(var Q=0,se=D.length,ye=se>>>1;Q<ye;){var q=2*(Q+1)-1,W=D[q],Y=q+1,re=D[Y];if(0>i(W,$))Y<se&&0>i(re,W)?(D[Q]=re,D[Y]=$,Q=Y):(D[Q]=W,D[q]=$,Q=q);else if(Y<se&&0>i(re,$))D[Q]=re,D[Y]=$,Q=Y;else break e}}return V}function i(D,V){var $=D.sortIndex-V.sortIndex;return $!==0?$:D.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],h=1,d=null,f=3,y=!1,p=!1,w=!1,g=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(D){for(var V=s(u);V!==null;){if(V.callback===null)n(u);else if(V.startTime<=D)n(u),V.sortIndex=V.expirationTime,e(c,V);else break;V=s(u)}}function N(D){if(w=!1,S(D),!p)if(s(c)!==null)p=!0,F(j);else{var V=s(u);V!==null&&K(N,V.startTime-D)}}function j(D,V){p=!1,w&&(w=!1,m(T),T=-1),y=!0;var $=f;try{for(S(V),d=s(c);d!==null&&(!(d.expirationTime>V)||D&&!_());){var Q=d.callback;if(typeof Q=="function"){d.callback=null,f=d.priorityLevel;var se=Q(d.expirationTime<=V);V=t.unstable_now(),typeof se=="function"?d.callback=se:d===s(c)&&n(c),S(V)}else n(c);d=s(c)}if(d!==null)var ye=!0;else{var q=s(u);q!==null&&K(N,q.startTime-V),ye=!1}return ye}finally{d=null,f=$,y=!1}}var P=!1,E=null,T=-1,R=5,M=-1;function _(){return!(t.unstable_now()-M<R)}function O(){if(E!==null){var D=t.unstable_now();M=D;var V=!0;try{V=E(!0,D)}finally{V?A():(P=!1,E=null)}}else P=!1}var A;if(typeof x=="function")A=function(){x(O)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,H=B.port2;B.port1.onmessage=O,A=function(){H.postMessage(null)}}else A=function(){g(O,0)};function F(D){E=D,P||(P=!0,A())}function K(D,V){T=g(function(){D(t.unstable_now())},V)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(D){D.callback=null},t.unstable_continueExecution=function(){p||y||(p=!0,F(j))},t.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<D?Math.floor(1e3/D):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return s(c)},t.unstable_next=function(D){switch(f){case 1:case 2:case 3:var V=3;break;default:V=f}var $=f;f=V;try{return D()}finally{f=$}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(D,V){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var $=f;f=D;try{return V()}finally{f=$}},t.unstable_scheduleCallback=function(D,V,$){var Q=t.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?Q+$:Q):$=Q,D){case 1:var se=-1;break;case 2:se=250;break;case 5:se=1073741823;break;case 4:se=1e4;break;default:se=5e3}return se=$+se,D={id:h++,callback:V,priorityLevel:D,startTime:$,expirationTime:se,sortIndex:-1},$>Q?(D.sortIndex=$,e(u,D),s(c)===null&&D===s(u)&&(w?(m(T),T=-1):w=!0,K(N,$-Q))):(D.sortIndex=se,e(c,D),p||y||(p=!0,F(j))),D},t.unstable_shouldYield=_,t.unstable_wrapCallback=function(D){var V=f;return function(){var $=f;f=V;try{return D.apply(this,arguments)}finally{f=$}}}})(vw);yw.exports=vw;var g2=yw.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var y2=b,is=g2;function Z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,s=1;s<arguments.length;s++)e+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var xw=new Set,Ja={};function Ki(t,e){Or(t,e),Or(t+"Capture",e)}function Or(t,e){for(Ja[t]=e,t=0;t<e.length;t++)xw.add(e[t])}var cn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ef=Object.prototype.hasOwnProperty,v2=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Zg={},ey={};function x2(t){return ef.call(ey,t)?!0:ef.call(Zg,t)?!1:v2.test(t)?ey[t]=!0:(Zg[t]=!0,!1)}function w2(t,e,s,n){if(s!==null&&s.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:s!==null?!s.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function S2(t,e,s,n){if(e===null||typeof e>"u"||w2(t,e,s,n))return!0;if(n)return!1;if(s!==null)switch(s.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function zt(t,e,s,n,i,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=i,this.mustUseProperty=s,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var bt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){bt[t]=new zt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];bt[e]=new zt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){bt[t]=new zt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){bt[t]=new zt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){bt[t]=new zt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){bt[t]=new zt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){bt[t]=new zt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){bt[t]=new zt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){bt[t]=new zt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Bm=/[\-:]([a-z])/g;function $m(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Bm,$m);bt[e]=new zt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Bm,$m);bt[e]=new zt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Bm,$m);bt[e]=new zt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){bt[t]=new zt(t,1,!1,t.toLowerCase(),null,!1,!1)});bt.xlinkHref=new zt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){bt[t]=new zt(t,1,!1,t.toLowerCase(),null,!0,!0)});function zm(t,e,s,n){var i=bt.hasOwnProperty(e)?bt[e]:null;(i!==null?i.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(S2(e,s,i,n)&&(s=null),n||i===null?x2(e)&&(s===null?t.removeAttribute(e):t.setAttribute(e,""+s)):i.mustUseProperty?t[i.propertyName]=s===null?i.type===3?!1:"":s:(e=i.attributeName,n=i.attributeNamespace,s===null?t.removeAttribute(e):(i=i.type,s=i===3||i===4&&s===!0?"":""+s,n?t.setAttributeNS(n,e,s):t.setAttribute(e,s))))}var pn=y2.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Jo=Symbol.for("react.element"),ur=Symbol.for("react.portal"),hr=Symbol.for("react.fragment"),Vm=Symbol.for("react.strict_mode"),tf=Symbol.for("react.profiler"),ww=Symbol.for("react.provider"),Sw=Symbol.for("react.context"),Um=Symbol.for("react.forward_ref"),sf=Symbol.for("react.suspense"),nf=Symbol.for("react.suspense_list"),Wm=Symbol.for("react.memo"),jn=Symbol.for("react.lazy"),bw=Symbol.for("react.offscreen"),ty=Symbol.iterator;function ua(t){return t===null||typeof t!="object"?null:(t=ty&&t[ty]||t["@@iterator"],typeof t=="function"?t:null)}var Je=Object.assign,wh;function ja(t){if(wh===void 0)try{throw Error()}catch(s){var e=s.stack.trim().match(/\n( *(at )?)/);wh=e&&e[1]||""}return`
`+wh+t}var Sh=!1;function bh(t,e){if(!t||Sh)return"";Sh=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){n=u}t.call(e.prototype)}else{try{throw Error()}catch(u){n=u}t()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),a=n.stack.split(`
`),o=i.length-1,l=a.length-1;1<=o&&0<=l&&i[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==a[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==a[l]){var c=`
`+i[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{Sh=!1,Error.prepareStackTrace=s}return(t=t?t.displayName||t.name:"")?ja(t):""}function b2(t){switch(t.tag){case 5:return ja(t.type);case 16:return ja("Lazy");case 13:return ja("Suspense");case 19:return ja("SuspenseList");case 0:case 2:case 15:return t=bh(t.type,!1),t;case 11:return t=bh(t.type.render,!1),t;case 1:return t=bh(t.type,!0),t;default:return""}}function rf(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case hr:return"Fragment";case ur:return"Portal";case tf:return"Profiler";case Vm:return"StrictMode";case sf:return"Suspense";case nf:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Sw:return(t.displayName||"Context")+".Consumer";case ww:return(t._context.displayName||"Context")+".Provider";case Um:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Wm:return e=t.displayName||null,e!==null?e:rf(t.type)||"Memo";case jn:e=t._payload,t=t._init;try{return rf(t(e))}catch{}}return null}function j2(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return rf(e);case 8:return e===Vm?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Yn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function jw(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function N2(t){var e=jw(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var i=s.get,a=s.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){n=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:s.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Zo(t){t._valueTracker||(t._valueTracker=N2(t))}function Nw(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var s=e.getValue(),n="";return t&&(n=jw(t)?t.checked?"true":"false":t.value),t=n,t!==s?(e.setValue(t),!0):!1}function ic(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function af(t,e){var s=e.checked;return Je({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??t._wrapperState.initialChecked})}function sy(t,e){var s=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;s=Yn(e.value!=null?e.value:s),t._wrapperState={initialChecked:n,initialValue:s,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function kw(t,e){e=e.checked,e!=null&&zm(t,"checked",e,!1)}function of(t,e){kw(t,e);var s=Yn(e.value),n=e.type;if(s!=null)n==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+s):t.value!==""+s&&(t.value=""+s);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?lf(t,e.type,s):e.hasOwnProperty("defaultValue")&&lf(t,e.type,Yn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function ny(t,e,s){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,s||e===t.value||(t.value=e),t.defaultValue=e}s=t.name,s!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,s!==""&&(t.name=s)}function lf(t,e,s){(e!=="number"||ic(t.ownerDocument)!==t)&&(s==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+s&&(t.defaultValue=""+s))}var Na=Array.isArray;function Tr(t,e,s,n){if(t=t.options,e){e={};for(var i=0;i<s.length;i++)e["$"+s[i]]=!0;for(s=0;s<t.length;s++)i=e.hasOwnProperty("$"+t[s].value),t[s].selected!==i&&(t[s].selected=i),i&&n&&(t[s].defaultSelected=!0)}else{for(s=""+Yn(s),e=null,i=0;i<t.length;i++){if(t[i].value===s){t[i].selected=!0,n&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function cf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Z(91));return Je({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function iy(t,e){var s=e.value;if(s==null){if(s=e.children,e=e.defaultValue,s!=null){if(e!=null)throw Error(Z(92));if(Na(s)){if(1<s.length)throw Error(Z(93));s=s[0]}e=s}e==null&&(e=""),s=e}t._wrapperState={initialValue:Yn(s)}}function Cw(t,e){var s=Yn(e.value),n=Yn(e.defaultValue);s!=null&&(s=""+s,s!==t.value&&(t.value=s),e.defaultValue==null&&t.defaultValue!==s&&(t.defaultValue=s)),n!=null&&(t.defaultValue=""+n)}function ry(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Pw(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function uf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Pw(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var el,Tw=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,s,n,i){MSApp.execUnsafeLocalFunction(function(){return t(e,s,n,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(el=el||document.createElement("div"),el.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=el.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Za(t,e){if(e){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=e;return}}t.textContent=e}var Ra={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},k2=["Webkit","ms","Moz","O"];Object.keys(Ra).forEach(function(t){k2.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ra[e]=Ra[t]})});function Ew(t,e,s){return e==null||typeof e=="boolean"||e===""?"":s||typeof e!="number"||e===0||Ra.hasOwnProperty(t)&&Ra[t]?(""+e).trim():e+"px"}function Lw(t,e){t=t.style;for(var s in e)if(e.hasOwnProperty(s)){var n=s.indexOf("--")===0,i=Ew(s,e[s],n);s==="float"&&(s="cssFloat"),n?t.setProperty(s,i):t[s]=i}}var C2=Je({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function hf(t,e){if(e){if(C2[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Z(62))}}function df(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ff=null;function Hm(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var mf=null,Er=null,Lr=null;function ay(t){if(t=Ro(t)){if(typeof mf!="function")throw Error(Z(280));var e=t.stateNode;e&&(e=au(e),mf(t.stateNode,t.type,e))}}function _w(t){Er?Lr?Lr.push(t):Lr=[t]:Er=t}function Rw(){if(Er){var t=Er,e=Lr;if(Lr=Er=null,ay(t),e)for(t=0;t<e.length;t++)ay(e[t])}}function Mw(t,e){return t(e)}function Iw(){}var jh=!1;function Aw(t,e,s){if(jh)return t(e,s);jh=!0;try{return Mw(t,e,s)}finally{jh=!1,(Er!==null||Lr!==null)&&(Iw(),Rw())}}function eo(t,e){var s=t.stateNode;if(s===null)return null;var n=au(s);if(n===null)return null;s=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(Z(231,e,typeof s));return s}var pf=!1;if(cn)try{var ha={};Object.defineProperty(ha,"passive",{get:function(){pf=!0}}),window.addEventListener("test",ha,ha),window.removeEventListener("test",ha,ha)}catch{pf=!1}function P2(t,e,s,n,i,a,o,l,c){var u=Array.prototype.slice.call(arguments,3);try{e.apply(s,u)}catch(h){this.onError(h)}}var Ma=!1,rc=null,ac=!1,gf=null,T2={onError:function(t){Ma=!0,rc=t}};function E2(t,e,s,n,i,a,o,l,c){Ma=!1,rc=null,P2.apply(T2,arguments)}function L2(t,e,s,n,i,a,o,l,c){if(E2.apply(this,arguments),Ma){if(Ma){var u=rc;Ma=!1,rc=null}else throw Error(Z(198));ac||(ac=!0,gf=u)}}function Xi(t){var e=t,s=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(s=e.return),t=e.return;while(t)}return e.tag===3?s:null}function Ow(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function oy(t){if(Xi(t)!==t)throw Error(Z(188))}function _2(t){var e=t.alternate;if(!e){if(e=Xi(t),e===null)throw Error(Z(188));return e!==t?null:t}for(var s=t,n=e;;){var i=s.return;if(i===null)break;var a=i.alternate;if(a===null){if(n=i.return,n!==null){s=n;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===s)return oy(i),t;if(a===n)return oy(i),e;a=a.sibling}throw Error(Z(188))}if(s.return!==n.return)s=i,n=a;else{for(var o=!1,l=i.child;l;){if(l===s){o=!0,s=i,n=a;break}if(l===n){o=!0,n=i,s=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===s){o=!0,s=a,n=i;break}if(l===n){o=!0,n=a,s=i;break}l=l.sibling}if(!o)throw Error(Z(189))}}if(s.alternate!==n)throw Error(Z(190))}if(s.tag!==3)throw Error(Z(188));return s.stateNode.current===s?t:e}function Dw(t){return t=_2(t),t!==null?Fw(t):null}function Fw(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Fw(t);if(e!==null)return e;t=t.sibling}return null}var Bw=is.unstable_scheduleCallback,ly=is.unstable_cancelCallback,R2=is.unstable_shouldYield,M2=is.unstable_requestPaint,et=is.unstable_now,I2=is.unstable_getCurrentPriorityLevel,Ym=is.unstable_ImmediatePriority,$w=is.unstable_UserBlockingPriority,oc=is.unstable_NormalPriority,A2=is.unstable_LowPriority,zw=is.unstable_IdlePriority,su=null,Us=null;function O2(t){if(Us&&typeof Us.onCommitFiberRoot=="function")try{Us.onCommitFiberRoot(su,t,void 0,(t.current.flags&128)===128)}catch{}}var Rs=Math.clz32?Math.clz32:B2,D2=Math.log,F2=Math.LN2;function B2(t){return t>>>=0,t===0?32:31-(D2(t)/F2|0)|0}var tl=64,sl=4194304;function ka(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function lc(t,e){var s=t.pendingLanes;if(s===0)return 0;var n=0,i=t.suspendedLanes,a=t.pingedLanes,o=s&268435455;if(o!==0){var l=o&~i;l!==0?n=ka(l):(a&=o,a!==0&&(n=ka(a)))}else o=s&~i,o!==0?n=ka(o):a!==0&&(n=ka(a));if(n===0)return 0;if(e!==0&&e!==n&&!(e&i)&&(i=n&-n,a=e&-e,i>=a||i===16&&(a&4194240)!==0))return e;if(n&4&&(n|=s&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)s=31-Rs(e),i=1<<s,n|=t[s],e&=~i;return n}function $2(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function z2(t,e){for(var s=t.suspendedLanes,n=t.pingedLanes,i=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-Rs(a),l=1<<o,c=i[o];c===-1?(!(l&s)||l&n)&&(i[o]=$2(l,e)):c<=e&&(t.expiredLanes|=l),a&=~l}}function yf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Vw(){var t=tl;return tl<<=1,!(tl&4194240)&&(tl=64),t}function Nh(t){for(var e=[],s=0;31>s;s++)e.push(t);return e}function Lo(t,e,s){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Rs(e),t[e]=s}function V2(t,e){var s=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<s;){var i=31-Rs(s),a=1<<i;e[i]=0,n[i]=-1,t[i]=-1,s&=~a}}function qm(t,e){var s=t.entangledLanes|=e;for(t=t.entanglements;s;){var n=31-Rs(s),i=1<<n;i&e|t[n]&e&&(t[n]|=e),s&=~i}}var Le=0;function Uw(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Ww,Gm,Hw,Yw,qw,vf=!1,nl=[],An=null,On=null,Dn=null,to=new Map,so=new Map,Cn=[],U2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function cy(t,e){switch(t){case"focusin":case"focusout":An=null;break;case"dragenter":case"dragleave":On=null;break;case"mouseover":case"mouseout":Dn=null;break;case"pointerover":case"pointerout":to.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":so.delete(e.pointerId)}}function da(t,e,s,n,i,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:s,eventSystemFlags:n,nativeEvent:a,targetContainers:[i]},e!==null&&(e=Ro(e),e!==null&&Gm(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function W2(t,e,s,n,i){switch(e){case"focusin":return An=da(An,t,e,s,n,i),!0;case"dragenter":return On=da(On,t,e,s,n,i),!0;case"mouseover":return Dn=da(Dn,t,e,s,n,i),!0;case"pointerover":var a=i.pointerId;return to.set(a,da(to.get(a)||null,t,e,s,n,i)),!0;case"gotpointercapture":return a=i.pointerId,so.set(a,da(so.get(a)||null,t,e,s,n,i)),!0}return!1}function Gw(t){var e=wi(t.target);if(e!==null){var s=Xi(e);if(s!==null){if(e=s.tag,e===13){if(e=Ow(s),e!==null){t.blockedOn=e,qw(t.priority,function(){Hw(s)});return}}else if(e===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Il(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var s=xf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(s===null){s=t.nativeEvent;var n=new s.constructor(s.type,s);ff=n,s.target.dispatchEvent(n),ff=null}else return e=Ro(s),e!==null&&Gm(e),t.blockedOn=s,!1;e.shift()}return!0}function uy(t,e,s){Il(t)&&s.delete(e)}function H2(){vf=!1,An!==null&&Il(An)&&(An=null),On!==null&&Il(On)&&(On=null),Dn!==null&&Il(Dn)&&(Dn=null),to.forEach(uy),so.forEach(uy)}function fa(t,e){t.blockedOn===e&&(t.blockedOn=null,vf||(vf=!0,is.unstable_scheduleCallback(is.unstable_NormalPriority,H2)))}function no(t){function e(i){return fa(i,t)}if(0<nl.length){fa(nl[0],t);for(var s=1;s<nl.length;s++){var n=nl[s];n.blockedOn===t&&(n.blockedOn=null)}}for(An!==null&&fa(An,t),On!==null&&fa(On,t),Dn!==null&&fa(Dn,t),to.forEach(e),so.forEach(e),s=0;s<Cn.length;s++)n=Cn[s],n.blockedOn===t&&(n.blockedOn=null);for(;0<Cn.length&&(s=Cn[0],s.blockedOn===null);)Gw(s),s.blockedOn===null&&Cn.shift()}var _r=pn.ReactCurrentBatchConfig,cc=!0;function Y2(t,e,s,n){var i=Le,a=_r.transition;_r.transition=null;try{Le=1,Qm(t,e,s,n)}finally{Le=i,_r.transition=a}}function q2(t,e,s,n){var i=Le,a=_r.transition;_r.transition=null;try{Le=4,Qm(t,e,s,n)}finally{Le=i,_r.transition=a}}function Qm(t,e,s,n){if(cc){var i=xf(t,e,s,n);if(i===null)Ih(t,e,n,uc,s),cy(t,n);else if(W2(i,t,e,s,n))n.stopPropagation();else if(cy(t,n),e&4&&-1<U2.indexOf(t)){for(;i!==null;){var a=Ro(i);if(a!==null&&Ww(a),a=xf(t,e,s,n),a===null&&Ih(t,e,n,uc,s),a===i)break;i=a}i!==null&&n.stopPropagation()}else Ih(t,e,n,null,s)}}var uc=null;function xf(t,e,s,n){if(uc=null,t=Hm(n),t=wi(t),t!==null)if(e=Xi(t),e===null)t=null;else if(s=e.tag,s===13){if(t=Ow(e),t!==null)return t;t=null}else if(s===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return uc=t,null}function Qw(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(I2()){case Ym:return 1;case $w:return 4;case oc:case A2:return 16;case zw:return 536870912;default:return 16}default:return 16}}var En=null,Km=null,Al=null;function Kw(){if(Al)return Al;var t,e=Km,s=e.length,n,i="value"in En?En.value:En.textContent,a=i.length;for(t=0;t<s&&e[t]===i[t];t++);var o=s-t;for(n=1;n<=o&&e[s-n]===i[a-n];n++);return Al=i.slice(t,1<n?1-n:void 0)}function Ol(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function il(){return!0}function hy(){return!1}function cs(t){function e(s,n,i,a,o){this._reactName=s,this._targetInst=i,this.type=n,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(s=t[l],this[l]=s?s(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?il:hy,this.isPropagationStopped=hy,this}return Je(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=il)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=il)},persist:function(){},isPersistent:il}),e}var ea={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xm=cs(ea),_o=Je({},ea,{view:0,detail:0}),G2=cs(_o),kh,Ch,ma,nu=Je({},_o,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Jm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==ma&&(ma&&t.type==="mousemove"?(kh=t.screenX-ma.screenX,Ch=t.screenY-ma.screenY):Ch=kh=0,ma=t),kh)},movementY:function(t){return"movementY"in t?t.movementY:Ch}}),dy=cs(nu),Q2=Je({},nu,{dataTransfer:0}),K2=cs(Q2),X2=Je({},_o,{relatedTarget:0}),Ph=cs(X2),J2=Je({},ea,{animationName:0,elapsedTime:0,pseudoElement:0}),Z2=cs(J2),eP=Je({},ea,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),tP=cs(eP),sP=Je({},ea,{data:0}),fy=cs(sP),nP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},iP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function aP(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=rP[t])?!!e[t]:!1}function Jm(){return aP}var oP=Je({},_o,{key:function(t){if(t.key){var e=nP[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ol(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?iP[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Jm,charCode:function(t){return t.type==="keypress"?Ol(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ol(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),lP=cs(oP),cP=Je({},nu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),my=cs(cP),uP=Je({},_o,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Jm}),hP=cs(uP),dP=Je({},ea,{propertyName:0,elapsedTime:0,pseudoElement:0}),fP=cs(dP),mP=Je({},nu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),pP=cs(mP),gP=[9,13,27,32],Zm=cn&&"CompositionEvent"in window,Ia=null;cn&&"documentMode"in document&&(Ia=document.documentMode);var yP=cn&&"TextEvent"in window&&!Ia,Xw=cn&&(!Zm||Ia&&8<Ia&&11>=Ia),py=" ",gy=!1;function Jw(t,e){switch(t){case"keyup":return gP.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Zw(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var dr=!1;function vP(t,e){switch(t){case"compositionend":return Zw(e);case"keypress":return e.which!==32?null:(gy=!0,py);case"textInput":return t=e.data,t===py&&gy?null:t;default:return null}}function xP(t,e){if(dr)return t==="compositionend"||!Zm&&Jw(t,e)?(t=Kw(),Al=Km=En=null,dr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Xw&&e.locale!=="ko"?null:e.data;default:return null}}var wP={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yy(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!wP[t.type]:e==="textarea"}function e1(t,e,s,n){_w(n),e=hc(e,"onChange"),0<e.length&&(s=new Xm("onChange","change",null,s,n),t.push({event:s,listeners:e}))}var Aa=null,io=null;function SP(t){h1(t,0)}function iu(t){var e=pr(t);if(Nw(e))return t}function bP(t,e){if(t==="change")return e}var t1=!1;if(cn){var Th;if(cn){var Eh="oninput"in document;if(!Eh){var vy=document.createElement("div");vy.setAttribute("oninput","return;"),Eh=typeof vy.oninput=="function"}Th=Eh}else Th=!1;t1=Th&&(!document.documentMode||9<document.documentMode)}function xy(){Aa&&(Aa.detachEvent("onpropertychange",s1),io=Aa=null)}function s1(t){if(t.propertyName==="value"&&iu(io)){var e=[];e1(e,io,t,Hm(t)),Aw(SP,e)}}function jP(t,e,s){t==="focusin"?(xy(),Aa=e,io=s,Aa.attachEvent("onpropertychange",s1)):t==="focusout"&&xy()}function NP(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return iu(io)}function kP(t,e){if(t==="click")return iu(e)}function CP(t,e){if(t==="input"||t==="change")return iu(e)}function PP(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var As=typeof Object.is=="function"?Object.is:PP;function ro(t,e){if(As(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var s=Object.keys(t),n=Object.keys(e);if(s.length!==n.length)return!1;for(n=0;n<s.length;n++){var i=s[n];if(!ef.call(e,i)||!As(t[i],e[i]))return!1}return!0}function wy(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Sy(t,e){var s=wy(t);t=0;for(var n;s;){if(s.nodeType===3){if(n=t+s.textContent.length,t<=e&&n>=e)return{node:s,offset:e-t};t=n}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=wy(s)}}function n1(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?n1(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function i1(){for(var t=window,e=ic();e instanceof t.HTMLIFrameElement;){try{var s=typeof e.contentWindow.location.href=="string"}catch{s=!1}if(s)t=e.contentWindow;else break;e=ic(t.document)}return e}function ep(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function TP(t){var e=i1(),s=t.focusedElem,n=t.selectionRange;if(e!==s&&s&&s.ownerDocument&&n1(s.ownerDocument.documentElement,s)){if(n!==null&&ep(s)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in s)s.selectionStart=e,s.selectionEnd=Math.min(t,s.value.length);else if(t=(e=s.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=s.textContent.length,a=Math.min(n.start,i);n=n.end===void 0?a:Math.min(n.end,i),!t.extend&&a>n&&(i=n,n=a,a=i),i=Sy(s,a);var o=Sy(s,n);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),a>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=s;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<e.length;s++)t=e[s],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var EP=cn&&"documentMode"in document&&11>=document.documentMode,fr=null,wf=null,Oa=null,Sf=!1;function by(t,e,s){var n=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Sf||fr==null||fr!==ic(n)||(n=fr,"selectionStart"in n&&ep(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Oa&&ro(Oa,n)||(Oa=n,n=hc(wf,"onSelect"),0<n.length&&(e=new Xm("onSelect","select",null,e,s),t.push({event:e,listeners:n}),e.target=fr)))}function rl(t,e){var s={};return s[t.toLowerCase()]=e.toLowerCase(),s["Webkit"+t]="webkit"+e,s["Moz"+t]="moz"+e,s}var mr={animationend:rl("Animation","AnimationEnd"),animationiteration:rl("Animation","AnimationIteration"),animationstart:rl("Animation","AnimationStart"),transitionend:rl("Transition","TransitionEnd")},Lh={},r1={};cn&&(r1=document.createElement("div").style,"AnimationEvent"in window||(delete mr.animationend.animation,delete mr.animationiteration.animation,delete mr.animationstart.animation),"TransitionEvent"in window||delete mr.transitionend.transition);function ru(t){if(Lh[t])return Lh[t];if(!mr[t])return t;var e=mr[t],s;for(s in e)if(e.hasOwnProperty(s)&&s in r1)return Lh[t]=e[s];return t}var a1=ru("animationend"),o1=ru("animationiteration"),l1=ru("animationstart"),c1=ru("transitionend"),u1=new Map,jy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Zn(t,e){u1.set(t,e),Ki(e,[t])}for(var _h=0;_h<jy.length;_h++){var Rh=jy[_h],LP=Rh.toLowerCase(),_P=Rh[0].toUpperCase()+Rh.slice(1);Zn(LP,"on"+_P)}Zn(a1,"onAnimationEnd");Zn(o1,"onAnimationIteration");Zn(l1,"onAnimationStart");Zn("dblclick","onDoubleClick");Zn("focusin","onFocus");Zn("focusout","onBlur");Zn(c1,"onTransitionEnd");Or("onMouseEnter",["mouseout","mouseover"]);Or("onMouseLeave",["mouseout","mouseover"]);Or("onPointerEnter",["pointerout","pointerover"]);Or("onPointerLeave",["pointerout","pointerover"]);Ki("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ki("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ki("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ki("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ki("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ki("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ca="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),RP=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ca));function Ny(t,e,s){var n=t.type||"unknown-event";t.currentTarget=s,L2(n,e,void 0,t),t.currentTarget=null}function h1(t,e){e=(e&4)!==0;for(var s=0;s<t.length;s++){var n=t[s],i=n.event;n=n.listeners;e:{var a=void 0;if(e)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,u=l.currentTarget;if(l=l.listener,c!==a&&i.isPropagationStopped())break e;Ny(i,l,u),a=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,u=l.currentTarget,l=l.listener,c!==a&&i.isPropagationStopped())break e;Ny(i,l,u),a=c}}}if(ac)throw t=gf,ac=!1,gf=null,t}function Ve(t,e){var s=e[Cf];s===void 0&&(s=e[Cf]=new Set);var n=t+"__bubble";s.has(n)||(d1(e,t,2,!1),s.add(n))}function Mh(t,e,s){var n=0;e&&(n|=4),d1(s,t,n,e)}var al="_reactListening"+Math.random().toString(36).slice(2);function ao(t){if(!t[al]){t[al]=!0,xw.forEach(function(s){s!=="selectionchange"&&(RP.has(s)||Mh(s,!1,t),Mh(s,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[al]||(e[al]=!0,Mh("selectionchange",!1,e))}}function d1(t,e,s,n){switch(Qw(e)){case 1:var i=Y2;break;case 4:i=q2;break;default:i=Qm}s=i.bind(null,e,s,t),i=void 0,!pf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),n?i!==void 0?t.addEventListener(e,s,{capture:!0,passive:i}):t.addEventListener(e,s,!0):i!==void 0?t.addEventListener(e,s,{passive:i}):t.addEventListener(e,s,!1)}function Ih(t,e,s,n,i){var a=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===i||c.nodeType===8&&c.parentNode===i))return;o=o.return}for(;l!==null;){if(o=wi(l),o===null)return;if(c=o.tag,c===5||c===6){n=a=o;continue e}l=l.parentNode}}n=n.return}Aw(function(){var u=a,h=Hm(s),d=[];e:{var f=u1.get(t);if(f!==void 0){var y=Xm,p=t;switch(t){case"keypress":if(Ol(s)===0)break e;case"keydown":case"keyup":y=lP;break;case"focusin":p="focus",y=Ph;break;case"focusout":p="blur",y=Ph;break;case"beforeblur":case"afterblur":y=Ph;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=dy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=K2;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=hP;break;case a1:case o1:case l1:y=Z2;break;case c1:y=fP;break;case"scroll":y=G2;break;case"wheel":y=pP;break;case"copy":case"cut":case"paste":y=tP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=my}var w=(e&4)!==0,g=!w&&t==="scroll",m=w?f!==null?f+"Capture":null:f;w=[];for(var x=u,S;x!==null;){S=x;var N=S.stateNode;if(S.tag===5&&N!==null&&(S=N,m!==null&&(N=eo(x,m),N!=null&&w.push(oo(x,N,S)))),g)break;x=x.return}0<w.length&&(f=new y(f,p,null,s,h),d.push({event:f,listeners:w}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",f&&s!==ff&&(p=s.relatedTarget||s.fromElement)&&(wi(p)||p[un]))break e;if((y||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,y?(p=s.relatedTarget||s.toElement,y=u,p=p?wi(p):null,p!==null&&(g=Xi(p),p!==g||p.tag!==5&&p.tag!==6)&&(p=null)):(y=null,p=u),y!==p)){if(w=dy,N="onMouseLeave",m="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(w=my,N="onPointerLeave",m="onPointerEnter",x="pointer"),g=y==null?f:pr(y),S=p==null?f:pr(p),f=new w(N,x+"leave",y,s,h),f.target=g,f.relatedTarget=S,N=null,wi(h)===u&&(w=new w(m,x+"enter",p,s,h),w.target=S,w.relatedTarget=g,N=w),g=N,y&&p)t:{for(w=y,m=p,x=0,S=w;S;S=or(S))x++;for(S=0,N=m;N;N=or(N))S++;for(;0<x-S;)w=or(w),x--;for(;0<S-x;)m=or(m),S--;for(;x--;){if(w===m||m!==null&&w===m.alternate)break t;w=or(w),m=or(m)}w=null}else w=null;y!==null&&ky(d,f,y,w,!1),p!==null&&g!==null&&ky(d,g,p,w,!0)}}e:{if(f=u?pr(u):window,y=f.nodeName&&f.nodeName.toLowerCase(),y==="select"||y==="input"&&f.type==="file")var j=bP;else if(yy(f))if(t1)j=CP;else{j=NP;var P=jP}else(y=f.nodeName)&&y.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(j=kP);if(j&&(j=j(t,u))){e1(d,j,s,h);break e}P&&P(t,f,u),t==="focusout"&&(P=f._wrapperState)&&P.controlled&&f.type==="number"&&lf(f,"number",f.value)}switch(P=u?pr(u):window,t){case"focusin":(yy(P)||P.contentEditable==="true")&&(fr=P,wf=u,Oa=null);break;case"focusout":Oa=wf=fr=null;break;case"mousedown":Sf=!0;break;case"contextmenu":case"mouseup":case"dragend":Sf=!1,by(d,s,h);break;case"selectionchange":if(EP)break;case"keydown":case"keyup":by(d,s,h)}var E;if(Zm)e:{switch(t){case"compositionstart":var T="onCompositionStart";break e;case"compositionend":T="onCompositionEnd";break e;case"compositionupdate":T="onCompositionUpdate";break e}T=void 0}else dr?Jw(t,s)&&(T="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(T="onCompositionStart");T&&(Xw&&s.locale!=="ko"&&(dr||T!=="onCompositionStart"?T==="onCompositionEnd"&&dr&&(E=Kw()):(En=h,Km="value"in En?En.value:En.textContent,dr=!0)),P=hc(u,T),0<P.length&&(T=new fy(T,t,null,s,h),d.push({event:T,listeners:P}),E?T.data=E:(E=Zw(s),E!==null&&(T.data=E)))),(E=yP?vP(t,s):xP(t,s))&&(u=hc(u,"onBeforeInput"),0<u.length&&(h=new fy("onBeforeInput","beforeinput",null,s,h),d.push({event:h,listeners:u}),h.data=E))}h1(d,e)})}function oo(t,e,s){return{instance:t,listener:e,currentTarget:s}}function hc(t,e){for(var s=e+"Capture",n=[];t!==null;){var i=t,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=eo(t,s),a!=null&&n.unshift(oo(t,a,i)),a=eo(t,e),a!=null&&n.push(oo(t,a,i))),t=t.return}return n}function or(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ky(t,e,s,n,i){for(var a=e._reactName,o=[];s!==null&&s!==n;){var l=s,c=l.alternate,u=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&u!==null&&(l=u,i?(c=eo(s,a),c!=null&&o.unshift(oo(s,c,l))):i||(c=eo(s,a),c!=null&&o.push(oo(s,c,l)))),s=s.return}o.length!==0&&t.push({event:e,listeners:o})}var MP=/\r\n?/g,IP=/\u0000|\uFFFD/g;function Cy(t){return(typeof t=="string"?t:""+t).replace(MP,`
`).replace(IP,"")}function ol(t,e,s){if(e=Cy(e),Cy(t)!==e&&s)throw Error(Z(425))}function dc(){}var bf=null,jf=null;function Nf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var kf=typeof setTimeout=="function"?setTimeout:void 0,AP=typeof clearTimeout=="function"?clearTimeout:void 0,Py=typeof Promise=="function"?Promise:void 0,OP=typeof queueMicrotask=="function"?queueMicrotask:typeof Py<"u"?function(t){return Py.resolve(null).then(t).catch(DP)}:kf;function DP(t){setTimeout(function(){throw t})}function Ah(t,e){var s=e,n=0;do{var i=s.nextSibling;if(t.removeChild(s),i&&i.nodeType===8)if(s=i.data,s==="/$"){if(n===0){t.removeChild(i),no(e);return}n--}else s!=="$"&&s!=="$?"&&s!=="$!"||n++;s=i}while(s);no(e)}function Fn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Ty(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"){if(e===0)return t;e--}else s==="/$"&&e++}t=t.previousSibling}return null}var ta=Math.random().toString(36).slice(2),Vs="__reactFiber$"+ta,lo="__reactProps$"+ta,un="__reactContainer$"+ta,Cf="__reactEvents$"+ta,FP="__reactListeners$"+ta,BP="__reactHandles$"+ta;function wi(t){var e=t[Vs];if(e)return e;for(var s=t.parentNode;s;){if(e=s[un]||s[Vs]){if(s=e.alternate,e.child!==null||s!==null&&s.child!==null)for(t=Ty(t);t!==null;){if(s=t[Vs])return s;t=Ty(t)}return e}t=s,s=t.parentNode}return null}function Ro(t){return t=t[Vs]||t[un],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function pr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(Z(33))}function au(t){return t[lo]||null}var Pf=[],gr=-1;function ei(t){return{current:t}}function Ue(t){0>gr||(t.current=Pf[gr],Pf[gr]=null,gr--)}function Fe(t,e){gr++,Pf[gr]=t.current,t.current=e}var qn={},Et=ei(qn),Ht=ei(!1),Ii=qn;function Dr(t,e){var s=t.type.contextTypes;if(!s)return qn;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in s)i[a]=e[a];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Yt(t){return t=t.childContextTypes,t!=null}function fc(){Ue(Ht),Ue(Et)}function Ey(t,e,s){if(Et.current!==qn)throw Error(Z(168));Fe(Et,e),Fe(Ht,s)}function f1(t,e,s){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return s;n=n.getChildContext();for(var i in n)if(!(i in e))throw Error(Z(108,j2(t)||"Unknown",i));return Je({},s,n)}function mc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||qn,Ii=Et.current,Fe(Et,t),Fe(Ht,Ht.current),!0}function Ly(t,e,s){var n=t.stateNode;if(!n)throw Error(Z(169));s?(t=f1(t,e,Ii),n.__reactInternalMemoizedMergedChildContext=t,Ue(Ht),Ue(Et),Fe(Et,t)):Ue(Ht),Fe(Ht,s)}var Js=null,ou=!1,Oh=!1;function m1(t){Js===null?Js=[t]:Js.push(t)}function $P(t){ou=!0,m1(t)}function ti(){if(!Oh&&Js!==null){Oh=!0;var t=0,e=Le;try{var s=Js;for(Le=1;t<s.length;t++){var n=s[t];do n=n(!0);while(n!==null)}Js=null,ou=!1}catch(i){throw Js!==null&&(Js=Js.slice(t+1)),Bw(Ym,ti),i}finally{Le=e,Oh=!1}}return null}var yr=[],vr=0,pc=null,gc=0,ys=[],vs=0,Ai=null,Zs=1,en="";function di(t,e){yr[vr++]=gc,yr[vr++]=pc,pc=t,gc=e}function p1(t,e,s){ys[vs++]=Zs,ys[vs++]=en,ys[vs++]=Ai,Ai=t;var n=Zs;t=en;var i=32-Rs(n)-1;n&=~(1<<i),s+=1;var a=32-Rs(e)+i;if(30<a){var o=i-i%5;a=(n&(1<<o)-1).toString(32),n>>=o,i-=o,Zs=1<<32-Rs(e)+i|s<<i|n,en=a+t}else Zs=1<<a|s<<i|n,en=t}function tp(t){t.return!==null&&(di(t,1),p1(t,1,0))}function sp(t){for(;t===pc;)pc=yr[--vr],yr[vr]=null,gc=yr[--vr],yr[vr]=null;for(;t===Ai;)Ai=ys[--vs],ys[vs]=null,en=ys[--vs],ys[vs]=null,Zs=ys[--vs],ys[vs]=null}var ss=null,ts=null,Ye=!1,Ls=null;function g1(t,e){var s=xs(5,null,null,0);s.elementType="DELETED",s.stateNode=e,s.return=t,e=t.deletions,e===null?(t.deletions=[s],t.flags|=16):e.push(s)}function _y(t,e){switch(t.tag){case 5:var s=t.type;return e=e.nodeType!==1||s.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,ss=t,ts=Fn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,ss=t,ts=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(s=Ai!==null?{id:Zs,overflow:en}:null,t.memoizedState={dehydrated:e,treeContext:s,retryLane:1073741824},s=xs(18,null,null,0),s.stateNode=e,s.return=t,t.child=s,ss=t,ts=null,!0):!1;default:return!1}}function Tf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ef(t){if(Ye){var e=ts;if(e){var s=e;if(!_y(t,e)){if(Tf(t))throw Error(Z(418));e=Fn(s.nextSibling);var n=ss;e&&_y(t,e)?g1(n,s):(t.flags=t.flags&-4097|2,Ye=!1,ss=t)}}else{if(Tf(t))throw Error(Z(418));t.flags=t.flags&-4097|2,Ye=!1,ss=t}}}function Ry(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;ss=t}function ll(t){if(t!==ss)return!1;if(!Ye)return Ry(t),Ye=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Nf(t.type,t.memoizedProps)),e&&(e=ts)){if(Tf(t))throw y1(),Error(Z(418));for(;e;)g1(t,e),e=Fn(e.nextSibling)}if(Ry(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(Z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var s=t.data;if(s==="/$"){if(e===0){ts=Fn(t.nextSibling);break e}e--}else s!=="$"&&s!=="$!"&&s!=="$?"||e++}t=t.nextSibling}ts=null}}else ts=ss?Fn(t.stateNode.nextSibling):null;return!0}function y1(){for(var t=ts;t;)t=Fn(t.nextSibling)}function Fr(){ts=ss=null,Ye=!1}function np(t){Ls===null?Ls=[t]:Ls.push(t)}var zP=pn.ReactCurrentBatchConfig;function pa(t,e,s){if(t=s.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(Z(309));var n=s.stateNode}if(!n)throw Error(Z(147,t));var i=n,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var l=i.refs;o===null?delete l[a]:l[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error(Z(284));if(!s._owner)throw Error(Z(290,t))}return t}function cl(t,e){throw t=Object.prototype.toString.call(e),Error(Z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function My(t){var e=t._init;return e(t._payload)}function v1(t){function e(m,x){if(t){var S=m.deletions;S===null?(m.deletions=[x],m.flags|=16):S.push(x)}}function s(m,x){if(!t)return null;for(;x!==null;)e(m,x),x=x.sibling;return null}function n(m,x){for(m=new Map;x!==null;)x.key!==null?m.set(x.key,x):m.set(x.index,x),x=x.sibling;return m}function i(m,x){return m=Vn(m,x),m.index=0,m.sibling=null,m}function a(m,x,S){return m.index=S,t?(S=m.alternate,S!==null?(S=S.index,S<x?(m.flags|=2,x):S):(m.flags|=2,x)):(m.flags|=1048576,x)}function o(m){return t&&m.alternate===null&&(m.flags|=2),m}function l(m,x,S,N){return x===null||x.tag!==6?(x=Uh(S,m.mode,N),x.return=m,x):(x=i(x,S),x.return=m,x)}function c(m,x,S,N){var j=S.type;return j===hr?h(m,x,S.props.children,N,S.key):x!==null&&(x.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===jn&&My(j)===x.type)?(N=i(x,S.props),N.ref=pa(m,x,S),N.return=m,N):(N=Ul(S.type,S.key,S.props,null,m.mode,N),N.ref=pa(m,x,S),N.return=m,N)}function u(m,x,S,N){return x===null||x.tag!==4||x.stateNode.containerInfo!==S.containerInfo||x.stateNode.implementation!==S.implementation?(x=Wh(S,m.mode,N),x.return=m,x):(x=i(x,S.children||[]),x.return=m,x)}function h(m,x,S,N,j){return x===null||x.tag!==7?(x=Ti(S,m.mode,N,j),x.return=m,x):(x=i(x,S),x.return=m,x)}function d(m,x,S){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Uh(""+x,m.mode,S),x.return=m,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Jo:return S=Ul(x.type,x.key,x.props,null,m.mode,S),S.ref=pa(m,null,x),S.return=m,S;case ur:return x=Wh(x,m.mode,S),x.return=m,x;case jn:var N=x._init;return d(m,N(x._payload),S)}if(Na(x)||ua(x))return x=Ti(x,m.mode,S,null),x.return=m,x;cl(m,x)}return null}function f(m,x,S,N){var j=x!==null?x.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return j!==null?null:l(m,x,""+S,N);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Jo:return S.key===j?c(m,x,S,N):null;case ur:return S.key===j?u(m,x,S,N):null;case jn:return j=S._init,f(m,x,j(S._payload),N)}if(Na(S)||ua(S))return j!==null?null:h(m,x,S,N,null);cl(m,S)}return null}function y(m,x,S,N,j){if(typeof N=="string"&&N!==""||typeof N=="number")return m=m.get(S)||null,l(x,m,""+N,j);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Jo:return m=m.get(N.key===null?S:N.key)||null,c(x,m,N,j);case ur:return m=m.get(N.key===null?S:N.key)||null,u(x,m,N,j);case jn:var P=N._init;return y(m,x,S,P(N._payload),j)}if(Na(N)||ua(N))return m=m.get(S)||null,h(x,m,N,j,null);cl(x,N)}return null}function p(m,x,S,N){for(var j=null,P=null,E=x,T=x=0,R=null;E!==null&&T<S.length;T++){E.index>T?(R=E,E=null):R=E.sibling;var M=f(m,E,S[T],N);if(M===null){E===null&&(E=R);break}t&&E&&M.alternate===null&&e(m,E),x=a(M,x,T),P===null?j=M:P.sibling=M,P=M,E=R}if(T===S.length)return s(m,E),Ye&&di(m,T),j;if(E===null){for(;T<S.length;T++)E=d(m,S[T],N),E!==null&&(x=a(E,x,T),P===null?j=E:P.sibling=E,P=E);return Ye&&di(m,T),j}for(E=n(m,E);T<S.length;T++)R=y(E,m,T,S[T],N),R!==null&&(t&&R.alternate!==null&&E.delete(R.key===null?T:R.key),x=a(R,x,T),P===null?j=R:P.sibling=R,P=R);return t&&E.forEach(function(_){return e(m,_)}),Ye&&di(m,T),j}function w(m,x,S,N){var j=ua(S);if(typeof j!="function")throw Error(Z(150));if(S=j.call(S),S==null)throw Error(Z(151));for(var P=j=null,E=x,T=x=0,R=null,M=S.next();E!==null&&!M.done;T++,M=S.next()){E.index>T?(R=E,E=null):R=E.sibling;var _=f(m,E,M.value,N);if(_===null){E===null&&(E=R);break}t&&E&&_.alternate===null&&e(m,E),x=a(_,x,T),P===null?j=_:P.sibling=_,P=_,E=R}if(M.done)return s(m,E),Ye&&di(m,T),j;if(E===null){for(;!M.done;T++,M=S.next())M=d(m,M.value,N),M!==null&&(x=a(M,x,T),P===null?j=M:P.sibling=M,P=M);return Ye&&di(m,T),j}for(E=n(m,E);!M.done;T++,M=S.next())M=y(E,m,T,M.value,N),M!==null&&(t&&M.alternate!==null&&E.delete(M.key===null?T:M.key),x=a(M,x,T),P===null?j=M:P.sibling=M,P=M);return t&&E.forEach(function(O){return e(m,O)}),Ye&&di(m,T),j}function g(m,x,S,N){if(typeof S=="object"&&S!==null&&S.type===hr&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case Jo:e:{for(var j=S.key,P=x;P!==null;){if(P.key===j){if(j=S.type,j===hr){if(P.tag===7){s(m,P.sibling),x=i(P,S.props.children),x.return=m,m=x;break e}}else if(P.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===jn&&My(j)===P.type){s(m,P.sibling),x=i(P,S.props),x.ref=pa(m,P,S),x.return=m,m=x;break e}s(m,P);break}else e(m,P);P=P.sibling}S.type===hr?(x=Ti(S.props.children,m.mode,N,S.key),x.return=m,m=x):(N=Ul(S.type,S.key,S.props,null,m.mode,N),N.ref=pa(m,x,S),N.return=m,m=N)}return o(m);case ur:e:{for(P=S.key;x!==null;){if(x.key===P)if(x.tag===4&&x.stateNode.containerInfo===S.containerInfo&&x.stateNode.implementation===S.implementation){s(m,x.sibling),x=i(x,S.children||[]),x.return=m,m=x;break e}else{s(m,x);break}else e(m,x);x=x.sibling}x=Wh(S,m.mode,N),x.return=m,m=x}return o(m);case jn:return P=S._init,g(m,x,P(S._payload),N)}if(Na(S))return p(m,x,S,N);if(ua(S))return w(m,x,S,N);cl(m,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,x!==null&&x.tag===6?(s(m,x.sibling),x=i(x,S),x.return=m,m=x):(s(m,x),x=Uh(S,m.mode,N),x.return=m,m=x),o(m)):s(m,x)}return g}var Br=v1(!0),x1=v1(!1),yc=ei(null),vc=null,xr=null,ip=null;function rp(){ip=xr=vc=null}function ap(t){var e=yc.current;Ue(yc),t._currentValue=e}function Lf(t,e,s){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===s)break;t=t.return}}function Rr(t,e){vc=t,ip=xr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ut=!0),t.firstContext=null)}function bs(t){var e=t._currentValue;if(ip!==t)if(t={context:t,memoizedValue:e,next:null},xr===null){if(vc===null)throw Error(Z(308));xr=t,vc.dependencies={lanes:0,firstContext:t}}else xr=xr.next=t;return e}var Si=null;function op(t){Si===null?Si=[t]:Si.push(t)}function w1(t,e,s,n){var i=e.interleaved;return i===null?(s.next=s,op(e)):(s.next=i.next,i.next=s),e.interleaved=s,hn(t,n)}function hn(t,e){t.lanes|=e;var s=t.alternate;for(s!==null&&(s.lanes|=e),s=t,t=t.return;t!==null;)t.childLanes|=e,s=t.alternate,s!==null&&(s.childLanes|=e),s=t,t=t.return;return s.tag===3?s.stateNode:null}var Nn=!1;function lp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function S1(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function rn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Bn(t,e,s){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,je&2){var i=n.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),n.pending=e,hn(t,s)}return i=n.interleaved,i===null?(e.next=e,op(n)):(e.next=i.next,i.next=e),n.interleaved=e,hn(t,s)}function Dl(t,e,s){if(e=e.updateQueue,e!==null&&(e=e.shared,(s&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,s|=n,e.lanes=s,qm(t,s)}}function Iy(t,e){var s=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,s===n)){var i=null,a=null;if(s=s.firstBaseUpdate,s!==null){do{var o={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};a===null?i=a=o:a=a.next=o,s=s.next}while(s!==null);a===null?i=a=e:a=a.next=e}else i=a=e;s={baseState:n.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:n.shared,effects:n.effects},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=e:t.next=e,s.lastBaseUpdate=e}function xc(t,e,s,n){var i=t.updateQueue;Nn=!1;var a=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var c=l,u=c.next;c.next=null,o===null?a=u:o.next=u,o=c;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=c))}if(a!==null){var d=i.baseState;o=0,h=u=c=null,l=a;do{var f=l.lane,y=l.eventTime;if((n&f)===f){h!==null&&(h=h.next={eventTime:y,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var p=t,w=l;switch(f=e,y=s,w.tag){case 1:if(p=w.payload,typeof p=="function"){d=p.call(y,d,f);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=w.payload,f=typeof p=="function"?p.call(y,d,f):p,f==null)break e;d=Je({},d,f);break e;case 2:Nn=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[l]:f.push(l))}else y={eventTime:y,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(u=h=y,c=d):h=h.next=y,o|=f;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;f=l,l=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(h===null&&(c=d),i.baseState=c,i.firstBaseUpdate=u,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else a===null&&(i.shared.lanes=0);Di|=o,t.lanes=o,t.memoizedState=d}}function Ay(t,e,s){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],i=n.callback;if(i!==null){if(n.callback=null,n=s,typeof i!="function")throw Error(Z(191,i));i.call(n)}}}var Mo={},Ws=ei(Mo),co=ei(Mo),uo=ei(Mo);function bi(t){if(t===Mo)throw Error(Z(174));return t}function cp(t,e){switch(Fe(uo,e),Fe(co,t),Fe(Ws,Mo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:uf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=uf(e,t)}Ue(Ws),Fe(Ws,e)}function $r(){Ue(Ws),Ue(co),Ue(uo)}function b1(t){bi(uo.current);var e=bi(Ws.current),s=uf(e,t.type);e!==s&&(Fe(co,t),Fe(Ws,s))}function up(t){co.current===t&&(Ue(Ws),Ue(co))}var Ge=ei(0);function wc(t){for(var e=t;e!==null;){if(e.tag===13){var s=e.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Dh=[];function hp(){for(var t=0;t<Dh.length;t++)Dh[t]._workInProgressVersionPrimary=null;Dh.length=0}var Fl=pn.ReactCurrentDispatcher,Fh=pn.ReactCurrentBatchConfig,Oi=0,Ke=null,ct=null,ht=null,Sc=!1,Da=!1,ho=0,VP=0;function jt(){throw Error(Z(321))}function dp(t,e){if(e===null)return!1;for(var s=0;s<e.length&&s<t.length;s++)if(!As(t[s],e[s]))return!1;return!0}function fp(t,e,s,n,i,a){if(Oi=a,Ke=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Fl.current=t===null||t.memoizedState===null?YP:qP,t=s(n,i),Da){a=0;do{if(Da=!1,ho=0,25<=a)throw Error(Z(301));a+=1,ht=ct=null,e.updateQueue=null,Fl.current=GP,t=s(n,i)}while(Da)}if(Fl.current=bc,e=ct!==null&&ct.next!==null,Oi=0,ht=ct=Ke=null,Sc=!1,e)throw Error(Z(300));return t}function mp(){var t=ho!==0;return ho=0,t}function zs(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ht===null?Ke.memoizedState=ht=t:ht=ht.next=t,ht}function js(){if(ct===null){var t=Ke.alternate;t=t!==null?t.memoizedState:null}else t=ct.next;var e=ht===null?Ke.memoizedState:ht.next;if(e!==null)ht=e,ct=t;else{if(t===null)throw Error(Z(310));ct=t,t={memoizedState:ct.memoizedState,baseState:ct.baseState,baseQueue:ct.baseQueue,queue:ct.queue,next:null},ht===null?Ke.memoizedState=ht=t:ht=ht.next=t}return ht}function fo(t,e){return typeof e=="function"?e(t):e}function Bh(t){var e=js(),s=e.queue;if(s===null)throw Error(Z(311));s.lastRenderedReducer=t;var n=ct,i=n.baseQueue,a=s.pending;if(a!==null){if(i!==null){var o=i.next;i.next=a.next,a.next=o}n.baseQueue=i=a,s.pending=null}if(i!==null){a=i.next,n=n.baseState;var l=o=null,c=null,u=a;do{var h=u.lane;if((Oi&h)===h)c!==null&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:t(n,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};c===null?(l=c=d,o=n):c=c.next=d,Ke.lanes|=h,Di|=h}u=u.next}while(u!==null&&u!==a);c===null?o=n:c.next=l,As(n,e.memoizedState)||(Ut=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=c,s.lastRenderedState=n}if(t=s.interleaved,t!==null){i=t;do a=i.lane,Ke.lanes|=a,Di|=a,i=i.next;while(i!==t)}else i===null&&(s.lanes=0);return[e.memoizedState,s.dispatch]}function $h(t){var e=js(),s=e.queue;if(s===null)throw Error(Z(311));s.lastRenderedReducer=t;var n=s.dispatch,i=s.pending,a=e.memoizedState;if(i!==null){s.pending=null;var o=i=i.next;do a=t(a,o.action),o=o.next;while(o!==i);As(a,e.memoizedState)||(Ut=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),s.lastRenderedState=a}return[a,n]}function j1(){}function N1(t,e){var s=Ke,n=js(),i=e(),a=!As(n.memoizedState,i);if(a&&(n.memoizedState=i,Ut=!0),n=n.queue,pp(P1.bind(null,s,n,t),[t]),n.getSnapshot!==e||a||ht!==null&&ht.memoizedState.tag&1){if(s.flags|=2048,mo(9,C1.bind(null,s,n,i,e),void 0,null),ft===null)throw Error(Z(349));Oi&30||k1(s,e,i)}return i}function k1(t,e,s){t.flags|=16384,t={getSnapshot:e,value:s},e=Ke.updateQueue,e===null?(e={lastEffect:null,stores:null},Ke.updateQueue=e,e.stores=[t]):(s=e.stores,s===null?e.stores=[t]:s.push(t))}function C1(t,e,s,n){e.value=s,e.getSnapshot=n,T1(e)&&E1(t)}function P1(t,e,s){return s(function(){T1(e)&&E1(t)})}function T1(t){var e=t.getSnapshot;t=t.value;try{var s=e();return!As(t,s)}catch{return!0}}function E1(t){var e=hn(t,1);e!==null&&Ms(e,t,1,-1)}function Oy(t){var e=zs();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fo,lastRenderedState:t},e.queue=t,t=t.dispatch=HP.bind(null,Ke,t),[e.memoizedState,t]}function mo(t,e,s,n){return t={tag:t,create:e,destroy:s,deps:n,next:null},e=Ke.updateQueue,e===null?(e={lastEffect:null,stores:null},Ke.updateQueue=e,e.lastEffect=t.next=t):(s=e.lastEffect,s===null?e.lastEffect=t.next=t:(n=s.next,s.next=t,t.next=n,e.lastEffect=t)),t}function L1(){return js().memoizedState}function Bl(t,e,s,n){var i=zs();Ke.flags|=t,i.memoizedState=mo(1|e,s,void 0,n===void 0?null:n)}function lu(t,e,s,n){var i=js();n=n===void 0?null:n;var a=void 0;if(ct!==null){var o=ct.memoizedState;if(a=o.destroy,n!==null&&dp(n,o.deps)){i.memoizedState=mo(e,s,a,n);return}}Ke.flags|=t,i.memoizedState=mo(1|e,s,a,n)}function Dy(t,e){return Bl(8390656,8,t,e)}function pp(t,e){return lu(2048,8,t,e)}function _1(t,e){return lu(4,2,t,e)}function R1(t,e){return lu(4,4,t,e)}function M1(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function I1(t,e,s){return s=s!=null?s.concat([t]):null,lu(4,4,M1.bind(null,e,t),s)}function gp(){}function A1(t,e){var s=js();e=e===void 0?null:e;var n=s.memoizedState;return n!==null&&e!==null&&dp(e,n[1])?n[0]:(s.memoizedState=[t,e],t)}function O1(t,e){var s=js();e=e===void 0?null:e;var n=s.memoizedState;return n!==null&&e!==null&&dp(e,n[1])?n[0]:(t=t(),s.memoizedState=[t,e],t)}function D1(t,e,s){return Oi&21?(As(s,e)||(s=Vw(),Ke.lanes|=s,Di|=s,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ut=!0),t.memoizedState=s)}function UP(t,e){var s=Le;Le=s!==0&&4>s?s:4,t(!0);var n=Fh.transition;Fh.transition={};try{t(!1),e()}finally{Le=s,Fh.transition=n}}function F1(){return js().memoizedState}function WP(t,e,s){var n=zn(t);if(s={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null},B1(t))$1(e,s);else if(s=w1(t,e,s,n),s!==null){var i=At();Ms(s,t,n,i),z1(s,e,n)}}function HP(t,e,s){var n=zn(t),i={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null};if(B1(t))$1(e,i);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,l=a(o,s);if(i.hasEagerState=!0,i.eagerState=l,As(l,o)){var c=e.interleaved;c===null?(i.next=i,op(e)):(i.next=c.next,c.next=i),e.interleaved=i;return}}catch{}finally{}s=w1(t,e,i,n),s!==null&&(i=At(),Ms(s,t,n,i),z1(s,e,n))}}function B1(t){var e=t.alternate;return t===Ke||e!==null&&e===Ke}function $1(t,e){Da=Sc=!0;var s=t.pending;s===null?e.next=e:(e.next=s.next,s.next=e),t.pending=e}function z1(t,e,s){if(s&4194240){var n=e.lanes;n&=t.pendingLanes,s|=n,e.lanes=s,qm(t,s)}}var bc={readContext:bs,useCallback:jt,useContext:jt,useEffect:jt,useImperativeHandle:jt,useInsertionEffect:jt,useLayoutEffect:jt,useMemo:jt,useReducer:jt,useRef:jt,useState:jt,useDebugValue:jt,useDeferredValue:jt,useTransition:jt,useMutableSource:jt,useSyncExternalStore:jt,useId:jt,unstable_isNewReconciler:!1},YP={readContext:bs,useCallback:function(t,e){return zs().memoizedState=[t,e===void 0?null:e],t},useContext:bs,useEffect:Dy,useImperativeHandle:function(t,e,s){return s=s!=null?s.concat([t]):null,Bl(4194308,4,M1.bind(null,e,t),s)},useLayoutEffect:function(t,e){return Bl(4194308,4,t,e)},useInsertionEffect:function(t,e){return Bl(4,2,t,e)},useMemo:function(t,e){var s=zs();return e=e===void 0?null:e,t=t(),s.memoizedState=[t,e],t},useReducer:function(t,e,s){var n=zs();return e=s!==void 0?s(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=WP.bind(null,Ke,t),[n.memoizedState,t]},useRef:function(t){var e=zs();return t={current:t},e.memoizedState=t},useState:Oy,useDebugValue:gp,useDeferredValue:function(t){return zs().memoizedState=t},useTransition:function(){var t=Oy(!1),e=t[0];return t=UP.bind(null,t[1]),zs().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,s){var n=Ke,i=zs();if(Ye){if(s===void 0)throw Error(Z(407));s=s()}else{if(s=e(),ft===null)throw Error(Z(349));Oi&30||k1(n,e,s)}i.memoizedState=s;var a={value:s,getSnapshot:e};return i.queue=a,Dy(P1.bind(null,n,a,t),[t]),n.flags|=2048,mo(9,C1.bind(null,n,a,s,e),void 0,null),s},useId:function(){var t=zs(),e=ft.identifierPrefix;if(Ye){var s=en,n=Zs;s=(n&~(1<<32-Rs(n)-1)).toString(32)+s,e=":"+e+"R"+s,s=ho++,0<s&&(e+="H"+s.toString(32)),e+=":"}else s=VP++,e=":"+e+"r"+s.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},qP={readContext:bs,useCallback:A1,useContext:bs,useEffect:pp,useImperativeHandle:I1,useInsertionEffect:_1,useLayoutEffect:R1,useMemo:O1,useReducer:Bh,useRef:L1,useState:function(){return Bh(fo)},useDebugValue:gp,useDeferredValue:function(t){var e=js();return D1(e,ct.memoizedState,t)},useTransition:function(){var t=Bh(fo)[0],e=js().memoizedState;return[t,e]},useMutableSource:j1,useSyncExternalStore:N1,useId:F1,unstable_isNewReconciler:!1},GP={readContext:bs,useCallback:A1,useContext:bs,useEffect:pp,useImperativeHandle:I1,useInsertionEffect:_1,useLayoutEffect:R1,useMemo:O1,useReducer:$h,useRef:L1,useState:function(){return $h(fo)},useDebugValue:gp,useDeferredValue:function(t){var e=js();return ct===null?e.memoizedState=t:D1(e,ct.memoizedState,t)},useTransition:function(){var t=$h(fo)[0],e=js().memoizedState;return[t,e]},useMutableSource:j1,useSyncExternalStore:N1,useId:F1,unstable_isNewReconciler:!1};function Ps(t,e){if(t&&t.defaultProps){e=Je({},e),t=t.defaultProps;for(var s in t)e[s]===void 0&&(e[s]=t[s]);return e}return e}function _f(t,e,s,n){e=t.memoizedState,s=s(n,e),s=s==null?e:Je({},e,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var cu={isMounted:function(t){return(t=t._reactInternals)?Xi(t)===t:!1},enqueueSetState:function(t,e,s){t=t._reactInternals;var n=At(),i=zn(t),a=rn(n,i);a.payload=e,s!=null&&(a.callback=s),e=Bn(t,a,i),e!==null&&(Ms(e,t,i,n),Dl(e,t,i))},enqueueReplaceState:function(t,e,s){t=t._reactInternals;var n=At(),i=zn(t),a=rn(n,i);a.tag=1,a.payload=e,s!=null&&(a.callback=s),e=Bn(t,a,i),e!==null&&(Ms(e,t,i,n),Dl(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var s=At(),n=zn(t),i=rn(s,n);i.tag=2,e!=null&&(i.callback=e),e=Bn(t,i,n),e!==null&&(Ms(e,t,n,s),Dl(e,t,n))}};function Fy(t,e,s,n,i,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,a,o):e.prototype&&e.prototype.isPureReactComponent?!ro(s,n)||!ro(i,a):!0}function V1(t,e,s){var n=!1,i=qn,a=e.contextType;return typeof a=="object"&&a!==null?a=bs(a):(i=Yt(e)?Ii:Et.current,n=e.contextTypes,a=(n=n!=null)?Dr(t,i):qn),e=new e(s,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=cu,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=a),e}function By(t,e,s,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(s,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(s,n),e.state!==t&&cu.enqueueReplaceState(e,e.state,null)}function Rf(t,e,s,n){var i=t.stateNode;i.props=s,i.state=t.memoizedState,i.refs={},lp(t);var a=e.contextType;typeof a=="object"&&a!==null?i.context=bs(a):(a=Yt(e)?Ii:Et.current,i.context=Dr(t,a)),i.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(_f(t,e,a,s),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&cu.enqueueReplaceState(i,i.state,null),xc(t,s,i,n),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function zr(t,e){try{var s="",n=e;do s+=b2(n),n=n.return;while(n);var i=s}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:i,digest:null}}function zh(t,e,s){return{value:t,source:null,stack:s??null,digest:e??null}}function Mf(t,e){try{console.error(e.value)}catch(s){setTimeout(function(){throw s})}}var QP=typeof WeakMap=="function"?WeakMap:Map;function U1(t,e,s){s=rn(-1,s),s.tag=3,s.payload={element:null};var n=e.value;return s.callback=function(){Nc||(Nc=!0,Uf=n),Mf(t,e)},s}function W1(t,e,s){s=rn(-1,s),s.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var i=e.value;s.payload=function(){return n(i)},s.callback=function(){Mf(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(s.callback=function(){Mf(t,e),typeof n!="function"&&($n===null?$n=new Set([this]):$n.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),s}function $y(t,e,s){var n=t.pingCache;if(n===null){n=t.pingCache=new QP;var i=new Set;n.set(e,i)}else i=n.get(e),i===void 0&&(i=new Set,n.set(e,i));i.has(s)||(i.add(s),t=cT.bind(null,t,e,s),e.then(t,t))}function zy(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Vy(t,e,s,n,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(e=rn(-1,1),e.tag=2,Bn(s,e,1))),s.lanes|=1),t)}var KP=pn.ReactCurrentOwner,Ut=!1;function Rt(t,e,s,n){e.child=t===null?x1(e,null,s,n):Br(e,t.child,s,n)}function Uy(t,e,s,n,i){s=s.render;var a=e.ref;return Rr(e,i),n=fp(t,e,s,n,a,i),s=mp(),t!==null&&!Ut?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,dn(t,e,i)):(Ye&&s&&tp(e),e.flags|=1,Rt(t,e,n,i),e.child)}function Wy(t,e,s,n,i){if(t===null){var a=s.type;return typeof a=="function"&&!Np(a)&&a.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(e.tag=15,e.type=a,H1(t,e,a,n,i)):(t=Ul(s.type,null,n,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&i)){var o=a.memoizedProps;if(s=s.compare,s=s!==null?s:ro,s(o,n)&&t.ref===e.ref)return dn(t,e,i)}return e.flags|=1,t=Vn(a,n),t.ref=e.ref,t.return=e,e.child=t}function H1(t,e,s,n,i){if(t!==null){var a=t.memoizedProps;if(ro(a,n)&&t.ref===e.ref)if(Ut=!1,e.pendingProps=n=a,(t.lanes&i)!==0)t.flags&131072&&(Ut=!0);else return e.lanes=t.lanes,dn(t,e,i)}return If(t,e,s,n,i)}function Y1(t,e,s){var n=e.pendingProps,i=n.children,a=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Fe(Sr,es),es|=s;else{if(!(s&1073741824))return t=a!==null?a.baseLanes|s:s,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Fe(Sr,es),es|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:s,Fe(Sr,es),es|=n}else a!==null?(n=a.baseLanes|s,e.memoizedState=null):n=s,Fe(Sr,es),es|=n;return Rt(t,e,i,s),e.child}function q1(t,e){var s=e.ref;(t===null&&s!==null||t!==null&&t.ref!==s)&&(e.flags|=512,e.flags|=2097152)}function If(t,e,s,n,i){var a=Yt(s)?Ii:Et.current;return a=Dr(e,a),Rr(e,i),s=fp(t,e,s,n,a,i),n=mp(),t!==null&&!Ut?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,dn(t,e,i)):(Ye&&n&&tp(e),e.flags|=1,Rt(t,e,s,i),e.child)}function Hy(t,e,s,n,i){if(Yt(s)){var a=!0;mc(e)}else a=!1;if(Rr(e,i),e.stateNode===null)$l(t,e),V1(e,s,n),Rf(e,s,n,i),n=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,u=s.contextType;typeof u=="object"&&u!==null?u=bs(u):(u=Yt(s)?Ii:Et.current,u=Dr(e,u));var h=s.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==u)&&By(e,o,n,u),Nn=!1;var f=e.memoizedState;o.state=f,xc(e,n,o,i),c=e.memoizedState,l!==n||f!==c||Ht.current||Nn?(typeof h=="function"&&(_f(e,s,h,n),c=e.memoizedState),(l=Nn||Fy(e,s,l,n,f,c,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),o.props=n,o.state=c,o.context=u,n=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,S1(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:Ps(e.type,l),o.props=u,d=e.pendingProps,f=o.context,c=s.contextType,typeof c=="object"&&c!==null?c=bs(c):(c=Yt(s)?Ii:Et.current,c=Dr(e,c));var y=s.getDerivedStateFromProps;(h=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==d||f!==c)&&By(e,o,n,c),Nn=!1,f=e.memoizedState,o.state=f,xc(e,n,o,i);var p=e.memoizedState;l!==d||f!==p||Ht.current||Nn?(typeof y=="function"&&(_f(e,s,y,n),p=e.memoizedState),(u=Nn||Fy(e,s,u,n,f,p,c)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,p,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,p,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=p),o.props=n,o.state=p,o.context=c,n=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),n=!1)}return Af(t,e,s,n,a,i)}function Af(t,e,s,n,i,a){q1(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return i&&Ly(e,s,!1),dn(t,e,a);n=e.stateNode,KP.current=e;var l=o&&typeof s.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=Br(e,t.child,null,a),e.child=Br(e,null,l,a)):Rt(t,e,l,a),e.memoizedState=n.state,i&&Ly(e,s,!0),e.child}function G1(t){var e=t.stateNode;e.pendingContext?Ey(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Ey(t,e.context,!1),cp(t,e.containerInfo)}function Yy(t,e,s,n,i){return Fr(),np(i),e.flags|=256,Rt(t,e,s,n),e.child}var Of={dehydrated:null,treeContext:null,retryLane:0};function Df(t){return{baseLanes:t,cachePool:null,transitions:null}}function Q1(t,e,s){var n=e.pendingProps,i=Ge.current,a=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Fe(Ge,i&1),t===null)return Ef(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,a?(n=e.mode,a=e.child,o={mode:"hidden",children:o},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=du(o,n,0,null),t=Ti(t,n,s,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=Df(s),e.memoizedState=Of,t):yp(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return XP(t,e,o,n,l,i,s);if(a){a=n.fallback,o=e.mode,i=t.child,l=i.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&e.child!==i?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=Vn(i,c),n.subtreeFlags=i.subtreeFlags&14680064),l!==null?a=Vn(l,a):(a=Ti(a,o,s,null),a.flags|=2),a.return=e,n.return=e,n.sibling=a,e.child=n,n=a,a=e.child,o=t.child.memoizedState,o=o===null?Df(s):{baseLanes:o.baseLanes|s,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~s,e.memoizedState=Of,n}return a=t.child,t=a.sibling,n=Vn(a,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=s),n.return=e,n.sibling=null,t!==null&&(s=e.deletions,s===null?(e.deletions=[t],e.flags|=16):s.push(t)),e.child=n,e.memoizedState=null,n}function yp(t,e){return e=du({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ul(t,e,s,n){return n!==null&&np(n),Br(e,t.child,null,s),t=yp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function XP(t,e,s,n,i,a,o){if(s)return e.flags&256?(e.flags&=-257,n=zh(Error(Z(422))),ul(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=n.fallback,i=e.mode,n=du({mode:"visible",children:n.children},i,0,null),a=Ti(a,i,o,null),a.flags|=2,n.return=e,a.return=e,n.sibling=a,e.child=n,e.mode&1&&Br(e,t.child,null,o),e.child.memoizedState=Df(o),e.memoizedState=Of,a);if(!(e.mode&1))return ul(t,e,o,null);if(i.data==="$!"){if(n=i.nextSibling&&i.nextSibling.dataset,n)var l=n.dgst;return n=l,a=Error(Z(419)),n=zh(a,n,void 0),ul(t,e,o,n)}if(l=(o&t.childLanes)!==0,Ut||l){if(n=ft,n!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(n.suspendedLanes|o)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,hn(t,i),Ms(n,t,i,-1))}return jp(),n=zh(Error(Z(421))),ul(t,e,o,n)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=uT.bind(null,t),i._reactRetry=e,null):(t=a.treeContext,ts=Fn(i.nextSibling),ss=e,Ye=!0,Ls=null,t!==null&&(ys[vs++]=Zs,ys[vs++]=en,ys[vs++]=Ai,Zs=t.id,en=t.overflow,Ai=e),e=yp(e,n.children),e.flags|=4096,e)}function qy(t,e,s){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),Lf(t.return,e,s)}function Vh(t,e,s,n,i){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:s,tailMode:i}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=s,a.tailMode=i)}function K1(t,e,s){var n=e.pendingProps,i=n.revealOrder,a=n.tail;if(Rt(t,e,n.children,s),n=Ge.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&qy(t,s,e);else if(t.tag===19)qy(t,s,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Fe(Ge,n),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(s=e.child,i=null;s!==null;)t=s.alternate,t!==null&&wc(t)===null&&(i=s),s=s.sibling;s=i,s===null?(i=e.child,e.child=null):(i=s.sibling,s.sibling=null),Vh(e,!1,i,s,a);break;case"backwards":for(s=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&wc(t)===null){e.child=i;break}t=i.sibling,i.sibling=s,s=i,i=t}Vh(e,!0,s,null,a);break;case"together":Vh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function $l(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function dn(t,e,s){if(t!==null&&(e.dependencies=t.dependencies),Di|=e.lanes,!(s&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(Z(153));if(e.child!==null){for(t=e.child,s=Vn(t,t.pendingProps),e.child=s,s.return=e;t.sibling!==null;)t=t.sibling,s=s.sibling=Vn(t,t.pendingProps),s.return=e;s.sibling=null}return e.child}function JP(t,e,s){switch(e.tag){case 3:G1(e),Fr();break;case 5:b1(e);break;case 1:Yt(e.type)&&mc(e);break;case 4:cp(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,i=e.memoizedProps.value;Fe(yc,n._currentValue),n._currentValue=i;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Fe(Ge,Ge.current&1),e.flags|=128,null):s&e.child.childLanes?Q1(t,e,s):(Fe(Ge,Ge.current&1),t=dn(t,e,s),t!==null?t.sibling:null);Fe(Ge,Ge.current&1);break;case 19:if(n=(s&e.childLanes)!==0,t.flags&128){if(n)return K1(t,e,s);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Fe(Ge,Ge.current),n)break;return null;case 22:case 23:return e.lanes=0,Y1(t,e,s)}return dn(t,e,s)}var X1,Ff,J1,Z1;X1=function(t,e){for(var s=e.child;s!==null;){if(s.tag===5||s.tag===6)t.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};Ff=function(){};J1=function(t,e,s,n){var i=t.memoizedProps;if(i!==n){t=e.stateNode,bi(Ws.current);var a=null;switch(s){case"input":i=af(t,i),n=af(t,n),a=[];break;case"select":i=Je({},i,{value:void 0}),n=Je({},n,{value:void 0}),a=[];break;case"textarea":i=cf(t,i),n=cf(t,n),a=[];break;default:typeof i.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=dc)}hf(s,n);var o;s=null;for(u in i)if(!n.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(s||(s={}),s[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(Ja.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in n){var c=n[u];if(l=i!=null?i[u]:void 0,n.hasOwnProperty(u)&&c!==l&&(c!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(s||(s={}),s[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(s||(s={}),s[o]=c[o])}else s||(a||(a=[]),a.push(u,s)),s=c;else u==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(a=a||[]).push(u,c)):u==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(u,""+c):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(Ja.hasOwnProperty(u)?(c!=null&&u==="onScroll"&&Ve("scroll",t),a||l===c||(a=[])):(a=a||[]).push(u,c))}s&&(a=a||[]).push("style",s);var u=a;(e.updateQueue=u)&&(e.flags|=4)}};Z1=function(t,e,s,n){s!==n&&(e.flags|=4)};function ga(t,e){if(!Ye)switch(t.tailMode){case"hidden":e=t.tail;for(var s=null;e!==null;)e.alternate!==null&&(s=e),e=e.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var n=null;s!==null;)s.alternate!==null&&(n=s),s=s.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function Nt(t){var e=t.alternate!==null&&t.alternate.child===t.child,s=0,n=0;if(e)for(var i=t.child;i!==null;)s|=i.lanes|i.childLanes,n|=i.subtreeFlags&14680064,n|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)s|=i.lanes|i.childLanes,n|=i.subtreeFlags,n|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=n,t.childLanes=s,e}function ZP(t,e,s){var n=e.pendingProps;switch(sp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nt(e),null;case 1:return Yt(e.type)&&fc(),Nt(e),null;case 3:return n=e.stateNode,$r(),Ue(Ht),Ue(Et),hp(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(ll(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ls!==null&&(Yf(Ls),Ls=null))),Ff(t,e),Nt(e),null;case 5:up(e);var i=bi(uo.current);if(s=e.type,t!==null&&e.stateNode!=null)J1(t,e,s,n,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(Z(166));return Nt(e),null}if(t=bi(Ws.current),ll(e)){n=e.stateNode,s=e.type;var a=e.memoizedProps;switch(n[Vs]=e,n[lo]=a,t=(e.mode&1)!==0,s){case"dialog":Ve("cancel",n),Ve("close",n);break;case"iframe":case"object":case"embed":Ve("load",n);break;case"video":case"audio":for(i=0;i<Ca.length;i++)Ve(Ca[i],n);break;case"source":Ve("error",n);break;case"img":case"image":case"link":Ve("error",n),Ve("load",n);break;case"details":Ve("toggle",n);break;case"input":sy(n,a),Ve("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},Ve("invalid",n);break;case"textarea":iy(n,a),Ve("invalid",n)}hf(s,a),i=null;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="children"?typeof l=="string"?n.textContent!==l&&(a.suppressHydrationWarning!==!0&&ol(n.textContent,l,t),i=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&ol(n.textContent,l,t),i=["children",""+l]):Ja.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Ve("scroll",n)}switch(s){case"input":Zo(n),ny(n,a,!0);break;case"textarea":Zo(n),ry(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=dc)}n=i,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Pw(s)),t==="http://www.w3.org/1999/xhtml"?s==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(s,{is:n.is}):(t=o.createElement(s),s==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,s),t[Vs]=e,t[lo]=n,X1(t,e,!1,!1),e.stateNode=t;e:{switch(o=df(s,n),s){case"dialog":Ve("cancel",t),Ve("close",t),i=n;break;case"iframe":case"object":case"embed":Ve("load",t),i=n;break;case"video":case"audio":for(i=0;i<Ca.length;i++)Ve(Ca[i],t);i=n;break;case"source":Ve("error",t),i=n;break;case"img":case"image":case"link":Ve("error",t),Ve("load",t),i=n;break;case"details":Ve("toggle",t),i=n;break;case"input":sy(t,n),i=af(t,n),Ve("invalid",t);break;case"option":i=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},i=Je({},n,{value:void 0}),Ve("invalid",t);break;case"textarea":iy(t,n),i=cf(t,n),Ve("invalid",t);break;default:i=n}hf(s,i),l=i;for(a in l)if(l.hasOwnProperty(a)){var c=l[a];a==="style"?Lw(t,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Tw(t,c)):a==="children"?typeof c=="string"?(s!=="textarea"||c!=="")&&Za(t,c):typeof c=="number"&&Za(t,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Ja.hasOwnProperty(a)?c!=null&&a==="onScroll"&&Ve("scroll",t):c!=null&&zm(t,a,c,o))}switch(s){case"input":Zo(t),ny(t,n,!1);break;case"textarea":Zo(t),ry(t);break;case"option":n.value!=null&&t.setAttribute("value",""+Yn(n.value));break;case"select":t.multiple=!!n.multiple,a=n.value,a!=null?Tr(t,!!n.multiple,a,!1):n.defaultValue!=null&&Tr(t,!!n.multiple,n.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=dc)}switch(s){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Nt(e),null;case 6:if(t&&e.stateNode!=null)Z1(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(Z(166));if(s=bi(uo.current),bi(Ws.current),ll(e)){if(n=e.stateNode,s=e.memoizedProps,n[Vs]=e,(a=n.nodeValue!==s)&&(t=ss,t!==null))switch(t.tag){case 3:ol(n.nodeValue,s,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&ol(n.nodeValue,s,(t.mode&1)!==0)}a&&(e.flags|=4)}else n=(s.nodeType===9?s:s.ownerDocument).createTextNode(n),n[Vs]=e,e.stateNode=n}return Nt(e),null;case 13:if(Ue(Ge),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ye&&ts!==null&&e.mode&1&&!(e.flags&128))y1(),Fr(),e.flags|=98560,a=!1;else if(a=ll(e),n!==null&&n.dehydrated!==null){if(t===null){if(!a)throw Error(Z(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(Z(317));a[Vs]=e}else Fr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Nt(e),a=!1}else Ls!==null&&(Yf(Ls),Ls=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=s,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Ge.current&1?ut===0&&(ut=3):jp())),e.updateQueue!==null&&(e.flags|=4),Nt(e),null);case 4:return $r(),Ff(t,e),t===null&&ao(e.stateNode.containerInfo),Nt(e),null;case 10:return ap(e.type._context),Nt(e),null;case 17:return Yt(e.type)&&fc(),Nt(e),null;case 19:if(Ue(Ge),a=e.memoizedState,a===null)return Nt(e),null;if(n=(e.flags&128)!==0,o=a.rendering,o===null)if(n)ga(a,!1);else{if(ut!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=wc(t),o!==null){for(e.flags|=128,ga(a,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=s,s=e.child;s!==null;)a=s,t=n,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),s=s.sibling;return Fe(Ge,Ge.current&1|2),e.child}t=t.sibling}a.tail!==null&&et()>Vr&&(e.flags|=128,n=!0,ga(a,!1),e.lanes=4194304)}else{if(!n)if(t=wc(o),t!==null){if(e.flags|=128,n=!0,s=t.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),ga(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!Ye)return Nt(e),null}else 2*et()-a.renderingStartTime>Vr&&s!==1073741824&&(e.flags|=128,n=!0,ga(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(s=a.last,s!==null?s.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=et(),e.sibling=null,s=Ge.current,Fe(Ge,n?s&1|2:s&1),e):(Nt(e),null);case 22:case 23:return bp(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?es&1073741824&&(Nt(e),e.subtreeFlags&6&&(e.flags|=8192)):Nt(e),null;case 24:return null;case 25:return null}throw Error(Z(156,e.tag))}function eT(t,e){switch(sp(e),e.tag){case 1:return Yt(e.type)&&fc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return $r(),Ue(Ht),Ue(Et),hp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return up(e),null;case 13:if(Ue(Ge),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(Z(340));Fr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ue(Ge),null;case 4:return $r(),null;case 10:return ap(e.type._context),null;case 22:case 23:return bp(),null;case 24:return null;default:return null}}var hl=!1,Ct=!1,tT=typeof WeakSet=="function"?WeakSet:Set,ae=null;function wr(t,e){var s=t.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(n){Ze(t,e,n)}else s.current=null}function Bf(t,e,s){try{s()}catch(n){Ze(t,e,n)}}var Gy=!1;function sT(t,e){if(bf=cc,t=i1(),ep(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var n=s.getSelection&&s.getSelection();if(n&&n.rangeCount!==0){s=n.anchorNode;var i=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{s.nodeType,a.nodeType}catch{s=null;break e}var o=0,l=-1,c=-1,u=0,h=0,d=t,f=null;t:for(;;){for(var y;d!==s||i!==0&&d.nodeType!==3||(l=o+i),d!==a||n!==0&&d.nodeType!==3||(c=o+n),d.nodeType===3&&(o+=d.nodeValue.length),(y=d.firstChild)!==null;)f=d,d=y;for(;;){if(d===t)break t;if(f===s&&++u===i&&(l=o),f===a&&++h===n&&(c=o),(y=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=y}s=l===-1||c===-1?null:{start:l,end:c}}else s=null}s=s||{start:0,end:0}}else s=null;for(jf={focusedElem:t,selectionRange:s},cc=!1,ae=e;ae!==null;)if(e=ae,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,ae=t;else for(;ae!==null;){e=ae;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var w=p.memoizedProps,g=p.memoizedState,m=e.stateNode,x=m.getSnapshotBeforeUpdate(e.elementType===e.type?w:Ps(e.type,w),g);m.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Z(163))}}catch(N){Ze(e,e.return,N)}if(t=e.sibling,t!==null){t.return=e.return,ae=t;break}ae=e.return}return p=Gy,Gy=!1,p}function Fa(t,e,s){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var i=n=n.next;do{if((i.tag&t)===t){var a=i.destroy;i.destroy=void 0,a!==void 0&&Bf(e,s,a)}i=i.next}while(i!==n)}}function uu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var s=e=e.next;do{if((s.tag&t)===t){var n=s.create;s.destroy=n()}s=s.next}while(s!==e)}}function $f(t){var e=t.ref;if(e!==null){var s=t.stateNode;switch(t.tag){case 5:t=s;break;default:t=s}typeof e=="function"?e(t):e.current=t}}function eS(t){var e=t.alternate;e!==null&&(t.alternate=null,eS(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Vs],delete e[lo],delete e[Cf],delete e[FP],delete e[BP])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function tS(t){return t.tag===5||t.tag===3||t.tag===4}function Qy(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||tS(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function zf(t,e,s){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?s.nodeType===8?s.parentNode.insertBefore(t,e):s.insertBefore(t,e):(s.nodeType===8?(e=s.parentNode,e.insertBefore(t,s)):(e=s,e.appendChild(t)),s=s._reactRootContainer,s!=null||e.onclick!==null||(e.onclick=dc));else if(n!==4&&(t=t.child,t!==null))for(zf(t,e,s),t=t.sibling;t!==null;)zf(t,e,s),t=t.sibling}function Vf(t,e,s){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?s.insertBefore(t,e):s.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(Vf(t,e,s),t=t.sibling;t!==null;)Vf(t,e,s),t=t.sibling}var yt=null,Es=!1;function wn(t,e,s){for(s=s.child;s!==null;)sS(t,e,s),s=s.sibling}function sS(t,e,s){if(Us&&typeof Us.onCommitFiberUnmount=="function")try{Us.onCommitFiberUnmount(su,s)}catch{}switch(s.tag){case 5:Ct||wr(s,e);case 6:var n=yt,i=Es;yt=null,wn(t,e,s),yt=n,Es=i,yt!==null&&(Es?(t=yt,s=s.stateNode,t.nodeType===8?t.parentNode.removeChild(s):t.removeChild(s)):yt.removeChild(s.stateNode));break;case 18:yt!==null&&(Es?(t=yt,s=s.stateNode,t.nodeType===8?Ah(t.parentNode,s):t.nodeType===1&&Ah(t,s),no(t)):Ah(yt,s.stateNode));break;case 4:n=yt,i=Es,yt=s.stateNode.containerInfo,Es=!0,wn(t,e,s),yt=n,Es=i;break;case 0:case 11:case 14:case 15:if(!Ct&&(n=s.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){i=n=n.next;do{var a=i,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&Bf(s,e,o),i=i.next}while(i!==n)}wn(t,e,s);break;case 1:if(!Ct&&(wr(s,e),n=s.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=s.memoizedProps,n.state=s.memoizedState,n.componentWillUnmount()}catch(l){Ze(s,e,l)}wn(t,e,s);break;case 21:wn(t,e,s);break;case 22:s.mode&1?(Ct=(n=Ct)||s.memoizedState!==null,wn(t,e,s),Ct=n):wn(t,e,s);break;default:wn(t,e,s)}}function Ky(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var s=t.stateNode;s===null&&(s=t.stateNode=new tT),e.forEach(function(n){var i=hT.bind(null,t,n);s.has(n)||(s.add(n),n.then(i,i))})}}function ks(t,e){var s=e.deletions;if(s!==null)for(var n=0;n<s.length;n++){var i=s[n];try{var a=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:yt=l.stateNode,Es=!1;break e;case 3:yt=l.stateNode.containerInfo,Es=!0;break e;case 4:yt=l.stateNode.containerInfo,Es=!0;break e}l=l.return}if(yt===null)throw Error(Z(160));sS(a,o,i),yt=null,Es=!1;var c=i.alternate;c!==null&&(c.return=null),i.return=null}catch(u){Ze(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)nS(e,t),e=e.sibling}function nS(t,e){var s=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ks(e,t),Fs(t),n&4){try{Fa(3,t,t.return),uu(3,t)}catch(w){Ze(t,t.return,w)}try{Fa(5,t,t.return)}catch(w){Ze(t,t.return,w)}}break;case 1:ks(e,t),Fs(t),n&512&&s!==null&&wr(s,s.return);break;case 5:if(ks(e,t),Fs(t),n&512&&s!==null&&wr(s,s.return),t.flags&32){var i=t.stateNode;try{Za(i,"")}catch(w){Ze(t,t.return,w)}}if(n&4&&(i=t.stateNode,i!=null)){var a=t.memoizedProps,o=s!==null?s.memoizedProps:a,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&kw(i,a),df(l,o);var u=df(l,a);for(o=0;o<c.length;o+=2){var h=c[o],d=c[o+1];h==="style"?Lw(i,d):h==="dangerouslySetInnerHTML"?Tw(i,d):h==="children"?Za(i,d):zm(i,h,d,u)}switch(l){case"input":of(i,a);break;case"textarea":Cw(i,a);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var y=a.value;y!=null?Tr(i,!!a.multiple,y,!1):f!==!!a.multiple&&(a.defaultValue!=null?Tr(i,!!a.multiple,a.defaultValue,!0):Tr(i,!!a.multiple,a.multiple?[]:"",!1))}i[lo]=a}catch(w){Ze(t,t.return,w)}}break;case 6:if(ks(e,t),Fs(t),n&4){if(t.stateNode===null)throw Error(Z(162));i=t.stateNode,a=t.memoizedProps;try{i.nodeValue=a}catch(w){Ze(t,t.return,w)}}break;case 3:if(ks(e,t),Fs(t),n&4&&s!==null&&s.memoizedState.isDehydrated)try{no(e.containerInfo)}catch(w){Ze(t,t.return,w)}break;case 4:ks(e,t),Fs(t);break;case 13:ks(e,t),Fs(t),i=t.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(wp=et())),n&4&&Ky(t);break;case 22:if(h=s!==null&&s.memoizedState!==null,t.mode&1?(Ct=(u=Ct)||h,ks(e,t),Ct=u):ks(e,t),Fs(t),n&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(ae=t,h=t.child;h!==null;){for(d=ae=h;ae!==null;){switch(f=ae,y=f.child,f.tag){case 0:case 11:case 14:case 15:Fa(4,f,f.return);break;case 1:wr(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){n=f,s=f.return;try{e=n,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(w){Ze(n,s,w)}}break;case 5:wr(f,f.return);break;case 22:if(f.memoizedState!==null){Jy(d);continue}}y!==null?(y.return=f,ae=y):Jy(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{i=d.stateNode,u?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=d.stateNode,c=d.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Ew("display",o))}catch(w){Ze(t,t.return,w)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(w){Ze(t,t.return,w)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ks(e,t),Fs(t),n&4&&Ky(t);break;case 21:break;default:ks(e,t),Fs(t)}}function Fs(t){var e=t.flags;if(e&2){try{e:{for(var s=t.return;s!==null;){if(tS(s)){var n=s;break e}s=s.return}throw Error(Z(160))}switch(n.tag){case 5:var i=n.stateNode;n.flags&32&&(Za(i,""),n.flags&=-33);var a=Qy(t);Vf(t,a,i);break;case 3:case 4:var o=n.stateNode.containerInfo,l=Qy(t);zf(t,l,o);break;default:throw Error(Z(161))}}catch(c){Ze(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function nT(t,e,s){ae=t,iS(t)}function iS(t,e,s){for(var n=(t.mode&1)!==0;ae!==null;){var i=ae,a=i.child;if(i.tag===22&&n){var o=i.memoizedState!==null||hl;if(!o){var l=i.alternate,c=l!==null&&l.memoizedState!==null||Ct;l=hl;var u=Ct;if(hl=o,(Ct=c)&&!u)for(ae=i;ae!==null;)o=ae,c=o.child,o.tag===22&&o.memoizedState!==null?Zy(i):c!==null?(c.return=o,ae=c):Zy(i);for(;a!==null;)ae=a,iS(a),a=a.sibling;ae=i,hl=l,Ct=u}Xy(t)}else i.subtreeFlags&8772&&a!==null?(a.return=i,ae=a):Xy(t)}}function Xy(t){for(;ae!==null;){var e=ae;if(e.flags&8772){var s=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ct||uu(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Ct)if(s===null)n.componentDidMount();else{var i=e.elementType===e.type?s.memoizedProps:Ps(e.type,s.memoizedProps);n.componentDidUpdate(i,s.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&Ay(e,a,n);break;case 3:var o=e.updateQueue;if(o!==null){if(s=null,e.child!==null)switch(e.child.tag){case 5:s=e.child.stateNode;break;case 1:s=e.child.stateNode}Ay(e,o,s)}break;case 5:var l=e.stateNode;if(s===null&&e.flags&4){s=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&s.focus();break;case"img":c.src&&(s.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&no(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Z(163))}Ct||e.flags&512&&$f(e)}catch(f){Ze(e,e.return,f)}}if(e===t){ae=null;break}if(s=e.sibling,s!==null){s.return=e.return,ae=s;break}ae=e.return}}function Jy(t){for(;ae!==null;){var e=ae;if(e===t){ae=null;break}var s=e.sibling;if(s!==null){s.return=e.return,ae=s;break}ae=e.return}}function Zy(t){for(;ae!==null;){var e=ae;try{switch(e.tag){case 0:case 11:case 15:var s=e.return;try{uu(4,e)}catch(c){Ze(e,s,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var i=e.return;try{n.componentDidMount()}catch(c){Ze(e,i,c)}}var a=e.return;try{$f(e)}catch(c){Ze(e,a,c)}break;case 5:var o=e.return;try{$f(e)}catch(c){Ze(e,o,c)}}}catch(c){Ze(e,e.return,c)}if(e===t){ae=null;break}var l=e.sibling;if(l!==null){l.return=e.return,ae=l;break}ae=e.return}}var iT=Math.ceil,jc=pn.ReactCurrentDispatcher,vp=pn.ReactCurrentOwner,Ss=pn.ReactCurrentBatchConfig,je=0,ft=null,ot=null,wt=0,es=0,Sr=ei(0),ut=0,po=null,Di=0,hu=0,xp=0,Ba=null,Vt=null,wp=0,Vr=1/0,Xs=null,Nc=!1,Uf=null,$n=null,dl=!1,Ln=null,kc=0,$a=0,Wf=null,zl=-1,Vl=0;function At(){return je&6?et():zl!==-1?zl:zl=et()}function zn(t){return t.mode&1?je&2&&wt!==0?wt&-wt:zP.transition!==null?(Vl===0&&(Vl=Vw()),Vl):(t=Le,t!==0||(t=window.event,t=t===void 0?16:Qw(t.type)),t):1}function Ms(t,e,s,n){if(50<$a)throw $a=0,Wf=null,Error(Z(185));Lo(t,s,n),(!(je&2)||t!==ft)&&(t===ft&&(!(je&2)&&(hu|=s),ut===4&&Pn(t,wt)),qt(t,n),s===1&&je===0&&!(e.mode&1)&&(Vr=et()+500,ou&&ti()))}function qt(t,e){var s=t.callbackNode;z2(t,e);var n=lc(t,t===ft?wt:0);if(n===0)s!==null&&ly(s),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(s!=null&&ly(s),e===1)t.tag===0?$P(ev.bind(null,t)):m1(ev.bind(null,t)),OP(function(){!(je&6)&&ti()}),s=null;else{switch(Uw(n)){case 1:s=Ym;break;case 4:s=$w;break;case 16:s=oc;break;case 536870912:s=zw;break;default:s=oc}s=dS(s,rS.bind(null,t))}t.callbackPriority=e,t.callbackNode=s}}function rS(t,e){if(zl=-1,Vl=0,je&6)throw Error(Z(327));var s=t.callbackNode;if(Mr()&&t.callbackNode!==s)return null;var n=lc(t,t===ft?wt:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Cc(t,n);else{e=n;var i=je;je|=2;var a=oS();(ft!==t||wt!==e)&&(Xs=null,Vr=et()+500,Pi(t,e));do try{oT();break}catch(l){aS(t,l)}while(!0);rp(),jc.current=a,je=i,ot!==null?e=0:(ft=null,wt=0,e=ut)}if(e!==0){if(e===2&&(i=yf(t),i!==0&&(n=i,e=Hf(t,i))),e===1)throw s=po,Pi(t,0),Pn(t,n),qt(t,et()),s;if(e===6)Pn(t,n);else{if(i=t.current.alternate,!(n&30)&&!rT(i)&&(e=Cc(t,n),e===2&&(a=yf(t),a!==0&&(n=a,e=Hf(t,a))),e===1))throw s=po,Pi(t,0),Pn(t,n),qt(t,et()),s;switch(t.finishedWork=i,t.finishedLanes=n,e){case 0:case 1:throw Error(Z(345));case 2:fi(t,Vt,Xs);break;case 3:if(Pn(t,n),(n&130023424)===n&&(e=wp+500-et(),10<e)){if(lc(t,0)!==0)break;if(i=t.suspendedLanes,(i&n)!==n){At(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=kf(fi.bind(null,t,Vt,Xs),e);break}fi(t,Vt,Xs);break;case 4:if(Pn(t,n),(n&4194240)===n)break;for(e=t.eventTimes,i=-1;0<n;){var o=31-Rs(n);a=1<<o,o=e[o],o>i&&(i=o),n&=~a}if(n=i,n=et()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*iT(n/1960))-n,10<n){t.timeoutHandle=kf(fi.bind(null,t,Vt,Xs),n);break}fi(t,Vt,Xs);break;case 5:fi(t,Vt,Xs);break;default:throw Error(Z(329))}}}return qt(t,et()),t.callbackNode===s?rS.bind(null,t):null}function Hf(t,e){var s=Ba;return t.current.memoizedState.isDehydrated&&(Pi(t,e).flags|=256),t=Cc(t,e),t!==2&&(e=Vt,Vt=s,e!==null&&Yf(e)),t}function Yf(t){Vt===null?Vt=t:Vt.push.apply(Vt,t)}function rT(t){for(var e=t;;){if(e.flags&16384){var s=e.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var n=0;n<s.length;n++){var i=s[n],a=i.getSnapshot;i=i.value;try{if(!As(a(),i))return!1}catch{return!1}}}if(s=e.child,e.subtreeFlags&16384&&s!==null)s.return=e,e=s;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Pn(t,e){for(e&=~xp,e&=~hu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var s=31-Rs(e),n=1<<s;t[s]=-1,e&=~n}}function ev(t){if(je&6)throw Error(Z(327));Mr();var e=lc(t,0);if(!(e&1))return qt(t,et()),null;var s=Cc(t,e);if(t.tag!==0&&s===2){var n=yf(t);n!==0&&(e=n,s=Hf(t,n))}if(s===1)throw s=po,Pi(t,0),Pn(t,e),qt(t,et()),s;if(s===6)throw Error(Z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,fi(t,Vt,Xs),qt(t,et()),null}function Sp(t,e){var s=je;je|=1;try{return t(e)}finally{je=s,je===0&&(Vr=et()+500,ou&&ti())}}function Fi(t){Ln!==null&&Ln.tag===0&&!(je&6)&&Mr();var e=je;je|=1;var s=Ss.transition,n=Le;try{if(Ss.transition=null,Le=1,t)return t()}finally{Le=n,Ss.transition=s,je=e,!(je&6)&&ti()}}function bp(){es=Sr.current,Ue(Sr)}function Pi(t,e){t.finishedWork=null,t.finishedLanes=0;var s=t.timeoutHandle;if(s!==-1&&(t.timeoutHandle=-1,AP(s)),ot!==null)for(s=ot.return;s!==null;){var n=s;switch(sp(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&fc();break;case 3:$r(),Ue(Ht),Ue(Et),hp();break;case 5:up(n);break;case 4:$r();break;case 13:Ue(Ge);break;case 19:Ue(Ge);break;case 10:ap(n.type._context);break;case 22:case 23:bp()}s=s.return}if(ft=t,ot=t=Vn(t.current,null),wt=es=e,ut=0,po=null,xp=hu=Di=0,Vt=Ba=null,Si!==null){for(e=0;e<Si.length;e++)if(s=Si[e],n=s.interleaved,n!==null){s.interleaved=null;var i=n.next,a=s.pending;if(a!==null){var o=a.next;a.next=i,n.next=o}s.pending=n}Si=null}return t}function aS(t,e){do{var s=ot;try{if(rp(),Fl.current=bc,Sc){for(var n=Ke.memoizedState;n!==null;){var i=n.queue;i!==null&&(i.pending=null),n=n.next}Sc=!1}if(Oi=0,ht=ct=Ke=null,Da=!1,ho=0,vp.current=null,s===null||s.return===null){ut=1,po=e,ot=null;break}e:{var a=t,o=s.return,l=s,c=e;if(e=wt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var u=c,h=l,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var y=zy(o);if(y!==null){y.flags&=-257,Vy(y,o,l,a,e),y.mode&1&&$y(a,u,e),e=y,c=u;var p=e.updateQueue;if(p===null){var w=new Set;w.add(c),e.updateQueue=w}else p.add(c);break e}else{if(!(e&1)){$y(a,u,e),jp();break e}c=Error(Z(426))}}else if(Ye&&l.mode&1){var g=zy(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),Vy(g,o,l,a,e),np(zr(c,l));break e}}a=c=zr(c,l),ut!==4&&(ut=2),Ba===null?Ba=[a]:Ba.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var m=U1(a,c,e);Iy(a,m);break e;case 1:l=c;var x=a.type,S=a.stateNode;if(!(a.flags&128)&&(typeof x.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&($n===null||!$n.has(S)))){a.flags|=65536,e&=-e,a.lanes|=e;var N=W1(a,l,e);Iy(a,N);break e}}a=a.return}while(a!==null)}cS(s)}catch(j){e=j,ot===s&&s!==null&&(ot=s=s.return);continue}break}while(!0)}function oS(){var t=jc.current;return jc.current=bc,t===null?bc:t}function jp(){(ut===0||ut===3||ut===2)&&(ut=4),ft===null||!(Di&268435455)&&!(hu&268435455)||Pn(ft,wt)}function Cc(t,e){var s=je;je|=2;var n=oS();(ft!==t||wt!==e)&&(Xs=null,Pi(t,e));do try{aT();break}catch(i){aS(t,i)}while(!0);if(rp(),je=s,jc.current=n,ot!==null)throw Error(Z(261));return ft=null,wt=0,ut}function aT(){for(;ot!==null;)lS(ot)}function oT(){for(;ot!==null&&!R2();)lS(ot)}function lS(t){var e=hS(t.alternate,t,es);t.memoizedProps=t.pendingProps,e===null?cS(t):ot=e,vp.current=null}function cS(t){var e=t;do{var s=e.alternate;if(t=e.return,e.flags&32768){if(s=eT(s,e),s!==null){s.flags&=32767,ot=s;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ut=6,ot=null;return}}else if(s=ZP(s,e,es),s!==null){ot=s;return}if(e=e.sibling,e!==null){ot=e;return}ot=e=t}while(e!==null);ut===0&&(ut=5)}function fi(t,e,s){var n=Le,i=Ss.transition;try{Ss.transition=null,Le=1,lT(t,e,s,n)}finally{Ss.transition=i,Le=n}return null}function lT(t,e,s,n){do Mr();while(Ln!==null);if(je&6)throw Error(Z(327));s=t.finishedWork;var i=t.finishedLanes;if(s===null)return null;if(t.finishedWork=null,t.finishedLanes=0,s===t.current)throw Error(Z(177));t.callbackNode=null,t.callbackPriority=0;var a=s.lanes|s.childLanes;if(V2(t,a),t===ft&&(ot=ft=null,wt=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||dl||(dl=!0,dS(oc,function(){return Mr(),null})),a=(s.flags&15990)!==0,s.subtreeFlags&15990||a){a=Ss.transition,Ss.transition=null;var o=Le;Le=1;var l=je;je|=4,vp.current=null,sT(t,s),nS(s,t),TP(jf),cc=!!bf,jf=bf=null,t.current=s,nT(s),M2(),je=l,Le=o,Ss.transition=a}else t.current=s;if(dl&&(dl=!1,Ln=t,kc=i),a=t.pendingLanes,a===0&&($n=null),O2(s.stateNode),qt(t,et()),e!==null)for(n=t.onRecoverableError,s=0;s<e.length;s++)i=e[s],n(i.value,{componentStack:i.stack,digest:i.digest});if(Nc)throw Nc=!1,t=Uf,Uf=null,t;return kc&1&&t.tag!==0&&Mr(),a=t.pendingLanes,a&1?t===Wf?$a++:($a=0,Wf=t):$a=0,ti(),null}function Mr(){if(Ln!==null){var t=Uw(kc),e=Ss.transition,s=Le;try{if(Ss.transition=null,Le=16>t?16:t,Ln===null)var n=!1;else{if(t=Ln,Ln=null,kc=0,je&6)throw Error(Z(331));var i=je;for(je|=4,ae=t.current;ae!==null;){var a=ae,o=a.child;if(ae.flags&16){var l=a.deletions;if(l!==null){for(var c=0;c<l.length;c++){var u=l[c];for(ae=u;ae!==null;){var h=ae;switch(h.tag){case 0:case 11:case 15:Fa(8,h,a)}var d=h.child;if(d!==null)d.return=h,ae=d;else for(;ae!==null;){h=ae;var f=h.sibling,y=h.return;if(eS(h),h===u){ae=null;break}if(f!==null){f.return=y,ae=f;break}ae=y}}}var p=a.alternate;if(p!==null){var w=p.child;if(w!==null){p.child=null;do{var g=w.sibling;w.sibling=null,w=g}while(w!==null)}}ae=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,ae=o;else e:for(;ae!==null;){if(a=ae,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Fa(9,a,a.return)}var m=a.sibling;if(m!==null){m.return=a.return,ae=m;break e}ae=a.return}}var x=t.current;for(ae=x;ae!==null;){o=ae;var S=o.child;if(o.subtreeFlags&2064&&S!==null)S.return=o,ae=S;else e:for(o=x;ae!==null;){if(l=ae,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:uu(9,l)}}catch(j){Ze(l,l.return,j)}if(l===o){ae=null;break e}var N=l.sibling;if(N!==null){N.return=l.return,ae=N;break e}ae=l.return}}if(je=i,ti(),Us&&typeof Us.onPostCommitFiberRoot=="function")try{Us.onPostCommitFiberRoot(su,t)}catch{}n=!0}return n}finally{Le=s,Ss.transition=e}}return!1}function tv(t,e,s){e=zr(s,e),e=U1(t,e,1),t=Bn(t,e,1),e=At(),t!==null&&(Lo(t,1,e),qt(t,e))}function Ze(t,e,s){if(t.tag===3)tv(t,t,s);else for(;e!==null;){if(e.tag===3){tv(e,t,s);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&($n===null||!$n.has(n))){t=zr(s,t),t=W1(e,t,1),e=Bn(e,t,1),t=At(),e!==null&&(Lo(e,1,t),qt(e,t));break}}e=e.return}}function cT(t,e,s){var n=t.pingCache;n!==null&&n.delete(e),e=At(),t.pingedLanes|=t.suspendedLanes&s,ft===t&&(wt&s)===s&&(ut===4||ut===3&&(wt&130023424)===wt&&500>et()-wp?Pi(t,0):xp|=s),qt(t,e)}function uS(t,e){e===0&&(t.mode&1?(e=sl,sl<<=1,!(sl&130023424)&&(sl=4194304)):e=1);var s=At();t=hn(t,e),t!==null&&(Lo(t,e,s),qt(t,s))}function uT(t){var e=t.memoizedState,s=0;e!==null&&(s=e.retryLane),uS(t,s)}function hT(t,e){var s=0;switch(t.tag){case 13:var n=t.stateNode,i=t.memoizedState;i!==null&&(s=i.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(Z(314))}n!==null&&n.delete(e),uS(t,s)}var hS;hS=function(t,e,s){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ht.current)Ut=!0;else{if(!(t.lanes&s)&&!(e.flags&128))return Ut=!1,JP(t,e,s);Ut=!!(t.flags&131072)}else Ut=!1,Ye&&e.flags&1048576&&p1(e,gc,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;$l(t,e),t=e.pendingProps;var i=Dr(e,Et.current);Rr(e,s),i=fp(null,e,n,t,i,s);var a=mp();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Yt(n)?(a=!0,mc(e)):a=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,lp(e),i.updater=cu,e.stateNode=i,i._reactInternals=e,Rf(e,n,t,s),e=Af(null,e,n,!0,a,s)):(e.tag=0,Ye&&a&&tp(e),Rt(null,e,i,s),e=e.child),e;case 16:n=e.elementType;e:{switch($l(t,e),t=e.pendingProps,i=n._init,n=i(n._payload),e.type=n,i=e.tag=fT(n),t=Ps(n,t),i){case 0:e=If(null,e,n,t,s);break e;case 1:e=Hy(null,e,n,t,s);break e;case 11:e=Uy(null,e,n,t,s);break e;case 14:e=Wy(null,e,n,Ps(n.type,t),s);break e}throw Error(Z(306,n,""))}return e;case 0:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Ps(n,i),If(t,e,n,i,s);case 1:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Ps(n,i),Hy(t,e,n,i,s);case 3:e:{if(G1(e),t===null)throw Error(Z(387));n=e.pendingProps,a=e.memoizedState,i=a.element,S1(t,e),xc(e,n,null,s);var o=e.memoizedState;if(n=o.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){i=zr(Error(Z(423)),e),e=Yy(t,e,n,s,i);break e}else if(n!==i){i=zr(Error(Z(424)),e),e=Yy(t,e,n,s,i);break e}else for(ts=Fn(e.stateNode.containerInfo.firstChild),ss=e,Ye=!0,Ls=null,s=x1(e,null,n,s),e.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Fr(),n===i){e=dn(t,e,s);break e}Rt(t,e,n,s)}e=e.child}return e;case 5:return b1(e),t===null&&Ef(e),n=e.type,i=e.pendingProps,a=t!==null?t.memoizedProps:null,o=i.children,Nf(n,i)?o=null:a!==null&&Nf(n,a)&&(e.flags|=32),q1(t,e),Rt(t,e,o,s),e.child;case 6:return t===null&&Ef(e),null;case 13:return Q1(t,e,s);case 4:return cp(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=Br(e,null,n,s):Rt(t,e,n,s),e.child;case 11:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Ps(n,i),Uy(t,e,n,i,s);case 7:return Rt(t,e,e.pendingProps,s),e.child;case 8:return Rt(t,e,e.pendingProps.children,s),e.child;case 12:return Rt(t,e,e.pendingProps.children,s),e.child;case 10:e:{if(n=e.type._context,i=e.pendingProps,a=e.memoizedProps,o=i.value,Fe(yc,n._currentValue),n._currentValue=o,a!==null)if(As(a.value,o)){if(a.children===i.children&&!Ht.current){e=dn(t,e,s);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(a.tag===1){c=rn(-1,s&-s),c.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}a.lanes|=s,c=a.alternate,c!==null&&(c.lanes|=s),Lf(a.return,s,e),l.lanes|=s;break}c=c.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(Z(341));o.lanes|=s,l=o.alternate,l!==null&&(l.lanes|=s),Lf(o,s,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}Rt(t,e,i.children,s),e=e.child}return e;case 9:return i=e.type,n=e.pendingProps.children,Rr(e,s),i=bs(i),n=n(i),e.flags|=1,Rt(t,e,n,s),e.child;case 14:return n=e.type,i=Ps(n,e.pendingProps),i=Ps(n.type,i),Wy(t,e,n,i,s);case 15:return H1(t,e,e.type,e.pendingProps,s);case 17:return n=e.type,i=e.pendingProps,i=e.elementType===n?i:Ps(n,i),$l(t,e),e.tag=1,Yt(n)?(t=!0,mc(e)):t=!1,Rr(e,s),V1(e,n,i),Rf(e,n,i,s),Af(null,e,n,!0,t,s);case 19:return K1(t,e,s);case 22:return Y1(t,e,s)}throw Error(Z(156,e.tag))};function dS(t,e){return Bw(t,e)}function dT(t,e,s,n){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function xs(t,e,s,n){return new dT(t,e,s,n)}function Np(t){return t=t.prototype,!(!t||!t.isReactComponent)}function fT(t){if(typeof t=="function")return Np(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Um)return 11;if(t===Wm)return 14}return 2}function Vn(t,e){var s=t.alternate;return s===null?(s=xs(t.tag,e,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=e,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&14680064,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,e=t.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s}function Ul(t,e,s,n,i,a){var o=2;if(n=t,typeof t=="function")Np(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case hr:return Ti(s.children,i,a,e);case Vm:o=8,i|=8;break;case tf:return t=xs(12,s,e,i|2),t.elementType=tf,t.lanes=a,t;case sf:return t=xs(13,s,e,i),t.elementType=sf,t.lanes=a,t;case nf:return t=xs(19,s,e,i),t.elementType=nf,t.lanes=a,t;case bw:return du(s,i,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case ww:o=10;break e;case Sw:o=9;break e;case Um:o=11;break e;case Wm:o=14;break e;case jn:o=16,n=null;break e}throw Error(Z(130,t==null?t:typeof t,""))}return e=xs(o,s,e,i),e.elementType=t,e.type=n,e.lanes=a,e}function Ti(t,e,s,n){return t=xs(7,t,n,e),t.lanes=s,t}function du(t,e,s,n){return t=xs(22,t,n,e),t.elementType=bw,t.lanes=s,t.stateNode={isHidden:!1},t}function Uh(t,e,s){return t=xs(6,t,null,e),t.lanes=s,t}function Wh(t,e,s){return e=xs(4,t.children!==null?t.children:[],t.key,e),e.lanes=s,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function mT(t,e,s,n,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Nh(0),this.expirationTimes=Nh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nh(0),this.identifierPrefix=n,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function kp(t,e,s,n,i,a,o,l,c){return t=new mT(t,e,s,l,c),e===1?(e=1,a===!0&&(e|=8)):e=0,a=xs(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:n,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},lp(a),t}function pT(t,e,s){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ur,key:n==null?null:""+n,children:t,containerInfo:e,implementation:s}}function fS(t){if(!t)return qn;t=t._reactInternals;e:{if(Xi(t)!==t||t.tag!==1)throw Error(Z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Yt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Z(171))}if(t.tag===1){var s=t.type;if(Yt(s))return f1(t,s,e)}return e}function mS(t,e,s,n,i,a,o,l,c){return t=kp(s,n,!0,t,i,a,o,l,c),t.context=fS(null),s=t.current,n=At(),i=zn(s),a=rn(n,i),a.callback=e??null,Bn(s,a,i),t.current.lanes=i,Lo(t,i,n),qt(t,n),t}function fu(t,e,s,n){var i=e.current,a=At(),o=zn(i);return s=fS(s),e.context===null?e.context=s:e.pendingContext=s,e=rn(a,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Bn(i,e,o),t!==null&&(Ms(t,i,o,a),Dl(t,i,o)),o}function Pc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function sv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<e?s:e}}function Cp(t,e){sv(t,e),(t=t.alternate)&&sv(t,e)}function gT(){return null}var pS=typeof reportError=="function"?reportError:function(t){console.error(t)};function Pp(t){this._internalRoot=t}mu.prototype.render=Pp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(Z(409));fu(t,e,null,null)};mu.prototype.unmount=Pp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Fi(function(){fu(null,t,null,null)}),e[un]=null}};function mu(t){this._internalRoot=t}mu.prototype.unstable_scheduleHydration=function(t){if(t){var e=Yw();t={blockedOn:null,target:t,priority:e};for(var s=0;s<Cn.length&&e!==0&&e<Cn[s].priority;s++);Cn.splice(s,0,t),s===0&&Gw(t)}};function Tp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function pu(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function nv(){}function yT(t,e,s,n,i){if(i){if(typeof n=="function"){var a=n;n=function(){var u=Pc(o);a.call(u)}}var o=mS(e,n,t,0,null,!1,!1,"",nv);return t._reactRootContainer=o,t[un]=o.current,ao(t.nodeType===8?t.parentNode:t),Fi(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof n=="function"){var l=n;n=function(){var u=Pc(c);l.call(u)}}var c=kp(t,0,!1,null,null,!1,!1,"",nv);return t._reactRootContainer=c,t[un]=c.current,ao(t.nodeType===8?t.parentNode:t),Fi(function(){fu(e,c,s,n)}),c}function gu(t,e,s,n,i){var a=s._reactRootContainer;if(a){var o=a;if(typeof i=="function"){var l=i;i=function(){var c=Pc(o);l.call(c)}}fu(e,o,t,i)}else o=yT(s,e,t,i,n);return Pc(o)}Ww=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var s=ka(e.pendingLanes);s!==0&&(qm(e,s|1),qt(e,et()),!(je&6)&&(Vr=et()+500,ti()))}break;case 13:Fi(function(){var n=hn(t,1);if(n!==null){var i=At();Ms(n,t,1,i)}}),Cp(t,1)}};Gm=function(t){if(t.tag===13){var e=hn(t,134217728);if(e!==null){var s=At();Ms(e,t,134217728,s)}Cp(t,134217728)}};Hw=function(t){if(t.tag===13){var e=zn(t),s=hn(t,e);if(s!==null){var n=At();Ms(s,t,e,n)}Cp(t,e)}};Yw=function(){return Le};qw=function(t,e){var s=Le;try{return Le=t,e()}finally{Le=s}};mf=function(t,e,s){switch(e){case"input":if(of(t,s),e=s.name,s.type==="radio"&&e!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<s.length;e++){var n=s[e];if(n!==t&&n.form===t.form){var i=au(n);if(!i)throw Error(Z(90));Nw(n),of(n,i)}}}break;case"textarea":Cw(t,s);break;case"select":e=s.value,e!=null&&Tr(t,!!s.multiple,e,!1)}};Mw=Sp;Iw=Fi;var vT={usingClientEntryPoint:!1,Events:[Ro,pr,au,_w,Rw,Sp]},ya={findFiberByHostInstance:wi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},xT={bundleType:ya.bundleType,version:ya.version,rendererPackageName:ya.rendererPackageName,rendererConfig:ya.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:pn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Dw(t),t===null?null:t.stateNode},findFiberByHostInstance:ya.findFiberByHostInstance||gT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fl.isDisabled&&fl.supportsFiber)try{su=fl.inject(xT),Us=fl}catch{}}ls.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vT;ls.createPortal=function(t,e){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Tp(e))throw Error(Z(200));return pT(t,e,null,s)};ls.createRoot=function(t,e){if(!Tp(t))throw Error(Z(299));var s=!1,n="",i=pS;return e!=null&&(e.unstable_strictMode===!0&&(s=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=kp(t,1,!1,null,null,s,!1,n,i),t[un]=e.current,ao(t.nodeType===8?t.parentNode:t),new Pp(e)};ls.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(Z(188)):(t=Object.keys(t).join(","),Error(Z(268,t)));return t=Dw(e),t=t===null?null:t.stateNode,t};ls.flushSync=function(t){return Fi(t)};ls.hydrate=function(t,e,s){if(!pu(e))throw Error(Z(200));return gu(null,t,e,!0,s)};ls.hydrateRoot=function(t,e,s){if(!Tp(t))throw Error(Z(405));var n=s!=null&&s.hydratedSources||null,i=!1,a="",o=pS;if(s!=null&&(s.unstable_strictMode===!0&&(i=!0),s.identifierPrefix!==void 0&&(a=s.identifierPrefix),s.onRecoverableError!==void 0&&(o=s.onRecoverableError)),e=mS(e,null,t,1,s??null,i,!1,a,o),t[un]=e.current,ao(t),n)for(t=0;t<n.length;t++)s=n[t],i=s._getVersion,i=i(s._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[s,i]:e.mutableSourceEagerHydrationData.push(s,i);return new mu(e)};ls.render=function(t,e,s){if(!pu(e))throw Error(Z(200));return gu(null,t,e,!1,s)};ls.unmountComponentAtNode=function(t){if(!pu(t))throw Error(Z(40));return t._reactRootContainer?(Fi(function(){gu(null,null,t,!1,function(){t._reactRootContainer=null,t[un]=null})}),!0):!1};ls.unstable_batchedUpdates=Sp;ls.unstable_renderSubtreeIntoContainer=function(t,e,s,n){if(!pu(s))throw Error(Z(200));if(t==null||t._reactInternals===void 0)throw Error(Z(38));return gu(t,e,s,!1,n)};ls.version="18.3.1-next-f1338f8080-20240426";function gS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(gS)}catch(t){console.error(t)}}gS(),gw.exports=ls;var wT=gw.exports,yS,iv=wT;yS=iv.createRoot,iv.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function go(){return go=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},go.apply(this,arguments)}var _n;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(_n||(_n={}));const rv="popstate";function ST(t){t===void 0&&(t={});function e(n,i){let{pathname:a,search:o,hash:l}=n.location;return qf("",{pathname:a,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function s(n,i){return typeof i=="string"?i:Tc(i)}return jT(e,s,null,t)}function st(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function vS(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function bT(){return Math.random().toString(36).substr(2,8)}function av(t,e){return{usr:t.state,key:t.key,idx:e}}function qf(t,e,s,n){return s===void 0&&(s=null),go({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?sa(e):e,{state:s,key:e&&e.key||n||bT()})}function Tc(t){let{pathname:e="/",search:s="",hash:n=""}=t;return s&&s!=="?"&&(e+=s.charAt(0)==="?"?s:"?"+s),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function sa(t){let e={};if(t){let s=t.indexOf("#");s>=0&&(e.hash=t.substr(s),t=t.substr(0,s));let n=t.indexOf("?");n>=0&&(e.search=t.substr(n),t=t.substr(0,n)),t&&(e.pathname=t)}return e}function jT(t,e,s,n){n===void 0&&(n={});let{window:i=document.defaultView,v5Compat:a=!1}=n,o=i.history,l=_n.Pop,c=null,u=h();u==null&&(u=0,o.replaceState(go({},o.state,{idx:u}),""));function h(){return(o.state||{idx:null}).idx}function d(){l=_n.Pop;let g=h(),m=g==null?null:g-u;u=g,c&&c({action:l,location:w.location,delta:m})}function f(g,m){l=_n.Push;let x=qf(w.location,g,m);u=h()+1;let S=av(x,u),N=w.createHref(x);try{o.pushState(S,"",N)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;i.location.assign(N)}a&&c&&c({action:l,location:w.location,delta:1})}function y(g,m){l=_n.Replace;let x=qf(w.location,g,m);u=h();let S=av(x,u),N=w.createHref(x);o.replaceState(S,"",N),a&&c&&c({action:l,location:w.location,delta:0})}function p(g){let m=i.location.origin!=="null"?i.location.origin:i.location.href,x=typeof g=="string"?g:Tc(g);return x=x.replace(/ $/,"%20"),st(m,"No window.location.(origin|href) available to create URL for href: "+x),new URL(x,m)}let w={get action(){return l},get location(){return t(i,o)},listen(g){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(rv,d),c=g,()=>{i.removeEventListener(rv,d),c=null}},createHref(g){return e(i,g)},createURL:p,encodeLocation(g){let m=p(g);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:f,replace:y,go(g){return o.go(g)}};return w}var ov;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(ov||(ov={}));function NT(t,e,s){return s===void 0&&(s="/"),kT(t,e,s)}function kT(t,e,s,n){let i=typeof e=="string"?sa(e):e,a=Ep(i.pathname||"/",s);if(a==null)return null;let o=xS(t);CT(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let u=FT(a);l=AT(o[c],u)}return l}function xS(t,e,s,n){e===void 0&&(e=[]),s===void 0&&(s=[]),n===void 0&&(n="");let i=(a,o,l)=>{let c={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};c.relativePath.startsWith("/")&&(st(c.relativePath.startsWith(n),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(n.length));let u=Un([n,c.relativePath]),h=s.concat(c);a.children&&a.children.length>0&&(st(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),xS(a.children,e,h,u)),!(a.path==null&&!a.index)&&e.push({path:u,score:MT(u,a.index),routesMeta:h})};return t.forEach((a,o)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))i(a,o);else for(let c of wS(a.path))i(a,o,c)}),e}function wS(t){let e=t.split("/");if(e.length===0)return[];let[s,...n]=e,i=s.endsWith("?"),a=s.replace(/\?$/,"");if(n.length===0)return i?[a,""]:[a];let o=wS(n.join("/")),l=[];return l.push(...o.map(c=>c===""?a:[a,c].join("/"))),i&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function CT(t){t.sort((e,s)=>e.score!==s.score?s.score-e.score:IT(e.routesMeta.map(n=>n.childrenIndex),s.routesMeta.map(n=>n.childrenIndex)))}const PT=/^:[\w-]+$/,TT=3,ET=2,LT=1,_T=10,RT=-2,lv=t=>t==="*";function MT(t,e){let s=t.split("/"),n=s.length;return s.some(lv)&&(n+=RT),e&&(n+=ET),s.filter(i=>!lv(i)).reduce((i,a)=>i+(PT.test(a)?TT:a===""?LT:_T),n)}function IT(t,e){return t.length===e.length&&t.slice(0,-1).every((n,i)=>n===e[i])?t[t.length-1]-e[e.length-1]:0}function AT(t,e,s){let{routesMeta:n}=t,i={},a="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],u=l===n.length-1,h=a==="/"?e:e.slice(a.length)||"/",d=OT({path:c.relativePath,caseSensitive:c.caseSensitive,end:u},h),f=c.route;if(!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:Un([a,d.pathname]),pathnameBase:VT(Un([a,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(a=Un([a,d.pathnameBase]))}return o}function OT(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[s,n]=DT(t.path,t.caseSensitive,t.end),i=e.match(s);if(!i)return null;let a=i[0],o=a.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:n.reduce((u,h,d)=>{let{paramName:f,isOptional:y}=h;if(f==="*"){let w=l[d]||"";o=a.slice(0,a.length-w.length).replace(/(.)\/+$/,"$1")}const p=l[d];return y&&!p?u[f]=void 0:u[f]=(p||"").replace(/%2F/g,"/"),u},{}),pathname:a,pathnameBase:o,pattern:t}}function DT(t,e,s){e===void 0&&(e=!1),s===void 0&&(s=!0),vS(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let n=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),n]}function FT(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return vS(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function Ep(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let s=e.endsWith("/")?e.length-1:e.length,n=t.charAt(s);return n&&n!=="/"?null:t.slice(s)||"/"}function BT(t,e){e===void 0&&(e="/");let{pathname:s,search:n="",hash:i=""}=typeof t=="string"?sa(t):t;return{pathname:s?s.startsWith("/")?s:$T(s,e):e,search:UT(n),hash:WT(i)}}function $T(t,e){let s=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?s.length>1&&s.pop():i!=="."&&s.push(i)}),s.length>1?s.join("/"):"/"}function Hh(t,e,s,n){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function zT(t){return t.filter((e,s)=>s===0||e.route.path&&e.route.path.length>0)}function Lp(t,e){let s=zT(t);return e?s.map((n,i)=>i===s.length-1?n.pathname:n.pathnameBase):s.map(n=>n.pathnameBase)}function _p(t,e,s,n){n===void 0&&(n=!1);let i;typeof t=="string"?i=sa(t):(i=go({},t),st(!i.pathname||!i.pathname.includes("?"),Hh("?","pathname","search",i)),st(!i.pathname||!i.pathname.includes("#"),Hh("#","pathname","hash",i)),st(!i.search||!i.search.includes("#"),Hh("#","search","hash",i)));let a=t===""||i.pathname==="",o=a?"/":i.pathname,l;if(o==null)l=s;else{let d=e.length-1;if(!n&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;i.pathname=f.join("/")}l=d>=0?e[d]:"/"}let c=BT(i,l),u=o&&o!=="/"&&o.endsWith("/"),h=(a||o===".")&&s.endsWith("/");return!c.pathname.endsWith("/")&&(u||h)&&(c.pathname+="/"),c}const Un=t=>t.join("/").replace(/\/\/+/g,"/"),VT=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),UT=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,WT=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function HT(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const SS=["post","put","patch","delete"];new Set(SS);const YT=["get",...SS];new Set(YT);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function yo(){return yo=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},yo.apply(this,arguments)}const Rp=b.createContext(null),qT=b.createContext(null),si=b.createContext(null),yu=b.createContext(null),gn=b.createContext({outlet:null,matches:[],isDataRoute:!1}),bS=b.createContext(null);function GT(t,e){let{relative:s}=e===void 0?{}:e;na()||st(!1);let{basename:n,navigator:i}=b.useContext(si),{hash:a,pathname:o,search:l}=NS(t,{relative:s}),c=o;return n!=="/"&&(c=o==="/"?n:Un([n,o])),i.createHref({pathname:c,search:l,hash:a})}function na(){return b.useContext(yu)!=null}function us(){return na()||st(!1),b.useContext(yu).location}function jS(t){b.useContext(si).static||b.useLayoutEffect(t)}function Lt(){let{isDataRoute:t}=b.useContext(gn);return t?lE():QT()}function QT(){na()||st(!1);let t=b.useContext(Rp),{basename:e,future:s,navigator:n}=b.useContext(si),{matches:i}=b.useContext(gn),{pathname:a}=us(),o=JSON.stringify(Lp(i,s.v7_relativeSplatPath)),l=b.useRef(!1);return jS(()=>{l.current=!0}),b.useCallback(function(u,h){if(h===void 0&&(h={}),!l.current)return;if(typeof u=="number"){n.go(u);return}let d=_p(u,JSON.parse(o),a,h.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:Un([e,d.pathname])),(h.replace?n.replace:n.push)(d,h.state,h)},[e,n,o,a,t])}function KT(){let{matches:t}=b.useContext(gn),e=t[t.length-1];return e?e.params:{}}function NS(t,e){let{relative:s}=e===void 0?{}:e,{future:n}=b.useContext(si),{matches:i}=b.useContext(gn),{pathname:a}=us(),o=JSON.stringify(Lp(i,n.v7_relativeSplatPath));return b.useMemo(()=>_p(t,JSON.parse(o),a,s==="path"),[t,o,a,s])}function XT(t,e){return JT(t,e)}function JT(t,e,s,n){na()||st(!1);let{navigator:i}=b.useContext(si),{matches:a}=b.useContext(gn),o=a[a.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let u=us(),h;if(e){var d;let g=typeof e=="string"?sa(e):e;c==="/"||(d=g.pathname)!=null&&d.startsWith(c)||st(!1),h=g}else h=u;let f=h.pathname||"/",y=f;if(c!=="/"){let g=c.replace(/^\//,"").split("/");y="/"+f.replace(/^\//,"").split("/").slice(g.length).join("/")}let p=NT(t,{pathname:y}),w=nE(p&&p.map(g=>Object.assign({},g,{params:Object.assign({},l,g.params),pathname:Un([c,i.encodeLocation?i.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?c:Un([c,i.encodeLocation?i.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),a,s,n);return e&&w?b.createElement(yu.Provider,{value:{location:yo({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:_n.Pop}},w):w}function ZT(){let t=oE(),e=HT(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),s=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},e),s?b.createElement("pre",{style:i},s):null,null)}const eE=b.createElement(ZT,null);class tE extends b.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,s){return s.location!==e.location||s.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:s.error,location:s.location,revalidation:e.revalidation||s.revalidation}}componentDidCatch(e,s){console.error("React Router caught the following error during render",e,s)}render(){return this.state.error!==void 0?b.createElement(gn.Provider,{value:this.props.routeContext},b.createElement(bS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function sE(t){let{routeContext:e,match:s,children:n}=t,i=b.useContext(Rp);return i&&i.static&&i.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=s.route.id),b.createElement(gn.Provider,{value:e},n)}function nE(t,e,s,n){var i;if(e===void 0&&(e=[]),s===void 0&&(s=null),n===void 0&&(n=null),t==null){var a;if(!s)return null;if(s.errors)t=s.matches;else if((a=n)!=null&&a.v7_partialHydration&&e.length===0&&!s.initialized&&s.matches.length>0)t=s.matches;else return null}let o=t,l=(i=s)==null?void 0:i.errors;if(l!=null){let h=o.findIndex(d=>d.route.id&&(l==null?void 0:l[d.route.id])!==void 0);h>=0||st(!1),o=o.slice(0,Math.min(o.length,h+1))}let c=!1,u=-1;if(s&&n&&n.v7_partialHydration)for(let h=0;h<o.length;h++){let d=o[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=h),d.route.id){let{loaderData:f,errors:y}=s,p=d.route.loader&&f[d.route.id]===void 0&&(!y||y[d.route.id]===void 0);if(d.route.lazy||p){c=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((h,d,f)=>{let y,p=!1,w=null,g=null;s&&(y=l&&d.route.id?l[d.route.id]:void 0,w=d.route.errorElement||eE,c&&(u<0&&f===0?(cE("route-fallback"),p=!0,g=null):u===f&&(p=!0,g=d.route.hydrateFallbackElement||null)));let m=e.concat(o.slice(0,f+1)),x=()=>{let S;return y?S=w:p?S=g:d.route.Component?S=b.createElement(d.route.Component,null):d.route.element?S=d.route.element:S=h,b.createElement(sE,{match:d,routeContext:{outlet:h,matches:m,isDataRoute:s!=null},children:S})};return s&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?b.createElement(tE,{location:s.location,revalidation:s.revalidation,component:w,error:y,children:x(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):x()},null)}var kS=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(kS||{}),CS=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(CS||{});function iE(t){let e=b.useContext(Rp);return e||st(!1),e}function rE(t){let e=b.useContext(qT);return e||st(!1),e}function aE(t){let e=b.useContext(gn);return e||st(!1),e}function PS(t){let e=aE(),s=e.matches[e.matches.length-1];return s.route.id||st(!1),s.route.id}function oE(){var t;let e=b.useContext(bS),s=rE(),n=PS();return e!==void 0?e:(t=s.errors)==null?void 0:t[n]}function lE(){let{router:t}=iE(kS.UseNavigateStable),e=PS(CS.UseNavigateStable),s=b.useRef(!1);return jS(()=>{s.current=!0}),b.useCallback(function(i,a){a===void 0&&(a={}),s.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,yo({fromRouteId:e},a)))},[t,e])}const cv={};function cE(t,e,s){cv[t]||(cv[t]=!0)}function uE(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function Zt(t){let{to:e,replace:s,state:n,relative:i}=t;na()||st(!1);let{future:a,static:o}=b.useContext(si),{matches:l}=b.useContext(gn),{pathname:c}=us(),u=Lt(),h=_p(e,Lp(l,a.v7_relativeSplatPath),c,i==="path"),d=JSON.stringify(h);return b.useEffect(()=>u(JSON.parse(d),{replace:s,state:n,relative:i}),[u,d,i,s,n]),null}function De(t){st(!1)}function hE(t){let{basename:e="/",children:s=null,location:n,navigationType:i=_n.Pop,navigator:a,static:o=!1,future:l}=t;na()&&st(!1);let c=e.replace(/^\/*/,"/"),u=b.useMemo(()=>({basename:c,navigator:a,static:o,future:yo({v7_relativeSplatPath:!1},l)}),[c,l,a,o]);typeof n=="string"&&(n=sa(n));let{pathname:h="/",search:d="",hash:f="",state:y=null,key:p="default"}=n,w=b.useMemo(()=>{let g=Ep(h,c);return g==null?null:{location:{pathname:g,search:d,hash:f,state:y,key:p},navigationType:i}},[c,h,d,f,y,p,i]);return w==null?null:b.createElement(si.Provider,{value:u},b.createElement(yu.Provider,{children:s,value:w}))}function dE(t){let{children:e,location:s}=t;return XT(Gf(e),s)}new Promise(()=>{});function Gf(t,e){e===void 0&&(e=[]);let s=[];return b.Children.forEach(t,(n,i)=>{if(!b.isValidElement(n))return;let a=[...e,i];if(n.type===b.Fragment){s.push.apply(s,Gf(n.props.children,a));return}n.type!==De&&st(!1),!n.props.index||!n.props.children||st(!1);let o={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=Gf(n.props.children,a)),s.push(o)}),s}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Qf(){return Qf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},Qf.apply(this,arguments)}function fE(t,e){if(t==null)return{};var s={},n=Object.keys(t),i,a;for(a=0;a<n.length;a++)i=n[a],!(e.indexOf(i)>=0)&&(s[i]=t[i]);return s}function mE(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function pE(t,e){return t.button===0&&(!e||e==="_self")&&!mE(t)}const gE=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],yE="6";try{window.__reactRouterVersion=yE}catch{}const vE="startTransition",uv=c2[vE];function xE(t){let{basename:e,children:s,future:n,window:i}=t,a=b.useRef();a.current==null&&(a.current=ST({window:i,v5Compat:!0}));let o=a.current,[l,c]=b.useState({action:o.action,location:o.location}),{v7_startTransition:u}=n||{},h=b.useCallback(d=>{u&&uv?uv(()=>c(d)):c(d)},[c,u]);return b.useLayoutEffect(()=>o.listen(h),[o,h]),b.useEffect(()=>uE(n),[n]),b.createElement(hE,{basename:e,children:s,location:l.location,navigationType:l.action,navigator:o,future:n})}const wE=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",SE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Re=b.forwardRef(function(e,s){let{onClick:n,relative:i,reloadDocument:a,replace:o,state:l,target:c,to:u,preventScrollReset:h,viewTransition:d}=e,f=fE(e,gE),{basename:y}=b.useContext(si),p,w=!1;if(typeof u=="string"&&SE.test(u)&&(p=u,wE))try{let S=new URL(window.location.href),N=u.startsWith("//")?new URL(S.protocol+u):new URL(u),j=Ep(N.pathname,y);N.origin===S.origin&&j!=null?u=j+N.search+N.hash:w=!0}catch{}let g=GT(u,{relative:i}),m=bE(u,{replace:o,state:l,target:c,preventScrollReset:h,relative:i,viewTransition:d});function x(S){n&&n(S),S.defaultPrevented||m(S)}return b.createElement("a",Qf({},f,{href:p||g,onClick:w||a?n:x,ref:s,target:c}))});var hv;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(hv||(hv={}));var dv;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(dv||(dv={}));function bE(t,e){let{target:s,replace:n,state:i,preventScrollReset:a,relative:o,viewTransition:l}=e===void 0?{}:e,c=Lt(),u=us(),h=NS(t,{relative:o});return b.useCallback(d=>{if(pE(d,s)){d.preventDefault();let f=n!==void 0?n:Tc(u)===Tc(h);c(t,{replace:f,state:i,preventScrollReset:a,relative:o,viewTransition:l})}},[u,c,h,n,i,s,t,a,o,l])}var TS={exports:{}},ES={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Io=b;function jE(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var NE=typeof Object.is=="function"?Object.is:jE,kE=Io.useSyncExternalStore,CE=Io.useRef,PE=Io.useEffect,TE=Io.useMemo,EE=Io.useDebugValue;ES.useSyncExternalStoreWithSelector=function(t,e,s,n,i){var a=CE(null);if(a.current===null){var o={hasValue:!1,value:null};a.current=o}else o=a.current;a=TE(function(){function c(y){if(!u){if(u=!0,h=y,y=n(y),i!==void 0&&o.hasValue){var p=o.value;if(i(p,y))return d=p}return d=y}if(p=d,NE(h,y))return p;var w=n(y);return i!==void 0&&i(p,w)?(h=y,p):(h=y,d=w)}var u=!1,h,d,f=s===void 0?null:s;return[function(){return c(e())},f===null?void 0:function(){return c(f())}]},[e,s,n,i]);var l=kE(t,a[0],a[1]);return PE(function(){o.hasValue=!0,o.value=l},[l]),EE(l),l};TS.exports=ES;var LE=TS.exports;function _E(t){t()}function RE(){let t=null,e=null;return{clear(){t=null,e=null},notify(){_E(()=>{let s=t;for(;s;)s.callback(),s=s.next})},get(){const s=[];let n=t;for(;n;)s.push(n),n=n.next;return s},subscribe(s){let n=!0;const i=e={callback:s,next:null,prev:e};return i.prev?i.prev.next=i:t=i,function(){!n||t===null||(n=!1,i.next?i.next.prev=i.prev:e=i.prev,i.prev?i.prev.next=i.next:t=i.next)}}}}var fv={notify(){},get:()=>[]};function ME(t,e){let s,n=fv,i=0,a=!1;function o(w){h();const g=n.subscribe(w);let m=!1;return()=>{m||(m=!0,g(),d())}}function l(){n.notify()}function c(){p.onStateChange&&p.onStateChange()}function u(){return a}function h(){i++,s||(s=t.subscribe(c),n=RE())}function d(){i--,s&&i===0&&(s(),s=void 0,n.clear(),n=fv)}function f(){a||(a=!0,h())}function y(){a&&(a=!1,d())}const p={addNestedSub:o,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:u,trySubscribe:f,tryUnsubscribe:y,getListeners:()=>n};return p}var IE=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",AE=IE(),OE=()=>typeof navigator<"u"&&navigator.product==="ReactNative",DE=OE(),FE=()=>AE||DE?b.useLayoutEffect:b.useEffect,BE=FE(),Yh=Symbol.for("react-redux-context"),qh=typeof globalThis<"u"?globalThis:{};function $E(){if(!b.createContext)return{};const t=qh[Yh]??(qh[Yh]=new Map);let e=t.get(b.createContext);return e||(e=b.createContext(null),t.set(b.createContext,e)),e}var Ec=$E();function zE(t){const{children:e,context:s,serverState:n,store:i}=t,a=b.useMemo(()=>{const c=ME(i);return{store:i,subscription:c,getServerState:n?()=>n:void 0}},[i,n]),o=b.useMemo(()=>i.getState(),[i]);BE(()=>{const{subscription:c}=a;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),o!==i.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[a,o]);const l=s||Ec;return b.createElement(l.Provider,{value:a},e)}var VE=zE;function LS(t=Ec){return function(){return b.useContext(t)}}var UE=LS(),WE=(t,e)=>t===e;function HE(t=Ec){const e=t===Ec?UE:LS(t),s=(n,i={})=>{const{equalityFn:a=WE}=typeof i=="function"?{equalityFn:i}:i,o=e(),{store:l,subscription:c,getServerState:u}=o;b.useRef(!0);const h=b.useCallback({[n.name](f){return n(f)}}[n.name],[n]),d=LE.useSyncExternalStoreWithSelector(c.addNestedSub,l.getState,u||l.getState,h,a);return b.useDebugValue(d),d};return Object.assign(s,{withTypes:()=>s}),s}var _S=HE();function Wl(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Wl=function(s){return typeof s}:Wl=function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Wl(t)}function YE(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function qE(t,e){for(var s=0;s<e.length;s++){var n=e[s];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function GE(t,e,s){return e&&qE(t.prototype,e),t}function QE(t,e){return e&&(Wl(e)==="object"||typeof e=="function")?e:Hl(t)}function Kf(t){return Kf=Object.setPrototypeOf?Object.getPrototypeOf:function(s){return s.__proto__||Object.getPrototypeOf(s)},Kf(t)}function Hl(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function KE(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Xf(t,e)}function Xf(t,e){return Xf=Object.setPrototypeOf||function(n,i){return n.__proto__=i,n},Xf(t,e)}function Yl(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var RS=function(t){KE(e,t);function e(){var s,n;YE(this,e);for(var i=arguments.length,a=new Array(i),o=0;o<i;o++)a[o]=arguments[o];return n=QE(this,(s=Kf(e)).call.apply(s,[this].concat(a))),Yl(Hl(n),"state",{bootstrapped:!1}),Yl(Hl(n),"_unsubscribe",void 0),Yl(Hl(n),"handlePersistorState",function(){var l=n.props.persistor,c=l.getState(),u=c.bootstrapped;u&&(n.props.onBeforeLift?Promise.resolve(n.props.onBeforeLift()).finally(function(){return n.setState({bootstrapped:!0})}):n.setState({bootstrapped:!0}),n._unsubscribe&&n._unsubscribe())}),n}return GE(e,[{key:"componentDidMount",value:function(){this._unsubscribe=this.props.persistor.subscribe(this.handlePersistorState),this.handlePersistorState()}},{key:"componentWillUnmount",value:function(){this._unsubscribe&&this._unsubscribe()}},{key:"render",value:function(){return typeof this.props.children=="function"?this.props.children(this.state.bootstrapped):this.state.bootstrapped?this.props.children:this.props.loading}}]),e}(b.PureComponent);Yl(RS,"defaultProps",{children:null,loading:null});const XE="modulepreload",JE=function(t){return"/"+t},mv={},ZE=function(e,s,n){let i=Promise.resolve();if(s&&s.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));i=Promise.allSettled(s.map(c=>{if(c=JE(c),c in mv)return;mv[c]=!0;const u=c.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${h}`))return;const d=document.createElement("link");if(d.rel=u?"stylesheet":XE,u||(d.as="script"),d.crossOrigin="",d.href=c,l&&d.setAttribute("nonce",l),document.head.appendChild(d),u)return new Promise((f,y)=>{d.addEventListener("load",f),d.addEventListener("error",()=>y(new Error(`Unable to preload CSS for ${c}`)))})}))}function a(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return i.then(o=>{for(const l of o||[])l.status==="rejected"&&a(l.reason);return e().catch(a)})},Mp=b.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"}),vu=b.createContext({}),xu=b.createContext(null),wu=typeof document<"u",Su=wu?b.useLayoutEffect:b.useEffect,MS=b.createContext({strict:!1}),Ip=t=>t.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),eL="framerAppearId",IS="data-"+Ip(eL);function tL(t,e,s,n){const{visualElement:i}=b.useContext(vu),a=b.useContext(MS),o=b.useContext(xu),l=b.useContext(Mp).reducedMotion,c=b.useRef();n=n||a.renderer,!c.current&&n&&(c.current=n(t,{visualState:e,parent:i,props:s,presenceContext:o,blockInitialAnimation:o?o.initial===!1:!1,reducedMotionConfig:l}));const u=c.current;b.useInsertionEffect(()=>{u&&u.update(s,o)});const h=b.useRef(!!(s[IS]&&!window.HandoffComplete));return Su(()=>{u&&(u.render(),h.current&&u.animationState&&u.animationState.animateChanges())}),b.useEffect(()=>{u&&(u.updateFeatures(),!h.current&&u.animationState&&u.animationState.animateChanges(),h.current&&(h.current=!1,window.HandoffComplete=!0))}),u}function br(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function sL(t,e,s){return b.useCallback(n=>{n&&t.mount&&t.mount(n),e&&(n?e.mount(n):e.unmount()),s&&(typeof s=="function"?s(n):br(s)&&(s.current=n))},[e])}function vo(t){return typeof t=="string"||Array.isArray(t)}function bu(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}const Ap=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Op=["initial",...Ap];function ju(t){return bu(t.animate)||Op.some(e=>vo(t[e]))}function AS(t){return!!(ju(t)||t.variants)}function nL(t,e){if(ju(t)){const{initial:s,animate:n}=t;return{initial:s===!1||vo(s)?s:void 0,animate:vo(n)?n:void 0}}return t.inherit!==!1?e:{}}function iL(t){const{initial:e,animate:s}=nL(t,b.useContext(vu));return b.useMemo(()=>({initial:e,animate:s}),[pv(e),pv(s)])}function pv(t){return Array.isArray(t)?t.join(" "):t}const gv={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},xo={};for(const t in gv)xo[t]={isEnabled:e=>gv[t].some(s=>!!e[s])};function rL(t){for(const e in t)xo[e]={...xo[e],...t[e]}}const Dp=b.createContext({}),OS=b.createContext({}),aL=Symbol.for("motionComponentSymbol");function oL({preloadedFeatures:t,createVisualElement:e,useRender:s,useVisualState:n,Component:i}){t&&rL(t);function a(l,c){let u;const h={...b.useContext(Mp),...l,layoutId:lL(l)},{isStatic:d}=h,f=iL(l),y=n(l,d);if(!d&&wu){f.visualElement=tL(i,y,h,e);const p=b.useContext(OS),w=b.useContext(MS).strict;f.visualElement&&(u=f.visualElement.loadFeatures(h,w,t,p))}return b.createElement(vu.Provider,{value:f},u&&f.visualElement?b.createElement(u,{visualElement:f.visualElement,...h}):null,s(i,l,sL(y,f.visualElement,c),y,d,f.visualElement))}const o=b.forwardRef(a);return o[aL]=i,o}function lL({layoutId:t}){const e=b.useContext(Dp).id;return e&&t!==void 0?e+"-"+t:t}function cL(t){function e(n,i={}){return oL(t(n,i))}if(typeof Proxy>"u")return e;const s=new Map;return new Proxy(e,{get:(n,i)=>(s.has(i)||s.set(i,e(i)),s.get(i))})}const uL=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Fp(t){return typeof t!="string"||t.includes("-")?!1:!!(uL.indexOf(t)>-1||/[A-Z]/.test(t))}const Lc={};function hL(t){Object.assign(Lc,t)}const Ao=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ji=new Set(Ao);function DS(t,{layout:e,layoutId:s}){return Ji.has(t)||t.startsWith("origin")||(e||s!==void 0)&&(!!Lc[t]||t==="opacity")}const Kt=t=>!!(t&&t.getVelocity),dL={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},fL=Ao.length;function mL(t,{enableHardwareAcceleration:e=!0,allowTransformNone:s=!0},n,i){let a="";for(let o=0;o<fL;o++){const l=Ao[o];if(t[l]!==void 0){const c=dL[l]||l;a+=`${c}(${t[l]}) `}}return e&&!t.z&&(a+="translateZ(0)"),a=a.trim(),i?a=i(t,n?"":a):s&&n&&(a="none"),a}const FS=t=>e=>typeof e=="string"&&e.startsWith(t),BS=FS("--"),Jf=FS("var(--"),pL=/var\s*\(\s*--[\w-]+(\s*,\s*(?:(?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)+)?\s*\)/g,gL=(t,e)=>e&&typeof t=="number"?e.transform(t):t,Gn=(t,e,s)=>Math.min(Math.max(s,t),e),Zi={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},za={...Zi,transform:t=>Gn(0,1,t)},ml={...Zi,default:1},Va=t=>Math.round(t*1e5)/1e5,Nu=/(-)?([\d]*\.?[\d])+/g,$S=/(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))/gi,yL=/^(#[0-9a-f]{3,8}|(rgb|hsl)a?\((-?[\d\.]+%?[,\s]+){2}(-?[\d\.]+%?)\s*[\,\/]?\s*[\d\.]*%?\))$/i;function Oo(t){return typeof t=="string"}const Do=t=>({test:e=>Oo(e)&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),bn=Do("deg"),Hs=Do("%"),ce=Do("px"),vL=Do("vh"),xL=Do("vw"),yv={...Hs,parse:t=>Hs.parse(t)/100,transform:t=>Hs.transform(t*100)},vv={...Zi,transform:Math.round},zS={borderWidth:ce,borderTopWidth:ce,borderRightWidth:ce,borderBottomWidth:ce,borderLeftWidth:ce,borderRadius:ce,radius:ce,borderTopLeftRadius:ce,borderTopRightRadius:ce,borderBottomRightRadius:ce,borderBottomLeftRadius:ce,width:ce,maxWidth:ce,height:ce,maxHeight:ce,size:ce,top:ce,right:ce,bottom:ce,left:ce,padding:ce,paddingTop:ce,paddingRight:ce,paddingBottom:ce,paddingLeft:ce,margin:ce,marginTop:ce,marginRight:ce,marginBottom:ce,marginLeft:ce,rotate:bn,rotateX:bn,rotateY:bn,rotateZ:bn,scale:ml,scaleX:ml,scaleY:ml,scaleZ:ml,skew:bn,skewX:bn,skewY:bn,distance:ce,translateX:ce,translateY:ce,translateZ:ce,x:ce,y:ce,z:ce,perspective:ce,transformPerspective:ce,opacity:za,originX:yv,originY:yv,originZ:ce,zIndex:vv,fillOpacity:za,strokeOpacity:za,numOctaves:vv};function Bp(t,e,s,n){const{style:i,vars:a,transform:o,transformOrigin:l}=t;let c=!1,u=!1,h=!0;for(const d in e){const f=e[d];if(BS(d)){a[d]=f;continue}const y=zS[d],p=gL(f,y);if(Ji.has(d)){if(c=!0,o[d]=p,!h)continue;f!==(y.default||0)&&(h=!1)}else d.startsWith("origin")?(u=!0,l[d]=p):i[d]=p}if(e.transform||(c||n?i.transform=mL(t.transform,s,h,n):i.transform&&(i.transform="none")),u){const{originX:d="50%",originY:f="50%",originZ:y=0}=l;i.transformOrigin=`${d} ${f} ${y}`}}const $p=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function VS(t,e,s){for(const n in e)!Kt(e[n])&&!DS(n,s)&&(t[n]=e[n])}function wL({transformTemplate:t},e,s){return b.useMemo(()=>{const n=$p();return Bp(n,e,{enableHardwareAcceleration:!s},t),Object.assign({},n.vars,n.style)},[e])}function SL(t,e,s){const n=t.style||{},i={};return VS(i,n,t),Object.assign(i,wL(t,e,s)),t.transformValues?t.transformValues(i):i}function bL(t,e,s){const n={},i=SL(t,e,s);return t.drag&&t.dragListener!==!1&&(n.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(n.tabIndex=0),n.style=i,n}const jL=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","transformValues","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function _c(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||jL.has(t)}let US=t=>!_c(t);function NL(t){t&&(US=e=>e.startsWith("on")?!_c(e):t(e))}try{NL(require("@emotion/is-prop-valid").default)}catch{}function kL(t,e,s){const n={};for(const i in t)i==="values"&&typeof t.values=="object"||(US(i)||s===!0&&_c(i)||!e&&!_c(i)||t.draggable&&i.startsWith("onDrag"))&&(n[i]=t[i]);return n}function xv(t,e,s){return typeof t=="string"?t:ce.transform(e+s*t)}function CL(t,e,s){const n=xv(e,t.x,t.width),i=xv(s,t.y,t.height);return`${n} ${i}`}const PL={offset:"stroke-dashoffset",array:"stroke-dasharray"},TL={offset:"strokeDashoffset",array:"strokeDasharray"};function EL(t,e,s=1,n=0,i=!0){t.pathLength=1;const a=i?PL:TL;t[a.offset]=ce.transform(-n);const o=ce.transform(e),l=ce.transform(s);t[a.array]=`${o} ${l}`}function zp(t,{attrX:e,attrY:s,attrScale:n,originX:i,originY:a,pathLength:o,pathSpacing:l=1,pathOffset:c=0,...u},h,d,f){if(Bp(t,u,h,f),d){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:y,style:p,dimensions:w}=t;y.transform&&(w&&(p.transform=y.transform),delete y.transform),w&&(i!==void 0||a!==void 0||p.transform)&&(p.transformOrigin=CL(w,i!==void 0?i:.5,a!==void 0?a:.5)),e!==void 0&&(y.x=e),s!==void 0&&(y.y=s),n!==void 0&&(y.scale=n),o!==void 0&&EL(y,o,l,c,!1)}const WS=()=>({...$p(),attrs:{}}),Vp=t=>typeof t=="string"&&t.toLowerCase()==="svg";function LL(t,e,s,n){const i=b.useMemo(()=>{const a=WS();return zp(a,e,{enableHardwareAcceleration:!1},Vp(n),t.transformTemplate),{...a.attrs,style:{...a.style}}},[e]);if(t.style){const a={};VS(a,t.style,t),i.style={...a,...i.style}}return i}function _L(t=!1){return(s,n,i,{latestValues:a},o)=>{const c=(Fp(s)?LL:bL)(n,a,o,s),h={...kL(n,typeof s=="string",t),...c,ref:i},{children:d}=n,f=b.useMemo(()=>Kt(d)?d.get():d,[d]);return b.createElement(s,{...h,children:f})}}function HS(t,{style:e,vars:s},n,i){Object.assign(t.style,e,i&&i.getProjectionStyles(n));for(const a in s)t.style.setProperty(a,s[a])}const YS=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function qS(t,e,s,n){HS(t,e,void 0,n);for(const i in e.attrs)t.setAttribute(YS.has(i)?i:Ip(i),e.attrs[i])}function Up(t,e){const{style:s}=t,n={};for(const i in s)(Kt(s[i])||e.style&&Kt(e.style[i])||DS(i,t))&&(n[i]=s[i]);return n}function GS(t,e){const s=Up(t,e);for(const n in t)if(Kt(t[n])||Kt(e[n])){const i=Ao.indexOf(n)!==-1?"attr"+n.charAt(0).toUpperCase()+n.substring(1):n;s[i]=t[n]}return s}function Wp(t,e,s,n={},i={}){return typeof e=="function"&&(e=e(s!==void 0?s:t.custom,n,i)),typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"&&(e=e(s!==void 0?s:t.custom,n,i)),e}function ku(t){const e=b.useRef(null);return e.current===null&&(e.current=t()),e.current}const Rc=t=>Array.isArray(t),RL=t=>!!(t&&typeof t=="object"&&t.mix&&t.toValue),ML=t=>Rc(t)?t[t.length-1]||0:t;function ql(t){const e=Kt(t)?t.get():t;return RL(e)?e.toValue():e}function IL({scrapeMotionValuesFromProps:t,createRenderState:e,onMount:s},n,i,a){const o={latestValues:AL(n,i,a,t),renderState:e()};return s&&(o.mount=l=>s(n,l,o)),o}const QS=t=>(e,s)=>{const n=b.useContext(vu),i=b.useContext(xu),a=()=>IL(t,e,n,i);return s?a():ku(a)};function AL(t,e,s,n){const i={},a=n(t,{});for(const f in a)i[f]=ql(a[f]);let{initial:o,animate:l}=t;const c=ju(t),u=AS(t);e&&u&&!c&&t.inherit!==!1&&(o===void 0&&(o=e.initial),l===void 0&&(l=e.animate));let h=s?s.initial===!1:!1;h=h||o===!1;const d=h?l:o;return d&&typeof d!="boolean"&&!bu(d)&&(Array.isArray(d)?d:[d]).forEach(y=>{const p=Wp(t,y);if(!p)return;const{transitionEnd:w,transition:g,...m}=p;for(const x in m){let S=m[x];if(Array.isArray(S)){const N=h?S.length-1:0;S=S[N]}S!==null&&(i[x]=S)}for(const x in w)i[x]=w[x]}),i}const tt=t=>t;class wv{constructor(){this.order=[],this.scheduled=new Set}add(e){if(!this.scheduled.has(e))return this.scheduled.add(e),this.order.push(e),!0}remove(e){const s=this.order.indexOf(e);s!==-1&&(this.order.splice(s,1),this.scheduled.delete(e))}clear(){this.order.length=0,this.scheduled.clear()}}function OL(t){let e=new wv,s=new wv,n=0,i=!1,a=!1;const o=new WeakSet,l={schedule:(c,u=!1,h=!1)=>{const d=h&&i,f=d?e:s;return u&&o.add(c),f.add(c)&&d&&i&&(n=e.order.length),c},cancel:c=>{s.remove(c),o.delete(c)},process:c=>{if(i){a=!0;return}if(i=!0,[e,s]=[s,e],s.clear(),n=e.order.length,n)for(let u=0;u<n;u++){const h=e.order[u];h(c),o.has(h)&&(l.schedule(h),t())}i=!1,a&&(a=!1,l.process(c))}};return l}const pl=["prepare","read","update","preRender","render","postRender"],DL=40;function FL(t,e){let s=!1,n=!0;const i={delta:0,timestamp:0,isProcessing:!1},a=pl.reduce((d,f)=>(d[f]=OL(()=>s=!0),d),{}),o=d=>a[d].process(i),l=()=>{const d=performance.now();s=!1,i.delta=n?1e3/60:Math.max(Math.min(d-i.timestamp,DL),1),i.timestamp=d,i.isProcessing=!0,pl.forEach(o),i.isProcessing=!1,s&&e&&(n=!1,t(l))},c=()=>{s=!0,n=!0,i.isProcessing||t(l)};return{schedule:pl.reduce((d,f)=>{const y=a[f];return d[f]=(p,w=!1,g=!1)=>(s||c(),y.schedule(p,w,g)),d},{}),cancel:d=>pl.forEach(f=>a[f].cancel(d)),state:i,steps:a}}const{schedule:Ae,cancel:Ys,state:kt,steps:Gh}=FL(typeof requestAnimationFrame<"u"?requestAnimationFrame:tt,!0),BL={useVisualState:QS({scrapeMotionValuesFromProps:GS,createRenderState:WS,onMount:(t,e,{renderState:s,latestValues:n})=>{Ae.read(()=>{try{s.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{s.dimensions={x:0,y:0,width:0,height:0}}}),Ae.render(()=>{zp(s,n,{enableHardwareAcceleration:!1},Vp(e.tagName),t.transformTemplate),qS(e,s)})}})},$L={useVisualState:QS({scrapeMotionValuesFromProps:Up,createRenderState:$p})};function zL(t,{forwardMotionProps:e=!1},s,n){return{...Fp(t)?BL:$L,preloadedFeatures:s,useRender:_L(e),createVisualElement:n,Component:t}}function tn(t,e,s,n={passive:!0}){return t.addEventListener(e,s,n),()=>t.removeEventListener(e,s)}const KS=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1;function Cu(t,e="page"){return{point:{x:t[e+"X"],y:t[e+"Y"]}}}const VL=t=>e=>KS(e)&&t(e,Cu(e));function an(t,e,s,n){return tn(t,e,VL(s),n)}const UL=(t,e)=>s=>e(t(s)),Wn=(...t)=>t.reduce(UL);function XS(t){let e=null;return()=>{const s=()=>{e=null};return e===null?(e=t,s):!1}}const Sv=XS("dragHorizontal"),bv=XS("dragVertical");function JS(t){let e=!1;if(t==="y")e=bv();else if(t==="x")e=Sv();else{const s=Sv(),n=bv();s&&n?e=()=>{s(),n()}:(s&&s(),n&&n())}return e}function ZS(){const t=JS(!0);return t?(t(),!1):!0}class ni{constructor(e){this.isMounted=!1,this.node=e}update(){}}function jv(t,e){const s="pointer"+(e?"enter":"leave"),n="onHover"+(e?"Start":"End"),i=(a,o)=>{if(a.pointerType==="touch"||ZS())return;const l=t.getProps();t.animationState&&l.whileHover&&t.animationState.setActive("whileHover",e),l[n]&&Ae.update(()=>l[n](a,o))};return an(t.current,s,i,{passive:!t.getProps()[n]})}class WL extends ni{mount(){this.unmount=Wn(jv(this.node,!0),jv(this.node,!1))}unmount(){}}class HL extends ni{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Wn(tn(this.node.current,"focus",()=>this.onFocus()),tn(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const eb=(t,e)=>e?t===e?!0:eb(t,e.parentElement):!1;function Qh(t,e){if(!e)return;const s=new PointerEvent("pointer"+t);e(s,Cu(s))}class YL extends ni{constructor(){super(...arguments),this.removeStartListeners=tt,this.removeEndListeners=tt,this.removeAccessibleListeners=tt,this.startPointerPress=(e,s)=>{if(this.isPressing)return;this.removeEndListeners();const n=this.node.getProps(),a=an(window,"pointerup",(l,c)=>{if(!this.checkPressEnd())return;const{onTap:u,onTapCancel:h,globalTapTarget:d}=this.node.getProps();Ae.update(()=>{!d&&!eb(this.node.current,l.target)?h&&h(l,c):u&&u(l,c)})},{passive:!(n.onTap||n.onPointerUp)}),o=an(window,"pointercancel",(l,c)=>this.cancelPress(l,c),{passive:!(n.onTapCancel||n.onPointerCancel)});this.removeEndListeners=Wn(a,o),this.startPress(e,s)},this.startAccessiblePress=()=>{const e=a=>{if(a.key!=="Enter"||this.isPressing)return;const o=l=>{l.key!=="Enter"||!this.checkPressEnd()||Qh("up",(c,u)=>{const{onTap:h}=this.node.getProps();h&&Ae.update(()=>h(c,u))})};this.removeEndListeners(),this.removeEndListeners=tn(this.node.current,"keyup",o),Qh("down",(l,c)=>{this.startPress(l,c)})},s=tn(this.node.current,"keydown",e),n=()=>{this.isPressing&&Qh("cancel",(a,o)=>this.cancelPress(a,o))},i=tn(this.node.current,"blur",n);this.removeAccessibleListeners=Wn(s,i)}}startPress(e,s){this.isPressing=!0;const{onTapStart:n,whileTap:i}=this.node.getProps();i&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),n&&Ae.update(()=>n(e,s))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!ZS()}cancelPress(e,s){if(!this.checkPressEnd())return;const{onTapCancel:n}=this.node.getProps();n&&Ae.update(()=>n(e,s))}mount(){const e=this.node.getProps(),s=an(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),n=tn(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Wn(s,n)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const Zf=new WeakMap,Kh=new WeakMap,qL=t=>{const e=Zf.get(t.target);e&&e(t)},GL=t=>{t.forEach(qL)};function QL({root:t,...e}){const s=t||document;Kh.has(s)||Kh.set(s,{});const n=Kh.get(s),i=JSON.stringify(e);return n[i]||(n[i]=new IntersectionObserver(GL,{root:t,...e})),n[i]}function KL(t,e,s){const n=QL(e);return Zf.set(t,s),n.observe(t),()=>{Zf.delete(t),n.unobserve(t)}}const XL={some:0,all:1};class JL extends ni{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:s,margin:n,amount:i="some",once:a}=e,o={root:s?s.current:void 0,rootMargin:n,threshold:typeof i=="number"?i:XL[i]},l=c=>{const{isIntersecting:u}=c;if(this.isInView===u||(this.isInView=u,a&&!u&&this.hasEnteredView))return;u&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",u);const{onViewportEnter:h,onViewportLeave:d}=this.node.getProps(),f=u?h:d;f&&f(c)};return KL(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:s}=this.node;["amount","margin","root"].some(ZL(e,s))&&this.startObserver()}unmount(){}}function ZL({viewport:t={}},{viewport:e={}}={}){return s=>t[s]!==e[s]}const e_={inView:{Feature:JL},tap:{Feature:YL},focus:{Feature:HL},hover:{Feature:WL}};function tb(t,e){if(!Array.isArray(e))return!1;const s=e.length;if(s!==t.length)return!1;for(let n=0;n<s;n++)if(e[n]!==t[n])return!1;return!0}function t_(t){const e={};return t.values.forEach((s,n)=>e[n]=s.get()),e}function s_(t){const e={};return t.values.forEach((s,n)=>e[n]=s.getVelocity()),e}function Pu(t,e,s){const n=t.getProps();return Wp(n,e,s!==void 0?s:n.custom,t_(t),s_(t))}let Hp=tt;const Ei=t=>t*1e3,on=t=>t/1e3,n_={current:!1},sb=t=>Array.isArray(t)&&typeof t[0]=="number";function nb(t){return!!(!t||typeof t=="string"&&ib[t]||sb(t)||Array.isArray(t)&&t.every(nb))}const Pa=([t,e,s,n])=>`cubic-bezier(${t}, ${e}, ${s}, ${n})`,ib={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Pa([0,.65,.55,1]),circOut:Pa([.55,0,1,.45]),backIn:Pa([.31,.01,.66,-.59]),backOut:Pa([.33,1.53,.69,.99])};function rb(t){if(t)return sb(t)?Pa(t):Array.isArray(t)?t.map(rb):ib[t]}function i_(t,e,s,{delay:n=0,duration:i,repeat:a=0,repeatType:o="loop",ease:l,times:c}={}){const u={[e]:s};c&&(u.offset=c);const h=rb(l);return Array.isArray(h)&&(u.easing=h),t.animate(u,{delay:n,duration:i,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:a+1,direction:o==="reverse"?"alternate":"normal"})}function r_(t,{repeat:e,repeatType:s="loop"}){const n=e&&s!=="loop"&&e%2===1?0:t.length-1;return t[n]}const ab=(t,e,s)=>(((1-3*s+3*e)*t+(3*s-6*e))*t+3*e)*t,a_=1e-7,o_=12;function l_(t,e,s,n,i){let a,o,l=0;do o=e+(s-e)/2,a=ab(o,n,i)-t,a>0?s=o:e=o;while(Math.abs(a)>a_&&++l<o_);return o}function Fo(t,e,s,n){if(t===e&&s===n)return tt;const i=a=>l_(a,0,1,t,s);return a=>a===0||a===1?a:ab(i(a),e,n)}const c_=Fo(.42,0,1,1),u_=Fo(0,0,.58,1),ob=Fo(.42,0,.58,1),h_=t=>Array.isArray(t)&&typeof t[0]!="number",lb=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,cb=t=>e=>1-t(1-e),Yp=t=>1-Math.sin(Math.acos(t)),ub=cb(Yp),d_=lb(Yp),hb=Fo(.33,1.53,.69,.99),qp=cb(hb),f_=lb(qp),m_=t=>(t*=2)<1?.5*qp(t):.5*(2-Math.pow(2,-10*(t-1))),p_={linear:tt,easeIn:c_,easeInOut:ob,easeOut:u_,circIn:Yp,circInOut:d_,circOut:ub,backIn:qp,backInOut:f_,backOut:hb,anticipate:m_},Nv=t=>{if(Array.isArray(t)){Hp(t.length===4);const[e,s,n,i]=t;return Fo(e,s,n,i)}else if(typeof t=="string")return p_[t];return t},Gp=(t,e)=>s=>!!(Oo(s)&&yL.test(s)&&s.startsWith(t)||e&&Object.prototype.hasOwnProperty.call(s,e)),db=(t,e,s)=>n=>{if(!Oo(n))return n;const[i,a,o,l]=n.match(Nu);return{[t]:parseFloat(i),[e]:parseFloat(a),[s]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},g_=t=>Gn(0,255,t),Xh={...Zi,transform:t=>Math.round(g_(t))},ji={test:Gp("rgb","red"),parse:db("red","green","blue"),transform:({red:t,green:e,blue:s,alpha:n=1})=>"rgba("+Xh.transform(t)+", "+Xh.transform(e)+", "+Xh.transform(s)+", "+Va(za.transform(n))+")"};function y_(t){let e="",s="",n="",i="";return t.length>5?(e=t.substring(1,3),s=t.substring(3,5),n=t.substring(5,7),i=t.substring(7,9)):(e=t.substring(1,2),s=t.substring(2,3),n=t.substring(3,4),i=t.substring(4,5),e+=e,s+=s,n+=n,i+=i),{red:parseInt(e,16),green:parseInt(s,16),blue:parseInt(n,16),alpha:i?parseInt(i,16)/255:1}}const em={test:Gp("#"),parse:y_,transform:ji.transform},jr={test:Gp("hsl","hue"),parse:db("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:s,alpha:n=1})=>"hsla("+Math.round(t)+", "+Hs.transform(Va(e))+", "+Hs.transform(Va(s))+", "+Va(za.transform(n))+")"},_t={test:t=>ji.test(t)||em.test(t)||jr.test(t),parse:t=>ji.test(t)?ji.parse(t):jr.test(t)?jr.parse(t):em.parse(t),transform:t=>Oo(t)?t:t.hasOwnProperty("red")?ji.transform(t):jr.transform(t)},Qe=(t,e,s)=>-s*t+s*e+t;function Jh(t,e,s){return s<0&&(s+=1),s>1&&(s-=1),s<1/6?t+(e-t)*6*s:s<1/2?e:s<2/3?t+(e-t)*(2/3-s)*6:t}function v_({hue:t,saturation:e,lightness:s,alpha:n}){t/=360,e/=100,s/=100;let i=0,a=0,o=0;if(!e)i=a=o=s;else{const l=s<.5?s*(1+e):s+e-s*e,c=2*s-l;i=Jh(c,l,t+1/3),a=Jh(c,l,t),o=Jh(c,l,t-1/3)}return{red:Math.round(i*255),green:Math.round(a*255),blue:Math.round(o*255),alpha:n}}const Zh=(t,e,s)=>{const n=t*t;return Math.sqrt(Math.max(0,s*(e*e-n)+n))},x_=[em,ji,jr],w_=t=>x_.find(e=>e.test(t));function kv(t){const e=w_(t);let s=e.parse(t);return e===jr&&(s=v_(s)),s}const fb=(t,e)=>{const s=kv(t),n=kv(e),i={...s};return a=>(i.red=Zh(s.red,n.red,a),i.green=Zh(s.green,n.green,a),i.blue=Zh(s.blue,n.blue,a),i.alpha=Qe(s.alpha,n.alpha,a),ji.transform(i))};function S_(t){var e,s;return isNaN(t)&&Oo(t)&&(((e=t.match(Nu))===null||e===void 0?void 0:e.length)||0)+(((s=t.match($S))===null||s===void 0?void 0:s.length)||0)>0}const mb={regex:pL,countKey:"Vars",token:"${v}",parse:tt},pb={regex:$S,countKey:"Colors",token:"${c}",parse:_t.parse},gb={regex:Nu,countKey:"Numbers",token:"${n}",parse:Zi.parse};function ed(t,{regex:e,countKey:s,token:n,parse:i}){const a=t.tokenised.match(e);a&&(t["num"+s]=a.length,t.tokenised=t.tokenised.replace(e,n),t.values.push(...a.map(i)))}function Mc(t){const e=t.toString(),s={value:e,tokenised:e,values:[],numVars:0,numColors:0,numNumbers:0};return s.value.includes("var(--")&&ed(s,mb),ed(s,pb),ed(s,gb),s}function yb(t){return Mc(t).values}function vb(t){const{values:e,numColors:s,numVars:n,tokenised:i}=Mc(t),a=e.length;return o=>{let l=i;for(let c=0;c<a;c++)c<n?l=l.replace(mb.token,o[c]):c<n+s?l=l.replace(pb.token,_t.transform(o[c])):l=l.replace(gb.token,Va(o[c]));return l}}const b_=t=>typeof t=="number"?0:t;function j_(t){const e=yb(t);return vb(t)(e.map(b_))}const Qn={test:S_,parse:yb,createTransformer:vb,getAnimatableNone:j_},xb=(t,e)=>s=>`${s>0?e:t}`;function wb(t,e){return typeof t=="number"?s=>Qe(t,e,s):_t.test(t)?fb(t,e):t.startsWith("var(")?xb(t,e):bb(t,e)}const Sb=(t,e)=>{const s=[...t],n=s.length,i=t.map((a,o)=>wb(a,e[o]));return a=>{for(let o=0;o<n;o++)s[o]=i[o](a);return s}},N_=(t,e)=>{const s={...t,...e},n={};for(const i in s)t[i]!==void 0&&e[i]!==void 0&&(n[i]=wb(t[i],e[i]));return i=>{for(const a in n)s[a]=n[a](i);return s}},bb=(t,e)=>{const s=Qn.createTransformer(e),n=Mc(t),i=Mc(e);return n.numVars===i.numVars&&n.numColors===i.numColors&&n.numNumbers>=i.numNumbers?Wn(Sb(n.values,i.values),s):xb(t,e)},wo=(t,e,s)=>{const n=e-t;return n===0?1:(s-t)/n},Cv=(t,e)=>s=>Qe(t,e,s);function k_(t){return typeof t=="number"?Cv:typeof t=="string"?_t.test(t)?fb:bb:Array.isArray(t)?Sb:typeof t=="object"?N_:Cv}function C_(t,e,s){const n=[],i=s||k_(t[0]),a=t.length-1;for(let o=0;o<a;o++){let l=i(t[o],t[o+1]);if(e){const c=Array.isArray(e)?e[o]||tt:e;l=Wn(c,l)}n.push(l)}return n}function Qp(t,e,{clamp:s=!0,ease:n,mixer:i}={}){const a=t.length;if(Hp(a===e.length),a===1)return()=>e[0];t[0]>t[a-1]&&(t=[...t].reverse(),e=[...e].reverse());const o=C_(e,n,i),l=o.length,c=u=>{let h=0;if(l>1)for(;h<t.length-2&&!(u<t[h+1]);h++);const d=wo(t[h],t[h+1],u);return o[h](d)};return s?u=>c(Gn(t[0],t[a-1],u)):c}function P_(t,e){const s=t[t.length-1];for(let n=1;n<=e;n++){const i=wo(0,e,n);t.push(Qe(s,1,i))}}function T_(t){const e=[0];return P_(e,t.length-1),e}function E_(t,e){return t.map(s=>s*e)}function L_(t,e){return t.map(()=>e||ob).splice(0,t.length-1)}function Ic({duration:t=300,keyframes:e,times:s,ease:n="easeInOut"}){const i=h_(n)?n.map(Nv):Nv(n),a={done:!1,value:e[0]},o=E_(s&&s.length===e.length?s:T_(e),t),l=Qp(o,e,{ease:Array.isArray(i)?i:L_(e,i)});return{calculatedDuration:t,next:c=>(a.value=l(c),a.done=c>=t,a)}}function jb(t,e){return e?t*(1e3/e):0}const __=5;function Nb(t,e,s){const n=Math.max(e-__,0);return jb(s-t(n),e-n)}const td=.001,R_=.01,M_=10,I_=.05,A_=1;function O_({duration:t=800,bounce:e=.25,velocity:s=0,mass:n=1}){let i,a,o=1-e;o=Gn(I_,A_,o),t=Gn(R_,M_,on(t)),o<1?(i=u=>{const h=u*o,d=h*t,f=h-s,y=tm(u,o),p=Math.exp(-d);return td-f/y*p},a=u=>{const d=u*o*t,f=d*s+s,y=Math.pow(o,2)*Math.pow(u,2)*t,p=Math.exp(-d),w=tm(Math.pow(u,2),o);return(-i(u)+td>0?-1:1)*((f-y)*p)/w}):(i=u=>{const h=Math.exp(-u*t),d=(u-s)*t+1;return-td+h*d},a=u=>{const h=Math.exp(-u*t),d=(s-u)*(t*t);return h*d});const l=5/t,c=F_(i,a,l);if(t=Ei(t),isNaN(c))return{stiffness:100,damping:10,duration:t};{const u=Math.pow(c,2)*n;return{stiffness:u,damping:o*2*Math.sqrt(n*u),duration:t}}}const D_=12;function F_(t,e,s){let n=s;for(let i=1;i<D_;i++)n=n-t(n)/e(n);return n}function tm(t,e){return t*Math.sqrt(1-e*e)}const B_=["duration","bounce"],$_=["stiffness","damping","mass"];function Pv(t,e){return e.some(s=>t[s]!==void 0)}function z_(t){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...t};if(!Pv(t,$_)&&Pv(t,B_)){const s=O_(t);e={...e,...s,mass:1},e.isResolvedFromDuration=!0}return e}function kb({keyframes:t,restDelta:e,restSpeed:s,...n}){const i=t[0],a=t[t.length-1],o={done:!1,value:i},{stiffness:l,damping:c,mass:u,duration:h,velocity:d,isResolvedFromDuration:f}=z_({...n,velocity:-on(n.velocity||0)}),y=d||0,p=c/(2*Math.sqrt(l*u)),w=a-i,g=on(Math.sqrt(l/u)),m=Math.abs(w)<5;s||(s=m?.01:2),e||(e=m?.005:.5);let x;if(p<1){const S=tm(g,p);x=N=>{const j=Math.exp(-p*g*N);return a-j*((y+p*g*w)/S*Math.sin(S*N)+w*Math.cos(S*N))}}else if(p===1)x=S=>a-Math.exp(-g*S)*(w+(y+g*w)*S);else{const S=g*Math.sqrt(p*p-1);x=N=>{const j=Math.exp(-p*g*N),P=Math.min(S*N,300);return a-j*((y+p*g*w)*Math.sinh(P)+S*w*Math.cosh(P))/S}}return{calculatedDuration:f&&h||null,next:S=>{const N=x(S);if(f)o.done=S>=h;else{let j=y;S!==0&&(p<1?j=Nb(x,S,N):j=0);const P=Math.abs(j)<=s,E=Math.abs(a-N)<=e;o.done=P&&E}return o.value=o.done?a:N,o}}}function Tv({keyframes:t,velocity:e=0,power:s=.8,timeConstant:n=325,bounceDamping:i=10,bounceStiffness:a=500,modifyTarget:o,min:l,max:c,restDelta:u=.5,restSpeed:h}){const d=t[0],f={done:!1,value:d},y=T=>l!==void 0&&T<l||c!==void 0&&T>c,p=T=>l===void 0?c:c===void 0||Math.abs(l-T)<Math.abs(c-T)?l:c;let w=s*e;const g=d+w,m=o===void 0?g:o(g);m!==g&&(w=m-d);const x=T=>-w*Math.exp(-T/n),S=T=>m+x(T),N=T=>{const R=x(T),M=S(T);f.done=Math.abs(R)<=u,f.value=f.done?m:M};let j,P;const E=T=>{y(f.value)&&(j=T,P=kb({keyframes:[f.value,p(f.value)],velocity:Nb(S,T,f.value),damping:i,stiffness:a,restDelta:u,restSpeed:h}))};return E(0),{calculatedDuration:null,next:T=>{let R=!1;return!P&&j===void 0&&(R=!0,N(T),E(T)),j!==void 0&&T>j?P.next(T-j):(!R&&N(T),f)}}}const V_=t=>{const e=({timestamp:s})=>t(s);return{start:()=>Ae.update(e,!0),stop:()=>Ys(e),now:()=>kt.isProcessing?kt.timestamp:performance.now()}},Ev=2e4;function Lv(t){let e=0;const s=50;let n=t.next(e);for(;!n.done&&e<Ev;)e+=s,n=t.next(e);return e>=Ev?1/0:e}const U_={decay:Tv,inertia:Tv,tween:Ic,keyframes:Ic,spring:kb};function Ac({autoplay:t=!0,delay:e=0,driver:s=V_,keyframes:n,type:i="keyframes",repeat:a=0,repeatDelay:o=0,repeatType:l="loop",onPlay:c,onStop:u,onComplete:h,onUpdate:d,...f}){let y=1,p=!1,w,g;const m=()=>{g=new Promise(Q=>{w=Q})};m();let x;const S=U_[i]||Ic;let N;S!==Ic&&typeof n[0]!="number"&&(N=Qp([0,100],n,{clamp:!1}),n=[0,100]);const j=S({...f,keyframes:n});let P;l==="mirror"&&(P=S({...f,keyframes:[...n].reverse(),velocity:-(f.velocity||0)}));let E="idle",T=null,R=null,M=null;j.calculatedDuration===null&&a&&(j.calculatedDuration=Lv(j));const{calculatedDuration:_}=j;let O=1/0,A=1/0;_!==null&&(O=_+o,A=O*(a+1)-o);let B=0;const H=Q=>{if(R===null)return;y>0&&(R=Math.min(R,Q)),y<0&&(R=Math.min(Q-A/y,R)),T!==null?B=T:B=Math.round(Q-R)*y;const se=B-e*(y>=0?1:-1),ye=y>=0?se<0:se>A;B=Math.max(se,0),E==="finished"&&T===null&&(B=A);let q=B,W=j;if(a){const we=Math.min(B,A)/O;let he=Math.floor(we),Ce=we%1;!Ce&&we>=1&&(Ce=1),Ce===1&&he--,he=Math.min(he,a+1),!!(he%2)&&(l==="reverse"?(Ce=1-Ce,o&&(Ce-=o/O)):l==="mirror"&&(W=P)),q=Gn(0,1,Ce)*O}const Y=ye?{done:!1,value:n[0]}:W.next(q);N&&(Y.value=N(Y.value));let{done:re}=Y;!ye&&_!==null&&(re=y>=0?B>=A:B<=0);const be=T===null&&(E==="finished"||E==="running"&&re);return d&&d(Y.value),be&&D(),Y},F=()=>{x&&x.stop(),x=void 0},K=()=>{E="idle",F(),w(),m(),R=M=null},D=()=>{E="finished",h&&h(),F(),w()},V=()=>{if(p)return;x||(x=s(H));const Q=x.now();c&&c(),T!==null?R=Q-T:(!R||E==="finished")&&(R=Q),E==="finished"&&m(),M=R,T=null,E="running",x.start()};t&&V();const $={then(Q,se){return g.then(Q,se)},get time(){return on(B)},set time(Q){Q=Ei(Q),B=Q,T!==null||!x||y===0?T=Q:R=x.now()-Q/y},get duration(){const Q=j.calculatedDuration===null?Lv(j):j.calculatedDuration;return on(Q)},get speed(){return y},set speed(Q){Q===y||!x||(y=Q,$.time=on(B))},get state(){return E},play:V,pause:()=>{E="paused",T=B},stop:()=>{p=!0,E!=="idle"&&(E="idle",u&&u(),K())},cancel:()=>{M!==null&&H(M),K()},complete:()=>{E="finished"},sample:Q=>(R=0,H(Q))};return $}function W_(t){let e;return()=>(e===void 0&&(e=t()),e)}const H_=W_(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),Y_=new Set(["opacity","clipPath","filter","transform","backgroundColor"]),gl=10,q_=2e4,G_=(t,e)=>e.type==="spring"||t==="backgroundColor"||!nb(e.ease);function Q_(t,e,{onUpdate:s,onComplete:n,...i}){if(!(H_()&&Y_.has(e)&&!i.repeatDelay&&i.repeatType!=="mirror"&&i.damping!==0&&i.type!=="inertia"))return!1;let o=!1,l,c,u=!1;const h=()=>{c=new Promise(S=>{l=S})};h();let{keyframes:d,duration:f=300,ease:y,times:p}=i;if(G_(e,i)){const S=Ac({...i,repeat:0,delay:0});let N={done:!1,value:d[0]};const j=[];let P=0;for(;!N.done&&P<q_;)N=S.sample(P),j.push(N.value),P+=gl;p=void 0,d=j,f=P-gl,y="linear"}const w=i_(t.owner.current,e,d,{...i,duration:f,ease:y,times:p}),g=()=>{u=!1,w.cancel()},m=()=>{u=!0,Ae.update(g),l(),h()};return w.onfinish=()=>{u||(t.set(r_(d,i)),n&&n(),m())},{then(S,N){return c.then(S,N)},attachTimeline(S){return w.timeline=S,w.onfinish=null,tt},get time(){return on(w.currentTime||0)},set time(S){w.currentTime=Ei(S)},get speed(){return w.playbackRate},set speed(S){w.playbackRate=S},get duration(){return on(f)},play:()=>{o||(w.play(),Ys(g))},pause:()=>w.pause(),stop:()=>{if(o=!0,w.playState==="idle")return;const{currentTime:S}=w;if(S){const N=Ac({...i,autoplay:!1});t.setWithVelocity(N.sample(S-gl).value,N.sample(S).value,gl)}m()},complete:()=>{u||w.finish()},cancel:m}}function K_({keyframes:t,delay:e,onUpdate:s,onComplete:n}){const i=()=>(s&&s(t[t.length-1]),n&&n(),{time:0,speed:1,duration:0,play:tt,pause:tt,stop:tt,then:a=>(a(),Promise.resolve()),cancel:tt,complete:tt});return e?Ac({keyframes:[0,1],duration:0,delay:e,onComplete:i}):i()}const X_={type:"spring",stiffness:500,damping:25,restSpeed:10},J_=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),Z_={type:"keyframes",duration:.8},eR={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},tR=(t,{keyframes:e})=>e.length>2?Z_:Ji.has(t)?t.startsWith("scale")?J_(e[1]):X_:eR,sm=(t,e)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Qn.test(e)||e==="0")&&!e.startsWith("url(")),sR=new Set(["brightness","contrast","saturate","opacity"]);function nR(t){const[e,s]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[n]=s.match(Nu)||[];if(!n)return t;const i=s.replace(n,"");let a=sR.has(e)?1:0;return n!==s&&(a*=100),e+"("+a+i+")"}const iR=/([a-z-]*)\(.*?\)/g,nm={...Qn,getAnimatableNone:t=>{const e=t.match(iR);return e?e.map(nR).join(" "):t}},rR={...zS,color:_t,backgroundColor:_t,outlineColor:_t,fill:_t,stroke:_t,borderColor:_t,borderTopColor:_t,borderRightColor:_t,borderBottomColor:_t,borderLeftColor:_t,filter:nm,WebkitFilter:nm},Kp=t=>rR[t];function Cb(t,e){let s=Kp(t);return s!==nm&&(s=Qn),s.getAnimatableNone?s.getAnimatableNone(e):void 0}const Pb=t=>/^0[^.\s]+$/.test(t);function aR(t){if(typeof t=="number")return t===0;if(t!==null)return t==="none"||t==="0"||Pb(t)}function oR(t,e,s,n){const i=sm(e,s);let a;Array.isArray(s)?a=[...s]:a=[null,s];const o=n.from!==void 0?n.from:t.get();let l;const c=[];for(let u=0;u<a.length;u++)a[u]===null&&(a[u]=u===0?o:a[u-1]),aR(a[u])&&c.push(u),typeof a[u]=="string"&&a[u]!=="none"&&a[u]!=="0"&&(l=a[u]);if(i&&c.length&&l)for(let u=0;u<c.length;u++){const h=c[u];a[h]=Cb(e,l)}return a}function lR({when:t,delay:e,delayChildren:s,staggerChildren:n,staggerDirection:i,repeat:a,repeatType:o,repeatDelay:l,from:c,elapsed:u,...h}){return!!Object.keys(h).length}function Xp(t,e){return t[e]||t.default||t}const cR={skipAnimations:!1},Jp=(t,e,s,n={})=>i=>{const a=Xp(n,t)||{},o=a.delay||n.delay||0;let{elapsed:l=0}=n;l=l-Ei(o);const c=oR(e,t,s,a),u=c[0],h=c[c.length-1],d=sm(t,u),f=sm(t,h);let y={keyframes:c,velocity:e.getVelocity(),ease:"easeOut",...a,delay:-l,onUpdate:p=>{e.set(p),a.onUpdate&&a.onUpdate(p)},onComplete:()=>{i(),a.onComplete&&a.onComplete()}};if(lR(a)||(y={...y,...tR(t,y)}),y.duration&&(y.duration=Ei(y.duration)),y.repeatDelay&&(y.repeatDelay=Ei(y.repeatDelay)),!d||!f||n_.current||a.type===!1||cR.skipAnimations)return K_(y);if(!n.isHandoff&&e.owner&&e.owner.current instanceof HTMLElement&&!e.owner.getProps().onUpdate){const p=Q_(e,t,y);if(p)return p}return Ac(y)};function Oc(t){return!!(Kt(t)&&t.add)}const Tb=t=>/^\-?\d*\.?\d+$/.test(t);function Zp(t,e){t.indexOf(e)===-1&&t.push(e)}function eg(t,e){const s=t.indexOf(e);s>-1&&t.splice(s,1)}class tg{constructor(){this.subscriptions=[]}add(e){return Zp(this.subscriptions,e),()=>eg(this.subscriptions,e)}notify(e,s,n){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](e,s,n);else for(let a=0;a<i;a++){const o=this.subscriptions[a];o&&o(e,s,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const uR=t=>!isNaN(parseFloat(t)),Ua={current:void 0};class hR{constructor(e,s={}){this.version="10.18.0",this.timeDelta=0,this.lastUpdated=0,this.canTrackVelocity=!1,this.events={},this.updateAndNotify=(n,i=!0)=>{this.prev=this.current,this.current=n;const{delta:a,timestamp:o}=kt;this.lastUpdated!==o&&(this.timeDelta=a,this.lastUpdated=o,Ae.postRender(this.scheduleVelocityCheck)),this.prev!==this.current&&this.events.change&&this.events.change.notify(this.current),this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()),i&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.scheduleVelocityCheck=()=>Ae.postRender(this.velocityCheck),this.velocityCheck=({timestamp:n})=>{n!==this.lastUpdated&&(this.prev=this.current,this.events.velocityChange&&this.events.velocityChange.notify(this.getVelocity()))},this.hasAnimated=!1,this.prev=this.current=e,this.canTrackVelocity=uR(this.current),this.owner=s.owner}onChange(e){return this.on("change",e)}on(e,s){this.events[e]||(this.events[e]=new tg);const n=this.events[e].add(s);return e==="change"?()=>{n(),Ae.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,s){this.passiveEffect=e,this.stopPassiveEffect=s}set(e,s=!0){!s||!this.passiveEffect?this.updateAndNotify(e,s):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,s,n){this.set(s),this.prev=e,this.timeDelta=n}jump(e){this.updateAndNotify(e),this.prev=e,this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return Ua.current&&Ua.current.push(this),this.current}getPrevious(){return this.prev}getVelocity(){return this.canTrackVelocity?jb(parseFloat(this.current)-parseFloat(this.prev),this.timeDelta):0}start(e){return this.stop(),new Promise(s=>{this.hasAnimated=!0,this.animation=e(s),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Bi(t,e){return new hR(t,e)}const Eb=t=>e=>e.test(t),dR={test:t=>t==="auto",parse:t=>t},Lb=[Zi,ce,Hs,bn,xL,vL,dR],va=t=>Lb.find(Eb(t)),fR=[...Lb,_t,Qn],mR=t=>fR.find(Eb(t));function pR(t,e,s){t.hasValue(e)?t.getValue(e).set(s):t.addValue(e,Bi(s))}function gR(t,e){const s=Pu(t,e);let{transitionEnd:n={},transition:i={},...a}=s?t.makeTargetAnimatable(s,!1):{};a={...a,...n};for(const o in a){const l=ML(a[o]);pR(t,o,l)}}function yR(t,e,s){var n,i;const a=Object.keys(e).filter(l=>!t.hasValue(l)),o=a.length;if(o)for(let l=0;l<o;l++){const c=a[l],u=e[c];let h=null;Array.isArray(u)&&(h=u[0]),h===null&&(h=(i=(n=s[c])!==null&&n!==void 0?n:t.readValue(c))!==null&&i!==void 0?i:e[c]),h!=null&&(typeof h=="string"&&(Tb(h)||Pb(h))?h=parseFloat(h):!mR(h)&&Qn.test(u)&&(h=Cb(c,u)),t.addValue(c,Bi(h,{owner:t})),s[c]===void 0&&(s[c]=h),h!==null&&t.setBaseTarget(c,h))}}function vR(t,e){return e?(e[t]||e.default||e).from:void 0}function xR(t,e,s){const n={};for(const i in t){const a=vR(i,e);if(a!==void 0)n[i]=a;else{const o=s.getValue(i);o&&(n[i]=o.get())}}return n}function wR({protectedKeys:t,needsAnimating:e},s){const n=t.hasOwnProperty(s)&&e[s]!==!0;return e[s]=!1,n}function SR(t,e){const s=t.get();if(Array.isArray(e)){for(let n=0;n<e.length;n++)if(e[n]!==s)return!0}else return s!==e}function _b(t,e,{delay:s=0,transitionOverride:n,type:i}={}){let{transition:a=t.getDefaultTransition(),transitionEnd:o,...l}=t.makeTargetAnimatable(e);const c=t.getValue("willChange");n&&(a=n);const u=[],h=i&&t.animationState&&t.animationState.getState()[i];for(const d in l){const f=t.getValue(d),y=l[d];if(!f||y===void 0||h&&wR(h,d))continue;const p={delay:s,elapsed:0,...Xp(a||{},d)};if(window.HandoffAppearAnimations){const m=t.getProps()[IS];if(m){const x=window.HandoffAppearAnimations(m,d,f,Ae);x!==null&&(p.elapsed=x,p.isHandoff=!0)}}let w=!p.isHandoff&&!SR(f,y);if(p.type==="spring"&&(f.getVelocity()||p.velocity)&&(w=!1),f.animation&&(w=!1),w)continue;f.start(Jp(d,f,y,t.shouldReduceMotion&&Ji.has(d)?{type:!1}:p));const g=f.animation;Oc(c)&&(c.add(d),g.then(()=>c.remove(d))),u.push(g)}return o&&Promise.all(u).then(()=>{o&&gR(t,o)}),u}function im(t,e,s={}){const n=Pu(t,e,s.custom);let{transition:i=t.getDefaultTransition()||{}}=n||{};s.transitionOverride&&(i=s.transitionOverride);const a=n?()=>Promise.all(_b(t,n,s)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:h,staggerDirection:d}=i;return bR(t,e,u+c,h,d,s)}:()=>Promise.resolve(),{when:l}=i;if(l){const[c,u]=l==="beforeChildren"?[a,o]:[o,a];return c().then(()=>u())}else return Promise.all([a(),o(s.delay)])}function bR(t,e,s=0,n=0,i=1,a){const o=[],l=(t.variantChildren.size-1)*n,c=i===1?(u=0)=>u*n:(u=0)=>l-u*n;return Array.from(t.variantChildren).sort(jR).forEach((u,h)=>{u.notify("AnimationStart",e),o.push(im(u,e,{...a,delay:s+c(h)}).then(()=>u.notify("AnimationComplete",e)))}),Promise.all(o)}function jR(t,e){return t.sortNodePosition(e)}function NR(t,e,s={}){t.notify("AnimationStart",e);let n;if(Array.isArray(e)){const i=e.map(a=>im(t,a,s));n=Promise.all(i)}else if(typeof e=="string")n=im(t,e,s);else{const i=typeof e=="function"?Pu(t,e,s.custom):e;n=Promise.all(_b(t,i,s))}return n.then(()=>t.notify("AnimationComplete",e))}const kR=[...Ap].reverse(),CR=Ap.length;function PR(t){return e=>Promise.all(e.map(({animation:s,options:n})=>NR(t,s,n)))}function TR(t){let e=PR(t);const s=LR();let n=!0;const i=(c,u)=>{const h=Pu(t,u);if(h){const{transition:d,transitionEnd:f,...y}=h;c={...c,...y,...f}}return c};function a(c){e=c(t)}function o(c,u){const h=t.getProps(),d=t.getVariantContext(!0)||{},f=[],y=new Set;let p={},w=1/0;for(let m=0;m<CR;m++){const x=kR[m],S=s[x],N=h[x]!==void 0?h[x]:d[x],j=vo(N),P=x===u?S.isActive:null;P===!1&&(w=m);let E=N===d[x]&&N!==h[x]&&j;if(E&&n&&t.manuallyAnimateOnMount&&(E=!1),S.protectedKeys={...p},!S.isActive&&P===null||!N&&!S.prevProp||bu(N)||typeof N=="boolean")continue;let R=ER(S.prevProp,N)||x===u&&S.isActive&&!E&&j||m>w&&j,M=!1;const _=Array.isArray(N)?N:[N];let O=_.reduce(i,{});P===!1&&(O={});const{prevResolvedValues:A={}}=S,B={...A,...O},H=F=>{R=!0,y.has(F)&&(M=!0,y.delete(F)),S.needsAnimating[F]=!0};for(const F in B){const K=O[F],D=A[F];if(p.hasOwnProperty(F))continue;let V=!1;Rc(K)&&Rc(D)?V=!tb(K,D):V=K!==D,V?K!==void 0?H(F):y.add(F):K!==void 0&&y.has(F)?H(F):S.protectedKeys[F]=!0}S.prevProp=N,S.prevResolvedValues=O,S.isActive&&(p={...p,...O}),n&&t.blockInitialAnimation&&(R=!1),R&&(!E||M)&&f.push(..._.map(F=>({animation:F,options:{type:x,...c}})))}if(y.size){const m={};y.forEach(x=>{const S=t.getBaseTarget(x);S!==void 0&&(m[x]=S)}),f.push({animation:m})}let g=!!f.length;return n&&(h.initial===!1||h.initial===h.animate)&&!t.manuallyAnimateOnMount&&(g=!1),n=!1,g?e(f):Promise.resolve()}function l(c,u,h){var d;if(s[c].isActive===u)return Promise.resolve();(d=t.variantChildren)===null||d===void 0||d.forEach(y=>{var p;return(p=y.animationState)===null||p===void 0?void 0:p.setActive(c,u)}),s[c].isActive=u;const f=o(h,c);for(const y in s)s[y].protectedKeys={};return f}return{animateChanges:o,setActive:l,setAnimateFunction:a,getState:()=>s}}function ER(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!tb(e,t):!1}function ci(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function LR(){return{animate:ci(!0),whileInView:ci(),whileHover:ci(),whileTap:ci(),whileDrag:ci(),whileFocus:ci(),exit:ci()}}class _R extends ni{constructor(e){super(e),e.animationState||(e.animationState=TR(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();this.unmount(),bu(e)&&(this.unmount=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:s}=this.node.prevProps||{};e!==s&&this.updateAnimationControlsSubscription()}unmount(){}}let RR=0;class MR extends ni{constructor(){super(...arguments),this.id=RR++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:s,custom:n}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const a=this.node.animationState.setActive("exit",!e,{custom:n??this.node.getProps().custom});s&&!e&&a.then(()=>s(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const IR={animation:{Feature:_R},exit:{Feature:MR}},_v=(t,e)=>Math.abs(t-e);function AR(t,e){const s=_v(t.x,e.x),n=_v(t.y,e.y);return Math.sqrt(s**2+n**2)}class Rb{constructor(e,s,{transformPagePoint:n,contextWindow:i,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const d=nd(this.lastMoveEventInfo,this.history),f=this.startEvent!==null,y=AR(d.offset,{x:0,y:0})>=3;if(!f&&!y)return;const{point:p}=d,{timestamp:w}=kt;this.history.push({...p,timestamp:w});const{onStart:g,onMove:m}=this.handlers;f||(g&&g(this.lastMoveEvent,d),this.startEvent=this.lastMoveEvent),m&&m(this.lastMoveEvent,d)},this.handlePointerMove=(d,f)=>{this.lastMoveEvent=d,this.lastMoveEventInfo=sd(f,this.transformPagePoint),Ae.update(this.updatePoint,!0)},this.handlePointerUp=(d,f)=>{this.end();const{onEnd:y,onSessionEnd:p,resumeAnimation:w}=this.handlers;if(this.dragSnapToOrigin&&w&&w(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=nd(d.type==="pointercancel"?this.lastMoveEventInfo:sd(f,this.transformPagePoint),this.history);this.startEvent&&y&&y(d,g),p&&p(d,g)},!KS(e))return;this.dragSnapToOrigin=a,this.handlers=s,this.transformPagePoint=n,this.contextWindow=i||window;const o=Cu(e),l=sd(o,this.transformPagePoint),{point:c}=l,{timestamp:u}=kt;this.history=[{...c,timestamp:u}];const{onSessionStart:h}=s;h&&h(e,nd(l,this.history)),this.removeListeners=Wn(an(this.contextWindow,"pointermove",this.handlePointerMove),an(this.contextWindow,"pointerup",this.handlePointerUp),an(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),Ys(this.updatePoint)}}function sd(t,e){return e?{point:e(t.point)}:t}function Rv(t,e){return{x:t.x-e.x,y:t.y-e.y}}function nd({point:t},e){return{point:t,delta:Rv(t,Mb(e)),offset:Rv(t,OR(e)),velocity:DR(e,.1)}}function OR(t){return t[0]}function Mb(t){return t[t.length-1]}function DR(t,e){if(t.length<2)return{x:0,y:0};let s=t.length-1,n=null;const i=Mb(t);for(;s>=0&&(n=t[s],!(i.timestamp-n.timestamp>Ei(e)));)s--;if(!n)return{x:0,y:0};const a=on(i.timestamp-n.timestamp);if(a===0)return{x:0,y:0};const o={x:(i.x-n.x)/a,y:(i.y-n.y)/a};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function rs(t){return t.max-t.min}function rm(t,e=0,s=.01){return Math.abs(t-e)<=s}function Mv(t,e,s,n=.5){t.origin=n,t.originPoint=Qe(e.min,e.max,t.origin),t.scale=rs(s)/rs(e),(rm(t.scale,1,1e-4)||isNaN(t.scale))&&(t.scale=1),t.translate=Qe(s.min,s.max,t.origin)-t.originPoint,(rm(t.translate)||isNaN(t.translate))&&(t.translate=0)}function Wa(t,e,s,n){Mv(t.x,e.x,s.x,n?n.originX:void 0),Mv(t.y,e.y,s.y,n?n.originY:void 0)}function Iv(t,e,s){t.min=s.min+e.min,t.max=t.min+rs(e)}function FR(t,e,s){Iv(t.x,e.x,s.x),Iv(t.y,e.y,s.y)}function Av(t,e,s){t.min=e.min-s.min,t.max=t.min+rs(e)}function Ha(t,e,s){Av(t.x,e.x,s.x),Av(t.y,e.y,s.y)}function BR(t,{min:e,max:s},n){return e!==void 0&&t<e?t=n?Qe(e,t,n.min):Math.max(t,e):s!==void 0&&t>s&&(t=n?Qe(s,t,n.max):Math.min(t,s)),t}function Ov(t,e,s){return{min:e!==void 0?t.min+e:void 0,max:s!==void 0?t.max+s-(t.max-t.min):void 0}}function $R(t,{top:e,left:s,bottom:n,right:i}){return{x:Ov(t.x,s,i),y:Ov(t.y,e,n)}}function Dv(t,e){let s=e.min-t.min,n=e.max-t.max;return e.max-e.min<t.max-t.min&&([s,n]=[n,s]),{min:s,max:n}}function zR(t,e){return{x:Dv(t.x,e.x),y:Dv(t.y,e.y)}}function VR(t,e){let s=.5;const n=rs(t),i=rs(e);return i>n?s=wo(e.min,e.max-n,t.min):n>i&&(s=wo(t.min,t.max-i,e.min)),Gn(0,1,s)}function UR(t,e){const s={};return e.min!==void 0&&(s.min=e.min-t.min),e.max!==void 0&&(s.max=e.max-t.min),s}const am=.35;function WR(t=am){return t===!1?t=0:t===!0&&(t=am),{x:Fv(t,"left","right"),y:Fv(t,"top","bottom")}}function Fv(t,e,s){return{min:Bv(t,e),max:Bv(t,s)}}function Bv(t,e){return typeof t=="number"?t:t[e]||0}const $v=()=>({translate:0,scale:1,origin:0,originPoint:0}),Nr=()=>({x:$v(),y:$v()}),zv=()=>({min:0,max:0}),at=()=>({x:zv(),y:zv()});function ps(t){return[t("x"),t("y")]}function Ib({top:t,left:e,right:s,bottom:n}){return{x:{min:e,max:s},y:{min:t,max:n}}}function HR({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function YR(t,e){if(!e)return t;const s=e({x:t.left,y:t.top}),n=e({x:t.right,y:t.bottom});return{top:s.y,left:s.x,bottom:n.y,right:n.x}}function id(t){return t===void 0||t===1}function om({scale:t,scaleX:e,scaleY:s}){return!id(t)||!id(e)||!id(s)}function mi(t){return om(t)||Ab(t)||t.z||t.rotate||t.rotateX||t.rotateY}function Ab(t){return Vv(t.x)||Vv(t.y)}function Vv(t){return t&&t!=="0%"}function Dc(t,e,s){const n=t-s,i=e*n;return s+i}function Uv(t,e,s,n,i){return i!==void 0&&(t=Dc(t,i,n)),Dc(t,s,n)+e}function lm(t,e=0,s=1,n,i){t.min=Uv(t.min,e,s,n,i),t.max=Uv(t.max,e,s,n,i)}function Ob(t,{x:e,y:s}){lm(t.x,e.translate,e.scale,e.originPoint),lm(t.y,s.translate,s.scale,s.originPoint)}function qR(t,e,s,n=!1){const i=s.length;if(!i)return;e.x=e.y=1;let a,o;for(let l=0;l<i;l++){a=s[l],o=a.projectionDelta;const c=a.instance;c&&c.style&&c.style.display==="contents"||(n&&a.options.layoutScroll&&a.scroll&&a!==a.root&&kr(t,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,Ob(t,o)),n&&mi(a.latestValues)&&kr(t,a.latestValues))}e.x=Wv(e.x),e.y=Wv(e.y)}function Wv(t){return Number.isInteger(t)||t>1.0000000000001||t<.999999999999?t:1}function kn(t,e){t.min=t.min+e,t.max=t.max+e}function Hv(t,e,[s,n,i]){const a=e[i]!==void 0?e[i]:.5,o=Qe(t.min,t.max,a);lm(t,e[s],e[n],o,e.scale)}const GR=["x","scaleX","originX"],QR=["y","scaleY","originY"];function kr(t,e){Hv(t.x,e,GR),Hv(t.y,e,QR)}function Db(t,e){return Ib(YR(t.getBoundingClientRect(),e))}function KR(t,e,s){const n=Db(t,s),{scroll:i}=e;return i&&(kn(n.x,i.offset.x),kn(n.y,i.offset.y)),n}const Fb=({current:t})=>t?t.ownerDocument.defaultView:null,XR=new WeakMap;class JR{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=at(),this.visualElement=e}start(e,{snapToCursor:s=!1}={}){const{presenceContext:n}=this.visualElement;if(n&&n.isPresent===!1)return;const i=h=>{const{dragSnapToOrigin:d}=this.getProps();d?this.pauseAnimation():this.stopAnimation(),s&&this.snapToCursor(Cu(h,"page").point)},a=(h,d)=>{const{drag:f,dragPropagation:y,onDragStart:p}=this.getProps();if(f&&!y&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=JS(f),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ps(g=>{let m=this.getAxisMotionValue(g).get()||0;if(Hs.test(m)){const{projection:x}=this.visualElement;if(x&&x.layout){const S=x.layout.layoutBox[g];S&&(m=rs(S)*(parseFloat(m)/100))}}this.originPoint[g]=m}),p&&Ae.update(()=>p(h,d),!1,!0);const{animationState:w}=this.visualElement;w&&w.setActive("whileDrag",!0)},o=(h,d)=>{const{dragPropagation:f,dragDirectionLock:y,onDirectionLock:p,onDrag:w}=this.getProps();if(!f&&!this.openGlobalLock)return;const{offset:g}=d;if(y&&this.currentDirection===null){this.currentDirection=ZR(g),this.currentDirection!==null&&p&&p(this.currentDirection);return}this.updateAxis("x",d.point,g),this.updateAxis("y",d.point,g),this.visualElement.render(),w&&w(h,d)},l=(h,d)=>this.stop(h,d),c=()=>ps(h=>{var d;return this.getAnimationState(h)==="paused"&&((d=this.getAxisMotionValue(h).animation)===null||d===void 0?void 0:d.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new Rb(e,{onSessionStart:i,onStart:a,onMove:o,onSessionEnd:l,resumeAnimation:c},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,contextWindow:Fb(this.visualElement)})}stop(e,s){const n=this.isDragging;if(this.cancel(),!n)return;const{velocity:i}=s;this.startAnimation(i);const{onDragEnd:a}=this.getProps();a&&Ae.update(()=>a(e,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:s}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),s&&s.setActive("whileDrag",!1)}updateAxis(e,s,n){const{drag:i}=this.getProps();if(!n||!yl(e,i,this.currentDirection))return;const a=this.getAxisMotionValue(e);let o=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(o=BR(o,this.constraints[e],this.elastic[e])),a.set(o)}resolveConstraints(){var e;const{dragConstraints:s,dragElastic:n}=this.getProps(),i=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,a=this.constraints;s&&br(s)?this.constraints||(this.constraints=this.resolveRefConstraints()):s&&i?this.constraints=$R(i.layoutBox,s):this.constraints=!1,this.elastic=WR(n),a!==this.constraints&&i&&this.constraints&&!this.hasMutatedConstraints&&ps(o=>{this.getAxisMotionValue(o)&&(this.constraints[o]=UR(i.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:s}=this.getProps();if(!e||!br(e))return!1;const n=e.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const a=KR(n,i.root,this.visualElement.getTransformPagePoint());let o=zR(i.layout.layoutBox,a);if(s){const l=s(HR(o));this.hasMutatedConstraints=!!l,l&&(o=Ib(l))}return o}startAnimation(e){const{drag:s,dragMomentum:n,dragElastic:i,dragTransition:a,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},u=ps(h=>{if(!yl(h,s,this.currentDirection))return;let d=c&&c[h]||{};o&&(d={min:0,max:0});const f=i?200:1e6,y=i?40:1e7,p={type:"inertia",velocity:n?e[h]:0,bounceStiffness:f,bounceDamping:y,timeConstant:750,restDelta:1,restSpeed:10,...a,...d};return this.startAxisValueAnimation(h,p)});return Promise.all(u).then(l)}startAxisValueAnimation(e,s){const n=this.getAxisMotionValue(e);return n.start(Jp(e,n,0,s))}stopAnimation(){ps(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){ps(e=>{var s;return(s=this.getAxisMotionValue(e).animation)===null||s===void 0?void 0:s.pause()})}getAnimationState(e){var s;return(s=this.getAxisMotionValue(e).animation)===null||s===void 0?void 0:s.state}getAxisMotionValue(e){const s="_drag"+e.toUpperCase(),n=this.visualElement.getProps(),i=n[s];return i||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){ps(s=>{const{drag:n}=this.getProps();if(!yl(s,n,this.currentDirection))return;const{projection:i}=this.visualElement,a=this.getAxisMotionValue(s);if(i&&i.layout){const{min:o,max:l}=i.layout.layoutBox[s];a.set(e[s]-Qe(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:s}=this.getProps(),{projection:n}=this.visualElement;if(!br(s)||!n||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};ps(o=>{const l=this.getAxisMotionValue(o);if(l){const c=l.get();i[o]=VR({min:c,max:c},this.constraints[o])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),ps(o=>{if(!yl(o,e,null))return;const l=this.getAxisMotionValue(o),{min:c,max:u}=this.constraints[o];l.set(Qe(c,u,i[o]))})}addListeners(){if(!this.visualElement.current)return;XR.set(this.visualElement,this);const e=this.visualElement.current,s=an(e,"pointerdown",c=>{const{drag:u,dragListener:h=!0}=this.getProps();u&&h&&this.start(c)}),n=()=>{const{dragConstraints:c}=this.getProps();br(c)&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,a=i.addEventListener("measure",n);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),n();const o=tn(window,"resize",()=>this.scalePositionWithinConstraints()),l=i.addEventListener("didUpdate",({delta:c,hasLayoutChanged:u})=>{this.isDragging&&u&&(ps(h=>{const d=this.getAxisMotionValue(h);d&&(this.originPoint[h]+=c[h].translate,d.set(d.get()+c[h].translate))}),this.visualElement.render())});return()=>{o(),s(),a(),l&&l()}}getProps(){const e=this.visualElement.getProps(),{drag:s=!1,dragDirectionLock:n=!1,dragPropagation:i=!1,dragConstraints:a=!1,dragElastic:o=am,dragMomentum:l=!0}=e;return{...e,drag:s,dragDirectionLock:n,dragPropagation:i,dragConstraints:a,dragElastic:o,dragMomentum:l}}}function yl(t,e,s){return(e===!0||e===t)&&(s===null||s===t)}function ZR(t,e=10){let s=null;return Math.abs(t.y)>e?s="y":Math.abs(t.x)>e&&(s="x"),s}class eM extends ni{constructor(e){super(e),this.removeGroupControls=tt,this.removeListeners=tt,this.controls=new JR(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||tt}unmount(){this.removeGroupControls(),this.removeListeners()}}const Yv=t=>(e,s)=>{t&&Ae.update(()=>t(e,s))};class tM extends ni{constructor(){super(...arguments),this.removePointerDownListener=tt}onPointerDown(e){this.session=new Rb(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Fb(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:s,onPan:n,onPanEnd:i}=this.node.getProps();return{onSessionStart:Yv(e),onStart:Yv(s),onMove:n,onEnd:(a,o)=>{delete this.session,i&&Ae.update(()=>i(a,o))}}}mount(){this.removePointerDownListener=an(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}function sM(){const t=b.useContext(xu);if(t===null)return[!0,null];const{isPresent:e,onExitComplete:s,register:n}=t,i=b.useId();return b.useEffect(()=>n(i),[]),!e&&s?[!1,()=>s&&s(i)]:[!0]}const Gl={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function qv(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const xa={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(ce.test(t))t=parseFloat(t);else return t;const s=qv(t,e.target.x),n=qv(t,e.target.y);return`${s}% ${n}%`}},nM={correct:(t,{treeScale:e,projectionDelta:s})=>{const n=t,i=Qn.parse(t);if(i.length>5)return n;const a=Qn.createTransformer(t),o=typeof i[0]!="number"?1:0,l=s.x.scale*e.x,c=s.y.scale*e.y;i[0+o]/=l,i[1+o]/=c;const u=Qe(l,c,.5);return typeof i[2+o]=="number"&&(i[2+o]/=u),typeof i[3+o]=="number"&&(i[3+o]/=u),a(i)}};class iM extends ve.Component{componentDidMount(){const{visualElement:e,layoutGroup:s,switchLayoutGroup:n,layoutId:i}=this.props,{projection:a}=e;hL(rM),a&&(s.group&&s.group.add(a),n&&n.register&&i&&n.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),Gl.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:s,visualElement:n,drag:i,isPresent:a}=this.props,o=n.projection;return o&&(o.isPresent=a,i||e.layoutDependency!==s||s===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==a&&(a?o.promote():o.relegate()||Ae.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),queueMicrotask(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:s,switchLayoutGroup:n}=this.props,{projection:i}=e;i&&(i.scheduleCheckAfterUnmount(),s&&s.group&&s.group.remove(i),n&&n.deregister&&n.deregister(i))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Bb(t){const[e,s]=sM(),n=b.useContext(Dp);return ve.createElement(iM,{...t,layoutGroup:n,switchLayoutGroup:b.useContext(OS),isPresent:e,safeToRemove:s})}const rM={borderRadius:{...xa,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:xa,borderTopRightRadius:xa,borderBottomLeftRadius:xa,borderBottomRightRadius:xa,boxShadow:nM},$b=["TopLeft","TopRight","BottomLeft","BottomRight"],aM=$b.length,Gv=t=>typeof t=="string"?parseFloat(t):t,Qv=t=>typeof t=="number"||ce.test(t);function oM(t,e,s,n,i,a){i?(t.opacity=Qe(0,s.opacity!==void 0?s.opacity:1,lM(n)),t.opacityExit=Qe(e.opacity!==void 0?e.opacity:1,0,cM(n))):a&&(t.opacity=Qe(e.opacity!==void 0?e.opacity:1,s.opacity!==void 0?s.opacity:1,n));for(let o=0;o<aM;o++){const l=`border${$b[o]}Radius`;let c=Kv(e,l),u=Kv(s,l);if(c===void 0&&u===void 0)continue;c||(c=0),u||(u=0),c===0||u===0||Qv(c)===Qv(u)?(t[l]=Math.max(Qe(Gv(c),Gv(u),n),0),(Hs.test(u)||Hs.test(c))&&(t[l]+="%")):t[l]=u}(e.rotate||s.rotate)&&(t.rotate=Qe(e.rotate||0,s.rotate||0,n))}function Kv(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const lM=zb(0,.5,ub),cM=zb(.5,.95,tt);function zb(t,e,s){return n=>n<t?0:n>e?1:s(wo(t,e,n))}function Xv(t,e){t.min=e.min,t.max=e.max}function ms(t,e){Xv(t.x,e.x),Xv(t.y,e.y)}function Jv(t,e,s,n,i){return t-=e,t=Dc(t,1/s,n),i!==void 0&&(t=Dc(t,1/i,n)),t}function uM(t,e=0,s=1,n=.5,i,a=t,o=t){if(Hs.test(e)&&(e=parseFloat(e),e=Qe(o.min,o.max,e/100)-o.min),typeof e!="number")return;let l=Qe(a.min,a.max,n);t===a&&(l-=e),t.min=Jv(t.min,e,s,l,i),t.max=Jv(t.max,e,s,l,i)}function Zv(t,e,[s,n,i],a,o){uM(t,e[s],e[n],e[i],e.scale,a,o)}const hM=["x","scaleX","originX"],dM=["y","scaleY","originY"];function e0(t,e,s,n){Zv(t.x,e,hM,s?s.x:void 0,n?n.x:void 0),Zv(t.y,e,dM,s?s.y:void 0,n?n.y:void 0)}function t0(t){return t.translate===0&&t.scale===1}function Vb(t){return t0(t.x)&&t0(t.y)}function fM(t,e){return t.x.min===e.x.min&&t.x.max===e.x.max&&t.y.min===e.y.min&&t.y.max===e.y.max}function Ub(t,e){return Math.round(t.x.min)===Math.round(e.x.min)&&Math.round(t.x.max)===Math.round(e.x.max)&&Math.round(t.y.min)===Math.round(e.y.min)&&Math.round(t.y.max)===Math.round(e.y.max)}function s0(t){return rs(t.x)/rs(t.y)}class mM{constructor(){this.members=[]}add(e){Zp(this.members,e),e.scheduleRender()}remove(e){if(eg(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const s=this.members[this.members.length-1];s&&this.promote(s)}}relegate(e){const s=this.members.findIndex(i=>e===i);if(s===0)return!1;let n;for(let i=s;i>=0;i--){const a=this.members[i];if(a.isPresent!==!1){n=a;break}}return n?(this.promote(n),!0):!1}promote(e,s){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,s&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:i}=e.options;i===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:s,resumingFrom:n}=e;s.onExitComplete&&s.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function n0(t,e,s){let n="";const i=t.x.translate/e.x,a=t.y.translate/e.y;if((i||a)&&(n=`translate3d(${i}px, ${a}px, 0) `),(e.x!==1||e.y!==1)&&(n+=`scale(${1/e.x}, ${1/e.y}) `),s){const{rotate:c,rotateX:u,rotateY:h}=s;c&&(n+=`rotate(${c}deg) `),u&&(n+=`rotateX(${u}deg) `),h&&(n+=`rotateY(${h}deg) `)}const o=t.x.scale*e.x,l=t.y.scale*e.y;return(o!==1||l!==1)&&(n+=`scale(${o}, ${l})`),n||"none"}const pM=(t,e)=>t.depth-e.depth;class gM{constructor(){this.children=[],this.isDirty=!1}add(e){Zp(this.children,e),this.isDirty=!0}remove(e){eg(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(pM),this.isDirty=!1,this.children.forEach(e)}}function yM(t,e){const s=performance.now(),n=({timestamp:i})=>{const a=i-s;a>=e&&(Ys(n),t(a-e))};return Ae.read(n,!0),()=>Ys(n)}function vM(t){window.MotionDebug&&window.MotionDebug.record(t)}function xM(t){return t instanceof SVGElement&&t.tagName!=="svg"}function wM(t,e,s){const n=Kt(t)?t:Bi(t);return n.start(Jp("",n,e,s)),n.animation}const i0=["","X","Y","Z"],SM={visibility:"hidden"},r0=1e3;let bM=0;const pi={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0};function Wb({attachResizeListener:t,defaultParent:e,measureScroll:s,checkIsScrollRoot:n,resetTransform:i}){return class{constructor(o={},l=e==null?void 0:e()){this.id=bM++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,pi.totalNodes=pi.resolvedTargetDeltas=pi.recalculatedProjection=0,this.nodes.forEach(kM),this.nodes.forEach(LM),this.nodes.forEach(_M),this.nodes.forEach(CM),vM(pi)},this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new gM)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new tg),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,l=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=xM(o),this.instance=o;const{layoutId:c,layout:u,visualElement:h}=this.options;if(h&&!h.current&&h.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),l&&(u||c)&&(this.isLayoutDirty=!0),t){let d;const f=()=>this.root.updateBlockedByResize=!1;t(o,()=>{this.root.updateBlockedByResize=!0,d&&d(),d=yM(f,250),Gl.hasAnimatedSinceResize&&(Gl.hasAnimatedSinceResize=!1,this.nodes.forEach(o0))})}c&&this.root.registerSharedNode(c,this),this.options.animate!==!1&&h&&(c||u)&&this.addEventListener("didUpdate",({delta:d,hasLayoutChanged:f,hasRelativeTargetChanged:y,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const w=this.options.transition||h.getDefaultTransition()||OM,{onLayoutAnimationStart:g,onLayoutAnimationComplete:m}=h.getProps(),x=!this.targetLayout||!Ub(this.targetLayout,p)||y,S=!f&&y;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||S||f&&(x||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(d,S);const N={...Xp(w,"layout"),onPlay:g,onComplete:m};(h.shouldReduceMotion||this.options.layoutRoot)&&(N.delay=0,N.type=!1),this.startAnimation(N)}else f||o0(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,Ys(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(RM),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const d=this.path[h];d.shouldResetTransform=!0,d.updateScroll("snapshot"),d.options.layoutRoot&&d.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const u=this.getTransformTemplate();this.prevTransformTemplateValue=u?u(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(a0);return}this.isUpdating||this.nodes.forEach(TM),this.isUpdating=!1,this.nodes.forEach(EM),this.nodes.forEach(jM),this.nodes.forEach(NM),this.clearAllSnapshots();const l=performance.now();kt.delta=Gn(0,1e3/60,l-kt.timestamp),kt.timestamp=l,kt.isProcessing=!0,Gh.update.process(kt),Gh.preRender.process(kt),Gh.render.process(kt),kt.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,queueMicrotask(()=>this.update()))}clearAllSnapshots(){this.nodes.forEach(PM),this.sharedNodes.forEach(MM)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ae.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ae.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=at(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&(this.scroll={animationId:this.root.animationId,phase:o,isRoot:n(this.instance),offset:s(this.instance)})}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform,l=this.projectionDelta&&!Vb(this.projectionDelta),c=this.getTransformTemplate(),u=c?c(this.latestValues,""):void 0,h=u!==this.prevTransformTemplateValue;o&&(l||mi(this.latestValues)||h)&&(i(this.instance,u),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),DM(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return at();const l=o.measureViewportBox(),{scroll:c}=this.root;return c&&(kn(l.x,c.offset.x),kn(l.y,c.offset.y)),l}removeElementScroll(o){const l=at();ms(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:h,options:d}=u;if(u!==this.root&&h&&d.layoutScroll){if(h.isRoot){ms(l,o);const{scroll:f}=this.root;f&&(kn(l.x,-f.offset.x),kn(l.y,-f.offset.y))}kn(l.x,h.offset.x),kn(l.y,h.offset.y)}}return l}applyTransform(o,l=!1){const c=at();ms(c,o);for(let u=0;u<this.path.length;u++){const h=this.path[u];!l&&h.options.layoutScroll&&h.scroll&&h!==h.root&&kr(c,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),mi(h.latestValues)&&kr(c,h.latestValues)}return mi(this.latestValues)&&kr(c,this.latestValues),c}removeTransform(o){const l=at();ms(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];if(!u.instance||!mi(u.latestValues))continue;om(u.latestValues)&&u.updateSnapshot();const h=at(),d=u.measurePageBox();ms(h,d),e0(l,u.latestValues,u.snapshot?u.snapshot.layoutBox:void 0,h)}return mi(this.latestValues)&&e0(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==kt.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var l;const c=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=c.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=c.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=c.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==c;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||!((l=this.parent)===null||l===void 0)&&l.isProjectionDirty||this.attemptToResolveRelativeTarget))return;const{layout:d,layoutId:f}=this.options;if(!(!this.layout||!(d||f))){if(this.resolvedRelativeTargetAt=kt.timestamp,!this.targetDelta&&!this.relativeTarget){const y=this.getClosestProjectingParent();y&&y.layout&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=at(),this.relativeTargetOrigin=at(),Ha(this.relativeTargetOrigin,this.layout.layoutBox,y.layout.layoutBox),ms(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=at(),this.targetWithTransforms=at()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),FR(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ms(this.target,this.layout.layoutBox),Ob(this.target,this.targetDelta)):ms(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const y=this.getClosestProjectingParent();y&&!!y.resumingFrom==!!this.resumingFrom&&!y.options.layoutScroll&&y.target&&this.animationProgress!==1?(this.relativeParent=y,this.forceRelativeParentToResolveTarget(),this.relativeTarget=at(),this.relativeTargetOrigin=at(),Ha(this.relativeTargetOrigin,this.target,y.target),ms(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}pi.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||om(this.parent.latestValues)||Ab(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const l=this.getLead(),c=!!this.resumingFrom||this!==l;let u=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(u=!1),c&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===kt.timestamp&&(u=!1),u)return;const{layout:h,layoutId:d}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(h||d))return;ms(this.layoutCorrected,this.layout.layoutBox);const f=this.treeScale.x,y=this.treeScale.y;qR(this.layoutCorrected,this.treeScale,this.path,c),l.layout&&!l.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(l.target=l.layout.layoutBox);const{target:p}=l;if(!p){this.projectionTransform&&(this.projectionDelta=Nr(),this.projectionTransform="none",this.scheduleRender());return}this.projectionDelta||(this.projectionDelta=Nr(),this.projectionDeltaWithTransform=Nr());const w=this.projectionTransform;Wa(this.projectionDelta,this.layoutCorrected,p,this.latestValues),this.projectionTransform=n0(this.projectionDelta,this.treeScale),(this.projectionTransform!==w||this.treeScale.x!==f||this.treeScale.y!==y)&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p)),pi.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.scheduleRender&&this.options.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}setAnimationOrigin(o,l=!1){const c=this.snapshot,u=c?c.latestValues:{},h={...this.latestValues},d=Nr();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const f=at(),y=c?c.source:void 0,p=this.layout?this.layout.source:void 0,w=y!==p,g=this.getStack(),m=!g||g.members.length<=1,x=!!(w&&!m&&this.options.crossfade===!0&&!this.path.some(AM));this.animationProgress=0;let S;this.mixTargetDelta=N=>{const j=N/1e3;l0(d.x,o.x,j),l0(d.y,o.y,j),this.setTargetDelta(d),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Ha(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),IM(this.relativeTarget,this.relativeTargetOrigin,f,j),S&&fM(this.relativeTarget,S)&&(this.isProjectionDirty=!1),S||(S=at()),ms(S,this.relativeTarget)),w&&(this.animationValues=h,oM(h,u,this.latestValues,j,x,m)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=j},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(Ys(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ae.update(()=>{Gl.hasAnimatedSinceResize=!0,this.currentAnimation=wM(0,r0,{...o,onUpdate:l=>{this.mixTargetDelta(l),o.onUpdate&&o.onUpdate(l)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(r0),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:u,latestValues:h}=o;if(!(!l||!c||!u)){if(this!==o&&this.layout&&u&&Hb(this.options.animationType,this.layout.layoutBox,u.layoutBox)){c=this.target||at();const d=rs(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+d;const f=rs(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+f}ms(l,c),kr(l,h),Wa(this.projectionDeltaWithTransform,this.layoutCorrected,l,h)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new mM),this.sharedNodes.get(o).add(l);const u=l.options.initialPromotionConfig;l.promote({transition:u?u.transition:void 0,preserveFollowOpacity:u&&u.shouldPreserveFollowOpacity?u.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:l}=this.options;return l?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:l}=this.options;return l?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const u=this.getStack();u&&u.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.rotate||c.rotateX||c.rotateY||c.rotateZ)&&(l=!0),!l)return;const u={};for(let h=0;h<i0.length;h++){const d="rotate"+i0[h];c[d]&&(u[d]=c[d],o.setStaticValue(d,0))}o.render();for(const h in u)o.setStaticValue(h,u[h]);o.scheduleRender()}getProjectionStyles(o){var l,c;if(!this.instance||this.isSVG)return;if(!this.isVisible)return SM;const u={visibility:""},h=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,u.opacity="",u.pointerEvents=ql(o==null?void 0:o.pointerEvents)||"",u.transform=h?h(this.latestValues,""):"none",u;const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){const w={};return this.options.layoutId&&(w.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,w.pointerEvents=ql(o==null?void 0:o.pointerEvents)||""),this.hasProjected&&!mi(this.latestValues)&&(w.transform=h?h({},""):"none",this.hasProjected=!1),w}const f=d.animationValues||d.latestValues;this.applyTransformsToTarget(),u.transform=n0(this.projectionDeltaWithTransform,this.treeScale,f),h&&(u.transform=h(f,u.transform));const{x:y,y:p}=this.projectionDelta;u.transformOrigin=`${y.origin*100}% ${p.origin*100}% 0`,d.animationValues?u.opacity=d===this?(c=(l=f.opacity)!==null&&l!==void 0?l:this.latestValues.opacity)!==null&&c!==void 0?c:1:this.preserveOpacity?this.latestValues.opacity:f.opacityExit:u.opacity=d===this?f.opacity!==void 0?f.opacity:"":f.opacityExit!==void 0?f.opacityExit:0;for(const w in Lc){if(f[w]===void 0)continue;const{correct:g,applyTo:m}=Lc[w],x=u.transform==="none"?f[w]:g(f[w],d);if(m){const S=m.length;for(let N=0;N<S;N++)u[m[N]]=x}else u[w]=x}return this.options.layoutId&&(u.pointerEvents=d===this?ql(o==null?void 0:o.pointerEvents)||"":"none"),u}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var l;return(l=o.currentAnimation)===null||l===void 0?void 0:l.stop()}),this.root.nodes.forEach(a0),this.root.sharedNodes.clear()}}}function jM(t){t.updateLayout()}function NM(t){var e;const s=((e=t.resumeFrom)===null||e===void 0?void 0:e.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&s&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:i}=t.layout,{animationType:a}=t.options,o=s.source!==t.layout.source;a==="size"?ps(d=>{const f=o?s.measuredBox[d]:s.layoutBox[d],y=rs(f);f.min=n[d].min,f.max=f.min+y}):Hb(a,s.layoutBox,n)&&ps(d=>{const f=o?s.measuredBox[d]:s.layoutBox[d],y=rs(n[d]);f.max=f.min+y,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[d].max=t.relativeTarget[d].min+y)});const l=Nr();Wa(l,n,s.layoutBox);const c=Nr();o?Wa(c,t.applyTransform(i,!0),s.measuredBox):Wa(c,n,s.layoutBox);const u=!Vb(l);let h=!1;if(!t.resumeFrom){const d=t.getClosestProjectingParent();if(d&&!d.resumeFrom){const{snapshot:f,layout:y}=d;if(f&&y){const p=at();Ha(p,s.layoutBox,f.layoutBox);const w=at();Ha(w,n,y.layoutBox),Ub(p,w)||(h=!0),d.options.layoutRoot&&(t.relativeTarget=w,t.relativeTargetOrigin=p,t.relativeParent=d)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:s,delta:c,layoutDelta:l,hasLayoutChanged:u,hasRelativeTargetChanged:h})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function kM(t){pi.totalNodes++,t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function CM(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function PM(t){t.clearSnapshot()}function a0(t){t.clearMeasurements()}function TM(t){t.isLayoutDirty=!1}function EM(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function o0(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function LM(t){t.resolveTargetDelta()}function _M(t){t.calcProjection()}function RM(t){t.resetRotation()}function MM(t){t.removeLeadSnapshot()}function l0(t,e,s){t.translate=Qe(e.translate,0,s),t.scale=Qe(e.scale,1,s),t.origin=e.origin,t.originPoint=e.originPoint}function c0(t,e,s,n){t.min=Qe(e.min,s.min,n),t.max=Qe(e.max,s.max,n)}function IM(t,e,s,n){c0(t.x,e.x,s.x,n),c0(t.y,e.y,s.y,n)}function AM(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const OM={duration:.45,ease:[.4,0,.1,1]},u0=t=>typeof navigator<"u"&&navigator.userAgent.toLowerCase().includes(t),h0=u0("applewebkit/")&&!u0("chrome/")?Math.round:tt;function d0(t){t.min=h0(t.min),t.max=h0(t.max)}function DM(t){d0(t.x),d0(t.y)}function Hb(t,e,s){return t==="position"||t==="preserve-aspect"&&!rm(s0(e),s0(s),.2)}const FM=Wb({attachResizeListener:(t,e)=>tn(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),rd={current:void 0},Yb=Wb({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!rd.current){const t=new FM({});t.mount(window),t.setOptions({layoutScroll:!0}),rd.current=t}return rd.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),BM={pan:{Feature:tM},drag:{Feature:eM,ProjectionNode:Yb,MeasureLayout:Bb}},$M=/var\((--[a-zA-Z0-9-_]+),? ?([a-zA-Z0-9 ()%#.,-]+)?\)/;function zM(t){const e=$M.exec(t);if(!e)return[,];const[,s,n]=e;return[s,n]}function cm(t,e,s=1){const[n,i]=zM(t);if(!n)return;const a=window.getComputedStyle(e).getPropertyValue(n);if(a){const o=a.trim();return Tb(o)?parseFloat(o):o}else return Jf(i)?cm(i,e,s+1):i}function VM(t,{...e},s){const n=t.current;if(!(n instanceof Element))return{target:e,transitionEnd:s};s&&(s={...s}),t.values.forEach(i=>{const a=i.get();if(!Jf(a))return;const o=cm(a,n);o&&i.set(o)});for(const i in e){const a=e[i];if(!Jf(a))continue;const o=cm(a,n);o&&(e[i]=o,s||(s={}),s[i]===void 0&&(s[i]=a))}return{target:e,transitionEnd:s}}const UM=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),qb=t=>UM.has(t),WM=t=>Object.keys(t).some(qb),f0=t=>t===Zi||t===ce,m0=(t,e)=>parseFloat(t.split(", ")[e]),p0=(t,e)=>(s,{transform:n})=>{if(n==="none"||!n)return 0;const i=n.match(/^matrix3d\((.+)\)$/);if(i)return m0(i[1],e);{const a=n.match(/^matrix\((.+)\)$/);return a?m0(a[1],t):0}},HM=new Set(["x","y","z"]),YM=Ao.filter(t=>!HM.has(t));function qM(t){const e=[];return YM.forEach(s=>{const n=t.getValue(s);n!==void 0&&(e.push([s,n.get()]),n.set(s.startsWith("scale")?1:0))}),e.length&&t.render(),e}const Ur={width:({x:t},{paddingLeft:e="0",paddingRight:s="0"})=>t.max-t.min-parseFloat(e)-parseFloat(s),height:({y:t},{paddingTop:e="0",paddingBottom:s="0"})=>t.max-t.min-parseFloat(e)-parseFloat(s),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:p0(4,13),y:p0(5,14)};Ur.translateX=Ur.x;Ur.translateY=Ur.y;const GM=(t,e,s)=>{const n=e.measureViewportBox(),i=e.current,a=getComputedStyle(i),{display:o}=a,l={};o==="none"&&e.setStaticValue("display",t.display||"block"),s.forEach(u=>{l[u]=Ur[u](n,a)}),e.render();const c=e.measureViewportBox();return s.forEach(u=>{const h=e.getValue(u);h&&h.jump(l[u]),t[u]=Ur[u](c,a)}),t},QM=(t,e,s={},n={})=>{e={...e},n={...n};const i=Object.keys(e).filter(qb);let a=[],o=!1;const l=[];if(i.forEach(c=>{const u=t.getValue(c);if(!t.hasValue(c))return;let h=s[c],d=va(h);const f=e[c];let y;if(Rc(f)){const p=f.length,w=f[0]===null?1:0;h=f[w],d=va(h);for(let g=w;g<p&&f[g]!==null;g++)y?Hp(va(f[g])===y):y=va(f[g])}else y=va(f);if(d!==y)if(f0(d)&&f0(y)){const p=u.get();typeof p=="string"&&u.set(parseFloat(p)),typeof f=="string"?e[c]=parseFloat(f):Array.isArray(f)&&y===ce&&(e[c]=f.map(parseFloat))}else d!=null&&d.transform&&(y!=null&&y.transform)&&(h===0||f===0)?h===0?u.set(y.transform(h)):e[c]=d.transform(f):(o||(a=qM(t),o=!0),l.push(c),n[c]=n[c]!==void 0?n[c]:e[c],u.jump(f))}),l.length){const c=l.indexOf("height")>=0?window.pageYOffset:null,u=GM(e,t,l);return a.length&&a.forEach(([h,d])=>{t.getValue(h).set(d)}),t.render(),wu&&c!==null&&window.scrollTo({top:c}),{target:u,transitionEnd:n}}else return{target:e,transitionEnd:n}};function KM(t,e,s,n){return WM(e)?QM(t,e,s,n):{target:e,transitionEnd:n}}const XM=(t,e,s,n)=>{const i=VM(t,e,n);return e=i.target,n=i.transitionEnd,KM(t,e,s,n)},um={current:null},Gb={current:!1};function JM(){if(Gb.current=!0,!!wu)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>um.current=t.matches;t.addListener(e),e()}else um.current=!1}function ZM(t,e,s){const{willChange:n}=e;for(const i in e){const a=e[i],o=s[i];if(Kt(a))t.addValue(i,a),Oc(n)&&n.add(i);else if(Kt(o))t.addValue(i,Bi(a,{owner:t})),Oc(n)&&n.remove(i);else if(o!==a)if(t.hasValue(i)){const l=t.getValue(i);!l.hasAnimated&&l.set(a)}else{const l=t.getStaticValue(i);t.addValue(i,Bi(l!==void 0?l:a,{owner:t}))}}for(const i in s)e[i]===void 0&&t.removeValue(i);return e}const g0=new WeakMap,Qb=Object.keys(xo),eI=Qb.length,y0=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"],tI=Op.length;class sI{constructor({parent:e,props:s,presenceContext:n,reducedMotionConfig:i,visualState:a},o={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.scheduleRender=()=>Ae.render(this.render,!1,!0);const{latestValues:l,renderState:c}=a;this.latestValues=l,this.baseTarget={...l},this.initialValues=s.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=s,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=i,this.options=o,this.isControllingVariants=ju(s),this.isVariantNode=AS(s),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:u,...h}=this.scrapeMotionValuesFromProps(s,{});for(const d in h){const f=h[d];l[d]!==void 0&&Kt(f)&&(f.set(l[d],!1),Oc(u)&&u.add(d))}}scrapeMotionValuesFromProps(e,s){return{}}mount(e){this.current=e,g0.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((s,n)=>this.bindToMotionValue(n,s)),Gb.current||JM(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:um.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){g0.delete(this.current),this.projection&&this.projection.unmount(),Ys(this.notifyUpdate),Ys(this.render),this.valueSubscriptions.forEach(e=>e()),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features)this.features[e].unmount();this.current=null}bindToMotionValue(e,s){const n=Ji.has(e),i=s.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&Ae.update(this.notifyUpdate,!1,!0),n&&this.projection&&(this.projection.isTransformDirty=!0)}),a=s.on("renderRequest",this.scheduleRender);this.valueSubscriptions.set(e,()=>{i(),a()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}loadFeatures({children:e,...s},n,i,a){let o,l;for(let c=0;c<eI;c++){const u=Qb[c],{isEnabled:h,Feature:d,ProjectionNode:f,MeasureLayout:y}=xo[u];f&&(o=f),h(s)&&(!this.features[u]&&d&&(this.features[u]=new d(this)),y&&(l=y))}if((this.type==="html"||this.type==="svg")&&!this.projection&&o){this.projection=new o(this.latestValues,this.parent&&this.parent.projection);const{layoutId:c,layout:u,drag:h,dragConstraints:d,layoutScroll:f,layoutRoot:y}=s;this.projection.setOptions({layoutId:c,layout:u,alwaysMeasureLayout:!!h||d&&br(d),visualElement:this,scheduleRender:()=>this.scheduleRender(),animationType:typeof u=="string"?u:"both",initialPromotionConfig:a,layoutScroll:f,layoutRoot:y})}return l}updateFeatures(){for(const e in this.features){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}triggerBuild(){this.build(this.renderState,this.latestValues,this.options,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):at()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,s){this.latestValues[e]=s}makeTargetAnimatable(e,s=!0){return this.makeTargetAnimatableFromInstance(e,this.props,s)}update(e,s){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=s;for(let n=0;n<y0.length;n++){const i=y0[n];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const a=e["on"+i];a&&(this.propEventSubscriptions[i]=this.on(i,a))}this.prevMotionValues=ZM(this,this.scrapeMotionValuesFromProps(e,this.prevProps),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}getVariantContext(e=!1){if(e)return this.parent?this.parent.getVariantContext():void 0;if(!this.isControllingVariants){const n=this.parent?this.parent.getVariantContext()||{}:{};return this.props.initial!==void 0&&(n.initial=this.props.initial),n}const s={};for(let n=0;n<tI;n++){const i=Op[n],a=this.props[i];(vo(a)||a===!1)&&(s[i]=a)}return s}addVariantChild(e){const s=this.getClosestVariantNode();if(s)return s.variantChildren&&s.variantChildren.add(e),()=>s.variantChildren.delete(e)}addValue(e,s){s!==this.values.get(e)&&(this.removeValue(e),this.bindToMotionValue(e,s)),this.values.set(e,s),this.latestValues[e]=s.get()}removeValue(e){this.values.delete(e);const s=this.valueSubscriptions.get(e);s&&(s(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,s){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return n===void 0&&s!==void 0&&(n=Bi(s,{owner:this}),this.addValue(e,n)),n}readValue(e){var s;return this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(s=this.getBaseTargetFromProps(this.props,e))!==null&&s!==void 0?s:this.readValueFromInstance(this.current,e,this.options)}setBaseTarget(e,s){this.baseTarget[e]=s}getBaseTarget(e){var s;const{initial:n}=this.props,i=typeof n=="string"||typeof n=="object"?(s=Wp(this.props,n))===null||s===void 0?void 0:s[e]:void 0;if(n&&i!==void 0)return i;const a=this.getBaseTargetFromProps(this.props,e);return a!==void 0&&!Kt(a)?a:this.initialValues[e]!==void 0&&i===void 0?void 0:this.baseTarget[e]}on(e,s){return this.events[e]||(this.events[e]=new tg),this.events[e].add(s)}notify(e,...s){this.events[e]&&this.events[e].notify(...s)}}class Kb extends sI{sortInstanceNodePosition(e,s){return e.compareDocumentPosition(s)&2?1:-1}getBaseTargetFromProps(e,s){return e.style?e.style[s]:void 0}removeValueFromRenderState(e,{vars:s,style:n}){delete s[e],delete n[e]}makeTargetAnimatableFromInstance({transition:e,transitionEnd:s,...n},{transformValues:i},a){let o=xR(n,e||{},this);if(i&&(s&&(s=i(s)),n&&(n=i(n)),o&&(o=i(o))),a){yR(this,n,o);const l=XM(this,n,o,s);s=l.transitionEnd,n=l.target}return{transition:e,transitionEnd:s,...n}}}function nI(t){return window.getComputedStyle(t)}class iI extends Kb{constructor(){super(...arguments),this.type="html"}readValueFromInstance(e,s){if(Ji.has(s)){const n=Kp(s);return n&&n.default||0}else{const n=nI(e),i=(BS(s)?n.getPropertyValue(s):n[s])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:s}){return Db(e,s)}build(e,s,n,i){Bp(e,s,n,i.transformTemplate)}scrapeMotionValuesFromProps(e,s){return Up(e,s)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Kt(e)&&(this.childSubscription=e.on("change",s=>{this.current&&(this.current.textContent=`${s}`)}))}renderInstance(e,s,n,i){HS(e,s,n,i)}}class rI extends Kb{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1}getBaseTargetFromProps(e,s){return e[s]}readValueFromInstance(e,s){if(Ji.has(s)){const n=Kp(s);return n&&n.default||0}return s=YS.has(s)?s:Ip(s),e.getAttribute(s)}measureInstanceViewportBox(){return at()}scrapeMotionValuesFromProps(e,s){return GS(e,s)}build(e,s,n,i){zp(e,s,n,this.isSVGTag,i.transformTemplate)}renderInstance(e,s,n,i){qS(e,s,n,i)}mount(e){this.isSVGTag=Vp(e.tagName),super.mount(e)}}const aI=(t,e)=>Fp(t)?new rI(e,{enableHardwareAcceleration:!1}):new iI(e,{enableHardwareAcceleration:!0}),oI={layout:{ProjectionNode:Yb,MeasureLayout:Bb}},lI={...IR,...e_,...BM,...oI},U=cL((t,e)=>zL(t,e,lI,aI));function Xb(){const t=b.useRef(!1);return Su(()=>(t.current=!0,()=>{t.current=!1}),[]),t}function cI(){const t=Xb(),[e,s]=b.useState(0),n=b.useCallback(()=>{t.current&&s(e+1)},[e]);return[b.useCallback(()=>Ae.postRender(n),[n]),e]}class uI extends b.Component{getSnapshotBeforeUpdate(e){const s=this.props.childRef.current;if(s&&e.isPresent&&!this.props.isPresent){const n=this.props.sizeRef.current;n.height=s.offsetHeight||0,n.width=s.offsetWidth||0,n.top=s.offsetTop,n.left=s.offsetLeft}return null}componentDidUpdate(){}render(){return this.props.children}}function hI({children:t,isPresent:e}){const s=b.useId(),n=b.useRef(null),i=b.useRef({width:0,height:0,top:0,left:0});return b.useInsertionEffect(()=>{const{width:a,height:o,top:l,left:c}=i.current;if(e||!n.current||!a||!o)return;n.current.dataset.motionPopId=s;const u=document.createElement("style");return document.head.appendChild(u),u.sheet&&u.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${a}px !important;
            height: ${o}px !important;
            top: ${l}px !important;
            left: ${c}px !important;
          }
        `),()=>{document.head.removeChild(u)}},[e]),b.createElement(uI,{isPresent:e,childRef:n,sizeRef:i},b.cloneElement(t,{ref:n}))}const ad=({children:t,initial:e,isPresent:s,onExitComplete:n,custom:i,presenceAffectsLayout:a,mode:o})=>{const l=ku(dI),c=b.useId(),u=b.useMemo(()=>({id:c,initial:e,isPresent:s,custom:i,onExitComplete:h=>{l.set(h,!0);for(const d of l.values())if(!d)return;n&&n()},register:h=>(l.set(h,!1),()=>l.delete(h))}),a?void 0:[s]);return b.useMemo(()=>{l.forEach((h,d)=>l.set(d,!1))},[s]),b.useEffect(()=>{!s&&!l.size&&n&&n()},[s]),o==="popLayout"&&(t=b.createElement(hI,{isPresent:s},t)),b.createElement(xu.Provider,{value:u},t)};function dI(){return new Map}function fI(t){return b.useEffect(()=>()=>t(),[])}const gi=t=>t.key||"";function mI(t,e){t.forEach(s=>{const n=gi(s);e.set(n,s)})}function pI(t){const e=[];return b.Children.forEach(t,s=>{b.isValidElement(s)&&e.push(s)}),e}const Xe=({children:t,custom:e,initial:s=!0,onExitComplete:n,exitBeforeEnter:i,presenceAffectsLayout:a=!0,mode:o="sync"})=>{const l=b.useContext(Dp).forceRender||cI()[0],c=Xb(),u=pI(t);let h=u;const d=b.useRef(new Map).current,f=b.useRef(h),y=b.useRef(new Map).current,p=b.useRef(!0);if(Su(()=>{p.current=!1,mI(u,y),f.current=h}),fI(()=>{p.current=!0,y.clear(),d.clear()}),p.current)return b.createElement(b.Fragment,null,h.map(x=>b.createElement(ad,{key:gi(x),isPresent:!0,initial:s?void 0:!1,presenceAffectsLayout:a,mode:o},x)));h=[...h];const w=f.current.map(gi),g=u.map(gi),m=w.length;for(let x=0;x<m;x++){const S=w[x];g.indexOf(S)===-1&&!d.has(S)&&d.set(S,void 0)}return o==="wait"&&d.size&&(h=[]),d.forEach((x,S)=>{if(g.indexOf(S)!==-1)return;const N=y.get(S);if(!N)return;const j=w.indexOf(S);let P=x;if(!P){const E=()=>{d.delete(S);const T=Array.from(y.keys()).filter(R=>!g.includes(R));if(T.forEach(R=>y.delete(R)),f.current=u.filter(R=>{const M=gi(R);return M===S||T.includes(M)}),!d.size){if(c.current===!1)return;l(),n&&n()}};P=b.createElement(ad,{key:gi(N),isPresent:!1,onExitComplete:E,custom:e,presenceAffectsLayout:a,mode:o},N),d.set(S,P)}h.splice(j,0,P)}),h=h.map(x=>{const S=x.key;return d.has(S)?x:b.createElement(ad,{key:gi(x),isPresent:!0,presenceAffectsLayout:a,mode:o},x)}),b.createElement(b.Fragment,null,d.size?h:h.map(x=>b.cloneElement(x)))};function Jb(t){const e=ku(()=>Bi(t)),{isStatic:s}=b.useContext(Mp);if(s){const[,n]=b.useState(t);b.useEffect(()=>e.on("change",n),[])}return e}const gI=t=>t&&typeof t=="object"&&t.mix,yI=t=>gI(t)?t.mix:void 0;function vI(...t){const e=!Array.isArray(t[0]),s=e?0:-1,n=t[0+s],i=t[1+s],a=t[2+s],o=t[3+s],l=Qp(i,a,{mixer:yI(a[0]),...o});return e?l(n):l}function Zb(t,e){const s=Jb(e()),n=()=>s.set(e());return n(),Su(()=>{const i=()=>Ae.update(n,!1,!0),a=t.map(o=>o.on("change",i));return()=>{a.forEach(o=>o()),Ys(n)}}),s}function xI(t){Ua.current=[],t();const e=Zb(Ua.current,t);return Ua.current=void 0,e}function od(t,e,s,n){if(typeof t=="function")return xI(t);const i=typeof e=="function"?e:vI(e,s,n);return Array.isArray(t)?v0(t,i):v0([t],([a])=>i(a))}function v0(t,e){const s=ku(()=>[]);return Zb(t,()=>{s.length=0;const n=t.length;for(let i=0;i<n;i++)s[i]=t[i].get();return e(s)})}function ej(t){var e,s,n="";if(typeof t=="string"||typeof t=="number")n+=t;else if(typeof t=="object")if(Array.isArray(t))for(e=0;e<t.length;e++)t[e]&&(s=ej(t[e]))&&(n&&(n+=" "),n+=s);else for(e in t)t[e]&&(n&&(n+=" "),n+=e);return n}function Rn(){for(var t,e,s=0,n="";s<arguments.length;)(t=arguments[s++])&&(e=ej(t))&&(n&&(n+=" "),n+=e);return n}const Ya=t=>typeof t=="number"&&!isNaN(t),$i=t=>typeof t=="string",Wt=t=>typeof t=="function",Ql=t=>$i(t)||Wt(t)?t:null,ld=t=>b.isValidElement(t)||$i(t)||Wt(t)||Ya(t);function wI(t,e,s){s===void 0&&(s=300);const{scrollHeight:n,style:i}=t;requestAnimationFrame(()=>{i.minHeight="initial",i.height=n+"px",i.transition=`all ${s}ms`,requestAnimationFrame(()=>{i.height="0",i.padding="0",i.margin="0",setTimeout(e,s)})})}function Tu(t){let{enter:e,exit:s,appendPosition:n=!1,collapse:i=!0,collapseDuration:a=300}=t;return function(o){let{children:l,position:c,preventExitTransition:u,done:h,nodeRef:d,isIn:f}=o;const y=n?`${e}--${c}`:e,p=n?`${s}--${c}`:s,w=b.useRef(0);return b.useLayoutEffect(()=>{const g=d.current,m=y.split(" "),x=S=>{S.target===d.current&&(g.dispatchEvent(new Event("d")),g.removeEventListener("animationend",x),g.removeEventListener("animationcancel",x),w.current===0&&S.type!=="animationcancel"&&g.classList.remove(...m))};g.classList.add(...m),g.addEventListener("animationend",x),g.addEventListener("animationcancel",x)},[]),b.useEffect(()=>{const g=d.current,m=()=>{g.removeEventListener("animationend",m),i?wI(g,h,a):h()};f||(u?m():(w.current=1,g.className+=` ${p}`,g.addEventListener("animationend",m)))},[f]),ve.createElement(ve.Fragment,null,l)}}function x0(t,e){return t!=null?{content:t.content,containerId:t.props.containerId,id:t.props.toastId,theme:t.props.theme,type:t.props.type,data:t.props.data||{},isLoading:t.props.isLoading,icon:t.props.icon,status:e}:{}}const gs={list:new Map,emitQueue:new Map,on(t,e){return this.list.has(t)||this.list.set(t,[]),this.list.get(t).push(e),this},off(t,e){if(e){const s=this.list.get(t).filter(n=>n!==e);return this.list.set(t,s),this}return this.list.delete(t),this},cancelEmit(t){const e=this.emitQueue.get(t);return e&&(e.forEach(clearTimeout),this.emitQueue.delete(t)),this},emit(t){this.list.has(t)&&this.list.get(t).forEach(e=>{const s=setTimeout(()=>{e(...[].slice.call(arguments,1))},0);this.emitQueue.has(t)||this.emitQueue.set(t,[]),this.emitQueue.get(t).push(s)})}},vl=t=>{let{theme:e,type:s,...n}=t;return ve.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:e==="colored"?"currentColor":`var(--toastify-icon-color-${s})`,...n})},cd={info:function(t){return ve.createElement(vl,{...t},ve.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))},warning:function(t){return ve.createElement(vl,{...t},ve.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))},success:function(t){return ve.createElement(vl,{...t},ve.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))},error:function(t){return ve.createElement(vl,{...t},ve.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))},spinner:function(){return ve.createElement("div",{className:"Toastify__spinner"})}};function SI(t){const[,e]=b.useReducer(y=>y+1,0),[s,n]=b.useState([]),i=b.useRef(null),a=b.useRef(new Map).current,o=y=>s.indexOf(y)!==-1,l=b.useRef({toastKey:1,displayedToast:0,count:0,queue:[],props:t,containerId:null,isToastActive:o,getToast:y=>a.get(y)}).current;function c(y){let{containerId:p}=y;const{limit:w}=l.props;!w||p&&l.containerId!==p||(l.count-=l.queue.length,l.queue=[])}function u(y){n(p=>y==null?[]:p.filter(w=>w!==y))}function h(){const{toastContent:y,toastProps:p,staleId:w}=l.queue.shift();f(y,p,w)}function d(y,p){let{delay:w,staleId:g,...m}=p;if(!ld(y)||function(O){return!i.current||l.props.enableMultiContainer&&O.containerId!==l.props.containerId||a.has(O.toastId)&&O.updateId==null}(m))return;const{toastId:x,updateId:S,data:N}=m,{props:j}=l,P=()=>u(x),E=S==null;E&&l.count++;const T={...j,style:j.toastStyle,key:l.toastKey++,...Object.fromEntries(Object.entries(m).filter(O=>{let[A,B]=O;return B!=null})),toastId:x,updateId:S,data:N,closeToast:P,isIn:!1,className:Ql(m.className||j.toastClassName),bodyClassName:Ql(m.bodyClassName||j.bodyClassName),progressClassName:Ql(m.progressClassName||j.progressClassName),autoClose:!m.isLoading&&(R=m.autoClose,M=j.autoClose,R===!1||Ya(R)&&R>0?R:M),deleteToast(){const O=x0(a.get(x),"removed");a.delete(x),gs.emit(4,O);const A=l.queue.length;if(l.count=x==null?l.count-l.displayedToast:l.count-1,l.count<0&&(l.count=0),A>0){const B=x==null?l.props.limit:1;if(A===1||B===1)l.displayedToast++,h();else{const H=B>A?A:B;l.displayedToast=H;for(let F=0;F<H;F++)h()}}else e()}};var R,M;T.iconOut=function(O){let{theme:A,type:B,isLoading:H,icon:F}=O,K=null;const D={theme:A,type:B};return F===!1||(Wt(F)?K=F(D):b.isValidElement(F)?K=b.cloneElement(F,D):$i(F)||Ya(F)?K=F:H?K=cd.spinner():(V=>V in cd)(B)&&(K=cd[B](D))),K}(T),Wt(m.onOpen)&&(T.onOpen=m.onOpen),Wt(m.onClose)&&(T.onClose=m.onClose),T.closeButton=j.closeButton,m.closeButton===!1||ld(m.closeButton)?T.closeButton=m.closeButton:m.closeButton===!0&&(T.closeButton=!ld(j.closeButton)||j.closeButton);let _=y;b.isValidElement(y)&&!$i(y.type)?_=b.cloneElement(y,{closeToast:P,toastProps:T,data:N}):Wt(y)&&(_=y({closeToast:P,toastProps:T,data:N})),j.limit&&j.limit>0&&l.count>j.limit&&E?l.queue.push({toastContent:_,toastProps:T,staleId:g}):Ya(w)?setTimeout(()=>{f(_,T,g)},w):f(_,T,g)}function f(y,p,w){const{toastId:g}=p;w&&a.delete(w);const m={content:y,props:p};a.set(g,m),n(x=>[...x,g].filter(S=>S!==w)),gs.emit(4,x0(m,m.props.updateId==null?"added":"updated"))}return b.useEffect(()=>(l.containerId=t.containerId,gs.cancelEmit(3).on(0,d).on(1,y=>i.current&&u(y)).on(5,c).emit(2,l),()=>{a.clear(),gs.emit(3,l)}),[]),b.useEffect(()=>{l.props=t,l.isToastActive=o,l.displayedToast=s.length}),{getToastToRender:function(y){const p=new Map,w=Array.from(a.values());return t.newestOnTop&&w.reverse(),w.forEach(g=>{const{position:m}=g.props;p.has(m)||p.set(m,[]),p.get(m).push(g)}),Array.from(p,g=>y(g[0],g[1]))},containerRef:i,isToastActive:o}}function w0(t){return t.targetTouches&&t.targetTouches.length>=1?t.targetTouches[0].clientX:t.clientX}function S0(t){return t.targetTouches&&t.targetTouches.length>=1?t.targetTouches[0].clientY:t.clientY}function bI(t){const[e,s]=b.useState(!1),[n,i]=b.useState(!1),a=b.useRef(null),o=b.useRef({start:0,x:0,y:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,boundingRect:null,didMove:!1}).current,l=b.useRef(t),{autoClose:c,pauseOnHover:u,closeToast:h,onClick:d,closeOnClick:f}=t;function y(N){if(t.draggable){N.nativeEvent.type==="touchstart"&&N.nativeEvent.preventDefault(),o.didMove=!1,document.addEventListener("mousemove",m),document.addEventListener("mouseup",x),document.addEventListener("touchmove",m),document.addEventListener("touchend",x);const j=a.current;o.canCloseOnClick=!0,o.canDrag=!0,o.boundingRect=j.getBoundingClientRect(),j.style.transition="",o.x=w0(N.nativeEvent),o.y=S0(N.nativeEvent),t.draggableDirection==="x"?(o.start=o.x,o.removalDistance=j.offsetWidth*(t.draggablePercent/100)):(o.start=o.y,o.removalDistance=j.offsetHeight*(t.draggablePercent===80?1.5*t.draggablePercent:t.draggablePercent/100))}}function p(N){if(o.boundingRect){const{top:j,bottom:P,left:E,right:T}=o.boundingRect;N.nativeEvent.type!=="touchend"&&t.pauseOnHover&&o.x>=E&&o.x<=T&&o.y>=j&&o.y<=P?g():w()}}function w(){s(!0)}function g(){s(!1)}function m(N){const j=a.current;o.canDrag&&j&&(o.didMove=!0,e&&g(),o.x=w0(N),o.y=S0(N),o.delta=t.draggableDirection==="x"?o.x-o.start:o.y-o.start,o.start!==o.x&&(o.canCloseOnClick=!1),j.style.transform=`translate${t.draggableDirection}(${o.delta}px)`,j.style.opacity=""+(1-Math.abs(o.delta/o.removalDistance)))}function x(){document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",x),document.removeEventListener("touchmove",m),document.removeEventListener("touchend",x);const N=a.current;if(o.canDrag&&o.didMove&&N){if(o.canDrag=!1,Math.abs(o.delta)>o.removalDistance)return i(!0),void t.closeToast();N.style.transition="transform 0.2s, opacity 0.2s",N.style.transform=`translate${t.draggableDirection}(0)`,N.style.opacity="1"}}b.useEffect(()=>{l.current=t}),b.useEffect(()=>(a.current&&a.current.addEventListener("d",w,{once:!0}),Wt(t.onOpen)&&t.onOpen(b.isValidElement(t.children)&&t.children.props),()=>{const N=l.current;Wt(N.onClose)&&N.onClose(b.isValidElement(N.children)&&N.children.props)}),[]),b.useEffect(()=>(t.pauseOnFocusLoss&&(document.hasFocus()||g(),window.addEventListener("focus",w),window.addEventListener("blur",g)),()=>{t.pauseOnFocusLoss&&(window.removeEventListener("focus",w),window.removeEventListener("blur",g))}),[t.pauseOnFocusLoss]);const S={onMouseDown:y,onTouchStart:y,onMouseUp:p,onTouchEnd:p};return c&&u&&(S.onMouseEnter=g,S.onMouseLeave=w),f&&(S.onClick=N=>{d&&d(N),o.canCloseOnClick&&h()}),{playToast:w,pauseToast:g,isRunning:e,preventExitTransition:n,toastRef:a,eventHandlers:S}}function tj(t){let{closeToast:e,theme:s,ariaLabel:n="close"}=t;return ve.createElement("button",{className:`Toastify__close-button Toastify__close-button--${s}`,type:"button",onClick:i=>{i.stopPropagation(),e(i)},"aria-label":n},ve.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},ve.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function jI(t){let{delay:e,isRunning:s,closeToast:n,type:i="default",hide:a,className:o,style:l,controlledProgress:c,progress:u,rtl:h,isIn:d,theme:f}=t;const y=a||c&&u===0,p={...l,animationDuration:`${e}ms`,animationPlayState:s?"running":"paused",opacity:y?0:1};c&&(p.transform=`scaleX(${u})`);const w=Rn("Toastify__progress-bar",c?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${f}`,`Toastify__progress-bar--${i}`,{"Toastify__progress-bar--rtl":h}),g=Wt(o)?o({rtl:h,type:i,defaultClassName:w}):Rn(w,o);return ve.createElement("div",{role:"progressbar","aria-hidden":y?"true":"false","aria-label":"notification timer",className:g,style:p,[c&&u>=1?"onTransitionEnd":"onAnimationEnd"]:c&&u<1?null:()=>{d&&n()}})}const NI=t=>{const{isRunning:e,preventExitTransition:s,toastRef:n,eventHandlers:i}=bI(t),{closeButton:a,children:o,autoClose:l,onClick:c,type:u,hideProgressBar:h,closeToast:d,transition:f,position:y,className:p,style:w,bodyClassName:g,bodyStyle:m,progressClassName:x,progressStyle:S,updateId:N,role:j,progress:P,rtl:E,toastId:T,deleteToast:R,isIn:M,isLoading:_,iconOut:O,closeOnClick:A,theme:B}=t,H=Rn("Toastify__toast",`Toastify__toast-theme--${B}`,`Toastify__toast--${u}`,{"Toastify__toast--rtl":E},{"Toastify__toast--close-on-click":A}),F=Wt(p)?p({rtl:E,position:y,type:u,defaultClassName:H}):Rn(H,p),K=!!P||!l,D={closeToast:d,type:u,theme:B};let V=null;return a===!1||(V=Wt(a)?a(D):b.isValidElement(a)?b.cloneElement(a,D):tj(D)),ve.createElement(f,{isIn:M,done:R,position:y,preventExitTransition:s,nodeRef:n},ve.createElement("div",{id:T,onClick:c,className:F,...i,style:w,ref:n},ve.createElement("div",{...M&&{role:j},className:Wt(g)?g({type:u}):Rn("Toastify__toast-body",g),style:m},O!=null&&ve.createElement("div",{className:Rn("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!_})},O),ve.createElement("div",null,o)),V,ve.createElement(jI,{...N&&!K?{key:`pb-${N}`}:{},rtl:E,theme:B,delay:l,isRunning:e,isIn:M,closeToast:d,hide:h,type:u,style:S,className:x,controlledProgress:K,progress:P||0})))},Eu=function(t,e){return e===void 0&&(e=!1),{enter:`Toastify--animate Toastify__${t}-enter`,exit:`Toastify--animate Toastify__${t}-exit`,appendPosition:e}},kI=Tu(Eu("bounce",!0));Tu(Eu("slide",!0));Tu(Eu("zoom"));Tu(Eu("flip"));const Fc=b.forwardRef((t,e)=>{const{getToastToRender:s,containerRef:n,isToastActive:i}=SI(t),{className:a,style:o,rtl:l,containerId:c}=t;function u(h){const d=Rn("Toastify__toast-container",`Toastify__toast-container--${h}`,{"Toastify__toast-container--rtl":l});return Wt(a)?a({position:h,rtl:l,defaultClassName:d}):Rn(d,Ql(a))}return b.useEffect(()=>{e&&(e.current=n.current)},[]),ve.createElement("div",{ref:n,className:"Toastify",id:c},s((h,d)=>{const f=d.length?{...o}:{...o,pointerEvents:"none"};return ve.createElement("div",{className:u(h),style:f,key:`container-${h}`},d.map((y,p)=>{let{content:w,props:g}=y;return ve.createElement(NI,{...g,isIn:i(g.toastId),style:{...g.style,"--nth":p+1,"--len":d.length},key:`toast-${g.key}`},w)}))}))});Fc.displayName="ToastContainer",Fc.defaultProps={position:"top-right",transition:kI,autoClose:5e3,closeButton:tj,pauseOnHover:!0,pauseOnFocusLoss:!0,closeOnClick:!0,draggable:!0,draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light"};let ud,yi=new Map,Ta=[],CI=1;function sj(){return""+CI++}function PI(t){return t&&($i(t.toastId)||Ya(t.toastId))?t.toastId:sj()}function qa(t,e){return yi.size>0?gs.emit(0,t,e):Ta.push({content:t,options:e}),e.toastId}function Bc(t,e){return{...e,type:e&&e.type||t,toastId:PI(e)}}function xl(t){return(e,s)=>qa(e,Bc(t,s))}function X(t,e){return qa(t,Bc("default",e))}X.loading=(t,e)=>qa(t,Bc("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...e})),X.promise=function(t,e,s){let n,{pending:i,error:a,success:o}=e;i&&(n=$i(i)?X.loading(i,s):X.loading(i.render,{...s,...i}));const l={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},c=(h,d,f)=>{if(d==null)return void X.dismiss(n);const y={type:h,...l,...s,data:f},p=$i(d)?{render:d}:d;return n?X.update(n,{...y,...p}):X(p.render,{...y,...p}),f},u=Wt(t)?t():t;return u.then(h=>c("success",o,h)).catch(h=>c("error",a,h)),u},X.success=xl("success"),X.info=xl("info"),X.error=xl("error"),X.warning=xl("warning"),X.warn=X.warning,X.dark=(t,e)=>qa(t,Bc("default",{theme:"dark",...e})),X.dismiss=t=>{yi.size>0?gs.emit(1,t):Ta=Ta.filter(e=>t!=null&&e.options.toastId!==t)},X.clearWaitingQueue=function(t){return t===void 0&&(t={}),gs.emit(5,t)},X.isActive=t=>{let e=!1;return yi.forEach(s=>{s.isToastActive&&s.isToastActive(t)&&(e=!0)}),e},X.update=function(t,e){e===void 0&&(e={}),setTimeout(()=>{const s=function(n,i){let{containerId:a}=i;const o=yi.get(a||ud);return o&&o.getToast(n)}(t,e);if(s){const{props:n,content:i}=s,a={delay:100,...n,...e,toastId:e.toastId||t,updateId:sj()};a.toastId!==t&&(a.staleId=t);const o=a.render||i;delete a.render,qa(o,a)}},0)},X.done=t=>{X.update(t,{progress:1})},X.onChange=t=>(gs.on(4,t),()=>{gs.off(4,t)}),X.POSITION={TOP_LEFT:"top-left",TOP_RIGHT:"top-right",TOP_CENTER:"top-center",BOTTOM_LEFT:"bottom-left",BOTTOM_RIGHT:"bottom-right",BOTTOM_CENTER:"bottom-center"},X.TYPE={INFO:"info",SUCCESS:"success",WARNING:"warning",ERROR:"error",DEFAULT:"default"},gs.on(2,t=>{ud=t.containerId||t,yi.set(ud,t),Ta.forEach(e=>{gs.emit(0,e.content,e.options)}),Ta=[]}).on(3,t=>{yi.delete(t.containerId||t),yi.size===0&&gs.off(0).off(1).off(5)});var nj={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},b0=ve.createContext&&ve.createContext(nj),Hn=function(){return Hn=Object.assign||function(t){for(var e,s=1,n=arguments.length;s<n;s++){e=arguments[s];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Hn.apply(this,arguments)},TI=function(t,e){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(s[n[i]]=t[n[i]]);return s};function ij(t){return t&&t.map(function(e,s){return ve.createElement(e.tag,Hn({key:s},e.attr),ij(e.child))})}function ne(t){return function(e){return ve.createElement(EI,Hn({attr:Hn({},t.attr)},e),ij(t.child))}}function EI(t){var e=function(s){var n=t.attr,i=t.size,a=t.title,o=TI(t,["attr","size","title"]),l=i||s.size||"1em",c;return s.className&&(c=s.className),t.className&&(c=(c?c+" ":"")+t.className),ve.createElement("svg",Hn({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},s.attr,n,o,{className:c,style:Hn(Hn({color:t.color||s.color},s.style),t.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),a&&ve.createElement("title",null,a),t.children)};return b0!==void 0?ve.createElement(b0.Consumer,null,function(s){return e(s)}):e(nj)}function Ns(t){return ne({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"22 12 18 12 15 21 9 3 6 12 2 12"}}]})(t)}function It(t){return ne({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"}},{tag:"line",attr:{x1:"12",y1:"8",x2:"12",y2:"12"}},{tag:"line",attr:{x1:"12",y1:"16",x2:"12.01",y2:"16"}}]})(t)}function Kn(t){return ne({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}},{tag:"line",attr:{x1:"12",y1:"9",x2:"12",y2:"13"}},{tag:"line",attr:{x1:"12",y1:"17",x2:"12.01",y2:"17"}}]})(t)}function Wr(t){return ne({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"7",y1:"7",x2:"17",y2:"17"}},{tag:"polyline",attr:{points:"17 7 17 17 7 17"}}]})(t)}function xi(t){return ne({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"}},{tag:"polyline",attr:{points:"19 12 12 19 5 12"}}]})(t)}function Lu(t){return ne({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"12",x2:"5",y2:"12"}},{tag:"polyline",attr:{points:"12 19 5 12 12 5"}}]})(t)}function er(t){return ne({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"}},{tag:"polyline",attr:{points:"12 5 19 12 12 19"}}]})(t)}function So(t){return ne({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"7",y1:"17",x2:"17",y2:"7"}},{tag:"polyline",attr:{points:"7 7 17 7 17 17"}}]})(t)}function cr(t){return ne({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"19",x2:"12",y2:"5"}},{tag:"polyline",attr:{points:"5 12 12 5 19 12"}}]})(t)}function j0(t){return ne({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"8",r:"7"}},{tag:"polyline",attr:{points:"8.21 13.89 7 23 12 20 17 23 15.79 13.88"}}]})(t)}function Ot(t){return ne({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"20",x2:"18",y2:"10"}},{tag:"line",attr:{x1:"12",y1:"20",x2:"12",y2:"4"}},{tag:"line",attr:{x1:"6",y1:"20",x2:"6",y2:"14"}}]})(t)}function Li(t){return ne({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"}},{tag:"path",attr:{d:"M13.73 21a2 2 0 0 1-3.46 0"}}]})(t)}function _i(t){return ne({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"}}]})(t)}function rj(t){return ne({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}},{tag:"line",attr:{x1:"16",y1:"2",x2:"16",y2:"6"}},{tag:"line",attr:{x1:"8",y1:"2",x2:"8",y2:"6"}},{tag:"line",attr:{x1:"3",y1:"10",x2:"21",y2:"10"}}]})(t)}function LI(t){return ne({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"}},{tag:"circle",attr:{cx:"12",cy:"13",r:"4"}}]})(t)}function Os(t){return ne({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}},{tag:"polyline",attr:{points:"22 4 12 14.01 9 11.01"}}]})(t)}function Hr(t){return ne({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"20 6 9 17 4 12"}}]})(t)}function Dt(t){return ne({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"}},{tag:"polyline",attr:{points:"12 6 12 12 16 14"}}]})(t)}function _I(t){return ne({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3H6a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3V6a3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3h12a3 3 0 0 0 3-3 3 3 0 0 0-3-3z"}}]})(t)}function RI(t){return ne({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"9 10 4 15 9 20"}},{tag:"path",attr:{d:"M20 4v7a4 4 0 0 1-4 4H4"}}]})(t)}function N0(t){return ne({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"4",y:"4",width:"16",height:"16",rx:"2",ry:"2"}},{tag:"rect",attr:{x:"9",y:"9",width:"6",height:"6"}},{tag:"line",attr:{x1:"9",y1:"1",x2:"9",y2:"4"}},{tag:"line",attr:{x1:"15",y1:"1",x2:"15",y2:"4"}},{tag:"line",attr:{x1:"9",y1:"20",x2:"9",y2:"23"}},{tag:"line",attr:{x1:"15",y1:"20",x2:"15",y2:"23"}},{tag:"line",attr:{x1:"20",y1:"9",x2:"23",y2:"9"}},{tag:"line",attr:{x1:"20",y1:"14",x2:"23",y2:"14"}},{tag:"line",attr:{x1:"1",y1:"9",x2:"4",y2:"9"}},{tag:"line",attr:{x1:"1",y1:"14",x2:"4",y2:"14"}}]})(t)}function MI(t){return ne({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"ellipse",attr:{cx:"12",cy:"5",rx:"9",ry:"3"}},{tag:"path",attr:{d:"M21 12c0 1.66-4 3-9 3s-9-1.34-9-3"}},{tag:"path",attr:{d:"M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5"}}]})(t)}function St(t){return ne({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"23"}},{tag:"path",attr:{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"}}]})(t)}function aj(t){return ne({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}},{tag:"polyline",attr:{points:"7 10 12 15 17 10"}},{tag:"line",attr:{x1:"12",y1:"15",x2:"12",y2:"3"}}]})(t)}function oj(t){return ne({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}},{tag:"path",attr:{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"}}]})(t)}function _u(t){return ne({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}},{tag:"polyline",attr:{points:"15 3 21 3 21 9"}},{tag:"line",attr:{x1:"10",y1:"14",x2:"21",y2:"3"}}]})(t)}function hm(t){return ne({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}},{tag:"line",attr:{x1:"1",y1:"1",x2:"23",y2:"23"}}]})(t)}function zi(t){return ne({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}},{tag:"circle",attr:{cx:"12",cy:"12",r:"3"}}]})(t)}function II(t){return ne({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}},{tag:"polyline",attr:{points:"14 2 14 8 20 8"}},{tag:"line",attr:{x1:"16",y1:"13",x2:"8",y2:"13"}},{tag:"line",attr:{x1:"16",y1:"17",x2:"8",y2:"17"}},{tag:"polyline",attr:{points:"10 9 9 9 8 9"}}]})(t)}function Ru(t){return ne({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"}}]})(t)}function k0(t){return ne({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"20 12 20 22 4 22 4 12"}},{tag:"rect",attr:{x:"2",y:"7",width:"20",height:"5"}},{tag:"line",attr:{x1:"12",y1:"22",x2:"12",y2:"7"}},{tag:"path",attr:{d:"M12 7H7.5a2.5 2.5 0 0 1 0-5C11 2 12 7 12 7z"}},{tag:"path",attr:{d:"M12 7h4.5a2.5 2.5 0 0 0 0-5C13 2 12 7 12 7z"}}]})(t)}function sg(t){return ne({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"}},{tag:"line",attr:{x1:"2",y1:"12",x2:"22",y2:"12"}},{tag:"path",attr:{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"}}]})(t)}function AI(t){return ne({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"7",height:"7"}},{tag:"rect",attr:{x:"14",y:"3",width:"7",height:"7"}},{tag:"rect",attr:{x:"14",y:"14",width:"7",height:"7"}},{tag:"rect",attr:{x:"3",y:"14",width:"7",height:"7"}}]})(t)}function lj(t){return ne({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}},{tag:"polyline",attr:{points:"9 22 9 12 15 12 15 22"}}]})(t)}function Mu(t){return ne({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"}},{tag:"line",attr:{x1:"12",y1:"16",x2:"12",y2:"12"}},{tag:"line",attr:{x1:"12",y1:"8",x2:"12.01",y2:"8"}}]})(t)}function OI(t){return ne({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 2l-2 2m-7.61 7.61a5.5 5.5 0 1 1-7.778 7.778 5.5 5.5 0 0 1 7.777-7.777zm0 0L15.5 7.5m0 0l3 3L22 7l-3-3m-3.5 3.5L19 4"}}]})(t)}function DI(t){return ne({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"12 2 2 7 12 12 22 7 12 2"}},{tag:"polyline",attr:{points:"2 17 12 22 22 17"}},{tag:"polyline",attr:{points:"2 12 12 17 22 12"}}]})(t)}function cj(t){return ne({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"8",y1:"6",x2:"21",y2:"6"}},{tag:"line",attr:{x1:"8",y1:"12",x2:"21",y2:"12"}},{tag:"line",attr:{x1:"8",y1:"18",x2:"21",y2:"18"}},{tag:"line",attr:{x1:"3",y1:"6",x2:"3.01",y2:"6"}},{tag:"line",attr:{x1:"3",y1:"12",x2:"3.01",y2:"12"}},{tag:"line",attr:{x1:"3",y1:"18",x2:"3.01",y2:"18"}}]})(t)}function Kl(t){return ne({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"2",x2:"12",y2:"6"}},{tag:"line",attr:{x1:"12",y1:"18",x2:"12",y2:"22"}},{tag:"line",attr:{x1:"4.93",y1:"4.93",x2:"7.76",y2:"7.76"}},{tag:"line",attr:{x1:"16.24",y1:"16.24",x2:"19.07",y2:"19.07"}},{tag:"line",attr:{x1:"2",y1:"12",x2:"6",y2:"12"}},{tag:"line",attr:{x1:"18",y1:"12",x2:"22",y2:"12"}},{tag:"line",attr:{x1:"4.93",y1:"19.07",x2:"7.76",y2:"16.24"}},{tag:"line",attr:{x1:"16.24",y1:"7.76",x2:"19.07",y2:"4.93"}}]})(t)}function bo(t){return ne({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}},{tag:"path",attr:{d:"M7 11V7a5 5 0 0 1 10 0v4"}}]})(t)}function uj(t){return ne({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}},{tag:"polyline",attr:{points:"16 17 21 12 16 7"}},{tag:"line",attr:{x1:"21",y1:"12",x2:"9",y2:"12"}}]})(t)}function Iu(t){return ne({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}},{tag:"polyline",attr:{points:"22,6 12,13 2,6"}}]})(t)}function FI(t){return ne({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}},{tag:"circle",attr:{cx:"12",cy:"10",r:"3"}}]})(t)}function BI(t){return ne({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"15 3 21 3 21 9"}},{tag:"polyline",attr:{points:"9 21 3 21 3 15"}},{tag:"line",attr:{x1:"21",y1:"3",x2:"14",y2:"10"}},{tag:"line",attr:{x1:"3",y1:"21",x2:"10",y2:"14"}}]})(t)}function hj(t){return ne({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"3",y1:"12",x2:"21",y2:"12"}},{tag:"line",attr:{x1:"3",y1:"6",x2:"21",y2:"6"}},{tag:"line",attr:{x1:"3",y1:"18",x2:"21",y2:"18"}}]})(t)}function $I(t){return ne({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"}}]})(t)}function dj(t){return ne({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"1",y1:"1",x2:"23",y2:"23"}},{tag:"path",attr:{d:"M9 9v3a3 3 0 0 0 5.12 2.12M15 9.34V4a3 3 0 0 0-5.94-.6"}},{tag:"path",attr:{d:"M17 16.95A7 7 0 0 1 5 12v-2m14 0v2a7 7 0 0 1-.11 1.23"}},{tag:"line",attr:{x1:"12",y1:"19",x2:"12",y2:"23"}},{tag:"line",attr:{x1:"8",y1:"23",x2:"16",y2:"23"}}]})(t)}function Au(t){return ne({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"}},{tag:"path",attr:{d:"M19 10v2a7 7 0 0 1-14 0v-2"}},{tag:"line",attr:{x1:"12",y1:"19",x2:"12",y2:"23"}},{tag:"line",attr:{x1:"8",y1:"23",x2:"16",y2:"23"}}]})(t)}function Ou(t){return ne({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"}}]})(t)}function c$(t){return ne({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"2",y:"3",width:"20",height:"14",rx:"2",ry:"2"}},{tag:"line",attr:{x1:"8",y1:"21",x2:"16",y2:"21"}},{tag:"line",attr:{x1:"12",y1:"17",x2:"12",y2:"21"}}]})(t)}function zI(t){return ne({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"}}]})(t)}function VI(t){return ne({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"1"}},{tag:"circle",attr:{cx:"19",cy:"12",r:"1"}},{tag:"circle",attr:{cx:"5",cy:"12",r:"1"}}]})(t)}function UI(t){return ne({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"6",y:"4",width:"4",height:"16"}},{tag:"rect",attr:{x:"14",y:"4",width:"4",height:"16"}}]})(t)}function fj(t){return ne({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"5",x2:"5",y2:"19"}},{tag:"circle",attr:{cx:"6.5",cy:"6.5",r:"2.5"}},{tag:"circle",attr:{cx:"17.5",cy:"17.5",r:"2.5"}}]})(t)}function WI(t){return ne({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"}}]})(t)}function jo(t){return ne({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21.21 15.89A10 10 0 1 1 8 2.83"}},{tag:"path",attr:{d:"M22 12A10 10 0 0 0 12 2v10z"}}]})(t)}function HI(t){return ne({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"5 3 19 12 5 21 5 3"}}]})(t)}function Mn(t){return ne({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"}},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"}}]})(t)}function mt(t){return ne({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 4 23 10 17 10"}},{tag:"polyline",attr:{points:"1 20 1 14 7 14"}},{tag:"path",attr:{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"}}]})(t)}function mj(t){return ne({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}},{tag:"polyline",attr:{points:"17 21 17 13 7 13 7 21"}},{tag:"polyline",attr:{points:"7 3 7 8 15 8"}}]})(t)}function Yr(t){return ne({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"}},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"}}]})(t)}function YI(t){return ne({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"22",y1:"2",x2:"11",y2:"13"}},{tag:"polygon",attr:{points:"22 2 15 22 11 13 2 9 22 2"}}]})(t)}function qr(t){return ne({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"3"}},{tag:"path",attr:{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"}}]})(t)}function qI(t){return ne({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"18",cy:"5",r:"3"}},{tag:"circle",attr:{cx:"6",cy:"12",r:"3"}},{tag:"circle",attr:{cx:"18",cy:"19",r:"3"}},{tag:"line",attr:{x1:"8.59",y1:"13.51",x2:"15.42",y2:"17.49"}},{tag:"line",attr:{x1:"15.41",y1:"6.51",x2:"8.59",y2:"10.49"}}]})(t)}function Xn(t){return ne({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"}}]})(t)}function Tt(t){return ne({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"9",cy:"21",r:"1"}},{tag:"circle",attr:{cx:"20",cy:"21",r:"1"}},{tag:"path",attr:{d:"M1 1h4l2.68 13.39a2 2 0 0 0 2 1.61h9.72a2 2 0 0 0 2-1.61L23 6H6"}}]})(t)}function GI(t){return ne({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"5",y:"2",width:"14",height:"20",rx:"2",ry:"2"}},{tag:"line",attr:{x1:"12",y1:"18",x2:"12.01",y2:"18"}}]})(t)}function Gr(t){return ne({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"}}]})(t)}function QI(t){return ne({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"5"}},{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"3"}},{tag:"line",attr:{x1:"12",y1:"21",x2:"12",y2:"23"}},{tag:"line",attr:{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}},{tag:"line",attr:{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}},{tag:"line",attr:{x1:"1",y1:"12",x2:"3",y2:"12"}},{tag:"line",attr:{x1:"21",y1:"12",x2:"23",y2:"12"}},{tag:"line",attr:{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}},{tag:"line",attr:{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"}}]})(t)}function KI(t){return ne({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z"}},{tag:"line",attr:{x1:"7",y1:"7",x2:"7.01",y2:"7"}}]})(t)}function $c(t){return ne({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"}},{tag:"circle",attr:{cx:"12",cy:"12",r:"6"}},{tag:"circle",attr:{cx:"12",cy:"12",r:"2"}}]})(t)}function XI(t){return ne({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"}},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"}},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"}}]})(t)}function lt(t){return ne({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 18 13.5 8.5 8.5 13.5 1 6"}},{tag:"polyline",attr:{points:"17 18 23 18 23 12"}}]})(t)}function Oe(t){return ne({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 6 13.5 15.5 8.5 10.5 1 18"}},{tag:"polyline",attr:{points:"17 6 23 6 23 12"}}]})(t)}function Is(t){return ne({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"}}]})(t)}function JI(t){return ne({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"}},{tag:"path",attr:{d:"M23 21v-2a4 4 0 0 0-3-3.87"}},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"}}]})(t)}function pj(t){return ne({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5"}},{tag:"path",attr:{d:"M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"}}]})(t)}function fn(t){return ne({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"}},{tag:"line",attr:{x1:"15",y1:"9",x2:"9",y2:"15"}},{tag:"line",attr:{x1:"9",y1:"9",x2:"15",y2:"15"}}]})(t)}function Bt(t){return ne({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"}},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"}}]})(t)}function gj(t){return ne({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"}}]})(t)}const yj=({onSuccess:t,onError:e,buttonText:s="Continue with Google",disabled:n=!1,className:i=""})=>{const a=b.useRef(null),o=b.useRef(!1);b.useEffect(()=>{const h=()=>{if(window.google&&window.google.accounts){d();return}const f=document.createElement("script");f.src="https://accounts.google.com/gsi/client",f.async=!0,f.defer=!0,f.onload=d,f.onerror=()=>{console.error("Failed to load Google Identity Services"),X.error("Failed to load Google Sign-In")},document.head.appendChild(f)},d=()=>{if(!(o.current||!window.google||!window.google.accounts))try{const f="858430300178-f76rk8do7lqcnggimqp60793naq1la9t.apps.googleusercontent.com";window.google.accounts.id.initialize({client_id:f,callback:l,auto_select:!1,cancel_on_tap_outside:!0}),a.current&&window.google.accounts.id.renderButton(a.current,{theme:"outline",size:"large",width:400,text:"continue_with",shape:"rectangular",logo_alignment:"left"}),o.current=!0}catch(f){console.error("Error initializing Google Sign-In:",f),f.message&&f.message.includes("origin")?(console.error("Google OAuth origin error. Please configure authorized origins in Google Cloud Console."),X.error("Google Sign-In not configured for this domain")):X.error("Failed to initialize Google Sign-In")}};return h(),()=>{o.current=!1}},[]);const l=async h=>{try{if(!h.credential)throw new Error("No credential received from Google");const d=await fetch("http://localhost:5001/api/auth/google/verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({credential:h.credential})}),f=await d.json();if(d.ok&&f.success)t(f.user,f.token),X.success(f.isNewUser?"Welcome to TradeBro!":"Welcome back!",{position:"top-right",autoClose:2e3});else throw new Error(f.message||"Google authentication failed")}catch(d){console.error("Google Sign-In error:",d),e(d.message||"Google authentication failed"),X.error("Google Sign-In failed. Please try again.",{position:"top-right",autoClose:3e3})}},c=async()=>{{await u();return}},u=async()=>{try{const h=document.querySelector(".google-signin-btn");if(h&&(h.disabled=!0,h.innerHTML=`
          <div style="
            width: 20px;
            height: 20px;
            border: 2px solid #f3f3f3;
            border-top: 2px solid #4285f4;
            border-radius: 50%;
            animation: googleSpinner 1s linear infinite;
          "></div>
          Signing in...
        `,!document.getElementById("google-spinner-style"))){const g=document.createElement("style");g.id="google-spinner-style",g.textContent=`
            @keyframes googleSpinner {
              0% { transform: rotate(0deg); }
              100% { transform: rotate(360deg); }
            }
          `,document.head.appendChild(g)}await new Promise(g=>setTimeout(g,1500));const d=[{id:"google_dev_001",email:"john.developer@gmail.com",fullName:"John Developer",firstName:"John",lastName:"Developer",profilePicture:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=150&h=150&fit=crop&crop=face",authProvider:"google",isEmailVerified:!0,createdAt:new Date().toISOString()},{id:"google_dev_002",email:"sarah.trader@gmail.com",fullName:"Sarah Trader",firstName:"Sarah",lastName:"Trader",profilePicture:"https://images.unsplash.com/photo-1494790108755-2616b9e0e4b0?w=150&h=150&fit=crop&crop=face",authProvider:"google",isEmailVerified:!0,createdAt:new Date().toISOString()}],f=d[Math.floor(Math.random()*d.length)],y="dev_jwt_token_"+Date.now()+"_"+Math.random().toString(36).substr(2,9),p=await fetch("http://localhost:5001/api/auth/google/verify",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({credential:y,userData:JSON.stringify(f)})}),w=await p.json();if(p.ok&&w.success)localStorage.setItem("token",w.token),localStorage.setItem("user",JSON.stringify(w.user)),t(w.user,w.token);else throw new Error(w.message||"Development authentication failed");X.success(`Welcome ${f.firstName}! (Development Mode)`,{position:"top-right",autoClose:3e3})}catch(h){console.error("Development fallback error:",h),e("Development Google Sign-In failed");const d=document.querySelector(".google-signin-btn");d&&(d.disabled=!1,d.innerHTML=`<svg width="20" height="20" viewBox="0 0 24 24"><path fill="#4285f4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/><path fill="#34a853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/><path fill="#fbbc05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/><path fill="#ea4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/></svg> ${s}`)}};return r.jsxs("div",{className:"google-signin-container",children:[r.jsxs("button",{type:"button",className:`google-signin-btn ${i}`,onClick:c,disabled:n,style:{width:"100%",height:"44px",backgroundColor:"rgba(255, 255, 255, 0.95)",border:"1px solid rgba(255, 255, 255, 0.2)",borderRadius:"var(--radius-lg)",display:"flex",alignItems:"center",justifyContent:"center",gap:"12px",fontSize:"14px",fontWeight:"500",color:"#3c4043",cursor:n?"not-allowed":"pointer",opacity:n?.6:1,transition:"all 0.2s ease",fontFamily:"Roboto, arial, sans-serif",marginBottom:"var(--space-xl, 1.5rem)",padding:"0 16px",backdropFilter:"blur(10px)"},onMouseEnter:h=>{n||(h.target.style.backgroundColor="#f8f9fa",h.target.style.boxShadow="0 1px 3px rgba(0,0,0,0.1)")},onMouseLeave:h=>{n||(h.target.style.backgroundColor="white",h.target.style.boxShadow="none")},children:[r.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",children:[r.jsx("path",{fill:"#4285f4",d:"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"}),r.jsx("path",{fill:"#34a853",d:"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"}),r.jsx("path",{fill:"#fbbc05",d:"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"}),r.jsx("path",{fill:"#ea4335",d:"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"})]}),s]}),r.jsx("div",{ref:a,style:{display:"none",position:"absolute",left:"-9999px"}})]})},ZI=({onLogin:t})=>{var N,j;const e=Lt(),s=us(),[n,i]=b.useState({email:"",password:""}),[a,o]=b.useState(!1),[l,c]=b.useState(!1),[u,h]=b.useState({}),[d,f]=b.useState(!1),y=((j=(N=s.state)==null?void 0:N.from)==null?void 0:j.pathname)||"/dashboard",p=localStorage.getItem("redirectAfterLogin")||y;b.useEffect(()=>{var P;(P=s.state)!=null&&P.from&&X.info("Please log in to access that page",{position:"top-right",autoClose:3e3})},[s.state]);const w=P=>{const{name:E,value:T}=P.target;i(R=>({...R,[E]:T})),u[E]&&h(R=>({...R,[E]:""}))},g=()=>{const P={};return n.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.email)||(P.email="Please enter a valid email address"):P.email="Email is required",n.password?n.password.length<6&&(P.password="Password must be at least 6 characters"):P.password="Password is required",h(P),Object.keys(P).length===0},m=async P=>{if(P.preventDefault(),!!g()){c(!0),h({});try{const E=await fetch("http://localhost:5001/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n.email,password:n.password})}),T=await E.json();E.ok&&T.success?(t(T.user,T.token),X.success("Welcome back! Login successful",{position:"top-right",autoClose:2e3}),setTimeout(()=>{e(p,{replace:!0}),localStorage.removeItem("redirectAfterLogin")},1e3)):(h({general:T.message||"Login failed. Please try again."}),X.error(T.message||"Invalid credentials. Please try again.",{position:"top-right",autoClose:3e3}))}catch(E){console.error("Login error:",E),h({general:"Network error. Please try again."}),X.error("Network error. Please check your connection.",{position:"top-right",autoClose:3e3})}finally{c(!1)}}},x=(P,E)=>{t(P,E),setTimeout(()=>{e(p,{replace:!0}),localStorage.removeItem("redirectAfterLogin")},1e3)},S=P=>{h({general:P||"Google login failed. Please try again."}),X.error("Google login failed. Please try again.",{position:"top-right",autoClose:3e3})};return r.jsx("div",{className:"auth-page",children:r.jsxs(U.div,{className:"auth-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[r.jsxs("div",{className:"auth-header",children:[r.jsxs("div",{className:"auth-logo",children:[r.jsx("div",{className:"auth-logo-icon",children:"📈"}),r.jsx("h1",{className:"auth-logo-text",children:"TradeBro"})]}),r.jsxs("div",{children:[r.jsx("h2",{className:"auth-title",children:"Welcome Back"}),r.jsx("p",{className:"auth-subtitle",children:"Sign in to your account to continue trading"})]})]}),r.jsxs("form",{onSubmit:m,className:"auth-form",children:[u.general&&r.jsxs("div",{className:"error-message",children:[r.jsx(It,{size:16}),r.jsx("span",{children:u.general})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{className:"form-label",children:[r.jsx(Iu,{size:16}),"Email Address"]}),r.jsx("input",{type:"email",name:"email",value:n.email,onChange:w,className:`form-input ${u.email?"form-input-error":""}`,placeholder:"Enter your email",disabled:l,autoComplete:"email",required:!0}),u.email&&r.jsxs("div",{className:"form-error",children:[r.jsx(It,{size:14}),r.jsx("span",{children:u.email})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{className:"form-label",children:[r.jsx(bo,{size:16}),"Password"]}),r.jsxs("div",{className:"password-input",children:[r.jsx("input",{type:a?"text":"password",name:"password",value:n.password,onChange:w,className:`form-input ${u.password?"form-input-error":""}`,placeholder:"Enter your password",disabled:l,autoComplete:"current-password",required:!0}),r.jsx("button",{type:"button",className:"password-toggle",onClick:()=>o(!a),disabled:l,"aria-label":a?"Hide password":"Show password",children:a?r.jsx(hm,{size:16}):r.jsx(zi,{size:16})})]}),u.password&&r.jsxs("div",{className:"form-error",children:[r.jsx(It,{size:14}),r.jsx("span",{children:u.password})]})]}),r.jsxs("div",{className:"form-options",children:[r.jsxs("label",{className:"checkbox-label",children:[r.jsx("input",{type:"checkbox",checked:d,onChange:P=>{console.log("Checkbox clicked:",P.target.checked),f(P.target.checked)},disabled:l,id:"remember-me"}),r.jsx("span",{children:"Remember me"})]}),r.jsx(Re,{to:"/forgot-password",className:"forgot-link",children:"Forgot password?"})]}),r.jsx("button",{type:"submit",className:"auth-submit",disabled:l,children:l?r.jsx("div",{className:"loading-spinner"}):r.jsxs(r.Fragment,{children:["Sign In",r.jsx(er,{size:16})]})})]}),r.jsx("div",{className:"auth-divider",children:r.jsx("span",{children:"or continue with"})}),r.jsx(yj,{onSuccess:x,onError:S,buttonText:"Sign in with Google",disabled:l,className:"google-button"}),r.jsx("div",{className:"auth-footer",children:r.jsxs("p",{children:["Don't have an account?"," ",r.jsx(Re,{to:"/signup",children:"Sign up for free"})]})})]})})},eA=({onSignup:t})=>{const e=Lt(),[s,n]=b.useState({name:"",email:"",password:"",confirmPassword:""}),[i,a]=b.useState(!1),[o,l]=b.useState(!1),[c,u]=b.useState(!1),[h,d]=b.useState({}),[f,y]=b.useState(!1),[p,w]=b.useState({length:!1,uppercase:!1,lowercase:!1,number:!1,special:!1}),g=localStorage.getItem("redirectAfterLogin")||"/dashboard",m=M=>{const _={length:M.length>=8,uppercase:/[A-Z]/.test(M),lowercase:/[a-z]/.test(M),number:/\d/.test(M),special:/[!@#$%^&*(),.?":{}|<>]/.test(M)};return w(_),_},x=M=>{const{name:_,value:O}=M.target;n(A=>({...A,[_]:O})),_==="password"&&m(O),h[_]&&d(A=>({...A,[_]:""}))},S=()=>{const M={};return s.name.trim()?s.name.trim().length<2&&(M.name="Name must be at least 2 characters"):M.name="Full name is required",s.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.email)||(M.email="Please enter a valid email address"):M.email="Email is required",s.password?s.password.length<8&&(M.password="Password must be at least 8 characters"):M.password="Password is required",s.confirmPassword?s.password!==s.confirmPassword&&(M.confirmPassword="Passwords do not match"):M.confirmPassword="Please confirm your password",f||(M.terms="You must accept the Terms of Service and Privacy Policy"),d(M),Object.keys(M).length===0},N=async M=>{if(M.preventDefault(),!!S()){u(!0),d({});try{const _=s.email.split("@")[0].replace(/[^a-zA-Z0-9]/g,""),O=Date.now().toString().slice(-4),A=_+O;console.log("📤 Sending signup data:",{username:A,email:s.email,fullName:s.name,passwordLength:s.password.length});const B=await fetch("http://localhost:5001/api/auth/signup",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:A,email:s.email,password:s.password,fullName:s.name})}),H=await B.json();if(B.ok&&H.success)t(H.user,H.token),X.success("Welcome to TradeBro! Account created successfully",{position:"top-right",autoClose:2e3}),setTimeout(()=>{e(g,{replace:!0}),localStorage.removeItem("redirectAfterLogin")},1e3);else if(console.log("❌ Signup failed:",H),H.errors&&typeof H.errors=="object"){d(H.errors);const F=Object.values(H.errors)[0];X.error(F||"Please fix the validation errors.",{position:"top-right",autoClose:4e3})}else d({general:H.message||"Signup failed. Please try again."}),X.error(H.message||"Signup failed. Please try again.",{position:"top-right",autoClose:3e3})}catch(_){console.error("Signup error:",_),d({general:"Network error. Please try again."}),X.error("Network error. Please check your connection.",{position:"top-right",autoClose:3e3})}finally{u(!1)}}},j=(M,_)=>{t(M,_),setTimeout(()=>{e(g,{replace:!0}),localStorage.removeItem("redirectAfterLogin")},1e3)},P=M=>{d({general:M||"Google signup failed. Please try again."}),X.error("Google signup failed. Please try again.",{position:"top-right",autoClose:3e3})},E=()=>Object.values(p).filter(Boolean).length,T=()=>{const M=E();return M<2?"Weak":M<4?"Medium":"Strong"},R=()=>{const M=E();return M<2?"#ef4444":M<4?"#f59e0b":"#10b981"};return r.jsx("div",{className:"auth-page",children:r.jsxs(U.div,{className:"auth-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[r.jsxs("div",{className:"auth-header",children:[r.jsxs("div",{className:"auth-logo",children:[r.jsx("div",{className:"auth-logo-icon",children:"📈"}),r.jsx("h1",{className:"auth-logo-text",children:"TradeBro"})]}),r.jsxs("div",{children:[r.jsx("h2",{className:"auth-title",children:"Create Account"}),r.jsx("p",{className:"auth-subtitle",children:"Join TradeBro and start your trading journey today"})]})]}),r.jsxs("form",{onSubmit:N,className:"auth-form",children:[h.general&&r.jsxs("div",{className:"error-message",children:[r.jsx(It,{size:16}),r.jsx("span",{children:h.general})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{className:"form-label",children:[r.jsx(Is,{size:16}),"Full Name"]}),r.jsx("input",{type:"text",name:"name",value:s.name,onChange:x,className:`form-input ${h.name?"form-input-error":""}`,placeholder:"Enter your full name",disabled:c,autoComplete:"name",required:!0}),h.name&&r.jsxs("div",{className:"form-error",children:[r.jsx(It,{size:14}),r.jsx("span",{children:h.name})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{className:"form-label",children:[r.jsx(Iu,{size:16}),"Email Address"]}),r.jsx("input",{type:"email",name:"email",value:s.email,onChange:x,className:`form-input ${h.email?"form-input-error":""}`,placeholder:"Enter your email",disabled:c,autoComplete:"email",required:!0}),h.email&&r.jsxs("div",{className:"form-error",children:[r.jsx(It,{size:14}),r.jsx("span",{children:h.email})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{className:"form-label",children:[r.jsx(bo,{size:16}),"Password"]}),r.jsxs("div",{className:"password-input",children:[r.jsx("input",{type:i?"text":"password",name:"password",value:s.password,onChange:x,className:`form-input ${h.password?"form-input-error":""}`,placeholder:"Create a password",disabled:c,autoComplete:"new-password",required:!0}),r.jsx("button",{type:"button",className:"password-toggle",onClick:()=>a(!i),disabled:c,"aria-label":i?"Hide password":"Show password",children:i?r.jsx(hm,{size:16}):r.jsx(zi,{size:16})})]}),h.password&&r.jsxs("div",{className:"form-error",children:[r.jsx(It,{size:14}),r.jsx("span",{children:h.password})]}),s.password&&r.jsxs("div",{className:"password-strength",children:[r.jsx("div",{className:"password-strength-bar",children:r.jsx("div",{className:"password-strength-fill",style:{width:`${E()/5*100}%`,backgroundColor:R()}})}),r.jsx("span",{className:"password-strength-text",style:{color:R()},children:T()})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{className:"form-label",children:[r.jsx(bo,{size:16}),"Confirm Password"]}),r.jsxs("div",{className:"password-input",children:[r.jsx("input",{type:o?"text":"password",name:"confirmPassword",value:s.confirmPassword,onChange:x,className:`form-input ${h.confirmPassword?"form-input-error":""}`,placeholder:"Confirm your password",disabled:c,autoComplete:"new-password",required:!0}),r.jsx("button",{type:"button",className:"password-toggle",onClick:()=>l(!o),disabled:c,"aria-label":o?"Hide password":"Show password",children:o?r.jsx(hm,{size:16}):r.jsx(zi,{size:16})})]}),h.confirmPassword&&r.jsxs("div",{className:"form-error",children:[r.jsx(It,{size:14}),r.jsx("span",{children:h.confirmPassword})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{className:"checkbox-label",children:[r.jsx("input",{type:"checkbox",checked:f,onChange:M=>y(M.target.checked),disabled:c}),r.jsxs("span",{children:["I agree to the"," ",r.jsx(Re,{to:"/terms",children:"Terms of Service"})," ","and"," ",r.jsx(Re,{to:"/privacy",children:"Privacy Policy"})]})]}),h.terms&&r.jsxs("div",{className:"form-error",children:[r.jsx(It,{size:14}),r.jsx("span",{children:h.terms})]})]}),r.jsx("button",{type:"submit",className:"auth-submit",disabled:c,children:c?r.jsx("div",{className:"loading-spinner"}):r.jsxs(r.Fragment,{children:["Create Account",r.jsx(er,{size:16})]})})]}),r.jsx("div",{className:"auth-divider",children:r.jsx("span",{children:"or continue with"})}),r.jsx(yj,{onSuccess:j,onError:P,buttonText:"Sign up with Google",disabled:c,className:"google-button"}),r.jsx("div",{className:"auth-footer",children:r.jsxs("p",{children:["Already have an account?"," ",r.jsx(Re,{to:"/login",children:"Sign in"})]})})]})})};var ng={},dm={exports:{}};(function(t,e){(function(s,n){n(e)})(qC,function(s){var n=function(){return n=Object.assign||function(a){for(var o,l=1,c=arguments.length;l<c;l++)for(var u in o=arguments[l])Object.prototype.hasOwnProperty.call(o,u)&&(a[u]=o[u]);return a},n.apply(this,arguments)},i=function(){function a(o,l,c){var u=this;this.endVal=l,this.options=c,this.version="2.9.0",this.defaults={startVal:0,decimalPlaces:0,duration:2,useEasing:!0,useGrouping:!0,useIndianSeparators:!1,smartEasingThreshold:999,smartEasingAmount:333,separator:",",decimal:".",prefix:"",suffix:"",enableScrollSpy:!1,scrollSpyDelay:200,scrollSpyOnce:!1},this.finalEndVal=null,this.useEasing=!0,this.countDown=!1,this.error="",this.startVal=0,this.paused=!0,this.once=!1,this.count=function(h){u.startTime||(u.startTime=h);var d=h-u.startTime;u.remaining=u.duration-d,u.useEasing?u.countDown?u.frameVal=u.startVal-u.easingFn(d,0,u.startVal-u.endVal,u.duration):u.frameVal=u.easingFn(d,u.startVal,u.endVal-u.startVal,u.duration):u.frameVal=u.startVal+(u.endVal-u.startVal)*(d/u.duration);var f=u.countDown?u.frameVal<u.endVal:u.frameVal>u.endVal;u.frameVal=f?u.endVal:u.frameVal,u.frameVal=Number(u.frameVal.toFixed(u.options.decimalPlaces)),u.printValue(u.frameVal),d<u.duration?u.rAF=requestAnimationFrame(u.count):u.finalEndVal!==null?u.update(u.finalEndVal):u.options.onCompleteCallback&&u.options.onCompleteCallback()},this.formatNumber=function(h){var d,f,y,p,w=h<0?"-":"";d=Math.abs(h).toFixed(u.options.decimalPlaces);var g=(d+="").split(".");if(f=g[0],y=g.length>1?u.options.decimal+g[1]:"",u.options.useGrouping){p="";for(var m=3,x=0,S=0,N=f.length;S<N;++S)u.options.useIndianSeparators&&S===4&&(m=2,x=1),S!==0&&x%m==0&&(p=u.options.separator+p),x++,p=f[N-S-1]+p;f=p}return u.options.numerals&&u.options.numerals.length&&(f=f.replace(/[0-9]/g,function(j){return u.options.numerals[+j]}),y=y.replace(/[0-9]/g,function(j){return u.options.numerals[+j]})),w+u.options.prefix+f+y+u.options.suffix},this.easeOutExpo=function(h,d,f,y){return f*(1-Math.pow(2,-10*h/y))*1024/1023+d},this.options=n(n({},this.defaults),c),this.formattingFn=this.options.formattingFn?this.options.formattingFn:this.formatNumber,this.easingFn=this.options.easingFn?this.options.easingFn:this.easeOutExpo,this.el=typeof o=="string"?document.getElementById(o):o,l=l??this.parse(this.el.innerHTML),this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.endVal=this.validateValue(l),this.options.decimalPlaces=Math.max(this.options.decimalPlaces),this.resetDuration(),this.options.separator=String(this.options.separator),this.useEasing=this.options.useEasing,this.options.separator===""&&(this.options.useGrouping=!1),this.el?this.printValue(this.startVal):this.error="[CountUp] target is null or undefined",typeof window<"u"&&this.options.enableScrollSpy&&(this.error?console.error(this.error,o):(window.onScrollFns=window.onScrollFns||[],window.onScrollFns.push(function(){return u.handleScroll(u)}),window.onscroll=function(){window.onScrollFns.forEach(function(h){return h()})},this.handleScroll(this)))}return a.prototype.handleScroll=function(o){if(o&&window&&!o.once){var l=window.innerHeight+window.scrollY,c=o.el.getBoundingClientRect(),u=c.top+window.pageYOffset,h=c.top+c.height+window.pageYOffset;h<l&&h>window.scrollY&&o.paused?(o.paused=!1,setTimeout(function(){return o.start()},o.options.scrollSpyDelay),o.options.scrollSpyOnce&&(o.once=!0)):(window.scrollY>h||u>l)&&!o.paused&&o.reset()}},a.prototype.determineDirectionAndSmartEasing=function(){var o=this.finalEndVal?this.finalEndVal:this.endVal;this.countDown=this.startVal>o;var l=o-this.startVal;if(Math.abs(l)>this.options.smartEasingThreshold&&this.options.useEasing){this.finalEndVal=o;var c=this.countDown?1:-1;this.endVal=o+c*this.options.smartEasingAmount,this.duration=this.duration/2}else this.endVal=o,this.finalEndVal=null;this.finalEndVal!==null?this.useEasing=!1:this.useEasing=this.options.useEasing},a.prototype.start=function(o){this.error||(this.options.onStartCallback&&this.options.onStartCallback(),o&&(this.options.onCompleteCallback=o),this.duration>0?(this.determineDirectionAndSmartEasing(),this.paused=!1,this.rAF=requestAnimationFrame(this.count)):this.printValue(this.endVal))},a.prototype.pauseResume=function(){this.paused?(this.startTime=null,this.duration=this.remaining,this.startVal=this.frameVal,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count)):cancelAnimationFrame(this.rAF),this.paused=!this.paused},a.prototype.reset=function(){cancelAnimationFrame(this.rAF),this.paused=!0,this.resetDuration(),this.startVal=this.validateValue(this.options.startVal),this.frameVal=this.startVal,this.printValue(this.startVal)},a.prototype.update=function(o){cancelAnimationFrame(this.rAF),this.startTime=null,this.endVal=this.validateValue(o),this.endVal!==this.frameVal&&(this.startVal=this.frameVal,this.finalEndVal==null&&this.resetDuration(),this.finalEndVal=null,this.determineDirectionAndSmartEasing(),this.rAF=requestAnimationFrame(this.count))},a.prototype.printValue=function(o){var l;if(this.el){var c=this.formattingFn(o);!((l=this.options.plugin)===null||l===void 0)&&l.render?this.options.plugin.render(this.el,c):this.el.tagName==="INPUT"?this.el.value=c:this.el.tagName==="text"||this.el.tagName==="tspan"?this.el.textContent=c:this.el.innerHTML=c}},a.prototype.ensureNumber=function(o){return typeof o=="number"&&!isNaN(o)},a.prototype.validateValue=function(o){var l=Number(o);return this.ensureNumber(l)?l:(this.error="[CountUp] invalid start or end value: ".concat(o),null)},a.prototype.resetDuration=function(){this.startTime=null,this.duration=1e3*Number(this.options.duration),this.remaining=this.duration},a.prototype.parse=function(o){var l=function(d){return d.replace(/([.,'  ])/g,"\\$1")},c=l(this.options.separator),u=l(this.options.decimal),h=o.replace(new RegExp(c,"g"),"").replace(new RegExp(u,"g"),".");return parseFloat(h)},a}();s.CountUp=i})})(dm,dm.exports);var tA=dm.exports;Object.defineProperty(ng,"__esModule",{value:!0});var dt=b,sA=tA;function nA(t,e){var s=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(s!=null){var n,i,a,o,l=[],c=!0,u=!1;try{if(a=(s=s.call(t)).next,e!==0)for(;!(c=(n=a.call(s)).done)&&(l.push(n.value),l.length!==e);c=!0);}catch(h){u=!0,i=h}finally{try{if(!c&&s.return!=null&&(o=s.return(),Object(o)!==o))return}finally{if(u)throw i}}return l}}function C0(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),s.push.apply(s,n)}return s}function zc(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?C0(Object(s),!0).forEach(function(n){aA(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):C0(Object(s)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function iA(t,e){if(typeof t!="object"||!t)return t;var s=t[Symbol.toPrimitive];if(s!==void 0){var n=s.call(t,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function rA(t){var e=iA(t,"string");return typeof e=="symbol"?e:String(e)}function aA(t,e,s){return e=rA(e),e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function fm(){return fm=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var n in s)Object.prototype.hasOwnProperty.call(s,n)&&(t[n]=s[n])}return t},fm.apply(this,arguments)}function oA(t,e){if(t==null)return{};var s={},n=Object.keys(t),i,a;for(a=0;a<n.length;a++)i=n[a],!(e.indexOf(i)>=0)&&(s[i]=t[i]);return s}function vj(t,e){if(t==null)return{};var s=oA(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function lA(t,e){return cA(t)||nA(t,e)||uA(t,e)||hA()}function cA(t){if(Array.isArray(t))return t}function uA(t,e){if(t){if(typeof t=="string")return P0(t,e);var s=Object.prototype.toString.call(t).slice(8,-1);if(s==="Object"&&t.constructor&&(s=t.constructor.name),s==="Map"||s==="Set")return Array.from(t);if(s==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(s))return P0(t,e)}}function P0(t,e){(e==null||e>t.length)&&(e=t.length);for(var s=0,n=new Array(e);s<e;s++)n[s]=t[s];return n}function hA(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var dA=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?dt.useLayoutEffect:dt.useEffect;function Ts(t){var e=dt.useRef(t);return dA(function(){e.current=t}),dt.useCallback(function(){for(var s=arguments.length,n=new Array(s),i=0;i<s;i++)n[i]=arguments[i];return e.current.apply(void 0,n)},[])}var fA=function(e,s){var n=s.decimal,i=s.decimals,a=s.duration,o=s.easingFn,l=s.end,c=s.formattingFn,u=s.numerals,h=s.prefix,d=s.separator,f=s.start,y=s.suffix,p=s.useEasing,w=s.useGrouping,g=s.useIndianSeparators,m=s.enableScrollSpy,x=s.scrollSpyDelay,S=s.scrollSpyOnce,N=s.plugin;return new sA.CountUp(e,l,{startVal:f,duration:a,decimal:n,decimalPlaces:i,easingFn:o,formattingFn:c,numerals:u,separator:d,prefix:h,suffix:y,plugin:N,useEasing:p,useIndianSeparators:g,useGrouping:w,enableScrollSpy:m,scrollSpyDelay:x,scrollSpyOnce:S})},mA=["ref","startOnMount","enableReinitialize","delay","onEnd","onStart","onPauseResume","onReset","onUpdate"],pA={decimal:".",separator:",",delay:null,prefix:"",suffix:"",duration:2,start:0,decimals:0,startOnMount:!0,enableReinitialize:!0,useEasing:!0,useGrouping:!0,useIndianSeparators:!1},xj=function(e){var s=Object.fromEntries(Object.entries(e).filter(function(R){var M=lA(R,2),_=M[1];return _!==void 0})),n=dt.useMemo(function(){return zc(zc({},pA),s)},[e]),i=n.ref,a=n.startOnMount,o=n.enableReinitialize,l=n.delay,c=n.onEnd,u=n.onStart,h=n.onPauseResume,d=n.onReset,f=n.onUpdate,y=vj(n,mA),p=dt.useRef(),w=dt.useRef(),g=dt.useRef(!1),m=Ts(function(){return fA(typeof i=="string"?i:i.current,y)}),x=Ts(function(R){var M=p.current;if(M&&!R)return M;var _=m();return p.current=_,_}),S=Ts(function(){var R=function(){return x(!0).start(function(){c==null||c({pauseResume:N,reset:j,start:E,update:P})})};l&&l>0?w.current=setTimeout(R,l*1e3):R(),u==null||u({pauseResume:N,reset:j,update:P})}),N=Ts(function(){x().pauseResume(),h==null||h({reset:j,start:E,update:P})}),j=Ts(function(){x().el&&(w.current&&clearTimeout(w.current),x().reset(),d==null||d({pauseResume:N,start:E,update:P}))}),P=Ts(function(R){x().update(R),f==null||f({pauseResume:N,reset:j,start:E})}),E=Ts(function(){j(),S()}),T=Ts(function(R){a&&(R&&j(),S())});return dt.useEffect(function(){g.current?o&&T(!0):(g.current=!0,T())},[o,g,T,l,e.start,e.suffix,e.prefix,e.duration,e.separator,e.decimals,e.decimal,e.formattingFn]),dt.useEffect(function(){return function(){j()}},[j]),{start:E,pauseResume:N,reset:j,update:P,getCountUp:x}},gA=["className","redraw","containerProps","children","style"],yA=function(e){var s=e.className,n=e.redraw,i=e.containerProps,a=e.children,o=e.style,l=vj(e,gA),c=dt.useRef(null),u=dt.useRef(!1),h=xj(zc(zc({},l),{},{ref:c,startOnMount:typeof a!="function"||e.delay===0,enableReinitialize:!1})),d=h.start,f=h.reset,y=h.update,p=h.pauseResume,w=h.getCountUp,g=Ts(function(){d()}),m=Ts(function(N){e.preserveValue||f(),y(N)}),x=Ts(function(){if(typeof e.children=="function"&&!(c.current instanceof Element)){console.error(`Couldn't find attached element to hook the CountUp instance into! Try to attach "containerRef" from the render prop to a an Element, eg. <span ref={containerRef} />.`);return}w()});dt.useEffect(function(){x()},[x]),dt.useEffect(function(){u.current&&m(e.end)},[e.end,m]);var S=n&&e;return dt.useEffect(function(){n&&u.current&&g()},[g,n,S]),dt.useEffect(function(){!n&&u.current&&g()},[g,n,e.start,e.suffix,e.prefix,e.duration,e.separator,e.decimals,e.decimal,e.className,e.formattingFn]),dt.useEffect(function(){u.current=!0},[]),typeof a=="function"?a({countUpRef:c,start:d,reset:f,update:y,pauseResume:p,getCountUp:w}):dt.createElement("span",fm({className:s,ref:c,style:o},i),typeof e.start<"u"?w().formattingFn(e.start):"")},Vc=ng.default=yA;ng.useCountUp=xj;const Vi=b.memo(({symbol:t,price:e,change:s,changePercent:n,priceChange:i=null,showSymbol:a=!0,showChange:o=!0,size:l="medium",className:c=""})=>{const[u,h]=b.useState(!1),[d,f]=b.useState(null);b.useEffect(()=>{if(i&&i.direction){f(i.direction),h(!0);const j=setTimeout(()=>{h(!1)},2e3);return()=>clearTimeout(j)}},[i]);const y=b.useCallback(j=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2,maximumFractionDigits:2}).format(j),[]),p=b.useCallback(j=>typeof j!="number"||isNaN(j)?"--":`${j>=0?"+":""}${j.toFixed(2)}%`,[]),{trendDirection:w,isPositive:g,formattedPrice:m,formattedChange:x}=b.useMemo(()=>{const j=s>0?"up":s<0?"down":"neutral",P=s>=0,E=typeof e=="number"?y(e):e,T=typeof s=="number"?p(s):s;return{trendDirection:j,isPositive:P,formattedPrice:E,formattedChange:T}},[e,s,y,p]),S={initial:{scale:1},animate:{scale:[1,1.05,1],transition:{duration:.6,ease:"easeInOut"}}},N={initial:{opacity:0},animate:{opacity:[0,.3,0],transition:{duration:1,ease:"easeInOut"}}};return r.jsxs("div",{className:`stock-price ${l} ${c}`,children:[a&&r.jsx("div",{className:"stock-symbol",children:t}),r.jsxs("div",{className:"price-container",children:[r.jsxs(U.div,{className:`price-value ${u?"animating":""}`,variants:S,initial:"initial",animate:u?"animate":"initial",children:[y(e),r.jsx(Xe,{children:u&&r.jsx(U.div,{className:`price-flash ${d}`,variants:N,initial:"initial",animate:"animate",exit:"initial"})})]}),o&&r.jsxs("div",{className:`price-change ${w}`,children:[r.jsxs("div",{className:"change-icon",children:[w==="up"&&r.jsx(Oe,{size:14}),w==="down"&&r.jsx(lt,{size:14}),w==="neutral"&&r.jsx(Ou,{size:14})]}),r.jsxs("div",{className:"change-values",children:[r.jsxs("span",{className:"change-amount",children:[g?"+":"",y(Math.abs(s))]}),r.jsxs("span",{className:"change-percent",children:["(",p(n),")"]})]})]})]}),r.jsx(Xe,{children:u&&r.jsx(U.div,{className:"pulse-indicator",initial:{scale:0,opacity:1},animate:{scale:2,opacity:0},exit:{scale:0,opacity:0},transition:{duration:1}})})]})});Vi.displayName="StockPrice";class vA{constructor(){this.portfolio=new Map,this.tradingHistory=[],this.virtualBalance=1e4,this.listeners=new Set,this.dailyRewards={lastLoginDate:null,lastClaimDate:null,totalRewards:0,loginStreak:0},this.loadPortfolioFromStorage(),this.checkDailyLogin()}loadPortfolioFromStorage(){try{const e=localStorage.getItem("tradebro_portfolio"),s=localStorage.getItem("tradebro_balance"),n=localStorage.getItem("tradebro_history"),i=localStorage.getItem("tradebro_daily_rewards");if(e){const a=JSON.parse(e);this.portfolio=new Map(Object.entries(a))}s?(this.virtualBalance=parseFloat(s),console.log("💰 Loaded balance from localStorage:",this.virtualBalance)):(this.virtualBalance=1e4,console.log("💰 Using default balance for new user:",this.virtualBalance)),n&&(this.tradingHistory=JSON.parse(n)),i&&(this.dailyRewards=JSON.parse(i))}catch(e){console.error("Error loading portfolio from storage:",e),this.virtualBalance=1e4,this.dailyRewards={lastLoginDate:null,lastClaimDate:null,totalRewards:0,loginStreak:0}}}savePortfolioToStorage(){try{const e=Object.fromEntries(this.portfolio);localStorage.setItem("tradebro_portfolio",JSON.stringify(e)),localStorage.setItem("tradebro_balance",this.virtualBalance.toString()),localStorage.setItem("tradebro_history",JSON.stringify(this.tradingHistory)),localStorage.setItem("tradebro_daily_rewards",JSON.stringify(this.dailyRewards))}catch(e){console.error("Error saving portfolio to storage:",e)}}addListener(e){this.listeners.add(e)}removeListener(e){this.listeners.delete(e)}notifyListeners(){this.listeners.forEach(e=>{try{e(this.getPortfolioSummary())}catch(s){console.error("Error in portfolio listener:",s)}})}hasHoldings(e){const s=this.portfolio.get(e);return s&&s.quantity>0}getPosition(e){return this.portfolio.get(e)||{symbol:e,quantity:0,avgPrice:0,totalInvested:0,currentValue:0,pnl:0,pnlPercentage:0,lastUpdated:new Date}}calculateTradeMetrics(e,s,n,i){const a=this.getPosition(e),o=s*n,l=this.calculateBrokerage(o),c=this.calculateTaxes(o,i),u=o+l+c;let h={...a};if(i==="BUY"){const d=a.quantity+s,f=a.totalInvested+u;h={...a,quantity:d,avgPrice:f/d,totalInvested:f,lastUpdated:new Date}}else if(i==="SELL"){if(a.quantity<s)throw new Error(`Insufficient holdings. You have ${a.quantity} shares, trying to sell ${s}`);const d=a.quantity-s,f=o-l-c,y=s/a.quantity*a.totalInvested,p=f-y;h={...a,quantity:d,totalInvested:d>0?a.totalInvested-y:0,avgPrice:d>0?a.avgPrice:0,lastUpdated:new Date,realizedPnL:(a.realizedPnL||0)+p}}return{newPosition:h,tradeValue:o,brokerage:l,taxes:c,totalCost:i==="BUY"?u:o-l-c,realizedPnL:i==="SELL"?o-l-c-s/a.quantity*a.totalInvested:0}}calculateBrokerage(e){return Math.min(e*.001,20)}calculateTaxes(e,s){const n=s==="SELL"?e*25e-5:0,i=e*345e-7,a=(this.calculateBrokerage(e)+i)*.18,o=e*1e-6,l=s==="BUY"?e*3e-5:0;return n+i+a+o+l}async executeTrade(e,s,n,i,a="MARKET"){try{if(!e||!s||!n||!i)throw new Error("Missing required trade parameters");if(s<=0||n<=0)throw new Error("Quantity and price must be positive");const o=this.calculateTradeMetrics(e,s,n,i);if(i==="BUY"&&this.virtualBalance<o.totalCost)throw new Error(`Insufficient balance. Required: ₹${o.totalCost.toFixed(2)}, Available: ₹${this.virtualBalance.toFixed(2)}`);this.portfolio.set(e,o.newPosition),i==="BUY"?this.virtualBalance-=o.totalCost:this.virtualBalance+=o.totalCost;const l={id:Date.now().toString(),symbol:e,quantity:s,price:n,action:i,orderType:a,tradeValue:o.tradeValue,brokerage:o.brokerage,taxes:o.taxes,totalCost:o.totalCost,realizedPnL:o.realizedPnL,timestamp:new Date,status:"EXECUTED"};return this.tradingHistory.unshift(l),this.tradingHistory.length>1e3&&(this.tradingHistory=this.tradingHistory.slice(0,1e3)),this.savePortfolioToStorage(),this.notifyListeners(),console.log(`✅ Trade executed: ${i} ${s} ${e} @ ₹${n}`),{success:!0,trade:l,newPosition:o.newPosition,newBalance:this.virtualBalance,message:`Successfully ${i.toLowerCase()}ed ${s} shares of ${e}`}}catch(o){return console.error("❌ Trade execution failed:",o),{success:!1,error:o.message}}}async buyStock(e,s,n,i="market"){return this.executeTrade(e,s,n,"BUY",i)}async sellStock(e,s,n,i="market"){return this.executeTrade(e,s,n,"SELL",i)}async getPortfolio(){return{success:!0,data:this.getPortfolioSummary()}}async getHoldings(){return{success:!0,data:this.getPortfolioSummary().positions}}async getVirtualMoneyAccount(){return{success:!0,data:{balance:this.virtualBalance,totalInvested:this.getPortfolioSummary().totalInvested,totalReturns:this.getPortfolioSummary().totalPnL}}}getPortfolioSummary(){const e=Array.from(this.portfolio.values()).filter(c=>c.quantity>0);let s=0,n=0,i=0,a=0;e.forEach(c=>{s+=c.totalInvested,n+=c.currentValue||c.totalInvested,i+=(c.currentValue||c.totalInvested)-c.totalInvested,a+=c.realizedPnL||0});const o=s>0?i/s*100:0,l={totalValue:this.virtualBalance+n,availableCash:this.virtualBalance,totalInvested:s,totalCurrentValue:n,totalPnL:i,totalPnLPercentage:o,totalRealizedPnL:a,positions:e,totalPositions:e.length,lastUpdated:new Date};return console.log("📊 Trading service getPortfolioSummary returning:",{availableCash:l.availableCash,totalValue:l.totalValue,virtualBalance:this.virtualBalance}),l}getTradingHistory(e=100){return this.tradingHistory.slice(0,e)}checkDailyLogin(){try{const e=new Date().toDateString(),s=this.dailyRewards.lastLoginDate;if(this.dailyRewards.lastClaimDate===e)return{awarded:!1,alreadyClaimed:!0,streak:this.dailyRewards.loginStreak,totalRewards:this.dailyRewards.totalRewards,message:"You've already claimed your daily reward today! Come back tomorrow."};if(s!==e){const a=this.virtualBalance;this.virtualBalance+=100;const o=new Date;o.setDate(o.getDate()-1);const l=s===o.toDateString();return this.dailyRewards={lastLoginDate:e,lastClaimDate:e,totalRewards:this.dailyRewards.totalRewards+100,loginStreak:l?this.dailyRewards.loginStreak+1:1},this.tradingHistory.unshift({id:`daily_${Date.now()}`,type:"BONUS",symbol:"DAILY_REWARD",quantity:1,price:100,total:100,timestamp:new Date,description:`Daily login bonus - Day ${this.dailyRewards.loginStreak}`,balanceBefore:a,balanceAfter:this.virtualBalance}),this.savePortfolioToStorage(),this.notifyListeners(),console.log(`🎉 Daily login bonus: ₹100 | Streak: ${this.dailyRewards.loginStreak} days | New Balance: ₹${this.virtualBalance}`),{awarded:!0,amount:100,streak:this.dailyRewards.loginStreak,totalRewards:this.dailyRewards.totalRewards,newBalance:this.virtualBalance,oldBalance:a}}return{awarded:!1,alreadyClaimed:!1,streak:this.dailyRewards.loginStreak,totalRewards:this.dailyRewards.totalRewards}}catch(e){return console.error("Error checking daily login:",e),{awarded:!1,error:e.message}}}getDailyRewardsInfo(){const e=new Date().toDateString(),s=this.dailyRewards.lastClaimDate,n=s!==e;return{...this.dailyRewards,nextRewardAvailable:n,canClaimToday:n,alreadyClaimedToday:s===e,timeUntilNextReward:this.getTimeUntilNextReward()}}getTimeUntilNextReward(){const e=this.dailyRewards.lastClaimDate;if(!e)return null;const s=new Date(e),n=new Date(s);n.setDate(n.getDate()+1),n.setHours(0,0,0,0);const i=new Date,a=n.getTime()-i.getTime();if(a<=0)return null;const o=Math.floor(a/(1e3*60*60)),l=Math.floor(a%(1e3*60*60)/(1e3*60));return{hours:o,minutes:l,totalMinutes:Math.floor(a/(1e3*60)),nextRewardTime:n.toISOString()}}async claimDailyReward(){try{const e=new Date().toDateString();if(this.dailyRewards.lastClaimDate===e)return{success:!1,alreadyClaimed:!0,message:"You've already claimed your daily reward today!",timeUntilNext:this.getTimeUntilNextReward()};const n=100,i=this.virtualBalance;this.virtualBalance+=n;const a=new Date;a.setDate(a.getDate()-1);const l=this.dailyRewards.lastLoginDate===a.toDateString();return this.dailyRewards={lastLoginDate:e,lastClaimDate:e,totalRewards:this.dailyRewards.totalRewards+n,loginStreak:l?this.dailyRewards.loginStreak+1:1},this.tradingHistory.unshift({id:`daily_${Date.now()}`,type:"BONUS",symbol:"DAILY_REWARD",quantity:1,price:n,total:n,timestamp:new Date,description:`Daily login bonus - Day ${this.dailyRewards.loginStreak}`,balanceBefore:i,balanceAfter:this.virtualBalance}),this.savePortfolioToStorage(),await this.syncPortfolioData(),setTimeout(()=>{this.notifyListeners(),window.dispatchEvent(new CustomEvent("balanceUpdated",{detail:{newBalance:this.virtualBalance,change:n,type:"DAILY_REWARD"}}))},100),{success:!0,awarded:!0,amount:n,streak:this.dailyRewards.loginStreak,totalRewards:this.dailyRewards.totalRewards,newBalance:this.virtualBalance,oldBalance:i}}catch(e){return console.error("Error claiming daily reward:",e),{success:!1,error:e.message}}}forceDailyReward(){this.dailyRewards.lastLoginDate=null,this.dailyRewards.lastClaimDate=null,this.savePortfolioToStorage();const e=this.checkDailyLogin();return setTimeout(()=>{this.notifyListeners()},100),e}async syncPortfolioData(){try{return this.savePortfolioToStorage(),await this.syncWithServer(),this.notifyListeners(),console.log("🔄 Portfolio data synchronized across all components and server"),{success:!0,summary:this.getPortfolioSummary(),rewards:this.getDailyRewardsInfo()}}catch(e){return console.error("Error syncing portfolio data:",e),{success:!1,error:e.message}}}async syncWithServer(){try{const e=localStorage.getItem("token");if(!e)return;(await fetch("http://localhost:5001/api/virtual-money/sync-balance",{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({balance:this.virtualBalance,totalRewards:this.dailyRewards.totalRewards,loginStreak:this.dailyRewards.loginStreak,lastClaimDate:this.dailyRewards.lastClaimDate})})).ok&&console.log("✅ Successfully synced balance with server")}catch(e){console.warn("⚠️ Failed to sync with server:",e.message)}}clearAllData(){this.portfolio.clear(),this.tradingHistory=[],this.virtualBalance=1e4,this.dailyRewards={lastLoginDate:null,lastClaimDate:null,totalRewards:0,loginStreak:0},localStorage.removeItem("tradebro_portfolio"),localStorage.removeItem("tradebro_balance"),localStorage.removeItem("tradebro_history"),localStorage.removeItem("tradebro_daily_rewards"),this.notifyListeners()}}const Ee=new vA,wj=b.createContext(),hs=()=>{const t=b.useContext(wj);if(!t)throw new Error("usePortfolio must be used within a PortfolioProvider");return t},Sj=({children:t,user:e})=>{const[s,n]=b.useState({totalValue:1e4,availableCash:1e4,totalInvested:0,totalGainLoss:0,totalGainLossPercentage:0,holdings:[],transactions:[],watchlist:[]}),[i,a]=b.useState(!1);b.useEffect(()=>{const g=N=>{console.log("🔄 Portfolio context updating from trading engine:",{availableCash:N.availableCash,totalValue:N.totalValue}),n(j=>{const P={...j,totalValue:N.totalValue,availableCash:N.availableCash,totalInvested:N.totalInvested,totalGainLoss:N.totalPnL,totalGainLossPercentage:N.totalPnLPercentage,holdings:N.positions.map(E=>({symbol:E.symbol,quantity:E.quantity,avgPrice:E.avgPrice,currentPrice:E.currentValue/E.quantity||E.avgPrice,totalValue:E.currentValue||E.totalInvested,gainLoss:(E.currentValue||E.totalInvested)-E.totalInvested,gainLossPercentage:E.totalInvested>0?((E.currentValue||E.totalInvested)-E.totalInvested)/E.totalInvested*100:0}))};return console.log("📊 Setting new portfolio data:",{oldAvailableCash:j.availableCash,newAvailableCash:P.availableCash,oldTotalValue:j.totalValue,newTotalValue:P.totalValue}),P})};Ee.addListener(g);const m=Ee.getPortfolioSummary();console.log("📊 Initial portfolio load:",{availableCash:m.availableCash,totalValue:m.totalValue}),g(m);const x=setTimeout(()=>{console.log("🔄 Forcing portfolio refresh after delay...");const N=Ee.getPortfolioSummary();console.log("📊 Latest summary after delay:",{availableCash:N.availableCash,totalValue:N.totalValue}),g(N)},2e3),S=N=>{console.log("🔄 Balance update received in PortfolioContext:",N.detail);const j=Ee.getPortfolioSummary();g(j)};return window.addEventListener("balanceUpdated",S),()=>{Ee.removeListener(g),window.removeEventListener("balanceUpdated",S),clearTimeout(x)}},[]),b.useEffect(()=>{const g=localStorage.getItem("token"),m=(e==null?void 0:e.id)||(e==null?void 0:e._id);if(e&&m&&g){const x=setTimeout(()=>{o()},100);return()=>clearTimeout(x)}else n({totalValue:1e4,availableCash:1e4,totalInvested:0,totalGainLoss:0,totalGainLossPercentage:0,holdings:[],transactions:[],watchlist:[]})},[e]);const o=async()=>{a(!0);try{const g=localStorage.getItem("token"),m=(e==null?void 0:e.id)||(e==null?void 0:e._id);if(!m||!g){console.warn("Missing user ID or token for portfolio initialization"),a(!1);return}const x=await fetch(`http://localhost:5001/api/portfolio/${m}`,{headers:{Authorization:`Bearer ${g}`,"Content-Type":"application/json"}});if(x.ok){const S=await x.json();n(S.data||S)}else if(x.status===401){console.warn("Authentication failed for portfolio access");return}else x.status===404?await l():console.warn("Portfolio fetch failed with status:",x.status)}catch(g){console.error("Error initializing portfolio:",g),n({totalValue:1e4,availableCash:1e4,totalInvested:0,totalGainLoss:0,totalGainLossPercentage:0,holdings:[],transactions:[],watchlist:[]})}finally{a(!1)}},l=async()=>{try{const g=localStorage.getItem("token"),m=await fetch("http://localhost:5001/api/portfolio/create",{method:"POST",headers:{Authorization:`Bearer ${g}`,"Content-Type":"application/json"},body:JSON.stringify({userId:(e==null?void 0:e.id)||(e==null?void 0:e._id),initialCash:1e4})});if(m.ok){const x=await m.json();n(x.data||x)}else if(m.status===401){console.warn("Authentication failed for portfolio creation");return}else console.warn("Portfolio creation failed with status:",m.status)}catch(g){console.error("Error creating default portfolio:",g)}},c=b.useCallback(async(g,m,x,S=null)=>{try{a(!0);const N=await Ee.buyStock(g,m,x);if(!N.success)throw new Error(N.error);try{await d(g),console.log(`✅ Removed ${g} from watchlist after purchase`)}catch(j){console.warn("⚠️ Could not remove from watchlist:",j.message)}return console.log("✅ Buy order executed successfully:",N),N}catch(N){throw console.error("❌ Error buying stock:",N),N}finally{a(!1)}},[s.holdings]),u=b.useCallback(async(g,m,x,S=null)=>{try{a(!0);const N=s.holdings.find(E=>E.symbol===g),j=N&&N.quantity<=m,P=await Ee.sellStock(g,m,x);if(!P.success)throw new Error(P.error);if(j)try{const E=S||{symbol:g,name:(N==null?void 0:N.name)||g,price:x,sector:(N==null?void 0:N.sector)||"Unknown"};await h(g,E),console.log(`✅ Added ${g} back to watchlist after complete sale`)}catch(E){console.warn("⚠️ Could not add to watchlist:",E.message)}return console.log("✅ Sell order executed successfully:",P),P}catch(N){throw console.error("❌ Error selling stock:",N),N}finally{a(!1)}},[s.holdings]),h=async(g,m=null)=>{try{const x=localStorage.getItem("token"),S={userId:(e==null?void 0:e.id)||(e==null?void 0:e._id),symbol:g};m&&(m.name&&(S.name=m.name),m.sector&&(S.sector=m.sector),m.price&&(S.currentPrice=m.price));const N=await fetch("http://localhost:5001/api/portfolio/watchlist/add",{method:"POST",headers:{Authorization:`Bearer ${x}`,"Content-Type":"application/json"},body:JSON.stringify(S)});if(N.ok){const j=await N.json();return n(P=>({...P,watchlist:j})),j}else if((await fetch("http://localhost:5001/api/watchlist/add",{method:"POST",headers:{Authorization:`Bearer ${x}`,"Content-Type":"application/json"},body:JSON.stringify({symbol:g,name:(m==null?void 0:m.name)||"",notes:"Added after selling position"})})).ok)return console.log(`✅ Added ${g} to watchlist via fallback API`),!0}catch(x){throw console.error("Error adding to watchlist:",x),x}},d=async g=>{try{const m=localStorage.getItem("token"),x=await fetch("http://localhost:5001/api/portfolio/watchlist/remove",{method:"DELETE",headers:{Authorization:`Bearer ${m}`,"Content-Type":"application/json"},body:JSON.stringify({userId:(e==null?void 0:e.id)||(e==null?void 0:e._id),symbol:g})});if(x.ok){const S=await x.json();return n(N=>({...N,watchlist:S})),S}else return(await fetch(`http://localhost:5001/api/watchlist/remove/${g}`,{method:"DELETE",headers:{Authorization:`Bearer ${m}`,"Content-Type":"application/json"}})).ok?(console.log(`✅ Removed ${g} from watchlist via fallback API`),!0):(console.log(`ℹ️ ${g} was not in watchlist`),!0)}catch(m){return console.warn("Could not remove from watchlist (may not exist):",m.message),!0}},f=b.useCallback(async()=>{try{const g=localStorage.getItem("token"),m=(e==null?void 0:e.id)||(e==null?void 0:e._id),x=await fetch(`http://localhost:5001/api/portfolio/update-values/${m}`,{method:"POST",headers:{Authorization:`Bearer ${g}`,"Content-Type":"application/json"}});if(x.ok){const S=await x.json();return n(S),S}}catch(g){console.error("Error updating portfolio values:",g)}},[e==null?void 0:e.id]),y=b.useCallback(()=>{const g=Ee.getPortfolioSummary(),m=Ee.getDailyRewardsInfo();n(x=>({...x,totalValue:g.totalValue,availableCash:g.availableCash,totalInvested:g.totalInvested,totalGainLoss:g.totalPnL,totalGainLossPercentage:g.totalPnLPercentage,dailyRewards:m,holdings:g.positions.map(S=>({symbol:S.symbol,quantity:S.quantity,avgPrice:S.avgPrice,currentPrice:S.currentValue/S.quantity||S.avgPrice,totalValue:S.currentValue||S.totalInvested,gainLoss:(S.currentValue||S.totalInvested)-S.totalInvested,gainLossPercentage:S.totalInvested>0?((S.currentValue||S.totalInvested)-S.totalInvested)/S.totalInvested*100:0}))})),console.log("📊 Portfolio refreshed:",{totalValue:g.totalValue,availableCash:g.availableCash,totalRewards:m.totalRewards})},[]),p=b.useCallback(g=>{console.log("🎉 Daily reward received:",g),setTimeout(()=>{y()},100)},[y]),w={portfolioData:s,loading:i,buyStock:c,sellStock:u,addToWatchlist:h,removeFromWatchlist:d,updatePortfolioValues:f,initializePortfolio:o,refreshPortfolio:y,handleDailyReward:p};return r.jsx(wj.Provider,{value:w,children:t})},xA=()=>{const[t,e]=b.useState(!1),[s,n]=b.useState(null),[i,a]=b.useState(null),{refreshPortfolio:o}=hs(),l=b.useRef(!1);b.useEffect(()=>{if(l.current)return;(()=>{const d=Ee.checkDailyLogin(),f=Ee.getDailyRewardsInfo();a(f),d.awarded&&(n(d),e(!0),setTimeout(()=>{Ee.syncPortfolioData(),o()},500)),l.current=!0})()},[]);const c=()=>{e(!1),Ee.syncPortfolioData(),o()},u=h=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(h);return r.jsxs(r.Fragment,{children:[r.jsx(Xe,{children:t&&s&&r.jsx(U.div,{className:"daily-reward-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:c,children:r.jsxs(U.div,{className:"daily-reward-modal",initial:{scale:.8,opacity:0,y:50},animate:{scale:1,opacity:1,y:0},exit:{scale:.8,opacity:0,y:50},onClick:h=>h.stopPropagation(),children:[r.jsx("button",{className:"close-btn",onClick:c,children:r.jsx(Bt,{})}),r.jsxs("div",{className:"reward-content",children:[r.jsx(U.div,{className:"reward-icon",animate:{rotate:[0,-10,10,-10,0],scale:[1,1.1,1]},transition:{duration:.6,repeat:1/0,repeatDelay:2},children:r.jsx(k0,{})}),r.jsx("h2",{children:"Daily Login Bonus!"}),r.jsx("div",{className:"reward-amount",children:u(s.amount)}),r.jsxs("div",{className:"reward-details",children:[r.jsxs("div",{className:"detail-item",children:[r.jsx(rj,{}),r.jsxs("span",{children:["Login Streak: ",s.streak," days"]})]}),r.jsxs("div",{className:"detail-item",children:[r.jsx(Oe,{}),r.jsxs("span",{children:["Total Rewards: ",u(s.totalRewards)]})]})]}),r.jsxs("div",{className:"reward-message",children:[r.jsx("p",{children:"Keep logging in daily to maintain your streak!"}),s.streak>=7&&r.jsxs("div",{className:"streak-bonus",children:[r.jsx(Gr,{}),r.jsx("span",{children:"Amazing! 7+ day streak!"})]})]}),r.jsx("button",{className:"claim-btn",onClick:c,children:"Awesome! 🎉"})]})]})})}),i&&r.jsxs("div",{className:"daily-rewards-widget",children:[r.jsxs("div",{className:"widget-header",children:[r.jsx(k0,{}),r.jsx("span",{children:"Daily Rewards"})]}),r.jsxs("div",{className:"widget-content",children:[r.jsxs("div",{className:"streak-info",children:[r.jsx("span",{className:"streak-number",children:i.loginStreak}),r.jsx("span",{className:"streak-label",children:"Day Streak"})]}),r.jsxs("div",{className:"total-rewards",children:[r.jsx("span",{className:"total-label",children:"Total Earned"}),r.jsx("span",{className:"total-amount",children:u(i.totalRewards)})]}),i.nextRewardAvailable&&r.jsx("div",{className:"next-reward",children:r.jsx("span",{children:"Next reward available tomorrow!"})})]})]})]})};function bj(t,e){return function(){return t.apply(e,arguments)}}const{toString:wA}=Object.prototype,{getPrototypeOf:ig}=Object,{iterator:Du,toStringTag:jj}=Symbol,Fu=(t=>e=>{const s=wA.call(e);return t[s]||(t[s]=s.slice(8,-1).toLowerCase())})(Object.create(null)),Ds=t=>(t=t.toLowerCase(),e=>Fu(e)===t),Bu=t=>e=>typeof e===t,{isArray:ia}=Array,No=Bu("undefined");function SA(t){return t!==null&&!No(t)&&t.constructor!==null&&!No(t.constructor)&&Gt(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Nj=Ds("ArrayBuffer");function bA(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&Nj(t.buffer),e}const jA=Bu("string"),Gt=Bu("function"),kj=Bu("number"),$u=t=>t!==null&&typeof t=="object",NA=t=>t===!0||t===!1,Xl=t=>{if(Fu(t)!=="object")return!1;const e=ig(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(jj in t)&&!(Du in t)},kA=Ds("Date"),CA=Ds("File"),PA=Ds("Blob"),TA=Ds("FileList"),EA=t=>$u(t)&&Gt(t.pipe),LA=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||Gt(t.append)&&((e=Fu(t))==="formdata"||e==="object"&&Gt(t.toString)&&t.toString()==="[object FormData]"))},_A=Ds("URLSearchParams"),[RA,MA,IA,AA]=["ReadableStream","Request","Response","Headers"].map(Ds),OA=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Bo(t,e,{allOwnKeys:s=!1}={}){if(t===null||typeof t>"u")return;let n,i;if(typeof t!="object"&&(t=[t]),ia(t))for(n=0,i=t.length;n<i;n++)e.call(null,t[n],n,t);else{const a=s?Object.getOwnPropertyNames(t):Object.keys(t),o=a.length;let l;for(n=0;n<o;n++)l=a[n],e.call(null,t[l],l,t)}}function Cj(t,e){e=e.toLowerCase();const s=Object.keys(t);let n=s.length,i;for(;n-- >0;)if(i=s[n],e===i.toLowerCase())return i;return null}const Ni=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Pj=t=>!No(t)&&t!==Ni;function mm(){const{caseless:t}=Pj(this)&&this||{},e={},s=(n,i)=>{const a=t&&Cj(e,i)||i;Xl(e[a])&&Xl(n)?e[a]=mm(e[a],n):Xl(n)?e[a]=mm({},n):ia(n)?e[a]=n.slice():e[a]=n};for(let n=0,i=arguments.length;n<i;n++)arguments[n]&&Bo(arguments[n],s);return e}const DA=(t,e,s,{allOwnKeys:n}={})=>(Bo(e,(i,a)=>{s&&Gt(i)?t[a]=bj(i,s):t[a]=i},{allOwnKeys:n}),t),FA=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),BA=(t,e,s,n)=>{t.prototype=Object.create(e.prototype,n),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),s&&Object.assign(t.prototype,s)},$A=(t,e,s,n)=>{let i,a,o;const l={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),a=i.length;a-- >0;)o=i[a],(!n||n(o,t,e))&&!l[o]&&(e[o]=t[o],l[o]=!0);t=s!==!1&&ig(t)}while(t&&(!s||s(t,e))&&t!==Object.prototype);return e},zA=(t,e,s)=>{t=String(t),(s===void 0||s>t.length)&&(s=t.length),s-=e.length;const n=t.indexOf(e,s);return n!==-1&&n===s},VA=t=>{if(!t)return null;if(ia(t))return t;let e=t.length;if(!kj(e))return null;const s=new Array(e);for(;e-- >0;)s[e]=t[e];return s},UA=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&ig(Uint8Array)),WA=(t,e)=>{const n=(t&&t[Du]).call(t);let i;for(;(i=n.next())&&!i.done;){const a=i.value;e.call(t,a[0],a[1])}},HA=(t,e)=>{let s;const n=[];for(;(s=t.exec(e))!==null;)n.push(s);return n},YA=Ds("HTMLFormElement"),qA=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(s,n,i){return n.toUpperCase()+i}),T0=(({hasOwnProperty:t})=>(e,s)=>t.call(e,s))(Object.prototype),GA=Ds("RegExp"),Tj=(t,e)=>{const s=Object.getOwnPropertyDescriptors(t),n={};Bo(s,(i,a)=>{let o;(o=e(i,a,t))!==!1&&(n[a]=o||i)}),Object.defineProperties(t,n)},QA=t=>{Tj(t,(e,s)=>{if(Gt(t)&&["arguments","caller","callee"].indexOf(s)!==-1)return!1;const n=t[s];if(Gt(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+s+"'")})}})},KA=(t,e)=>{const s={},n=i=>{i.forEach(a=>{s[a]=!0})};return ia(t)?n(t):n(String(t).split(e)),s},XA=()=>{},JA=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function ZA(t){return!!(t&&Gt(t.append)&&t[jj]==="FormData"&&t[Du])}const eO=t=>{const e=new Array(10),s=(n,i)=>{if($u(n)){if(e.indexOf(n)>=0)return;if(!("toJSON"in n)){e[i]=n;const a=ia(n)?[]:{};return Bo(n,(o,l)=>{const c=s(o,i+1);!No(c)&&(a[l]=c)}),e[i]=void 0,a}}return n};return s(t,0)},tO=Ds("AsyncFunction"),sO=t=>t&&($u(t)||Gt(t))&&Gt(t.then)&&Gt(t.catch),Ej=((t,e)=>t?setImmediate:e?((s,n)=>(Ni.addEventListener("message",({source:i,data:a})=>{i===Ni&&a===s&&n.length&&n.shift()()},!1),i=>{n.push(i),Ni.postMessage(s,"*")}))(`axios@${Math.random()}`,[]):s=>setTimeout(s))(typeof setImmediate=="function",Gt(Ni.postMessage)),nO=typeof queueMicrotask<"u"?queueMicrotask.bind(Ni):typeof process<"u"&&process.nextTick||Ej,iO=t=>t!=null&&Gt(t[Du]),z={isArray:ia,isArrayBuffer:Nj,isBuffer:SA,isFormData:LA,isArrayBufferView:bA,isString:jA,isNumber:kj,isBoolean:NA,isObject:$u,isPlainObject:Xl,isReadableStream:RA,isRequest:MA,isResponse:IA,isHeaders:AA,isUndefined:No,isDate:kA,isFile:CA,isBlob:PA,isRegExp:GA,isFunction:Gt,isStream:EA,isURLSearchParams:_A,isTypedArray:UA,isFileList:TA,forEach:Bo,merge:mm,extend:DA,trim:OA,stripBOM:FA,inherits:BA,toFlatObject:$A,kindOf:Fu,kindOfTest:Ds,endsWith:zA,toArray:VA,forEachEntry:WA,matchAll:HA,isHTMLForm:YA,hasOwnProperty:T0,hasOwnProp:T0,reduceDescriptors:Tj,freezeMethods:QA,toObjectSet:KA,toCamelCase:qA,noop:XA,toFiniteNumber:JA,findKey:Cj,global:Ni,isContextDefined:Pj,isSpecCompliantForm:ZA,toJSONObject:eO,isAsyncFn:tO,isThenable:sO,setImmediate:Ej,asap:nO,isIterable:iO};function pe(t,e,s,n,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),s&&(this.config=s),n&&(this.request=n),i&&(this.response=i,this.status=i.status?i.status:null)}z.inherits(pe,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:z.toJSONObject(this.config),code:this.code,status:this.status}}});const Lj=pe.prototype,_j={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{_j[t]={value:t}});Object.defineProperties(pe,_j);Object.defineProperty(Lj,"isAxiosError",{value:!0});pe.from=(t,e,s,n,i,a)=>{const o=Object.create(Lj);return z.toFlatObject(t,o,function(c){return c!==Error.prototype},l=>l!=="isAxiosError"),pe.call(o,t.message,e,s,n,i),o.cause=t,o.name=t.name,a&&Object.assign(o,a),o};const rO=null;function pm(t){return z.isPlainObject(t)||z.isArray(t)}function Rj(t){return z.endsWith(t,"[]")?t.slice(0,-2):t}function E0(t,e,s){return t?t.concat(e).map(function(i,a){return i=Rj(i),!s&&a?"["+i+"]":i}).join(s?".":""):e}function aO(t){return z.isArray(t)&&!t.some(pm)}const oO=z.toFlatObject(z,{},null,function(e){return/^is[A-Z]/.test(e)});function zu(t,e,s){if(!z.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,s=z.toFlatObject(s,{metaTokens:!0,dots:!1,indexes:!1},!1,function(w,g){return!z.isUndefined(g[w])});const n=s.metaTokens,i=s.visitor||h,a=s.dots,o=s.indexes,c=(s.Blob||typeof Blob<"u"&&Blob)&&z.isSpecCompliantForm(e);if(!z.isFunction(i))throw new TypeError("visitor must be a function");function u(p){if(p===null)return"";if(z.isDate(p))return p.toISOString();if(z.isBoolean(p))return p.toString();if(!c&&z.isBlob(p))throw new pe("Blob is not supported. Use a Buffer instead.");return z.isArrayBuffer(p)||z.isTypedArray(p)?c&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function h(p,w,g){let m=p;if(p&&!g&&typeof p=="object"){if(z.endsWith(w,"{}"))w=n?w:w.slice(0,-2),p=JSON.stringify(p);else if(z.isArray(p)&&aO(p)||(z.isFileList(p)||z.endsWith(w,"[]"))&&(m=z.toArray(p)))return w=Rj(w),m.forEach(function(S,N){!(z.isUndefined(S)||S===null)&&e.append(o===!0?E0([w],N,a):o===null?w:w+"[]",u(S))}),!1}return pm(p)?!0:(e.append(E0(g,w,a),u(p)),!1)}const d=[],f=Object.assign(oO,{defaultVisitor:h,convertValue:u,isVisitable:pm});function y(p,w){if(!z.isUndefined(p)){if(d.indexOf(p)!==-1)throw Error("Circular reference detected in "+w.join("."));d.push(p),z.forEach(p,function(m,x){(!(z.isUndefined(m)||m===null)&&i.call(e,m,z.isString(x)?x.trim():x,w,f))===!0&&y(m,w?w.concat(x):[x])}),d.pop()}}if(!z.isObject(t))throw new TypeError("data must be an object");return y(t),e}function L0(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function rg(t,e){this._pairs=[],t&&zu(t,this,e)}const Mj=rg.prototype;Mj.append=function(e,s){this._pairs.push([e,s])};Mj.toString=function(e){const s=e?function(n){return e.call(this,n,L0)}:L0;return this._pairs.map(function(i){return s(i[0])+"="+s(i[1])},"").join("&")};function lO(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function Ij(t,e,s){if(!e)return t;const n=s&&s.encode||lO;z.isFunction(s)&&(s={serialize:s});const i=s&&s.serialize;let a;if(i?a=i(e,s):a=z.isURLSearchParams(e)?e.toString():new rg(e,s).toString(n),a){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+a}return t}class _0{constructor(){this.handlers=[]}use(e,s,n){return this.handlers.push({fulfilled:e,rejected:s,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){z.forEach(this.handlers,function(n){n!==null&&e(n)})}}const Aj={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},cO=typeof URLSearchParams<"u"?URLSearchParams:rg,uO=typeof FormData<"u"?FormData:null,hO=typeof Blob<"u"?Blob:null,dO={isBrowser:!0,classes:{URLSearchParams:cO,FormData:uO,Blob:hO},protocols:["http","https","file","blob","url","data"]},ag=typeof window<"u"&&typeof document<"u",gm=typeof navigator=="object"&&navigator||void 0,fO=ag&&(!gm||["ReactNative","NativeScript","NS"].indexOf(gm.product)<0),mO=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",pO=ag&&window.location.href||"http://localhost",gO=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:ag,hasStandardBrowserEnv:fO,hasStandardBrowserWebWorkerEnv:mO,navigator:gm,origin:pO},Symbol.toStringTag,{value:"Module"})),Pt={...gO,...dO};function yO(t,e){return zu(t,new Pt.classes.URLSearchParams,Object.assign({visitor:function(s,n,i,a){return Pt.isNode&&z.isBuffer(s)?(this.append(n,s.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},e))}function vO(t){return z.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function xO(t){const e={},s=Object.keys(t);let n;const i=s.length;let a;for(n=0;n<i;n++)a=s[n],e[a]=t[a];return e}function Oj(t){function e(s,n,i,a){let o=s[a++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),c=a>=s.length;return o=!o&&z.isArray(i)?i.length:o,c?(z.hasOwnProp(i,o)?i[o]=[i[o],n]:i[o]=n,!l):((!i[o]||!z.isObject(i[o]))&&(i[o]=[]),e(s,n,i[o],a)&&z.isArray(i[o])&&(i[o]=xO(i[o])),!l)}if(z.isFormData(t)&&z.isFunction(t.entries)){const s={};return z.forEachEntry(t,(n,i)=>{e(vO(n),i,s,0)}),s}return null}function wO(t,e,s){if(z.isString(t))try{return(e||JSON.parse)(t),z.trim(t)}catch(n){if(n.name!=="SyntaxError")throw n}return(s||JSON.stringify)(t)}const $o={transitional:Aj,adapter:["xhr","http","fetch"],transformRequest:[function(e,s){const n=s.getContentType()||"",i=n.indexOf("application/json")>-1,a=z.isObject(e);if(a&&z.isHTMLForm(e)&&(e=new FormData(e)),z.isFormData(e))return i?JSON.stringify(Oj(e)):e;if(z.isArrayBuffer(e)||z.isBuffer(e)||z.isStream(e)||z.isFile(e)||z.isBlob(e)||z.isReadableStream(e))return e;if(z.isArrayBufferView(e))return e.buffer;if(z.isURLSearchParams(e))return s.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let l;if(a){if(n.indexOf("application/x-www-form-urlencoded")>-1)return yO(e,this.formSerializer).toString();if((l=z.isFileList(e))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return zu(l?{"files[]":e}:e,c&&new c,this.formSerializer)}}return a||i?(s.setContentType("application/json",!1),wO(e)):e}],transformResponse:[function(e){const s=this.transitional||$o.transitional,n=s&&s.forcedJSONParsing,i=this.responseType==="json";if(z.isResponse(e)||z.isReadableStream(e))return e;if(e&&z.isString(e)&&(n&&!this.responseType||i)){const o=!(s&&s.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(l){if(o)throw l.name==="SyntaxError"?pe.from(l,pe.ERR_BAD_RESPONSE,this,null,this.response):l}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Pt.classes.FormData,Blob:Pt.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};z.forEach(["delete","get","head","post","put","patch"],t=>{$o.headers[t]={}});const SO=z.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),bO=t=>{const e={};let s,n,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),s=o.substring(0,i).trim().toLowerCase(),n=o.substring(i+1).trim(),!(!s||e[s]&&SO[s])&&(s==="set-cookie"?e[s]?e[s].push(n):e[s]=[n]:e[s]=e[s]?e[s]+", "+n:n)}),e},R0=Symbol("internals");function wa(t){return t&&String(t).trim().toLowerCase()}function Jl(t){return t===!1||t==null?t:z.isArray(t)?t.map(Jl):String(t)}function jO(t){const e=Object.create(null),s=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let n;for(;n=s.exec(t);)e[n[1]]=n[2];return e}const NO=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function hd(t,e,s,n,i){if(z.isFunction(n))return n.call(this,e,s);if(i&&(e=s),!!z.isString(e)){if(z.isString(n))return e.indexOf(n)!==-1;if(z.isRegExp(n))return n.test(e)}}function kO(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,s,n)=>s.toUpperCase()+n)}function CO(t,e){const s=z.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(t,n+s,{value:function(i,a,o){return this[n].call(this,e,i,a,o)},configurable:!0})})}let Qt=class{constructor(e){e&&this.set(e)}set(e,s,n){const i=this;function a(l,c,u){const h=wa(c);if(!h)throw new Error("header name must be a non-empty string");const d=z.findKey(i,h);(!d||i[d]===void 0||u===!0||u===void 0&&i[d]!==!1)&&(i[d||c]=Jl(l))}const o=(l,c)=>z.forEach(l,(u,h)=>a(u,h,c));if(z.isPlainObject(e)||e instanceof this.constructor)o(e,s);else if(z.isString(e)&&(e=e.trim())&&!NO(e))o(bO(e),s);else if(z.isObject(e)&&z.isIterable(e)){let l={},c,u;for(const h of e){if(!z.isArray(h))throw TypeError("Object iterator must return a key-value pair");l[u=h[0]]=(c=l[u])?z.isArray(c)?[...c,h[1]]:[c,h[1]]:h[1]}o(l,s)}else e!=null&&a(s,e,n);return this}get(e,s){if(e=wa(e),e){const n=z.findKey(this,e);if(n){const i=this[n];if(!s)return i;if(s===!0)return jO(i);if(z.isFunction(s))return s.call(this,i,n);if(z.isRegExp(s))return s.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,s){if(e=wa(e),e){const n=z.findKey(this,e);return!!(n&&this[n]!==void 0&&(!s||hd(this,this[n],n,s)))}return!1}delete(e,s){const n=this;let i=!1;function a(o){if(o=wa(o),o){const l=z.findKey(n,o);l&&(!s||hd(n,n[l],l,s))&&(delete n[l],i=!0)}}return z.isArray(e)?e.forEach(a):a(e),i}clear(e){const s=Object.keys(this);let n=s.length,i=!1;for(;n--;){const a=s[n];(!e||hd(this,this[a],a,e,!0))&&(delete this[a],i=!0)}return i}normalize(e){const s=this,n={};return z.forEach(this,(i,a)=>{const o=z.findKey(n,a);if(o){s[o]=Jl(i),delete s[a];return}const l=e?kO(a):String(a).trim();l!==a&&delete s[a],s[l]=Jl(i),n[l]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const s=Object.create(null);return z.forEach(this,(n,i)=>{n!=null&&n!==!1&&(s[i]=e&&z.isArray(n)?n.join(", "):n)}),s}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,s])=>e+": "+s).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...s){const n=new this(e);return s.forEach(i=>n.set(i)),n}static accessor(e){const n=(this[R0]=this[R0]={accessors:{}}).accessors,i=this.prototype;function a(o){const l=wa(o);n[l]||(CO(i,o),n[l]=!0)}return z.isArray(e)?e.forEach(a):a(e),this}};Qt.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);z.reduceDescriptors(Qt.prototype,({value:t},e)=>{let s=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(n){this[s]=n}}});z.freezeMethods(Qt);function dd(t,e){const s=this||$o,n=e||s,i=Qt.from(n.headers);let a=n.data;return z.forEach(t,function(l){a=l.call(s,a,i.normalize(),e?e.status:void 0)}),i.normalize(),a}function Dj(t){return!!(t&&t.__CANCEL__)}function ra(t,e,s){pe.call(this,t??"canceled",pe.ERR_CANCELED,e,s),this.name="CanceledError"}z.inherits(ra,pe,{__CANCEL__:!0});function Fj(t,e,s){const n=s.config.validateStatus;!s.status||!n||n(s.status)?t(s):e(new pe("Request failed with status code "+s.status,[pe.ERR_BAD_REQUEST,pe.ERR_BAD_RESPONSE][Math.floor(s.status/100)-4],s.config,s.request,s))}function PO(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function TO(t,e){t=t||10;const s=new Array(t),n=new Array(t);let i=0,a=0,o;return e=e!==void 0?e:1e3,function(c){const u=Date.now(),h=n[a];o||(o=u),s[i]=c,n[i]=u;let d=a,f=0;for(;d!==i;)f+=s[d++],d=d%t;if(i=(i+1)%t,i===a&&(a=(a+1)%t),u-o<e)return;const y=h&&u-h;return y?Math.round(f*1e3/y):void 0}}function EO(t,e){let s=0,n=1e3/e,i,a;const o=(u,h=Date.now())=>{s=h,i=null,a&&(clearTimeout(a),a=null),t.apply(null,u)};return[(...u)=>{const h=Date.now(),d=h-s;d>=n?o(u,h):(i=u,a||(a=setTimeout(()=>{a=null,o(i)},n-d)))},()=>i&&o(i)]}const Uc=(t,e,s=3)=>{let n=0;const i=TO(50,250);return EO(a=>{const o=a.loaded,l=a.lengthComputable?a.total:void 0,c=o-n,u=i(c),h=o<=l;n=o;const d={loaded:o,total:l,progress:l?o/l:void 0,bytes:c,rate:u||void 0,estimated:u&&l&&h?(l-o)/u:void 0,event:a,lengthComputable:l!=null,[e?"download":"upload"]:!0};t(d)},s)},M0=(t,e)=>{const s=t!=null;return[n=>e[0]({lengthComputable:s,total:t,loaded:n}),e[1]]},I0=t=>(...e)=>z.asap(()=>t(...e)),LO=Pt.hasStandardBrowserEnv?((t,e)=>s=>(s=new URL(s,Pt.origin),t.protocol===s.protocol&&t.host===s.host&&(e||t.port===s.port)))(new URL(Pt.origin),Pt.navigator&&/(msie|trident)/i.test(Pt.navigator.userAgent)):()=>!0,_O=Pt.hasStandardBrowserEnv?{write(t,e,s,n,i,a){const o=[t+"="+encodeURIComponent(e)];z.isNumber(s)&&o.push("expires="+new Date(s).toGMTString()),z.isString(n)&&o.push("path="+n),z.isString(i)&&o.push("domain="+i),a===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function RO(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function MO(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function Bj(t,e,s){let n=!RO(e);return t&&(n||s==!1)?MO(t,e):e}const A0=t=>t instanceof Qt?{...t}:t;function Ui(t,e){e=e||{};const s={};function n(u,h,d,f){return z.isPlainObject(u)&&z.isPlainObject(h)?z.merge.call({caseless:f},u,h):z.isPlainObject(h)?z.merge({},h):z.isArray(h)?h.slice():h}function i(u,h,d,f){if(z.isUndefined(h)){if(!z.isUndefined(u))return n(void 0,u,d,f)}else return n(u,h,d,f)}function a(u,h){if(!z.isUndefined(h))return n(void 0,h)}function o(u,h){if(z.isUndefined(h)){if(!z.isUndefined(u))return n(void 0,u)}else return n(void 0,h)}function l(u,h,d){if(d in e)return n(u,h);if(d in t)return n(void 0,u)}const c={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(u,h,d)=>i(A0(u),A0(h),d,!0)};return z.forEach(Object.keys(Object.assign({},t,e)),function(h){const d=c[h]||i,f=d(t[h],e[h],h);z.isUndefined(f)&&d!==l||(s[h]=f)}),s}const $j=t=>{const e=Ui({},t);let{data:s,withXSRFToken:n,xsrfHeaderName:i,xsrfCookieName:a,headers:o,auth:l}=e;e.headers=o=Qt.from(o),e.url=Ij(Bj(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):"")));let c;if(z.isFormData(s)){if(Pt.hasStandardBrowserEnv||Pt.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((c=o.getContentType())!==!1){const[u,...h]=c?c.split(";").map(d=>d.trim()).filter(Boolean):[];o.setContentType([u||"multipart/form-data",...h].join("; "))}}if(Pt.hasStandardBrowserEnv&&(n&&z.isFunction(n)&&(n=n(e)),n||n!==!1&&LO(e.url))){const u=i&&a&&_O.read(a);u&&o.set(i,u)}return e},IO=typeof XMLHttpRequest<"u",AO=IO&&function(t){return new Promise(function(s,n){const i=$j(t);let a=i.data;const o=Qt.from(i.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:u}=i,h,d,f,y,p;function w(){y&&y(),p&&p(),i.cancelToken&&i.cancelToken.unsubscribe(h),i.signal&&i.signal.removeEventListener("abort",h)}let g=new XMLHttpRequest;g.open(i.method.toUpperCase(),i.url,!0),g.timeout=i.timeout;function m(){if(!g)return;const S=Qt.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders()),j={data:!l||l==="text"||l==="json"?g.responseText:g.response,status:g.status,statusText:g.statusText,headers:S,config:t,request:g};Fj(function(E){s(E),w()},function(E){n(E),w()},j),g=null}"onloadend"in g?g.onloadend=m:g.onreadystatechange=function(){!g||g.readyState!==4||g.status===0&&!(g.responseURL&&g.responseURL.indexOf("file:")===0)||setTimeout(m)},g.onabort=function(){g&&(n(new pe("Request aborted",pe.ECONNABORTED,t,g)),g=null)},g.onerror=function(){n(new pe("Network Error",pe.ERR_NETWORK,t,g)),g=null},g.ontimeout=function(){let N=i.timeout?"timeout of "+i.timeout+"ms exceeded":"timeout exceeded";const j=i.transitional||Aj;i.timeoutErrorMessage&&(N=i.timeoutErrorMessage),n(new pe(N,j.clarifyTimeoutError?pe.ETIMEDOUT:pe.ECONNABORTED,t,g)),g=null},a===void 0&&o.setContentType(null),"setRequestHeader"in g&&z.forEach(o.toJSON(),function(N,j){g.setRequestHeader(j,N)}),z.isUndefined(i.withCredentials)||(g.withCredentials=!!i.withCredentials),l&&l!=="json"&&(g.responseType=i.responseType),u&&([f,p]=Uc(u,!0),g.addEventListener("progress",f)),c&&g.upload&&([d,y]=Uc(c),g.upload.addEventListener("progress",d),g.upload.addEventListener("loadend",y)),(i.cancelToken||i.signal)&&(h=S=>{g&&(n(!S||S.type?new ra(null,t,g):S),g.abort(),g=null)},i.cancelToken&&i.cancelToken.subscribe(h),i.signal&&(i.signal.aborted?h():i.signal.addEventListener("abort",h)));const x=PO(i.url);if(x&&Pt.protocols.indexOf(x)===-1){n(new pe("Unsupported protocol "+x+":",pe.ERR_BAD_REQUEST,t));return}g.send(a||null)})},OO=(t,e)=>{const{length:s}=t=t?t.filter(Boolean):[];if(e||s){let n=new AbortController,i;const a=function(u){if(!i){i=!0,l();const h=u instanceof Error?u:this.reason;n.abort(h instanceof pe?h:new ra(h instanceof Error?h.message:h))}};let o=e&&setTimeout(()=>{o=null,a(new pe(`timeout ${e} of ms exceeded`,pe.ETIMEDOUT))},e);const l=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(u=>{u.unsubscribe?u.unsubscribe(a):u.removeEventListener("abort",a)}),t=null)};t.forEach(u=>u.addEventListener("abort",a));const{signal:c}=n;return c.unsubscribe=()=>z.asap(l),c}},DO=function*(t,e){let s=t.byteLength;if(s<e){yield t;return}let n=0,i;for(;n<s;)i=n+e,yield t.slice(n,i),n=i},FO=async function*(t,e){for await(const s of BO(t))yield*DO(s,e)},BO=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:s,value:n}=await e.read();if(s)break;yield n}}finally{await e.cancel()}},O0=(t,e,s,n)=>{const i=FO(t,e);let a=0,o,l=c=>{o||(o=!0,n&&n(c))};return new ReadableStream({async pull(c){try{const{done:u,value:h}=await i.next();if(u){l(),c.close();return}let d=h.byteLength;if(s){let f=a+=d;s(f)}c.enqueue(new Uint8Array(h))}catch(u){throw l(u),u}},cancel(c){return l(c),i.return()}},{highWaterMark:2})},Vu=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",zj=Vu&&typeof ReadableStream=="function",$O=Vu&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),Vj=(t,...e)=>{try{return!!t(...e)}catch{return!1}},zO=zj&&Vj(()=>{let t=!1;const e=new Request(Pt.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),D0=64*1024,ym=zj&&Vj(()=>z.isReadableStream(new Response("").body)),Wc={stream:ym&&(t=>t.body)};Vu&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Wc[e]&&(Wc[e]=z.isFunction(t[e])?s=>s[e]():(s,n)=>{throw new pe(`Response type '${e}' is not supported`,pe.ERR_NOT_SUPPORT,n)})})})(new Response);const VO=async t=>{if(t==null)return 0;if(z.isBlob(t))return t.size;if(z.isSpecCompliantForm(t))return(await new Request(Pt.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(z.isArrayBufferView(t)||z.isArrayBuffer(t))return t.byteLength;if(z.isURLSearchParams(t)&&(t=t+""),z.isString(t))return(await $O(t)).byteLength},UO=async(t,e)=>{const s=z.toFiniteNumber(t.getContentLength());return s??VO(e)},WO=Vu&&(async t=>{let{url:e,method:s,data:n,signal:i,cancelToken:a,timeout:o,onDownloadProgress:l,onUploadProgress:c,responseType:u,headers:h,withCredentials:d="same-origin",fetchOptions:f}=$j(t);u=u?(u+"").toLowerCase():"text";let y=OO([i,a&&a.toAbortSignal()],o),p;const w=y&&y.unsubscribe&&(()=>{y.unsubscribe()});let g;try{if(c&&zO&&s!=="get"&&s!=="head"&&(g=await UO(h,n))!==0){let j=new Request(e,{method:"POST",body:n,duplex:"half"}),P;if(z.isFormData(n)&&(P=j.headers.get("content-type"))&&h.setContentType(P),j.body){const[E,T]=M0(g,Uc(I0(c)));n=O0(j.body,D0,E,T)}}z.isString(d)||(d=d?"include":"omit");const m="credentials"in Request.prototype;p=new Request(e,{...f,signal:y,method:s.toUpperCase(),headers:h.normalize().toJSON(),body:n,duplex:"half",credentials:m?d:void 0});let x=await fetch(p,f);const S=ym&&(u==="stream"||u==="response");if(ym&&(l||S&&w)){const j={};["status","statusText","headers"].forEach(R=>{j[R]=x[R]});const P=z.toFiniteNumber(x.headers.get("content-length")),[E,T]=l&&M0(P,Uc(I0(l),!0))||[];x=new Response(O0(x.body,D0,E,()=>{T&&T(),w&&w()}),j)}u=u||"text";let N=await Wc[z.findKey(Wc,u)||"text"](x,t);return!S&&w&&w(),await new Promise((j,P)=>{Fj(j,P,{data:N,headers:Qt.from(x.headers),status:x.status,statusText:x.statusText,config:t,request:p})})}catch(m){throw w&&w(),m&&m.name==="TypeError"&&/Load failed|fetch/i.test(m.message)?Object.assign(new pe("Network Error",pe.ERR_NETWORK,t,p),{cause:m.cause||m}):pe.from(m,m&&m.code,t,p)}}),vm={http:rO,xhr:AO,fetch:WO};z.forEach(vm,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const F0=t=>`- ${t}`,HO=t=>z.isFunction(t)||t===null||t===!1,Uj={getAdapter:t=>{t=z.isArray(t)?t:[t];const{length:e}=t;let s,n;const i={};for(let a=0;a<e;a++){s=t[a];let o;if(n=s,!HO(s)&&(n=vm[(o=String(s)).toLowerCase()],n===void 0))throw new pe(`Unknown adapter '${o}'`);if(n)break;i[o||"#"+a]=n}if(!n){const a=Object.entries(i).map(([l,c])=>`adapter ${l} `+(c===!1?"is not supported by the environment":"is not available in the build"));let o=e?a.length>1?`since :
`+a.map(F0).join(`
`):" "+F0(a[0]):"as no adapter specified";throw new pe("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return n},adapters:vm};function fd(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new ra(null,t)}function B0(t){return fd(t),t.headers=Qt.from(t.headers),t.data=dd.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Uj.getAdapter(t.adapter||$o.adapter)(t).then(function(n){return fd(t),n.data=dd.call(t,t.transformResponse,n),n.headers=Qt.from(n.headers),n},function(n){return Dj(n)||(fd(t),n&&n.response&&(n.response.data=dd.call(t,t.transformResponse,n.response),n.response.headers=Qt.from(n.response.headers))),Promise.reject(n)})}const Wj="1.10.0",Uu={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{Uu[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}});const $0={};Uu.transitional=function(e,s,n){function i(a,o){return"[Axios v"+Wj+"] Transitional option '"+a+"'"+o+(n?". "+n:"")}return(a,o,l)=>{if(e===!1)throw new pe(i(o," has been removed"+(s?" in "+s:"")),pe.ERR_DEPRECATED);return s&&!$0[o]&&($0[o]=!0,console.warn(i(o," has been deprecated since v"+s+" and will be removed in the near future"))),e?e(a,o,l):!0}};Uu.spelling=function(e){return(s,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};function YO(t,e,s){if(typeof t!="object")throw new pe("options must be an object",pe.ERR_BAD_OPTION_VALUE);const n=Object.keys(t);let i=n.length;for(;i-- >0;){const a=n[i],o=e[a];if(o){const l=t[a],c=l===void 0||o(l,a,t);if(c!==!0)throw new pe("option "+a+" must be "+c,pe.ERR_BAD_OPTION_VALUE);continue}if(s!==!0)throw new pe("Unknown option "+a,pe.ERR_BAD_OPTION)}}const Zl={assertOptions:YO,validators:Uu},Bs=Zl.validators;let Ri=class{constructor(e){this.defaults=e||{},this.interceptors={request:new _0,response:new _0}}async request(e,s){try{return await this._request(e,s)}catch(n){if(n instanceof Error){let i={};Error.captureStackTrace?Error.captureStackTrace(i):i=new Error;const a=i.stack?i.stack.replace(/^.+\n/,""):"";try{n.stack?a&&!String(n.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+a):n.stack=a}catch{}}throw n}}_request(e,s){typeof e=="string"?(s=s||{},s.url=e):s=e||{},s=Ui(this.defaults,s);const{transitional:n,paramsSerializer:i,headers:a}=s;n!==void 0&&Zl.assertOptions(n,{silentJSONParsing:Bs.transitional(Bs.boolean),forcedJSONParsing:Bs.transitional(Bs.boolean),clarifyTimeoutError:Bs.transitional(Bs.boolean)},!1),i!=null&&(z.isFunction(i)?s.paramsSerializer={serialize:i}:Zl.assertOptions(i,{encode:Bs.function,serialize:Bs.function},!0)),s.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?s.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:s.allowAbsoluteUrls=!0),Zl.assertOptions(s,{baseUrl:Bs.spelling("baseURL"),withXsrfToken:Bs.spelling("withXSRFToken")},!0),s.method=(s.method||this.defaults.method||"get").toLowerCase();let o=a&&z.merge(a.common,a[s.method]);a&&z.forEach(["delete","get","head","post","put","patch","common"],p=>{delete a[p]}),s.headers=Qt.concat(o,a);const l=[];let c=!0;this.interceptors.request.forEach(function(w){typeof w.runWhen=="function"&&w.runWhen(s)===!1||(c=c&&w.synchronous,l.unshift(w.fulfilled,w.rejected))});const u=[];this.interceptors.response.forEach(function(w){u.push(w.fulfilled,w.rejected)});let h,d=0,f;if(!c){const p=[B0.bind(this),void 0];for(p.unshift.apply(p,l),p.push.apply(p,u),f=p.length,h=Promise.resolve(s);d<f;)h=h.then(p[d++],p[d++]);return h}f=l.length;let y=s;for(d=0;d<f;){const p=l[d++],w=l[d++];try{y=p(y)}catch(g){w.call(this,g);break}}try{h=B0.call(this,y)}catch(p){return Promise.reject(p)}for(d=0,f=u.length;d<f;)h=h.then(u[d++],u[d++]);return h}getUri(e){e=Ui(this.defaults,e);const s=Bj(e.baseURL,e.url,e.allowAbsoluteUrls);return Ij(s,e.params,e.paramsSerializer)}};z.forEach(["delete","get","head","options"],function(e){Ri.prototype[e]=function(s,n){return this.request(Ui(n||{},{method:e,url:s,data:(n||{}).data}))}});z.forEach(["post","put","patch"],function(e){function s(n){return function(a,o,l){return this.request(Ui(l||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:a,data:o}))}}Ri.prototype[e]=s(),Ri.prototype[e+"Form"]=s(!0)});let qO=class Hj{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let s;this.promise=new Promise(function(a){s=a});const n=this;this.promise.then(i=>{if(!n._listeners)return;let a=n._listeners.length;for(;a-- >0;)n._listeners[a](i);n._listeners=null}),this.promise.then=i=>{let a;const o=new Promise(l=>{n.subscribe(l),a=l}).then(i);return o.cancel=function(){n.unsubscribe(a)},o},e(function(a,o,l){n.reason||(n.reason=new ra(a,o,l),s(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const s=this._listeners.indexOf(e);s!==-1&&this._listeners.splice(s,1)}toAbortSignal(){const e=new AbortController,s=n=>{e.abort(n)};return this.subscribe(s),e.signal.unsubscribe=()=>this.unsubscribe(s),e.signal}static source(){let e;return{token:new Hj(function(i){e=i}),cancel:e}}};function GO(t){return function(s){return t.apply(null,s)}}function QO(t){return z.isObject(t)&&t.isAxiosError===!0}const xm={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(xm).forEach(([t,e])=>{xm[e]=t});function Yj(t){const e=new Ri(t),s=bj(Ri.prototype.request,e);return z.extend(s,Ri.prototype,e,{allOwnKeys:!0}),z.extend(s,e,null,{allOwnKeys:!0}),s.create=function(i){return Yj(Ui(t,i))},s}const ke=Yj($o);ke.Axios=Ri;ke.CanceledError=ra;ke.CancelToken=qO;ke.isCancel=Dj;ke.VERSION=Wj;ke.toFormData=zu;ke.AxiosError=pe;ke.Cancel=ke.CanceledError;ke.all=function(e){return Promise.all(e)};ke.spread=GO;ke.isAxiosError=QO;ke.mergeConfig=Ui;ke.AxiosHeaders=Qt;ke.formToJSON=t=>Oj(z.isHTMLForm(t)?new FormData(t):t);ke.getAdapter=Uj.getAdapter;ke.HttpStatusCode=xm;ke.default=ke;const{Axios:d$,AxiosError:f$,CanceledError:m$,isCancel:p$,CancelToken:g$,VERSION:y$,all:v$,Cancel:x$,isAxiosError:w$,spread:S$,toFormData:b$,AxiosHeaders:j$,HttpStatusCode:N$,formToJSON:k$,getAdapter:C$,mergeConfig:P$}=ke;var qj={exports:{}};/*!
 * Pusher JavaScript Library v8.4.0
 * https://pusher.com/
 *
 * Copyright 2020, Pusher
 * Released under the MIT licence.
 */(function(t,e){(function(n,i){t.exports=i()})(window,function(){return function(s){var n={};function i(a){if(n[a])return n[a].exports;var o=n[a]={i:a,l:!1,exports:{}};return s[a].call(o.exports,o,o.exports,i),o.l=!0,o.exports}return i.m=s,i.c=n,i.d=function(a,o,l){i.o(a,o)||Object.defineProperty(a,o,{enumerable:!0,get:l})},i.r=function(a){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(a,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(a,"__esModule",{value:!0})},i.t=function(a,o){if(o&1&&(a=i(a)),o&8||o&4&&typeof a=="object"&&a&&a.__esModule)return a;var l=Object.create(null);if(i.r(l),Object.defineProperty(l,"default",{enumerable:!0,value:a}),o&2&&typeof a!="string")for(var c in a)i.d(l,c,(function(u){return a[u]}).bind(null,c));return l},i.n=function(a){var o=a&&a.__esModule?function(){return a.default}:function(){return a};return i.d(o,"a",o),o},i.o=function(a,o){return Object.prototype.hasOwnProperty.call(a,o)},i.p="",i(i.s=2)}([function(s,n,i){var a=this&&this.__extends||function(){var w=function(g,m){return w=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(x,S){x.__proto__=S}||function(x,S){for(var N in S)S.hasOwnProperty(N)&&(x[N]=S[N])},w(g,m)};return function(g,m){w(g,m);function x(){this.constructor=g}g.prototype=m===null?Object.create(m):(x.prototype=m.prototype,new x)}}();Object.defineProperty(n,"__esModule",{value:!0});var o=256,l=function(){function w(g){g===void 0&&(g="="),this._paddingCharacter=g}return w.prototype.encodedLength=function(g){return this._paddingCharacter?(g+2)/3*4|0:(g*8+5)/6|0},w.prototype.encode=function(g){for(var m="",x=0;x<g.length-2;x+=3){var S=g[x]<<16|g[x+1]<<8|g[x+2];m+=this._encodeByte(S>>>3*6&63),m+=this._encodeByte(S>>>2*6&63),m+=this._encodeByte(S>>>1*6&63),m+=this._encodeByte(S>>>0*6&63)}var N=g.length-x;if(N>0){var S=g[x]<<16|(N===2?g[x+1]<<8:0);m+=this._encodeByte(S>>>3*6&63),m+=this._encodeByte(S>>>2*6&63),N===2?m+=this._encodeByte(S>>>1*6&63):m+=this._paddingCharacter||"",m+=this._paddingCharacter||""}return m},w.prototype.maxDecodedLength=function(g){return this._paddingCharacter?g/4*3|0:(g*6+7)/8|0},w.prototype.decodedLength=function(g){return this.maxDecodedLength(g.length-this._getPaddingLength(g))},w.prototype.decode=function(g){if(g.length===0)return new Uint8Array(0);for(var m=this._getPaddingLength(g),x=g.length-m,S=new Uint8Array(this.maxDecodedLength(x)),N=0,j=0,P=0,E=0,T=0,R=0,M=0;j<x-4;j+=4)E=this._decodeChar(g.charCodeAt(j+0)),T=this._decodeChar(g.charCodeAt(j+1)),R=this._decodeChar(g.charCodeAt(j+2)),M=this._decodeChar(g.charCodeAt(j+3)),S[N++]=E<<2|T>>>4,S[N++]=T<<4|R>>>2,S[N++]=R<<6|M,P|=E&o,P|=T&o,P|=R&o,P|=M&o;if(j<x-1&&(E=this._decodeChar(g.charCodeAt(j)),T=this._decodeChar(g.charCodeAt(j+1)),S[N++]=E<<2|T>>>4,P|=E&o,P|=T&o),j<x-2&&(R=this._decodeChar(g.charCodeAt(j+2)),S[N++]=T<<4|R>>>2,P|=R&o),j<x-3&&(M=this._decodeChar(g.charCodeAt(j+3)),S[N++]=R<<6|M,P|=M&o),P!==0)throw new Error("Base64Coder: incorrect characters for decoding");return S},w.prototype._encodeByte=function(g){var m=g;return m+=65,m+=25-g>>>8&6,m+=51-g>>>8&-75,m+=61-g>>>8&-15,m+=62-g>>>8&3,String.fromCharCode(m)},w.prototype._decodeChar=function(g){var m=o;return m+=(42-g&g-44)>>>8&-o+g-43+62,m+=(46-g&g-48)>>>8&-o+g-47+63,m+=(47-g&g-58)>>>8&-o+g-48+52,m+=(64-g&g-91)>>>8&-o+g-65+0,m+=(96-g&g-123)>>>8&-o+g-97+26,m},w.prototype._getPaddingLength=function(g){var m=0;if(this._paddingCharacter){for(var x=g.length-1;x>=0&&g[x]===this._paddingCharacter;x--)m++;if(g.length<4||m>2)throw new Error("Base64Coder: incorrect padding")}return m},w}();n.Coder=l;var c=new l;function u(w){return c.encode(w)}n.encode=u;function h(w){return c.decode(w)}n.decode=h;var d=function(w){a(g,w);function g(){return w!==null&&w.apply(this,arguments)||this}return g.prototype._encodeByte=function(m){var x=m;return x+=65,x+=25-m>>>8&6,x+=51-m>>>8&-75,x+=61-m>>>8&-13,x+=62-m>>>8&49,String.fromCharCode(x)},g.prototype._decodeChar=function(m){var x=o;return x+=(44-m&m-46)>>>8&-o+m-45+62,x+=(94-m&m-96)>>>8&-o+m-95+63,x+=(47-m&m-58)>>>8&-o+m-48+52,x+=(64-m&m-91)>>>8&-o+m-65+0,x+=(96-m&m-123)>>>8&-o+m-97+26,x},g}(l);n.URLSafeCoder=d;var f=new d;function y(w){return f.encode(w)}n.encodeURLSafe=y;function p(w){return f.decode(w)}n.decodeURLSafe=p,n.encodedLength=function(w){return c.encodedLength(w)},n.maxDecodedLength=function(w){return c.maxDecodedLength(w)},n.decodedLength=function(w){return c.decodedLength(w)}},function(s,n,i){Object.defineProperty(n,"__esModule",{value:!0});var a="utf8: invalid string",o="utf8: invalid source encoding";function l(h){for(var d=new Uint8Array(c(h)),f=0,y=0;y<h.length;y++){var p=h.charCodeAt(y);p<128?d[f++]=p:p<2048?(d[f++]=192|p>>6,d[f++]=128|p&63):p<55296?(d[f++]=224|p>>12,d[f++]=128|p>>6&63,d[f++]=128|p&63):(y++,p=(p&1023)<<10,p|=h.charCodeAt(y)&1023,p+=65536,d[f++]=240|p>>18,d[f++]=128|p>>12&63,d[f++]=128|p>>6&63,d[f++]=128|p&63)}return d}n.encode=l;function c(h){for(var d=0,f=0;f<h.length;f++){var y=h.charCodeAt(f);if(y<128)d+=1;else if(y<2048)d+=2;else if(y<55296)d+=3;else if(y<=57343){if(f>=h.length-1)throw new Error(a);f++,d+=4}else throw new Error(a)}return d}n.encodedLength=c;function u(h){for(var d=[],f=0;f<h.length;f++){var y=h[f];if(y&128){var p=void 0;if(y<224){if(f>=h.length)throw new Error(o);var w=h[++f];if((w&192)!==128)throw new Error(o);y=(y&31)<<6|w&63,p=128}else if(y<240){if(f>=h.length-1)throw new Error(o);var w=h[++f],g=h[++f];if((w&192)!==128||(g&192)!==128)throw new Error(o);y=(y&15)<<12|(w&63)<<6|g&63,p=2048}else if(y<248){if(f>=h.length-2)throw new Error(o);var w=h[++f],g=h[++f],m=h[++f];if((w&192)!==128||(g&192)!==128||(m&192)!==128)throw new Error(o);y=(y&15)<<18|(w&63)<<12|(g&63)<<6|m&63,p=65536}else throw new Error(o);if(y<p||y>=55296&&y<=57343)throw new Error(o);if(y>=65536){if(y>1114111)throw new Error(o);y-=65536,d.push(String.fromCharCode(55296|y>>10)),y=56320|y&1023}}d.push(String.fromCharCode(y))}return d.join("")}n.decode=u},function(s,n,i){s.exports=i(3).default},function(s,n,i){i.r(n);class a{constructor(v,k){this.lastId=0,this.prefix=v,this.name=k}create(v){this.lastId++;var k=this.lastId,L=this.prefix+k,I=this.name+"["+k+"]",G=!1,te=function(){G||(v.apply(null,arguments),G=!0)};return this[k]=te,{number:k,id:L,name:I,callback:te}}remove(v){delete this[v.number]}}var o=new a("_pusher_script_","Pusher.ScriptReceivers"),l={VERSION:"8.4.0",PROTOCOL:7,wsPort:80,wssPort:443,wsPath:"",httpHost:"sockjs.pusher.com",httpPort:80,httpsPort:443,httpPath:"/pusher",stats_host:"stats.pusher.com",authEndpoint:"/pusher/auth",authTransport:"ajax",activityTimeout:12e4,pongTimeout:3e4,unavailableTimeout:1e4,userAuthentication:{endpoint:"/pusher/user-auth",transport:"ajax"},channelAuthorization:{endpoint:"/pusher/auth",transport:"ajax"},cdn_http:"http://js.pusher.com",cdn_https:"https://js.pusher.com",dependency_suffix:""},c=l;class u{constructor(v){this.options=v,this.receivers=v.receivers||o,this.loading={}}load(v,k,L){var I=this;if(I.loading[v]&&I.loading[v].length>0)I.loading[v].push(L);else{I.loading[v]=[L];var G=me.createScriptRequest(I.getPath(v,k)),te=I.receivers.create(function(oe){if(I.receivers.remove(te),I.loading[v]){var fe=I.loading[v];delete I.loading[v];for(var Ne=function(it){it||G.cleanup()},Te=0;Te<fe.length;Te++)fe[Te](oe,Ne)}});G.send(te)}}getRoot(v){var k,L=me.getDocument().location.protocol;return v&&v.useTLS||L==="https:"?k=this.options.cdn_https:k=this.options.cdn_http,k.replace(/\/*$/,"")+"/"+this.options.version}getPath(v,k){return this.getRoot(k)+"/"+v+this.options.suffix+".js"}}var h=new a("_pusher_dependencies","Pusher.DependenciesReceivers"),d=new u({cdn_http:c.cdn_http,cdn_https:c.cdn_https,version:c.VERSION,suffix:c.dependency_suffix,receivers:h});const f={baseUrl:"https://pusher.com",urls:{authenticationEndpoint:{path:"/docs/channels/server_api/authenticating_users"},authorizationEndpoint:{path:"/docs/channels/server_api/authorizing-users/"},javascriptQuickStart:{path:"/docs/javascript_quick_start"},triggeringClientEvents:{path:"/docs/client_api_guide/client_events#trigger-events"},encryptedChannelSupport:{fullUrl:"https://github.com/pusher/pusher-js/tree/cc491015371a4bde5743d1c87a0fbac0feb53195#encrypted-channel-support"}}};var p={buildLogSuffix:function(C){const v="See:",k=f.urls[C];if(!k)return"";let L;return k.fullUrl?L=k.fullUrl:k.path&&(L=f.baseUrl+k.path),L?`${v} ${L}`:""}},w;(function(C){C.UserAuthentication="user-authentication",C.ChannelAuthorization="channel-authorization"})(w||(w={}));class g extends Error{constructor(v){super(v),Object.setPrototypeOf(this,new.target.prototype)}}class m extends Error{constructor(v){super(v),Object.setPrototypeOf(this,new.target.prototype)}}class x extends Error{constructor(v){super(v),Object.setPrototypeOf(this,new.target.prototype)}}class S extends Error{constructor(v){super(v),Object.setPrototypeOf(this,new.target.prototype)}}class N extends Error{constructor(v){super(v),Object.setPrototypeOf(this,new.target.prototype)}}class j extends Error{constructor(v){super(v),Object.setPrototypeOf(this,new.target.prototype)}}class P extends Error{constructor(v){super(v),Object.setPrototypeOf(this,new.target.prototype)}}class E extends Error{constructor(v){super(v),Object.setPrototypeOf(this,new.target.prototype)}}class T extends Error{constructor(v,k){super(k),this.status=v,Object.setPrototypeOf(this,new.target.prototype)}}var M=function(C,v,k,L,I){const G=me.createXHR();G.open("POST",k.endpoint,!0),G.setRequestHeader("Content-Type","application/x-www-form-urlencoded");for(var te in k.headers)G.setRequestHeader(te,k.headers[te]);if(k.headersProvider!=null){let oe=k.headersProvider();for(var te in oe)G.setRequestHeader(te,oe[te])}return G.onreadystatechange=function(){if(G.readyState===4)if(G.status===200){let oe,fe=!1;try{oe=JSON.parse(G.responseText),fe=!0}catch{I(new T(200,`JSON returned from ${L.toString()} endpoint was invalid, yet status code was 200. Data was: ${G.responseText}`),null)}fe&&I(null,oe)}else{let oe="";switch(L){case w.UserAuthentication:oe=p.buildLogSuffix("authenticationEndpoint");break;case w.ChannelAuthorization:oe=`Clients must be authorized to join private or presence channels. ${p.buildLogSuffix("authorizationEndpoint")}`;break}I(new T(G.status,`Unable to retrieve auth string from ${L.toString()} endpoint - received status: ${G.status} from ${k.endpoint}. ${oe}`),null)}},G.send(v),G};function _(C){return K(H(C))}var O=String.fromCharCode,A="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",B=function(C){var v=C.charCodeAt(0);return v<128?C:v<2048?O(192|v>>>6)+O(128|v&63):O(224|v>>>12&15)+O(128|v>>>6&63)+O(128|v&63)},H=function(C){return C.replace(/[^\x00-\x7F]/g,B)},F=function(C){var v=[0,2,1][C.length%3],k=C.charCodeAt(0)<<16|(C.length>1?C.charCodeAt(1):0)<<8|(C.length>2?C.charCodeAt(2):0),L=[A.charAt(k>>>18),A.charAt(k>>>12&63),v>=2?"=":A.charAt(k>>>6&63),v>=1?"=":A.charAt(k&63)];return L.join("")},K=window.btoa||function(C){return C.replace(/[\s\S]{1,3}/g,F)};class D{constructor(v,k,L,I){this.clear=k,this.timer=v(()=>{this.timer&&(this.timer=I(this.timer))},L)}isRunning(){return this.timer!==null}ensureAborted(){this.timer&&(this.clear(this.timer),this.timer=null)}}var V=D;function $(C){window.clearTimeout(C)}function Q(C){window.clearInterval(C)}class se extends V{constructor(v,k){super(setTimeout,$,v,function(L){return k(),null})}}class ye extends V{constructor(v,k){super(setInterval,Q,v,function(L){return k(),L})}}var q={now(){return Date.now?Date.now():new Date().valueOf()},defer(C){return new se(0,C)},method(C,...v){var k=Array.prototype.slice.call(arguments,1);return function(L){return L[C].apply(L,k.concat(arguments))}}},W=q;function Y(C,...v){for(var k=0;k<v.length;k++){var L=v[k];for(var I in L)L[I]&&L[I].constructor&&L[I].constructor===Object?C[I]=Y(C[I]||{},L[I]):C[I]=L[I]}return C}function re(){for(var C=["Pusher"],v=0;v<arguments.length;v++)typeof arguments[v]=="string"?C.push(arguments[v]):C.push(xn(arguments[v]));return C.join(" : ")}function be(C,v){var k=Array.prototype.indexOf;if(C===null)return-1;if(k&&C.indexOf===k)return C.indexOf(v);for(var L=0,I=C.length;L<I;L++)if(C[L]===v)return L;return-1}function we(C,v){for(var k in C)Object.prototype.hasOwnProperty.call(C,k)&&v(C[k],k,C)}function he(C){var v=[];return we(C,function(k,L){v.push(L)}),v}function Ce(C){var v=[];return we(C,function(k){v.push(k)}),v}function le(C,v,k){for(var L=0;L<C.length;L++)v.call(k||window,C[L],L,C)}function ds(C,v){for(var k=[],L=0;L<C.length;L++)k.push(v(C[L],L,C,k));return k}function Jt(C,v){var k={};return we(C,function(L,I){k[I]=v(L)}),k}function ir(C,v){v=v||function(I){return!!I};for(var k=[],L=0;L<C.length;L++)v(C[L],L,C,k)&&k.push(C[L]);return k}function ie(C,v){var k={};return we(C,function(L,I){(v&&v(L,I,C,k)||L)&&(k[I]=L)}),k}function de(C){var v=[];return we(C,function(k,L){v.push([L,k])}),v}function Pe(C,v){for(var k=0;k<C.length;k++)if(v(C[k],k,C))return!0;return!1}function qe(C,v){for(var k=0;k<C.length;k++)if(!v(C[k],k,C))return!1;return!0}function ge(C){return Jt(C,function(v){return typeof v=="object"&&(v=xn(v)),encodeURIComponent(_(v.toString()))})}function fs(C){var v=ie(C,function(L){return L!==void 0}),k=ds(de(ge(v)),W.method("join","=")).join("&");return k}function vn(C){var v=[],k=[];return function L(I,G){var te,oe,fe;switch(typeof I){case"object":if(!I)return null;for(te=0;te<v.length;te+=1)if(v[te]===I)return{$ref:k[te]};if(v.push(I),k.push(G),Object.prototype.toString.apply(I)==="[object Array]")for(fe=[],te=0;te<I.length;te+=1)fe[te]=L(I[te],G+"["+te+"]");else{fe={};for(oe in I)Object.prototype.hasOwnProperty.call(I,oe)&&(fe[oe]=L(I[oe],G+"["+JSON.stringify(oe)+"]"))}return fe;case"number":case"string":case"boolean":return I}}(C,"$")}function xn(C){try{return JSON.stringify(C)}catch{return JSON.stringify(vn(C))}}class nh{constructor(){this.globalLog=v=>{window.console&&window.console.log&&window.console.log(v)}}debug(...v){this.log(this.globalLog,v)}warn(...v){this.log(this.globalLogWarn,v)}error(...v){this.log(this.globalLogError,v)}globalLogWarn(v){window.console&&window.console.warn?window.console.warn(v):this.globalLog(v)}globalLogError(v){window.console&&window.console.error?window.console.error(v):this.globalLogWarn(v)}log(v,...k){var L=re.apply(this,arguments);ph.log?ph.log(L):ph.logToConsole&&v.bind(this)(L)}}var Be=new nh,ih=function(C,v,k,L,I){(k.headers!==void 0||k.headersProvider!=null)&&Be.warn(`To send headers with the ${L.toString()} request, you must use AJAX, rather than JSONP.`);var G=C.nextAuthCallbackID.toString();C.nextAuthCallbackID++;var te=C.getDocument(),oe=te.createElement("script");C.auth_callbacks[G]=function(Te){I(null,Te)};var fe="Pusher.auth_callbacks['"+G+"']";oe.src=k.endpoint+"?callback="+encodeURIComponent(fe)+"&"+v;var Ne=te.getElementsByTagName("head")[0]||te.documentElement;Ne.insertBefore(oe,Ne.firstChild)},rh=ih;class ah{constructor(v){this.src=v}send(v){var k=this,L="Error loading "+k.src;k.script=document.createElement("script"),k.script.id=v.id,k.script.src=k.src,k.script.type="text/javascript",k.script.charset="UTF-8",k.script.addEventListener?(k.script.onerror=function(){v.callback(L)},k.script.onload=function(){v.callback(null)}):k.script.onreadystatechange=function(){(k.script.readyState==="loaded"||k.script.readyState==="complete")&&v.callback(null)},k.script.async===void 0&&document.attachEvent&&/opera/i.test(navigator.userAgent)?(k.errorScript=document.createElement("script"),k.errorScript.id=v.id+"_error",k.errorScript.text=v.name+"('"+L+"');",k.script.async=k.errorScript.async=!1):k.script.async=!0;var I=document.getElementsByTagName("head")[0];I.insertBefore(k.script,I.firstChild),k.errorScript&&I.insertBefore(k.errorScript,k.script.nextSibling)}cleanup(){this.script&&(this.script.onload=this.script.onerror=null,this.script.onreadystatechange=null),this.script&&this.script.parentNode&&this.script.parentNode.removeChild(this.script),this.errorScript&&this.errorScript.parentNode&&this.errorScript.parentNode.removeChild(this.errorScript),this.script=null,this.errorScript=null}}class rr{constructor(v,k){this.url=v,this.data=k}send(v){if(!this.request){var k=fs(this.data),L=this.url+"/"+v.number+"?"+k;this.request=me.createScriptRequest(L),this.request.send(v)}}cleanup(){this.request&&this.request.cleanup()}}var Eg=function(C,v){return function(k,L){var I="http"+(v?"s":"")+"://",G=I+(C.host||C.options.host)+C.options.path,te=me.createJSONPRequest(G,k),oe=me.ScriptReceivers.create(function(fe,Ne){o.remove(oe),te.cleanup(),Ne&&Ne.host&&(C.host=Ne.host),L&&L(fe,Ne)});te.send(oe)}},Ho={name:"jsonp",getAgent:Eg},Yo=Ho;function J(C,v,k){var L=C+(v.useTLS?"s":""),I=v.useTLS?v.hostTLS:v.hostNonTLS;return L+"://"+I+k}function We(C,v){var k="/app/"+C,L="?protocol="+c.PROTOCOL+"&client=js&version="+c.VERSION+(v?"&"+v:"");return k+L}var $e={getInitial:function(C,v){var k=(v.httpPath||"")+We(C,"flash=false");return J("ws",v,k)}},ri={getInitial:function(C,v){var k=(v.httpPath||"/pusher")+We(C);return J("http",v,k)}},oa={getInitial:function(C,v){return J("http",v,v.httpPath||"/pusher")},getPath:function(C,v){return We(C)}};class ck{constructor(){this._callbacks={}}get(v){return this._callbacks[oh(v)]}add(v,k,L){var I=oh(v);this._callbacks[I]=this._callbacks[I]||[],this._callbacks[I].push({fn:k,context:L})}remove(v,k,L){if(!v&&!k&&!L){this._callbacks={};return}var I=v?[oh(v)]:he(this._callbacks);k||L?this.removeCallback(I,k,L):this.removeAllCallbacks(I)}removeCallback(v,k,L){le(v,function(I){this._callbacks[I]=ir(this._callbacks[I]||[],function(G){return k&&k!==G.fn||L&&L!==G.context}),this._callbacks[I].length===0&&delete this._callbacks[I]},this)}removeAllCallbacks(v){le(v,function(k){delete this._callbacks[k]},this)}}function oh(C){return"_"+C}class qs{constructor(v){this.callbacks=new ck,this.global_callbacks=[],this.failThrough=v}bind(v,k,L){return this.callbacks.add(v,k,L),this}bind_global(v){return this.global_callbacks.push(v),this}unbind(v,k,L){return this.callbacks.remove(v,k,L),this}unbind_global(v){return v?(this.global_callbacks=ir(this.global_callbacks||[],k=>k!==v),this):(this.global_callbacks=[],this)}unbind_all(){return this.unbind(),this.unbind_global(),this}emit(v,k,L){for(var I=0;I<this.global_callbacks.length;I++)this.global_callbacks[I](v,k);var G=this.callbacks.get(v),te=[];if(L?te.push(k,L):k&&te.push(k),G&&G.length>0)for(var I=0;I<G.length;I++)G[I].fn.apply(G[I].context||window,te);else this.failThrough&&this.failThrough(v,k);return this}}class uk extends qs{constructor(v,k,L,I,G){super(),this.initialize=me.transportConnectionInitializer,this.hooks=v,this.name=k,this.priority=L,this.key=I,this.options=G,this.state="new",this.timeline=G.timeline,this.activityTimeout=G.activityTimeout,this.id=this.timeline.generateUniqueID()}handlesActivityChecks(){return!!this.hooks.handlesActivityChecks}supportsPing(){return!!this.hooks.supportsPing}connect(){if(this.socket||this.state!=="initialized")return!1;var v=this.hooks.urls.getInitial(this.key,this.options);try{this.socket=this.hooks.getSocket(v,this.options)}catch(k){return W.defer(()=>{this.onError(k),this.changeState("closed")}),!1}return this.bindListeners(),Be.debug("Connecting",{transport:this.name,url:v}),this.changeState("connecting"),!0}close(){return this.socket?(this.socket.close(),!0):!1}send(v){return this.state==="open"?(W.defer(()=>{this.socket&&this.socket.send(v)}),!0):!1}ping(){this.state==="open"&&this.supportsPing()&&this.socket.ping()}onOpen(){this.hooks.beforeOpen&&this.hooks.beforeOpen(this.socket,this.hooks.urls.getPath(this.key,this.options)),this.changeState("open"),this.socket.onopen=void 0}onError(v){this.emit("error",{type:"WebSocketError",error:v}),this.timeline.error(this.buildTimelineMessage({error:v.toString()}))}onClose(v){v?this.changeState("closed",{code:v.code,reason:v.reason,wasClean:v.wasClean}):this.changeState("closed"),this.unbindListeners(),this.socket=void 0}onMessage(v){this.emit("message",v)}onActivity(){this.emit("activity")}bindListeners(){this.socket.onopen=()=>{this.onOpen()},this.socket.onerror=v=>{this.onError(v)},this.socket.onclose=v=>{this.onClose(v)},this.socket.onmessage=v=>{this.onMessage(v)},this.supportsPing()&&(this.socket.onactivity=()=>{this.onActivity()})}unbindListeners(){this.socket&&(this.socket.onopen=void 0,this.socket.onerror=void 0,this.socket.onclose=void 0,this.socket.onmessage=void 0,this.supportsPing()&&(this.socket.onactivity=void 0))}changeState(v,k){this.state=v,this.timeline.info(this.buildTimelineMessage({state:v,params:k})),this.emit(v,k)}buildTimelineMessage(v){return Y({cid:this.id},v)}}class ar{constructor(v){this.hooks=v}isSupported(v){return this.hooks.isSupported(v)}createConnection(v,k,L,I){return new uk(this.hooks,v,k,L,I)}}var hk=new ar({urls:$e,handlesActivityChecks:!1,supportsPing:!1,isInitialized:function(){return!!me.getWebSocketAPI()},isSupported:function(){return!!me.getWebSocketAPI()},getSocket:function(C){return me.createWebSocket(C)}}),Lg={urls:ri,handlesActivityChecks:!1,supportsPing:!0,isInitialized:function(){return!0}},_g=Y({getSocket:function(C){return me.HTTPFactory.createStreamingSocket(C)}},Lg),Rg=Y({getSocket:function(C){return me.HTTPFactory.createPollingSocket(C)}},Lg),Mg={isSupported:function(){return me.isXHRSupported()}},dk=new ar(Y({},_g,Mg)),fk=new ar(Y({},Rg,Mg)),mk={ws:hk,xhr_streaming:dk,xhr_polling:fk},qo=mk,pk=new ar({file:"sockjs",urls:oa,handlesActivityChecks:!0,supportsPing:!1,isSupported:function(){return!0},isInitialized:function(){return window.SockJS!==void 0},getSocket:function(C,v){return new window.SockJS(C,null,{js_path:d.getPath("sockjs",{useTLS:v.useTLS}),ignore_null_origin:v.ignoreNullOrigin})},beforeOpen:function(C,v){C.send(JSON.stringify({path:v}))}}),Ig={isSupported:function(C){var v=me.isXDRSupported(C.useTLS);return v}},gk=new ar(Y({},_g,Ig)),yk=new ar(Y({},Rg,Ig));qo.xdr_streaming=gk,qo.xdr_polling=yk,qo.sockjs=pk;var vk=qo;class xk extends qs{constructor(){super();var v=this;window.addEventListener!==void 0&&(window.addEventListener("online",function(){v.emit("online")},!1),window.addEventListener("offline",function(){v.emit("offline")},!1))}isOnline(){return window.navigator.onLine===void 0?!0:window.navigator.onLine}}var wk=new xk;class Sk{constructor(v,k,L){this.manager=v,this.transport=k,this.minPingDelay=L.minPingDelay,this.maxPingDelay=L.maxPingDelay,this.pingDelay=void 0}createConnection(v,k,L,I){I=Y({},I,{activityTimeout:this.pingDelay});var G=this.transport.createConnection(v,k,L,I),te=null,oe=function(){G.unbind("open",oe),G.bind("closed",fe),te=W.now()},fe=Ne=>{if(G.unbind("closed",fe),Ne.code===1002||Ne.code===1003)this.manager.reportDeath();else if(!Ne.wasClean&&te){var Te=W.now()-te;Te<2*this.maxPingDelay&&(this.manager.reportDeath(),this.pingDelay=Math.max(Te/2,this.minPingDelay))}};return G.bind("open",oe),G}isSupported(v){return this.manager.isAlive()&&this.transport.isSupported(v)}}const Ag={decodeMessage:function(C){try{var v=JSON.parse(C.data),k=v.data;if(typeof k=="string")try{k=JSON.parse(v.data)}catch{}var L={event:v.event,channel:v.channel,data:k};return v.user_id&&(L.user_id=v.user_id),L}catch(I){throw{type:"MessageParseError",error:I,data:C.data}}},encodeMessage:function(C){return JSON.stringify(C)},processHandshake:function(C){var v=Ag.decodeMessage(C);if(v.event==="pusher:connection_established"){if(!v.data.activity_timeout)throw"No activity timeout specified in handshake";return{action:"connected",id:v.data.socket_id,activityTimeout:v.data.activity_timeout*1e3}}else{if(v.event==="pusher:error")return{action:this.getCloseAction(v.data),error:this.getCloseError(v.data)};throw"Invalid handshake"}},getCloseAction:function(C){return C.code<4e3?C.code>=1002&&C.code<=1004?"backoff":null:C.code===4e3?"tls_only":C.code<4100?"refused":C.code<4200?"backoff":C.code<4300?"retry":"refused"},getCloseError:function(C){return C.code!==1e3&&C.code!==1001?{type:"PusherError",data:{code:C.code,message:C.reason||C.message}}:null}};var ai=Ag;class bk extends qs{constructor(v,k){super(),this.id=v,this.transport=k,this.activityTimeout=k.activityTimeout,this.bindListeners()}handlesActivityChecks(){return this.transport.handlesActivityChecks()}send(v){return this.transport.send(v)}send_event(v,k,L){var I={event:v,data:k};return L&&(I.channel=L),Be.debug("Event sent",I),this.send(ai.encodeMessage(I))}ping(){this.transport.supportsPing()?this.transport.ping():this.send_event("pusher:ping",{})}close(){this.transport.close()}bindListeners(){var v={message:L=>{var I;try{I=ai.decodeMessage(L)}catch(G){this.emit("error",{type:"MessageParseError",error:G,data:L.data})}if(I!==void 0){switch(Be.debug("Event recd",I),I.event){case"pusher:error":this.emit("error",{type:"PusherError",data:I.data});break;case"pusher:ping":this.emit("ping");break;case"pusher:pong":this.emit("pong");break}this.emit("message",I)}},activity:()=>{this.emit("activity")},error:L=>{this.emit("error",L)},closed:L=>{k(),L&&L.code&&this.handleCloseEvent(L),this.transport=null,this.emit("closed")}},k=()=>{we(v,(L,I)=>{this.transport.unbind(I,L)})};we(v,(L,I)=>{this.transport.bind(I,L)})}handleCloseEvent(v){var k=ai.getCloseAction(v),L=ai.getCloseError(v);L&&this.emit("error",L),k&&this.emit(k,{action:k,error:L})}}class jk{constructor(v,k){this.transport=v,this.callback=k,this.bindListeners()}close(){this.unbindListeners(),this.transport.close()}bindListeners(){this.onMessage=v=>{this.unbindListeners();var k;try{k=ai.processHandshake(v)}catch(L){this.finish("error",{error:L}),this.transport.close();return}k.action==="connected"?this.finish("connected",{connection:new bk(k.id,this.transport),activityTimeout:k.activityTimeout}):(this.finish(k.action,{error:k.error}),this.transport.close())},this.onClosed=v=>{this.unbindListeners();var k=ai.getCloseAction(v)||"backoff",L=ai.getCloseError(v);this.finish(k,{error:L})},this.transport.bind("message",this.onMessage),this.transport.bind("closed",this.onClosed)}unbindListeners(){this.transport.unbind("message",this.onMessage),this.transport.unbind("closed",this.onClosed)}finish(v,k){this.callback(Y({transport:this.transport,action:v},k))}}class Nk{constructor(v,k){this.timeline=v,this.options=k||{}}send(v,k){this.timeline.isEmpty()||this.timeline.send(me.TimelineTransport.getAgent(this,v),k)}}class lh extends qs{constructor(v,k){super(function(L,I){Be.debug("No callbacks on "+v+" for "+L)}),this.name=v,this.pusher=k,this.subscribed=!1,this.subscriptionPending=!1,this.subscriptionCancelled=!1}authorize(v,k){return k(null,{auth:""})}trigger(v,k){if(v.indexOf("client-")!==0)throw new g("Event '"+v+"' does not start with 'client-'");if(!this.subscribed){var L=p.buildLogSuffix("triggeringClientEvents");Be.warn(`Client event triggered before channel 'subscription_succeeded' event . ${L}`)}return this.pusher.send_event(v,k,this.name)}disconnect(){this.subscribed=!1,this.subscriptionPending=!1}handleEvent(v){var k=v.event,L=v.data;if(k==="pusher_internal:subscription_succeeded")this.handleSubscriptionSucceededEvent(v);else if(k==="pusher_internal:subscription_count")this.handleSubscriptionCountEvent(v);else if(k.indexOf("pusher_internal:")!==0){var I={};this.emit(k,L,I)}}handleSubscriptionSucceededEvent(v){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):this.emit("pusher:subscription_succeeded",v.data)}handleSubscriptionCountEvent(v){v.data.subscription_count&&(this.subscriptionCount=v.data.subscription_count),this.emit("pusher:subscription_count",v.data)}subscribe(){this.subscribed||(this.subscriptionPending=!0,this.subscriptionCancelled=!1,this.authorize(this.pusher.connection.socket_id,(v,k)=>{v?(this.subscriptionPending=!1,Be.error(v.toString()),this.emit("pusher:subscription_error",Object.assign({},{type:"AuthError",error:v.message},v instanceof T?{status:v.status}:{}))):this.pusher.send_event("pusher:subscribe",{auth:k.auth,channel_data:k.channel_data,channel:this.name})}))}unsubscribe(){this.subscribed=!1,this.pusher.send_event("pusher:unsubscribe",{channel:this.name})}cancelSubscription(){this.subscriptionCancelled=!0}reinstateSubscription(){this.subscriptionCancelled=!1}}class ch extends lh{authorize(v,k){return this.pusher.config.channelAuthorizer({channelName:this.name,socketId:v},k)}}class kk{constructor(){this.reset()}get(v){return Object.prototype.hasOwnProperty.call(this.members,v)?{id:v,info:this.members[v]}:null}each(v){we(this.members,(k,L)=>{v(this.get(L))})}setMyID(v){this.myID=v}onSubscription(v){this.members=v.presence.hash,this.count=v.presence.count,this.me=this.get(this.myID)}addMember(v){return this.get(v.user_id)===null&&this.count++,this.members[v.user_id]=v.user_info,this.get(v.user_id)}removeMember(v){var k=this.get(v.user_id);return k&&(delete this.members[v.user_id],this.count--),k}reset(){this.members={},this.count=0,this.myID=null,this.me=null}}var Ck=function(C,v,k,L){function I(G){return G instanceof k?G:new k(function(te){te(G)})}return new(k||(k=Promise))(function(G,te){function oe(Te){try{Ne(L.next(Te))}catch(it){te(it)}}function fe(Te){try{Ne(L.throw(Te))}catch(it){te(it)}}function Ne(Te){Te.done?G(Te.value):I(Te.value).then(oe,fe)}Ne((L=L.apply(C,v||[])).next())})};class Pk extends ch{constructor(v,k){super(v,k),this.members=new kk}authorize(v,k){super.authorize(v,(L,I)=>Ck(this,void 0,void 0,function*(){if(!L)if(I=I,I.channel_data!=null){var G=JSON.parse(I.channel_data);this.members.setMyID(G.user_id)}else if(yield this.pusher.user.signinDonePromise,this.pusher.user.user_data!=null)this.members.setMyID(this.pusher.user.user_data.id);else{let te=p.buildLogSuffix("authorizationEndpoint");Be.error(`Invalid auth response for channel '${this.name}', expected 'channel_data' field. ${te}, or the user should be signed in.`),k("Invalid auth response");return}k(L,I)}))}handleEvent(v){var k=v.event;if(k.indexOf("pusher_internal:")===0)this.handleInternalEvent(v);else{var L=v.data,I={};v.user_id&&(I.user_id=v.user_id),this.emit(k,L,I)}}handleInternalEvent(v){var k=v.event,L=v.data;switch(k){case"pusher_internal:subscription_succeeded":this.handleSubscriptionSucceededEvent(v);break;case"pusher_internal:subscription_count":this.handleSubscriptionCountEvent(v);break;case"pusher_internal:member_added":var I=this.members.addMember(L);this.emit("pusher:member_added",I);break;case"pusher_internal:member_removed":var G=this.members.removeMember(L);G&&this.emit("pusher:member_removed",G);break}}handleSubscriptionSucceededEvent(v){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):(this.members.onSubscription(v.data),this.emit("pusher:subscription_succeeded",this.members))}disconnect(){this.members.reset(),super.disconnect()}}var Tk=i(1),uh=i(0);class Ek extends ch{constructor(v,k,L){super(v,k),this.key=null,this.nacl=L}authorize(v,k){super.authorize(v,(L,I)=>{if(L){k(L,I);return}let G=I.shared_secret;if(!G){k(new Error(`No shared_secret key in auth payload for encrypted channel: ${this.name}`),null);return}this.key=Object(uh.decode)(G),delete I.shared_secret,k(null,I)})}trigger(v,k){throw new j("Client events are not currently supported for encrypted channels")}handleEvent(v){var k=v.event,L=v.data;if(k.indexOf("pusher_internal:")===0||k.indexOf("pusher:")===0){super.handleEvent(v);return}this.handleEncryptedEvent(k,L)}handleEncryptedEvent(v,k){if(!this.key){Be.debug("Received encrypted event before key has been retrieved from the authEndpoint");return}if(!k.ciphertext||!k.nonce){Be.error("Unexpected format for encrypted event, expected object with `ciphertext` and `nonce` fields, got: "+k);return}let L=Object(uh.decode)(k.ciphertext);if(L.length<this.nacl.secretbox.overheadLength){Be.error(`Expected encrypted event ciphertext length to be ${this.nacl.secretbox.overheadLength}, got: ${L.length}`);return}let I=Object(uh.decode)(k.nonce);if(I.length<this.nacl.secretbox.nonceLength){Be.error(`Expected encrypted event nonce length to be ${this.nacl.secretbox.nonceLength}, got: ${I.length}`);return}let G=this.nacl.secretbox.open(L,I,this.key);if(G===null){Be.debug("Failed to decrypt an event, probably because it was encrypted with a different key. Fetching a new key from the authEndpoint..."),this.authorize(this.pusher.connection.socket_id,(te,oe)=>{if(te){Be.error(`Failed to make a request to the authEndpoint: ${oe}. Unable to fetch new key, so dropping encrypted event`);return}if(G=this.nacl.secretbox.open(L,I,this.key),G===null){Be.error("Failed to decrypt event with new key. Dropping encrypted event");return}this.emit(v,this.getDataToEmit(G))});return}this.emit(v,this.getDataToEmit(G))}getDataToEmit(v){let k=Object(Tk.decode)(v);try{return JSON.parse(k)}catch{return k}}}class Lk extends qs{constructor(v,k){super(),this.state="initialized",this.connection=null,this.key=v,this.options=k,this.timeline=this.options.timeline,this.usingTLS=this.options.useTLS,this.errorCallbacks=this.buildErrorCallbacks(),this.connectionCallbacks=this.buildConnectionCallbacks(this.errorCallbacks),this.handshakeCallbacks=this.buildHandshakeCallbacks(this.errorCallbacks);var L=me.getNetwork();L.bind("online",()=>{this.timeline.info({netinfo:"online"}),(this.state==="connecting"||this.state==="unavailable")&&this.retryIn(0)}),L.bind("offline",()=>{this.timeline.info({netinfo:"offline"}),this.connection&&this.sendActivityCheck()}),this.updateStrategy()}connect(){if(!(this.connection||this.runner)){if(!this.strategy.isSupported()){this.updateState("failed");return}this.updateState("connecting"),this.startConnecting(),this.setUnavailableTimer()}}send(v){return this.connection?this.connection.send(v):!1}send_event(v,k,L){return this.connection?this.connection.send_event(v,k,L):!1}disconnect(){this.disconnectInternally(),this.updateState("disconnected")}isUsingTLS(){return this.usingTLS}startConnecting(){var v=(k,L)=>{k?this.runner=this.strategy.connect(0,v):L.action==="error"?(this.emit("error",{type:"HandshakeError",error:L.error}),this.timeline.error({handshakeError:L.error})):(this.abortConnecting(),this.handshakeCallbacks[L.action](L))};this.runner=this.strategy.connect(0,v)}abortConnecting(){this.runner&&(this.runner.abort(),this.runner=null)}disconnectInternally(){if(this.abortConnecting(),this.clearRetryTimer(),this.clearUnavailableTimer(),this.connection){var v=this.abandonConnection();v.close()}}updateStrategy(){this.strategy=this.options.getStrategy({key:this.key,timeline:this.timeline,useTLS:this.usingTLS})}retryIn(v){this.timeline.info({action:"retry",delay:v}),v>0&&this.emit("connecting_in",Math.round(v/1e3)),this.retryTimer=new se(v||0,()=>{this.disconnectInternally(),this.connect()})}clearRetryTimer(){this.retryTimer&&(this.retryTimer.ensureAborted(),this.retryTimer=null)}setUnavailableTimer(){this.unavailableTimer=new se(this.options.unavailableTimeout,()=>{this.updateState("unavailable")})}clearUnavailableTimer(){this.unavailableTimer&&this.unavailableTimer.ensureAborted()}sendActivityCheck(){this.stopActivityCheck(),this.connection.ping(),this.activityTimer=new se(this.options.pongTimeout,()=>{this.timeline.error({pong_timed_out:this.options.pongTimeout}),this.retryIn(0)})}resetActivityCheck(){this.stopActivityCheck(),this.connection&&!this.connection.handlesActivityChecks()&&(this.activityTimer=new se(this.activityTimeout,()=>{this.sendActivityCheck()}))}stopActivityCheck(){this.activityTimer&&this.activityTimer.ensureAborted()}buildConnectionCallbacks(v){return Y({},v,{message:k=>{this.resetActivityCheck(),this.emit("message",k)},ping:()=>{this.send_event("pusher:pong",{})},activity:()=>{this.resetActivityCheck()},error:k=>{this.emit("error",k)},closed:()=>{this.abandonConnection(),this.shouldRetry()&&this.retryIn(1e3)}})}buildHandshakeCallbacks(v){return Y({},v,{connected:k=>{this.activityTimeout=Math.min(this.options.activityTimeout,k.activityTimeout,k.connection.activityTimeout||1/0),this.clearUnavailableTimer(),this.setConnection(k.connection),this.socket_id=this.connection.id,this.updateState("connected",{socket_id:this.socket_id})}})}buildErrorCallbacks(){let v=k=>L=>{L.error&&this.emit("error",{type:"WebSocketError",error:L.error}),k(L)};return{tls_only:v(()=>{this.usingTLS=!0,this.updateStrategy(),this.retryIn(0)}),refused:v(()=>{this.disconnect()}),backoff:v(()=>{this.retryIn(1e3)}),retry:v(()=>{this.retryIn(0)})}}setConnection(v){this.connection=v;for(var k in this.connectionCallbacks)this.connection.bind(k,this.connectionCallbacks[k]);this.resetActivityCheck()}abandonConnection(){if(this.connection){this.stopActivityCheck();for(var v in this.connectionCallbacks)this.connection.unbind(v,this.connectionCallbacks[v]);var k=this.connection;return this.connection=null,k}}updateState(v,k){var L=this.state;if(this.state=v,L!==v){var I=v;I==="connected"&&(I+=" with new socket ID "+k.socket_id),Be.debug("State changed",L+" -> "+I),this.timeline.info({state:v,params:k}),this.emit("state_change",{previous:L,current:v}),this.emit(v,k)}}shouldRetry(){return this.state==="connecting"||this.state==="connected"}}class _k{constructor(){this.channels={}}add(v,k){return this.channels[v]||(this.channels[v]=Rk(v,k)),this.channels[v]}all(){return Ce(this.channels)}find(v){return this.channels[v]}remove(v){var k=this.channels[v];return delete this.channels[v],k}disconnect(){we(this.channels,function(v){v.disconnect()})}}function Rk(C,v){if(C.indexOf("private-encrypted-")===0){if(v.config.nacl)return Gs.createEncryptedChannel(C,v,v.config.nacl);let k="Tried to subscribe to a private-encrypted- channel but no nacl implementation available",L=p.buildLogSuffix("encryptedChannelSupport");throw new j(`${k}. ${L}`)}else{if(C.indexOf("private-")===0)return Gs.createPrivateChannel(C,v);if(C.indexOf("presence-")===0)return Gs.createPresenceChannel(C,v);if(C.indexOf("#")===0)throw new m('Cannot create a channel with name "'+C+'".');return Gs.createChannel(C,v)}}var Mk={createChannels(){return new _k},createConnectionManager(C,v){return new Lk(C,v)},createChannel(C,v){return new lh(C,v)},createPrivateChannel(C,v){return new ch(C,v)},createPresenceChannel(C,v){return new Pk(C,v)},createEncryptedChannel(C,v,k){return new Ek(C,v,k)},createTimelineSender(C,v){return new Nk(C,v)},createHandshake(C,v){return new jk(C,v)},createAssistantToTheTransportManager(C,v,k){return new Sk(C,v,k)}},Gs=Mk;class Og{constructor(v){this.options=v||{},this.livesLeft=this.options.lives||1/0}getAssistant(v){return Gs.createAssistantToTheTransportManager(this,v,{minPingDelay:this.options.minPingDelay,maxPingDelay:this.options.maxPingDelay})}isAlive(){return this.livesLeft>0}reportDeath(){this.livesLeft-=1}}class oi{constructor(v,k){this.strategies=v,this.loop=!!k.loop,this.failFast=!!k.failFast,this.timeout=k.timeout,this.timeoutLimit=k.timeoutLimit}isSupported(){return Pe(this.strategies,W.method("isSupported"))}connect(v,k){var L=this.strategies,I=0,G=this.timeout,te=null,oe=(fe,Ne)=>{Ne?k(null,Ne):(I=I+1,this.loop&&(I=I%L.length),I<L.length?(G&&(G=G*2,this.timeoutLimit&&(G=Math.min(G,this.timeoutLimit))),te=this.tryStrategy(L[I],v,{timeout:G,failFast:this.failFast},oe)):k(!0))};return te=this.tryStrategy(L[I],v,{timeout:G,failFast:this.failFast},oe),{abort:function(){te.abort()},forceMinPriority:function(fe){v=fe,te&&te.forceMinPriority(fe)}}}tryStrategy(v,k,L,I){var G=null,te=null;return L.timeout>0&&(G=new se(L.timeout,function(){te.abort(),I(!0)})),te=v.connect(k,function(oe,fe){oe&&G&&G.isRunning()&&!L.failFast||(G&&G.ensureAborted(),I(oe,fe))}),{abort:function(){G&&G.ensureAborted(),te.abort()},forceMinPriority:function(oe){te.forceMinPriority(oe)}}}}class hh{constructor(v){this.strategies=v}isSupported(){return Pe(this.strategies,W.method("isSupported"))}connect(v,k){return Ik(this.strategies,v,function(L,I){return function(G,te){if(I[L].error=G,G){Ak(I)&&k(!0);return}le(I,function(oe){oe.forceMinPriority(te.transport.priority)}),k(null,te)}})}}function Ik(C,v,k){var L=ds(C,function(I,G,te,oe){return I.connect(v,k(G,oe))});return{abort:function(){le(L,Ok)},forceMinPriority:function(I){le(L,function(G){G.forceMinPriority(I)})}}}function Ak(C){return qe(C,function(v){return!!v.error})}function Ok(C){!C.error&&!C.aborted&&(C.abort(),C.aborted=!0)}class Dk{constructor(v,k,L){this.strategy=v,this.transports=k,this.ttl=L.ttl||1800*1e3,this.usingTLS=L.useTLS,this.timeline=L.timeline}isSupported(){return this.strategy.isSupported()}connect(v,k){var L=this.usingTLS,I=Fk(L),G=I&&I.cacheSkipCount?I.cacheSkipCount:0,te=[this.strategy];if(I&&I.timestamp+this.ttl>=W.now()){var oe=this.transports[I.transport];oe&&(["ws","wss"].includes(I.transport)||G>3?(this.timeline.info({cached:!0,transport:I.transport,latency:I.latency}),te.push(new oi([oe],{timeout:I.latency*2+1e3,failFast:!0}))):G++)}var fe=W.now(),Ne=te.pop().connect(v,function Te(it,Ko){it?(Dg(L),te.length>0?(fe=W.now(),Ne=te.pop().connect(v,Te)):k(it)):(Bk(L,Ko.transport.name,W.now()-fe,G),k(null,Ko))});return{abort:function(){Ne.abort()},forceMinPriority:function(Te){v=Te,Ne&&Ne.forceMinPriority(Te)}}}}function dh(C){return"pusherTransport"+(C?"TLS":"NonTLS")}function Fk(C){var v=me.getLocalStorage();if(v)try{var k=v[dh(C)];if(k)return JSON.parse(k)}catch{Dg(C)}return null}function Bk(C,v,k,L){var I=me.getLocalStorage();if(I)try{I[dh(C)]=xn({timestamp:W.now(),transport:v,latency:k,cacheSkipCount:L})}catch{}}function Dg(C){var v=me.getLocalStorage();if(v)try{delete v[dh(C)]}catch{}}class Go{constructor(v,{delay:k}){this.strategy=v,this.options={delay:k}}isSupported(){return this.strategy.isSupported()}connect(v,k){var L=this.strategy,I,G=new se(this.options.delay,function(){I=L.connect(v,k)});return{abort:function(){G.ensureAborted(),I&&I.abort()},forceMinPriority:function(te){v=te,I&&I.forceMinPriority(te)}}}}class la{constructor(v,k,L){this.test=v,this.trueBranch=k,this.falseBranch=L}isSupported(){var v=this.test()?this.trueBranch:this.falseBranch;return v.isSupported()}connect(v,k){var L=this.test()?this.trueBranch:this.falseBranch;return L.connect(v,k)}}class $k{constructor(v){this.strategy=v}isSupported(){return this.strategy.isSupported()}connect(v,k){var L=this.strategy.connect(v,function(I,G){G&&L.abort(),k(I,G)});return L}}function ca(C){return function(){return C.isSupported()}}var zk=function(C,v,k){var L={};function I(Gg,$C,zC,VC,UC){var Qg=k(C,Gg,$C,zC,VC,UC);return L[Gg]=Qg,Qg}var G=Object.assign({},v,{hostNonTLS:C.wsHost+":"+C.wsPort,hostTLS:C.wsHost+":"+C.wssPort,httpPath:C.wsPath}),te=Object.assign({},G,{useTLS:!0}),oe=Object.assign({},v,{hostNonTLS:C.httpHost+":"+C.httpPort,hostTLS:C.httpHost+":"+C.httpsPort,httpPath:C.httpPath}),fe={loop:!0,timeout:15e3,timeoutLimit:6e4},Ne=new Og({minPingDelay:1e4,maxPingDelay:C.activityTimeout}),Te=new Og({lives:2,minPingDelay:1e4,maxPingDelay:C.activityTimeout}),it=I("ws","ws",3,G,Ne),Ko=I("wss","ws",3,te,Ne),AC=I("sockjs","sockjs",1,oe),Vg=I("xhr_streaming","xhr_streaming",1,oe,Te),OC=I("xdr_streaming","xdr_streaming",1,oe,Te),Ug=I("xhr_polling","xhr_polling",1,oe),DC=I("xdr_polling","xdr_polling",1,oe),Wg=new oi([it],fe),FC=new oi([Ko],fe),BC=new oi([AC],fe),Hg=new oi([new la(ca(Vg),Vg,OC)],fe),Yg=new oi([new la(ca(Ug),Ug,DC)],fe),qg=new oi([new la(ca(Hg),new hh([Hg,new Go(Yg,{delay:4e3})]),Yg)],fe),gh=new la(ca(qg),qg,BC),yh;return v.useTLS?yh=new hh([Wg,new Go(gh,{delay:2e3})]):yh=new hh([Wg,new Go(FC,{delay:2e3}),new Go(gh,{delay:5e3})]),new Dk(new $k(new la(ca(it),yh,gh)),L,{ttl:18e5,timeline:v.timeline,useTLS:v.useTLS})},Vk=zk,Uk=function(){var C=this;C.timeline.info(C.buildTimelineMessage({transport:C.name+(C.options.useTLS?"s":"")})),C.hooks.isInitialized()?C.changeState("initialized"):C.hooks.file?(C.changeState("initializing"),d.load(C.hooks.file,{useTLS:C.options.useTLS},function(v,k){C.hooks.isInitialized()?(C.changeState("initialized"),k(!0)):(v&&C.onError(v),C.onClose(),k(!1))})):C.onClose()},Wk={getRequest:function(C){var v=new window.XDomainRequest;return v.ontimeout=function(){C.emit("error",new x),C.close()},v.onerror=function(k){C.emit("error",k),C.close()},v.onprogress=function(){v.responseText&&v.responseText.length>0&&C.onChunk(200,v.responseText)},v.onload=function(){v.responseText&&v.responseText.length>0&&C.onChunk(200,v.responseText),C.emit("finished",200),C.close()},v},abortRequest:function(C){C.ontimeout=C.onerror=C.onprogress=C.onload=null,C.abort()}},Hk=Wk;const Yk=256*1024;class qk extends qs{constructor(v,k,L){super(),this.hooks=v,this.method=k,this.url=L}start(v){this.position=0,this.xhr=this.hooks.getRequest(this),this.unloader=()=>{this.close()},me.addUnloadListener(this.unloader),this.xhr.open(this.method,this.url,!0),this.xhr.setRequestHeader&&this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.send(v)}close(){this.unloader&&(me.removeUnloadListener(this.unloader),this.unloader=null),this.xhr&&(this.hooks.abortRequest(this.xhr),this.xhr=null)}onChunk(v,k){for(;;){var L=this.advanceBuffer(k);if(L)this.emit("chunk",{status:v,data:L});else break}this.isBufferTooLong(k)&&this.emit("buffer_too_long")}advanceBuffer(v){var k=v.slice(this.position),L=k.indexOf(`
`);return L!==-1?(this.position+=L+1,k.slice(0,L)):null}isBufferTooLong(v){return this.position===v.length&&v.length>Yk}}var fh;(function(C){C[C.CONNECTING=0]="CONNECTING",C[C.OPEN=1]="OPEN",C[C.CLOSED=3]="CLOSED"})(fh||(fh={}));var li=fh,Gk=1;class Qk{constructor(v,k){this.hooks=v,this.session=Bg(1e3)+"/"+Zk(8),this.location=Kk(k),this.readyState=li.CONNECTING,this.openStream()}send(v){return this.sendRaw(JSON.stringify([v]))}ping(){this.hooks.sendHeartbeat(this)}close(v,k){this.onClose(v,k,!0)}sendRaw(v){if(this.readyState===li.OPEN)try{return me.createSocketRequest("POST",Fg(Xk(this.location,this.session))).start(v),!0}catch{return!1}else return!1}reconnect(){this.closeStream(),this.openStream()}onClose(v,k,L){this.closeStream(),this.readyState=li.CLOSED,this.onclose&&this.onclose({code:v,reason:k,wasClean:L})}onChunk(v){if(v.status===200){this.readyState===li.OPEN&&this.onActivity();var k,L=v.data.slice(0,1);switch(L){case"o":k=JSON.parse(v.data.slice(1)||"{}"),this.onOpen(k);break;case"a":k=JSON.parse(v.data.slice(1)||"[]");for(var I=0;I<k.length;I++)this.onEvent(k[I]);break;case"m":k=JSON.parse(v.data.slice(1)||"null"),this.onEvent(k);break;case"h":this.hooks.onHeartbeat(this);break;case"c":k=JSON.parse(v.data.slice(1)||"[]"),this.onClose(k[0],k[1],!0);break}}}onOpen(v){this.readyState===li.CONNECTING?(v&&v.hostname&&(this.location.base=Jk(this.location.base,v.hostname)),this.readyState=li.OPEN,this.onopen&&this.onopen()):this.onClose(1006,"Server lost session",!0)}onEvent(v){this.readyState===li.OPEN&&this.onmessage&&this.onmessage({data:v})}onActivity(){this.onactivity&&this.onactivity()}onError(v){this.onerror&&this.onerror(v)}openStream(){this.stream=me.createSocketRequest("POST",Fg(this.hooks.getReceiveURL(this.location,this.session))),this.stream.bind("chunk",v=>{this.onChunk(v)}),this.stream.bind("finished",v=>{this.hooks.onFinished(this,v)}),this.stream.bind("buffer_too_long",()=>{this.reconnect()});try{this.stream.start()}catch(v){W.defer(()=>{this.onError(v),this.onClose(1006,"Could not start streaming",!1)})}}closeStream(){this.stream&&(this.stream.unbind_all(),this.stream.close(),this.stream=null)}}function Kk(C){var v=/([^\?]*)\/*(\??.*)/.exec(C);return{base:v[1],queryString:v[2]}}function Xk(C,v){return C.base+"/"+v+"/xhr_send"}function Fg(C){var v=C.indexOf("?")===-1?"?":"&";return C+v+"t="+ +new Date+"&n="+Gk++}function Jk(C,v){var k=/(https?:\/\/)([^\/:]+)((\/|:)?.*)/.exec(C);return k[1]+v+k[3]}function Bg(C){return me.randomInt(C)}function Zk(C){for(var v=[],k=0;k<C;k++)v.push(Bg(32).toString(32));return v.join("")}var eC=Qk,tC={getReceiveURL:function(C,v){return C.base+"/"+v+"/xhr_streaming"+C.queryString},onHeartbeat:function(C){C.sendRaw("[]")},sendHeartbeat:function(C){C.sendRaw("[]")},onFinished:function(C,v){C.onClose(1006,"Connection interrupted ("+v+")",!1)}},sC=tC,nC={getReceiveURL:function(C,v){return C.base+"/"+v+"/xhr"+C.queryString},onHeartbeat:function(){},sendHeartbeat:function(C){C.sendRaw("[]")},onFinished:function(C,v){v===200?C.reconnect():C.onClose(1006,"Connection interrupted ("+v+")",!1)}},iC=nC,rC={getRequest:function(C){var v=me.getXHRAPI(),k=new v;return k.onreadystatechange=k.onprogress=function(){switch(k.readyState){case 3:k.responseText&&k.responseText.length>0&&C.onChunk(k.status,k.responseText);break;case 4:k.responseText&&k.responseText.length>0&&C.onChunk(k.status,k.responseText),C.emit("finished",k.status),C.close();break}},k},abortRequest:function(C){C.onreadystatechange=null,C.abort()}},aC=rC,oC={createStreamingSocket(C){return this.createSocket(sC,C)},createPollingSocket(C){return this.createSocket(iC,C)},createSocket(C,v){return new eC(C,v)},createXHR(C,v){return this.createRequest(aC,C,v)},createRequest(C,v,k){return new qk(C,v,k)}},$g=oC;$g.createXDR=function(C,v){return this.createRequest(Hk,C,v)};var lC=$g,cC={nextAuthCallbackID:1,auth_callbacks:{},ScriptReceivers:o,DependenciesReceivers:h,getDefaultStrategy:Vk,Transports:vk,transportConnectionInitializer:Uk,HTTPFactory:lC,TimelineTransport:Yo,getXHRAPI(){return window.XMLHttpRequest},getWebSocketAPI(){return window.WebSocket||window.MozWebSocket},setup(C){window.Pusher=C;var v=()=>{this.onDocumentBody(C.ready)};window.JSON?v():d.load("json2",{},v)},getDocument(){return document},getProtocol(){return this.getDocument().location.protocol},getAuthorizers(){return{ajax:M,jsonp:rh}},onDocumentBody(C){document.body?C():setTimeout(()=>{this.onDocumentBody(C)},0)},createJSONPRequest(C,v){return new rr(C,v)},createScriptRequest(C){return new ah(C)},getLocalStorage(){try{return window.localStorage}catch{return}},createXHR(){return this.getXHRAPI()?this.createXMLHttpRequest():this.createMicrosoftXHR()},createXMLHttpRequest(){var C=this.getXHRAPI();return new C},createMicrosoftXHR(){return new ActiveXObject("Microsoft.XMLHTTP")},getNetwork(){return wk},createWebSocket(C){var v=this.getWebSocketAPI();return new v(C)},createSocketRequest(C,v){if(this.isXHRSupported())return this.HTTPFactory.createXHR(C,v);if(this.isXDRSupported(v.indexOf("https:")===0))return this.HTTPFactory.createXDR(C,v);throw"Cross-origin HTTP requests are not supported"},isXHRSupported(){var C=this.getXHRAPI();return!!C&&new C().withCredentials!==void 0},isXDRSupported(C){var v=C?"https:":"http:",k=this.getProtocol();return!!window.XDomainRequest&&k===v},addUnloadListener(C){window.addEventListener!==void 0?window.addEventListener("unload",C,!1):window.attachEvent!==void 0&&window.attachEvent("onunload",C)},removeUnloadListener(C){window.addEventListener!==void 0?window.removeEventListener("unload",C,!1):window.detachEvent!==void 0&&window.detachEvent("onunload",C)},randomInt(C){return Math.floor(function(){return(window.crypto||window.msCrypto).getRandomValues(new Uint32Array(1))[0]/Math.pow(2,32)}()*C)}},me=cC,mh;(function(C){C[C.ERROR=3]="ERROR",C[C.INFO=6]="INFO",C[C.DEBUG=7]="DEBUG"})(mh||(mh={}));var Qo=mh;class uC{constructor(v,k,L){this.key=v,this.session=k,this.events=[],this.options=L||{},this.sent=0,this.uniqueID=0}log(v,k){v<=this.options.level&&(this.events.push(Y({},k,{timestamp:W.now()})),this.options.limit&&this.events.length>this.options.limit&&this.events.shift())}error(v){this.log(Qo.ERROR,v)}info(v){this.log(Qo.INFO,v)}debug(v){this.log(Qo.DEBUG,v)}isEmpty(){return this.events.length===0}send(v,k){var L=Y({session:this.session,bundle:this.sent+1,key:this.key,lib:"js",version:this.options.version,cluster:this.options.cluster,features:this.options.features,timeline:this.events},this.options.params);return this.events=[],v(L,(I,G)=>{I||this.sent++,k&&k(I,G)}),!0}generateUniqueID(){return this.uniqueID++,this.uniqueID}}class hC{constructor(v,k,L,I){this.name=v,this.priority=k,this.transport=L,this.options=I||{}}isSupported(){return this.transport.isSupported({useTLS:this.options.useTLS})}connect(v,k){if(this.isSupported()){if(this.priority<v)return zg(new S,k)}else return zg(new E,k);var L=!1,I=this.transport.createConnection(this.name,this.priority,this.options.key,this.options),G=null,te=function(){I.unbind("initialized",te),I.connect()},oe=function(){G=Gs.createHandshake(I,function(it){L=!0,Te(),k(null,it)})},fe=function(it){Te(),k(it)},Ne=function(){Te();var it;it=xn(I),k(new N(it))},Te=function(){I.unbind("initialized",te),I.unbind("open",oe),I.unbind("error",fe),I.unbind("closed",Ne)};return I.bind("initialized",te),I.bind("open",oe),I.bind("error",fe),I.bind("closed",Ne),I.initialize(),{abort:()=>{L||(Te(),G?G.close():I.close())},forceMinPriority:it=>{L||this.priority<it&&(G?G.close():I.close())}}}}function zg(C,v){return W.defer(function(){v(C)}),{abort:function(){},forceMinPriority:function(){}}}const{Transports:dC}=me;var fC=function(C,v,k,L,I,G){var te=dC[k];if(!te)throw new P(k);var oe=(!C.enabledTransports||be(C.enabledTransports,v)!==-1)&&(!C.disabledTransports||be(C.disabledTransports,v)===-1),fe;return oe?(I=Object.assign({ignoreNullOrigin:C.ignoreNullOrigin},I),fe=new hC(v,L,G?G.getAssistant(te):te,I)):fe=mC,fe},mC={isSupported:function(){return!1},connect:function(C,v){var k=W.defer(function(){v(new E)});return{abort:function(){k.ensureAborted()},forceMinPriority:function(){}}}};function pC(C){if(C==null)throw"You must pass an options object";if(C.cluster==null)throw"Options object must provide a cluster";"disableStats"in C&&Be.warn("The disableStats option is deprecated in favor of enableStats")}const gC=(C,v)=>{var k="socket_id="+encodeURIComponent(C.socketId);for(var L in v.params)k+="&"+encodeURIComponent(L)+"="+encodeURIComponent(v.params[L]);if(v.paramsProvider!=null){let I=v.paramsProvider();for(var L in I)k+="&"+encodeURIComponent(L)+"="+encodeURIComponent(I[L])}return k};var yC=C=>{if(typeof me.getAuthorizers()[C.transport]>"u")throw`'${C.transport}' is not a recognized auth transport`;return(v,k)=>{const L=gC(v,C);me.getAuthorizers()[C.transport](me,L,C,w.UserAuthentication,k)}};const vC=(C,v)=>{var k="socket_id="+encodeURIComponent(C.socketId);k+="&channel_name="+encodeURIComponent(C.channelName);for(var L in v.params)k+="&"+encodeURIComponent(L)+"="+encodeURIComponent(v.params[L]);if(v.paramsProvider!=null){let I=v.paramsProvider();for(var L in I)k+="&"+encodeURIComponent(L)+"="+encodeURIComponent(I[L])}return k};var xC=C=>{if(typeof me.getAuthorizers()[C.transport]>"u")throw`'${C.transport}' is not a recognized auth transport`;return(v,k)=>{const L=vC(v,C);me.getAuthorizers()[C.transport](me,L,C,w.ChannelAuthorization,k)}};const wC=(C,v,k)=>{const L={authTransport:v.transport,authEndpoint:v.endpoint,auth:{params:v.params,headers:v.headers}};return(I,G)=>{const te=C.channel(I.channelName);k(te,L).authorize(I.socketId,G)}};function SC(C,v){let k={activityTimeout:C.activityTimeout||c.activityTimeout,cluster:C.cluster,httpPath:C.httpPath||c.httpPath,httpPort:C.httpPort||c.httpPort,httpsPort:C.httpsPort||c.httpsPort,pongTimeout:C.pongTimeout||c.pongTimeout,statsHost:C.statsHost||c.stats_host,unavailableTimeout:C.unavailableTimeout||c.unavailableTimeout,wsPath:C.wsPath||c.wsPath,wsPort:C.wsPort||c.wsPort,wssPort:C.wssPort||c.wssPort,enableStats:CC(C),httpHost:bC(C),useTLS:kC(C),wsHost:jC(C),userAuthenticator:PC(C),channelAuthorizer:EC(C,v)};return"disabledTransports"in C&&(k.disabledTransports=C.disabledTransports),"enabledTransports"in C&&(k.enabledTransports=C.enabledTransports),"ignoreNullOrigin"in C&&(k.ignoreNullOrigin=C.ignoreNullOrigin),"timelineParams"in C&&(k.timelineParams=C.timelineParams),"nacl"in C&&(k.nacl=C.nacl),k}function bC(C){return C.httpHost?C.httpHost:C.cluster?`sockjs-${C.cluster}.pusher.com`:c.httpHost}function jC(C){return C.wsHost?C.wsHost:NC(C.cluster)}function NC(C){return`ws-${C}.pusher.com`}function kC(C){return me.getProtocol()==="https:"?!0:C.forceTLS!==!1}function CC(C){return"enableStats"in C?C.enableStats:"disableStats"in C?!C.disableStats:!1}function PC(C){const v=Object.assign(Object.assign({},c.userAuthentication),C.userAuthentication);return"customHandler"in v&&v.customHandler!=null?v.customHandler:yC(v)}function TC(C,v){let k;return"channelAuthorization"in C?k=Object.assign(Object.assign({},c.channelAuthorization),C.channelAuthorization):(k={transport:C.authTransport||c.authTransport,endpoint:C.authEndpoint||c.authEndpoint},"auth"in C&&("params"in C.auth&&(k.params=C.auth.params),"headers"in C.auth&&(k.headers=C.auth.headers)),"authorizer"in C&&(k.customHandler=wC(v,k,C.authorizer))),k}function EC(C,v){const k=TC(C,v);return"customHandler"in k&&k.customHandler!=null?k.customHandler:xC(k)}class LC extends qs{constructor(v){super(function(k,L){Be.debug(`No callbacks on watchlist events for ${k}`)}),this.pusher=v,this.bindWatchlistInternalEvent()}handleEvent(v){v.data.events.forEach(k=>{this.emit(k.name,k)})}bindWatchlistInternalEvent(){this.pusher.connection.bind("message",v=>{var k=v.event;k==="pusher_internal:watchlist_events"&&this.handleEvent(v)})}}function _C(){let C,v;return{promise:new Promise((L,I)=>{C=L,v=I}),resolve:C,reject:v}}var RC=_C;class MC extends qs{constructor(v){super(function(k,L){Be.debug("No callbacks on user for "+k)}),this.signin_requested=!1,this.user_data=null,this.serverToUserChannel=null,this.signinDonePromise=null,this._signinDoneResolve=null,this._onAuthorize=(k,L)=>{if(k){Be.warn(`Error during signin: ${k}`),this._cleanup();return}this.pusher.send_event("pusher:signin",{auth:L.auth,user_data:L.user_data})},this.pusher=v,this.pusher.connection.bind("state_change",({previous:k,current:L})=>{k!=="connected"&&L==="connected"&&this._signin(),k==="connected"&&L!=="connected"&&(this._cleanup(),this._newSigninPromiseIfNeeded())}),this.watchlist=new LC(v),this.pusher.connection.bind("message",k=>{var L=k.event;L==="pusher:signin_success"&&this._onSigninSuccess(k.data),this.serverToUserChannel&&this.serverToUserChannel.name===k.channel&&this.serverToUserChannel.handleEvent(k)})}signin(){this.signin_requested||(this.signin_requested=!0,this._signin())}_signin(){this.signin_requested&&(this._newSigninPromiseIfNeeded(),this.pusher.connection.state==="connected"&&this.pusher.config.userAuthenticator({socketId:this.pusher.connection.socket_id},this._onAuthorize))}_onSigninSuccess(v){try{this.user_data=JSON.parse(v.user_data)}catch{Be.error(`Failed parsing user data after signin: ${v.user_data}`),this._cleanup();return}if(typeof this.user_data.id!="string"||this.user_data.id===""){Be.error(`user_data doesn't contain an id. user_data: ${this.user_data}`),this._cleanup();return}this._signinDoneResolve(),this._subscribeChannels()}_subscribeChannels(){const v=k=>{k.subscriptionPending&&k.subscriptionCancelled?k.reinstateSubscription():!k.subscriptionPending&&this.pusher.connection.state==="connected"&&k.subscribe()};this.serverToUserChannel=new lh(`#server-to-user-${this.user_data.id}`,this.pusher),this.serverToUserChannel.bind_global((k,L)=>{k.indexOf("pusher_internal:")===0||k.indexOf("pusher:")===0||this.emit(k,L)}),v(this.serverToUserChannel)}_cleanup(){this.user_data=null,this.serverToUserChannel&&(this.serverToUserChannel.unbind_all(),this.serverToUserChannel.disconnect(),this.serverToUserChannel=null),this.signin_requested&&this._signinDoneResolve()}_newSigninPromiseIfNeeded(){if(!this.signin_requested||this.signinDonePromise&&!this.signinDonePromise.done)return;const{promise:v,resolve:k}=RC();v.done=!1;const L=()=>{v.done=!0};v.then(L).catch(L),this.signinDonePromise=v,this._signinDoneResolve=k}}class pt{static ready(){pt.isReady=!0;for(var v=0,k=pt.instances.length;v<k;v++)pt.instances[v].connect()}static getClientFeatures(){return he(ie({ws:me.Transports.ws},function(v){return v.isSupported({})}))}constructor(v,k){IC(v),pC(k),this.key=v,this.config=SC(k,this),this.channels=Gs.createChannels(),this.global_emitter=new qs,this.sessionID=me.randomInt(1e9),this.timeline=new uC(this.key,this.sessionID,{cluster:this.config.cluster,features:pt.getClientFeatures(),params:this.config.timelineParams||{},limit:50,level:Qo.INFO,version:c.VERSION}),this.config.enableStats&&(this.timelineSender=Gs.createTimelineSender(this.timeline,{host:this.config.statsHost,path:"/timeline/v2/"+me.TimelineTransport.name}));var L=I=>me.getDefaultStrategy(this.config,I,fC);this.connection=Gs.createConnectionManager(this.key,{getStrategy:L,timeline:this.timeline,activityTimeout:this.config.activityTimeout,pongTimeout:this.config.pongTimeout,unavailableTimeout:this.config.unavailableTimeout,useTLS:!!this.config.useTLS}),this.connection.bind("connected",()=>{this.subscribeAll(),this.timelineSender&&this.timelineSender.send(this.connection.isUsingTLS())}),this.connection.bind("message",I=>{var G=I.event,te=G.indexOf("pusher_internal:")===0;if(I.channel){var oe=this.channel(I.channel);oe&&oe.handleEvent(I)}te||this.global_emitter.emit(I.event,I.data)}),this.connection.bind("connecting",()=>{this.channels.disconnect()}),this.connection.bind("disconnected",()=>{this.channels.disconnect()}),this.connection.bind("error",I=>{Be.warn(I)}),pt.instances.push(this),this.timeline.info({instances:pt.instances.length}),this.user=new MC(this),pt.isReady&&this.connect()}channel(v){return this.channels.find(v)}allChannels(){return this.channels.all()}connect(){if(this.connection.connect(),this.timelineSender&&!this.timelineSenderTimer){var v=this.connection.isUsingTLS(),k=this.timelineSender;this.timelineSenderTimer=new ye(6e4,function(){k.send(v)})}}disconnect(){this.connection.disconnect(),this.timelineSenderTimer&&(this.timelineSenderTimer.ensureAborted(),this.timelineSenderTimer=null)}bind(v,k,L){return this.global_emitter.bind(v,k,L),this}unbind(v,k,L){return this.global_emitter.unbind(v,k,L),this}bind_global(v){return this.global_emitter.bind_global(v),this}unbind_global(v){return this.global_emitter.unbind_global(v),this}unbind_all(v){return this.global_emitter.unbind_all(),this}subscribeAll(){var v;for(v in this.channels.channels)this.channels.channels.hasOwnProperty(v)&&this.subscribe(v)}subscribe(v){var k=this.channels.add(v,this);return k.subscriptionPending&&k.subscriptionCancelled?k.reinstateSubscription():!k.subscriptionPending&&this.connection.state==="connected"&&k.subscribe(),k}unsubscribe(v){var k=this.channels.find(v);k&&k.subscriptionPending?k.cancelSubscription():(k=this.channels.remove(v),k&&k.subscribed&&k.unsubscribe())}send_event(v,k,L){return this.connection.send_event(v,k,L)}shouldUseTLS(){return this.config.useTLS}signin(){this.user.signin()}}pt.instances=[],pt.isReady=!1,pt.logToConsole=!1,pt.Runtime=me,pt.ScriptReceivers=me.ScriptReceivers,pt.DependenciesReceivers=me.DependenciesReceivers,pt.auth_callbacks=me.auth_callbacks;var ph=n.default=pt;function IC(C){if(C==null)throw"You must pass your app key when you instantiate Pusher."}me.setup(pt)}])})})(qj);var KO=qj.exports;const XO=iw(KO);class JO{constructor(){this.baseURL="http://localhost:5001/api",this.pusher=null,this.channel=null,this.listeners=new Set,this.isConnected=!1,this.reconnectAttempts=0,this.maxReconnectAttempts=5,this.reconnectDelay=1e3}async initializePusher(e){try{const s="478146ed5eddba9a37cb";this.pusher&&this.disconnectPusher(),this.pusher=new XO(s,{cluster:"ap2",encrypted:!0,authEndpoint:`${this.baseURL}/pusher/auth`,auth:{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}}}),this.channel=this.pusher.subscribe(`user-${e}`),this.setupEventListeners(),this.pusher.connection.bind("connected",()=>{console.log("✅ Pusher connected for notifications"),this.isConnected=!0,this.reconnectAttempts=0,this.notifyListeners("connection",{status:"connected"})}),this.pusher.connection.bind("disconnected",()=>{console.log("❌ Pusher disconnected"),this.isConnected=!1,this.notifyListeners("connection",{status:"disconnected"}),this.handleReconnection(e)}),this.pusher.connection.bind("error",n=>{console.error("❌ Pusher connection error:",n),this.notifyListeners("connection",{status:"error",error:n})})}catch(s){throw console.error("Failed to initialize Pusher:",s),s}}setupEventListeners(){this.channel&&(this.channel.bind("notification",e=>{console.log("📢 New notification received:",e),this.notifyListeners("notification",e)}),this.channel.bind("notification-update",e=>{console.log("📝 Notification updated:",e),this.notifyListeners("notification-update",e)}),this.channel.bind("notifications-read-all",e=>{console.log("📝 All notifications marked as read:",e),this.notifyListeners("notifications-read-all",e)}))}async handleReconnection(e){if(this.reconnectAttempts>=this.maxReconnectAttempts){console.error("Max reconnection attempts reached");return}this.reconnectAttempts++;const s=this.reconnectDelay*Math.pow(2,this.reconnectAttempts-1);console.log(`Attempting to reconnect in ${s}ms (attempt ${this.reconnectAttempts})`),setTimeout(()=>{this.initializePusher(e)},s)}disconnectPusher(){this.channel&&(this.channel.unbind_all(),this.pusher.unsubscribe(this.channel.name)),this.pusher&&this.pusher.disconnect(),this.pusher=null,this.channel=null,this.isConnected=!1}addEventListener(e){return this.listeners.add(e),()=>this.listeners.delete(e)}notifyListeners(e,s){this.listeners.forEach(n=>{try{n(e,s)}catch(i){console.error("Error in notification listener:",i)}})}getAuthHeaders(){return{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}}async getNotifications(e=1,s=10,n="-createdAt"){try{return(await ke.get(`${this.baseURL}/notifications`,{params:{page:e,limit:s,sort:n},headers:this.getAuthHeaders()})).data}catch(i){throw console.error("Failed to fetch notifications:",i),this.handleError(i)}}async getUnreadCount(){try{return(await ke.get(`${this.baseURL}/notifications/unread-count`,{headers:this.getAuthHeaders()})).data}catch(e){throw console.error("Failed to fetch unread count:",e),this.handleError(e)}}async markAsRead(e){try{return(await ke.put(`${this.baseURL}/notifications/${e}/read`,{},{headers:this.getAuthHeaders()})).data}catch(s){throw console.error("Failed to mark notification as read:",s),this.handleError(s)}}async markAllAsRead(){try{return(await ke.put(`${this.baseURL}/notifications/read-all`,{},{headers:this.getAuthHeaders()})).data}catch(e){throw console.error("Failed to mark all notifications as read:",e),this.handleError(e)}}async deleteNotification(e){try{return(await ke.delete(`${this.baseURL}/notifications/${e}`,{headers:this.getAuthHeaders()})).data}catch(s){throw console.error("Failed to delete notification:",s),this.handleError(s)}}async createNotification(e){try{return(await ke.post(`${this.baseURL}/notifications`,e,{headers:this.getAuthHeaders()})).data}catch(s){throw console.error("Failed to create notification:",s),this.handleError(s)}}handleError(e){var s;return e.response?{message:((s=e.response.data)==null?void 0:s.message)||"Server error occurred",status:e.response.status,data:e.response.data}:e.request?{message:"Network error - please check your connection",status:0,data:null}:{message:e.message||"An unexpected error occurred",status:-1,data:null}}getConnectionStatus(){var e,s;return{isConnected:this.isConnected,reconnectAttempts:this.reconnectAttempts,pusherState:((s=(e=this.pusher)==null?void 0:e.connection)==null?void 0:s.state)||"disconnected"}}}const Qs=new JO,Gj=b.createContext(),ZO=({children:t})=>{const[e,s]=b.useState(null),[n,i]=b.useState(!1),[a,o]=b.useState(!0);b.useEffect(()=>{const p=localStorage.getItem("token"),w=localStorage.getItem("user");if(p&&w)try{const g=JSON.parse(w);s(g),i(!0)}catch(g){console.error("Error parsing user data:",g),localStorage.removeItem("token"),localStorage.removeItem("user")}o(!1)},[]);const y={user:e,isAuthenticated:n,loading:a,login:(p,w)=>{localStorage.setItem("token",w),localStorage.setItem("user",JSON.stringify(p)),s(p),i(!0)},logout:()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),s(null),i(!1)},updateProfile:p=>{const w={...e,...p};localStorage.setItem("user",JSON.stringify(w)),s(w)},getToken:()=>localStorage.getItem("token"),hasRole:p=>(e==null?void 0:e.role)===p,isAdmin:()=>(e==null?void 0:e.role)==="admin",userName:(e==null?void 0:e.name)||"Guest",userEmail:(e==null?void 0:e.email)||"",userAvatar:(e==null?void 0:e.avatar)||"/default-avatar.png"};return r.jsx(Gj.Provider,{value:y,children:t})},tr=()=>{const t=b.useContext(Gj);if(t===void 0)throw new Error("useAuth must be used within an AuthProvider");return t},e3={notifications:[],unreadCount:0,loading:!1,error:null,connectionStatus:"disconnected",filters:{type:"all",read:"all",dateRange:"all"},pagination:{page:1,limit:10,total:0,hasMore:!1}},Se={SET_LOADING:"SET_LOADING",SET_ERROR:"SET_ERROR",SET_NOTIFICATIONS:"SET_NOTIFICATIONS",ADD_NOTIFICATION:"ADD_NOTIFICATION",UPDATE_NOTIFICATION:"UPDATE_NOTIFICATION",REMOVE_NOTIFICATION:"REMOVE_NOTIFICATION",SET_UNREAD_COUNT:"SET_UNREAD_COUNT",MARK_AS_READ:"MARK_AS_READ",MARK_ALL_AS_READ:"MARK_ALL_AS_READ",SET_CONNECTION_STATUS:"SET_CONNECTION_STATUS",SET_FILTERS:"SET_FILTERS",SET_PAGINATION:"SET_PAGINATION",CLEAR_ALL:"CLEAR_ALL"};function t3(t,e){switch(e.type){case Se.SET_LOADING:return{...t,loading:e.payload};case Se.SET_ERROR:return{...t,error:e.payload,loading:!1};case Se.SET_NOTIFICATIONS:return{...t,notifications:e.payload.notifications||[],pagination:{...t.pagination,...e.payload.pagination},loading:!1,error:null};case Se.ADD_NOTIFICATION:return{...t,notifications:[e.payload,...t.notifications],unreadCount:t.unreadCount+(e.payload.read?0:1)};case Se.UPDATE_NOTIFICATION:return{...t,notifications:t.notifications.map(n=>n.id===e.payload.id?{...n,...e.payload}:n)};case Se.REMOVE_NOTIFICATION:const s=t.notifications.find(n=>n.id===e.payload);return{...t,notifications:t.notifications.filter(n=>n.id!==e.payload),unreadCount:s&&!s.read?t.unreadCount-1:t.unreadCount};case Se.SET_UNREAD_COUNT:return{...t,unreadCount:e.payload};case Se.MARK_AS_READ:return{...t,notifications:t.notifications.map(n=>n.id===e.payload?{...n,read:!0,readAt:new Date().toISOString()}:n),unreadCount:Math.max(0,t.unreadCount-1)};case Se.MARK_ALL_AS_READ:return{...t,notifications:t.notifications.map(n=>({...n,read:!0,readAt:new Date().toISOString()})),unreadCount:0};case Se.SET_CONNECTION_STATUS:return{...t,connectionStatus:e.payload};case Se.SET_FILTERS:return{...t,filters:{...t.filters,...e.payload},pagination:{...t.pagination,page:1}};case Se.SET_PAGINATION:return{...t,pagination:{...t.pagination,...e.payload}};case Se.CLEAR_ALL:return{...t,notifications:[],unreadCount:0};default:return t}}const Qj=b.createContext(),s3=({children:t})=>{const[e,s]=b.useReducer(t3,e3),{user:n,isAuthenticated:i}=tr();b.useEffect(()=>(i&&(n!=null&&n.id)?a():c(),()=>c()),[i,n==null?void 0:n.id]);const a=b.useCallback(async()=>{try{s({type:Se.SET_LOADING,payload:!0});try{await Qs.initializePusher(n.id);const m=Qs.addEventListener(o);s({type:Se.SET_CONNECTION_STATUS,payload:"connected"})}catch(m){console.warn("Pusher initialization failed, using polling mode:",m.message),s({type:Se.SET_CONNECTION_STATUS,payload:"polling"})}await u(),await h(),s({type:Se.SET_LOADING,payload:!1})}catch(m){console.error("Failed to initialize notifications:",m),s({type:Se.SET_ERROR,payload:m.message}),s({type:Se.SET_LOADING,payload:!1})}},[n==null?void 0:n.id]),o=b.useCallback((m,x)=>{switch(m){case"notification":s({type:Se.ADD_NOTIFICATION,payload:x}),l(x);break;case"notification-update":s({type:Se.UPDATE_NOTIFICATION,payload:x});break;case"notifications-read-all":s({type:Se.MARK_ALL_AS_READ});break;case"connection":s({type:Se.SET_CONNECTION_STATUS,payload:x.status});break;default:console.log("Unknown notification event:",m,x)}},[]),l=b.useCallback(m=>{const x={position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0};switch(m.type){case"success":X.success(m.message,x);break;case"error":X.error(m.message,x);break;case"warning":X.warning(m.message,x);break;case"info":case"alert":default:X.info(m.message,x);break}},[]),c=b.useCallback(()=>{Qs.disconnectPusher(),s({type:Se.CLEAR_ALL}),s({type:Se.SET_CONNECTION_STATUS,payload:"disconnected"})},[]),u=b.useCallback(async(m=1)=>{try{s({type:Se.SET_LOADING,payload:!0});const x=await Qs.getNotifications(m,e.pagination.limit,"-createdAt");x.success&&s({type:Se.SET_NOTIFICATIONS,payload:{notifications:m===1?x.data:[...e.notifications,...x.data],pagination:{page:x.pagination.page,total:x.pagination.total,hasMore:x.pagination.hasMore}}})}catch(x){s({type:Se.SET_ERROR,payload:x.message})}},[e.pagination.limit,e.notifications]),h=b.useCallback(async()=>{try{const m=await Qs.getUnreadCount();m.success&&s({type:Se.SET_UNREAD_COUNT,payload:m.count})}catch(m){console.error("Failed to fetch unread count:",m)}},[]),d=b.useCallback(async m=>{try{await Qs.markAsRead(m),s({type:Se.MARK_AS_READ,payload:m})}catch(x){console.error("Failed to mark notification as read:",x),s({type:Se.SET_ERROR,payload:x.message})}},[]),f=b.useCallback(async()=>{try{await Qs.markAllAsRead(),s({type:Se.MARK_ALL_AS_READ})}catch(m){console.error("Failed to mark all notifications as read:",m),s({type:Se.SET_ERROR,payload:m.message})}},[]),y=b.useCallback(async m=>{try{await Qs.deleteNotification(m),s({type:Se.REMOVE_NOTIFICATION,payload:m})}catch(x){console.error("Failed to delete notification:",x),s({type:Se.SET_ERROR,payload:x.message})}},[]),p=b.useCallback(m=>{s({type:Se.SET_FILTERS,payload:m})},[]),w=b.useCallback(()=>{e.pagination.hasMore&&!e.loading&&u(e.pagination.page+1)},[e.pagination.hasMore,e.loading,e.pagination.page,u]),g={...e,fetchNotifications:u,markAsRead:d,markAllAsRead:f,deleteNotification:y,setFilters:p,loadMore:w,connectionStatus:Qs.getConnectionStatus()};return r.jsx(Qj.Provider,{value:g,children:t})},Wu=()=>{const t=b.useContext(Qj);if(!t)throw new Error("useNotifications must be used within a NotificationProvider");return t},Kj=({notification:t,onClick:e,onDelete:s,onMarkAsRead:n,compact:i=!1,showActions:a=!0})=>{const[o,l]=b.useState(!1),c=y=>{const p={size:i?16:20};switch(y){case"success":return r.jsx(Os,{...p,className:"icon-success"});case"error":return r.jsx(fn,{...p,className:"icon-error"});case"warning":return r.jsx(Kn,{...p,className:"icon-warning"});case"alert":return r.jsx(It,{...p,className:"icon-alert"});case"info":default:return r.jsx(Mu,{...p,className:"icon-info"})}},u=y=>{const p=new Date(y),g=Math.floor((new Date-p)/(1e3*60));return g<1?"Just now":g<60?`${g}m ago`:g<1440?`${Math.floor(g/60)}h ago`:`${Math.floor(g/1440)}d ago`},h=()=>{e&&e(t)},d=y=>{y.stopPropagation(),s&&s(y)},f=y=>{y.stopPropagation(),n&&n(t.id)};return r.jsxs(U.div,{className:`notification-item ${i?"compact":""} ${t.read?"read":"unread"} ${t.type}`,onClick:h,onHoverStart:()=>l(!0),onHoverEnd:()=>l(!1),whileHover:{backgroundColor:"var(--notification-hover-bg)"},layout:!0,children:[!t.read&&r.jsx("div",{className:"unread-indicator"}),r.jsxs("div",{className:"notification-content",children:[r.jsx("div",{className:"notification-icon",children:c(t.type)}),r.jsxs("div",{className:"notification-text",children:[r.jsx("div",{className:"notification-title",children:t.title}),t.message&&r.jsx("div",{className:"notification-message",children:t.message}),r.jsxs("div",{className:"notification-meta",children:[r.jsxs("span",{className:"notification-time",children:[r.jsx(Dt,{size:12}),u(t.createdAt)]}),t.link&&r.jsxs("span",{className:"notification-link",children:[r.jsx(_u,{size:12}),"View details"]})]})]}),a&&r.jsxs("div",{className:`notification-actions ${o?"visible":""}`,children:[!t.read&&n&&r.jsx(U.button,{className:"action-btn mark-read",onClick:f,whileHover:{scale:1.1},whileTap:{scale:.9},title:"Mark as read",children:r.jsx(Os,{size:14})}),s&&r.jsx(U.button,{className:"action-btn delete",onClick:d,whileHover:{scale:1.1},whileTap:{scale:.9},title:"Delete notification",children:r.jsx(Bt,{size:14})})]})]})]})},n3=({notifications:t=[],unreadCount:e=0,loading:s=!1,onMarkAllAsRead:n,onClose:i})=>{const{markAsRead:a,deleteNotification:o}=Wu(),l=t.slice(0,5),c=async h=>{h.read||await a(h.id),h.link&&(window.location.href=h.link)},u=async(h,d)=>{d.stopPropagation();try{await o(h)}catch(f){console.error("Failed to delete notification:",f)}};return r.jsxs("div",{className:"notification-dropdown",children:[r.jsxs("div",{className:"dropdown-header",children:[r.jsxs("div",{className:"header-content",children:[r.jsx("h3",{className:"dropdown-title",children:"Notifications"}),e>0&&r.jsxs("span",{className:"unread-count",children:[e," new"]})]}),r.jsxs("div",{className:"header-actions",children:[e>0&&r.jsx(U.button,{className:"mark-all-read-btn",onClick:n,whileHover:{scale:1.05},whileTap:{scale:.95},title:"Mark all as read",children:r.jsx(Hr,{size:16})}),r.jsx(Re,{to:"/settings",className:"settings-btn",title:"Notification settings",children:r.jsx(qr,{size:16})})]})]}),r.jsx("div",{className:"dropdown-content",children:s?r.jsxs("div",{className:"dropdown-loading",children:[r.jsx("div",{className:"loading-spinner"}),r.jsx("span",{children:"Loading notifications..."})]}):l.length>0?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"notification-list",children:l.map((h,d)=>r.jsx(U.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:d*.05},children:r.jsx(Kj,{notification:h,onClick:()=>c(h),onDelete:f=>u(h.id,f),compact:!0})},h.id))}),r.jsx("div",{className:"dropdown-footer",children:r.jsxs(Re,{to:"/notifications",className:"view-all-btn",onClick:i,children:["View all notifications",r.jsx(_u,{size:14})]})})]}):r.jsxs("div",{className:"empty-state",children:[r.jsx("div",{className:"empty-icon",children:r.jsx(Hr,{size:32})}),r.jsx("h4",{children:"All caught up!"}),r.jsx("p",{children:"You have no new notifications"})]})})]})},i3=({className:t="",position:e="bottom-right"})=>{const[s,n]=b.useState(!1),[i,a]=b.useState(!1),o=b.useRef(null),l=b.useRef(null),{unreadCount:c,notifications:u,loading:h,markAllAsRead:d,connectionStatus:f}=Wu();b.useEffect(()=>{const g=m=>{o.current&&!o.current.contains(m.target)&&l.current&&!l.current.contains(m.target)&&n(!1)};return document.addEventListener("mousedown",g),()=>document.removeEventListener("mousedown",g)},[]),b.useEffect(()=>{c>0&&!i&&(a(!0),setTimeout(()=>a(!1),1e3))},[c,i]);const y=()=>{n(!s)},p=async()=>{try{await d()}catch(g){console.error("Failed to mark all as read:",g)}},w=()=>{switch(f){case"connected":return"connected";case"connecting":return"connecting";case"disconnected":return"disconnected";default:return"unknown"}};return r.jsxs("div",{className:`notification-bell-container ${t}`,ref:o,children:[r.jsxs(U.button,{className:`notification-bell ${i?"animate":""} ${s?"active":""}`,onClick:y,whileHover:{scale:1.05},whileTap:{scale:.95},"aria-label":`Notifications ${c>0?`(${c} unread)`:""}`,children:[r.jsx(U.div,{className:"bell-icon",animate:i?{rotate:[0,-10,10,-10,10,0],transition:{duration:.6,ease:"easeInOut"}}:{},children:r.jsx(Li,{size:20})}),r.jsx(Xe,{children:c>0&&r.jsx(U.div,{className:"notification-badge",initial:{scale:0,opacity:0},animate:{scale:1,opacity:1},exit:{scale:0,opacity:0},transition:{type:"spring",stiffness:500,damping:30},children:c>99?"99+":c})}),r.jsx("div",{className:`connection-indicator ${w()}`})]}),r.jsx(Xe,{children:s&&r.jsx(U.div,{ref:l,className:`notification-dropdown-wrapper ${e}`,initial:{opacity:0,scale:.95,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-10},transition:{duration:.2,ease:"easeOut"},children:r.jsx(n3,{notifications:u,unreadCount:c,loading:h,onMarkAllAsRead:p,onClose:()=>n(!1)})})})]})},sr=({icon:t,title:e,subtitle:s,actions:n=[],borderColor:i="primary",showNotifications:a=!0,className:o=""})=>{const l=c=>{switch(c){case"primary":return"border-primary";case"success":return"border-success";case"warning":return"border-warning";case"info":return"border-info";case"purple":return"border-purple";case"orange":return"border-orange";default:return"border-primary"}};return r.jsx(U.div,{className:`page-header ${l(i)} ${o}`,initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},children:r.jsxs("div",{className:"header-content",children:[r.jsx("div",{className:"header-left",children:r.jsxs("div",{className:"header-title-section",children:[t&&r.jsx("div",{className:"header-icon",children:r.jsx(t,{size:24})}),r.jsxs("div",{className:"header-text",children:[r.jsx("h1",{className:"header-title",children:e}),s&&r.jsx("p",{className:"header-subtitle",children:s})]})]})}),r.jsx("div",{className:"header-right",children:r.jsxs("div",{className:"header-actions",children:[n.map((c,u)=>r.jsxs(U.button,{className:`header-action-btn ${c.variant||"secondary"}`,onClick:c.onClick,disabled:c.disabled,whileHover:{scale:1.02},whileTap:{scale:.98},title:c.tooltip,children:[c.icon&&r.jsx(c.icon,{size:16}),r.jsx("span",{children:c.label})]},u)),a&&r.jsx("div",{className:"header-notifications",children:r.jsx(i3,{position:"bottom-right"})})]})})]})})},Me=(t,e=!1)=>{if(t==null||isNaN(t))return"₹0.00";const s=Number(t);if(e){if(s>=1e7)return`₹${(s/1e7).toFixed(2)}Cr`;if(s>=1e5)return`₹${(s/1e5).toFixed(2)}L`;if(s>=1e3)return`₹${(s/1e3).toFixed(2)}K`}return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2,maximumFractionDigits:2}).format(s)},wm=(t,e=!1)=>{if(t==null||isNaN(t))return"0";const s=Number(t);if(e){if(s>=1e7)return`${(s/1e7).toFixed(2)}Cr`;if(s>=1e5)return`${(s/1e5).toFixed(2)}L`;if(s>=1e3)return`${(s/1e3).toFixed(2)}K`}return new Intl.NumberFormat("en-IN",{minimumFractionDigits:0,maximumFractionDigits:2}).format(s)},md=(t,e="short")=>{if(!t)return"";const s=new Date(t);if(isNaN(s.getTime()))return"";const n={short:{day:"2-digit",month:"2-digit",year:"numeric"},long:{day:"numeric",month:"long",year:"numeric"},time:{hour:"2-digit",minute:"2-digit",hour12:!0},datetime:{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!0}};return new Intl.DateTimeFormat("en-IN",n[e]).format(s)},Xj=()=>{const{user:t}=tr(),[e,s]=b.useState([]),[n,i]=b.useState(!1),[a,o]=b.useState(null),l=b.useCallback(async()=>{if(t!=null&&t.id)try{i(!0),o(null);const m=`watchlists_${t.id}`,x=localStorage.getItem(m);if(x){const S=JSON.parse(x);s(S)}else{const S={_id:"default",name:"My Watchlist",stocks:[],isDefault:!0,createdAt:new Date().toISOString()};s([S]),localStorage.setItem(m,JSON.stringify([S]))}}catch(m){console.error("Error fetching watchlists:",m),o(m.message);const x={_id:"default",name:"My Watchlist",stocks:[],isDefault:!0,createdAt:new Date().toISOString()};s([x])}finally{i(!1)}},[t==null?void 0:t.id]);b.useEffect(()=>{l()},[l]);const c=b.useCallback(m=>e.some(x=>x.stocks.some(S=>S.symbol===m||S.stockSymbol===m)),[e]),u=b.useCallback(m=>e.find(x=>x.stocks.some(S=>S.symbol===m||S.stockSymbol===m)),[e]),h=b.useCallback(async(m,x=null)=>{var S,N;if(!(t!=null&&t.id))return X.error("Please login to add stocks to watchlist"),{success:!1,message:"User not authenticated"};try{i(!0);const j=x||((S=e.find(_=>_.isDefault))==null?void 0:S._id)||((N=e[0])==null?void 0:N._id);if(!j){const _={_id:"default",name:"My Watchlist",stocks:[],isDefault:!0,createdAt:new Date().toISOString()},O=[...e,_];s(O);const A=`watchlists_${t.id}`;return localStorage.setItem(A,JSON.stringify(O)),h(m,_._id)}const P=e.find(_=>_._id===j);if(P==null?void 0:P.stocks.some(_=>_.symbol===(m.symbol||m.stockSymbol)))return X.info(`${m.symbol||m.stockSymbol} is already in your watchlist`),{success:!1,message:"Stock already in watchlist"};const T={symbol:m.symbol||m.stockSymbol,name:m.name||m.companyName||`${m.symbol} Corporation`,price:m.price||m.currentPrice||0,change:m.change||m.priceChange||0,changePercent:m.changePercent||m.changePercentage||0,volume:m.volume||0,marketCap:m.marketCap||0,sector:m.sector||"Unknown",addedAt:new Date().toISOString()},R=e.map(_=>_._id===j?{..._,stocks:[..._.stocks,T]}:_);s(R);const M=`watchlists_${t.id}`;return localStorage.setItem(M,JSON.stringify(R)),X.success(`${T.symbol} added to watchlist!`),{success:!0,data:R.find(_=>_._id===j)}}catch(j){return console.error("Error adding to watchlist:",j),X.error(j.message||"Failed to add stock to watchlist"),{success:!1,message:j.message}}finally{i(!1)}},[t==null?void 0:t.id,e]),d=b.useCallback(async(m,x=null)=>{if(!(t!=null&&t.id))return X.error("Please login to manage watchlist"),{success:!1,message:"User not authenticated"};try{i(!0);const S=x?e.find(P=>P._id===x):u(m);if(!S)return X.error("Stock not found in any watchlist"),{success:!1,message:"Stock not found in watchlist"};const N=e.map(P=>P._id===S._id?{...P,stocks:P.stocks.filter(E=>E.symbol!==m&&E.stockSymbol!==m)}:P);s(N);const j=`watchlists_${t.id}`;return localStorage.setItem(j,JSON.stringify(N)),X.success(`${m} removed from watchlist!`),{success:!0}}catch(S){return console.error("Error removing from watchlist:",S),X.error(S.message||"Failed to remove stock from watchlist"),{success:!1,message:S.message}}finally{i(!1)}},[t==null?void 0:t.id,e,u]),f=b.useCallback(async m=>{const x=m.symbol||m.stockSymbol;return c(x)?await d(x):await h(m)},[c,h,d]),y=b.useCallback(async(m,x="")=>{if(!(t!=null&&t.id))return X.error("Please login to create watchlist"),{success:!1,message:"User not authenticated"};try{i(!0);const S={_id:`watchlist_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,name:m,description:x,stocks:[],isDefault:e.length===0,createdAt:new Date().toISOString()},N=[...e,S];s(N);const j=`watchlists_${t.id}`;return localStorage.setItem(j,JSON.stringify(N)),X.success(`Watchlist "${m}" created successfully!`),{success:!0,data:S}}catch(S){return console.error("Error creating watchlist:",S),X.error(S.message||"Failed to create watchlist"),{success:!1,message:S.message}}finally{i(!1)}},[t==null?void 0:t.id,e]),p=b.useCallback(async m=>{if(!(t!=null&&t.id))return X.error("Please login to delete watchlist"),{success:!1,message:"User not authenticated"};try{i(!0);const x=e.filter(N=>N._id!==m);s(x);const S=`watchlists_${t.id}`;return localStorage.setItem(S,JSON.stringify(x)),X.success("Watchlist deleted successfully!"),{success:!0}}catch(x){return console.error("Error deleting watchlist:",x),X.error(x.message||"Failed to delete watchlist"),{success:!1,message:x.message}}finally{i(!1)}},[t==null?void 0:t.id,e]),w=b.useCallback(()=>e.reduce((m,x)=>m+x.stocks.length,0),[e]),g=b.useCallback(()=>e.find(m=>m.isDefault)||e[0]||null,[e]);return{watchlists:e,loading:n,error:a,isInWatchlist:c,getWatchlistWithStock:u,addToWatchlist:h,removeFromWatchlist:d,toggleWatchlist:f,createWatchlist:y,deleteWatchlist:p,fetchWatchlists:l,getTotalStockCount:w,getDefaultWatchlist:g}},Jn=({stockData:t,size:e="medium",variant:s="icon",showText:n=!1,className:i="",onSuccess:a,onError:o})=>{const{isInWatchlist:l,toggleWatchlist:c,addToWatchlist:u,removeFromWatchlist:h,watchlists:d,loading:f}=Xj(),[y,p]=b.useState(!1),[w,g]=b.useState(!1),[m,x]=b.useState(!1);if(!t)return null;const S=t.symbol||t.stockSymbol,N=l(S),j=async T=>{if(T.stopPropagation(),!(w||f)){g(!0);try{const R=await c(t);R.success?(a&&a(R,N?"removed":"added"),navigator.vibrate&&navigator.vibrate(50),x(!0),setTimeout(()=>x(!1),600)):o&&o(R.message)}catch(R){console.error("Error toggling watchlist:",R),o&&o("Failed to update watchlist")}finally{g(!1)}}},P=async T=>{if(!(w||f)){g(!0),p(!1);try{const R=await u(t,T);R.success&&a?a(R,"added"):!R.success&&o&&o(R.message)}catch(R){console.error("Error adding to watchlist:",R),o&&o("Failed to add to watchlist")}finally{g(!1)}}},E=async()=>{if(!(w||f)){g(!0),p(!1);try{const T=await h(S);T.success&&a?a(T,"removed"):!T.success&&o&&o(T.message)}catch(T){console.error("Error removing from watchlist:",T),o&&o("Failed to remove from watchlist")}finally{g(!1)}}};return s==="simple"?r.jsxs("button",{className:`watchlist-btn watchlist-btn-${e} ${N?"active":""} ${w?"processing":""} ${m?"success":""} ${i}`,onClick:j,disabled:w||f,title:N?"Remove from watchlist":"Add to watchlist",children:[w?r.jsx(Kl,{className:"animate-spin"}):N?r.jsx(Hr,{}):r.jsx(Gr,{}),n&&r.jsx("span",{className:"btn-text",children:N?"In Watchlist":"Add to Watchlist"})]}):s==="dropdown"?r.jsxs("div",{className:`watchlist-dropdown-container ${i}`,children:[r.jsxs("button",{className:`watchlist-btn watchlist-btn-${e} ${N?"active":""}`,onClick:T=>{T.stopPropagation(),p(!y)},disabled:w||f,title:"Manage watchlist",children:[w?r.jsx(Kl,{className:"animate-spin"}):r.jsx(cj,{}),n&&r.jsx("span",{className:"btn-text",children:"Watchlist"})]}),r.jsx(Xe,{children:y&&r.jsxs(U.div,{className:"watchlist-dropdown",initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.2},children:[r.jsxs("div",{className:"dropdown-header",children:[r.jsx("span",{children:"Add to Watchlist"}),r.jsx("button",{className:"close-btn",onClick:()=>p(!1),children:r.jsx(Bt,{})})]}),r.jsxs("div",{className:"dropdown-content",children:[N&&r.jsxs("button",{className:"dropdown-item remove-item",onClick:E,disabled:w,children:[r.jsx(Bt,{}),r.jsx("span",{children:"Remove from Watchlist"})]}),d.map(T=>{const R=T.stocks.some(M=>M.symbol===S||M.stockSymbol===S);return r.jsxs("button",{className:`dropdown-item ${R?"has-stock":""}`,onClick:()=>P(T._id),disabled:w||R,children:[R?r.jsx(Hr,{}):r.jsx(Mn,{}),r.jsx("span",{children:T.name}),T.isDefault&&r.jsx("span",{className:"default-badge",children:"Default"})]},T._id)}),d.length===0&&r.jsx("div",{className:"dropdown-empty",children:r.jsx("span",{children:"No watchlists found"})})]})]})}),y&&r.jsx("div",{className:"watchlist-dropdown-backdrop",onClick:()=>p(!1)})]}):r.jsxs("button",{className:`watchlist-btn watchlist-btn-${e} ${N?"active":""} ${w?"processing":""} ${m?"success":""} ${i}`,onClick:j,disabled:w||f,title:N?"Remove from watchlist":"Add to watchlist",children:[r.jsx(U.div,{initial:{scale:.5,opacity:0,rotate:-180},animate:{scale:1,opacity:1,rotate:0,y:m?[-2,0]:0},transition:{duration:.4,type:"spring",stiffness:300,damping:20},children:w?r.jsx(U.div,{animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"},children:r.jsx(Kl,{})}):r.jsx(U.div,{animate:{scale:m?[1,1.3,1]:1,rotate:N?[0,15,-15,0]:0},transition:{duration:.3},children:r.jsx(Gr,{className:N?"filled":""})})},N?"filled":"empty"),n&&r.jsx("span",{className:"btn-text",children:N?"In Watchlist":"Add to Watchlist"})]})},Hu=({stockData:t,isOpen:e,onClose:s,showQuantityControls:n=!0,defaultQuantity:i=1,onSuccess:a,compact:o=!1})=>{var R;const l=Lt(),{portfolioData:c,buyStock:u,isLoading:h}=hs(),[d,f]=b.useState(i),[y,p]=b.useState(!1),[w,g]=b.useState(0),[m,x]=b.useState(!1);b.useEffect(()=>{e&&(f(i),g(0),x(!1))},[e,i]);const S=(t==null?void 0:t.price)||0,N=d*S,j=c.availableCash>=N,P=M=>{if(!j||m)return;M.preventDefault(),M.stopPropagation();const _=M.currentTarget.closest(".slide-to-buy");if(!_)return;const O=_.getBoundingClientRect(),A=52,B=O.width-A-8;let H=!0;const F=D=>{if(!H)return;D.preventDefault();const $=(D.touches?D.touches[0].clientX:D.clientX)-O.left-A/2,Q=Math.min(Math.max($/B*100,0),100);g(Q)},K=async()=>{H=!1,w>80?(g(100),await E()):g(0),document.removeEventListener("mousemove",F,{passive:!1}),document.removeEventListener("mouseup",K),document.removeEventListener("touchmove",F,{passive:!1}),document.removeEventListener("touchend",K)};document.addEventListener("mousemove",F,{passive:!1}),document.addEventListener("mouseup",K),document.addEventListener("touchmove",F,{passive:!1}),document.addEventListener("touchend",K)},E=async()=>{if(!(!t||!d||m)){x(!0);try{const M=await u(t.symbol,d,t.price,t);M.success?(X.success(`Successfully bought ${d} shares of ${t.symbol}!`),g(100),a&&a(M),setTimeout(()=>{s(),g(0),l("/portfolio",{state:{purchasedStock:{symbol:t.symbol,name:t.name,quantity:d,price:t.price,totalCost:d*t.price},showPurchaseSuccess:!0}})},1500)):(X.error(M.message||"Failed to buy stock"),g(0))}catch(M){console.error("Error buying stock:",M),X.error("Failed to buy stock"),g(0)}finally{x(!1)}}},T=async()=>{!j||m||await E()};return!e||!t?null:r.jsx(U.div,{className:"slide-to-buy-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:s,children:r.jsxs(U.div,{className:`slide-to-buy-modal ${o?"compact":""}`,initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:M=>M.stopPropagation(),children:[r.jsxs("div",{className:"modal-header",children:[r.jsxs("div",{className:"stock-info",children:[r.jsx("h3",{children:t.symbol}),r.jsx("p",{children:t.name})]}),r.jsxs("div",{className:"header-actions",children:[r.jsx(Jn,{stockData:t,size:"medium",variant:"simple",showText:!1}),r.jsx("button",{onClick:s,className:"close-btn",children:r.jsx(Bt,{})})]})]}),r.jsx("div",{className:"stock-price-section",children:r.jsxs("div",{className:"current-price",children:[r.jsx("span",{className:"price-value",children:Me(t.price)}),r.jsxs("div",{className:`price-change ${t.change>=0?"positive":"negative"}`,children:[t.change>=0?"+":"",Me(t.change),"(",((R=t.changePercent)==null?void 0:R.toFixed(2))||"0.00","%)"]})]})}),n&&r.jsxs("div",{className:"quantity-section",children:[r.jsx("label",{children:"Quantity"}),r.jsxs("div",{className:"quantity-controls",children:[r.jsx("button",{onClick:()=>f(Math.max(1,d-1)),className:"quantity-btn",disabled:m,children:r.jsx(Ou,{})}),r.jsx("input",{type:"number",value:d,onChange:M=>f(Math.max(1,parseInt(M.target.value)||1)),className:"quantity-input",min:"1",disabled:m}),r.jsx("button",{onClick:()=>f(d+1),className:"quantity-btn",disabled:m,children:r.jsx(Mn,{})})]})]}),r.jsxs("div",{className:"order-summary",children:[r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Price per share"}),r.jsx("span",{children:Me(S)})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Quantity"}),r.jsxs("span",{children:[d," shares"]})]}),r.jsxs("div",{className:"summary-row total",children:[r.jsx("span",{children:"Total Cost"}),r.jsx("span",{children:Me(N)})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Available Cash"}),r.jsx("span",{className:j?"positive":"negative",children:Me(c.availableCash)})]})]}),!j&&r.jsxs("div",{className:"insufficient-funds-warning",children:[r.jsx(It,{}),r.jsx("span",{children:"Insufficient funds to complete this purchase"})]}),r.jsxs("div",{className:"action-buttons",children:[r.jsxs("button",{onClick:T,disabled:!j||m,className:`quick-buy-btn ${j?"":"disabled"}`,children:[r.jsx(Tt,{}),m?"Processing...":"Quick Buy"]}),r.jsx("div",{className:"slide-to-buy-container",children:r.jsxs("div",{className:`slide-to-buy ${j?"":"disabled"} ${m?"processing":""}`,children:[r.jsx("div",{className:"slide-track",style:{background:`linear-gradient(to right, #10B981 ${w}%, #E5E7EB ${w}%)`},children:r.jsx(U.div,{className:"slide-button",style:{left:`${Math.min(w,85)}%`},onMouseDown:j?P:void 0,onTouchStart:j?P:void 0,whileHover:j?{scale:1.05}:{},whileTap:j?{scale:.95}:{},animate:{left:`${Math.min(w,85)}%`},transition:{type:w===0?"spring":"tween",stiffness:300,damping:30,duration:w===0?.5:.1},children:m?r.jsx("div",{className:"loading-spinner small"}):w>80?r.jsx(Os,{}):r.jsx(er,{})})}),r.jsx("span",{className:"slide-text",children:m?"Processing...":w>80?"Release to Buy!":"Slide to Buy"})]})})]}),r.jsx("div",{className:"additional-actions",children:r.jsx("button",{onClick:()=>{s(),l(`/stock/${t.symbol}`)},className:"view-details-btn",children:"View Full Details"})})]})})},Yu=()=>{const[t,e]=b.useState(!1),[s,n]=b.useState(null),[i,a]=b.useState(1),o=b.useCallback((u,h=1)=>{if(!u){console.warn("No stock data provided to openSlideToBuy");return}const d={symbol:u.symbol||u.stockSymbol,name:u.name||u.companyName||`${u.symbol} Corporation`,price:u.price||u.currentPrice||0,change:u.change||u.priceChange||0,changePercent:u.changePercent||u.changePercentage||0,volume:u.volume||0,marketCap:u.marketCap||0,sector:u.sector||"Unknown",...u};n(d),a(h),e(!0)},[]),l=b.useCallback(()=>{e(!1),setTimeout(()=>{n(null),a(1)},300)},[]),c=b.useCallback(u=>{o(u,1)},[o]);return{isOpen:t,currentStock:s,defaultQuantity:i,openSlideToBuy:o,closeSlideToBuy:l,quickBuy:c}},Jj=b.memo(({user:t,theme:e})=>{var w;Lt();const[s,n]=b.useState(!1),{portfolioData:i,loading:a,updatePortfolioValues:o,refreshPortfolio:l}=hs(),{isOpen:c,currentStock:u,defaultQuantity:h,closeSlideToBuy:d}=Yu();b.useEffect(()=>{console.log("🏠 Dashboard received portfolio data update:",{availableCash:i.availableCash,totalValue:i.totalValue}),i.availableCash===1e4&&i.totalValue===1e4&&(console.log("🔄 Dashboard detected default values, forcing refresh..."),setTimeout(()=>{l()},1e3))},[i.availableCash,i.totalValue,l]);const f=[{title:"Total Value",value:i.totalValue,changePercent:i.totalGainLossPercentage,icon:St,color:"primary"},{title:"Available Cash",value:i.availableCash,changePercent:0,icon:St,color:"info"},{title:"Total Invested",value:i.totalInvested,changePercent:i.totalGainLossPercentage,icon:Oe,color:i.totalGainLoss>=0?"success":"danger"},{title:"Holdings",value:((w=i.holdings)==null?void 0:w.length)||0,changePercent:0,icon:Tt,color:"info"}],y=[{name:"NIFTY 50",value:19674.25,change:145.3,changePercent:.74},{name:"SENSEX",value:65953.48,change:501.92,changePercent:.77},{name:"NIFTY BANK",value:44821.15,change:287.65,changePercent:.65},{name:"NIFTY IT",value:29847.3,change:-89.45,changePercent:-.3}],p=async()=>{n(!0);try{console.log("🔄 Manual refresh triggered");const g=Ee.getPortfolioSummary();console.log("🔍 Direct trading service check:",{availableCash:g.availableCash,totalValue:g.totalValue}),l(),await o(),await new Promise(m=>setTimeout(m,1e3))}catch(g){console.error("Error refreshing data:",g)}finally{n(!1)}};return r.jsxs("div",{className:"dashboard-page",children:[r.jsx(sr,{icon:Oe,title:"TradeBro Dashboard",subtitle:"Indian Stock Market Overview - NSE & BSE Trading Platform",borderColor:"primary",actions:[{label:"Refresh",icon:mt,onClick:p,variant:"secondary",disabled:s},{label:"Claimed Today",icon:Dt,onClick:()=>{},variant:"outline",disabled:!0}]}),r.jsx(xA,{}),r.jsxs("div",{className:"dashboard-container",children:[r.jsx(U.div,{className:"market-indices",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},children:y.map((g,m)=>{const x=g.change>=0;return r.jsxs("div",{className:"index-card",children:[r.jsxs("div",{className:"index-header",children:[r.jsx("h3",{className:"index-name",children:g.name}),r.jsxs("div",{className:`index-change ${x?"positive":"negative"}`,children:[x?r.jsx(So,{size:14}):r.jsx(Wr,{size:14}),Math.abs(g.changePercent),"%"]})]}),r.jsx("div",{className:"index-value",children:r.jsx(Vc,{end:g.value,duration:2,separator:",",decimals:2})}),r.jsxs("div",{className:`index-change-value ${x?"positive":"negative"}`,children:[x?"+":"",g.change.toFixed(2)]})]},g.name)})}),r.jsx(U.div,{className:"stats-grid",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:f.map((g,m)=>{const x=g.icon,S=g.changePercent>=0;return r.jsxs(U.div,{className:`stat-card stat-${g.color}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:m*.1},children:[r.jsxs("div",{className:"stat-header",children:[r.jsx("div",{className:"stat-icon",children:r.jsx(x,{})}),r.jsxs("div",{className:`stat-change ${S?"positive":"negative"}`,children:[S?r.jsx(So,{size:14}):r.jsx(Wr,{size:14}),Math.abs(g.changePercent),"%"]})]}),r.jsxs("div",{className:"stat-content",children:[r.jsx("h3",{className:"stat-value",children:typeof g.value=="number"&&g.value>1e3?r.jsx(Vc,{end:g.value,duration:2,separator:",",prefix:g.title.includes("Value")||g.title.includes("Gain")?"₹":""}):g.value}),r.jsx("p",{className:"stat-title",children:g.title})]})]},g.title)})})]}),r.jsx(Hu,{stockData:u,isOpen:c,onClose:d,defaultQuantity:h,onSuccess:()=>{o()}})]})});Jj.displayName="Dashboard";const wl=(t,e="manual")=>t?{symbol:t.symbol||t.ticker||t.stockSymbol,name:t.name||t.companyName||t.longName||t.symbol,price:t.price||t.currentPrice||t.close||t.regularMarketPrice||0,change:t.change||t.priceChange||t.regularMarketChange||0,changePercent:t.changePercent||t.percentChange||t.regularMarketChangePercent||0,volume:t.volume||t.regularMarketVolume||0,marketCap:t.marketCap||0,sector:t.sector||t.sectorName||"",industry:t.industry||"",source:e,timestamp:new Date().toISOString(),...t}:null,og=()=>{const[t,e]=b.useState({isOpen:!1,stockData:null,orderType:"buy",source:null}),s=Lt(),n=b.useCallback((p,w="buy",g="manual")=>{console.log("🚀 openOrderModal called",{stockData:p,orderType:w,source:g});const m=wl(p,g);console.log("📊 Normalized stock data",m),e({isOpen:!0,stockData:m,orderType:w,source:g}),console.log("✅ Order modal state updated")},[]),i=b.useCallback(()=>{e({isOpen:!1,stockData:null,orderType:"buy",source:null})},[]),a=b.useCallback(async(p,w=1)=>{try{console.log("🚀 Quick buy:",{stockData:p,quantity:w});const g=wl(p);if(!g)throw new Error("Invalid stock data");const m=await Ee.buyStock(g.symbol,w,g.price,"market");return m.success?(X.success(m.message),{success:!0,data:m.data}):(X.error(m.error),{success:!1,error:m.error})}catch(g){return console.error("Quick buy error:",g),X.error(g.message||"Failed to buy stock"),{success:!1,error:g.message}}},[]),o=b.useCallback(async(p,w=1)=>{try{console.log("🚀 Quick sell:",{stockData:p,quantity:w});const g=wl(p);if(!g)throw new Error("Invalid stock data");const m=await Ee.sellStock(g.symbol,w,g.price,"market");return m.success?(X.success(m.message),{success:!0,data:m.data}):(X.error(m.error),{success:!1,error:m.error})}catch(g){return console.error("Quick sell error:",g),X.error(g.message||"Failed to sell stock"),{success:!1,error:g.message}}},[]),l=b.useCallback((p,w="buy")=>{const g=p.symbol||p.stockSymbol;s(`/trading?symbol=${g}&type=${w}`)},[s]),c=b.useCallback(p=>{const w={symbol:p.symbol,name:p.name||p.symbol,price:p.price||p.close||p.c,change:p.change||p.d||0,changePercent:p.changePercent||p.dp||0,volume:p.volume||p.v||0,high:p.high||p.h||0,low:p.low||p.l||0,open:p.open||p.o||0,source:"chart"};n(w,"buy","chart")},[n]),u=b.useCallback((p,w="buy")=>{const g={symbol:p.symbol||p.stockSymbol,name:p.name||p.stockName||p.symbol,price:p.price||p.currentPrice||0,change:p.change||p.dayChange||0,changePercent:p.changePercent||p.dayChangePercent||0,volume:p.volume||0,high:p.high||p.dayHigh||0,low:p.low||p.dayLow||0,open:p.open||0,source:"watchlist"};n(g,w,"watchlist")},[n]),h=b.useCallback((p,w="sell")=>{const g={symbol:p.symbol||p.stockSymbol,name:p.name||p.stockName||p.symbol,price:p.currentPrice||p.price||0,change:p.dayChange||p.change||0,changePercent:p.dayChangePercent||p.changePercent||0,volume:p.volume||0,high:p.dayHigh||p.high||0,low:p.dayLow||p.low||0,open:p.open||0,averagePrice:p.averagePrice||p.averageBuyPrice||0,quantity:p.quantity||0,totalValue:p.totalValue||p.currentValue||0,totalGains:p.totalGains||p.gainLoss||0,gainsPercent:p.gainsPercent||p.gainLossPercentage||0,source:"portfolio"};n(g,w,"portfolio")},[n]),d=b.useCallback((p,w="buy")=>{const g={symbol:p.symbol||p.ticker,name:p.name||p.companyName||p.symbol,price:p.price||p.lastPrice||0,change:p.change||p.priceChange||0,changePercent:p.changePercent||p.percentChange||0,volume:p.volume||p.totalVolume||0,high:p.high||p.dayHigh||0,low:p.low||p.dayLow||0,open:p.open||p.openPrice||0,source:"market"};n(g,w,"market")},[n]),f=b.useCallback((p,w="buy")=>{if(p.length>0){const g=p[0],m={...wl(g,"bulk"),bulkList:p,source:"bulk"};n(m,w,"bulk")}},[n]),y=b.useCallback(p=>[{label:"Quick Buy",icon:"FiTrendingUp",action:()=>a(p),color:"green"},{label:"Quick Sell",icon:"FiTrendingDown",action:()=>o(p),color:"red",disabled:!r3(p.symbol)},{label:"View Chart",icon:"FiBarChart2",action:()=>s(`/charts?symbol=${p.symbol}`),color:"blue"},{label:"Add to Watchlist",icon:"FiBookmark",action:()=>a3(p),color:"purple"}],[a,o,s]);return{orderModalState:t,openOrderModal:n,closeOrderModal:i,navigateToTrading:l,handleChartStockClick:c,handleWatchlistStockClick:u,handlePortfolioStockClick:h,handleMarketDataClick:d,quickBuy:a,quickSell:o,handleBulkOrder:f,getContextMenuActions:y}},r3=t=>!0,a3=t=>{console.log("Adding to watchlist:",t.symbol)},Zj=()=>{const[t,e]=b.useState(!1),[s,n]=b.useState(null),[i,a]=b.useState(!1),o=b.useCallback(d=>{n(d),e(!0)},[]),l=b.useCallback(()=>{i||(e(!1),setTimeout(()=>{n(null),a(!1)},300))},[i]),c=b.useCallback(async d=>{a(!0);try{let f;if(d.action==="BUY"?f=await Ee.buyStock(d.symbol,d.quantity,d.price,d.orderType||"market"):d.action==="SELL"&&(f=await Ee.sellStock(d.symbol,d.quantity,d.price,d.orderType||"market")),f.success)return X.success(`${d.action} order executed successfully! ${d.quantity} shares of ${d.symbol}`,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0}),setTimeout(()=>{l()},1500),f;throw new Error(f.message||"Order execution failed")}catch(f){return console.error("Order processing error:",f),X.error(f.message||`Failed to execute ${d.action.toLowerCase()} order`,{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0}),a(!1),{success:!1,error:f.message}}},[l]),u=b.useCallback((d,f,y,p={})=>{o({action:"BUY",symbol:d,quantity:f,price:y,...p})},[o]),h=b.useCallback((d,f,y,p={})=>{o({action:"SELL",symbol:d,quantity:f,price:y,...p})},[o]);return{isModalOpen:t,orderData:s,loading:i,openConfirmation:o,closeConfirmation:l,processOrder:c,confirmBuy:u,confirmSell:h}},eN=({isOpen:t,onClose:e,onConfirm:s,orderData:n,loading:i=!1})=>{const[a,o]=b.useState(!1),[l,c]=b.useState(!1),u=b.useRef(null),h=Jb(0),d=od(h,[0,200],[0,1]),f=od(d,[0,.3,.7,1],(n==null?void 0:n.action)==="BUY"?["rgba(229, 231, 235, 0.3)","rgba(251, 191, 36, 0.4)","rgba(16, 185, 129, 0.6)","rgba(16, 185, 129, 0.9)"]:["rgba(229, 231, 235, 0.3)","rgba(251, 191, 36, 0.4)","rgba(239, 68, 68, 0.6)","rgba(239, 68, 68, 0.9)"]),y=od(d,[0,1],["0%","100%"]),[p,w]=b.useState(0),[g,m]=b.useState(0);b.useEffect(()=>d.on("change",E=>{const T=Math.round(E*100);w(T);const M=[25,50,75].find(_=>T>=_&&g<_);M&&l&&(m(M),navigator.vibrate&&navigator.vibrate(30))}),[d,g,l]),b.useEffect(()=>{t&&(o(!1),c(!1),m(0),w(0),h.set(0))},[t,h]);const x=b.useCallback(()=>{c(!0),m(0),navigator.vibrate&&navigator.vibrate(50)},[]),S=b.useCallback(()=>{const P=h.get();c(!1),P>=180?(o(!0),navigator.vibrate&&navigator.vibrate([100,50,100]),setTimeout(()=>{s(n)},300)):h.set(0)},[h,s,n]),N=P=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2,maximumFractionDigits:2}).format(P),j=n?n.quantity*n.price:0;return n?r.jsx(Xe,{children:t&&r.jsxs(r.Fragment,{children:[r.jsx(U.div,{className:"drag-confirm-backdrop",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:e}),r.jsxs(U.div,{className:`drag-confirm-modal ${a?"confirmed":""}`,initial:{opacity:0,scale:.9,y:-20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:-20},transition:{type:"spring",damping:25,stiffness:300},children:[r.jsxs("div",{className:"modal-header",children:[r.jsxs("div",{className:"header-content",children:[r.jsx("div",{className:`action-icon ${n.action.toLowerCase()}`,children:n.action==="BUY"?r.jsx(Oe,{}):r.jsx(lt,{})}),r.jsxs("div",{className:"header-text",children:[r.jsxs("h2",{className:"modal-title",children:["Confirm ",n.action," Order"]}),r.jsx("p",{className:"modal-subtitle",children:"Review your order details carefully"})]})]}),r.jsx("button",{className:"close-button",onClick:e,children:r.jsx(Bt,{})})]}),r.jsxs("div",{className:"order-details",children:[r.jsxs("div",{className:"stock-info",children:[r.jsx("div",{className:"stock-symbol",children:n.symbol}),r.jsx("div",{className:"stock-name",children:n.name||n.symbol})]}),r.jsxs("div",{className:"order-summary",children:[r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{className:"label",children:"Action:"}),r.jsx("span",{className:`value ${n.action.toLowerCase()}`,children:n.action})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{className:"label",children:"Quantity:"}),r.jsxs("span",{className:"value",children:[n.quantity," shares"]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{className:"label",children:"Price per share:"}),r.jsx("span",{className:"value",children:N(n.price)})]}),r.jsxs("div",{className:"summary-row total",children:[r.jsx("span",{className:"label",children:"Total Value:"}),r.jsx("span",{className:"value",children:N(j)})]})]}),r.jsxs("div",{className:"risk-warning",children:[r.jsx(Xn,{className:"warning-icon"}),r.jsxs("div",{className:"warning-text",children:[r.jsx("strong",{children:"Important:"})," This action cannot be undone. Please review all details before confirming."]})]})]}),r.jsxs("div",{className:"drag-confirm-container",children:[r.jsx("div",{className:"drag-instruction",children:a?r.jsx("span",{className:"confirmed-text",children:"✓ Order Confirmed!"}):r.jsxs("span",{children:["Drag to confirm ",n.action.toLowerCase()," order"]})}),r.jsxs("div",{className:"drag-track",ref:u,children:[r.jsx(U.div,{className:"drag-track-fill",style:{backgroundColor:f,width:a?"100%":y}}),r.jsx(U.div,{className:`drag-handle ${l?"dragging":""} ${a?"confirmed":""}`,drag:"x",dragConstraints:u,dragElastic:.1,dragMomentum:!1,style:{x:h},onDragStart:x,onDragEnd:S,whileDrag:{scale:1.1},animate:{x:a?200:0},transition:{type:"spring",damping:20,stiffness:300},children:a?r.jsx(U.div,{initial:{scale:0},animate:{scale:1},className:"check-icon",children:"✓"}):r.jsx(er,{})}),r.jsx("div",{className:"drag-text",children:a?"Processing...":l&&p>5?`${p}%`:`Confirm ${n.action}`})]})]}),i&&r.jsxs("div",{className:"loading-overlay",children:[r.jsx("div",{className:"loading-spinner"}),r.jsx("p",{children:"Processing your order..."})]})]})]})}):null},o3=({stockData:t,variant:e="default",showBoth:s=!0,defaultAction:n="buy",source:i="general",className:a="",disabled:o=!1,enableDragConfirm:l=!0})=>{const{openOrderModal:c}=og(),{isAuthenticated:u}=tr(),h=Lt(),{isModalOpen:d,orderData:f,loading:y,closeConfirmation:p,processOrder:w,confirmBuy:g,confirmSell:m}=Zj(),x=N=>{if(console.log("🔥 Action button clicked!",{action:N,stockData:t,isAuthenticated:u,disabled:o,enableDragConfirm:l}),!u){console.log("❌ User not authenticated, redirecting to login"),h("/login");return}if(o||!t){console.log("❌ Button disabled or no stock data",{disabled:o,stockData:t});return}if(l){console.log("✅ Opening drag confirmation modal",{stockData:t,action:N,source:i});const j={symbol:t.symbol,name:t.name||t.symbol,price:t.price||t.currentPrice||0,quantity:1,orderType:"market",source:i};N==="buy"?g(j.symbol,j.quantity,j.price,{name:j.name,orderType:j.orderType,source:j.source}):m(j.symbol,j.quantity,j.price,{name:j.name,orderType:j.orderType,source:j.source})}else console.log("✅ Opening traditional order modal",{stockData:t,action:N,source:i}),c(t,N,i)},S=()=>{switch(e){case"icon-only":return r.jsxs("div",{className:`stock-actions icon-only ${a}`,children:[(s||n==="buy")&&r.jsx("button",{className:"stock-action-btn buy icon-only",onClick:()=>x("buy"),disabled:o,title:"Buy Stock","aria-label":`Buy ${(t==null?void 0:t.symbol)||"stock"}`,children:r.jsx(Oe,{})}),(s||n==="sell")&&r.jsx("button",{className:"stock-action-btn sell icon-only",onClick:()=>x("sell"),disabled:o,title:"Sell Stock","aria-label":`Sell ${(t==null?void 0:t.symbol)||"stock"}`,children:r.jsx(lt,{})})]});case"minimal":return r.jsxs("div",{className:`stock-actions minimal ${a}`,children:[(s||n==="buy")&&r.jsxs("button",{className:"stock-action-btn buy minimal",onClick:()=>x("buy"),disabled:o,children:[r.jsx(Oe,{}),r.jsx("span",{children:"Buy"})]}),(s||n==="sell")&&r.jsxs("button",{className:"stock-action-btn sell minimal",onClick:()=>x("sell"),disabled:o,children:[r.jsx(lt,{}),r.jsx("span",{children:"Sell"})]})]});case"compact":return r.jsx("div",{className:`stock-actions compact ${a}`,children:s?r.jsxs(r.Fragment,{children:[r.jsxs("button",{className:"stock-action-btn buy compact",onClick:()=>x("buy"),disabled:o,children:[r.jsx(Tt,{}),r.jsx("span",{children:"Buy"})]}),r.jsxs("button",{className:"stock-action-btn sell compact",onClick:()=>x("sell"),disabled:o,children:[r.jsx(St,{}),r.jsx("span",{children:"Sell"})]})]}):r.jsxs("button",{className:`stock-action-btn ${n} compact`,onClick:()=>x(n),disabled:o,children:[n==="buy"?r.jsx(Tt,{}):r.jsx(St,{}),r.jsx("span",{children:n==="buy"?"Buy":"Sell"})]})});default:return r.jsxs("div",{className:`stock-actions default ${a}`,children:[(s||n==="buy")&&r.jsxs("button",{className:"stock-action-btn buy default",onClick:()=>x("buy"),disabled:o,children:[r.jsx(Tt,{}),r.jsx("span",{children:"Buy Now"})]}),(s||n==="sell")&&r.jsxs("button",{className:"stock-action-btn sell default",onClick:()=>x("sell"),disabled:o,children:[r.jsx(St,{}),r.jsx("span",{children:"Sell Now"})]})]})}};return t?r.jsxs(r.Fragment,{children:[S(),l&&r.jsx(eN,{isOpen:d,onClose:p,onConfirm:w,orderData:f,loading:y})]}):null},l3=({stockData:t})=>r.jsx(o3,{stockData:t,variant:"minimal",source:"portfolio",className:"portfolio-actions"}),c3=({user:t,theme:e})=>{var O;const s=Lt(),n=us(),[i,a]=b.useState(!1),[o,l]=b.useState(null),{isOpen:c,currentStock:u,defaultQuantity:h,openSlideToBuy:d,closeSlideToBuy:f}=Yu(),[y,p]=b.useState("all"),[w,g]=b.useState("value"),{portfolioData:m,loading:x,updatePortfolioValues:S,refreshPortfolio:N}=hs();if(b.useEffect(()=>{var A,B;if((A=n.state)!=null&&A.showPurchaseSuccess&&((B=n.state)!=null&&B.purchasedStock)){const H=n.state.purchasedStock;X.success(`🎉 Successfully purchased ${H.quantity} shares of ${H.symbol} for ${M(H.totalCost)}!`,{duration:5e3}),l(H.symbol),setTimeout(()=>{l(null)},5e3),s(n.pathname,{replace:!0})}},[n.state,s,n.pathname]),x||!m)return r.jsx("div",{className:"portfolio-page",children:r.jsx("div",{className:"portfolio-container",children:r.jsxs("div",{className:"loading-container",children:[r.jsx("div",{className:"loading-spinner"}),r.jsx("p",{children:"Loading portfolio..."})]})})});const j=[{title:"Total Value",value:m.totalValue||0,changePercent:m.totalGainLossPercentage||0,changeAmount:m.totalGainLoss||0,icon:St,color:"primary"},{title:"Available Cash",value:m.availableCash||0,changePercent:0,changeAmount:0,icon:St,color:"info"},{title:"Total Invested",value:m.totalInvested||0,changePercent:m.totalGainLossPercentage||0,changeAmount:m.totalGainLoss||0,icon:Ot,color:(m.totalGainLoss||0)>=0?"success":"danger"},{title:"Holdings",value:((O=m.holdings)==null?void 0:O.length)||0,changePercent:0,changeAmount:0,icon:jo,color:"info"}],P=m.holdings||[],E=P.filter(A=>y==="gainers"?(A.totalGain||0)>0:y==="losers"?(A.totalGain||0)<0:!0),T=[...E].sort((A,B)=>(B.value||0)-(A.value||0)),R=async()=>{a(!0),await new Promise(A=>setTimeout(A,1500)),a(!1)},M=A=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(A),_=A=>new Intl.NumberFormat("en-IN").format(A);return r.jsxs("div",{className:"portfolio-page",children:[r.jsx(sr,{icon:jo,title:"Portfolio",subtitle:"Track your investments and portfolio performance",borderColor:"success",actions:[{label:"Refresh",icon:mt,onClick:R,variant:"secondary",disabled:i}]}),r.jsxs("div",{className:"portfolio-container",children:[r.jsx(U.div,{className:"portfolio-stats",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},children:j.map((A,B)=>{const H=A.icon,F=A.changePercent>=0;return r.jsxs(U.div,{className:`stat-card stat-${A.color}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:B*.1},children:[r.jsxs("div",{className:"stat-header",children:[r.jsx("div",{className:"stat-icon",children:r.jsx(H,{})}),r.jsxs("div",{className:`stat-change ${F?"positive":"negative"}`,children:[F?r.jsx(So,{size:14}):r.jsx(Wr,{size:14}),Math.abs(A.changePercent),"%"]})]}),r.jsxs("div",{className:"stat-content",children:[r.jsx("h3",{className:"stat-value",children:typeof A.value=="number"&&A.value>1e3?r.jsx(Vc,{end:A.value,duration:2,separator:",",prefix:A.title.includes("Value")||A.title.includes("P&L")?"₹":""}):A.value}),r.jsx("p",{className:"stat-title",children:A.title}),A.changeAmount!==0&&r.jsxs("p",{className:`stat-change-amount ${F?"positive":"negative"}`,children:[F?"+":"",M(A.changeAmount)]})]})]},A.title)})}),r.jsx("div",{className:"portfolio-grid",children:r.jsxs(U.div,{className:"portfolio-card holdings-table",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},children:[r.jsxs("div",{className:"card-header",children:[r.jsxs("div",{className:"header-left",children:[r.jsxs("h3",{className:"card-title",children:[r.jsx(Ot,{className:"card-icon"}),"My Holdings",r.jsxs("span",{className:"holdings-count",children:["(",E.length," of ",P.length," stocks)"]})]}),r.jsxs("div",{className:"holdings-summary",children:[r.jsxs("span",{className:"total-invested",children:["Total Invested: ",M(m.totalInvested||0)]}),r.jsxs("span",{className:"current-value",children:["Current Value: ",M(m.totalValue||0)]})]})]}),r.jsxs("div",{className:"card-actions",children:[r.jsx("div",{className:"filter-group",children:r.jsxs("select",{className:"filter-select",value:y,onChange:A=>p(A.target.value),children:[r.jsx("option",{value:"all",children:"All Holdings"}),r.jsx("option",{value:"gainers",children:"Gainers Only"}),r.jsx("option",{value:"losers",children:"Losers Only"})]})}),r.jsx("button",{className:"btn-refresh",onClick:R,disabled:i,title:"Refresh Holdings",children:r.jsx(mt,{className:i?"spinning":""})})]})]}),r.jsx("div",{className:"card-content",children:r.jsxs("div",{className:"holdings-table",children:[r.jsxs("div",{className:"table-header",children:[r.jsx("div",{className:"col-stock",children:"Stock"}),r.jsx("div",{className:"col-quantity",children:"Quantity"}),r.jsx("div",{className:"col-avg-price",children:"Avg Price"}),r.jsx("div",{className:"col-current-price",children:"Current Price"}),r.jsx("div",{className:"col-value",children:"Value"}),r.jsx("div",{className:"col-gains",children:"Total P&L"}),r.jsx("div",{className:"col-day-change",children:"Day Change"}),r.jsx("div",{className:"col-actions",children:"Actions"})]}),r.jsx("div",{className:"table-body",children:T.length>0?T.map((A,B)=>r.jsxs(U.div,{className:`table-row clickable ${o===A.symbol?"highlighted-purchase":""}`,initial:{opacity:0,y:10},animate:{opacity:1,y:0,scale:o===A.symbol?1.02:1},style:{backgroundColor:o===A.symbol?"var(--success-bg, rgba(16, 185, 129, 0.1))":"transparent"},transition:{duration:.3,delay:B*.05},onClick:()=>s(`/stock/${A.symbol}`),children:[r.jsx("div",{className:"col-stock",children:r.jsxs("div",{className:"stock-info",children:[r.jsx("div",{className:"stock-symbol",children:A.symbol}),r.jsx("div",{className:"stock-name",children:A.name}),r.jsx("div",{className:"stock-sector",children:A.sector})]})}),r.jsx("div",{className:"col-quantity",children:_(A.quantity||0)}),r.jsx("div",{className:"col-avg-price",children:M(A.avgPrice||0)}),r.jsx("div",{className:"col-current-price",children:r.jsx(Vi,{price:A.currentPrice||0,change:A.dayChange||0,changePercent:A.dayChangePercent||0,size:"small"})}),r.jsx("div",{className:"col-value",children:M(A.value||0)}),r.jsxs("div",{className:"col-gains",children:[r.jsxs("div",{className:`gain-amount ${(A.totalGain||0)>=0?"positive":"negative"}`,children:[(A.totalGain||0)>=0?"+":"",M(A.totalGain||0)]}),r.jsxs("div",{className:`gain-percent ${(A.totalGainPercent||0)>=0?"positive":"negative"}`,children:["(",(A.totalGainPercent||0)>=0?"+":"",(A.totalGainPercent||0).toFixed(2),"%)"]})]}),r.jsxs("div",{className:"col-day-change",children:[r.jsxs("div",{className:`day-change ${(A.dayChange||0)>=0?"positive":"negative"}`,children:[(A.dayChange||0)>=0?"+":"",(A.dayChange||0).toFixed(2)]}),r.jsxs("div",{className:`day-change-percent ${(A.dayChangePercent||0)>=0?"positive":"negative"}`,children:["(",(A.dayChangePercent||0)>=0?"+":"",(A.dayChangePercent||0).toFixed(2),"%)"]})]}),r.jsx("div",{className:"col-actions",children:r.jsxs("div",{className:"action-buttons",children:[r.jsx(Jn,{stockData:{symbol:A.symbol,name:A.name,price:A.currentPrice,change:A.dayChange,changePercent:A.dayChangePercent},size:"small",variant:"simple",showText:!1}),r.jsx("button",{className:"buy-btn-small",onClick:H=>{H.stopPropagation(),d({symbol:A.symbol,name:A.name,price:A.currentPrice,change:A.dayChange,changePercent:A.dayChangePercent})},title:"Buy More",children:"Buy"}),r.jsx(l3,{stockData:{symbol:A.symbol,name:A.name,price:A.currentPrice,change:A.dayChange,changePercent:A.dayChangePercent,quantity:A.quantity,avgPrice:A.avgPrice,totalValue:A.value}})]})})]},A.symbol)):r.jsxs("div",{className:"empty-holdings",children:[r.jsx("div",{className:"empty-icon",children:r.jsx(Ot,{size:48})}),r.jsx("h3",{className:"empty-title",children:y==="gainers"?"No Gainers Found":y==="losers"?"No Losers Found":"No Holdings Yet"}),r.jsx("p",{className:"empty-description",children:y==="gainers"?"None of your holdings are currently in profit.":y==="losers"?"None of your holdings are currently in loss.":"Start building your portfolio by adding your first stock."}),y!=="all"&&r.jsx("button",{className:"btn-secondary",onClick:()=>p("all"),children:"View All Holdings"})]})})]})})]})}),r.jsx(Hu,{stockData:u,isOpen:c,onClose:f,defaultQuantity:h,onSuccess:()=>{}})]})]})},u3=(t,e=100,s=30)=>{const n=[];let i=e;const a=new Date;for(let o=s;o>=0;o--){const l=new Date(a);l.setDate(l.getDate()-o);const c=(Math.random()-.5)*.1;i=Math.max(i*(1+c),1);const u=i,h=u*(1+Math.random()*.05),d=u*(1-Math.random()*.05),f=d+Math.random()*(h-d),y=Math.floor(Math.random()*1e6)+1e5;n.push({time:l.toISOString().split("T")[0],open:parseFloat(u.toFixed(2)),high:parseFloat(h.toFixed(2)),low:parseFloat(d.toFixed(2)),close:parseFloat(f.toFixed(2)),volume:y}),i=f}return n},z0={"RELIANCE.NS":{symbol:"RELIANCE.NS",name:"Reliance Industries Limited",price:2847.5,change:15.25,changesPercentage:.54,dayLow:2835.4,dayHigh:2865.8,yearHigh:3024.9,yearLow:2220.3,marketCap:1925e10,priceAvg50:2798.45,priceAvg200:2654.78,volume:8765432,avgVolume:12e6,exchange:"NSE",open:2840.2,previousClose:2832.25,timestamp:Math.floor(Date.now()/1e3)},"TCS.NS":{symbol:"TCS.NS",name:"Tata Consultancy Services",price:4125.8,change:-12.4,changesPercentage:-.3,dayLow:4118.25,dayHigh:4145.6,yearHigh:4592.25,yearLow:3311,marketCap:151e11,priceAvg50:4089.75,priceAvg200:3987.2,volume:1234567,avgVolume:25e5,exchange:"NSE",open:4138.2,previousClose:4138.2,timestamp:Math.floor(Date.now()/1e3)},"HDFCBANK.NS":{symbol:"HDFCBANK.NS",name:"HDFC Bank Limited",price:1687.9,change:8.75,changesPercentage:.52,dayLow:1678.3,dayHigh:1695.4,yearHigh:1794.5,yearLow:1363.55,marketCap:1285e10,priceAvg50:1654.45,priceAvg200:1598.78,volume:5678901,avgVolume:85e5,exchange:"NSE",open:1682.15,previousClose:1679.15,timestamp:Math.floor(Date.now()/1e3)},"INFY.NS":{symbol:"INFY.NS",name:"Infosys Limited",price:1842.35,change:22.15,changesPercentage:1.22,dayLow:1835.2,dayHigh:1856.8,yearHigh:1953.9,yearLow:1351.65,marketCap:765e10,priceAvg50:1798.75,priceAvg200:1687.2,volume:3456789,avgVolume:52e5,exchange:"NSE",open:1838.4,previousClose:1820.2,timestamp:Math.floor(Date.now()/1e3)},"HINDUNILVR.NS":{symbol:"HINDUNILVR.NS",name:"Hindustan Unilever Limited",price:2456.7,change:-5.3,changesPercentage:-.22,dayLow:2445.6,dayHigh:2468.9,yearHigh:2844.95,yearLow:2172,marketCap:575e10,priceAvg50:2489.75,priceAvg200:2398.2,volume:987654,avgVolume:18e5,exchange:"NSE",open:2462,previousClose:2462,timestamp:Math.floor(Date.now()/1e3)},"ICICIBANK.NS":{symbol:"ICICIBANK.NS",name:"ICICI Bank Limited",price:1287.45,change:18.9,changesPercentage:1.49,dayLow:1278.3,dayHigh:1295.8,yearHigh:1257.65,yearLow:912.35,marketCap:905e10,priceAvg50:1245.75,priceAvg200:1156.2,volume:7890123,avgVolume:125e5,exchange:"NSE",open:1280.55,previousClose:1268.55,timestamp:Math.floor(Date.now()/1e3)},INFY:{symbol:"INFY",name:"Infosys Limited",price:1456.3,change:8.75,changesPercentage:.6,dayLow:1445.2,dayHigh:1468.9,yearHigh:1953.9,yearLow:1330.2,marketCap:61e11,priceAvg50:1423.45,priceAvg200:1567.89,volume:3456789,avgVolume:42e5,exchange:"NSE",open:1447.55,previousClose:1447.55,timestamp:Math.floor(Date.now()/1e3)},HDFCBANK:{symbol:"HDFCBANK",name:"HDFC Bank Limited",price:1567.45,change:12.3,changesPercentage:.79,dayLow:1555.2,dayHigh:1578.9,yearHigh:1725,yearLow:1363.55,marketCap:119e11,priceAvg50:1534.67,priceAvg200:1598.23,volume:2345678,avgVolume:28e5,exchange:"NSE",open:1555.15,previousClose:1555.15,timestamp:Math.floor(Date.now()/1e3)},ICICIBANK:{symbol:"ICICIBANK",name:"ICICI Bank Limited",price:987.65,change:-5.45,changesPercentage:-.55,dayLow:982.3,dayHigh:995.8,yearHigh:1257.8,yearLow:875.35,marketCap:69e11,priceAvg50:1012.34,priceAvg200:1089.67,volume:4567890,avgVolume:52e5,exchange:"NSE",open:993.1,previousClose:993.1,timestamp:Math.floor(Date.now()/1e3)}},V0=[{symbol:"RELIANCE.NS",name:"Reliance Industries Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"TCS.NS",name:"Tata Consultancy Services",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"HDFCBANK.NS",name:"HDFC Bank Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"INFY.NS",name:"Infosys Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"HINDUNILVR.NS",name:"Hindustan Unilever Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"ICICIBANK.NS",name:"ICICI Bank Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"KOTAKBANK.NS",name:"Kotak Mahindra Bank Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"BHARTIARTL.NS",name:"Bharti Airtel Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"ITC.NS",name:"ITC Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"SBIN.NS",name:"State Bank of India",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"LT.NS",name:"Larsen & Toubro Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"ASIANPAINT.NS",name:"Asian Paints Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"MARUTI.NS",name:"Maruti Suzuki India Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"BAJFINANCE.NS",name:"Bajaj Finance Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"WIPRO.NS",name:"Wipro Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"HCLTECH.NS",name:"HCL Technologies Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"TECHM.NS",name:"Tech Mahindra Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"SUNPHARMA.NS",name:"Sun Pharmaceutical Industries Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"TITAN.NS",name:"Titan Company Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"NESTLEIND.NS",name:"Nestle India Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"ULTRACEMCO.NS",name:"UltraTech Cement Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"POWERGRID.NS",name:"Power Grid Corporation of India Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"NTPC.NS",name:"NTPC Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"ONGC.NS",name:"Oil and Natural Gas Corporation Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"COALINDIA.NS",name:"Coal India Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"ZOMATO.NS",name:"Zomato Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"PAYTM.NS",name:"One 97 Communications Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"NYKAA.NS",name:"FSN E-Commerce Ventures Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"POLICYBZR.NS",name:"PB Fintech Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"ZOMATO.NS",name:"Zomato Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"SWIGGY.NS",name:"Bundl Technologies Private Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"INFY.NS",name:"Infosys Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"AAPL",name:"Apple Inc.",exchange:"NASDAQ",currency:"USD",type:"stock"},{symbol:"GOOGL",name:"Alphabet Inc.",exchange:"NASDAQ",currency:"USD",type:"stock"},{symbol:"MSFT",name:"Microsoft Corporation",exchange:"NASDAQ",currency:"USD",type:"stock"},{symbol:"AMZN",name:"Amazon.com Inc.",exchange:"NASDAQ",currency:"USD",type:"stock"},{symbol:"TSLA",name:"Tesla Inc.",exchange:"NASDAQ",currency:"USD",type:"stock"},{symbol:"META",name:"Meta Platforms Inc.",exchange:"NASDAQ",currency:"USD",type:"stock"},{symbol:"NVDA",name:"NVIDIA Corporation",exchange:"NASDAQ",currency:"USD",type:"stock"},{symbol:"ADANIPORTS.NS",name:"Adani Ports and Special Economic Zone Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"AXISBANK.NS",name:"Axis Bank Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"BAJAJ-AUTO.NS",name:"Bajaj Auto Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"BRITANNIA.NS",name:"Britannia Industries Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"CIPLA.NS",name:"Cipla Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"DRREDDY.NS",name:"Dr. Reddys Laboratories Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"EICHERMOT.NS",name:"Eicher Motors Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"GRASIM.NS",name:"Grasim Industries Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"HEROMOTOCO.NS",name:"Hero MotoCorp Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"JSWSTEEL.NS",name:"JSW Steel Limited",exchange:"NSE",currency:"INR",type:"stock"},{symbol:"TSLA",name:"Tesla Inc.",exchange:"NASDAQ",currency:"USD",type:"stock"},{symbol:"META",name:"Meta Platforms Inc.",exchange:"NASDAQ",currency:"USD",type:"stock"},{symbol:"NVDA",name:"NVIDIA Corporation",exchange:"NASDAQ",currency:"USD",type:"stock"},{symbol:"NFLX",name:"Netflix Inc.",exchange:"NASDAQ",currency:"USD",type:"stock"},{symbol:"CRM",name:"Salesforce Inc.",exchange:"NYSE",currency:"USD",type:"stock"},{symbol:"ADBE",name:"Adobe Inc.",exchange:"NASDAQ",currency:"USD",type:"stock"}],h3=[{symbol:"AAPL",name:"Apple Inc.",change:2.15,changesPercentage:1.24,price:175.43},{symbol:"NVDA",name:"NVIDIA Corporation",change:15.42,changesPercentage:1.79,price:875.28},{symbol:"META",name:"Meta Platforms Inc.",change:8.75,changesPercentage:1.84,price:484.2},{symbol:"GOOGL",name:"Alphabet Inc.",change:3.42,changesPercentage:2.46,price:142.56},{symbol:"AMZN",name:"Amazon.com Inc.",change:1.87,changesPercentage:1.25,price:151.94}],d3=[{title:"Reliance Industries Reports Strong Q3 Results",text:"Reliance Industries Limited reported strong quarterly results with increased revenue from petrochemicals and retail segments.",url:"#",image:"https://via.placeholder.com/300x200",site:"Economic Times",publishedDate:new Date().toISOString(),symbol:"RELIANCE"},{title:"TCS Announces New Digital Transformation Services",text:"Tata Consultancy Services launches new suite of digital transformation services for enterprise clients.",url:"#",image:"https://via.placeholder.com/300x200",site:"Business Standard",publishedDate:new Date(Date.now()-36e5).toISOString(),symbol:"TCS"},{title:"Indian IT Sector Shows Resilience Amid Global Challenges",text:"The Indian IT sector continues to show strong performance despite global economic uncertainties.",url:"#",image:"https://via.placeholder.com/300x200",site:"Financial Express",publishedDate:new Date(Date.now()-72e5).toISOString(),symbol:"INFY"}],Cr={searchStocks:async(t,e=10)=>{if(await new Promise(i=>setTimeout(i,300)),console.log(`🔍 Mock API searching for: "${t}"`),!t||t.trim()===""){console.log("⚠️ Empty search query, returning popular stocks");const i=V0.slice(0,e);return{success:!0,results:i,total:i.length}}const s=t.toLowerCase().trim(),n=V0.map(i=>{let a=0;const o=i.symbol.toLowerCase(),l=i.name.toLowerCase();return o===s?a+=100:o.startsWith(s)?a+=50:o.includes(s)&&(a+=25),l===s?a+=75:l.startsWith(s)?a+=40:l.split(" ").some(c=>c.startsWith(s))?a+=30:l.includes(s)&&(a+=20),(i.exchange==="NSE"||i.exchange==="BSE"||i.symbol.endsWith(".NS")||i.symbol.endsWith(".BO"))&&(a+=10),{stock:i,score:a}}).filter(i=>i.score>0).sort((i,a)=>a.score-i.score).map(i=>i.stock).slice(0,e);return console.log(`📊 Mock search found ${n.length} results for "${t}"`),n.length>0&&console.log("📋 Sample results:",n.slice(0,3)),{success:!0,results:n,total:n.length}},getStockQuote:async t=>{await new Promise(s=>setTimeout(s,200));const e=z0[t.toUpperCase()];return e?{success:!0,data:e}:{success:!1,error:"Stock not found"}},getHistoricalData:async(t,e="1D")=>{var i;await new Promise(a=>setTimeout(a,500));const s=((i=z0[t.toUpperCase()])==null?void 0:i.price)||100;return{success:!0,data:u3(t,s,e==="1D"?1:e==="1M"?30:90),symbol:t,period:e}},getGainers:async(t=10)=>(await new Promise(e=>setTimeout(e,300)),{success:!0,data:h3.slice(0,t)}),getMarketNews:async(t=20)=>(await new Promise(e=>setTimeout(e,400)),{success:!0,data:d3.slice(0,t)})},f3="https://financialmodelingprep.com/api/v3",ws=["sYWvqZLnzWgIlTE2XBWWL0ZxDUK4O1MY","VCMjfaz3k5CjRqbLvtpMALKTks5YVLxx","1yQ5VCVAadsBiy58e5UTTGNFUbqu0sxR",void 0].filter(Boolean),lg=new Set,m3=()=>ws.some(t=>!lg.has(t)),p3=t=>{lg.add(t),console.warn(`❌ API key marked as failed: ${t.substring(0,8)}...`)};ws.length===0&&console.warn("⚠️ No FMP API keys found in environment variables. Using mock data for development.");let ki=0,Ea=ws[ki];const pd=()=>{Ea&&p3(Ea);for(let t=ki+1;t<ws.length;t++)if(!lg.has(ws[t]))return ki=t,Ea=ws[ki],console.log(`🔄 Switching to API key ${ki+1}/${ws.length} due to API error`),Mt.defaults.params.apikey=Ea,!0;return console.log("⚠️ All API keys exhausted or failed, falling back to mock data"),!1},U0=()=>ws.length>0&&m3();ws.length>0?console.log(`✅ FMP API initialized with ${ws.length} API key(s)`):console.warn("⚠️ No FMP API keys found. Using mock data for development.");const Mt=ke.create({baseURL:f3,timeout:1e4,params:{apikey:Ea}});Mt.interceptors.request.use(t=>{var e;return console.log(`🔄 FMP API Request: ${(e=t.method)==null?void 0:e.toUpperCase()} ${t.url}`),t},t=>(console.error("🚫 FMP API Request Error:",t),Promise.reject(t)));Mt.interceptors.response.use(t=>(console.log(`✅ FMP API Response: ${t.config.url} - ${t.status}`),t),t=>{var e;return console.error("🚫 FMP API Response Error:",(e=t.response)==null?void 0:e.status,t.message),Promise.reject(t)});const Tn={searchStocks:async(t,e=10)=>{var s,n,i,a,o,l;if(!U0())return console.log("🎭 No valid API keys, using mock data for search"),await Cr.searchStocks(t,e);try{console.log(`🔄 FMP API Request: GET /search?query=${t}&limit=${e}`),console.log(`🔑 Using API Key ${ki+1}/${ws.length}`);const c=await Mt.get("/search",{params:{query:t,limit:e}});if(console.log(`✅ FMP Search response status: ${c.status}`),console.log("📊 FMP Search raw data:",c.data),console.log(`📈 FMP Search results: ${c.data.length} stocks found`),!Array.isArray(c.data))throw console.error("❌ FMP API returned non-array data:",c.data),new Error("Invalid response format from FMP API");const u=c.data.map(d=>({symbol:d.symbol,name:d.name,exchange:d.exchangeShortName||"Unknown",currency:d.currency||"USD",type:d.type||"stock"}));u.length>0&&console.log("📊 Mapped results sample:",u.slice(0,3));const h={success:!0,results:u,total:c.data.length};return console.log("🎯 Final search result object:",h),h}catch(c){const u=((s=c.response)==null?void 0:s.status)===429,h=((n=c.response)==null?void 0:n.status)===403,d=((i=c.response)==null?void 0:i.status)===401,f=u||h||d,y=u?"Rate limit exceeded":h?"API key forbidden/invalid":d?"API key unauthorized":c.message;if(console.warn(`🚫 FMP Stock search failed: ${y} (Status: ${(a=c.response)==null?void 0:a.status})`),f&&pd()){console.log("🔄 Retrying with next API key...");try{const w=await Mt.get("/search",{params:{query:t,limit:e}});return console.log(`✅ Next API key success: ${w.data.length} results`),{success:!0,results:w.data.map(m=>({symbol:m.symbol,name:m.name,exchange:m.exchangeShortName||"Unknown",currency:m.currency||"USD",type:m.type||"stock"})),total:w.data.length}}catch(w){const g=((o=w.response)==null?void 0:o.status)===429;if(console.warn(`🚫 Next API key also failed: ${w.message}`),g&&pd()){console.log("🔄 Trying final API key...");try{const m=await Mt.get("/search",{params:{query:t,limit:e}});return console.log(`✅ Final API key success: ${m.data.length} results`),{success:!0,results:m.data.map(S=>({symbol:S.symbol,name:S.name,exchange:S.exchangeShortName||"Unknown",currency:S.currency||"USD",type:S.type||"stock"})),total:m.data.length}}catch(m){console.warn("🚫 All API keys failed:",m.message)}}}}u?console.log("⏰ All API keys rate limited - using mock data"):console.log("📋 Error details:",((l=c.response)==null?void 0:l.data)||c),console.log("⚠️ Falling back to mock data for search");const p=await Cr.searchStocks(t,e);return console.log("🎭 Mock search result:",p),p}},getStockQuote:async t=>{var e,s,n,i;if(!U0())return console.log("🎭 No valid API keys, using mock data for quote"),await Cr.getStockQuote(t);try{console.log(`🔄 FMP API Request: GET /quote/${t}`),console.log(`🔑 Using API Key ${ki+1}/${ws.length}`);const o=(await Mt.get(`/quote/${t}`)).data[0];if(!o)throw new Error("Stock not found");return console.log(`✅ FMP Quote response for ${t}:`,o),{success:!0,data:{symbol:o.symbol,name:o.name,price:o.price,change:o.change,changesPercentage:o.changesPercentage,dayLow:o.dayLow,dayHigh:o.dayHigh,yearHigh:o.yearHigh,yearLow:o.yearLow,marketCap:o.marketCap,priceAvg50:o.priceAvg50,priceAvg200:o.priceAvg200,volume:o.volume,avgVolume:o.avgVolume,exchange:o.exchange,open:o.open,previousClose:o.previousClose,timestamp:o.timestamp}}}catch(a){const o=((e=a.response)==null?void 0:e.status)===429,l=((s=a.response)==null?void 0:s.status)===403,c=((n=a.response)==null?void 0:n.status)===401,u=o||l||c,h=o?"Rate limit exceeded":l?"API key forbidden/invalid":c?"API key unauthorized":a.message;if(console.warn(`🚫 FMP Stock quote failed: ${h} (Status: ${(i=a.response)==null?void 0:i.status})`),u&&pd()){console.log("🔄 Retrying quote with next API key...");try{const f=(await Mt.get(`/quote/${t}`)).data[0];if(!f)throw new Error("Stock not found");return console.log(`✅ Retry successful for ${t}`),{success:!0,data:{symbol:f.symbol,name:f.name,price:f.price,change:f.change,changesPercentage:f.changesPercentage,dayLow:f.dayLow,dayHigh:f.dayHigh,yearHigh:f.yearHigh,yearLow:f.yearLow,marketCap:f.marketCap,priceAvg50:f.priceAvg50,priceAvg200:f.priceAvg200,volume:f.volume,avgVolume:f.avgVolume,exchange:f.exchange,open:f.open,previousClose:f.previousClose,timestamp:f.timestamp}}}catch(d){console.warn(`🚫 Retry also failed: ${d.message}`)}}return console.warn("FMP Stock quote failed, using mock data:",a.message),await Cr.getStockQuote(t)}},getMultipleQuotes:async t=>{try{const e=Array.isArray(t)?t.join(","):t;return{success:!0,data:(await Mt.get(`/quote/${e}`)).data.map(n=>({symbol:n.symbol,name:n.name,price:n.price,change:n.change,changesPercentage:n.changesPercentage,volume:n.volume,marketCap:n.marketCap}))}}catch(e){return console.error("FMP Multiple quotes error:",e),{success:!1,data:[],error:e.message}}},getStockProfile:async t=>{try{const s=(await Mt.get(`/profile/${t}`)).data[0];if(!s)throw new Error("Company profile not found");return{success:!0,data:{symbol:s.symbol,companyName:s.companyName,currency:s.currency,exchange:s.exchangeShortName,industry:s.industry,sector:s.sector,country:s.country,marketCap:s.mktCap,price:s.price,beta:s.beta,volAvg:s.volAvg,lastDiv:s.lastDiv,range:s.range,changes:s.changes,description:s.description,ceo:s.ceo,website:s.website,image:s.image}}}catch(e){return console.error("FMP Stock profile error:",e),{success:!1,error:e.message}}}},g3={getHistoricalData:async(t,e="1D",s=null,n=null)=>{try{let i="",a={};switch(e){case"1D":i=`/historical-chart/1min/${t}`;break;case"5D":i=`/historical-chart/5min/${t}`;break;case"1M":i=`/historical-chart/1hour/${t}`;break;case"3M":case"6M":case"1Y":i=`/historical-price-full/${t}`,s&&(a.from=s),n&&(a.to=n);break;default:i=`/historical-price-full/${t}`}const o=await Mt.get(i,{params:a});let l=[];return i.includes("historical-chart")?l=o.data.map(c=>({time:c.date,open:c.open,high:c.high,low:c.low,close:c.close,volume:c.volume})):l=(o.data.historical||[]).map(u=>({time:u.date,open:u.open,high:u.high,low:u.low,close:u.close,volume:u.volume})),{success:!0,data:l.reverse(),symbol:t,period:e}}catch(i){return console.warn("FMP Historical data failed, using mock data:",i.message),await Cr.getHistoricalData(t,e)}},getIntradayData:async(t,e="1min")=>{try{return{success:!0,data:(await Mt.get(`/historical-chart/${e}/${t}`)).data.map(i=>({time:i.date,open:i.open,high:i.high,low:i.low,close:i.close,volume:i.volume})).reverse(),symbol:t,interval:e}}catch(s){return console.error("FMP Intraday data error:",s),{success:!1,data:[],error:s.message}}}},tN={getGainers:async(t=10)=>{try{return{success:!0,data:(await Mt.get("/gainers",{params:{limit:t}})).data.map(s=>({symbol:s.symbol,name:s.name,change:s.change,changesPercentage:s.changesPercentage,price:s.price}))}}catch(e){return console.warn("FMP Gainers failed, using mock data:",e.message),await Cr.getGainers(t)}},getLosers:async(t=10)=>{try{return{success:!0,data:(await Mt.get("/losers",{params:{limit:t}})).data.map(s=>({symbol:s.symbol,name:s.name,change:s.change,changesPercentage:s.changesPercentage,price:s.price}))}}catch(e){return console.error("FMP Losers error:",e),{success:!1,data:[],error:e.message}}},getMarketNews:async(t=20)=>{try{return{success:!0,data:(await Mt.get("/stock_news",{params:{limit:t}})).data.map(s=>({title:s.title,text:s.text,url:s.url,image:s.image,site:s.site,publishedDate:s.publishedDate,symbol:s.symbol}))}}catch(e){return console.error("FMP Market news error:",e),{success:!1,data:[],error:e.message}}}},ui={stock:Tn,chart:g3,market:tN},y3="http://localhost:5001/api",ue=ke.create({baseURL:y3,timeout:3e4,headers:{"Content-Type":"application/json"}});ue.interceptors.request.use(t=>{const e=localStorage.getItem("token");return e&&(t.headers.Authorization=`Bearer ${e}`),t},t=>Promise.reject(t));ue.interceptors.response.use(t=>t,t=>{var e,s;return t.code==="ERR_NETWORK"||((e=t.response)==null||e.status),((s=t.response)==null?void 0:s.status)===401&&(localStorage.removeItem("token"),localStorage.removeItem("user"),window.location.href="/login"),Promise.reject(t)});const zo={login:async t=>(await ue.post("/auth/login",t)).data,register:async t=>(await ue.post("/auth/register",t)).data,verifyToken:async()=>(await ue.get("/auth/verify")).data,googleAuth:async t=>(await ue.post("/auth/google",{tokenId:t})).data,logout:async()=>(await ue.post("/auth/logout")).data},Vo={getQuote:async t=>(await ue.get(`/proxy/fmp/quote/${t}`)).data,getBatchQuotes:async t=>{const e=Array.isArray(t)?t.join(","):t;return(await ue.get(`/proxy/stock-batch?symbols=${e}`)).data},searchStocks:async(t,e=10)=>{try{return(await ue.get(`/search/stocks?q=${encodeURIComponent(t)}&limit=${e}`)).data}catch(s){return console.warn("Backend search failed, trying FMP API directly:",s),await Tn.searchStocks(t,e)}},getStockSuggestions:async(t,e=5)=>{try{return(await ue.get(`/search/suggestions?q=${encodeURIComponent(t)}&limit=${e}`)).data}catch(s){console.warn("Backend suggestions failed, using FMP API:",s);const n=await Tn.searchStocks(t,e);return{success:n.success,suggestions:n.results||[]}}},getTrendingStocks:async(t=10)=>{try{return(await ue.get(`/search/trending?limit=${t}`)).data}catch(e){console.warn("Backend trending failed, using FMP gainers:",e);const s=await tN.getGainers(t);return{success:s.success,results:s.data||[]}}},getStockQuote:async t=>await Tn.getStockQuote(t),getMultipleQuotes:async t=>await Tn.getMultipleQuotes(t),getStockProfile:async t=>await Tn.getStockProfile(t),getMarketMovers:async()=>{try{const[t,e]=await Promise.all([ue.get("/proxy/top-gainers"),ue.get("/proxy/top-losers")]);return{gainers:t.data||[],losers:e.data||[],mostActive:[]}}catch(t){return console.error("Error fetching market movers:",t),{gainers:[],losers:[],mostActive:[]}}},getIndianIndices:async()=>(await ue.get("/proxy/market-indices")).data,getNSEGainers:async(t=10)=>(await ue.get(`/stocks/nse-gainers?limit=${t}`)).data,getNSELosers:async(t=10)=>(await ue.get(`/stocks/nse-losers?limit=${t}`)).data,getProfile:async t=>(await ue.get(`/stocks/profile/${t}`)).data,getHistoricalData:async(t,e="1y")=>(await ue.get(`/stocks/historical/${t}?period=${e}`)).data,getIntradayData:async(t,e="5min")=>(await ue.get(`/stocks/intraday/${t}?interval=${e}`)).data,getLivePortfolio:async()=>(await ue.get("/api/portfolio/live")).data,getMarketStatus:async()=>(await ue.get("/api/stocks/market-status")).data,getRealTimePrice:async t=>(await ue.get(`/stocks/realtime/${t}`)).data},sN={getSummary:async()=>(await ue.get("/portfolio/summary")).data,getHoldings:async()=>(await ue.get("/portfolio/holdings")).data,getPerformance:async(t="1m")=>(await ue.get(`/portfolio/performance?period=${t}`)).data,getAnalytics:async()=>(await ue.get("/portfolio/analytics")).data},nr={placeOrder:async t=>(await ue.post("/orders/place",t)).data,getOrders:async({status:t="all",page:e=1,limit:s=20,stockSymbol:n=null,type:i=null,orderType:a=null,sort:o="-createdAt"}={})=>{let l=`/orders/all?page=${e}&limit=${s}&sort=${o}`;return t!=="all"&&(l+=`&status=${t}`),n&&(l+=`&stockSymbol=${n.toUpperCase()}`),i&&(l+=`&type=${i}`),a&&(l+=`&orderType=${a}`),(await ue.get(l)).data},searchOrders:async(t,e={})=>{const{status:s,type:n,orderType:i,limit:a=20}=e;let o=`/orders/all?stockSymbol=${t.toUpperCase()}&limit=${a}`;return s&&(o+=`&status=${s}`),n&&(o+=`&type=${n}`),i&&(o+=`&orderType=${i}`),(await ue.get(o)).data},cancelOrder:async t=>(await ue.delete(`/orders/${t}`)).data,getOrderHistory:async(t=50)=>(await ue.get(`/orders/history?limit=${t}`)).data,getRecentTrades:async(t=10)=>(await ue.get(`/trades/recent?limit=${t}`)).data},aa={getWatchlists:async()=>(await ue.get("/watchlist")).data,createWatchlist:async(t,e="")=>(await ue.post("/watchlist",{name:t,description:e})).data,addStock:async(t,e)=>(await ue.post(`/watchlist/${t}/add`,{symbol:e})).data,removeStock:async(t,e)=>(await ue.delete(`/watchlist/${t}/remove/${e}`)).data,deleteWatchlist:async t=>(await ue.delete(`/watchlist/${t}`)).data,searchStocks:async(t,e=10)=>(await ue.get(`/watchlist/search?query=${encodeURIComponent(t)}&limit=${e}`)).data},cg={getMarketNews:async(t=20)=>(await ue.get(`/news/market?limit=${t}`)).data,getNews:async({category:t="all",limit:e=20,q:s=null}={})=>{let n=`/news?limit=${e}`;return s&&(n+=`&q=${encodeURIComponent(s)}`),(await ue.get(n)).data},searchNews:async(t,e=20)=>(await ue.get(`/news/search?q=${encodeURIComponent(t)}&limit=${e}`)).data,getStockNews:async(t,e=10)=>(await ue.get(`/news/stock/${t}?limit=${e}`)).data,getTrendingNews:async()=>(await ue.get("/news/trending")).data},Hc={STOCK_SEARCH:"tradebro_stock_search_history",NEWS_SEARCH:"tradebro_news_search_history",ORDER_SEARCH:"tradebro_order_search_history",GLOBAL_SEARCH:"tradebro_global_search_history"},v3=10,nN=t=>{try{const e=Hc[`${t.toUpperCase()}_SEARCH`]||Hc.GLOBAL_SEARCH,s=localStorage.getItem(e);return s?JSON.parse(s):[]}catch(e){return console.warn("Failed to get search history:",e),[]}},x3=(t,e,s={})=>{if(!(!e||e.trim().length<2))try{const n=Hc[`${t.toUpperCase()}_SEARCH`]||Hc.GLOBAL_SEARCH,i=nN(t),a={query:e.trim(),timestamp:Date.now(),type:t,...s},o=i.filter(c=>c.query.toLowerCase()!==e.toLowerCase()),l=[a,...o].slice(0,v3);localStorage.setItem(n,JSON.stringify(l))}catch(n){console.warn("Failed to add to search history:",n)}},W0=t=>nN(t).slice(0,5),ug=(t,e={})=>{const[s,n]=b.useState(""),[i,a]=b.useState([]),[o,l]=b.useState([]),[c,u]=b.useState(!1),[h,d]=b.useState(null),[f,y]=b.useState(null),[p,w]=b.useState([]),[g,m]=b.useState(!1),{debounceMs:x=300,minQueryLength:S=2,limit:N=10,enableSuggestions:j=!0,enableHistory:P=!0,filters:E={},onResults:T=null,onError:R=null}=e;b.useEffect(()=>{P&&w(W0(t))},[t,P]);const M=b.useCallback(F=>{f&&clearTimeout(f);const K=setTimeout(async()=>{F.length>=S?await _(F):(a([]),l([]),d(null))},x);y(K)},[f,S,x]),_=b.useCallback(async F=>{if(!(!F||F.length<S)){u(!0),d(null);try{let K=[],D=[];switch(t){case"stocks":console.log(`🔍 Searching stocks for: "${F}"`);const V=await Tn.searchStocks(F,N);if(console.log("📊 Stock search response:",V),K=V.success?V.results:[],console.log(`📈 Found ${K.length} search results`),K.length>0){const ye=K.filter(W=>W.exchange==="NSE"||W.exchange==="BSE"||W.symbol.endsWith(".NS")||W.symbol.endsWith(".BO")),q=K.filter(W=>!(W.exchange==="NSE"||W.exchange==="BSE"||W.symbol.endsWith(".NS")||W.symbol.endsWith(".BO")));K=[...ye,...q],console.log(`🇮🇳 Indian stocks: ${ye.length}, Other stocks: ${q.length}`)}j&&F.length>=1&&(D=K.slice(0,5));break;case"news":const $=await cg.searchNews(F,N);K=$.success?$.data:[];break;case"orders":const Q=await nr.searchOrders(F,E);K=Q.success?Q.data:[];break;case"watchlist":const se=await aa.searchStocks(F,N);K=se.success?se.data:[];break;default:throw new Error(`Unsupported search type: ${t}`)}console.log("🎯 Setting search results:",K),console.log("💡 Setting search suggestions:",D),a(K),l(D),P&&K.length>0&&(x3(t,F,{resultsCount:K.length,hasResults:!0}),w(W0(t))),T&&T(K,F)}catch(K){console.error(`Search error for ${t}:`,K),d(K.message||"Search failed"),a([]),l([]),R&&R(K,F)}finally{u(!1)}}},[t,N,S,j,E,T,R]),O=b.useCallback(F=>{n(F),M(F)},[M]),A=b.useCallback(()=>{n(""),a([]),l([]),d(null),f&&clearTimeout(f)},[f]),B=b.useCallback((F=s)=>{_(F)},[_,s]);b.useEffect(()=>()=>{f&&clearTimeout(f)},[f]);const H=b.useCallback(F=>{n(F.query),m(!1),B(F.query)},[B]);return b.useMemo(()=>({query:s,results:i,suggestions:o,loading:c,error:h,recentSearches:p,showHistory:g,setQuery:O,clearSearch:A,triggerSearch:B,setShowHistory:m,handleHistoryClick:H,hasResults:i.length>0,hasSuggestions:o.length>0,hasRecentSearches:p.length>0,isEmpty:!c&&i.length===0&&s.length>=S,searchType:t,minQueryLength:S,enableHistory:P}),[s,i,o,c,h,p,g,O,A,B,H,t,S,P])},hg=(t={})=>ug("stocks",{enableSuggestions:!0,limit:10,...t}),iN=(t={})=>ug("news",{enableSuggestions:!1,limit:20,...t}),w3=(t={})=>ug("orders",{enableSuggestions:!1,limit:20,minQueryLength:1,...t}),Uo=({placeholder:t="Search...",value:e="",onChange:s,onSearch:n,onClear:i,suggestions:a=[],onSuggestionClick:o,recentSearches:l=[],onHistoryClick:c,showHistory:u=!1,loading:h=!1,disabled:d=!1,size:f="md",showSuggestions:y=!0,enableHistory:p=!0,renderSuggestion:w,renderHistoryItem:g,className:m="",autoFocus:x=!1,...S})=>{const[N,j]=b.useState(!1),[P,E]=b.useState(!1),[T,R]=b.useState(-1),M=b.useRef(null),_=b.useRef(null),O=()=>{j(!0),y&&a.length>0&&E(!0)},A=W=>{setTimeout(()=>{var Y;(Y=_.current)!=null&&Y.contains(document.activeElement)||(j(!1),E(!1))},150)},B=W=>{const Y=W.target.value;s==null||s(Y),y&&Y.length>0&&a.length>0?E(!0):E(!1)},H=()=>{var W;s==null||s(""),i==null||i(),E(!1),(W=M.current)==null||W.focus()},F=W=>{var Y;o==null||o(W),E(!1),(Y=M.current)==null||Y.blur()},K=()=>{const W=[];return ye&&W.push(...l.map(Y=>({type:"history",data:Y}))),q&&W.push(...a.map(Y=>({type:"suggestion",data:Y}))),W},D=W=>{var re;const Y=K();if(W.key==="ArrowDown")W.preventDefault(),Y.length>0&&(R(be=>be<Y.length-1?be+1:0),P||E(!0));else if(W.key==="ArrowUp")W.preventDefault(),Y.length>0&&(R(be=>be>0?be-1:Y.length-1),P||E(!0));else if(W.key==="Enter"){if(W.preventDefault(),T>=0&&Y[T]){const be=Y[T];be.type==="history"?c==null||c(be.data):F(be.data)}else n==null||n(e);E(!1),R(-1)}else W.key==="Escape"?(E(!1),R(-1),(re=M.current)==null||re.blur()):R(-1)};b.useEffect(()=>{x&&M.current&&M.current.focus()},[x]),b.useEffect(()=>{y&&N&&a.length>0&&e.length>0?E(!0):E(!1)},[a,y,N,e]);const V=(W,Y)=>{const re=W.symbol||W.title||W;return r.jsx("div",{className:"search-suggestion-item",children:r.jsxs("div",{className:"suggestion-content",children:[r.jsx("span",{className:"suggestion-text",children:re}),W.name&&r.jsx("span",{className:"suggestion-subtitle",children:W.name})]})},Y)},$=(W,Y)=>r.jsx("div",{className:"search-history-item",children:r.jsxs("div",{className:"history-content",children:[r.jsx(Dt,{className:"history-icon"}),r.jsx("span",{className:"history-text",children:W.query}),r.jsx("span",{className:"history-time",children:new Date(W.timestamp).toLocaleDateString()})]})},Y),Q=w||V,se=g||$,ye=p&&u&&l.length>0&&!e,q=y&&a.length>0&&e;return r.jsxs("div",{className:`search-input-container ${m} size-${f}`,children:[r.jsxs("div",{className:`search-input-wrapper ${N?"focused":""} ${d?"disabled":""}`,children:[r.jsx(Yr,{className:"search-icon"}),r.jsx("input",{ref:M,type:"text",className:"search-input",placeholder:t,value:e,onChange:B,onFocus:O,onBlur:A,onKeyDown:D,disabled:d,...S}),r.jsxs("div",{className:"search-actions",children:[h&&r.jsx(Kl,{className:"search-loading animate-spin"}),e&&!h&&r.jsx("button",{type:"button",className:"search-clear",onClick:H,disabled:d,children:r.jsx(Bt,{})})]})]}),r.jsx(Xe,{children:P&&(ye||q)&&r.jsxs(U.div,{ref:_,className:"search-suggestions-dropdown",initial:{opacity:0,y:-10,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:-10,scale:.95},transition:{duration:.15},children:[ye&&r.jsxs("div",{className:"history-section",children:[r.jsx("div",{className:"section-header",children:r.jsx("span",{className:"section-title",children:"Recent Searches"})}),r.jsx("div",{className:"history-list",children:l.map((W,Y)=>{const re=T===Y;return r.jsx(U.div,{className:`history-item-wrapper ${re?"selected":""}`,onClick:()=>c==null?void 0:c(W),whileHover:{backgroundColor:"var(--hover-bg)"},transition:{duration:.1},children:se(W,Y)},`history-${Y}`)})})]}),q&&r.jsxs("div",{className:"suggestions-section",children:[ye&&r.jsx("div",{className:"section-header",children:r.jsx("span",{className:"section-title",children:"Suggestions"})}),r.jsx("div",{className:"suggestions-list",children:a.map((W,Y)=>{const re=ye?l.length+Y:Y,be=T===re;return r.jsx(U.div,{className:`suggestion-item-wrapper ${be?"selected":""}`,onClick:()=>F(W),whileHover:{backgroundColor:"var(--hover-bg)"},transition:{duration:.1},children:Q(W,Y)},`suggestion-${Y}`)})})]})]})})]})},S3=(t,e,s,n,i)=>{const[a,o]=b.useState({}),[l,c]=b.useState(null),[u,h]=b.useState(!1),[d,f]=b.useState(!1),{portfolioData:y}=hs(),{user:p}=_S(j=>j.auth),w=b.useCallback(async()=>{if(!t)return o({stock:"Please select a stock"}),f(!1),!1;h(!0);const j={};try{(!s||s<=0)&&(j.quantity="Quantity must be greater than 0"),i==="limit"&&(!n||parseFloat(n)<=0)&&(j.price="Please enter a valid limit price");const P=i==="market"?t.price:parseFloat(n)||0,E=s*P,T=S(E),R=e==="buy"?E+T:E-T;return e==="buy"?await g(j,E,R,t):await m(j,s,P,t),i==="limit"&&P>0&&x(j,P,t.price,e),o(j),f(Object.keys(j).length===0),Object.keys(j).length===0}catch(P){return console.error("Validation error:",P),o({general:"Validation failed. Please try again."}),f(!1),!1}finally{h(!1)}},[t,e,s,n,i,y]),g=async(j,P,E,T)=>{E>y.availableCash&&(j.funds=`Insufficient funds. Available: ₹${y.availableCash.toLocaleString("en-IN")}, Required: ₹${E.toLocaleString("en-IN")}`),P<500&&(j.minOrder="Minimum order value is ₹500"),P>1e5&&(j.maxOrder="Maximum order value is ₹1,00,000"),T.volume&&T.volume<s&&(j.availability="Requested quantity exceeds available volume")},m=async(j,P,E,T)=>{const R=y.holdings.find(H=>H.symbol===T.symbol);if(!R){j.shares="You do not own any shares of this stock";return}if(R.quantity<P){j.shares=`Insufficient shares. Available: ${R.quantity}, Requested: ${P}`;return}const M=P*E,_=R.averagePrice||R.averageBuyPrice,O=P*_,A=M-O,B=O>0?A/O*100:0;c({amount:A,percentage:B,isProfit:A>=0,sellValue:M,buyValue:O,avgBuyPrice:_}),M<100&&(j.minSell="Minimum sell value is ₹100")},x=(j,P,E,T)=>{const M=Math.abs(P-E)/E*100;M>20&&(j.priceRange=`Limit price is ${M.toFixed(1)}% away from market price. Consider adjusting.`),T==="buy"&&P>E*1.1&&(j.buyPriceHigh="Limit price is significantly higher than market price"),T==="sell"&&P<E*.9&&(j.sellPriceLow="Limit price is significantly lower than market price")},S=j=>{const P=j*3e-4,E=j*.001,T=j*345e-7,R=(P+T)*.18,M=j*1e-6,_=j*3e-5;return{brokerage:P,stt:E,exchangeCharges:T,gst:R,sebiCharges:M,stampDuty:_,total:P+E+T+R+M+_}},N=b.useCallback(()=>{if(!t||!s)return{grossAmount:0,fees:{total:0},netAmount:0,pricePerShare:0};const j=i==="market"?t.price:parseFloat(n)||0,P=s*j,E=S(P),T=e==="buy"?P+E.total:P-E.total;return{grossAmount:P,fees:E,netAmount:T,pricePerShare:j,quantity:s}},[t,s,n,i,e]);return b.useEffect(()=>{const j=setTimeout(()=>{w()},300);return()=>clearTimeout(j)},[w]),b.useEffect(()=>{t&&(o({}),c(null),f(!1))},[t==null?void 0:t.symbol]),{validationErrors:a,profitLossEstimate:l,isValidating:u,isValid:d,validateOrder:w,getOrderSummary:N,calculateTradingFees:S}},He=(t,e="INR")=>new Intl.NumberFormat("en-IN",{style:"currency",currency:e,minimumFractionDigits:2,maximumFractionDigits:2}).format(t),Ci=(t,e=2)=>`${t>=0?"+":""}${t.toFixed(e)}%`,b3=(t,e=!0)=>{const[s,n]=b.useState(null),[i,a]=b.useState(!1),[o,l]=b.useState(null),[c,u]=b.useState(!1),h=b.useCallback(async S=>{if(!S||!e){n(null),u(!1),l(null);return}a(!0),l(null);try{if(!await d(S)){u(!1),l(`Invalid stock symbol: ${S}`),n(null);return}const j=await y(S);j?(n(j),u(!0),l(null)):(u(!1),l("Failed to fetch stock data"),n(null))}catch(N){console.error("Stock validation error:",N),l(N.message||"Failed to validate stock"),u(!1),n(null)}finally{a(!1)}},[e]),d=async S=>{try{const N=/^[A-Z0-9&-]{1,20}$/,j=/^[0-9]{6}$/;if(!N.test(S)&&!j.test(S))return!1;const P=await fetch(`http://localhost:5001/api/stocks/validate/${S}`,{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}});return P.ok?(await P.json()).isValid:f(S)}catch(N){return console.error("Symbol validation error:",N),f(S)}},f=S=>["RELIANCE","TCS","HDFCBANK","INFY","HINDUNILVR","ICICIBANK","KOTAKBANK","BHARTIARTL","ITC","SBIN","BAJFINANCE","ASIANPAINT","MARUTI","AXISBANK","LT","DMART","SUNPHARMA","TITAN","ULTRACEMCO","NESTLEIND","WIPRO","TECHM","POWERGRID","NTPC","ONGC","TATAMOTORS","BAJAJFINSV","HCLTECH","COALINDIA","DRREDDY","EICHERMOT","ADANIPORTS","JSWSTEEL","TATASTEEL","GRASIM","CIPLA","BRITANNIA","DIVISLAB","APOLLOHOSP","BPCL","HEROMOTOCO","SHREECEM","PIDILITIND","DABUR"].includes(S.toUpperCase()),y=async S=>{try{const N=await fetch(`http://localhost:5001/api/stocks/quote/${S}`,{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}});if(N.ok){const j=await N.json();return{symbol:j.symbol,name:j.name||j.symbol,price:j.price||j.c||0,change:j.change||j.d||0,changePercent:j.changePercent||j.dp||0,volume:j.volume||j.v||0,high:j.high||j.h||0,low:j.low||j.l||0,open:j.open||j.o||0,previousClose:j.previousClose||j.pc||0,marketCap:j.marketCap||0,pe:j.pe||0,lastUpdated:new Date().toISOString()}}return p(S)}catch(N){return console.error("Stock data fetch error:",N),p(S)}},p=S=>{const N=Math.random()*2e3+100,j=(Math.random()-.5)*100,P=j/N*100;return{symbol:S.toUpperCase(),name:`${S.toUpperCase()} Limited`,price:parseFloat(N.toFixed(2)),change:parseFloat(j.toFixed(2)),changePercent:parseFloat(P.toFixed(2)),volume:Math.floor(Math.random()*1e6),high:parseFloat((N+Math.abs(j)).toFixed(2)),low:parseFloat((N-Math.abs(j)).toFixed(2)),open:parseFloat((N-j).toFixed(2)),previousClose:parseFloat((N-j).toFixed(2)),marketCap:Math.floor(Math.random()*1e12),pe:parseFloat((Math.random()*50+5).toFixed(2)),lastUpdated:new Date().toISOString()}},w=b.useCallback(()=>{if(!s||!e)return;const S=setInterval(async()=>{try{const N=await y(s.symbol);N&&n(j=>({...j,...N,lastUpdated:new Date().toISOString()}))}catch(N){console.error("Price update error:",N)}},3e4);return()=>clearInterval(S)},[s,e]);b.useEffect(()=>{const S=setTimeout(()=>{t&&t.length>=2?h(t):(n(null),u(!1),l(null))},500);return()=>clearTimeout(S)},[t,h]),b.useEffect(()=>{if(s&&e)return w()},[s,e,w]);const g=b.useCallback(async()=>{s&&await h(s.symbol)},[s,h]),m=b.useCallback(()=>s?s.change>0?"positive":s.change<0?"negative":"neutral":"neutral",[s]),x=b.useCallback(()=>{const S=new Date,N=S.getDay(),j=S.getHours(),P=S.getMinutes(),E=j*100+P;return N===0||N===6?!1:E>=915&&E<=1530},[]);return{stockData:s,isLoading:i,error:o,isValidSymbol:c,refreshStockData:g,getPriceTrend:m,isMarketOpen:x(),validateAndFetchStock:h}},j3=(t,e=2)=>typeof t!="number"?"₹0.00":`₹${t.toLocaleString("en-IN",{minimumFractionDigits:e,maximumFractionDigits:e})}`,N3=({notification:t,onClose:e,onAction:s,theme:n="light"})=>{const i=o=>{const l={size:20};switch(o){case"success":return r.jsx(Os,{...l,className:"toast-icon success"});case"error":return r.jsx(fn,{...l,className:"toast-icon error"});case"warning":return r.jsx(Kn,{...l,className:"toast-icon warning"});case"alert":return r.jsx(It,{...l,className:"toast-icon alert"});case"info":default:return r.jsx(Mu,{...l,className:"toast-icon info"})}},a=()=>{t.link&&window.open(t.link,"_blank"),s&&s(t)};return r.jsxs(U.div,{className:`notification-toast ${t.type} ${n}`,initial:{opacity:0,x:300,scale:.9},animate:{opacity:1,x:0,scale:1},exit:{opacity:0,x:300,scale:.9},transition:{type:"spring",stiffness:300,damping:30},children:[r.jsx("div",{className:"toast-icon-container",children:i(t.type)}),r.jsxs("div",{className:"toast-content",children:[r.jsx("div",{className:"toast-title",children:t.title}),t.message&&r.jsx("div",{className:"toast-message",children:t.message}),t.link&&r.jsxs(U.button,{className:"toast-action",onClick:a,whileHover:{scale:1.05},whileTap:{scale:.95},children:["View Details",r.jsx(_u,{size:14})]})]}),r.jsx(U.button,{className:"toast-close",onClick:e,whileHover:{scale:1.1},whileTap:{scale:.9},children:r.jsx(Bt,{size:16})})]})},gd=(t,e="light")=>{const n={toastId:`notification-${t.id}`,position:"top-right",autoClose:t.type==="error"?7e3:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,closeButton:!1},i=({closeToast:a})=>r.jsx(N3,{notification:t,onClose:a,theme:e});switch(t.type){case"success":return X.success(i,n);case"error":return X.error(i,n);case"warning":return X.warning(i,n);case"info":case"alert":default:return X.info(i,n)}},Sl={success:(t,e,s,n,i="light")=>{const a={id:Date.now(),type:"success",title:`${t} Order Executed`,message:`${t==="buy"?"Bought":"Sold"} ${s} shares of ${e} at ₹${n.toLocaleString("en-IN")}`,link:"/orders"};return gd(a,i)},pending:(t,e,s,n="light")=>{const i={id:Date.now(),type:"info",title:`${t} Order Pending`,message:`Placing ${t} order for ${s} shares of ${e}`,link:"/orders"};return gd(i,n)},error:(t,e,s="light")=>{const n={id:Date.now(),type:"error",title:"Order Failed",message:e||t,link:"/orders"};return gd(n,s)}},k3=t=>{X.dismiss(t)},C3=(t,e)=>{let s;return(...n)=>{clearTimeout(s),s=setTimeout(()=>t.apply(null,n),e)}},P3=(t,e)=>{let s;return(...n)=>{s||(t.apply(null,n),s=!0,setTimeout(()=>s=!1,e))}};class T3{constructor(){this.intervals=new Set,this.timeouts=new Set,this.listeners=new Set}addInterval(e){return this.intervals.add(e),e}addTimeout(e){return this.timeouts.add(e),e}addListener(e,s,n){const i={element:e,event:s,handler:n};return this.listeners.add(i),e.addEventListener(s,n),i}cleanup(){this.intervals.forEach(e=>clearInterval(e)),this.intervals.clear(),this.timeouts.forEach(e=>clearTimeout(e)),this.timeouts.clear(),this.listeners.forEach(({element:e,event:s,handler:n})=>{e.removeEventListener(s,n)}),this.listeners.clear()}}const rN=()=>{const t=b.useRef(new T3);return b.useEffect(()=>()=>{t.current.cleanup()},[]),t.current};class aN{constructor(e=100){this.maxSize=e,this.cache=new Map}get(e){if(this.cache.has(e)){const s=this.cache.get(e);return this.cache.delete(e),this.cache.set(e,s),s}return null}set(e,s){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){const n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(e,s)}clear(){this.cache.clear()}size(){return this.cache.size}}const E3=(t=[],e=!0)=>{const[s,n]=b.useState({}),[i,a]=b.useState(!1),[o,l]=b.useState(null),[c,u]=b.useState(0),h=b.useRef(null),d=b.useRef(null),f=b.useRef(null),y=b.useRef([]),p=b.useRef(null);b.useRef(new aN(1e3)),rN();const w={wsUrl:"wss://ws.finnhub.io?token=YOUR_FINNHUB_TOKEN",fallbackInterval:e?3e4:6e4,debounceDelay:50,reconnectDelay:5e3,maxReconnectAttempts:5,batchSize:10,maxCacheAge:3e4},g=b.useCallback(()=>{if(y.current.length===0)return;const _=[...y.current];y.current=[];const O=_.reduce((A,B)=>(A[B.symbol]=B,A),{});n(A=>{const B={...A};let H=!1;return Object.values(O).forEach(F=>{const K=B[F.symbol];(!K||K.price!==F.price)&&(B[F.symbol]={...F,previousPrice:(K==null?void 0:K.price)||F.price,priceDirection:K?F.price>K.price?"up":F.price<K.price?"down":"same":"same",lastUpdated:new Date().toISOString()},H=!0)}),H&&(l(new Date().toISOString()),u(F=>F+1)),B})},[]),m=b.useCallback(_=>{y.current.push(_),p.current&&clearTimeout(p.current),p.current=setTimeout(()=>{g()},w.debounceDelay)},[g,w.debounceDelay]),x=b.useCallback(()=>{if(!(!e||t.length===0))try{h.current=new WebSocket(w.wsUrl),h.current.onopen=()=>{console.log("WebSocket connected"),a(!0),t.forEach(_=>{h.current.send(JSON.stringify({type:"subscribe",symbol:_.toUpperCase()}))})},h.current.onmessage=_=>{try{const O=JSON.parse(_.data);O.type==="trade"&&O.data.forEach(A=>{m({symbol:A.s,price:A.p,volume:A.v,timestamp:A.t,change:0,changePercent:0})})}catch(O){console.error("WebSocket message parsing error:",O)}},h.current.onclose=()=>{console.log("WebSocket disconnected"),a(!1),e&&(f.current=setTimeout(()=>{x()},w.reconnectDelay))},h.current.onerror=_=>{console.error("WebSocket error:",_),a(!1)}}catch(_){console.error("WebSocket connection error:",_),a(!1)}},[e,t,m,w.wsUrl,w.reconnectDelay]),S=b.useCallback(async()=>{if(!(!e||t.length===0))try{const _=t.map(async A=>{try{const B=await fetch(`http://localhost:5001/api/stocks/quote/${A}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`,"Content-Type":"application/json"}});if(B.ok){const H=await B.json();return{symbol:H.symbol,price:H.price||H.c,change:H.change||H.d,changePercent:H.changePercent||H.dp,volume:H.volume||H.v,high:H.high||H.h,low:H.low||H.l,timestamp:Date.now()}}}catch(B){console.error(`Error fetching ${A}:`,B)}return null});(await Promise.all(_)).filter(Boolean).forEach(m)}catch(_){console.error("Polling error:",_)}},[e,t,m]),N=b.useCallback(()=>{d.current&&clearInterval(d.current),d.current=setInterval(S,w.fallbackInterval),S()},[S,w.fallbackInterval]);b.useEffect(()=>{if(!e||t.length===0)return;x();const _=setTimeout(()=>{i||N()},2e3);return()=>{clearTimeout(_)}},[e,t,x,N,i]),b.useEffect(()=>()=>{h.current&&h.current.close(),d.current&&clearInterval(d.current),f.current&&clearTimeout(f.current),p.current&&clearTimeout(p.current)},[]);const j=b.useCallback(_=>s[_==null?void 0:_.toUpperCase()]||null,[s]),P=b.useCallback(_=>_.map(O=>({symbol:O,...j(O)})).filter(Boolean),[j]),E=b.useCallback(_=>{h.current&&h.current.readyState===WebSocket.OPEN&&h.current.send(JSON.stringify({type:"subscribe",symbol:_.toUpperCase()}))},[]),T=b.useCallback(_=>{h.current&&h.current.readyState===WebSocket.OPEN&&h.current.send(JSON.stringify({type:"unsubscribe",symbol:_.toUpperCase()}))},[]),R=b.useCallback(()=>{S()},[S]),M=b.useCallback((_,O,A)=>{const B=j(_);if(!B||!O||!A)return{pnl:0,pnlPercent:0,unrealized:!0};const H=O*B.price,F=O*A,K=H-F,D=K/F*100;return{pnl:K,pnlPercent:D,currentValue:H,investedValue:F,unrealized:!0,lastUpdated:B.lastUpdated}},[j]);return{prices:s,isConnected:i,lastUpdate:o,updateCount:c,getPrice:j,getPrices:P,subscribe:E,unsubscribe:T,refresh:R,calculatePnL:M,connectionStatus:i?"connected":"disconnected"}},L3=(t,e)=>{const s=t>=0?"+":"";return{absolute:`${s}₹${Math.abs(t).toFixed(2)}`,percent:`${s}${e.toFixed(2)}%`,direction:t>0?"up":t<0?"down":"same"}},_3=({stockData:t,orderType:e,quantity:s,orderPrice:n,averagePrice:i=null,className:a=""})=>{const[o,l]=b.useState(!1),[c,u]=b.useState(0),{getPrice:h,isConnected:d,lastUpdate:f}=E3(t?[t.symbol]:[],!0),y=h(t==null?void 0:t.symbol),p=(y==null?void 0:y.price)||(t==null?void 0:t.price)||0,w=b.useMemo(()=>{if(!t||!s||!n)return null;const x=parseInt(s),S=parseFloat(n),N=parseFloat(p);if(e==="buy"){const j=x*S,P=x*N,E=P-j,T=j>0?E/j*100:0,R=N-S,M=S>0?R/S*100:0;return{type:"buy",orderValue:j,currentValue:P,unrealizedPnL:E,unrealizedPnLPercent:T,priceDiff:R,priceDiffPercent:M,breakEvenPrice:S,isProfit:E>=0,recommendation:R>0?"favorable":R<0?"unfavorable":"neutral"}}else{const j=parseFloat(i||S),P=x*S,E=x*j,T=P-E,R=E>0?T/E*100:0,M=x*N,_=M-P;return{type:"sell",investedValue:E,sellValue:P,marketValue:M,realizedPnL:T,realizedPnLPercent:R,opportunityCost:_,opportunityCostPercent:P>0?_/P*100:0,breakEvenPrice:j,isProfit:T>=0,recommendation:_<0?"good_timing":_>0?"consider_waiting":"neutral"}}},[t,e,s,n,p,i]);if(b.useEffect(()=>{l(!!w),w&&u(x=>x+1)},[w]),b.useEffect(()=>{y&&f&&u(x=>x+1)},[y,f]),!o||!w)return null;const g=x=>{switch(x){case"favorable":case"good_timing":return"#10B981";case"unfavorable":case"consider_waiting":return"#EF4444";default:return"#6B7280"}},m=(x,S)=>{if(S==="buy")switch(x){case"favorable":return"Good entry point - price below market";case"unfavorable":return"Consider waiting - price above market";default:return"Price aligned with market"}else switch(x){case"good_timing":return"Good timing - selling above market";case"consider_waiting":return"Consider waiting - market price higher";default:return"Price aligned with market"}};return r.jsxs(U.div,{className:`live-pnl-calculator ${a}`,initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,ease:"easeOut"},children:[r.jsxs("div",{className:"pnl-header",children:[r.jsxs("div",{className:"pnl-title",children:[r.jsx(Ns,{className:"pnl-icon"}),r.jsx("span",{children:"Live P&L Calculator"})]}),r.jsxs("div",{className:"connection-status",children:[r.jsx("div",{className:`status-indicator ${d?"connected":"disconnected"}`}),r.jsx("span",{className:"status-text",children:d?"Live":"Delayed"})]})]}),r.jsxs("div",{className:"current-price-section",children:[r.jsx("div",{className:"price-label",children:"Current Market Price"}),r.jsxs("div",{className:"price-display",children:[r.jsx("span",{className:"price-value",children:He(p)}),y&&r.jsxs(U.div,{className:`price-change ${y.priceDirection}`,initial:{scale:1},animate:{scale:[1,1.1,1]},transition:{duration:.3},children:[y.priceDirection==="up"&&r.jsx(Oe,{size:14}),y.priceDirection==="down"&&r.jsx(lt,{size:14}),r.jsx("span",{children:L3(y.change,y.changePercent).percent})]})]})]}),r.jsx("div",{className:"pnl-calculations",children:w.type==="buy"?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"calc-row",children:[r.jsx("span",{className:"calc-label",children:"Investment Value:"}),r.jsx("span",{className:"calc-value",children:He(w.orderValue)})]}),r.jsxs("div",{className:"calc-row",children:[r.jsx("span",{className:"calc-label",children:"Current Value:"}),r.jsx("span",{className:"calc-value",children:He(w.currentValue)})]}),r.jsxs("div",{className:"calc-row highlight",children:[r.jsx("span",{className:"calc-label",children:"Unrealized P&L:"}),r.jsxs("span",{className:`calc-value ${w.isProfit?"profit":"loss"}`,children:[w.isProfit?r.jsx(Oe,{size:14}):r.jsx(lt,{size:14}),He(Math.abs(w.unrealizedPnL)),r.jsxs("span",{className:"percent",children:["(",Ci(w.unrealizedPnLPercent),")"]})]})]}),r.jsxs("div",{className:"calc-row",children:[r.jsx("span",{className:"calc-label",children:"Price Difference:"}),r.jsxs("span",{className:`calc-value ${w.priceDiff>=0?"profit":"loss"}`,children:[He(Math.abs(w.priceDiff)),r.jsxs("span",{className:"percent",children:["(",Ci(w.priceDiffPercent),")"]})]})]})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"calc-row",children:[r.jsx("span",{className:"calc-label",children:"Invested Value:"}),r.jsx("span",{className:"calc-value",children:He(w.investedValue)})]}),r.jsxs("div",{className:"calc-row",children:[r.jsx("span",{className:"calc-label",children:"Sale Value:"}),r.jsx("span",{className:"calc-value",children:He(w.sellValue)})]}),r.jsxs("div",{className:"calc-row highlight",children:[r.jsx("span",{className:"calc-label",children:"Realized P&L:"}),r.jsxs("span",{className:`calc-value ${w.isProfit?"profit":"loss"}`,children:[w.isProfit?r.jsx(Oe,{size:14}):r.jsx(lt,{size:14}),He(Math.abs(w.realizedPnL)),r.jsxs("span",{className:"percent",children:["(",Ci(w.realizedPnLPercent),")"]})]})]}),r.jsxs("div",{className:"calc-row",children:[r.jsx("span",{className:"calc-label",children:"Opportunity Cost:"}),r.jsxs("span",{className:`calc-value ${w.opportunityCost<=0?"profit":"loss"}`,children:[He(Math.abs(w.opportunityCost)),r.jsxs("span",{className:"percent",children:["(",Ci(w.opportunityCostPercent),")"]})]})]})]})}),r.jsx("div",{className:"pnl-recommendation",children:r.jsxs("div",{className:"recommendation-indicator",style:{color:g(w.recommendation)},children:[r.jsx(St,{size:16}),r.jsx("span",{children:m(w.recommendation,w.type)})]})}),r.jsxs("div",{className:"break-even-info",children:[r.jsx(fj,{size:14}),r.jsxs("span",{children:["Break-even: ",He(w.breakEvenPrice)]})]}),f&&r.jsxs("div",{className:"last-update",children:[r.jsx(Dt,{size:12}),r.jsxs("span",{children:["Updated: ",new Date(f).toLocaleTimeString()]})]})]},c)},R3=({stockData:t,orderType:e,portfolioData:s,currentPrice:n,onQuantitySelect:i,selectedQuantity:a,className:o=""})=>{const l=b.useMemo(()=>{if(!t||!n)return[];const u=[];if(e==="buy"){const d=s.availableCash;[1,5,10,25,50,100,200,500].forEach(g=>{const m=g*n;m<=d&&m>=500&&u.push({type:"round",quantity:g,amount:m,label:`${g} shares`,description:"Round number",icon:$c,priority:2})}),[1e3,2500,5e3,1e4,25e3,5e4].forEach(g=>{if(g<=d){const m=Math.floor(g/n);m>0&&u.push({type:"amount",quantity:m,amount:m*n,label:`₹${g.toLocaleString("en-IN")}`,description:`${m} shares`,icon:St,priority:3})}}),[10,25,50,75,100].forEach(g=>{const m=d*g/100,x=Math.floor(m/n);x>0&&m>=500&&u.push({type:"percentage",quantity:x,amount:x*n,label:`${g}%`,description:`${x} shares of available cash`,icon:fj,priority:g===25||g===50?1:2})});const w=s.totalValue||0;w>0&&[2,5,10].forEach(m=>{const x=w*m/100,S=Math.floor(x/n);S>0&&x<=d&&u.push({type:"diversification",quantity:S,amount:S*n,label:`${m}% of portfolio`,description:`${S} shares for diversification`,icon:jo,priority:1})})}else{const d=s.holdings.find(g=>g.symbol===t.symbol);if(!d||d.quantity===0)return[];const f=d.quantity,y=d.averagePrice||d.averageBuyPrice||0;if([25,50,75,100].forEach(g=>{const m=Math.floor(f*g/100);if(m>0){const x=m*n,S=m*y,N=x-S,j=S>0?N/S*100:0;u.push({type:"profit",quantity:m,amount:x,label:`${g}% of holding`,description:`${m} shares • ${N>=0?"Profit":"Loss"}: ₹${Math.abs(N).toLocaleString("en-IN")}`,icon:N>=0?Oe:Ot,priority:N>=0?1:3,profitLoss:N,profitPercent:j})}}),[1,5,10,25,50,100].forEach(g=>{if(g<=f){const m=g*n,x=g*y,S=m-x;u.push({type:"round",quantity:g,amount:m,label:`${g} shares`,description:`${S>=0?"Profit":"Loss"}: ₹${Math.abs(S).toLocaleString("en-IN")}`,icon:$c,priority:2,profitLoss:S})}}),y>0&&n!==y){const g=Math.min(f,Math.floor(f/2));g>0&&u.push({type:"breakeven",quantity:g,amount:g*n,label:"Break-even",description:`${g} shares at current price`,icon:gj,priority:n>=y?1:3})}}return u.filter((d,f,y)=>f===y.findIndex(p=>p.quantity===d.quantity)).sort((d,f)=>d.priority!==f.priority?d.priority-f.priority:d.quantity-f.quantity).slice(0,8)},[t,e,s,n]);if(l.length===0)return null;l.reduce((u,h)=>{const d=h.type;return u[d]||(u[d]=[]),u[d].push(h),u},{});const c=u=>{switch(u.type){case"percentage":case"diversification":return"#8B5CF6";case"amount":return"#10B981";case"profit":return u.profitLoss>=0?"#10B981":"#EF4444";case"round":return"#3B82F6";case"breakeven":return"#F59E0B";default:return"#6B7280"}};return r.jsxs("div",{className:`smart-quantity-suggestions ${o}`,children:[r.jsxs("div",{className:"suggestions-header",children:[r.jsx(Gr,{className:"suggestions-icon"}),r.jsx("span",{className:"suggestions-title",children:"Smart Suggestions"})]}),r.jsx("div",{className:"suggestions-grid",children:l.map((u,h)=>{const d=u.icon,f=a===u.quantity,y=c(u);return r.jsxs(U.button,{className:`suggestion-card ${f?"selected":""}`,onClick:()=>i(u.quantity),initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.2,delay:h*.05},whileHover:{scale:1.02},whileTap:{scale:.98},style:{"--suggestion-color":y},children:[r.jsxs("div",{className:"suggestion-header",children:[r.jsx(d,{className:"suggestion-icon",size:16}),r.jsx("span",{className:"suggestion-label",children:u.label})]}),r.jsxs("div",{className:"suggestion-details",children:[r.jsx("div",{className:"suggestion-description",children:u.description}),r.jsxs("div",{className:"suggestion-amount",children:["₹",u.amount.toLocaleString("en-IN")]})]}),u.profitLoss!==void 0&&r.jsxs("div",{className:`profit-indicator ${u.profitLoss>=0?"profit":"loss"}`,children:[u.profitLoss>=0?"+":"","₹",Math.abs(u.profitLoss).toLocaleString("en-IN"),u.profitPercent!==void 0&&r.jsxs("span",{className:"profit-percent",children:["(",u.profitPercent>=0?"+":"",u.profitPercent.toFixed(1),"%)"]})]}),u.priority===1&&r.jsxs("div",{className:"priority-badge",children:[r.jsx(Gr,{size:10}),"Recommended"]})]},`${u.type}-${u.quantity}`)})}),r.jsx("div",{className:"suggestions-footer",children:r.jsx("span",{className:"suggestions-note",children:"Suggestions based on your portfolio and market conditions"})})]})},oN=({isOpen:t,onClose:e,stockData:s=null,initialOrderType:n="buy",onOrderPlaced:i,onShowConfirmation:a})=>{var se,ye;const[o,l]=b.useState(n),[c,u]=b.useState("market"),[h,d]=b.useState(1),[f,y]=b.useState(""),[p,w]=b.useState(!1),[g,m]=b.useState(!1),{portfolioData:x,buyStock:S,sellStock:N}=hs(),{user:j}=_S(q=>q.auth),P=document.documentElement.getAttribute("data-theme")||"light",{validationErrors:E,profitLossEstimate:T,isValidating:R,isValid:M,getOrderSummary:_}=S3(s,o,h,f,c),{stockData:O,isLoading:A,refreshStockData:B,isMarketOpen:H}=b3(s==null?void 0:s.symbol,t),F=O||s;b.useEffect(()=>{var q;t&&F&&(y(((q=F.price)==null?void 0:q.toString())||""),d(1))},[t,F]),b.useEffect(()=>{if(t&&(F!=null&&F.symbol)){const q=setInterval(()=>{B()},3e4);return()=>clearInterval(q)}},[t,F==null?void 0:F.symbol,B]);const K=_(),D=q=>{const W=Math.max(1,h+q);d(W)},V=()=>{if(!F)return[];const q=c==="market"?F.price:parseFloat(f)||F.price;if(o==="buy"){const W=x.availableCash,Y=[];return[1e3,2500,5e3,1e4].forEach(we=>{const he=Math.floor(we/q);he>0&&we<=W&&Y.push({value:he,label:`${he} shares`,amount:he*q,disabled:!1})}),[25,50,75,100].forEach(we=>{const he=W*we/100,Ce=Math.floor(he/q);Ce>0&&!Y.find(le=>le.value===Ce)&&Y.push({value:Ce,label:`${we}% (${Ce})`,amount:Ce*q,disabled:!1})}),Y.sort((we,he)=>we.value-he.value).slice(0,6).map(we=>({...we,disabled:we.amount>W}))}else{const W=x.holdings.find(he=>he.symbol===F.symbol);if(!W||W.quantity===0)return[];const Y=W.quantity,re=[];return[1,5,10,25,50,100].forEach(he=>{he<=Y&&re.push({value:he,label:`${he} shares`,amount:he*q,disabled:!1})}),[25,50,75,100].forEach(he=>{const Ce=Math.floor(Y*he/100);Ce>0&&!re.find(le=>le.value===Ce)&&re.push({value:Ce,label:`${he}% (${Ce})`,amount:Ce*q,disabled:!1})}),re.find(he=>he.value===Y)||re.push({value:Y,label:`All (${Y})`,amount:Y*q,disabled:!1}),re.sort((he,Ce)=>he.value-Ce.value).slice(0,6)}},$=()=>{!M||p&&!document.getElementById("confirm-checkbox").checked||(a?a({orderData:{orderType:o,orderMethod:c,quantity:h,limitPrice:f},stockData:F,orderSummary:K,profitLossEstimate:T,onConfirm:Q}):console.warn("OrderModal: onShowConfirmation prop not provided. Order confirmation disabled."))},Q=async()=>{m(!0);try{const q=c==="market"?F.price:parseFloat(f);console.log("🚀 Placing order:",{orderType:o,symbol:F.symbol,quantity:h,orderPrice:q,orderMethod:c});const W=Sl.pending(o,F.symbol,h,P);let Y;if(o==="buy"?Y=await S(F.symbol,h,q,F):Y=await N(F.symbol,h,q,F),k3(W),Y.success){if(console.log("✅ Order successful:",Y),o==="buy")Sl.buySuccess(F.symbol,h,q,P);else{const re=T?T.amount:0;Sl.sellSuccess(F.symbol,h,q,re,P)}x!=null&&x.refreshPortfolio&&x.refreshPortfolio(),i==null||i(),e()}else throw console.error("❌ Order failed:",Y),new Error(Y.error||"Order failed")}catch(q){console.error("❌ Order error:",q),Sl.error("Order failed",q.message||"An unexpected error occurred",P)}finally{m(!1)}};return t?r.jsx(Xe,{children:r.jsx(U.div,{className:"order-modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:q=>q.target===q.currentTarget&&e(),children:r.jsxs(U.div,{className:"order-modal",initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{duration:.3,ease:[.4,0,.2,1]},children:[r.jsxs("div",{className:"order-modal-header",children:[r.jsxs("h2",{className:"order-modal-title",children:[r.jsx(Tt,{}),o==="buy"?"Buy Order":"Sell Order"]}),r.jsx("button",{className:"order-modal-close",onClick:e,children:r.jsx(Bt,{size:20})})]}),r.jsxs("div",{className:"order-modal-body",children:[F&&r.jsxs("div",{className:"order-stock-info",children:[r.jsxs("div",{className:"order-stock-details",children:[r.jsx("h3",{children:F.symbol}),r.jsx("p",{children:F.name||F.symbol}),!H&&r.jsxs("span",{className:"market-closed-indicator",children:[r.jsx(Dt,{size:12}),"Market Closed"]})]}),r.jsxs("div",{className:"order-stock-price",children:[r.jsx(Vi,{price:F.price,change:F.change,changePercent:F.changePercent,size:"large"}),A&&r.jsxs("div",{className:"price-loading",children:[r.jsx("div",{className:"loading-spinner"}),"Updating..."]})]})]}),r.jsxs("div",{className:"order-form-section",children:[r.jsxs("h3",{className:"section-title",children:[r.jsx(Ns,{}),"Order Type"]}),r.jsxs("div",{className:"order-type-toggle",children:[r.jsxs("button",{className:`order-type-btn ${o==="buy"?"active buy":""}`,onClick:()=>l("buy"),children:[r.jsx(Oe,{}),"Buy"]}),r.jsxs("button",{className:`order-type-btn ${o==="sell"?"active sell":""}`,onClick:()=>l("sell"),children:[r.jsx(lt,{}),"Sell"]})]})]}),r.jsx("div",{className:"order-form-section",children:r.jsxs("div",{className:"order-method-select",children:[r.jsx("label",{htmlFor:"order-method",children:"Order Method"}),r.jsxs("select",{id:"order-method",value:c,onChange:q=>u(q.target.value),children:[r.jsx("option",{value:"market",children:"Market Order"}),r.jsx("option",{value:"limit",children:"Limit Order"})]})]})}),r.jsxs("div",{className:"order-form-section",children:[r.jsxs("div",{className:"order-inputs-grid",children:[r.jsxs("div",{className:"order-input-group full-width",children:[r.jsx("label",{children:"Quantity"}),r.jsx(R3,{stockData:F,orderType:o,portfolioData:x,currentPrice:c==="market"?(F==null?void 0:F.price)||0:parseFloat(f)||0,onQuantitySelect:d,selectedQuantity:h}),r.jsx("div",{className:"quantity-options",children:V().map(q=>r.jsxs("button",{className:`quantity-option-btn ${h===q.value?"active":""}`,onClick:()=>d(q.value),disabled:q.disabled,children:[r.jsx("span",{className:"option-value",children:q.label}),r.jsxs("span",{className:"option-amount",children:["₹",(q.value*(c==="market"?(F==null?void 0:F.price)||0:parseFloat(f)||0)).toLocaleString("en-IN")]})]},q.value))}),r.jsxs("div",{className:"order-quantity-control",children:[r.jsx("button",{className:"qty-control-btn",onClick:()=>D(-1),disabled:h<=1,children:r.jsx(Ou,{})}),r.jsx("input",{type:"number",className:"qty-control-input",value:h,onChange:q=>d(Math.max(1,parseInt(q.target.value)||1)),min:"1",placeholder:"Enter quantity"}),r.jsx("button",{className:"qty-control-btn",onClick:()=>D(1),children:r.jsx(Mn,{})})]}),r.jsxs("div",{className:"investment-amount-display",children:[r.jsx("span",{className:"investment-label",children:"Investment Amount:"}),r.jsxs("span",{className:"investment-value",children:["₹",(h*(c==="market"?(F==null?void 0:F.price)||0:parseFloat(f)||0)).toLocaleString("en-IN")]})]}),E.quantity&&r.jsx("span",{className:"error-text",children:E.quantity})]}),c==="limit"&&r.jsxs("div",{className:"order-input-group",children:[r.jsx("label",{children:"Limit Price (₹)"}),r.jsx("input",{type:"number",className:"order-price-input",value:f,onChange:q=>y(q.target.value),placeholder:"Enter limit price",step:"0.01"}),E.price&&r.jsx("span",{className:"error-text",children:E.price})]})]}),E.funds&&r.jsxs("div",{className:"error-message",children:[r.jsx(Kn,{}),E.funds]}),E.shares&&r.jsxs("div",{className:"error-message",children:[r.jsx(Kn,{}),E.shares]})]}),F&&h>0&&(c==="market"||f)&&r.jsx("div",{className:"order-form-section",children:r.jsx(_3,{stockData:F,orderType:o,quantity:h,orderPrice:c==="market"?F.price:parseFloat(f)||0,averagePrice:o==="sell"?(se=x.holdings.find(q=>q.symbol===F.symbol))==null?void 0:se.averagePrice:null})}),r.jsx("div",{className:"order-form-section",children:r.jsxs("div",{className:"order-summary-card",children:[r.jsxs("h3",{className:"order-summary-title",children:[r.jsx(St,{}),"Order Summary"]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{className:"summary-label",children:"Quantity:"}),r.jsxs("span",{className:"summary-value",children:[h," shares"]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{className:"summary-label",children:"Price per share:"}),r.jsx("span",{className:"summary-value",children:j3(K.pricePerShare)})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{className:"summary-label",children:"Gross amount:"}),r.jsx("span",{className:"summary-value",children:He(K.grossAmount)})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{className:"summary-label",children:"Fees & charges:"}),r.jsx("span",{className:"summary-value",children:He(K.fees.total)})]}),r.jsxs("div",{className:"summary-row total",children:[r.jsx("span",{className:"summary-label",children:"Net amount:"}),r.jsx("span",{className:"summary-value",children:He(K.netAmount)})]}),T&&r.jsxs("div",{className:`profit-loss-indicator ${T.isProfit?"profit":"loss"}`,children:[T.isProfit?r.jsx(Oe,{}):r.jsx(lt,{}),"Estimated ",T.isProfit?"Profit":"Loss",":",He(Math.abs(T.amount)),"(",Ci(T.percentage),")"]})]})}),r.jsxs("div",{className:"confirm-checkbox",children:[r.jsx("input",{type:"checkbox",id:"confirm-checkbox",checked:p,onChange:q=>w(q.target.checked)}),r.jsxs("label",{htmlFor:"confirm-checkbox",children:["I confirm that I want to place this ",o," order"]})]}),r.jsxs("div",{className:"order-modal-actions",children:[r.jsx("button",{className:"order-action-btn cancel",onClick:e,disabled:g,children:"Cancel"}),r.jsx("button",{className:`order-action-btn ${o==="buy"?"place-buy":"place-sell"}`,onClick:$,disabled:g||!M||R||p&&!((ye=document.getElementById("confirm-checkbox"))!=null&&ye.checked),children:g?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"loading-spinner"}),"Placing Order..."]}):`Place ${o==="buy"?"Buy":"Sell"} Order`})]})]})]})})}):null},M3=({isOpen:t,position:e,stockData:s,onClose:n,onQuickBuy:i,onQuickSell:a,onViewChart:o,onAddToWatchlist:l,onViewDetails:c,hasHolding:u=!1,isInWatchlist:h=!1})=>{var w,g,m;const d=b.useRef(null),[f,y]=b.useState(e);if(b.useEffect(()=>{if(t&&d.current&&e){const S=d.current.getBoundingClientRect(),N={width:window.innerWidth,height:window.innerHeight};let{x:j,y:P}=e;j+S.width>N.width&&(j=N.width-S.width-10),j<10&&(j=10),P+S.height>N.height&&(P=N.height-S.height-10),P<10&&(P=10),y({x:j,y:P})}},[t,e]),b.useEffect(()=>{const x=N=>{d.current&&!d.current.contains(N.target)&&n()},S=N=>{N.key==="Escape"&&n()};return t&&(document.addEventListener("mousedown",x),document.addEventListener("keydown",S)),()=>{document.removeEventListener("mousedown",x),document.removeEventListener("keydown",S)}},[t,n]),!t||!s)return null;const p=[{id:"quick-sell",label:"Quick Sell",icon:lt,action:()=>{a(s),n()},color:"red",disabled:!u,shortcut:"S"},{id:"enhanced-order",label:"Enhanced Order",icon:Tt,action:()=>{n()},color:"blue",shortcut:"E"},{id:"view-chart",label:"View Chart",icon:Ot,action:()=>{o(s),n()},color:"purple",shortcut:"C"},{id:"watchlist",label:h?"Remove from Watchlist":"Add to Watchlist",icon:_i,action:()=>{l(s),n()},color:"orange",shortcut:"W"},{id:"view-details",label:"View Details",icon:Mu,action:()=>{c(s),n()},color:"gray",shortcut:"I"}];return r.jsx(Xe,{children:r.jsxs(U.div,{ref:d,className:"stock-context-menu",style:{position:"fixed",left:f.x,top:f.y,zIndex:1e3},initial:{opacity:0,scale:.95,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-10},transition:{duration:.15,ease:"easeOut"},children:[r.jsxs("div",{className:"context-menu-header",children:[r.jsxs("div",{className:"stock-info",children:[r.jsx("span",{className:"stock-symbol",children:s.symbol}),r.jsxs("span",{className:"stock-price",children:["₹",((w=s.price)==null?void 0:w.toLocaleString("en-IN"))||"0.00"]})]}),r.jsxs("div",{className:`price-change ${s.change>=0?"positive":"negative"}`,children:[s.change>=0?"+":"",((g=s.change)==null?void 0:g.toFixed(2))||"0.00","(",((m=s.changePercent)==null?void 0:m.toFixed(2))||"0.00","%)"]})]}),r.jsx("div",{className:"context-menu-items",children:p.map((x,S)=>r.jsxs(U.button,{className:`context-menu-item ${x.color} ${x.disabled?"disabled":""}`,onClick:x.action,disabled:x.disabled,initial:{opacity:0,x:-10},animate:{opacity:1,x:0},transition:{duration:.1,delay:S*.02},whileHover:{backgroundColor:"var(--hover-bg)"},whileTap:{scale:.98},children:[r.jsxs("div",{className:"menu-item-content",children:[r.jsx(x.icon,{className:"menu-item-icon",size:16}),r.jsx("span",{className:"menu-item-label",children:x.label})]}),r.jsx("span",{className:"menu-item-shortcut",children:x.shortcut})]},x.id))}),r.jsxs("div",{className:"context-menu-footer",children:[r.jsxs("div",{className:"market-status",children:[r.jsx(Ns,{size:12}),r.jsx("span",{children:"Market Open"})]}),r.jsxs("div",{className:"last-updated",children:["Updated: ",new Date().toLocaleTimeString()]})]})]})})},I3=()=>{const[t,e]=b.useState({isOpen:!1,position:{x:0,y:0},stockData:null}),s=(i,a)=>{i.preventDefault(),i.stopPropagation(),e({isOpen:!0,position:{x:i.clientX,y:i.clientY},stockData:a})},n=()=>{e({isOpen:!1,position:{x:0,y:0},stockData:null})};return b.useEffect(()=>{const i=a=>{if(!t.isOpen)return;const{key:o}=a;switch(t.stockData,o.toLowerCase()){case"b":a.preventDefault(),n();break;case"s":a.preventDefault(),n();break;case"c":a.preventDefault(),n();break;case"w":a.preventDefault(),n();break;case"e":a.preventDefault(),n();break;case"i":a.preventDefault(),n();break}};return document.addEventListener("keydown",i),()=>document.removeEventListener("keydown",i)},[t]),{contextMenu:t,openContextMenu:s,closeContextMenu:n}},A3=({user:t,theme:e})=>{var Yo;const[s,n]=b.useState(null),[i,a]=b.useState("market"),[o,l]=b.useState("buy"),[c,u]=b.useState(1),[h,d]=b.useState(""),[f,y]=b.useState(!1),[p,w]=b.useState(!1),[g,m]=b.useState(!1),[x,S]=b.useState(!1),[N,j]=b.useState(null),P=us(),E=Lt(),{portfolioData:T,buyStock:R,sellStock:M}=hs(),{isOpen:_,currentStock:O,defaultQuantity:A,closeSlideToBuy:B}=Yu(),{orderModalState:H,closeOrderModal:F,quickBuy:K,quickSell:D,navigateToTrading:V}=og(),{contextMenu:$,openContextMenu:Q,closeContextMenu:se}=I3(),{isModalOpen:ye,orderData:q,loading:W,closeConfirmation:Y,processOrder:re,confirmBuy:be,confirmSell:we}=Zj(),{query:he,setQuery:Ce,results:le,suggestions:ds,recentSearches:Jt,showHistory:ir,handleHistoryClick:ie,loading:de,clearSearch:Pe,hasResults:qe}=hg({enableSuggestions:!0,enableHistory:!0,limit:20,debounceMs:300,onResults:(J,We)=>{J.length>0&&m(!0)}}),ge=[{title:"Available Balance",value:T.availableCash,icon:St,color:"primary"},{title:"Total Holdings",value:((Yo=T.holdings)==null?void 0:Yo.length)||0,icon:Tt,color:"info"},{title:"Total Invested",value:T.totalInvested,icon:Ot,color:"warning"},{title:"Total P&L",value:T.totalGainLoss,changePercent:T.totalGainLossPercentage,icon:T.totalGainLoss>=0?Oe:lt,color:T.totalGainLoss>=0?"success":"danger"}],fs=[{symbol:"RELIANCE",name:"Reliance Industries",price:2465.3,change:2.71,changePercent:.11,volume:"2.5M"},{symbol:"TCS",name:"Tata Consultancy Services",price:3185.45,change:-14.85,changePercent:-.47,volume:"1.8M"},{symbol:"HDFCBANK",name:"HDFC Bank",price:1650.2,change:51.75,changePercent:3.13,volume:"3.2M"},{symbol:"INFY",name:"Infosys",price:1595.8,change:19.7,changePercent:1.25,volume:"2.1M"},{symbol:"ICICIBANK",name:"ICICI Bank",price:945.15,change:12.3,changePercent:1.32,volume:"4.1M"},{symbol:"WIPRO",name:"Wipro Ltd",price:420.85,change:-3.25,changePercent:-.77,volume:"1.5M"},{symbol:"BAJFINANCE",name:"Bajaj Finance",price:6845.3,change:125.4,changePercent:1.87,volume:"0.8M"},{symbol:"MARUTI",name:"Maruti Suzuki",price:9245.6,change:-85.2,changePercent:-.91,volume:"0.6M"}],vn=[{id:1,symbol:"WIPRO",type:"BUY",quantity:50,price:420,status:"completed",time:"10:30 AM",total:21e3},{id:2,symbol:"BAJFINANCE",type:"SELL",quantity:25,price:6800,status:"completed",time:"11:45 AM",total:17e4},{id:3,symbol:"MARUTI",type:"BUY",quantity:10,price:9200,status:"pending",time:"12:15 PM",total:92e3},{id:4,symbol:"ASIANPAINT",type:"SELL",quantity:15,price:3100,status:"cancelled",time:"01:30 PM",total:46500}];b.useEffect(()=>{const J=new URLSearchParams(P.search),We=J.get("search"),$e=J.get("symbol");if(We&&Ce(We),$e){const ri=fs.find(oa=>oa.symbol===$e)||le.find(oa=>oa.symbol===$e);ri&&xn(ri)}},[P.search,le]);const xn=J=>{var We;n(J),d(((We=J.price)==null?void 0:We.toString())||"")},nh=(J,We="buy")=>{j({...J,initialOrderType:We}),S(!0)},Be=()=>{S(!1),j(null)},ih=J=>{const We={symbol:J.symbol,name:J.name,price:0,change:0,changePercent:0,volume:"N/A"};xn(We),Pe()},rh=async()=>{if(!s||!c)return;const J=i==="market"?s.price:parseFloat(h),We=parseInt(c),$e={symbol:s.symbol,name:s.name,price:J,quantity:We,orderType:i,source:"trading-page"};o==="buy"?be($e.symbol,$e.quantity,$e.price,{name:$e.name,orderType:$e.orderType,source:$e.source}):we($e.symbol,$e.quantity,$e.price,{name:$e.name,orderType:$e.orderType,source:$e.source}),u(1),d("")},ah=async()=>{y(!0),await new Promise(J=>setTimeout(J,1500)),y(!1)},rr=J=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(J),Ho=qe&&g?le.map(J=>({symbol:J.symbol,name:J.name,price:J.price||0,change:J.change||0,changePercent:J.changePercent||0,volume:J.volume||"N/A",exchange:J.exchange})):he&&!qe?fs.filter(J=>J.symbol.toLowerCase().includes(he.toLowerCase())||J.name.toLowerCase().includes(he.toLowerCase())):fs;return r.jsx("div",{className:"trading-page",children:r.jsxs("div",{className:"trading-container",children:[r.jsx(U.div,{className:"trading-header",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6},children:r.jsxs("div",{className:"header-content",children:[r.jsxs("div",{className:"header-left",children:[r.jsxs("h1",{className:"page-title",children:[r.jsx(Tt,{className:"title-icon"}),"Trading"]}),r.jsx("p",{className:"page-subtitle",children:"Buy and sell stocks with real-time market data"})]}),r.jsx("div",{className:"header-actions",children:r.jsxs("button",{className:"btn-premium btn-secondary",onClick:ah,disabled:f,children:[r.jsx(mt,{size:16,className:f?"animate-spin":""}),"Refresh"]})})]})}),r.jsx(U.div,{className:"trading-stats",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},children:ge.map((J,We)=>{const $e=J.icon,ri=J.changePercent>=0;return r.jsxs(U.div,{className:`stat-card stat-${J.color}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:We*.1},children:[r.jsxs("div",{className:"stat-header",children:[r.jsx("div",{className:"stat-icon",children:r.jsx($e,{})}),J.changePercent!==void 0&&r.jsxs("div",{className:`stat-change ${ri?"positive":"negative"}`,children:[ri?r.jsx(So,{size:14}):r.jsx(Wr,{size:14}),Math.abs(J.changePercent),"%"]})]}),r.jsxs("div",{className:"stat-content",children:[r.jsx("h3",{className:"stat-value",children:typeof J.value=="number"&&J.value>1e3?r.jsx(Vc,{end:J.value,duration:2,separator:",",prefix:J.title.includes("Balance")||J.title.includes("P&L")?"₹":""}):J.value}),r.jsx("p",{className:"stat-title",children:J.title})]})]},J.title)})}),r.jsxs("div",{className:"trading-grid",children:[r.jsxs(U.div,{className:"trading-card stocks-panel",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:[r.jsxs("div",{className:"card-header",children:[r.jsxs("h3",{className:"card-title",children:[r.jsx(Ot,{className:"card-icon"}),qe&&g?"Search Results":"Popular Stocks"]}),r.jsx("div",{className:"search-container",children:r.jsx(Uo,{placeholder:"Search stocks...",value:he,onChange:Ce,onClear:()=>{Pe(),m(!1)},suggestions:ds,recentSearches:Jt,onSuggestionClick:ih,onHistoryClick:ie,showHistory:ir,loading:de,size:"sm",showSuggestions:!0,enableHistory:!0,className:"trading-search-input",renderSuggestion:(J,We)=>r.jsx("div",{className:"trading-search-suggestion",children:r.jsxs("div",{className:"suggestion-content",children:[r.jsx("span",{className:"suggestion-symbol",children:J.symbol}),r.jsx("span",{className:"suggestion-name",children:J.name}),J.exchange&&r.jsx("span",{className:"suggestion-exchange",children:J.exchange})]})},We)})})]}),r.jsx("div",{className:"card-content",children:r.jsxs("div",{className:"stocks-list",children:[de&&r.jsxs("div",{className:"loading-state",children:[r.jsx(Ns,{className:"loading-icon animate-spin"}),r.jsx("span",{children:"Searching stocks..."})]}),!de&&Ho.length===0&&he&&r.jsxs("div",{className:"empty-state",children:[r.jsx(Yr,{className:"empty-icon"}),r.jsxs("span",{children:['No stocks found for "',he,'"']})]}),!de&&Ho.map((J,We)=>r.jsxs(U.div,{className:`stock-item ${(s==null?void 0:s.symbol)===J.symbol?"selected":""}`,onClick:$e=>{$e.detail===1?xn(J):$e.detail===2&&E(`/stock/${J.symbol}`)},onContextMenu:$e=>Q($e,J),initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:We*.05},children:[r.jsxs("div",{className:"stock-info",children:[r.jsx("div",{className:"stock-symbol",children:J.symbol}),r.jsx("div",{className:"stock-name",children:J.name}),r.jsxs("div",{className:"stock-volume",children:["Vol: ",J.volume]})]}),r.jsx("div",{className:"stock-price-info",children:r.jsx(Vi,{price:J.price,change:J.change,changePercent:J.changePercent,size:"small"})}),r.jsx("div",{className:"stock-actions",children:r.jsx(Jn,{stockData:J,size:"small",variant:"simple",showText:!1})})]},J.symbol))]})})]}),r.jsxs(U.div,{className:"trading-card order-panel",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},children:[r.jsx("div",{className:"card-header",children:r.jsxs("h3",{className:"card-title",children:[r.jsx(Tt,{className:"card-icon"}),"Place Order"]})}),r.jsx("div",{className:"card-content",children:s?r.jsxs("div",{className:"order-form",children:[r.jsxs("div",{className:"selected-stock",children:[r.jsxs("div",{className:"stock-details",children:[r.jsx("h4",{children:s.symbol}),r.jsx("p",{children:s.name})]}),r.jsx(Vi,{price:s.price,change:s.change,changePercent:s.changePercent,size:"medium"})]}),r.jsxs("div",{className:"order-controls",children:[r.jsxs("div",{className:"transaction-type",children:[r.jsxs("button",{className:`type-btn ${o==="buy"?"active buy":""}`,onClick:()=>l("buy"),children:[r.jsx(Oe,{size:16}),"BUY"]}),r.jsxs("button",{className:`type-btn ${o==="sell"?"active sell":""}`,onClick:()=>l("sell"),children:[r.jsx(lt,{size:16}),"SELL"]})]}),r.jsxs("div",{className:"order-type",children:[r.jsx("label",{children:"Order Type"}),r.jsxs("select",{value:i,onChange:J=>a(J.target.value),className:"order-select",children:[r.jsx("option",{value:"market",children:"Market Order"}),r.jsx("option",{value:"limit",children:"Limit Order"}),r.jsx("option",{value:"stop",children:"Stop Order"})]})]}),r.jsxs("div",{className:"quantity-control",children:[r.jsx("label",{children:"Quantity"}),r.jsxs("div",{className:"quantity-input",children:[r.jsx("button",{className:"qty-btn",onClick:()=>u(Math.max(1,c-1)),children:r.jsx(Ou,{size:14})}),r.jsx("input",{type:"number",value:c,onChange:J=>u(Math.max(1,parseInt(J.target.value)||1)),className:"qty-input",min:"1"}),r.jsx("button",{className:"qty-btn",onClick:()=>u(c+1),children:r.jsx(Mn,{size:14})})]})]}),i!=="market"&&r.jsxs("div",{className:"price-control",children:[r.jsx("label",{children:"Price (₹)"}),r.jsx("input",{type:"number",value:h,onChange:J=>d(J.target.value),className:"price-input",placeholder:"Enter price",step:"0.01"})]}),r.jsxs("div",{className:"order-summary",children:[r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Quantity:"}),r.jsxs("span",{children:[c," shares"]})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Price:"}),r.jsx("span",{children:rr(i==="market"?s.price:parseFloat(h)||0)})]}),r.jsxs("div",{className:"summary-row total",children:[r.jsx("span",{children:"Total:"}),r.jsx("span",{children:rr((i==="market"?s.price:parseFloat(h)||0)*c)})]})]}),r.jsxs("div",{className:"order-actions-grid",children:[r.jsx("button",{className:`place-order-btn ${o}`,onClick:rh,disabled:!c||i!=="market"&&!h||p,children:p?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"loading-spinner sm"}),"Placing Order..."]}):o==="buy"?"Place Buy Order":"Place Sell Order"}),r.jsxs("button",{className:"enhanced-order-btn",onClick:()=>nh(s,o),disabled:!s,children:[r.jsx(Tt,{size:16}),"Enhanced Order"]})]})]})]}):r.jsxs("div",{className:"no-stock-selected",children:[r.jsx(Ns,{size:48}),r.jsx("p",{children:"Select a stock to place an order"})]})})]}),r.jsxs(U.div,{className:"trading-card orders-panel",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},children:[r.jsx("div",{className:"card-header",children:r.jsxs("h3",{className:"card-title",children:[r.jsx(Dt,{className:"card-icon"}),"Recent Orders"]})}),r.jsx("div",{className:"card-content",children:r.jsx("div",{className:"orders-list",children:vn.map((J,We)=>r.jsxs(U.div,{className:"order-item",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:We*.05},children:[r.jsxs("div",{className:"order-info",children:[r.jsx("div",{className:"order-symbol",children:J.symbol}),r.jsxs("div",{className:"order-details",children:[r.jsx("span",{className:`order-type ${J.type.toLowerCase()}`,children:J.type}),r.jsxs("span",{className:"order-quantity",children:[J.quantity," shares"]}),r.jsx("span",{className:"order-time",children:J.time})]})]}),r.jsxs("div",{className:"order-price",children:[r.jsx("div",{className:"price-value",children:rr(J.price)}),r.jsx("div",{className:"total-value",children:rr(J.total)})]}),r.jsxs("div",{className:"order-status",children:[J.status==="completed"&&r.jsx(Os,{className:"status-icon completed"}),J.status==="pending"&&r.jsx(Dt,{className:"status-icon pending"}),J.status==="cancelled"&&r.jsx(fn,{className:"status-icon cancelled"}),r.jsx("span",{className:`status-text ${J.status}`,children:J.status})]})]},J.id))})})]})]}),r.jsx(oN,{isOpen:x||H.isOpen,onClose:()=>{S(!1),F()},stockData:N||H.stockData,initialOrderType:(N==null?void 0:N.initialOrderType)||H.orderType,onOrderPlaced:()=>{Be(),F()},onShowConfirmation:null}),r.jsx(M3,{isOpen:$.isOpen,position:$.position,stockData:$.stockData,onClose:se,onQuickBuy:K,onQuickSell:D,onViewChart:J=>V(J,"buy"),onAddToWatchlist:J=>console.log("Add to watchlist:",J.symbol),onViewDetails:J=>console.log("View details:",J.symbol),hasHolding:$.stockData?T.holdings.some(J=>J.symbol===$.stockData.symbol):!1}),r.jsx(eN,{isOpen:ye,onClose:Y,onConfirm:re,orderData:q,loading:W}),r.jsx(Hu,{stockData:O,isOpen:_,onClose:B,defaultQuantity:A,onSuccess:()=>{}})]})})};function Ie(t){var e=t.width,s=t.height;if(e<0)throw new Error("Negative width is not allowed for Size");if(s<0)throw new Error("Negative height is not allowed for Size");return{width:e,height:s}}function Mi(t,e){return t.width===e.width&&t.height===e.height}var O3=function(){function t(e){var s=this;this._resolutionListener=function(){return s._onResolutionChanged()},this._resolutionMediaQueryList=null,this._observers=[],this._window=e,this._installResolutionListener()}return t.prototype.dispose=function(){this._uninstallResolutionListener(),this._window=null},Object.defineProperty(t.prototype,"value",{get:function(){return this._window.devicePixelRatio},enumerable:!1,configurable:!0}),t.prototype.subscribe=function(e){var s=this,n={next:e};return this._observers.push(n),{unsubscribe:function(){s._observers=s._observers.filter(function(i){return i!==n})}}},t.prototype._installResolutionListener=function(){if(this._resolutionMediaQueryList!==null)throw new Error("Resolution listener is already installed");var e=this._window.devicePixelRatio;this._resolutionMediaQueryList=this._window.matchMedia("all and (resolution: ".concat(e,"dppx)")),this._resolutionMediaQueryList.addListener(this._resolutionListener)},t.prototype._uninstallResolutionListener=function(){this._resolutionMediaQueryList!==null&&(this._resolutionMediaQueryList.removeListener(this._resolutionListener),this._resolutionMediaQueryList=null)},t.prototype._reinstallResolutionListener=function(){this._uninstallResolutionListener(),this._installResolutionListener()},t.prototype._onResolutionChanged=function(){var e=this;this._observers.forEach(function(s){return s.next(e._window.devicePixelRatio)}),this._reinstallResolutionListener()},t}();function D3(t){return new O3(t)}var F3=function(){function t(e,s,n){var i;this._canvasElement=null,this._bitmapSizeChangedListeners=[],this._suggestedBitmapSize=null,this._suggestedBitmapSizeChangedListeners=[],this._devicePixelRatioObservable=null,this._canvasElementResizeObserver=null,this._canvasElement=e,this._canvasElementClientSize=Ie({width:this._canvasElement.clientWidth,height:this._canvasElement.clientHeight}),this._transformBitmapSize=s??function(a){return a},this._allowResizeObserver=(i=n==null?void 0:n.allowResizeObserver)!==null&&i!==void 0?i:!0,this._chooseAndInitObserver()}return t.prototype.dispose=function(){var e,s;if(this._canvasElement===null)throw new Error("Object is disposed");(e=this._canvasElementResizeObserver)===null||e===void 0||e.disconnect(),this._canvasElementResizeObserver=null,(s=this._devicePixelRatioObservable)===null||s===void 0||s.dispose(),this._devicePixelRatioObservable=null,this._suggestedBitmapSizeChangedListeners.length=0,this._bitmapSizeChangedListeners.length=0,this._canvasElement=null},Object.defineProperty(t.prototype,"canvasElement",{get:function(){if(this._canvasElement===null)throw new Error("Object is disposed");return this._canvasElement},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canvasElementClientSize",{get:function(){return this._canvasElementClientSize},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"bitmapSize",{get:function(){return Ie({width:this.canvasElement.width,height:this.canvasElement.height})},enumerable:!1,configurable:!0}),t.prototype.resizeCanvasElement=function(e){this._canvasElementClientSize=Ie(e),this.canvasElement.style.width="".concat(this._canvasElementClientSize.width,"px"),this.canvasElement.style.height="".concat(this._canvasElementClientSize.height,"px"),this._invalidateBitmapSize()},t.prototype.subscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners.push(e)},t.prototype.unsubscribeBitmapSizeChanged=function(e){this._bitmapSizeChangedListeners=this._bitmapSizeChangedListeners.filter(function(s){return s!==e})},Object.defineProperty(t.prototype,"suggestedBitmapSize",{get:function(){return this._suggestedBitmapSize},enumerable:!1,configurable:!0}),t.prototype.subscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners.push(e)},t.prototype.unsubscribeSuggestedBitmapSizeChanged=function(e){this._suggestedBitmapSizeChangedListeners=this._suggestedBitmapSizeChangedListeners.filter(function(s){return s!==e})},t.prototype.applySuggestedBitmapSize=function(){if(this._suggestedBitmapSize!==null){var e=this._suggestedBitmapSize;this._suggestedBitmapSize=null,this._resizeBitmap(e),this._emitSuggestedBitmapSizeChanged(e,this._suggestedBitmapSize)}},t.prototype._resizeBitmap=function(e){var s=this.bitmapSize;Mi(s,e)||(this.canvasElement.width=e.width,this.canvasElement.height=e.height,this._emitBitmapSizeChanged(s,e))},t.prototype._emitBitmapSizeChanged=function(e,s){var n=this;this._bitmapSizeChangedListeners.forEach(function(i){return i.call(n,e,s)})},t.prototype._suggestNewBitmapSize=function(e){var s=this._suggestedBitmapSize,n=Ie(this._transformBitmapSize(e,this._canvasElementClientSize)),i=Mi(this.bitmapSize,n)?null:n;s===null&&i===null||s!==null&&i!==null&&Mi(s,i)||(this._suggestedBitmapSize=i,this._emitSuggestedBitmapSizeChanged(s,i))},t.prototype._emitSuggestedBitmapSizeChanged=function(e,s){var n=this;this._suggestedBitmapSizeChangedListeners.forEach(function(i){return i.call(n,e,s)})},t.prototype._chooseAndInitObserver=function(){var e=this;if(!this._allowResizeObserver){this._initDevicePixelRatioObservable();return}$3().then(function(s){return s?e._initResizeObserver():e._initDevicePixelRatioObservable()})},t.prototype._initDevicePixelRatioObservable=function(){var e=this;if(this._canvasElement!==null){var s=H0(this._canvasElement);if(s===null)throw new Error("No window is associated with the canvas");this._devicePixelRatioObservable=D3(s),this._devicePixelRatioObservable.subscribe(function(){return e._invalidateBitmapSize()}),this._invalidateBitmapSize()}},t.prototype._invalidateBitmapSize=function(){var e,s;if(this._canvasElement!==null){var n=H0(this._canvasElement);if(n!==null){var i=(s=(e=this._devicePixelRatioObservable)===null||e===void 0?void 0:e.value)!==null&&s!==void 0?s:n.devicePixelRatio,a=this._canvasElement.getClientRects(),o=a[0]!==void 0?z3(a[0],i):Ie({width:this._canvasElementClientSize.width*i,height:this._canvasElementClientSize.height*i});this._suggestNewBitmapSize(o)}}},t.prototype._initResizeObserver=function(){var e=this;this._canvasElement!==null&&(this._canvasElementResizeObserver=new ResizeObserver(function(s){var n=s.find(function(o){return o.target===e._canvasElement});if(!(!n||!n.devicePixelContentBoxSize||!n.devicePixelContentBoxSize[0])){var i=n.devicePixelContentBoxSize[0],a=Ie({width:i.inlineSize,height:i.blockSize});e._suggestNewBitmapSize(a)}}),this._canvasElementResizeObserver.observe(this._canvasElement,{box:"device-pixel-content-box"}))},t}();function B3(t,e){return new F3(t,e.transform,e.options)}function H0(t){return t.ownerDocument.defaultView}function $3(){return new Promise(function(t){var e=new ResizeObserver(function(s){t(s.every(function(n){return"devicePixelContentBoxSize"in n})),e.disconnect()});e.observe(document.body,{box:"device-pixel-content-box"})}).catch(function(){return!1})}function z3(t,e){return Ie({width:Math.round(t.left*e+t.width*e)-Math.round(t.left*e),height:Math.round(t.top*e+t.height*e)-Math.round(t.top*e)})}var V3=function(){function t(e,s,n){if(s.width===0||s.height===0)throw new TypeError("Rendering target could only be created on a media with positive width and height");if(this._mediaSize=s,n.width===0||n.height===0)throw new TypeError("Rendering target could only be created using a bitmap with positive integer width and height");this._bitmapSize=n,this._context=e}return t.prototype.useMediaCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),this._context.scale(this._horizontalPixelRatio,this._verticalPixelRatio),e({context:this._context,mediaSize:this._mediaSize})}finally{this._context.restore()}},t.prototype.useBitmapCoordinateSpace=function(e){try{return this._context.save(),this._context.setTransform(1,0,0,1,0,0),e({context:this._context,mediaSize:this._mediaSize,bitmapSize:this._bitmapSize,horizontalPixelRatio:this._horizontalPixelRatio,verticalPixelRatio:this._verticalPixelRatio})}finally{this._context.restore()}},Object.defineProperty(t.prototype,"_horizontalPixelRatio",{get:function(){return this._bitmapSize.width/this._mediaSize.width},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_verticalPixelRatio",{get:function(){return this._bitmapSize.height/this._mediaSize.height},enumerable:!1,configurable:!0}),t}();function Wi(t,e){var s=t.canvasElementClientSize;if(s.width===0||s.height===0)return null;var n=t.bitmapSize;if(n.width===0||n.height===0)return null;var i=t.canvasElement.getContext("2d",e);return i===null?null:new V3(i,s,n)}/*!
 * @license
 * TradingView Lightweight Charts™ v5.0.8
 * Copyright (c) 2025 TradingView, Inc.
 * Licensed under Apache License 2.0 https://www.apache.org/licenses/LICENSE-2.0
 */const lN={title:"",visible:!0,lastValueVisible:!0,priceLineVisible:!0,priceLineSource:0,priceLineWidth:1,priceLineColor:"",priceLineStyle:2,baseLineVisible:!0,baseLineWidth:1,baseLineColor:"#B2B5BE",baseLineStyle:0,priceFormat:{type:"price",precision:2,minMove:.01}};var Y0,q0;function Hi(t,e){const s={0:[],1:[t.lineWidth,t.lineWidth],2:[2*t.lineWidth,2*t.lineWidth],3:[6*t.lineWidth,6*t.lineWidth],4:[t.lineWidth,4*t.lineWidth]}[e];t.setLineDash(s)}function cN(t,e,s,n){t.beginPath();const i=t.lineWidth%2?.5:0;t.moveTo(s,e+i),t.lineTo(n,e+i),t.stroke()}function xt(t,e){if(!t)throw new Error("Assertion failed"+(e?": "+e:""))}function Xt(t){if(t===void 0)throw new Error("Value is undefined");return t}function ee(t){if(t===null)throw new Error("Value is null");return t}function In(t){return ee(Xt(t))}(function(t){t[t.Simple=0]="Simple",t[t.WithSteps=1]="WithSteps",t[t.Curved=2]="Curved"})(Y0||(Y0={})),function(t){t[t.Solid=0]="Solid",t[t.Dotted=1]="Dotted",t[t.Dashed=2]="Dashed",t[t.LargeDashed=3]="LargeDashed",t[t.SparseDotted=4]="SparseDotted"}(q0||(q0={}));class nt{constructor(){this.t=[]}i(e,s,n){const i={h:e,l:s,o:n===!0};this.t.push(i)}_(e){const s=this.t.findIndex(n=>e===n.h);s>-1&&this.t.splice(s,1)}u(e){this.t=this.t.filter(s=>s.l!==e)}p(e,s,n){const i=[...this.t];this.t=this.t.filter(a=>!a.o),i.forEach(a=>a.h(e,s,n))}v(){return this.t.length>0}m(){this.t=[]}}function ns(t,...e){for(const s of e)for(const n in s)s[n]!==void 0&&Object.prototype.hasOwnProperty.call(s,n)&&!["__proto__","constructor","prototype"].includes(n)&&(typeof s[n]!="object"||t[n]===void 0||Array.isArray(s[n])?t[n]=s[n]:ns(t[n],s[n]));return t}function Qr(t){return typeof t=="number"&&isFinite(t)}function ko(t){return typeof t=="number"&&t%1==0}function Wo(t){return typeof t=="string"}function bl(t){return typeof t=="boolean"}function sn(t){const e=t;if(!e||typeof e!="object")return e;let s,n,i;for(n in s=Array.isArray(e)?[]:{},e)e.hasOwnProperty(n)&&(i=e[n],s[n]=i&&typeof i=="object"?sn(i):i);return s}function U3(t){return t!==null}function Co(t){return t===null?void 0:t}const uN="-apple-system, BlinkMacSystemFont, 'Trebuchet MS', Roboto, Ubuntu, sans-serif";function Yc(t,e,s){return e===void 0&&(e=uN),`${s=s!==void 0?`${s} `:""}${t}px ${e}`}class W3{constructor(e){this.M={S:1,C:5,P:NaN,k:"",T:"",R:"",D:"",V:0,I:0,B:0,A:0,L:0},this.O=e}N(){const e=this.M,s=this.F(),n=this.W();return e.P===s&&e.T===n||(e.P=s,e.T=n,e.k=Yc(s,n),e.A=2.5/12*s,e.V=e.A,e.I=s/12*e.C,e.B=s/12*e.C,e.L=0),e.R=this.H(),e.D=this.U(),this.M}H(){return this.O.N().layout.textColor}U(){return this.O.$()}F(){return this.O.N().layout.fontSize}W(){return this.O.N().layout.fontFamily}}function yd(t){return t<0?0:t>255?255:Math.round(t)||0}function G0(t){return .199*t[0]+.687*t[1]+.114*t[2]}class H3{constructor(e,s){this.q=new Map,this.Y=e,s&&(this.q=s)}j(e,s){if(e==="transparent")return e;const n=this.K(e),i=n[3];return`rgba(${n[0]}, ${n[1]}, ${n[2]}, ${s*i})`}X(e){const s=this.K(e);return{Z:`rgb(${s[0]}, ${s[1]}, ${s[2]})`,G:G0(s)>160?"black":"white"}}J(e){return G0(this.K(e))}tt(e,s,n){const[i,a,o,l]=this.K(e),[c,u,h,d]=this.K(s),f=[yd(i+n*(c-i)),yd(a+n*(u-a)),yd(o+n*(h-o)),(y=l+n*(d-l),y<=0||y>1?Math.min(Math.max(y,0),1):Math.round(1e4*y)/1e4)];var y;return`rgba(${f[0]}, ${f[1]}, ${f[2]}, ${f[3]})`}K(e){const s=this.q.get(e);if(s)return s;const n=function(o){const l=document.createElement("div");l.style.display="none",document.body.appendChild(l),l.style.color=o;const c=window.getComputedStyle(l).color;return document.body.removeChild(l),c}(e),i=n.match(/^rgba?\s*\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d+))?\)$/);if(!i){if(this.Y.length)for(const o of this.Y){const l=o(e);if(l)return this.q.set(e,l),l}throw new Error(`Failed to parse color: ${e}`)}const a=[parseInt(i[1],10),parseInt(i[2],10),parseInt(i[3],10),i[4]?parseFloat(i[4]):1];return this.q.set(e,a),a}}class hN{constructor(){this.it=[]}st(e){this.it=e}nt(e,s,n){this.it.forEach(i=>{i.nt(e,s,n)})}}class yn{nt(e,s,n){e.useBitmapCoordinateSpace(i=>this.et(i,s,n))}}class Y3 extends yn{constructor(){super(...arguments),this.rt=null}ht(e){this.rt=e}et({context:e,horizontalPixelRatio:s,verticalPixelRatio:n}){if(this.rt===null||this.rt.lt===null)return;const i=this.rt.lt,a=this.rt,o=Math.max(1,Math.floor(s))%2/2,l=c=>{e.beginPath();for(let u=i.to-1;u>=i.from;--u){const h=a.ot[u],d=Math.round(h._t*s)+o,f=h.ut*n,y=c*n+o;e.moveTo(d,f),e.arc(d,f,y,0,2*Math.PI)}e.fill()};a.ct>0&&(e.fillStyle=a.dt,l(a.ft+a.ct)),e.fillStyle=a.vt,l(a.ft)}}function q3(){return{ot:[{_t:0,ut:0,wt:0,gt:0}],vt:"",dt:"",ft:0,ct:0,lt:null}}const G3={from:0,to:1};class Q3{constructor(e,s,n){this.Mt=new hN,this.bt=[],this.St=[],this.xt=!0,this.O=e,this.Ct=s,this.Pt=n,this.Mt.st(this.bt)}kt(e){this.yt(),this.xt=!0}Tt(){return this.xt&&(this.Rt(),this.xt=!1),this.Mt}yt(){const e=this.Pt.Dt();e.length!==this.bt.length&&(this.St=e.map(q3),this.bt=this.St.map(s=>{const n=new Y3;return n.ht(s),n}),this.Mt.st(this.bt))}Rt(){const e=this.Ct.N().mode===2||!this.Ct.Vt(),s=this.Pt.It(),n=this.Ct.Bt(),i=this.O.Et();this.yt(),s.forEach((a,o)=>{const l=this.St[o],c=a.At(n),u=a.zt();!e&&c!==null&&a.Vt()&&u!==null?(l.vt=c.Lt,l.ft=c.ft,l.ct=c.Ot,l.ot[0].gt=c.gt,l.ot[0].ut=a.Ft().Nt(c.gt,u.Wt),l.dt=c.Ht??this.O.Ut(l.ot[0].ut/a.Ft().$t()),l.ot[0].wt=n,l.ot[0]._t=i.qt(n),l.lt=G3):l.lt=null})}}class K3 extends yn{constructor(e){super(),this.Yt=e}et({context:e,bitmapSize:s,horizontalPixelRatio:n,verticalPixelRatio:i}){if(this.Yt===null)return;const a=this.Yt.jt.Vt,o=this.Yt.Kt.Vt;if(!a&&!o)return;const l=Math.round(this.Yt._t*n),c=Math.round(this.Yt.ut*i);e.lineCap="butt",a&&l>=0&&(e.lineWidth=Math.floor(this.Yt.jt.ct*n),e.strokeStyle=this.Yt.jt.R,e.fillStyle=this.Yt.jt.R,Hi(e,this.Yt.jt.Xt),function(u,h,d,f){u.beginPath();const y=u.lineWidth%2?.5:0;u.moveTo(h+y,d),u.lineTo(h+y,f),u.stroke()}(e,l,0,s.height)),o&&c>=0&&(e.lineWidth=Math.floor(this.Yt.Kt.ct*i),e.strokeStyle=this.Yt.Kt.R,e.fillStyle=this.Yt.Kt.R,Hi(e,this.Yt.Kt.Xt),cN(e,c,0,s.width))}}class X3{constructor(e,s){this.xt=!0,this.Zt={jt:{ct:1,Xt:0,R:"",Vt:!1},Kt:{ct:1,Xt:0,R:"",Vt:!1},_t:0,ut:0},this.Gt=new K3(this.Zt),this.Jt=e,this.Pt=s}kt(){this.xt=!0}Tt(e){return this.xt&&(this.Rt(),this.xt=!1),this.Gt}Rt(){const e=this.Jt.Vt(),s=this.Pt.Qt().N().crosshair,n=this.Zt;if(s.mode===2)return n.Kt.Vt=!1,void(n.jt.Vt=!1);n.Kt.Vt=e&&this.Jt.ti(this.Pt),n.jt.Vt=e&&this.Jt.ii(),n.Kt.ct=s.horzLine.width,n.Kt.Xt=s.horzLine.style,n.Kt.R=s.horzLine.color,n.jt.ct=s.vertLine.width,n.jt.Xt=s.vertLine.style,n.jt.R=s.vertLine.color,n._t=this.Jt.si(),n.ut=this.Jt.ni()}}function J3(t,e,s,n,i,a){t.fillRect(e+a,s,n-2*a,a),t.fillRect(e+a,s+i-a,n-2*a,a),t.fillRect(e,s,a,i),t.fillRect(e+n-a,s,a,i)}function qu(t,e,s,n,i,a){t.save(),t.globalCompositeOperation="copy",t.fillStyle=a,t.fillRect(e,s,n,i),t.restore()}function Q0(t,e,s,n,i,a){t.beginPath(),t.roundRect?t.roundRect(e,s,n,i,a):(t.lineTo(e+n-a[1],s),a[1]!==0&&t.arcTo(e+n,s,e+n,s+a[1],a[1]),t.lineTo(e+n,s+i-a[2]),a[2]!==0&&t.arcTo(e+n,s+i,e+n-a[2],s+i,a[2]),t.lineTo(e+a[3],s+i),a[3]!==0&&t.arcTo(e,s+i,e,s+i-a[3],a[3]),t.lineTo(e,s+a[0]),a[0]!==0&&t.arcTo(e,s,e+a[0],s,a[0]))}function K0(t,e,s,n,i,a,o=0,l=[0,0,0,0],c=""){if(t.save(),!o||!c||c===a)return Q0(t,e,s,n,i,l),t.fillStyle=a,t.fill(),void t.restore();const u=o/2;var h;Q0(t,e+u,s+u,n-o,i-o,(h=-u,l.map(d=>d===0?d:d+h))),a!=="transparent"&&(t.fillStyle=a,t.fill()),c!=="transparent"&&(t.lineWidth=o,t.strokeStyle=c,t.closePath(),t.stroke()),t.restore()}function dN(t,e,s,n,i,a,o){t.save(),t.globalCompositeOperation="copy";const l=t.createLinearGradient(0,0,0,i);l.addColorStop(0,a),l.addColorStop(1,o),t.fillStyle=l,t.fillRect(e,s,n,i),t.restore()}class X0{constructor(e,s){this.ht(e,s)}ht(e,s){this.Yt=e,this.ei=s}$t(e,s){return this.Yt.Vt?e.P+e.A+e.V:0}nt(e,s,n,i){if(!this.Yt.Vt||this.Yt.ri.length===0)return;const a=this.Yt.R,o=this.ei.Z,l=e.useBitmapCoordinateSpace(c=>{const u=c.context;u.font=s.k;const h=this.hi(c,s,n,i),d=h.ai;return h.li?K0(u,d.oi,d._i,d.ui,d.ci,o,d.di,[d.ft,0,0,d.ft],o):K0(u,d.fi,d._i,d.ui,d.ci,o,d.di,[0,d.ft,d.ft,0],o),this.Yt.pi&&(u.fillStyle=a,u.fillRect(d.fi,d.mi,d.wi-d.fi,d.gi)),this.Yt.Mi&&(u.fillStyle=s.D,u.fillRect(h.li?d.bi-d.di:0,d._i,d.di,d.Si-d._i)),h});e.useMediaCoordinateSpace(({context:c})=>{const u=l.xi;c.font=s.k,c.textAlign=l.li?"right":"left",c.textBaseline="middle",c.fillStyle=a,c.fillText(this.Yt.ri,u.Ci,(u._i+u.Si)/2+u.Pi)})}hi(e,s,n,i){const{context:a,bitmapSize:o,mediaSize:l,horizontalPixelRatio:c,verticalPixelRatio:u}=e,h=this.Yt.pi||!this.Yt.ki?s.C:0,d=this.Yt.yi?s.S:0,f=s.A+this.ei.Ti,y=s.V+this.ei.Ri,p=s.I,w=s.B,g=this.Yt.ri,m=s.P,x=n.Di(a,g),S=Math.ceil(n.Vi(a,g)),N=m+f+y,j=s.S+p+w+S+h,P=Math.max(1,Math.floor(u));let E=Math.round(N*u);E%2!=P%2&&(E+=1);const T=d>0?Math.max(1,Math.floor(d*c)):0,R=Math.round(j*c),M=Math.round(h*c),_=this.ei.Ii??this.ei.Bi,O=Math.round(_*u)-Math.floor(.5*u),A=Math.floor(O+P/2-E/2),B=A+E,H=i==="right",F=H?l.width-d:d,K=H?o.width-T:T;let D,V,$;return H?(D=K-R,V=K-M,$=F-h-p-d):(D=K+R,V=K+M,$=F+h+p),{li:H,ai:{_i:A,mi:O,Si:B,ui:R,ci:E,ft:2*c,di:T,oi:D,fi:K,wi:V,gi:P,bi:o.width},xi:{_i:A/u,Si:B/u,Ci:$,Pi:x}}}}class Gu{constructor(e){this.Ei={Bi:0,Z:"#000",Ri:0,Ti:0},this.Ai={ri:"",Vt:!1,pi:!0,ki:!1,Ht:"",R:"#FFF",Mi:!1,yi:!1},this.zi={ri:"",Vt:!1,pi:!1,ki:!0,Ht:"",R:"#FFF",Mi:!0,yi:!0},this.xt=!0,this.Li=new(e||X0)(this.Ai,this.Ei),this.Oi=new(e||X0)(this.zi,this.Ei)}ri(){return this.Ni(),this.Ai.ri}Bi(){return this.Ni(),this.Ei.Bi}kt(){this.xt=!0}$t(e,s=!1){return Math.max(this.Li.$t(e,s),this.Oi.$t(e,s))}Fi(){return this.Ei.Ii||0}Wi(e){this.Ei.Ii=e}Hi(){return this.Ni(),this.Ai.Vt||this.zi.Vt}Ui(){return this.Ni(),this.Ai.Vt}Tt(e){return this.Ni(),this.Ai.pi=this.Ai.pi&&e.N().ticksVisible,this.zi.pi=this.zi.pi&&e.N().ticksVisible,this.Li.ht(this.Ai,this.Ei),this.Oi.ht(this.zi,this.Ei),this.Li}$i(){return this.Ni(),this.Li.ht(this.Ai,this.Ei),this.Oi.ht(this.zi,this.Ei),this.Oi}Ni(){this.xt&&(this.Ai.pi=!0,this.zi.pi=!1,this.qi(this.Ai,this.zi,this.Ei))}}class Z3 extends Gu{constructor(e,s,n){super(),this.Jt=e,this.Yi=s,this.ji=n}qi(e,s,n){if(e.Vt=!1,this.Jt.N().mode===2)return;const i=this.Jt.N().horzLine;if(!i.labelVisible)return;const a=this.Yi.zt();if(!this.Jt.Vt()||this.Yi.Ki()||a===null)return;const o=this.Yi.Xi().X(i.labelBackgroundColor);n.Z=o.Z,e.R=o.G;const l=2/12*this.Yi.P();n.Ti=l,n.Ri=l;const c=this.ji(this.Yi);n.Bi=c.Bi,e.ri=this.Yi.Zi(c.gt,a),e.Vt=!0}}const eD=/[1-9]/g;class fN{constructor(){this.Yt=null}ht(e){this.Yt=e}nt(e,s){if(this.Yt===null||this.Yt.Vt===!1||this.Yt.ri.length===0)return;const n=e.useMediaCoordinateSpace(({context:f})=>(f.font=s.k,Math.round(s.Gi.Vi(f,ee(this.Yt).ri,eD))));if(n<=0)return;const i=s.Ji,a=n+2*i,o=a/2,l=this.Yt.Qi;let c=this.Yt.Bi,u=Math.floor(c-o)+.5;u<0?(c+=Math.abs(0-u),u=Math.floor(c-o)+.5):u+a>l&&(c-=Math.abs(l-(u+a)),u=Math.floor(c-o)+.5);const h=u+a,d=Math.ceil(0+s.S+s.C+s.A+s.P+s.V);e.useBitmapCoordinateSpace(({context:f,horizontalPixelRatio:y,verticalPixelRatio:p})=>{const w=ee(this.Yt);f.fillStyle=w.Z;const g=Math.round(u*y),m=Math.round(0*p),x=Math.round(h*y),S=Math.round(d*p),N=Math.round(2*y);if(f.beginPath(),f.moveTo(g,m),f.lineTo(g,S-N),f.arcTo(g,S,g+N,S,N),f.lineTo(x-N,S),f.arcTo(x,S,x,S-N,N),f.lineTo(x,m),f.fill(),w.pi){const j=Math.round(w.Bi*y),P=m,E=Math.round((P+s.C)*p);f.fillStyle=w.R;const T=Math.max(1,Math.floor(y)),R=Math.floor(.5*y);f.fillRect(j-R,P,T,E-P)}}),e.useMediaCoordinateSpace(({context:f})=>{const y=ee(this.Yt),p=0+s.S+s.C+s.A+s.P/2;f.font=s.k,f.textAlign="left",f.textBaseline="middle",f.fillStyle=y.R;const w=s.Gi.Di(f,"Apr0");f.translate(u+i,p+w),f.fillText(y.ri,0,0)})}}class tD{constructor(e,s,n){this.xt=!0,this.Gt=new fN,this.Zt={Vt:!1,Z:"#4c525e",R:"white",ri:"",Qi:0,Bi:NaN,pi:!0},this.Ct=e,this.ts=s,this.ji=n}kt(){this.xt=!0}Tt(){return this.xt&&(this.Rt(),this.xt=!1),this.Gt.ht(this.Zt),this.Gt}Rt(){const e=this.Zt;if(e.Vt=!1,this.Ct.N().mode===2)return;const s=this.Ct.N().vertLine;if(!s.labelVisible)return;const n=this.ts.Et();if(n.Ki())return;e.Qi=n.Qi();const i=this.ji();if(i===null)return;e.Bi=i.Bi;const a=n.ss(this.Ct.Bt());e.ri=n.ns(ee(a)),e.Vt=!0;const o=this.ts.Xi().X(s.labelBackgroundColor);e.Z=o.Z,e.R=o.G,e.pi=n.N().ticksVisible}}class mN{constructor(){this.es=null,this.rs=0}hs(){return this.rs}ls(e){this.rs=e}Ft(){return this.es}_s(e){this.es=e}us(e){return[]}cs(){return[]}Vt(){return!0}}var J0;(function(t){t[t.Normal=0]="Normal",t[t.Magnet=1]="Magnet",t[t.Hidden=2]="Hidden",t[t.MagnetOHLC=3]="MagnetOHLC"})(J0||(J0={}));class sD extends mN{constructor(e,s){super(),this.Pt=null,this.ds=NaN,this.fs=0,this.ps=!1,this.vs=new Map,this.ws=!1,this.gs=new WeakMap,this.Ms=new WeakMap,this.bs=NaN,this.Ss=NaN,this.xs=NaN,this.Cs=NaN,this.ts=e,this.Ps=s,this.ks=((i,a)=>o=>{const l=a(),c=i();if(o===ee(this.Pt).ys())return{gt:c,Bi:l};{const u=ee(o.zt());return{gt:o.Ts(l,u),Bi:l}}})(()=>this.ds,()=>this.Ss);const n=((i,a)=>()=>{const o=this.ts.Et().Rs(i()),l=a();return o&&Number.isFinite(l)?{wt:o,Bi:l}:null})(()=>this.fs,()=>this.si());this.Ds=new tD(this,e,n)}N(){return this.Ps}Vs(e,s){this.xs=e,this.Cs=s}Is(){this.xs=NaN,this.Cs=NaN}Bs(){return this.xs}Es(){return this.Cs}As(e,s,n){this.ws||(this.ws=!0),this.ps=!0,this.zs(e,s,n)}Bt(){return this.fs}si(){return this.bs}ni(){return this.Ss}Vt(){return this.ps}Ls(){this.ps=!1,this.Os(),this.ds=NaN,this.bs=NaN,this.Ss=NaN,this.Pt=null,this.Is(),this.Ns()}Fs(e){let s=this.gs.get(e);s||(s=new X3(this,e),this.gs.set(e,s));let n=this.Ms.get(e);return n||(n=new Q3(this.ts,this,e),this.Ms.set(e,n)),[s,n]}ti(e){return e===this.Pt&&this.Ps.horzLine.visible}ii(){return this.Ps.vertLine.visible}Ws(e,s){this.ps&&this.Pt===e||this.vs.clear();const n=[];return this.Pt===e&&n.push(this.Hs(this.vs,s,this.ks)),n}cs(){return this.ps?[this.Ds]:[]}Us(){return this.Pt}Ns(){this.ts.$s().forEach(e=>{var s,n;(s=this.gs.get(e))==null||s.kt(),(n=this.Ms.get(e))==null||n.kt()}),this.vs.forEach(e=>e.kt()),this.Ds.kt()}qs(e){return e&&!e.ys().Ki()?e.ys():null}zs(e,s,n){this.Ys(e,s,n)&&this.Ns()}Ys(e,s,n){const i=this.bs,a=this.Ss,o=this.ds,l=this.fs,c=this.Pt,u=this.qs(n);this.fs=e,this.bs=isNaN(e)?NaN:this.ts.Et().qt(e),this.Pt=n;const h=u!==null?u.zt():null;return u!==null&&h!==null?(this.ds=s,this.Ss=u.Nt(s,h)):(this.ds=NaN,this.Ss=NaN),i!==this.bs||a!==this.Ss||l!==this.fs||o!==this.ds||c!==this.Pt}Os(){const e=this.ts.js().map(n=>n.Xs().Ks()).filter(U3),s=e.length===0?null:Math.max(...e);this.fs=s!==null?s:NaN}Hs(e,s,n){let i=e.get(s);return i===void 0&&(i=new Z3(this,s,n),e.set(s,i)),i}}function Qu(t){return t==="left"||t==="right"}class vt{constructor(e){this.Zs=new Map,this.Gs=[],this.Js=e}Qs(e,s){const n=function(i,a){return i===void 0?a:{tn:Math.max(i.tn,a.tn),sn:i.sn||a.sn}}(this.Zs.get(e),s);this.Zs.set(e,n)}nn(){return this.Js}en(e){const s=this.Zs.get(e);return s===void 0?{tn:this.Js}:{tn:Math.max(this.Js,s.tn),sn:s.sn}}rn(){this.hn(),this.Gs=[{an:0}]}ln(e){this.hn(),this.Gs=[{an:1,Wt:e}]}_n(e){this.un(),this.Gs.push({an:5,Wt:e})}hn(){this.un(),this.Gs.push({an:6})}cn(){this.hn(),this.Gs=[{an:4}]}dn(e){this.hn(),this.Gs.push({an:2,Wt:e})}fn(e){this.hn(),this.Gs.push({an:3,Wt:e})}pn(){return this.Gs}vn(e){for(const s of e.Gs)this.mn(s);this.Js=Math.max(this.Js,e.Js),e.Zs.forEach((s,n)=>{this.Qs(n,s)})}static wn(){return new vt(2)}static gn(){return new vt(3)}mn(e){switch(e.an){case 0:this.rn();break;case 1:this.ln(e.Wt);break;case 2:this.dn(e.Wt);break;case 3:this.fn(e.Wt);break;case 4:this.cn();break;case 5:this._n(e.Wt);break;case 6:this.un()}}un(){const e=this.Gs.findIndex(s=>s.an===5);e!==-1&&this.Gs.splice(e,1)}}class pN{formatTickmarks(e){return e.map(s=>this.format(s))}}const Z0=".";function nn(t,e){if(!Qr(t))return"n/a";if(!ko(e))throw new TypeError("invalid length");if(e<0||e>16)throw new TypeError("invalid length");return e===0?t.toString():("0000000000000000"+t.toString()).slice(-e)}class Ku extends pN{constructor(e,s){if(super(),s||(s=1),Qr(e)&&ko(e)||(e=100),e<0)throw new TypeError("invalid base");this.Yi=e,this.Mn=s,this.bn()}format(e){const s=e<0?"−":"";return e=Math.abs(e),s+this.Sn(e)}bn(){if(this.xn=0,this.Yi>0&&this.Mn>0){let e=this.Yi;for(;e>1;)e/=10,this.xn++}}Sn(e){const s=this.Yi/this.Mn;let n=Math.floor(e),i="";const a=this.xn!==void 0?this.xn:NaN;if(s>1){let o=+(Math.round(e*s)-n*s).toFixed(this.xn);o>=s&&(o-=s,n+=1),i=Z0+nn(+o.toFixed(this.xn)*this.Mn,a)}else n=Math.round(n*s)/s,a>0&&(i=Z0+nn(0,a));return n.toFixed(0)+i}}class gN extends Ku{constructor(e=100){super(e)}format(e){return`${super.format(e)}%`}}class nD extends pN{constructor(e){super(),this.Cn=e}format(e){let s="";return e<0&&(s="-",e=-e),e<995?s+this.Pn(e):e<999995?s+this.Pn(e/1e3)+"K":e<999999995?(e=1e3*Math.round(e/1e3),s+this.Pn(e/1e6)+"M"):(e=1e6*Math.round(e/1e6),s+this.Pn(e/1e9)+"B")}Pn(e){let s;const n=Math.pow(10,this.Cn);return s=(e=Math.round(e*n)/n)>=1e-15&&e<1?e.toFixed(this.Cn).replace(/\.?0+$/,""):String(e),s.replace(/(\.[1-9]*)0+$/,(i,a)=>a)}}const iD=/[2-9]/g;class qc{constructor(e=50){this.kn=0,this.yn=1,this.Tn=1,this.Rn={},this.Dn=new Map,this.Vn=e}In(){this.kn=0,this.Dn.clear(),this.yn=1,this.Tn=1,this.Rn={}}Vi(e,s,n){return this.Bn(e,s,n).width}Di(e,s,n){const i=this.Bn(e,s,n);return((i.actualBoundingBoxAscent||0)-(i.actualBoundingBoxDescent||0))/2}Bn(e,s,n){const i=n||iD,a=String(s).replace(i,"0");if(this.Dn.has(a))return Xt(this.Dn.get(a)).En;if(this.kn===this.Vn){const l=this.Rn[this.Tn];delete this.Rn[this.Tn],this.Dn.delete(l),this.Tn++,this.kn--}e.save(),e.textBaseline="middle";const o=e.measureText(a);return e.restore(),o.width===0&&s.length||(this.Dn.set(a,{En:o,An:this.yn}),this.Rn[this.yn]=a,this.kn++,this.yn++),o}}class rD{constructor(e){this.zn=null,this.M=null,this.Ln="right",this.On=e}Nn(e,s,n){this.zn=e,this.M=s,this.Ln=n}nt(e){this.M!==null&&this.zn!==null&&this.zn.nt(e,this.M,this.On,this.Ln)}}class yN{constructor(e,s,n){this.Fn=e,this.On=new qc(50),this.Wn=s,this.O=n,this.F=-1,this.Gt=new rD(this.On)}Tt(){const e=this.O.Hn(this.Wn);if(e===null)return null;const s=e.Un(this.Wn)?e.$n():this.Wn.Ft();if(s===null)return null;const n=e.qn(s);if(n==="overlay")return null;const i=this.O.Yn();return i.P!==this.F&&(this.F=i.P,this.On.In()),this.Gt.Nn(this.Fn.$i(),i,n),this.Gt}}class aD extends yn{constructor(){super(...arguments),this.Yt=null}ht(e){this.Yt=e}jn(e,s){var o;if(!((o=this.Yt)!=null&&o.Vt))return null;const{ut:n,ct:i,Kn:a}=this.Yt;return s>=n-i-7&&s<=n+i+7?{Xn:this.Yt,Kn:a}:null}et({context:e,bitmapSize:s,horizontalPixelRatio:n,verticalPixelRatio:i}){if(this.Yt===null||this.Yt.Vt===!1)return;const a=Math.round(this.Yt.ut*i);a<0||a>s.height||(e.lineCap="butt",e.strokeStyle=this.Yt.R,e.lineWidth=Math.floor(this.Yt.ct*n),Hi(e,this.Yt.Xt),cN(e,a,0,s.width))}}class dg{constructor(e){this.Zn={ut:0,R:"rgba(0, 0, 0, 0)",ct:1,Xt:0,Vt:!1},this.Gn=new aD,this.xt=!0,this.Jn=e,this.Qn=e.Qt(),this.Gn.ht(this.Zn)}kt(){this.xt=!0}Tt(){return this.Jn.Vt()?(this.xt&&(this.te(),this.xt=!1),this.Gn):null}}class oD extends dg{constructor(e){super(e)}te(){this.Zn.Vt=!1;const e=this.Jn.Ft(),s=e.ie().ie;if(s!==2&&s!==3)return;const n=this.Jn.N();if(!n.baseLineVisible||!this.Jn.Vt())return;const i=this.Jn.zt();i!==null&&(this.Zn.Vt=!0,this.Zn.ut=e.Nt(i.Wt,i.Wt),this.Zn.R=n.baseLineColor,this.Zn.ct=n.baseLineWidth,this.Zn.Xt=n.baseLineStyle)}}class lD extends yn{constructor(){super(...arguments),this.Yt=null}ht(e){this.Yt=e}se(){return this.Yt}et({context:e,horizontalPixelRatio:s,verticalPixelRatio:n}){const i=this.Yt;if(i===null)return;const a=Math.max(1,Math.floor(s)),o=a%2/2,l=Math.round(i.ne.x*s)+o,c=i.ne.y*n;e.fillStyle=i.ee,e.beginPath();const u=Math.max(2,1.5*i.re)*s;e.arc(l,c,u,0,2*Math.PI,!1),e.fill(),e.fillStyle=i.he,e.beginPath(),e.arc(l,c,i.ft*s,0,2*Math.PI,!1),e.fill(),e.lineWidth=a,e.strokeStyle=i.ae,e.beginPath(),e.arc(l,c,i.ft*s+a/2,0,2*Math.PI,!1),e.stroke()}}const cD=[{le:0,oe:.25,_e:4,ue:10,ce:.25,de:0,fe:.4,pe:.8},{le:.25,oe:.525,_e:10,ue:14,ce:0,de:0,fe:.8,pe:0},{le:.525,oe:1,_e:14,ue:14,ce:0,de:0,fe:0,pe:0}];class uD{constructor(e){this.Gt=new lD,this.xt=!0,this.ve=!0,this.me=performance.now(),this.we=this.me-1,this.ge=e}Me(){this.we=this.me-1,this.kt()}be(){if(this.kt(),this.ge.N().lastPriceAnimation===2){const e=performance.now(),s=this.we-e;if(s>0)return void(s<650&&(this.we+=2600));this.me=e,this.we=e+2600}}kt(){this.xt=!0}Se(){this.ve=!0}Vt(){return this.ge.N().lastPriceAnimation!==0}xe(){switch(this.ge.N().lastPriceAnimation){case 0:return!1;case 1:return!0;case 2:return performance.now()<=this.we}}Tt(){return this.xt?(this.Rt(),this.xt=!1,this.ve=!1):this.ve&&(this.Ce(),this.ve=!1),this.Gt}Rt(){this.Gt.ht(null);const e=this.ge.Qt().Et(),s=e.Pe(),n=this.ge.zt();if(s===null||n===null)return;const i=this.ge.ke(!0);if(i.ye||!s.Te(i.Re))return;const a={x:e.qt(i.Re),y:this.ge.Ft().Nt(i.gt,n.Wt)},o=i.R,l=this.ge.N().lineWidth,c=this.De(this.Ve(),o);this.Gt.ht({ee:o,re:l,he:c.he,ae:c.ae,ft:c.ft,ne:a})}Ce(){const e=this.Gt.se();if(e!==null){const s=this.De(this.Ve(),e.ee);e.he=s.he,e.ae=s.ae,e.ft=s.ft}}Ve(){return this.xe()?performance.now()-this.me:2599}Ie(e,s,n,i){const a=n+(i-n)*s;return this.ge.Qt().Xi().j(e,a)}De(e,s){const n=e%2600/2600;let i;for(const u of cD)if(n>=u.le&&n<=u.oe){i=u;break}xt(i!==void 0,"Last price animation internal logic error");const a=(n-i.le)/(i.oe-i.le);return{he:this.Ie(s,a,i.ce,i.de),ae:this.Ie(s,a,i.fe,i.pe),ft:(o=a,l=i._e,c=i.ue,l+(c-l)*o)};var o,l,c}}class hD extends dg{constructor(e){super(e)}te(){const e=this.Zn;e.Vt=!1;const s=this.Jn.N();if(!s.priceLineVisible||!this.Jn.Vt())return;const n=this.Jn.ke(s.priceLineSource===0);n.ye||(e.Vt=!0,e.ut=n.Bi,e.R=this.Jn.Be(n.R),e.ct=s.priceLineWidth,e.Xt=s.priceLineStyle)}}class dD extends Gu{constructor(e){super(),this.Jt=e}qi(e,s,n){e.Vt=!1,s.Vt=!1;const i=this.Jt;if(!i.Vt())return;const a=i.N(),o=a.lastValueVisible,l=i.Ee()!=="",c=a.seriesLastValueMode===0,u=i.ke(!1);if(u.ye)return;o&&(e.ri=this.Ae(u,o,c),e.Vt=e.ri.length!==0),(l||c)&&(s.ri=this.ze(u,o,l,c),s.Vt=s.ri.length>0);const h=i.Be(u.R),d=this.Jt.Qt().Xi().X(h);n.Z=d.Z,n.Bi=u.Bi,s.Ht=i.Qt().Ut(u.Bi/i.Ft().$t()),e.Ht=h,e.R=d.G,s.R=d.G}ze(e,s,n,i){let a="";const o=this.Jt.Ee();return n&&o.length!==0&&(a+=`${o} `),s&&i&&(a+=this.Jt.Ft().Le()?e.Oe:e.Ne),a.trim()}Ae(e,s,n){return s?n?this.Jt.Ft().Le()?e.Ne:e.Oe:e.ri:""}}function ex(t,e,s,n){const i=Number.isFinite(e),a=Number.isFinite(s);return i&&a?t(e,s):i||a?i?e:s:n}class Ft{constructor(e,s){this.Fe=e,this.We=s}He(e){return e!==null&&this.Fe===e.Fe&&this.We===e.We}Ue(){return new Ft(this.Fe,this.We)}$e(){return this.Fe}qe(){return this.We}Ye(){return this.We-this.Fe}Ki(){return this.We===this.Fe||Number.isNaN(this.We)||Number.isNaN(this.Fe)}vn(e){return e===null?this:new Ft(ex(Math.min,this.$e(),e.$e(),-1/0),ex(Math.max,this.qe(),e.qe(),1/0))}je(e){if(!Qr(e)||this.We-this.Fe===0)return;const s=.5*(this.We+this.Fe);let n=this.We-s,i=this.Fe-s;n*=e,i*=e,this.We=s+n,this.Fe=s+i}Ke(e){Qr(e)&&(this.We+=e,this.Fe+=e)}Xe(){return{minValue:this.Fe,maxValue:this.We}}static Ze(e){return e===null?null:new Ft(e.minValue,e.maxValue)}}class Gc{constructor(e,s){this.Ge=e,this.Je=s||null}Qe(){return this.Ge}tr(){return this.Je}Xe(){return{priceRange:this.Ge===null?null:this.Ge.Xe(),margins:this.Je||void 0}}static Ze(e){return e===null?null:new Gc(Ft.Ze(e.priceRange),e.margins)}}class fD extends dg{constructor(e,s){super(e),this.ir=s}te(){const e=this.Zn;e.Vt=!1;const s=this.ir.N();if(!this.Jn.Vt()||!s.lineVisible)return;const n=this.ir.sr();n!==null&&(e.Vt=!0,e.ut=n,e.R=s.color,e.ct=s.lineWidth,e.Xt=s.lineStyle,e.Kn=this.ir.N().id)}}class mD extends Gu{constructor(e,s){super(),this.ge=e,this.ir=s}qi(e,s,n){e.Vt=!1,s.Vt=!1;const i=this.ir.N(),a=i.axisLabelVisible,o=i.title!=="",l=this.ge;if(!a||!l.Vt())return;const c=this.ir.sr();if(c===null)return;o&&(s.ri=i.title,s.Vt=!0),s.Ht=l.Qt().Ut(c/l.Ft().$t()),e.ri=this.nr(i.price),e.Vt=!0;const u=this.ge.Qt().Xi().X(i.axisLabelColor||i.color);n.Z=u.Z;const h=i.axisLabelTextColor||u.G;e.R=h,s.R=h,n.Bi=c}nr(e){const s=this.ge.zt();return s===null?"":this.ge.Ft().Zi(e,s.Wt)}}class pD{constructor(e,s){this.ge=e,this.Ps=s,this.er=new fD(e,this),this.Fn=new mD(e,this),this.rr=new yN(this.Fn,e,e.Qt())}hr(e){ns(this.Ps,e),this.kt(),this.ge.Qt().ar()}N(){return this.Ps}lr(){return this.er}_r(){return this.rr}ur(){return this.Fn}kt(){this.er.kt(),this.Fn.kt()}sr(){const e=this.ge,s=e.Ft();if(e.Qt().Et().Ki()||s.Ki())return null;const n=e.zt();return n===null?null:s.Nt(this.Ps.price,n.Wt)}}class gD extends mN{constructor(e){super(),this.ts=e}Qt(){return this.ts}}const yD={Bar:(t,e,s,n)=>{const i=e.upColor,a=e.downColor,o=ee(t(s,n)),l=In(o.Wt[0])<=In(o.Wt[3]);return{cr:o.R??(l?i:a)}},Candlestick:(t,e,s,n)=>{const i=e.upColor,a=e.downColor,o=e.borderUpColor,l=e.borderDownColor,c=e.wickUpColor,u=e.wickDownColor,h=ee(t(s,n)),d=In(h.Wt[0])<=In(h.Wt[3]);return{cr:h.R??(d?i:a),dr:h.Ht??(d?o:l),pr:h.vr??(d?c:u)}},Custom:(t,e,s,n)=>({cr:ee(t(s,n)).R??e.color}),Area:(t,e,s,n)=>{const i=ee(t(s,n));return{cr:i.vt??e.lineColor,vt:i.vt??e.lineColor,mr:i.mr??e.topColor,wr:i.wr??e.bottomColor}},Baseline:(t,e,s,n)=>{const i=ee(t(s,n));return{cr:i.Wt[3]>=e.baseValue.price?e.topLineColor:e.bottomLineColor,gr:i.gr??e.topLineColor,Mr:i.Mr??e.bottomLineColor,br:i.br??e.topFillColor1,Sr:i.Sr??e.topFillColor2,Cr:i.Cr??e.bottomFillColor1,Pr:i.Pr??e.bottomFillColor2}},Line:(t,e,s,n)=>{const i=ee(t(s,n));return{cr:i.R??e.color,vt:i.R??e.color}},Histogram:(t,e,s,n)=>({cr:ee(t(s,n)).R??e.color})};class vD{constructor(e){this.kr=(s,n)=>n!==void 0?n.Wt:this.ge.Xs().yr(s),this.ge=e,this.Tr=yD[e.Rr()]}Dr(e,s){return this.Tr(this.kr,this.ge.N(),e,s)}}function vN(t,e,s,n,i=0,a=e.length){let o=a-i;for(;0<o;){const l=o>>1,c=i+l;n(e[c],s)===t?(i=c+1,o-=l+1):o=l}return i}const Kr=vN.bind(null,!0),xN=vN.bind(null,!1);var tx;(function(t){t[t.NearestLeft=-1]="NearestLeft",t[t.None=0]="None",t[t.NearestRight=1]="NearestRight"})(tx||(tx={}));const Sn=30;class xD{constructor(){this.Vr=[],this.Ir=new Map,this.Br=new Map,this.Er=[]}Ar(){return this.zr()>0?this.Vr[this.Vr.length-1]:null}Lr(){return this.zr()>0?this.Or(0):null}Ks(){return this.zr()>0?this.Or(this.Vr.length-1):null}zr(){return this.Vr.length}Ki(){return this.zr()===0}Te(e){return this.Nr(e,0)!==null}yr(e){return this.Fr(e)}Fr(e,s=0){const n=this.Nr(e,s);return n===null?null:{...this.Wr(n),Re:this.Or(n)}}Hr(){return this.Vr}Ur(e,s,n){if(this.Ki())return null;let i=null;for(const a of n)i=jl(i,this.$r(e,s,a));return i}ht(e){this.Br.clear(),this.Ir.clear(),this.Vr=e,this.Er=e.map(s=>s.Re)}qr(){return this.Er}Or(e){return this.Vr[e].Re}Wr(e){return this.Vr[e]}Nr(e,s){const n=this.Yr(e);if(n===null&&s!==0)switch(s){case-1:return this.jr(e);case 1:return this.Kr(e);default:throw new TypeError("Unknown search mode")}return n}jr(e){let s=this.Xr(e);return s>0&&(s-=1),s!==this.Vr.length&&this.Or(s)<e?s:null}Kr(e){const s=this.Zr(e);return s!==this.Vr.length&&e<this.Or(s)?s:null}Yr(e){const s=this.Xr(e);return s===this.Vr.length||e<this.Vr[s].Re?null:s}Xr(e){return Kr(this.Vr,e,(s,n)=>s.Re<n)}Zr(e){return xN(this.Vr,e,(s,n)=>s.Re>n)}Gr(e,s,n){let i=null;for(let a=e;a<s;a++){const o=this.Vr[a].Wt[n];Number.isNaN(o)||(i===null?i={Jr:o,Qr:o}:(o<i.Jr&&(i.Jr=o),o>i.Qr&&(i.Qr=o)))}return i}$r(e,s,n){if(this.Ki())return null;let i=null;const a=ee(this.Lr()),o=ee(this.Ks()),l=Math.max(e,a),c=Math.min(s,o),u=Math.ceil(l/Sn)*Sn,h=Math.max(u,Math.floor(c/Sn)*Sn);{const f=this.Xr(l),y=this.Zr(Math.min(c,u,s));i=jl(i,this.Gr(f,y,n))}let d=this.Ir.get(n);d===void 0&&(d=new Map,this.Ir.set(n,d));for(let f=Math.max(u+1,l);f<h;f+=Sn){const y=Math.floor(f/Sn);let p=d.get(y);if(p===void 0){const w=this.Xr(y*Sn),g=this.Zr((y+1)*Sn-1);p=this.Gr(w,g,n),d.set(y,p)}i=jl(i,p)}{const f=this.Xr(h),y=this.Zr(c);i=jl(i,this.Gr(f,y,n))}return i}}function jl(t,e){return t===null?e:e===null?t:{Jr:Math.min(t.Jr,e.Jr),Qr:Math.max(t.Qr,e.Qr)}}class wD{constructor(e){this.th=e}nt(e,s,n){this.th.draw(e)}ih(e,s,n){var i,a;(a=(i=this.th).drawBackground)==null||a.call(i,e)}}class SD{constructor(e){this.Dn=null,this.sh=e}Tt(){var n;const e=this.sh.renderer();if(e===null)return null;if(((n=this.Dn)==null?void 0:n.nh)===e)return this.Dn.eh;const s=new wD(e);return this.Dn={nh:e,eh:s},s}rh(){var e,s;return((s=(e=this.sh).zOrder)==null?void 0:s.call(e))??"normal"}}class wN{constructor(e){this.hh=null,this.ah=e}oh(){return this.ah}Ns(){var e,s;(s=(e=this.ah).updateAllViews)==null||s.call(e)}Fs(){var n,i,a;const e=((i=(n=this.ah).paneViews)==null?void 0:i.call(n))??[];if(((a=this.hh)==null?void 0:a.nh)===e)return this.hh.eh;const s=e.map(o=>new SD(o));return this.hh={nh:e,eh:s},s}jn(e,s){var n,i;return((i=(n=this.ah).hitTest)==null?void 0:i.call(n,e,s))??null}}let bD=class extends wN{us(){return[]}};class jD{constructor(e){this.th=e}nt(e,s,n){this.th.draw(e)}ih(e,s,n){var i,a;(a=(i=this.th).drawBackground)==null||a.call(i,e)}}class sx{constructor(e){this.Dn=null,this.sh=e}Tt(){var n;const e=this.sh.renderer();if(e===null)return null;if(((n=this.Dn)==null?void 0:n.nh)===e)return this.Dn.eh;const s=new jD(e);return this.Dn={nh:e,eh:s},s}rh(){var e,s;return((s=(e=this.sh).zOrder)==null?void 0:s.call(e))??"normal"}}function SN(t){var e,s,n;return{ri:t.text(),Bi:t.coordinate(),Ii:(e=t.fixedCoordinate)==null?void 0:e.call(t),R:t.textColor(),Z:t.backColor(),Vt:((s=t.visible)==null?void 0:s.call(t))??!0,pi:((n=t.tickVisible)==null?void 0:n.call(t))??!0}}class ND{constructor(e,s){this.Gt=new fN,this._h=e,this.uh=s}Tt(){return this.Gt.ht({Qi:this.uh.Qi(),...SN(this._h)}),this.Gt}}class kD extends Gu{constructor(e,s){super(),this._h=e,this.Yi=s}qi(e,s,n){const i=SN(this._h);n.Z=i.Z,e.R=i.R;const a=2/12*this.Yi.P();n.Ti=a,n.Ri=a,n.Bi=i.Bi,n.Ii=i.Ii,e.ri=i.ri,e.Vt=i.Vt,e.pi=i.pi}}class CD extends wN{constructor(e,s){super(e),this.dh=null,this.fh=null,this.ph=null,this.mh=null,this.ge=s}cs(){var i,a,o;const e=((a=(i=this.ah).timeAxisViews)==null?void 0:a.call(i))??[];if(((o=this.dh)==null?void 0:o.nh)===e)return this.dh.eh;const s=this.ge.Qt().Et(),n=e.map(l=>new ND(l,s));return this.dh={nh:e,eh:n},n}Ws(){var i,a,o;const e=((a=(i=this.ah).priceAxisViews)==null?void 0:a.call(i))??[];if(((o=this.fh)==null?void 0:o.nh)===e)return this.fh.eh;const s=this.ge.Ft(),n=e.map(l=>new kD(l,s));return this.fh={nh:e,eh:n},n}wh(){var n,i,a;const e=((i=(n=this.ah).priceAxisPaneViews)==null?void 0:i.call(n))??[];if(((a=this.ph)==null?void 0:a.nh)===e)return this.ph.eh;const s=e.map(o=>new sx(o));return this.ph={nh:e,eh:s},s}gh(){var n,i,a;const e=((i=(n=this.ah).timeAxisPaneViews)==null?void 0:i.call(n))??[];if(((a=this.mh)==null?void 0:a.nh)===e)return this.mh.eh;const s=e.map(o=>new sx(o));return this.mh={nh:e,eh:s},s}Mh(e,s){var n,i;return((i=(n=this.ah).autoscaleInfo)==null?void 0:i.call(n,e,s))??null}}function vd(t,e,s,n){t.forEach(i=>{e(i).forEach(a=>{a.rh()===s&&n.push(a)})})}function xd(t){return t.Fs()}function PD(t){return t.wh()}function TD(t){return t.gh()}const ED=["Area","Line","Baseline"];class Xu extends gD{constructor(e,s,n,i,a){super(e),this.Yt=new xD,this.er=new hD(this),this.bh=[],this.Sh=new oD(this),this.xh=null,this.Ch=null,this.Ph=null,this.kh=[],this.Ps=n,this.yh=s;const o=new dD(this);this.vs=[o],this.rr=new yN(o,this,e),ED.includes(this.yh)&&(this.xh=new uD(this)),this.Th(),this.sh=i(this,this.Qt(),a)}m(){this.Ph!==null&&clearTimeout(this.Ph)}Be(e){return this.Ps.priceLineColor||e}ke(e){const s={ye:!0},n=this.Ft();if(this.Qt().Et().Ki()||n.Ki()||this.Yt.Ki())return s;const i=this.Qt().Et().Pe(),a=this.zt();if(i===null||a===null)return s;let o,l;if(e){const d=this.Yt.Ar();if(d===null)return s;o=d,l=d.Re}else{const d=this.Yt.Fr(i.bi(),-1);if(d===null||(o=this.Yt.yr(d.Re),o===null))return s;l=d.Re}const c=o.Wt[3],u=this.Rh().Dr(l,{Wt:o}),h=n.Nt(c,a.Wt);return{ye:!1,gt:c,ri:n.Zi(c,a.Wt),Oe:n.Dh(c),Ne:n.Vh(c,a.Wt),R:u.cr,Bi:h,Re:l}}Rh(){return this.Ch!==null||(this.Ch=new vD(this)),this.Ch}N(){return this.Ps}hr(e){const s=e.priceScaleId;s!==void 0&&s!==this.Ps.priceScaleId&&this.Qt().Ih(this,s),ns(this.Ps,e),e.priceFormat!==void 0&&(this.Th(),this.Qt().Bh()),this.Qt().Eh(this),this.Qt().Ah(),this.sh.kt("options")}ht(e,s){this.Yt.ht(e),this.sh.kt("data"),this.xh!==null&&(s&&s.zh?this.xh.be():e.length===0&&this.xh.Me());const n=this.Qt().Hn(this);this.Qt().Lh(n),this.Qt().Eh(this),this.Qt().Ah(),this.Qt().ar()}Oh(e){const s=new pD(this,e);return this.bh.push(s),this.Qt().Eh(this),s}Nh(e){const s=this.bh.indexOf(e);s!==-1&&this.bh.splice(s,1),this.Qt().Eh(this)}Fh(){return this.bh}Rr(){return this.yh}zt(){const e=this.Wh();return e===null?null:{Wt:e.Wt[3],Hh:e.wt}}Wh(){const e=this.Qt().Et().Pe();if(e===null)return null;const s=e.Uh();return this.Yt.Fr(s,1)}Xs(){return this.Yt}$h(e){const s=this.Yt.yr(e);return s===null?null:this.yh==="Bar"||this.yh==="Candlestick"||this.yh==="Custom"?{qh:s.Wt[0],Yh:s.Wt[1],jh:s.Wt[2],Kh:s.Wt[3]}:s.Wt[3]}Xh(e){const s=[];vd(this.kh,xd,"top",s);const n=this.xh;return n!==null&&n.Vt()&&(this.Ph===null&&n.xe()&&(this.Ph=setTimeout(()=>{this.Ph=null,this.Qt().Zh()},0)),n.Se(),s.unshift(n)),s}Fs(){const e=[];this.Gh()||e.push(this.Sh),e.push(this.sh,this.er);const s=this.bh.map(n=>n.lr());return e.push(...s),vd(this.kh,xd,"normal",e),e}Jh(){return this.Qh(xd,"bottom")}ta(e){return this.Qh(PD,e)}ia(e){return this.Qh(TD,e)}sa(e,s){return this.kh.map(n=>n.jn(e,s)).filter(n=>n!==null)}us(){return[this.rr,...this.bh.map(e=>e._r())]}Ws(e,s){if(s!==this.es&&!this.Gh())return[];const n=[...this.vs];for(const i of this.bh)n.push(i.ur());return this.kh.forEach(i=>{n.push(...i.Ws())}),n}cs(){const e=[];return this.kh.forEach(s=>{e.push(...s.cs())}),e}Mh(e,s){if(this.Ps.autoscaleInfoProvider!==void 0){const n=this.Ps.autoscaleInfoProvider(()=>{const i=this.na(e,s);return i===null?null:i.Xe()});return Gc.Ze(n)}return this.na(e,s)}ea(){return this.Ps.priceFormat.minMove}ra(){return this.ha}Ns(){var e;this.sh.kt();for(const s of this.vs)s.kt();for(const s of this.bh)s.kt();this.er.kt(),this.Sh.kt(),(e=this.xh)==null||e.kt(),this.kh.forEach(s=>s.Ns())}Ft(){return ee(super.Ft())}At(e){if(!((this.yh==="Line"||this.yh==="Area"||this.yh==="Baseline")&&this.Ps.crosshairMarkerVisible))return null;const s=this.Yt.yr(e);return s===null?null:{gt:s.Wt[3],ft:this.aa(),Ht:this.la(),Ot:this.oa(),Lt:this._a(e)}}Ee(){return this.Ps.title}Vt(){return this.Ps.visible}ua(e){this.kh.push(new CD(e,this))}ca(e){this.kh=this.kh.filter(s=>s.oh()!==e)}da(){if(this.yh==="Custom")return e=>this.sh.fa(e)}pa(){if(this.yh==="Custom")return e=>this.sh.va(e)}ma(){return this.Yt.qr()}Gh(){return!Qu(this.Ft().wa())}na(e,s){if(!ko(e)||!ko(s)||this.Yt.Ki())return null;const n=this.yh==="Line"||this.yh==="Area"||this.yh==="Baseline"||this.yh==="Histogram"?[3]:[2,1],i=this.Yt.Ur(e,s,n);let a=i!==null?new Ft(i.Jr,i.Qr):null,o=null;if(this.Rr()==="Histogram"){const l=this.Ps.base,c=new Ft(l,l);a=a!==null?a.vn(c):c}return this.kh.forEach(l=>{const c=l.Mh(e,s);if(c!=null&&c.priceRange){const u=new Ft(c.priceRange.minValue,c.priceRange.maxValue);a=a!==null?a.vn(u):u}c!=null&&c.margins&&(o=c.margins)}),new Gc(a,o)}aa(){switch(this.yh){case"Line":case"Area":case"Baseline":return this.Ps.crosshairMarkerRadius}return 0}la(){switch(this.yh){case"Line":case"Area":case"Baseline":{const e=this.Ps.crosshairMarkerBorderColor;if(e.length!==0)return e}}return null}oa(){switch(this.yh){case"Line":case"Area":case"Baseline":return this.Ps.crosshairMarkerBorderWidth}return 0}_a(e){switch(this.yh){case"Line":case"Area":case"Baseline":{const s=this.Ps.crosshairMarkerBackgroundColor;if(s.length!==0)return s}}return this.Rh().Dr(e).cr}Th(){switch(this.Ps.priceFormat.type){case"custom":{const e=this.Ps.priceFormat.formatter;this.ha={format:e,formatTickmarks:this.Ps.priceFormat.tickmarksFormatter??(s=>s.map(e))};break}case"volume":this.ha=new nD(this.Ps.priceFormat.precision);break;case"percent":this.ha=new gN(this.Ps.priceFormat.precision);break;default:{const e=Math.pow(10,this.Ps.priceFormat.precision);this.ha=new Ku(e,this.Ps.priceFormat.minMove*e)}}this.es!==null&&this.es.ga()}Qh(e,s){const n=[];return vd(this.kh,e,s,n),n}}const LD=[3],_D=[0,1,2,3];class RD{constructor(e){this.Ps=e}Ma(e,s,n){let i=e;if(this.Ps.mode===0)return i;const a=n.ys(),o=a.zt();if(o===null)return i;const l=a.Nt(e,o),c=n.ba().filter(h=>h instanceof Xu).reduce((h,d)=>{if(n.Un(d)||!d.Vt())return h;const f=d.Ft(),y=d.Xs();if(f.Ki()||!y.Te(s))return h;const p=y.yr(s);if(p===null)return h;const w=In(d.zt()),g=this.Ps.mode===3?_D:LD;return h.concat(g.map(m=>f.Nt(p.Wt[m],w.Wt)))},[]);if(c.length===0)return i;c.sort((h,d)=>Math.abs(h-l)-Math.abs(d-l));const u=c[0];return i=a.Ts(u,o),i}}function Ir(t,e,s){return Math.min(Math.max(t,e),s)}function Nl(t,e,s){return e-t<=s}class MD extends yn{constructor(){super(...arguments),this.Yt=null}ht(e){this.Yt=e}et({context:e,bitmapSize:s,horizontalPixelRatio:n,verticalPixelRatio:i}){if(this.Yt===null)return;const a=Math.max(1,Math.floor(n));e.lineWidth=a,function(o,l){o.save(),o.lineWidth%2&&o.translate(.5,.5),l(),o.restore()}(e,()=>{const o=ee(this.Yt);if(o.Sa){e.strokeStyle=o.xa,Hi(e,o.Ca),e.beginPath();for(const l of o.Pa){const c=Math.round(l.ka*n);e.moveTo(c,-a),e.lineTo(c,s.height+a)}e.stroke()}if(o.ya){e.strokeStyle=o.Ta,Hi(e,o.Ra),e.beginPath();for(const l of o.Da){const c=Math.round(l.ka*i);e.moveTo(-a,c),e.lineTo(s.width+a,c)}e.stroke()}})}}class ID{constructor(e){this.Gt=new MD,this.xt=!0,this.Pt=e}kt(){this.xt=!0}Tt(){if(this.xt){const e=this.Pt.Qt().N().grid,s={ya:e.horzLines.visible,Sa:e.vertLines.visible,Ta:e.horzLines.color,xa:e.vertLines.color,Ra:e.horzLines.style,Ca:e.vertLines.style,Da:this.Pt.ys().Va(),Pa:(this.Pt.Qt().Et().Va()||[]).map(n=>({ka:n.coord}))};this.Gt.ht(s),this.xt=!1}return this.Gt}}class AD{constructor(e){this.sh=new ID(e)}lr(){return this.sh}}const wd={Ia:4,Ba:1e-4};function Pr(t,e){const s=100*(t-e)/e;return e<0?-s:s}function OD(t,e){const s=Pr(t.$e(),e),n=Pr(t.qe(),e);return new Ft(s,n)}function Ga(t,e){const s=100*(t-e)/e+100;return e<0?-s:s}function DD(t,e){const s=Ga(t.$e(),e),n=Ga(t.qe(),e);return new Ft(s,n)}function Qc(t,e){const s=Math.abs(t);if(s<1e-15)return 0;const n=Math.log10(s+e.Ba)+e.Ia;return t<0?-n:n}function Qa(t,e){const s=Math.abs(t);if(s<1e-15)return 0;const n=Math.pow(10,s-e.Ia)-e.Ba;return t<0?-n:n}function Sa(t,e){if(t===null)return null;const s=Qc(t.$e(),e),n=Qc(t.qe(),e);return new Ft(s,n)}function La(t,e){if(t===null)return null;const s=Qa(t.$e(),e),n=Qa(t.qe(),e);return new Ft(s,n)}function Sd(t){if(t===null)return wd;const e=Math.abs(t.qe()-t.$e());if(e>=1||e<1e-15)return wd;const s=Math.ceil(Math.abs(Math.log10(e))),n=wd.Ia+s;return{Ia:n,Ba:1/Math.pow(10,n)}}class bd{constructor(e,s){if(this.Ea=e,this.Aa=s,function(n){if(n<0)return!1;for(let i=n;i>1;i/=10)if(i%10!=0)return!1;return!0}(this.Ea))this.za=[2,2.5,2];else{this.za=[];for(let n=this.Ea;n!==1;){if(n%2==0)this.za.push(2),n/=2;else{if(n%5!=0)throw new Error("unexpected base");this.za.push(2,2.5),n/=5}if(this.za.length>100)throw new Error("something wrong with base")}}}La(e,s,n){const i=this.Ea===0?0:1/this.Ea;let a=Math.pow(10,Math.max(0,Math.ceil(Math.log10(e-s)))),o=0,l=this.Aa[0];for(;;){const d=Nl(a,i,1e-14)&&a>i+1e-14,f=Nl(a,n*l,1e-14),y=Nl(a,1,1e-14);if(!(d&&f&&y))break;a/=l,l=this.Aa[++o%this.Aa.length]}if(a<=i+1e-14&&(a=i),a=Math.max(1,a),this.za.length>0&&(c=a,u=1,h=1e-14,Math.abs(c-u)<h))for(o=0,l=this.za[0];Nl(a,n*l,1e-14)&&a>i+1e-14;)a/=l,l=this.za[++o%this.za.length];var c,u,h;return a}}class nx{constructor(e,s,n,i){this.Oa=[],this.Yi=e,this.Ea=s,this.Na=n,this.Fa=i}La(e,s){if(e<s)throw new Error("high < low");const n=this.Yi.$t(),i=(e-s)*this.Wa()/n,a=new bd(this.Ea,[2,2.5,2]),o=new bd(this.Ea,[2,2,2.5]),l=new bd(this.Ea,[2.5,2,2]),c=[];return c.push(a.La(e,s,i),o.La(e,s,i),l.La(e,s,i)),function(u){if(u.length<1)throw Error("array is empty");let h=u[0];for(let d=1;d<u.length;++d)u[d]<h&&(h=u[d]);return h}(c)}Ha(){const e=this.Yi,s=e.zt();if(s===null)return void(this.Oa=[]);const n=e.$t(),i=this.Na(n-1,s),a=this.Na(0,s),o=this.Yi.N().entireTextOnly?this.Ua()/2:0,l=o,c=n-1-o,u=Math.max(i,a),h=Math.min(i,a);if(u===h)return void(this.Oa=[]);const d=this.La(u,h);if(this.$a(s,d,u,h,l,c),e.qa()&&this.Ya(d,h,u)){const p=this.Yi.ja();this.Ka(s,d,l,c,p,2*p)}const f=this.Oa.map(p=>p.Xa),y=this.Yi.Za(f);for(let p=0;p<this.Oa.length;p++)this.Oa[p].Ga=y[p]}Va(){return this.Oa}Ua(){return this.Yi.P()}Wa(){return Math.ceil(2.5*this.Ua())}$a(e,s,n,i,a,o){const l=this.Oa,c=this.Yi;let u=n%s;u+=u<0?s:0;const h=n>=i?1:-1;let d=null,f=0;for(let y=n-u;y>i;y-=s){const p=this.Fa(y,e,!0);d!==null&&Math.abs(p-d)<this.Wa()||p<a||p>o||(f<l.length?(l[f].ka=p,l[f].Ga=c.Ja(y),l[f].Xa=y):l.push({ka:p,Ga:c.Ja(y),Xa:y}),f++,d=p,c.Qa()&&(s=this.La(y*h,i)))}l.length=f}Ka(e,s,n,i,a,o){const l=this.Oa,c=this.tl(e,n,a,o),u=this.tl(e,i,-o,-a),h=this.Fa(0,e,!0)-this.Fa(s,e,!0);l.length>0&&l[0].ka-c.ka<h/2&&l.shift(),l.length>0&&u.ka-l[l.length-1].ka<h/2&&l.pop(),l.unshift(c),l.push(u)}tl(e,s,n,i){const a=(n+i)/2,o=this.Na(s+n,e),l=this.Na(s+i,e),c=Math.min(o,l),u=Math.max(o,l),h=Math.max(.1,this.La(u,c)),d=this.Na(s+a,e),f=d-d%h,y=this.Fa(f,e,!0);return{Ga:this.Yi.Ja(f),ka:y,Xa:f}}Ya(e,s,n){let i=In(this.Yi.Qe());return this.Yi.Qa()&&(i=La(i,this.Yi.il())),i.$e()-s<e&&n-i.qe()<e}}function bN(t){return t.slice().sort((e,s)=>ee(e.hs())-ee(s.hs()))}var ix;(function(t){t[t.Normal=0]="Normal",t[t.Logarithmic=1]="Logarithmic",t[t.Percentage=2]="Percentage",t[t.IndexedTo100=3]="IndexedTo100"})(ix||(ix={}));const rx=new gN,ax=new Ku(100,1);class FD{constructor(e,s,n,i,a){this.sl=0,this.nl=null,this.Ge=null,this.el=null,this.rl={hl:!1,al:null},this.ll=!1,this.ol=0,this._l=0,this.ul=new nt,this.cl=new nt,this.dl=[],this.fl=null,this.pl=null,this.vl=null,this.ml=null,this.wl=null,this.ha=ax,this.gl=Sd(null),this.Ml=e,this.Ps=s,this.bl=n,this.Sl=i,this.xl=a,this.Cl=new nx(this,100,this.Pl.bind(this),this.kl.bind(this))}wa(){return this.Ml}N(){return this.Ps}hr(e){if(ns(this.Ps,e),this.ga(),e.mode!==void 0&&this.yl({ie:e.mode}),e.scaleMargins!==void 0){const s=Xt(e.scaleMargins.top),n=Xt(e.scaleMargins.bottom);if(s<0||s>1)throw new Error(`Invalid top margin - expect value between 0 and 1, given=${s}`);if(n<0||n>1)throw new Error(`Invalid bottom margin - expect value between 0 and 1, given=${n}`);if(s+n>1)throw new Error(`Invalid margins - sum of margins must be less than 1, given=${s+n}`);this.Tl(),this.vl=null}}Rl(){return this.Ps.autoScale}Dl(){return this.ll}Qa(){return this.Ps.mode===1}Le(){return this.Ps.mode===2}Vl(){return this.Ps.mode===3}il(){return this.gl}ie(){return{sn:this.Ps.autoScale,Il:this.Ps.invertScale,ie:this.Ps.mode}}yl(e){const s=this.ie();let n=null;e.sn!==void 0&&(this.Ps.autoScale=e.sn),e.ie!==void 0&&(this.Ps.mode=e.ie,e.ie!==2&&e.ie!==3||(this.Ps.autoScale=!0),this.rl.hl=!1),s.ie===1&&e.ie!==s.ie&&(function(a,o){if(a===null)return!1;const l=Qa(a.$e(),o),c=Qa(a.qe(),o);return isFinite(l)&&isFinite(c)}(this.Ge,this.gl)?(n=La(this.Ge,this.gl),n!==null&&this.Bl(n)):this.Ps.autoScale=!0),e.ie===1&&e.ie!==s.ie&&(n=Sa(this.Ge,this.gl),n!==null&&this.Bl(n));const i=s.ie!==this.Ps.mode;i&&(s.ie===2||this.Le())&&this.ga(),i&&(s.ie===3||this.Vl())&&this.ga(),e.Il!==void 0&&s.Il!==e.Il&&(this.Ps.invertScale=e.Il,this.El()),this.cl.p(s,this.ie())}Al(){return this.cl}P(){return this.bl.fontSize}$t(){return this.sl}zl(e){this.sl!==e&&(this.sl=e,this.Tl(),this.vl=null)}Ll(){if(this.nl)return this.nl;const e=this.$t()-this.Ol()-this.Nl();return this.nl=e,e}Qe(){return this.Fl(),this.Ge}Bl(e,s){const n=this.Ge;(s||n===null&&e!==null||n!==null&&!n.He(e))&&(this.vl=null,this.Ge=e)}Wl(e){this.Bl(e),this.Hl(e!==null)}Ki(){return this.Fl(),this.sl===0||!this.Ge||this.Ge.Ki()}Ul(e){return this.Il()?e:this.$t()-1-e}Nt(e,s){return this.Le()?e=Pr(e,s):this.Vl()&&(e=Ga(e,s)),this.kl(e,s)}$l(e,s,n){this.Fl();const i=this.Nl(),a=ee(this.Qe()),o=a.$e(),l=a.qe(),c=this.Ll()-1,u=this.Il(),h=c/(l-o),d=n===void 0?0:n.from,f=n===void 0?e.length:n.to,y=this.ql();for(let p=d;p<f;p++){const w=e[p],g=w.gt;if(isNaN(g))continue;let m=g;y!==null&&(m=y(w.gt,s));const x=i+h*(m-o),S=u?x:this.sl-1-x;w.ut=S}}Yl(e,s,n){this.Fl();const i=this.Nl(),a=ee(this.Qe()),o=a.$e(),l=a.qe(),c=this.Ll()-1,u=this.Il(),h=c/(l-o),d=n===void 0?0:n.from,f=n===void 0?e.length:n.to,y=this.ql();for(let p=d;p<f;p++){const w=e[p];let g=w.qh,m=w.Yh,x=w.jh,S=w.Kh;y!==null&&(g=y(w.qh,s),m=y(w.Yh,s),x=y(w.jh,s),S=y(w.Kh,s));let N=i+h*(g-o),j=u?N:this.sl-1-N;w.jl=j,N=i+h*(m-o),j=u?N:this.sl-1-N,w.Kl=j,N=i+h*(x-o),j=u?N:this.sl-1-N,w.Xl=j,N=i+h*(S-o),j=u?N:this.sl-1-N,w.Zl=j}}Ts(e,s){const n=this.Pl(e,s);return this.Gl(n,s)}Gl(e,s){let n=e;return this.Le()?n=function(i,a){return a<0&&(i=-i),i/100*a+a}(n,s):this.Vl()&&(n=function(i,a){return i-=100,a<0&&(i=-i),i/100*a+a}(n,s)),n}ba(){return this.dl}Dt(){return this.pl||(this.pl=bN(this.dl)),this.pl}Jl(e){this.dl.indexOf(e)===-1&&(this.dl.push(e),this.ga(),this.Ql())}io(e){const s=this.dl.indexOf(e);if(s===-1)throw new Error("source is not attached to scale");this.dl.splice(s,1),this.dl.length===0&&(this.yl({sn:!0}),this.Bl(null)),this.ga(),this.Ql()}zt(){let e=null;for(const s of this.dl){const n=s.zt();n!==null&&(e===null||n.Hh<e.Hh)&&(e=n)}return e===null?null:e.Wt}Il(){return this.Ps.invertScale}Va(){const e=this.zt()===null;if(this.vl!==null&&(e||this.vl.so===e))return this.vl.Va;this.Cl.Ha();const s=this.Cl.Va();return this.vl={Va:s,so:e},this.ul.p(),s}no(){return this.ul}eo(e){this.Le()||this.Vl()||this.ml===null&&this.el===null&&(this.Ki()||(this.ml=this.sl-e,this.el=ee(this.Qe()).Ue()))}ro(e){if(this.Le()||this.Vl()||this.ml===null)return;this.yl({sn:!1}),(e=this.sl-e)<0&&(e=0);let s=(this.ml+.2*(this.sl-1))/(e+.2*(this.sl-1));const n=ee(this.el).Ue();s=Math.max(s,.1),n.je(s),this.Bl(n)}ho(){this.Le()||this.Vl()||(this.ml=null,this.el=null)}ao(e){this.Rl()||this.wl===null&&this.el===null&&(this.Ki()||(this.wl=e,this.el=ee(this.Qe()).Ue()))}lo(e){if(this.Rl()||this.wl===null)return;const s=ee(this.Qe()).Ye()/(this.Ll()-1);let n=e-this.wl;this.Il()&&(n*=-1);const i=n*s,a=ee(this.el).Ue();a.Ke(i),this.Bl(a,!0),this.vl=null}oo(){this.Rl()||this.wl!==null&&(this.wl=null,this.el=null)}ra(){return this.ha||this.ga(),this.ha}Zi(e,s){switch(this.Ps.mode){case 2:return this._o(Pr(e,s));case 3:return this.ra().format(Ga(e,s));default:return this.nr(e)}}Ja(e){switch(this.Ps.mode){case 2:return this._o(e);case 3:return this.ra().format(e);default:return this.nr(e)}}Za(e){switch(this.Ps.mode){case 2:return this.uo(e);case 3:return this.ra().formatTickmarks(e);default:return this.co(e)}}Dh(e){return this.nr(e,ee(this.fl).ra())}Vh(e,s){return e=Pr(e,s),this._o(e,rx)}do(){return this.dl}fo(e){this.rl={al:e,hl:!1}}Ns(){this.dl.forEach(e=>e.Ns())}qa(){return this.Ps.ensureEdgeTickMarksVisible&&this.Rl()}ja(){return this.P()/2}ga(){this.vl=null;let e=1/0;this.fl=null;for(const n of this.dl)n.hs()<e&&(e=n.hs(),this.fl=n);let s=100;this.fl!==null&&(s=Math.round(1/this.fl.ea())),this.ha=ax,this.Le()?(this.ha=rx,s=100):this.Vl()?(this.ha=new Ku(100,1),s=100):this.fl!==null&&(this.ha=this.fl.ra()),this.Cl=new nx(this,s,this.Pl.bind(this),this.kl.bind(this)),this.Cl.Ha()}Ql(){this.pl=null}Xi(){return this.xl}Hl(e){this.ll=e}Ol(){return this.Il()?this.Ps.scaleMargins.bottom*this.$t()+this._l:this.Ps.scaleMargins.top*this.$t()+this.ol}Nl(){return this.Il()?this.Ps.scaleMargins.top*this.$t()+this.ol:this.Ps.scaleMargins.bottom*this.$t()+this._l}Fl(){this.rl.hl||(this.rl.hl=!0,this.po())}Tl(){this.nl=null}kl(e,s){if(this.Fl(),this.Ki())return 0;e=this.Qa()&&e?Qc(e,this.gl):e;const n=ee(this.Qe()),i=this.Nl()+(this.Ll()-1)*(e-n.$e())/n.Ye();return this.Ul(i)}Pl(e,s){if(this.Fl(),this.Ki())return 0;const n=this.Ul(e),i=ee(this.Qe()),a=i.$e()+i.Ye()*((n-this.Nl())/(this.Ll()-1));return this.Qa()?Qa(a,this.gl):a}El(){this.vl=null,this.Cl.Ha()}po(){if(this.Dl()&&!this.Rl())return;const e=this.rl.al;if(e===null)return;let s=null;const n=this.do();let i=0,a=0;for(const c of n){if(!c.Vt())continue;const u=c.zt();if(u===null)continue;const h=c.Mh(e.Uh(),e.bi());let d=h&&h.Qe();if(d!==null){switch(this.Ps.mode){case 1:d=Sa(d,this.gl);break;case 2:d=OD(d,u.Wt);break;case 3:d=DD(d,u.Wt)}if(s=s===null?d:s.vn(ee(d)),h!==null){const f=h.tr();f!==null&&(i=Math.max(i,f.above),a=Math.max(a,f.below))}}}if(this.qa()&&(i=Math.max(i,this.ja()),a=Math.max(a,this.ja())),i===this.ol&&a===this._l||(this.ol=i,this._l=a,this.vl=null,this.Tl()),s!==null){if(s.$e()===s.qe()){const c=this.fl,u=5*(c===null||this.Le()||this.Vl()?1:c.ea());this.Qa()&&(s=La(s,this.gl)),s=new Ft(s.$e()-u,s.qe()+u),this.Qa()&&(s=Sa(s,this.gl))}if(this.Qa()){const c=La(s,this.gl),u=Sd(c);if(o=u,l=this.gl,o.Ia!==l.Ia||o.Ba!==l.Ba){const h=this.el!==null?La(this.el,this.gl):null;this.gl=u,s=Sa(c,u),h!==null&&(this.el=Sa(h,u))}}this.Bl(s)}else this.Ge===null&&(this.Bl(new Ft(-.5,.5)),this.gl=Sd(null));var o,l}ql(){return this.Le()?Pr:this.Vl()?Ga:this.Qa()?e=>Qc(e,this.gl):null}vo(e,s,n){return s===void 0?(n===void 0&&(n=this.ra()),n.format(e)):s(e)}mo(e,s,n){return s===void 0?(n===void 0&&(n=this.ra()),n.formatTickmarks(e)):s(e)}nr(e,s){return this.vo(e,this.Sl.priceFormatter,s)}co(e,s){const n=this.Sl.priceFormatter;return this.mo(e,this.Sl.tickmarksPriceFormatter??(n?i=>i.map(n):void 0),s)}_o(e,s){return this.vo(e,this.Sl.percentageFormatter,s)}uo(e,s){const n=this.Sl.percentageFormatter;return this.mo(e,this.Sl.tickmarksPercentageFormatter??(n?i=>i.map(n):void 0),s)}}function ox(t){return t instanceof Xu}class lx{constructor(e,s){this.dl=[],this.wo=new Map,this.sl=0,this.Mo=0,this.bo=1,this.pl=null,this.So=!1,this.xo=new nt,this.kh=[],this.uh=e,this.ts=s,this.Co=new AD(this);const n=s.N();this.Po=this.ko("left",n.leftPriceScale),this.yo=this.ko("right",n.rightPriceScale),this.Po.Al().i(this.To.bind(this,this.Po),this),this.yo.Al().i(this.To.bind(this,this.yo),this),this.Ro(n)}Ro(e){if(e.leftPriceScale&&this.Po.hr(e.leftPriceScale),e.rightPriceScale&&this.yo.hr(e.rightPriceScale),e.localization&&(this.Po.ga(),this.yo.ga()),e.overlayPriceScales){const s=Array.from(this.wo.values());for(const n of s){const i=ee(n[0].Ft());i.hr(e.overlayPriceScales),e.localization&&i.ga()}}}Do(e){switch(e){case"left":return this.Po;case"right":return this.yo}return this.wo.has(e)?Xt(this.wo.get(e))[0].Ft():null}m(){this.Qt().Vo().u(this),this.Po.Al().u(this),this.yo.Al().u(this),this.dl.forEach(e=>{e.m&&e.m()}),this.kh=this.kh.filter(e=>{const s=e.oh();return s.detached&&s.detached(),!1}),this.xo.p()}Io(){return this.bo}Bo(e){this.bo=e}Qt(){return this.ts}Qi(){return this.Mo}$t(){return this.sl}Eo(e){this.Mo=e,this.Ao()}zl(e){this.sl=e,this.Po.zl(e),this.yo.zl(e),this.dl.forEach(s=>{if(this.Un(s)){const n=s.Ft();n!==null&&n.zl(e)}}),this.Ao()}zo(e){this.So=e}Lo(){return this.So}Oo(){return this.dl.filter(ox)}ba(){return this.dl}Un(e){const s=e.Ft();return s===null||this.Po!==s&&this.yo!==s}Jl(e,s,n){this.No(e,s,n?e.hs():this.dl.length)}io(e,s){const n=this.dl.indexOf(e);xt(n!==-1,"removeDataSource: invalid data source"),this.dl.splice(n,1),s||this.dl.forEach((o,l)=>o.ls(l));const i=ee(e.Ft()).wa();if(this.wo.has(i)){const o=Xt(this.wo.get(i)),l=o.indexOf(e);l!==-1&&(o.splice(l,1),o.length===0&&this.wo.delete(i))}const a=e.Ft();a&&a.ba().indexOf(e)>=0&&(a.io(e),this.Fo(a)),this.pl=null}qn(e){return e===this.Po?"left":e===this.yo?"right":"overlay"}Wo(){return this.Po}Ho(){return this.yo}Uo(e,s){e.eo(s)}$o(e,s){e.ro(s),this.Ao()}qo(e){e.ho()}Yo(e,s){e.ao(s)}jo(e,s){e.lo(s),this.Ao()}Ko(e){e.oo()}Ao(){this.dl.forEach(e=>{e.Ns()})}ys(){let e=null;return this.ts.N().rightPriceScale.visible&&this.yo.ba().length!==0?e=this.yo:this.ts.N().leftPriceScale.visible&&this.Po.ba().length!==0?e=this.Po:this.dl.length!==0&&(e=this.dl[0].Ft()),e===null&&(e=this.yo),e}$n(){let e=null;return this.ts.N().rightPriceScale.visible?e=this.yo:this.ts.N().leftPriceScale.visible&&(e=this.Po),e}Fo(e){e!==null&&e.Rl()&&this.Xo(e)}Zo(e){const s=this.uh.Pe();e.yl({sn:!0}),s!==null&&e.fo(s),this.Ao()}Go(){this.Xo(this.Po),this.Xo(this.yo)}Jo(){this.Fo(this.Po),this.Fo(this.yo),this.dl.forEach(e=>{this.Un(e)&&this.Fo(e.Ft())}),this.Ao(),this.ts.ar()}Dt(){return this.pl===null&&(this.pl=bN(this.dl)),this.pl}Qo(e,s){s=Ir(s,0,this.dl.length-1);const n=this.dl.indexOf(e);xt(n!==-1,"setSeriesOrder: invalid data source"),this.dl.splice(n,1),this.dl.splice(s,0,e),this.dl.forEach((i,a)=>i.ls(a)),this.pl=null;for(const i of[this.Po,this.yo])i.Ql(),i.ga();this.ts.ar()}It(){return this.Dt().filter(ox)}t_(){return this.xo}i_(){return this.Co}ua(e){this.kh.push(new bD(e))}ca(e){this.kh=this.kh.filter(s=>s.oh()!==e),e.detached&&e.detached(),this.ts.ar()}s_(){return this.kh}sa(e,s){return this.kh.map(n=>n.jn(e,s)).filter(n=>n!==null)}Xo(e){const s=e.do();if(s&&s.length>0&&!this.uh.Ki()){const n=this.uh.Pe();n!==null&&e.fo(n)}e.Ns()}No(e,s,n){let i=this.Do(s);if(i===null&&(i=this.ko(s,this.ts.N().overlayPriceScales)),this.dl.splice(n,0,e),!Qu(s)){const a=this.wo.get(s)||[];a.push(e),this.wo.set(s,a)}e.ls(n),i.Jl(e),e._s(i),this.Fo(i),this.pl=null}To(e,s,n){s.ie!==n.ie&&this.Xo(e)}ko(e,s){const n={visible:!0,autoScale:!0,...sn(s)},i=new FD(e,n,this.ts.N().layout,this.ts.N().localization,this.ts.Xi());return i.zl(this.$t()),i}}function kl(t){return{n_:t.n_,e_:{Kn:t.r_.externalId},h_:t.r_.cursorStyle}}function BD(t,e,s,n){for(const i of t){const a=i.Tt(n);if(a!==null&&a.jn){const o=a.jn(e,s);if(o!==null)return{a_:i,e_:o}}}return null}function $D(t){return t.Fs!==void 0}function jN(t,e,s){const n=[t,...t.Dt()],i=function(a,o,l){var f;let c,u;for(const y of a){const p=((f=y.sa)==null?void 0:f.call(y,o,l))??[];for(const w of p)h=w.zOrder,d=c==null?void 0:c.zOrder,(!d||h==="top"&&d!=="top"||h==="normal"&&d==="bottom")&&(c=w,u=y)}var h,d;return c&&u?{r_:c,n_:u}:null}(n,e,s);if((i==null?void 0:i.r_.zOrder)==="top")return kl(i);for(const a of n){if(i&&i.n_===a&&i.r_.zOrder!=="bottom"&&!i.r_.isBackground)return kl(i);if($D(a)){const o=BD(a.Fs(t),e,s,t);if(o!==null)return{n_:a,a_:o.a_,e_:o.e_}}if(i&&i.n_===a&&i.r_.zOrder!=="bottom"&&i.r_.isBackground)return kl(i)}return i!=null&&i.r_?kl(i):null}class zD{constructor(e,s,n=50){this.kn=0,this.yn=1,this.Tn=1,this.Dn=new Map,this.Rn=new Map,this.l_=e,this.o_=s,this.Vn=n}__(e){const s=e.time,n=this.o_.cacheKey(s),i=this.Dn.get(n);if(i!==void 0)return i.u_;if(this.kn===this.Vn){const o=this.Rn.get(this.Tn);this.Rn.delete(this.Tn),this.Dn.delete(Xt(o)),this.Tn++,this.kn--}const a=this.l_(e);return this.Dn.set(n,{u_:a,An:this.yn}),this.Rn.set(this.yn,n),this.kn++,this.yn++,a}}class Ka{constructor(e,s){xt(e<=s,"right should be >= left"),this.c_=e,this.d_=s}Uh(){return this.c_}bi(){return this.d_}f_(){return this.d_-this.c_+1}Te(e){return this.c_<=e&&e<=this.d_}He(e){return this.c_===e.Uh()&&this.d_===e.bi()}}function cx(t,e){return t===null||e===null?t===e:t.He(e)}class VD{constructor(){this.p_=new Map,this.Dn=null,this.v_=!1}m_(e){this.v_=e,this.Dn=null}w_(e,s){this.g_(s),this.Dn=null;for(let n=s;n<e.length;++n){const i=e[n];let a=this.p_.get(i.timeWeight);a===void 0&&(a=[],this.p_.set(i.timeWeight,a)),a.push({index:n,time:i.time,weight:i.timeWeight,originalTime:i.originalTime})}}M_(e,s,n,i,a){const o=Math.ceil(s/e);return this.Dn!==null&&this.Dn.b_===o&&a===this.Dn.S_&&n===this.Dn.x_||(this.Dn={S_:a,x_:n,Va:this.C_(o,n,i),b_:o}),this.Dn.Va}g_(e){if(e===0)return void this.p_.clear();const s=[];this.p_.forEach((n,i)=>{e<=n[0].index?s.push(i):n.splice(Kr(n,e,a=>a.index<e),1/0)});for(const n of s)this.p_.delete(n)}C_(e,s,n){let i=[];const a=o=>!s||n.has(o.index);for(const o of Array.from(this.p_.keys()).sort((l,c)=>c-l)){if(!this.p_.get(o))continue;const l=i;i=[];const c=l.length;let u=0;const h=Xt(this.p_.get(o)),d=h.length;let f=1/0,y=-1/0;for(let p=0;p<d;p++){const w=h[p],g=w.index;for(;u<c;){const m=l[u],x=m.index;if(!(x<g&&a(m))){f=x;break}u++,i.push(m),y=x,f=1/0}if(f-g>=e&&g-y>=e&&a(w))i.push(w),y=g;else if(this.v_)return l}for(;u<c;u++)a(l[u])&&i.push(l[u])}return i}}class Ar{constructor(e){this.P_=e}k_(){return this.P_===null?null:new Ka(Math.floor(this.P_.Uh()),Math.ceil(this.P_.bi()))}y_(){return this.P_}static T_(){return new Ar(null)}}function UD(t,e){return t.weight>e.weight?t:e}class WD{constructor(e,s,n,i){this.Mo=0,this.R_=null,this.D_=[],this.wl=null,this.ml=null,this.V_=new VD,this.I_=new Map,this.B_=Ar.T_(),this.E_=!0,this.A_=new nt,this.z_=new nt,this.L_=new nt,this.O_=null,this.N_=null,this.F_=new Map,this.W_=-1,this.H_=[],this.Ps=s,this.Sl=n,this.U_=s.rightOffset,this.q_=s.barSpacing,this.ts=e,this.o_=i,this.Y_(),this.V_.m_(s.uniformDistribution),this.j_()}N(){return this.Ps}K_(e){ns(this.Sl,e),this.X_(),this.Y_()}hr(e,s){ns(this.Ps,e),this.Ps.fixLeftEdge&&this.Z_(),this.Ps.fixRightEdge&&this.G_(),e.barSpacing!==void 0&&this.ts.dn(e.barSpacing),e.rightOffset!==void 0&&this.ts.fn(e.rightOffset),e.minBarSpacing===void 0&&e.maxBarSpacing===void 0||this.ts.dn(e.barSpacing??this.q_),e.ignoreWhitespaceIndices!==void 0&&e.ignoreWhitespaceIndices!==this.Ps.ignoreWhitespaceIndices&&this.j_(),this.X_(),this.Y_(),this.L_.p()}Rs(e){var s;return((s=this.D_[e])==null?void 0:s.time)??null}ss(e){return this.D_[e]??null}J_(e,s){if(this.D_.length<1)return null;if(this.o_.key(e)>this.o_.key(this.D_[this.D_.length-1].time))return s?this.D_.length-1:null;const n=Kr(this.D_,this.o_.key(e),(i,a)=>this.o_.key(i.time)<a);return this.o_.key(e)<this.o_.key(this.D_[n].time)?s?n:null:n}Ki(){return this.Mo===0||this.D_.length===0||this.R_===null}Q_(){return this.D_.length>0}Pe(){return this.tu(),this.B_.k_()}iu(){return this.tu(),this.B_.y_()}su(){const e=this.Pe();if(e===null)return null;const s={from:e.Uh(),to:e.bi()};return this.nu(s)}nu(e){const s=Math.round(e.from),n=Math.round(e.to),i=ee(this.eu()),a=ee(this.ru());return{from:ee(this.ss(Math.max(i,s))),to:ee(this.ss(Math.min(a,n)))}}hu(e){return{from:ee(this.J_(e.from,!0)),to:ee(this.J_(e.to,!0))}}Qi(){return this.Mo}Eo(e){if(!isFinite(e)||e<=0||this.Mo===e)return;const s=this.iu(),n=this.Mo;if(this.Mo=e,this.E_=!0,this.Ps.lockVisibleTimeRangeOnResize&&n!==0){const i=this.q_*e/n;this.q_=i}if(this.Ps.fixLeftEdge&&s!==null&&s.Uh()<=0){const i=n-e;this.U_-=Math.round(i/this.q_)+1,this.E_=!0}this.au(),this.lu()}qt(e){if(this.Ki()||!ko(e))return 0;const s=this.ou()+this.U_-e;return this.Mo-(s+.5)*this.q_-1}_u(e,s){const n=this.ou(),i=s===void 0?0:s.from,a=s===void 0?e.length:s.to;for(let o=i;o<a;o++){const l=e[o].wt,c=n+this.U_-l,u=this.Mo-(c+.5)*this.q_-1;e[o]._t=u}}uu(e,s){const n=Math.ceil(this.cu(e));return s&&this.Ps.ignoreWhitespaceIndices&&!this.du(n)?this.fu(n):n}fn(e){this.E_=!0,this.U_=e,this.lu(),this.ts.pu(),this.ts.ar()}vu(){return this.q_}dn(e){this.mu(e),this.lu(),this.ts.pu(),this.ts.ar()}wu(){return this.U_}Va(){if(this.Ki())return null;if(this.N_!==null)return this.N_;const e=this.q_,s=5*(this.ts.N().layout.fontSize+4)/8*(this.Ps.tickMarkMaxCharacterLength||8),n=Math.round(s/e),i=ee(this.Pe()),a=Math.max(i.Uh(),i.Uh()-n),o=Math.max(i.bi(),i.bi()-n),l=this.V_.M_(e,s,this.Ps.ignoreWhitespaceIndices,this.F_,this.W_),c=this.eu()+n,u=this.ru()-n,h=this.gu(),d=this.Ps.fixLeftEdge||h,f=this.Ps.fixRightEdge||h;let y=0;for(const p of l){if(!(a<=p.index&&p.index<=o))continue;let w;y<this.H_.length?(w=this.H_[y],w.coord=this.qt(p.index),w.label=this.Mu(p),w.weight=p.weight):(w={needAlignCoordinate:!1,coord:this.qt(p.index),label:this.Mu(p),weight:p.weight},this.H_.push(w)),this.q_>s/2&&!h?w.needAlignCoordinate=!1:w.needAlignCoordinate=d&&p.index<=c||f&&p.index>=u,y++}return this.H_.length=y,this.N_=this.H_,this.H_}bu(){this.E_=!0,this.dn(this.Ps.barSpacing),this.fn(this.Ps.rightOffset)}Su(e){this.E_=!0,this.R_=e,this.lu(),this.Z_()}xu(e,s){const n=this.cu(e),i=this.vu(),a=i+s*(i/10);this.dn(a),this.Ps.rightBarStaysOnScroll||this.fn(this.wu()+(n-this.cu(e)))}eo(e){this.wl&&this.oo(),this.ml===null&&this.O_===null&&(this.Ki()||(this.ml=e,this.Cu()))}ro(e){if(this.O_===null)return;const s=Ir(this.Mo-e,0,this.Mo),n=Ir(this.Mo-ee(this.ml),0,this.Mo);s!==0&&n!==0&&this.dn(this.O_.vu*s/n)}ho(){this.ml!==null&&(this.ml=null,this.Pu())}ao(e){this.wl===null&&this.O_===null&&(this.Ki()||(this.wl=e,this.Cu()))}lo(e){if(this.wl===null)return;const s=(this.wl-e)/this.vu();this.U_=ee(this.O_).wu+s,this.E_=!0,this.lu()}oo(){this.wl!==null&&(this.wl=null,this.Pu())}ku(){this.yu(this.Ps.rightOffset)}yu(e,s=400){if(!isFinite(e))throw new RangeError("offset is required and must be finite number");if(!isFinite(s)||s<=0)throw new RangeError("animationDuration (optional) must be finite positive number");const n=this.U_,i=performance.now();this.ts._n({Tu:a=>(a-i)/s>=1,Ru:a=>{const o=(a-i)/s;return o>=1?e:n+(e-n)*o}})}kt(e,s){this.E_=!0,this.D_=e,this.V_.w_(e,s),this.lu()}Du(){return this.A_}Vu(){return this.z_}Iu(){return this.L_}ou(){return this.R_||0}Bu(e){const s=e.f_();this.mu(this.Mo/s),this.U_=e.bi()-this.ou(),this.lu(),this.E_=!0,this.ts.pu(),this.ts.ar()}Eu(){const e=this.eu(),s=this.ru();e!==null&&s!==null&&this.Bu(new Ka(e,s+this.Ps.rightOffset))}Au(e){const s=new Ka(e.from,e.to);this.Bu(s)}ns(e){return this.Sl.timeFormatter!==void 0?this.Sl.timeFormatter(e.originalTime):this.o_.formatHorzItem(e.time)}j_(){if(!this.Ps.ignoreWhitespaceIndices)return;this.F_.clear();const e=this.ts.js();for(const s of e)for(const n of s.ma())this.F_.set(n,!0);this.W_++}gu(){const e=this.ts.N().handleScroll,s=this.ts.N().handleScale;return!(e.horzTouchDrag||e.mouseWheel||e.pressedMouseMove||e.vertTouchDrag||s.axisDoubleClickReset.time||s.axisPressedMouseMove.time||s.mouseWheel||s.pinch)}eu(){return this.D_.length===0?null:0}ru(){return this.D_.length===0?null:this.D_.length-1}zu(e){return(this.Mo-1-e)/this.q_}cu(e){const s=this.zu(e),n=this.ou()+this.U_-s;return Math.round(1e6*n)/1e6}mu(e){const s=this.q_;this.q_=e,this.au(),s!==this.q_&&(this.E_=!0,this.Lu())}tu(){if(!this.E_)return;if(this.E_=!1,this.Ki())return void this.Ou(Ar.T_());const e=this.ou(),s=this.Mo/this.q_,n=this.U_+e,i=new Ka(n-s+1,n);this.Ou(new Ar(i))}au(){const e=Ir(this.q_,this.Nu(),this.Fu());this.q_!==e&&(this.q_=e,this.E_=!0)}Fu(){return this.Ps.maxBarSpacing>0?this.Ps.maxBarSpacing:.5*this.Mo}Nu(){return this.Ps.fixLeftEdge&&this.Ps.fixRightEdge&&this.D_.length!==0?this.Mo/this.D_.length:this.Ps.minBarSpacing}lu(){const e=this.Wu();e!==null&&this.U_<e&&(this.U_=e,this.E_=!0);const s=this.Hu();this.U_>s&&(this.U_=s,this.E_=!0)}Wu(){const e=this.eu(),s=this.R_;return e===null||s===null?null:e-s-1+(this.Ps.fixLeftEdge?this.Mo/this.q_:Math.min(2,this.D_.length))}Hu(){return this.Ps.fixRightEdge?0:this.Mo/this.q_-Math.min(2,this.D_.length)}Cu(){this.O_={vu:this.vu(),wu:this.wu()}}Pu(){this.O_=null}Mu(e){let s=this.I_.get(e.weight);return s===void 0&&(s=new zD(n=>this.Uu(n),this.o_),this.I_.set(e.weight,s)),s.__(e)}Uu(e){return this.o_.formatTickmark(e,this.Sl)}Ou(e){const s=this.B_;this.B_=e,cx(s.k_(),this.B_.k_())||this.A_.p(),cx(s.y_(),this.B_.y_())||this.z_.p(),this.Lu()}Lu(){this.N_=null}X_(){this.Lu(),this.I_.clear()}Y_(){this.o_.updateFormatter(this.Sl)}Z_(){if(!this.Ps.fixLeftEdge)return;const e=this.eu();if(e===null)return;const s=this.Pe();if(s===null)return;const n=s.Uh()-e;if(n<0){const i=this.U_-n-1;this.fn(i)}this.au()}G_(){this.lu(),this.au()}du(e){return!this.Ps.ignoreWhitespaceIndices||this.F_.get(e)||!1}fu(e){const s=function*(i){const a=Math.round(i),o=a<i;let l=1;for(;;)o?(yield a+l,yield a-l):(yield a-l,yield a+l),l++}(e),n=this.ru();for(;n;){const i=s.next().value;if(this.F_.get(i))return i;if(i<0||i>n)break}return e}}var ux,hx,dx,Sm,fx;(function(t){t[t.OnTouchEnd=0]="OnTouchEnd",t[t.OnNextTap=1]="OnNextTap"})(ux||(ux={}));class HD{constructor(e,s,n){this.$u=[],this.qu=[],this.Mo=0,this.Yu=null,this.ju=new nt,this.Ku=new nt,this.Xu=null,this.Zu=e,this.Ps=s,this.o_=n,this.xl=new H3(this.Ps.layout.colorParsers),this.Gu=new W3(this),this.uh=new WD(this,s.timeScale,this.Ps.localization,n),this.Ct=new sD(this,s.crosshair),this.Ju=new RD(s.crosshair),s.addDefaultPane&&(this.Qu(0),this.$u[0].Bo(2)),this.tc=this.sc(0),this.nc=this.sc(1)}Bh(){this.ec(vt.gn())}ar(){this.ec(vt.wn())}Zh(){this.ec(new vt(1))}Eh(e){const s=this.rc(e);this.ec(s)}hc(){return this.Yu}ac(e){var n,i,a,o;if(((n=this.Yu)==null?void 0:n.n_)===(e==null?void 0:e.n_)&&((a=(i=this.Yu)==null?void 0:i.e_)==null?void 0:a.Kn)===((o=e==null?void 0:e.e_)==null?void 0:o.Kn))return;const s=this.Yu;this.Yu=e,s!==null&&this.Eh(s.n_),e!==null&&e.n_!==(s==null?void 0:s.n_)&&this.Eh(e.n_)}N(){return this.Ps}hr(e){ns(this.Ps,e),this.$u.forEach(s=>s.Ro(e)),e.timeScale!==void 0&&this.uh.hr(e.timeScale),e.localization!==void 0&&this.uh.K_(e.localization),(e.leftPriceScale||e.rightPriceScale)&&this.ju.p(),this.tc=this.sc(0),this.nc=this.sc(1),this.Bh()}lc(e,s,n=0){const i=this.$u[n];if(i===void 0)return;if(e==="left")return ns(this.Ps,{leftPriceScale:s}),i.Ro({leftPriceScale:s}),this.ju.p(),void this.Bh();if(e==="right")return ns(this.Ps,{rightPriceScale:s}),i.Ro({rightPriceScale:s}),this.ju.p(),void this.Bh();const a=this.oc(e,n);a!==null&&(a.Ft.hr(s),this.ju.p())}oc(e,s){const n=this.$u[s];if(n===void 0)return null;const i=n.Do(e);return i!==null?{Us:n,Ft:i}:null}Et(){return this.uh}$s(){return this.$u}_c(){return this.Ct}uc(){return this.Ku}cc(e,s){e.zl(s),this.pu()}Eo(e){this.Mo=e,this.uh.Eo(this.Mo),this.$u.forEach(s=>s.Eo(e)),this.pu()}dc(e){this.$u.length!==1&&(xt(e>=0&&e<this.$u.length,"Invalid pane index"),this.$u.splice(e,1),this.Bh())}fc(e,s){if(this.$u.length<2)return;xt(e>=0&&e<this.$u.length,"Invalid pane index");const n=this.$u[e],i=this.$u.reduce((d,f)=>d+f.Io(),0),a=this.$u.reduce((d,f)=>d+f.$t(),0),o=a-30*(this.$u.length-1);s=Math.min(o,Math.max(30,s));const l=i/a,c=n.$t();n.Bo(s*l);let u=s-c,h=this.$u.length-1;for(const d of this.$u)if(d!==n){const f=Math.min(o,Math.max(30,d.$t()-u/h));u-=d.$t()-f,h-=1;const y=f*l;d.Bo(y)}this.Bh()}vc(e,s){xt(e>=0&&e<this.$u.length&&s>=0&&s<this.$u.length,"Invalid pane index");const n=this.$u[e],i=this.$u[s];this.$u[e]=i,this.$u[s]=n,this.Bh()}mc(e,s){if(xt(e>=0&&e<this.$u.length&&s>=0&&s<this.$u.length,"Invalid pane index"),e===s)return;const[n]=this.$u.splice(e,1);this.$u.splice(s,0,n),this.Bh()}Uo(e,s,n){e.Uo(s,n)}$o(e,s,n){e.$o(s,n),this.Ah(),this.ec(this.wc(e,2))}qo(e,s){e.qo(s),this.ec(this.wc(e,2))}Yo(e,s,n){s.Rl()||e.Yo(s,n)}jo(e,s,n){s.Rl()||(e.jo(s,n),this.Ah(),this.ec(this.wc(e,2)))}Ko(e,s){s.Rl()||(e.Ko(s),this.ec(this.wc(e,2)))}Zo(e,s){e.Zo(s),this.ec(this.wc(e,2))}gc(e){this.uh.eo(e)}Mc(e,s){const n=this.Et();if(n.Ki()||s===0)return;const i=n.Qi();e=Math.max(1,Math.min(e,i)),n.xu(e,s),this.pu()}bc(e){this.Sc(0),this.xc(e),this.Cc()}Pc(e){this.uh.ro(e),this.pu()}kc(){this.uh.ho(),this.ar()}Sc(e){this.uh.ao(e)}xc(e){this.uh.lo(e),this.pu()}Cc(){this.uh.oo(),this.ar()}js(){return this.qu}yc(e,s,n,i,a){this.Ct.Vs(e,s);let o=NaN,l=this.uh.uu(e,!0);const c=this.uh.Pe();c!==null&&(l=Math.min(Math.max(c.Uh(),l),c.bi()));const u=i.ys(),h=u.zt();if(h!==null&&(o=u.Ts(s,h)),o=this.Ju.Ma(o,l,i),this.Ct.As(l,o,i),this.Zh(),!a){const d=jN(i,e,s);this.ac(d&&{n_:d.n_,e_:d.e_,h_:d.h_||null}),this.Ku.p(this.Ct.Bt(),{x:e,y:s},n)}}Tc(e,s,n){const i=n.ys(),a=i.zt(),o=i.Nt(e,ee(a)),l=this.uh.J_(s,!0),c=this.uh.qt(ee(l));this.yc(c,o,null,n,!0)}Rc(e){this._c().Ls(),this.Zh(),e||this.Ku.p(null,null,null)}Ah(){const e=this.Ct.Us();if(e!==null){const s=this.Ct.Bs(),n=this.Ct.Es();this.yc(s,n,null,e)}this.Ct.Ns()}Dc(e,s,n){const i=this.uh.Rs(0);s!==void 0&&n!==void 0&&this.uh.kt(s,n);const a=this.uh.Rs(0),o=this.uh.ou(),l=this.uh.Pe();if(l!==null&&i!==null&&a!==null){const c=l.Te(o),u=this.o_.key(i)>this.o_.key(a),h=e!==null&&e>o&&!u,d=this.uh.N().allowShiftVisibleRangeOnWhitespaceReplacement,f=c&&(n!==void 0||d)&&this.uh.N().shiftVisibleRangeOnNewBar;if(h&&!f){const y=e-o;this.uh.fn(this.uh.wu()-y)}}this.uh.Su(e)}Lh(e){e!==null&&e.Jo()}Hn(e){if(function(n){return n instanceof lx}(e))return e;const s=this.$u.find(n=>n.Dt().includes(e));return s===void 0?null:s}pu(){this.$u.forEach(e=>e.Jo()),this.Ah()}m(){this.$u.forEach(e=>e.m()),this.$u.length=0,this.Ps.localization.priceFormatter=void 0,this.Ps.localization.percentageFormatter=void 0,this.Ps.localization.timeFormatter=void 0}Vc(){return this.Gu}Yn(){return this.Gu.N()}Vo(){return this.ju}Ic(e,s){const n=this.Qu(s);this.Bc(e,n),this.qu.push(e),this.qu.length===1?this.Bh():this.ar()}Ec(e){const s=this.Hn(e),n=this.qu.indexOf(e);xt(n!==-1,"Series not found");const i=ee(s);this.qu.splice(n,1),i.io(e),e.m&&e.m(),this.uh.j_(),this.Ac(i)}Ih(e,s){const n=ee(this.Hn(e));n.io(e,!0),n.Jl(e,s,!0)}Eu(){const e=vt.wn();e.rn(),this.ec(e)}zc(e){const s=vt.wn();s.ln(e),this.ec(s)}cn(){const e=vt.wn();e.cn(),this.ec(e)}dn(e){const s=vt.wn();s.dn(e),this.ec(s)}fn(e){const s=vt.wn();s.fn(e),this.ec(s)}_n(e){const s=vt.wn();s._n(e),this.ec(s)}hn(){const e=vt.wn();e.hn(),this.ec(e)}Lc(){return this.Ps.rightPriceScale.visible?"right":"left"}Oc(e,s){if(xt(s>=0,"Index should be greater or equal to 0"),s===this.Nc(e))return;const n=ee(this.Hn(e));n.io(e);const i=this.Qu(s);this.Bc(e,i),n.ba().length===0&&this.Ac(n),this.Bh()}Fc(){return this.nc}$(){return this.tc}Ut(e){const s=this.nc,n=this.tc;if(s===n)return s;if(e=Math.max(0,Math.min(100,Math.round(100*e))),this.Xu===null||this.Xu.mr!==n||this.Xu.wr!==s)this.Xu={mr:n,wr:s,Wc:new Map};else{const a=this.Xu.Wc.get(e);if(a!==void 0)return a}const i=this.xl.tt(n,s,e/100);return this.Xu.Wc.set(e,i),i}Hc(e){return this.$u.indexOf(e)}Xi(){return this.xl}Uc(){return this.$c()}$c(e){const s=new lx(this.uh,this);this.$u.push(s);const n=e??this.$u.length-1,i=vt.gn();return i.Qs(n,{tn:0,sn:!0}),this.ec(i),s}Qu(e){return xt(e>=0,"Index should be greater or equal to 0"),(e=Math.min(this.$u.length,e))<this.$u.length?this.$u[e]:this.$c(e)}Nc(e){return this.$u.findIndex(s=>s.Oo().includes(e))}wc(e,s){const n=new vt(s);if(e!==null){const i=this.$u.indexOf(e);n.Qs(i,{tn:s})}return n}rc(e,s){return s===void 0&&(s=2),this.wc(this.Hn(e),s)}ec(e){this.Zu&&this.Zu(e),this.$u.forEach(s=>s.i_().lr().kt())}Bc(e,s){const n=e.N().priceScaleId,i=n!==void 0?n:this.Lc();s.Jl(e,i),Qu(i)||e.hr(e.N())}sc(e){const s=this.Ps.layout;return s.background.type==="gradient"?e===0?s.background.topColor:s.background.bottomColor:s.background.color}Ac(e){!e.Lo()&&e.ba().length===0&&this.$u.length>1&&this.$u.splice(this.Hc(e),1)}}function bm(t){return!Qr(t)&&!Wo(t)}function NN(t){return Qr(t)}(function(t){t[t.Disabled=0]="Disabled",t[t.Continuous=1]="Continuous",t[t.OnDataUpdate=2]="OnDataUpdate"})(hx||(hx={})),function(t){t[t.LastBar=0]="LastBar",t[t.LastVisible=1]="LastVisible"}(dx||(dx={})),function(t){t.Solid="solid",t.VerticalGradient="gradient"}(Sm||(Sm={})),function(t){t[t.Year=0]="Year",t[t.Month=1]="Month",t[t.DayOfMonth=2]="DayOfMonth",t[t.Time=3]="Time",t[t.TimeWithSeconds=4]="TimeWithSeconds"}(fx||(fx={}));const mx=t=>t.getUTCFullYear();function YD(t,e,s){return e.replace(/yyyy/g,(n=>nn(mx(n),4))(t)).replace(/yy/g,(n=>nn(mx(n)%100,2))(t)).replace(/MMMM/g,((n,i)=>new Date(n.getUTCFullYear(),n.getUTCMonth(),1).toLocaleString(i,{month:"long"}))(t,s)).replace(/MMM/g,((n,i)=>new Date(n.getUTCFullYear(),n.getUTCMonth(),1).toLocaleString(i,{month:"short"}))(t,s)).replace(/MM/g,(n=>nn((i=>i.getUTCMonth()+1)(n),2))(t)).replace(/dd/g,(n=>nn((i=>i.getUTCDate())(n),2))(t))}class kN{constructor(e="yyyy-MM-dd",s="default"){this.qc=e,this.Yc=s}__(e){return YD(e,this.qc,this.Yc)}}class qD{constructor(e){this.jc=e||"%h:%m:%s"}__(e){return this.jc.replace("%h",nn(e.getUTCHours(),2)).replace("%m",nn(e.getUTCMinutes(),2)).replace("%s",nn(e.getUTCSeconds(),2))}}const GD={Kc:"yyyy-MM-dd",Xc:"%h:%m:%s",Zc:" ",Gc:"default"};class QD{constructor(e={}){const s={...GD,...e};this.Jc=new kN(s.Kc,s.Gc),this.Qc=new qD(s.Xc),this.td=s.Zc}__(e){return`${this.Jc.__(e)}${this.td}${this.Qc.__(e)}`}}function Cl(t){return 60*t*60*1e3}function jd(t){return 60*t*1e3}const Pl=[{sd:(px=1,1e3*px),nd:10},{sd:jd(1),nd:20},{sd:jd(5),nd:21},{sd:jd(30),nd:22},{sd:Cl(1),nd:30},{sd:Cl(3),nd:31},{sd:Cl(6),nd:32},{sd:Cl(12),nd:33}];var px;function gx(t,e){if(t.getUTCFullYear()!==e.getUTCFullYear())return 70;if(t.getUTCMonth()!==e.getUTCMonth())return 60;if(t.getUTCDate()!==e.getUTCDate())return 50;for(let s=Pl.length-1;s>=0;--s)if(Math.floor(e.getTime()/Pl[s].sd)!==Math.floor(t.getTime()/Pl[s].sd))return Pl[s].nd;return 0}function Nd(t){let e=t;if(Wo(t)&&(e=fg(t)),!bm(e))throw new Error("time must be of type BusinessDay");const s=new Date(Date.UTC(e.year,e.month-1,e.day,0,0,0,0));return{ed:Math.round(s.getTime()/1e3),rd:e}}function yx(t){if(!NN(t))throw new Error("time must be of type isUTCTimestamp");return{ed:t}}function fg(t){const e=new Date(t);if(isNaN(e.getTime()))throw new Error(`Invalid date string=${t}, expected format=yyyy-mm-dd`);return{day:e.getUTCDate(),month:e.getUTCMonth()+1,year:e.getUTCFullYear()}}function vx(t){Wo(t.time)&&(t.time=fg(t.time))}class xx{options(){return this.Ps}setOptions(e){this.Ps=e,this.updateFormatter(e.localization)}preprocessData(e){Array.isArray(e)?function(s){s.forEach(vx)}(e):vx(e)}createConverterToInternalObj(e){return ee(function(s){return s.length===0?null:bm(s[0].time)||Wo(s[0].time)?Nd:yx}(e))}key(e){return typeof e=="object"&&"ed"in e?e.ed:this.key(this.convertHorzItemToInternal(e))}cacheKey(e){const s=e;return s.rd===void 0?new Date(1e3*s.ed).getTime():new Date(Date.UTC(s.rd.year,s.rd.month-1,s.rd.day)).getTime()}convertHorzItemToInternal(e){return NN(s=e)?yx(s):bm(s)?Nd(s):Nd(fg(s));var s}updateFormatter(e){if(!this.Ps)return;const s=e.dateFormat;this.Ps.timeScale.timeVisible?this.hd=new QD({Kc:s,Xc:this.Ps.timeScale.secondsVisible?"%h:%m:%s":"%h:%m",Zc:"   ",Gc:e.locale}):this.hd=new kN(s,e.locale)}formatHorzItem(e){const s=e;return this.hd.__(new Date(1e3*s.ed))}formatTickmark(e,s){const n=function(a,o,l){switch(a){case 0:case 10:return o?l?4:3:2;case 20:case 21:case 22:case 30:case 31:case 32:case 33:return o?3:2;case 50:return 2;case 60:return 1;case 70:return 0}}(e.weight,this.Ps.timeScale.timeVisible,this.Ps.timeScale.secondsVisible),i=this.Ps.timeScale;if(i.tickMarkFormatter!==void 0){const a=i.tickMarkFormatter(e.originalTime,n,s.locale);if(a!==null)return a}return function(a,o,l){const c={};switch(o){case 0:c.year="numeric";break;case 1:c.month="short";break;case 2:c.day="numeric";break;case 3:c.hour12=!1,c.hour="2-digit",c.minute="2-digit";break;case 4:c.hour12=!1,c.hour="2-digit",c.minute="2-digit",c.second="2-digit"}const u=a.rd===void 0?new Date(1e3*a.ed):new Date(Date.UTC(a.rd.year,a.rd.month-1,a.rd.day));return new Date(u.getUTCFullYear(),u.getUTCMonth(),u.getUTCDate(),u.getUTCHours(),u.getUTCMinutes(),u.getUTCSeconds(),u.getUTCMilliseconds()).toLocaleString(l,c)}(e.time,n,s.locale)}maxTickMarkWeight(e){let s=e.reduce(UD,e[0]).weight;return s>30&&s<50&&(s=30),s}fillWeightsForPoints(e,s){(function(n,i=0){if(n.length===0)return;let a=i===0?null:n[i-1].time.ed,o=a!==null?new Date(1e3*a):null,l=0;for(let c=i;c<n.length;++c){const u=n[c],h=new Date(1e3*u.time.ed);o!==null&&(u.timeWeight=gx(h,o)),l+=u.time.ed-(a||u.time.ed),a=u.time.ed,o=h}if(i===0&&n.length>1){const c=Math.ceil(l/(n.length-1)),u=new Date(1e3*(n[0].time.ed-c));n[0].timeWeight=gx(new Date(1e3*n[0].time.ed),u)}})(e,s)}static ad(e){return ns({localization:{dateFormat:"dd MMM 'yy"}},e??{})}}const Xr=typeof window<"u";function wx(){return!!Xr&&window.navigator.userAgent.toLowerCase().indexOf("firefox")>-1}function kd(){return!!Xr&&/iPhone|iPad|iPod/.test(window.navigator.platform)}function jm(t){return t+t%2}function KD(t){Xr&&window.chrome!==void 0&&t.addEventListener("mousedown",e=>{if(e.button===1)return e.preventDefault(),!1})}class Ju{constructor(e,s,n){this.ld=0,this.od=null,this._d={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY},this.ud=0,this.dd=null,this.fd={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY},this.pd=null,this.vd=!1,this.md=null,this.wd=null,this.gd=!1,this.Md=!1,this.bd=!1,this.Sd=null,this.xd=null,this.Cd=null,this.Pd=null,this.kd=null,this.yd=null,this.Td=null,this.Rd=0,this.Dd=!1,this.Vd=!1,this.Id=!1,this.Bd=0,this.Ed=null,this.Ad=!kd(),this.zd=i=>{this.Ld(i)},this.Od=i=>{if(this.Nd(i)){const a=this.Fd(i);if(++this.ud,this.dd&&this.ud>1){const{Wd:o}=this.Hd($s(i),this.fd);o<30&&!this.bd&&this.Ud(a,this.qd.$d),this.Yd()}}else{const a=this.Fd(i);if(++this.ld,this.od&&this.ld>1){const{Wd:o}=this.Hd($s(i),this._d);o<5&&!this.Md&&this.jd(a,this.qd.Kd),this.Xd()}}},this.Zd=e,this.qd=s,this.Ps=n,this.Gd()}m(){this.Sd!==null&&(this.Sd(),this.Sd=null),this.xd!==null&&(this.xd(),this.xd=null),this.Pd!==null&&(this.Pd(),this.Pd=null),this.kd!==null&&(this.kd(),this.kd=null),this.yd!==null&&(this.yd(),this.yd=null),this.Cd!==null&&(this.Cd(),this.Cd=null),this.Jd(),this.Xd()}Qd(e){this.Pd&&this.Pd();const s=this.tf.bind(this);if(this.Pd=()=>{this.Zd.removeEventListener("mousemove",s)},this.Zd.addEventListener("mousemove",s),this.Nd(e))return;const n=this.Fd(e);this.jd(n,this.qd.if),this.Ad=!0}Xd(){this.od!==null&&clearTimeout(this.od),this.ld=0,this.od=null,this._d={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY}}Yd(){this.dd!==null&&clearTimeout(this.dd),this.ud=0,this.dd=null,this.fd={_t:Number.NEGATIVE_INFINITY,ut:Number.POSITIVE_INFINITY}}tf(e){if(this.Id||this.wd!==null||this.Nd(e))return;const s=this.Fd(e);this.jd(s,this.qd.sf),this.Ad=!0}nf(e){const s=Cd(e.changedTouches,ee(this.Ed));if(s===null||(this.Bd=Tl(e),this.Td!==null)||this.Vd)return;this.Dd=!0;const n=this.Hd($s(s),ee(this.wd)),{ef:i,rf:a,Wd:o}=n;if(this.gd||!(o<5)){if(!this.gd){const l=.5*i,c=a>=l&&!this.Ps.hf(),u=l>a&&!this.Ps.af();c||u||(this.Vd=!0),this.gd=!0,this.bd=!0,this.Jd(),this.Yd()}if(!this.Vd){const l=this.Fd(e,s);this.Ud(l,this.qd.lf),lr(e)}}}_f(e){if(e.button!==0)return;const s=this.Hd($s(e),ee(this.md)),{Wd:n}=s;if(n>=5&&(this.Md=!0,this.Xd()),this.Md){const i=this.Fd(e);this.jd(i,this.qd.uf)}}Hd(e,s){const n=Math.abs(s._t-e._t),i=Math.abs(s.ut-e.ut);return{ef:n,rf:i,Wd:n+i}}cf(e){let s=Cd(e.changedTouches,ee(this.Ed));if(s===null&&e.touches.length===0&&(s=e.changedTouches[0]),s===null)return;this.Ed=null,this.Bd=Tl(e),this.Jd(),this.wd=null,this.yd&&(this.yd(),this.yd=null);const n=this.Fd(e,s);if(this.Ud(n,this.qd.df),++this.ud,this.dd&&this.ud>1){const{Wd:i}=this.Hd($s(s),this.fd);i<30&&!this.bd&&this.Ud(n,this.qd.$d),this.Yd()}else this.bd||(this.Ud(n,this.qd.ff),this.qd.ff&&lr(e));this.ud===0&&lr(e),e.touches.length===0&&this.vd&&(this.vd=!1,lr(e))}Ld(e){if(e.button!==0)return;const s=this.Fd(e);if(this.md=null,this.Id=!1,this.kd&&(this.kd(),this.kd=null),wx()&&this.Zd.ownerDocument.documentElement.removeEventListener("mouseleave",this.zd),!this.Nd(e))if(this.jd(s,this.qd.pf),++this.ld,this.od&&this.ld>1){const{Wd:n}=this.Hd($s(e),this._d);n<5&&!this.Md&&this.jd(s,this.qd.Kd),this.Xd()}else this.Md||this.jd(s,this.qd.vf)}Jd(){this.pd!==null&&(clearTimeout(this.pd),this.pd=null)}mf(e){if(this.Ed!==null)return;const s=e.changedTouches[0];this.Ed=s.identifier,this.Bd=Tl(e);const n=this.Zd.ownerDocument.documentElement;this.bd=!1,this.gd=!1,this.Vd=!1,this.wd=$s(s),this.yd&&(this.yd(),this.yd=null);{const a=this.nf.bind(this),o=this.cf.bind(this);this.yd=()=>{n.removeEventListener("touchmove",a),n.removeEventListener("touchend",o)},n.addEventListener("touchmove",a,{passive:!1}),n.addEventListener("touchend",o,{passive:!1}),this.Jd(),this.pd=setTimeout(this.wf.bind(this,e),240)}const i=this.Fd(e,s);this.Ud(i,this.qd.gf),this.dd||(this.ud=0,this.dd=setTimeout(this.Yd.bind(this),500),this.fd=$s(s))}Mf(e){if(e.button!==0)return;const s=this.Zd.ownerDocument.documentElement;wx()&&s.addEventListener("mouseleave",this.zd),this.Md=!1,this.md=$s(e),this.kd&&(this.kd(),this.kd=null);{const i=this._f.bind(this),a=this.Ld.bind(this);this.kd=()=>{s.removeEventListener("mousemove",i),s.removeEventListener("mouseup",a)},s.addEventListener("mousemove",i),s.addEventListener("mouseup",a)}if(this.Id=!0,this.Nd(e))return;const n=this.Fd(e);this.jd(n,this.qd.bf),this.od||(this.ld=0,this.od=setTimeout(this.Xd.bind(this),500),this._d=$s(e))}Gd(){this.Zd.addEventListener("mouseenter",this.Qd.bind(this)),this.Zd.addEventListener("touchcancel",this.Jd.bind(this));{const e=this.Zd.ownerDocument,s=n=>{this.qd.Sf&&(n.composed&&this.Zd.contains(n.composedPath()[0])||n.target&&this.Zd.contains(n.target)||this.qd.Sf())};this.xd=()=>{e.removeEventListener("touchstart",s)},this.Sd=()=>{e.removeEventListener("mousedown",s)},e.addEventListener("mousedown",s),e.addEventListener("touchstart",s,{passive:!0})}kd()&&(this.Cd=()=>{this.Zd.removeEventListener("dblclick",this.Od)},this.Zd.addEventListener("dblclick",this.Od)),this.Zd.addEventListener("mouseleave",this.xf.bind(this)),this.Zd.addEventListener("touchstart",this.mf.bind(this),{passive:!0}),KD(this.Zd),this.Zd.addEventListener("mousedown",this.Mf.bind(this)),this.Cf(),this.Zd.addEventListener("touchmove",()=>{},{passive:!1})}Cf(){this.qd.Pf===void 0&&this.qd.kf===void 0&&this.qd.yf===void 0||(this.Zd.addEventListener("touchstart",e=>this.Tf(e.touches),{passive:!0}),this.Zd.addEventListener("touchmove",e=>{if(e.touches.length===2&&this.Td!==null&&this.qd.kf!==void 0){const s=Sx(e.touches[0],e.touches[1])/this.Rd;this.qd.kf(this.Td,s),lr(e)}},{passive:!1}),this.Zd.addEventListener("touchend",e=>{this.Tf(e.touches)}))}Tf(e){e.length===1&&(this.Dd=!1),e.length!==2||this.Dd||this.vd?this.Rf():this.Df(e)}Df(e){const s=this.Zd.getBoundingClientRect()||{left:0,top:0};this.Td={_t:(e[0].clientX-s.left+(e[1].clientX-s.left))/2,ut:(e[0].clientY-s.top+(e[1].clientY-s.top))/2},this.Rd=Sx(e[0],e[1]),this.qd.Pf!==void 0&&this.qd.Pf(),this.Jd()}Rf(){this.Td!==null&&(this.Td=null,this.qd.yf!==void 0&&this.qd.yf())}xf(e){if(this.Pd&&this.Pd(),this.Nd(e)||!this.Ad)return;const s=this.Fd(e);this.jd(s,this.qd.Vf),this.Ad=!kd()}wf(e){const s=Cd(e.touches,ee(this.Ed));if(s===null)return;const n=this.Fd(e,s);this.Ud(n,this.qd.If),this.bd=!0,this.vd=!0}Nd(e){return e.sourceCapabilities&&e.sourceCapabilities.firesTouchEvents!==void 0?e.sourceCapabilities.firesTouchEvents:Tl(e)<this.Bd+500}Ud(e,s){s&&s.call(this.qd,e)}jd(e,s){s&&s.call(this.qd,e)}Fd(e,s){const n=s||e,i=this.Zd.getBoundingClientRect()||{left:0,top:0};return{clientX:n.clientX,clientY:n.clientY,pageX:n.pageX,pageY:n.pageY,screenX:n.screenX,screenY:n.screenY,localX:n.clientX-i.left,localY:n.clientY-i.top,ctrlKey:e.ctrlKey,altKey:e.altKey,shiftKey:e.shiftKey,metaKey:e.metaKey,Bf:!e.type.startsWith("mouse")&&e.type!=="contextmenu"&&e.type!=="click",Ef:e.type,Af:n.target,a_:e.view,zf:()=>{e.type!=="touchstart"&&lr(e)}}}}function Sx(t,e){const s=t.clientX-e.clientX,n=t.clientY-e.clientY;return Math.sqrt(s*s+n*n)}function lr(t){t.cancelable&&t.preventDefault()}function $s(t){return{_t:t.pageX,ut:t.pageY}}function Tl(t){return t.timeStamp||performance.now()}function Cd(t,e){for(let s=0;s<t.length;++s)if(t[s].identifier===e)return t[s];return null}class XD{constructor(e,s,n){this.Lf=null,this.Of=null,this.Nf=!0,this.Ff=null,this.Wf=e,this.Hf=e.Uf()[s],this.$f=e.Uf()[n],this.qf=document.createElement("tr"),this.qf.style.height="1px",this.Yf=document.createElement("td"),this.Yf.style.position="relative",this.Yf.style.padding="0",this.Yf.style.margin="0",this.Yf.setAttribute("colspan","3"),this.jf(),this.qf.appendChild(this.Yf),this.Nf=this.Wf.N().layout.panes.enableResize,this.Nf?this.Kf():(this.Lf=null,this.Of=null)}m(){this.Of!==null&&this.Of.m()}Xf(){return this.qf}Zf(){return Ie({width:this.Hf.Zf().width,height:1})}Gf(){return Ie({width:this.Hf.Gf().width,height:1*window.devicePixelRatio})}Jf(e,s,n){const i=this.Gf();e.fillStyle=this.Wf.N().layout.panes.separatorColor,e.fillRect(s,n,i.width,i.height)}kt(){this.jf(),this.Wf.N().layout.panes.enableResize!==this.Nf&&(this.Nf=this.Wf.N().layout.panes.enableResize,this.Nf?this.Kf():(this.Lf!==null&&(this.Yf.removeChild(this.Lf.Qf),this.Yf.removeChild(this.Lf.tp),this.Lf=null),this.Of!==null&&(this.Of.m(),this.Of=null)))}Kf(){const e=document.createElement("div"),s=e.style;s.position="fixed",s.display="none",s.zIndex="49",s.top="0",s.left="0",s.width="100%",s.height="100%",s.cursor="row-resize",this.Yf.appendChild(e);const n=document.createElement("div"),i=n.style;i.position="absolute",i.zIndex="50",i.top="-4px",i.height="9px",i.width="100%",i.backgroundColor="",i.cursor="row-resize",this.Yf.appendChild(n);const a={if:this.ip.bind(this),Vf:this.sp.bind(this),bf:this.np.bind(this),gf:this.np.bind(this),uf:this.ep.bind(this),lf:this.ep.bind(this),pf:this.rp.bind(this),df:this.rp.bind(this)};this.Of=new Ju(n,a,{hf:()=>!1,af:()=>!0}),this.Lf={tp:n,Qf:e}}jf(){this.Yf.style.background=this.Wf.N().layout.panes.separatorColor}ip(e){this.Lf!==null&&(this.Lf.tp.style.backgroundColor=this.Wf.N().layout.panes.separatorHoverColor)}sp(e){this.Lf!==null&&this.Ff===null&&(this.Lf.tp.style.backgroundColor="")}np(e){if(this.Lf===null)return;const s=this.Hf.hp().Io()+this.$f.hp().Io(),n=s/(this.Hf.Zf().height+this.$f.Zf().height),i=30*n;s<=2*i||(this.Ff={ap:e.pageY,lp:this.Hf.hp().Io(),op:s-i,_p:s,up:n,cp:i},this.Lf.Qf.style.display="block")}ep(e){const s=this.Ff;if(s===null)return;const n=(e.pageY-s.ap)*s.up,i=Ir(s.lp+n,s.cp,s.op);this.Hf.hp().Bo(i),this.$f.hp().Bo(s._p-i),this.Wf.Qt().Bh()}rp(e){this.Ff!==null&&this.Lf!==null&&(this.Ff=null,this.Lf.Qf.style.display="none")}}function Pd(t,e){return t.dp-e.dp}function Td(t,e,s){const n=(t.dp-e.dp)/(t.wt-e.wt);return Math.sign(n)*Math.min(Math.abs(n),s)}class JD{constructor(e,s,n,i){this.fp=null,this.pp=null,this.vp=null,this.mp=null,this.wp=null,this.gp=0,this.Mp=0,this.bp=e,this.Sp=s,this.xp=n,this.Mn=i}Cp(e,s){if(this.fp!==null){if(this.fp.wt===s)return void(this.fp.dp=e);if(Math.abs(this.fp.dp-e)<this.Mn)return}this.mp=this.vp,this.vp=this.pp,this.pp=this.fp,this.fp={wt:s,dp:e}}le(e,s){if(this.fp===null||this.pp===null||s-this.fp.wt>50)return;let n=0;const i=Td(this.fp,this.pp,this.Sp),a=Pd(this.fp,this.pp),o=[i],l=[a];if(n+=a,this.vp!==null){const u=Td(this.pp,this.vp,this.Sp);if(Math.sign(u)===Math.sign(i)){const h=Pd(this.pp,this.vp);if(o.push(u),l.push(h),n+=h,this.mp!==null){const d=Td(this.vp,this.mp,this.Sp);if(Math.sign(d)===Math.sign(i)){const f=Pd(this.vp,this.mp);o.push(d),l.push(f),n+=f}}}}let c=0;for(let u=0;u<o.length;++u)c+=l[u]/n*o[u];Math.abs(c)<this.bp||(this.wp={dp:e,wt:s},this.Mp=c,this.gp=function(u,h){const d=Math.log(h);return Math.log(1*d/-u)/d}(Math.abs(c),this.xp))}Ru(e){const s=ee(this.wp),n=e-s.wt;return s.dp+this.Mp*(Math.pow(this.xp,n)-1)/Math.log(this.xp)}Tu(e){return this.wp===null||this.Pp(e)===this.gp}Pp(e){const s=e-ee(this.wp).wt;return Math.min(s,this.gp)}}class ZD{constructor(e,s){this.kp=void 0,this.yp=void 0,this.Tp=void 0,this.ps=!1,this.Rp=e,this.Dp=s,this.Vp()}kt(){this.Vp()}Ip(){this.kp&&this.Rp.removeChild(this.kp),this.yp&&this.Rp.removeChild(this.yp),this.kp=void 0,this.yp=void 0}Bp(){return this.ps!==this.Ep()||this.Tp!==this.Ap()}Ap(){return this.Dp.Qt().Xi().J(this.Dp.N().layout.textColor)>160?"dark":"light"}Ep(){return this.Dp.N().layout.attributionLogo}zp(){const e=new URL(location.href);return e.hostname?"&utm_source="+e.hostname+e.pathname:""}Vp(){this.Bp()&&(this.Ip(),this.ps=this.Ep(),this.ps&&(this.Tp=this.Ap(),this.yp=document.createElement("style"),this.yp.innerText="a#tv-attr-logo{--fill:#131722;--stroke:#fff;position:absolute;left:10px;bottom:10px;height:19px;width:35px;margin:0;padding:0;border:0;z-index:3;}a#tv-attr-logo[data-dark]{--fill:#D1D4DC;--stroke:#131722;}",this.kp=document.createElement("a"),this.kp.href=`https://www.tradingview.com/?utm_medium=lwc-link&utm_campaign=lwc-chart${this.zp()}`,this.kp.title="Charting by TradingView",this.kp.id="tv-attr-logo",this.kp.target="_blank",this.kp.innerHTML='<svg xmlns="http://www.w3.org/2000/svg" width="35" height="19" fill="none"><g fill-rule="evenodd" clip-path="url(#a)" clip-rule="evenodd"><path fill="var(--stroke)" d="M2 0H0v10h6v9h21.4l.5-1.3 6-15 1-2.7H23.7l-.5 1.3-.2.6a5 5 0 0 0-7-.9V0H2Zm20 17h4l5.2-13 .8-2h-7l-1 2.5-.2.5-1.5 3.8-.3.7V17Zm-.8-10a3 3 0 0 0 .7-2.7A3 3 0 1 0 16.8 7h4.4ZM14 7V2H2v6h6v9h4V7h2Z"/><path fill="var(--fill)" d="M14 2H2v6h6v9h6V2Zm12 15h-7l6-15h7l-6 15Zm-7-9a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z"/></g><defs><clipPath id="a"><path fill="var(--stroke)" d="M0 0h35v19H0z"/></clipPath></defs></svg>',this.kp.toggleAttribute("data-dark",this.Tp==="dark"),this.Rp.appendChild(this.yp),this.Rp.appendChild(this.kp)))}}function Yi(t,e){const s=ee(t.ownerDocument).createElement("canvas");t.appendChild(s);const n=B3(s,{options:{allowResizeObserver:!0},transform:(i,a)=>({width:Math.max(i.width,a.width),height:Math.max(i.height,a.height)})});return n.resizeCanvasElement(e),n}function qi(t){var e;t.width=1,t.height=1,(e=t.getContext("2d"))==null||e.clearRect(0,0,1,1)}function Nm(t,e,s,n){t.ih&&t.ih(e,s,n)}function ec(t,e,s,n){t.nt(e,s,n)}function km(t,e,s,n){const i=t(s,n);for(const a of i){const o=a.Tt(n);o!==null&&e(o)}}function Ed(t,e){return s=>{var n,i;return function(a){return a.Ft!==void 0}(s)?(((n=s.Ft())==null?void 0:n.wa())??"")!==e?[]:((i=s.ta)==null?void 0:i.call(s,t))??[]:[]}}function bx(t,e,s,n){if(!t.length)return;let i=0;const a=t[0].$t(n,!0);let o=e===1?s/2-(t[0].Fi()-a/2):t[0].Fi()-a/2-s/2;o=Math.max(0,o);for(let l=1;l<t.length;l++){const c=t[l],u=t[l-1],h=u.$t(n,!1),d=c.Fi(),f=u.Fi();if(e===1?d>f-h:d<f+h){const y=f-h*e;c.Wi(y);const p=y-e*h/2;if((e===1?p<0:p>s)&&o>0){const w=e===1?-1-p:p-s,g=Math.min(w,o);for(let m=i;m<t.length;m++)t[m].Wi(t[m].Fi()+e*g);o-=g}}else i=l,o=e===1?f-h-d:d-(f+h)}}class jx{constructor(e,s,n,i){this.Yi=null,this.Lp=null,this.Op=!1,this.Np=new qc(200),this.Fp=null,this.Wp=0,this.Hp=!1,this.Up=()=>{this.Hp||this.Pt.$p().Qt().ar()},this.qp=()=>{this.Hp||this.Pt.$p().Qt().ar()},this.Pt=e,this.Ps=s,this.bl=s.layout,this.Gu=n,this.Yp=i==="left",this.jp=Ed("normal",i),this.Kp=Ed("top",i),this.Xp=Ed("bottom",i),this.Yf=document.createElement("div"),this.Yf.style.height="100%",this.Yf.style.overflow="hidden",this.Yf.style.width="25px",this.Yf.style.left="0",this.Yf.style.position="relative",this.Zp=Yi(this.Yf,Ie({width:16,height:16})),this.Zp.subscribeSuggestedBitmapSizeChanged(this.Up);const a=this.Zp.canvasElement;a.style.position="absolute",a.style.zIndex="1",a.style.left="0",a.style.top="0",this.Gp=Yi(this.Yf,Ie({width:16,height:16})),this.Gp.subscribeSuggestedBitmapSizeChanged(this.qp);const o=this.Gp.canvasElement;o.style.position="absolute",o.style.zIndex="2",o.style.left="0",o.style.top="0";const l={bf:this.np.bind(this),gf:this.np.bind(this),uf:this.ep.bind(this),lf:this.ep.bind(this),Sf:this.Jp.bind(this),pf:this.rp.bind(this),df:this.rp.bind(this),Kd:this.Qp.bind(this),$d:this.Qp.bind(this),if:this.tv.bind(this),Vf:this.sp.bind(this)};this.Of=new Ju(this.Gp.canvasElement,l,{hf:()=>!this.Ps.handleScroll.vertTouchDrag,af:()=>!0})}m(){this.Of.m(),this.Gp.unsubscribeSuggestedBitmapSizeChanged(this.qp),qi(this.Gp.canvasElement),this.Gp.dispose(),this.Zp.unsubscribeSuggestedBitmapSizeChanged(this.Up),qi(this.Zp.canvasElement),this.Zp.dispose(),this.Yi!==null&&this.Yi.no().u(this),this.Yi=null}Xf(){return this.Yf}P(){return this.bl.fontSize}iv(){const e=this.Gu.N();return this.Fp!==e.k&&(this.Np.In(),this.Fp=e.k),e}sv(){if(this.Yi===null)return 0;let e=0;const s=this.iv(),n=ee(this.Zp.canvasElement.getContext("2d",{colorSpace:this.Pt.$p().N().layout.colorSpace}));n.save();const i=this.Yi.Va();n.font=this.nv(),i.length>0&&(e=Math.max(this.Np.Vi(n,i[0].Ga),this.Np.Vi(n,i[i.length-1].Ga)));const a=this.ev();for(let u=a.length;u--;){const h=this.Np.Vi(n,a[u].ri());h>e&&(e=h)}const o=this.Yi.zt();if(o!==null&&this.Lp!==null&&(l=this.Ps.crosshair).mode!==2&&l.horzLine.visible&&l.horzLine.labelVisible){const u=this.Yi.Ts(1,o),h=this.Yi.Ts(this.Lp.height-2,o);e=Math.max(e,this.Np.Vi(n,this.Yi.Zi(Math.floor(Math.min(u,h))+.11111111111111,o)),this.Np.Vi(n,this.Yi.Zi(Math.ceil(Math.max(u,h))-.11111111111111,o)))}var l;n.restore();const c=e||34;return jm(Math.ceil(s.S+s.C+s.I+s.B+5+c))}rv(e){this.Lp!==null&&Mi(this.Lp,e)||(this.Lp=e,this.Hp=!0,this.Zp.resizeCanvasElement(e),this.Gp.resizeCanvasElement(e),this.Hp=!1,this.Yf.style.width=`${e.width}px`,this.Yf.style.height=`${e.height}px`)}hv(){return ee(this.Lp).width}_s(e){this.Yi!==e&&(this.Yi!==null&&this.Yi.no().u(this),this.Yi=e,e.no().i(this.ul.bind(this),this))}Ft(){return this.Yi}In(){const e=this.Pt.hp();this.Pt.$p().Qt().Zo(e,ee(this.Ft()))}av(e){if(this.Lp===null)return;const s={colorSpace:this.Pt.$p().N().layout.colorSpace};if(e!==1){this.lv(),this.Zp.applySuggestedBitmapSize();const i=Wi(this.Zp,s);i!==null&&(i.useBitmapCoordinateSpace(a=>{this.ov(a),this._v(a)}),this.Pt.uv(i,this.Xp),this.cv(i),this.Pt.uv(i,this.jp),this.dv(i))}this.Gp.applySuggestedBitmapSize();const n=Wi(this.Gp,s);n!==null&&(n.useBitmapCoordinateSpace(({context:i,bitmapSize:a})=>{i.clearRect(0,0,a.width,a.height)}),this.fv(n),this.Pt.uv(n,this.Kp))}Gf(){return this.Zp.bitmapSize}Jf(e,s,n){const i=this.Gf();i.width>0&&i.height>0&&e.drawImage(this.Zp.canvasElement,s,n)}kt(){var e;(e=this.Yi)==null||e.Va()}np(e){if(this.Yi===null||this.Yi.Ki()||!this.Ps.handleScale.axisPressedMouseMove.price)return;const s=this.Pt.$p().Qt(),n=this.Pt.hp();this.Op=!0,s.Uo(n,this.Yi,e.localY)}ep(e){if(this.Yi===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const s=this.Pt.$p().Qt(),n=this.Pt.hp(),i=this.Yi;s.$o(n,i,e.localY)}Jp(){if(this.Yi===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const e=this.Pt.$p().Qt(),s=this.Pt.hp(),n=this.Yi;this.Op&&(this.Op=!1,e.qo(s,n))}rp(e){if(this.Yi===null||!this.Ps.handleScale.axisPressedMouseMove.price)return;const s=this.Pt.$p().Qt(),n=this.Pt.hp();this.Op=!1,s.qo(n,this.Yi)}Qp(e){this.Ps.handleScale.axisDoubleClickReset.price&&this.In()}tv(e){this.Yi!==null&&(!this.Pt.$p().Qt().N().handleScale.axisPressedMouseMove.price||this.Yi.Le()||this.Yi.Vl()||this.pv(1))}sp(e){this.pv(0)}ev(){const e=[],s=this.Yi===null?void 0:this.Yi;return(n=>{for(let i=0;i<n.length;++i){const a=n[i].Ws(this.Pt.hp(),s);for(let o=0;o<a.length;o++)e.push(a[o])}})(this.Pt.hp().Dt()),e}ov({context:e,bitmapSize:s}){const{width:n,height:i}=s,a=this.Pt.hp().Qt(),o=a.$(),l=a.Fc();o===l?qu(e,0,0,n,i,o):dN(e,0,0,n,i,o,l)}_v({context:e,bitmapSize:s,horizontalPixelRatio:n}){if(this.Lp===null||this.Yi===null||!this.Yi.N().borderVisible)return;e.fillStyle=this.Yi.N().borderColor;const i=Math.max(1,Math.floor(this.iv().S*n));let a;a=this.Yp?s.width-i:0,e.fillRect(a,0,i,s.height)}cv(e){if(this.Lp===null||this.Yi===null)return;const s=this.Yi.Va(),n=this.Yi.N(),i=this.iv(),a=this.Yp?this.Lp.width-i.C:0;n.borderVisible&&n.ticksVisible&&e.useBitmapCoordinateSpace(({context:o,horizontalPixelRatio:l,verticalPixelRatio:c})=>{o.fillStyle=n.borderColor;const u=Math.max(1,Math.floor(c)),h=Math.floor(.5*c),d=Math.round(i.C*l);o.beginPath();for(const f of s)o.rect(Math.floor(a*l),Math.round(f.ka*c)-h,d,u);o.fill()}),e.useMediaCoordinateSpace(({context:o})=>{o.font=this.nv(),o.fillStyle=n.textColor??this.bl.textColor,o.textAlign=this.Yp?"right":"left",o.textBaseline="middle";const l=this.Yp?Math.round(a-i.I):Math.round(a+i.C+i.I),c=s.map(u=>this.Np.Di(o,u.Ga));for(let u=s.length;u--;){const h=s[u];o.fillText(h.Ga,l,h.ka+c[u])}})}lv(){if(this.Lp===null||this.Yi===null)return;let e=this.Lp.height/2;const s=[],n=this.Yi.Dt().slice(),i=this.Pt.hp(),a=this.iv();this.Yi===i.$n()&&this.Pt.hp().Dt().forEach(c=>{i.Un(c)&&n.push(c)});const o=this.Yi.ba()[0],l=this.Yi;n.forEach(c=>{const u=c.Ws(i,l);u.forEach(h=>{h.Wi(null),h.Hi()&&s.push(h)}),o===c&&u.length>0&&(e=u[0].Bi())}),s.forEach(c=>c.Wi(c.Bi())),this.Yi.N().alignLabels&&this.vv(s,a,e)}vv(e,s,n){if(this.Lp===null)return;const i=e.filter(o=>o.Bi()<=n),a=e.filter(o=>o.Bi()>n);i.sort((o,l)=>l.Bi()-o.Bi()),i.length&&a.length&&a.push(i[0]),a.sort((o,l)=>o.Bi()-l.Bi());for(const o of e){const l=Math.floor(o.$t(s)/2),c=o.Bi();c>-l&&c<l&&o.Wi(l),c>this.Lp.height-l&&c<this.Lp.height+l&&o.Wi(this.Lp.height-l)}bx(i,1,this.Lp.height,s),bx(a,-1,this.Lp.height,s)}dv(e){if(this.Lp===null)return;const s=this.ev(),n=this.iv(),i=this.Yp?"right":"left";s.forEach(a=>{a.Ui()&&a.Tt(ee(this.Yi)).nt(e,n,this.Np,i)})}fv(e){if(this.Lp===null||this.Yi===null)return;const s=this.Pt.$p().Qt(),n=[],i=this.Pt.hp(),a=s._c().Ws(i,this.Yi);a.length&&n.push(a);const o=this.iv(),l=this.Yp?"right":"left";n.forEach(c=>{c.forEach(u=>{u.Tt(ee(this.Yi)).nt(e,o,this.Np,l)})})}pv(e){this.Yf.style.cursor=e===1?"ns-resize":"default"}ul(){const e=this.sv();this.Wp<e&&this.Pt.$p().Qt().Bh(),this.Wp=e}nv(){return Yc(this.bl.fontSize,this.bl.fontFamily)}}function eF(t,e){var s;return((s=t.Jh)==null?void 0:s.call(t,e))??[]}function Nx(t,e){var s;return((s=t.Fs)==null?void 0:s.call(t,e))??[]}function kx(t,e){var s;return((s=t.us)==null?void 0:s.call(t,e))??[]}function tF(t,e){var s;return((s=t.Xh)==null?void 0:s.call(t,e))??[]}class mg{constructor(e,s){this.Lp=Ie({width:0,height:0}),this.mv=null,this.wv=null,this.gv=null,this.Mv=null,this.bv=!1,this.Sv=new nt,this.xv=new nt,this.Cv=0,this.Pv=!1,this.kv=null,this.yv=!1,this.Tv=null,this.Rv=null,this.Hp=!1,this.Up=()=>{this.Hp||this.Dv===null||this.ts().ar()},this.qp=()=>{this.Hp||this.Dv===null||this.ts().ar()},this.Dp=e,this.Dv=s,this.Dv.t_().i(this.Vv.bind(this),this,!0),this.Iv=document.createElement("td"),this.Iv.style.padding="0",this.Iv.style.position="relative";const n=document.createElement("div");n.style.width="100%",n.style.height="100%",n.style.position="relative",n.style.overflow="hidden",this.Bv=document.createElement("td"),this.Bv.style.padding="0",this.Ev=document.createElement("td"),this.Ev.style.padding="0",this.Iv.appendChild(n),this.Zp=Yi(n,Ie({width:16,height:16})),this.Zp.subscribeSuggestedBitmapSizeChanged(this.Up);const i=this.Zp.canvasElement;i.style.position="absolute",i.style.zIndex="1",i.style.left="0",i.style.top="0",this.Gp=Yi(n,Ie({width:16,height:16})),this.Gp.subscribeSuggestedBitmapSizeChanged(this.qp);const a=this.Gp.canvasElement;a.style.position="absolute",a.style.zIndex="2",a.style.left="0",a.style.top="0",this.qf=document.createElement("tr"),this.qf.appendChild(this.Bv),this.qf.appendChild(this.Iv),this.qf.appendChild(this.Ev),this.Av(),this.Of=new Ju(this.Gp.canvasElement,this,{hf:()=>this.kv===null&&!this.Dp.N().handleScroll.vertTouchDrag,af:()=>this.kv===null&&!this.Dp.N().handleScroll.horzTouchDrag})}m(){this.mv!==null&&this.mv.m(),this.wv!==null&&this.wv.m(),this.gv=null,this.Gp.unsubscribeSuggestedBitmapSizeChanged(this.qp),qi(this.Gp.canvasElement),this.Gp.dispose(),this.Zp.unsubscribeSuggestedBitmapSizeChanged(this.Up),qi(this.Zp.canvasElement),this.Zp.dispose(),this.Dv!==null&&(this.Dv.t_().u(this),this.Dv.m()),this.Of.m()}hp(){return ee(this.Dv)}zv(e){var s;this.Dv!==null&&this.Dv.t_().u(this),this.Dv=e,this.Dv!==null&&this.Dv.t_().i(mg.prototype.Vv.bind(this),this,!0),this.Av(),this.Dp.Uf().indexOf(this)===this.Dp.Uf().length-1?(this.gv=this.gv??new ZD(this.Iv,this.Dp),this.gv.kt()):((s=this.gv)==null||s.Ip(),this.gv=null)}$p(){return this.Dp}Xf(){return this.qf}Av(){if(this.Dv!==null&&(this.Lv(),this.ts().js().length!==0)){if(this.mv!==null){const e=this.Dv.Wo();this.mv._s(ee(e))}if(this.wv!==null){const e=this.Dv.Ho();this.wv._s(ee(e))}}}Ov(){this.mv!==null&&this.mv.kt(),this.wv!==null&&this.wv.kt()}Io(){return this.Dv!==null?this.Dv.Io():0}Bo(e){this.Dv&&this.Dv.Bo(e)}if(e){if(!this.Dv)return;this.Nv();const s=e.localX,n=e.localY;this.Fv(s,n,e)}bf(e){this.Nv(),this.Wv(),this.Fv(e.localX,e.localY,e)}sf(e){if(!this.Dv)return;this.Nv();const s=e.localX,n=e.localY;this.Fv(s,n,e)}vf(e){this.Dv!==null&&(this.Nv(),this.Hv(e))}Kd(e){this.Dv!==null&&this.Uv(this.xv,e)}$d(e){this.Kd(e)}uf(e){this.Nv(),this.$v(e),this.Fv(e.localX,e.localY,e)}pf(e){this.Dv!==null&&(this.Nv(),this.Pv=!1,this.qv(e))}ff(e){this.Dv!==null&&this.Hv(e)}If(e){if(this.Pv=!0,this.kv===null){const s={x:e.localX,y:e.localY};this.Yv(s,s,e)}}Vf(e){this.Dv!==null&&(this.Nv(),this.Dv.Qt().ac(null),this.jv())}Kv(){return this.Sv}Xv(){return this.xv}Pf(){this.Cv=1,this.ts().hn()}kf(e,s){if(!this.Dp.N().handleScale.pinch)return;const n=5*(s-this.Cv);this.Cv=s,this.ts().Mc(e._t,n)}gf(e){this.Pv=!1,this.yv=this.kv!==null,this.Wv();const s=this.ts()._c();this.kv!==null&&s.Vt()&&(this.Tv={x:s.si(),y:s.ni()},this.kv={x:e.localX,y:e.localY})}lf(e){if(this.Dv===null)return;const s=e.localX,n=e.localY;if(this.kv===null)this.$v(e);else{this.yv=!1;const i=ee(this.Tv),a=i.x+(s-this.kv.x),o=i.y+(n-this.kv.y);this.Fv(a,o,e)}}df(e){this.$p().N().trackingMode.exitMode===0&&(this.yv=!0),this.Zv(),this.qv(e)}jn(e,s){const n=this.Dv;return n===null?null:jN(n,e,s)}Gv(e,s){ee(s==="left"?this.mv:this.wv).rv(Ie({width:e,height:this.Lp.height}))}Zf(){return this.Lp}rv(e){Mi(this.Lp,e)||(this.Lp=e,this.Hp=!0,this.Zp.resizeCanvasElement(e),this.Gp.resizeCanvasElement(e),this.Hp=!1,this.Iv.style.width=e.width+"px",this.Iv.style.height=e.height+"px")}Jv(){const e=ee(this.Dv);e.Fo(e.Wo()),e.Fo(e.Ho());for(const s of e.ba())if(e.Un(s)){const n=s.Ft();n!==null&&e.Fo(n),s.Ns()}for(const s of e.s_())s.Ns()}Gf(){return this.Zp.bitmapSize}Jf(e,s,n){const i=this.Gf();i.width>0&&i.height>0&&e.drawImage(this.Zp.canvasElement,s,n)}av(e){if(e===0||this.Dv===null)return;e>1&&this.Jv(),this.mv!==null&&this.mv.av(e),this.wv!==null&&this.wv.av(e);const s={colorSpace:this.Dp.N().layout.colorSpace};if(e!==1){this.Zp.applySuggestedBitmapSize();const i=Wi(this.Zp,s);i!==null&&(i.useBitmapCoordinateSpace(a=>{this.ov(a)}),this.Dv&&(this.Qv(i,eF),this.tm(i),this.Qv(i,Nx),this.Qv(i,kx)))}this.Gp.applySuggestedBitmapSize();const n=Wi(this.Gp,s);n!==null&&(n.useBitmapCoordinateSpace(({context:i,bitmapSize:a})=>{i.clearRect(0,0,a.width,a.height)}),this.im(n),this.Qv(n,tF),this.Qv(n,kx))}sm(){return this.mv}nm(){return this.wv}uv(e,s){this.Qv(e,s)}Vv(){this.Dv!==null&&this.Dv.t_().u(this),this.Dv=null}Hv(e){this.Uv(this.Sv,e)}Uv(e,s){const n=s.localX,i=s.localY;e.v()&&e.p(this.ts().Et().uu(n),{x:n,y:i},s)}ov({context:e,bitmapSize:s}){const{width:n,height:i}=s,a=this.ts(),o=a.$(),l=a.Fc();o===l?qu(e,0,0,n,i,l):dN(e,0,0,n,i,o,l)}tm(e){const s=ee(this.Dv),n=s.i_().lr().Tt(s);n!==null&&n.nt(e,!1)}im(e){this.rm(e,Nx,ec,this.ts()._c())}Qv(e,s){const n=ee(this.Dv),i=n.Dt(),a=n.s_();for(const o of a)this.rm(e,s,Nm,o);for(const o of i)this.rm(e,s,Nm,o);for(const o of a)this.rm(e,s,ec,o);for(const o of i)this.rm(e,s,ec,o)}rm(e,s,n,i){const a=ee(this.Dv),o=a.Qt().hc(),l=o!==null&&o.n_===i,c=o!==null&&l&&o.e_!==void 0?o.e_.Xn:void 0;km(s,u=>n(u,e,l,c),i,a)}Lv(){if(this.Dv===null)return;const e=this.Dp,s=this.Dv.Wo().N().visible,n=this.Dv.Ho().N().visible;s||this.mv===null||(this.Bv.removeChild(this.mv.Xf()),this.mv.m(),this.mv=null),n||this.wv===null||(this.Ev.removeChild(this.wv.Xf()),this.wv.m(),this.wv=null);const i=e.Qt().Vc();s&&this.mv===null&&(this.mv=new jx(this,e.N(),i,"left"),this.Bv.appendChild(this.mv.Xf())),n&&this.wv===null&&(this.wv=new jx(this,e.N(),i,"right"),this.Ev.appendChild(this.wv.Xf()))}hm(e){return e.Bf&&this.Pv||this.kv!==null}am(e){return Math.max(0,Math.min(e,this.Lp.width-1))}lm(e){return Math.max(0,Math.min(e,this.Lp.height-1))}Fv(e,s,n){this.ts().yc(this.am(e),this.lm(s),n,ee(this.Dv))}jv(){this.ts().Rc()}Zv(){this.yv&&(this.kv=null,this.jv())}Yv(e,s,n){this.kv=e,this.yv=!1,this.Fv(s.x,s.y,n);const i=this.ts()._c();this.Tv={x:i.si(),y:i.ni()}}ts(){return this.Dp.Qt()}qv(e){if(!this.bv)return;const s=this.ts(),n=this.hp();if(s.Ko(n,n.ys()),this.Mv=null,this.bv=!1,s.Cc(),this.Rv!==null){const i=performance.now(),a=s.Et();this.Rv.le(a.wu(),i),this.Rv.Tu(i)||s._n(this.Rv)}}Nv(){this.kv=null}Wv(){if(this.Dv){if(this.ts().hn(),document.activeElement!==document.body&&document.activeElement!==document.documentElement)ee(document.activeElement).blur();else{const e=document.getSelection();e!==null&&e.removeAllRanges()}!this.Dv.ys().Ki()&&this.ts().Et().Ki()}}$v(e){if(this.Dv===null)return;const s=this.ts(),n=s.Et();if(n.Ki())return;const i=this.Dp.N(),a=i.handleScroll,o=i.kineticScroll;if((!a.pressedMouseMove||e.Bf)&&(!a.horzTouchDrag&&!a.vertTouchDrag||!e.Bf))return;const l=this.Dv.ys(),c=performance.now();if(this.Mv!==null||this.hm(e)||(this.Mv={x:e.clientX,y:e.clientY,ed:c,om:e.localX,_m:e.localY}),this.Mv!==null&&!this.bv&&(this.Mv.x!==e.clientX||this.Mv.y!==e.clientY)){if(e.Bf&&o.touch||!e.Bf&&o.mouse){const u=n.vu();this.Rv=new JD(.2/u,7/u,.997,15/u),this.Rv.Cp(n.wu(),this.Mv.ed)}else this.Rv=null;l.Ki()||s.Yo(this.Dv,l,e.localY),s.Sc(e.localX),this.bv=!0}this.bv&&(l.Ki()||s.jo(this.Dv,l,e.localY),s.xc(e.localX),this.Rv!==null&&this.Rv.Cp(n.wu(),c))}}class Cx{constructor(e,s,n,i,a){this.xt=!0,this.Lp=Ie({width:0,height:0}),this.Up=()=>this.av(3),this.Yp=e==="left",this.Gu=n.Vc,this.Ps=s,this.um=i,this.dm=a,this.Yf=document.createElement("div"),this.Yf.style.width="25px",this.Yf.style.height="100%",this.Yf.style.overflow="hidden",this.Zp=Yi(this.Yf,Ie({width:16,height:16})),this.Zp.subscribeSuggestedBitmapSizeChanged(this.Up)}m(){this.Zp.unsubscribeSuggestedBitmapSizeChanged(this.Up),qi(this.Zp.canvasElement),this.Zp.dispose()}Xf(){return this.Yf}Zf(){return this.Lp}rv(e){Mi(this.Lp,e)||(this.Lp=e,this.Zp.resizeCanvasElement(e),this.Yf.style.width=`${e.width}px`,this.Yf.style.height=`${e.height}px`,this.xt=!0)}av(e){if(e<3&&!this.xt||this.Lp.width===0||this.Lp.height===0)return;this.xt=!1,this.Zp.applySuggestedBitmapSize();const s=Wi(this.Zp,{colorSpace:this.Ps.layout.colorSpace});s!==null&&s.useBitmapCoordinateSpace(n=>{this.ov(n),this._v(n)})}Gf(){return this.Zp.bitmapSize}Jf(e,s,n){const i=this.Gf();i.width>0&&i.height>0&&e.drawImage(this.Zp.canvasElement,s,n)}_v({context:e,bitmapSize:s,horizontalPixelRatio:n,verticalPixelRatio:i}){if(!this.um())return;e.fillStyle=this.Ps.timeScale.borderColor;const a=Math.floor(this.Gu.N().S*n),o=Math.floor(this.Gu.N().S*i),l=this.Yp?s.width-a:0;e.fillRect(l,0,a,o)}ov({context:e,bitmapSize:s}){qu(e,0,0,s.width,s.height,this.dm())}}function pg(t){return e=>{var s;return((s=e.ia)==null?void 0:s.call(e,t))??[]}}const sF=pg("normal"),nF=pg("top"),iF=pg("bottom");class rF{constructor(e,s){this.fm=null,this.pm=null,this.M=null,this.vm=!1,this.Lp=Ie({width:0,height:0}),this.wm=new nt,this.Np=new qc(5),this.Hp=!1,this.Up=()=>{this.Hp||this.Dp.Qt().ar()},this.qp=()=>{this.Hp||this.Dp.Qt().ar()},this.Dp=e,this.o_=s,this.Ps=e.N().layout,this.kp=document.createElement("tr"),this.gm=document.createElement("td"),this.gm.style.padding="0",this.Mm=document.createElement("td"),this.Mm.style.padding="0",this.Yf=document.createElement("td"),this.Yf.style.height="25px",this.Yf.style.padding="0",this.bm=document.createElement("div"),this.bm.style.width="100%",this.bm.style.height="100%",this.bm.style.position="relative",this.bm.style.overflow="hidden",this.Yf.appendChild(this.bm),this.Zp=Yi(this.bm,Ie({width:16,height:16})),this.Zp.subscribeSuggestedBitmapSizeChanged(this.Up);const n=this.Zp.canvasElement;n.style.position="absolute",n.style.zIndex="1",n.style.left="0",n.style.top="0",this.Gp=Yi(this.bm,Ie({width:16,height:16})),this.Gp.subscribeSuggestedBitmapSizeChanged(this.qp);const i=this.Gp.canvasElement;i.style.position="absolute",i.style.zIndex="2",i.style.left="0",i.style.top="0",this.kp.appendChild(this.gm),this.kp.appendChild(this.Yf),this.kp.appendChild(this.Mm),this.Sm(),this.Dp.Qt().Vo().i(this.Sm.bind(this),this),this.Of=new Ju(this.Gp.canvasElement,this,{hf:()=>!0,af:()=>!this.Dp.N().handleScroll.horzTouchDrag})}m(){this.Of.m(),this.fm!==null&&this.fm.m(),this.pm!==null&&this.pm.m(),this.Gp.unsubscribeSuggestedBitmapSizeChanged(this.qp),qi(this.Gp.canvasElement),this.Gp.dispose(),this.Zp.unsubscribeSuggestedBitmapSizeChanged(this.Up),qi(this.Zp.canvasElement),this.Zp.dispose()}Xf(){return this.kp}xm(){return this.fm}Cm(){return this.pm}bf(e){if(this.vm)return;this.vm=!0;const s=this.Dp.Qt();!s.Et().Ki()&&this.Dp.N().handleScale.axisPressedMouseMove.time&&s.gc(e.localX)}gf(e){this.bf(e)}Sf(){const e=this.Dp.Qt();!e.Et().Ki()&&this.vm&&(this.vm=!1,this.Dp.N().handleScale.axisPressedMouseMove.time&&e.kc())}uf(e){const s=this.Dp.Qt();!s.Et().Ki()&&this.Dp.N().handleScale.axisPressedMouseMove.time&&s.Pc(e.localX)}lf(e){this.uf(e)}pf(){this.vm=!1;const e=this.Dp.Qt();e.Et().Ki()&&!this.Dp.N().handleScale.axisPressedMouseMove.time||e.kc()}df(){this.pf()}Kd(){this.Dp.N().handleScale.axisDoubleClickReset.time&&this.Dp.Qt().cn()}$d(){this.Kd()}if(){this.Dp.Qt().N().handleScale.axisPressedMouseMove.time&&this.pv(1)}Vf(){this.pv(0)}Zf(){return this.Lp}Pm(){return this.wm}km(e,s,n){Mi(this.Lp,e)||(this.Lp=e,this.Hp=!0,this.Zp.resizeCanvasElement(e),this.Gp.resizeCanvasElement(e),this.Hp=!1,this.Yf.style.width=`${e.width}px`,this.Yf.style.height=`${e.height}px`,this.wm.p(e)),this.fm!==null&&this.fm.rv(Ie({width:s,height:e.height})),this.pm!==null&&this.pm.rv(Ie({width:n,height:e.height}))}ym(){const e=this.Tm();return Math.ceil(e.S+e.C+e.P+e.A+e.V+e.Rm)}kt(){this.Dp.Qt().Et().Va()}Gf(){return this.Zp.bitmapSize}Jf(e,s,n){const i=this.Gf();i.width>0&&i.height>0&&e.drawImage(this.Zp.canvasElement,s,n)}av(e){if(e===0)return;const s={colorSpace:this.Ps.colorSpace};if(e!==1){this.Zp.applySuggestedBitmapSize();const i=Wi(this.Zp,s);i!==null&&(i.useBitmapCoordinateSpace(a=>{this.ov(a),this._v(a),this.Dm(i,iF)}),this.cv(i),this.Dm(i,sF)),this.fm!==null&&this.fm.av(e),this.pm!==null&&this.pm.av(e)}this.Gp.applySuggestedBitmapSize();const n=Wi(this.Gp,s);n!==null&&(n.useBitmapCoordinateSpace(({context:i,bitmapSize:a})=>{i.clearRect(0,0,a.width,a.height)}),this.Vm([...this.Dp.Qt().js(),this.Dp.Qt()._c()],n),this.Dm(n,nF))}Dm(e,s){const n=this.Dp.Qt().js();for(const i of n)km(s,a=>Nm(a,e,!1,void 0),i,void 0);for(const i of n)km(s,a=>ec(a,e,!1,void 0),i,void 0)}ov({context:e,bitmapSize:s}){qu(e,0,0,s.width,s.height,this.Dp.Qt().Fc())}_v({context:e,bitmapSize:s,verticalPixelRatio:n}){if(this.Dp.N().timeScale.borderVisible){e.fillStyle=this.Im();const i=Math.max(1,Math.floor(this.Tm().S*n));e.fillRect(0,0,s.width,i)}}cv(e){const s=this.Dp.Qt().Et(),n=s.Va();if(!n||n.length===0)return;const i=this.o_.maxTickMarkWeight(n),a=this.Tm(),o=s.N();o.borderVisible&&o.ticksVisible&&e.useBitmapCoordinateSpace(({context:l,horizontalPixelRatio:c,verticalPixelRatio:u})=>{l.strokeStyle=this.Im(),l.fillStyle=this.Im();const h=Math.max(1,Math.floor(c)),d=Math.floor(.5*c);l.beginPath();const f=Math.round(a.C*u);for(let y=n.length;y--;){const p=Math.round(n[y].coord*c);l.rect(p-d,0,h,f)}l.fill()}),e.useMediaCoordinateSpace(({context:l})=>{const c=a.S+a.C+a.A+a.P/2;l.textAlign="center",l.textBaseline="middle",l.fillStyle=this.H(),l.font=this.nv();for(const u of n)if(u.weight<i){const h=u.needAlignCoordinate?this.Bm(l,u.coord,u.label):u.coord;l.fillText(u.label,h,c)}this.Dp.N().timeScale.allowBoldLabels&&(l.font=this.Em());for(const u of n)if(u.weight>=i){const h=u.needAlignCoordinate?this.Bm(l,u.coord,u.label):u.coord;l.fillText(u.label,h,c)}})}Bm(e,s,n){const i=this.Np.Vi(e,n),a=i/2,o=Math.floor(s-a)+.5;return o<0?s+=Math.abs(0-o):o+i>this.Lp.width&&(s-=Math.abs(this.Lp.width-(o+i))),s}Vm(e,s){const n=this.Tm();for(const i of e)for(const a of i.cs())a.Tt().nt(s,n)}Im(){return this.Dp.N().timeScale.borderColor}H(){return this.Ps.textColor}F(){return this.Ps.fontSize}nv(){return Yc(this.F(),this.Ps.fontFamily)}Em(){return Yc(this.F(),this.Ps.fontFamily,"bold")}Tm(){this.M===null&&(this.M={S:1,L:NaN,A:NaN,V:NaN,Ji:NaN,C:5,P:NaN,k:"",Gi:new qc,Rm:0});const e=this.M,s=this.nv();if(e.k!==s){const n=this.F();e.P=n,e.k=s,e.A=3*n/12,e.V=3*n/12,e.Ji=9*n/12,e.L=0,e.Rm=4*n/12,e.Gi.In()}return this.M}pv(e){this.Yf.style.cursor=e===1?"ew-resize":"default"}Sm(){const e=this.Dp.Qt(),s=e.N();s.leftPriceScale.visible||this.fm===null||(this.gm.removeChild(this.fm.Xf()),this.fm.m(),this.fm=null),s.rightPriceScale.visible||this.pm===null||(this.Mm.removeChild(this.pm.Xf()),this.pm.m(),this.pm=null);const n={Vc:this.Dp.Qt().Vc()},i=()=>s.leftPriceScale.borderVisible&&e.Et().N().borderVisible,a=()=>e.Fc();s.leftPriceScale.visible&&this.fm===null&&(this.fm=new Cx("left",s,n,i,a),this.gm.appendChild(this.fm.Xf())),s.rightPriceScale.visible&&this.pm===null&&(this.pm=new Cx("right",s,n,i,a),this.Mm.appendChild(this.pm.Xf()))}}var nw;const aF=!!Xr&&!!navigator.userAgentData&&navigator.userAgentData.brands.some(t=>t.brand.includes("Chromium"))&&!!Xr&&((nw=navigator==null?void 0:navigator.userAgentData)!=null&&nw.platform?navigator.userAgentData.platform==="Windows":navigator.userAgent.toLowerCase().indexOf("win")>=0);class oF{constructor(e,s,n){var i;this.Am=[],this.zm=[],this.Lm=0,this.sl=0,this.Mo=0,this.Om=0,this.Nm=0,this.Fm=null,this.Wm=!1,this.Sv=new nt,this.xv=new nt,this.Ku=new nt,this.Hm=null,this.Um=null,this.Rp=e,this.Ps=s,this.o_=n,this.kp=document.createElement("div"),this.kp.classList.add("tv-lightweight-charts"),this.kp.style.overflow="hidden",this.kp.style.direction="ltr",this.kp.style.width="100%",this.kp.style.height="100%",(i=this.kp).style.userSelect="none",i.style.webkitUserSelect="none",i.style.msUserSelect="none",i.style.MozUserSelect="none",i.style.webkitTapHighlightColor="transparent",this.$m=document.createElement("table"),this.$m.setAttribute("cellspacing","0"),this.kp.appendChild(this.$m),this.qm=this.Ym.bind(this),Ld(this.Ps)&&this.jm(!0),this.ts=new HD(this.Zu.bind(this),this.Ps,n),this.Qt().uc().i(this.Km.bind(this),this),this.Xm=new rF(this,this.o_),this.$m.appendChild(this.Xm.Xf());const a=s.autoSize&&this.Zm();let o=this.Ps.width,l=this.Ps.height;if(a||o===0||l===0){const c=e.getBoundingClientRect();o=o||c.width,l=l||c.height}this.Gm(o,l),this.Jm(),e.appendChild(this.kp),this.Qm(),this.ts.Et().Iu().i(this.ts.Bh.bind(this.ts),this),this.ts.Vo().i(this.ts.Bh.bind(this.ts),this)}Qt(){return this.ts}N(){return this.Ps}Uf(){return this.Am}tw(){return this.Xm}m(){this.jm(!1),this.Lm!==0&&window.cancelAnimationFrame(this.Lm),this.ts.uc().u(this),this.ts.Et().Iu().u(this),this.ts.Vo().u(this),this.ts.m();for(const e of this.Am)this.$m.removeChild(e.Xf()),e.Kv().u(this),e.Xv().u(this),e.m();this.Am=[];for(const e of this.zm)this.iw(e);this.zm=[],ee(this.Xm).m(),this.kp.parentElement!==null&&this.kp.parentElement.removeChild(this.kp),this.Ku.m(),this.Sv.m(),this.xv.m(),this.sw()}Gm(e,s,n=!1){if(this.sl===s&&this.Mo===e)return;const i=function(l){const c=Math.floor(l.width),u=Math.floor(l.height);return Ie({width:c-c%2,height:u-u%2})}(Ie({width:e,height:s}));this.sl=i.height,this.Mo=i.width;const a=this.sl+"px",o=this.Mo+"px";ee(this.kp).style.height=a,ee(this.kp).style.width=o,this.$m.style.height=a,this.$m.style.width=o,n?this.nw(vt.gn(),performance.now()):this.ts.Bh()}av(e){e===void 0&&(e=vt.gn());for(let s=0;s<this.Am.length;s++)this.Am[s].av(e.en(s).tn);this.Ps.timeScale.visible&&this.Xm.av(e.nn())}hr(e){var i;const s=Ld(this.Ps);this.ts.hr(e);const n=Ld(this.Ps);n!==s&&this.jm(n),(i=e.layout)!=null&&i.panes&&this.ew(),this.Qm(),this.rw(e)}Kv(){return this.Sv}Xv(){return this.xv}uc(){return this.Ku}hw(){this.Fm!==null&&(this.nw(this.Fm,performance.now()),this.Fm=null);const e=this.aw(null),s=document.createElement("canvas");s.width=e.width,s.height=e.height;const n=ee(s.getContext("2d"));return this.aw(n),s}lw(e){return e==="left"&&!this.ow()||e==="right"&&!this._w()||this.Am.length===0?0:ee(e==="left"?this.Am[0].sm():this.Am[0].nm()).hv()}uw(){return this.Ps.autoSize&&this.Hm!==null}tp(){return this.kp}cw(e){this.Um=e,this.Um?this.tp().style.setProperty("cursor",e):this.tp().style.removeProperty("cursor")}dw(){return this.Um}fw(e){return Xt(this.Am[e]).Zf()}ew(){this.zm.forEach(e=>{e.kt()})}rw(e){(e.autoSize!==void 0||!this.Hm||e.width===void 0&&e.height===void 0)&&(e.autoSize&&!this.Hm&&this.Zm(),e.autoSize===!1&&this.Hm!==null&&this.sw(),e.autoSize||e.width===void 0&&e.height===void 0||this.Gm(e.width||this.Mo,e.height||this.sl))}aw(e){let s=0,n=0;const i=this.Am[0],a=(l,c)=>{let u=0;for(let h=0;h<this.Am.length;h++){const d=this.Am[h],f=ee(l==="left"?d.sm():d.nm()),y=f.Gf();if(e!==null&&f.Jf(e,c,u),u+=y.height,h<this.Am.length-1){const p=this.zm[h],w=p.Gf();e!==null&&p.Jf(e,c,u),u+=w.height}}};this.ow()&&(a("left",0),s+=ee(i.sm()).Gf().width);for(let l=0;l<this.Am.length;l++){const c=this.Am[l],u=c.Gf();if(e!==null&&c.Jf(e,s,n),n+=u.height,l<this.Am.length-1){const h=this.zm[l],d=h.Gf();e!==null&&h.Jf(e,s,n),n+=d.height}}s+=i.Gf().width,this._w()&&(a("right",s),s+=ee(i.nm()).Gf().width);const o=(l,c,u)=>{ee(l==="left"?this.Xm.xm():this.Xm.Cm()).Jf(ee(e),c,u)};if(this.Ps.timeScale.visible){const l=this.Xm.Gf();if(e!==null){let c=0;this.ow()&&(o("left",c,n),c=ee(i.sm()).Gf().width),this.Xm.Jf(e,c,n),c+=l.width,this._w()&&o("right",c,n)}n+=l.height}return Ie({width:s,height:n})}pw(){let e=0,s=0,n=0;for(const g of this.Am)this.ow()&&(s=Math.max(s,ee(g.sm()).sv(),this.Ps.leftPriceScale.minimumWidth)),this._w()&&(n=Math.max(n,ee(g.nm()).sv(),this.Ps.rightPriceScale.minimumWidth)),e+=g.Io();s=jm(s),n=jm(n);const i=this.Mo,a=this.sl,o=Math.max(i-s-n,0),l=1*this.zm.length,c=this.Ps.timeScale.visible;let u=c?Math.max(this.Xm.ym(),this.Ps.timeScale.minimumHeight):0;var h;u=(h=u)+h%2;const d=l+u,f=a<d?0:a-d,y=f/e;let p=0;const w=window.devicePixelRatio||1;for(let g=0;g<this.Am.length;++g){const m=this.Am[g];m.zv(this.ts.$s()[g]);let x=0,S=0;S=g===this.Am.length-1?Math.ceil((f-p)*w)/w:Math.round(m.Io()*y*w)/w,x=Math.max(S,2),p+=x,m.rv(Ie({width:o,height:x})),this.ow()&&m.Gv(s,"left"),this._w()&&m.Gv(n,"right"),m.hp()&&this.ts.cc(m.hp(),x)}this.Xm.km(Ie({width:c?o:0,height:u}),c?s:0,c?n:0),this.ts.Eo(o),this.Om!==s&&(this.Om=s),this.Nm!==n&&(this.Nm=n)}jm(e){e?this.kp.addEventListener("wheel",this.qm,{passive:!1}):this.kp.removeEventListener("wheel",this.qm)}mw(e){switch(e.deltaMode){case e.DOM_DELTA_PAGE:return 120;case e.DOM_DELTA_LINE:return 32}return aF?1/window.devicePixelRatio:1}Ym(e){if(!(e.deltaX!==0&&this.Ps.handleScroll.mouseWheel||e.deltaY!==0&&this.Ps.handleScale.mouseWheel))return;const s=this.mw(e),n=s*e.deltaX/100,i=-s*e.deltaY/100;if(e.cancelable&&e.preventDefault(),i!==0&&this.Ps.handleScale.mouseWheel){const a=Math.sign(i)*Math.min(1,Math.abs(i)),o=e.clientX-this.kp.getBoundingClientRect().left;this.Qt().Mc(o,a)}n!==0&&this.Ps.handleScroll.mouseWheel&&this.Qt().bc(-80*n)}nw(e,s){var i;const n=e.nn();n===3&&this.ww(),n!==3&&n!==2||(this.gw(e),this.Mw(e,s),this.Xm.kt(),this.Am.forEach(a=>{a.Ov()}),((i=this.Fm)==null?void 0:i.nn())===3&&(this.Fm.vn(e),this.ww(),this.gw(this.Fm),this.Mw(this.Fm,s),e=this.Fm,this.Fm=null)),this.av(e)}Mw(e,s){for(const n of e.pn())this.mn(n,s)}gw(e){const s=this.ts.$s();for(let n=0;n<s.length;n++)e.en(n).sn&&s[n].Go()}mn(e,s){const n=this.ts.Et();switch(e.an){case 0:n.Eu();break;case 1:n.Au(e.Wt);break;case 2:n.dn(e.Wt);break;case 3:n.fn(e.Wt);break;case 4:n.bu();break;case 5:e.Wt.Tu(s)||n.fn(e.Wt.Ru(s))}}Zu(e){this.Fm!==null?this.Fm.vn(e):this.Fm=e,this.Wm||(this.Wm=!0,this.Lm=window.requestAnimationFrame(s=>{if(this.Wm=!1,this.Lm=0,this.Fm!==null){const n=this.Fm;this.Fm=null,this.nw(n,s);for(const i of n.pn())if(i.an===5&&!i.Wt.Tu(s)){this.Qt()._n(i.Wt);break}}}))}ww(){this.Jm()}iw(e){this.$m.removeChild(e.Xf()),e.m()}Jm(){const e=this.ts.$s(),s=e.length,n=this.Am.length;for(let i=s;i<n;i++){const a=Xt(this.Am.pop());this.$m.removeChild(a.Xf()),a.Kv().u(this),a.Xv().u(this),a.m();const o=this.zm.pop();o!==void 0&&this.iw(o)}for(let i=n;i<s;i++){const a=new mg(this,e[i]);if(a.Kv().i(this.bw.bind(this,a),this),a.Xv().i(this.Sw.bind(this,a),this),this.Am.push(a),i>0){const o=new XD(this,i-1,i);this.zm.push(o),this.$m.insertBefore(o.Xf(),this.Xm.Xf())}this.$m.insertBefore(a.Xf(),this.Xm.Xf())}for(let i=0;i<s;i++){const a=e[i],o=this.Am[i];o.hp()!==a?o.zv(a):o.Av()}this.Qm(),this.pw()}xw(e,s,n,i){var d;const a=new Map;e!==null&&this.ts.js().forEach(f=>{const y=f.Xs().Fr(e);y!==null&&a.set(f,y)});let o;if(e!==null){const f=(d=this.ts.Et().ss(e))==null?void 0:d.originalTime;f!==void 0&&(o=f)}const l=this.Qt().hc(),c=l!==null&&l.n_ instanceof Xu?l.n_:void 0,u=l!==null&&l.e_!==void 0?l.e_.Kn:void 0,h=this.Cw(i);return{Pw:o,Re:e??void 0,kw:s??void 0,yw:h!==-1?h:void 0,Tw:c,Rw:a,Dw:u,Vw:n??void 0}}Cw(e){let s=-1;if(e)s=this.Am.indexOf(e);else{const n=this.Qt()._c().Us();n!==null&&(s=this.Qt().$s().indexOf(n))}return s}bw(e,s,n,i){this.Sv.p(()=>this.xw(s,n,i,e))}Sw(e,s,n,i){this.xv.p(()=>this.xw(s,n,i,e))}Km(e,s,n){var i;this.cw(((i=this.Qt().hc())==null?void 0:i.h_)??null),this.Ku.p(()=>this.xw(e,s,n))}Qm(){const e=this.Ps.timeScale.visible?"":"none";this.Xm.Xf().style.display=e}ow(){return this.Am[0].hp().Wo().N().visible}_w(){return this.Am[0].hp().Ho().N().visible}Zm(){return"ResizeObserver"in window&&(this.Hm=new ResizeObserver(e=>{const s=e[e.length-1];s&&this.Gm(s.contentRect.width,s.contentRect.height)}),this.Hm.observe(this.Rp,{box:"border-box"}),!0)}sw(){this.Hm!==null&&this.Hm.disconnect(),this.Hm=null}}function Ld(t){return!!(t.handleScroll.mouseWheel||t.handleScale.mouseWheel)}function lF(t){return t.open===void 0&&t.value===void 0}function cF(t){return function(e){return e.open!==void 0}(t)||function(e){return e.value!==void 0}(t)}function Px(t,e,s,n){const i=s.value,a={Re:e,wt:t,Wt:[i,i,i,i],Pw:n};return s.color!==void 0&&(a.R=s.color),a}function uF(t,e,s,n){const i=s.value,a={Re:e,wt:t,Wt:[i,i,i,i],Pw:n};return s.lineColor!==void 0&&(a.vt=s.lineColor),s.topColor!==void 0&&(a.mr=s.topColor),s.bottomColor!==void 0&&(a.wr=s.bottomColor),a}function hF(t,e,s,n){const i=s.value,a={Re:e,wt:t,Wt:[i,i,i,i],Pw:n};return s.topLineColor!==void 0&&(a.gr=s.topLineColor),s.bottomLineColor!==void 0&&(a.Mr=s.bottomLineColor),s.topFillColor1!==void 0&&(a.br=s.topFillColor1),s.topFillColor2!==void 0&&(a.Sr=s.topFillColor2),s.bottomFillColor1!==void 0&&(a.Cr=s.bottomFillColor1),s.bottomFillColor2!==void 0&&(a.Pr=s.bottomFillColor2),a}function dF(t,e,s,n){const i={Re:e,wt:t,Wt:[s.open,s.high,s.low,s.close],Pw:n};return s.color!==void 0&&(i.R=s.color),i}function fF(t,e,s,n){const i={Re:e,wt:t,Wt:[s.open,s.high,s.low,s.close],Pw:n};return s.color!==void 0&&(i.R=s.color),s.borderColor!==void 0&&(i.Ht=s.borderColor),s.wickColor!==void 0&&(i.vr=s.wickColor),i}function mF(t,e,s,n,i){const a=Xt(i)(s),o=Math.max(...a),l=Math.min(...a),c=a[a.length-1],u=[c,o,l,c],{time:h,color:d,...f}=s;return{Re:e,wt:t,Wt:u,Pw:n,se:f,R:d}}function ba(t){return t.Wt!==void 0}function Tx(t,e){return e.customValues!==void 0&&(t.Iw=e.customValues),t}function hi(t){return(e,s,n,i,a,o)=>function(l,c){return c?c(l):lF(l)}(n,o)?Tx({wt:e,Re:s,Pw:i},n):Tx(t(e,s,n,i,a),n)}function Ex(t){return{Candlestick:hi(fF),Bar:hi(dF),Area:hi(uF),Baseline:hi(hF),Histogram:hi(Px),Line:hi(Px),Custom:hi(mF)}[t]}function Lx(t){return{Re:0,Bw:new Map,Hh:t}}function _x(t,e){if(t!==void 0&&t.length!==0)return{Ew:e.key(t[0].wt),Aw:e.key(t[t.length-1].wt)}}function Rx(t){let e;return t.forEach(s=>{e===void 0&&(e=s.Pw)}),Xt(e)}class pF{constructor(e){this.zw=new Map,this.Lw=new Map,this.Ow=new Map,this.Nw=[],this.o_=e}m(){this.zw.clear(),this.Lw.clear(),this.Ow.clear(),this.Nw=[]}Fw(e,s){let n=this.zw.size!==0,i=!1;const a=this.Lw.get(e);if(a!==void 0)if(this.Lw.size===1)n=!1,i=!0,this.zw.clear();else for(const c of this.Nw)c.pointData.Bw.delete(e)&&(i=!0);let o=[];if(s.length!==0){const c=s.map(y=>y.time),u=this.o_.createConverterToInternalObj(s),h=Ex(e.Rr()),d=e.da(),f=e.pa();o=s.map((y,p)=>{const w=u(y.time),g=this.o_.key(w);let m=this.zw.get(g);m===void 0&&(m=Lx(w),this.zw.set(g,m),i=!0);const x=h(w,m.Re,y,c[p],d,f);return m.Bw.set(e,x),x})}n&&this.Ww(),this.Hw(e,o);let l=-1;if(i){const c=[];this.zw.forEach(u=>{c.push({timeWeight:0,time:u.Hh,pointData:u,originalTime:Rx(u.Bw)})}),c.sort((u,h)=>this.o_.key(u.time)-this.o_.key(h.time)),l=this.Uw(c)}return this.$w(e,l,function(c,u,h){const d=_x(c,h),f=_x(u,h);if(d!==void 0&&f!==void 0)return{qw:!1,zh:d.Aw>=f.Aw&&d.Ew>=f.Ew}}(this.Lw.get(e),a,this.o_))}Ec(e){return this.Fw(e,[])}Yw(e,s,n){const i=s;(function(g){g.Pw===void 0&&(g.Pw=g.time)})(i),this.o_.preprocessData(s);const a=this.o_.createConverterToInternalObj([s])(s.time),o=this.Ow.get(e);if(!n&&o!==void 0&&this.o_.key(a)<this.o_.key(o))throw new Error(`Cannot update oldest data, last time=${o}, new time=${a}`);let l=this.zw.get(this.o_.key(a));if(n&&l===void 0)throw new Error("Cannot update non-existing data point when historicalUpdate is true");const c=l===void 0;l===void 0&&(l=Lx(a),this.zw.set(this.o_.key(a),l));const u=Ex(e.Rr()),h=e.da(),d=e.pa(),f=u(a,l.Re,s,i.Pw,h,d);l.Bw.set(e,f),n?this.jw(e,f,l.Re):this.Kw(e,f);const y={zh:ba(f),qw:n};if(!c)return this.$w(e,-1,y);const p={timeWeight:0,time:l.Hh,pointData:l,originalTime:Rx(l.Bw)},w=Kr(this.Nw,this.o_.key(p.time),(g,m)=>this.o_.key(g.time)<m);this.Nw.splice(w,0,p);for(let g=w;g<this.Nw.length;++g)_d(this.Nw[g].pointData,g);return this.o_.fillWeightsForPoints(this.Nw,w),this.$w(e,w,y)}Kw(e,s){let n=this.Lw.get(e);n===void 0&&(n=[],this.Lw.set(e,n));const i=n.length!==0?n[n.length-1]:null;i===null||this.o_.key(s.wt)>this.o_.key(i.wt)?ba(s)&&n.push(s):ba(s)?n[n.length-1]=s:n.splice(-1,1),this.Ow.set(e,s.wt)}jw(e,s,n){const i=this.Lw.get(e);if(i===void 0)return;const a=Kr(i,n,(o,l)=>o.Re<l);ba(s)?i[a]=s:i.splice(a,1)}Hw(e,s){s.length!==0?(this.Lw.set(e,s.filter(ba)),this.Ow.set(e,s[s.length-1].wt)):(this.Lw.delete(e),this.Ow.delete(e))}Ww(){for(const e of this.Nw)e.pointData.Bw.size===0&&this.zw.delete(this.o_.key(e.time))}Uw(e){let s=-1;for(let n=0;n<this.Nw.length&&n<e.length;++n){const i=this.Nw[n],a=e[n];if(this.o_.key(i.time)!==this.o_.key(a.time)){s=n;break}a.timeWeight=i.timeWeight,_d(a.pointData,n)}if(s===-1&&this.Nw.length!==e.length&&(s=Math.min(this.Nw.length,e.length)),s===-1)return-1;for(let n=s;n<e.length;++n)_d(e[n].pointData,n);return this.o_.fillWeightsForPoints(e,s),this.Nw=e,s}Xw(){if(this.Lw.size===0)return null;let e=0;return this.Lw.forEach(s=>{s.length!==0&&(e=Math.max(e,s[s.length-1].Re))}),e}$w(e,s,n){const i={Oo:new Map,Et:{ou:this.Xw()}};if(s!==-1)this.Lw.forEach((a,o)=>{i.Oo.set(o,{se:a,Zw:o===e?n:void 0})}),this.Lw.has(e)||i.Oo.set(e,{se:[],Zw:n}),i.Et.Gw=this.Nw,i.Et.Jw=s;else{const a=this.Lw.get(e);i.Oo.set(e,{se:a||[],Zw:n})}return i}}function _d(t,e){t.Re=e,t.Bw.forEach(s=>{s.Re=e})}function gF(t,e){return t.wt<e}function yF(t,e){return e<t.wt}function vF(t,e,s){const n=e.Uh(),i=e.bi(),a=Kr(t,n,gF),o=xN(t,i,yF);if(!s)return{from:a,to:o};let l=a,c=o;return a>0&&a<t.length&&t[a].wt>=n&&(l=a-1),o>0&&o<t.length&&t[o-1].wt<=i&&(c=o+1),{from:l,to:c}}class gg{constructor(e,s,n){this.Qw=!0,this.tg=!0,this.ig=!0,this.sg=[],this.ng=null,this.Jn=e,this.Qn=s,this.eg=n}kt(e){this.Qw=!0,e==="data"&&(this.tg=!0),e==="options"&&(this.ig=!0)}Tt(){return this.Jn.Vt()?(this.rg(),this.ng===null?null:this.hg):null}ag(){this.sg=this.sg.map(e=>({...e,...this.Jn.Rh().Dr(e.wt)}))}lg(){this.ng=null}rg(){this.tg&&(this.og(),this.tg=!1),this.ig&&(this.ag(),this.ig=!1),this.Qw&&(this._g(),this.Qw=!1)}_g(){const e=this.Jn.Ft(),s=this.Qn.Et();if(this.lg(),s.Ki()||e.Ki())return;const n=s.Pe();if(n===null||this.Jn.Xs().zr()===0)return;const i=this.Jn.zt();i!==null&&(this.ng=vF(this.sg,n,this.eg),this.ug(e,s,i.Wt),this.cg())}}class xF{constructor(e,s){this.dg=e,this.Yi=s}nt(e,s,n){this.dg.draw(e,this.Yi,s,n)}}class wF extends gg{constructor(e,s,n){super(e,s,!1),this.sh=n,this.hg=new xF(this.sh.renderer(),i=>{const a=e.zt();return a===null?null:e.Ft().Nt(i,a.Wt)})}fa(e){return this.sh.priceValueBuilder(e)}va(e){return this.sh.isWhitespace(e)}og(){const e=this.Jn.Rh();this.sg=this.Jn.Xs().Hr().map(s=>({wt:s.Re,_t:NaN,...e.Dr(s.Re),fg:s.se}))}ug(e,s){s._u(this.sg,Co(this.ng))}cg(){this.sh.update({bars:this.sg.map(SF),barSpacing:this.Qn.Et().vu(),visibleRange:this.ng},this.Jn.N())}}function SF(t){return{x:t._t,time:t.wt,originalData:t.fg,barColor:t.cr}}const bF={color:"#2196f3"},jF=(t,e,s)=>{const n=In(s);return new wF(t,e,n)};function yg(t){const e={value:t.Wt[3],time:t.Pw};return t.Iw!==void 0&&(e.customValues=t.Iw),e}function Mx(t){const e=yg(t);return t.R!==void 0&&(e.color=t.R),e}function NF(t){const e=yg(t);return t.vt!==void 0&&(e.lineColor=t.vt),t.mr!==void 0&&(e.topColor=t.mr),t.wr!==void 0&&(e.bottomColor=t.wr),e}function kF(t){const e=yg(t);return t.gr!==void 0&&(e.topLineColor=t.gr),t.Mr!==void 0&&(e.bottomLineColor=t.Mr),t.br!==void 0&&(e.topFillColor1=t.br),t.Sr!==void 0&&(e.topFillColor2=t.Sr),t.Cr!==void 0&&(e.bottomFillColor1=t.Cr),t.Pr!==void 0&&(e.bottomFillColor2=t.Pr),e}function CN(t){const e={open:t.Wt[0],high:t.Wt[1],low:t.Wt[2],close:t.Wt[3],time:t.Pw};return t.Iw!==void 0&&(e.customValues=t.Iw),e}function CF(t){const e=CN(t);return t.R!==void 0&&(e.color=t.R),e}function PF(t){const e=CN(t),{R:s,Ht:n,vr:i}=t;return s!==void 0&&(e.color=s),n!==void 0&&(e.borderColor=n),i!==void 0&&(e.wickColor=i),e}function Cm(t){return{Area:NF,Line:Mx,Baseline:kF,Histogram:Mx,Bar:CF,Candlestick:PF,Custom:TF}[t]}function TF(t){const e=t.Pw;return{...t.se,time:e}}const EF={vertLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},horzLine:{color:"#9598A1",width:1,style:3,visible:!0,labelVisible:!0,labelBackgroundColor:"#131722"},mode:1},LF={vertLines:{color:"#D6DCDE",style:0,visible:!0},horzLines:{color:"#D6DCDE",style:0,visible:!0}},_F={background:{type:"solid",color:"#FFFFFF"},textColor:"#191919",fontSize:12,fontFamily:uN,panes:{enableResize:!0,separatorColor:"#E0E3EB",separatorHoverColor:"rgba(178, 181, 189, 0.2)"},attributionLogo:!0,colorSpace:"srgb",colorParsers:[]},Rd={autoScale:!0,mode:0,invertScale:!1,alignLabels:!0,borderVisible:!0,borderColor:"#2B2B43",entireTextOnly:!1,visible:!1,ticksVisible:!1,scaleMargins:{bottom:.1,top:.2},minimumWidth:0,ensureEdgeTickMarksVisible:!1},RF={rightOffset:0,barSpacing:6,minBarSpacing:.5,maxBarSpacing:0,fixLeftEdge:!1,fixRightEdge:!1,lockVisibleTimeRangeOnResize:!1,rightBarStaysOnScroll:!1,borderVisible:!0,borderColor:"#2B2B43",visible:!0,timeVisible:!1,secondsVisible:!0,shiftVisibleRangeOnNewBar:!0,allowShiftVisibleRangeOnWhitespaceReplacement:!1,ticksVisible:!1,uniformDistribution:!1,minimumHeight:0,allowBoldLabels:!0,ignoreWhitespaceIndices:!1};function Ix(){return{addDefaultPane:!0,width:0,height:0,autoSize:!1,layout:_F,crosshair:EF,grid:LF,overlayPriceScales:{...Rd},leftPriceScale:{...Rd,visible:!1},rightPriceScale:{...Rd,visible:!0},timeScale:RF,localization:{locale:Xr?navigator.language:"",dateFormat:"dd MMM 'yy"},handleScroll:{mouseWheel:!0,pressedMouseMove:!0,horzTouchDrag:!0,vertTouchDrag:!0},handleScale:{axisPressedMouseMove:{time:!0,price:!0},axisDoubleClickReset:{time:!0,price:!0},mouseWheel:!0,pinch:!0},kineticScroll:{mouse:!1,touch:!0},trackingMode:{exitMode:1}}}class PN{constructor(e,s,n){this.Wf=e,this.pg=s,this.vg=n??0}applyOptions(e){this.Wf.Qt().lc(this.pg,e,this.vg)}options(){return this.Yi().N()}width(){return Qu(this.pg)?this.Wf.lw(this.pg):0}setVisibleRange(e){this.setAutoScale(!1),this.Yi().Wl(new Ft(e.from,e.to))}getVisibleRange(){const e=this.Yi().Qe();return e===null?null:{from:e.$e(),to:e.qe()}}setAutoScale(e){this.applyOptions({autoScale:e})}Yi(){return ee(this.Wf.Qt().oc(this.pg,this.vg)).Ft}}class MF{constructor(e,s,n,i){this.Wf=e,this.Pt=n,this.mg=s,this.wg=i}getHeight(){return this.Pt.$t()}setHeight(e){const s=this.Wf.Qt(),n=s.Hc(this.Pt);s.fc(n,e)}getStretchFactor(){return this.Pt.Io()}setStretchFactor(e){this.Pt.Bo(e),this.Wf.Qt().Bh()}paneIndex(){return this.Wf.Qt().Hc(this.Pt)}moveTo(e){const s=this.paneIndex();s!==e&&(xt(e>=0&&e<this.Wf.Uf().length,"Invalid pane index"),this.Wf.Qt().mc(s,e))}getSeries(){return this.Pt.Oo().map(e=>this.mg(e))??[]}getHTMLElement(){const e=this.Wf.Uf();return e&&e.length!==0&&e[this.paneIndex()]?e[this.paneIndex()].Xf():null}attachPrimitive(e){this.Pt.ua(e),e.attached&&e.attached({chart:this.wg,requestUpdate:()=>this.Pt.Qt().Bh()})}detachPrimitive(e){this.Pt.ca(e)}priceScale(e){if(this.Pt.Do(e)===null)throw new Error(`Cannot find price scale with id: ${e}`);return new PN(this.Wf,e,this.paneIndex())}setPreserveEmptyPane(e){this.Pt.zo(e)}preserveEmptyPane(){return this.Pt.Lo()}addCustomSeries(e,s={},n=0){return this.wg.addCustomSeries(e,s,n)}addSeries(e,s={}){return this.wg.addSeries(e,s,this.paneIndex())}}const IF={color:"#FF0000",price:0,lineStyle:2,lineWidth:1,lineVisible:!0,axisLabelVisible:!0,title:"",axisLabelColor:"",axisLabelTextColor:""};class Ax{constructor(e){this.ir=e}applyOptions(e){this.ir.hr(e)}options(){return this.ir.N()}gg(){return this.ir}}class AF{constructor(e,s,n,i,a,o){this.Mg=new nt,this.Jn=e,this.bg=s,this.Sg=n,this.o_=a,this.wg=i,this.xg=o}m(){this.Mg.m()}priceFormatter(){return this.Jn.ra()}priceToCoordinate(e){const s=this.Jn.zt();return s===null?null:this.Jn.Ft().Nt(e,s.Wt)}coordinateToPrice(e){const s=this.Jn.zt();return s===null?null:this.Jn.Ft().Ts(e,s.Wt)}barsInLogicalRange(e){if(e===null)return null;const s=new Ar(new Ka(e.from,e.to)).k_(),n=this.Jn.Xs();if(n.Ki())return null;const i=n.Fr(s.Uh(),1),a=n.Fr(s.bi(),-1),o=ee(n.Lr()),l=ee(n.Ks());if(i!==null&&a!==null&&i.Re>a.Re)return{barsBefore:e.from-o,barsAfter:l-e.to};const c={barsBefore:i===null||i.Re===o?e.from-o:i.Re-o,barsAfter:a===null||a.Re===l?l-e.to:l-a.Re};return i!==null&&a!==null&&(c.from=i.Pw,c.to=a.Pw),c}setData(e){this.o_,this.Jn.Rr(),this.bg.Cg(this.Jn,e),this.Pg("full")}update(e,s=!1){this.Jn.Rr(),this.bg.kg(this.Jn,e,s),this.Pg("update")}dataByIndex(e,s){const n=this.Jn.Xs().Fr(e,s);return n===null?null:Cm(this.seriesType())(n)}data(){const e=Cm(this.seriesType());return this.Jn.Xs().Hr().map(s=>e(s))}subscribeDataChanged(e){this.Mg.i(e)}unsubscribeDataChanged(e){this.Mg._(e)}applyOptions(e){this.Jn.hr(e)}options(){return sn(this.Jn.N())}priceScale(){return this.Sg.priceScale(this.Jn.Ft().wa(),this.getPane().paneIndex())}createPriceLine(e){const s=ns(sn(IF),e),n=this.Jn.Oh(s);return new Ax(n)}removePriceLine(e){this.Jn.Nh(e.gg())}priceLines(){return this.Jn.Fh().map(e=>new Ax(e))}seriesType(){return this.Jn.Rr()}attachPrimitive(e){this.Jn.ua(e),e.attached&&e.attached({chart:this.wg,series:this,requestUpdate:()=>this.Jn.Qt().Bh(),horzScaleBehavior:this.o_})}detachPrimitive(e){this.Jn.ca(e),e.detached&&e.detached(),this.Jn.Qt().Bh()}getPane(){const e=this.Jn,s=ee(this.Jn.Qt().Hn(e));return this.xg(s)}moveToPane(e){this.Jn.Qt().Oc(this.Jn,e)}seriesOrder(){const e=this.Jn.Qt().Hn(this.Jn);return e===null?-1:e.Oo().indexOf(this.Jn)}setSeriesOrder(e){const s=this.Jn.Qt().Hn(this.Jn);s!==null&&s.Qo(this.Jn,e)}Pg(e){this.Mg.v()&&this.Mg.p(e)}}class OF{constructor(e,s,n){this.yg=new nt,this.z_=new nt,this.wm=new nt,this.ts=e,this.uh=e.Et(),this.Xm=s,this.uh.Du().i(this.Tg.bind(this)),this.uh.Vu().i(this.Rg.bind(this)),this.Xm.Pm().i(this.Dg.bind(this)),this.o_=n}m(){this.uh.Du().u(this),this.uh.Vu().u(this),this.Xm.Pm().u(this),this.yg.m(),this.z_.m(),this.wm.m()}scrollPosition(){return this.uh.wu()}scrollToPosition(e,s){s?this.uh.yu(e,1e3):this.ts.fn(e)}scrollToRealTime(){this.uh.ku()}getVisibleRange(){const e=this.uh.su();return e===null?null:{from:e.from.originalTime,to:e.to.originalTime}}setVisibleRange(e){const s={from:this.o_.convertHorzItemToInternal(e.from),to:this.o_.convertHorzItemToInternal(e.to)},n=this.uh.hu(s);this.ts.zc(n)}getVisibleLogicalRange(){const e=this.uh.iu();return e===null?null:{from:e.Uh(),to:e.bi()}}setVisibleLogicalRange(e){xt(e.from<=e.to,"The from index cannot be after the to index."),this.ts.zc(e)}resetTimeScale(){this.ts.cn()}fitContent(){this.ts.Eu()}logicalToCoordinate(e){const s=this.ts.Et();return s.Ki()?null:s.qt(e)}coordinateToLogical(e){return this.uh.Ki()?null:this.uh.uu(e)}timeToIndex(e,s){const n=this.o_.convertHorzItemToInternal(e);return this.uh.J_(n,s)}timeToCoordinate(e){const s=this.timeToIndex(e,!1);return s===null?null:this.uh.qt(s)}coordinateToTime(e){const s=this.ts.Et(),n=s.uu(e),i=s.ss(n);return i===null?null:i.originalTime}width(){return this.Xm.Zf().width}height(){return this.Xm.Zf().height}subscribeVisibleTimeRangeChange(e){this.yg.i(e)}unsubscribeVisibleTimeRangeChange(e){this.yg._(e)}subscribeVisibleLogicalRangeChange(e){this.z_.i(e)}unsubscribeVisibleLogicalRangeChange(e){this.z_._(e)}subscribeSizeChange(e){this.wm.i(e)}unsubscribeSizeChange(e){this.wm._(e)}applyOptions(e){this.uh.hr(e)}options(){return{...sn(this.uh.N()),barSpacing:this.uh.vu()}}Tg(){this.yg.v()&&this.yg.p(this.getVisibleRange())}Rg(){this.z_.v()&&this.z_.p(this.getVisibleLogicalRange())}Dg(e){this.wm.p(e.width,e.height)}}function DF(t){if(t===void 0||t.type==="custom")return;const e=t;e.minMove!==void 0&&e.precision===void 0&&(e.precision=function(s){if(s>=1)return 0;let n=0;for(;n<8;n++){const i=Math.round(s);if(Math.abs(i-s)<1e-8)return n;s*=10}return n}(e.minMove))}function Ox(t){return function(e){if(bl(e.handleScale)){const n=e.handleScale;e.handleScale={axisDoubleClickReset:{time:n,price:n},axisPressedMouseMove:{time:n,price:n},mouseWheel:n,pinch:n}}else if(e.handleScale!==void 0){const{axisPressedMouseMove:n,axisDoubleClickReset:i}=e.handleScale;bl(n)&&(e.handleScale.axisPressedMouseMove={time:n,price:n}),bl(i)&&(e.handleScale.axisDoubleClickReset={time:i,price:i})}const s=e.handleScroll;bl(s)&&(e.handleScroll={horzTouchDrag:s,vertTouchDrag:s,mouseWheel:s,pressedMouseMove:s})}(t),t}class FF{constructor(e,s,n){this.Vg=new Map,this.Ig=new Map,this.Bg=new nt,this.Eg=new nt,this.Ag=new nt,this.$u=new WeakMap,this.zg=new pF(s);const i=n===void 0?sn(Ix()):ns(sn(Ix()),Ox(n));this.Lg=s,this.Wf=new oF(e,i,s),this.Wf.Kv().i(o=>{this.Bg.v()&&this.Bg.p(this.Og(o()))},this),this.Wf.Xv().i(o=>{this.Eg.v()&&this.Eg.p(this.Og(o()))},this),this.Wf.uc().i(o=>{this.Ag.v()&&this.Ag.p(this.Og(o()))},this);const a=this.Wf.Qt();this.Ng=new OF(a,this.Wf.tw(),this.Lg)}remove(){this.Wf.Kv().u(this),this.Wf.Xv().u(this),this.Wf.uc().u(this),this.Ng.m(),this.Wf.m(),this.Vg.clear(),this.Ig.clear(),this.Bg.m(),this.Eg.m(),this.Ag.m(),this.zg.m()}resize(e,s,n){this.autoSizeActive()||this.Wf.Gm(e,s,n)}addCustomSeries(e,s={},n=0){const i=(a=>({type:"Custom",isBuiltIn:!1,defaultOptions:{...bF,...a.defaultOptions()},Fg:jF,Wg:a}))(In(e));return this.Hg(i,s,n)}addSeries(e,s={},n=0){return this.Hg(e,s,n)}removeSeries(e){const s=Xt(this.Vg.get(e)),n=this.zg.Ec(s);this.Wf.Qt().Ec(s),this.Ug(n),this.Vg.delete(e),this.Ig.delete(s)}Cg(e,s){this.Ug(this.zg.Fw(e,s))}kg(e,s,n){this.Ug(this.zg.Yw(e,s,n))}subscribeClick(e){this.Bg.i(e)}unsubscribeClick(e){this.Bg._(e)}subscribeCrosshairMove(e){this.Ag.i(e)}unsubscribeCrosshairMove(e){this.Ag._(e)}subscribeDblClick(e){this.Eg.i(e)}unsubscribeDblClick(e){this.Eg._(e)}priceScale(e,s=0){return new PN(this.Wf,e,s)}timeScale(){return this.Ng}applyOptions(e){this.Wf.hr(Ox(e))}options(){return this.Wf.N()}takeScreenshot(){return this.Wf.hw()}addPane(e=!1){const s=this.Wf.Qt().Uc();return s.zo(e),this.$g(s)}removePane(e){this.Wf.Qt().dc(e)}swapPanes(e,s){this.Wf.Qt().vc(e,s)}autoSizeActive(){return this.Wf.uw()}chartElement(){return this.Wf.tp()}panes(){return this.Wf.Qt().$s().map(e=>this.$g(e))}paneSize(e=0){const s=this.Wf.fw(e);return{height:s.height,width:s.width}}setCrosshairPosition(e,s,n){const i=this.Vg.get(n);if(i===void 0)return;const a=this.Wf.Qt().Hn(i);a!==null&&this.Wf.Qt().Tc(e,s,a)}clearCrosshairPosition(){this.Wf.Qt().Rc(!0)}horzBehaviour(){return this.Lg}Hg(e,s={},n=0){xt(e.Fg!==void 0),DF(s.priceFormat),e.type==="Candlestick"&&function(c){c.borderColor!==void 0&&(c.borderUpColor=c.borderColor,c.borderDownColor=c.borderColor),c.wickColor!==void 0&&(c.wickUpColor=c.wickColor,c.wickDownColor=c.wickColor)}(s);const i=ns(sn(lN),sn(e.defaultOptions),s),a=e.Fg,o=new Xu(this.Wf.Qt(),e.type,i,a,e.Wg);this.Wf.Qt().Ic(o,n);const l=new AF(o,this,this,this,this.Lg,c=>this.$g(c));return this.Vg.set(l,o),this.Ig.set(o,l),l}Ug(e){const s=this.Wf.Qt();s.Dc(e.Et.ou,e.Et.Gw,e.Et.Jw),e.Oo.forEach((n,i)=>i.ht(n.se,n.Zw)),s.Et().j_(),s.pu()}qg(e){return Xt(this.Ig.get(e))}Og(e){const s=new Map;e.Rw.forEach((i,a)=>{const o=a.Rr(),l=Cm(o)(i);if(o!=="Custom")xt(cF(l));else{const c=a.pa();xt(!c||c(l)===!1)}s.set(this.qg(a),l)});const n=e.Tw!==void 0&&this.Ig.has(e.Tw)?this.qg(e.Tw):void 0;return{time:e.Pw,logical:e.Re,point:e.kw,paneIndex:e.yw,hoveredSeries:n,hoveredObjectId:e.Dw,seriesData:s,sourceEvent:e.Vw}}$g(e){let s=this.$u.get(e);return s||(s=new MF(this.Wf,n=>this.qg(n),e,this),this.$u.set(e,s)),s}}function BF(t){if(Wo(t)){const e=document.getElementById(t);return xt(e!==null,`Cannot find element in DOM with id=${t}`),e}return t}function $F(t,e,s){const n=BF(t),i=new FF(n,e,s);return e.setOptions(i.options()),i}function zF(t,e){return $F(t,new xx,xx.ad(e))}class vg extends gg{constructor(e,s){super(e,s,!0)}ug(e,s,n){s._u(this.sg,Co(this.ng)),e.$l(this.sg,n,Co(this.ng))}Yg(e,s){return{wt:e,gt:s,_t:NaN,ut:NaN}}og(){const e=this.Jn.Rh();this.sg=this.Jn.Xs().Hr().map(s=>{const n=s.Wt[3];return this.jg(s.Re,n,e)})}}function TN(t,e,s,n,i,a,o){if(e.length===0||n.from>=e.length||n.to<=0)return;const{context:l,horizontalPixelRatio:c,verticalPixelRatio:u}=t,h=e[n.from];let d=a(t,h),f=h;if(n.to-n.from<2){const y=i/2;l.beginPath();const p={_t:h._t-y,ut:h.ut},w={_t:h._t+y,ut:h.ut};l.moveTo(p._t*c,p.ut*u),l.lineTo(w._t*c,w.ut*u),o(t,d,p,w)}else{const y=(w,g)=>{o(t,d,f,g),l.beginPath(),d=w,f=g};let p=f;l.beginPath(),l.moveTo(h._t*c,h.ut*u);for(let w=n.from+1;w<n.to;++w){p=e[w];const g=a(t,p);switch(s){case 0:l.lineTo(p._t*c,p.ut*u);break;case 1:l.lineTo(p._t*c,e[w-1].ut*u),g!==d&&(y(g,p),l.lineTo(p._t*c,e[w-1].ut*u)),l.lineTo(p._t*c,p.ut*u);break;case 2:{const[m,x]=VF(e,w-1,w);l.bezierCurveTo(m._t*c,m.ut*u,x._t*c,x.ut*u,p._t*c,p.ut*u);break}}s!==1&&g!==d&&(y(g,p),l.moveTo(p._t*c,p.ut*u))}(f!==p||f===p&&s===1)&&o(t,d,f,p)}}const Dx=6;function Md(t,e){return{_t:t._t-e._t,ut:t.ut-e.ut}}function Fx(t,e){return{_t:t._t/e,ut:t.ut/e}}function VF(t,e,s){const n=Math.max(0,e-1),i=Math.min(t.length-1,s+1);var a,o;return[(a=t[e],o=Fx(Md(t[s],t[n]),Dx),{_t:a._t+o._t,ut:a.ut+o.ut}),Md(t[s],Fx(Md(t[i],t[e]),Dx))]}function UF(t,e){const s=t.context;s.strokeStyle=e,s.stroke()}class WF extends yn{constructor(){super(...arguments),this.rt=null}ht(e){this.rt=e}et(e){if(this.rt===null)return;const{ot:s,lt:n,Kg:i,Xg:a,ct:o,Xt:l,Zg:c}=this.rt;if(n===null)return;const u=e.context;u.lineCap="butt",u.lineWidth=o*e.verticalPixelRatio,Hi(u,l),u.lineJoin="round";const h=this.Gg.bind(this);a!==void 0&&TN(e,s,a,n,i,h,UF),c&&function(d,f,y,p,w){if(p.to-p.from<=0)return;const{horizontalPixelRatio:g,verticalPixelRatio:m,context:x}=d;let S=null;const N=Math.max(1,Math.floor(g))%2/2,j=y*m+N;for(let P=p.to-1;P>=p.from;--P){const E=f[P];if(E){const T=w(d,E);T!==S&&(x.beginPath(),S!==null&&x.fill(),x.fillStyle=T,S=T);const R=Math.round(E._t*g)+N,M=E.ut*m;x.moveTo(R,M),x.arc(R,M,j,0,2*Math.PI)}}x.fill()}(e,s,c,n,h)}}class EN extends WF{Gg(e,s){return s.vt}}class HF extends vg{constructor(){super(...arguments),this.hg=new EN}jg(e,s,n){return{...this.Yg(e,s),...n.Dr(e)}}cg(){const e=this.Jn.N(),s={ot:this.sg,Xt:e.lineStyle,Xg:e.lineVisible?e.lineType:void 0,ct:e.lineWidth,Zg:e.pointMarkersVisible?e.pointMarkersRadius||e.lineWidth/2+2:void 0,lt:this.ng,Kg:this.Qn.Et().vu()};this.hg.ht(s)}}const YF={type:"Line",isBuiltIn:!0,defaultOptions:{color:"#2196f3",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},Fg:(t,e)=>new HF(t,e)};function qF(t,e,s,n,i){const{context:a,horizontalPixelRatio:o,verticalPixelRatio:l}=e;a.lineTo(i._t*o,t*l),a.lineTo(n._t*o,t*l),a.closePath(),a.fillStyle=s,a.fill()}class GF extends yn{constructor(){super(...arguments),this.rt=null}ht(e){this.rt=e}et(e){if(this.rt===null)return;const{ot:s,lt:n,Kg:i,ct:a,Xt:o,Xg:l}=this.rt,c=this.rt.eM??(this.rt.rM?0:e.mediaSize.height);if(n===null)return;const u=e.context;u.lineCap="butt",u.lineJoin="round",u.lineWidth=a,Hi(u,o),u.lineWidth=1,TN(e,s,l,n,i,this.hM.bind(this),qF.bind(null,c))}}class QF{aM(e,s){const n=this.lM,{oM:i,_M:a,uM:o,cM:l,eM:c,dM:u,fM:h}=s;if(this.pM===void 0||n===void 0||n.oM!==i||n._M!==a||n.uM!==o||n.cM!==l||n.eM!==c||n.dM!==u||n.fM!==h){const{verticalPixelRatio:d}=e,f=c||u>0?d:1,y=u*f,p=h===e.bitmapSize.height?h:h*f,w=(c??0)*f,g=e.context.createLinearGradient(0,y,0,p);if(g.addColorStop(0,i),c!=null){const m=Ir((w-y)/(p-y),0,1);g.addColorStop(m,a),g.addColorStop(m,o)}g.addColorStop(1,l),this.pM=g,this.lM=s}return this.pM}}class KF extends GF{constructor(){super(...arguments),this.vM=new QF}hM(e,s){var n;return this.vM.aM(e,{oM:s.mr,_M:"",uM:"",cM:s.wr,dM:((n=this.rt)==null?void 0:n.dM)??0,fM:e.bitmapSize.height})}}class XF extends vg{constructor(e,s){super(e,s),this.hg=new hN,this.MM=new KF,this.bM=new EN,this.hg.st([this.MM,this.bM])}jg(e,s,n){return{...this.Yg(e,s),...n.Dr(e)}}cg(){const e=this.Jn.N();if(this.ng===null||this.sg.length===0)return;let s;if(e.relativeGradient){s=this.sg[this.ng.from].ut;for(let n=this.ng.from;n<this.ng.to;n++){const i=this.sg[n];i.ut<s&&(s=i.ut)}}this.MM.ht({Xg:e.lineType,ot:this.sg,Xt:e.lineStyle,ct:e.lineWidth,eM:null,dM:s,rM:e.invertFilledArea,lt:this.ng,Kg:this.Qn.Et().vu()}),this.bM.ht({Xg:e.lineVisible?e.lineType:void 0,ot:this.sg,Xt:e.lineStyle,ct:e.lineWidth,lt:this.ng,Kg:this.Qn.Et().vu(),Zg:e.pointMarkersVisible?e.pointMarkersRadius||e.lineWidth/2+2:void 0})}}const JF={type:"Area",isBuiltIn:!0,defaultOptions:{topColor:"rgba( 46, 220, 135, 0.4)",bottomColor:"rgba( 40, 221, 100, 0)",invertFilledArea:!1,relativeGradient:!1,lineColor:"#33D778",lineStyle:0,lineWidth:3,lineType:0,lineVisible:!0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4,crosshairMarkerBorderColor:"",crosshairMarkerBorderWidth:2,crosshairMarkerBackgroundColor:"",lastPriceAnimation:0,pointMarkersVisible:!1},Fg:(t,e)=>new XF(t,e)};class ZF extends gg{constructor(e,s){super(e,s,!1)}ug(e,s,n){s._u(this.sg,Co(this.ng)),e.Yl(this.sg,n,Co(this.ng))}yM(e,s,n){return{wt:e,qh:s.Wt[0],Yh:s.Wt[1],jh:s.Wt[2],Kh:s.Wt[3],_t:NaN,jl:NaN,Kl:NaN,Xl:NaN,Zl:NaN}}og(){const e=this.Jn.Rh();this.sg=this.Jn.Xs().Hr().map(s=>this.jg(s.Re,s,e))}}class e5 extends yn{constructor(){super(...arguments),this.Yt=null,this.SM=0}ht(e){this.Yt=e}et(e){if(this.Yt===null||this.Yt.Xs.length===0||this.Yt.lt===null)return;const{horizontalPixelRatio:s}=e;this.SM=function(a,o){if(a>=2.5&&a<=4)return Math.floor(3*o);const l=1-.2*Math.atan(Math.max(4,a)-4)/(.5*Math.PI),c=Math.floor(a*l*o),u=Math.floor(a*o),h=Math.min(c,u);return Math.max(Math.floor(o),h)}(this.Yt.vu,s),this.SM>=2&&Math.floor(s)%2!=this.SM%2&&this.SM--;const n=this.Yt.Xs;this.Yt.TM&&this.RM(e,n,this.Yt.lt),this.Yt.Mi&&this._v(e,n,this.Yt.lt);const i=this.DM(s);(!this.Yt.Mi||this.SM>2*i)&&this.VM(e,n,this.Yt.lt)}RM(e,s,n){if(this.Yt===null)return;const{context:i,horizontalPixelRatio:a,verticalPixelRatio:o}=e;let l="",c=Math.min(Math.floor(a),Math.floor(this.Yt.vu*a));c=Math.max(Math.floor(a),Math.min(c,this.SM));const u=Math.floor(.5*c);let h=null;for(let d=n.from;d<n.to;d++){const f=s[d];f.pr!==l&&(i.fillStyle=f.pr,l=f.pr);const y=Math.round(Math.min(f.jl,f.Zl)*o),p=Math.round(Math.max(f.jl,f.Zl)*o),w=Math.round(f.Kl*o),g=Math.round(f.Xl*o);let m=Math.round(a*f._t)-u;const x=m+c-1;h!==null&&(m=Math.max(h+1,m),m=Math.min(m,x));const S=x-m+1;i.fillRect(m,w,S,y-w),i.fillRect(m,p+1,S,g-p),h=x}}DM(e){let s=Math.floor(1*e);this.SM<=2*s&&(s=Math.floor(.5*(this.SM-1)));const n=Math.max(Math.floor(e),s);return this.SM<=2*n?Math.max(Math.floor(e),Math.floor(1*e)):n}_v(e,s,n){if(this.Yt===null)return;const{context:i,horizontalPixelRatio:a,verticalPixelRatio:o}=e;let l="";const c=this.DM(a);let u=null;for(let h=n.from;h<n.to;h++){const d=s[h];d.dr!==l&&(i.fillStyle=d.dr,l=d.dr);let f=Math.round(d._t*a)-Math.floor(.5*this.SM);const y=f+this.SM-1,p=Math.round(Math.min(d.jl,d.Zl)*o),w=Math.round(Math.max(d.jl,d.Zl)*o);if(u!==null&&(f=Math.max(u+1,f),f=Math.min(f,y)),this.Yt.vu*a>2*c)J3(i,f,p,y-f+1,w-p+1,c);else{const g=y-f+1;i.fillRect(f,p,g,w-p+1)}u=y}}VM(e,s,n){if(this.Yt===null)return;const{context:i,horizontalPixelRatio:a,verticalPixelRatio:o}=e;let l="";const c=this.DM(a);for(let u=n.from;u<n.to;u++){const h=s[u];let d=Math.round(Math.min(h.jl,h.Zl)*o),f=Math.round(Math.max(h.jl,h.Zl)*o),y=Math.round(h._t*a)-Math.floor(.5*this.SM),p=y+this.SM-1;if(h.cr!==l){const w=h.cr;i.fillStyle=w,l=w}this.Yt.Mi&&(y+=c,d+=c,p-=c,f-=c),d>f||i.fillRect(y,d,p-y+1,f-d+1)}}}class t5 extends ZF{constructor(){super(...arguments),this.hg=new e5}jg(e,s,n){return{...this.yM(e,s,n),...n.Dr(e)}}cg(){const e=this.Jn.N();this.hg.ht({Xs:this.sg,vu:this.Qn.Et().vu(),TM:e.wickVisible,Mi:e.borderVisible,lt:this.ng})}}const s5={type:"Candlestick",isBuiltIn:!0,defaultOptions:{upColor:"#26a69a",downColor:"#ef5350",wickVisible:!0,borderVisible:!0,borderColor:"#378658",borderUpColor:"#26a69a",borderDownColor:"#ef5350",wickColor:"#737375",wickUpColor:"#26a69a",wickDownColor:"#ef5350"},Fg:(t,e)=>new t5(t,e)};class n5 extends yn{constructor(){super(...arguments),this.Yt=null,this.IM=[]}ht(e){this.Yt=e,this.IM=[]}et({context:e,horizontalPixelRatio:s,verticalPixelRatio:n}){if(this.Yt===null||this.Yt.ot.length===0||this.Yt.lt===null)return;this.IM.length||this.BM(s);const i=Math.max(1,Math.floor(n)),a=Math.round(this.Yt.EM*n)-Math.floor(i/2),o=a+i;for(let l=this.Yt.lt.from;l<this.Yt.lt.to;l++){const c=this.Yt.ot[l],u=this.IM[l-this.Yt.lt.from],h=Math.round(c.ut*n);let d,f;e.fillStyle=c.cr,h<=a?(d=h,f=o):(d=a,f=h-Math.floor(i/2)+i),e.fillRect(u.Uh,d,u.bi-u.Uh+1,f-d)}}BM(e){if(this.Yt===null||this.Yt.ot.length===0||this.Yt.lt===null)return void(this.IM=[]);const s=Math.ceil(this.Yt.vu*e)<=1?0:Math.max(1,Math.floor(e)),n=Math.round(this.Yt.vu*e)-s;this.IM=new Array(this.Yt.lt.to-this.Yt.lt.from);for(let a=this.Yt.lt.from;a<this.Yt.lt.to;a++){const o=this.Yt.ot[a],l=Math.round(o._t*e);let c,u;if(n%2){const h=(n-1)/2;c=l-h,u=l+h}else{const h=n/2;c=l-h,u=l+h-1}this.IM[a-this.Yt.lt.from]={Uh:c,bi:u,AM:l,ne:o._t*e,wt:o.wt}}for(let a=this.Yt.lt.from+1;a<this.Yt.lt.to;a++){const o=this.IM[a-this.Yt.lt.from],l=this.IM[a-this.Yt.lt.from-1];o.wt===l.wt+1&&o.Uh-l.bi!==s+1&&(l.AM>l.ne?l.bi=o.Uh-s-1:o.Uh=l.bi+s+1)}let i=Math.ceil(this.Yt.vu*e);for(let a=this.Yt.lt.from;a<this.Yt.lt.to;a++){const o=this.IM[a-this.Yt.lt.from];o.bi<o.Uh&&(o.bi=o.Uh);const l=o.bi-o.Uh+1;i=Math.min(l,i)}if(s>0&&i<4)for(let a=this.Yt.lt.from;a<this.Yt.lt.to;a++){const o=this.IM[a-this.Yt.lt.from];o.bi-o.Uh+1>i&&(o.AM>o.ne?o.bi-=1:o.Uh+=1)}}}class i5 extends vg{constructor(){super(...arguments),this.hg=new n5}jg(e,s,n){return{...this.Yg(e,s),...n.Dr(e)}}cg(){const e={ot:this.sg,vu:this.Qn.Et().vu(),lt:this.ng,EM:this.Jn.Ft().Nt(this.Jn.N().base,ee(this.Jn.zt()).Wt)};this.hg.ht(e)}}const r5={type:"Histogram",isBuiltIn:!0,defaultOptions:{color:"#26a69a",base:0},Fg:(t,e)=>new i5(t,e)};({...lN});const El="http://localhost:5001";class a5{constructor(){this.intervals=new Map,this.subscribers=new Map,this.lastUpdateTimes=new Map}startLiveUpdates(e,s,n=6e4){console.log(`🔄 Starting live updates for ${e} every ${n}ms`),this.stopLiveUpdates(e),this.subscribers.set(e,s),this.fetchLatestCandle(e);const i=this.getSmartInterval(e),a=setInterval(()=>{this.fetchLatestCandle(e)},i);return this.intervals.set(e,a),console.log(`📊 Live updates for ${e} set to ${i/1e3}s intervals`),a}getSmartInterval(e){const n=new Date().getHours();if(e.endsWith(".NS")||e.endsWith(".BO")){const a=new Date().toLocaleString("en-US",{timeZone:"Asia/Kolkata"}),l=new Date(a).getHours();return l>=9&&l<=15?6e4:l>=8&&l<9||l>15&&l<=17?3e5:9e5}else return n>=9&&n<=16?6e4:n>=7&&n<9||n>16&&n<=20?3e5:9e5}stopLiveUpdates(e){const s=this.intervals.get(e);s&&(console.log(`⏹️ Stopping live updates for ${e}`),clearInterval(s),this.intervals.delete(e),this.subscribers.delete(e),this.lastUpdateTimes.delete(e))}stopAllUpdates(){console.log("⏹️ Stopping all live updates"),this.intervals.forEach((e,s)=>{clearInterval(e)}),this.intervals.clear(),this.subscribers.clear(),this.lastUpdateTimes.clear()}async fetchLatestCandle(e){try{const s=await ke.get(`${El}/api/live-charts/latest/${e}`,{timeout:1e4});if(s.data.success&&s.data.latest){const n=s.data.latest,i=this.subscribers.get(e),a=this.lastUpdateTimes.get(e),o=n.time;!a||o>a?(console.log(`📈 New candle for ${e}:`,{time:new Date(o*1e3).toLocaleTimeString(),close:n.close,volume:n.volume}),this.lastUpdateTimes.set(e,o),i&&i({type:"update",data:n,marketOpen:s.data.marketOpen,exchange:s.data.exchange,timestamp:s.data.timestamp})):i&&i({type:"price_update",data:n,marketOpen:s.data.marketOpen,exchange:s.data.exchange,timestamp:s.data.timestamp})}}catch(s){console.warn(`⚠️ Failed to fetch latest candle for ${e}:`,s.message);const n=this.subscribers.get(e);n&&n({type:"error",error:s.message,symbol:e})}}async fetchInitialData(e,s=null){try{console.log(`📊 Fetching initial chart data for ${e}`);const n=s?{from:s}:{},i=await ke.get(`${El}/api/live-charts/live/${e}`,{params:n,timeout:15e3});if(i.data.success)return console.log(`✅ Initial data loaded for ${e}: ${i.data.count} candles`),{success:!0,data:i.data.data,latest:i.data.latest,marketOpen:i.data.marketOpen,exchange:i.data.exchange,count:i.data.count};throw new Error(i.data.message||"Failed to fetch initial data")}catch(n){return console.error(`❌ Error fetching initial data for ${e}:`,n.message),{success:!1,error:n.message,data:[]}}}async checkMarketStatus(e="NSE"){try{return(await ke.get(`${El}/api/live-charts/market-status/${e}`,{timeout:5e3})).data}catch(s){return console.warn(`⚠️ Failed to check market status for ${e}:`,s.message),{success:!1,marketOpen:!1,exchange:e.toUpperCase(),error:s.message}}}getActiveSymbols(){return Array.from(this.subscribers.keys())}isTracking(e){return this.subscribers.has(e)}getUpdateInterval(e){return this.intervals.get(e)}async fetchBatchCandles(e){try{console.log(`📊 Batch fetching candles for ${e.length} symbols`);const s=await ke.post(`${El}/api/live-charts/batch`,{symbols:e},{timeout:15e3});if(s.data.success)return console.log(`✅ Batch fetch successful: ${s.data.count} results`),{success:!0,results:s.data.results,timestamp:s.data.timestamp};throw new Error(s.data.message||"Batch fetch failed")}catch(s){return console.error("❌ Error in batch fetch:",s.message),{success:!1,error:s.message,results:[]}}}startBatchLiveUpdates(e,s,n=6e4){console.log(`🔄 Starting batch live updates for ${e.length} symbols every ${n}ms`),e.forEach(o=>this.stopLiveUpdates(o)),e.forEach(o=>this.subscribers.set(o,s)),this.fetchBatchCandles(e).then(o=>{o.success&&o.results.forEach(l=>{if(l.success){const c=this.subscribers.get(l.symbol);c&&c({type:"update",data:l.latest,marketOpen:l.marketOpen,exchange:l.exchange,timestamp:l.timestamp,symbol:l.symbol})}})});const i=setInterval(()=>{this.fetchBatchCandles(e).then(o=>{o.success&&o.results.forEach(l=>{if(l.success){const c=this.subscribers.get(l.symbol);c&&c({type:"update",data:l.latest,marketOpen:l.marketOpen,exchange:l.exchange,timestamp:l.timestamp,symbol:l.symbol})}})})},n),a=`batch_${e.join("_")}`;return this.intervals.set(a,i),i}}const Cs=new a5;typeof window<"u"&&window.addEventListener("beforeunload",()=>{Cs.stopAllUpdates()});const o5=({data:t=[],symbol:e="RELIANCE.NS",timeframe:s="1D",chartType:n="candlestick",theme:i="dark",onRefresh:a,loading:o=!1,height:l=500,enableLiveUpdates:c=!0})=>{const u=b.useRef(),h=b.useRef(),d=b.useRef(),f=b.useRef(),y=b.useRef(),p=b.useRef(),[w,g]=b.useState(!1),[m,x]=b.useState(!0),[S,N]=b.useState({sma:!1,ema:!1,rsi:!1,macd:!1}),[j,P]=b.useState(c&&s==="1D"),[E,T]=b.useState(null),[R,M]=b.useState(!1),[_,O]=b.useState(null),[A,B]=b.useState(null),H=()=>({layout:{background:{type:Sm.Solid,color:i==="dark"?"#0F172A":"#FFFFFF"},textColor:i==="dark"?"#F8FAFC":"#1E293B",fontSize:12,fontFamily:"Inter, -apple-system, BlinkMacSystemFont, sans-serif"},grid:{vertLines:{color:i==="dark"?"#1E293B":"#E2E8F0",style:1},horzLines:{color:i==="dark"?"#1E293B":"#E2E8F0",style:1}},crosshair:{mode:1,vertLine:{color:i==="dark"?"#64748B":"#475569",width:1,style:3},horzLine:{color:i==="dark"?"#64748B":"#475569",width:1,style:3}},priceScale:{borderColor:i==="dark"?"#334155":"#CBD5E1",textColor:i==="dark"?"#94A3B8":"#64748B"},timeScale:{borderColor:i==="dark"?"#334155":"#CBD5E1",textColor:i==="dark"?"#94A3B8":"#64748B",timeVisible:!0,secondsVisible:!1},watermark:{visible:!0,fontSize:48,horzAlign:"center",vertAlign:"center",color:i==="dark"?"rgba(248, 250, 252, 0.05)":"rgba(30, 41, 59, 0.05)",text:e},rightPriceScale:{scaleMargins:{top:.1,bottom:m?.4:.1}}}),F=()=>({upColor:"#10B981",downColor:"#EF4444",borderDownColor:"#EF4444",borderUpColor:"#10B981",wickDownColor:"#EF4444",wickUpColor:"#10B981"}),K=()=>({color:"#3B82F6",lineWidth:2,lineStyle:0,crosshairMarkerVisible:!0,crosshairMarkerRadius:4}),D=()=>({topColor:"rgba(59, 130, 246, 0.4)",bottomColor:"rgba(59, 130, 246, 0.0)",lineColor:"#3B82F6",lineWidth:2}),V=()=>({color:i==="dark"?"#475569":"#94A3B8",priceFormat:{type:"volume"},priceScaleId:"volume",scaleMargins:{top:.7,bottom:0}}),$=W=>{if(!h.current)return;const{type:Y,data:re,marketOpen:be,error:we}=W;if(we){console.warn("Live update error:",we);return}M(be),T(new Date),Y==="update"&&re?(d.current&&n==="candlestick"?(d.current.update(re),console.log("📊 Updated candlestick with new candle:",re)):f.current&&n==="line"?f.current.update({time:re.time,value:re.close}):y.current&&n==="area"&&y.current.update({time:re.time,value:re.close}),m&&p.current&&re.volume&&p.current.update({time:re.time,value:re.volume,color:re.close>=re.open?"#26a69a":"#ef5350"}),O(re.close),B({direction:"update",timestamp:Date.now()}),setTimeout(()=>B(null),1e3)):Y==="price_update"&&re&&(d.current&&n==="candlestick"&&d.current.update(re),O(re.close))},Q=()=>{j?(Cs.stopLiveUpdates(e),P(!1),console.log("⏹️ Live updates stopped")):(Cs.startLiveUpdates(e,$,5e3),P(!0),console.log("▶️ Live updates started"))};b.useEffect(()=>{if(!u.current)return;const W=zF(u.current,{...H(),width:u.current.clientWidth,height:w?window.innerHeight-100:l});h.current=W;try{n==="candlestick"?d.current=W.addSeries(s5,F()):n==="line"?f.current=W.addSeries(YF,K()):n==="area"&&(y.current=W.addSeries(JF,D()))}catch(re){console.error("Error creating chart series:",re),console.log("Available chart methods:",Object.getOwnPropertyNames(W))}m&&(p.current=W.addSeries(r5,V()),W.priceScale("volume").applyOptions({scaleMargins:{top:.7,bottom:0}}));const Y=()=>{h.current&&u.current&&h.current.applyOptions({width:u.current.clientWidth,height:w?window.innerHeight-100:l})};return window.addEventListener("resize",Y),()=>{window.removeEventListener("resize",Y),h.current&&h.current.remove()}},[n,i,m,w,l]),b.useEffect(()=>{if(!(!t||t.length===0))try{const W=le=>{if(!le)return new Date().toISOString().split("T")[0];if(typeof le=="number")return le;if(typeof le=="string"){const ds=new Date(le);return isNaN(ds.getTime())?le.split(" ")[0]||new Date().toISOString().split("T")[0]:ds.toISOString().split("T")[0]}return new Date().toISOString().split("T")[0]},Y=t.map(le=>({time:W(le.time||le.date),open:parseFloat(le.open),high:parseFloat(le.high),low:parseFloat(le.low),close:parseFloat(le.close),value:parseFloat(le.close)})),re=t.map(le=>({time:W(le.time||le.date),value:parseInt(le.volume||0),color:le.close>=le.open?"#10B981":"#EF4444"})),be=[],we=new Set;Y.sort((le,ds)=>new Date(le.time)-new Date(ds.time)).forEach(le=>{we.has(le.time)||(we.add(le.time),be.push(le))});const he=[],Ce=new Set;re.sort((le,ds)=>new Date(le.time)-new Date(ds.time)).forEach(le=>{Ce.has(le.time)||(Ce.add(le.time),he.push(le))}),n==="candlestick"&&d.current?d.current.setData(be):n==="line"&&f.current?f.current.setData(be):n==="area"&&y.current&&y.current.setData(be),m&&p.current&&he.length>0&&p.current.setData(he),h.current&&h.current.timeScale().fitContent()}catch(W){console.error("Error updating chart data:",W)}},[t,n,m]),b.useEffect(()=>{if(s!=="1D"){j&&(P(!1),Cs.stopLiveUpdates(e));return}return j?(console.log(`🔄 Starting live updates for ${e}`),Cs.startLiveUpdates(e,$),Cs.checkMarketStatus(e.includes(".NS")?"NSE":"NASDAQ").then(W=>{M(W.marketOpen)})):Cs.stopLiveUpdates(e),()=>{Cs.stopLiveUpdates(e)}},[j,e,s]),b.useEffect(()=>(Cs.stopLiveUpdates(e),s==="1D"&&c?(P(!0),Cs.startLiveUpdates(e,$)):P(!1),()=>{Cs.stopLiveUpdates(e)}),[e,s]);const se=()=>{g(!w)},ye=()=>{x(!m)},q=()=>{if(h.current){const W=u.current.querySelector("canvas");if(W){const Y=document.createElement("a");Y.download=`${e}_${s}_chart.png`,Y.href=W.toDataURL(),Y.click()}}};return r.jsxs(U.div,{className:`tradingview-chart-container ${w?"fullscreen":""}`,initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.5},children:[r.jsxs("div",{className:"chart-header",children:[r.jsxs("div",{className:"chart-title",children:[r.jsxs("h3",{children:[e," - ",s]}),r.jsx("span",{className:"chart-type",children:n.charAt(0).toUpperCase()+n.slice(1)}),j&&r.jsxs("div",{className:"live-indicators",children:[_&&r.jsxs("span",{className:`live-price ${A?`price-${A.direction}`:""}`,children:["₹",_.toFixed(2)]}),r.jsxs("span",{className:`market-status ${R?"open":"closed"}`,children:[r.jsx(Ns,{size:14,className:"status-icon"}),R?"Market Open":"Market Closed"]}),E&&r.jsxs("span",{className:"last-update",children:["Updated: ",E.toLocaleTimeString()]})]})]}),r.jsxs("div",{className:"chart-controls",children:[r.jsxs("button",{className:"chart-control-btn",onClick:ye,title:"Toggle Volume",children:["Volume: ",m?"ON":"OFF"]}),r.jsx("button",{className:"chart-control-btn",onClick:a,disabled:o,title:"Refresh Data",children:r.jsx(mt,{size:16,className:o?"animate-spin":""})}),s==="1D"&&c&&r.jsxs("button",{onClick:Q,className:`chart-control-btn ${j?"live-active":""}`,title:j?"Stop Live Updates":"Start Live Updates",children:[j?r.jsx(UI,{size:16}):r.jsx(HI,{size:16}),r.jsx("span",{className:"ml-1",children:j?"Live":"Start"})]}),r.jsx("button",{className:"chart-control-btn",onClick:q,title:"Export Chart",children:r.jsx(aj,{size:16})}),r.jsx("button",{className:"chart-control-btn",onClick:se,title:"Toggle Fullscreen",children:r.jsx(BI,{size:16})})]})]}),r.jsxs("div",{ref:u,className:"chart-wrapper",style:{position:"relative",width:"100%",height:w?"calc(100vh - 100px)":`${l}px`},children:[o&&r.jsx("div",{className:"chart-loading-overlay",children:r.jsxs("div",{className:"loading-content",children:[r.jsx(mt,{size:32,className:"animate-spin"}),r.jsx("p",{children:"Loading chart data..."})]})}),t.length===0&&!o&&r.jsx("div",{className:"chart-empty-overlay",children:r.jsxs("div",{className:"empty-content",children:[r.jsx("p",{children:"No chart data available"}),r.jsxs("button",{onClick:a,className:"btn-primary",children:[r.jsx(mt,{size:16}),"Refresh"]})]})})]}),r.jsx("div",{className:"chart-footer",children:r.jsxs("div",{className:"chart-info",children:[r.jsxs("span",{children:["Data Points: ",t.length]}),r.jsx("span",{children:"•"}),r.jsxs("span",{children:["Last Updated: ",new Date().toLocaleTimeString()]})]})})]})},l5=(t,e)=>{const[s,n]=b.useState(t);return b.useEffect(()=>{const i=setTimeout(()=>{n(t)},e);return()=>{clearTimeout(i)}},[t,e]),s},LN=({onStockSelect:t,selectedStock:e,className:s=""})=>{const[n,i]=b.useState(""),[a,o]=b.useState([]),[l,c]=b.useState(!1),[u,h]=b.useState(!1),[d,f]=b.useState("all"),[y,p]=b.useState(!1),w=b.useRef(null),g=l5(n,300),[m,x]=b.useState([{symbol:"RELIANCE",name:"Reliance Industries Ltd",price:2847.65,change:23.45,changePercent:.83,volume:2847392,marketCap:1925e9,sector:"Energy",isWatchlisted:!1},{symbol:"TCS",name:"Tata Consultancy Services",price:3567.8,change:-12.4,changePercent:-.35,volume:1234567,marketCap:13e11,sector:"IT",isWatchlisted:!0},{symbol:"HDFCBANK",name:"HDFC Bank Limited",price:1687.9,change:15.6,changePercent:.93,volume:3456789,marketCap:93e10,sector:"Banking",isWatchlisted:!1},{symbol:"INFY",name:"Infosys Limited",price:1456.25,change:8.75,changePercent:.6,volume:2345678,marketCap:62e10,sector:"IT",isWatchlisted:!1},{symbol:"HINDUNILVR",name:"Hindustan Unilever Ltd",price:2789.45,change:-5.3,changePercent:-.19,volume:876543,marketCap:65e10,sector:"FMCG",isWatchlisted:!0},{symbol:"ICICIBANK",name:"ICICI Bank Limited",price:1098.7,change:12.85,changePercent:1.18,volume:4567890,marketCap:77e10,sector:"Banking",isWatchlisted:!1},{symbol:"KOTAKBANK",name:"Kotak Mahindra Bank",price:1876.2,change:-8.45,changePercent:-.45,volume:1987654,marketCap:37e10,sector:"Banking",isWatchlisted:!1},{symbol:"BHARTIARTL",name:"Bharti Airtel Limited",price:1234.55,change:18.9,changePercent:1.55,volume:3210987,marketCap:68e10,sector:"Telecom",isWatchlisted:!0},{symbol:"ITC",name:"ITC Limited",price:456.8,change:-2.15,changePercent:-.47,volume:5432109,marketCap:57e10,sector:"FMCG",isWatchlisted:!1}]),S=async P=>{if(!P.trim()){o([]);return}c(!0);try{console.log(`🔍 StockSearchPanel: Searching for "${P}"`);const E=await Tn.searchStocks(P,10);if(console.log("📊 StockSearchPanel: FMP API response:",E),E.success&&E.results){const R=E.results.sort((M,_)=>{const O=M.exchange==="NSE"||M.exchange==="BSE"||M.symbol.endsWith(".NS")||M.symbol.endsWith(".BO"),A=_.exchange==="NSE"||_.exchange==="BSE"||_.symbol.endsWith(".NS")||_.symbol.endsWith(".BO");return O&&!A?-1:!O&&A?1:0}).slice(0,8).map(M=>({symbol:M.symbol,name:M.name,exchange:M.exchange,currency:M.currency,type:M.type,price:M.exchange==="NSE"||M.exchange==="BSE"?Math.random()*2e3+100:Math.random()*500+50,change:(Math.random()-.5)*40,changePercent:(Math.random()-.5)*8,sector:"Unknown"}));console.log(`✅ StockSearchPanel: Found ${R.length} results with price data`),o(R)}else console.warn("⚠️ StockSearchPanel: No results from FMP API"),o([])}catch(E){console.error("❌ StockSearchPanel: Search error:",E);const T=m.filter(R=>R.symbol.toLowerCase().includes(P.toLowerCase())||R.name.toLowerCase().includes(P.toLowerCase()));console.log(`🔄 StockSearchPanel: Using fallback results: ${T.length} found`),o(T)}finally{c(!1)}},N=b.useMemo(()=>{let P=[...m];switch(d){case"gainers":P=P.filter(E=>E.change>0).sort((E,T)=>T.changePercent-E.changePercent);break;case"losers":P=P.filter(E=>E.change<0).sort((E,T)=>E.changePercent-T.changePercent);break;case"watchlist":P=P.filter(E=>E.isWatchlisted);break;case"volume":P=P.sort((E,T)=>T.volume-E.volume);break;default:P=P.sort((E,T)=>T.marketCap-E.marketCap)}return P},[m,d]);b.useEffect(()=>{g&&g.trim().length>=2?(console.log(`🔍 StockSearchPanel: Triggering search for "${g}"`),S(g)):(console.log("🔍 StockSearchPanel: Clearing search results"),o([]))},[g]);const j=P=>{t==null||t(P),i(""),o([])};return r.jsxs("div",{className:`stock-search-panel ${s}`,children:[r.jsxs("div",{className:"stock-search",children:[r.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[r.jsx("h3",{className:"search-title",children:"Search Stocks"}),r.jsx("button",{onClick:()=>testFMPSearch(),style:{padding:"4px 8px",fontSize:"10px",background:"#10B981",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Test API"})]}),r.jsxs("div",{className:"search-input-container",children:[r.jsx(Yr,{className:"search-icon",size:18}),r.jsx("input",{ref:w,type:"text",placeholder:"Search stocks...",value:n,onChange:P=>i(P.target.value)}),n&&r.jsx("button",{className:"clear-search-btn",onClick:()=>{i(""),o([])},children:r.jsx(Bt,{size:16})}),l&&r.jsx("div",{className:"search-loading",children:r.jsx("div",{className:"loading-spinner"})})]}),r.jsxs(Xe,{children:[a.length>0&&r.jsxs(U.div,{className:"search-results",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:[r.jsx("div",{className:"results-header",children:"Search Results"}),a.map((P,E)=>{var T,R;return r.jsxs(U.div,{className:"search-result-item",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.2,delay:E*.05},onClick:()=>j(P),children:[r.jsxs("div",{className:"search-result-left",children:[r.jsx("div",{className:"symbol",children:P.symbol}),r.jsx("div",{className:"name",children:P.name})]}),r.jsxs("div",{className:"search-result-right",children:[r.jsx("div",{className:"search-result-price",children:He(P.price)}),r.jsxs("div",{className:`search-result-change ${P.change>=0?"positive":"negative"}`,children:[P.change>=0?"+":"",(T=P.change)==null?void 0:T.toFixed(2),"(",(R=P.changePercent)==null?void 0:R.toFixed(2),"%)"]})]}),r.jsx("div",{className:"search-result-actions",children:r.jsx(Jn,{stockData:P,size:"small",variant:"icon",showText:!1,onSuccess:(M,_)=>{console.log(`✅ ${_==="added"?"Added":"Removed"} ${P.symbol} ${_==="added"?"to":"from"} watchlist`)},onError:M=>{console.error("Watchlist error:",M)}})}),P.exchange&&r.jsx("div",{className:"exchange",children:P.exchange})]},P.symbol)})]}),g&&g.trim().length>=2&&a.length===0&&!l&&r.jsx(U.div,{className:"search-results",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},transition:{duration:.2},children:r.jsxs("div",{className:"no-results",children:[r.jsx(Yr,{size:24}),r.jsxs("p",{children:['No stocks found for "',g,'"']}),r.jsx("small",{children:"Try searching with different keywords or stock symbols"})]})})]})]}),r.jsxs("div",{className:"popular-stocks-section",children:[r.jsx("div",{className:"popular-stocks-header",children:r.jsx("h3",{className:"popular-stocks-title",children:"Popular Stocks"})}),r.jsx("div",{className:"popular-stocks-list",children:r.jsx(Xe,{children:N.map((P,E)=>{var T,R;return r.jsxs(U.div,{className:`popular-stock-item ${(e==null?void 0:e.symbol)===P.symbol?"selected":""}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3,delay:E*.05},onClick:()=>j(P),whileHover:{scale:1.02},whileTap:{scale:.98},children:[r.jsxs("div",{className:"popular-stock-info",children:[r.jsx("div",{className:"popular-stock-symbol",children:P.symbol}),r.jsx("div",{className:"popular-stock-name",children:P.name})]}),r.jsxs("div",{className:"popular-stock-price",children:[r.jsx("div",{className:"popular-stock-value",children:He(P.price)}),r.jsxs("div",{className:`popular-stock-change ${P.change>=0?"positive":"negative"}`,children:[P.change>=0?"+":"",(T=P.change)==null?void 0:T.toFixed(2),"(",(R=P.changePercent)==null?void 0:R.toFixed(2),"%)"]})]}),r.jsx("div",{className:"popular-stock-actions",children:r.jsx(Jn,{stockData:P,size:"small",variant:"icon",showText:!1,onSuccess:(M,_)=>{_==="added"?console.log(`✅ Added ${P.symbol} to watchlist`):_==="removed"&&console.log(`❌ Removed ${P.symbol} from watchlist`)},onError:M=>{console.error("Watchlist error:",M)}})})]},P.symbol)})})})]})]})},c5=({user:t,theme:e})=>{const[s,n]=b.useState("RELIANCE"),[i,a]=b.useState("1D"),[o,l]=b.useState("candlestick"),[c,u]=b.useState(!1),[h,d]=b.useState([]),[f,y]=b.useState([]),[p,w]=b.useState(null),[g,m]=b.useState(!1),[x,S]=b.useState(null),[N,j]=b.useState(!0),[P,E]=b.useState(null),[T,R]=b.useState(null),[M,_]=b.useState(null),[O,A]=b.useState(null),{query:B,setQuery:H,results:F,loading:K,recentSearches:D,clearSearch:V}=hg({limit:10,debounceMs:300});console.log("🔍 Charts - Search Query:",B),console.log("📊 Charts - Search Results:",F),console.log("⏳ Charts - Is Searching:",K);const $=ie=>["RELIANCE","TCS","HDFCBANK","INFY","HINDUNILVR","ICICIBANK","BHARTIARTL","SBIN","LICI","ITC","KOTAKBANK","LT","HCLTECH","AXISBANK","ASIANPAINT","MARUTI","SUNPHARMA","TITAN","ULTRACEMCO","WIPRO","NESTLEIND","POWERGRID","NTPC","BAJFINANCE","M&M"].includes(ie.toUpperCase())&&!ie.includes(".")?`${ie}.NS`:ie,se=[{symbol:"RELIANCE.NS",name:"Reliance Industries Ltd",price:2847.5,change:15.25,changePercent:.54},{symbol:"TCS.NS",name:"Tata Consultancy Services",price:4125.8,change:-12.4,changePercent:-.3},{symbol:"HDFCBANK.NS",name:"HDFC Bank Limited",price:1687.9,change:8.75,changePercent:.52},{symbol:"INFY.NS",name:"Infosys Limited",price:1842.35,change:22.15,changePercent:1.22},{symbol:"HINDUNILVR.NS",name:"Hindustan Unilever Ltd",price:2456.7,change:-5.3,changePercent:-.22},{symbol:"ICICIBANK.NS",name:"ICICI Bank Limited",price:1287.45,change:18.9,changePercent:1.49},{symbol:"KOTAKBANK.NS",name:"Kotak Mahindra Bank",price:1798.25,change:-7.85,changePercent:-.43},{symbol:"BHARTIARTL.NS",name:"Bharti Airtel Limited",price:1654.3,change:12.6,changePercent:.77},{symbol:"ITC.NS",name:"ITC Limited",price:487.85,change:3.25,changePercent:.67},{symbol:"SBIN.NS",name:"State Bank of India",price:825.4,change:-4.15,changePercent:-.5},{symbol:"LT.NS",name:"Larsen & Toubro Ltd",price:3687.2,change:28.45,changePercent:.78},{symbol:"ASIANPAINT.NS",name:"Asian Paints Limited",price:2398.75,change:-15.8,changePercent:-.65}].filter((ie,de,Pe)=>de===Pe.findIndex(qe=>qe.symbol===ie.symbol)),ye=["1D","5D","1M","3M","6M","1Y","5Y"],q=[{id:"candlestick",name:"Candlestick",icon:Ot},{id:"line",name:"Line",icon:Ns},{id:"area",name:"Area",icon:DI}],W=[{id:"sma",name:"SMA (20)",color:"#3B82F6"},{id:"ema",name:"EMA (12)",color:"#10B981"},{id:"rsi",name:"RSI (14)",color:"#F59E0B"},{id:"macd",name:"MACD",color:"#EF4444"},{id:"bollinger",name:"Bollinger Bands",color:"#8B5CF6"}],Y=ie=>{if(!ie||ie.length===0)return[];const de=ie.map(ge=>({time:ge.date||ge.time,open:parseFloat(ge.open),high:parseFloat(ge.high),low:parseFloat(ge.low),close:parseFloat(ge.close),volume:parseInt(ge.volume||0)})),Pe=[],qe=new Set;return de.sort((ge,fs)=>new Date(ge.time)-new Date(fs.time)).forEach(ge=>{qe.has(ge.time)||(qe.add(ge.time),Pe.push(ge))}),Pe},re=async(ie,de)=>{var Pe,qe;m(!0),S(null);try{console.log(`📊 Fetching chart data for ${ie} (${de})`),console.log("🔍 FMP API structure:",{hasChart:!!ui.chart,hasGetHistoricalData:!!((Pe=ui.chart)!=null&&Pe.getHistoricalData)});const ge=await ui.chart.getHistoricalData(ie,de);if(console.log("📈 Historical response:",ge),ge&&ge.success&&ge.data&&ge.data.length>0){const vn=Y(ge.data);y(vn),console.log(`✅ Chart data loaded: ${vn.length} points`)}else console.warn("⚠️ No historical data available",{hasResponse:!!ge,success:ge==null?void 0:ge.success,dataLength:((qe=ge==null?void 0:ge.data)==null?void 0:qe.length)||0,response:ge}),y([]);const fs=await ui.stock.getStockQuote(ie);fs.success&&(w(fs.data),console.log(`✅ Stock info loaded for ${ie}`))}catch(ge){console.error("❌ Error fetching chart data:",ge),S(ge.message),y([])}finally{m(!1)}},be=async ie=>{try{console.log(`📈 Fetching live quote for ${ie}`);const de=await ui.stock.getStockQuote(ie);if(de.success&&de.data){const Pe=de.data.price,qe=T;if(R(Pe),w(de.data),E(new Date),qe&&Pe!==qe&&(_({direction:Pe>qe?"up":"down",amount:Pe-qe,timestamp:Date.now()}),i==="1D"&&f.length>0)){const ge={...f[f.length-1]},fs={...ge,close:Pe,high:Math.max(ge.high,Pe),low:Math.min(ge.low,Pe),time:new Date().toISOString()};y(vn=>[...vn.slice(0,-1),fs])}return console.log(`✅ Live price updated: ₹${Pe}`),de.data}}catch(de){console.warn("⚠️ Failed to fetch live quote:",de.message)}return null},we=async()=>{u(!0),await re(s,i),u(!1)},he=async ie=>{console.log("🎯 Stock selected:",ie);const de=$(ie);console.log("🔄 Transformed symbol:",de),n(ie),await re(de,i)},Ce=async ie=>{a(ie),await re(s,ie)},le=ie=>{d(de=>de.includes(ie)?de.filter(Pe=>Pe!==ie):[...de,ie])};se.filter(ie=>{var Pe,qe;if(!B||B.trim()==="")return!0;const de=B.toLowerCase();return((Pe=ie.symbol)==null?void 0:Pe.toLowerCase().includes(de))||((qe=ie.name)==null?void 0:qe.toLowerCase().includes(de))}).filter((ie,de,Pe)=>de===Pe.findIndex(qe=>qe.symbol===ie.symbol));const Jt=se.find(ie=>ie.symbol===s)||se[0],ir=async()=>{console.log("🧪 Testing FMP API functionality...");try{const ie=await ui.chart.getHistoricalData("AAPL","1D");console.log("🧪 US Stock (AAPL) test result:",ie)}catch(ie){console.log("🧪 US Stock test failed:",ie)}try{const ie=await ui.chart.getHistoricalData("RELIANCE.NS","1D");console.log("🧪 Indian Stock (RELIANCE.NS) test result:",ie)}catch(ie){console.log("🧪 Indian Stock test failed:",ie)}};return b.useEffect(()=>{ir();const ie=$(s);if(re(ie,i),N){const de=setInterval(()=>{if(!c){const Pe=$(s);be(Pe)}},3e4);return A(de),()=>{de&&clearInterval(de)}}},[]),b.useEffect(()=>{const ie=$(s);re(ie,i),R(null),_(null)},[s,i]),b.useEffect(()=>{if(N&&!O){const ie=setInterval(()=>{if(!c){const de=$(s);be(de)}},3e4);A(ie)}else!N&&O&&(clearInterval(O),A(null));return()=>{O&&clearInterval(O)}},[N,s,c]),b.useEffect(()=>()=>{O&&clearInterval(O)},[]),r.jsx("div",{className:"charts-page",children:r.jsxs("div",{className:"charts-container",children:[r.jsxs(U.div,{className:"charts-header",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:[r.jsxs("div",{className:"header-left",children:[r.jsxs("div",{className:"page-title",children:[r.jsx(Ot,{size:24}),r.jsx("h1",{children:"Professional Charts"})]}),r.jsxs("div",{className:"stock-info",children:[r.jsx("h2",{children:Jt.name}),r.jsxs("span",{className:"symbol",children:["(",Jt.symbol,")"]}),r.jsx(Vi,{price:Jt.price,change:Jt.change,changePercent:Jt.changePercent}),r.jsx("div",{className:"stock-actions-row",children:r.jsx(Jn,{stockData:Jt,size:"small",variant:"icon",onSuccess:(ie,de)=>{de==="added"?X.success(`Added ${Jt.symbol} to watchlist`):de==="removed"&&X.success(`Removed ${Jt.symbol} from watchlist`)},onError:ie=>{X.error(ie||"Failed to update watchlist")},showText:!1})})]})]}),r.jsx("div",{className:"header-actions",children:r.jsxs("button",{className:"btn-premium btn-secondary",onClick:we,disabled:c,children:[r.jsx(mt,{size:16,className:c?"animate-spin":""}),"Refresh"]})})]}),r.jsxs("div",{className:"charts-content",children:[r.jsxs(U.div,{className:"charts-sidebar",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.1},children:[r.jsx(LN,{onStockSelect:ie=>{console.log("🎯 Selected stock from panel:",ie),he(ie.symbol||ie)},selectedStock:{symbol:s},className:"charts-stock-search"}),r.jsxs("div",{className:"sidebar-section",children:[r.jsx("h3",{children:"Timeframe"}),r.jsx("div",{className:"timeframe-buttons",children:ye.map(ie=>r.jsx("button",{className:`timeframe-btn ${i===ie?"active":""}`,onClick:()=>Ce(ie),children:ie},ie))})]}),r.jsxs("div",{className:"sidebar-section",children:[r.jsx("h3",{children:"Chart Type"}),r.jsx("div",{className:"chart-type-buttons",children:q.map(ie=>r.jsxs("button",{className:`chart-type-btn ${o===ie.id?"active":""}`,onClick:()=>l(ie.id),children:[r.jsx(ie.icon,{size:16}),ie.name]},ie.id))})]}),r.jsxs("div",{className:"sidebar-section",children:[r.jsx("h3",{children:"Technical Indicators"}),r.jsx("div",{className:"indicators-list",children:W.map(ie=>r.jsxs("div",{className:`indicator-item ${h.includes(ie.id)?"active":""}`,onClick:()=>le(ie.id),children:[r.jsx("div",{className:"indicator-color",style:{backgroundColor:ie.color}}),r.jsx("span",{children:ie.name})]},ie.id))})]})]}),r.jsxs(U.div,{className:"chart-main",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.6,delay:.2},children:[r.jsx(o5,{data:f,symbol:s,timeframe:i,chartType:o,theme:e,onRefresh:we,loading:g,height:600}),r.jsxs("div",{className:"chart-footer",children:[r.jsxs("div",{className:"footer-left",children:[r.jsxs("div",{className:"volume-info",children:[r.jsx(pj,{size:16}),r.jsxs("span",{children:["Volume: ",p!=null&&p.volume?p.volume.toLocaleString():"N/A"]})]}),r.jsxs("div",{className:"market-cap-info",children:[r.jsx($c,{size:16}),r.jsxs("span",{children:["Market Cap: ",p!=null&&p.marketCap?"₹"+(p.marketCap/1e7).toFixed(1)+" Cr":"N/A"]})]})]}),r.jsx("div",{className:"footer-right",children:r.jsxs("div",{className:"last-updated",children:[r.jsx(Dt,{size:16}),r.jsxs("span",{children:["Last updated: ",p!=null&&p.timestamp?new Date(p.timestamp*1e3).toLocaleTimeString():"N/A"]})]})})]})]})]})]})})},u5=({user:t,theme:e})=>{const s=Lt(),{portfolioData:n}=hs(),{watchlists:i,loading:a,addToWatchlist:o,createWatchlist:l,refreshWatchlists:c}=Xj(),[u,h]=b.useState("all"),[d,f]=b.useState("list"),[y,p]=b.useState("symbol"),[w,g]=b.useState("asc"),[m,x]=b.useState(""),[S,N]=b.useState(!1),[j,P]=b.useState(!1),[E,T]=b.useState(""),[R,M]=b.useState(""),[_,O]=b.useState(!1),{isOpen:A,currentStock:B,defaultQuantity:H,closeSlideToBuy:F}=Yu(),K=b.useMemo(()=>u==="all"?{name:"All Watchlists",stocks:i.reduce((W,Y)=>[...W,...Y.stocks||[]],[])}:i.find(q=>q._id===u)||{name:"Unknown",stocks:[]},[i,u]),D=b.useMemo(()=>{let q=K.stocks||[];return m&&(q=q.filter(W=>W.symbol.toLowerCase().includes(m.toLowerCase())||W.name.toLowerCase().includes(m.toLowerCase()))),q.sort((W,Y)=>{let re=W[y],be=Y[y];return typeof re=="string"&&(re=re.toLowerCase(),be=be.toLowerCase()),w==="asc"?re>be?1:-1:re<be?1:-1})},[K.stocks,m,y,w]),V=b.useMemo(()=>{const q=K.stocks||[];return{gainers:q.filter(W=>(W.change||0)>0).length,losers:q.filter(W=>(W.change||0)<0).length,neutral:q.filter(W=>(W.change||0)===0).length}},[K.stocks]),$=()=>i.reduce((q,W)=>{var Y;return q+(((Y=W.stocks)==null?void 0:Y.length)||0)},0),Q=async()=>{N(!0);try{await c(),X.success("Watchlists refreshed successfully")}catch{X.error("Failed to refresh watchlists")}finally{N(!1)}},se=async()=>{if(E.trim()){O(!0);try{await l({name:E.trim(),description:R.trim()}),T(""),M(""),P(!1),X.success("Watchlist created successfully")}catch{X.error("Failed to create watchlist")}finally{O(!1)}}},ye=async q=>{if(u==="all"){X.warning("Please select a specific watchlist to add stocks");return}try{await o(u,q),X.success(`Added ${q} to watchlist`)}catch{X.error("Failed to add stock to watchlist")}};return b.useEffect(()=>{i.length>0&&u==="all"&&h(i[0]._id)},[i]),a?r.jsx("div",{className:"watchlist-page",children:r.jsxs("div",{className:"loading-container",children:[r.jsx("div",{className:"loading-spinner"}),r.jsx("p",{children:"Loading watchlists..."})]})}):r.jsxs("div",{className:"watchlist-page",children:[r.jsxs("div",{className:"watchlist-container",children:[r.jsxs(U.div,{className:"watchlist-header",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:[r.jsxs("div",{className:"header-left",children:[r.jsx("div",{className:"header-icon",children:r.jsx(zi,{})}),r.jsxs("div",{className:"header-text",children:[r.jsx("h1",{children:"My Watchlists"}),r.jsx("p",{children:"Track and manage your favorite stocks"})]})]}),r.jsxs("div",{className:"header-actions",children:[r.jsxs("button",{className:`action-btn ${S?"loading":""}`,onClick:Q,disabled:S,children:[r.jsx(mt,{className:S?"spinning":""}),S?"Refreshing...":"Refresh"]}),r.jsxs("button",{className:"action-btn primary",onClick:()=>P(!0),children:[r.jsx(Mn,{}),"New Watchlist"]})]}),r.jsxs("div",{className:"stats-overview",children:[r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-icon",children:r.jsx(Ot,{})}),r.jsxs("div",{className:"stat-content",children:[r.jsx("div",{className:"stat-value",children:$()}),r.jsx("div",{className:"stat-label",children:"Total Stocks"})]})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-icon positive",children:r.jsx(Oe,{})}),r.jsxs("div",{className:"stat-content",children:[r.jsx("div",{className:"stat-value",children:V.gainers}),r.jsx("div",{className:"stat-label",children:"Gainers"})]})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-icon negative",children:r.jsx(lt,{})}),r.jsxs("div",{className:"stat-content",children:[r.jsx("div",{className:"stat-value",children:V.losers}),r.jsx("div",{className:"stat-label",children:"Losers"})]})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-icon",children:r.jsx(Gr,{})}),r.jsxs("div",{className:"stat-content",children:[r.jsx("div",{className:"stat-value",children:i.length}),r.jsx("div",{className:"stat-label",children:"Watchlists"})]})]})]})]}),r.jsxs("div",{className:"watchlist-content",children:[r.jsxs(U.div,{className:"watchlist-sidebar",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.5,delay:.1},children:[r.jsx(LN,{onStockSelect:q=>{console.log("🎯 Selected stock from panel:",q),ye(q.symbol||q)},selectedStock:null,className:"watchlist-stock-search"}),r.jsxs("div",{className:"sidebar-section",children:[r.jsx("h3",{children:"My Watchlists"}),r.jsxs("div",{className:"watchlist-list",children:[r.jsxs("button",{className:`watchlist-tab ${u==="all"?"active":""}`,onClick:()=>h("all"),children:[r.jsx(Ns,{}),"All Watchlists",r.jsx("span",{className:"tab-count",children:$()})]}),i.map(q=>{var W;return r.jsxs("button",{className:`watchlist-tab ${u===q._id?"active":""}`,onClick:()=>h(q._id),children:[r.jsx(_i,{}),q.name,r.jsx("span",{className:"tab-count",children:((W=q.stocks)==null?void 0:W.length)||0})]},q._id)})]})]}),r.jsxs("div",{className:"sidebar-section",children:[r.jsx("h3",{children:"Quick Actions"}),r.jsxs("div",{className:"quick-actions",children:[r.jsxs("button",{className:"action-btn",onClick:()=>P(!0),children:[r.jsx(Mn,{}),"New Watchlist"]}),r.jsxs("button",{className:"action-btn",onClick:Q,disabled:S,children:[r.jsx(mt,{className:S?"spinning":""}),"Refresh Data"]})]})]})]}),r.jsxs(U.div,{className:"watchlist-main",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{duration:.6,delay:.2},children:[r.jsxs("div",{className:"watchlist-tabs",children:[r.jsxs("button",{className:`watchlist-tab ${u==="all"?"active":""}`,onClick:()=>h("all"),children:[r.jsx(Ns,{}),"All Watchlists",r.jsx("span",{className:"tab-count",children:$()})]}),i.map(q=>{var W;return r.jsxs("button",{className:`watchlist-tab ${u===q._id?"active":""}`,onClick:()=>h(q._id),children:[r.jsx(_i,{}),q.name,r.jsx("span",{className:"tab-count",children:((W=q.stocks)==null?void 0:W.length)||0})]},q._id)})]}),r.jsxs("div",{className:"main-header",children:[r.jsxs("div",{className:"main-title",children:[r.jsxs("h2",{children:[r.jsx(zi,{}),K.name]}),r.jsxs("div",{className:"main-controls",children:[r.jsxs("div",{className:"view-toggle","data-active":d,children:[r.jsxs("button",{className:d==="list"?"active":"",onClick:()=>f("list"),children:[r.jsx(cj,{}),"List"]}),r.jsxs("button",{className:d==="grid"?"active":"",onClick:()=>f("grid"),children:[r.jsx(AI,{}),"Grid"]})]}),r.jsx("div",{className:"sort-dropdown",children:r.jsxs("button",{className:"sort-btn",children:[r.jsx(Ru,{}),"Sort by ",y,r.jsx(xi,{})]})})]})]}),r.jsx("div",{className:"search-section",children:r.jsx(Uo,{value:m,onChange:x,placeholder:"Search stocks in watchlist...",className:"watchlist-search"})})]}),r.jsx("div",{className:"stocks-section",children:D.length===0?r.jsxs("div",{className:"empty-state",children:[r.jsx("div",{className:"empty-icon",children:r.jsx(_i,{})}),r.jsx("h3",{children:"No stocks found"}),r.jsx("p",{children:m?`No stocks found matching "${m}" in your watchlist`:K.stocks.length===0?"Start building your watchlist by adding stocks you want to track":"Use the search above to add new stocks to your watchlist"}),!m&&K.stocks.length===0&&r.jsxs("button",{className:"action-btn primary",onClick:()=>P(!0),children:[r.jsx(Mn,{}),"Add Your First Stock"]})]}):r.jsx("div",{className:"stock-list",children:D.map((q,W)=>r.jsxs(U.div,{className:"stock-item",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.3,delay:W*.03},onClick:()=>s(`/stock/${q.symbol}`),children:[r.jsxs("div",{className:"stock-info",children:[r.jsx("div",{className:"stock-symbol",children:q.symbol}),r.jsx("div",{className:"stock-name",children:q.name})]}),r.jsx("div",{className:"stock-price",children:r.jsx(Vi,{symbol:q.symbol,showChange:!0,size:"medium"})}),r.jsx("div",{className:"stock-actions",children:r.jsx(Jn,{stockData:q,size:"small",variant:"simple",showText:!1,onSuccess:(Y,re)=>{re==="removed"?(X.success(`Removed ${q.symbol} from watchlist`),c()):re==="added"&&(X.success(`Added ${q.symbol} to watchlist`),c())},onError:Y=>{X.error(Y||"Failed to update watchlist")}})})]},q.symbol))})})]})]})]}),r.jsx(Xe,{children:j&&r.jsx(U.div,{className:"modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>P(!1),children:r.jsxs(U.div,{className:"modal-content",initial:{opacity:0,scale:.9,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:20},onClick:q=>q.stopPropagation(),children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h3",{children:"Create New Watchlist"}),r.jsx("button",{className:"close-btn",onClick:()=>P(!1),children:r.jsx(Bt,{})})]}),r.jsx("div",{className:"modal-body",children:r.jsxs("div",{className:"form-group",children:[r.jsx("label",{htmlFor:"watchlist-name",children:"Watchlist Name"}),r.jsx("input",{id:"watchlist-name",type:"text",value:E,onChange:q=>T(q.target.value),placeholder:"Enter watchlist name...",className:"form-input",autoFocus:!0})]})}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{className:"action-btn",onClick:()=>P(!1),children:"Cancel"}),r.jsx("button",{className:"action-btn primary",onClick:se,disabled:!E.trim()||_,children:_?r.jsxs(r.Fragment,{children:[r.jsx(mt,{className:"spinning"}),"Creating..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Mn,{}),"Create Watchlist"]})})]})]})})}),r.jsx(Hu,{stockData:B,isOpen:A,onClose:F,defaultQuantity:H,onSuccess:()=>{}})]})},h5=({user:t,theme:e})=>{const[s,n]=b.useState("all"),[i,a]=b.useState("all"),[o,l]=b.useState(!1),{portfolioData:c}=hs(),{query:u,setQuery:h,results:d,recentSearches:f,showHistory:y,handleHistoryClick:p,loading:w,clearSearch:g,hasResults:m}=w3({enableSuggestions:!1,enableHistory:!0,limit:50,debounceMs:300,filters:{status:s!=="all"?s:null,type:i!=="all"?i:null}}),x=c.transactions||[],S=[{id:"all",name:"All Orders",count:25},{id:"pending",name:"Pending",count:3},{id:"completed",name:"Completed",count:18},{id:"cancelled",name:"Cancelled",count:4}],N=[{id:"all",name:"All Types"},{id:"buy",name:"Buy Orders"},{id:"sell",name:"Sell Orders"}],j=async()=>{l(!0),await new Promise(_=>setTimeout(_,1500)),l(!1)},P=_=>{switch(_){case"completed":return r.jsx(Os,{className:"status-icon completed"});case"pending":return r.jsx(Dt,{className:"status-icon pending"});case"cancelled":return r.jsx(fn,{className:"status-icon cancelled"});default:return r.jsx(Dt,{className:"status-icon"})}},E=_=>{switch(_){case"completed":return"#10B981";case"pending":return"#F59E0B";case"cancelled":return"#EF4444";default:return"#6B7280"}},T=_=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:0,maximumFractionDigits:0}).format(_),R=_=>{const O=new Date(_);return{date:O.toLocaleDateString("en-IN"),time:O.toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"})}},M=x.filter(_=>{const O=_.symbol.toLowerCase().includes(u.toLowerCase())||_.name.toLowerCase().includes(u.toLowerCase())||_.id.toLowerCase().includes(u.toLowerCase()),A=s==="all"||_.status===s,B=i==="all"||_.type.toLowerCase()===i;return O&&A&&B});return r.jsxs("div",{className:"orders-page",children:[r.jsx(sr,{icon:Tt,title:"Orders",subtitle:"Track and manage your trading orders",borderColor:"warning",actions:[{label:"Refresh",icon:mt,onClick:j,variant:"secondary",disabled:o},{label:"Export",icon:aj,onClick:()=>{},variant:"outline"}]}),r.jsxs("div",{className:"orders-container",children:[r.jsxs(U.div,{className:"orders-controls",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},children:[r.jsxs("div",{className:"controls-left",children:[r.jsx("div",{className:"search-container",children:r.jsx(Uo,{placeholder:"Search orders by stock symbol...",value:u,onChange:h,onClear:g,recentSearches:f,onHistoryClick:p,showHistory:y,loading:w,size:"md",showSuggestions:!1,enableHistory:!0,className:"orders-search-input"})}),r.jsxs("div",{className:"filter-group",children:[r.jsx("select",{value:s,onChange:_=>n(_.target.value),className:"filter-select",children:S.map(_=>r.jsxs("option",{value:_.id,children:[_.name," (",_.count,")"]},_.id))}),r.jsx("select",{value:i,onChange:_=>a(_.target.value),className:"filter-select",children:N.map(_=>r.jsx("option",{value:_.id,children:_.name},_.id))})]})]}),r.jsx("div",{className:"controls-right",children:r.jsxs("button",{className:"btn-premium btn-ghost",children:[r.jsx(Ru,{size:16}),"More Filters"]})})]}),r.jsxs(U.div,{className:"orders-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:[r.jsx("div",{className:"card-header",children:r.jsxs("h3",{className:"card-title",children:[r.jsx(Tt,{className:"card-icon"}),"Order History (",M.length,")"]})}),r.jsx("div",{className:"card-content",children:r.jsxs("div",{className:"orders-table",children:[r.jsxs("div",{className:"table-header",children:[r.jsx("div",{className:"col-order",children:"Order Details"}),r.jsx("div",{className:"col-type",children:"Type"}),r.jsx("div",{className:"col-quantity",children:"Quantity"}),r.jsx("div",{className:"col-price",children:"Price"}),r.jsx("div",{className:"col-total",children:"Total"}),r.jsx("div",{className:"col-status",children:"Status"}),r.jsx("div",{className:"col-time",children:"Time"}),r.jsx("div",{className:"col-actions",children:"Actions"})]}),r.jsx("div",{className:"table-body",children:M.map((_,O)=>{const A=R(_.timestamp);return r.jsxs(U.div,{className:"table-row",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{duration:.3,delay:O*.05},children:[r.jsx("div",{className:"col-order",children:r.jsxs("div",{className:"order-info",children:[r.jsxs("div",{className:"order-id",children:["#",_.id]}),r.jsx("div",{className:"stock-symbol",children:_.symbol}),r.jsx("div",{className:"stock-name",children:_.name})]})}),r.jsxs("div",{className:"col-type",children:[r.jsxs("div",{className:`order-type ${_.type.toLowerCase()}`,children:[_.type==="BUY"?r.jsx(Oe,{size:14}):r.jsx(lt,{size:14}),_.type]}),r.jsx("div",{className:"order-subtype",children:_.orderType})]}),r.jsx("div",{className:"col-quantity",children:_.quantity}),r.jsx("div",{className:"col-price",children:r.jsxs("div",{className:"price-info",children:[r.jsx("div",{className:"order-price",children:T(_.price)}),_.executedPrice&&_.executedPrice!==_.price&&r.jsxs("div",{className:"executed-price",children:["Exec: ",T(_.executedPrice)]})]})}),r.jsxs("div",{className:"col-total",children:[r.jsx("div",{className:"total-amount",children:T(_.total)}),_.fees>0&&r.jsxs("div",{className:"fees",children:["Fees: ",T(_.fees)]})]}),r.jsx("div",{className:"col-status",children:r.jsxs("div",{className:"status-container",children:[P(_.status),r.jsx("span",{className:`status-text ${_.status}`,style:{color:E(_.status)},children:_.status.charAt(0).toUpperCase()+_.status.slice(1)})]})}),r.jsx("div",{className:"col-time",children:r.jsxs("div",{className:"time-info",children:[r.jsx("div",{className:"order-date",children:A.date}),r.jsx("div",{className:"order-time",children:A.time})]})}),r.jsx("div",{className:"col-actions",children:r.jsxs("div",{className:"action-buttons",children:[_.status==="pending"&&r.jsx("button",{className:"action-btn",title:"Edit Order",children:r.jsx(oj,{size:14})}),_.status==="pending"&&r.jsx("button",{className:"action-btn cancel",title:"Cancel Order",children:r.jsx(fn,{size:14})}),r.jsx("button",{className:"action-btn",title:"More Options",children:r.jsx(VI,{size:14})})]})})]},_.id)})})]})})]})]})]})},d5=({user:t,theme:e})=>{var K;const s=Lt(),{portfolioData:n,getTransactionHistory:i}=hs(),[a,o]=b.useState([]),[l,c]=b.useState(!0),[u,h]=b.useState(""),[d,f]=b.useState("all"),[y,p]=b.useState("all"),[w,g]=b.useState("all"),[m,x]=b.useState("date"),[S,N]=b.useState("desc"),[j,P]=b.useState(null),[E,T]=b.useState(!1),[R,M]=b.useState(!1),_=[{id:"txn_001",type:"buy",symbol:"RELIANCE",name:"Reliance Industries Ltd",quantity:10,price:2847.65,totalAmount:28476.5,fees:14.24,netAmount:28490.74,status:"completed",timestamp:new Date("2024-01-15T10:30:00"),orderId:"ORD_001",exchange:"NSE",sector:"Energy"},{id:"txn_002",type:"sell",symbol:"TCS",name:"Tata Consultancy Services",quantity:5,price:3892.4,totalAmount:19462,fees:9.73,netAmount:19452.27,status:"completed",timestamp:new Date("2024-01-14T14:45:00"),orderId:"ORD_002",exchange:"NSE",sector:"IT",gainLoss:1847.3,gainLossPercent:10.5},{id:"txn_003",type:"buy",symbol:"HDFC",name:"HDFC Bank Ltd",quantity:15,price:1734.85,totalAmount:26022.75,fees:13.01,netAmount:26035.76,status:"pending",timestamp:new Date("2024-01-13T09:15:00"),orderId:"ORD_003",exchange:"NSE",sector:"Banking"},{id:"txn_004",type:"buy",symbol:"INFY",name:"Infosys Ltd",quantity:8,price:1456.2,totalAmount:11649.6,fees:5.82,netAmount:11655.42,status:"completed",timestamp:new Date("2024-01-12T11:20:00"),orderId:"ORD_004",exchange:"NSE",sector:"IT"},{id:"txn_005",type:"sell",symbol:"WIPRO",name:"Wipro Ltd",quantity:20,price:432.85,totalAmount:8657,fees:4.33,netAmount:8652.67,status:"failed",timestamp:new Date("2024-01-11T16:30:00"),orderId:"ORD_005",exchange:"NSE",sector:"IT",gainLoss:-245.8,gainLossPercent:-2.8,failureReason:"Insufficient shares"}];b.useEffect(()=>{(async()=>{c(!0);try{setTimeout(()=>{o(_),c(!1)},1e3)}catch(V){console.error("Error loading transaction history:",V),X.error("Failed to load transaction history"),c(!1)}})()},[]);const O=b.useMemo(()=>{let D=[...a];if(u&&(D=D.filter(V=>V.symbol.toLowerCase().includes(u.toLowerCase())||V.name.toLowerCase().includes(u.toLowerCase())||V.orderId.toLowerCase().includes(u.toLowerCase()))),d!=="all"&&(D=D.filter(V=>V.type===d)),y!=="all"&&(D=D.filter(V=>V.status===y)),w!=="all"){const V=new Date,$=new Date;switch(w){case"today":$.setHours(0,0,0,0);break;case"week":$.setDate(V.getDate()-7);break;case"month":$.setMonth(V.getMonth()-1);break;case"year":$.setFullYear(V.getFullYear()-1);break}D=D.filter(Q=>Q.timestamp>=$)}return D.sort((V,$)=>{let Q,se;switch(m){case"date":Q=V.timestamp,se=$.timestamp;break;case"symbol":Q=V.symbol,se=$.symbol;break;case"amount":Q=V.totalAmount,se=$.totalAmount;break;case"quantity":Q=V.quantity,se=$.quantity;break;case"status":Q=V.status,se=$.status;break;default:Q=V.timestamp,se=$.timestamp}return Q instanceof Date&&se instanceof Date?S==="asc"?Q-se:se-Q:typeof Q=="string"?S==="asc"?Q.localeCompare(se):se.localeCompare(Q):S==="asc"?Q-se:se-Q}),D},[a,u,d,y,w,m,S]),A=b.useMemo(()=>{const D=O.length,V=O.filter(Y=>Y.status==="completed"),$=V.filter(Y=>Y.type==="buy"),Q=V.filter(Y=>Y.type==="sell"),se=$.reduce((Y,re)=>Y+re.totalAmount,0),ye=Q.reduce((Y,re)=>Y+re.totalAmount,0),q=V.reduce((Y,re)=>Y+(re.fees||0),0),W=Q.reduce((Y,re)=>Y+(re.gainLoss||0),0);return{totalTransactions:D,completedTransactions:V.length,buyTransactions:$.length,sellTransactions:Q.length,totalBuyAmount:se,totalSellAmount:ye,totalFees:q,totalGainLoss:W,successRate:D>0?V.length/D*100:0}},[O]),B=D=>{m===D?N(S==="asc"?"desc":"asc"):(x(D),N("desc"))},H=D=>{switch(D){case"completed":return r.jsx(Os,{className:"status-icon completed"});case"pending":return r.jsx(It,{className:"status-icon pending"});case"failed":return r.jsx(fn,{className:"status-icon failed"});default:return r.jsx(Dt,{className:"status-icon"})}},F=D=>D==="buy"?r.jsx(Oe,{className:"type-icon buy"}):r.jsx(lt,{className:"type-icon sell"});return l?r.jsx("div",{className:"history-page",children:r.jsx("div",{className:"history-container",children:r.jsxs("div",{className:"loading-container",children:[r.jsx("div",{className:"loading-spinner"}),r.jsx("p",{children:"Loading transaction history..."})]})})}):r.jsxs("div",{className:"history-page",children:[r.jsxs("div",{className:"history-header",children:[r.jsxs("div",{className:"header-content",children:[r.jsxs("div",{className:"header-left",children:[r.jsx("div",{className:"header-icon",children:r.jsx(Dt,{})}),r.jsxs("div",{className:"header-text",children:[r.jsx("h1",{children:"Transaction History"}),r.jsx("p",{children:"Track all your trading activities and portfolio changes"})]})]}),r.jsx("div",{className:"header-actions",children:r.jsxs("button",{className:`action-btn ${E?"active":""}`,onClick:()=>T(!E),children:[r.jsx(Ru,{}),"Filters"]})})]}),r.jsxs("div",{className:"stats-overview",children:[r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-icon",children:r.jsx(Ns,{})}),r.jsxs("div",{className:"stat-content",children:[r.jsx("div",{className:"stat-value",children:A.totalTransactions}),r.jsx("div",{className:"stat-label",children:"Total Transactions"})]})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-icon positive",children:r.jsx(Oe,{})}),r.jsxs("div",{className:"stat-content",children:[r.jsx("div",{className:"stat-value",children:Me(A.totalBuyAmount)}),r.jsx("div",{className:"stat-label",children:"Total Invested"})]})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-icon negative",children:r.jsx(lt,{})}),r.jsxs("div",{className:"stat-content",children:[r.jsx("div",{className:"stat-value",children:Me(A.totalSellAmount)}),r.jsx("div",{className:"stat-label",children:"Total Sold"})]})]}),r.jsxs("div",{className:"stat-card",children:[r.jsx("div",{className:"stat-icon",children:r.jsx($c,{})}),r.jsxs("div",{className:"stat-content",children:[r.jsxs("div",{className:"stat-value",children:[A.successRate.toFixed(1),"%"]}),r.jsx("div",{className:"stat-label",children:"Success Rate"})]})]})]})]}),r.jsxs("div",{className:"history-container",children:[r.jsx(Xe,{children:E&&r.jsx(U.div,{className:"filters-panel",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},children:r.jsxs("div",{className:"filters-content",children:[r.jsxs("div",{className:"filter-group",children:[r.jsx("label",{children:"Search"}),r.jsxs("div",{className:"search-wrapper",children:[r.jsx(Yr,{className:"search-icon"}),r.jsx("input",{type:"text",placeholder:"Search by symbol, name, or order ID...",value:u,onChange:D=>h(D.target.value),className:"search-input"}),u&&r.jsx("button",{className:"clear-search",onClick:()=>h(""),children:r.jsx(Bt,{})})]})]}),r.jsxs("div",{className:"filter-group",children:[r.jsx("label",{children:"Transaction Type"}),r.jsxs("select",{value:d,onChange:D=>f(D.target.value),className:"filter-select",children:[r.jsx("option",{value:"all",children:"All Types"}),r.jsx("option",{value:"buy",children:"Buy Orders"}),r.jsx("option",{value:"sell",children:"Sell Orders"})]})]}),r.jsxs("div",{className:"filter-group",children:[r.jsx("label",{children:"Status"}),r.jsxs("select",{value:y,onChange:D=>p(D.target.value),className:"filter-select",children:[r.jsx("option",{value:"all",children:"All Status"}),r.jsx("option",{value:"completed",children:"Completed"}),r.jsx("option",{value:"pending",children:"Pending"}),r.jsx("option",{value:"failed",children:"Failed"})]})]}),r.jsxs("div",{className:"filter-group",children:[r.jsx("label",{children:"Date Range"}),r.jsxs("select",{value:w,onChange:D=>g(D.target.value),className:"filter-select",children:[r.jsx("option",{value:"all",children:"All Time"}),r.jsx("option",{value:"today",children:"Today"}),r.jsx("option",{value:"week",children:"Last 7 Days"}),r.jsx("option",{value:"month",children:"Last Month"}),r.jsx("option",{value:"year",children:"Last Year"})]})]}),r.jsx("div",{className:"filter-actions",children:r.jsx("button",{className:"clear-filters-btn",onClick:()=>{h(""),f("all"),p("all"),g("all")},children:"Clear All"})})]})})}),r.jsx("div",{className:"transactions-section",children:O.length===0?r.jsxs("div",{className:"empty-state",children:[r.jsx("div",{className:"empty-icon",children:r.jsx(Dt,{})}),r.jsx("h3",{children:"No transactions found"}),r.jsx("p",{children:u||d!=="all"||y!=="all"||w!=="all"?"No transactions match your current filters":"Start trading to see your transaction history here"}),(u||d!=="all"||y!=="all"||w!=="all")&&r.jsx("button",{className:"clear-filters-btn",onClick:()=>{h(""),f("all"),p("all"),g("all")},children:"Clear Filters"})]}):r.jsxs("div",{className:"transactions-table",children:[r.jsx("div",{className:"table-header",children:r.jsxs("div",{className:"table-row header",children:[r.jsxs("div",{className:"col-date sortable",onClick:()=>B("date"),children:["Date & Time",m==="date"&&(S==="asc"?r.jsx(cr,{}):r.jsx(xi,{}))]}),r.jsxs("div",{className:"col-stock sortable",onClick:()=>B("symbol"),children:["Stock",m==="symbol"&&(S==="asc"?r.jsx(cr,{}):r.jsx(xi,{}))]}),r.jsx("div",{className:"col-type",children:"Type"}),r.jsxs("div",{className:"col-quantity sortable",onClick:()=>B("quantity"),children:["Quantity",m==="quantity"&&(S==="asc"?r.jsx(cr,{}):r.jsx(xi,{}))]}),r.jsx("div",{className:"col-price",children:"Price"}),r.jsxs("div",{className:"col-amount sortable",onClick:()=>B("amount"),children:["Total Amount",m==="amount"&&(S==="asc"?r.jsx(cr,{}):r.jsx(xi,{}))]}),r.jsx("div",{className:"col-gain-loss",children:"Gain/Loss"}),r.jsxs("div",{className:"col-status sortable",onClick:()=>B("status"),children:["Status",m==="status"&&(S==="asc"?r.jsx(cr,{}):r.jsx(xi,{}))]}),r.jsx("div",{className:"col-actions",children:"Actions"})]})}),r.jsx("div",{className:"table-body",children:O.map((D,V)=>{var $;return r.jsxs(U.div,{className:"table-row clickable",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3,delay:V*.05},onClick:()=>P(D),children:[r.jsx("div",{className:"col-date",children:r.jsxs("div",{className:"date-info",children:[r.jsx("span",{className:"date",children:md(D.timestamp,"MMM DD, YYYY")}),r.jsx("span",{className:"time",children:md(D.timestamp,"HH:mm")})]})}),r.jsx("div",{className:"col-stock",children:r.jsxs("div",{className:"stock-info",children:[r.jsx("span",{className:"symbol",children:D.symbol}),r.jsx("span",{className:"name",children:D.name}),r.jsx("span",{className:"exchange",children:D.exchange})]})}),r.jsx("div",{className:"col-type",children:r.jsxs("div",{className:`type-badge ${D.type}`,children:[F(D.type),r.jsx("span",{children:D.type.toUpperCase()})]})}),r.jsx("div",{className:"col-quantity",children:r.jsx("span",{className:"quantity",children:wm(D.quantity)})}),r.jsx("div",{className:"col-price",children:r.jsx("span",{className:"price",children:Me(D.price)})}),r.jsx("div",{className:"col-amount",children:r.jsxs("div",{className:"amount-info",children:[r.jsx("span",{className:"total",children:Me(D.totalAmount)}),r.jsxs("span",{className:"fees",children:["Fees: ",Me(D.fees||0)]})]})}),r.jsx("div",{className:"col-gain-loss",children:D.gainLoss!==void 0?r.jsxs("div",{className:`gain-loss ${D.gainLoss>=0?"positive":"negative"}`,children:[r.jsxs("span",{className:"amount",children:[D.gainLoss>=0?"+":"",Me(D.gainLoss)]}),r.jsxs("span",{className:"percent",children:["(",D.gainLoss>=0?"+":"",($=D.gainLossPercent)==null?void 0:$.toFixed(2),"%)"]})]}):r.jsx("span",{className:"no-data",children:"-"})}),r.jsx("div",{className:"col-status",children:r.jsxs("div",{className:`status-badge ${D.status}`,children:[H(D.status),r.jsx("span",{children:D.status})]})}),r.jsx("div",{className:"col-actions",children:r.jsx("button",{className:"action-btn-small",onClick:Q=>{Q.stopPropagation(),P(D)},title:"View Details",children:r.jsx(zi,{})})})]},D.id)})})]})})]}),r.jsx(Xe,{children:j&&r.jsx(U.div,{className:"modal-overlay",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:()=>P(null),children:r.jsxs(U.div,{className:"modal-content transaction-detail-modal",initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},onClick:D=>D.stopPropagation(),children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h3",{children:"Transaction Details"}),r.jsx("button",{className:"modal-close",onClick:()=>P(null),children:r.jsx(Bt,{})})]}),r.jsx("div",{className:"modal-body",children:r.jsxs("div",{className:"transaction-details",children:[r.jsxs("div",{className:"detail-section",children:[r.jsx("h4",{children:"Basic Information"}),r.jsxs("div",{className:"detail-grid",children:[r.jsxs("div",{className:"detail-item",children:[r.jsx("label",{children:"Transaction ID"}),r.jsx("span",{children:j.id})]}),r.jsxs("div",{className:"detail-item",children:[r.jsx("label",{children:"Order ID"}),r.jsx("span",{children:j.orderId})]}),r.jsxs("div",{className:"detail-item",children:[r.jsx("label",{children:"Date & Time"}),r.jsx("span",{children:md(j.timestamp,"MMM DD, YYYY HH:mm:ss")})]}),r.jsxs("div",{className:"detail-item",children:[r.jsx("label",{children:"Status"}),r.jsxs("div",{className:`status-badge ${j.status}`,children:[H(j.status),r.jsx("span",{children:j.status})]})]})]})]}),r.jsxs("div",{className:"detail-section",children:[r.jsx("h4",{children:"Stock Information"}),r.jsxs("div",{className:"detail-grid",children:[r.jsxs("div",{className:"detail-item",children:[r.jsx("label",{children:"Symbol"}),r.jsx("span",{children:j.symbol})]}),r.jsxs("div",{className:"detail-item",children:[r.jsx("label",{children:"Company Name"}),r.jsx("span",{children:j.name})]}),r.jsxs("div",{className:"detail-item",children:[r.jsx("label",{children:"Exchange"}),r.jsx("span",{children:j.exchange})]}),r.jsxs("div",{className:"detail-item",children:[r.jsx("label",{children:"Sector"}),r.jsx("span",{children:j.sector})]})]})]}),r.jsxs("div",{className:"detail-section",children:[r.jsx("h4",{children:"Transaction Details"}),r.jsxs("div",{className:"detail-grid",children:[r.jsxs("div",{className:"detail-item",children:[r.jsx("label",{children:"Type"}),r.jsxs("div",{className:`type-badge ${j.type}`,children:[F(j.type),r.jsx("span",{children:j.type.toUpperCase()})]})]}),r.jsxs("div",{className:"detail-item",children:[r.jsx("label",{children:"Quantity"}),r.jsxs("span",{children:[wm(j.quantity)," shares"]})]}),r.jsxs("div",{className:"detail-item",children:[r.jsx("label",{children:"Price per Share"}),r.jsx("span",{children:Me(j.price)})]}),r.jsxs("div",{className:"detail-item",children:[r.jsx("label",{children:"Total Amount"}),r.jsx("span",{children:Me(j.totalAmount)})]}),r.jsxs("div",{className:"detail-item",children:[r.jsx("label",{children:"Fees & Charges"}),r.jsx("span",{children:Me(j.fees||0)})]}),r.jsxs("div",{className:"detail-item",children:[r.jsx("label",{children:"Net Amount"}),r.jsx("span",{className:"net-amount",children:Me(j.netAmount)})]})]})]}),j.gainLoss!==void 0&&r.jsxs("div",{className:"detail-section",children:[r.jsx("h4",{children:"Performance"}),r.jsxs("div",{className:"detail-grid",children:[r.jsxs("div",{className:"detail-item",children:[r.jsx("label",{children:"Gain/Loss Amount"}),r.jsxs("span",{className:`gain-loss ${j.gainLoss>=0?"positive":"negative"}`,children:[j.gainLoss>=0?"+":"",Me(j.gainLoss)]})]}),r.jsxs("div",{className:"detail-item",children:[r.jsx("label",{children:"Gain/Loss Percentage"}),r.jsxs("span",{className:`gain-loss ${j.gainLoss>=0?"positive":"negative"}`,children:[j.gainLoss>=0?"+":"",(K=j.gainLossPercent)==null?void 0:K.toFixed(2),"%"]})]})]})]}),j.status==="failed"&&j.failureReason&&r.jsxs("div",{className:"detail-section",children:[r.jsx("h4",{children:"Failure Information"}),r.jsxs("div",{className:"failure-reason",children:[r.jsx(fn,{className:"failure-icon"}),r.jsx("span",{children:j.failureReason})]})]})]})}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{className:"btn secondary",onClick:()=>P(null),children:"Close"}),r.jsx("button",{className:"btn primary",onClick:()=>s(`/stock/${j.symbol}`),children:"View Stock"})]})]})})})]})},f5=({user:t,theme:e})=>{const[s,n]=b.useState("all"),[i,a]=b.useState(!1),[o,l]=b.useState([]),{query:c,setQuery:u,results:h,recentSearches:d,showHistory:f,handleHistoryClick:y,loading:p,clearSearch:w,hasResults:g}=iN({enableSuggestions:!1,enableHistory:!0,limit:30,debounceMs:500}),m=[{id:"all",name:"All News",count:45},{id:"market",name:"Market",count:12},{id:"stocks",name:"Stocks",count:8},{id:"economy",name:"Economy",count:10},{id:"policy",name:"Policy",count:6},{id:"earnings",name:"Earnings",count:9}],x=[{id:1,title:"Sensex Surges 500 Points as Banking Stocks Rally on RBI Policy Optimism",summary:"Indian benchmark indices closed higher on Tuesday as banking and financial stocks led the rally following positive sentiment around the upcoming RBI monetary policy meeting.",content:"The BSE Sensex gained 501.92 points to close at 65,953.48, while the NSE Nifty 50 advanced 145.30 points to end at 19,674.25. Banking stocks were the top performers with HDFC Bank, ICICI Bank, and Kotak Mahindra Bank leading the gains.",category:"market",source:"Economic Times",author:"Rajesh Kumar",publishedAt:"2024-01-15T10:30:00Z",imageUrl:"https://images.unsplash.com/photo-1611974789855-9c2a0a7236a3?w=400",readTime:"3 min read",tags:["Sensex","Banking","RBI","Market Rally"],isBookmarked:!1},{id:2,title:"Reliance Industries Reports Strong Q3 Results, Beats Estimates",summary:"Reliance Industries Ltd reported better-than-expected quarterly results driven by strong performance in its retail and digital services segments.",content:"The oil-to-telecom conglomerate posted a net profit of ₹18,549 crore for the quarter ended December 2023, up 8.5% year-on-year. Revenue from operations increased to ₹2.35 lakh crore.",category:"earnings",source:"Business Standard",author:"Priya Sharma",publishedAt:"2024-01-15T09:15:00Z",imageUrl:"https://images.unsplash.com/photo-1560472354-b33ff0c44a43?w=400",readTime:"4 min read",tags:["Reliance","Earnings","Q3 Results"],isBookmarked:!0},{id:3,title:"IT Stocks Under Pressure as US Fed Signals Hawkish Stance",summary:"Indian IT stocks declined in early trade as the US Federal Reserve indicated a more aggressive approach to interest rate hikes.",content:"TCS, Infosys, and Wipro were among the top losers as investors worried about the impact of higher interest rates on IT spending by US clients. The Nifty IT index fell 2.3%.",category:"stocks",source:"Mint",author:"Amit Verma",publishedAt:"2024-01-15T08:45:00Z",imageUrl:"https://images.unsplash.com/photo-1551288049-bebda4e38f71?w=400",readTime:"2 min read",tags:["IT Stocks","Fed Policy","TCS","Infosys"],isBookmarked:!1},{id:4,title:"Government Announces New PLI Scheme for Electronics Manufacturing",summary:"The government unveiled a new Production Linked Incentive scheme worth ₹76,000 crore to boost electronics manufacturing in India.",content:"The scheme aims to attract global electronics manufacturers and create employment opportunities. Companies like Apple, Samsung, and Foxconn are expected to benefit from this initiative.",category:"policy",source:"Financial Express",author:"Neha Gupta",publishedAt:"2024-01-15T07:30:00Z",imageUrl:"https://images.unsplash.com/photo-1518709268805-4e9042af2176?w=400",readTime:"5 min read",tags:["PLI Scheme","Electronics","Manufacturing","Policy"],isBookmarked:!1},{id:5,title:"Crude Oil Prices Rise on Middle East Tensions, OMCs in Focus",summary:"Oil marketing companies gained as crude oil prices surged due to escalating tensions in the Middle East region.",content:"Brent crude futures rose 2.5% to $85.40 per barrel. Indian Oil Corporation, BPCL, and HPCL were among the top gainers in the energy sector.",category:"market",source:"Reuters",author:"Global Desk",publishedAt:"2024-01-15T06:00:00Z",imageUrl:"https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=400",readTime:"3 min read",tags:["Crude Oil","OMCs","Energy Sector"],isBookmarked:!1},{id:6,title:"FII Inflows Continue as India Remains Attractive Investment Destination",summary:"Foreign institutional investors pumped in ₹12,500 crore into Indian equities last week, showing continued confidence in the market.",content:"The sustained FII inflows reflect positive sentiment towards Indian markets amid global uncertainties. Experts believe India's growth prospects remain strong.",category:"economy",source:"Moneycontrol",author:"Investment Desk",publishedAt:"2024-01-14T16:20:00Z",imageUrl:"https://images.unsplash.com/photo-1559526324-4b87b5e36e44?w=400",readTime:"4 min read",tags:["FII","Investment","Market Flows"],isBookmarked:!0}],S=async()=>{a(!0),await new Promise(T=>setTimeout(T,1500)),a(!1)},N=T=>{l(R=>R.includes(T)?R.filter(M=>M!==T):[...R,T])},j=T=>{navigator.share?navigator.share({title:T.title,text:T.summary,url:window.location.href}):navigator.clipboard.writeText(window.location.href)},P=T=>{const R=new Date,M=new Date(T),_=Math.floor((R-M)/(1e3*60*60));return _<1?"Just now":_<24?`${_}h ago`:`${Math.floor(_/24)}d ago`},E=x.filter(T=>{const R=T.title.toLowerCase().includes(c.toLowerCase())||T.summary.toLowerCase().includes(c.toLowerCase())||T.tags.some(_=>_.toLowerCase().includes(c.toLowerCase())),M=s==="all"||T.category===s;return R&&M});return r.jsxs("div",{className:"news-page",children:[r.jsx(sr,{icon:sg,title:"Market News",subtitle:"Stay updated with the latest market news and analysis from trusted sources",borderColor:"info",actions:[{label:"Refresh",icon:mt,onClick:S,variant:"secondary",disabled:i},{label:"Bookmarks",icon:_i,onClick:()=>{},variant:"primary"}]}),r.jsxs("div",{className:"news-container",children:[r.jsxs(U.div,{className:"news-controls",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},children:[r.jsxs("div",{className:"controls-left",children:[r.jsx("div",{className:"search-container",children:r.jsx(Uo,{placeholder:"Search news articles...",value:c,onChange:u,onClear:w,recentSearches:d,onHistoryClick:y,showHistory:f,loading:p,size:"md",showSuggestions:!1,enableHistory:!0,className:"news-search-input"})}),r.jsx("div",{className:"category-filter",children:m.map(T=>r.jsxs("button",{className:`category-btn ${s===T.id?"active":""}`,onClick:()=>n(T.id),children:[T.name,r.jsx("span",{className:"category-count",children:T.count})]},T.id))})]}),r.jsx("div",{className:"controls-right",children:r.jsxs("button",{className:"btn-premium btn-ghost",children:[r.jsx(Ru,{size:16}),"Filter"]})})]}),r.jsx(U.div,{className:"news-grid",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:E.map((T,R)=>r.jsxs(U.article,{className:"news-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.4,delay:R*.1},children:[r.jsxs("div",{className:"news-image",children:[r.jsx("img",{src:T.imageUrl,alt:T.title}),r.jsx("div",{className:"news-category",children:r.jsx("span",{className:`category-tag ${T.category}`,children:T.category.toUpperCase()})})]}),r.jsxs("div",{className:"news-content",children:[r.jsxs("div",{className:"news-meta",children:[r.jsxs("div",{className:"meta-left",children:[r.jsxs("span",{className:"news-source",children:[r.jsx(Is,{size:12}),T.source]}),r.jsxs("span",{className:"news-time",children:[r.jsx(Dt,{size:12}),P(T.publishedAt)]})]}),r.jsx("div",{className:"meta-right",children:r.jsx("span",{className:"read-time",children:T.readTime})})]}),r.jsx("h3",{className:"news-title",children:T.title}),r.jsx("p",{className:"news-summary",children:T.summary}),r.jsx("div",{className:"news-tags",children:T.tags.slice(0,3).map(M=>r.jsxs("span",{className:"news-tag",children:[r.jsx(KI,{size:10}),M]},M))}),r.jsxs("div",{className:"news-actions",children:[r.jsx("div",{className:"actions-left",children:r.jsxs("button",{className:"news-author",children:["By ",T.author]})}),r.jsxs("div",{className:"actions-right",children:[r.jsx("button",{className:`action-btn ${o.includes(T.id)||T.isBookmarked?"bookmarked":""}`,onClick:()=>N(T.id),title:"Bookmark",children:r.jsx(_i,{size:16})}),r.jsx("button",{className:"action-btn",onClick:()=>j(T),title:"Share",children:r.jsx(qI,{size:16})}),r.jsx("button",{className:"action-btn",title:"Read Full Article",children:r.jsx(_u,{size:16})})]})]})]})]},T.id))}),r.jsx(U.div,{className:"load-more-section",initial:{opacity:0},animate:{opacity:1},transition:{duration:.6,delay:.4},children:r.jsx("button",{className:"btn-premium btn-secondary btn-lg",children:"Load More Articles"})})]})]})},m5=({user:t,theme:e})=>{const[s,n]=b.useState(""),[i,a]=b.useState(new Set),[o,l]=b.useState(!1),[c,u]=b.useState(!1),{notifications:h,unreadCount:d,loading:f,error:y,filters:p,pagination:w,connectionStatus:g,fetchNotifications:m,markAsRead:x,markAllAsRead:S,deleteNotification:N,setFilters:j,loadMore:P}=Wu();b.useEffect(()=>{m()},[m]);const E=h.filter(B=>{if(s){const H=s.toLowerCase();if(!B.title.toLowerCase().includes(H)&&!B.message.toLowerCase().includes(H))return!1}return!(p.type!=="all"&&B.type!==p.type||p.read==="read"&&!B.read||p.read==="unread"&&B.read)}),T=B=>{const H=new Set(i);H.has(B)?H.delete(B):H.add(B),a(H)},R=()=>{i.size===E.length?a(new Set):a(new Set(E.map(B=>B.id)))},M=async()=>{const B=Array.from(i).map(H=>x(H));await Promise.all(B),a(new Set)},_=async()=>{const B=Array.from(i).map(H=>N(H));await Promise.all(B),a(new Set)},O=(B,H)=>{j({[B]:H})},A=()=>{m()};return r.jsxs("div",{className:"notifications-page",children:[r.jsx(sr,{icon:Li,title:"Notifications",subtitle:"OFFLINE",borderColor:"primary",showNotifications:!1,actions:[{label:"Refresh",icon:mt,onClick:A,variant:"secondary",disabled:f},{label:"Settings",icon:qr,onClick:()=>{},variant:"outline"}]}),r.jsxs("div",{className:"notifications-content",children:[r.jsx("div",{className:"notifications-actions",children:d>0&&r.jsxs(U.button,{className:"action-btn mark-all",onClick:S,whileHover:{scale:1.05},whileTap:{scale:.95},children:[r.jsx(Hr,{}),"Mark all read"]})}),r.jsxs("div",{className:"notifications-controls",children:[r.jsxs("div",{className:"search-container",children:[r.jsx(Yr,{className:"search-icon"}),r.jsx("input",{type:"text",placeholder:"Search notifications...",value:s,onChange:B=>n(B.target.value),className:"search-input"})]}),r.jsx(Xe,{children:o&&r.jsxs(U.div,{className:"filters-container",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},children:[r.jsxs("div",{className:"filter-group",children:[r.jsx("label",{children:"Type:"}),r.jsxs("select",{value:p.type,onChange:B=>O("type",B.target.value),children:[r.jsx("option",{value:"all",children:"All Types"}),r.jsx("option",{value:"info",children:"Info"}),r.jsx("option",{value:"success",children:"Success"}),r.jsx("option",{value:"warning",children:"Warning"}),r.jsx("option",{value:"error",children:"Error"}),r.jsx("option",{value:"alert",children:"Alert"})]})]}),r.jsxs("div",{className:"filter-group",children:[r.jsx("label",{children:"Status:"}),r.jsxs("select",{value:p.read,onChange:B=>O("read",B.target.value),children:[r.jsx("option",{value:"all",children:"All"}),r.jsx("option",{value:"unread",children:"Unread"}),r.jsx("option",{value:"read",children:"Read"})]})]})]})})]}),r.jsx(Xe,{children:i.size>0&&r.jsxs(U.div,{className:"bulk-actions",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},children:[r.jsxs("div",{className:"bulk-info",children:[r.jsx("input",{type:"checkbox",checked:i.size===E.length,onChange:R}),r.jsxs("span",{children:[i.size," selected"]})]}),r.jsxs("div",{className:"bulk-buttons",children:[r.jsxs("button",{onClick:M,children:[r.jsx(Hr,{})," Mark as read"]}),r.jsxs("button",{onClick:_,className:"danger",children:[r.jsx(XI,{})," Delete"]})]})]})}),r.jsx("div",{className:"notifications-list",children:y?r.jsxs("div",{className:"error-state",children:[r.jsx("h3",{children:"Failed to load notifications"}),r.jsx("p",{children:y}),r.jsx("button",{onClick:A,children:"Try again"})]}):E.length>0?r.jsxs(r.Fragment,{children:[E.map((B,H)=>r.jsxs(U.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:H*.05},className:"notification-wrapper",children:[c&&r.jsx("input",{type:"checkbox",checked:i.has(B.id),onChange:()=>T(B.id),className:"notification-checkbox"}),r.jsx(Kj,{notification:B,onClick:()=>x(B.id),onDelete:()=>N(B.id),onMarkAsRead:x,compact:!1,showActions:!0})]},B.id)),w.hasMore&&r.jsx("div",{className:"load-more-container",children:r.jsx(U.button,{className:"load-more-btn",onClick:P,disabled:f,whileHover:{scale:1.02},whileTap:{scale:.98},children:f?"Loading...":"Load More"})})]}):r.jsxs("div",{className:"empty-state",children:[r.jsx(Li,{size:48}),r.jsx("h3",{children:"No notifications found"}),r.jsx("p",{children:s||p.type!=="all"||p.read!=="all"?"Try adjusting your search or filters":"You're all caught up! New notifications will appear here."})]})})]})]})},p5=({user:t,theme:e})=>{const s=()=>{console.log("Toggle theme")},[n,i]=b.useState("profile"),[a,o]=b.useState(!1),[l,c]=b.useState(!1),u=[{id:"profile",name:"Profile",icon:Is},{id:"notifications",name:"Notifications",icon:Li},{id:"security",name:"Security",icon:Xn},{id:"preferences",name:"Preferences",icon:qr}],[h,d]=b.useState({firstName:"John",lastName:"Doe",email:"john.doe@example.com",phone:"+91 98765 43210",bio:"Passionate trader and investor",location:"Mumbai, India"}),[f,y]=b.useState({emailNotifications:!0,pushNotifications:!0,smsNotifications:!1,priceAlerts:!0,newsAlerts:!0,portfolioUpdates:!0,marketOpen:!1,weeklyReports:!0}),[p,w]=b.useState({twoFactorAuth:!1,loginAlerts:!0,sessionTimeout:"30",allowedDevices:3}),[g,m]=b.useState({theme:e,language:"en",currency:"INR",timezone:"Asia/Kolkata",dateFormat:"DD/MM/YYYY",numberFormat:"Indian",defaultPage:"dashboard"}),x=async()=>{o(!0),await new Promise(O=>setTimeout(O,1500)),o(!1)},S=(O,A)=>{d(B=>({...B,[O]:A}))},N=O=>{y(A=>({...A,[O]:!A[O]}))},j=(O,A)=>{w(B=>({...B,[O]:A}))},P=(O,A)=>{m(B=>({...B,[O]:A})),O==="theme"&&A!==e&&s()},E=()=>r.jsxs("div",{className:"settings-section",children:[r.jsx("h3",{className:"section-title",children:"Profile Information"}),r.jsxs("div",{className:"form-grid",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"First Name"}),r.jsx("input",{type:"text",className:"form-input",value:h.firstName,onChange:O=>S("firstName",O.target.value)})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Last Name"}),r.jsx("input",{type:"text",className:"form-input",value:h.lastName,onChange:O=>S("lastName",O.target.value)})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Email Address"}),r.jsx("input",{type:"email",className:"form-input",value:h.email,onChange:O=>S("email",O.target.value)})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Phone Number"}),r.jsx("input",{type:"tel",className:"form-input",value:h.phone,onChange:O=>S("phone",O.target.value)})]}),r.jsxs("div",{className:"form-group full-width",children:[r.jsx("label",{className:"form-label",children:"Bio"}),r.jsx("textarea",{className:"form-textarea",rows:"3",value:h.bio,onChange:O=>S("bio",O.target.value)})]}),r.jsxs("div",{className:"form-group full-width",children:[r.jsx("label",{className:"form-label",children:"Location"}),r.jsx("input",{type:"text",className:"form-input",value:h.location,onChange:O=>S("location",O.target.value)})]})]})]}),T=()=>r.jsxs("div",{className:"settings-section",children:[r.jsx("h3",{className:"section-title",children:"Notification Preferences"}),r.jsxs("div",{className:"notification-groups",children:[r.jsxs("div",{className:"notification-group",children:[r.jsx("h4",{className:"group-title",children:"Communication"}),r.jsxs("div",{className:"toggle-list",children:[r.jsxs("div",{className:"toggle-item",children:[r.jsxs("div",{className:"toggle-info",children:[r.jsx(Iu,{className:"toggle-icon"}),r.jsxs("div",{children:[r.jsx("div",{className:"toggle-label",children:"Email Notifications"}),r.jsx("div",{className:"toggle-description",children:"Receive updates via email"})]})]}),r.jsx("div",{className:`toggle-switch ${f.emailNotifications?"on":"off"}`,onClick:()=>N("emailNotifications"),children:r.jsx("div",{className:"toggle-thumb"})})]}),r.jsxs("div",{className:"toggle-item",children:[r.jsxs("div",{className:"toggle-info",children:[r.jsx(Li,{className:"toggle-icon"}),r.jsxs("div",{children:[r.jsx("div",{className:"toggle-label",children:"Push Notifications"}),r.jsx("div",{className:"toggle-description",children:"Browser push notifications"})]})]}),r.jsx("div",{className:`toggle-switch ${f.pushNotifications?"on":"off"}`,onClick:()=>N("pushNotifications"),children:r.jsx("div",{className:"toggle-thumb"})})]}),r.jsxs("div",{className:"toggle-item",children:[r.jsxs("div",{className:"toggle-info",children:[r.jsx(GI,{className:"toggle-icon"}),r.jsxs("div",{children:[r.jsx("div",{className:"toggle-label",children:"SMS Notifications"}),r.jsx("div",{className:"toggle-description",children:"Text message alerts"})]})]}),r.jsx("div",{className:`toggle-switch ${f.smsNotifications?"on":"off"}`,onClick:()=>N("smsNotifications"),children:r.jsx("div",{className:"toggle-thumb"})})]})]})]}),r.jsxs("div",{className:"notification-group",children:[r.jsx("h4",{className:"group-title",children:"Market Alerts"}),r.jsxs("div",{className:"toggle-list",children:[r.jsxs("div",{className:"toggle-item",children:[r.jsxs("div",{className:"toggle-info",children:[r.jsx(St,{className:"toggle-icon"}),r.jsxs("div",{children:[r.jsx("div",{className:"toggle-label",children:"Price Alerts"}),r.jsx("div",{className:"toggle-description",children:"Stock price movement alerts"})]})]}),r.jsx("div",{className:`toggle-switch ${f.priceAlerts?"on":"off"}`,onClick:()=>N("priceAlerts"),children:r.jsx("div",{className:"toggle-thumb"})})]}),r.jsxs("div",{className:"toggle-item",children:[r.jsxs("div",{className:"toggle-info",children:[r.jsx(sg,{className:"toggle-icon"}),r.jsxs("div",{children:[r.jsx("div",{className:"toggle-label",children:"News Alerts"}),r.jsx("div",{className:"toggle-description",children:"Market news and updates"})]})]}),r.jsx("div",{className:`toggle-switch ${f.newsAlerts?"on":"off"}`,onClick:()=>N("newsAlerts"),children:r.jsx("div",{className:"toggle-thumb"})})]}),r.jsxs("div",{className:"toggle-item",children:[r.jsxs("div",{className:"toggle-info",children:[r.jsx(Is,{className:"toggle-icon"}),r.jsxs("div",{children:[r.jsx("div",{className:"toggle-label",children:"Portfolio Updates"}),r.jsx("div",{className:"toggle-description",children:"Portfolio performance updates"})]})]}),r.jsx("div",{className:`toggle-switch ${f.portfolioUpdates?"on":"off"}`,onClick:()=>N("portfolioUpdates"),children:r.jsx("div",{className:"toggle-thumb"})})]})]})]})]})]}),R=()=>r.jsxs("div",{className:"settings-section",children:[r.jsx("h3",{className:"section-title",children:"Security & Privacy"}),r.jsxs("div",{className:"security-groups",children:[r.jsxs("div",{className:"security-group",children:[r.jsx("h4",{className:"group-title",children:"Authentication"}),r.jsxs("div",{className:"security-item",children:[r.jsxs("div",{className:"security-info",children:[r.jsx(Xn,{className:"security-icon"}),r.jsxs("div",{children:[r.jsx("div",{className:"security-label",children:"Two-Factor Authentication"}),r.jsx("div",{className:"security-description",children:"Add an extra layer of security"})]})]}),r.jsx("div",{className:`toggle-switch ${p.twoFactorAuth?"on":"off"}`,onClick:()=>j("twoFactorAuth",!p.twoFactorAuth),children:r.jsx("div",{className:"toggle-thumb"})})]}),r.jsxs("div",{className:"security-item",children:[r.jsxs("div",{className:"security-info",children:[r.jsx(Li,{className:"security-icon"}),r.jsxs("div",{children:[r.jsx("div",{className:"security-label",children:"Login Alerts"}),r.jsx("div",{className:"security-description",children:"Get notified of new logins"})]})]}),r.jsx("div",{className:`toggle-switch ${p.loginAlerts?"on":"off"}`,onClick:()=>j("loginAlerts",!p.loginAlerts),children:r.jsx("div",{className:"toggle-thumb"})})]})]}),r.jsxs("div",{className:"security-group",children:[r.jsx("h4",{className:"group-title",children:"Session Management"}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Session Timeout (minutes)"}),r.jsxs("select",{className:"form-select",value:p.sessionTimeout,onChange:O=>j("sessionTimeout",O.target.value),children:[r.jsx("option",{value:"15",children:"15 minutes"}),r.jsx("option",{value:"30",children:"30 minutes"}),r.jsx("option",{value:"60",children:"1 hour"}),r.jsx("option",{value:"120",children:"2 hours"}),r.jsx("option",{value:"0",children:"Never"})]})]})]}),r.jsxs("div",{className:"security-group",children:[r.jsx("h4",{className:"group-title",children:"Password"}),r.jsxs("div",{className:"password-section",children:[r.jsxs("button",{className:"btn-premium btn-secondary",children:[r.jsx(OI,{size:16}),"Change Password"]}),r.jsxs("button",{className:"btn-premium btn-ghost",children:[r.jsx(mt,{size:16}),"Reset All Sessions"]})]})]})]})]}),M=()=>r.jsxs("div",{className:"settings-section",children:[r.jsx("h3",{className:"section-title",children:"Application Preferences"}),r.jsxs("div",{className:"preferences-groups",children:[r.jsxs("div",{className:"preferences-group",children:[r.jsx("h4",{className:"group-title",children:"Appearance"}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Theme"}),r.jsxs("div",{className:"theme-selector",children:[r.jsxs("button",{className:`theme-option ${g.theme==="light"?"active":""}`,onClick:()=>P("theme","light"),children:[r.jsx(QI,{size:16}),"Light"]}),r.jsxs("button",{className:`theme-option ${g.theme==="dark"?"active":""}`,onClick:()=>P("theme","dark"),children:[r.jsx(zI,{size:16}),"Dark"]})]})]})]}),r.jsxs("div",{className:"preferences-group",children:[r.jsx("h4",{className:"group-title",children:"Localization"}),r.jsxs("div",{className:"form-grid",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Language"}),r.jsxs("select",{className:"form-select",value:g.language,onChange:O=>P("language",O.target.value),children:[r.jsx("option",{value:"en",children:"English"}),r.jsx("option",{value:"hi",children:"Hindi"}),r.jsx("option",{value:"mr",children:"Marathi"}),r.jsx("option",{value:"gu",children:"Gujarati"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Currency"}),r.jsxs("select",{className:"form-select",value:g.currency,onChange:O=>P("currency",O.target.value),children:[r.jsx("option",{value:"INR",children:"Indian Rupee (₹)"}),r.jsx("option",{value:"USD",children:"US Dollar ($)"}),r.jsx("option",{value:"EUR",children:"Euro (€)"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Timezone"}),r.jsxs("select",{className:"form-select",value:g.timezone,onChange:O=>P("timezone",O.target.value),children:[r.jsx("option",{value:"Asia/Kolkata",children:"Asia/Kolkata (IST)"}),r.jsx("option",{value:"America/New_York",children:"America/New_York (EST)"}),r.jsx("option",{value:"Europe/London",children:"Europe/London (GMT)"})]})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Date Format"}),r.jsxs("select",{className:"form-select",value:g.dateFormat,onChange:O=>P("dateFormat",O.target.value),children:[r.jsx("option",{value:"DD/MM/YYYY",children:"DD/MM/YYYY"}),r.jsx("option",{value:"MM/DD/YYYY",children:"MM/DD/YYYY"}),r.jsx("option",{value:"YYYY-MM-DD",children:"YYYY-MM-DD"})]})]})]})]}),r.jsxs("div",{className:"preferences-group",children:[r.jsx("h4",{className:"group-title",children:"Default Settings"}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Default Page"}),r.jsxs("select",{className:"form-select",value:g.defaultPage,onChange:O=>P("defaultPage",O.target.value),children:[r.jsx("option",{value:"dashboard",children:"Dashboard"}),r.jsx("option",{value:"portfolio",children:"Portfolio"}),r.jsx("option",{value:"trading",children:"Trading"}),r.jsx("option",{value:"watchlist",children:"Watchlist"})]})]})]})]})]}),_=()=>{switch(n){case"profile":return E();case"notifications":return T();case"security":return R();case"preferences":return M();default:return E()}};return r.jsxs("div",{className:"settings-page",children:[r.jsx(sr,{icon:qr,title:"Settings",subtitle:"Manage your account preferences and security settings",borderColor:"success",actions:[{label:a?"Saving...":"Save Changes",icon:a?mt:mj,onClick:x,variant:"primary",disabled:a}]}),r.jsx("div",{className:"settings-container",children:r.jsxs("div",{className:"settings-layout",children:[r.jsx(U.div,{className:"settings-tabs",initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.6,delay:.1},children:u.map(O=>{const A=O.icon;return r.jsxs("button",{className:`tab-button ${n===O.id?"active":""}`,onClick:()=>i(O.id),children:[r.jsx(A,{size:20}),O.name]},O.id)})}),r.jsx(U.div,{className:"settings-content",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:_()},n)]})})]})},g5=({user:t,onUpdateProfile:e,theme:s,toggleTheme:n,onLogout:i})=>{var S,N;const[a,o]=b.useState(!1),[l,c]=b.useState(!1),{portfolioData:u}=hs(),[h,d]=b.useState({firstName:"",lastName:"",email:"",phone:"",location:"",bio:"",joinDate:"",avatar:null});b.useEffect(()=>{if(t){const P=(t.fullName||t.name||"").split(" "),E=P[0]||"",T=P.slice(1).join(" ")||"";d({firstName:E,lastName:T,email:t.email||"",phone:t.phoneNumber||t.phone||"",location:t.location||"",bio:t.bio||"Welcome to TradeBro! Start your trading journey today.",joinDate:t.createdAt?new Date(t.createdAt).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],avatar:t.profilePicture||t.profileImage||t.avatar||null})}},[t]);const f=j=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(j),y=[{title:"Portfolio Value",value:f((u==null?void 0:u.totalValue)||0),change:u!=null&&u.totalGainLossPercentage?`${u.totalGainLossPercentage>=0?"+":""}${u.totalGainLossPercentage.toFixed(2)}%`:"0.00%",icon:St,color:((u==null?void 0:u.totalGainLoss)||0)>=0?"#10B981":"#EF4444"},{title:"Available Cash",value:f((u==null?void 0:u.availableCash)||0),change:"Available",icon:St,color:"#3B82F6"},{title:"Total Invested",value:f((u==null?void 0:u.totalInvested)||0),change:`${((S=u==null?void 0:u.holdings)==null?void 0:S.length)||0} holdings`,icon:Oe,color:"#F59E0B"},{title:"Total Transactions",value:((N=u==null?void 0:u.transactions)==null?void 0:N.length)||0,change:"Completed",icon:Ns,color:"#8B5CF6"}],p=[{title:"First Trade",description:"Completed your first trade",earned:!0},{title:"Profit Maker",description:"Made profit for 7 consecutive days",earned:!0},{title:"Risk Manager",description:"Maintained stop-loss on 50 trades",earned:!0},{title:"Market Expert",description:"Achieved 80% success rate",earned:!1},{title:"Portfolio Builder",description:"Diversified across 10+ sectors",earned:!1},{title:"Long Term Investor",description:"Held positions for 6+ months",earned:!1}],w=async()=>{c(!0);try{const j={...t,fullName:`${h.firstName} ${h.lastName}`.trim(),firstName:h.firstName,lastName:h.lastName,email:h.email,phoneNumber:h.phone,phone:h.phone,location:h.location,bio:h.bio};e&&await e(j),await new Promise(P=>setTimeout(P,1e3)),o(!1),c(!1)}catch(j){console.error("Error saving profile:",j),c(!1)}},g=()=>{d({firstName:(t==null?void 0:t.firstName)||"John",lastName:(t==null?void 0:t.lastName)||"Doe",email:(t==null?void 0:t.email)||"john.doe@example.com",phone:(t==null?void 0:t.phone)||"+91 98765 43210",location:(t==null?void 0:t.location)||"Mumbai, India",bio:(t==null?void 0:t.bio)||"Passionate trader and investor with 5+ years of experience in Indian markets.",joinDate:(t==null?void 0:t.joinDate)||"2023-01-15",avatar:(t==null?void 0:t.avatar)||null}),o(!1)},m=(j,P)=>{d(E=>({...E,[j]:P}))},x=j=>new Date(j).toLocaleDateString("en-IN",{year:"numeric",month:"long",day:"numeric"});return r.jsxs("div",{className:"profile-page",children:[r.jsx(sr,{icon:Is,title:"Profile",subtitle:"Manage your account information and trading preferences",borderColor:"purple",actions:a?[{label:"Cancel",icon:Is,onClick:g,variant:"secondary"},{label:l?"Saving...":"Save Changes",icon:mj,onClick:w,variant:"primary",disabled:l}]:[{label:"Edit Profile",icon:oj,onClick:()=>o(!0),variant:"primary"}]}),r.jsx("div",{className:"profile-container",children:r.jsxs("div",{className:"profile-layout",children:[r.jsxs(U.div,{className:"profile-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1},children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{className:"card-title",children:"Personal Information"})}),r.jsxs("div",{className:"card-content",children:[r.jsxs("div",{className:"profile-avatar-section",children:[r.jsxs("div",{className:"avatar-container",children:[r.jsxs("div",{className:"avatar",children:[h.avatar?r.jsx("img",{src:h.avatar,alt:`${h.firstName} ${h.lastName}`,onError:j=>{j.target.style.display="none",j.target.nextSibling.style.display="flex"}}):null,r.jsx("div",{className:"avatar-placeholder",style:{display:h.avatar?"none":"flex"},children:h.firstName?r.jsxs("span",{className:"avatar-initial",children:[h.firstName.charAt(0).toUpperCase(),h.lastName?h.lastName.charAt(0).toUpperCase():""]}):r.jsx(Is,{size:48})})]}),a&&r.jsx("button",{className:"avatar-edit-btn",children:r.jsx(LI,{size:16})})]}),r.jsxs("div",{className:"profile-basic-info",children:[r.jsxs("h2",{className:"profile-name",children:[h.firstName," ",h.lastName]}),r.jsx("p",{className:"profile-email",children:h.email}),r.jsx("div",{className:"profile-meta",children:r.jsxs("span",{className:"join-date",children:[r.jsx(rj,{size:14}),"Joined ",x(h.joinDate)]})})]})]}),r.jsx("div",{className:"profile-form",children:r.jsxs("div",{className:"form-grid",children:[r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"First Name"}),a?r.jsx("input",{type:"text",className:"form-input",value:h.firstName,onChange:j=>m("firstName",j.target.value)}):r.jsx("div",{className:"form-display",children:h.firstName})]}),r.jsxs("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Last Name"}),a?r.jsx("input",{type:"text",className:"form-input",value:h.lastName,onChange:j=>m("lastName",j.target.value)}):r.jsx("div",{className:"form-display",children:h.lastName})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{className:"form-label",children:[r.jsx(Iu,{size:16}),"Email Address"]}),a?r.jsx("input",{type:"email",className:"form-input",value:h.email,onChange:j=>m("email",j.target.value)}):r.jsx("div",{className:"form-display",children:h.email})]}),r.jsxs("div",{className:"form-group",children:[r.jsxs("label",{className:"form-label",children:[r.jsx(WI,{size:16}),"Phone Number"]}),a?r.jsx("input",{type:"tel",className:"form-input",value:h.phone,onChange:j=>m("phone",j.target.value)}):r.jsx("div",{className:"form-display",children:h.phone})]}),r.jsxs("div",{className:"form-group full-width",children:[r.jsxs("label",{className:"form-label",children:[r.jsx(FI,{size:16}),"Location"]}),a?r.jsx("input",{type:"text",className:"form-input",value:h.location,onChange:j=>m("location",j.target.value)}):r.jsx("div",{className:"form-display",children:h.location})]}),r.jsxs("div",{className:"form-group full-width",children:[r.jsx("label",{className:"form-label",children:"Bio"}),a?r.jsx("textarea",{className:"form-textarea",rows:"3",value:h.bio,onChange:j=>m("bio",j.target.value)}):r.jsx("div",{className:"form-display",children:h.bio})]})]})})]})]}),r.jsxs(U.div,{className:"stats-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:[r.jsx("div",{className:"card-header",children:r.jsxs("h3",{className:"card-title",children:[r.jsx(Oe,{className:"card-icon"}),"Trading Performance"]})}),r.jsx("div",{className:"card-content",children:r.jsx("div",{className:"stats-grid",children:y.map((j,P)=>{const E=j.icon;return r.jsxs("div",{className:"stat-item",children:[r.jsx("div",{className:"stat-icon",style:{color:j.color},children:r.jsx(E,{size:24})}),r.jsxs("div",{className:"stat-content",children:[r.jsx("div",{className:"stat-value",children:j.value}),r.jsx("div",{className:"stat-title",children:j.title}),r.jsx("div",{className:"stat-change",style:{color:j.color},children:j.change})]})]},j.title)})})})]}),r.jsxs(U.div,{className:"achievements-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},children:[r.jsx("div",{className:"card-header",children:r.jsxs("h3",{className:"card-title",children:[r.jsx(j0,{className:"card-icon"}),"Achievements"]})}),r.jsx("div",{className:"card-content",children:r.jsx("div",{className:"achievements-grid",children:p.map((j,P)=>r.jsxs("div",{className:`achievement-item ${j.earned?"earned":"locked"}`,children:[r.jsx("div",{className:"achievement-icon",children:r.jsx(j0,{size:20})}),r.jsxs("div",{className:"achievement-content",children:[r.jsx("h4",{className:"achievement-title",children:j.title}),r.jsx("p",{className:"achievement-description",children:j.description})]}),j.earned&&r.jsx("div",{className:"achievement-badge",children:r.jsx(Xn,{size:16})})]},j.title))})})]}),r.jsxs(U.div,{className:"actions-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},children:[r.jsx("div",{className:"card-header",children:r.jsx("h3",{className:"card-title",children:"Quick Actions"})}),r.jsx("div",{className:"card-content",children:r.jsxs("div",{className:"action-buttons",children:[r.jsxs("button",{className:"action-btn",children:[r.jsx(qr,{size:20}),r.jsx("span",{children:"Settings"})]}),r.jsxs("button",{className:"action-btn",children:[r.jsx(Xn,{size:20}),r.jsx("span",{children:"Security"})]}),r.jsxs("button",{className:"action-btn logout",onClick:i,children:[r.jsx(uj,{size:20}),r.jsx("span",{children:"Logout"})]})]})})]})]})})]})},y5=()=>{const[t,e]=b.useState([]),[s,n]=b.useState(""),[i,a]=b.useState(!1),[o,l]=b.useState(!1),[c,u]=b.useState(!1),[h,d]=b.useState(null),[f,y]=b.useState(null),[p,w]=b.useState("high"),[g,m]=b.useState(!0),[x,S]=b.useState("casual"),N=b.useRef(null),j=b.useRef(null),P=b.useRef(null);b.useEffect(()=>{T(),R(),M()},[]),b.useEffect(()=>{E()},[t]),b.useEffect(()=>()=>{if(P.current&&P.current.cancel(),j.current)try{j.current.stop()}catch{console.log("Recognition cleanup")}u(!1),l(!1)},[]),b.useEffect(()=>{!i&&o&&l(!1)},[i,o]);const E=()=>{var V;(V=N.current)==null||V.scrollIntoView({behavior:"smooth"})},T=()=>{const V={id:"welcome_"+Date.now(),type:"assistant",content:`🚀 Hello! I'm Saytrix, your AI-powered stock market assistant. I can help you with:

📊 Real-time stock prices and data
📈 Market analysis and trends
🏢 Company information and fundamentals
⭐ Top gainers and losers
📰 Latest market news
🎓 Stock market education

What would you like to know about the stock market today?

💡 Currently running in demo mode with sample data for showcase`,timestamp:new Date,suggestions:["Show me NIFTY performance","What are today's top gainers?","Tell me about RELIANCE stock","Latest market news"],confidence:"high",cardType:"welcome"};e([V]),d("offline_session_"+Date.now()),console.log("Saytrix initialized in offline demo mode")},R=()=>{if("webkitSpeechRecognition"in window||"SpeechRecognition"in window){const V=window.SpeechRecognition||window.webkitSpeechRecognition;j.current=new V,j.current.continuous=!1,j.current.interimResults=!1,j.current.lang="en-US",j.current.onstart=()=>{l(!0),y(null)},j.current.onresult=$=>{const Q=$.results[0][0].transcript,se=$.results[0][0].confidence;n(Q),w(se>.8?"high":se>.6?"medium":"low"),l(!1),setTimeout(()=>{Q.trim()&&_(Q)},300)},j.current.onerror=$=>{console.error("Speech recognition error:",$.error),l(!1),y("Voice recognition failed. Please try again.")},j.current.onend=()=>{l(!1)}}},M=()=>{"speechSynthesis"in window&&(P.current=window.speechSynthesis)},_=b.useCallback(async(V=s)=>{if(!V.trim()||i)return;const $={id:Date.now(),type:"user",content:V,timestamp:new Date,confidence:p};e(Q=>[...Q,$]),n(""),a(!0),y(null),l(!1);try{await new Promise(se=>setTimeout(se,1e3+Math.random()*1e3));const Q={id:Date.now()+1,type:"assistant",content:K(V),timestamp:new Date,confidence:"medium",cardType:F(V),suggestions:D(V)};e(se=>[...se,Q]),P.current&&Q.content&&O(Q.content)}catch(Q){console.error("Error in offline mode:",Q);const se={id:Date.now()+1,type:"assistant",content:"I apologize, but I'm having trouble processing your request right now. Please try again.",timestamp:new Date,confidence:"low",cardType:"error"};e(ye=>[...ye,se])}finally{a(!1)}},[s,h,i,p]),O=V=>{if(P.current&&V){u(!0);const $=V.replace(/\*\*(.*?)\*\*/g,"$1").replace(/\*(.*?)\*/g,"$1").replace(/₹/g,"rupees").replace(/[•]/g,"").replace(/\n+/g,". ").substring(0,200),Q=new SpeechSynthesisUtterance($);Q.rate=.9,Q.pitch=1,Q.volume=.8,Q.onend=()=>{u(!1)},Q.onerror=()=>{u(!1)},P.current.cancel(),P.current.speak(Q)}},A=b.useCallback(()=>{if(j.current&&!o)try{j.current.start(),setTimeout(()=>{if(j.current){try{j.current.stop()}catch{console.log("Auto-stop recognition")}l(!1)}},1e4)}catch(V){console.error("Failed to start voice recognition:",V),y("Voice recognition is not available."),l(!1)}},[o]),B=b.useCallback(()=>{if(j.current){try{j.current.stop()}catch{console.log("Recognition already stopped")}l(!1)}},[]),H=b.useCallback(()=>{e([]),y(null),T()},[]),F=V=>{const $=V.toLowerCase();return $.includes("price")||$.includes("quote")||$.includes("₹")?"stock-price":$.includes("chart")||$.includes("graph")||$.includes("technical")?"chart":$.includes("company")||$.includes("about")||$.includes("info")?"company-info":$.includes("buy")||$.includes("sell")||$.includes("recommend")?"recommendation":"text"},K=V=>{const $=V.toLowerCase();return $.includes("reliance")||$.includes("ril")?`**Reliance Industries (RELIANCE)**

**Current Price:** ₹2,465 *(demo data)*

**Company Overview:**
Reliance Industries is one of India's largest conglomerates with diversified business interests across multiple sectors.

**Key Business Segments:**
• Petrochemicals and Oil Refining
• Telecommunications (Jio)
• Retail (Reliance Retail)
• Digital Services

**Investment Highlights:**
• Strong market position in each segment
• Consistent dividend history
• Blue-chip investment with long-term growth potential
• Strategic focus on digital transformation

Would you like to explore its **fundamentals** or **recent performance** in detail?`:$.includes("tcs")?`**Tata Consultancy Services (TCS)**

**Current Price:** ₹3,185 *(demo data)*

**Company Profile:**
India's largest IT services company with a strong global presence and reputation for excellence.

**Key Strengths:**
• Market leader in IT services and consulting
• Consistent revenue growth and profitability
• Strong client relationships across industries
• Robust dividend track record

**Investment Appeal:**
• Stability in volatile markets
• Growth prospects in digital transformation
• Strong balance sheet and cash flows
• Popular choice for long-term investors`:$.includes("nifty")||$.includes("sensex")?`**Market Indices Overview**

**Current Levels:** *(demo data)*
• NIFTY 50: ~19,750
• SENSEX: ~66,500

**Market Performance:**
Both indices have shown **resilience** despite global uncertainties and continue to attract investor interest.

**Key Driving Sectors:**
• Banking and Financial Services
• Information Technology
• Consumer Goods and FMCG

**Market Sentiment:**
*Cautiously optimistic* with focus on domestic consumption and policy support measures.`:$.includes("portfolio")?`**Portfolio Analysis** *(demo data)*

**Current Allocation:**
• Large Cap: 40%
• Mid Cap: 30%
• Small Cap: 20%
• Bonds: 10%

**Portfolio Metrics:**
• **Total Value:** ₹2,84,765
• **Overall Gain:** +12.5%
• **Risk Level:** Moderate

**Recommendations:**
1. **Rebalance** if any sector exceeds 25% allocation
2. **Review** small cap exposure for risk management
3. **Consider** adding defensive stocks for stability

Would you like **specific recommendations** for optimization?`:$.includes("news")||$.includes("market")?`**Today's Market Highlights** *(demo data)*

**Sector Performance:**
• **Banking:** Rally on RBI policy optimism
• **IT Sector:** Facing headwinds from global slowdown
• **Auto Sector:** Mixed signals with EV adoption trends

**Investment Flows:**
• **FII Activity:** Cautious approach continues
• **DII Buying:** Strong domestic institutional support

**Overall Trend:**
Market sentiment remains **cautiously optimistic** with focus on domestic growth drivers.`:$.includes("buy")||$.includes("sell")?`**Trading Recommendations** *(demo analysis)*

**BUY Recommendations:**
• **Banking Stocks** - Policy support and credit growth
• **Infrastructure** - Government capex focus

**HOLD Positions:**
• **IT Stocks** - Long-term digital transformation play
• **FMCG** - Defensive characteristics

**SELL/REDUCE:**
• **Overvalued Small Caps** - Risk management
• **Cyclical Stocks** - Economic uncertainty

**Important Disclaimer:**
*Always conduct your own research and consider your risk tolerance. This is for educational purposes only.*`:$.includes("gainers")||$.includes("top")?`**Market Movers Today** *(demo data)*

**Top Gainers:**
• HDFCBANK: +3.2%
• ICICIBANK: +2.8%
• BAJFINANCE: +2.5%

**Top Losers:**
• TECHM: -2.1%
• WIPRO: -1.8%
• INFY: -1.2%

**Sector Trends:**
• **Banking Sector:** Outperforming on policy optimism
• **IT Sector:** Under pressure from global concerns

The **banking rally** is driving overall market sentiment today.`:`**Welcome to Saytrix!** 🚀

I'm your AI-powered trading assistant here to help you navigate the Indian stock markets with confidence.

What I Can Help You With:
• Stock Analysis - Detailed company research and insights
• Market Insights - Real-time market trends and news
• Portfolio Management - Optimization and risk analysis
• Trading Strategies - Data-driven investment recommendations

Quick Start Commands:
• "Tell me about Reliance"
• "Show me top gainers today"
• "Analyze my portfolio"
• "What's the market sentiment?"

Note: Currently displaying demo data for illustration purposes.

Ready to start your trading journey? Ask me anything about the markets!`},D=V=>{const $=V.toLowerCase();return $.includes("reliance")||$.includes("ril")?["Tell me about TCS","Show HDFC Bank info","Compare IT stocks"]:$.includes("nifty")||$.includes("sensex")?["Top gainers today","Banking stocks","IT sector performance"]:$.includes("portfolio")?["Risk analysis","Sector allocation","Diversification tips"]:["Market overview","Top stocks","Sector analysis","Trading tips"]};return{messages:t,inputText:s,isProcessing:i,isListening:o,isSpeaking:c,error:f,confidence:p,onlyIndianStocks:g,aiMode:x,messagesEndRef:N,setInputText:n,sendMessage:_,startListening:A,stopListening:B,clearChat:H,setOnlyIndianStocks:m,setAiMode:S,setError:y}},v5=({stockData:t,onBuyClick:e,onSellClick:s})=>{const n=t.change>=0,a=n?Oe:lt;return r.jsxs(U.div,{className:"saytrix-card stock-price-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[r.jsxs("div",{className:"card-header",children:[r.jsxs("div",{className:"stock-symbol",children:[r.jsx(St,{className:"symbol-icon"}),r.jsx("span",{children:t.symbol})]}),r.jsxs("div",{className:`stock-change ${n?"positive":"negative"}`,children:[r.jsx(a,{size:16}),r.jsxs("span",{children:[t.changePercent,"%"]})]})]}),r.jsxs("div",{className:"card-content",children:[r.jsxs("div",{className:"stock-price",children:[r.jsx("span",{className:"currency",children:"₹"}),r.jsx("span",{className:"price",children:t.price})]}),r.jsxs("div",{className:"stock-details",children:[r.jsxs("div",{className:"detail-item",children:[r.jsx("span",{className:"label",children:"Change:"}),r.jsxs("span",{className:`value ${n?"positive":"negative"}`,children:["₹",Math.abs(t.change)]})]}),r.jsxs("div",{className:"detail-item",children:[r.jsx("span",{className:"label",children:"Volume:"}),r.jsx("span",{className:"value",children:t.volume||"N/A"})]})]})]}),r.jsxs("div",{className:"card-actions",children:[r.jsxs("button",{className:"action-btn buy-btn",onClick:()=>e(t),children:[r.jsx(So,{size:16}),"Buy Stock"]}),r.jsxs("button",{className:"action-btn sell-btn",onClick:()=>s(t),children:[r.jsx(Wr,{size:16}),"Sell Stock"]})]})]})},x5=({companyData:t})=>r.jsxs(U.div,{className:"saytrix-card company-info-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[r.jsxs("div",{className:"card-header",children:[r.jsxs("div",{className:"company-name",children:[r.jsx(lj,{className:"company-icon"}),r.jsx("span",{children:t.name})]}),r.jsx("div",{className:"company-sector",children:t.sector})]}),r.jsxs("div",{className:"card-content",children:[r.jsxs("div",{className:"company-metrics",children:[r.jsxs("div",{className:"metric-item",children:[r.jsx("span",{className:"metric-label",children:"Market Cap"}),r.jsxs("span",{className:"metric-value",children:["₹",t.marketCap]})]}),r.jsxs("div",{className:"metric-item",children:[r.jsx("span",{className:"metric-label",children:"P/E Ratio"}),r.jsx("span",{className:"metric-value",children:t.peRatio})]}),r.jsxs("div",{className:"metric-item",children:[r.jsx("span",{className:"metric-label",children:"52W High"}),r.jsxs("span",{className:"metric-value",children:["₹",t.high52w]})]}),r.jsxs("div",{className:"metric-item",children:[r.jsx("span",{className:"metric-label",children:"52W Low"}),r.jsxs("span",{className:"metric-value",children:["₹",t.low52w]})]})]}),t.description&&r.jsx("div",{className:"company-description",children:r.jsx("p",{children:t.description})})]})]}),w5=({chartData:t,symbol:e})=>r.jsxs(U.div,{className:"saytrix-card chart-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[r.jsxs("div",{className:"card-header",children:[r.jsxs("div",{className:"chart-title",children:[r.jsx(Ot,{className:"chart-icon"}),r.jsxs("span",{children:[e," Price Chart"]})]}),r.jsx("div",{className:"chart-period",children:t.period||"1D"})]}),r.jsx("div",{className:"card-content",children:r.jsx("div",{className:"chart-container",children:r.jsxs("div",{className:"chart-placeholder",children:[r.jsx(Ot,{size:48}),r.jsx("p",{children:"Chart will be rendered here"}),r.jsx("small",{children:"Integration with TradingView Lightweight Charts"})]})})})]}),Bx=({alertData:t,onDismiss:e})=>{const n=(i=>{switch(i){case"success":return Os;case"error":return fn;case"warning":return Kn;default:return Mu}})(t.type);return r.jsxs(U.div,{className:`saytrix-card alert-card alert-${t.type}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[r.jsxs("div",{className:"card-header",children:[r.jsxs("div",{className:"alert-title",children:[r.jsx(n,{className:"alert-icon"}),r.jsx("span",{children:t.title})]}),e&&r.jsx("button",{className:"dismiss-btn",onClick:e,children:r.jsx(fn,{size:16})})]}),r.jsxs("div",{className:"card-content",children:[r.jsx("p",{className:"alert-message",children:t.message}),t.action&&r.jsx("button",{className:"alert-action-btn",onClick:t.action.onClick,children:t.action.label})]})]})},S5=({recommendation:t,onBuyClick:e,onSellClick:s})=>{const i=t.type==="buy"?Oe:lt;return r.jsxs(U.div,{className:`saytrix-card recommendation-card recommendation-${t.type}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:[r.jsxs("div",{className:"card-header",children:[r.jsxs("div",{className:"recommendation-title",children:[r.jsx(i,{className:"recommendation-icon"}),r.jsxs("span",{children:[t.type.toUpperCase()," Recommendation"]})]}),r.jsxs("div",{className:"confidence-badge",children:[t.confidence," Confidence"]})]}),r.jsxs("div",{className:"card-content",children:[r.jsxs("div",{className:"recommendation-stock",children:[r.jsx("span",{className:"stock-symbol",children:t.symbol}),r.jsxs("span",{className:"target-price",children:["Target: ₹",t.targetPrice]})]}),r.jsx("p",{className:"recommendation-reason",children:t.reason}),t.metrics&&r.jsx("div",{className:"recommendation-metrics",children:t.metrics.map((a,o)=>r.jsxs("div",{className:"metric-item",children:[r.jsxs("span",{className:"metric-label",children:[a.label,":"]}),r.jsx("span",{className:"metric-value",children:a.value})]},o))})]}),r.jsx("div",{className:"card-actions",children:t.type==="buy"?r.jsxs("button",{className:"action-btn buy-btn",onClick:()=>e(t),children:[r.jsx(Tt,{size:16}),"Buy Now"]}):r.jsxs("button",{className:"action-btn sell-btn",onClick:()=>s(t),children:[r.jsx(Wr,{size:16}),"Sell Now"]})})]})},b5=({message:t,suggestions:e,onSuggestionClick:s})=>r.jsx(U.div,{className:"saytrix-card welcome-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:r.jsxs("div",{className:"card-content",children:[r.jsx("div",{className:"welcome-message",children:r.jsx("p",{children:t})}),e&&e.length>0&&r.jsxs("div",{className:"welcome-suggestions",children:[r.jsx("h4",{children:"Quick Actions:"}),r.jsx("div",{className:"suggestion-chips",children:e.map((n,i)=>r.jsx("button",{className:"suggestion-chip",onClick:()=>s(n),children:n},i))})]})]})}),j5=({content:t,suggestions:e,onSuggestionClick:s})=>{const n=i=>i?i.split(`

`).filter(o=>o.trim()).map((o,l)=>{const c=o.split(`
`).filter(u=>u.trim());return r.jsx("div",{className:"text-paragraph",children:c.map((u,h)=>{const d=u.trim();if(d.endsWith(":")&&!d.startsWith("•")&&!d.startsWith("-"))return r.jsx("h4",{className:"text-header",children:d.replace(":","")},h);if(d.startsWith("•")||d.startsWith("-"))return r.jsxs("div",{className:"text-bullet",children:[r.jsx("span",{className:"bullet-icon",children:"•"}),r.jsx("span",{className:"bullet-text",children:d.replace(/^[•-]\s*/,"")})]},h);if(/^\d+\./.test(d)){const y=d.match(/^(\d+)\.\s*(.+)/);if(y)return r.jsxs("div",{className:"text-step",children:[r.jsx("span",{className:"step-number",children:y[1]}),r.jsx("span",{className:"step-text",children:y[2]})]},h)}const f=y=>y.replace(/\*\*(.*?)\*\*/g,"<strong>$1</strong>").replace(/__(.*?)__/g,"<strong>$1</strong>").replace(/\*(.*?)\*/g,"<em>$1</em>").replace(/_(.*?)_/g,"<em>$1</em>");return d?r.jsx("p",{className:"text-line",dangerouslySetInnerHTML:{__html:f(d)}},h):null})},l)}):null;return r.jsx(U.div,{className:"saytrix-card text-card",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},children:r.jsxs("div",{className:"card-content",children:[r.jsx("div",{className:"text-content",children:n(t)}),e&&e.length>0&&r.jsxs("div",{className:"text-suggestions",children:[r.jsx("h5",{className:"suggestions-title",children:"Quick Actions"}),r.jsx("div",{className:"suggestion-chips",children:e.map((i,a)=>r.jsx(U.button,{className:"suggestion-chip",onClick:()=>s(i),whileHover:{scale:1.02},whileTap:{scale:.98},children:i},a))})]})]})})},N5=({message:t,onSuggestionClick:e,onBuyClick:s,onSellClick:n,onAlertDismiss:i})=>{const{cardType:a,content:o,stockData:l,suggestions:c,confidence:u}=t;switch(a){case"stock-price":return r.jsx(v5,{stockData:l,onBuyClick:s,onSellClick:n});case"company-info":return r.jsx(x5,{companyData:l.company});case"chart":return r.jsx(w5,{chartData:l.chart,symbol:l.symbol});case"alert":return r.jsx(Bx,{alertData:{type:t.alertType||"info",title:t.alertTitle||"Notification",message:o,action:t.alertAction},onDismiss:i});case"recommendation":return r.jsx(S5,{recommendation:{type:t.recommendationType||"buy",symbol:(l==null?void 0:l.symbol)||"N/A",targetPrice:(l==null?void 0:l.targetPrice)||"N/A",reason:o,confidence:u,metrics:l==null?void 0:l.metrics},onBuyClick:s,onSellClick:n});case"welcome":return r.jsx(b5,{message:o,suggestions:c,onSuggestionClick:e});case"error":return r.jsx(Bx,{alertData:{type:"error",title:"Error",message:o},onDismiss:i});default:return r.jsx(j5,{content:o,suggestions:c,onSuggestionClick:e})}},k5=({user:t,theme:e})=>{const[s,n]=b.useState(!0),[i]=b.useState(["Show me NIFTY performance","What are today's top gainers?","Tell me about RELIANCE stock","Latest market news","Portfolio analysis"]),{messages:a,inputText:o,isProcessing:l,isListening:c,isSpeaking:u,error:h,aiMode:d,messagesEndRef:f,setInputText:y,sendMessage:p,startListening:w,stopListening:g,setAiMode:m,setError:x}=y5(),S=b.useCallback(()=>{c?g():w()},[c,w,g]),N=b.useCallback(()=>{p()},[p]),j=b.useCallback(_=>{_.key==="Enter"&&!_.shiftKey&&(_.preventDefault(),N())},[N]),P=b.useCallback(_=>{y(_)},[y]),E=b.useCallback(_=>{y(_),p(_)},[y,p]),T=b.useCallback(_=>{console.log("Buy stock:",_)},[]),R=b.useCallback(_=>{console.log("Sell stock:",_)},[]),M=b.useCallback(_=>{console.log("Dismiss alert:",_)},[]);return r.jsxs("div",{className:"saytrix-page",children:[r.jsxs("div",{className:"saytrix-navbar",children:[r.jsx("div",{className:"navbar-left",children:r.jsxs("div",{className:"tradebro-brand",children:[r.jsx(gj,{className:"brand-icon"}),r.jsx("span",{className:"brand-text",children:"TradeBro"})]})}),r.jsx("div",{className:"navbar-center",children:r.jsxs("div",{className:"ai-mode-toggle",children:[r.jsx("button",{className:`mode-btn ${d==="casual"?"active":""}`,onClick:()=>m("casual"),children:"Casual"}),r.jsx("button",{className:`mode-btn ${d==="expert"?"active":""}`,onClick:()=>m("expert"),children:"Expert"})]})}),r.jsx("div",{className:"navbar-right",children:r.jsxs("button",{className:"profile-btn",children:[r.jsx(Is,{}),r.jsx("span",{children:(t==null?void 0:t.name)||"User"})]})})]}),r.jsxs("div",{className:"saytrix-container",children:[r.jsx("div",{className:"saytrix-layout",children:r.jsxs("div",{className:"saytrix-main",children:[a.length<=1&&r.jsxs(U.div,{className:"recent-questions",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[r.jsx("h3",{children:"Recent Questions"}),r.jsx("div",{className:"question-chips",children:i.map((_,O)=>r.jsx(U.button,{className:"question-chip",onClick:()=>E(_),whileHover:{scale:1.02},whileTap:{scale:.98},children:_},O))})]}),r.jsxs("div",{className:"messages-container",children:[r.jsx(Xe,{children:a.map(_=>r.jsxs(U.div,{className:`message-wrapper ${_.type}`,initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:[r.jsx("div",{className:"message-avatar",children:_.type==="user"?r.jsx(Is,{size:20}):r.jsx(N0,{size:20})}),r.jsx("div",{className:"message-content",children:_.type==="user"?r.jsxs("div",{className:"user-message",children:[r.jsx("p",{children:_.content}),r.jsxs("div",{className:"message-meta",children:[r.jsx("span",{className:"message-time",children:_.timestamp.toLocaleTimeString("en-IN",{hour:"2-digit",minute:"2-digit"})}),_.confidence&&r.jsxs("span",{className:`confidence-badge ${_.confidence}`,children:[_.confidence," confidence"]})]})]}):r.jsx(N5,{message:_,onSuggestionClick:P,onBuyClick:T,onSellClick:R,onAlertDismiss:M})})]},_.id))}),l&&r.jsxs(U.div,{className:"message-wrapper assistant processing",initial:{opacity:0,y:20},animate:{opacity:1,y:0},children:[r.jsx("div",{className:"message-avatar",children:r.jsx(N0,{size:20})}),r.jsx("div",{className:"message-content",children:r.jsxs("div",{className:"typing-indicator",children:[r.jsx("span",{}),r.jsx("span",{}),r.jsx("span",{})]})})]}),r.jsx("div",{ref:f})]}),h&&r.jsxs(U.div,{className:"error-banner",initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},children:[r.jsx(Kn,{size:16}),r.jsx("span",{children:h}),r.jsx("button",{onClick:()=>x(null),children:r.jsx(FiX,{size:16})})]})]})}),r.jsxs(U.div,{className:"floating-input",initial:{opacity:0,y:50},animate:{opacity:1,y:0},transition:{duration:.5,delay:.3},children:[r.jsxs("div",{className:"input-container",children:[r.jsx("button",{className:`voice-btn ${c?"listening":""}`,onClick:S,title:c?"Stop listening":"Start voice input",children:r.jsx(Xe,{mode:"wait",children:c?r.jsx(U.div,{initial:{scale:1},animate:{scale:[1,1.2,1]},exit:{scale:1},transition:{duration:1,repeat:1/0},children:r.jsx(Au,{size:20})},"listening"):r.jsx(U.div,{initial:{scale:1},animate:{scale:1},exit:{scale:1},children:r.jsx(dj,{size:20})},"not-listening")})}),r.jsx("input",{type:"text",className:"message-input",placeholder:"Ask Saytrix about stocks, portfolio, or market trends...",value:o,onChange:_=>y(_.target.value),onKeyPress:j}),r.jsx("button",{className:"send-btn",onClick:N,disabled:!o.trim()||l,title:"Send message",children:l?r.jsx(mt,{size:20,className:"animate-spin"}):r.jsx(YI,{size:20})})]}),r.jsxs(Xe,{children:[c&&r.jsxs(U.div,{className:"voice-indicator listening",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},transition:{duration:.2},children:[r.jsxs("div",{className:"listening-animation",children:[r.jsx("div",{className:"wave"}),r.jsx("div",{className:"wave"}),r.jsx("div",{className:"wave"})]}),r.jsx("span",{children:"Listening... Speak now"})]}),u&&r.jsxs(U.div,{className:"voice-indicator speaking",initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:20},transition:{duration:.2},children:[r.jsx(pj,{size:16}),r.jsx("span",{children:"Saytrix is speaking..."})]})]})]})]})]})},C5=()=>{const{symbol:t}=KT(),e=Lt(),{portfolioData:s,buyStock:n,isLoading:i}=hs(),{user:a}=tr(),[o,l]=b.useState(null),[c,u]=b.useState(!0),[h,d]=b.useState(null),[f,y]=b.useState(1),[p,w]=b.useState(!1),[g,m]=b.useState(0),[x,S]=b.useState(!1),[N,j]=b.useState(!1),[P,E]=b.useState(!1);b.useEffect(()=>{t&&T()},[t]);const T=async()=>{try{u(!0),d(null);const H={symbol:t.toUpperCase(),name:`${t.toUpperCase()} Corporation`,price:2500+Math.random()*1e3,change:(Math.random()-.5)*100,changePercent:(Math.random()-.5)*10,volume:Math.floor(Math.random()*1e6)+1e5,marketCap:Math.floor(Math.random()*1e11)+1e10,pe:Math.floor(Math.random()*30)+10,high52w:3500,low52w:1800,dayHigh:2600,dayLow:2400,avgVolume:5e5,beta:1.2,eps:125.5,dividend:2.5,sector:"Technology",industry:"Software",description:`${t.toUpperCase()} Corporation is a leading technology company specializing in innovative software solutions and digital transformation services.`,lastUpdated:new Date().toISOString()};H.changePercent=H.change/(H.price-H.change)*100,l(H)}catch(H){d("Failed to fetch stock data"),console.error("Error fetching stock data:",H)}finally{u(!1)}},R=async()=>{E(!0),await T(),E(!1),X.success("Stock data refreshed")},M=H=>{if(!A||x)return;H.preventDefault(),H.stopPropagation();const F=H.currentTarget.closest(".slide-to-buy");if(!F)return;const K=F.getBoundingClientRect(),D=52,V=K.width-D-8;let $=!0;const Q=ye=>{if(!$)return;ye.preventDefault();const W=(ye.touches?ye.touches[0].clientX:ye.clientX)-K.left-D/2,Y=Math.min(Math.max(W/V*100,0),100);m(Y)},se=async()=>{$=!1,g>80?(m(100),await _()):m(0),document.removeEventListener("mousemove",Q,{passive:!1}),document.removeEventListener("mouseup",se),document.removeEventListener("touchmove",Q,{passive:!1}),document.removeEventListener("touchend",se)};document.addEventListener("mousemove",Q,{passive:!1}),document.addEventListener("mouseup",se),document.addEventListener("touchmove",Q,{passive:!1}),document.addEventListener("touchend",se)},_=async()=>{if(!(!o||!f||x)){S(!0);try{const H=await n(o.symbol,f,o.price,o);H.success?(X.success(`Successfully bought ${f} shares of ${o.symbol}!`),m(100),setTimeout(()=>{e("/portfolio",{state:{purchasedStock:{symbol:o.symbol,name:o.name,quantity:f,price:o.price,totalCost:f*o.price},showPurchaseSuccess:!0}})},1500)):(X.error(H.message||"Failed to buy stock"),m(0))}catch(H){console.error("Error buying stock:",H),X.error("Failed to buy stock"),m(0)}finally{S(!1)}}};if(c)return r.jsxs("div",{className:"stock-detail-loading",children:[r.jsx("div",{className:"loading-spinner"}),r.jsx("p",{children:"Loading stock details..."})]});if(h||!o)return r.jsxs("div",{className:"stock-detail-error",children:[r.jsx(It,{size:48}),r.jsx("h2",{children:"Error Loading Stock"}),r.jsx("p",{children:h||"Stock not found"}),r.jsx("button",{onClick:()=>e(-1),className:"back-btn",children:"Go Back"})]});const O=f*o.price,A=s.availableCash>=O,B=o.change>=0;return r.jsxs("div",{className:"stock-detail-page",children:[r.jsxs("div",{className:"stock-detail-header",children:[r.jsx("button",{onClick:()=>e(-1),className:"back-button",children:r.jsx(Lu,{})}),r.jsxs("div",{className:"header-info",children:[r.jsx("h1",{children:o.symbol}),r.jsx("p",{children:o.name})]}),r.jsxs("div",{className:"header-actions",children:[r.jsx("button",{onClick:R,className:`refresh-btn ${P?"spinning":""}`,disabled:P,children:r.jsx(mt,{})}),r.jsx(Jn,{stockData:o,size:"small",variant:"icon",showText:!1})]})]}),r.jsxs("div",{className:"price-section",children:[r.jsxs("div",{className:"current-price",children:[r.jsx("span",{className:"price-value",children:Me(o.price)}),r.jsxs("div",{className:`price-change ${B?"positive":"negative"}`,children:[B?r.jsx(Oe,{}):r.jsx(lt,{}),r.jsxs("span",{children:[Me(o.change)," (",o.changePercent.toFixed(2),"%)"]})]})]}),r.jsxs("div",{className:"price-range",children:[r.jsxs("div",{className:"range-item",children:[r.jsx("span",{className:"label",children:"Day Range"}),r.jsxs("span",{className:"value",children:[Me(o.dayLow)," - ",Me(o.dayHigh)]})]}),r.jsxs("div",{className:"range-item",children:[r.jsx("span",{className:"label",children:"52W Range"}),r.jsxs("span",{className:"value",children:[Me(o.low52w)," - ",Me(o.high52w)]})]})]})]}),r.jsxs("div",{className:"key-stats",children:[r.jsxs("div",{className:"stat-item",children:[r.jsx(Ns,{className:"stat-icon"}),r.jsxs("div",{className:"stat-info",children:[r.jsx("span",{className:"stat-label",children:"Volume"}),r.jsx("span",{className:"stat-value",children:wm(o.volume)})]})]}),r.jsxs("div",{className:"stat-item",children:[r.jsx(jo,{className:"stat-icon"}),r.jsxs("div",{className:"stat-info",children:[r.jsx("span",{className:"stat-label",children:"Market Cap"}),r.jsx("span",{className:"stat-value",children:Me(o.marketCap)})]})]}),r.jsxs("div",{className:"stat-item",children:[r.jsx(Ot,{className:"stat-icon"}),r.jsxs("div",{className:"stat-info",children:[r.jsx("span",{className:"stat-label",children:"P/E Ratio"}),r.jsx("span",{className:"stat-value",children:o.pe})]})]}),r.jsxs("div",{className:"stat-item",children:[r.jsx(St,{className:"stat-icon"}),r.jsxs("div",{className:"stat-info",children:[r.jsx("span",{className:"stat-label",children:"EPS"}),r.jsx("span",{className:"stat-value",children:Me(o.eps)})]})]})]}),r.jsxs("div",{className:"trading-section",children:[r.jsxs("h3",{children:["Buy ",o.symbol]}),r.jsxs("div",{className:"quantity-section",children:[r.jsx("label",{children:"Quantity"}),r.jsxs("div",{className:"quantity-controls",children:[r.jsx("button",{onClick:()=>y(Math.max(1,f-1)),className:"quantity-btn",children:"-"}),r.jsx("input",{type:"number",value:f,onChange:H=>y(Math.max(1,parseInt(H.target.value)||1)),className:"quantity-input",min:"1"}),r.jsx("button",{onClick:()=>y(f+1),className:"quantity-btn",children:"+"})]})]}),r.jsxs("div",{className:"order-summary",children:[r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Price per share"}),r.jsx("span",{children:Me(o.price)})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Quantity"}),r.jsxs("span",{children:[f," shares"]})]}),r.jsxs("div",{className:"summary-row total",children:[r.jsx("span",{children:"Total Cost"}),r.jsx("span",{children:Me(O)})]}),r.jsxs("div",{className:"summary-row",children:[r.jsx("span",{children:"Available Cash"}),r.jsx("span",{className:A?"positive":"negative",children:Me(s.availableCash)})]})]}),r.jsxs("div",{className:"slide-to-buy-container",children:[!A&&r.jsxs("div",{className:"insufficient-funds-warning",children:[r.jsx(It,{}),r.jsx("span",{children:"Insufficient funds"})]}),r.jsxs("div",{className:`slide-to-buy ${A?"":"disabled"} ${x?"processing":""}`,children:[r.jsx("div",{className:"slide-track",style:{background:`linear-gradient(to right, #10B981 ${g}%, #E5E7EB ${g}%)`},children:r.jsx(U.div,{className:"slide-button",style:{left:`${Math.min(g,85)}%`},onMouseDown:A?M:void 0,onTouchStart:A?M:void 0,whileHover:A?{scale:1.05}:{},whileTap:A?{scale:.95}:{},animate:{left:`${Math.min(g,85)}%`},transition:{type:g===0?"spring":"tween",stiffness:300,damping:30,duration:g===0?.5:.1},children:x?r.jsx("div",{className:"loading-spinner small"}):g>80?r.jsx(Os,{}):r.jsx(er,{})})}),r.jsx("span",{className:"slide-text",children:x?"Processing...":g>80?"Release to Buy!":"Slide to Buy"})]})]})]}),r.jsxs("div",{className:"company-info",children:[r.jsxs("h3",{children:["About ",o.name]}),r.jsxs("div",{className:"company-details",children:[r.jsxs("div",{className:"detail-row",children:[r.jsx("span",{className:"label",children:"Sector"}),r.jsx("span",{className:"value",children:o.sector})]}),r.jsxs("div",{className:"detail-row",children:[r.jsx("span",{className:"label",children:"Industry"}),r.jsx("span",{className:"value",children:o.industry})]}),r.jsxs("div",{className:"detail-row",children:[r.jsx("span",{className:"label",children:"Beta"}),r.jsx("span",{className:"value",children:o.beta})]}),r.jsxs("div",{className:"detail-row",children:[r.jsx("span",{className:"label",children:"Dividend Yield"}),r.jsxs("span",{className:"value",children:[o.dividend,"%"]})]})]}),r.jsx("p",{className:"company-description",children:o.description})]})]})},P5=()=>r.jsx("div",{className:"legal-page",children:r.jsxs("div",{className:"legal-container",children:[r.jsxs(U.div,{className:"legal-header",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[r.jsxs(Re,{to:"/login",className:"back-link",children:[r.jsx(Lu,{size:20}),"Back to Login"]}),r.jsxs("div",{className:"legal-title-section",children:[r.jsx("div",{className:"legal-icon",children:r.jsx(Xn,{size:32})}),r.jsx("h1",{className:"legal-title",children:"Terms of Service"}),r.jsx("p",{className:"legal-subtitle",children:"Please read these terms carefully before using TradeBro"}),r.jsxs("div",{className:"last-updated",children:["Last updated: ","December 15, 2024"]})]})]}),r.jsxs(U.div,{className:"legal-content",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:[r.jsxs("div",{className:"legal-notice",children:[r.jsx(Kn,{size:20}),r.jsxs("div",{children:[r.jsx("strong",{children:"Important Notice:"})," TradeBro is a virtual trading platform for educational purposes only. No real money or actual securities are involved in any transactions."]})]}),r.jsxs("section",{className:"legal-section",children:[r.jsx("h2",{children:"1. Acceptance of Terms"}),r.jsx("p",{children:'By accessing and using TradeBro ("the Platform", "our Service"), you accept and agree to be bound by the terms and provision of this agreement. If you do not agree to abide by the above, please do not use this service.'}),r.jsx("p",{children:'These Terms of Service ("Terms") govern your use of our virtual stock trading platform operated by TradeBro ("us", "we", or "our").'})]}),r.jsxs("section",{className:"legal-section",children:[r.jsx("h2",{children:"2. Description of Service"}),r.jsx("p",{children:"TradeBro provides:"}),r.jsxs("ul",{children:[r.jsx("li",{children:"Virtual stock trading simulation using real market data"}),r.jsx("li",{children:"Educational tools and resources for learning about stock trading"}),r.jsx("li",{children:"Portfolio management and tracking features"}),r.jsx("li",{children:"AI-powered trading assistant (Saytrix)"}),r.jsx("li",{children:"Market news and analysis"}),r.jsx("li",{children:"Social features for connecting with other virtual traders"})]}),r.jsxs("div",{className:"highlight-box",children:[r.jsx(Os,{size:16}),r.jsx("span",{children:"All trading on TradeBro is virtual and for educational purposes only."})]})]}),r.jsxs("section",{className:"legal-section",children:[r.jsx("h2",{children:"3. User Accounts and Registration"}),r.jsx("h3",{children:"3.1 Account Creation"}),r.jsx("p",{children:"To use certain features of our Service, you must register for an account. You may register using your email address or through third-party authentication providers like Google."}),r.jsx("h3",{children:"3.2 Account Security"}),r.jsx("p",{children:"You are responsible for:"}),r.jsxs("ul",{children:[r.jsx("li",{children:"Maintaining the confidentiality of your account credentials"}),r.jsx("li",{children:"All activities that occur under your account"}),r.jsx("li",{children:"Notifying us immediately of any unauthorized use"}),r.jsx("li",{children:"Ensuring your account information is accurate and up-to-date"})]}),r.jsx("h3",{children:"3.3 Account Termination"}),r.jsx("p",{children:"We reserve the right to terminate or suspend your account at any time for violations of these Terms or for any other reason at our sole discretion."})]}),r.jsxs("section",{className:"legal-section",children:[r.jsx("h2",{children:"4. Virtual Trading Rules"}),r.jsx("h3",{children:"4.1 Virtual Currency"}),r.jsx("p",{children:"All users start with virtual currency (₹10,000 by default) for trading purposes. This virtual currency has no real-world value and cannot be exchanged for real money."}),r.jsx("h3",{children:"4.2 Market Data"}),r.jsx("p",{children:"We use real market data from various sources including Financial Modeling Prep (FMP) API. While we strive for accuracy, we do not guarantee the completeness or accuracy of market data."}),r.jsx("h3",{children:"4.3 Trading Limitations"}),r.jsx("p",{children:"Virtual trading is subject to:"}),r.jsxs("ul",{children:[r.jsx("li",{children:"Market hours and trading sessions"}),r.jsx("li",{children:"Available virtual funds in your account"}),r.jsx("li",{children:"Platform maintenance and technical limitations"}),r.jsx("li",{children:"Fair usage policies to prevent system abuse"})]})]}),r.jsxs("section",{className:"legal-section",children:[r.jsx("h2",{children:"5. Prohibited Uses"}),r.jsx("p",{children:"You may not use our Service:"}),r.jsxs("ul",{children:[r.jsx("li",{children:"For any unlawful purpose or to solicit others to unlawful acts"}),r.jsx("li",{children:"To violate any international, federal, provincial, or state regulations, rules, laws, or local ordinances"}),r.jsx("li",{children:"To infringe upon or violate our intellectual property rights or the intellectual property rights of others"}),r.jsx("li",{children:"To harass, abuse, insult, harm, defame, slander, disparage, intimidate, or discriminate"}),r.jsx("li",{children:"To submit false or misleading information"}),r.jsx("li",{children:"To upload or transmit viruses or any other type of malicious code"}),r.jsx("li",{children:"To spam, phish, pharm, pretext, spider, crawl, or scrape"}),r.jsx("li",{children:"For any obscene or immoral purpose"}),r.jsx("li",{children:"To interfere with or circumvent the security features of the Service"})]})]}),r.jsxs("section",{className:"legal-section",children:[r.jsx("h2",{children:"6. Intellectual Property Rights"}),r.jsx("p",{children:"The Service and its original content, features, and functionality are and will remain the exclusive property of TradeBro and its licensors. The Service is protected by copyright, trademark, and other laws."}),r.jsx("p",{children:"Our trademarks and trade dress may not be used in connection with any product or service without our prior written consent."})]}),r.jsxs("section",{className:"legal-section",children:[r.jsx("h2",{children:"7. Privacy Policy"}),r.jsx("p",{children:"Your privacy is important to us. Please review our Privacy Policy, which also governs your use of the Service, to understand our practices."}),r.jsx(Re,{to:"/privacy",className:"inline-link",children:"View Privacy Policy →"})]}),r.jsxs("section",{className:"legal-section",children:[r.jsx("h2",{children:"8. Disclaimers and Limitations"}),r.jsx("h3",{children:"8.1 Educational Purpose"}),r.jsxs("div",{className:"warning-box",children:[r.jsx(Kn,{size:16}),r.jsxs("div",{children:[r.jsx("strong",{children:"Important:"})," TradeBro is for educational purposes only. Virtual trading results do not guarantee real trading success. Past performance does not indicate future results."]})]}),r.jsx("h3",{children:"8.2 No Financial Advice"}),r.jsx("p",{children:"The information provided on TradeBro is not intended as financial advice. We do not provide investment recommendations or advice. Always consult with qualified financial professionals before making real investment decisions."}),r.jsx("h3",{children:"8.3 Service Availability"}),r.jsx("p",{children:"We do not guarantee that the Service will be available at all times. We may experience hardware, software, or other problems or need to perform maintenance related to the Service."})]}),r.jsxs("section",{className:"legal-section",children:[r.jsx("h2",{children:"9. Limitation of Liability"}),r.jsx("p",{children:"In no event shall TradeBro, nor its directors, employees, partners, agents, suppliers, or affiliates, be liable for any indirect, incidental, special, consequential, or punitive damages, including without limitation, loss of profits, data, use, goodwill, or other intangible losses, resulting from your use of the Service."})]}),r.jsxs("section",{className:"legal-section",children:[r.jsx("h2",{children:"10. Changes to Terms"}),r.jsx("p",{children:"We reserve the right, at our sole discretion, to modify or replace these Terms at any time. If a revision is material, we will try to provide at least 30 days notice prior to any new terms taking effect."}),r.jsx("p",{children:"What constitutes a material change will be determined at our sole discretion. By continuing to access or use our Service after those revisions become effective, you agree to be bound by the revised terms."})]}),r.jsxs("section",{className:"legal-section",children:[r.jsx("h2",{children:"11. Contact Information"}),r.jsx("p",{children:"If you have any questions about these Terms of Service, please contact us:"}),r.jsxs("div",{className:"contact-info",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Email:"})," legal@tradebro.com"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Address:"})," TradeBro Legal Department",r.jsx("br",{}),"123 Trading Street",r.jsx("br",{}),"Financial District, Mumbai 400001",r.jsx("br",{}),"India"]})]})]}),r.jsxs("div",{className:"legal-footer",children:[r.jsx("p",{children:"By using TradeBro, you acknowledge that you have read, understood, and agree to be bound by these Terms of Service."}),r.jsxs("div",{className:"legal-actions",children:[r.jsx(Re,{to:"/privacy",className:"btn btn-outline",children:"Privacy Policy"}),r.jsx(Re,{to:"/login",className:"btn btn-primary",children:"Back to Login"})]})]})]})]})}),T5=()=>r.jsx("div",{className:"legal-page",children:r.jsxs("div",{className:"legal-container",children:[r.jsxs(U.div,{className:"legal-header",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},children:[r.jsxs(Re,{to:"/login",className:"back-link",children:[r.jsx(Lu,{size:20}),"Back to Login"]}),r.jsxs("div",{className:"legal-title-section",children:[r.jsx("div",{className:"legal-icon",children:r.jsx(bo,{size:32})}),r.jsx("h1",{className:"legal-title",children:"Privacy Policy"}),r.jsx("p",{className:"legal-subtitle",children:"How we collect, use, and protect your personal information"}),r.jsxs("div",{className:"last-updated",children:["Last updated: ","JULY 22, 2025"]})]})]}),r.jsxs(U.div,{className:"legal-content",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},children:[r.jsxs("div",{className:"privacy-commitment",children:[r.jsx(Xn,{size:20}),r.jsxs("div",{children:[r.jsx("strong",{children:"Our Commitment:"})," We are committed to protecting your privacy and ensuring the security of your personal information. This Privacy Policy explains how we collect, use, and safeguard your data."]})]}),r.jsxs("section",{className:"legal-section",children:[r.jsxs("h2",{children:[r.jsx(MI,{size:20})," 1. Information We Collect"]}),r.jsx("h3",{children:"1.1 Personal Information"}),r.jsx("p",{children:"When you register for TradeBro, we may collect:"}),r.jsxs("ul",{children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Account Information:"})," Name, email address, username"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Profile Information:"})," Profile picture, bio, trading preferences"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Authentication Data:"})," Password (encrypted), OAuth tokens from third-party providers"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Contact Information:"})," Email address for communications"]})]}),r.jsx("h3",{children:"1.2 Trading and Usage Data"}),r.jsx("p",{children:"We collect information about your use of our platform:"}),r.jsxs("ul",{children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Virtual Trading Activity:"})," Buy/sell orders, portfolio performance, trading history"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Platform Usage:"})," Pages visited, features used, time spent on platform"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Device Information:"})," IP address, browser type, device type, operating system"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Preferences:"})," Theme settings, notification preferences, dashboard customizations"]})]}),r.jsx("h3",{children:"1.3 Automatically Collected Information"}),r.jsxs("ul",{children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Cookies and Tracking:"})," Session cookies, preference cookies, analytics cookies"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Log Data:"})," Server logs, error logs, access logs"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Analytics Data:"})," User behavior, feature usage, performance metrics"]})]})]}),r.jsxs("section",{className:"legal-section",children:[r.jsxs("h2",{children:[r.jsx(zi,{size:20})," 2. How We Use Your Information"]}),r.jsx("h3",{children:"2.1 Service Provision"}),r.jsxs("ul",{children:[r.jsx("li",{children:"Create and manage your account"}),r.jsx("li",{children:"Process virtual trading transactions"}),r.jsx("li",{children:"Provide personalized trading experience"}),r.jsx("li",{children:"Display portfolio and performance data"}),r.jsx("li",{children:"Enable social features and leaderboards"})]}),r.jsx("h3",{children:"2.2 Communication"}),r.jsxs("ul",{children:[r.jsx("li",{children:"Send account-related notifications"}),r.jsx("li",{children:"Provide customer support"}),r.jsx("li",{children:"Send educational content and market updates"}),r.jsx("li",{children:"Notify about platform updates and new features"})]}),r.jsx("h3",{children:"2.3 Platform Improvement"}),r.jsxs("ul",{children:[r.jsx("li",{children:"Analyze usage patterns to improve our service"}),r.jsx("li",{children:"Develop new features and functionality"}),r.jsx("li",{children:"Ensure platform security and prevent fraud"}),r.jsx("li",{children:"Conduct research and analytics"})]}),r.jsx("h3",{children:"2.4 Legal and Safety"}),r.jsxs("ul",{children:[r.jsx("li",{children:"Comply with legal obligations"}),r.jsx("li",{children:"Protect against fraud and abuse"}),r.jsx("li",{children:"Enforce our Terms of Service"}),r.jsx("li",{children:"Respond to legal requests"})]})]}),r.jsxs("section",{className:"legal-section",children:[r.jsxs("h2",{children:[r.jsx(JI,{size:20})," 3. Information Sharing and Disclosure"]}),r.jsx("h3",{children:"3.1 We Do Not Sell Your Data"}),r.jsxs("div",{className:"highlight-box",children:[r.jsx(Xn,{size:16}),r.jsx("span",{children:"We do not sell, rent, or trade your personal information to third parties for marketing purposes."})]}),r.jsx("h3",{children:"3.2 Limited Sharing"}),r.jsx("p",{children:"We may share your information only in these circumstances:"}),r.jsxs("ul",{children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Service Providers:"})," Third-party services that help us operate our platform (hosting, analytics, email)"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Legal Requirements:"})," When required by law, court order, or government request"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Safety and Security:"})," To protect the rights, property, or safety of TradeBro, our users, or others"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Business Transfers:"})," In connection with a merger, acquisition, or sale of assets"]})]}),r.jsx("h3",{children:"3.3 Public Information"}),r.jsx("p",{children:"Some information may be publicly visible:"}),r.jsxs("ul",{children:[r.jsx("li",{children:"Username and profile picture (if you choose to make them public)"}),r.jsx("li",{children:"Leaderboard rankings (anonymized or with consent)"}),r.jsx("li",{children:"Public posts or comments in community features"})]})]}),r.jsxs("section",{className:"legal-section",children:[r.jsx("h2",{children:"4. Data Security"}),r.jsx("h3",{children:"4.1 Security Measures"}),r.jsx("p",{children:"We implement industry-standard security measures:"}),r.jsxs("ul",{children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Encryption:"})," Data encrypted in transit and at rest"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Access Controls:"})," Limited access to personal data on need-to-know basis"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Secure Infrastructure:"})," Secure servers and databases"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Regular Audits:"})," Security assessments and vulnerability testing"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Authentication:"})," Secure login with optional two-factor authentication"]})]}),r.jsx("h3",{children:"4.2 Data Retention"}),r.jsx("p",{children:"We retain your information:"}),r.jsxs("ul",{children:[r.jsx("li",{children:"As long as your account is active"}),r.jsx("li",{children:"As necessary to provide our services"}),r.jsx("li",{children:"To comply with legal obligations"}),r.jsx("li",{children:"To resolve disputes and enforce agreements"})]})]}),r.jsxs("section",{className:"legal-section",children:[r.jsx("h2",{children:"5. Your Privacy Rights"}),r.jsx("h3",{children:"5.1 Access and Control"}),r.jsx("p",{children:"You have the right to:"}),r.jsxs("ul",{children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Access:"})," Request a copy of your personal data"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Update:"})," Correct or update your information"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Delete:"})," Request deletion of your account and data"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Export:"})," Download your trading data and history"]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Opt-out:"})," Unsubscribe from marketing communications"]})]}),r.jsx("h3",{children:"5.2 Cookie Preferences"}),r.jsx("p",{children:"You can control cookies through:"}),r.jsxs("ul",{children:[r.jsx("li",{children:"Browser settings to block or delete cookies"}),r.jsx("li",{children:"Our cookie preference center"}),r.jsx("li",{children:"Opting out of analytics tracking"})]}),r.jsx("h3",{children:"5.3 Account Settings"}),r.jsx("p",{children:"Manage your privacy through your account settings:"}),r.jsxs("ul",{children:[r.jsx("li",{children:"Profile visibility settings"}),r.jsx("li",{children:"Notification preferences"}),r.jsx("li",{children:"Data sharing preferences"}),r.jsx("li",{children:"Communication settings"})]})]}),r.jsxs("section",{className:"legal-section",children:[r.jsx("h2",{children:"6. Third-Party Services"}),r.jsx("h3",{children:"6.1 OAuth Providers"}),r.jsx("p",{children:"When you sign in with Google or other OAuth providers:"}),r.jsxs("ul",{children:[r.jsx("li",{children:"We receive limited profile information (name, email, profile picture)"}),r.jsx("li",{children:"We do not access your other accounts or data"}),r.jsx("li",{children:"You can revoke access at any time through the provider's settings"})]}),r.jsx("h3",{children:"6.2 Market Data Providers"}),r.jsx("p",{children:"We use third-party APIs for market data:"}),r.jsxs("ul",{children:[r.jsx("li",{children:"Financial Modeling Prep (FMP) for stock prices and data"}),r.jsx("li",{children:"These providers may have their own privacy policies"}),r.jsx("li",{children:"We do not share your personal information with data providers"})]}),r.jsx("h3",{children:"6.3 Analytics Services"}),r.jsx("p",{children:"We may use analytics services to improve our platform:"}),r.jsxs("ul",{children:[r.jsx("li",{children:"Google Analytics (anonymized data)"}),r.jsx("li",{children:"Error tracking services"}),r.jsx("li",{children:"Performance monitoring tools"})]})]}),r.jsxs("section",{className:"legal-section",children:[r.jsx("h2",{children:"7. Children's Privacy"}),r.jsx("p",{children:"TradeBro is not intended for children under 13 years of age. We do not knowingly collect personal information from children under 13. If you are a parent or guardian and believe your child has provided us with personal information, please contact us."}),r.jsx("p",{children:"Users between 13-18 years old should have parental consent before using our service."})]}),r.jsxs("section",{className:"legal-section",children:[r.jsx("h2",{children:"8. International Data Transfers"}),r.jsx("p",{children:"Your information may be transferred to and processed in countries other than your own. We ensure appropriate safeguards are in place to protect your personal information in accordance with this Privacy Policy."})]}),r.jsxs("section",{className:"legal-section",children:[r.jsx("h2",{children:"9. Changes to Privacy Policy"}),r.jsx("p",{children:"We may update this Privacy Policy from time to time. We will notify you of any material changes by:"}),r.jsxs("ul",{children:[r.jsx("li",{children:"Posting the new Privacy Policy on this page"}),r.jsx("li",{children:"Sending an email notification"}),r.jsx("li",{children:"Providing notice through our platform"})]}),r.jsx("p",{children:"Your continued use of our service after any changes constitutes acceptance of the new Privacy Policy."})]}),r.jsxs("section",{className:"legal-section",children:[r.jsx("h2",{children:"10. Contact Us"}),r.jsx("p",{children:"If you have questions about this Privacy Policy or our privacy practices, please contact us:"}),r.jsxs("div",{className:"contact-info",children:[r.jsxs("p",{children:[r.jsx("strong",{children:"Privacy Officer:"})," privacy@tradebro.com"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Data Protection:"})," dpo@tradebro.com"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"General Support:"})," support@tradebro.com"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Address:"})," TradeBro Privacy Department",r.jsx("br",{}),"123 Trading Street",r.jsx("br",{}),"Financial District, Mumbai 400001",r.jsx("br",{}),"India"]})]})]}),r.jsxs("div",{className:"legal-footer",children:[r.jsx("p",{children:"We are committed to protecting your privacy and will continue to update our practices to ensure your data remains secure."}),r.jsxs("div",{className:"legal-actions",children:[r.jsx(Re,{to:"/terms",className:"btn btn-outline",children:"Terms of Service"}),r.jsx(Re,{to:"/login",className:"btn btn-primary",children:"Back to Login"})]})]})]})]})}),E5=()=>r.jsx("div",{className:"page",children:r.jsx("div",{className:"page-container",children:r.jsxs(U.div,{className:"not-found-container",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6},style:{textAlign:"center",padding:"var(--space-16) var(--space-4)",minHeight:"60vh",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:[r.jsx("div",{style:{fontSize:"6rem",marginBottom:"var(--space-6)"},children:"📈"}),r.jsx("h1",{style:{fontSize:"var(--font-size-4xl)",marginBottom:"var(--space-4)",color:"var(--text-primary)"},children:"404 - Page Not Found"}),r.jsx("p",{style:{fontSize:"var(--font-size-lg)",color:"var(--text-secondary)",marginBottom:"var(--space-8)",maxWidth:"500px"},children:"Oops! The page you're looking for doesn't exist. It might have been moved, deleted, or you entered the wrong URL."}),r.jsxs("div",{style:{display:"flex",gap:"var(--space-4)",flexWrap:"wrap",justifyContent:"center"},children:[r.jsxs(Re,{to:"/",className:"btn btn-primary btn-lg",children:[r.jsx(lj,{size:20}),"Go Home"]}),r.jsxs("button",{onClick:()=>window.history.back(),className:"btn btn-secondary btn-lg",children:[r.jsx(Lu,{size:20}),"Go Back"]})]})]})})}),rt=({children:t,isAuthenticated:e,loading:s,user:n})=>{const i=us();return s?r.jsxs("div",{className:"loading-container",children:[r.jsx("div",{className:"loading-spinner lg"}),r.jsx("p",{className:"loading-text",children:"Verifying authentication..."})]}):e?r.jsx(Sj,{user:n,children:t}):(localStorage.setItem("redirectAfterLogin",i.pathname),r.jsx(Zt,{to:"/login",replace:!0,state:{from:i}}))},$x=({children:t,isAuthenticated:e})=>{if(e){const s=localStorage.getItem("redirectAfterLogin");return s?(localStorage.removeItem("redirectAfterLogin"),r.jsx(Zt,{to:s,replace:!0})):r.jsx(Zt,{to:"/dashboard",replace:!0})}return t},L5=({isAuthenticated:t,user:e,loading:s,onLogin:n,onSignup:i,onLogout:a,onUpdateProfile:o,theme:l,toggleTheme:c})=>{const u=us(),h={initial:{opacity:0,y:20},in:{opacity:1,y:0},out:{opacity:0,y:-20}},d={type:"tween",ease:"anticipate",duration:.4};return r.jsx(Xe,{mode:"wait",children:r.jsx(U.div,{initial:"initial",animate:"in",exit:"out",variants:h,transition:d,children:r.jsxs(dE,{children:[r.jsx(De,{path:"/",element:t?r.jsx(Zt,{to:"/dashboard",replace:!0}):r.jsx(Zt,{to:"/login",replace:!0})}),r.jsx(De,{path:"/login",element:r.jsx($x,{isAuthenticated:t,children:r.jsx(ZI,{onLogin:n})})}),r.jsx(De,{path:"/signup",element:r.jsx($x,{isAuthenticated:t,children:r.jsx(eA,{onSignup:i})})}),r.jsx(De,{path:"/terms",element:r.jsx(rt,{isAuthenticated:t,loading:s,user:e,children:r.jsx(P5,{})})}),r.jsx(De,{path:"/privacy",element:r.jsx(rt,{isAuthenticated:t,loading:s,user:e,children:r.jsx(T5,{})})}),r.jsx(De,{path:"/dashboard",element:r.jsx(rt,{isAuthenticated:t,loading:s,user:e,children:r.jsx(Jj,{user:e,theme:l})})}),r.jsx(De,{path:"/portfolio",element:r.jsx(rt,{isAuthenticated:t,loading:s,user:e,children:r.jsx(c3,{user:e,theme:l})})}),r.jsx(De,{path:"/trading",element:r.jsx(rt,{isAuthenticated:t,loading:s,user:e,children:r.jsx(A3,{user:e,theme:l})})}),r.jsx(De,{path:"/charts",element:r.jsx(rt,{isAuthenticated:t,loading:s,user:e,children:r.jsx(c5,{user:e,theme:l})})}),r.jsx(De,{path:"/watchlist",element:r.jsx(rt,{isAuthenticated:t,loading:s,user:e,children:r.jsx(u5,{user:e,theme:l})})}),r.jsx(De,{path:"/orders",element:r.jsx(rt,{isAuthenticated:t,loading:s,user:e,children:r.jsx(h5,{user:e,theme:l})})}),r.jsx(De,{path:"/history",element:r.jsx(rt,{isAuthenticated:t,loading:s,user:e,children:r.jsx(d5,{user:e,theme:l})})}),r.jsx(De,{path:"/news",element:r.jsx(rt,{isAuthenticated:t,loading:s,user:e,children:r.jsx(f5,{user:e,theme:l})})}),r.jsx(De,{path:"/notifications",element:r.jsx(rt,{isAuthenticated:t,loading:s,user:e,children:r.jsx(m5,{user:e,theme:l})})}),r.jsx(De,{path:"/saytrix",element:r.jsx(rt,{isAuthenticated:t,loading:s,user:e,children:r.jsx(k5,{user:e,theme:l})})}),r.jsx(De,{path:"/settings",element:r.jsx(rt,{isAuthenticated:t,loading:s,user:e,children:r.jsx(p5,{user:e,theme:l,toggleTheme:c,onLogout:a})})}),r.jsx(De,{path:"/profile",element:r.jsx(rt,{isAuthenticated:t,loading:s,user:e,children:r.jsx(g5,{user:e,onUpdateProfile:o,theme:l,toggleTheme:c})})}),r.jsx(De,{path:"/stock/:symbol",element:r.jsx(rt,{isAuthenticated:t,loading:s,user:e,children:r.jsx(C5,{user:e,theme:l})})}),r.jsx(De,{path:"/home",element:t?r.jsx(Zt,{to:"/dashboard",replace:!0}):r.jsx(Zt,{to:"/",replace:!0})}),r.jsx(De,{path:"/app",element:r.jsx(rt,{isAuthenticated:t,children:r.jsx(Zt,{to:"/dashboard",replace:!0})})}),r.jsx(De,{path:"/trade",element:r.jsx(rt,{isAuthenticated:t,loading:s,user:e,children:r.jsx(Zt,{to:"/trading",replace:!0})})}),r.jsx(De,{path:"/stocks",element:r.jsx(rt,{isAuthenticated:t,loading:s,user:e,children:r.jsx(Zt,{to:"/charts",replace:!0})})}),r.jsx(De,{path:"/chat",element:r.jsx(rt,{isAuthenticated:t,loading:s,user:e,children:r.jsx(Zt,{to:"/saytrix",replace:!0})})}),r.jsx(De,{path:"/ai",element:r.jsx(rt,{isAuthenticated:t,loading:s,user:e,children:r.jsx(Zt,{to:"/saytrix",replace:!0})})}),r.jsx(De,{path:"*",element:t?r.jsx(E5,{}):r.jsx(Zt,{to:"/login",replace:!0})})]})},u.pathname)})},_N=b.createContext(),xg=()=>{const t=b.useContext(_N);if(t===void 0)throw new Error("useVoice must be used within a VoiceProvider");return t},_5=({children:t})=>{const e=Lt(),[s,n]=b.useState(!1),[i,a]=b.useState(!1),[o,l]=b.useState(""),[c,u]=b.useState(null),[h,d]=b.useState(!1);b.useEffect(()=>{if("webkitSpeechRecognition"in window||"SpeechRecognition"in window){const S=window.SpeechRecognition||window.webkitSpeechRecognition,N=new S;N.continuous=!0,N.interimResults=!0,N.lang="en-US",u(N),d(!0)}else console.warn("Speech recognition not supported in this browser"),d(!1)},[]);const f=b.useCallback(S=>{const N=S.toLowerCase().trim();console.log("Processing voice command:",N),N.includes("dashboard")||N.includes("home")?(e("/dashboard"),y("Navigating to dashboard")):N.includes("charts")||N.includes("chart")?(e("/charts"),y("Opening charts")):N.includes("portfolio")?(e("/portfolio"),y("Opening portfolio")):N.includes("watchlist")||N.includes("watch list")?(e("/watchlist"),y("Opening watchlist")):N.includes("orders")||N.includes("order")?(e("/orders"),y("Opening orders")):N.includes("history")?(e("/history"),y("Opening history")):N.includes("news")?(e("/news"),y("Opening news")):N.includes("notifications")||N.includes("notification")?(e("/notifications"),y("Opening notifications")):N.includes("saytrix")||N.includes("chat")?(e("/saytrix"),y("Opening Saytrix AI assistant")):N.includes("profile")?(e("/profile"),y("Opening profile")):N.includes("settings")||N.includes("setting")?(e("/settings"),y("Opening settings")):N.includes("stop")||N.includes("exit")||N.includes("close")?(g(),y("Voice mode deactivated")):y("Command not recognized. Try saying dashboard, charts, portfolio, or other navigation commands.")},[e]),y=b.useCallback(S=>{if("speechSynthesis"in window){const N=new SpeechSynthesisUtterance(S);N.rate=.9,N.pitch=1,N.volume=.8,speechSynthesis.speak(N)}},[]),p=b.useCallback(()=>{!c||!h||(n(!0),c.onresult=S=>{let N="";for(let j=S.resultIndex;j<S.results.length;j++){const P=S.results[j][0].transcript;S.results[j].isFinal&&(N+=P)}N&&(l(N),N.toLowerCase().includes("saytrix")&&(console.log("Wake word detected:",N),w()))},c.onerror=S=>{console.error("Speech recognition error:",S.error),S.error==="not-allowed"&&alert("Microphone access denied. Please allow microphone access to use voice commands.")},c.onend=()=>{s&&!i&&setTimeout(()=>{s&&c.start()},100)},c.start())},[c,h,s,i]),w=b.useCallback(()=>{a(!0),y("Saytrix activated. What would you like to do?"),c&&(c.onresult=S=>{let N="";for(let j=S.resultIndex;j<S.results.length;j++){const P=S.results[j][0].transcript;S.results[j].isFinal&&(N+=P)}N&&(l(N),f(N),setTimeout(()=>{a(!1),p()},2e3))},c.start())},[c,f,y,p]),g=b.useCallback(()=>{n(!1),a(!1),c&&c.stop()},[c]),m=b.useCallback(()=>{if(!h){alert("Voice commands are not supported in this browser. Please use Chrome, Edge, or Safari.");return}i?g():w()},[h,i,w,g]);b.useEffect(()=>(h&&!s&&!i&&p(),()=>{c&&c.stop()}),[h,p]);const x={isListening:s,isVoiceModeActive:i,transcript:o,isSupported:h,triggerVoiceMode:m,stopListening:g,speak:y,activateVoiceMode:w};return r.jsx(_N.Provider,{value:x,children:t})},R5=({position:t="navbar",size:e="small",showLabel:s=!1,className:n=""})=>{const{isVoiceModeActive:i,isListening:a,isSupported:o,triggerVoiceMode:l}=xg(),c=()=>{l()};return o?r.jsxs("button",{className:`saytrix-trigger-btn ${t} ${e} ${n} ${i?"active":""} ${a?"listening":""}`,onClick:c,title:i?"Deactivate Saytrix AI":"Activate Saytrix AI","aria-label":i?"Deactivate Saytrix AI voice assistant":"Activate Saytrix AI voice assistant",children:[i?r.jsx(dj,{}):r.jsx(Au,{}),s&&r.jsx("span",{children:"Saytrix"}),a&&r.jsx("div",{className:"pulse-indicator"})]}):null},ze="http://localhost:5001/api",M5={BASE:ze,AUTH:{LOGIN:`${ze}/api/auth/login`,REGISTER:`${ze}/api/auth/register`,LOGOUT:`${ze}/api/auth/logout`,REFRESH:`${ze}/api/auth/refresh`,PROFILE:`${ze}/api/auth/profile`},USER:{PROFILE:`${ze}/api/user/profile`,UPDATE:`${ze}/api/user/update`,UPLOAD_AVATAR:`${ze}/api/user/upload-avatar`},STOCKS:{SEARCH:`${ze}/api/stocks/search`,QUOTE:`${ze}/api/stocks/quote`,CHART:`${ze}/api/stocks/chart`,NEWS:`${ze}/api/stocks/news`},PORTFOLIO:{GET:`${ze}/api/portfolio`,BUY:`${ze}/api/portfolio/buy`,SELL:`${ze}/api/portfolio/sell`,HISTORY:`${ze}/api/portfolio/history`},WATCHLIST:{GET:`${ze}/api/watchlist`,ADD:`${ze}/api/watchlist/add`,REMOVE:`${ze}/api/watchlist/remove`},SAYTRIX:{CHAT:`${ze}/api/saytrix/chat`,START:`${ze}/api/saytrix/start`,CLEAR:`${ze}/api/saytrix/clear`},UPLOADS:t=>`${ze}/uploads/${t}`,PROFILE_IMAGES:t=>`${ze}/uploads/profiles/${t}`},RN=b.createContext(),wg=()=>{const t=b.useContext(RN);if(!t)throw new Error("useLocalSidebar must be used within LocalSidebarProvider");return t},I5=({children:t})=>{const[e,s]=b.useState(!1),[n,i]=b.useState(!1);b.useEffect(()=>{const l=()=>{const c=window.innerWidth<=768;i(c),c&&s(!0)};return l(),window.addEventListener("resize",l),()=>window.removeEventListener("resize",l)},[]),b.useEffect(()=>{const l=document.querySelector(".main-content");return l&&(l.classList.add("with-sidebar"),e?(l.classList.add("sidebar-collapsed"),l.classList.remove("sidebar-expanded")):(l.classList.add("sidebar-expanded"),l.classList.remove("sidebar-collapsed"))),()=>{l&&l.classList.remove("with-sidebar","sidebar-collapsed","sidebar-expanded")}},[e]);const o={isCollapsed:e,isMobile:n,toggleSidebar:()=>{s(!e)},setIsCollapsed:s};return r.jsx(RN.Provider,{value:o,children:t})},A5=()=>{const{isCollapsed:t,isMobile:e,toggleSidebar:s}=wg();return!e||!t?null:r.jsx("button",{className:"mobile-menu-btn",onClick:s,"aria-label":"Open navigation menu",type:"button",children:r.jsx(hj,{})})},O5=()=>{const{isCollapsed:t,isMobile:e,toggleSidebar:s}=wg();return!e||t?null:r.jsx("div",{className:`sidebar-overlay ${t?"":"show"}`,onClick:s,"aria-hidden":"true"})},D5=()=>{const{isCollapsed:t,isMobile:e,toggleSidebar:s}=wg(),{unreadCount:n}=Wu(),i=us(),a=Lt(),{isAuthenticated:o,logout:l}=tr(),c=b.useRef(null),[u,h]=b.useState(!1),[d,f]=b.useState(!1),[y,p]=b.useState({fullName:"User",email:"",profileImage:"https://randomuser.me/api/portraits/lego/1.jpg",role:"Member"});b.useEffect(()=>{(async()=>{if(await new Promise(S=>setTimeout(S,100)),!o){h(!0);return}const x={fullName:localStorage.getItem("userFullName")||localStorage.getItem("userName")||"User",email:localStorage.getItem("userEmail")||"",profileImage:localStorage.getItem("userProfileImage")?M5.UPLOADS(localStorage.getItem("userProfileImage")):"https://randomuser.me/api/portraits/lego/1.jpg",role:"Member"};p(x),h(!0)})()},[o]);const w=m=>{m.preventDefault(),m.stopPropagation(),f(!0),s(),setTimeout(()=>f(!1),300)},g=()=>{l(),a("/login")};return b.useEffect(()=>{(()=>{const x=document.documentElement;e?x.style.setProperty("--sidebar-current-width","0px"):x.style.setProperty("--sidebar-current-width",t?"80px":"280px")})()},[t,e]),b.useEffect(()=>{const m=()=>{const j=c.current;j&&(j.style.position="fixed",j.style.zIndex="2147483647",j.style.transform="none",j.style.webkitTransform="none",j.style.mozTransform="none",j.style.msTransform="none",j.style.oTransform="none",j.style.margin="0px",j.style.contain="none",j.style.isolation="auto",j.style.willChange="auto",j.style.backgroundAttachment="fixed",j.style.boxSizing="border-box",j.style.clip="auto",j.style.clipPath="none",j.style.mask="none",j.style.filter="none",j.style.mixBlendMode="normal",j.style.opacity="1",j.style.visibility="visible",j.style.backfaceVisibility="visible",j.style.webkitBackfaceVisibility="visible",j.style.perspective="none",j.style.webkitPerspective="none",e?(j.style.top="0px",j.style.left="0px",j.style.right="0px",j.style.width="100%",t?(j.style.bottom="auto",j.style.height="70px",j.style.maxHeight="70px",j.style.minHeight="70px",j.style.padding="12px 20px",j.style.display="flex",j.style.flexDirection="row",j.style.alignItems="center",j.style.justifyContent="space-between",j.style.overflow="hidden"):(j.style.bottom="0px",j.style.height="100vh",j.style.maxHeight="100vh",j.style.minHeight="100vh",j.style.padding="20px",j.style.display="flex",j.style.flexDirection="column",j.style.alignItems="stretch",j.style.justifyContent="flex-start",j.style.overflowY="auto")):(j.style.top="0px",j.style.left="0px",j.style.bottom="0px",j.style.right="auto",j.style.width=t?"80px":"280px",j.style.height="100vh",j.style.maxHeight="100vh",j.style.minHeight="100vh",j.style.padding=t?"24px 16px":"24px 20px",j.style.display="flex",j.style.flexDirection="column",j.style.overflowY="auto"))};m();const x=()=>{m()},S=()=>{m()},N=new MutationObserver(()=>{m()});return c.current&&N.observe(c.current,{attributes:!0,attributeFilter:["style","class"]}),window.addEventListener("scroll",x,{passive:!0}),window.addEventListener("resize",S,{passive:!0}),document.addEventListener("scroll",x,{passive:!0}),()=>{window.removeEventListener("scroll",x),window.removeEventListener("resize",S),document.removeEventListener("scroll",x),N.disconnect()}},[t,e]),r.jsxs("div",{ref:c,className:`sidebar ${t?"collapsed":""} ${e?"mobile":""} ${u?"loaded":"loading"} ${d?"animating":""}`,role:"navigation","aria-label":"Main navigation",children:[r.jsxs("div",{className:"top-section",children:[r.jsx("button",{className:"toggle-btn",onClick:w,type:"button","aria-label":t?"Expand sidebar navigation":"Collapse sidebar navigation",title:t?"Expand sidebar":"Collapse sidebar","aria-expanded":!t,children:r.jsx(hj,{})}),(!t||e)&&r.jsxs("div",{className:"logo-section",children:[r.jsx("h1",{className:"logo",role:"banner",children:"⚡ TradeBro"}),!t&&r.jsx(R5,{position:"navbar",size:"small",showLabel:!1,className:"sidebar-voice-btn"})]})]}),!t&&r.jsxs("div",{className:"user-profile",children:[r.jsx("div",{className:"user-avatar",children:r.jsx("div",{className:"avatar-symbol",children:"👤"})}),r.jsxs("div",{className:"user-info",children:[r.jsx("h3",{className:"user-name",children:y.fullName}),r.jsx("p",{className:"user-role",children:y.role})]})]}),r.jsx("nav",{role:"navigation","aria-label":"Main menu",children:r.jsxs("ul",{className:"sidebar-links",children:[r.jsx("li",{children:r.jsxs(Re,{to:"/dashboard",className:`sidebar-link ${i.pathname==="/dashboard"?"active":""}`,"aria-current":i.pathname==="/dashboard"?"page":void 0,title:"Dashboard",children:[r.jsx(Ot,{"aria-hidden":"true"}),!t&&r.jsx("span",{children:"Dashboard"})]})}),r.jsx("li",{children:r.jsxs(Re,{to:"/charts",className:`sidebar-link ${i.pathname==="/charts"?"active":""}`,children:[r.jsx(Oe,{}),!t&&r.jsx("span",{children:"Charts"})]})}),r.jsx("li",{children:r.jsxs(Re,{to:"/portfolio",className:`sidebar-link ${i.pathname==="/portfolio"?"active":""}`,children:[r.jsx(jo,{}),!t&&r.jsx("span",{children:"Portfolio"})]})}),r.jsx("li",{children:r.jsxs(Re,{to:"/watchlist",className:`sidebar-link ${i.pathname==="/watchlist"?"active":""}`,children:[r.jsx(_i,{}),!t&&r.jsx("span",{children:"Watchlist"})]})}),r.jsx("li",{children:r.jsxs(Re,{to:"/orders",className:`sidebar-link ${i.pathname==="/orders"?"active":""}`,children:[r.jsx(Tt,{}),!t&&r.jsx("span",{children:"Orders"})]})}),r.jsx("li",{children:r.jsxs(Re,{to:"/history",className:`sidebar-link ${i.pathname==="/history"?"active":""}`,children:[r.jsx(Dt,{}),!t&&r.jsx("span",{children:"History"})]})}),r.jsx("li",{children:r.jsxs(Re,{to:"/news",className:`sidebar-link ${i.pathname==="/news"?"active":""}`,children:[r.jsx(II,{}),!t&&r.jsx("span",{children:"News"})]})}),r.jsx("li",{children:r.jsx(Re,{to:"/notifications",className:`sidebar-link ${i.pathname==="/notifications"?"active":""}`,children:r.jsxs("div",{className:"sidebar-link-content",children:[r.jsxs("div",{className:"sidebar-icon-wrapper",children:[r.jsx(Li,{}),n>0&&r.jsx("span",{className:"notification-badge",children:n>99?"99+":n})]}),!t&&r.jsx("span",{children:"Notifications"})]})})}),r.jsx("li",{children:r.jsxs(Re,{to:"/saytrix",className:`sidebar-link ${i.pathname==="/saytrix"||i.pathname==="/chatbot"?"active":""} highlight`,children:[r.jsx($I,{}),!t&&r.jsx("span",{children:"Saytrix AI"})]})})]})}),r.jsxs("div",{className:"sidebar-bottom",children:[r.jsxs("div",{className:"sidebar-actions",children:[r.jsxs(Re,{to:"/profile",className:`sidebar-link ${i.pathname==="/profile"?"active":""}`,children:[r.jsx(Is,{}),!t&&r.jsx("span",{children:"Profile"})]}),r.jsxs(Re,{to:"/settings",className:`sidebar-link ${i.pathname==="/settings"?"active":""}`,children:[r.jsx(qr,{}),!t&&r.jsx("span",{children:"Settings"})]}),r.jsxs("button",{onClick:g,className:"sidebar-link logout-btn","aria-label":"Logout from TradeBro",title:"Logout from TradeBro",children:[r.jsx(uj,{}),!t&&r.jsx("span",{children:"Logout"})]})]}),!t&&r.jsxs("div",{className:"sidebar-footer",children:[r.jsx("p",{className:"copyright",children:"© 2024 TradeBro ⚡"}),r.jsx("p",{className:"version",children:"v1.0.0 • 🚀"})]})]})]})},F5=()=>{const t=us(),{isAuthenticated:e}=tr();return e&&!["/login","/signup","/"].includes(t.pathname)?r.jsxs(I5,{children:[r.jsx(A5,{}),r.jsx(O5,{}),r.jsx(D5,{})]}):null},B5=({isAuthenticated:t,user:e})=>t?null:r.jsxs(U.div,{className:"card card-glass",style:{position:"fixed",bottom:"var(--space-xl)",right:"var(--space-xl)",width:"320px",zIndex:"var(--z-fixed)",background:"var(--glass-bg-strong)",backdropFilter:"blur(20px)",border:"1px solid var(--glass-border-strong)",boxShadow:"var(--shadow-xl), var(--shadow-glow)"},initial:{opacity:0,y:100,scale:.8},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:100,scale:.8},transition:{duration:.5,type:"spring",stiffness:100},children:[r.jsx("div",{className:"card-header",children:r.jsxs("div",{className:"d-flex align-center gap-md",children:[r.jsx("div",{className:"d-flex align-center justify-center",style:{width:"40px",height:"40px",background:"var(--gradient-primary)",borderRadius:"var(--radius-lg)",color:"var(--text-inverse)"},children:r.jsx(bo,{size:20})}),r.jsxs("div",{children:[r.jsx("h3",{className:"card-title",style:{fontSize:"1rem",marginBottom:"var(--space-xs)"},children:"Sign In Required"}),r.jsx("p",{className:"card-subtitle",style:{fontSize:"0.75rem"},children:"Access premium features"})]})]})}),r.jsxs("div",{className:"card-body",children:[r.jsx("p",{style:{fontSize:"0.875rem",color:"var(--text-secondary)",marginBottom:"var(--space-lg)",lineHeight:"1.5"},children:"Sign in to access your portfolio, trading tools, and personalized insights."}),r.jsxs("div",{className:"d-flex gap-sm",children:[r.jsxs(Re,{to:"/login",className:"btn btn-primary btn-sm flex-1",children:[r.jsx(Is,{size:14}),"Sign In"]}),r.jsxs(Re,{to:"/signup",className:"btn btn-outline btn-sm flex-1",children:[r.jsx(er,{size:14}),"Sign Up"]})]})]})]}),$5=({isOpen:t,onClose:e,onSearch:s})=>{const[n,i]=b.useState("stocks"),[a,o]=b.useState(""),l=b.useRef(null),c=hg({enableSuggestions:!0,enableHistory:!0,limit:8}),u=iN({enableSuggestions:!1,enableHistory:!0,limit:6}),d=(()=>{switch(n){case"stocks":return c;case"news":return u;default:return c}})(),f=m=>{i(m),o(""),d.clearSearch()},y=m=>{m.trim()&&s(m.trim(),n)},p=m=>{const x=m.query||m.symbol||m.title||m;y(x)};b.useEffect(()=>{const m=x=>{l.current&&!l.current.contains(x.target)&&e()};if(t)return document.addEventListener("mousedown",m),()=>document.removeEventListener("mousedown",m)},[t,e]),b.useEffect(()=>{t&&setTimeout(()=>{var x;const m=(x=l.current)==null?void 0:x.querySelector(".search-input");m==null||m.focus()},100)},[t]);const w=[{id:"stocks",label:"Stocks",icon:Oe,placeholder:"Search stocks, symbols...",shortcut:"S"},{id:"news",label:"News",icon:sg,placeholder:"Search news articles...",shortcut:"N"},{id:"orders",label:"Orders",icon:Tt,placeholder:"Search orders by symbol...",shortcut:"O"}],g=w.find(m=>m.id===n);return r.jsx(Xe,{children:t&&r.jsxs(r.Fragment,{children:[r.jsx(U.div,{className:"global-search-backdrop",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},onClick:e}),r.jsxs(U.div,{ref:l,className:"global-search-modal",initial:{opacity:0,scale:.95,y:-20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-20},transition:{duration:.2},children:[r.jsx("div",{className:"global-search-header",children:r.jsx("div",{className:"search-type-tabs",children:w.map(m=>{const x=m.icon;return r.jsxs("button",{className:`search-type-tab ${n===m.id?"active":""}`,onClick:()=>f(m.id),children:[r.jsx(x,{className:"tab-icon"}),r.jsx("span",{className:"tab-label",children:m.label}),r.jsx("kbd",{className:"tab-shortcut",children:m.shortcut})]},m.id)})})}),r.jsx("div",{className:"global-search-input-container",children:r.jsx(Uo,{placeholder:(g==null?void 0:g.placeholder)||"Search...",value:d.query,onChange:d.setQuery,onSearch:y,onClear:d.clearSearch,suggestions:d.suggestions,recentSearches:d.recentSearches,onSuggestionClick:p,onHistoryClick:p,showHistory:d.showHistory,loading:d.loading,size:"lg",showSuggestions:!0,enableHistory:!0,className:"global-search-input",autoFocus:!0})}),r.jsxs("div",{className:"global-search-footer",children:[r.jsxs("div",{className:"search-shortcuts",children:[r.jsxs("div",{className:"shortcut-item",children:[r.jsx("kbd",{children:r.jsx(cr,{})}),r.jsx("kbd",{children:r.jsx(xi,{})}),r.jsx("span",{children:"Navigate"})]}),r.jsxs("div",{className:"shortcut-item",children:[r.jsx("kbd",{children:r.jsx(RI,{})}),r.jsx("span",{children:"Select"})]}),r.jsxs("div",{className:"shortcut-item",children:[r.jsx("kbd",{children:"Esc"}),r.jsx("span",{children:"Close"})]})]}),r.jsxs("div",{className:"search-branding",children:[r.jsx("span",{children:"Global Search"}),r.jsxs("div",{className:"shortcut-badge",children:[r.jsx(_I,{className:"command-icon"}),r.jsx("span",{children:"K"})]})]})]})]})]})})},z5=()=>{const{isVoiceModeActive:t,isListening:e,transcript:s,stopListening:n}=xg();return t?r.jsx("div",{className:"voice-modal-overlay",children:r.jsxs("div",{className:"voice-modal",children:[r.jsxs("div",{className:"voice-modal-header",children:[r.jsx("h3",{children:"🎤 Saytrix Voice Commands"}),r.jsx("button",{className:"voice-modal-close",onClick:n,"aria-label":"Close voice commands",children:r.jsx(Bt,{})})]}),r.jsxs("div",{className:"voice-modal-content",children:[r.jsxs("div",{className:"voice-status",children:[r.jsxs("div",{className:`voice-indicator ${e?"listening":""}`,children:[r.jsx(Au,{}),r.jsx("div",{className:"pulse-ring"}),r.jsx("div",{className:"pulse-ring delay-1"}),r.jsx("div",{className:"pulse-ring delay-2"})]}),r.jsx("p",{className:"voice-status-text",children:e?"Listening for commands...":"Voice mode active"})]}),s&&r.jsx("div",{className:"voice-transcript",children:r.jsxs("p",{children:[r.jsx("strong",{children:"You said:"}),' "',s,'"']})}),r.jsxs("div",{className:"voice-commands-list",children:[r.jsx("h4",{children:"Available Commands:"}),r.jsxs("div",{className:"commands-grid",children:[r.jsxs("div",{className:"command-item",children:[r.jsx("span",{className:"command-text",children:'"Dashboard"'}),r.jsx("span",{className:"command-desc",children:"Go to dashboard"})]}),r.jsxs("div",{className:"command-item",children:[r.jsx("span",{className:"command-text",children:'"Charts"'}),r.jsx("span",{className:"command-desc",children:"Open charts"})]}),r.jsxs("div",{className:"command-item",children:[r.jsx("span",{className:"command-text",children:'"Portfolio"'}),r.jsx("span",{className:"command-desc",children:"View portfolio"})]}),r.jsxs("div",{className:"command-item",children:[r.jsx("span",{className:"command-text",children:'"Watchlist"'}),r.jsx("span",{className:"command-desc",children:"Open watchlist"})]}),r.jsxs("div",{className:"command-item",children:[r.jsx("span",{className:"command-text",children:'"Orders"'}),r.jsx("span",{className:"command-desc",children:"View orders"})]}),r.jsxs("div",{className:"command-item",children:[r.jsx("span",{className:"command-text",children:'"History"'}),r.jsx("span",{className:"command-desc",children:"Check history"})]}),r.jsxs("div",{className:"command-item",children:[r.jsx("span",{className:"command-text",children:'"News"'}),r.jsx("span",{className:"command-desc",children:"Read news"})]}),r.jsxs("div",{className:"command-item",children:[r.jsx("span",{className:"command-text",children:'"Notifications"'}),r.jsx("span",{className:"command-desc",children:"View notifications"})]}),r.jsxs("div",{className:"command-item",children:[r.jsx("span",{className:"command-text",children:'"Profile"'}),r.jsx("span",{className:"command-desc",children:"Open profile"})]}),r.jsxs("div",{className:"command-item",children:[r.jsx("span",{className:"command-text",children:'"Settings"'}),r.jsx("span",{className:"command-desc",children:"Open settings"})]}),r.jsxs("div",{className:"command-item",children:[r.jsx("span",{className:"command-text",children:'"Stop" / "Exit"'}),r.jsx("span",{className:"command-desc",children:"Close voice mode"})]})]})]}),r.jsx("div",{className:"voice-tips",children:r.jsxs("p",{children:[r.jsx("strong",{children:"💡 Tip:"}),' Say "Saytrix" anytime to activate voice commands']})})]})]})}):null},V5=()=>{const{isListening:t,isVoiceModeActive:e,isSupported:s}=xg();return!s||e?null:r.jsxs("div",{className:`voice-status-indicator ${t?"listening":""}`,children:[r.jsx("div",{className:"voice-status-icon",children:r.jsx(Au,{})}),r.jsx("div",{className:"voice-status-text",children:r.jsx("span",{children:'Say "Saytrix" to activate'})}),t&&r.jsxs("div",{className:"voice-pulse-rings",children:[r.jsx("div",{className:"pulse-ring"}),r.jsx("div",{className:"pulse-ring delay-1"}),r.jsx("div",{className:"pulse-ring delay-2"})]})]})},U5=({isOpen:t,onClose:e,onConfirm:s,orderData:n,stockData:i,orderSummary:a,profitLossEstimate:o,isProcessing:l=!1})=>{const[c,u]=b.useState("details"),[h,d]=b.useState(0),[f,y]=b.useState(!1),p=b.useRef(null),{portfolioData:w}=hs(),g=ve.useMemo(()=>{if((n==null?void 0:n.orderType)==="sell"&&i&&(w!=null&&w.holdings)){const T=w.holdings.find(R=>R.symbol===i.symbol);if(T){const R=i.price||0,M=T.averagePrice||0,_=T.quantity||0,O=M*_,A=R*_,B=A-O,H=O>0?B/O*100:0;return{...T,currentPrice:R,buyPrice:M,totalInvested:O,currentValue:A,totalGainLoss:B,gainLossPercentage:H,isProfit:B>=0}}}return null},[n,i,w]);ve.useMemo(()=>{if(g){const R=g.currentPrice-g.buyPrice,M=[];for(let _=0;_<=20;_++){const O=_/20,A=g.buyPrice+R*O,B=A*g.quantity;M.push({time:Date.now()-(20-_)*24*60*60*1e3,price:A,value:B})}return M}return[]},[g]),b.useEffect(()=>{t&&(u("details"),d(0),y(!1))},[t]);const m=T=>{y(!0);const R=T.touches?T.touches[0].clientX:T.clientX,M=p.current;if(!M)return;const O=M.getBoundingClientRect().width-60,A=H=>{const F=H.touches?H.touches[0].clientX:H.clientX,D=Math.max(0,Math.min(O,F-R))/O*100;d(D)},B=()=>{h>80?(u("processing"),s()):d(0),y(!1),document.removeEventListener("mousemove",A),document.removeEventListener("mouseup",B),document.removeEventListener("touchmove",A),document.removeEventListener("touchend",B)};document.addEventListener("mousemove",A),document.addEventListener("mouseup",B),document.addEventListener("touchmove",A),document.addEventListener("touchend",B)};if(!t||!n||!i)return null;const{orderType:x,orderMethod:S,quantity:N,limitPrice:j}=n,P=S==="market"?i.price:parseFloat(j),E=x==="buy";return r.jsx(Xe,{mode:"wait",children:t&&r.jsx(U.div,{className:"enhanced-confirmation-overlay app-level-modal",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:T=>T.target===T.currentTarget&&e(),"data-modal-level":"app",children:r.jsxs(U.div,{className:"enhanced-confirmation-modal",initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},transition:{duration:.3,ease:[.4,0,.2,1]},children:[r.jsx(U.button,{className:"enhanced-modal-close",onClick:e,whileHover:{scale:1.1},whileTap:{scale:.9},children:r.jsx(Bt,{size:24})}),c==="details"&&r.jsxs(U.div,{className:"modal-content",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:[r.jsxs("div",{className:"stock-header",children:[r.jsxs("div",{className:"stock-info",children:[r.jsx("h1",{className:"stock-symbol",children:i.symbol}),r.jsx("p",{className:"stock-name",children:i.name}),r.jsx("div",{className:"stock-exchange-badge",children:"NSE"})]}),r.jsxs("div",{className:"stock-price",children:[r.jsx("span",{className:"current-price",children:He(P)}),r.jsxs("div",{className:`price-change ${i.change>=0?"positive":"negative"}`,children:[i.change>=0?r.jsx(Oe,{}):r.jsx(lt,{}),r.jsxs("span",{children:[He(Math.abs(i.change))," (",Ci(Math.abs(i.changePercent)),")"]})]})]})]}),r.jsxs("div",{className:"order-details",children:[r.jsxs("h3",{className:"section-title",children:[r.jsx(St,{}),"Order Details"]}),r.jsxs("div",{className:"detail-grid",children:[r.jsxs("div",{className:"detail-item",children:[r.jsx("span",{className:"label",children:"Order Type:"}),r.jsx("span",{className:`value ${E?"buy":"sell"}`,children:E?"BUY":"SELL"})]}),r.jsxs("div",{className:"detail-item",children:[r.jsx("span",{className:"label",children:"Quantity:"}),r.jsxs("span",{className:"value",children:[N," shares"]})]}),r.jsxs("div",{className:"detail-item",children:[r.jsx("span",{className:"label",children:"Price:"}),r.jsx("span",{className:"value",children:He(P)})]}),r.jsxs("div",{className:"detail-item",children:[r.jsx("span",{className:"label",children:"Total Amount:"}),r.jsx("span",{className:"value total",children:He(P*N)})]})]})]}),!E&&g&&r.jsxs("div",{className:"profit-loss-analysis",children:[r.jsxs("h3",{className:"section-title",children:[r.jsx(Ot,{}),"Profit & Loss Analysis"]}),r.jsxs("div",{className:"pnl-summary",children:[r.jsxs("div",{className:"pnl-item",children:[r.jsx("span",{className:"label",children:"Buy Price:"}),r.jsx("span",{className:"value",children:He(g.buyPrice)})]}),r.jsxs("div",{className:"pnl-item",children:[r.jsx("span",{className:"label",children:"Current Price:"}),r.jsx("span",{className:"value",children:He(g.currentPrice)})]}),r.jsxs("div",{className:"pnl-item",children:[r.jsx("span",{className:"label",children:"Total Invested:"}),r.jsx("span",{className:"value",children:He(g.totalInvested)})]}),r.jsxs("div",{className:"pnl-item total",children:[r.jsxs("span",{className:"label",children:["Total ",g.isProfit?"Profit":"Loss",":"]}),r.jsxs("span",{className:`value ${g.isProfit?"profit":"loss"}`,children:[g.isProfit?"+":"",He(g.totalGainLoss),"(",g.isProfit?"+":"",Ci(g.gainLossPercentage),")"]})]})]})]}),r.jsx("div",{className:"slide-to-confirm",children:r.jsxs("div",{ref:p,className:"slide-container",children:[r.jsx("div",{className:"slide-track",style:{background:`linear-gradient(to right, ${E?"#10B981":"#EF4444"} ${h}%, #E5E7EB ${h}%)`},children:r.jsx(U.div,{className:"slide-button",style:{left:`${h}%`},onMouseDown:m,onTouchStart:m,whileHover:{scale:1.05},whileTap:{scale:.95},children:r.jsx(er,{})})}),r.jsxs("span",{className:"slide-text",children:["Slide to ",E?"Buy":"Sell"]})]})})]}),c==="processing"&&r.jsxs(U.div,{className:"processing-content",initial:{opacity:0},animate:{opacity:1},children:[r.jsx("div",{className:"processing-animation",children:r.jsx(U.div,{className:"spinner",animate:{rotate:360},transition:{duration:1,repeat:1/0,ease:"linear"}})}),r.jsx("h2",{children:"Processing Order..."}),r.jsxs("p",{children:["Please wait while we execute your ",E?"buy":"sell"," order"]})]}),c==="success"&&r.jsxs(U.div,{className:"success-content",initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},children:[r.jsx(U.div,{className:"success-icon",initial:{scale:0},animate:{scale:1},transition:{delay:.2,type:"spring",stiffness:300},children:r.jsx(Os,{})}),r.jsx("h2",{children:"Order Confirmed!"}),r.jsxs("p",{children:["Your ",E?"buy":"sell"," order has been successfully placed"]}),r.jsx(U.button,{className:"success-button",onClick:e,whileHover:{scale:1.05},whileTap:{scale:.95},children:"Done"})]})]})})})},W5=()=>{const[t,e]=b.useState(!1),s=Lt(),n=b.useCallback(l=>{if((l.ctrlKey||l.metaKey)&&l.key==="k"){l.preventDefault(),l.stopPropagation();const u=document.activeElement,h=u&&(u.tagName==="INPUT"||u.tagName==="TEXTAREA"||u.contentEditable==="true"),d=u&&u.classList.contains("search-input");if(h&&!d)return;e(!0)}},[]),i=b.useCallback(l=>{l.key==="Escape"&&t&&e(!1)},[t]);b.useEffect(()=>(document.addEventListener("keydown",n),document.addEventListener("keydown",i),()=>{document.removeEventListener("keydown",n),document.removeEventListener("keydown",i)}),[n,i]);const a=b.useCallback((l,c="stocks")=>{if(l.trim()){switch(c){case"stocks":s(`/trading?search=${encodeURIComponent(l)}`);break;case"news":s(`/news?search=${encodeURIComponent(l)}`);break;case"orders":s(`/orders?search=${encodeURIComponent(l)}`);break;default:s(`/trading?search=${encodeURIComponent(l)}`)}e(!1)}},[s]),o=b.useCallback(()=>{e(!1)},[]);return{isGlobalSearchOpen:t,setIsGlobalSearchOpen:e,handleGlobalSearch:a,closeGlobalSearch:o}},H5=(t,e={})=>{const{enableProfiling:s=!1,cacheSize:n=100,debounceDelay:i=300,throttleDelay:a=1e3}=e,o=b.useRef(0),l=b.useRef(Date.now()),c=b.useRef(new aN(n)),u=rN();b.useEffect(()=>{o.current+=1;const p=Date.now(),w=p-l.current;l.current=p,s&&(console.log(`🔄 ${t} render #${o.current} (${w}ms since last)`),w<16&&console.warn(`⚠️ ${t} rendering too frequently (${w}ms)`))});const h=b.useCallback((p,w=i)=>C3(p,w),[i]),d=b.useCallback((p,w=a)=>P3(p,w),[a]),f=b.useMemo(()=>({get:p=>c.current.get(p),set:(p,w)=>c.current.set(p,w),clear:()=>c.current.clear(),size:()=>c.current.size()}),[]),y=b.useCallback(()=>({renderCount:o.current,lastRenderTime:l.current,cacheSize:c.current.size(),componentName:t}),[t]);return{debounce:h,throttle:d,cache:f,getMetrics:y,cleanupManager:u}};class Y5{constructor(){this.listeners=new Set,this.currentBalance=1e4,this.isInitialized=!1}async initialize(){if(!this.isInitialized)try{const e=Ee.getPortfolioSummary();this.currentBalance=e.availableCash,Ee.addListener(this.handleTradingServiceUpdate.bind(this)),window.addEventListener("balanceUpdated",this.handleBalanceUpdate.bind(this)),this.isInitialized=!0,console.log("✅ Balance sync manager initialized with balance:",this.currentBalance)}catch(e){console.error("❌ Failed to initialize balance sync manager:",e)}}handleTradingServiceUpdate(e){const s=e.availableCash;s!==this.currentBalance&&(this.currentBalance=s,this.notifyListeners())}handleBalanceUpdate(e){const{newBalance:s}=e.detail;s!==this.currentBalance&&(this.currentBalance=s,this.notifyListeners())}getCurrentBalance(){return this.currentBalance}getFormattedBalance(){return new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2,maximumFractionDigits:2}).format(this.currentBalance)}async updateBalance(e,s="manual"){const n=this.currentBalance;this.currentBalance=e,console.log(`💰 Balance updated from ${s}: ₹${n} → ₹${e}`),Ee.virtualBalance=e,Ee.savePortfolioToStorage(),Ee.notifyListeners(),await this.syncWithServer(),this.notifyListeners(),window.dispatchEvent(new CustomEvent("balanceUpdated",{detail:{newBalance:e,oldBalance:n,change:e-n,source:s}}))}async syncWithServer(){try{const e=localStorage.getItem("token");if(!e)return;(await fetch("http://localhost:5001/api/virtual-money/sync-balance",{method:"POST",headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"},body:JSON.stringify({balance:this.currentBalance,totalRewards:Ee.dailyRewards.totalRewards,loginStreak:Ee.dailyRewards.loginStreak,lastClaimDate:Ee.dailyRewards.lastClaimDate})})).ok?console.log("✅ Balance synced with server successfully"):console.warn("⚠️ Failed to sync balance with server")}catch(e){console.warn("⚠️ Server sync error:",e.message)}}addListener(e){return this.listeners.add(e),e({balance:this.currentBalance,formattedBalance:this.getFormattedBalance()}),()=>this.listeners.delete(e)}removeListener(e){this.listeners.delete(e)}notifyListeners(){const e={balance:this.currentBalance,formattedBalance:this.getFormattedBalance()};this.listeners.forEach(s=>{try{s(e)}catch(n){console.error("Error in balance listener:",n)}})}async forceRefresh(){try{const e=Ee.getPortfolioSummary(),s=localStorage.getItem("token");if(s){const n=await fetch("http://localhost:5001/api/virtual-money/account",{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}});if(n.ok){const a=(await n.json()).data.balance;this.currentBalance=a,Ee.virtualBalance=a,Ee.savePortfolioToStorage()}}this.notifyListeners(),console.log("🔄 Balance force refreshed:",this.currentBalance)}catch(e){console.error("❌ Error force refreshing balance:",e)}}cleanup(){this.listeners.clear(),window.removeEventListener("balanceUpdated",this.handleBalanceUpdate.bind(this)),this.isInitialized=!1}}const q5=new Y5,G5=b.lazy(()=>ZE(()=>import("./PerformanceMonitor-CxpBnIts.js"),[]));function Q5(){const[t,e]=b.useState(null),[s,n]=b.useState(!1),[i,a]=b.useState("light"),[o,l]=b.useState(!0);H5("App");const{isGlobalSearchOpen:c,handleGlobalSearch:u,closeGlobalSearch:h}=W5(),{orderModalState:d,closeOrderModal:f}=og(),[y,p]=b.useState({isOpen:!1,orderData:null,stockData:null,orderSummary:null,profitLossEstimate:null,onConfirm:null,isProcessing:!1}),w=b.useCallback(T=>{p({isOpen:!0,...T,isProcessing:!1})},[]),g=b.useCallback(()=>{p(T=>T.isOpen?{...T,isOpen:!1,isProcessing:!1}:T)},[]),m=b.useRef(null),x=b.useCallback(async()=>{const T=m.current;if(T){p(R=>({...R,isProcessing:!0}));try{await T(),setTimeout(()=>{g()},2e3)}catch(R){console.error("Order confirmation failed:",R),p(M=>({...M,isProcessing:!1}))}}},[g]);b.useEffect(()=>{m.current=y.onConfirm},[y.onConfirm]),b.useEffect(()=>{(async()=>{try{const R=localStorage.getItem("token"),M=localStorage.getItem("user");if(R&&M){const _=await fetch("http://localhost:5001/api/auth/verify",{method:"GET",headers:{Authorization:`Bearer ${R}`,"Content-Type":"application/json"}});if(_.ok){const O=await _.json();e(O.user),n(!0),q5.initialize()}else localStorage.removeItem("token"),localStorage.removeItem("user"),n(!1),e(null)}l(!1)}catch(R){console.error("Auth check failed:",R),localStorage.removeItem("token"),localStorage.removeItem("user"),n(!1),e(null),l(!1)}})()},[]),b.useEffect(()=>{const T=localStorage.getItem("theme")||"light";a(T),document.documentElement.setAttribute("data-theme",T)},[]);const S=b.useCallback(()=>{const T=i==="light"?"dark":"light";a(T),localStorage.setItem("theme",T),document.documentElement.setAttribute("data-theme",T)},[i]),N=b.useCallback((T,R)=>{localStorage.setItem("token",R),localStorage.setItem("user",JSON.stringify(T)),e(T),n(!0),X.success("Welcome back!")},[]),j=b.useCallback(()=>{localStorage.removeItem("token"),localStorage.removeItem("user"),e(null),n(!1),X.info("Logged out successfully")},[]),P=b.useCallback((T,R)=>{localStorage.setItem("token",R),localStorage.setItem("user",JSON.stringify(T)),e(T),n(!0),X.success("Account created successfully!")},[]),E=T=>{e(T),X.success("Profile updated successfully!")};return o?r.jsxs("div",{className:"loading-container",children:[r.jsx("div",{className:"loading-spinner lg"}),r.jsx("p",{className:"loading-text",children:"Loading TradeBro..."})]}):r.jsxs("div",{className:"app",children:[r.jsx(K5,{isAuthenticated:s,user:t,loading:o,theme:i,onLogin:N,onLogout:j,onSignup:P,onUpdateProfile:E,toggleTheme:S,isGlobalSearchOpen:c,handleGlobalSearch:u,closeGlobalSearch:h,orderModalState:d,closeOrderModal:f,handleShowConfirmation:w,confirmationModalState:y,handleCloseConfirmation:g,handleConfirmOrder:x}),r.jsx(Fc,{position:"top-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:i,toastStyle:{background:i==="dark"?"#1F2937":"#FFFFFF",color:i==="dark"?"#F9FAFB":"#111827"}}),r.jsx(b.Suspense,{fallback:null,children:r.jsx(G5,{enabled:!1})})]})}const K5=b.memo(function({isAuthenticated:e,user:s,loading:n,theme:i,onLogin:a,onLogout:o,onSignup:l,onUpdateProfile:c,toggleTheme:u,isGlobalSearchOpen:h,handleGlobalSearch:d,closeGlobalSearch:f,orderModalState:y,closeOrderModal:p,handleShowConfirmation:w,confirmationModalState:g,handleCloseConfirmation:m,handleConfirmOrder:x}){return us(),r.jsxs(r.Fragment,{children:[r.jsx(F5,{}),r.jsx("main",{className:"main-content",children:r.jsx(L5,{isAuthenticated:e,user:s,loading:n,onLogin:a,onSignup:l,onLogout:o,onUpdateProfile:c,theme:i,toggleTheme:u})}),r.jsx(B5,{isAuthenticated:e,user:s}),r.jsx($5,{isOpen:h,onClose:f,onSearch:d}),r.jsx(Fc,{position:"top-right",autoClose:3e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:i==="dark"?"dark":"light",toastStyle:{background:i==="dark"?"var(--bg-secondary)":"var(--bg-elevated)",color:"var(--text-primary)",border:"1px solid var(--border-primary)",borderRadius:"var(--radius-lg)",boxShadow:"var(--shadow-lg)"}}),r.jsx(z5,{}),r.jsx(V5,{}),r.jsx(oN,{isOpen:y.isOpen,onClose:p,stockData:y.stockData,initialOrderType:y.orderType,onOrderPlaced:p,onShowConfirmation:w}),r.jsx(U5,{isOpen:g.isOpen,onClose:m,onConfirm:x,orderData:g.orderData,stockData:g.stockData,orderSummary:g.orderSummary,profitLossEstimate:g.profitLossEstimate,isProcessing:g.isProcessing})]})});function gt(t){return`Minified Redux error #${t}; visit https://redux.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var X5=typeof Symbol=="function"&&Symbol.observable||"@@observable",zx=X5,Id=()=>Math.random().toString(36).substring(7).split("").join("."),J5={INIT:`@@redux/INIT${Id()}`,REPLACE:`@@redux/REPLACE${Id()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Id()}`},Kc=J5;function Sg(t){if(typeof t!="object"||t===null)return!1;let e=t;for(;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(t)===e||Object.getPrototypeOf(t)===null}function bg(t,e,s){if(typeof t!="function")throw new Error(gt(2));if(typeof e=="function"&&typeof s=="function"||typeof s=="function"&&typeof arguments[3]=="function")throw new Error(gt(0));if(typeof e=="function"&&typeof s>"u"&&(s=e,e=void 0),typeof s<"u"){if(typeof s!="function")throw new Error(gt(1));return s(bg)(t,e)}let n=t,i=e,a=new Map,o=a,l=0,c=!1;function u(){o===a&&(o=new Map,a.forEach((g,m)=>{o.set(m,g)}))}function h(){if(c)throw new Error(gt(3));return i}function d(g){if(typeof g!="function")throw new Error(gt(4));if(c)throw new Error(gt(5));let m=!0;u();const x=l++;return o.set(x,g),function(){if(m){if(c)throw new Error(gt(6));m=!1,u(),o.delete(x),a=null}}}function f(g){if(!Sg(g))throw new Error(gt(7));if(typeof g.type>"u")throw new Error(gt(8));if(typeof g.type!="string")throw new Error(gt(17));if(c)throw new Error(gt(9));try{c=!0,i=n(i,g)}finally{c=!1}return(a=o).forEach(x=>{x()}),g}function y(g){if(typeof g!="function")throw new Error(gt(10));n=g,f({type:Kc.REPLACE})}function p(){const g=d;return{subscribe(m){if(typeof m!="object"||m===null)throw new Error(gt(11));function x(){const N=m;N.next&&N.next(h())}return x(),{unsubscribe:g(x)}},[zx](){return this}}}return f({type:Kc.INIT}),{dispatch:f,subscribe:d,getState:h,replaceReducer:y,[zx]:p}}function Z5(t){Object.keys(t).forEach(e=>{const s=t[e];if(typeof s(void 0,{type:Kc.INIT})>"u")throw new Error(gt(12));if(typeof s(void 0,{type:Kc.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(gt(13))})}function MN(t){const e=Object.keys(t),s={};for(let a=0;a<e.length;a++){const o=e[a];typeof t[o]=="function"&&(s[o]=t[o])}const n=Object.keys(s);let i;try{Z5(s)}catch(a){i=a}return function(o={},l){if(i)throw i;let c=!1;const u={};for(let h=0;h<n.length;h++){const d=n[h],f=s[d],y=o[d],p=f(y,l);if(typeof p>"u")throw l&&l.type,new Error(gt(14));u[d]=p,c=c||p!==y}return c=c||n.length!==Object.keys(o).length,c?u:o}}function Xc(...t){return t.length===0?e=>e:t.length===1?t[0]:t.reduce((e,s)=>(...n)=>e(s(...n)))}function e4(...t){return e=>(s,n)=>{const i=e(s,n);let a=()=>{throw new Error(gt(15))};const o={getState:i.getState,dispatch:(c,...u)=>a(c,...u)},l=t.map(c=>c(o));return a=Xc(...l)(i.dispatch),{...i,dispatch:a}}}function t4(t){return Sg(t)&&"type"in t&&typeof t.type=="string"}var IN=Symbol.for("immer-nothing"),Vx=Symbol.for("immer-draftable"),as=Symbol.for("immer-state");function _s(t,...e){throw new Error(`[Immer] minified error nr: ${t}. Full error at: https://bit.ly/3cXEKWf`)}var Jr=Object.getPrototypeOf;function Gi(t){return!!t&&!!t[as]}function mn(t){var e;return t?AN(t)||Array.isArray(t)||!!t[Vx]||!!((e=t.constructor)!=null&&e[Vx])||eh(t)||th(t):!1}var s4=Object.prototype.constructor.toString();function AN(t){if(!t||typeof t!="object")return!1;const e=Jr(t);if(e===null)return!0;const s=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return s===Object?!0:typeof s=="function"&&Function.toString.call(s)===s4}function Jc(t,e){Zu(t)===0?Reflect.ownKeys(t).forEach(s=>{e(s,t[s],t)}):t.forEach((s,n)=>e(n,s,t))}function Zu(t){const e=t[as];return e?e.type_:Array.isArray(t)?1:eh(t)?2:th(t)?3:0}function Pm(t,e){return Zu(t)===2?t.has(e):Object.prototype.hasOwnProperty.call(t,e)}function ON(t,e,s){const n=Zu(t);n===2?t.set(e,s):n===3?t.add(s):t[e]=s}function n4(t,e){return t===e?t!==0||1/t===1/e:t!==t&&e!==e}function eh(t){return t instanceof Map}function th(t){return t instanceof Set}function vi(t){return t.copy_||t.base_}function Tm(t,e){if(eh(t))return new Map(t);if(th(t))return new Set(t);if(Array.isArray(t))return Array.prototype.slice.call(t);const s=AN(t);if(e===!0||e==="class_only"&&!s){const n=Object.getOwnPropertyDescriptors(t);delete n[as];let i=Reflect.ownKeys(n);for(let a=0;a<i.length;a++){const o=i[a],l=n[o];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(n[o]={configurable:!0,writable:!0,enumerable:l.enumerable,value:t[o]})}return Object.create(Jr(t),n)}else{const n=Jr(t);if(n!==null&&s)return{...t};const i=Object.create(n);return Object.assign(i,t)}}function jg(t,e=!1){return sh(t)||Gi(t)||!mn(t)||(Zu(t)>1&&(t.set=t.add=t.clear=t.delete=i4),Object.freeze(t),e&&Object.entries(t).forEach(([s,n])=>jg(n,!0))),t}function i4(){_s(2)}function sh(t){return Object.isFrozen(t)}var r4={};function Qi(t){const e=r4[t];return e||_s(0,t),e}var Po;function DN(){return Po}function a4(t,e){return{drafts_:[],parent_:t,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Ux(t,e){e&&(Qi("Patches"),t.patches_=[],t.inversePatches_=[],t.patchListener_=e)}function Em(t){Lm(t),t.drafts_.forEach(o4),t.drafts_=null}function Lm(t){t===Po&&(Po=t.parent_)}function Wx(t){return Po=a4(Po,t)}function o4(t){const e=t[as];e.type_===0||e.type_===1?e.revoke_():e.revoked_=!0}function Hx(t,e){e.unfinalizedDrafts_=e.drafts_.length;const s=e.drafts_[0];return t!==void 0&&t!==s?(s[as].modified_&&(Em(e),_s(4)),mn(t)&&(t=Zc(e,t),e.parent_||eu(e,t)),e.patches_&&Qi("Patches").generateReplacementPatches_(s[as].base_,t,e.patches_,e.inversePatches_)):t=Zc(e,s,[]),Em(e),e.patches_&&e.patchListener_(e.patches_,e.inversePatches_),t!==IN?t:void 0}function Zc(t,e,s){if(sh(e))return e;const n=e[as];if(!n)return Jc(e,(i,a)=>Yx(t,n,e,i,a,s)),e;if(n.scope_!==t)return e;if(!n.modified_)return eu(t,n.base_,!0),n.base_;if(!n.finalized_){n.finalized_=!0,n.scope_.unfinalizedDrafts_--;const i=n.copy_;let a=i,o=!1;n.type_===3&&(a=new Set(i),i.clear(),o=!0),Jc(a,(l,c)=>Yx(t,n,i,l,c,s,o)),eu(t,i,!1),s&&t.patches_&&Qi("Patches").generatePatches_(n,s,t.patches_,t.inversePatches_)}return n.copy_}function Yx(t,e,s,n,i,a,o){if(Gi(i)){const l=a&&e&&e.type_!==3&&!Pm(e.assigned_,n)?a.concat(n):void 0,c=Zc(t,i,l);if(ON(s,n,c),Gi(c))t.canAutoFreeze_=!1;else return}else o&&s.add(i);if(mn(i)&&!sh(i)){if(!t.immer_.autoFreeze_&&t.unfinalizedDrafts_<1)return;Zc(t,i),(!e||!e.scope_.parent_)&&typeof n!="symbol"&&Object.prototype.propertyIsEnumerable.call(s,n)&&eu(t,i)}}function eu(t,e,s=!1){!t.parent_&&t.immer_.autoFreeze_&&t.canAutoFreeze_&&jg(e,s)}function l4(t,e){const s=Array.isArray(t),n={type_:s?1:0,scope_:e?e.scope_:DN(),modified_:!1,finalized_:!1,assigned_:{},parent_:e,base_:t,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=n,a=Ng;s&&(i=[n],a=To);const{revoke:o,proxy:l}=Proxy.revocable(i,a);return n.draft_=l,n.revoke_=o,l}var Ng={get(t,e){if(e===as)return t;const s=vi(t);if(!Pm(s,e))return c4(t,s,e);const n=s[e];return t.finalized_||!mn(n)?n:n===Ad(t.base_,e)?(Od(t),t.copy_[e]=Rm(n,t)):n},has(t,e){return e in vi(t)},ownKeys(t){return Reflect.ownKeys(vi(t))},set(t,e,s){const n=FN(vi(t),e);if(n!=null&&n.set)return n.set.call(t.draft_,s),!0;if(!t.modified_){const i=Ad(vi(t),e),a=i==null?void 0:i[as];if(a&&a.base_===s)return t.copy_[e]=s,t.assigned_[e]=!1,!0;if(n4(s,i)&&(s!==void 0||Pm(t.base_,e)))return!0;Od(t),_m(t)}return t.copy_[e]===s&&(s!==void 0||e in t.copy_)||Number.isNaN(s)&&Number.isNaN(t.copy_[e])||(t.copy_[e]=s,t.assigned_[e]=!0),!0},deleteProperty(t,e){return Ad(t.base_,e)!==void 0||e in t.base_?(t.assigned_[e]=!1,Od(t),_m(t)):delete t.assigned_[e],t.copy_&&delete t.copy_[e],!0},getOwnPropertyDescriptor(t,e){const s=vi(t),n=Reflect.getOwnPropertyDescriptor(s,e);return n&&{writable:!0,configurable:t.type_!==1||e!=="length",enumerable:n.enumerable,value:s[e]}},defineProperty(){_s(11)},getPrototypeOf(t){return Jr(t.base_)},setPrototypeOf(){_s(12)}},To={};Jc(Ng,(t,e)=>{To[t]=function(){return arguments[0]=arguments[0][0],e.apply(this,arguments)}});To.deleteProperty=function(t,e){return To.set.call(this,t,e,void 0)};To.set=function(t,e,s){return Ng.set.call(this,t[0],e,s,t[0])};function Ad(t,e){const s=t[as];return(s?vi(s):t)[e]}function c4(t,e,s){var i;const n=FN(e,s);return n?"value"in n?n.value:(i=n.get)==null?void 0:i.call(t.draft_):void 0}function FN(t,e){if(!(e in t))return;let s=Jr(t);for(;s;){const n=Object.getOwnPropertyDescriptor(s,e);if(n)return n;s=Jr(s)}}function _m(t){t.modified_||(t.modified_=!0,t.parent_&&_m(t.parent_))}function Od(t){t.copy_||(t.copy_=Tm(t.base_,t.scope_.immer_.useStrictShallowCopy_))}var u4=class{constructor(t){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,s,n)=>{if(typeof e=="function"&&typeof s!="function"){const a=s;s=e;const o=this;return function(c=a,...u){return o.produce(c,h=>s.call(this,h,...u))}}typeof s!="function"&&_s(6),n!==void 0&&typeof n!="function"&&_s(7);let i;if(mn(e)){const a=Wx(this),o=Rm(e,void 0);let l=!0;try{i=s(o),l=!1}finally{l?Em(a):Lm(a)}return Ux(a,n),Hx(i,a)}else if(!e||typeof e!="object"){if(i=s(e),i===void 0&&(i=e),i===IN&&(i=void 0),this.autoFreeze_&&jg(i,!0),n){const a=[],o=[];Qi("Patches").generateReplacementPatches_(e,i,a,o),n(a,o)}return i}else _s(1,e)},this.produceWithPatches=(e,s)=>{if(typeof e=="function")return(o,...l)=>this.produceWithPatches(o,c=>e(c,...l));let n,i;return[this.produce(e,s,(o,l)=>{n=o,i=l}),n,i]},typeof(t==null?void 0:t.autoFreeze)=="boolean"&&this.setAutoFreeze(t.autoFreeze),typeof(t==null?void 0:t.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(t.useStrictShallowCopy)}createDraft(t){mn(t)||_s(8),Gi(t)&&(t=h4(t));const e=Wx(this),s=Rm(t,void 0);return s[as].isManual_=!0,Lm(e),s}finishDraft(t,e){const s=t&&t[as];(!s||!s.isManual_)&&_s(9);const{scope_:n}=s;return Ux(n,e),Hx(void 0,n)}setAutoFreeze(t){this.autoFreeze_=t}setUseStrictShallowCopy(t){this.useStrictShallowCopy_=t}applyPatches(t,e){let s;for(s=e.length-1;s>=0;s--){const i=e[s];if(i.path.length===0&&i.op==="replace"){t=i.value;break}}s>-1&&(e=e.slice(s+1));const n=Qi("Patches").applyPatches_;return Gi(t)?n(t,e):this.produce(t,i=>n(i,e))}};function Rm(t,e){const s=eh(t)?Qi("MapSet").proxyMap_(t,e):th(t)?Qi("MapSet").proxySet_(t,e):l4(t,e);return(e?e.scope_:DN()).drafts_.push(s),s}function h4(t){return Gi(t)||_s(10,t),BN(t)}function BN(t){if(!mn(t)||sh(t))return t;const e=t[as];let s;if(e){if(!e.modified_)return e.base_;e.finalized_=!0,s=Tm(t,e.scope_.immer_.useStrictShallowCopy_)}else s=Tm(t,!0);return Jc(s,(n,i)=>{ON(s,n,BN(i))}),e&&(e.finalized_=!1),s}var os=new u4,$N=os.produce;os.produceWithPatches.bind(os);os.setAutoFreeze.bind(os);os.setUseStrictShallowCopy.bind(os);os.applyPatches.bind(os);os.createDraft.bind(os);os.finishDraft.bind(os);function zN(t){return({dispatch:s,getState:n})=>i=>a=>typeof a=="function"?a(s,n,t):i(a)}var d4=zN(),f4=zN,m4=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?Xc:Xc.apply(null,arguments)},p4=t=>t&&typeof t.match=="function";function Xa(t,e){function s(...n){if(e){let i=e(...n);if(!i)throw new Error(ln(0));return{type:t,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:t,payload:n[0]}}return s.toString=()=>`${t}`,s.type=t,s.match=n=>t4(n)&&n.type===t,s}var VN=class _a extends Array{constructor(...e){super(...e),Object.setPrototypeOf(this,_a.prototype)}static get[Symbol.species](){return _a}concat(...e){return super.concat.apply(this,e)}prepend(...e){return e.length===1&&Array.isArray(e[0])?new _a(...e[0].concat(this)):new _a(...e.concat(this))}};function qx(t){return mn(t)?$N(t,()=>{}):t}function Ll(t,e,s){return t.has(e)?t.get(e):t.set(e,s(e)).get(e)}function g4(t){return typeof t=="boolean"}var y4=()=>function(e){const{thunk:s=!0,immutableCheck:n=!0,serializableCheck:i=!0,actionCreatorCheck:a=!0}=e??{};let o=new VN;return s&&(g4(s)?o.push(d4):o.push(f4(s.extraArgument))),o},v4="RTK_autoBatch",Gx=t=>e=>{setTimeout(e,t)},x4=(t={type:"raf"})=>e=>(...s)=>{const n=e(...s);let i=!0,a=!1,o=!1;const l=new Set,c=t.type==="tick"?queueMicrotask:t.type==="raf"?typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:Gx(10):t.type==="callback"?t.queueNotification:Gx(t.timeout),u=()=>{o=!1,a&&(a=!1,l.forEach(h=>h()))};return Object.assign({},n,{subscribe(h){const d=()=>i&&h(),f=n.subscribe(d);return l.add(h),()=>{f(),l.delete(h)}},dispatch(h){var d;try{return i=!((d=h==null?void 0:h.meta)!=null&&d[v4]),a=!i,a&&(o||(o=!0,c(u))),n.dispatch(h)}finally{i=!0}}})},w4=t=>function(s){const{autoBatch:n=!0}=s??{};let i=new VN(t);return n&&i.push(x4(typeof n=="object"?n:void 0)),i};function S4(t){const e=y4(),{reducer:s=void 0,middleware:n,devTools:i=!0,preloadedState:a=void 0,enhancers:o=void 0}=t||{};let l;if(typeof s=="function")l=s;else if(Sg(s))l=MN(s);else throw new Error(ln(1));let c;typeof n=="function"?c=n(e):c=e();let u=Xc;i&&(u=m4({trace:!1,...typeof i=="object"&&i}));const h=e4(...c),d=w4(h);let f=typeof o=="function"?o(d):d();const y=u(...f);return bg(l,a,y)}function UN(t){const e={},s=[];let n;const i={addCase(a,o){const l=typeof a=="string"?a:a.type;if(!l)throw new Error(ln(28));if(l in e)throw new Error(ln(29));return e[l]=o,i},addMatcher(a,o){return s.push({matcher:a,reducer:o}),i},addDefaultCase(a){return n=a,i}};return t(i),[e,s,n]}function b4(t){return typeof t=="function"}function j4(t,e){let[s,n,i]=UN(e),a;if(b4(t))a=()=>qx(t());else{const l=qx(t);a=()=>l}function o(l=a(),c){let u=[s[c.type],...n.filter(({matcher:h})=>h(c)).map(({reducer:h})=>h)];return u.filter(h=>!!h).length===0&&(u=[i]),u.reduce((h,d)=>{if(d)if(Gi(h)){const y=d(h,c);return y===void 0?h:y}else{if(mn(h))return $N(h,f=>d(f,c));{const f=d(h,c);if(f===void 0){if(h===null)return h;throw Error("A case reducer on a non-draftable value must not return undefined")}return f}}return h},l)}return o.getInitialState=a,o}var N4=(t,e)=>p4(t)?t.match(e):t(e);function k4(...t){return e=>t.some(s=>N4(s,e))}var C4="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",P4=(t=21)=>{let e="",s=t;for(;s--;)e+=C4[Math.random()*64|0];return e},T4=["name","message","stack","code"],Dd=class{constructor(t,e){vh(this,"_type");this.payload=t,this.meta=e}},Qx=class{constructor(t,e){vh(this,"_type");this.payload=t,this.meta=e}},E4=t=>{if(typeof t=="object"&&t!==null){const e={};for(const s of T4)typeof t[s]=="string"&&(e[s]=t[s]);return e}return{message:String(t)}},Kx="External signal was aborted",_e=(()=>{function t(e,s,n){const i=Xa(e+"/fulfilled",(c,u,h,d)=>({payload:c,meta:{...d||{},arg:h,requestId:u,requestStatus:"fulfilled"}})),a=Xa(e+"/pending",(c,u,h)=>({payload:void 0,meta:{...h||{},arg:u,requestId:c,requestStatus:"pending"}})),o=Xa(e+"/rejected",(c,u,h,d,f)=>({payload:d,error:(n&&n.serializeError||E4)(c||"Rejected"),meta:{...f||{},arg:h,requestId:u,rejectedWithValue:!!d,requestStatus:"rejected",aborted:(c==null?void 0:c.name)==="AbortError",condition:(c==null?void 0:c.name)==="ConditionError"}}));function l(c,{signal:u}={}){return(h,d,f)=>{const y=n!=null&&n.idGenerator?n.idGenerator(c):P4(),p=new AbortController;let w,g;function m(S){g=S,p.abort()}u&&(u.aborted?m(Kx):u.addEventListener("abort",()=>m(Kx),{once:!0}));const x=async function(){var j,P;let S;try{let E=(j=n==null?void 0:n.condition)==null?void 0:j.call(n,c,{getState:d,extra:f});if(_4(E)&&(E=await E),E===!1||p.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const T=new Promise((R,M)=>{w=()=>{M({name:"AbortError",message:g||"Aborted"})},p.signal.addEventListener("abort",w)});h(a(y,c,(P=n==null?void 0:n.getPendingMeta)==null?void 0:P.call(n,{requestId:y,arg:c},{getState:d,extra:f}))),S=await Promise.race([T,Promise.resolve(s(c,{dispatch:h,getState:d,extra:f,requestId:y,signal:p.signal,abort:m,rejectWithValue:(R,M)=>new Dd(R,M),fulfillWithValue:(R,M)=>new Qx(R,M)})).then(R=>{if(R instanceof Dd)throw R;return R instanceof Qx?i(R.payload,y,c,R.meta):i(R,y,c)})])}catch(E){S=E instanceof Dd?o(null,y,c,E.payload,E.meta):o(E,y,c)}finally{w&&p.signal.removeEventListener("abort",w)}return n&&!n.dispatchConditionRejection&&o.match(S)&&S.meta.condition||h(S),S}();return Object.assign(x,{abort:m,requestId:y,arg:c,unwrap(){return x.then(L4)}})}}return Object.assign(l,{pending:a,rejected:o,fulfilled:i,settled:k4(o,i),typePrefix:e})}return t.withTypes=()=>t,t})();function L4(t){if(t.meta&&t.meta.rejectedWithValue)throw t.payload;if(t.error)throw t.error;return t.payload}function _4(t){return t!==null&&typeof t=="object"&&typeof t.then=="function"}var R4=Symbol.for("rtk-slice-createasyncthunk");function M4(t,e){return`${t}/${e}`}function I4({creators:t}={}){var s;const e=(s=t==null?void 0:t.asyncThunk)==null?void 0:s[R4];return function(i){const{name:a,reducerPath:o=a}=i;if(!a)throw new Error(ln(11));const l=(typeof i.reducers=="function"?i.reducers(O4()):i.reducers)||{},c=Object.keys(l),u={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},h={addCase(N,j){const P=typeof N=="string"?N:N.type;if(!P)throw new Error(ln(12));if(P in u.sliceCaseReducersByType)throw new Error(ln(13));return u.sliceCaseReducersByType[P]=j,h},addMatcher(N,j){return u.sliceMatchers.push({matcher:N,reducer:j}),h},exposeAction(N,j){return u.actionCreators[N]=j,h},exposeCaseReducer(N,j){return u.sliceCaseReducersByName[N]=j,h}};c.forEach(N=>{const j=l[N],P={reducerName:N,type:M4(a,N),createNotation:typeof i.reducers=="function"};F4(j)?$4(P,j,h,e):D4(P,j,h)});function d(){const[N={},j=[],P=void 0]=typeof i.extraReducers=="function"?UN(i.extraReducers):[i.extraReducers],E={...N,...u.sliceCaseReducersByType};return j4(i.initialState,T=>{for(let R in E)T.addCase(R,E[R]);for(let R of u.sliceMatchers)T.addMatcher(R.matcher,R.reducer);for(let R of j)T.addMatcher(R.matcher,R.reducer);P&&T.addDefaultCase(P)})}const f=N=>N,y=new Map,p=new WeakMap;let w;function g(N,j){return w||(w=d()),w(N,j)}function m(){return w||(w=d()),w.getInitialState()}function x(N,j=!1){function P(T){let R=T[N];return typeof R>"u"&&j&&(R=Ll(p,P,m)),R}function E(T=f){const R=Ll(y,j,()=>new WeakMap);return Ll(R,T,()=>{const M={};for(const[_,O]of Object.entries(i.selectors??{}))M[_]=A4(O,T,()=>Ll(p,T,m),j);return M})}return{reducerPath:N,getSelectors:E,get selectors(){return E(P)},selectSlice:P}}const S={name:a,reducer:g,actions:u.actionCreators,caseReducers:u.sliceCaseReducersByName,getInitialState:m,...x(o),injectInto(N,{reducerPath:j,...P}={}){const E=j??o;return N.inject({reducerPath:E,reducer:g},P),{...S,...x(E,!0)}}};return S}}function A4(t,e,s,n){function i(a,...o){let l=e(a);return typeof l>"u"&&n&&(l=s()),t(l,...o)}return i.unwrapped=t,i}var ii=I4();function O4(){function t(e,s){return{_reducerDefinitionType:"asyncThunk",payloadCreator:e,...s}}return t.withTypes=()=>t,{reducer(e){return Object.assign({[e.name](...s){return e(...s)}}[e.name],{_reducerDefinitionType:"reducer"})},preparedReducer(e,s){return{_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:s}},asyncThunk:t}}function D4({type:t,reducerName:e,createNotation:s},n,i){let a,o;if("reducer"in n){if(s&&!B4(n))throw new Error(ln(17));a=n.reducer,o=n.prepare}else a=n;i.addCase(t,a).exposeCaseReducer(e,a).exposeAction(e,o?Xa(t,o):Xa(t))}function F4(t){return t._reducerDefinitionType==="asyncThunk"}function B4(t){return t._reducerDefinitionType==="reducerWithPrepare"}function $4({type:t,reducerName:e},s,n,i){if(!i)throw new Error(ln(18));const{payloadCreator:a,fulfilled:o,pending:l,rejected:c,settled:u,options:h}=s,d=i(t,a,h);n.exposeAction(e,d),o&&n.addCase(d.fulfilled,o),l&&n.addCase(d.pending,l),c&&n.addCase(d.rejected,c),u&&n.addMatcher(d.settled,u),n.exposeCaseReducer(e,{fulfilled:o||_l,pending:l||_l,rejected:c||_l,settled:u||_l})}function _l(){}function ln(t){return`Minified Redux Toolkit error #${t}; visit https://redux-toolkit.js.org/Errors?code=${t} for the full message or use the non-minified dev environment for full errors. `}var kg="persist:",WN="persist/FLUSH",Cg="persist/REHYDRATE",HN="persist/PAUSE",YN="persist/PERSIST",qN="persist/PURGE",GN="persist/REGISTER",z4=-1;function tc(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?tc=function(s){return typeof s}:tc=function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},tc(t)}function Xx(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),s.push.apply(s,n)}return s}function V4(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?Xx(s,!0).forEach(function(n){U4(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):Xx(s).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function U4(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function W4(t,e,s,n){n.debug;var i=V4({},s);return t&&tc(t)==="object"&&Object.keys(t).forEach(function(a){a!=="_persist"&&e[a]===s[a]&&(i[a]=t[a])}),i}function H4(t){var e=t.blacklist||null,s=t.whitelist||null,n=t.transforms||[],i=t.throttle||0,a="".concat(t.keyPrefix!==void 0?t.keyPrefix:kg).concat(t.key),o=t.storage,l;t.serialize===!1?l=function(j){return j}:typeof t.serialize=="function"?l=t.serialize:l=Y4;var c=t.writeFailHandler||null,u={},h={},d=[],f=null,y=null,p=function(j){Object.keys(j).forEach(function(P){m(P)&&u[P]!==j[P]&&d.indexOf(P)===-1&&d.push(P)}),Object.keys(u).forEach(function(P){j[P]===void 0&&m(P)&&d.indexOf(P)===-1&&u[P]!==void 0&&d.push(P)}),f===null&&(f=setInterval(w,i)),u=j};function w(){if(d.length===0){f&&clearInterval(f),f=null;return}var N=d.shift(),j=n.reduce(function(P,E){return E.in(P,N,u)},u[N]);if(j!==void 0)try{h[N]=l(j)}catch(P){console.error("redux-persist/createPersistoid: error serializing state",P)}else delete h[N];d.length===0&&g()}function g(){Object.keys(h).forEach(function(N){u[N]===void 0&&delete h[N]}),y=o.setItem(a,l(h)).catch(x)}function m(N){return!(s&&s.indexOf(N)===-1&&N!=="_persist"||e&&e.indexOf(N)!==-1)}function x(N){c&&c(N)}var S=function(){for(;d.length!==0;)w();return y||Promise.resolve()};return{update:p,flush:S}}function Y4(t){return JSON.stringify(t)}function q4(t){var e=t.transforms||[],s="".concat(t.keyPrefix!==void 0?t.keyPrefix:kg).concat(t.key),n=t.storage;t.debug;var i;return t.deserialize===!1?i=function(o){return o}:typeof t.deserialize=="function"?i=t.deserialize:i=G4,n.getItem(s).then(function(a){if(a)try{var o={},l=i(a);return Object.keys(l).forEach(function(c){o[c]=e.reduceRight(function(u,h){return h.out(u,c,l)},i(l[c]))}),o}catch(c){throw c}else return})}function G4(t){return JSON.parse(t)}function Q4(t){var e=t.storage,s="".concat(t.keyPrefix!==void 0?t.keyPrefix:kg).concat(t.key);return e.removeItem(s,K4)}function K4(t){}function Jx(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),s.push.apply(s,n)}return s}function Ks(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?Jx(s,!0).forEach(function(n){X4(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):Jx(s).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function X4(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}function J4(t,e){if(t==null)return{};var s=Z4(t,e),n,i;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(i=0;i<a.length;i++)n=a[i],!(e.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(t,n)&&(s[n]=t[n])}return s}function Z4(t,e){if(t==null)return{};var s={},n=Object.keys(t),i,a;for(a=0;a<n.length;a++)i=n[a],!(e.indexOf(i)>=0)&&(s[i]=t[i]);return s}var eB=5e3;function tB(t,e){var s=t.version!==void 0?t.version:z4;t.debug;var n=t.stateReconciler===void 0?W4:t.stateReconciler,i=t.getStoredState||q4,a=t.timeout!==void 0?t.timeout:eB,o=null,l=!1,c=!0,u=function(d){return d._persist.rehydrated&&o&&!c&&o.update(d),d};return function(h,d){var f=h||{},y=f._persist,p=J4(f,["_persist"]),w=p;if(d.type===YN){var g=!1,m=function(T,R){g||(d.rehydrate(t.key,T,R),g=!0)};if(a&&setTimeout(function(){!g&&m(void 0,new Error('redux-persist: persist timed out for persist key "'.concat(t.key,'"')))},a),c=!1,o||(o=H4(t)),y)return Ks({},e(w,d),{_persist:y});if(typeof d.rehydrate!="function"||typeof d.register!="function")throw new Error("redux-persist: either rehydrate or register is not a function on the PERSIST action. This can happen if the action is being replayed. This is an unexplored use case, please open an issue and we will figure out a resolution.");return d.register(t.key),i(t).then(function(E){var T=t.migrate||function(R,M){return Promise.resolve(R)};T(E,s).then(function(R){m(R)},function(R){m(void 0,R)})},function(E){m(void 0,E)}),Ks({},e(w,d),{_persist:{version:s,rehydrated:!1}})}else{if(d.type===qN)return l=!0,d.result(Q4(t)),Ks({},e(w,d),{_persist:y});if(d.type===WN)return d.result(o&&o.flush()),Ks({},e(w,d),{_persist:y});if(d.type===HN)c=!0;else if(d.type===Cg){if(l)return Ks({},w,{_persist:Ks({},y,{rehydrated:!0})});if(d.key===t.key){var x=e(w,d),S=d.payload,N=n!==!1&&S!==void 0?n(S,h,x,t):x,j=Ks({},N,{_persist:Ks({},y,{rehydrated:!0})});return u(j)}}}if(!y)return e(h,d);var P=e(w,d);return P===w?h:u(Ks({},P,{_persist:y}))}}function Zx(t){return iB(t)||nB(t)||sB()}function sB(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function nB(t){if(Symbol.iterator in Object(t)||Object.prototype.toString.call(t)==="[object Arguments]")return Array.from(t)}function iB(t){if(Array.isArray(t)){for(var e=0,s=new Array(t.length);e<t.length;e++)s[e]=t[e];return s}}function ew(t,e){var s=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),s.push.apply(s,n)}return s}function Mm(t){for(var e=1;e<arguments.length;e++){var s=arguments[e]!=null?arguments[e]:{};e%2?ew(s,!0).forEach(function(n){rB(t,n,s[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(s)):ew(s).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(s,n))})}return t}function rB(t,e,s){return e in t?Object.defineProperty(t,e,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[e]=s,t}var QN={registry:[],bootstrapped:!1},aB=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:QN,s=arguments.length>1?arguments[1]:void 0;switch(s.type){case GN:return Mm({},e,{registry:[].concat(Zx(e.registry),[s.key])});case Cg:var n=e.registry.indexOf(s.key),i=Zx(e.registry);return i.splice(n,1),Mm({},e,{registry:i,bootstrapped:i.length===0});default:return e}};function oB(t,e,s){var n=bg(aB,QN,void 0),i=function(c){n.dispatch({type:GN,key:c})},a=function(c,u,h){var d={type:Cg,payload:u,err:h,key:c};t.dispatch(d),n.dispatch(d)},o=Mm({},n,{purge:function(){var c=[];return t.dispatch({type:qN,result:function(h){c.push(h)}}),Promise.all(c)},flush:function(){var c=[];return t.dispatch({type:WN,result:function(h){c.push(h)}}),Promise.all(c)},pause:function(){t.dispatch({type:HN})},persist:function(){t.dispatch({type:YN,register:i,rehydrate:a})}});return o.persist(),o}var Pg={},Tg={};Tg.__esModule=!0;Tg.default=uB;function sc(t){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?sc=function(s){return typeof s}:sc=function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},sc(t)}function Fd(){}var lB={getItem:Fd,setItem:Fd,removeItem:Fd};function cB(t){if((typeof self>"u"?"undefined":sc(self))!=="object"||!(t in self))return!1;try{var e=self[t],s="redux-persist ".concat(t," test");e.setItem(s,"test"),e.getItem(s),e.removeItem(s)}catch{return!1}return!0}function uB(t){var e="".concat(t,"Storage");return cB(e)?self[e]:lB}Pg.__esModule=!0;Pg.default=fB;var hB=dB(Tg);function dB(t){return t&&t.__esModule?t:{default:t}}function fB(t){var e=(0,hB.default)(t);return{getItem:function(n){return new Promise(function(i,a){i(e.getItem(n))})},setItem:function(n,i){return new Promise(function(a,o){a(e.setItem(n,i))})},removeItem:function(n){return new Promise(function(i,a){i(e.removeItem(n))})}}}var KN=void 0,mB=pB(Pg);function pB(t){return t&&t.__esModule?t:{default:t}}var gB=(0,mB.default)("local");KN=gB;const yB={user:null,token:localStorage.getItem("token"),isAuthenticated:!1,isLoading:!1,error:null,virtualMoney:0,registrationBonus:1e4},Bd=_e("auth/loginUser",async(t,{rejectWithValue:e})=>{try{const s=await zo.login(t);return s.success?(localStorage.setItem("token",s.data.token),localStorage.setItem("user",JSON.stringify(s.data.user)),s.data):e(s.message)}catch(s){return e(s.message||"Login failed")}}),$d=_e("auth/registerUser",async(t,{rejectWithValue:e})=>{try{const s=await zo.register(t);return s.success?(localStorage.setItem("token",s.data.token),localStorage.setItem("user",JSON.stringify(s.data.user)),{...s.data,virtualMoney:1e4}):e(s.message)}catch(s){return e(s.message||"Registration failed")}}),zd=_e("auth/googleAuth",async(t,{rejectWithValue:e})=>{try{const s=await zo.googleAuth(t);return s.success?(localStorage.setItem("token",s.data.token),localStorage.setItem("user",JSON.stringify(s.data.user)),{...s.data,virtualMoney:s.data.isNewUser?1e4:s.data.virtualMoney||0}):e(s.message)}catch(s){return e(s.message||"Google authentication failed")}}),vB=_e("auth/logoutUser",async(t,{rejectWithValue:e})=>{try{return await zo.logout(),localStorage.removeItem("token"),localStorage.removeItem("user"),!0}catch{return localStorage.removeItem("token"),localStorage.removeItem("user"),!0}}),xB=_e("auth/refreshToken",async(t,{rejectWithValue:e})=>{try{const s=await zo.refreshToken();return s.success?(localStorage.setItem("token",s.data.token),s.data):e(s.message)}catch(s){return e(s.message||"Token refresh failed")}}),XN=ii({name:"auth",initialState:yB,reducers:{clearError:t=>{t.error=null},setUser:(t,e)=>{t.user=e.payload,t.isAuthenticated=!!e.payload},updateVirtualMoney:(t,e)=>{t.virtualMoney=e.payload,t.user&&(t.user.virtualMoney=e.payload)},addVirtualMoney:(t,e)=>{t.virtualMoney+=e.payload,t.user&&(t.user.virtualMoney=t.virtualMoney)},subtractVirtualMoney:(t,e)=>{t.virtualMoney=Math.max(0,t.virtualMoney-e.payload),t.user&&(t.user.virtualMoney=t.virtualMoney)},initializeAuth:t=>{const e=localStorage.getItem("token"),s=localStorage.getItem("user");if(e&&s)try{const n=JSON.parse(s);t.token=e,t.user=n,t.isAuthenticated=!0,t.virtualMoney=n.virtualMoney||0}catch{localStorage.removeItem("token"),localStorage.removeItem("user")}}},extraReducers:t=>{t.addCase(Bd.pending,e=>{e.isLoading=!0,e.error=null}).addCase(Bd.fulfilled,(e,s)=>{e.isLoading=!1,e.user=s.payload.user,e.token=s.payload.token,e.isAuthenticated=!0,e.virtualMoney=s.payload.user.virtualMoney||0,e.error=null}).addCase(Bd.rejected,(e,s)=>{e.isLoading=!1,e.error=s.payload,e.isAuthenticated=!1}).addCase($d.pending,e=>{e.isLoading=!0,e.error=null}).addCase($d.fulfilled,(e,s)=>{e.isLoading=!1,e.user=s.payload.user,e.token=s.payload.token,e.isAuthenticated=!0,e.virtualMoney=1e4,e.error=null}).addCase($d.rejected,(e,s)=>{e.isLoading=!1,e.error=s.payload,e.isAuthenticated=!1}).addCase(zd.pending,e=>{e.isLoading=!0,e.error=null}).addCase(zd.fulfilled,(e,s)=>{e.isLoading=!1,e.user=s.payload.user,e.token=s.payload.token,e.isAuthenticated=!0,e.virtualMoney=s.payload.virtualMoney||0,e.error=null}).addCase(zd.rejected,(e,s)=>{e.isLoading=!1,e.error=s.payload,e.isAuthenticated=!1}).addCase(vB.fulfilled,e=>{e.user=null,e.token=null,e.isAuthenticated=!1,e.virtualMoney=0,e.error=null,e.isLoading=!1}).addCase(xB.fulfilled,(e,s)=>{e.token=s.payload.token,e.user=s.payload.user,e.virtualMoney=s.payload.user.virtualMoney||e.virtualMoney})}}),{clearError:T$,setUser:E$,updateVirtualMoney:L$,addVirtualMoney:wB,subtractVirtualMoney:SB,initializeAuth:_$}=XN.actions,bB=XN.reducer,jB={holdings:[],summary:{totalValue:0,totalInvested:0,totalGains:0,totalGainsPercent:0,dayChange:0,dayChangePercent:0,totalStocks:0},performance:{chartData:[],timeframe:"1D"},isLoading:!1,error:null,lastUpdated:null},JN=[{id:"holding_1",symbol:"RELIANCE",name:"Reliance Industries Ltd",quantity:0,avgPrice:0,currentPrice:2520,totalValue:0,totalGains:0,gainsPercent:0,dayChange:25,dayChangePercent:1,sector:"Energy"},{id:"holding_2",symbol:"TCS",name:"Tata Consultancy Services",quantity:0,avgPrice:0,currentPrice:3350,totalValue:0,totalGains:0,gainsPercent:0,dayChange:-15,dayChangePercent:-.45,sector:"IT"},{id:"holding_3",symbol:"INFY",name:"Infosys Limited",quantity:0,avgPrice:0,currentPrice:1520,totalValue:0,totalGains:0,gainsPercent:0,dayChange:12,dayChangePercent:.79,sector:"IT"}],Vd=_e("portfolio/fetchSummary",async(t,{rejectWithValue:e,getState:s})=>{try{const n=await sN.getSummary();return n.success?n.data:e(n.message)}catch{const{portfolio:i}=s();return nc(i.holdings)}}),Ud=_e("portfolio/fetchHoldings",async(t,{rejectWithValue:e})=>{try{const s=await sN.getHoldings();return s.success?s.data:e(s.message)}catch{return JN}}),Im=_e("portfolio/updateHolding",async({symbol:t,quantity:e,price:s,type:n},{rejectWithValue:i,getState:a})=>{try{const{portfolio:o}=a(),l=o.holdings.find(u=>u.symbol===t);let c;if(n==="BUY")if(l){const u=l.quantity+e,d=(l.avgPrice*l.quantity+s*e)/u;c={...l,quantity:u,avgPrice:d,totalValue:u*l.currentPrice,totalGains:(l.currentPrice-d)*u,gainsPercent:(l.currentPrice-d)/d*100}}else{const u=JN.find(h=>h.symbol===t);if(!u)return i("Stock not found");c={...u,id:`holding_${Date.now()}`,quantity:e,avgPrice:s,totalValue:e*u.currentPrice,totalGains:(u.currentPrice-s)*e,gainsPercent:(u.currentPrice-s)/s*100}}else if(n==="SELL"){if(!l||l.quantity<e)return i("Insufficient shares to sell");const u=l.quantity-e;u===0?c=null:c={...l,quantity:u,totalValue:u*l.currentPrice,totalGains:(l.currentPrice-l.avgPrice)*u,gainsPercent:(l.currentPrice-l.avgPrice)/l.avgPrice*100}}return{symbol:t,updatedHolding:c,type:n,quantity:e,price:s}}catch(o){return i(o.message||"Failed to update holding")}}),nc=t=>{const e=t.reduce((l,c)=>l+c.totalValue,0),s=t.reduce((l,c)=>l+c.avgPrice*c.quantity,0),n=e-s,i=s>0?n/s*100:0,a=t.reduce((l,c)=>l+c.dayChange*c.quantity,0),o=e>0?a/(e-a)*100:0;return{totalValue:e,totalInvested:s,totalGains:n,totalGainsPercent:i,dayChange:a,dayChangePercent:o,totalStocks:t.filter(l=>l.quantity>0).length}},ZN=ii({name:"portfolio",initialState:jB,reducers:{clearError:t=>{t.error=null},updateCurrentPrices:(t,e)=>{const s=e.payload;t.holdings=t.holdings.map(n=>{const i=s.find(a=>a.symbol===n.symbol);if(i){const a=i.price,o=n.quantity*a,l=(a-n.avgPrice)*n.quantity,c=n.avgPrice>0?(a-n.avgPrice)/n.avgPrice*100:0;return{...n,currentPrice:a,totalValue:o,totalGains:l,gainsPercent:c,dayChange:i.dayChange||n.dayChange,dayChangePercent:i.dayChangePercent||n.dayChangePercent}}return n}),t.summary=nc(t.holdings),t.lastUpdated=new Date().toISOString()},setTimeframe:(t,e)=>{t.performance.timeframe=e.payload}},extraReducers:t=>{t.addCase(Vd.pending,e=>{e.isLoading=!0,e.error=null}).addCase(Vd.fulfilled,(e,s)=>{e.isLoading=!1,e.summary=s.payload,e.lastUpdated=new Date().toISOString()}).addCase(Vd.rejected,(e,s)=>{e.isLoading=!1,e.error=s.payload}).addCase(Ud.pending,e=>{e.isLoading=!0,e.error=null}).addCase(Ud.fulfilled,(e,s)=>{e.isLoading=!1,e.holdings=s.payload,e.summary=nc(s.payload),e.lastUpdated=new Date().toISOString()}).addCase(Ud.rejected,(e,s)=>{e.isLoading=!1,e.error=s.payload}).addCase(Im.fulfilled,(e,s)=>{const{symbol:n,updatedHolding:i}=s.payload;if(i===null)e.holdings=e.holdings.filter(a=>a.symbol!==n);else{const a=e.holdings.findIndex(o=>o.symbol===n);a>=0?e.holdings[a]=i:e.holdings.push(i)}e.summary=nc(e.holdings),e.lastUpdated=new Date().toISOString()}).addCase(Im.rejected,(e,s)=>{e.error=s.payload})}}),{clearError:R$,updateCurrentPrices:M$,setTimeframe:I$}=ZN.actions,NB=ZN.reducer,kB={recentTrades:[],activeOrders:[],tradeHistory:[],isLoading:!1,error:null,tradingFees:{brokerage:.03,stt:.1,gst:18}},ek=[{id:"trade_1",symbol:"WIPRO",name:"Wipro Limited",type:"BUY",quantity:50,price:420,totalAmount:21e3,timestamp:new Date("2024-01-15T10:30:00"),status:"completed"},{id:"trade_2",symbol:"BAJFINANCE",name:"Bajaj Finance Limited",type:"SELL",quantity:25,price:6800,totalAmount:17e4,timestamp:new Date("2024-01-15T09:15:00"),status:"completed"}],tk=(t,e)=>{const s=t*(e.brokerage/100),n=t*(e.stt/100),i=s*(e.gst/100),a=s+n+i;return{brokerage:Math.round(s*100)/100,stt:Math.round(n*100)/100,gst:Math.round(i*100)/100,totalFees:Math.round(a*100)/100}},Wd=_e("trading/executeTrade",async(t,{dispatch:e,getState:s,rejectWithValue:n})=>{try{const{symbol:i,quantity:a,price:o,type:l}=t,c=s(),{auth:u,trading:h}=c,d=a*o,f=tk(d,h.tradingFees),y=l==="BUY"?d+f.totalFees:d-f.totalFees;if(l==="BUY"&&u.virtualMoney<y)return n("Insufficient virtual money balance");if(l==="SELL"){const w=c.portfolio.holdings.find(g=>g.symbol===i);if(!w||w.quantity<a)return n("Insufficient shares to sell")}const p={id:`trade_${Date.now()}`,symbol:i,name:t.name||i,type:l,quantity:a,price:o,grossAmount:d,fees:f,netAmount:y,timestamp:new Date().toISOString(),status:"completed"};return e(l==="BUY"?SB(y):wB(y)),e(Im({symbol:i,quantity:a,price:o,type:l})),p}catch(i){return n(i.message||"Trade execution failed")}}),CB=_e("trading/fetchRecentTrades",async(t=10,{rejectWithValue:e})=>{try{const s=await nr.getRecentTrades(t);return s.success?s.data:e(s.message)}catch{return ek}}),PB=_e("trading/fetchTradeHistory",async({startDate:t,endDate:e,symbol:s},{rejectWithValue:n})=>{try{const i=await nr.getTradeHistory({startDate:t,endDate:e,symbol:s});return i.success?i.data:n(i.message)}catch{return ek}}),Hd=_e("trading/placeOrder",async(t,{getState:e,rejectWithValue:s})=>{try{const{symbol:n,quantity:i,price:a,type:o,orderType:l}=t,c=e(),{auth:u}=c;if(l==="LIMIT"){const d=i*a,f=tk(d,c.trading.tradingFees),y=o==="BUY"?d+f.totalFees:d-f.totalFees;if(o==="BUY"&&u.virtualMoney<y)return s("Insufficient virtual money balance")}return{id:`order_${Date.now()}`,symbol:n,name:t.name||n,type:o,orderType:l,quantity:i,price:l==="MARKET"?null:a,status:"pending",timestamp:new Date().toISOString(),expiryDate:t.expiryDate||null}}catch(n){return s(n.message||"Order placement failed")}}),TB=_e("trading/cancelOrder",async(t,{rejectWithValue:e})=>{try{const s=await nr.cancelOrder(t);return s.success?t:e(s.message)}catch{return t}}),sk=ii({name:"trading",initialState:kB,reducers:{clearError:t=>{t.error=null},updateTradingFees:(t,e)=>{t.tradingFees={...t.tradingFees,...e.payload}},addTradeToHistory:(t,e)=>{t.tradeHistory.unshift(e.payload),t.recentTrades.unshift(e.payload),t.recentTrades.length>50&&(t.recentTrades=t.recentTrades.slice(0,50))}},extraReducers:t=>{t.addCase(Wd.pending,e=>{e.isLoading=!0,e.error=null}).addCase(Wd.fulfilled,(e,s)=>{e.isLoading=!1,e.recentTrades.unshift(s.payload),e.tradeHistory.unshift(s.payload),e.recentTrades.length>50&&(e.recentTrades=e.recentTrades.slice(0,50))}).addCase(Wd.rejected,(e,s)=>{e.isLoading=!1,e.error=s.payload}).addCase(CB.fulfilled,(e,s)=>{e.recentTrades=s.payload}).addCase(PB.fulfilled,(e,s)=>{e.tradeHistory=s.payload}).addCase(Hd.pending,e=>{e.isLoading=!0,e.error=null}).addCase(Hd.fulfilled,(e,s)=>{e.isLoading=!1,e.activeOrders.push(s.payload)}).addCase(Hd.rejected,(e,s)=>{e.isLoading=!1,e.error=s.payload}).addCase(TB.fulfilled,(e,s)=>{const n=s.payload;e.activeOrders=e.activeOrders.filter(i=>i.id!==n)})}}),{clearError:A$,updateTradingFees:O$,addTradeToHistory:D$}=sk.actions,EB=sk.reducer,LB={stocks:[],isLoading:!1,error:null,lastUpdated:null},_B=[{id:"watch_1",symbol:"RELIANCE",name:"Reliance Industries Ltd",price:2520,change:25,changePercent:1,volume:125e4,marketCap:1705e9,pe:24.5,sector:"Energy",isFavorite:!0,alertPrice:2600,hasAlert:!0,addedAt:new Date("2024-01-10T10:00:00").toISOString()},{id:"watch_2",symbol:"TCS",name:"Tata Consultancy Services",price:3350,change:-15,changePercent:-.45,volume:89e4,marketCap:122e10,pe:28.2,sector:"IT",isFavorite:!1,alertPrice:null,hasAlert:!1,addedAt:new Date("2024-01-12T14:30:00").toISOString()},{id:"watch_3",symbol:"INFY",name:"Infosys Limited",price:1520,change:12,changePercent:.79,volume:11e5,marketCap:645e9,pe:22.8,sector:"IT",isFavorite:!0,alertPrice:1600,hasAlert:!0,addedAt:new Date("2024-01-08T09:15:00").toISOString()}],Yd=_e("watchlist/fetchWatchlist",async(t,{rejectWithValue:e})=>{try{const s=await aa.getWatchlist();return s.success?s.data:e(s.message)}catch{return _B}}),tw=_e("watchlist/addToWatchlist",async(t,{getState:e,rejectWithValue:s})=>{try{const{symbol:n,name:i,price:a,sector:o}=t;if(e().watchlist.stocks.find(h=>h.symbol===n))return s("Stock already in watchlist");const u={id:`watch_${Date.now()}`,symbol:n,name:i,price:a,change:0,changePercent:0,volume:0,marketCap:0,pe:0,sector:o||"Unknown",isFavorite:!1,alertPrice:null,hasAlert:!1,addedAt:new Date().toISOString()};try{const h=await aa.addStock(u);if(h.success)return h.data}catch{console.warn("API failed, adding to local watchlist")}return u}catch(n){return s(n.message||"Failed to add to watchlist")}}),sw=_e("watchlist/removeFromWatchlist",async(t,{rejectWithValue:e})=>{try{try{if((await aa.removeStock(t)).success)return t}catch{console.warn("API failed, removing from local watchlist")}return t}catch(s){return e(s.message||"Failed to remove from watchlist")}}),RB=_e("watchlist/toggleFavorite",async(t,{getState:e,rejectWithValue:s})=>{try{const i=e().watchlist.stocks.find(o=>o.id===t);if(!i)return s("Stock not found in watchlist");const a={...i,isFavorite:!i.isFavorite};try{const o=await aa.updateStock(t,a);if(o.success)return o.data}catch{console.warn("API failed, updating local watchlist")}return a}catch(n){return s(n.message||"Failed to toggle favorite")}}),MB=_e("watchlist/setPriceAlert",async({stockId:t,alertPrice:e},{getState:s,rejectWithValue:n})=>{try{const a=s().watchlist.stocks.find(l=>l.id===t);if(!a)return n("Stock not found in watchlist");const o={...a,alertPrice:e,hasAlert:e!==null};try{const l=await aa.updateStock(t,o);if(l.success)return l.data}catch{console.warn("API failed, updating local watchlist")}return o}catch(i){return n(i.message||"Failed to set price alert")}}),IB=_e("watchlist/updatePrices",async(t,{rejectWithValue:e})=>{try{return t}catch(s){return e(s.message||"Failed to update prices")}}),nk=ii({name:"watchlist",initialState:LB,reducers:{clearError:t=>{t.error=null},updateStockPrices:(t,e)=>{const s=e.payload;t.stocks=t.stocks.map(n=>{const i=s.find(a=>a.symbol===n.symbol);return i?{...n,price:i.price,change:i.change,changePercent:i.changePercent,volume:i.volume||n.volume,dayHigh:i.dayHigh||n.dayHigh,dayLow:i.dayLow||n.dayLow,lastUpdated:Date.now()}:n}),t.lastUpdated=new Date().toISOString()},syncWithStocksData:(t,e)=>{const s=e.payload;t.stocks=t.stocks.map(n=>{const i=s[n.symbol];return i?{...n,...i,lastUpdated:Date.now()}:n}),t.lastUpdated=new Date().toISOString()},sortWatchlist:(t,e)=>{const{sortBy:s,sortOrder:n}=e.payload;t.stocks.sort((i,a)=>{let o,l;switch(s){case"symbol":o=i.symbol,l=a.symbol;break;case"price":o=i.price,l=a.price;break;case"change":o=i.changePercent,l=a.changePercent;break;case"volume":o=i.volume,l=a.volume;break;case"addedAt":o=new Date(i.addedAt),l=new Date(a.addedAt);break;default:return 0}return n==="desc"?l>o?1:-1:o>l?1:-1})}},extraReducers:t=>{t.addCase(Yd.pending,e=>{e.isLoading=!0,e.error=null}).addCase(Yd.fulfilled,(e,s)=>{e.isLoading=!1,e.stocks=s.payload,e.lastUpdated=new Date().toISOString()}).addCase(Yd.rejected,(e,s)=>{e.isLoading=!1,e.error=s.payload}).addCase(tw.fulfilled,(e,s)=>{e.stocks.push(s.payload)}).addCase(tw.rejected,(e,s)=>{e.error=s.payload}).addCase(sw.fulfilled,(e,s)=>{const n=s.payload;e.stocks=e.stocks.filter(i=>i.id!==n)}).addCase(sw.rejected,(e,s)=>{e.error=s.payload}).addCase(RB.fulfilled,(e,s)=>{const n=s.payload,i=e.stocks.findIndex(a=>a.id===n.id);i>=0&&(e.stocks[i]=n)}).addCase(MB.fulfilled,(e,s)=>{const n=s.payload,i=e.stocks.findIndex(a=>a.id===n.id);i>=0&&(e.stocks[i]=n)}).addCase(IB.fulfilled,(e,s)=>{const n=s.payload;e.stocks=e.stocks.map(i=>{const a=n.find(o=>o.symbol===i.symbol);return a?{...i,price:a.price,change:a.change,changePercent:a.changePercent,volume:a.volume||i.volume}:i}),e.lastUpdated=new Date().toISOString()})}}),{clearError:F$,updateStockPrices:B$,syncWithStocksData:$$,sortWatchlist:z$}=nk.actions,AB=nk.reducer,OB={orders:[],orderHistory:[],isLoading:!1,error:null,filters:{status:"all",type:"all",symbol:""}},DB=[{id:"ORD001",symbol:"RELIANCE",name:"Reliance Industries Ltd",type:"BUY",quantity:50,price:2520,orderPrice:2500,status:"executed",timestamp:new Date("2024-01-15T10:30:00").toISOString(),executedAt:new Date("2024-01-15T10:31:00").toISOString(),totalAmount:126e3},{id:"ORD002",symbol:"TCS",name:"Tata Consultancy Services",type:"SELL",quantity:20,price:3350,orderPrice:3400,status:"pending",timestamp:new Date("2024-01-15T11:15:00").toISOString(),executedAt:null,totalAmount:67e3}],qd=_e("orders/fetchOrders",async(t,{rejectWithValue:e})=>{try{const s=await nr.getOrders();return s.success?s.data:e(s.message)}catch{return DB}}),FB=_e("orders/placeOrder",async(t,{rejectWithValue:e})=>{try{const s={id:`ORD${Date.now()}`,...t,status:"pending",timestamp:new Date().toISOString(),executedAt:null};try{const n=await nr.placeOrder(s);if(n.success)return n.data}catch{console.warn("API failed, creating local order")}return s}catch(s){return e(s.message||"Failed to place order")}}),BB=_e("orders/cancelOrder",async(t,{rejectWithValue:e})=>{try{try{if((await nr.cancelOrder(t)).success)return t}catch{console.warn("API failed, cancelling local order")}return t}catch(s){return e(s.message||"Failed to cancel order")}}),ik=ii({name:"orders",initialState:OB,reducers:{clearError:t=>{t.error=null},setFilters:(t,e)=>{t.filters={...t.filters,...e.payload}},updateOrderStatus:(t,e)=>{const{orderId:s,status:n,executedAt:i,executedPrice:a}=e.payload,o=t.orders.find(l=>l.id===s);o&&(o.status=n,i&&(o.executedAt=i),a&&(o.price=a))}},extraReducers:t=>{t.addCase(qd.pending,e=>{e.isLoading=!0,e.error=null}).addCase(qd.fulfilled,(e,s)=>{e.isLoading=!1,e.orders=s.payload}).addCase(qd.rejected,(e,s)=>{e.isLoading=!1,e.error=s.payload}).addCase(FB.fulfilled,(e,s)=>{e.orders.unshift(s.payload)}).addCase(BB.fulfilled,(e,s)=>{const n=s.payload,i=e.orders.find(a=>a.id===n);i&&(i.status="cancelled")})}}),{clearError:V$,setFilters:U$,updateOrderStatus:W$}=ik.actions,$B=ik.reducer,zB={articles:[],categories:["all","market","earnings","sector","policy"],activeCategory:"all",isLoading:!1,error:null,lastUpdated:null},VB=[{id:"news001",title:"Reliance Industries Reports Strong Q3 Results, Beats Estimates",summary:"Reliance Industries posted a 12% increase in net profit for Q3, driven by strong performance in retail and digital services segments.",category:"earnings",source:"Economic Times",author:"Financial Reporter",publishedAt:new Date("2024-01-15T09:30:00").toISOString(),readTime:3,imageUrl:"/api/placeholder/400/200",tags:["RELIANCE","Earnings","Q3 Results"],sentiment:"positive",views:1250,likes:89,isBookmarked:!1,relatedStocks:["RELIANCE"]},{id:"news002",title:"IT Sector Outlook: TCS and Infosys Lead Digital Transformation Wave",summary:"Indian IT giants are capitalizing on global digital transformation trends, with strong order books and margin improvements.",category:"sector",source:"Business Standard",author:"Tech Analyst",publishedAt:new Date("2024-01-15T08:45:00").toISOString(),readTime:5,imageUrl:"/api/placeholder/400/200",tags:["TCS","INFY","IT Sector","Digital"],sentiment:"positive",views:980,likes:67,isBookmarked:!0,relatedStocks:["TCS","INFY","WIPRO"]}],Gd=_e("news/fetchNews",async({category:t="all",limit:e=20},{rejectWithValue:s})=>{try{const n=await cg.getNews({category:t,limit:e});return n.success?n.data:s(n.message)}catch{return VB}}),UB=_e("news/toggleBookmark",async(t,{getState:e,rejectWithValue:s})=>{try{const i=e().news.articles.find(o=>o.id===t);if(!i)return s("Article not found");const a={...i,isBookmarked:!i.isBookmarked};try{await cg.toggleBookmark(t)}catch{console.warn("API failed, updating local bookmark")}return a}catch(n){return s(n.message||"Failed to toggle bookmark")}}),rk=ii({name:"news",initialState:zB,reducers:{clearError:t=>{t.error=null},setActiveCategory:(t,e)=>{t.activeCategory=e.payload},updateArticleViews:(t,e)=>{const s=e.payload,n=t.articles.find(i=>i.id===s);n&&(n.views+=1)}},extraReducers:t=>{t.addCase(Gd.pending,e=>{e.isLoading=!0,e.error=null}).addCase(Gd.fulfilled,(e,s)=>{e.isLoading=!1,e.articles=s.payload,e.lastUpdated=new Date().toISOString()}).addCase(Gd.rejected,(e,s)=>{e.isLoading=!1,e.error=s.payload}).addCase(UB.fulfilled,(e,s)=>{const n=s.payload,i=e.articles.findIndex(a=>a.id===n.id);i>=0&&(e.articles[i]=n)})}}),{clearError:H$,setActiveCategory:Y$,updateArticleViews:q$}=rk.actions,WB=rk.reducer,HB={theme:localStorage.getItem("theme")||"light",notifications:[],modals:{buyStock:{isOpen:!1,data:null},sellStock:{isOpen:!1,data:null},addToWatchlist:{isOpen:!1,data:null},priceAlert:{isOpen:!1,data:null},tradeConfirmation:{isOpen:!1,data:null}},loading:{global:!1,portfolio:!1,trading:!1,watchlist:!1},toast:{isVisible:!1,message:"",type:"info",duration:3e3}},ak=ii({name:"ui",initialState:HB,reducers:{setTheme:(t,e)=>{t.theme=e.payload,localStorage.setItem("theme",e.payload),document.documentElement.setAttribute("data-theme",e.payload)},toggleTheme:t=>{const e=t.theme==="light"?"dark":"light";t.theme=e,localStorage.setItem("theme",e),document.documentElement.setAttribute("data-theme",e)},openModal:(t,e)=>{const{modalName:s,data:n}=e.payload;t.modals[s]&&(t.modals[s].isOpen=!0,t.modals[s].data=n||null)},closeModal:(t,e)=>{const s=e.payload;t.modals[s]&&(t.modals[s].isOpen=!1,t.modals[s].data=null)},closeAllModals:t=>{Object.keys(t.modals).forEach(e=>{t.modals[e].isOpen=!1,t.modals[e].data=null})},setLoading:(t,e)=>{const{key:s,value:n}=e.payload;t.loading.hasOwnProperty(s)&&(t.loading[s]=n)},setGlobalLoading:(t,e)=>{t.loading.global=e.payload},showToast:(t,e)=>{const{message:s,type:n="info",duration:i=3e3}=e.payload;t.toast={isVisible:!0,message:s,type:n,duration:i}},hideToast:t=>{t.toast.isVisible=!1},showSuccessToast:(t,e)=>{t.toast={isVisible:!0,message:e.payload,type:"success",duration:3e3}},showErrorToast:(t,e)=>{t.toast={isVisible:!0,message:e.payload,type:"error",duration:5e3}},showWarningToast:(t,e)=>{t.toast={isVisible:!0,message:e.payload,type:"warning",duration:4e3}},showInfoToast:(t,e)=>{t.toast={isVisible:!0,message:e.payload,type:"info",duration:3e3}}}}),{setTheme:G$,toggleTheme:Q$,openModal:K$,closeModal:X$,closeAllModals:J$,setLoading:Z$,setGlobalLoading:ez,showToast:tz,hideToast:sz,showSuccessToast:nz,showErrorToast:iz,showWarningToast:rz,showInfoToast:az}=ak.actions,YB=ak.reducer,Qd=_e("stocks/fetchIndianStockQuote",async(t,{rejectWithValue:e})=>{var s,n;try{const i=await Vo.getQuote(t);return{symbol:t,data:i}}catch(i){return e(((n=(s=i.response)==null?void 0:s.data)==null?void 0:n.message)||"Failed to fetch stock quote")}}),Kd=_e("stocks/fetchIndianMarketMovers",async(t,{rejectWithValue:e})=>{var s,n;try{return await Vo.getMarketMovers()}catch(i){return e(((n=(s=i.response)==null?void 0:s.data)==null?void 0:n.message)||"Failed to fetch market movers")}}),Xd=_e("stocks/fetchNiftyData",async(t,{rejectWithValue:e})=>{var s,n;try{return await Vo.getQuote("^NSEI")}catch(i){return e(((n=(s=i.response)==null?void 0:s.data)==null?void 0:n.message)||"Failed to fetch Nifty data")}}),Jd=_e("stocks/fetchSensexData",async(t,{rejectWithValue:e})=>{var s,n;try{return await Vo.getQuote("^BSESN")}catch(i){return e(((n=(s=i.response)==null?void 0:s.data)==null?void 0:n.message)||"Failed to fetch Sensex data")}}),Zd=_e("stocks/fetchBatchStockQuotes",async(t,{rejectWithValue:e})=>{var s,n;try{return await Vo.getBatchQuotes(t)}catch(i){return e(((n=(s=i.response)==null?void 0:s.data)==null?void 0:n.message)||"Failed to fetch batch quotes")}}),qB={nifty:{data:null,loading:!1,error:null,lastUpdated:null},sensex:{data:null,loading:!1,error:null,lastUpdated:null},quotes:{},topGainers:[],topLosers:[],mostActive:[],realTimeUpdates:!0,updateInterval:3e4,lastGlobalUpdate:null,isLoading:!1,error:null,priceChanges:{},marketStatus:{isOpen:!1,nextOpen:null,nextClose:null,timezone:"Asia/Kolkata"}},ok=ii({name:"stocks",initialState:qB,reducers:{updateStockPrice:(t,e)=>{const{symbol:s,price:n,change:i,changePercent:a,volume:o,timestamp:l}=e.payload;t.quotes[s]&&t.quotes[s].price!==n&&(t.priceChanges[s]={oldPrice:t.quotes[s].price,newPrice:n,direction:n>t.quotes[s].price?"up":"down",timestamp:Date.now()}),t.quotes[s]={...t.quotes[s],price:n,change:i,changePercent:a,volume:o,lastUpdated:l||Date.now()}},updateBatchPrices:(t,e)=>{const s=e.payload,n=Date.now();s.forEach(i=>{const{symbol:a,price:o,change:l,changePercent:c,volume:u}=i;t.quotes[a]&&t.quotes[a].price!==o&&(t.priceChanges[a]={oldPrice:t.quotes[a].price,newPrice:o,direction:o>t.quotes[a].price?"up":"down",timestamp:n}),t.quotes[a]={...t.quotes[a],price:o,change:l,changePercent:c,volume:u,lastUpdated:n}}),t.lastGlobalUpdate=n},clearPriceChanges:t=>{t.priceChanges={}},toggleRealTimeUpdates:t=>{t.realTimeUpdates=!t.realTimeUpdates},setUpdateInterval:(t,e)=>{t.updateInterval=e.payload},updateMarketStatus:(t,e)=>{t.marketStatus={...t.marketStatus,...e.payload}},clearError:t=>{t.error=null,t.nifty.error=null,t.sensex.error=null}},extraReducers:t=>{t.addCase(Qd.pending,e=>{e.isLoading=!0,e.error=null}).addCase(Qd.fulfilled,(e,s)=>{e.isLoading=!1;const{symbol:n,data:i}=s.payload;e.quotes[n]={...i,lastUpdated:Date.now()}}).addCase(Qd.rejected,(e,s)=>{e.isLoading=!1,e.error=s.payload}),t.addCase(Kd.pending,e=>{e.isLoading=!0}).addCase(Kd.fulfilled,(e,s)=>{e.isLoading=!1;const{gainers:n,losers:i,mostActive:a}=s.payload;e.topGainers=n||[],e.topLosers=i||[],e.mostActive=a||[],e.lastGlobalUpdate=Date.now()}).addCase(Kd.rejected,(e,s)=>{e.isLoading=!1,e.error=s.payload}),t.addCase(Xd.pending,e=>{e.nifty.loading=!0,e.nifty.error=null}).addCase(Xd.fulfilled,(e,s)=>{e.nifty.loading=!1,e.nifty.data=s.payload,e.nifty.lastUpdated=Date.now()}).addCase(Xd.rejected,(e,s)=>{e.nifty.loading=!1,e.nifty.error=s.payload}),t.addCase(Jd.pending,e=>{e.sensex.loading=!0,e.sensex.error=null}).addCase(Jd.fulfilled,(e,s)=>{e.sensex.loading=!1,e.sensex.data=s.payload,e.sensex.lastUpdated=Date.now()}).addCase(Jd.rejected,(e,s)=>{e.sensex.loading=!1,e.sensex.error=s.payload}),t.addCase(Zd.pending,e=>{e.isLoading=!0}).addCase(Zd.fulfilled,(e,s)=>{e.isLoading=!1,s.payload.forEach(i=>{e.quotes[i.symbol]={...i,lastUpdated:Date.now()}}),e.lastGlobalUpdate=Date.now()}).addCase(Zd.rejected,(e,s)=>{e.isLoading=!1,e.error=s.payload})}}),{updateStockPrice:oz,updateBatchPrices:lz,clearPriceChanges:cz,toggleRealTimeUpdates:uz,setUpdateInterval:hz,updateMarketStatus:dz,clearError:fz}=ok.actions,GB=ok.reducer,QB={key:"tradebro",storage:KN,whitelist:["auth","portfolio","trading","watchlist","orders"],blacklist:["ui","news","stocks"]},KB=MN({auth:bB,portfolio:NB,trading:EB,watchlist:AB,orders:$B,news:WB,ui:YB,stocks:GB}),XB=tB(QB,KB),lk=S4({reducer:XB,middleware:t=>t({serializableCheck:{ignoredActions:["persist/PERSIST","persist/REHYDRATE"]}}),devTools:!1}),JB=oB(lk),ZB=b.createContext(),e$=({children:t})=>{const e=()=>{const c=localStorage.getItem("sidebarCollapsed");return c!==null?JSON.parse(c):window.innerWidth<=768},[s,n]=b.useState(e),[i,a]=b.useState(window.innerWidth<=768);b.useEffect(()=>{const c=()=>{const u=window.innerWidth<=768;a(u),u&&n(h=>h||(localStorage.setItem("sidebarCollapsed","true"),!0))};return c(),window.addEventListener("resize",c),()=>window.removeEventListener("resize",c)},[]);const l={isCollapsed:s,setIsCollapsed:n,isMobile:i,toggleSidebar:()=>{n(c=>{const u=!c;return localStorage.setItem("sidebarCollapsed",JSON.stringify(u)),u})},expandSidebar:()=>{n(()=>(localStorage.setItem("sidebarCollapsed","false"),!1))},collapseSidebar:()=>{n(()=>(localStorage.setItem("sidebarCollapsed","true"),!0))}};return r.jsx(ZB.Provider,{value:l,children:t})},t$=b.createContext(),s$=({children:t})=>{const{isAuthenticated:e,getToken:s}=tr(),[n,i]=b.useState({balance:1e4,transactions:[],lastLoginReward:null,totalInvested:0,totalGains:0,portfolioValue:0}),[a,o]=b.useState(!1),[l,c]=b.useState(null),u=w=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",minimumFractionDigits:2,maximumFractionDigits:2}).format(w),h=async()=>{if(e){o(!0),c(null);try{const w=s(),g=await fetch("http://localhost:5001/api/virtual-money/account",{headers:{Authorization:`Bearer ${w}`,"Content-Type":"application/json"}});if(g.ok){const m=await g.json();i(m.data)}else throw new Error("Failed to fetch virtual money data")}catch(w){c(w.message),console.error("Error fetching virtual money:",w)}finally{o(!1)}}},d=async(w,g,m)=>{if(!e)return{success:!1,message:"Not authenticated"};o(!0),c(null);try{const x=s(),S=await fetch("http://localhost:5001/api/virtual-money/buy",{method:"POST",headers:{Authorization:`Bearer ${x}`,"Content-Type":"application/json"},body:JSON.stringify({stockSymbol:w,quantity:g,price:m})}),N=await S.json();if(S.ok)return i(N.data),{success:!0,message:N.message};throw new Error(N.message||"Failed to buy stock")}catch(x){return c(x.message),{success:!1,message:x.message}}finally{o(!1)}},f=async(w,g,m)=>{if(!e)return{success:!1,message:"Not authenticated"};o(!0),c(null);try{const x=s(),S=await fetch("http://localhost:5001/api/virtual-money/sell",{method:"POST",headers:{Authorization:`Bearer ${x}`,"Content-Type":"application/json"},body:JSON.stringify({stockSymbol:w,quantity:g,price:m})}),N=await S.json();if(S.ok)return i(N.data),{success:!0,message:N.message};throw new Error(N.message||"Failed to sell stock")}catch(x){return c(x.message),{success:!1,message:x.message}}finally{o(!1)}},y=async()=>{if(!e)return{success:!1,message:"Not authenticated"};o(!0),c(null);try{const w=s(),g=await fetch("http://localhost:5001/api/virtual-money/login-reward",{method:"POST",headers:{Authorization:`Bearer ${w}`,"Content-Type":"application/json"}}),m=await g.json();if(g.ok)return i(m.data),{success:!0,message:m.message,reward:m.reward};throw new Error(m.message||"Failed to claim reward")}catch(w){return c(w.message),{success:!1,message:w.message}}finally{o(!1)}};b.useEffect(()=>{e&&h()},[e]),b.useEffect(()=>{const w=g=>{console.log("🔄 Balance update received in VirtualMoneyContext:",g.detail),h()};return window.addEventListener("balanceUpdated",w),()=>{window.removeEventListener("balanceUpdated",w)}},[h]);const p={virtualMoney:n,loading:a,error:l,formatCurrency:u,fetchVirtualMoney:h,buyStock:d,sellStock:f,claimLoginReward:y,balance:n.balance,formattedBalance:u(n.balance),transactions:n.transactions||[],canClaimReward:n.lastLoginReward?new Date-new Date(n.lastLoginReward)>24*60*60*1e3:!0};return r.jsx(t$.Provider,{value:p,children:t})},n$=b.createContext(),i$=({children:t})=>{const[e,s]=b.useState(()=>localStorage.getItem("tradebro-theme")||"light");b.useEffect(()=>{const l=document.documentElement;l.classList.remove("light-theme","dark-theme"),l.classList.add(`${e}-theme`),localStorage.setItem("tradebro-theme",e),l.setAttribute("data-theme",e)},[e]);const o={theme:e,toggleTheme:()=>{s(l=>l==="light"?"dark":"light")},setLightTheme:()=>s("light"),setDarkTheme:()=>s("dark"),isLight:e==="light",isDark:e==="dark"};return r.jsx(n$.Provider,{value:o,children:t})};yS(document.getElementById("root")).render(r.jsx(b.StrictMode,{children:r.jsx(VE,{store:lk,children:r.jsx(RS,{loading:r.jsx("div",{children:"Loading..."}),persistor:JB,children:r.jsx(xE,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:r.jsx(i$,{children:r.jsx(ZO,{children:r.jsx(s3,{children:r.jsx(Sj,{children:r.jsx(e$,{children:r.jsx(_5,{children:r.jsx(s$,{children:r.jsx(Q5,{})})})})})})})})})})})}));export{Xe as A,Ns as F,c$ as a,Bt as b,mt as c,N0 as d,r as j,U as m,b as r};
//# sourceMappingURL=index-BdmD4S1o.js.map
