{"version":3,"file":"PerformanceMonitor-hysfamtG.js","sources":["../../src/components/debug/PerformanceMonitor.jsx"],"sourcesContent":["/**\n * Performance Monitor Component\n * Real-time performance monitoring and debugging\n */\n\nimport React, { useState, useEffect, useRef, memo } from 'react';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { FiActivity, FiCpu, FiMonitor, FiX, FiRefreshCw } from 'react-icons/fi';\n\nconst PerformanceMonitor = memo(({ \n  enabled = process.env.NODE_ENV === 'development',\n  position = 'bottom-right'\n}) => {\n  const [isVisible, setIsVisible] = useState(false);\n  const [metrics, setMetrics] = useState({\n    fps: 0,\n    memory: 0,\n    renderTime: 0,\n    componentCount: 0\n  });\n  \n  const frameCount = useRef(0);\n  const lastTime = useRef(performance.now());\n  const animationFrame = useRef(null);\n\n  // FPS Calculation\n  useEffect(() => {\n    if (!enabled) return;\n\n    const calculateFPS = () => {\n      frameCount.current++;\n      const currentTime = performance.now();\n      \n      if (currentTime >= lastTime.current + 1000) {\n        const fps = Math.round((frameCount.current * 1000) / (currentTime - lastTime.current));\n        \n        setMetrics(prev => ({\n          ...prev,\n          fps,\n          memory: performance.memory ? Math.round(performance.memory.usedJSHeapSize / 1048576) : 0,\n          renderTime: currentTime - lastTime.current\n        }));\n        \n        frameCount.current = 0;\n        lastTime.current = currentTime;\n      }\n      \n      animationFrame.current = requestAnimationFrame(calculateFPS);\n    };\n\n    calculateFPS();\n\n    return () => {\n      if (animationFrame.current) {\n        cancelAnimationFrame(animationFrame.current);\n      }\n    };\n  }, [enabled]);\n\n  // Performance Observer for render times\n  useEffect(() => {\n    if (!enabled || !window.PerformanceObserver) return;\n\n    const observer = new PerformanceObserver((list) => {\n      const entries = list.getEntries();\n      const renderEntries = entries.filter(entry => entry.name.includes('render'));\n      \n      if (renderEntries.length > 0) {\n        const avgRenderTime = renderEntries.reduce((sum, entry) => sum + entry.duration, 0) / renderEntries.length;\n        setMetrics(prev => ({ ...prev, renderTime: Math.round(avgRenderTime * 100) / 100 }));\n      }\n    });\n\n    observer.observe({ entryTypes: ['measure'] });\n\n    return () => observer.disconnect();\n  }, [enabled]);\n\n  if (!enabled) return null;\n\n  const getPositionStyles = () => {\n    const base = {\n      position: 'fixed',\n      zIndex: 9999,\n      padding: '12px',\n      background: 'rgba(0, 0, 0, 0.9)',\n      color: 'white',\n      borderRadius: '8px',\n      fontSize: '12px',\n      fontFamily: 'monospace',\n      backdropFilter: 'blur(10px)',\n      border: '1px solid rgba(255, 255, 255, 0.1)'\n    };\n\n    switch (position) {\n      case 'top-left':\n        return { ...base, top: '20px', left: '20px' };\n      case 'top-right':\n        return { ...base, top: '20px', right: '20px' };\n      case 'bottom-left':\n        return { ...base, bottom: '20px', left: '20px' };\n      case 'bottom-right':\n      default:\n        return { ...base, bottom: '20px', right: '20px' };\n    }\n  };\n\n  const getFPSColor = (fps) => {\n    if (fps >= 55) return '#10B981'; // Green\n    if (fps >= 30) return '#F59E0B'; // Yellow\n    return '#EF4444'; // Red\n  };\n\n  const getMemoryColor = (memory) => {\n    if (memory < 50) return '#10B981'; // Green\n    if (memory < 100) return '#F59E0B'; // Yellow\n    return '#EF4444'; // Red\n  };\n\n  return (\n    <>\n      {/* Toggle Button */}\n      <motion.button\n        onClick={() => setIsVisible(!isVisible)}\n        style={{\n          position: 'fixed',\n          bottom: '20px',\n          right: '20px',\n          width: '48px',\n          height: '48px',\n          borderRadius: '50%',\n          background: 'rgba(0, 0, 0, 0.8)',\n          border: '1px solid rgba(255, 255, 255, 0.2)',\n          color: 'white',\n          cursor: 'pointer',\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          zIndex: 9998,\n          backdropFilter: 'blur(10px)'\n        }}\n        whileHover={{ scale: 1.1 }}\n        whileTap={{ scale: 0.9 }}\n      >\n        <FiActivity size={20} />\n      </motion.button>\n\n      {/* Performance Panel */}\n      <AnimatePresence>\n        {isVisible && (\n          <motion.div\n            initial={{ opacity: 0, scale: 0.8 }}\n            animate={{ opacity: 1, scale: 1 }}\n            exit={{ opacity: 0, scale: 0.8 }}\n            style={getPositionStyles()}\n          >\n            <div style={{ display: 'flex', alignItems: 'center', marginBottom: '12px' }}>\n              <FiMonitor size={16} style={{ marginRight: '8px' }} />\n              <span style={{ fontWeight: 'bold' }}>Performance Monitor</span>\n              <button\n                onClick={() => setIsVisible(false)}\n                style={{\n                  background: 'none',\n                  border: 'none',\n                  color: 'white',\n                  cursor: 'pointer',\n                  marginLeft: 'auto',\n                  padding: '4px'\n                }}\n              >\n                <FiX size={14} />\n              </button>\n            </div>\n\n            <div style={{ display: 'grid', gap: '8px' }}>\n              {/* FPS */}\n              <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n                <span>FPS:</span>\n                <span style={{ color: getFPSColor(metrics.fps), fontWeight: 'bold' }}>\n                  {metrics.fps}\n                </span>\n              </div>\n\n              {/* Memory Usage */}\n              <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n                <span>Memory:</span>\n                <span style={{ color: getMemoryColor(metrics.memory), fontWeight: 'bold' }}>\n                  {metrics.memory} MB\n                </span>\n              </div>\n\n              {/* Render Time */}\n              <div style={{ display: 'flex', justifyContent: 'space-between', alignItems: 'center' }}>\n                <span>Render:</span>\n                <span style={{ color: metrics.renderTime > 16 ? '#EF4444' : '#10B981', fontWeight: 'bold' }}>\n                  {metrics.renderTime.toFixed(2)}ms\n                </span>\n              </div>\n\n              {/* Performance Tips */}\n              <div style={{ marginTop: '12px', padding: '8px', background: 'rgba(255, 255, 255, 0.1)', borderRadius: '4px' }}>\n                <div style={{ fontSize: '11px', opacity: 0.8 }}>\n                  {metrics.fps < 30 && <div style={{ color: '#EF4444' }}>⚠️ Low FPS detected</div>}\n                  {metrics.memory > 100 && <div style={{ color: '#EF4444' }}>⚠️ High memory usage</div>}\n                  {metrics.renderTime > 16 && <div style={{ color: '#EF4444' }}>⚠️ Slow renders</div>}\n                  {metrics.fps >= 55 && metrics.memory < 50 && metrics.renderTime <= 16 && (\n                    <div style={{ color: '#10B981' }}>✅ Performance optimal</div>\n                  )}\n                </div>\n              </div>\n\n              {/* Performance Actions */}\n              <div style={{ marginTop: '8px', display: 'flex', gap: '8px' }}>\n                <button\n                  onClick={() => {\n                    // Clear caches\n                    if ('caches' in window) {\n                      caches.keys().then(names => {\n                        names.forEach(name => caches.delete(name));\n                      });\n                    }\n                    // Force garbage collection if available\n                    if (window.gc) {\n                      window.gc();\n                    }\n                  }}\n                  style={{\n                    background: 'rgba(59, 130, 246, 0.2)',\n                    border: '1px solid rgba(59, 130, 246, 0.3)',\n                    color: '#60A5FA',\n                    padding: '4px 8px',\n                    borderRadius: '4px',\n                    fontSize: '10px',\n                    cursor: 'pointer'\n                  }}\n                >\n                  <FiRefreshCw size={10} style={{ marginRight: '4px' }} />\n                  Clear Cache\n                </button>\n                \n                <button\n                  onClick={() => {\n                    console.log('Performance Metrics:', metrics);\n                    console.log('Performance Entries:', performance.getEntries());\n                  }}\n                  style={{\n                    background: 'rgba(16, 185, 129, 0.2)',\n                    border: '1px solid rgba(16, 185, 129, 0.3)',\n                    color: '#34D399',\n                    padding: '4px 8px',\n                    borderRadius: '4px',\n                    fontSize: '10px',\n                    cursor: 'pointer'\n                  }}\n                >\n                  <FiCpu size={10} style={{ marginRight: '4px' }} />\n                  Log Metrics\n                </button>\n              </div>\n            </div>\n          </motion.div>\n        )}\n      </AnimatePresence>\n    </>\n  );\n});\n\nPerformanceMonitor.displayName = 'PerformanceMonitor';\n\nexport default PerformanceMonitor;\n"],"names":["PerformanceMonitor","memo","enabled","position","isVisible","setIsVisible","useState","metrics","setMetrics","frameCount","useRef","lastTime","animationFrame","useEffect","calculateFPS","currentTime","fps","prev","observer","list","renderEntries","entry","avgRenderTime","sum","getPositionStyles","base","getFPSColor","getMemoryColor","memory","jsxs","Fragment","jsx","motion","FiActivity","AnimatePresence","FiMonitor","FiX","names","name","FiRefreshCw","FiCpu"],"mappings":"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"}